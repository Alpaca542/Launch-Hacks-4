(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Hw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gg={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function pI(){if(aE)return Su;aE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Su.Fragment=t,Su.jsx=n,Su.jsxs=n,Su}var oE;function yI(){return oE||(oE=1,gg.exports=pI()),gg.exports}var gt=yI(),pg={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function _I(){if(lE)return Ut;lE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,P={};function I(N,Y,et){this.props=N,this.context=Y,this.refs=P,this.updater=et||S}I.prototype.isReactComponent={},I.prototype.setState=function(N,Y){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Y,"setState")},I.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function z(){}z.prototype=I.prototype;function H(N,Y,et){this.props=N,this.context=Y,this.refs=P,this.updater=et||S}var F=H.prototype=new z;F.constructor=H,O(F,I.prototype),F.isPureReactComponent=!0;var q=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},it=Object.prototype.hasOwnProperty;function V(N,Y,et,st,ct,pt){return et=pt.ref,{$$typeof:e,type:N,key:Y,ref:et!==void 0?et:null,props:pt}}function A(N,Y){return V(N.type,Y,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function k(N){var Y={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(et){return Y[et]})}var L=/\/+/g;function U(N,Y){return typeof N=="object"&&N!==null&&N.key!=null?k(""+N.key):Y.toString(36)}function D(){}function M(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(D,D):(N.status="pending",N.then(function(Y){N.status==="pending"&&(N.status="fulfilled",N.value=Y)},function(Y){N.status==="pending"&&(N.status="rejected",N.reason=Y)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Q(N,Y,et,st,ct){var pt=typeof N;(pt==="undefined"||pt==="boolean")&&(N=null);var yt=!1;if(N===null)yt=!0;else switch(pt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(N.$$typeof){case e:case t:yt=!0;break;case y:return yt=N._init,Q(yt(N._payload),Y,et,st,ct)}}if(yt)return ct=ct(N),yt=st===""?"."+U(N,0):st,q(ct)?(et="",yt!=null&&(et=yt.replace(L,"$&/")+"/"),Q(ct,Y,et,"",function(kt){return kt})):ct!=null&&(R(ct)&&(ct=A(ct,et+(ct.key==null||N&&N.key===ct.key?"":(""+ct.key).replace(L,"$&/")+"/")+yt)),Y.push(ct)),1;yt=0;var It=st===""?".":st+":";if(q(N))for(var At=0;At<N.length;At++)st=N[At],pt=It+U(st,At),yt+=Q(st,Y,et,pt,ct);else if(At=E(N),typeof At=="function")for(N=At.call(N),At=0;!(st=N.next()).done;)st=st.value,pt=It+U(st,At++),yt+=Q(st,Y,et,pt,ct);else if(pt==="object"){if(typeof N.then=="function")return Q(M(N),Y,et,st,ct);throw Y=String(N),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return yt}function x(N,Y,et){if(N==null)return N;var st=[],ct=0;return Q(N,st,"","",function(pt){return Y.call(et,pt,ct++)}),st}function j(N){if(N._status===-1){var Y=N._result;Y=Y(),Y.then(function(et){(N._status===0||N._status===-1)&&(N._status=1,N._result=et)},function(et){(N._status===0||N._status===-1)&&(N._status=2,N._result=et)}),N._status===-1&&(N._status=0,N._result=Y)}if(N._status===1)return N._result.default;throw N._result}var J=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function X(){}return Ut.Children={map:x,forEach:function(N,Y,et){x(N,function(){Y.apply(this,arguments)},et)},count:function(N){var Y=0;return x(N,function(){Y++}),Y},toArray:function(N){return x(N,function(Y){return Y})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ut.Component=I,Ut.Fragment=n,Ut.Profiler=a,Ut.PureComponent=H,Ut.StrictMode=r,Ut.Suspense=m,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(N){return K.H.useMemoCache(N)}},Ut.cache=function(N){return function(){return N.apply(null,arguments)}},Ut.cloneElement=function(N,Y,et){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var st=O({},N.props),ct=N.key,pt=void 0;if(Y!=null)for(yt in Y.ref!==void 0&&(pt=void 0),Y.key!==void 0&&(ct=""+Y.key),Y)!it.call(Y,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&Y.ref===void 0||(st[yt]=Y[yt]);var yt=arguments.length-2;if(yt===1)st.children=et;else if(1<yt){for(var It=Array(yt),At=0;At<yt;At++)It[At]=arguments[At+2];st.children=It}return V(N.type,ct,void 0,void 0,pt,st)},Ut.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ut.createElement=function(N,Y,et){var st,ct={},pt=null;if(Y!=null)for(st in Y.key!==void 0&&(pt=""+Y.key),Y)it.call(Y,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ct[st]=Y[st]);var yt=arguments.length-2;if(yt===1)ct.children=et;else if(1<yt){for(var It=Array(yt),At=0;At<yt;At++)It[At]=arguments[At+2];ct.children=It}if(N&&N.defaultProps)for(st in yt=N.defaultProps,yt)ct[st]===void 0&&(ct[st]=yt[st]);return V(N,pt,void 0,void 0,null,ct)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(N){return{$$typeof:d,render:N}},Ut.isValidElement=R,Ut.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:j}},Ut.memo=function(N,Y){return{$$typeof:g,type:N,compare:Y===void 0?null:Y}},Ut.startTransition=function(N){var Y=K.T,et={};K.T=et;try{var st=N(),ct=K.S;ct!==null&&ct(et,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(X,J)}catch(pt){J(pt)}finally{K.T=Y}},Ut.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ut.use=function(N){return K.H.use(N)},Ut.useActionState=function(N,Y,et){return K.H.useActionState(N,Y,et)},Ut.useCallback=function(N,Y){return K.H.useCallback(N,Y)},Ut.useContext=function(N){return K.H.useContext(N)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(N,Y){return K.H.useDeferredValue(N,Y)},Ut.useEffect=function(N,Y,et){var st=K.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(N,Y)},Ut.useId=function(){return K.H.useId()},Ut.useImperativeHandle=function(N,Y,et){return K.H.useImperativeHandle(N,Y,et)},Ut.useInsertionEffect=function(N,Y){return K.H.useInsertionEffect(N,Y)},Ut.useLayoutEffect=function(N,Y){return K.H.useLayoutEffect(N,Y)},Ut.useMemo=function(N,Y){return K.H.useMemo(N,Y)},Ut.useOptimistic=function(N,Y){return K.H.useOptimistic(N,Y)},Ut.useReducer=function(N,Y,et){return K.H.useReducer(N,Y,et)},Ut.useRef=function(N){return K.H.useRef(N)},Ut.useState=function(N){return K.H.useState(N)},Ut.useSyncExternalStore=function(N,Y,et){return K.H.useSyncExternalStore(N,Y,et)},Ut.useTransition=function(){return K.H.useTransition()},Ut.version="19.1.0",Ut}var uE;function lc(){return uE||(uE=1,pg.exports=_I()),pg.exports}var $=lc();const lt=Hw($);var yg={exports:{}},bu={},_g={exports:{}},vg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function vI(){return cE||(cE=1,function(e){function t(x,j){var J=x.length;x.push(j);t:for(;0<J;){var X=J-1>>>1,N=x[X];if(0<a(N,j))x[X]=j,x[J]=N,J=X;else break t}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var j=x[0],J=x.pop();if(J!==j){x[0]=J;t:for(var X=0,N=x.length,Y=N>>>1;X<Y;){var et=2*(X+1)-1,st=x[et],ct=et+1,pt=x[ct];if(0>a(st,J))ct<N&&0>a(pt,st)?(x[X]=pt,x[ct]=J,X=ct):(x[X]=st,x[et]=J,X=et);else if(ct<N&&0>a(pt,J))x[X]=pt,x[ct]=J,X=ct;else break t}}return j}function a(x,j){var J=x.sortIndex-j.sortIndex;return J!==0?J:x.id-j.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var m=[],g=[],y=1,v=null,E=3,S=!1,O=!1,P=!1,I=!1,z=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function q(x){for(var j=n(g);j!==null;){if(j.callback===null)r(g);else if(j.startTime<=x)r(g),j.sortIndex=j.expirationTime,t(m,j);else break;j=n(g)}}function K(x){if(P=!1,q(x),!O)if(n(m)!==null)O=!0,it||(it=!0,U());else{var j=n(g);j!==null&&Q(K,j.startTime-x)}}var it=!1,V=-1,A=5,R=-1;function k(){return I?!0:!(e.unstable_now()-R<A)}function L(){if(I=!1,it){var x=e.unstable_now();R=x;var j=!0;try{t:{O=!1,P&&(P=!1,H(V),V=-1),S=!0;var J=E;try{e:{for(q(x),v=n(m);v!==null&&!(v.expirationTime>x&&k());){var X=v.callback;if(typeof X=="function"){v.callback=null,E=v.priorityLevel;var N=X(v.expirationTime<=x);if(x=e.unstable_now(),typeof N=="function"){v.callback=N,q(x),j=!0;break e}v===n(m)&&r(m),q(x)}else r(m);v=n(m)}if(v!==null)j=!0;else{var Y=n(g);Y!==null&&Q(K,Y.startTime-x),j=!1}}break t}finally{v=null,E=J,S=!1}j=void 0}}finally{j?U():it=!1}}}var U;if(typeof F=="function")U=function(){F(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,M=D.port2;D.port1.onmessage=L,U=function(){M.postMessage(null)}}else U=function(){z(L,0)};function Q(x,j){V=z(function(){x(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(x){switch(E){case 1:case 2:case 3:var j=3;break;default:j=E}var J=E;E=j;try{return x()}finally{E=J}},e.unstable_requestPaint=function(){I=!0},e.unstable_runWithPriority=function(x,j){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var J=E;E=x;try{return j()}finally{E=J}},e.unstable_scheduleCallback=function(x,j,J){var X=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?X+J:X):J=X,x){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=J+N,x={id:y++,callback:j,priorityLevel:x,startTime:J,expirationTime:N,sortIndex:-1},J>X?(x.sortIndex=J,t(g,x),n(m)===null&&x===n(g)&&(P?(H(V),V=-1):P=!0,Q(K,J-X))):(x.sortIndex=N,t(m,x),O||S||(O=!0,it||(it=!0,U()))),x},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(x){var j=E;return function(){var J=E;E=j;try{return x.apply(this,arguments)}finally{E=J}}}}(vg)),vg}var hE;function EI(){return hE||(hE=1,_g.exports=vI()),_g.exports}var Eg={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function TI(){if(fE)return _n;fE=1;var e=lc();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:g,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return l(m,g,null,y)},_n.flushSync=function(m){var g=c.T,y=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=y,r.d.f()}},_n.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},_n.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},_n.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,v=d(y,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:S}):y==="script"&&r.d.X(m,{crossOrigin:v,integrity:E,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},_n.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},_n.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,v=d(y,g.crossOrigin);r.d.L(m,y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},_n.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},_n.requestFormReset=function(m){r.d.r(m)},_n.unstable_batchedUpdates=function(m,g){return m(g)},_n.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.0",_n}var dE;function qw(){if(dE)return Eg.exports;dE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Eg.exports=TI(),Eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE;function wI(){if(mE)return bu;mE=1;var e=EI(),t=lc(),n=qw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),i;if(p===u)return d(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var w=!1,b=f.child;b;){if(b===o){w=!0,o=f,u=p;break}if(b===u){w=!0,u=f,o=p;break}b=b.sibling}if(!w){for(b=p.child;b;){if(b===o){w=!0,o=p,u=f;break}if(b===u){w=!0,u=p,o=f;break}b=b.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),it=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function M(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case I:return"Profiler";case P:return"StrictMode";case K:return"Suspense";case it:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case F:return(i.displayName||"Context")+".Provider";case H:return(i._context.displayName||"Context")+".Consumer";case q:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case V:return s=i.displayName||null,s!==null?s:M(i.type)||"Memo";case A:s=i._payload,i=i._init;try{return M(i(s))}catch{}}return null}var Q=Array.isArray,x=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},X=[],N=-1;function Y(i){return{current:i}}function et(i){0>N||(i.current=X[N],X[N]=null,N--)}function st(i,s){N++,X[N]=i.current,i.current=s}var ct=Y(null),pt=Y(null),yt=Y(null),It=Y(null);function At(i,s){switch(st(yt,s),st(pt,i),st(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Vv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Vv(s),i=kv(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}et(ct),st(ct,i)}function kt(){et(ct),et(pt),et(yt)}function Pt(i){i.memoizedState!==null&&st(It,i);var s=ct.current,o=kv(s,i.type);s!==o&&(st(pt,i),st(ct,o))}function ue(i){pt.current===i&&(et(ct),et(pt)),It.current===i&&(et(It),_u._currentValue=J)}var ce=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,_e=e.unstable_cancelCallback,he=e.unstable_shouldYield,Xe=e.unstable_requestPaint,Lt=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,xe=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,Ui=e.unstable_LowPriority,zn=e.unstable_IdlePriority,Sn=e.log,Si=e.unstable_setDisableYieldValue,te=null,Ft=null;function Ve(i){if(typeof Sn=="function"&&Si(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(te,i)}catch{}}var Te=Math.clz32?Math.clz32:Qe,zi=Math.log,ke=Math.LN2;function Qe(i){return i>>>=0,i===0?32:31-(zi(i)/ke|0)|0}var bn=256,An=4194304;function Ze(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function an(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?f=Ze(u):(w&=b,w!==0?f=Ze(w):o||(o=b&~i,o!==0&&(f=Ze(o))))):(b=u&~p,b!==0?f=Ze(b):w!==0?f=Ze(w):o||(o=u&~i,o!==0&&(f=Ze(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function Rn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function dr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mr(){var i=bn;return bn<<=1,(bn&4194048)===0&&(bn=256),i}function bi(){var i=An;return An<<=1,(An&62914560)===0&&(An=4194304),i}function Bn(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function ni(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Hn(i,s,o,u,f,p){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,B=i.expirationTimes,nt=i.hiddenUpdates;for(o=w&~o;0<o;){var ut=31-Te(o),ft=1<<ut;b[ut]=0,B[ut]=-1;var rt=nt[ut];if(rt!==null)for(nt[ut]=null,ut=0;ut<rt.length;ut++){var at=rt[ut];at!==null&&(at.lane&=-536870913)}o&=~ft}u!==0&&ii(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(w&~s))}function ii(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Te(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Qs(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Te(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Bi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Hi(){var i=j.p;return i!==0?i:(i=window.event,i===void 0?32:tE(i.type))}function $a(i,s){var o=j.p;try{return j.p=i,s()}finally{j.p=o}}var de=Math.random().toString(36).slice(2),Ne="__reactFiber$"+de,Ae="__reactProps$"+de,Dn="__reactContainer$"+de,Zs="__reactEvents$"+de,bl="__reactListeners$"+de,qi="__reactHandles$"+de,Ya="__reactResources$"+de,gr="__reactMarker$"+de;function Fi(i){delete i[Ne],delete i[Ae],delete i[Zs],delete i[bl],delete i[qi]}function ri(i){var s=i[Ne];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Dn]||o[Ne]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=zv(i);i!==null;){if(o=i[Ne])return o;i=zv(i)}return s}i=o,o=i.parentNode}return null}function si(i){if(i=i[Ne]||i[Dn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ai(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function on(i){var s=i[Ya];return s||(s=i[Ya]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function we(i){i[gr]=!0}var Ws=new Set,Zr={};function qn(i,s){Ai(i,s),Ai(i+"Capture",s)}function Ai(i,s){for(Zr[i]=s,i=0;i<s.length;i++)Ws.add(s[i])}var Js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ka={},pr={};function Xa(i){return ce.call(pr,i)?!0:ce.call(Ka,i)?!1:Js.test(i)?pr[i]=!0:(Ka[i]=!0,!1)}function ji(i,s,o){if(Xa(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function oi(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function He(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var Gi,Qa;function Ri(i){if(Gi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Gi=s&&s[1]||"",Qa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gi+i+Qa}var Wr=!1;function $i(i,s){if(!i||Wr)return"";Wr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(at){var rt=at}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(at){rt=at}i.call(ft.prototype)}}else{try{throw Error()}catch(at){rt=at}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(at){if(at&&rt&&typeof at.stack=="string")return[at.stack,rt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],b=p[1];if(w&&b){var B=w.split(`
`),nt=b.split(`
`);for(f=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;f<nt.length&&!nt[f].includes("DetermineComponentFrameRoot");)f++;if(u===B.length||f===nt.length)for(u=B.length-1,f=nt.length-1;1<=u&&0<=f&&B[u]!==nt[f];)f--;for(;1<=u&&0<=f;u--,f--)if(B[u]!==nt[f]){if(u!==1||f!==1)do if(u--,f--,0>f||B[u]!==nt[f]){var ut=`
`+B[u].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=u&&0<=f);break}}}finally{Wr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ri(o):""}function Al(i){switch(i.tag){case 26:case 27:case 5:return Ri(i.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return $i(i.type,!1);case 11:return $i(i.type.render,!1);case 1:return $i(i.type,!0);case 31:return Ri("Activity");default:return""}}function Za(i){try{var s="";do s+=Al(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function In(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Rl(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vd(i){var s=Rl(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,p.call(this,w)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Wa(i){i._valueTracker||(i._valueTracker=vd(i))}function Il(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Rl(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function ta(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ed=/[\n"\\]/g;function Pe(i){return i.replace(Ed,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fn(i,s,o,u,f,p,w,b){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+In(s)):i.value!==""+In(s)&&(i.value=""+In(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Jr(i,w,In(s)):o!=null?Jr(i,w,In(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+In(b):i.removeAttribute("name")}function ea(i,s,o,u,f,p,w,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+In(o):"",s=s!=null?""+In(s):o,b||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Jr(i,s,o){s==="number"&&ta(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function yr(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+In(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function se(i,s,o){if(s!=null&&(s=""+In(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+In(o):""}function na(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(Q(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=In(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function li(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var ia=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bc(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||ia.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Cl(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&bc(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&bc(i,p,s[p])}function xl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(i){return wd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var _r=null;function ui(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vr=null,Er=null;function Nl(i){var s=si(i);if(s&&(i=s.stateNode)){var o=i[Ae]||null;t:switch(i=s.stateNode,s.type){case"input":if(Fn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pe(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[Ae]||null;if(!f)throw Error(r(90));Fn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Il(u)}break t;case"textarea":se(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&yr(i,!!o.multiple,s,!1)}}}var Yi=!1;function Ac(i,s,o){if(Yi)return i(s,o);Yi=!0;try{var u=i(s);return u}finally{if(Yi=!1,(vr!==null||Er!==null)&&(_h(),vr&&(s=vr,i=Er,Er=vr=null,Nl(s),i)))for(s=0;s<i.length;s++)Nl(i[s])}}function ra(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Ae]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ci=!1;if(Ii)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){ci=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{ci=!1}var Ki=null,ts=null,Tr=null;function Dl(){if(Tr)return Tr;var i,s=ts,o=s.length,u,f="value"in Ki?Ki.value:Ki.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var w=o-i;for(u=1;u<=w&&s[o-u]===f[p-u];u++);return Tr=f.slice(i,1<u?1-u:void 0)}function Xi(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Qi(){return!0}function Ml(){return!1}function We(i){function s(o,u,f,p,w){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qi:Ml,this.isPropagationStopped=Ml,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),s}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=We(ee),aa=y({},ee,{view:0,detail:0}),Rc=We(aa),eo,no,Zi,oa=y({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Zi&&(Zi&&i.type==="mousemove"?(eo=i.screenX-Zi.screenX,no=i.screenY-Zi.screenY):no=eo=0,Zi=i),eo)},movementY:function(i){return"movementY"in i?i.movementY:no}}),hi=We(oa),Ic=y({},oa,{dataTransfer:0}),Sd=We(Ic),la=y({},aa,{relatedTarget:0}),io=We(la),Ol=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=We(Ol),Cc=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),so=We(Cc),bd=y({},ee,{data:0}),Vl=We(bd),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Nc[i])?!!s[i]:!1}function ca(){return kl}var Dc=y({},aa,{key:function(i){if(i.key){var s=ua[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Xi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(i){return i.type==="keypress"?Xi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ao=We(Dc),Mc=y({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pl=We(Mc),wr=y({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),Oc=We(wr),Vc=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),kc=We(Vc),Pc=y({},oa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),oo=We(Pc),Cn=y({},ee,{newState:0,oldState:0}),Lc=We(Cn),Uc=[9,13,27,32],Wi=Ii&&"CompositionEvent"in window,h=null;Ii&&"documentMode"in document&&(h=document.documentMode);var _=Ii&&"TextEvent"in window&&!h,T=Ii&&(!Wi||h&&8<h&&11>=h),C=" ",W=!1;function ot(i,s){switch(i){case"keyup":return Uc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _t(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Kt=!1;function qe(i,s){switch(i){case"compositionend":return _t(s);case"keypress":return s.which!==32?null:(W=!0,C);case"textInput":return i=s.data,i===C&&W?null:i;default:return null}}function Xt(i,s){if(Kt)return i==="compositionend"||!Wi&&ot(i,s)?(i=Dl(),Tr=ts=Ki=null,Kt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var Je={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Je[i.type]:s==="textarea"}function Sr(i,s,o,u){vr?Er?Er.push(u):Er=[u]:vr=u,s=bh(s,"onChange"),0<s.length&&(o=new to("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var ln=null,Ji=null;function Ll(i){xv(i,0)}function zc(i){var s=ai(i);if(Il(s))return i}function Qy(i,s){if(i==="change")return s}var Zy=!1;if(Ii){var Ad;if(Ii){var Rd="oninput"in document;if(!Rd){var Wy=document.createElement("div");Wy.setAttribute("oninput","return;"),Rd=typeof Wy.oninput=="function"}Ad=Rd}else Ad=!1;Zy=Ad&&(!document.documentMode||9<document.documentMode)}function Jy(){ln&&(ln.detachEvent("onpropertychange",t_),Ji=ln=null)}function t_(i){if(i.propertyName==="value"&&zc(Ji)){var s=[];Sr(s,Ji,i,ui(i)),Ac(Ll,s)}}function $A(i,s,o){i==="focusin"?(Jy(),ln=s,Ji=o,ln.attachEvent("onpropertychange",t_)):i==="focusout"&&Jy()}function YA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return zc(Ji)}function KA(i,s){if(i==="click")return zc(s)}function XA(i,s){if(i==="input"||i==="change")return zc(s)}function QA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var jn=typeof Object.is=="function"?Object.is:QA;function Ul(i,s){if(jn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ce.call(s,f)||!jn(i[f],s[f]))return!1}return!0}function e_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function n_(i,s){var o=e_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=e_(o)}}function i_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?i_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function r_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=ta(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=ta(i.document)}return s}function Id(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var ZA=Ii&&"documentMode"in document&&11>=document.documentMode,lo=null,Cd=null,zl=null,xd=!1;function s_(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xd||lo==null||lo!==ta(u)||(u=lo,"selectionStart"in u&&Id(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),zl&&Ul(zl,u)||(zl=u,u=bh(Cd,"onSelect"),0<u.length&&(s=new to("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=lo)))}function ha(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var uo={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},Nd={},a_={};Ii&&(a_=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function fa(i){if(Nd[i])return Nd[i];if(!uo[i])return i;var s=uo[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in a_)return Nd[i]=s[o];return i}var o_=fa("animationend"),l_=fa("animationiteration"),u_=fa("animationstart"),WA=fa("transitionrun"),JA=fa("transitionstart"),tR=fa("transitioncancel"),c_=fa("transitionend"),h_=new Map,Dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dd.push("scrollEnd");function Ci(i,s){h_.set(i,s),qn(s,[i])}var f_=new WeakMap;function fi(i,s){if(typeof i=="object"&&i!==null){var o=f_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Za(s)},f_.set(i,s),s)}return{value:i,source:s,stack:Za(s)}}var di=[],co=0,Md=0;function Bc(){for(var i=co,s=Md=co=0;s<i;){var o=di[s];di[s++]=null;var u=di[s];di[s++]=null;var f=di[s];di[s++]=null;var p=di[s];if(di[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}p!==0&&d_(o,f,p)}}function Hc(i,s,o,u){di[co++]=i,di[co++]=s,di[co++]=o,di[co++]=u,Md|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Od(i,s,o,u){return Hc(i,s,o,u),qc(i)}function ho(i,s){return Hc(i,null,null,s),qc(i)}function d_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Te(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function qc(i){if(50<cu)throw cu=0,zm=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var fo={};function eR(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,s,o,u){return new eR(i,s,o,u)}function Vd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function br(i,s){var o=i.alternate;return o===null?(o=Gn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function m_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Fc(i,s,o,u,f,p){var w=0;if(u=i,typeof i=="function")Vd(i)&&(w=1);else if(typeof i=="string")w=iI(i,o,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case R:return i=Gn(31,o,s,f),i.elementType=R,i.lanes=p,i;case O:return da(o.children,f,p,s);case P:w=8,f|=24;break;case I:return i=Gn(12,o,s,f|2),i.elementType=I,i.lanes=p,i;case K:return i=Gn(13,o,s,f),i.elementType=K,i.lanes=p,i;case it:return i=Gn(19,o,s,f),i.elementType=it,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case z:case F:w=10;break t;case H:w=9;break t;case q:w=11;break t;case V:w=14;break t;case A:w=16,u=null;break t}w=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Gn(w,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function da(i,s,o,u){return i=Gn(7,i,u,s),i.lanes=o,i}function kd(i,s,o){return i=Gn(6,i,null,s),i.lanes=o,i}function Pd(i,s,o){return s=Gn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var mo=[],go=0,jc=null,Gc=0,mi=[],gi=0,ma=null,Ar=1,Rr="";function ga(i,s){mo[go++]=Gc,mo[go++]=jc,jc=i,Gc=s}function g_(i,s,o){mi[gi++]=Ar,mi[gi++]=Rr,mi[gi++]=ma,ma=i;var u=Ar;i=Rr;var f=32-Te(u)-1;u&=~(1<<f),o+=1;var p=32-Te(s)+f;if(30<p){var w=f-f%5;p=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Ar=1<<32-Te(s)+f|o<<f|u,Rr=p+i}else Ar=1<<p|o<<f|u,Rr=i}function Ld(i){i.return!==null&&(ga(i,1),g_(i,1,0))}function Ud(i){for(;i===jc;)jc=mo[--go],mo[go]=null,Gc=mo[--go],mo[go]=null;for(;i===ma;)ma=mi[--gi],mi[gi]=null,Rr=mi[--gi],mi[gi]=null,Ar=mi[--gi],mi[gi]=null}var xn=null,Re=null,Jt=!1,pa=null,tr=!1,zd=Error(r(519));function ya(i){var s=Error(r(418,""));throw ql(fi(s,i)),zd}function p_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Ne]=i,s[Ae]=u,o){case"dialog":Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":case"embed":Gt("load",s);break;case"video":case"audio":for(o=0;o<fu.length;o++)Gt(fu[o],s);break;case"source":Gt("error",s);break;case"img":case"image":case"link":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"input":Gt("invalid",s),ea(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Wa(s);break;case"select":Gt("invalid",s);break;case"textarea":Gt("invalid",s),na(s,u.value,u.defaultValue,u.children),Wa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Ov(s.textContent,o)?(u.popover!=null&&(Gt("beforetoggle",s),Gt("toggle",s)),u.onScroll!=null&&Gt("scroll",s),u.onScrollEnd!=null&&Gt("scrollend",s),u.onClick!=null&&(s.onclick=Ah),s=!0):s=!1,s||ya(i)}function y_(i){for(xn=i.return;xn;)switch(xn.tag){case 5:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:xn=xn.return}}function Bl(i){if(i!==xn)return!1;if(!Jt)return y_(i),Jt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||eg(i.type,i.memoizedProps)),o=!o),o&&Re&&ya(i),y_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){Re=Ni(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}Re=null}}else s===27?(s=Re,ps(i.type)?(i=sg,sg=null,Re=i):Re=s):Re=xn?Ni(i.stateNode.nextSibling):null;return!0}function Hl(){Re=xn=null,Jt=!1}function __(){var i=pa;return i!==null&&(Vn===null?Vn=i:Vn.push.apply(Vn,i),pa=null),i}function ql(i){pa===null?pa=[i]:pa.push(i)}var Bd=Y(null),_a=null,Ir=null;function es(i,s,o){st(Bd,s._currentValue),s._currentValue=o}function Cr(i){i._currentValue=Bd.current,et(Bd)}function Hd(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function qd(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;t:for(;p!==null;){var b=p;p=f;for(var B=0;B<s.length;B++)if(b.context===s[B]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),Hd(p.return,o,i),u||(w=null);break t}p=b.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),Hd(w,o,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Fl(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var b=f.type;jn(f.pendingProps.value,w.value)||(i!==null?i.push(b):i=[b])}}else if(f===It.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(_u):i=[_u])}f=f.return}i!==null&&qd(s,i,o,u),s.flags|=262144}function $c(i){for(i=i.firstContext;i!==null;){if(!jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function va(i){_a=i,Ir=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function yn(i){return v_(_a,i)}function Yc(i,s){return _a===null&&va(i),v_(i,s)}function v_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ir===null){if(i===null)throw Error(r(308));Ir=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ir=Ir.next=s;return o}var nR=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},iR=e.unstable_scheduleCallback,rR=e.unstable_NormalPriority,je={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fd(){return{controller:new nR,data:new Map,refCount:0}}function jl(i){i.refCount--,i.refCount===0&&iR(rR,function(){i.controller.abort()})}var Gl=null,jd=0,po=0,yo=null;function sR(i,s){if(Gl===null){var o=Gl=[];jd=0,po=$m(),yo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return jd++,s.then(E_,E_),s}function E_(){if(--jd===0&&Gl!==null){yo!==null&&(yo.status="fulfilled");var i=Gl;Gl=null,po=0,yo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function aR(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var T_=x.S;x.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&sR(i,s),T_!==null&&T_(i,s)};var Ea=Y(null);function Gd(){var i=Ea.current;return i!==null?i:me.pooledCache}function Kc(i,s){s===null?st(Ea,Ea.current):st(Ea,s.pool)}function w_(){var i=Gd();return i===null?null:{parent:je._currentValue,pool:i}}var $l=Error(r(460)),S_=Error(r(474)),Xc=Error(r(542)),$d={then:function(){}};function b_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Qc(){}function A_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Qc,Qc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,I_(i),i;default:if(typeof s.status=="string")s.then(Qc,Qc);else{if(i=me,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,I_(i),i}throw Yl=s,$l}}var Yl=null;function R_(){if(Yl===null)throw Error(r(459));var i=Yl;return Yl=null,i}function I_(i){if(i===$l||i===Xc)throw Error(r(483))}var ns=!1;function Yd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rs(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=qc(i),d_(i,null,o),s}return Hc(i,u,s,o),qc(i)}function Kl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qs(i,o)}}function Xd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Qd=!1;function Xl(){if(Qd){var i=yo;if(i!==null)throw i}}function Ql(i,s,o,u){Qd=!1;var f=i.updateQueue;ns=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var B=b,nt=B.next;B.next=null,w===null?p=nt:w.next=nt,w=B;var ut=i.alternate;ut!==null&&(ut=ut.updateQueue,b=ut.lastBaseUpdate,b!==w&&(b===null?ut.firstBaseUpdate=nt:b.next=nt,ut.lastBaseUpdate=B))}if(p!==null){var ft=f.baseState;w=0,ut=nt=B=null,b=p;do{var rt=b.lane&-536870913,at=rt!==b.lane;if(at?(Qt&rt)===rt:(u&rt)===rt){rt!==0&&rt===po&&(Qd=!0),ut!==null&&(ut=ut.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var Mt=i,Ct=b;rt=s;var le=o;switch(Ct.tag){case 1:if(Mt=Ct.payload,typeof Mt=="function"){ft=Mt.call(le,ft,rt);break t}ft=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Ct.payload,rt=typeof Mt=="function"?Mt.call(le,ft,rt):Mt,rt==null)break t;ft=y({},ft,rt);break t;case 2:ns=!0}}rt=b.callback,rt!==null&&(i.flags|=64,at&&(i.flags|=8192),at=f.callbacks,at===null?f.callbacks=[rt]:at.push(rt))}else at={lane:rt,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ut===null?(nt=ut=at,B=ft):ut=ut.next=at,w|=rt;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;at=b,b=at.next,at.next=null,f.lastBaseUpdate=at,f.shared.pending=null}}while(!0);ut===null&&(B=ft),f.baseState=B,f.firstBaseUpdate=nt,f.lastBaseUpdate=ut,p===null&&(f.shared.lanes=0),fs|=w,i.lanes=w,i.memoizedState=ft}}function C_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function x_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)C_(o[i],s)}var _o=Y(null),Zc=Y(0);function N_(i,s){i=kr,st(Zc,i),st(_o,s),kr=i|s.baseLanes}function Zd(){st(Zc,kr),st(_o,_o.current)}function Wd(){kr=Zc.current,et(_o),et(Zc)}var ss=0,zt=null,ae=null,Le=null,Wc=!1,vo=!1,Ta=!1,Jc=0,Zl=0,Eo=null,oR=0;function De(){throw Error(r(321))}function Jd(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!jn(i[o],s[o]))return!1;return!0}function tm(i,s,o,u,f,p){return ss=p,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,x.H=i===null||i.memoizedState===null?d0:m0,Ta=!1,p=o(u,f),Ta=!1,vo&&(p=M_(s,o,u,f)),D_(i),p}function D_(i){x.H=sh;var s=ae!==null&&ae.next!==null;if(ss=0,Le=ae=zt=null,Wc=!1,Zl=0,Eo=null,s)throw Error(r(300));i===null||tn||(i=i.dependencies,i!==null&&$c(i)&&(tn=!0))}function M_(i,s,o,u){zt=i;var f=0;do{if(vo&&(Eo=null),Zl=0,vo=!1,25<=f)throw Error(r(301));if(f+=1,Le=ae=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}x.H=mR,p=s(o,u)}while(vo);return p}function lR(){var i=x.H,s=i.useState()[0];return s=typeof s.then=="function"?Wl(s):s,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(zt.flags|=1024),s}function em(){var i=Jc!==0;return Jc=0,i}function nm(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function im(i){if(Wc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Wc=!1}ss=0,Le=ae=zt=null,vo=!1,Zl=Jc=0,Eo=null}function Mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?zt.memoizedState=Le=i:Le=Le.next=i,Le}function Ue(){if(ae===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var s=Le===null?zt.memoizedState:Le.next;if(s!==null)Le=s,ae=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Le===null?zt.memoizedState=Le=i:Le=Le.next=i}return Le}function rm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(i){var s=Zl;return Zl+=1,Eo===null&&(Eo=[]),i=A_(Eo,i,s),s=zt,(Le===null?s.memoizedState:Le.next)===null&&(s=s.alternate,x.H=s===null||s.memoizedState===null?d0:m0),i}function th(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Wl(i);if(i.$$typeof===F)return yn(i)}throw Error(r(438,String(i)))}function sm(i){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=rm(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=k;return s.index++,o}function xr(i,s){return typeof s=="function"?s(i):s}function eh(i){var s=Ue();return am(s,ae,i)}function am(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var b=w=null,B=null,nt=s,ut=!1;do{var ft=nt.lane&-536870913;if(ft!==nt.lane?(Qt&ft)===ft:(ss&ft)===ft){var rt=nt.revertLane;if(rt===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),ft===po&&(ut=!0);else if((ss&rt)===rt){nt=nt.next,rt===po&&(ut=!0);continue}else ft={lane:0,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},B===null?(b=B=ft,w=p):B=B.next=ft,zt.lanes|=rt,fs|=rt;ft=nt.action,Ta&&o(p,ft),p=nt.hasEagerState?nt.eagerState:o(p,ft)}else rt={lane:ft,revertLane:nt.revertLane,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},B===null?(b=B=rt,w=p):B=B.next=rt,zt.lanes|=ft,fs|=ft;nt=nt.next}while(nt!==null&&nt!==s);if(B===null?w=p:B.next=b,!jn(p,i.memoizedState)&&(tn=!0,ut&&(o=yo,o!==null)))throw o;i.memoizedState=p,i.baseState=w,i.baseQueue=B,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function om(i){var s=Ue(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=i(p,w.action),w=w.next;while(w!==f);jn(p,s.memoizedState)||(tn=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function O_(i,s,o){var u=zt,f=Ue(),p=Jt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var w=!jn((ae||f).memoizedState,o);w&&(f.memoizedState=o,tn=!0),f=f.queue;var b=P_.bind(null,u,f,i);if(Jl(2048,8,b,[i]),f.getSnapshot!==s||w||Le!==null&&Le.memoizedState.tag&1){if(u.flags|=2048,To(9,nh(),k_.bind(null,u,f,o,s),null),me===null)throw Error(r(349));p||(ss&124)!==0||V_(u,s,o)}return o}function V_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=rm(),zt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function k_(i,s,o,u){s.value=o,s.getSnapshot=u,L_(s)&&U_(i)}function P_(i,s,o){return o(function(){L_(s)&&U_(i)})}function L_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!jn(i,o)}catch{return!0}}function U_(i){var s=ho(i,2);s!==null&&Qn(s,i,2)}function lm(i){var s=Mn();if(typeof i=="function"){var o=i;if(i=o(),Ta){Ve(!0);try{o()}finally{Ve(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:i},s}function z_(i,s,o,u){return i.baseState=o,am(i,ae,typeof u=="function"?u:xr)}function uR(i,s,o,u,f){if(rh(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};x.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,B_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function B_(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=x.T,w={};x.T=w;try{var b=o(f,u),B=x.S;B!==null&&B(w,b),H_(i,s,b)}catch(nt){um(i,s,nt)}finally{x.T=p}}else try{p=o(f,u),H_(i,s,p)}catch(nt){um(i,s,nt)}}function H_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){q_(i,s,u)},function(u){return um(i,s,u)}):q_(i,s,o)}function q_(i,s,o){s.status="fulfilled",s.value=o,F_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,B_(i,o)))}function um(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,F_(s),s=s.next;while(s!==u)}i.action=null}function F_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function j_(i,s){return s}function G_(i,s){if(Jt){var o=me.formState;if(o!==null){t:{var u=zt;if(Jt){if(Re){e:{for(var f=Re,p=tr;f.nodeType!==8;){if(!p){f=null;break e}if(f=Ni(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Re=Ni(f.nextSibling),u=f.data==="F!";break t}}ya(u)}u=!1}u&&(s=o[0])}}return o=Mn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j_,lastRenderedState:s},o.queue=u,o=c0.bind(null,zt,u),u.dispatch=o,u=lm(!1),p=mm.bind(null,zt,!1,u.queue),u=Mn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=uR.bind(null,zt,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function $_(i){var s=Ue();return Y_(s,ae,i)}function Y_(i,s,o){if(s=am(i,s,j_)[0],i=eh(xr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Wl(s)}catch(w){throw w===$l?Xc:w}else u=s;s=Ue();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,To(9,nh(),cR.bind(null,f,o),null)),[u,p,i]}function cR(i,s){i.action=s}function K_(i){var s=Ue(),o=ae;if(o!==null)return Y_(s,o,i);Ue(),s=s.memoizedState,o=Ue();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function To(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=rm(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function nh(){return{destroy:void 0,resource:void 0}}function X_(){return Ue().memoizedState}function ih(i,s,o,u){var f=Mn();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=To(1|s,nh(),o,u)}function Jl(i,s,o,u){var f=Ue();u=u===void 0?null:u;var p=f.memoizedState.inst;ae!==null&&u!==null&&Jd(u,ae.memoizedState.deps)?f.memoizedState=To(s,p,o,u):(zt.flags|=i,f.memoizedState=To(1|s,p,o,u))}function Q_(i,s){ih(8390656,8,i,s)}function Z_(i,s){Jl(2048,8,i,s)}function W_(i,s){return Jl(4,2,i,s)}function J_(i,s){return Jl(4,4,i,s)}function t0(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function e0(i,s,o){o=o!=null?o.concat([i]):null,Jl(4,4,t0.bind(null,s,i),o)}function cm(){}function n0(i,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Jd(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function i0(i,s){var o=Ue();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Jd(s,u[1]))return u[0];if(u=i(),Ta){Ve(!0);try{i()}finally{Ve(!1)}}return o.memoizedState=[u,s],u}function hm(i,s,o){return o===void 0||(ss&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=av(),zt.lanes|=i,fs|=i,o)}function r0(i,s,o,u){return jn(o,s)?o:_o.current!==null?(i=hm(i,o,u),jn(i,s)||(tn=!0),i):(ss&42)===0?(tn=!0,i.memoizedState=o):(i=av(),zt.lanes|=i,fs|=i,s)}function s0(i,s,o,u,f){var p=j.p;j.p=p!==0&&8>p?p:8;var w=x.T,b={};x.T=b,mm(i,!1,s,o);try{var B=f(),nt=x.S;if(nt!==null&&nt(b,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ut=aR(B,u);tu(i,s,ut,Xn(i))}else tu(i,s,u,Xn(i))}catch(ft){tu(i,s,{then:function(){},status:"rejected",reason:ft},Xn())}finally{j.p=p,x.T=w}}function hR(){}function fm(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=a0(i).queue;s0(i,f,s,J,o===null?hR:function(){return o0(i),o(u)})}function a0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:J},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function o0(i){var s=a0(i).next.queue;tu(i,s,{},Xn())}function dm(){return yn(_u)}function l0(){return Ue().memoizedState}function u0(){return Ue().memoizedState}function fR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Xn();i=is(o);var u=rs(s,i,o);u!==null&&(Qn(u,s,o),Kl(u,s,o)),s={cache:Fd()},i.payload=s;return}s=s.return}}function dR(i,s,o){var u=Xn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},rh(i)?h0(s,o):(o=Od(i,s,o,u),o!==null&&(Qn(o,i,u),f0(o,s,u)))}function c0(i,s,o){var u=Xn();tu(i,s,o,u)}function tu(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(rh(i))h0(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,b=p(w,o);if(f.hasEagerState=!0,f.eagerState=b,jn(b,w))return Hc(i,s,f,0),me===null&&Bc(),!1}catch{}finally{}if(o=Od(i,s,f,u),o!==null)return Qn(o,i,u),f0(o,s,u),!0}return!1}function mm(i,s,o,u){if(u={lane:2,revertLane:$m(),action:u,hasEagerState:!1,eagerState:null,next:null},rh(i)){if(s)throw Error(r(479))}else s=Od(i,o,u,2),s!==null&&Qn(s,i,2)}function rh(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function h0(i,s){vo=Wc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function f0(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qs(i,o)}}var sh={readContext:yn,use:th,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De,useHostTransitionStatus:De,useFormState:De,useActionState:De,useOptimistic:De,useMemoCache:De,useCacheRefresh:De},d0={readContext:yn,use:th,useCallback:function(i,s){return Mn().memoizedState=[i,s===void 0?null:s],i},useContext:yn,useEffect:Q_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,ih(4194308,4,t0.bind(null,s,i),o)},useLayoutEffect:function(i,s){return ih(4194308,4,i,s)},useInsertionEffect:function(i,s){ih(4,2,i,s)},useMemo:function(i,s){var o=Mn();s=s===void 0?null:s;var u=i();if(Ta){Ve(!0);try{i()}finally{Ve(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Mn();if(o!==void 0){var f=o(s);if(Ta){Ve(!0);try{o(s)}finally{Ve(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=dR.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Mn();return i={current:i},s.memoizedState=i},useState:function(i){i=lm(i);var s=i.queue,o=c0.bind(null,zt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:cm,useDeferredValue:function(i,s){var o=Mn();return hm(o,i,s)},useTransition:function(){var i=lm(!1);return i=s0.bind(null,zt,i.queue,!0,!1),Mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=zt,f=Mn();if(Jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),me===null)throw Error(r(349));(Qt&124)!==0||V_(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,Q_(P_.bind(null,u,p,i),[i]),u.flags|=2048,To(9,nh(),k_.bind(null,u,p,o,s),null),o},useId:function(){var i=Mn(),s=me.identifierPrefix;if(Jt){var o=Rr,u=Ar;o=(u&~(1<<32-Te(u)-1)).toString(32)+o,s=""+s+"R"+o,o=Jc++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=oR++,s=""+s+"r"+o.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:dm,useFormState:G_,useActionState:G_,useOptimistic:function(i){var s=Mn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=mm.bind(null,zt,!0,o),o.dispatch=s,[i,s]},useMemoCache:sm,useCacheRefresh:function(){return Mn().memoizedState=fR.bind(null,zt)}},m0={readContext:yn,use:th,useCallback:n0,useContext:yn,useEffect:Z_,useImperativeHandle:e0,useInsertionEffect:W_,useLayoutEffect:J_,useMemo:i0,useReducer:eh,useRef:X_,useState:function(){return eh(xr)},useDebugValue:cm,useDeferredValue:function(i,s){var o=Ue();return r0(o,ae.memoizedState,i,s)},useTransition:function(){var i=eh(xr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Wl(i),s]},useSyncExternalStore:O_,useId:l0,useHostTransitionStatus:dm,useFormState:$_,useActionState:$_,useOptimistic:function(i,s){var o=Ue();return z_(o,ae,i,s)},useMemoCache:sm,useCacheRefresh:u0},mR={readContext:yn,use:th,useCallback:n0,useContext:yn,useEffect:Z_,useImperativeHandle:e0,useInsertionEffect:W_,useLayoutEffect:J_,useMemo:i0,useReducer:om,useRef:X_,useState:function(){return om(xr)},useDebugValue:cm,useDeferredValue:function(i,s){var o=Ue();return ae===null?hm(o,i,s):r0(o,ae.memoizedState,i,s)},useTransition:function(){var i=om(xr)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:Wl(i),s]},useSyncExternalStore:O_,useId:l0,useHostTransitionStatus:dm,useFormState:K_,useActionState:K_,useOptimistic:function(i,s){var o=Ue();return ae!==null?z_(o,ae,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:sm,useCacheRefresh:u0},wo=null,eu=0;function ah(i){var s=eu;return eu+=1,wo===null&&(wo=[]),A_(wo,i,s)}function nu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function oh(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function g0(i){var s=i._init;return s(i._payload)}function p0(i){function s(Z,G){if(i){var tt=Z.deletions;tt===null?(Z.deletions=[G],Z.flags|=16):tt.push(G)}}function o(Z,G){if(!i)return null;for(;G!==null;)s(Z,G),G=G.sibling;return null}function u(Z){for(var G=new Map;Z!==null;)Z.key!==null?G.set(Z.key,Z):G.set(Z.index,Z),Z=Z.sibling;return G}function f(Z,G){return Z=br(Z,G),Z.index=0,Z.sibling=null,Z}function p(Z,G,tt){return Z.index=tt,i?(tt=Z.alternate,tt!==null?(tt=tt.index,tt<G?(Z.flags|=67108866,G):tt):(Z.flags|=67108866,G)):(Z.flags|=1048576,G)}function w(Z){return i&&Z.alternate===null&&(Z.flags|=67108866),Z}function b(Z,G,tt,ht){return G===null||G.tag!==6?(G=kd(tt,Z.mode,ht),G.return=Z,G):(G=f(G,tt),G.return=Z,G)}function B(Z,G,tt,ht){var Tt=tt.type;return Tt===O?ut(Z,G,tt.props.children,ht,tt.key):G!==null&&(G.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===A&&g0(Tt)===G.type)?(G=f(G,tt.props),nu(G,tt),G.return=Z,G):(G=Fc(tt.type,tt.key,tt.props,null,Z.mode,ht),nu(G,tt),G.return=Z,G)}function nt(Z,G,tt,ht){return G===null||G.tag!==4||G.stateNode.containerInfo!==tt.containerInfo||G.stateNode.implementation!==tt.implementation?(G=Pd(tt,Z.mode,ht),G.return=Z,G):(G=f(G,tt.children||[]),G.return=Z,G)}function ut(Z,G,tt,ht,Tt){return G===null||G.tag!==7?(G=da(tt,Z.mode,ht,Tt),G.return=Z,G):(G=f(G,tt),G.return=Z,G)}function ft(Z,G,tt){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=kd(""+G,Z.mode,tt),G.return=Z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case E:return tt=Fc(G.type,G.key,G.props,null,Z.mode,tt),nu(tt,G),tt.return=Z,tt;case S:return G=Pd(G,Z.mode,tt),G.return=Z,G;case A:var ht=G._init;return G=ht(G._payload),ft(Z,G,tt)}if(Q(G)||U(G))return G=da(G,Z.mode,tt,null),G.return=Z,G;if(typeof G.then=="function")return ft(Z,ah(G),tt);if(G.$$typeof===F)return ft(Z,Yc(Z,G),tt);oh(Z,G)}return null}function rt(Z,G,tt,ht){var Tt=G!==null?G.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Tt!==null?null:b(Z,G,""+tt,ht);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:return tt.key===Tt?B(Z,G,tt,ht):null;case S:return tt.key===Tt?nt(Z,G,tt,ht):null;case A:return Tt=tt._init,tt=Tt(tt._payload),rt(Z,G,tt,ht)}if(Q(tt)||U(tt))return Tt!==null?null:ut(Z,G,tt,ht,null);if(typeof tt.then=="function")return rt(Z,G,ah(tt),ht);if(tt.$$typeof===F)return rt(Z,G,Yc(Z,tt),ht);oh(Z,tt)}return null}function at(Z,G,tt,ht,Tt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Z=Z.get(tt)||null,b(G,Z,""+ht,Tt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case E:return Z=Z.get(ht.key===null?tt:ht.key)||null,B(G,Z,ht,Tt);case S:return Z=Z.get(ht.key===null?tt:ht.key)||null,nt(G,Z,ht,Tt);case A:var Ht=ht._init;return ht=Ht(ht._payload),at(Z,G,tt,ht,Tt)}if(Q(ht)||U(ht))return Z=Z.get(tt)||null,ut(G,Z,ht,Tt,null);if(typeof ht.then=="function")return at(Z,G,tt,ah(ht),Tt);if(ht.$$typeof===F)return at(Z,G,tt,Yc(G,ht),Tt);oh(G,ht)}return null}function Mt(Z,G,tt,ht){for(var Tt=null,Ht=null,St=G,xt=G=0,nn=null;St!==null&&xt<tt.length;xt++){St.index>xt?(nn=St,St=null):nn=St.sibling;var Wt=rt(Z,St,tt[xt],ht);if(Wt===null){St===null&&(St=nn);break}i&&St&&Wt.alternate===null&&s(Z,St),G=p(Wt,G,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt,St=nn}if(xt===tt.length)return o(Z,St),Jt&&ga(Z,xt),Tt;if(St===null){for(;xt<tt.length;xt++)St=ft(Z,tt[xt],ht),St!==null&&(G=p(St,G,xt),Ht===null?Tt=St:Ht.sibling=St,Ht=St);return Jt&&ga(Z,xt),Tt}for(St=u(St);xt<tt.length;xt++)nn=at(St,Z,xt,tt[xt],ht),nn!==null&&(i&&nn.alternate!==null&&St.delete(nn.key===null?xt:nn.key),G=p(nn,G,xt),Ht===null?Tt=nn:Ht.sibling=nn,Ht=nn);return i&&St.forEach(function(Ts){return s(Z,Ts)}),Jt&&ga(Z,xt),Tt}function Ct(Z,G,tt,ht){if(tt==null)throw Error(r(151));for(var Tt=null,Ht=null,St=G,xt=G=0,nn=null,Wt=tt.next();St!==null&&!Wt.done;xt++,Wt=tt.next()){St.index>xt?(nn=St,St=null):nn=St.sibling;var Ts=rt(Z,St,Wt.value,ht);if(Ts===null){St===null&&(St=nn);break}i&&St&&Ts.alternate===null&&s(Z,St),G=p(Ts,G,xt),Ht===null?Tt=Ts:Ht.sibling=Ts,Ht=Ts,St=nn}if(Wt.done)return o(Z,St),Jt&&ga(Z,xt),Tt;if(St===null){for(;!Wt.done;xt++,Wt=tt.next())Wt=ft(Z,Wt.value,ht),Wt!==null&&(G=p(Wt,G,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return Jt&&ga(Z,xt),Tt}for(St=u(St);!Wt.done;xt++,Wt=tt.next())Wt=at(St,Z,xt,Wt.value,ht),Wt!==null&&(i&&Wt.alternate!==null&&St.delete(Wt.key===null?xt:Wt.key),G=p(Wt,G,xt),Ht===null?Tt=Wt:Ht.sibling=Wt,Ht=Wt);return i&&St.forEach(function(gI){return s(Z,gI)}),Jt&&ga(Z,xt),Tt}function le(Z,G,tt,ht){if(typeof tt=="object"&&tt!==null&&tt.type===O&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case E:t:{for(var Tt=tt.key;G!==null;){if(G.key===Tt){if(Tt=tt.type,Tt===O){if(G.tag===7){o(Z,G.sibling),ht=f(G,tt.props.children),ht.return=Z,Z=ht;break t}}else if(G.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===A&&g0(Tt)===G.type){o(Z,G.sibling),ht=f(G,tt.props),nu(ht,tt),ht.return=Z,Z=ht;break t}o(Z,G);break}else s(Z,G);G=G.sibling}tt.type===O?(ht=da(tt.props.children,Z.mode,ht,tt.key),ht.return=Z,Z=ht):(ht=Fc(tt.type,tt.key,tt.props,null,Z.mode,ht),nu(ht,tt),ht.return=Z,Z=ht)}return w(Z);case S:t:{for(Tt=tt.key;G!==null;){if(G.key===Tt)if(G.tag===4&&G.stateNode.containerInfo===tt.containerInfo&&G.stateNode.implementation===tt.implementation){o(Z,G.sibling),ht=f(G,tt.children||[]),ht.return=Z,Z=ht;break t}else{o(Z,G);break}else s(Z,G);G=G.sibling}ht=Pd(tt,Z.mode,ht),ht.return=Z,Z=ht}return w(Z);case A:return Tt=tt._init,tt=Tt(tt._payload),le(Z,G,tt,ht)}if(Q(tt))return Mt(Z,G,tt,ht);if(U(tt)){if(Tt=U(tt),typeof Tt!="function")throw Error(r(150));return tt=Tt.call(tt),Ct(Z,G,tt,ht)}if(typeof tt.then=="function")return le(Z,G,ah(tt),ht);if(tt.$$typeof===F)return le(Z,G,Yc(Z,tt),ht);oh(Z,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,G!==null&&G.tag===6?(o(Z,G.sibling),ht=f(G,tt),ht.return=Z,Z=ht):(o(Z,G),ht=kd(tt,Z.mode,ht),ht.return=Z,Z=ht),w(Z)):o(Z,G)}return function(Z,G,tt,ht){try{eu=0;var Tt=le(Z,G,tt,ht);return wo=null,Tt}catch(St){if(St===$l||St===Xc)throw St;var Ht=Gn(29,St,null,Z.mode);return Ht.lanes=ht,Ht.return=Z,Ht}finally{}}}var So=p0(!0),y0=p0(!1),pi=Y(null),er=null;function as(i){var s=i.alternate;st(Ge,Ge.current&1),st(pi,i),er===null&&(s===null||_o.current!==null||s.memoizedState!==null)&&(er=i)}function _0(i){if(i.tag===22){if(st(Ge,Ge.current),st(pi,i),er===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(er=i)}}else os()}function os(){st(Ge,Ge.current),st(pi,pi.current)}function Nr(i){et(pi),er===i&&(er=null),et(Ge)}var Ge=Y(0);function lh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||rg(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function gm(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var pm={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Xn(),f=is(u);f.payload=s,o!=null&&(f.callback=o),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Kl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Xn(),f=is(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=rs(i,f,u),s!==null&&(Qn(s,i,u),Kl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Xn(),u=is(o);u.tag=2,s!=null&&(u.callback=s),s=rs(i,u,o),s!==null&&(Qn(s,i,o),Kl(s,i,o))}};function v0(i,s,o,u,f,p,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,w):s.prototype&&s.prototype.isPureReactComponent?!Ul(o,u)||!Ul(f,p):!0}function E0(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&pm.enqueueReplaceState(s,s.state,null)}function wa(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var uh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function T0(i){uh(i)}function w0(i){console.error(i)}function S0(i){uh(i)}function ch(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function b0(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ym(i,s,o){return o=is(o),o.tag=3,o.payload={element:null},o.callback=function(){ch(i,s)},o}function A0(i){return i=is(i),i.tag=3,i}function R0(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){b0(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){b0(s,o,u),typeof f!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function gR(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Fl(s,o,f,!0),o=pi.current,o!==null){switch(o.tag){case 13:return er===null?Hm():o.alternate===null&&Ie===0&&(Ie=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===$d?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Fm(i,u,f)),!1;case 22:return o.flags|=65536,u===$d?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Fm(i,u,f)),!1}throw Error(r(435,o.tag))}return Fm(i,u,f),Hm(),!1}if(Jt)return s=pi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==zd&&(i=Error(r(422),{cause:u}),ql(fi(i,o)))):(u!==zd&&(s=Error(r(423),{cause:u}),ql(fi(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=fi(u,o),f=ym(i.stateNode,u,f),Xd(i,f),Ie!==4&&(Ie=2)),!1;var p=Error(r(520),{cause:u});if(p=fi(p,o),uu===null?uu=[p]:uu.push(p),Ie!==4&&(Ie=2),s===null)return!0;u=fi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=ym(o.stateNode,u,i),Xd(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ds===null||!ds.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=A0(f),R0(f,i,o,u),Xd(o,f),!1}o=o.return}while(o!==null);return!1}var I0=Error(r(461)),tn=!1;function un(i,s,o,u){s.child=i===null?y0(s,null,o,u):So(s,i.child,o,u)}function C0(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var w={};for(var b in u)b!=="ref"&&(w[b]=u[b])}else w=u;return va(s),u=tm(i,s,o,w,p,f),b=em(),i!==null&&!tn?(nm(i,s,f),Dr(i,s,f)):(Jt&&b&&Ld(s),s.flags|=1,un(i,s,u,f),s.child)}function x0(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!Vd(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,N0(i,s,p,u,f)):(i=Fc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Am(i,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Ul,o(w,u)&&i.ref===s.ref)return Dr(i,s,f)}return s.flags|=1,i=br(p,u),i.ref=s.ref,i.return=s,s.child=i}function N0(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(Ul(p,u)&&i.ref===s.ref)if(tn=!1,s.pendingProps=u=p,Am(i,f))(i.flags&131072)!==0&&(tn=!0);else return s.lanes=i.lanes,Dr(i,s,f)}return _m(i,s,o,u,f)}function D0(i,s,o){var u=s.pendingProps,f=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(f=s.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return M0(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Kc(s,p!==null?p.cachePool:null),p!==null?N_(s,p):Zd(),_0(s);else return s.lanes=s.childLanes=536870912,M0(i,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Kc(s,p.cachePool),N_(s,p),os(),s.memoizedState=null):(i!==null&&Kc(s,null),Zd(),os());return un(i,s,f,o),s.child}function M0(i,s,o,u){var f=Gd();return f=f===null?null:{parent:je._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&Kc(s,null),Zd(),_0(s),i!==null&&Fl(i,s,u,!0),null}function hh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function _m(i,s,o,u,f){return va(s),o=tm(i,s,o,u,void 0,f),u=em(),i!==null&&!tn?(nm(i,s,f),Dr(i,s,f)):(Jt&&u&&Ld(s),s.flags|=1,un(i,s,o,f),s.child)}function O0(i,s,o,u,f,p){return va(s),s.updateQueue=null,o=M_(s,u,o,f),D_(i),u=em(),i!==null&&!tn?(nm(i,s,p),Dr(i,s,p)):(Jt&&u&&Ld(s),s.flags|=1,un(i,s,o,p),s.child)}function V0(i,s,o,u,f){if(va(s),s.stateNode===null){var p=fo,w=o.contextType;typeof w=="object"&&w!==null&&(p=yn(w)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=pm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Yd(s),w=o.contextType,p.context=typeof w=="object"&&w!==null?yn(w):fo,p.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(gm(s,o,w,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&pm.enqueueReplaceState(p,p.state,null),Ql(s,u,p,f),Xl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var b=s.memoizedProps,B=wa(o,b);p.props=B;var nt=p.context,ut=o.contextType;w=fo,typeof ut=="object"&&ut!==null&&(w=yn(ut));var ft=o.getDerivedStateFromProps;ut=typeof ft=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,ut||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||nt!==w)&&E0(s,p,u,w),ns=!1;var rt=s.memoizedState;p.state=rt,Ql(s,u,p,f),Xl(),nt=s.memoizedState,b||rt!==nt||ns?(typeof ft=="function"&&(gm(s,o,ft,u),nt=s.memoizedState),(B=ns||v0(s,o,B,u,rt,nt,w))?(ut||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=nt),p.props=u,p.state=nt,p.context=w,u=B):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Kd(i,s),w=s.memoizedProps,ut=wa(o,w),p.props=ut,ft=s.pendingProps,rt=p.context,nt=o.contextType,B=fo,typeof nt=="object"&&nt!==null&&(B=yn(nt)),b=o.getDerivedStateFromProps,(nt=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ft||rt!==B)&&E0(s,p,u,B),ns=!1,rt=s.memoizedState,p.state=rt,Ql(s,u,p,f),Xl();var at=s.memoizedState;w!==ft||rt!==at||ns||i!==null&&i.dependencies!==null&&$c(i.dependencies)?(typeof b=="function"&&(gm(s,o,b,u),at=s.memoizedState),(ut=ns||v0(s,o,ut,u,rt,at,B)||i!==null&&i.dependencies!==null&&$c(i.dependencies))?(nt||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,at,B),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,at,B)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&rt===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&rt===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=at),p.props=u,p.state=at,p.context=B,u=ut):(typeof p.componentDidUpdate!="function"||w===i.memoizedProps&&rt===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&rt===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,hh(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=So(s,i.child,null,f),s.child=So(s,null,o,f)):un(i,s,o,f),s.memoizedState=p.state,i=s.child):i=Dr(i,s,f),i}function k0(i,s,o,u){return Hl(),s.flags|=256,un(i,s,o,u),s.child}var vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Em(i){return{baseLanes:i,cachePool:w_()}}function Tm(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=yi),i}function P0(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,w;if((w=p)||(w=i!==null&&i.memoizedState===null?!1:(Ge.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Jt){if(f?as(s):os(),Jt){var b=Re,B;if(B=b){t:{for(B=b,b=tr;B.nodeType!==8;){if(!b){b=null;break t}if(B=Ni(B.nextSibling),B===null){b=null;break t}}b=B}b!==null?(s.memoizedState={dehydrated:b,treeContext:ma!==null?{id:Ar,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},B=Gn(18,null,null,0),B.stateNode=b,B.return=s,s.child=B,xn=s,Re=null,B=!0):B=!1}B||ya(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return rg(b)?s.lanes=32:s.lanes=536870912,null;Nr(s)}return b=u.children,u=u.fallback,f?(os(),f=s.mode,b=fh({mode:"hidden",children:b},f),u=da(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,f=s.child,f.memoizedState=Em(o),f.childLanes=Tm(i,w,o),s.memoizedState=vm,u):(as(s),wm(s,b))}if(B=i.memoizedState,B!==null&&(b=B.dehydrated,b!==null)){if(p)s.flags&256?(as(s),s.flags&=-257,s=Sm(i,s,o)):s.memoizedState!==null?(os(),s.child=i.child,s.flags|=128,s=null):(os(),f=u.fallback,b=s.mode,u=fh({mode:"visible",children:u.children},b),f=da(f,b,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,So(s,i.child,null,o),u=s.child,u.memoizedState=Em(o),u.childLanes=Tm(i,w,o),s.memoizedState=vm,s=f);else if(as(s),rg(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var nt=w.dgst;w=nt,u=Error(r(419)),u.stack="",u.digest=w,ql({value:u,source:null,stack:null}),s=Sm(i,s,o)}else if(tn||Fl(i,s,o,!1),w=(o&i.childLanes)!==0,tn||w){if(w=me,w!==null&&(u=o&-o,u=(u&42)!==0?1:Bi(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==B.retryLane))throw B.retryLane=u,ho(i,u),Qn(w,i,u),I0;b.data==="$?"||Hm(),s=Sm(i,s,o)}else b.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=B.treeContext,Re=Ni(b.nextSibling),xn=s,Jt=!0,pa=null,tr=!1,i!==null&&(mi[gi++]=Ar,mi[gi++]=Rr,mi[gi++]=ma,Ar=i.id,Rr=i.overflow,ma=s),s=wm(s,u.children),s.flags|=4096);return s}return f?(os(),f=u.fallback,b=s.mode,B=i.child,nt=B.sibling,u=br(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,nt!==null?f=br(nt,f):(f=da(f,b,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,b=i.child.memoizedState,b===null?b=Em(o):(B=b.cachePool,B!==null?(nt=je._currentValue,B=B.parent!==nt?{parent:nt,pool:nt}:B):B=w_(),b={baseLanes:b.baseLanes|o,cachePool:B}),f.memoizedState=b,f.childLanes=Tm(i,w,o),s.memoizedState=vm,u):(as(s),o=i.child,i=o.sibling,o=br(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=o,s.memoizedState=null,o)}function wm(i,s){return s=fh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function fh(i,s){return i=Gn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Sm(i,s,o){return So(s,i.child,null,o),i=wm(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function L0(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Hd(i.return,s,o)}function bm(i,s,o,u,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function U0(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(un(i,s,u.children,o),u=Ge.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&L0(i,o,s);else if(i.tag===19)L0(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(st(Ge,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&lh(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),bm(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&lh(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}bm(s,!0,o,null,p);break;case"together":bm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),fs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Fl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=br(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=br(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Am(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&$c(i)))}function pR(i,s,o){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),es(s,je,i.memoizedState.cache),Hl();break;case 27:case 5:Pt(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:es(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(as(s),s.flags|=128,null):(o&s.child.childLanes)!==0?P0(i,s,o):(as(s),i=Dr(i,s,o),i!==null?i.sibling:null);as(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Fl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return U0(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(Ge,Ge.current),u)break;return null;case 22:case 23:return s.lanes=0,D0(i,s,o);case 24:es(s,je,i.memoizedState.cache)}return Dr(i,s,o)}function z0(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)tn=!0;else{if(!Am(i,o)&&(s.flags&128)===0)return tn=!1,pR(i,s,o);tn=(i.flags&131072)!==0}else tn=!1,Jt&&(s.flags&1048576)!==0&&g_(s,Gc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Vd(u)?(i=wa(u,i),s.tag=1,s=V0(null,s,u,i,o)):(s.tag=0,s=_m(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===q){s.tag=11,s=C0(null,s,u,i,o);break t}else if(f===V){s.tag=14,s=x0(null,s,u,i,o);break t}}throw s=M(u)||u,Error(r(306,s,""))}}return s;case 0:return _m(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=wa(u,s.pendingProps),V0(i,s,u,f,o);case 3:t:{if(At(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,Kd(i,s),Ql(s,u,null,o);var w=s.memoizedState;if(u=w.cache,es(s,je,u),u!==p.cache&&qd(s,[je],o,!0),Xl(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=k0(i,s,u,o);break t}else if(u!==f){f=fi(Error(r(424)),s),ql(f),s=k0(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Re=Ni(i.firstChild),xn=s,Jt=!0,pa=null,tr=!0,o=y0(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Hl(),u===f){s=Dr(i,s,o);break t}un(i,s,u,o)}s=s.child}return s;case 26:return hh(i,s),i===null?(o=Fv(s.type,null,s.pendingProps,null))?s.memoizedState=o:Jt||(o=s.type,i=s.pendingProps,u=Rh(yt.current).createElement(o),u[Ne]=s,u[Ae]=i,hn(u,o,i),we(u),s.stateNode=u):s.memoizedState=Fv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Pt(s),i===null&&Jt&&(u=s.stateNode=Bv(s.type,s.pendingProps,yt.current),xn=s,tr=!0,f=Re,ps(s.type)?(sg=f,Re=Ni(u.firstChild)):Re=f),un(i,s,s.pendingProps.children,o),hh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Jt&&((f=u=Re)&&(u=jR(u,s.type,s.pendingProps,tr),u!==null?(s.stateNode=u,xn=s,Re=Ni(u.firstChild),tr=!1,f=!0):f=!1),f||ya(s)),Pt(s),f=s.type,p=s.pendingProps,w=i!==null?i.memoizedProps:null,u=p.children,eg(f,p)?u=null:w!==null&&eg(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=tm(i,s,lR,null,null,o),_u._currentValue=f),hh(i,s),un(i,s,u,o),s.child;case 6:return i===null&&Jt&&((i=o=Re)&&(o=GR(o,s.pendingProps,tr),o!==null?(s.stateNode=o,xn=s,Re=null,i=!0):i=!1),i||ya(s)),null;case 13:return P0(i,s,o);case 4:return At(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=So(s,null,u,o):un(i,s,u,o),s.child;case 11:return C0(i,s,s.type,s.pendingProps,o);case 7:return un(i,s,s.pendingProps,o),s.child;case 8:return un(i,s,s.pendingProps.children,o),s.child;case 12:return un(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,es(s,s.type,u.value),un(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,va(s),f=yn(f),u=u(f),s.flags|=1,un(i,s,u,o),s.child;case 14:return x0(i,s,s.type,s.pendingProps,o);case 15:return N0(i,s,s.type,s.pendingProps,o);case 19:return U0(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=fh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=br(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return D0(i,s,o);case 24:return va(s),u=yn(je),i===null?(f=Gd(),f===null&&(f=me,p=Fd(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},Yd(s),es(s,je,f)):((i.lanes&o)!==0&&(Kd(i,s),Ql(s,null,null,o),Xl()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),es(s,je,u)):(u=p.cache,es(s,je,u),u!==f.cache&&qd(s,[je],o,!0))),un(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Mr(i){i.flags|=4}function B0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Kv(s)){if(s=pi.current,s!==null&&((Qt&4194048)===Qt?er!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||s!==er))throw Yl=$d,S_;i.flags|=8192}}function dh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?bi():536870912,i.lanes|=s,Io|=s)}function iu(i,s){if(!Jt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Se(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function yR(i,s,o){var u=s.pendingProps;switch(Ud(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(s),null;case 1:return Se(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Cr(je),kt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Bl(s)?Mr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,__())),Se(s),null;case 26:return o=s.memoizedState,i===null?(Mr(s),o!==null?(Se(s),B0(s,o)):(Se(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Mr(s),Se(s),B0(s,o)):(Se(s),s.flags&=-16777217):(i.memoizedProps!==u&&Mr(s),Se(s),s.flags&=-16777217),null;case 27:ue(s),o=yt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Se(s),null}i=ct.current,Bl(s)?p_(s):(i=Bv(f,u,o),s.stateNode=i,Mr(s))}return Se(s),null;case 5:if(ue(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Se(s),null}if(i=ct.current,Bl(s))p_(s);else{switch(f=Rh(yt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[Ne]=s,i[Ae]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(hn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Mr(s)}}return Se(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Mr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=yt.current,Bl(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=xn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ne]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Ov(i.nodeValue,o)),i||ya(s)}else i=Rh(i).createTextNode(u),i[Ne]=s,s.stateNode=i}return Se(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Bl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ne]=s}else Hl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Se(s),f=!1}else f=__(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Nr(s),s):(Nr(s),null)}if(Nr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),dh(s,s.updateQueue),Se(s),null;case 4:return kt(),i===null&&Qm(s.stateNode.containerInfo),Se(s),null;case 10:return Cr(s.type),Se(s),null;case 19:if(et(Ge),f=s.memoizedState,f===null)return Se(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)iu(f,!1);else{if(Ie!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=lh(i),p!==null){for(s.flags|=128,iu(f,!1),i=p.updateQueue,s.updateQueue=i,dh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)m_(o,i),o=o.sibling;return st(Ge,Ge.current&1|2),s.child}i=i.sibling}f.tail!==null&&Lt()>ph&&(s.flags|=128,u=!0,iu(f,!1),s.lanes=4194304)}else{if(!u)if(i=lh(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,dh(s,i),iu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Jt)return Se(s),null}else 2*Lt()-f.renderingStartTime>ph&&o!==536870912&&(s.flags|=128,u=!0,iu(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(i=f.last,i!==null?i.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Lt(),s.sibling=null,i=Ge.current,st(Ge,u?i&1|2:i&1),s):(Se(s),null);case 22:case 23:return Nr(s),Wd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Se(s),s.subtreeFlags&6&&(s.flags|=8192)):Se(s),o=s.updateQueue,o!==null&&dh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&et(Ea),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Cr(je),Se(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function _R(i,s){switch(Ud(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Cr(je),kt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 13:if(Nr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Hl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return et(Ge),null;case 4:return kt(),null;case 10:return Cr(s.type),null;case 22:case 23:return Nr(s),Wd(),i!==null&&et(Ea),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Cr(je),null;case 25:return null;default:return null}}function H0(i,s){switch(Ud(s),s.tag){case 3:Cr(je),kt();break;case 26:case 27:case 5:ue(s);break;case 4:kt();break;case 13:Nr(s);break;case 19:et(Ge);break;case 10:Cr(s.type);break;case 22:case 23:Nr(s),Wd(),i!==null&&et(Ea);break;case 24:Cr(je)}}function ru(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,w=o.inst;u=p(),w.destroy=u}o=o.next}while(o!==f)}}catch(b){fe(s,s.return,b)}}function ls(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var w=u.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,f=s;var B=o,nt=b;try{nt()}catch(ut){fe(f,B,ut)}}}u=u.next}while(u!==p)}}catch(ut){fe(s,s.return,ut)}}function q0(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{x_(s,o)}catch(u){fe(i,i.return,u)}}}function F0(i,s,o){o.props=wa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){fe(i,s,u)}}function su(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){fe(i,s,f)}}function nr(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){fe(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){fe(i,s,f)}else o.current=null}function j0(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){fe(i,i.return,f)}}function Rm(i,s,o){try{var u=i.stateNode;zR(u,i.type,o,s),u[Ae]=s}catch(f){fe(i,i.return,f)}}function G0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ps(i.type)||i.tag===4}function Im(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||G0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Cm(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Ah));else if(u!==4&&(u===27&&ps(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Cm(i,s,o),i=i.sibling;i!==null;)Cm(i,s,o),i=i.sibling}function mh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&ps(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(mh(i,s,o),i=i.sibling;i!==null;)mh(i,s,o),i=i.sibling}function $0(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);hn(s,u,o),s[Ne]=i,s[Ae]=o}catch(p){fe(i,i.return,p)}}var Or=!1,Me=!1,xm=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,en=null;function vR(i,s){if(i=i.containerInfo,Jm=Mh,i=r_(i),Id(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var w=0,b=-1,B=-1,nt=0,ut=0,ft=i,rt=null;e:for(;;){for(var at;ft!==o||f!==0&&ft.nodeType!==3||(b=w+f),ft!==p||u!==0&&ft.nodeType!==3||(B=w+u),ft.nodeType===3&&(w+=ft.nodeValue.length),(at=ft.firstChild)!==null;)rt=ft,ft=at;for(;;){if(ft===i)break e;if(rt===o&&++nt===f&&(b=w),rt===p&&++ut===u&&(B=w),(at=ft.nextSibling)!==null)break;ft=rt,rt=ft.parentNode}ft=at}o=b===-1||B===-1?null:{start:b,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(tg={focusedElem:i,selectionRange:o},Mh=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Mt=wa(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Mt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ct){fe(o,o.return,Ct)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)ig(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ig(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function K0(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:us(i,o),u&4&&ru(5,o);break;case 1:if(us(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(w){fe(o,o.return,w)}else{var f=wa(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){fe(o,o.return,w)}}u&64&&q0(o),u&512&&su(o,o.return);break;case 3:if(us(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{x_(i,s)}catch(w){fe(o,o.return,w)}}break;case 27:s===null&&u&4&&$0(o);case 26:case 5:us(i,o),s===null&&u&4&&j0(o),u&512&&su(o,o.return);break;case 12:us(i,o);break;case 13:us(i,o),u&4&&Z0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=CR.bind(null,o),$R(i,o))));break;case 22:if(u=o.memoizedState!==null||Or,!u){s=s!==null&&s.memoizedState!==null||Me,f=Or;var p=Me;Or=u,(Me=s)&&!p?cs(i,o,(o.subtreeFlags&8772)!==0):us(i,o),Or=f,Me=p}break;case 30:break;default:us(i,o)}}function X0(i){var s=i.alternate;s!==null&&(i.alternate=null,X0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Fi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ve=null,On=!1;function Vr(i,s,o){for(o=o.child;o!==null;)Q0(i,s,o),o=o.sibling}function Q0(i,s,o){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(te,o)}catch{}switch(o.tag){case 26:Me||nr(o,s),Vr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Me||nr(o,s);var u=ve,f=On;ps(o.type)&&(ve=o.stateNode,On=!1),Vr(i,s,o),mu(o.stateNode),ve=u,On=f;break;case 5:Me||nr(o,s);case 6:if(u=ve,f=On,ve=null,Vr(i,s,o),ve=u,On=f,ve!==null)if(On)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(o.stateNode)}catch(p){fe(o,s,p)}else try{ve.removeChild(o.stateNode)}catch(p){fe(o,s,p)}break;case 18:ve!==null&&(On?(i=ve,Uv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),wu(i)):Uv(ve,o.stateNode));break;case 4:u=ve,f=On,ve=o.stateNode.containerInfo,On=!0,Vr(i,s,o),ve=u,On=f;break;case 0:case 11:case 14:case 15:Me||ls(2,o,s),Me||ls(4,o,s),Vr(i,s,o);break;case 1:Me||(nr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&F0(o,s,u)),Vr(i,s,o);break;case 21:Vr(i,s,o);break;case 22:Me=(u=Me)||o.memoizedState!==null,Vr(i,s,o),Me=u;break;default:Vr(i,s,o)}}function Z0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{wu(i)}catch(o){fe(s,s.return,o)}}function ER(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Y0),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Y0),s;default:throw Error(r(435,i.tag))}}function Nm(i,s){var o=ER(i);s.forEach(function(u){var f=xR.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function $n(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,w=s,b=w;t:for(;b!==null;){switch(b.tag){case 27:if(ps(b.type)){ve=b.stateNode,On=!1;break t}break;case 5:ve=b.stateNode,On=!1;break t;case 3:case 4:ve=b.stateNode.containerInfo,On=!0;break t}b=b.return}if(ve===null)throw Error(r(160));Q0(p,w,f),ve=null,On=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)W0(s,i),s=s.sibling}var xi=null;function W0(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$n(s,i),Yn(i),u&4&&(ls(3,i,i.return),ru(3,i),ls(5,i,i.return));break;case 1:$n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),u&64&&Or&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=xi;if($n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[gr]||p[Ne]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),hn(p,u,o),p[Ne]=i,we(p),u=p;break t;case"link":var w=$v("link","href",f).get(u+(o.href||""));if(w){for(var b=0;b<w.length;b++)if(p=w[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(b,1);break e}}p=f.createElement(u),hn(p,u,o),f.head.appendChild(p);break;case"meta":if(w=$v("meta","content",f).get(u+(o.content||""))){for(b=0;b<w.length;b++)if(p=w[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(b,1);break e}}p=f.createElement(u),hn(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Ne]=i,we(p),u=p}i.stateNode=u}else Yv(f,i.type,i.stateNode);else i.stateNode=Gv(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Yv(f,i.type,i.stateNode):Gv(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Rm(i,i.memoizedProps,o.memoizedProps)}break;case 27:$n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),o!==null&&u&4&&Rm(i,i.memoizedProps,o.memoizedProps);break;case 5:if($n(s,i),Yn(i),u&512&&(Me||o===null||nr(o,o.return)),i.flags&32){f=i.stateNode;try{li(f,"")}catch(at){fe(i,i.return,at)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,Rm(i,f,o!==null?o.memoizedProps:f)),u&1024&&(xm=!0);break;case 6:if($n(s,i),Yn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(at){fe(i,i.return,at)}}break;case 3:if(xh=null,f=xi,xi=Ih(s.containerInfo),$n(s,i),xi=f,Yn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{wu(s.containerInfo)}catch(at){fe(i,i.return,at)}xm&&(xm=!1,J0(i));break;case 4:u=xi,xi=Ih(i.stateNode.containerInfo),$n(s,i),Yn(i),xi=u;break;case 12:$n(s,i),Yn(i);break;case 13:$n(s,i),Yn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Pm=Lt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Nm(i,u)));break;case 22:f=i.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,nt=Or,ut=Me;if(Or=nt||f,Me=ut||B,$n(s,i),Me=ut,Or=nt,Yn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||B||Or||Me||Sa(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){B=o=s;try{if(p=B.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=B.stateNode;var ft=B.memoizedProps.style,rt=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;b.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(at){fe(B,B.return,at)}}}else if(s.tag===6){if(o===null){B=s;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(at){fe(B,B.return,at)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Nm(i,o))));break;case 19:$n(s,i),Yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Nm(i,u)));break;case 30:break;case 21:break;default:$n(s,i),Yn(i)}}function Yn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(G0(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=Im(i);mh(i,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(li(w,""),o.flags&=-33);var b=Im(i);mh(i,b,w);break;case 3:case 4:var B=o.stateNode.containerInfo,nt=Im(i);Cm(i,nt,B);break;default:throw Error(r(161))}}catch(ut){fe(i,i.return,ut)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function J0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;J0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function us(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)K0(i,s.alternate,s),s=s.sibling}function Sa(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ls(4,s,s.return),Sa(s);break;case 1:nr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&F0(s,s.return,o),Sa(s);break;case 27:mu(s.stateNode);case 26:case 5:nr(s,s.return),Sa(s);break;case 22:s.memoizedState===null&&Sa(s);break;case 30:Sa(s);break;default:Sa(s)}i=i.sibling}}function cs(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,w=p.flags;switch(p.tag){case 0:case 11:case 15:cs(f,p,o),ru(4,p);break;case 1:if(cs(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(nt){fe(u,u.return,nt)}if(u=p,f=u.updateQueue,f!==null){var b=u.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)C_(B[f],b)}catch(nt){fe(u,u.return,nt)}}o&&w&64&&q0(p),su(p,p.return);break;case 27:$0(p);case 26:case 5:cs(f,p,o),o&&u===null&&w&4&&j0(p),su(p,p.return);break;case 12:cs(f,p,o);break;case 13:cs(f,p,o),o&&w&4&&Z0(f,p);break;case 22:p.memoizedState===null&&cs(f,p,o),su(p,p.return);break;case 30:break;default:cs(f,p,o)}s=s.sibling}}function Dm(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&jl(o))}function Mm(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&jl(i))}function ir(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tv(i,s,o,u),s=s.sibling}function tv(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ir(i,s,o,u),f&2048&&ru(9,s);break;case 1:ir(i,s,o,u);break;case 3:ir(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&jl(i)));break;case 12:if(f&2048){ir(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,w=p.id,b=p.onPostCommit;typeof b=="function"&&b(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){fe(s,s.return,B)}}else ir(i,s,o,u);break;case 13:ir(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,w=s.alternate,s.memoizedState!==null?p._visibility&2?ir(i,s,o,u):au(i,s):p._visibility&2?ir(i,s,o,u):(p._visibility|=2,bo(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Dm(w,s);break;case 24:ir(i,s,o,u),f&2048&&Mm(s.alternate,s);break;default:ir(i,s,o,u)}}function bo(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,w=s,b=o,B=u,nt=w.flags;switch(w.tag){case 0:case 11:case 15:bo(p,w,b,B,f),ru(8,w);break;case 23:break;case 22:var ut=w.stateNode;w.memoizedState!==null?ut._visibility&2?bo(p,w,b,B,f):au(p,w):(ut._visibility|=2,bo(p,w,b,B,f)),f&&nt&2048&&Dm(w.alternate,w);break;case 24:bo(p,w,b,B,f),f&&nt&2048&&Mm(w.alternate,w);break;default:bo(p,w,b,B,f)}s=s.sibling}}function au(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:au(o,u),f&2048&&Dm(u.alternate,u);break;case 24:au(o,u),f&2048&&Mm(u.alternate,u);break;default:au(o,u)}s=s.sibling}}var ou=8192;function Ao(i){if(i.subtreeFlags&ou)for(i=i.child;i!==null;)ev(i),i=i.sibling}function ev(i){switch(i.tag){case 26:Ao(i),i.flags&ou&&i.memoizedState!==null&&sI(xi,i.memoizedState,i.memoizedProps);break;case 5:Ao(i);break;case 3:case 4:var s=xi;xi=Ih(i.stateNode.containerInfo),Ao(i),xi=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=ou,ou=16777216,Ao(i),ou=s):Ao(i));break;default:Ao(i)}}function nv(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function lu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,rv(u,i)}nv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)iv(i),i=i.sibling}function iv(i){switch(i.tag){case 0:case 11:case 15:lu(i),i.flags&2048&&ls(9,i,i.return);break;case 3:lu(i);break;case 12:lu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,gh(i)):lu(i);break;default:lu(i)}}function gh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,rv(u,i)}nv(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ls(8,s,s.return),gh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,gh(s));break;default:gh(s)}i=i.sibling}}function rv(i,s){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:ls(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:jl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else t:for(o=i;en!==null;){u=en;var f=u.sibling,p=u.return;if(X0(u),u===o){en=null;break t}if(f!==null){f.return=p,en=f;break t}en=p}}}var TR={getCacheForType:function(i){var s=yn(je),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},wR=typeof WeakMap=="function"?WeakMap:Map,ie=0,me=null,jt=null,Qt=0,re=0,Kn=null,hs=!1,Ro=!1,Om=!1,kr=0,Ie=0,fs=0,ba=0,Vm=0,yi=0,Io=0,uu=null,Vn=null,km=!1,Pm=0,ph=1/0,yh=null,ds=null,cn=0,ms=null,Co=null,xo=0,Lm=0,Um=null,sv=null,cu=0,zm=null;function Xn(){if((ie&2)!==0&&Qt!==0)return Qt&-Qt;if(x.T!==null){var i=po;return i!==0?i:$m()}return Hi()}function av(){yi===0&&(yi=(Qt&536870912)===0||Jt?mr():536870912);var i=pi.current;return i!==null&&(i.flags|=32),yi}function Qn(i,s,o){(i===me&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(No(i,0),gs(i,Qt,yi,!1)),ni(i,o),((ie&2)===0||i!==me)&&(i===me&&((ie&2)===0&&(ba|=o),Ie===4&&gs(i,Qt,yi,!1)),rr(i))}function ov(i,s,o){if((ie&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||Rn(i,s),f=u?AR(i,s):qm(i,s,!0),p=u;do{if(f===0){Ro&&!u&&gs(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!SR(o)){f=qm(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var b=i;f=uu;var B=b.current.memoizedState.isDehydrated;if(B&&(No(b,w).flags|=256),w=qm(b,w,!1),w!==2){if(Om&&!B){b.errorRecoveryDisabledLanes|=p,ba|=p,f=4;break t}p=Vn,Vn=f,p!==null&&(Vn===null?Vn=p:Vn.push.apply(Vn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){No(i,0),gs(i,s,0,!0);break}t:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:gs(u,s,yi,!hs);break t;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Pm+300-Lt(),10<f)){if(gs(u,s,yi,!hs),an(u,0,!0)!==0)break t;u.timeoutHandle=Pv(lv.bind(null,u,o,Vn,yh,km,s,yi,ba,Io,hs,p,2,-0,0),f);break t}lv(u,o,Vn,yh,km,s,yi,ba,Io,hs,p,0,-0,0)}}break}while(!0);rr(i)}function lv(i,s,o,u,f,p,w,b,B,nt,ut,ft,rt,at){if(i.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(yu={stylesheets:null,count:0,unsuspend:rI},ev(s),ft=aI(),ft!==null)){i.cancelPendingCommit=ft(gv.bind(null,i,s,p,o,u,f,w,b,B,ut,1,rt,at)),gs(i,p,w,!nt);return}gv(i,s,p,o,u,f,w,b,B)}function SR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!jn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gs(i,s,o,u){s&=~Vm,s&=~ba,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Te(f),w=1<<p;u[p]=-1,f&=~w}o!==0&&ii(i,o,s)}function _h(){return(ie&6)===0?(hu(0),!1):!0}function Bm(){if(jt!==null){if(re===0)var i=jt.return;else i=jt,Ir=_a=null,im(i),wo=null,eu=0,i=jt;for(;i!==null;)H0(i.alternate,i),i=i.return;jt=null}}function No(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,HR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Bm(),me=i,jt=o=br(i.current,null),Qt=s,re=0,Kn=null,hs=!1,Ro=Rn(i,s),Om=!1,Io=yi=Vm=ba=fs=Ie=0,Vn=uu=null,km=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Te(u),p=1<<f;s|=i[f],u&=~p}return kr=s,Bc(),o}function uv(i,s){zt=null,x.H=sh,s===$l||s===Xc?(s=R_(),re=3):s===S_?(s=R_(),re=4):re=s===I0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,jt===null&&(Ie=1,ch(i,fi(s,i.current)))}function cv(){var i=x.H;return x.H=sh,i===null?sh:i}function hv(){var i=x.A;return x.A=TR,i}function Hm(){Ie=4,hs||(Qt&4194048)!==Qt&&pi.current!==null||(Ro=!0),(fs&134217727)===0&&(ba&134217727)===0||me===null||gs(me,Qt,yi,!1)}function qm(i,s,o){var u=ie;ie|=2;var f=cv(),p=hv();(me!==i||Qt!==s)&&(yh=null,No(i,s)),s=!1;var w=Ie;t:do try{if(re!==0&&jt!==null){var b=jt,B=Kn;switch(re){case 8:Bm(),w=6;break t;case 3:case 2:case 9:case 6:pi.current===null&&(s=!0);var nt=re;if(re=0,Kn=null,Do(i,b,B,nt),o&&Ro){w=0;break t}break;default:nt=re,re=0,Kn=null,Do(i,b,B,nt)}}bR(),w=Ie;break}catch(ut){uv(i,ut)}while(!0);return s&&i.shellSuspendCounter++,Ir=_a=null,ie=u,x.H=f,x.A=p,jt===null&&(me=null,Qt=0,Bc()),w}function bR(){for(;jt!==null;)fv(jt)}function AR(i,s){var o=ie;ie|=2;var u=cv(),f=hv();me!==i||Qt!==s?(yh=null,ph=Lt()+500,No(i,s)):Ro=Rn(i,s);t:do try{if(re!==0&&jt!==null){s=jt;var p=Kn;e:switch(re){case 1:re=0,Kn=null,Do(i,s,p,1);break;case 2:case 9:if(b_(p)){re=0,Kn=null,dv(s);break}s=function(){re!==2&&re!==9||me!==i||(re=7),rr(i)},p.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:b_(p)?(re=0,Kn=null,dv(s)):(re=0,Kn=null,Do(i,s,p,7));break;case 5:var w=null;switch(jt.tag){case 26:w=jt.memoizedState;case 5:case 27:var b=jt;if(!w||Kv(w)){re=0,Kn=null;var B=b.sibling;if(B!==null)jt=B;else{var nt=b.return;nt!==null?(jt=nt,vh(nt)):jt=null}break e}}re=0,Kn=null,Do(i,s,p,5);break;case 6:re=0,Kn=null,Do(i,s,p,6);break;case 8:Bm(),Ie=6;break t;default:throw Error(r(462))}}RR();break}catch(ut){uv(i,ut)}while(!0);return Ir=_a=null,x.H=u,x.A=f,ie=o,jt!==null?0:(me=null,Qt=0,Bc(),Ie)}function RR(){for(;jt!==null&&!he();)fv(jt)}function fv(i){var s=z0(i.alternate,i,kr);i.memoizedProps=i.pendingProps,s===null?vh(i):jt=s}function dv(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=O0(o,s,s.pendingProps,s.type,void 0,Qt);break;case 11:s=O0(o,s,s.pendingProps,s.type.render,s.ref,Qt);break;case 5:im(s);default:H0(o,s),s=jt=m_(s,kr),s=z0(o,s,kr)}i.memoizedProps=i.pendingProps,s===null?vh(i):jt=s}function Do(i,s,o,u){Ir=_a=null,im(s),wo=null,eu=0;var f=s.return;try{if(gR(i,f,s,o,Qt)){Ie=1,ch(i,fi(o,i.current)),jt=null;return}}catch(p){if(f!==null)throw jt=f,p;Ie=1,ch(i,fi(o,i.current)),jt=null;return}s.flags&32768?(Jt||u===1?i=!0:Ro||(Qt&536870912)!==0?i=!1:(hs=i=!0,(u===2||u===9||u===3||u===6)&&(u=pi.current,u!==null&&u.tag===13&&(u.flags|=16384))),mv(s,i)):vh(s)}function vh(i){var s=i;do{if((s.flags&32768)!==0){mv(s,hs);return}i=s.return;var o=yR(s.alternate,s,kr);if(o!==null){jt=o;return}if(s=s.sibling,s!==null){jt=s;return}jt=s=i}while(s!==null);Ie===0&&(Ie=5)}function mv(i,s){do{var o=_R(i.alternate,i);if(o!==null){o.flags&=32767,jt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){jt=i;return}jt=i=o}while(i!==null);Ie=6,jt=null}function gv(i,s,o,u,f,p,w,b,B){i.cancelPendingCommit=null;do Eh();while(cn!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Md,Hn(i,o,p,w,b,B),i===me&&(jt=me=null,Qt=0),Co=s,ms=i,xo=o,Lm=p,Um=f,sv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,NR(Un,function(){return Ev(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=x.T,x.T=null,f=j.p,j.p=2,w=ie,ie|=4;try{vR(i,s,o)}finally{ie=w,j.p=f,x.T=u}}cn=1,pv(),yv(),_v()}}function pv(){if(cn===1){cn=0;var i=ms,s=Co,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=x.T,x.T=null;var u=j.p;j.p=2;var f=ie;ie|=4;try{W0(s,i);var p=tg,w=r_(i.containerInfo),b=p.focusedElem,B=p.selectionRange;if(w!==b&&b&&b.ownerDocument&&i_(b.ownerDocument.documentElement,b)){if(B!==null&&Id(b)){var nt=B.start,ut=B.end;if(ut===void 0&&(ut=nt),"selectionStart"in b)b.selectionStart=nt,b.selectionEnd=Math.min(ut,b.value.length);else{var ft=b.ownerDocument||document,rt=ft&&ft.defaultView||window;if(rt.getSelection){var at=rt.getSelection(),Mt=b.textContent.length,Ct=Math.min(B.start,Mt),le=B.end===void 0?Ct:Math.min(B.end,Mt);!at.extend&&Ct>le&&(w=le,le=Ct,Ct=w);var Z=n_(b,Ct),G=n_(b,le);if(Z&&G&&(at.rangeCount!==1||at.anchorNode!==Z.node||at.anchorOffset!==Z.offset||at.focusNode!==G.node||at.focusOffset!==G.offset)){var tt=ft.createRange();tt.setStart(Z.node,Z.offset),at.removeAllRanges(),Ct>le?(at.addRange(tt),at.extend(G.node,G.offset)):(tt.setEnd(G.node,G.offset),at.addRange(tt))}}}}for(ft=[],at=b;at=at.parentNode;)at.nodeType===1&&ft.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ft.length;b++){var ht=ft[b];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Mh=!!Jm,tg=Jm=null}finally{ie=f,j.p=u,x.T=o}}i.current=s,cn=2}}function yv(){if(cn===2){cn=0;var i=ms,s=Co,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=x.T,x.T=null;var u=j.p;j.p=2;var f=ie;ie|=4;try{K0(i,s.alternate,s)}finally{ie=f,j.p=u,x.T=o}}cn=3}}function _v(){if(cn===4||cn===3){cn=0,Xe();var i=ms,s=Co,o=xo,u=sv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?cn=5:(cn=0,Co=ms=null,vv(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ds=null),Qr(o),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(te,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=x.T,f=j.p,j.p=2,x.T=null;try{for(var p=i.onRecoverableError,w=0;w<u.length;w++){var b=u[w];p(b.value,{componentStack:b.stack})}}finally{x.T=s,j.p=f}}(xo&3)!==0&&Eh(),rr(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===zm?cu++:(cu=0,zm=i):cu=0,hu(0)}}function vv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,jl(s)))}function Eh(i){return pv(),yv(),_v(),Ev()}function Ev(){if(cn!==5)return!1;var i=ms,s=Lm;Lm=0;var o=Qr(xo),u=x.T,f=j.p;try{j.p=32>o?32:o,x.T=null,o=Um,Um=null;var p=ms,w=xo;if(cn=0,Co=ms=null,xo=0,(ie&6)!==0)throw Error(r(331));var b=ie;if(ie|=4,iv(p.current),tv(p,p.current,w,o),ie=b,hu(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(te,p)}catch{}return!0}finally{j.p=f,x.T=u,vv(i,s)}}function Tv(i,s,o){s=fi(o,s),s=ym(i.stateNode,s,2),i=rs(i,s,2),i!==null&&(ni(i,2),rr(i))}function fe(i,s,o){if(i.tag===3)Tv(i,i,o);else for(;s!==null;){if(s.tag===3){Tv(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ds===null||!ds.has(u))){i=fi(o,i),o=A0(2),u=rs(s,o,2),u!==null&&(R0(o,u,s,i),ni(u,2),rr(u));break}}s=s.return}}function Fm(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new wR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Om=!0,f.add(o),i=IR.bind(null,i,s,o),s.then(i,i))}function IR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,me===i&&(Qt&o)===o&&(Ie===4||Ie===3&&(Qt&62914560)===Qt&&300>Lt()-Pm?(ie&2)===0&&No(i,0):Vm|=o,Io===Qt&&(Io=0)),rr(i)}function wv(i,s){s===0&&(s=bi()),i=ho(i,s),i!==null&&(ni(i,s),rr(i))}function CR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),wv(i,o)}function xR(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),wv(i,o)}function NR(i,s){return Ee(i,s)}var Th=null,Mo=null,jm=!1,wh=!1,Gm=!1,Aa=0;function rr(i){i!==Mo&&i.next===null&&(Mo===null?Th=Mo=i:Mo=Mo.next=i),wh=!0,jm||(jm=!0,MR())}function hu(i,s){if(!Gm&&wh){Gm=!0;do for(var o=!1,u=Th;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var w=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-Te(42|i)+1)-1,p&=f&~(w&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Rv(u,p))}else p=Qt,p=an(u,u===me?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Rn(u,p)||(o=!0,Rv(u,p));u=u.next}while(o);Gm=!1}}function DR(){Sv()}function Sv(){wh=jm=!1;var i=0;Aa!==0&&(BR()&&(i=Aa),Aa=0);for(var s=Lt(),o=null,u=Th;u!==null;){var f=u.next,p=bv(u,s);p===0?(u.next=null,o===null?Th=f:o.next=f,f===null&&(Mo=o)):(o=u,(i!==0||(p&3)!==0)&&(wh=!0)),u=f}hu(i)}function bv(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var w=31-Te(p),b=1<<w,B=f[w];B===-1?((b&o)===0||(b&u)!==0)&&(f[w]=dr(b,s)):B<=s&&(i.expiredLanes|=b),p&=~b}if(s=me,o=Qt,o=an(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&_e(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Rn(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&_e(u),Qr(o)){case 2:case 8:o=pn;break;case 32:o=Un;break;case 268435456:o=zn;break;default:o=Un}return u=Av.bind(null,i),o=Ee(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&_e(u),i.callbackPriority=2,i.callbackNode=null,2}function Av(i,s){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Eh()&&i.callbackNode!==o)return null;var u=Qt;return u=an(i,i===me?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ov(i,u,s),bv(i,Lt()),i.callbackNode!=null&&i.callbackNode===o?Av.bind(null,i):null)}function Rv(i,s){if(Eh())return null;ov(i,s,!0)}function MR(){qR(function(){(ie&6)!==0?Ee(xe,DR):Sv()})}function $m(){return Aa===0&&(Aa=mr()),Aa}function Iv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ja(""+i)}function Cv(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function OR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=Iv((f[Ae]||null).action),w=u.submitter;w&&(s=(s=w[Ae]||null)?Iv(s.formAction):w.getAttribute("formAction"),s!==null&&(p=s,w=null));var b=new to("action","action",null,u,f);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Aa!==0){var B=w?Cv(f,w):new FormData(f);fm(o,{pending:!0,data:B,method:f.method,action:p},null,B)}}else typeof p=="function"&&(b.preventDefault(),B=w?Cv(f,w):new FormData(f),fm(o,{pending:!0,data:B,method:f.method,action:p},p,B))},currentTarget:f}]})}}for(var Ym=0;Ym<Dd.length;Ym++){var Km=Dd[Ym],VR=Km.toLowerCase(),kR=Km[0].toUpperCase()+Km.slice(1);Ci(VR,"on"+kR)}Ci(o_,"onAnimationEnd"),Ci(l_,"onAnimationIteration"),Ci(u_,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(WA,"onTransitionRun"),Ci(JA,"onTransitionStart"),Ci(tR,"onTransitionCancel"),Ci(c_,"onTransitionEnd"),Ai("onMouseEnter",["mouseout","mouseover"]),Ai("onMouseLeave",["mouseout","mouseover"]),Ai("onPointerEnter",["pointerout","pointerover"]),Ai("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function xv(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var w=u.length-1;0<=w;w--){var b=u[w],B=b.instance,nt=b.currentTarget;if(b=b.listener,B!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=nt;try{p(f)}catch(ut){uh(ut)}f.currentTarget=null,p=B}else for(w=0;w<u.length;w++){if(b=u[w],B=b.instance,nt=b.currentTarget,b=b.listener,B!==p&&f.isPropagationStopped())break t;p=b,f.currentTarget=nt;try{p(f)}catch(ut){uh(ut)}f.currentTarget=null,p=B}}}}function Gt(i,s){var o=s[Zs];o===void 0&&(o=s[Zs]=new Set);var u=i+"__bubble";o.has(u)||(Nv(s,i,2,!1),o.add(u))}function Xm(i,s,o){var u=0;s&&(u|=4),Nv(o,i,u,s)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function Qm(i){if(!i[Sh]){i[Sh]=!0,Ws.forEach(function(o){o!=="selectionchange"&&(PR.has(o)||Xm(o,!1,i),Xm(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Sh]||(s[Sh]=!0,Xm("selectionchange",!1,s))}}function Nv(i,s,o,u){switch(tE(s)){case 2:var f=uI;break;case 8:f=cI;break;default:f=cg}o=f.bind(null,s,o,i),f=void 0,!ci||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Zm(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var b=u.stateNode.containerInfo;if(b===f)break;if(w===4)for(w=u.return;w!==null;){var B=w.tag;if((B===3||B===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;b!==null;){if(w=ri(b),w===null)return;if(B=w.tag,B===5||B===6||B===26||B===27){u=p=w;continue t}b=b.parentNode}}u=u.return}Ac(function(){var nt=p,ut=ui(o),ft=[];t:{var rt=h_.get(i);if(rt!==void 0){var at=to,Mt=i;switch(i){case"keypress":if(Xi(o)===0)break t;case"keydown":case"keyup":at=ao;break;case"focusin":Mt="focus",at=io;break;case"focusout":Mt="blur",at=io;break;case"beforeblur":case"afterblur":at=io;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Oc;break;case o_:case l_:case u_:at=ro;break;case c_:at=kc;break;case"scroll":case"scrollend":at=Rc;break;case"wheel":at=oo;break;case"copy":case"cut":case"paste":at=so;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Pl;break;case"toggle":case"beforetoggle":at=Lc}var Ct=(s&4)!==0,le=!Ct&&(i==="scroll"||i==="scrollend"),Z=Ct?rt!==null?rt+"Capture":null:rt;Ct=[];for(var G=nt,tt;G!==null;){var ht=G;if(tt=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||tt===null||Z===null||(ht=ra(G,Z),ht!=null&&Ct.push(du(G,ht,tt))),le)break;G=G.return}0<Ct.length&&(rt=new at(rt,Mt,null,o,ut),ft.push({event:rt,listeners:Ct}))}}if((s&7)===0){t:{if(rt=i==="mouseover"||i==="pointerover",at=i==="mouseout"||i==="pointerout",rt&&o!==_r&&(Mt=o.relatedTarget||o.fromElement)&&(ri(Mt)||Mt[Dn]))break t;if((at||rt)&&(rt=ut.window===ut?ut:(rt=ut.ownerDocument)?rt.defaultView||rt.parentWindow:window,at?(Mt=o.relatedTarget||o.toElement,at=nt,Mt=Mt?ri(Mt):null,Mt!==null&&(le=l(Mt),Ct=Mt.tag,Mt!==le||Ct!==5&&Ct!==27&&Ct!==6)&&(Mt=null)):(at=null,Mt=nt),at!==Mt)){if(Ct=hi,ht="onMouseLeave",Z="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(Ct=Pl,ht="onPointerLeave",Z="onPointerEnter",G="pointer"),le=at==null?rt:ai(at),tt=Mt==null?rt:ai(Mt),rt=new Ct(ht,G+"leave",at,o,ut),rt.target=le,rt.relatedTarget=tt,ht=null,ri(ut)===nt&&(Ct=new Ct(Z,G+"enter",Mt,o,ut),Ct.target=tt,Ct.relatedTarget=le,ht=Ct),le=ht,at&&Mt)e:{for(Ct=at,Z=Mt,G=0,tt=Ct;tt;tt=Oo(tt))G++;for(tt=0,ht=Z;ht;ht=Oo(ht))tt++;for(;0<G-tt;)Ct=Oo(Ct),G--;for(;0<tt-G;)Z=Oo(Z),tt--;for(;G--;){if(Ct===Z||Z!==null&&Ct===Z.alternate)break e;Ct=Oo(Ct),Z=Oo(Z)}Ct=null}else Ct=null;at!==null&&Dv(ft,rt,at,Ct,!1),Mt!==null&&le!==null&&Dv(ft,le,Mt,Ct,!0)}}t:{if(rt=nt?ai(nt):window,at=rt.nodeName&&rt.nodeName.toLowerCase(),at==="select"||at==="input"&&rt.type==="file")var Tt=Qy;else if(Fe(rt))if(Zy)Tt=XA;else{Tt=YA;var Ht=$A}else at=rt.nodeName,!at||at.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?nt&&xl(nt.elementType)&&(Tt=Qy):Tt=KA;if(Tt&&(Tt=Tt(i,nt))){Sr(ft,Tt,o,ut);break t}Ht&&Ht(i,rt,nt),i==="focusout"&&nt&&rt.type==="number"&&nt.memoizedProps.value!=null&&Jr(rt,"number",rt.value)}switch(Ht=nt?ai(nt):window,i){case"focusin":(Fe(Ht)||Ht.contentEditable==="true")&&(lo=Ht,Cd=nt,zl=null);break;case"focusout":zl=Cd=lo=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,s_(ft,o,ut);break;case"selectionchange":if(ZA)break;case"keydown":case"keyup":s_(ft,o,ut)}var St;if(Wi)t:{switch(i){case"compositionstart":var xt="onCompositionStart";break t;case"compositionend":xt="onCompositionEnd";break t;case"compositionupdate":xt="onCompositionUpdate";break t}xt=void 0}else Kt?ot(i,o)&&(xt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(xt="onCompositionStart");xt&&(T&&o.locale!=="ko"&&(Kt||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Kt&&(St=Dl()):(Ki=ut,ts="value"in Ki?Ki.value:Ki.textContent,Kt=!0)),Ht=bh(nt,xt),0<Ht.length&&(xt=new Vl(xt,i,null,o,ut),ft.push({event:xt,listeners:Ht}),St?xt.data=St:(St=_t(o),St!==null&&(xt.data=St)))),(St=_?qe(i,o):Xt(i,o))&&(xt=bh(nt,"onBeforeInput"),0<xt.length&&(Ht=new Vl("onBeforeInput","beforeinput",null,o,ut),ft.push({event:Ht,listeners:xt}),Ht.data=St)),OR(ft,i,nt,o,ut)}xv(ft,s)})}function du(i,s,o){return{instance:i,listener:s,currentTarget:o}}function bh(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ra(i,o),f!=null&&u.unshift(du(i,f,p)),f=ra(i,s),f!=null&&u.push(du(i,f,p))),i.tag===3)return u;i=i.return}return[]}function Oo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Dv(i,s,o,u,f){for(var p=s._reactName,w=[];o!==null&&o!==u;){var b=o,B=b.alternate,nt=b.stateNode;if(b=b.tag,B!==null&&B===u)break;b!==5&&b!==26&&b!==27||nt===null||(B=nt,f?(nt=ra(o,p),nt!=null&&w.unshift(du(o,nt,B))):f||(nt=ra(o,p),nt!=null&&w.push(du(o,nt,B)))),o=o.return}w.length!==0&&i.push({event:s,listeners:w})}var LR=/\r\n?/g,UR=/\u0000|\uFFFD/g;function Mv(i){return(typeof i=="string"?i:""+i).replace(LR,`
`).replace(UR,"")}function Ov(i,s){return s=Mv(s),Mv(i)===s}function Ah(){}function oe(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||li(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&li(i,""+u);break;case"className":oi(i,"class",u);break;case"tabIndex":oi(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(i,o,u);break;case"style":Cl(i,u,p);break;case"data":if(s!=="object"){oi(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ja(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&oe(i,s,"name",f.name,f,null),oe(i,s,"formEncType",f.formEncType,f,null),oe(i,s,"formMethod",f.formMethod,f,null),oe(i,s,"formTarget",f.formTarget,f,null)):(oe(i,s,"encType",f.encType,f,null),oe(i,s,"method",f.method,f,null),oe(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ja(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Ah);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Ja(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),ji(i,"popover",u);break;case"xlinkActuate":He(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":He(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":He(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":He(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":He(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":He(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":He(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":He(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":He(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ji(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Td.get(o)||o,ji(i,o,u))}}function Wm(i,s,o,u,f,p){switch(o){case"style":Cl(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?li(i,u):(typeof u=="number"||typeof u=="bigint")&&li(i,""+u);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Ah);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[Ae]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):ji(i,o,u)}}}function hn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,p,w,o,null)}}f&&oe(i,s,"srcSet",o.srcSet,o,null),u&&oe(i,s,"src",o.src,o,null);return;case"input":Gt("invalid",i);var b=p=w=f=null,B=null,nt=null;for(u in o)if(o.hasOwnProperty(u)){var ut=o[u];if(ut!=null)switch(u){case"name":f=ut;break;case"type":w=ut;break;case"checked":B=ut;break;case"defaultChecked":nt=ut;break;case"value":p=ut;break;case"defaultValue":b=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,s));break;default:oe(i,s,u,ut,o,null)}}ea(i,p,b,B,nt,w,f,!1),Wa(i);return;case"select":Gt("invalid",i),u=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":p=b;break;case"defaultValue":w=b;break;case"multiple":u=b;default:oe(i,s,f,b,o,null)}s=p,o=w,i.multiple=!!u,s!=null?yr(i,!!u,s,!1):o!=null&&yr(i,!!u,o,!0);return;case"textarea":Gt("invalid",i),p=f=u=null;for(w in o)if(o.hasOwnProperty(w)&&(b=o[w],b!=null))switch(w){case"value":u=b;break;case"defaultValue":f=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:oe(i,s,w,b,o,null)}na(i,u,f,p),Wa(i);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:oe(i,s,B,u,o,null)}return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(u=0;u<fu.length;u++)Gt(fu[u],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in o)if(o.hasOwnProperty(nt)&&(u=o[nt],u!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,nt,u,o,null)}return;default:if(xl(s)){for(ut in o)o.hasOwnProperty(ut)&&(u=o[ut],u!==void 0&&Wm(i,s,ut,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&oe(i,s,b,u,o,null))}function zR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,b=null,B=null,nt=null,ut=null;for(at in o){var ft=o[at];if(o.hasOwnProperty(at)&&ft!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":B=ft;default:u.hasOwnProperty(at)||oe(i,s,at,null,u,ft)}}for(var rt in u){var at=u[rt];if(ft=o[rt],u.hasOwnProperty(rt)&&(at!=null||ft!=null))switch(rt){case"type":p=at;break;case"name":f=at;break;case"checked":nt=at;break;case"defaultChecked":ut=at;break;case"value":w=at;break;case"defaultValue":b=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,s));break;default:at!==ft&&oe(i,s,rt,at,u,ft)}}Fn(i,w,b,B,nt,ut,p,f);return;case"select":at=w=b=rt=null;for(p in o)if(B=o[p],o.hasOwnProperty(p)&&B!=null)switch(p){case"value":break;case"multiple":at=B;default:u.hasOwnProperty(p)||oe(i,s,p,null,u,B)}for(f in u)if(p=u[f],B=o[f],u.hasOwnProperty(f)&&(p!=null||B!=null))switch(f){case"value":rt=p;break;case"defaultValue":b=p;break;case"multiple":w=p;default:p!==B&&oe(i,s,f,p,u,B)}s=b,o=w,u=at,rt!=null?yr(i,!!o,rt,!1):!!u!=!!o&&(s!=null?yr(i,!!o,s,!0):yr(i,!!o,o?[]:"",!1));return;case"textarea":at=rt=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:oe(i,s,b,null,u,f)}for(w in u)if(f=u[w],p=o[w],u.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":rt=f;break;case"defaultValue":at=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&oe(i,s,w,f,u,p)}se(i,rt,at);return;case"option":for(var Mt in o)if(rt=o[Mt],o.hasOwnProperty(Mt)&&rt!=null&&!u.hasOwnProperty(Mt))switch(Mt){case"selected":i.selected=!1;break;default:oe(i,s,Mt,null,u,rt)}for(B in u)if(rt=u[B],at=o[B],u.hasOwnProperty(B)&&rt!==at&&(rt!=null||at!=null))switch(B){case"selected":i.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:oe(i,s,B,rt,u,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in o)rt=o[Ct],o.hasOwnProperty(Ct)&&rt!=null&&!u.hasOwnProperty(Ct)&&oe(i,s,Ct,null,u,rt);for(nt in u)if(rt=u[nt],at=o[nt],u.hasOwnProperty(nt)&&rt!==at&&(rt!=null||at!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(137,s));break;default:oe(i,s,nt,rt,u,at)}return;default:if(xl(s)){for(var le in o)rt=o[le],o.hasOwnProperty(le)&&rt!==void 0&&!u.hasOwnProperty(le)&&Wm(i,s,le,void 0,u,rt);for(ut in u)rt=u[ut],at=o[ut],!u.hasOwnProperty(ut)||rt===at||rt===void 0&&at===void 0||Wm(i,s,ut,rt,u,at);return}}for(var Z in o)rt=o[Z],o.hasOwnProperty(Z)&&rt!=null&&!u.hasOwnProperty(Z)&&oe(i,s,Z,null,u,rt);for(ft in u)rt=u[ft],at=o[ft],!u.hasOwnProperty(ft)||rt===at||rt==null&&at==null||oe(i,s,ft,rt,u,at)}var Jm=null,tg=null;function Rh(i){return i.nodeType===9?i:i.ownerDocument}function Vv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kv(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function eg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ng=null;function BR(){var i=window.event;return i&&i.type==="popstate"?i===ng?!1:(ng=i,!0):(ng=null,!1)}var Pv=typeof setTimeout=="function"?setTimeout:void 0,HR=typeof clearTimeout=="function"?clearTimeout:void 0,Lv=typeof Promise=="function"?Promise:void 0,qR=typeof queueMicrotask=="function"?queueMicrotask:typeof Lv<"u"?function(i){return Lv.resolve(null).then(i).catch(FR)}:Pv;function FR(i){setTimeout(function(){throw i})}function ps(i){return i==="head"}function Uv(i,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var w=i.ownerDocument;if(o&1&&mu(w.documentElement),o&2&&mu(w.body),o&4)for(o=w.head,mu(o),w=o.firstChild;w;){var b=w.nextSibling,B=w.nodeName;w[gr]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=b}}if(f===0){i.removeChild(p),wu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);wu(s)}function ig(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ig(o),Fi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function jR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[gr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Ni(i.nextSibling),i===null)break}return null}function GR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ni(i.nextSibling),i===null))return null;return i}function rg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function $R(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ni(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var sg=null;function zv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function Bv(i,s,o){switch(s=Rh(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function mu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Fi(i)}var _i=new Map,Hv=new Set;function Ih(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Pr=j.d;j.d={f:YR,r:KR,D:XR,C:QR,L:ZR,m:WR,X:tI,S:JR,M:eI};function YR(){var i=Pr.f(),s=_h();return i||s}function KR(i){var s=si(i);s!==null&&s.tag===5&&s.type==="form"?o0(s):Pr.r(i)}var Vo=typeof document>"u"?null:document;function qv(i,s,o){var u=Vo;if(u&&typeof s=="string"&&s){var f=Pe(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Hv.has(f)||(Hv.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),hn(s,"link",i),we(s),u.head.appendChild(s)))}}function XR(i){Pr.D(i),qv("dns-prefetch",i,null)}function QR(i,s){Pr.C(i,s),qv("preconnect",i,s)}function ZR(i,s,o){Pr.L(i,s,o);var u=Vo;if(u&&i&&s){var f='link[rel="preload"][as="'+Pe(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pe(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pe(o.imageSizes)+'"]')):f+='[href="'+Pe(i)+'"]';var p=f;switch(s){case"style":p=ko(i);break;case"script":p=Po(i)}_i.has(p)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),_i.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(gu(p))||s==="script"&&u.querySelector(pu(p))||(s=u.createElement("link"),hn(s,"link",i),we(s),u.head.appendChild(s)))}}function WR(i,s){Pr.m(i,s);var o=Vo;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pe(u)+'"][href="'+Pe(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Po(i)}if(!_i.has(p)&&(i=y({rel:"modulepreload",href:i},s),_i.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(pu(p)))return}u=o.createElement("link"),hn(u,"link",i),we(u),o.head.appendChild(u)}}}function JR(i,s,o){Pr.S(i,s,o);var u=Vo;if(u&&i){var f=on(u).hoistableStyles,p=ko(i);s=s||"default";var w=f.get(p);if(!w){var b={loading:0,preload:null};if(w=u.querySelector(gu(p)))b.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=_i.get(p))&&ag(i,o);var B=w=u.createElement("link");we(B),hn(B,"link",i),B._p=new Promise(function(nt,ut){B.onload=nt,B.onerror=ut}),B.addEventListener("load",function(){b.loading|=1}),B.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ch(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:b},f.set(p,w)}}}function tI(i,s){Pr.X(i,s);var o=Vo;if(o&&i){var u=on(o).hoistableScripts,f=Po(i),p=u.get(f);p||(p=o.querySelector(pu(f)),p||(i=y({src:i,async:!0},s),(s=_i.get(f))&&og(i,s),p=o.createElement("script"),we(p),hn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function eI(i,s){Pr.M(i,s);var o=Vo;if(o&&i){var u=on(o).hoistableScripts,f=Po(i),p=u.get(f);p||(p=o.querySelector(pu(f)),p||(i=y({src:i,async:!0,type:"module"},s),(s=_i.get(f))&&og(i,s),p=o.createElement("script"),we(p),hn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function Fv(i,s,o,u){var f=(f=yt.current)?Ih(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ko(o.href),o=on(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=ko(o.href);var p=on(f).hoistableStyles,w=p.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,w),(p=f.querySelector(gu(i)))&&!p._p&&(w.instance=p,w.state.loading=5),_i.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},_i.set(i,o),p||nI(f,i,o,w.state))),s&&u===null)throw Error(r(528,""));return w}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Po(o),o=on(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ko(i){return'href="'+Pe(i)+'"'}function gu(i){return'link[rel="stylesheet"]['+i+"]"}function jv(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function nI(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),hn(s,"link",o),we(s),i.head.appendChild(s))}function Po(i){return'[src="'+Pe(i)+'"]'}function pu(i){return"script[async]"+i}function Gv(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Pe(o.href)+'"]');if(u)return s.instance=u,we(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),we(u),hn(u,"style",f),Ch(u,o.precedence,i),s.instance=u;case"stylesheet":f=ko(o.href);var p=i.querySelector(gu(f));if(p)return s.state.loading|=4,s.instance=p,we(p),p;u=jv(o),(f=_i.get(f))&&ag(u,f),p=(i.ownerDocument||i).createElement("link"),we(p);var w=p;return w._p=new Promise(function(b,B){w.onload=b,w.onerror=B}),hn(p,"link",u),s.state.loading|=4,Ch(p,o.precedence,i),s.instance=p;case"script":return p=Po(o.src),(f=i.querySelector(pu(p)))?(s.instance=f,we(f),f):(u=o,(f=_i.get(p))&&(u=y({},o),og(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),we(f),hn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ch(u,o.precedence,i));return s.instance}function Ch(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,w=0;w<u.length;w++){var b=u[w];if(b.dataset.precedence===s)p=b;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function ag(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function og(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var xh=null;function $v(i,s,o){if(xh===null){var u=new Map,f=xh=new Map;f.set(o,u)}else f=xh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[gr]||p[Ne]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(s)||"";w=i+w;var b=u.get(w);b?b.push(p):u.set(w,[p])}}return u}function Yv(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function iI(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Kv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var yu=null;function rI(){}function sI(i,s,o){if(yu===null)throw Error(r(475));var u=yu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=ko(o.href),p=i.querySelector(gu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Nh.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,we(p);return}p=i.ownerDocument||i,o=jv(o),(f=_i.get(f))&&ag(o,f),p=p.createElement("link"),we(p);var w=p;w._p=new Promise(function(b,B){w.onload=b,w.onerror=B}),hn(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Nh.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function aI(){if(yu===null)throw Error(r(475));var i=yu;return i.stylesheets&&i.count===0&&lg(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&lg(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Nh(){if(this.count--,this.count===0){if(this.stylesheets)lg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Dh=null;function lg(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Dh=new Map,s.forEach(oI,i),Dh=null,Nh.call(i))}function oI(i,s){if(!(s.state.loading&4)){var o=Dh.get(i);if(o)var u=o.get(null);else{o=new Map,Dh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||u,p===u&&o.set(null,f),o.set(w,f),this.count++,u=Nh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var _u={$$typeof:F,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function lI(i,s,o,u,f,p,w,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Xv(i,s,o,u,f,p,w,b,B,nt,ut,ft){return i=new lI(i,s,o,w,b,B,nt,ft),s=1,p===!0&&(s|=24),p=Gn(3,null,null,s),i.current=p,p.stateNode=i,s=Fd(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Yd(p),i}function Qv(i){return i?(i=fo,i):fo}function Zv(i,s,o,u,f,p){f=Qv(f),u.context===null?u.context=f:u.pendingContext=f,u=is(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=rs(i,u,s),o!==null&&(Qn(o,i,s),Kl(o,i,s))}function Wv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function ug(i,s){Wv(i,s),(i=i.alternate)&&Wv(i,s)}function Jv(i){if(i.tag===13){var s=ho(i,67108864);s!==null&&Qn(s,i,67108864),ug(i,67108864)}}var Mh=!0;function uI(i,s,o,u){var f=x.T;x.T=null;var p=j.p;try{j.p=2,cg(i,s,o,u)}finally{j.p=p,x.T=f}}function cI(i,s,o,u){var f=x.T;x.T=null;var p=j.p;try{j.p=8,cg(i,s,o,u)}finally{j.p=p,x.T=f}}function cg(i,s,o,u){if(Mh){var f=hg(u);if(f===null)Zm(i,s,u,Oh,o),eE(i,u);else if(fI(f,i,s,o,u))u.stopPropagation();else if(eE(i,u),s&4&&-1<hI.indexOf(i)){for(;f!==null;){var p=si(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=Ze(p.pendingLanes);if(w!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var B=1<<31-Te(w);b.entanglements[1]|=B,w&=~B}rr(p),(ie&6)===0&&(ph=Lt()+500,hu(0))}}break;case 13:b=ho(p,2),b!==null&&Qn(b,p,2),_h(),ug(p,2)}if(p=hg(u),p===null&&Zm(i,s,u,Oh,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Zm(i,s,u,null,o)}}function hg(i){return i=ui(i),fg(i)}var Oh=null;function fg(i){if(Oh=null,i=ri(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Oh=i,null}function tE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case xe:return 2;case pn:return 8;case Un:case Ui:return 32;case zn:return 268435456;default:return 32}default:return 32}}var dg=!1,ys=null,_s=null,vs=null,vu=new Map,Eu=new Map,Es=[],hI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eE(i,s){switch(i){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":vu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(s.pointerId)}}function Tu(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=si(s),s!==null&&Jv(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function fI(i,s,o,u,f){switch(s){case"focusin":return ys=Tu(ys,i,s,o,u,f),!0;case"dragenter":return _s=Tu(_s,i,s,o,u,f),!0;case"mouseover":return vs=Tu(vs,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return vu.set(p,Tu(vu.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Eu.set(p,Tu(Eu.get(p)||null,i,s,o,u,f)),!0}return!1}function nE(i){var s=ri(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,$a(i.priority,function(){if(o.tag===13){var u=Xn();u=Bi(u);var f=ho(o,u);f!==null&&Qn(f,o,u),ug(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Vh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=hg(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);_r=u,o.target.dispatchEvent(u),_r=null}else return s=si(o),s!==null&&Jv(s),i.blockedOn=o,!1;s.shift()}return!0}function iE(i,s,o){Vh(i)&&o.delete(s)}function dI(){dg=!1,ys!==null&&Vh(ys)&&(ys=null),_s!==null&&Vh(_s)&&(_s=null),vs!==null&&Vh(vs)&&(vs=null),vu.forEach(iE),Eu.forEach(iE)}function kh(i,s){i.blockedOn===s&&(i.blockedOn=null,dg||(dg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dI)))}var Ph=null;function rE(i){Ph!==i&&(Ph=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ph===i&&(Ph=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(fg(u||o)===null)continue;break}var p=si(o);p!==null&&(i.splice(s,3),s-=3,fm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function wu(i){function s(B){return kh(B,i)}ys!==null&&kh(ys,i),_s!==null&&kh(_s,i),vs!==null&&kh(vs,i),vu.forEach(s),Eu.forEach(s);for(var o=0;o<Es.length;o++){var u=Es[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Es.length&&(o=Es[0],o.blockedOn===null);)nE(o),o.blockedOn===null&&Es.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],w=f[Ae]||null;if(typeof p=="function")w||rE(o);else if(w){var b=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[Ae]||null)b=w.formAction;else if(fg(f)!==null)continue}else b=w.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),rE(o)}}}function mg(i){this._internalRoot=i}Lh.prototype.render=mg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Xn();Zv(o,u,i,s,null,null)},Lh.prototype.unmount=mg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Zv(i.current,2,null,i,null,null),_h(),s[Dn]=null}};function Lh(i){this._internalRoot=i}Lh.prototype.unstable_scheduleHydration=function(i){if(i){var s=Hi();i={blockedOn:null,target:i,priority:s};for(var o=0;o<Es.length&&s!==0&&s<Es[o].priority;o++);Es.splice(o,0,i),o===0&&nE(i)}};var sE=t.version;if(sE!=="19.1.0")throw Error(r(527,sE,"19.1.0"));j.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=m(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var mI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{te=Uh.inject(mI),Ft=Uh}catch{}}return bu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=T0,p=w0,w=S0,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Xv(i,1,!1,null,null,o,u,f,p,w,b,null),i[Dn]=s.current,Qm(i),new mg(s)},bu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=T0,w=w0,b=S0,B=null,nt=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(B=o.unstable_transitionCallbacks),o.formState!==void 0&&(nt=o.formState)),s=Xv(i,1,!0,s,o??null,u,f,p,w,b,B,nt),s.context=Qv(null),o=s.current,u=Xn(),u=Bi(u),f=is(u),f.callback=null,rs(o,f,u),o=u,s.current.lanes=o,ni(s,o),rr(s),i[Dn]=s.current,Qm(i),new Lh(s)},bu.version="19.1.0",bu}var gE;function SI(){if(gE)return yg.exports;gE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yg.exports=wI(),yg.exports}var bI=SI();function gn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=gn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Tg={exports:{}},wg={},Sg={exports:{}},bg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function AI(){if(pE)return bg;pE=1;var e=lc();function t(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,E){var S=E(),O=r({inst:{value:S,getSnapshot:E}}),P=O[0].inst,I=O[1];return l(function(){P.value=S,P.getSnapshot=E,m(P)&&I({inst:P})},[v,S,E]),a(function(){return m(P)&&I({inst:P}),v(function(){m(P)&&I({inst:P})})},[v]),c(S),S}function m(v){var E=v.getSnapshot;v=v.value;try{var S=E();return!n(v,S)}catch{return!0}}function g(v,E){return E()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:d;return bg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,bg}var yE;function RI(){return yE||(yE=1,Sg.exports=AI()),Sg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function II(){if(_E)return wg;_E=1;var e=lc(),t=RI();function n(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,m=e.useDebugValue;return wg.useSyncExternalStoreWithSelector=function(g,y,v,E,S){var O=l(null);if(O.current===null){var P={hasValue:!1,value:null};O.current=P}else P=O.current;O=d(function(){function z(it){if(!H){if(H=!0,F=it,it=E(it),S!==void 0&&P.hasValue){var V=P.value;if(S(V,it))return q=V}return q=it}if(V=q,r(F,it))return V;var A=E(it);return S!==void 0&&S(V,A)?(F=it,V):(F=it,q=A)}var H=!1,F,q,K=v===void 0?null:v;return[function(){return z(y())},K===null?void 0:function(){return z(K())}]},[y,v,E,S]);var I=a(g,O[0],O[1]);return c(function(){P.hasValue=!0,P.value=I},[I]),m(I),I},wg}var vE;function CI(){return vE||(vE=1,Tg.exports=II()),Tg.exports}var xI=CI();const NI=Hw(xI),DI={},EE=e=>{let t;const n=new Set,r=(y,v)=>{const E=typeof y=="function"?y(t):y;if(!Object.is(E,t)){const S=t;t=v??(typeof E!="object"||E===null)?E:Object.assign({},t,E),n.forEach(O=>O(t,S))}},a=()=>t,m={setState:r,getState:a,getInitialState:()=>g,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(DI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},g=t=e(r,a,m);return m},MI=e=>e?EE(e):EE,{useDebugValue:OI}=lt,{useSyncExternalStoreWithSelector:VI}=NI,kI=e=>e;function Fw(e,t=kI,n){const r=VI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return OI(r),r}const TE=(e,t)=>{const n=MI(e),r=(a,l=t)=>Fw(n,a,l);return Object.assign(r,n),r},PI=(e,t)=>e?TE(e,t):TE;function sn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var LI={value:()=>{}};function jf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ef(n)}function ef(e){this._=e}function UI(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ef.prototype=jf.prototype={constructor:ef,on:function(e,t){var n=this._,r=UI(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=zI(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=wE(n[a],e.name,t);else if(t==null)for(a in n)n[a]=wE(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ef(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function zI(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function wE(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=LI,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Yg="http://www.w3.org/1999/xhtml";const SE={svg:"http://www.w3.org/2000/svg",xhtml:Yg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),SE.hasOwnProperty(t)?{space:SE[t],local:e}:e}function BI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yg&&t.documentElement.namespaceURI===Yg?t.createElement(e):t.createElementNS(n,e)}}function HI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jw(e){var t=Gf(e);return(t.local?HI:BI)(t)}function qI(){}function Pp(e){return e==null?qI:function(){return this.querySelector(e)}}function FI(e){typeof e!="function"&&(e=Pp(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),m,g,y=0;y<c;++y)(m=l[y])&&(g=e.call(m,m.__data__,y,l))&&("__data__"in m&&(g.__data__=m.__data__),d[y]=g);return new ti(r,this._parents)}function jI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function GI(){return[]}function Gw(e){return e==null?GI:function(){return this.querySelectorAll(e)}}function $I(e){return function(){return jI(e.apply(this,arguments))}}function YI(e){typeof e=="function"?e=$I(e):e=Gw(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,m,g=0;g<d;++g)(m=c[g])&&(r.push(e.call(m,m.__data__,g,c)),a.push(m));return new ti(r,a)}function $w(e){return function(){return this.matches(e)}}function Yw(e){return function(t){return t.matches(e)}}var KI=Array.prototype.find;function XI(e){return function(){return KI.call(this.children,e)}}function QI(){return this.firstElementChild}function ZI(e){return this.select(e==null?QI:XI(typeof e=="function"?e:Yw(e)))}var WI=Array.prototype.filter;function JI(){return Array.from(this.children)}function tC(e){return function(){return WI.call(this.children,e)}}function eC(e){return this.selectAll(e==null?JI:tC(typeof e=="function"?e:Yw(e)))}function nC(e){typeof e!="function"&&(e=$w(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],m,g=0;g<c;++g)(m=l[g])&&e.call(m,m.__data__,g,l)&&d.push(m);return new ti(r,this._parents)}function Kw(e){return new Array(e.length)}function iC(){return new ti(this._enter||this._groups.map(Kw),this._parents)}function pf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}pf.prototype={constructor:pf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rC(e){return function(){return e}}function sC(e,t,n,r,a,l){for(var c=0,d,m=t.length,g=l.length;c<g;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new pf(e,l[c]);for(;c<m;++c)(d=t[c])&&(a[c]=d)}function aC(e,t,n,r,a,l,c){var d,m,g=new Map,y=t.length,v=l.length,E=new Array(y),S;for(d=0;d<y;++d)(m=t[d])&&(E[d]=S=c.call(m,m.__data__,d,t)+"",g.has(S)?a[d]=m:g.set(S,m));for(d=0;d<v;++d)S=c.call(e,l[d],d,l)+"",(m=g.get(S))?(r[d]=m,m.__data__=l[d],g.delete(S)):n[d]=new pf(e,l[d]);for(d=0;d<y;++d)(m=t[d])&&g.get(E[d])===m&&(a[d]=m)}function oC(e){return e.__data__}function lC(e,t){if(!arguments.length)return Array.from(this,oC);var n=t?aC:sC,r=this._parents,a=this._groups;typeof e!="function"&&(e=rC(e));for(var l=a.length,c=new Array(l),d=new Array(l),m=new Array(l),g=0;g<l;++g){var y=r[g],v=a[g],E=v.length,S=uC(e.call(y,y&&y.__data__,g,r)),O=S.length,P=d[g]=new Array(O),I=c[g]=new Array(O),z=m[g]=new Array(E);n(y,v,P,I,z,S,t);for(var H=0,F=0,q,K;H<O;++H)if(q=P[H]){for(H>=F&&(F=H+1);!(K=I[F])&&++F<O;);q._next=K||null}}return c=new ti(c,r),c._enter=d,c._exit=m,c}function uC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cC(){return new ti(this._exit||this._groups.map(Kw),this._parents)}function hC(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function fC(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),m=0;m<c;++m)for(var g=n[m],y=r[m],v=g.length,E=d[m]=new Array(v),S,O=0;O<v;++O)(S=g[O]||y[O])&&(E[O]=S);for(;m<a;++m)d[m]=n[m];return new ti(d,this._parents)}function dC(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function mC(e){e||(e=gC);function t(v,E){return v&&E?e(v.__data__,E.__data__):!v-!E}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,m=a[l]=new Array(d),g,y=0;y<d;++y)(g=c[y])&&(m[y]=g);m.sort(t)}return new ti(a,this._parents).order()}function gC(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yC(){return Array.from(this)}function _C(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function vC(){let e=0;for(const t of this)++e;return e}function EC(){return!this.node()}function TC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function wC(e){return function(){this.removeAttribute(e)}}function SC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bC(e,t){return function(){this.setAttribute(e,t)}}function AC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function RC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function IC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function CC(e,t){var n=Gf(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?SC:wC:typeof t=="function"?n.local?IC:RC:n.local?AC:bC)(n,t))}function Xw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xC(e){return function(){this.style.removeProperty(e)}}function NC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function DC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function MC(e,t,n){return arguments.length>1?this.each((t==null?xC:typeof t=="function"?DC:NC)(e,t,n??"")):rl(this.node(),e)}function rl(e,t){return e.style.getPropertyValue(t)||Xw(e).getComputedStyle(e,null).getPropertyValue(t)}function OC(e){return function(){delete this[e]}}function VC(e,t){return function(){this[e]=t}}function kC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function PC(e,t){return arguments.length>1?this.each((t==null?OC:typeof t=="function"?kC:VC)(e,t)):this.node()[e]}function Qw(e){return e.trim().split(/^|\s+/)}function Lp(e){return e.classList||new Zw(e)}function Zw(e){this._node=e,this._names=Qw(e.getAttribute("class")||"")}Zw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ww(e,t){for(var n=Lp(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Jw(e,t){for(var n=Lp(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function LC(e){return function(){Ww(this,e)}}function UC(e){return function(){Jw(this,e)}}function zC(e,t){return function(){(t.apply(this,arguments)?Ww:Jw)(this,e)}}function BC(e,t){var n=Qw(e+"");if(arguments.length<2){for(var r=Lp(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?zC:t?LC:UC)(n,t))}function HC(){this.textContent=""}function qC(e){return function(){this.textContent=e}}function FC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jC(e){return arguments.length?this.each(e==null?HC:(typeof e=="function"?FC:qC)(e)):this.node().textContent}function GC(){this.innerHTML=""}function $C(e){return function(){this.innerHTML=e}}function YC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function KC(e){return arguments.length?this.each(e==null?GC:(typeof e=="function"?YC:$C)(e)):this.node().innerHTML}function XC(){this.nextSibling&&this.parentNode.appendChild(this)}function QC(){return this.each(XC)}function ZC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function WC(){return this.each(ZC)}function JC(e){var t=typeof e=="function"?e:jw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function t2(){return null}function e2(e,t){var n=typeof e=="function"?e:jw(e),r=t==null?t2:typeof t=="function"?t:Pp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function n2(){var e=this.parentNode;e&&e.removeChild(this)}function i2(){return this.each(n2)}function r2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function s2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function a2(e){return this.select(e?s2:r2)}function o2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function l2(e){return function(t){e.call(this,t,this.__data__)}}function u2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function c2(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function h2(e,t,n){return function(){var r=this.__on,a,l=l2(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function f2(e,t,n){var r=u2(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var m=0,g=d.length,y;m<g;++m)for(a=0,y=d[m];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?h2:c2,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function tS(e,t,n){var r=Xw(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function d2(e,t){return function(){return tS(this,e,t)}}function m2(e,t){return function(){return tS(this,e,t.apply(this,arguments))}}function g2(e,t){return this.each((typeof t=="function"?m2:d2)(e,t))}function*p2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var eS=[null];function ti(e,t){this._groups=e,this._parents=t}function uc(){return new ti([[document.documentElement]],eS)}function y2(){return this}ti.prototype=uc.prototype={constructor:ti,select:FI,selectAll:YI,selectChild:ZI,selectChildren:eC,filter:nC,data:lC,enter:iC,exit:cC,join:hC,merge:fC,selection:y2,order:dC,sort:mC,call:pC,nodes:yC,node:_C,size:vC,empty:EC,each:TC,attr:CC,style:MC,property:PC,classed:BC,text:jC,html:KC,raise:QC,lower:WC,append:JC,insert:e2,remove:i2,clone:a2,datum:o2,on:f2,dispatch:g2,[Symbol.iterator]:p2};function vi(e){return typeof e=="string"?new ti([[document.querySelector(e)]],[document.documentElement]):new ti([[e]],eS)}function _2(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Di(e,t){if(e=_2(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const v2={passive:!1},ju={capture:!0,passive:!1};function Ag(e){e.stopImmediatePropagation()}function Xo(e){e.preventDefault(),e.stopImmediatePropagation()}function nS(e){var t=e.document.documentElement,n=vi(e).on("dragstart.drag",Xo,ju);"onselectstart"in t?n.on("selectstart.drag",Xo,ju):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function iS(e,t){var n=e.document.documentElement,r=vi(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xo,ju),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const zh=e=>()=>e;function Kg(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:l,x:c,y:d,dx:m,dy:g,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:m,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:y}})}Kg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function E2(e){return!e.ctrlKey&&!e.button}function T2(){return this.parentNode}function w2(e,t){return t??{x:e.x,y:e.y}}function S2(){return navigator.maxTouchPoints||"ontouchstart"in this}function b2(){var e=E2,t=T2,n=w2,r=S2,a={},l=jf("start","drag","end"),c=0,d,m,g,y,v=0;function E(q){q.on("mousedown.drag",S).filter(r).on("touchstart.drag",I).on("touchmove.drag",z,v2).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(q,K){if(!(y||!e.call(this,q,K))){var it=F(this,t.call(this,q,K),q,K,"mouse");it&&(vi(q.view).on("mousemove.drag",O,ju).on("mouseup.drag",P,ju),nS(q.view),Ag(q),g=!1,d=q.clientX,m=q.clientY,it("start",q))}}function O(q){if(Xo(q),!g){var K=q.clientX-d,it=q.clientY-m;g=K*K+it*it>v}a.mouse("drag",q)}function P(q){vi(q.view).on("mousemove.drag mouseup.drag",null),iS(q.view,g),Xo(q),a.mouse("end",q)}function I(q,K){if(e.call(this,q,K)){var it=q.changedTouches,V=t.call(this,q,K),A=it.length,R,k;for(R=0;R<A;++R)(k=F(this,V,q,K,it[R].identifier,it[R]))&&(Ag(q),k("start",q,it[R]))}}function z(q){var K=q.changedTouches,it=K.length,V,A;for(V=0;V<it;++V)(A=a[K[V].identifier])&&(Xo(q),A("drag",q,K[V]))}function H(q){var K=q.changedTouches,it=K.length,V,A;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),V=0;V<it;++V)(A=a[K[V].identifier])&&(Ag(q),A("end",q,K[V]))}function F(q,K,it,V,A,R){var k=l.copy(),L=Di(R||it,K),U,D,M;if((M=n.call(q,new Kg("beforestart",{sourceEvent:it,target:E,identifier:A,active:c,x:L[0],y:L[1],dx:0,dy:0,dispatch:k}),V))!=null)return U=M.x-L[0]||0,D=M.y-L[1]||0,function Q(x,j,J){var X=L,N;switch(x){case"start":a[A]=Q,N=c++;break;case"end":delete a[A],--c;case"drag":L=Di(J||j,K),N=c;break}k.call(x,q,new Kg(x,{sourceEvent:j,subject:M,target:E,identifier:A,active:N,x:L[0]+U,y:L[1]+D,dx:L[0]-X[0],dy:L[1]-X[1],dispatch:k}),V)}}return E.filter=function(q){return arguments.length?(e=typeof q=="function"?q:zh(!!q),E):e},E.container=function(q){return arguments.length?(t=typeof q=="function"?q:zh(q),E):t},E.subject=function(q){return arguments.length?(n=typeof q=="function"?q:zh(q),E):n},E.touchable=function(q){return arguments.length?(r=typeof q=="function"?q:zh(!!q),E):r},E.on=function(){var q=l.on.apply(l,arguments);return q===l?E:q},E.clickDistance=function(q){return arguments.length?(v=(q=+q)*q,E):Math.sqrt(v)},E}function Up(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rS(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function cc(){}var Gu=.7,yf=1/Gu,Qo="\\s*([+-]?\\d+)\\s*",$u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A2=/^#([0-9a-f]{3,8})$/,R2=new RegExp(`^rgb\\(${Qo},${Qo},${Qo}\\)$`),I2=new RegExp(`^rgb\\(${ar},${ar},${ar}\\)$`),C2=new RegExp(`^rgba\\(${Qo},${Qo},${Qo},${$u}\\)$`),x2=new RegExp(`^rgba\\(${ar},${ar},${ar},${$u}\\)$`),N2=new RegExp(`^hsl\\(${$u},${ar},${ar}\\)$`),D2=new RegExp(`^hsla\\(${$u},${ar},${ar},${$u}\\)$`),bE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Up(cc,Yu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:AE,formatHex:AE,formatHex8:M2,formatHsl:O2,formatRgb:RE,toString:RE});function AE(){return this.rgb().formatHex()}function M2(){return this.rgb().formatHex8()}function O2(){return sS(this).formatHsl()}function RE(){return this.rgb().formatRgb()}function Yu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=A2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?IE(t):n===3?new Ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=R2.exec(e))?new Ln(t[1],t[2],t[3],1):(t=I2.exec(e))?new Ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=C2.exec(e))?Bh(t[1],t[2],t[3],t[4]):(t=x2.exec(e))?Bh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=N2.exec(e))?NE(t[1],t[2]/100,t[3]/100,1):(t=D2.exec(e))?NE(t[1],t[2]/100,t[3]/100,t[4]):bE.hasOwnProperty(e)?IE(bE[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function IE(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function Bh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ln(e,t,n,r)}function V2(e){return e instanceof cc||(e=Yu(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function Xg(e,t,n,r){return arguments.length===1?V2(e):new Ln(e,t,n,r??1)}function Ln(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Up(Ln,Xg,rS(cc,{brighter(e){return e=e==null?yf:Math.pow(yf,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gu:Math.pow(Gu,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(Da(this.r),Da(this.g),Da(this.b),_f(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CE,formatHex:CE,formatHex8:k2,formatRgb:xE,toString:xE}));function CE(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}`}function k2(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}${Ca((isNaN(this.opacity)?1:this.opacity)*255)}`}function xE(){const e=_f(this.opacity);return`${e===1?"rgb(":"rgba("}${Da(this.r)}, ${Da(this.g)}, ${Da(this.b)}${e===1?")":`, ${e})`}`}function _f(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Da(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ca(e){return e=Da(e),(e<16?"0":"")+e.toString(16)}function NE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mi(e,t,n,r)}function sS(e){if(e instanceof Mi)return new Mi(e.h,e.s,e.l,e.opacity);if(e instanceof cc||(e=Yu(e)),!e)return new Mi;if(e instanceof Mi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,m=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=m<.5?l+a:2-l-a,c*=60):d=m>0&&m<1?0:c,new Mi(c,d,m,e.opacity)}function P2(e,t,n,r){return arguments.length===1?sS(e):new Mi(e,t,n,r??1)}function Mi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Up(Mi,P2,rS(cc,{brighter(e){return e=e==null?yf:Math.pow(yf,e),new Mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gu:Math.pow(Gu,e),new Mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ln(Rg(e>=240?e-240:e+120,a,r),Rg(e,a,r),Rg(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Mi(DE(this.h),Hh(this.s),Hh(this.l),_f(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_f(this.opacity);return`${e===1?"hsl(":"hsla("}${DE(this.h)}, ${Hh(this.s)*100}%, ${Hh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function DE(e){return e=(e||0)%360,e<0?e+360:e}function Hh(e){return Math.max(0,Math.min(1,e||0))}function Rg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const aS=e=>()=>e;function L2(e,t){return function(n){return e+n*t}}function U2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function z2(e){return(e=+e)==1?oS:function(t,n){return n-t?U2(t,n,e):aS(isNaN(t)?n:t)}}function oS(e,t){var n=t-e;return n?L2(e,n):aS(isNaN(e)?t:e)}const ME=function e(t){var n=z2(t);function r(a,l){var c=n((a=Xg(a)).r,(l=Xg(l)).r),d=n(a.g,l.g),m=n(a.b,l.b),g=oS(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=m(y),a.opacity=g(y),a+""}}return r.gamma=e,r}(1);function bs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Qg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ig=new RegExp(Qg.source,"g");function B2(e){return function(){return e}}function H2(e){return function(t){return e(t)+""}}function q2(e,t){var n=Qg.lastIndex=Ig.lastIndex=0,r,a,l,c=-1,d=[],m=[];for(e=e+"",t=t+"";(r=Qg.exec(e))&&(a=Ig.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,m.push({i:c,x:bs(r,a)})),n=Ig.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?m[0]?H2(m[0].x):B2(t):(t=m.length,function(g){for(var y=0,v;y<t;++y)d[(v=m[y]).i]=v.x(g);return d.join("")})}var OE=180/Math.PI,Zg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lS(e,t,n,r,a,l){var c,d,m;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(m=e*n+t*r)&&(n-=e*m,r-=t*m),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,m/=d),e*r<t*n&&(e=-e,t=-t,m=-m,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*OE,skewX:Math.atan(m)*OE,scaleX:c,scaleY:d}}var qh;function F2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Zg:lS(t.a,t.b,t.c,t.d,t.e,t.f)}function j2(e){return e==null||(qh||(qh=document.createElementNS("http://www.w3.org/2000/svg","g")),qh.setAttribute("transform",e),!(e=qh.transform.baseVal.consolidate()))?Zg:(e=e.matrix,lS(e.a,e.b,e.c,e.d,e.e,e.f))}function uS(e,t,n,r){function a(g){return g.length?g.pop()+" ":""}function l(g,y,v,E,S,O){if(g!==v||y!==E){var P=S.push("translate(",null,t,null,n);O.push({i:P-4,x:bs(g,v)},{i:P-2,x:bs(y,E)})}else(v||E)&&S.push("translate("+v+t+E+n)}function c(g,y,v,E){g!==y?(g-y>180?y+=360:y-g>180&&(g+=360),E.push({i:v.push(a(v)+"rotate(",null,r)-2,x:bs(g,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(g,y,v,E){g!==y?E.push({i:v.push(a(v)+"skewX(",null,r)-2,x:bs(g,y)}):y&&v.push(a(v)+"skewX("+y+r)}function m(g,y,v,E,S,O){if(g!==v||y!==E){var P=S.push(a(S)+"scale(",null,",",null,")");O.push({i:P-4,x:bs(g,v)},{i:P-2,x:bs(y,E)})}else(v!==1||E!==1)&&S.push(a(S)+"scale("+v+","+E+")")}return function(g,y){var v=[],E=[];return g=e(g),y=e(y),l(g.translateX,g.translateY,y.translateX,y.translateY,v,E),c(g.rotate,y.rotate,v,E),d(g.skewX,y.skewX,v,E),m(g.scaleX,g.scaleY,y.scaleX,y.scaleY,v,E),g=y=null,function(S){for(var O=-1,P=E.length,I;++O<P;)v[(I=E[O]).i]=I.x(S);return v.join("")}}}var G2=uS(F2,"px, ","px)","deg)"),$2=uS(j2,", ",")",")"),Y2=1e-12;function VE(e){return((e=Math.exp(e))+1/e)/2}function K2(e){return((e=Math.exp(e))-1/e)/2}function X2(e){return((e=Math.exp(2*e))-1)/(e+1)}const Q2=function e(t,n,r){function a(l,c){var d=l[0],m=l[1],g=l[2],y=c[0],v=c[1],E=c[2],S=y-d,O=v-m,P=S*S+O*O,I,z;if(P<Y2)z=Math.log(E/g)/t,I=function(V){return[d+V*S,m+V*O,g*Math.exp(t*V*z)]};else{var H=Math.sqrt(P),F=(E*E-g*g+r*P)/(2*g*n*H),q=(E*E-g*g-r*P)/(2*E*n*H),K=Math.log(Math.sqrt(F*F+1)-F),it=Math.log(Math.sqrt(q*q+1)-q);z=(it-K)/t,I=function(V){var A=V*z,R=VE(K),k=g/(n*H)*(R*X2(t*A+K)-K2(K));return[d+k*S,m+k*O,g*R/VE(t*A+K)]}}return I.duration=z*1e3*t/Math.SQRT2,I}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,m=d*d;return e(c,d,m)},a}(Math.SQRT2,2,4);var sl=0,Nu=0,Au=0,cS=1e3,vf,Du,Ef=0,Oa=0,$f=0,Ku=typeof performance=="object"&&performance.now?performance:Date,hS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zp(){return Oa||(hS(Z2),Oa=Ku.now()+$f)}function Z2(){Oa=0}function Tf(){this._call=this._time=this._next=null}Tf.prototype=fS.prototype={constructor:Tf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zp():+n)+(t==null?0:+t),!this._next&&Du!==this&&(Du?Du._next=this:vf=this,Du=this),this._call=e,this._time=n,Wg()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wg())}};function fS(e,t,n){var r=new Tf;return r.restart(e,t,n),r}function W2(){zp(),++sl;for(var e=vf,t;e;)(t=Oa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sl}function kE(){Oa=(Ef=Ku.now())+$f,sl=Nu=0;try{W2()}finally{sl=0,tx(),Oa=0}}function J2(){var e=Ku.now(),t=e-Ef;t>cS&&($f-=t,Ef=e)}function tx(){for(var e,t=vf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vf=n);Du=e,Wg(r)}function Wg(e){if(!sl){Nu&&(Nu=clearTimeout(Nu));var t=e-Oa;t>24?(e<1/0&&(Nu=setTimeout(kE,e-Ku.now()-$f)),Au&&(Au=clearInterval(Au))):(Au||(Ef=Ku.now(),Au=setInterval(J2,cS)),sl=1,hS(kE))}}function PE(e,t,n){var r=new Tf;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var ex=jf("start","end","cancel","interrupt"),nx=[],dS=0,LE=1,Jg=2,nf=3,UE=4,tp=5,rf=6;function Yf(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;ix(e,n,{name:t,index:r,group:a,on:ex,tween:nx,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:dS})}function Bp(e,t){var n=Li(e,t);if(n.state>dS)throw new Error("too late; already scheduled");return n}function fr(e,t){var n=Li(e,t);if(n.state>nf)throw new Error("too late; already running");return n}function Li(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ix(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=fS(l,0,n.time);function l(g){n.state=LE,n.timer.restart(c,n.delay,n.time),n.delay<=g&&c(g-n.delay)}function c(g){var y,v,E,S;if(n.state!==LE)return m();for(y in r)if(S=r[y],S.name===n.name){if(S.state===nf)return PE(c);S.state===UE?(S.state=rf,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete r[y]):+y<t&&(S.state=rf,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete r[y])}if(PE(function(){n.state===nf&&(n.state=UE,n.timer.restart(d,n.delay,n.time),d(g))}),n.state=Jg,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jg){for(n.state=nf,a=new Array(E=n.tween.length),y=0,v=-1;y<E;++y)(S=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=S);a.length=v+1}}function d(g){for(var y=g<n.duration?n.ease.call(null,g/n.duration):(n.timer.restart(m),n.state=tp,1),v=-1,E=a.length;++v<E;)a[v].call(e,y);n.state===tp&&(n.on.call("end",e,e.__data__,n.index,n.group),m())}function m(){n.state=rf,n.timer.stop(),delete r[t];for(var g in r)return;delete e.__transition}}function sf(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>Jg&&r.state<tp,r.state=rf,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function rx(e){return this.each(function(){sf(this,e)})}function sx(e,t){var n,r;return function(){var a=fr(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function ax(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=fr(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},m=0,g=a.length;m<g;++m)if(a[m].name===t){a[m]=d;break}m===g&&a.push(d)}l.tween=a}}function ox(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Li(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?sx:ax)(n,e,t))}function Hp(e,t,n){var r=e._id;return e.each(function(){var a=fr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Li(a,r).value[t]}}function mS(e,t){var n;return(typeof t=="number"?bs:t instanceof Yu?ME:(n=Yu(t))?(t=n,ME):q2)(e,t)}function lx(e){return function(){this.removeAttribute(e)}}function ux(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cx(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function hx(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function fx(e,t,n){var r,a,l;return function(){var c,d=n(this),m;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),m=d+"",c===m?null:c===r&&m===a?l:(a=m,l=t(r=c,d)))}}function dx(e,t,n){var r,a,l;return function(){var c,d=n(this),m;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),m=d+"",c===m?null:c===r&&m===a?l:(a=m,l=t(r=c,d)))}}function mx(e,t){var n=Gf(e),r=n==="transform"?$2:mS;return this.attrTween(e,typeof t=="function"?(n.local?dx:fx)(n,r,Hp(this,"attr."+e,t)):t==null?(n.local?ux:lx)(n):(n.local?hx:cx)(n,r,t))}function gx(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function px(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yx(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&px(e,l)),n}return a._value=t,a}function _x(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&gx(e,l)),n}return a._value=t,a}function vx(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Gf(e);return this.tween(n,(r.local?yx:_x)(r,t))}function Ex(e,t){return function(){Bp(this,e).delay=+t.apply(this,arguments)}}function Tx(e,t){return t=+t,function(){Bp(this,e).delay=t}}function wx(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ex:Tx)(t,e)):Li(this.node(),t).delay}function Sx(e,t){return function(){fr(this,e).duration=+t.apply(this,arguments)}}function bx(e,t){return t=+t,function(){fr(this,e).duration=t}}function Ax(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sx:bx)(t,e)):Li(this.node(),t).duration}function Rx(e,t){if(typeof t!="function")throw new Error;return function(){fr(this,e).ease=t}}function Ix(e){var t=this._id;return arguments.length?this.each(Rx(t,e)):Li(this.node(),t).ease}function Cx(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fr(this,e).ease=n}}function xx(e){if(typeof e!="function")throw new Error;return this.each(Cx(this._id,e))}function Nx(e){typeof e!="function"&&(e=$w(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],m,g=0;g<c;++g)(m=l[g])&&e.call(m,m.__data__,g,l)&&d.push(m);return new Fr(r,this._parents,this._name,this._id)}function Dx(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var m=t[d],g=n[d],y=m.length,v=c[d]=new Array(y),E,S=0;S<y;++S)(E=m[S]||g[S])&&(v[S]=E);for(;d<r;++d)c[d]=t[d];return new Fr(c,this._parents,this._name,this._id)}function Mx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ox(e,t,n){var r,a,l=Mx(t)?Bp:fr;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function Vx(e,t){var n=this._id;return arguments.length<2?Li(this.node(),n).on.on(e):this.each(Ox(n,e,t))}function kx(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Px(){return this.on("end.remove",kx(this._id))}function Lx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pp(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],m=d.length,g=l[c]=new Array(m),y,v,E=0;E<m;++E)(y=d[E])&&(v=e.call(y,y.__data__,E,d))&&("__data__"in y&&(v.__data__=y.__data__),g[E]=v,Yf(g[E],t,n,E,g,Li(y,n)));return new Fr(l,this._parents,t,n)}function Ux(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gw(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var m=r[d],g=m.length,y,v=0;v<g;++v)if(y=m[v]){for(var E=e.call(y,y.__data__,v,m),S,O=Li(y,n),P=0,I=E.length;P<I;++P)(S=E[P])&&Yf(S,t,n,P,E,O);l.push(E),c.push(y)}return new Fr(l,c,t,n)}var zx=uc.prototype.constructor;function Bx(){return new zx(this._groups,this._parents)}function Hx(e,t){var n,r,a;return function(){var l=rl(this,e),c=(this.style.removeProperty(e),rl(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function gS(e){return function(){this.style.removeProperty(e)}}function qx(e,t,n){var r,a=n+"",l;return function(){var c=rl(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function Fx(e,t,n){var r,a,l;return function(){var c=rl(this,e),d=n(this),m=d+"";return d==null&&(m=d=(this.style.removeProperty(e),rl(this,e))),c===m?null:c===r&&m===a?l:(a=m,l=t(r=c,d))}}function jx(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var m=fr(this,e),g=m.on,y=m.value[l]==null?d||(d=gS(t)):void 0;(g!==n||a!==y)&&(r=(n=g).copy()).on(c,a=y),m.on=r}}function Gx(e,t,n){var r=(e+="")=="transform"?G2:mS;return t==null?this.styleTween(e,Hx(e,r)).on("end.style."+e,gS(e)):typeof t=="function"?this.styleTween(e,Fx(e,r,Hp(this,"style."+e,t))).each(jx(this._id,e)):this.styleTween(e,qx(e,r,t),n).on("end.style."+e,null)}function $x(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Yx(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&$x(e,c,n)),r}return l._value=t,l}function Kx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Yx(e,t,n??""))}function Xx(e){return function(){this.textContent=e}}function Qx(e){return function(){var t=e(this);this.textContent=t??""}}function Zx(e){return this.tween("text",typeof e=="function"?Qx(Hp(this,"text",e)):Xx(e==null?"":e+""))}function Wx(e){return function(t){this.textContent=e.call(this,t)}}function Jx(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Wx(a)),t}return r._value=e,r}function tN(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Jx(e))}function eN(){for(var e=this._name,t=this._id,n=pS(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,m,g=0;g<d;++g)if(m=c[g]){var y=Li(m,t);Yf(m,e,n,g,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Fr(r,this._parents,e,n)}function nN(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},m={value:function(){--a===0&&l()}};n.each(function(){var g=fr(this,r),y=g.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(m)),g.on=t}),a===0&&l()})}var iN=0;function Fr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function pS(){return++iN}var Lr=uc.prototype;Fr.prototype={constructor:Fr,select:Lx,selectAll:Ux,selectChild:Lr.selectChild,selectChildren:Lr.selectChildren,filter:Nx,merge:Dx,selection:Bx,transition:eN,call:Lr.call,nodes:Lr.nodes,node:Lr.node,size:Lr.size,empty:Lr.empty,each:Lr.each,on:Vx,attr:mx,attrTween:vx,style:Gx,styleTween:Kx,text:Zx,textTween:tN,remove:Px,tween:ox,delay:wx,duration:Ax,ease:Ix,easeVarying:xx,end:nN,[Symbol.iterator]:Lr[Symbol.iterator]};function rN(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sN={time:null,delay:0,duration:250,ease:rN};function aN(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function oN(e){var t,n;e instanceof Fr?(t=e._id,e=e._name):(t=pS(),(n=sN).time=zp(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,m,g=0;g<d;++g)(m=c[g])&&Yf(m,e,t,g,c,n||aN(m,t));return new Fr(r,this._parents,e,t)}uc.prototype.interrupt=rx;uc.prototype.transition=oN;const Fh=e=>()=>e;function lN(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Ur(e,t,n){this.k=e,this.x=t,this.y=n}Ur.prototype={constructor:Ur,scale:function(e){return e===1?this:new Ur(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ur(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hr=new Ur(1,0,0);Ur.prototype;function Cg(e){e.stopImmediatePropagation()}function Ru(e){e.preventDefault(),e.stopImmediatePropagation()}function uN(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function zE(){return this.__zoom||Hr}function hN(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fN(){return navigator.maxTouchPoints||"ontouchstart"in this}function dN(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function yS(){var e=uN,t=cN,n=dN,r=hN,a=fN,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,m=Q2,g=jf("start","zoom","end"),y,v,E,S=500,O=150,P=0,I=10;function z(M){M.property("__zoom",zE).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",L).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}z.transform=function(M,Q,x,j){var J=M.selection?M.selection():M;J.property("__zoom",zE),M!==J?K(M,Q,x,j):J.interrupt().each(function(){it(this,arguments).event(j).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},z.scaleBy=function(M,Q,x,j){z.scaleTo(M,function(){var J=this.__zoom.k,X=typeof Q=="function"?Q.apply(this,arguments):Q;return J*X},x,j)},z.scaleTo=function(M,Q,x,j){z.transform(M,function(){var J=t.apply(this,arguments),X=this.__zoom,N=x==null?q(J):typeof x=="function"?x.apply(this,arguments):x,Y=X.invert(N),et=typeof Q=="function"?Q.apply(this,arguments):Q;return n(F(H(X,et),N,Y),J,c)},x,j)},z.translateBy=function(M,Q,x,j){z.transform(M,function(){return n(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof x=="function"?x.apply(this,arguments):x),t.apply(this,arguments),c)},null,j)},z.translateTo=function(M,Q,x,j,J){z.transform(M,function(){var X=t.apply(this,arguments),N=this.__zoom,Y=j==null?q(X):typeof j=="function"?j.apply(this,arguments):j;return n(Hr.translate(Y[0],Y[1]).scale(N.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof x=="function"?-x.apply(this,arguments):-x),X,c)},j,J)};function H(M,Q){return Q=Math.max(l[0],Math.min(l[1],Q)),Q===M.k?M:new Ur(Q,M.x,M.y)}function F(M,Q,x){var j=Q[0]-x[0]*M.k,J=Q[1]-x[1]*M.k;return j===M.x&&J===M.y?M:new Ur(M.k,j,J)}function q(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function K(M,Q,x,j){M.on("start.zoom",function(){it(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){it(this,arguments).event(j).end()}).tween("zoom",function(){var J=this,X=arguments,N=it(J,X).event(j),Y=t.apply(J,X),et=x==null?q(Y):typeof x=="function"?x.apply(J,X):x,st=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),ct=J.__zoom,pt=typeof Q=="function"?Q.apply(J,X):Q,yt=m(ct.invert(et).concat(st/ct.k),pt.invert(et).concat(st/pt.k));return function(It){if(It===1)It=pt;else{var At=yt(It),kt=st/At[2];It=new Ur(kt,et[0]-At[0]*kt,et[1]-At[1]*kt)}N.zoom(null,It)}})}function it(M,Q,x){return!x&&M.__zooming||new V(M,Q)}function V(M,Q){this.that=M,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,Q),this.taps=0}V.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,Q){return this.mouse&&M!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var Q=vi(this.that).datum();g.call(M,this.that,new lN(M,{sourceEvent:this.sourceEvent,target:z,transform:this.that.__zoom,dispatch:g}),Q)}};function A(M,...Q){if(!e.apply(this,arguments))return;var x=it(this,Q).event(M),j=this.__zoom,J=Math.max(l[0],Math.min(l[1],j.k*Math.pow(2,r.apply(this,arguments)))),X=Di(M);if(x.wheel)(x.mouse[0][0]!==X[0]||x.mouse[0][1]!==X[1])&&(x.mouse[1]=j.invert(x.mouse[0]=X)),clearTimeout(x.wheel);else{if(j.k===J)return;x.mouse=[X,j.invert(X)],sf(this),x.start()}Ru(M),x.wheel=setTimeout(N,O),x.zoom("mouse",n(F(H(j,J),x.mouse[0],x.mouse[1]),x.extent,c));function N(){x.wheel=null,x.end()}}function R(M,...Q){if(E||!e.apply(this,arguments))return;var x=M.currentTarget,j=it(this,Q,!0).event(M),J=vi(M.view).on("mousemove.zoom",et,!0).on("mouseup.zoom",st,!0),X=Di(M,x),N=M.clientX,Y=M.clientY;nS(M.view),Cg(M),j.mouse=[X,this.__zoom.invert(X)],sf(this),j.start();function et(ct){if(Ru(ct),!j.moved){var pt=ct.clientX-N,yt=ct.clientY-Y;j.moved=pt*pt+yt*yt>P}j.event(ct).zoom("mouse",n(F(j.that.__zoom,j.mouse[0]=Di(ct,x),j.mouse[1]),j.extent,c))}function st(ct){J.on("mousemove.zoom mouseup.zoom",null),iS(ct.view,j.moved),Ru(ct),j.event(ct).end()}}function k(M,...Q){if(e.apply(this,arguments)){var x=this.__zoom,j=Di(M.changedTouches?M.changedTouches[0]:M,this),J=x.invert(j),X=x.k*(M.shiftKey?.5:2),N=n(F(H(x,X),j,J),t.apply(this,Q),c);Ru(M),d>0?vi(this).transition().duration(d).call(K,N,j,M):vi(this).call(z.transform,N,j,M)}}function L(M,...Q){if(e.apply(this,arguments)){var x=M.touches,j=x.length,J=it(this,Q,M.changedTouches.length===j).event(M),X,N,Y,et;for(Cg(M),N=0;N<j;++N)Y=x[N],et=Di(Y,this),et=[et,this.__zoom.invert(et),Y.identifier],J.touch0?!J.touch1&&J.touch0[2]!==et[2]&&(J.touch1=et,J.taps=0):(J.touch0=et,X=!0,J.taps=1+!!y);y&&(y=clearTimeout(y)),X&&(J.taps<2&&(v=et[0],y=setTimeout(function(){y=null},S)),sf(this),J.start())}}function U(M,...Q){if(this.__zooming){var x=it(this,Q).event(M),j=M.changedTouches,J=j.length,X,N,Y,et;for(Ru(M),X=0;X<J;++X)N=j[X],Y=Di(N,this),x.touch0&&x.touch0[2]===N.identifier?x.touch0[0]=Y:x.touch1&&x.touch1[2]===N.identifier&&(x.touch1[0]=Y);if(N=x.that.__zoom,x.touch1){var st=x.touch0[0],ct=x.touch0[1],pt=x.touch1[0],yt=x.touch1[1],It=(It=pt[0]-st[0])*It+(It=pt[1]-st[1])*It,At=(At=yt[0]-ct[0])*At+(At=yt[1]-ct[1])*At;N=H(N,Math.sqrt(It/At)),Y=[(st[0]+pt[0])/2,(st[1]+pt[1])/2],et=[(ct[0]+yt[0])/2,(ct[1]+yt[1])/2]}else if(x.touch0)Y=x.touch0[0],et=x.touch0[1];else return;x.zoom("touch",n(F(N,Y,et),x.extent,c))}}function D(M,...Q){if(this.__zooming){var x=it(this,Q).event(M),j=M.changedTouches,J=j.length,X,N;for(Cg(M),E&&clearTimeout(E),E=setTimeout(function(){E=null},S),X=0;X<J;++X)N=j[X],x.touch0&&x.touch0[2]===N.identifier?delete x.touch0:x.touch1&&x.touch1[2]===N.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(N=Di(N,this),Math.hypot(v[0]-N[0],v[1]-N[1])<I)){var Y=vi(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return z.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:Fh(+M),z):r},z.filter=function(M){return arguments.length?(e=typeof M=="function"?M:Fh(!!M),z):e},z.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:Fh(!!M),z):a},z.extent=function(M){return arguments.length?(t=typeof M=="function"?M:Fh([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),z):t},z.scaleExtent=function(M){return arguments.length?(l[0]=+M[0],l[1]=+M[1],z):[l[0],l[1]]},z.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],z):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},z.constrain=function(M){return arguments.length?(n=M,z):n},z.duration=function(M){return arguments.length?(d=+M,z):d},z.interpolate=function(M){return arguments.length?(m=M,z):m},z.on=function(){var M=g.on.apply(g,arguments);return M===g?z:M},z.clickDistance=function(M){return arguments.length?(P=(M=+M)*M,z):Math.sqrt(P)},z.tapDistance=function(M){return arguments.length?(I=+M,z):I},z}qw();const Kf=$.createContext(null),mN=Kf.Provider,jr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},_S=jr.error001();function ge(e,t){const n=$.useContext(Kf);if(n===null)throw new Error(_S);return Fw(n,e,t)}const Ke=()=>{const e=$.useContext(Kf);if(e===null)throw new Error(_S);return $.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},gN=e=>e.userSelectionActive?"none":"all";function qp({position:e,children:t,className:n,style:r,...a}){const l=ge(gN),c=`${e}`.split("-");return lt.createElement("div",{className:gn(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...a},t)}function pN({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:lt.createElement(qp,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const yN=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:m,className:g,...y})=>{const v=$.useRef(null),[E,S]=$.useState({x:0,y:0,width:0,height:0}),O=gn(["react-flow__edge-textwrapper",g]);return $.useEffect(()=>{if(v.current){const P=v.current.getBBox();S({x:P.x,y:P.y,width:P.width,height:P.height})}},[n]),typeof n>"u"||!n?null:lt.createElement("g",{transform:`translate(${e-E.width/2} ${t-E.height/2})`,className:O,visibility:E.width?"visible":"hidden",...y},a&&lt.createElement("rect",{width:E.width+2*c[0],x:-c[0],y:-c[1],height:E.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),lt.createElement("text",{className:"react-flow__edge-text",y:E.height/2,dy:"0.3em",ref:v,style:r},n),m)};var _N=$.memo(yN);const Fp=e=>({width:e.offsetWidth,height:e.offsetHeight}),al=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),jp=(e={x:0,y:0},t)=>({x:al(e.x,t[0][0],t[1][0]),y:al(e.y,t[0][1],t[1][1])}),BE=(e,t,n)=>e<t?al(Math.abs(e-t),1,50)/50:e>n?-al(Math.abs(e-n),1,50)/50:0,vS=(e,t)=>{const n=BE(e.x,35,t.width-35)*20,r=BE(e.y,35,t.height-35)*20;return[n,r]},ES=e=>e.getRootNode?.()||window?.document,TS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Xu=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),wS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),HE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),vN=(e,t)=>wS(TS(Xu(e),Xu(t))),ep=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},EN=e=>Ti(e.width)&&Ti(e.height)&&Ti(e.x)&&Ti(e.y),Ti=e=>!isNaN(e)&&isFinite(e),Ce=Symbol.for("internals"),SS=["Enter"," ","Escape"],TN=(e,t)=>{},wN=e=>"nativeEvent"in e;function np(e){const n=(wN(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const bS=e=>"clientX"in e,Ms=(e,t)=>{const n=bS(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},wf=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,hc=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:E,interactionWidth:S=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:E}),S&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),a&&Ti(n)&&Ti(r)?lt.createElement(_N,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:g}):null);hc.displayName="BaseEdge";function Iu(e,t,n){return n===void 0?n:r=>{const a=t().edges.find(l=>l.id===e);a&&n(r,{...a})}}function AS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function RS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const m=e*.125+a*.375+c*.375+n*.125,g=t*.125+l*.375+d*.375+r*.125,y=Math.abs(m-e),v=Math.abs(g-t);return[m,g,y,v]}var zs;(function(e){e.Strict="strict",e.Loose="loose"})(zs||(zs={}));var xa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xa||(xa={}));var Qu;(function(e){e.Partial="partial",e.Full="full"})(Qu||(Qu={}));var Rs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Rs||(Rs={}));var Sf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Sf||(Sf={}));var bt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bt||(bt={}));function qE({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===bt.Left||e===bt.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function IS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top}){const[c,d]=qE({pos:n,x1:e,y1:t,x2:r,y2:a}),[m,g]=qE({pos:l,x1:r,y1:a,x2:e,y2:t}),[y,v,E,S]=RS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:m,targetControlY:g});return[`M${e},${t} C${c},${d} ${m},${g} ${r},${a}`,y,v,E,S]}const Gp=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:O,interactionWidth:P})=>{const[I,z,H]=IS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l});return lt.createElement(hc,{path:I,labelX:z,labelY:H,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:O,interactionWidth:P})});Gp.displayName="SimpleBezierEdge";const FE={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},SN=({source:e,sourcePosition:t=bt.Bottom,target:n})=>t===bt.Left||t===bt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},jE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function bN({source:e,sourcePosition:t=bt.Bottom,target:n,targetPosition:r=bt.Top,center:a,offset:l}){const c=FE[t],d=FE[r],m={x:e.x+c.x*l,y:e.y+c.y*l},g={x:n.x+d.x*l,y:n.y+d.y*l},y=SN({source:m,sourcePosition:t,target:g}),v=y.x!==0?"x":"y",E=y[v];let S=[],O,P;const I={x:0,y:0},z={x:0,y:0},[H,F,q,K]=AS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){O=a.x??H,P=a.y??F;const V=[{x:O,y:m.y},{x:O,y:g.y}],A=[{x:m.x,y:P},{x:g.x,y:P}];c[v]===E?S=v==="x"?V:A:S=v==="x"?A:V}else{const V=[{x:m.x,y:g.y}],A=[{x:g.x,y:m.y}];if(v==="x"?S=c.x===E?A:V:S=c.y===E?V:A,t===r){const D=Math.abs(e[v]-n[v]);if(D<=l){const M=Math.min(l-1,l-D);c[v]===E?I[v]=(m[v]>e[v]?-1:1)*M:z[v]=(g[v]>n[v]?-1:1)*M}}if(t!==r){const D=v==="x"?"y":"x",M=c[v]===d[D],Q=m[D]>g[D],x=m[D]<g[D];(c[v]===1&&(!M&&Q||M&&x)||c[v]!==1&&(!M&&x||M&&Q))&&(S=v==="x"?V:A)}const R={x:m.x+I.x,y:m.y+I.y},k={x:g.x+z.x,y:g.y+z.y},L=Math.max(Math.abs(R.x-S[0].x),Math.abs(k.x-S[0].x)),U=Math.max(Math.abs(R.y-S[0].y),Math.abs(k.y-S[0].y));L>=U?(O=(R.x+k.x)/2,P=S[0].y):(O=S[0].x,P=(R.y+k.y)/2)}return[[e,{x:m.x+I.x,y:m.y+I.y},...S,{x:g.x+z.x,y:g.y+z.y},n],O,P,q,K]}function AN(e,t,n,r){const a=Math.min(jE(e,t)/2,jE(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const g=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+a*g},${c}Q ${l},${c} ${l},${c+a*y}`}const d=e.x<n.x?1:-1,m=e.y<n.y?-1:1;return`L ${l},${c+a*m}Q ${l},${c} ${l+a*d},${c}`}function ip({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,borderRadius:c=5,centerX:d,centerY:m,offset:g=20}){const[y,v,E,S,O]=bN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:l,center:{x:d,y:m},offset:g});return[y.reduce((I,z,H)=>{let F="";return H>0&&H<y.length-1?F=AN(y[H-1],z,y[H+1],c):F=`${H===0?"M":"L"}${z.x} ${z.y}`,I+=F,I},""),v,E,S,O]}const Xf=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:g,style:y,sourcePosition:v=bt.Bottom,targetPosition:E=bt.Top,markerEnd:S,markerStart:O,pathOptions:P,interactionWidth:I})=>{const[z,H,F]=ip({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:E,borderRadius:P?.borderRadius,offset:P?.offset});return lt.createElement(hc,{path:z,labelX:H,labelY:F,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:g,style:y,markerEnd:S,markerStart:O,interactionWidth:I})});Xf.displayName="SmoothStepEdge";const $p=$.memo(e=>lt.createElement(Xf,{...e,pathOptions:$.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));$p.displayName="StepEdge";function RN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,l,c,d]=AS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,l,c,d]}const Yp=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:E,interactionWidth:S})=>{const[O,P,I]=RN({sourceX:e,sourceY:t,targetX:n,targetY:r});return lt.createElement(hc,{path:O,labelX:P,labelY:I,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:E,interactionWidth:S})});Yp.displayName="StraightEdge";function jh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function GE({pos:e,x1:t,y1:n,x2:r,y2:a,c:l}){switch(e){case bt.Left:return[t-jh(t-r,l),n];case bt.Right:return[t+jh(r-t,l),n];case bt.Top:return[t,n-jh(n-a,l)];case bt.Bottom:return[t,n+jh(a-n,l)]}}function CS({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:r,targetY:a,targetPosition:l=bt.Top,curvature:c=.25}){const[d,m]=GE({pos:n,x1:e,y1:t,x2:r,y2:a,c}),[g,y]=GE({pos:l,x1:r,y1:a,x2:e,y2:t,c}),[v,E,S,O]=RS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:m,targetControlX:g,targetControlY:y});return[`M${e},${t} C${d},${m} ${g},${y} ${r},${a}`,v,E,S,O]}const bf=$.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=bt.Bottom,targetPosition:l=bt.Top,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:O,pathOptions:P,interactionWidth:I})=>{const[z,H,F]=CS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l,curvature:P?.curvature});return lt.createElement(hc,{path:z,labelX:H,labelY:F,label:c,labelStyle:d,labelShowBg:m,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:E,markerEnd:S,markerStart:O,interactionWidth:I})});bf.displayName="BezierEdge";const Kp=$.createContext(null),IN=Kp.Provider;Kp.Consumer;const CN=()=>$.useContext(Kp),xN=e=>"id"in e&&"source"in e&&"target"in e,NN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,rp=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,DN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),MN=(e,t)=>{if(!e.source||!e.target)return t;let n;return xN(e)?n={...e}:n={...e,id:NN(e)},DN(n,t)?t:t.concat(n)},sp=({x:e,y:t},[n,r,a],l,[c,d])=>{const m={x:(e-n)/a,y:(t-r)/a};return l?{x:c*Math.round(m.x/c),y:d*Math.round(m.y/d)}:m},xS=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),Ma=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},Qf=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const{x:l,y:c}=Ma(a,t).positionAbsolute;return TS(r,Xu({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return wS(n)},NS=(e,t,[n,r,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const m={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},g=[];return e.forEach(y=>{const{width:v,height:E,selectable:S=!0,hidden:O=!1}=y;if(c&&!S||O)return!1;const{positionAbsolute:P}=Ma(y,d),I={x:P.x,y:P.y,width:v||0,height:E||0},z=ep(m,I),H=typeof v>"u"||typeof E>"u"||v===null||E===null,F=l&&z>0,q=(v||0)*(E||0);(H||F||z>=q||y.dragging)&&g.push(y)}),g},DS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},MS=(e,t,n,r,a,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),m=Math.min(c,d),g=al(m,r,a),y=e.x+e.width/2,v=e.y+e.height/2,E=t/2-y*g,S=n/2-v*g;return{x:E,y:S,zoom:g}},Ra=(e,t=0)=>e.transition().duration(t);function $E(e,t,n,r){return(t[n]||[]).reduce((a,l)=>(`${e.id}-${l.id}-${n}`!==r&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function ON(e,t,n,r,a,l){const{x:c,y:d}=Ms(e),g=t.elementsFromPoint(c,d).find(O=>O.classList.contains("react-flow__handle"));if(g){const O=g.getAttribute("data-nodeid");if(O){const P=Xp(void 0,g),I=g.getAttribute("data-handleid"),z=l({nodeId:O,id:I,type:P});if(z){const H=a.find(F=>F.nodeId===O&&F.type===P&&F.id===I);return{handle:{id:I,type:P,nodeId:O,x:H?.x||n.x,y:H?.y||n.y},validHandleResult:z}}}}let y=[],v=1/0;if(a.forEach(O=>{const P=Math.sqrt((O.x-n.x)**2+(O.y-n.y)**2);if(P<=r){const I=l(O);P<=v&&(P<v?y=[{handle:O,validHandleResult:I}]:P===v&&y.push({handle:O,validHandleResult:I}),v=P)}}),!y.length)return{handle:null,validHandleResult:OS()};if(y.length===1)return y[0];const E=y.some(({validHandleResult:O})=>O.isValid),S=y.some(({handle:O})=>O.type==="target");return y.find(({handle:O,validHandleResult:P})=>S?O.type==="target":E?P.isValid:!0)||y[0]}const VN={source:null,target:null,sourceHandle:null,targetHandle:null},OS=()=>({handleDomNode:null,isValid:!1,connection:VN,endHandle:null});function VS(e,t,n,r,a,l,c){const d=a==="target",m=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),g={...OS(),handleDomNode:m};if(m){const y=Xp(void 0,m),v=m.getAttribute("data-nodeid"),E=m.getAttribute("data-handleid"),S=m.classList.contains("connectable"),O=m.classList.contains("connectableend"),P={source:d?v:n,sourceHandle:d?E:r,target:d?n:v,targetHandle:d?r:E};g.connection=P,S&&O&&(t===zs.Strict?d&&y==="source"||!d&&y==="target":v!==n||E!==r)&&(g.endHandle={nodeId:v,handleId:E,type:y},g.isValid=l(P))}return g}function kN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((a,l)=>{if(l[Ce]){const{handleBounds:c}=l[Ce];let d=[],m=[];c&&(d=$E(l,c,"source",`${t}-${n}-${r}`),m=$E(l,c,"target",`${t}-${n}-${r}`)),a.push(...d,...m)}return a},[])}function Xp(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function xg(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function PN(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function kS({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:m,onReconnectEnd:g}){const y=ES(e.target),{connectionMode:v,domNode:E,autoPanOnConnect:S,connectionRadius:O,onConnectStart:P,panBy:I,getNodes:z,cancelConnection:H}=l();let F=0,q;const{x:K,y:it}=Ms(e),V=y?.elementFromPoint(K,it),A=Xp(m,V),R=E?.getBoundingClientRect();if(!R||!A)return;let k,L=Ms(e,R),U=!1,D=null,M=!1,Q=null;const x=kN({nodes:z(),nodeId:n,handleId:t,handleType:A}),j=()=>{if(!S)return;const[N,Y]=vS(L,R);I({x:N,y:Y}),F=requestAnimationFrame(j)};c({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:t,type:A},connectionEndHandle:null}),P?.(e,{nodeId:n,handleId:t,handleType:A});function J(N){const{transform:Y}=l();L=Ms(N,R);const{handle:et,validHandleResult:st}=ON(N,y,sp(L,Y,!1,[1,1]),O,x,ct=>VS(ct,v,n,t,a?"target":"source",d,y));if(q=et,U||(j(),U=!0),Q=st.handleDomNode,D=st.connection,M=st.isValid,c({connectionPosition:q&&M?xS({x:q.x,y:q.y},Y):L,connectionStatus:PN(!!q,M),connectionEndHandle:st.endHandle}),!q&&!M&&!Q)return xg(k);D.source!==D.target&&Q&&(xg(k),k=Q,Q.classList.add("connecting","react-flow__handle-connecting"),Q.classList.toggle("valid",M),Q.classList.toggle("react-flow__handle-valid",M))}function X(N){(q||Q)&&D&&M&&r?.(D),l().onConnectEnd?.(N),m&&g?.(N),xg(k),H(),cancelAnimationFrame(F),U=!1,M=!1,D=null,Q=null,y.removeEventListener("mousemove",J),y.removeEventListener("mouseup",X),y.removeEventListener("touchmove",J),y.removeEventListener("touchend",X)}y.addEventListener("mousemove",J),y.addEventListener("mouseup",X),y.addEventListener("touchmove",J),y.addEventListener("touchend",X)}const YE=()=>!0,LN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),UN=(e,t,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},PS=$.forwardRef(({type:e="source",position:t=bt.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:m,className:g,onMouseDown:y,onTouchStart:v,...E},S)=>{const O=c||null,P=e==="target",I=Ke(),z=CN(),{connectOnClick:H,noPanClassName:F}=ge(LN,sn),{connecting:q,clickConnecting:K}=ge(UN(z,O,e),sn);z||I.getState().onError?.("010",jr.error010());const it=R=>{const{defaultEdgeOptions:k,onConnect:L,hasDefaultEdges:U}=I.getState(),D={...k,...R};if(U){const{edges:M,setEdges:Q}=I.getState();Q(MN(D,M))}L?.(D),d?.(D)},V=R=>{if(!z)return;const k=bS(R);a&&(k&&R.button===0||!k)&&kS({event:R,handleId:O,nodeId:z,onConnect:it,isTarget:P,getState:I.getState,setState:I.setState,isValidConnection:n||I.getState().isValidConnection||YE}),k?y?.(R):v?.(R)},A=R=>{const{onClickConnectStart:k,onClickConnectEnd:L,connectionClickStartHandle:U,connectionMode:D,isValidConnection:M}=I.getState();if(!z||!U&&!a)return;if(!U){k?.(R,{nodeId:z,handleId:O,handleType:e}),I.setState({connectionClickStartHandle:{nodeId:z,type:e,handleId:O}});return}const Q=ES(R.target),x=n||M||YE,{connection:j,isValid:J}=VS({nodeId:z,id:O,type:e},D,U.nodeId,U.handleId||null,U.type,x,Q);J&&it(j),L?.(R),I.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":O,"data-nodeid":z,"data-handlepos":t,"data-id":`${z}-${O}-${e}`,className:gn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",F,g,{source:!P,target:P,connectable:r,connectablestart:a,connectableend:l,connecting:K,connectionindicator:r&&(a&&!q||l&&q)}]),onMouseDown:V,onTouchStart:V,onClick:H?A:void 0,ref:S,...E},m)});PS.displayName="Handle";var Va=$.memo(PS);const LS=({data:e,isConnectable:t,targetPosition:n=bt.Top,sourcePosition:r=bt.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(Va,{type:"target",position:n,isConnectable:t}),e?.label,lt.createElement(Va,{type:"source",position:r,isConnectable:t}));LS.displayName="DefaultNode";var ap=$.memo(LS);const US=({data:e,isConnectable:t,sourcePosition:n=bt.Bottom})=>lt.createElement(lt.Fragment,null,e?.label,lt.createElement(Va,{type:"source",position:n,isConnectable:t}));US.displayName="InputNode";var zS=$.memo(US);const BS=({data:e,isConnectable:t,targetPosition:n=bt.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(Va,{type:"target",position:n,isConnectable:t}),e?.label);BS.displayName="OutputNode";var HS=$.memo(BS);const Qp=()=>null;Qp.displayName="GroupNode";const zN=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Gh=e=>e.id;function BN(e,t){return sn(e.selectedNodes.map(Gh),t.selectedNodes.map(Gh))&&sn(e.selectedEdges.map(Gh),t.selectedEdges.map(Gh))}const qS=$.memo(({onSelectionChange:e})=>{const t=Ke(),{selectedNodes:n,selectedEdges:r}=ge(zN,BN);return $.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(l=>l(a))},[n,r,e]),null});qS.displayName="SelectionListener";const HN=e=>!!e.onSelectionChange;function qN({onSelectionChange:e}){const t=ge(HN);return e||t?lt.createElement(qS,{onSelectionChange:e}):null}const FN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Lo(e,t){$.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function qt(e,t,n){$.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const jN=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:m,nodesDraggable:g,nodesConnectable:y,nodesFocusable:v,edgesFocusable:E,edgesUpdatable:S,elevateNodesOnSelect:O,minZoom:P,maxZoom:I,nodeExtent:z,onNodesChange:H,onEdgesChange:F,elementsSelectable:q,connectionMode:K,snapGrid:it,snapToGrid:V,translateExtent:A,connectOnClick:R,defaultEdgeOptions:k,fitView:L,fitViewOptions:U,onNodesDelete:D,onEdgesDelete:M,onNodeDrag:Q,onNodeDragStart:x,onNodeDragStop:j,onSelectionDrag:J,onSelectionDragStart:X,onSelectionDragStop:N,noPanClassName:Y,nodeOrigin:et,rfId:st,autoPanOnConnect:ct,autoPanOnNodeDrag:pt,onError:yt,connectionRadius:It,isValidConnection:At,nodeDragThreshold:kt})=>{const{setNodes:Pt,setEdges:ue,setDefaultNodesAndEdges:ce,setMinZoom:Ee,setMaxZoom:_e,setTranslateExtent:he,setNodeExtent:Xe,reset:Lt}=ge(FN,sn),wt=Ke();return $.useEffect(()=>{const xe=r?.map(pn=>({...pn,...k}));return ce(n,xe),()=>{Lt()}},[]),qt("defaultEdgeOptions",k,wt.setState),qt("connectionMode",K,wt.setState),qt("onConnect",a,wt.setState),qt("onConnectStart",l,wt.setState),qt("onConnectEnd",c,wt.setState),qt("onClickConnectStart",d,wt.setState),qt("onClickConnectEnd",m,wt.setState),qt("nodesDraggable",g,wt.setState),qt("nodesConnectable",y,wt.setState),qt("nodesFocusable",v,wt.setState),qt("edgesFocusable",E,wt.setState),qt("edgesUpdatable",S,wt.setState),qt("elementsSelectable",q,wt.setState),qt("elevateNodesOnSelect",O,wt.setState),qt("snapToGrid",V,wt.setState),qt("snapGrid",it,wt.setState),qt("onNodesChange",H,wt.setState),qt("onEdgesChange",F,wt.setState),qt("connectOnClick",R,wt.setState),qt("fitViewOnInit",L,wt.setState),qt("fitViewOnInitOptions",U,wt.setState),qt("onNodesDelete",D,wt.setState),qt("onEdgesDelete",M,wt.setState),qt("onNodeDrag",Q,wt.setState),qt("onNodeDragStart",x,wt.setState),qt("onNodeDragStop",j,wt.setState),qt("onSelectionDrag",J,wt.setState),qt("onSelectionDragStart",X,wt.setState),qt("onSelectionDragStop",N,wt.setState),qt("noPanClassName",Y,wt.setState),qt("nodeOrigin",et,wt.setState),qt("rfId",st,wt.setState),qt("autoPanOnConnect",ct,wt.setState),qt("autoPanOnNodeDrag",pt,wt.setState),qt("onError",yt,wt.setState),qt("connectionRadius",It,wt.setState),qt("isValidConnection",At,wt.setState),qt("nodeDragThreshold",kt,wt.setState),Lo(e,Pt),Lo(t,ue),Lo(P,Ee),Lo(I,_e),Lo(A,he),Lo(z,Xe),null},KE={display:"none"},GN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},FS="react-flow__node-desc",jS="react-flow__edge-desc",$N="react-flow__aria-live",YN=e=>e.ariaLiveMessage;function KN({rfId:e}){const t=ge(YN);return lt.createElement("div",{id:`${$N}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:GN},t)}function XN({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${FS}-${e}`,style:KE},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${jS}-${e}`,style:KE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(KN,{rfId:e}))}var Zu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=$.useState(!1),a=$.useRef(!1),l=$.useRef(new Set([])),[c,d]=$.useMemo(()=>{if(e!==null){const g=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=g.reduce((v,E)=>v.concat(...E),[]);return[g,y]}return[[],[]]},[e]);return $.useEffect(()=>{const m=typeof document<"u"?document:null,g=t?.target||m;if(e!==null){const y=S=>{if(a.current=S.ctrlKey||S.metaKey||S.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&np(S))return!1;const P=QE(S.code,d);l.current.add(S[P]),XE(c,l.current,!1)&&(S.preventDefault(),r(!0))},v=S=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&np(S))return!1;const P=QE(S.code,d);XE(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[P]),S.key==="Meta"&&l.current.clear(),a.current=!1},E=()=>{l.current.clear(),r(!1)};return g?.addEventListener("keydown",y),g?.addEventListener("keyup",v),window.addEventListener("blur",E),()=>{g?.removeEventListener("keydown",y),g?.removeEventListener("keyup",v),window.removeEventListener("blur",E)}}},[e,r]),n};function XE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function QE(e,t){return t.includes(e)?"code":"key"}function GS(e,t,n,r){const a=e.parentNode||e.parentId;if(!a)return n;const l=t.get(a),c=Ma(l,r);return GS(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Ce]?.z??0)>(n.z??0)?l[Ce]?.z??0:n.z??0},r)}function $S(e,t,n){e.forEach(r=>{const a=r.parentNode||r.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[r.id]){const{x:l,y:c,z:d}=GS(r,e,{...r.position,z:r[Ce]?.z??0},t);r.positionAbsolute={x:l,y:c},r[Ce].z=d,n?.[r.id]&&(r[Ce].isParent=!0)}})}function Ng(e,t,n,r){const a=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const m=(Ti(d.zIndex)?d.zIndex:0)+(d.selected?c:0),g=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const E=g?.type&&g?.type!==d.type;Object.defineProperty(y,Ce,{enumerable:!1,value:{handleBounds:E?void 0:g?.[Ce]?.handleBounds,z:m}}),a.set(d.id,y)}),$S(a,n,l),a}function YS(e,t={}){const{getNodes:n,width:r,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:m,fitViewOnInitDone:g,fitViewOnInit:y,nodeOrigin:v}=e(),E=t.initial&&!g&&y;if(d&&m&&(E||!t.initial)){const O=n().filter(I=>{const z=t.includeHiddenNodes?I.width&&I.height:!I.hidden;return t.nodes?.length?z&&t.nodes.some(H=>H.id===I.id):z}),P=O.every(I=>I.width&&I.height);if(O.length>0&&P){const I=Qf(O,v),{x:z,y:H,zoom:F}=MS(I,r,a,t.minZoom??l,t.maxZoom??c,t.padding??.1),q=Hr.translate(z,H).scale(F);return typeof t.duration=="number"&&t.duration>0?d.transform(Ra(m,t.duration),q):d.transform(m,q),!0}}return!1}function QN(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ce]:r[Ce],selected:n.selected})}),new Map(t)}function ZN(e,t){return t.map(n=>{const r=e.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function $h({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:m,hasDefaultEdges:g}=n();e?.length&&(m&&r({nodeInternals:QN(e,a)}),c?.(e)),t?.length&&(g&&r({edges:ZN(t,l)}),d?.(t))}const Uo=()=>{},WN={zoomIn:Uo,zoomOut:Uo,zoomTo:Uo,getZoom:()=>1,setViewport:Uo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Uo,fitBounds:Uo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},JN=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),tD=()=>{const e=Ke(),{d3Zoom:t,d3Selection:n}=ge(JN,sn);return $.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Ra(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(Ra(n,a?.duration),1/1.2),zoomTo:(a,l)=>t.scaleTo(Ra(n,l?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,l)=>{const[c,d,m]=e.getState().transform,g=Hr.translate(a.x??c,a.y??d).scale(a.zoom??m);t.transform(Ra(n,l?.duration),g)},getViewport:()=>{const[a,l,c]=e.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>YS(e.getState,a),setCenter:(a,l,c)=>{const{width:d,height:m,maxZoom:g}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:g,v=d/2-a*y,E=m/2-l*y,S=Hr.translate(v,E).scale(y);t.transform(Ra(n,c?.duration),S)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:m,maxZoom:g}=e.getState(),{x:y,y:v,zoom:E}=MS(a,c,d,m,g,l?.padding??.1),S=Hr.translate(y,v).scale(E);t.transform(Ra(n,l?.duration),S)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),sp(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:m}=e.getState();if(!m)return a;const{x:g,y}=m.getBoundingClientRect(),v={x:a.x-g,y:a.y-y};return sp(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=e.getState();if(!c)return a;const{x:d,y:m}=c.getBoundingClientRect(),g=xS(a,l);return{x:g.x+d,y:g.y+m}},viewportInitialized:!0}:WN,[t,n])};function Zp(){const e=tD(),t=Ke(),n=$.useCallback(()=>t.getState().getNodes().map(P=>({...P})),[]),r=$.useCallback(P=>t.getState().nodeInternals.get(P),[]),a=$.useCallback(()=>{const{edges:P=[]}=t.getState();return P.map(I=>({...I}))},[]),l=$.useCallback(P=>{const{edges:I=[]}=t.getState();return I.find(z=>z.id===P)},[]),c=$.useCallback(P=>{const{getNodes:I,setNodes:z,hasDefaultNodes:H,onNodesChange:F}=t.getState(),q=I(),K=typeof P=="function"?P(q):P;if(H)z(K);else if(F){const it=K.length===0?q.map(V=>({type:"remove",id:V.id})):K.map(V=>({item:V,type:"reset"}));F(it)}},[]),d=$.useCallback(P=>{const{edges:I=[],setEdges:z,hasDefaultEdges:H,onEdgesChange:F}=t.getState(),q=typeof P=="function"?P(I):P;if(H)z(q);else if(F){const K=q.length===0?I.map(it=>({type:"remove",id:it.id})):q.map(it=>({item:it,type:"reset"}));F(K)}},[]),m=$.useCallback(P=>{const I=Array.isArray(P)?P:[P],{getNodes:z,setNodes:H,hasDefaultNodes:F,onNodesChange:q}=t.getState();if(F){const it=[...z(),...I];H(it)}else if(q){const K=I.map(it=>({item:it,type:"add"}));q(K)}},[]),g=$.useCallback(P=>{const I=Array.isArray(P)?P:[P],{edges:z=[],setEdges:H,hasDefaultEdges:F,onEdgesChange:q}=t.getState();if(F)H([...z,...I]);else if(q){const K=I.map(it=>({item:it,type:"add"}));q(K)}},[]),y=$.useCallback(()=>{const{getNodes:P,edges:I=[],transform:z}=t.getState(),[H,F,q]=z;return{nodes:P().map(K=>({...K})),edges:I.map(K=>({...K})),viewport:{x:H,y:F,zoom:q}}},[]),v=$.useCallback(({nodes:P,edges:I})=>{const{nodeInternals:z,getNodes:H,edges:F,hasDefaultNodes:q,hasDefaultEdges:K,onNodesDelete:it,onEdgesDelete:V,onNodesChange:A,onEdgesChange:R}=t.getState(),k=(P||[]).map(Q=>Q.id),L=(I||[]).map(Q=>Q.id),U=H().reduce((Q,x)=>{const j=x.parentNode||x.parentId,J=!k.includes(x.id)&&j&&Q.find(N=>N.id===j);return(typeof x.deletable=="boolean"?x.deletable:!0)&&(k.includes(x.id)||J)&&Q.push(x),Q},[]),D=F.filter(Q=>typeof Q.deletable=="boolean"?Q.deletable:!0),M=D.filter(Q=>L.includes(Q.id));if(U||M){const Q=DS(U,D),x=[...M,...Q],j=x.reduce((J,X)=>(J.includes(X.id)||J.push(X.id),J),[]);if((K||q)&&(K&&t.setState({edges:F.filter(J=>!j.includes(J.id))}),q&&(U.forEach(J=>{z.delete(J.id)}),t.setState({nodeInternals:new Map(z)}))),j.length>0&&(V?.(x),R&&R(j.map(J=>({id:J,type:"remove"})))),U.length>0&&(it?.(U),A)){const J=U.map(X=>({id:X.id,type:"remove"}));A(J)}}},[]),E=$.useCallback(P=>{const I=EN(P),z=I?null:t.getState().nodeInternals.get(P.id);return!I&&!z?[null,null,I]:[I?P:HE(z),z,I]},[]),S=$.useCallback((P,I=!0,z)=>{const[H,F,q]=E(P);return H?(z||t.getState().getNodes()).filter(K=>{if(!q&&(K.id===F.id||!K.positionAbsolute))return!1;const it=HE(K),V=ep(it,H);return I&&V>0||V>=H.width*H.height}):[]},[]),O=$.useCallback((P,I,z=!0)=>{const[H]=E(P);if(!H)return!1;const F=ep(H,I);return z&&F>0||F>=H.width*H.height},[]);return $.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:m,addEdges:g,toObject:y,deleteElements:v,getIntersectingNodes:S,isNodeIntersecting:O}),[e,n,r,a,l,c,d,m,g,y,v,S,O])}const eD={actInsideInputWithModifier:!1};var nD=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ke(),{deleteElements:r}=Zp(),a=Zu(e,eD),l=Zu(t);$.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),m=d().filter(y=>y.selected),g=c.filter(y=>y.selected);r({nodes:m,edges:g}),n.setState({nodesSelectionActive:!1})}},[a]),$.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function iD(e){const t=Ke();$.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const a=Fp(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",jr.error004()),t.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Wp={position:"absolute",width:"100%",height:"100%",top:0,left:0},rD=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Yh=e=>({x:e.x,y:e.y,zoom:e.k}),zo=(e,t)=>e.target.closest(`.${t}`),ZE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),WE=e=>{const t=e.ctrlKey&&wf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},sD=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),aD=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:m=xa.Free,zoomOnDoubleClick:g=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:E,translateExtent:S,minZoom:O,maxZoom:P,zoomActivationKeyCode:I,preventScrolling:z=!0,children:H,noWheelClassName:F,noPanClassName:q})=>{const K=$.useRef(),it=Ke(),V=$.useRef(!1),A=$.useRef(!1),R=$.useRef(null),k=$.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:U,d3ZoomHandler:D,userSelectionActive:M}=ge(sD,sn),Q=Zu(I),x=$.useRef(0),j=$.useRef(!1),J=$.useRef();return iD(R),$.useEffect(()=>{if(R.current){const X=R.current.getBoundingClientRect(),N=yS().scaleExtent([O,P]).translateExtent(S),Y=vi(R.current).call(N),et=Hr.translate(E.x,E.y).scale(al(E.zoom,O,P)),st=[[0,0],[X.width,X.height]],ct=N.constrain()(et,st,S);N.transform(Y,ct),N.wheelDelta(WE),it.setState({d3Zoom:N,d3Selection:Y,d3ZoomHandler:Y.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:R.current.closest(".react-flow")})}},[]),$.useEffect(()=>{U&&L&&(c&&!Q&&!M?U.on("wheel.zoom",X=>{if(zo(X,F))return!1;X.preventDefault(),X.stopImmediatePropagation();const N=U.property("__zoom").k||1;if(X.ctrlKey&&l){const At=Di(X),kt=WE(X),Pt=N*Math.pow(2,kt);L.scaleTo(U,Pt,At,X);return}const Y=X.deltaMode===1?20:1;let et=m===xa.Vertical?0:X.deltaX*Y,st=m===xa.Horizontal?0:X.deltaY*Y;!wf()&&X.shiftKey&&m!==xa.Vertical&&(et=X.deltaY*Y,st=0),L.translateBy(U,-(et/N)*d,-(st/N)*d,{internal:!0});const ct=Yh(U.property("__zoom")),{onViewportChangeStart:pt,onViewportChange:yt,onViewportChangeEnd:It}=it.getState();clearTimeout(J.current),j.current||(j.current=!0,t?.(X,ct),pt?.(ct)),j.current&&(e?.(X,ct),yt?.(ct),J.current=setTimeout(()=>{n?.(X,ct),It?.(ct),j.current=!1},150))},{passive:!1}):typeof D<"u"&&U.on("wheel.zoom",function(X,N){if(!z&&X.type==="wheel"&&!X.ctrlKey||zo(X,F))return null;X.preventDefault(),D.call(this,X,N)},{passive:!1}))},[M,c,m,U,L,D,Q,l,z,F,t,e,n]),$.useEffect(()=>{L&&L.on("start",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;x.current=X.sourceEvent?.button;const{onViewportChangeStart:N}=it.getState(),Y=Yh(X.transform);V.current=!0,k.current=Y,X.sourceEvent?.type==="mousedown"&&it.setState({paneDragging:!0}),N?.(Y),t?.(X.sourceEvent,Y)})},[L,t]),$.useEffect(()=>{L&&(M&&!V.current?L.on("zoom",null):M||L.on("zoom",X=>{const{onViewportChange:N}=it.getState();if(it.setState({transform:[X.transform.x,X.transform.y,X.transform.k]}),A.current=!!(r&&ZE(v,x.current??0)),(e||N)&&!X.sourceEvent?.internal){const Y=Yh(X.transform);N?.(Y),e?.(X.sourceEvent,Y)}}))},[M,L,e,v,r]),$.useEffect(()=>{L&&L.on("end",X=>{if(!X.sourceEvent||X.sourceEvent.internal)return null;const{onViewportChangeEnd:N}=it.getState();if(V.current=!1,it.setState({paneDragging:!1}),r&&ZE(v,x.current??0)&&!A.current&&r(X.sourceEvent),A.current=!1,(n||N)&&rD(k.current,X.transform)){const Y=Yh(X.transform);k.current=Y,clearTimeout(K.current),K.current=setTimeout(()=>{N?.(Y),n?.(X.sourceEvent,Y)},c?150:0)}})},[L,c,v,n,r]),$.useEffect(()=>{L&&L.filter(X=>{const N=Q||a,Y=l&&X.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&X.button===1&&X.type==="mousedown"&&(zo(X,"react-flow__node")||zo(X,"react-flow__edge")))return!0;if(!v&&!N&&!c&&!g&&!l||M||!g&&X.type==="dblclick"||zo(X,F)&&X.type==="wheel"||zo(X,q)&&(X.type!=="wheel"||c&&X.type==="wheel"&&!Q)||!l&&X.ctrlKey&&X.type==="wheel"||!N&&!c&&!Y&&X.type==="wheel"||!v&&(X.type==="mousedown"||X.type==="touchstart")||Array.isArray(v)&&!v.includes(X.button)&&X.type==="mousedown")return!1;const et=Array.isArray(v)&&v.includes(X.button)||!X.button||X.button<=1;return(!X.ctrlKey||X.type==="wheel")&&et})},[M,L,a,l,c,g,v,y,Q]),lt.createElement("div",{className:"react-flow__renderer",ref:R,style:Wp},H)},oD=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function lD(){const{userSelectionActive:e,userSelectionRect:t}=ge(oD,sn);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function JE(e,t){const n=t.parentNode||t.parentId,r=e.find(a=>a.id===n);if(r){const a=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(a>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function KS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,a)=>{const l=e.filter(d=>d.id===a.id);if(l.length===0)return r.push(a),r;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&JE(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&JE(r,c);break}case"remove":return r}return r.push(c),r},n)}function XS(e,t){return KS(e,t)}function uD(e,t){return KS(e,t)}const As=(e,t)=>({id:e,type:"select",selected:t});function $o(e,t){return e.reduce((n,r)=>{const a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(As(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(As(r.id,!1))),n},[])}const Dg=(e,t)=>n=>{n.target===t.current&&e?.(n)},cD=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),QS=$.memo(({isSelecting:e,selectionMode:t=Qu.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:m,onPaneMouseMove:g,onPaneMouseLeave:y,children:v})=>{const E=$.useRef(null),S=Ke(),O=$.useRef(0),P=$.useRef(0),I=$.useRef(),{userSelectionActive:z,elementsSelectable:H,dragging:F}=ge(cD,sn),q=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),O.current=0,P.current=0},K=D=>{l?.(D),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},it=D=>{if(Array.isArray(n)&&n?.includes(2)){D.preventDefault();return}c?.(D)},V=d?D=>d(D):void 0,A=D=>{const{resetSelectedElements:M,domNode:Q}=S.getState();if(I.current=Q?.getBoundingClientRect(),!H||!e||D.button!==0||D.target!==E.current||!I.current)return;const{x,y:j}=Ms(D,I.current);M(),S.setState({userSelectionRect:{width:0,height:0,startX:x,startY:j,x,y:j}}),r?.(D)},R=D=>{const{userSelectionRect:M,nodeInternals:Q,edges:x,transform:j,onNodesChange:J,onEdgesChange:X,nodeOrigin:N,getNodes:Y}=S.getState();if(!e||!I.current||!M)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const et=Ms(D,I.current),st=M.startX??0,ct=M.startY??0,pt={...M,x:et.x<st?et.x:st,y:et.y<ct?et.y:ct,width:Math.abs(et.x-st),height:Math.abs(et.y-ct)},yt=Y(),It=NS(Q,pt,j,t===Qu.Partial,!0,N),At=DS(It,x).map(Pt=>Pt.id),kt=It.map(Pt=>Pt.id);if(O.current!==kt.length){O.current=kt.length;const Pt=$o(yt,kt);Pt.length&&J?.(Pt)}if(P.current!==At.length){P.current=At.length;const Pt=$o(x,At);Pt.length&&X?.(Pt)}S.setState({userSelectionRect:pt})},k=D=>{if(D.button!==0)return;const{userSelectionRect:M}=S.getState();!z&&M&&D.target===E.current&&K?.(D),S.setState({nodesSelectionActive:O.current>0}),q(),a?.(D)},L=D=>{z&&(S.setState({nodesSelectionActive:O.current>0}),a?.(D)),q()},U=H&&(e||z);return lt.createElement("div",{className:gn(["react-flow__pane",{dragging:F,selection:e}]),onClick:U?void 0:Dg(K,E),onContextMenu:Dg(it,E),onWheel:Dg(V,E),onMouseEnter:U?void 0:m,onMouseDown:U?A:void 0,onMouseMove:U?R:g,onMouseUp:U?k:void 0,onMouseLeave:U?L:y,ref:E,style:Wp},v,lt.createElement(lD,null))});QS.displayName="Pane";function ZS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:ZS(r,t):!1}function tT(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function hD(e,t,n,r){return Array.from(e.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!ZS(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function fD(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function WS(e,t,n,r,a=[0,0],l){const c=fD(e,e.extent||r);let d=c;const m=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(m&&e.width&&e.height){const v=n.get(m),{x:E,y:S}=Ma(v,a).positionAbsolute;d=v&&Ti(E)&&Ti(S)&&Ti(v.width)&&Ti(v.height)?[[E+e.width*a[0],S+e.height*a[1]],[E+v.width-e.width+e.width*a[0],S+v.height-e.height+e.height*a[1]]]:d}else l?.("005",jr.error005()),d=c;else if(e.extent&&m&&e.extent!=="parent"){const v=n.get(m),{x:E,y:S}=Ma(v,a).positionAbsolute;d=[[e.extent[0][0]+E,e.extent[0][1]+S],[e.extent[1][0]+E,e.extent[1][1]+S]]}let g={x:0,y:0};if(m){const v=n.get(m);g=Ma(v,a).positionAbsolute}const y=d&&d!=="parent"?jp(t,d):t;return{position:{x:y.x-g.x,y:y.y-g.y},positionAbsolute:y}}function Mg({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?r.find(a=>a.id===e):r[0],r]}const eT=(e,t,n,r)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const l=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(m=>{const g=m.getBoundingClientRect();return{id:m.getAttribute("data-handleid"),position:m.getAttribute("data-handlepos"),x:(g.left-c.left-d.x)/n,y:(g.top-c.top-d.y)/n,...Fp(m)}})};function Cu(e,t,n){return n===void 0?n:r=>{const a=t().nodeInternals.get(e);a&&n(r,{...a})}}function op({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:m}=t.getState(),g=d.get(e);if(!g){m?.("012",jr.error012(e));return}t.setState({nodesSelectionActive:!1}),g.selected?(n||g.selected&&c)&&(l({nodes:[g],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function dD(){const e=Ke();return $.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,m={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?a[0]*Math.round(m.x/a[0]):m.x,ySnapped:l?a[1]*Math.round(m.y/a[1]):m.y,...m}},[])}function Og(e){return(t,n,r)=>e?.(t,r)}function JS({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=Ke(),[m,g]=$.useState(!1),y=$.useRef([]),v=$.useRef({x:null,y:null}),E=$.useRef(0),S=$.useRef(null),O=$.useRef({x:0,y:0}),P=$.useRef(null),I=$.useRef(!1),z=$.useRef(!1),H=$.useRef(!1),F=dD();return $.useEffect(()=>{if(e?.current){const q=vi(e.current),K=({x:A,y:R})=>{const{nodeInternals:k,onNodeDrag:L,onSelectionDrag:U,updateNodePositions:D,nodeExtent:M,snapGrid:Q,snapToGrid:x,nodeOrigin:j,onError:J}=d.getState();v.current={x:A,y:R};let X=!1,N={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&M){const et=Qf(y.current,j);N=Xu(et)}if(y.current=y.current.map(et=>{const st={x:A-et.distance.x,y:R-et.distance.y};x&&(st.x=Q[0]*Math.round(st.x/Q[0]),st.y=Q[1]*Math.round(st.y/Q[1]));const ct=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];y.current.length>1&&M&&!et.extent&&(ct[0][0]=et.positionAbsolute.x-N.x+M[0][0],ct[1][0]=et.positionAbsolute.x+(et.width??0)-N.x2+M[1][0],ct[0][1]=et.positionAbsolute.y-N.y+M[0][1],ct[1][1]=et.positionAbsolute.y+(et.height??0)-N.y2+M[1][1]);const pt=WS(et,st,k,ct,j,J);return X=X||et.position.x!==pt.position.x||et.position.y!==pt.position.y,et.position=pt.position,et.positionAbsolute=pt.positionAbsolute,et}),!X)return;D(y.current,!0,!0),g(!0);const Y=a?L:Og(U);if(Y&&P.current){const[et,st]=Mg({nodeId:a,dragItems:y.current,nodeInternals:k});Y(P.current,et,st)}},it=()=>{if(!S.current)return;const[A,R]=vS(O.current,S.current);if(A!==0||R!==0){const{transform:k,panBy:L}=d.getState();v.current.x=(v.current.x??0)-A/k[2],v.current.y=(v.current.y??0)-R/k[2],L({x:A,y:R})&&K(v.current)}E.current=requestAnimationFrame(it)},V=A=>{const{nodeInternals:R,multiSelectionActive:k,nodesDraggable:L,unselectNodesAndEdges:U,onNodeDragStart:D,onSelectionDragStart:M}=d.getState();z.current=!0;const Q=a?D:Og(M);(!c||!l)&&!k&&a&&(R.get(a)?.selected||U()),a&&l&&c&&op({id:a,store:d,nodeRef:e});const x=F(A);if(v.current=x,y.current=hD(R,L,x,a),Q&&y.current){const[j,J]=Mg({nodeId:a,dragItems:y.current,nodeInternals:R});Q(A.sourceEvent,j,J)}};if(t)q.on(".drag",null);else{const A=b2().on("start",R=>{const{domNode:k,nodeDragThreshold:L}=d.getState();L===0&&V(R),H.current=!1;const U=F(R);v.current=U,S.current=k?.getBoundingClientRect()||null,O.current=Ms(R.sourceEvent,S.current)}).on("drag",R=>{const k=F(R),{autoPanOnNodeDrag:L,nodeDragThreshold:U}=d.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(H.current=!0),!H.current){if(!I.current&&z.current&&L&&(I.current=!0,it()),!z.current){const D=k.xSnapped-(v?.current?.x??0),M=k.ySnapped-(v?.current?.y??0);Math.sqrt(D*D+M*M)>U&&V(R)}(v.current.x!==k.xSnapped||v.current.y!==k.ySnapped)&&y.current&&z.current&&(P.current=R.sourceEvent,O.current=Ms(R.sourceEvent,S.current),K(k))}}).on("end",R=>{if(!(!z.current||H.current)&&(g(!1),I.current=!1,z.current=!1,cancelAnimationFrame(E.current),y.current)){const{updateNodePositions:k,nodeInternals:L,onNodeDragStop:U,onSelectionDragStop:D}=d.getState(),M=a?U:Og(D);if(k(y.current,!1,!1),M){const[Q,x]=Mg({nodeId:a,dragItems:y.current,nodeInternals:L});M(R.sourceEvent,Q,x)}}}).filter(R=>{const k=R.target;return!R.button&&(!n||!tT(k,`.${n}`,e))&&(!r||tT(k,r,e))});return q.call(A),()=>{q.on(".drag",null)}}}},[e,t,n,r,l,d,a,c,F]),m}function t1(){const e=Ke();return $.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:m,onError:g,nodesDraggable:y}=e.getState(),v=c().filter(H=>H.selected&&(H.draggable||y&&typeof H.draggable>"u")),E=d?m[0]:5,S=d?m[1]:5,O=n.isShiftPressed?4:1,P=n.x*E*O,I=n.y*S*O,z=v.map(H=>{if(H.positionAbsolute){const F={x:H.positionAbsolute.x+P,y:H.positionAbsolute.y+I};d&&(F.x=m[0]*Math.round(F.x/m[0]),F.y=m[1]*Math.round(F.y/m[1]));const{positionAbsolute:q,position:K}=WS(H,F,r,a,void 0,g);H.position=K,H.positionAbsolute=q}return H});l(z,!0,!1)},[])}const Zo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var xu=e=>{const t=({id:n,type:r,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:m,selected:g,onClick:y,onMouseEnter:v,onMouseMove:E,onMouseLeave:S,onContextMenu:O,onDoubleClick:P,style:I,className:z,isDraggable:H,isSelectable:F,isConnectable:q,isFocusable:K,selectNodesOnDrag:it,sourcePosition:V,targetPosition:A,hidden:R,resizeObserver:k,dragHandle:L,zIndex:U,isParent:D,noDragClassName:M,noPanClassName:Q,initialized:x,disableKeyboardA11y:j,ariaLabel:J,rfId:X,hasHandleBounds:N})=>{const Y=Ke(),et=$.useRef(null),st=$.useRef(null),ct=$.useRef(V),pt=$.useRef(A),yt=$.useRef(r),It=F||H||y||v||E||S,At=t1(),kt=Cu(n,Y.getState,v),Pt=Cu(n,Y.getState,E),ue=Cu(n,Y.getState,S),ce=Cu(n,Y.getState,O),Ee=Cu(n,Y.getState,P),_e=Lt=>{const{nodeDragThreshold:wt}=Y.getState();if(F&&(!it||!H||wt>0)&&op({id:n,store:Y,nodeRef:et}),y){const xe=Y.getState().nodeInternals.get(n);xe&&y(Lt,{...xe})}},he=Lt=>{if(!np(Lt)&&!j)if(SS.includes(Lt.key)&&F){const wt=Lt.key==="Escape";op({id:n,store:Y,unselect:wt,nodeRef:et})}else H&&g&&Object.prototype.hasOwnProperty.call(Zo,Lt.key)&&(Y.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),At({x:Zo[Lt.key].x,y:Zo[Lt.key].y,isShiftPressed:Lt.shiftKey}))};$.useEffect(()=>()=>{st.current&&(k?.unobserve(st.current),st.current=null)},[]),$.useEffect(()=>{if(et.current&&!R){const Lt=et.current;(!x||!N||st.current!==Lt)&&(st.current&&k?.unobserve(st.current),k?.observe(Lt),st.current=Lt)}},[R,x,N]),$.useEffect(()=>{const Lt=yt.current!==r,wt=ct.current!==V,xe=pt.current!==A;et.current&&(Lt||wt||xe)&&(Lt&&(yt.current=r),wt&&(ct.current=V),xe&&(pt.current=A),Y.getState().updateNodeDimensions([{id:n,nodeElement:et.current,forceUpdate:!0}]))},[n,r,V,A]);const Xe=JS({nodeRef:et,disabled:R||!H,noDragClassName:M,handleSelector:L,nodeId:n,isSelectable:F,selectNodesOnDrag:it});return R?null:lt.createElement("div",{className:gn(["react-flow__node",`react-flow__node-${r}`,{[Q]:H},z,{selected:g,selectable:F,parent:D,dragging:Xe}]),ref:et,style:{zIndex:U,transform:`translate(${d}px,${m}px)`,pointerEvents:It?"all":"none",visibility:x?"visible":"hidden",...I},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:kt,onMouseMove:Pt,onMouseLeave:ue,onContextMenu:ce,onClick:_e,onDoubleClick:Ee,onKeyDown:K?he:void 0,tabIndex:K?0:void 0,role:K?"button":void 0,"aria-describedby":j?void 0:`${FS}-${X}`,"aria-label":J},lt.createElement(IN,{value:n},lt.createElement(e,{id:n,data:a,type:r,xPos:l,yPos:c,selected:g,isConnectable:q,sourcePosition:V,targetPosition:A,dragging:Xe,dragHandle:L,zIndex:U})))};return t.displayName="NodeWrapper",$.memo(t)};const mD=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Qf(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function gD({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ke(),{width:a,height:l,x:c,y:d,transformString:m,userSelectionActive:g}=ge(mD,sn),y=t1(),v=$.useRef(null);if($.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),JS({nodeRef:v}),g||!a||!l)return null;const E=e?O=>{const P=r.getState().getNodes().filter(I=>I.selected);e(O,P)}:void 0,S=O=>{Object.prototype.hasOwnProperty.call(Zo,O.key)&&y({x:Zo[O.key].x,y:Zo[O.key].y,isShiftPressed:O.shiftKey})};return lt.createElement("div",{className:gn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:m}},lt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:E,tabIndex:n?void 0:-1,onKeyDown:n?void 0:S,style:{width:a,height:l,top:d,left:c}}))}var pD=$.memo(gD);const yD=e=>e.nodesSelectionActive,e1=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:m,onMoveStart:g,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:E,selectionMode:S,onSelectionStart:O,onSelectionEnd:P,multiSelectionKeyCode:I,panActivationKeyCode:z,zoomActivationKeyCode:H,elementsSelectable:F,zoomOnScroll:q,zoomOnPinch:K,panOnScroll:it,panOnScrollSpeed:V,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:k,defaultViewport:L,translateExtent:U,minZoom:D,maxZoom:M,preventScrolling:Q,onSelectionContextMenu:x,noWheelClassName:j,noPanClassName:J,disableKeyboardA11y:X})=>{const N=ge(yD),Y=Zu(v),et=Zu(z),st=et||k,ct=et||it,pt=Y||E&&st!==!0;return nD({deleteKeyCode:d,multiSelectionKeyCode:I}),lt.createElement(aD,{onMove:m,onMoveStart:g,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:F,zoomOnScroll:q,zoomOnPinch:K,panOnScroll:ct,panOnScrollSpeed:V,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:!Y&&st,defaultViewport:L,translateExtent:U,minZoom:D,maxZoom:M,zoomActivationKeyCode:H,preventScrolling:Q,noWheelClassName:j,noPanClassName:J},lt.createElement(QS,{onSelectionStart:O,onSelectionEnd:P,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:st,isSelecting:!!pt,selectionMode:S},e,N&&lt.createElement(pD,{onSelectionContextMenu:x,noPanClassName:J,disableKeyboardA11y:X})))};e1.displayName="FlowRenderer";var _D=$.memo(e1);function vD(e){return ge($.useCallback(n=>e?NS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function ED(e){const t={input:xu(e.input||zS),default:xu(e.default||ap),output:xu(e.output||HS),group:xu(e.group||Qp)},n={},r=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=xu(e[l]||ap),a),n);return{...t,...r}}const TD=({x:e,y:t,width:n,height:r,origin:a})=>!n||!r?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]},wD=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),n1=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:l,onError:c}=ge(wD,sn),d=vD(e.onlyRenderVisibleElements),m=$.useRef(),g=$.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const E=v.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));l(E)});return m.current=y,y},[]);return $.useEffect(()=>()=>{m?.current?.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:Wp},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",jr.error003(v)),v="default");const E=e.nodeTypes[v]||e.nodeTypes.default,S=!!(y.draggable||t&&typeof y.draggable>"u"),O=!!(y.selectable||a&&typeof y.selectable>"u"),P=!!(y.connectable||n&&typeof y.connectable>"u"),I=!!(y.focusable||r&&typeof y.focusable>"u"),z=e.nodeExtent?jp(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,H=z?.x??0,F=z?.y??0,q=TD({x:H,y:F,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return lt.createElement(E,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||bt.Bottom,targetPosition:y.targetPosition||bt.Top,hidden:y.hidden,xPos:H,yPos:F,xPosOrigin:q.x,yPosOrigin:q.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:S,isSelectable:O,isConnectable:P,isFocusable:I,resizeObserver:g,dragHandle:y.dragHandle,zIndex:y[Ce]?.z??0,isParent:!!y[Ce]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ce]?.handleBounds})}))};n1.displayName="NodeRenderer";var SD=$.memo(n1);const bD=(e,t,n)=>n===bt.Left?e-t:n===bt.Right?e+t:e,AD=(e,t,n)=>n===bt.Top?e-t:n===bt.Bottom?e+t:e,nT="react-flow__edgeupdater",iT=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:gn([nT,`${nT}-${d}`]),cx:bD(t,r,e),cy:AD(n,r,e),r,stroke:"transparent",fill:"transparent"}),RD=()=>!0;var Bo=e=>{const t=({id:n,className:r,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:m,animated:g,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:O,labelBgBorderRadius:P,style:I,source:z,target:H,sourceX:F,sourceY:q,targetX:K,targetY:it,sourcePosition:V,targetPosition:A,elementsSelectable:R,hidden:k,sourceHandleId:L,targetHandleId:U,onContextMenu:D,onMouseEnter:M,onMouseMove:Q,onMouseLeave:x,reconnectRadius:j,onReconnect:J,onReconnectStart:X,onReconnectEnd:N,markerEnd:Y,markerStart:et,rfId:st,ariaLabel:ct,isFocusable:pt,isReconnectable:yt,pathOptions:It,interactionWidth:At,disableKeyboardA11y:kt})=>{const Pt=$.useRef(null),[ue,ce]=$.useState(!1),[Ee,_e]=$.useState(!1),he=Ke(),Xe=$.useMemo(()=>`url('#${rp(et,st)}')`,[et,st]),Lt=$.useMemo(()=>`url('#${rp(Y,st)}')`,[Y,st]);if(k)return null;const wt=ke=>{const{edges:Qe,addSelectedEdges:bn,unselectNodesAndEdges:An,multiSelectionActive:Ze}=he.getState(),an=Qe.find(Rn=>Rn.id===n);an&&(R&&(he.setState({nodesSelectionActive:!1}),an.selected&&Ze?(An({nodes:[],edges:[an]}),Pt.current?.blur()):bn([n])),c&&c(ke,an))},xe=Iu(n,he.getState,d),pn=Iu(n,he.getState,D),Un=Iu(n,he.getState,M),Ui=Iu(n,he.getState,Q),zn=Iu(n,he.getState,x),Sn=(ke,Qe)=>{if(ke.button!==0)return;const{edges:bn,isValidConnection:An}=he.getState(),Ze=Qe?H:z,an=(Qe?U:L)||null,Rn=Qe?"target":"source",dr=An||RD,mr=Qe,bi=bn.find(Hn=>Hn.id===n);_e(!0),X?.(ke,bi,Rn);const Bn=Hn=>{_e(!1),N?.(Hn,bi,Rn)};kS({event:ke,handleId:an,nodeId:Ze,onConnect:Hn=>J?.(bi,Hn),isTarget:mr,getState:he.getState,setState:he.setState,isValidConnection:dr,edgeUpdaterType:Rn,onReconnectEnd:Bn})},Si=ke=>Sn(ke,!0),te=ke=>Sn(ke,!1),Ft=()=>ce(!0),Ve=()=>ce(!1),Te=!R&&!c,zi=ke=>{if(!kt&&SS.includes(ke.key)&&R){const{unselectNodesAndEdges:Qe,addSelectedEdges:bn,edges:An}=he.getState();ke.key==="Escape"?(Pt.current?.blur(),Qe({edges:[An.find(an=>an.id===n)]})):bn([n])}};return lt.createElement("g",{className:gn(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:m,animated:g,inactive:Te,updating:ue}]),onClick:wt,onDoubleClick:xe,onContextMenu:pn,onMouseEnter:Un,onMouseMove:Ui,onMouseLeave:zn,onKeyDown:pt?zi:void 0,tabIndex:pt?0:void 0,role:pt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${z} to ${H}`,"aria-describedby":pt?`${jS}-${st}`:void 0,ref:Pt},!Ee&&lt.createElement(e,{id:n,source:z,target:H,selected:m,animated:g,label:y,labelStyle:v,labelShowBg:E,labelBgStyle:S,labelBgPadding:O,labelBgBorderRadius:P,data:l,style:I,sourceX:F,sourceY:q,targetX:K,targetY:it,sourcePosition:V,targetPosition:A,sourceHandleId:L,targetHandleId:U,markerStart:Xe,markerEnd:Lt,pathOptions:It,interactionWidth:At}),yt&&lt.createElement(lt.Fragment,null,(yt==="source"||yt===!0)&&lt.createElement(iT,{position:V,centerX:F,centerY:q,radius:j,onMouseDown:Si,onMouseEnter:Ft,onMouseOut:Ve,type:"source"}),(yt==="target"||yt===!0)&&lt.createElement(iT,{position:A,centerX:K,centerY:it,radius:j,onMouseDown:te,onMouseEnter:Ft,onMouseOut:Ve,type:"target"})))};return t.displayName="EdgeWrapper",$.memo(t)};function ID(e){const t={default:Bo(e.default||bf),straight:Bo(e.bezier||Yp),step:Bo(e.step||$p),smoothstep:Bo(e.step||Xf),simplebezier:Bo(e.simplebezier||Gp)},n={},r=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=Bo(e[l]||bf),a),n);return{...t,...r}}function rT(e,t,n=null){const r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case bt.Top:return{x:r+l/2,y:a};case bt.Right:return{x:r+l,y:a+c/2};case bt.Bottom:return{x:r+l/2,y:a+c};case bt.Left:return{x:r,y:a+c/2}}}function sT(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const CD=(e,t,n,r,a,l)=>{const c=rT(n,e,t),d=rT(l,r,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function xD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:l,width:c,height:d,transform:m}){const g={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+l)};g.x===g.x2&&(g.x2+=1),g.y===g.y2&&(g.y2+=1);const y=Xu({x:(0-m[0])/m[2],y:(0-m[1])/m[2],width:c/m[2],height:d/m[2]}),v=Math.max(0,Math.min(y.x2,g.x2)-Math.max(y.x,g.x)),E=Math.max(0,Math.min(y.y2,g.y2)-Math.max(y.y,g.y));return Math.ceil(v*E)>0}function aT(e){const t=e?.[Ce]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const ND=[{level:0,isMaxLevel:!0,edges:[]}];function DD(e,t,n=!1){let r=-1;const a=e.reduce((c,d)=>{const m=Ti(d.zIndex);let g=m?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),E=d.selected||y?.selected||v?.selected,S=Math.max(v?.[Ce]?.z||0,y?.[Ce]?.z||0,1e3);g=(m?d.zIndex:0)+(E?S:0)}return c[g]?c[g].push(d):c[g]=[d],r=g>r?g:r,c},{}),l=Object.entries(a).map(([c,d])=>{const m=+c;return{edges:d,level:m,isMaxLevel:m===r}});return l.length===0?ND:l}function MD(e,t,n){const r=ge($.useCallback(a=>e?a.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&xD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return DD(r,t,n)}const OD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),VD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),oT={[Sf.Arrow]:OD,[Sf.ArrowClosed]:VD};function kD(e){const t=Ke();return $.useMemo(()=>Object.prototype.hasOwnProperty.call(oT,e)?oT[e]:(t.getState().onError?.("009",jr.error009(e)),null),[e])}const PD=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const m=kD(t);return m?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},lt.createElement(m,{color:n,strokeWidth:c})):null},LD=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=rp(c,t);r.includes(d)||(a.push({id:d,color:c.color||e,...c}),r.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},i1=({defaultColor:e,rfId:t})=>{const n=ge($.useCallback(LD({defaultColor:e,rfId:t}),[e,t]),(r,a)=>!(r.length!==a.length||r.some((l,c)=>l.id!==a[c].id)));return lt.createElement("defs",null,n.map(r=>lt.createElement(PD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};i1.displayName="MarkerDefinitions";var UD=$.memo(i1);const zD=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),r1=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:m,onEdgeMouseLeave:g,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:O,reconnectRadius:P,children:I,disableKeyboardA11y:z})=>{const{edgesFocusable:H,edgesUpdatable:F,elementsSelectable:q,width:K,height:it,connectionMode:V,nodeInternals:A,onError:R}=ge(zD,sn),k=MD(t,A,n);return K?lt.createElement(lt.Fragment,null,k.map(({level:L,edges:U,isMaxLevel:D})=>lt.createElement("svg",{key:L,style:{zIndex:L},width:K,height:it,className:"react-flow__edges react-flow__container"},D&&lt.createElement(UD,{defaultColor:e,rfId:r}),lt.createElement("g",null,U.map(M=>{const[Q,x,j]=aT(A.get(M.source)),[J,X,N]=aT(A.get(M.target));if(!j||!N)return null;let Y=M.type||"default";a[Y]||(R?.("011",jr.error011(Y)),Y="default");const et=a[Y]||a.default,st=V===zs.Strict?X.target:(X.target??[]).concat(X.source??[]),ct=sT(x.source,M.sourceHandle),pt=sT(st,M.targetHandle),yt=ct?.position||bt.Bottom,It=pt?.position||bt.Top,At=!!(M.focusable||H&&typeof M.focusable>"u"),kt=M.reconnectable||M.updatable,Pt=typeof E<"u"&&(kt||F&&typeof kt>"u");if(!ct||!pt)return R?.("008",jr.error008(ct,M)),null;const{sourceX:ue,sourceY:ce,targetX:Ee,targetY:_e}=CD(Q,ct,yt,J,pt,It);return lt.createElement(et,{key:M.id,id:M.id,className:gn([M.className,l]),type:Y,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:ue,sourceY:ce,targetX:Ee,targetY:_e,sourcePosition:yt,targetPosition:It,elementsSelectable:q,onContextMenu:c,onMouseEnter:d,onMouseMove:m,onMouseLeave:g,onClick:y,onEdgeDoubleClick:v,onReconnect:E,onReconnectStart:S,onReconnectEnd:O,reconnectRadius:P,rfId:r,ariaLabel:M.ariaLabel,isFocusable:At,isReconnectable:Pt,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:z})})))),I):null};r1.displayName="EdgeRenderer";var BD=$.memo(r1);const HD=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function qD({children:e}){const t=ge(HD);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function FD(e){const t=Zp(),n=$.useRef(!1);$.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const jD={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},s1=({nodeId:e,handleType:t,style:n,type:r=Rs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:m,toY:g,connectionMode:y}=ge($.useCallback(it=>({fromNode:it.nodeInternals.get(e),handleId:it.connectionHandleId,toX:(it.connectionPosition.x-it.transform[0])/it.transform[2],toY:(it.connectionPosition.y-it.transform[1])/it.transform[2],connectionMode:it.connectionMode}),[e]),sn),v=c?.[Ce]?.handleBounds;let E=v?.[t];if(y===zs.Loose&&(E=E||v?.[t==="source"?"target":"source"]),!c||!E)return null;const S=d?E.find(it=>it.id===d):E[0],O=S?S.x+S.width/2:(c.width??0)/2,P=S?S.y+S.height/2:c.height??0,I=(c.positionAbsolute?.x??0)+O,z=(c.positionAbsolute?.y??0)+P,H=S?.position,F=H?jD[H]:null;if(!H||!F)return null;if(a)return lt.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:S,fromX:I,fromY:z,toX:m,toY:g,fromPosition:H,toPosition:F,connectionStatus:l});let q="";const K={sourceX:I,sourceY:z,sourcePosition:H,targetX:m,targetY:g,targetPosition:F};return r===Rs.Bezier?[q]=CS(K):r===Rs.Step?[q]=ip({...K,borderRadius:0}):r===Rs.SmoothStep?[q]=ip(K):r===Rs.SimpleBezier?[q]=IS(K):q=`M${I},${z} ${m},${g}`,lt.createElement("path",{d:q,fill:"none",className:"react-flow__connection-path",style:n})};s1.displayName="ConnectionLine";const GD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function $D({containerStyle:e,style:t,type:n,component:r}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:m,connectionStatus:g}=ge(GD,sn);return!(a&&l&&d&&c)?null:lt.createElement("svg",{style:e,width:d,height:m,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:gn(["react-flow__connection",g])},lt.createElement(s1,{nodeId:a,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:g})))}function lT(e,t){return $.useRef(null),Ke(),$.useMemo(()=>t(e),[e])}const a1=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:m,onEdgeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,onSelectionContextMenu:O,onSelectionStart:P,onSelectionEnd:I,connectionLineType:z,connectionLineStyle:H,connectionLineComponent:F,connectionLineContainerStyle:q,selectionKeyCode:K,selectionOnDrag:it,selectionMode:V,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:k,deleteKeyCode:L,onlyRenderVisibleElements:U,elementsSelectable:D,selectNodesOnDrag:M,defaultViewport:Q,translateExtent:x,minZoom:j,maxZoom:J,preventScrolling:X,defaultMarkerColor:N,zoomOnScroll:Y,zoomOnPinch:et,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,zoomOnDoubleClick:yt,panOnDrag:It,onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneScroll:ce,onPaneContextMenu:Ee,onEdgeContextMenu:_e,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,noDragClassName:Ui,noWheelClassName:zn,noPanClassName:Sn,elevateEdgesOnSelect:Si,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Ve,rfId:Te})=>{const zi=lT(e,ED),ke=lT(t,ID);return FD(l),lt.createElement(_D,{onPaneClick:At,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneContextMenu:Ee,onPaneScroll:ce,deleteKeyCode:L,selectionKeyCode:K,selectionOnDrag:it,selectionMode:V,onSelectionStart:P,onSelectionEnd:I,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:k,elementsSelectable:D,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:Y,zoomOnPinch:et,zoomOnDoubleClick:yt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,panOnDrag:It,defaultViewport:Q,translateExtent:x,minZoom:j,maxZoom:J,onSelectionContextMenu:O,preventScrolling:X,noDragClassName:Ui,noWheelClassName:zn,noPanClassName:Sn,disableKeyboardA11y:te},lt.createElement(qD,null,lt.createElement(BD,{edgeTypes:ke,onEdgeClick:d,onEdgeDoubleClick:g,onlyRenderVisibleElements:U,onEdgeContextMenu:_e,onEdgeMouseEnter:he,onEdgeMouseMove:Xe,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:xe,onReconnectEnd:pn,reconnectRadius:Un,defaultMarkerColor:N,noPanClassName:Sn,elevateEdgesOnSelect:!!Si,disableKeyboardA11y:te,rfId:Te},lt.createElement($D,{style:H,type:z,component:F,containerStyle:q})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(SD,{nodeTypes:zi,onNodeClick:c,onNodeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:E,onNodeContextMenu:S,selectNodesOnDrag:M,onlyRenderVisibleElements:U,noPanClassName:Sn,noDragClassName:Ui,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Ve,rfId:Te})))};a1.displayName="GraphView";var YD=$.memo(a1);const lp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ws={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:lp,nodeExtent:lp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:TN,isValidConnection:void 0},KD=()=>PI((e,t)=>({...ws,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:l}=t();e({nodeInternals:Ng(n,r,a,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",l=typeof r<"u",c=a?Ng(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:m,nodeOrigin:g}=t(),y=m?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:E}=new window.DOMMatrixReadOnly(v.transform),S=n.reduce((P,I)=>{const z=a.get(I.id);if(z?.hidden)a.set(z.id,{...z,[Ce]:{...z[Ce],handleBounds:void 0}});else if(z){const H=Fp(I.nodeElement);!!(H.width&&H.height&&(z.width!==H.width||z.height!==H.height||I.forceUpdate))&&(a.set(z.id,{...z,[Ce]:{...z[Ce],handleBounds:{source:eT(".source",I.nodeElement,E,g),target:eT(".target",I.nodeElement,E,g)}},...H}),P.push({id:z.id,type:"dimensions",dimensions:H}))}return P},[]);$S(a,g);const O=c||l&&!c&&YS(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:O}),S?.length>0&&r?.(S)},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const m={id:d.id,type:"position",dragging:a};return r&&(m.positionAbsolute=d.positionAbsolute,m.position=d.position),m});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:m}=t();if(n?.length){if(l){const g=XS(n,d()),y=Ng(g,a,c,m);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(m=>As(m,!0)):(c=$o(l(),n),d=$o(a,[])),$h({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(m=>As(m,!0)):(c=$o(a,n),d=$o(l(),[])),$h({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:l}=t(),c=n||l(),d=r||a,m=c.map(y=>(y.selected=!1,As(y.id,!1))),g=d.map(y=>As(y.id,!1));$h({changedNodes:m,changedEdges:g,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>As(d.id,!1)),c=n.filter(d=>d.selected).map(d=>As(d.id,!1));$h({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(a=>{a.positionAbsolute=jp(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:m}=t();if(!c||!d||!n.x&&!n.y)return!1;const g=Hr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[a,l]],v=c?.constrain()(g,y,m);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:ws.connectionNodeId,connectionHandleId:ws.connectionHandleId,connectionHandleType:ws.connectionHandleType,connectionStatus:ws.connectionStatus,connectionStartHandle:ws.connectionStartHandle,connectionEndHandle:ws.connectionEndHandle}),reset:()=>e({...ws})}),Object.is),o1=({children:e})=>{const t=$.useRef(null);return t.current||(t.current=KD()),lt.createElement(mN,{value:t.current},e)};o1.displayName="ReactFlowProvider";const l1=({children:e})=>$.useContext(Kf)?lt.createElement(lt.Fragment,null,e):lt.createElement(o1,null,e);l1.displayName="ReactFlowWrapper";const XD={input:zS,default:ap,output:HS,group:Qp},QD={default:bf,straight:Yp,step:$p,smoothstep:Xf,simplebezier:Gp},ZD=[0,0],WD=[15,15],JD={x:0,y:0,zoom:1},tM={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},u1=$.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:l=XD,edgeTypes:c=QD,onNodeClick:d,onEdgeClick:m,onInit:g,onMove:y,onMoveStart:v,onMoveEnd:E,onConnect:S,onConnectStart:O,onConnectEnd:P,onClickConnectStart:I,onClickConnectEnd:z,onNodeMouseEnter:H,onNodeMouseMove:F,onNodeMouseLeave:q,onNodeContextMenu:K,onNodeDoubleClick:it,onNodeDragStart:V,onNodeDrag:A,onNodeDragStop:R,onNodesDelete:k,onEdgesDelete:L,onSelectionChange:U,onSelectionDragStart:D,onSelectionDrag:M,onSelectionDragStop:Q,onSelectionContextMenu:x,onSelectionStart:j,onSelectionEnd:J,connectionMode:X=zs.Strict,connectionLineType:N=Rs.Bezier,connectionLineStyle:Y,connectionLineComponent:et,connectionLineContainerStyle:st,deleteKeyCode:ct="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:yt=!1,selectionMode:It=Qu.Full,panActivationKeyCode:At="Space",multiSelectionKeyCode:kt=wf()?"Meta":"Control",zoomActivationKeyCode:Pt=wf()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ce=WD,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:_e=!0,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,nodeOrigin:wt=ZD,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,defaultViewport:Ui=JD,minZoom:zn=.5,maxZoom:Sn=2,translateExtent:Si=lp,preventScrolling:te=!0,nodeExtent:Ft,defaultMarkerColor:Ve="#b1b1b7",zoomOnScroll:Te=!0,zoomOnPinch:zi=!0,panOnScroll:ke=!1,panOnScrollSpeed:Qe=.5,panOnScrollMode:bn=xa.Free,zoomOnDoubleClick:An=!0,panOnDrag:Ze=!0,onPaneClick:an,onPaneMouseEnter:Rn,onPaneMouseMove:dr,onPaneMouseLeave:mr,onPaneScroll:bi,onPaneContextMenu:Bn,children:ni,onEdgeContextMenu:Hn,onEdgeDoubleClick:ii,onEdgeMouseEnter:Qs,onEdgeMouseMove:Bi,onEdgeMouseLeave:Qr,onEdgeUpdate:Hi,onEdgeUpdateStart:$a,onEdgeUpdateEnd:de,onReconnect:Ne,onReconnectStart:Ae,onReconnectEnd:Dn,reconnectRadius:Zs=10,edgeUpdaterRadius:bl=10,onNodesChange:qi,onEdgesChange:Ya,noDragClassName:gr="nodrag",noWheelClassName:Fi="nowheel",noPanClassName:ri="nopan",fitView:si=!1,fitViewOptions:ai,connectOnClick:on=!0,attributionPosition:we,proOptions:Ws,defaultEdgeOptions:Zr,elevateNodesOnSelect:qn=!0,elevateEdgesOnSelect:Ai=!1,disableKeyboardA11y:Js=!1,autoPanOnConnect:Ka=!0,autoPanOnNodeDrag:pr=!0,connectionRadius:Xa=20,isValidConnection:ji,onError:oi,style:He,id:Gi,nodeDragThreshold:Qa,...Ri},Wr)=>{const $i=Gi||"1";return lt.createElement("div",{...Ri,style:{...He,...tM},ref:Wr,className:gn(["react-flow",a]),"data-testid":"rf__wrapper",id:Gi},lt.createElement(l1,null,lt.createElement(YD,{onInit:g,onMove:y,onMoveStart:v,onMoveEnd:E,onNodeClick:d,onEdgeClick:m,onNodeMouseEnter:H,onNodeMouseMove:F,onNodeMouseLeave:q,onNodeContextMenu:K,onNodeDoubleClick:it,nodeTypes:l,edgeTypes:c,connectionLineType:N,connectionLineStyle:Y,connectionLineComponent:et,connectionLineContainerStyle:st,selectionKeyCode:pt,selectionOnDrag:yt,selectionMode:It,deleteKeyCode:ct,multiSelectionKeyCode:kt,panActivationKeyCode:At,zoomActivationKeyCode:Pt,onlyRenderVisibleElements:Ee,selectNodesOnDrag:_e,defaultViewport:Ui,translateExtent:Si,minZoom:zn,maxZoom:Sn,preventScrolling:te,zoomOnScroll:Te,zoomOnPinch:zi,zoomOnDoubleClick:An,panOnScroll:ke,panOnScrollSpeed:Qe,panOnScrollMode:bn,panOnDrag:Ze,onPaneClick:an,onPaneMouseEnter:Rn,onPaneMouseMove:dr,onPaneMouseLeave:mr,onPaneScroll:bi,onPaneContextMenu:Bn,onSelectionContextMenu:x,onSelectionStart:j,onSelectionEnd:J,onEdgeContextMenu:Hn,onEdgeDoubleClick:ii,onEdgeMouseEnter:Qs,onEdgeMouseMove:Bi,onEdgeMouseLeave:Qr,onReconnect:Ne??Hi,onReconnectStart:Ae??$a,onReconnectEnd:Dn??de,reconnectRadius:Zs??bl,defaultMarkerColor:Ve,noDragClassName:gr,noWheelClassName:Fi,noPanClassName:ri,elevateEdgesOnSelect:Ai,rfId:$i,disableKeyboardA11y:Js,nodeOrigin:wt,nodeExtent:Ft}),lt.createElement(jN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:S,onConnectStart:O,onConnectEnd:P,onClickConnectStart:I,onClickConnectEnd:z,nodesDraggable:he,nodesConnectable:Xe,nodesFocusable:Lt,edgesFocusable:xe,edgesUpdatable:pn,elementsSelectable:Un,elevateNodesOnSelect:qn,minZoom:zn,maxZoom:Sn,nodeExtent:Ft,onNodesChange:qi,onEdgesChange:Ya,snapToGrid:ue,snapGrid:ce,connectionMode:X,translateExtent:Si,connectOnClick:on,defaultEdgeOptions:Zr,fitView:si,fitViewOptions:ai,onNodesDelete:k,onEdgesDelete:L,onNodeDragStart:V,onNodeDrag:A,onNodeDragStop:R,onSelectionDrag:M,onSelectionDragStart:D,onSelectionDragStop:Q,noPanClassName:ri,nodeOrigin:wt,rfId:$i,autoPanOnConnect:Ka,autoPanOnNodeDrag:pr,onError:oi,connectionRadius:Xa,isValidConnection:ji,nodeDragThreshold:Qa}),lt.createElement(qN,{onSelectionChange:U}),ni,lt.createElement(pN,{proOptions:Ws,position:we}),lt.createElement(XN,{rfId:$i,disableKeyboardA11y:Js})))});u1.displayName="ReactFlow";function c1(e){return t=>{const[n,r]=$.useState(t),a=$.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,a]}}const eM=c1(XS),nM=c1(uD),h1=({id:e,x:t,y:n,width:r,height:a,style:l,color:c,strokeColor:d,strokeWidth:m,className:g,borderRadius:y,shapeRendering:v,onClick:E,selected:S})=>{const{background:O,backgroundColor:P}=l||{},I=c||O||P;return lt.createElement("rect",{className:gn(["react-flow__minimap-node",{selected:S},g]),x:t,y:n,rx:y,ry:y,width:r,height:a,fill:I,stroke:d,strokeWidth:m,shapeRendering:v,onClick:E?z=>E(z,e):void 0})};h1.displayName="MiniMapNode";var iM=$.memo(h1);const rM=e=>e.nodeOrigin,sM=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Vg=e=>e instanceof Function?e:()=>e;function aM({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a=2,nodeComponent:l=iM,onClick:c}){const d=ge(sM,sn),m=ge(rM),g=Vg(t),y=Vg(e),v=Vg(n),E=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return lt.createElement(lt.Fragment,null,d.map(S=>{const{x:O,y:P}=Ma(S,m).positionAbsolute;return lt.createElement(l,{key:S.id,x:O,y:P,width:S.width,height:S.height,style:S.style,selected:S.selected,className:v(S),color:g(S),borderRadius:r,strokeColor:y(S),strokeWidth:a,shapeRendering:E,onClick:c,id:S.id})}))}var oM=$.memo(aM);const lM=200,uM=150,cM=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?vN(Qf(t,e.nodeOrigin),n):n,rfId:e.rfId}},hM="react-flow__minimap-desc";function f1({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c=2,nodeComponent:d,maskColor:m="rgb(240, 240, 240, 0.6)",maskStrokeColor:g="none",maskStrokeWidth:y=1,position:v="bottom-right",onClick:E,onNodeClick:S,pannable:O=!1,zoomable:P=!1,ariaLabel:I="React Flow mini map",inversePan:z=!1,zoomStep:H=10,offsetScale:F=5}){const q=Ke(),K=$.useRef(null),{boundingRect:it,viewBB:V,rfId:A}=ge(cM,sn),R=e?.width??lM,k=e?.height??uM,L=it.width/R,U=it.height/k,D=Math.max(L,U),M=D*R,Q=D*k,x=F*D,j=it.x-(M-it.width)/2-x,J=it.y-(Q-it.height)/2-x,X=M+x*2,N=Q+x*2,Y=`${hM}-${A}`,et=$.useRef(0);et.current=D,$.useEffect(()=>{if(K.current){const pt=vi(K.current),yt=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce}=q.getState();if(kt.sourceEvent.type!=="wheel"||!ue||!ce)return;const Ee=-kt.sourceEvent.deltaY*(kt.sourceEvent.deltaMode===1?.05:kt.sourceEvent.deltaMode?1:.002)*H,_e=Pt[2]*Math.pow(2,Ee);ce.scaleTo(ue,_e)},It=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce,translateExtent:Ee,width:_e,height:he}=q.getState();if(kt.sourceEvent.type!=="mousemove"||!ue||!ce)return;const Xe=et.current*Math.max(1,Pt[2])*(z?-1:1),Lt={x:Pt[0]-kt.sourceEvent.movementX*Xe,y:Pt[1]-kt.sourceEvent.movementY*Xe},wt=[[0,0],[_e,he]],xe=Hr.translate(Lt.x,Lt.y).scale(Pt[2]),pn=ce.constrain()(xe,wt,Ee);ce.transform(ue,pn)},At=yS().on("zoom",O?It:null).on("zoom.wheel",P?yt:null);return pt.call(At),()=>{pt.on("zoom",null)}}},[O,P,z,H]);const st=E?pt=>{const yt=Di(pt);E(pt,{x:yt[0],y:yt[1]})}:void 0,ct=S?(pt,yt)=>{const It=q.getState().nodeInternals.get(yt);S(pt,It)}:void 0;return lt.createElement(qp,{position:v,style:e,className:gn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},lt.createElement("svg",{width:R,height:k,viewBox:`${j} ${J} ${X} ${N}`,role:"img","aria-labelledby":Y,ref:K,onClick:st},I&&lt.createElement("title",{id:Y},I),lt.createElement(oM,{onClick:ct,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),lt.createElement("path",{className:"react-flow__minimap-mask",d:`M${j-x},${J-x}h${X+x*2}v${N+x*2}h${-X-x*2}z
        M${V.x},${V.y}h${V.width}v${V.height}h${-V.width}z`,fill:m,fillRule:"evenodd",stroke:g,strokeWidth:y,pointerEvents:"none"})))}f1.displayName="MiniMap";var fM=$.memo(f1);function dM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function mM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function gM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function pM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function yM(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Mu=({children:e,className:t,...n})=>lt.createElement("button",{type:"button",className:gn(["react-flow__controls-button",t]),...n},e);Mu.displayName="ControlButton";const _M=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),d1=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:m,className:g,children:y,position:v="bottom-left"})=>{const E=Ke(),[S,O]=$.useState(!1),{isInteractive:P,minZoomReached:I,maxZoomReached:z}=ge(_M,sn),{zoomIn:H,zoomOut:F,fitView:q}=Zp();if($.useEffect(()=>{O(!0)},[]),!S)return null;const K=()=>{H(),l?.()},it=()=>{F(),c?.()},V=()=>{q(a),d?.()},A=()=>{E.setState({nodesDraggable:!P,nodesConnectable:!P,elementsSelectable:!P}),m?.(!P)};return lt.createElement(qp,{className:gn(["react-flow__controls",g]),position:v,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(Mu,{onClick:K,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:z},lt.createElement(dM,null)),lt.createElement(Mu,{onClick:it,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:I},lt.createElement(mM,null))),n&&lt.createElement(Mu,{className:"react-flow__controls-fitview",onClick:V,title:"fit view","aria-label":"fit view"},lt.createElement(gM,null)),r&&lt.createElement(Mu,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},P?lt.createElement(yM,null):lt.createElement(pM,null)),y)};d1.displayName="Controls";var vM=$.memo(d1),wi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(wi||(wi={}));function EM({color:e,dimensions:t,lineWidth:n}){return lt.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function TM({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const wM={[wi.Dots]:"#91919a",[wi.Lines]:"#eee",[wi.Cross]:"#e2e2e2"},SM={[wi.Dots]:1,[wi.Lines]:1,[wi.Cross]:6},bM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function m1({id:e,variant:t=wi.Dots,gap:n=20,size:r,lineWidth:a=1,offset:l=2,color:c,style:d,className:m}){const g=$.useRef(null),{transform:y,patternId:v}=ge(bM,sn),E=c||wM[t],S=r||SM[t],O=t===wi.Dots,P=t===wi.Cross,I=Array.isArray(n)?n:[n,n],z=[I[0]*y[2]||1,I[1]*y[2]||1],H=S*y[2],F=P?[H,H]:z,q=O?[H/l,H/l]:[F[0]/l,F[1]/l];return lt.createElement("svg",{className:gn(["react-flow__background",m]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:g,"data-testid":"rf__background"},lt.createElement("pattern",{id:v+e,x:y[0]%z[0],y:y[1]%z[1],width:z[0],height:z[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${q[0]},-${q[1]})`},O?lt.createElement(TM,{color:E,radius:H/l}):lt.createElement(EM,{dimensions:F,color:E,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}m1.displayName="Background";var AM=$.memo(m1);const RM=()=>{};var uT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},IM=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(m>>10)),t[r++]=String.fromCharCode(56320+(m&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},p1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,m=a+2<e.length,g=m?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let E=(d&15)<<2|g>>6,S=g&63;m||(S=64,c||(E=64)),r.push(n[y],n[v],n[E],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(g1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):IM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const g=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||g==null||v==null)throw new CM;const E=l<<2|d>>4;if(r.push(E),g!==64){const S=d<<4&240|g>>2;if(r.push(S),v!==64){const O=g<<6&192|v;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class CM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xM=function(e){const t=g1(e);return p1.encodeByteArray(t,!0)},Af=function(e){return xM(e).replace(/\./g,"")},y1=function(e){try{return p1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=()=>NM().__FIREBASE_DEFAULTS__,MM=()=>{if(typeof process>"u"||typeof uT>"u")return;const e=uT.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},OM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&y1(e[1]);return t&&JSON.parse(t)},Zf=()=>{try{return RM()||DM()||MM()||OM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_1=e=>{var t,n;return(n=(t=Zf())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},VM=e=>{const t=_1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},v1=()=>{var e;return(e=Zf())===null||e===void 0?void 0:e.config},E1=e=>{var t;return(t=Zf())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(e){return e.endsWith(".cloudworkstations.dev")}async function T1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Af(JSON.stringify(n)),Af(JSON.stringify(c)),""].join(".")}const Uu={};function LM(){const e={prod:[],emulator:[]};for(const t of Object.keys(Uu))Uu[t]?e.emulator.push(t):e.prod.push(t);return e}function UM(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let cT=!1;function w1(e,t){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||Uu[e]===t||Uu[e]||cT)return;Uu[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=LM().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function g(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{cT=!0,c()},E}function y(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=UM(r),S=n("text"),O=document.getElementById(S)||document.createElement("span"),P=n("learnmore"),I=document.getElementById(P)||document.createElement("a"),z=n("preprendIcon"),H=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const F=E.element;d(F),y(I,P);const q=g();m(H,z),F.append(H,O,I,q),document.body.appendChild(F)}l?(O.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function BM(){var e;const t=(e=Zf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qM(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function FM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jM(){const e=wn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function GM(){return!BM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $M(){try{return typeof indexedDB=="object"}catch{return!1}}function YM(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="FirebaseError";class Xr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=KM,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fc.prototype.create)}}class fc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?XM(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Xr(a,d,r)}}function XM(e,t){return e.replace(QM,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const QM=/\{\$([^}]+)}/g;function ZM(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ka(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(hT(l)&&hT(c)){if(!ka(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function hT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ou(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Vu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function WM(e,t){const n=new JM(e,t);return n.subscribe.bind(n)}class JM{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tO(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=kg),a.error===void 0&&(a.error=kg),a.complete===void 0&&(a.complete=kg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tO(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function kg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e&&e._delegate?e._delegate:e}class Pa{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new kM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(iO(t))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Ia){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ia){return this.instances.has(t)}getOptions(t=Ia){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nO(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ia){return this.component?this.component.multipleInstances?t:Ia:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nO(e){return e===Ia?void 0:e}function iO(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new eO(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})($t||($t={}));const sO={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},aO=$t.INFO,oO={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},lO=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=oO[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Jp{constructor(t){this.name=t,this._logLevel=aO,this._logHandler=lO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const uO=(e,t)=>t.some(n=>e instanceof n);let fT,dT;function cO(){return fT||(fT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hO(){return dT||(dT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S1=new WeakMap,up=new WeakMap,b1=new WeakMap,Pg=new WeakMap,ty=new WeakMap;function fO(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Os(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&S1.set(n,e)}).catch(()=>{}),ty.set(t,e),t}function dO(e){if(up.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});up.set(e,t)}let cp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return up.get(e);if(t==="objectStoreNames")return e.objectStoreNames||b1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function mO(e){cp=e(cp)}function gO(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Lg(this),t,...n);return b1.set(r,t.sort?t.sort():[t]),Os(r)}:hO().includes(e)?function(...t){return e.apply(Lg(this),t),Os(S1.get(this))}:function(...t){return Os(e.apply(Lg(this),t))}}function pO(e){return typeof e=="function"?gO(e):(e instanceof IDBTransaction&&dO(e),uO(e,cO())?new Proxy(e,cp):e)}function Os(e){if(e instanceof IDBRequest)return fO(e);if(Pg.has(e))return Pg.get(e);const t=pO(e);return t!==e&&(Pg.set(e,t),ty.set(t,e)),t}const Lg=e=>ty.get(e);function yO(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=Os(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Os(c.result),m.oldVersion,m.newVersion,Os(c.transaction),m)}),n&&c.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const _O=["get","getKey","getAll","getAllKeys","count"],vO=["put","add","delete","clear"],Ug=new Map;function mT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ug.get(t))return Ug.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=vO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||_O.includes(n)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[n](...d),a&&m.done]))[0]};return Ug.set(t,l),l}mO(e=>({...e,get:(t,n,r)=>mT(t,n)||e.get(t,n,r),has:(t,n)=>!!mT(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TO(e){const t=e.getComponent();return t?.type==="VERSION"}const hp="@firebase/app",gT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Jp("@firebase/app"),wO="@firebase/app-compat",SO="@firebase/analytics-compat",bO="@firebase/analytics",AO="@firebase/app-check-compat",RO="@firebase/app-check",IO="@firebase/auth",CO="@firebase/auth-compat",xO="@firebase/database",NO="@firebase/data-connect",DO="@firebase/database-compat",MO="@firebase/functions",OO="@firebase/functions-compat",VO="@firebase/installations",kO="@firebase/installations-compat",PO="@firebase/messaging",LO="@firebase/messaging-compat",UO="@firebase/performance",zO="@firebase/performance-compat",BO="@firebase/remote-config",HO="@firebase/remote-config-compat",qO="@firebase/storage",FO="@firebase/storage-compat",jO="@firebase/firestore",GO="@firebase/ai",$O="@firebase/firestore-compat",YO="firebase",KO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",XO={[hp]:"fire-core",[wO]:"fire-core-compat",[bO]:"fire-analytics",[SO]:"fire-analytics-compat",[RO]:"fire-app-check",[AO]:"fire-app-check-compat",[IO]:"fire-auth",[CO]:"fire-auth-compat",[xO]:"fire-rtdb",[NO]:"fire-data-connect",[DO]:"fire-rtdb-compat",[MO]:"fire-fn",[OO]:"fire-fn-compat",[VO]:"fire-iid",[kO]:"fire-iid-compat",[PO]:"fire-fcm",[LO]:"fire-fcm-compat",[UO]:"fire-perf",[zO]:"fire-perf-compat",[BO]:"fire-rc",[HO]:"fire-rc-compat",[qO]:"fire-gcs",[FO]:"fire-gcs-compat",[jO]:"fire-fst",[$O]:"fire-fst-compat",[GO]:"fire-vertex","fire-js":"fire-js",[YO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Map,QO=new Map,dp=new Map;function pT(e,t){try{e.container.addComponent(t)}catch(n){Gr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ol(e){const t=e.name;if(dp.has(t))return Gr.debug(`There were multiple attempts to register component ${t}.`),!1;dp.set(t,e);for(const n of Rf.values())pT(n,e);for(const n of QO.values())pT(n,e);return!0}function ey(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ei(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new fc("app","Firebase",ZO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=KO;function A1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:fp,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Vs.create("bad-app-name",{appName:String(a)});if(n||(n=v1()),!n)throw Vs.create("no-options");const l=Rf.get(a);if(l){if(ka(n,l.options)&&ka(r,l.config))return l;throw Vs.create("duplicate-app",{appName:a})}const c=new rO(a);for(const m of dp.values())c.addComponent(m);const d=new WO(n,r,c);return Rf.set(a,d),d}function R1(e=fp){const t=Rf.get(e);if(!t&&e===fp&&v1())return A1();if(!t)throw Vs.create("no-app",{appName:e});return t}function ks(e,t,n){var r;let a=(r=XO[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gr.warn(d.join(" "));return}ol(new Pa(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="firebase-heartbeat-database",tV=1,Wu="firebase-heartbeat-store";let zg=null;function I1(){return zg||(zg=yO(JO,tV,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Wu)}catch(n){console.warn(n)}}}}).catch(e=>{throw Vs.create("idb-open",{originalErrorMessage:e.message})})),zg}async function eV(e){try{const n=(await I1()).transaction(Wu),r=await n.objectStore(Wu).get(C1(e));return await n.done,r}catch(t){if(t instanceof Xr)Gr.warn(t.message);else{const n=Vs.create("idb-get",{originalErrorMessage:t?.message});Gr.warn(n.message)}}}async function yT(e,t){try{const r=(await I1()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(t,C1(e)),await r.done}catch(n){if(n instanceof Xr)Gr.warn(n.message);else{const r=Vs.create("idb-set",{originalErrorMessage:n?.message});Gr.warn(r.message)}}}function C1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=1024,iV=30;class rV{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=_T();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>iV){const c=oV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_T(),{heartbeatsToSend:r,unsentEntries:a}=sV(this._heartbeatsCache.heartbeats),l=Af(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Gr.warn(n),""}}}function _T(){return new Date().toISOString().substring(0,10)}function sV(e,t=nV){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),vT(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),vT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aV{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $M()?YM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return yT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return yT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function vT(e){return Af(JSON.stringify({version:2,heartbeats:e})).length}function oV(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(e){ol(new Pa("platform-logger",t=>new EO(t),"PRIVATE")),ol(new Pa("heartbeat",t=>new rV(t),"PRIVATE")),ks(hp,gT,e),ks(hp,gT,"esm2017"),ks("fire-js","")}lV("");var uV="firebase",cV="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(uV,cV,"app");var ET=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ps,x1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,A){function R(){}R.prototype=A.prototype,V.D=A.prototype,V.prototype=new R,V.prototype.constructor=V,V.C=function(k,L,U){for(var D=Array(arguments.length-2),M=2;M<arguments.length;M++)D[M-2]=arguments[M];return A.prototype[L].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,A,R){R||(R=0);var k=Array(16);if(typeof A=="string")for(var L=0;16>L;++L)k[L]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(L=0;16>L;++L)k[L]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=V.g[0],R=V.g[1],L=V.g[2];var U=V.g[3],D=A+(U^R&(L^U))+k[0]+3614090360&4294967295;A=R+(D<<7&4294967295|D>>>25),D=U+(L^A&(R^L))+k[1]+3905402710&4294967295,U=A+(D<<12&4294967295|D>>>20),D=L+(R^U&(A^R))+k[2]+606105819&4294967295,L=U+(D<<17&4294967295|D>>>15),D=R+(A^L&(U^A))+k[3]+3250441966&4294967295,R=L+(D<<22&4294967295|D>>>10),D=A+(U^R&(L^U))+k[4]+4118548399&4294967295,A=R+(D<<7&4294967295|D>>>25),D=U+(L^A&(R^L))+k[5]+1200080426&4294967295,U=A+(D<<12&4294967295|D>>>20),D=L+(R^U&(A^R))+k[6]+2821735955&4294967295,L=U+(D<<17&4294967295|D>>>15),D=R+(A^L&(U^A))+k[7]+4249261313&4294967295,R=L+(D<<22&4294967295|D>>>10),D=A+(U^R&(L^U))+k[8]+1770035416&4294967295,A=R+(D<<7&4294967295|D>>>25),D=U+(L^A&(R^L))+k[9]+2336552879&4294967295,U=A+(D<<12&4294967295|D>>>20),D=L+(R^U&(A^R))+k[10]+4294925233&4294967295,L=U+(D<<17&4294967295|D>>>15),D=R+(A^L&(U^A))+k[11]+2304563134&4294967295,R=L+(D<<22&4294967295|D>>>10),D=A+(U^R&(L^U))+k[12]+1804603682&4294967295,A=R+(D<<7&4294967295|D>>>25),D=U+(L^A&(R^L))+k[13]+4254626195&4294967295,U=A+(D<<12&4294967295|D>>>20),D=L+(R^U&(A^R))+k[14]+2792965006&4294967295,L=U+(D<<17&4294967295|D>>>15),D=R+(A^L&(U^A))+k[15]+1236535329&4294967295,R=L+(D<<22&4294967295|D>>>10),D=A+(L^U&(R^L))+k[1]+4129170786&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^L&(A^R))+k[6]+3225465664&4294967295,U=A+(D<<9&4294967295|D>>>23),D=L+(A^R&(U^A))+k[11]+643717713&4294967295,L=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(L^U))+k[0]+3921069994&4294967295,R=L+(D<<20&4294967295|D>>>12),D=A+(L^U&(R^L))+k[5]+3593408605&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^L&(A^R))+k[10]+38016083&4294967295,U=A+(D<<9&4294967295|D>>>23),D=L+(A^R&(U^A))+k[15]+3634488961&4294967295,L=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(L^U))+k[4]+3889429448&4294967295,R=L+(D<<20&4294967295|D>>>12),D=A+(L^U&(R^L))+k[9]+568446438&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^L&(A^R))+k[14]+3275163606&4294967295,U=A+(D<<9&4294967295|D>>>23),D=L+(A^R&(U^A))+k[3]+4107603335&4294967295,L=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(L^U))+k[8]+1163531501&4294967295,R=L+(D<<20&4294967295|D>>>12),D=A+(L^U&(R^L))+k[13]+2850285829&4294967295,A=R+(D<<5&4294967295|D>>>27),D=U+(R^L&(A^R))+k[2]+4243563512&4294967295,U=A+(D<<9&4294967295|D>>>23),D=L+(A^R&(U^A))+k[7]+1735328473&4294967295,L=U+(D<<14&4294967295|D>>>18),D=R+(U^A&(L^U))+k[12]+2368359562&4294967295,R=L+(D<<20&4294967295|D>>>12),D=A+(R^L^U)+k[5]+4294588738&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^L)+k[8]+2272392833&4294967295,U=A+(D<<11&4294967295|D>>>21),D=L+(U^A^R)+k[11]+1839030562&4294967295,L=U+(D<<16&4294967295|D>>>16),D=R+(L^U^A)+k[14]+4259657740&4294967295,R=L+(D<<23&4294967295|D>>>9),D=A+(R^L^U)+k[1]+2763975236&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^L)+k[4]+1272893353&4294967295,U=A+(D<<11&4294967295|D>>>21),D=L+(U^A^R)+k[7]+4139469664&4294967295,L=U+(D<<16&4294967295|D>>>16),D=R+(L^U^A)+k[10]+3200236656&4294967295,R=L+(D<<23&4294967295|D>>>9),D=A+(R^L^U)+k[13]+681279174&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^L)+k[0]+3936430074&4294967295,U=A+(D<<11&4294967295|D>>>21),D=L+(U^A^R)+k[3]+3572445317&4294967295,L=U+(D<<16&4294967295|D>>>16),D=R+(L^U^A)+k[6]+76029189&4294967295,R=L+(D<<23&4294967295|D>>>9),D=A+(R^L^U)+k[9]+3654602809&4294967295,A=R+(D<<4&4294967295|D>>>28),D=U+(A^R^L)+k[12]+3873151461&4294967295,U=A+(D<<11&4294967295|D>>>21),D=L+(U^A^R)+k[15]+530742520&4294967295,L=U+(D<<16&4294967295|D>>>16),D=R+(L^U^A)+k[2]+3299628645&4294967295,R=L+(D<<23&4294967295|D>>>9),D=A+(L^(R|~U))+k[0]+4096336452&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~L))+k[7]+1126891415&4294967295,U=A+(D<<10&4294967295|D>>>22),D=L+(A^(U|~R))+k[14]+2878612391&4294967295,L=U+(D<<15&4294967295|D>>>17),D=R+(U^(L|~A))+k[5]+4237533241&4294967295,R=L+(D<<21&4294967295|D>>>11),D=A+(L^(R|~U))+k[12]+1700485571&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~L))+k[3]+2399980690&4294967295,U=A+(D<<10&4294967295|D>>>22),D=L+(A^(U|~R))+k[10]+4293915773&4294967295,L=U+(D<<15&4294967295|D>>>17),D=R+(U^(L|~A))+k[1]+2240044497&4294967295,R=L+(D<<21&4294967295|D>>>11),D=A+(L^(R|~U))+k[8]+1873313359&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~L))+k[15]+4264355552&4294967295,U=A+(D<<10&4294967295|D>>>22),D=L+(A^(U|~R))+k[6]+2734768916&4294967295,L=U+(D<<15&4294967295|D>>>17),D=R+(U^(L|~A))+k[13]+1309151649&4294967295,R=L+(D<<21&4294967295|D>>>11),D=A+(L^(R|~U))+k[4]+4149444226&4294967295,A=R+(D<<6&4294967295|D>>>26),D=U+(R^(A|~L))+k[11]+3174756917&4294967295,U=A+(D<<10&4294967295|D>>>22),D=L+(A^(U|~R))+k[2]+718787259&4294967295,L=U+(D<<15&4294967295|D>>>17),D=R+(U^(L|~A))+k[9]+3951481745&4294967295,V.g[0]=V.g[0]+A&4294967295,V.g[1]=V.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,V.g[2]=V.g[2]+L&4294967295,V.g[3]=V.g[3]+U&4294967295}r.prototype.u=function(V,A){A===void 0&&(A=V.length);for(var R=A-this.blockSize,k=this.B,L=this.h,U=0;U<A;){if(L==0)for(;U<=R;)a(this,V,U),U+=this.blockSize;if(typeof V=="string"){for(;U<A;)if(k[L++]=V.charCodeAt(U++),L==this.blockSize){a(this,k),L=0;break}}else for(;U<A;)if(k[L++]=V[U++],L==this.blockSize){a(this,k),L=0;break}}this.h=L,this.o+=A},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var A=1;A<V.length-8;++A)V[A]=0;var R=8*this.o;for(A=V.length-8;A<V.length;++A)V[A]=R&255,R/=256;for(this.u(V),V=Array(16),A=R=0;4>A;++A)for(var k=0;32>k;k+=8)V[R++]=this.g[A]>>>k&255;return V};function l(V,A){var R=d;return Object.prototype.hasOwnProperty.call(R,V)?R[V]:R[V]=A(V)}function c(V,A){this.h=A;for(var R=[],k=!0,L=V.length-1;0<=L;L--){var U=V[L]|0;k&&U==A||(R[L]=U,k=!1)}this.g=R}var d={};function m(V){return-128<=V&&128>V?l(V,function(A){return new c([A|0],0>A?-1:0)}):new c([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return v;if(0>V)return I(g(-V));for(var A=[],R=1,k=0;V>=R;k++)A[k]=V/R|0,R*=4294967296;return new c(A,0)}function y(V,A){if(V.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(V.charAt(0)=="-")return I(y(V.substring(1),A));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(A,8)),k=v,L=0;L<V.length;L+=8){var U=Math.min(8,V.length-L),D=parseInt(V.substring(L,L+U),A);8>U?(U=g(Math.pow(A,U)),k=k.j(U).add(g(D))):(k=k.j(R),k=k.add(g(D)))}return k}var v=m(0),E=m(1),S=m(16777216);e=c.prototype,e.m=function(){if(P(this))return-I(this).m();for(var V=0,A=1,R=0;R<this.g.length;R++){var k=this.i(R);V+=(0<=k?k:4294967296+k)*A,A*=4294967296}return V},e.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(O(this))return"0";if(P(this))return"-"+I(this).toString(V);for(var A=g(Math.pow(V,6)),R=this,k="";;){var L=q(R,A).g;R=z(R,L.j(A));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(V);if(R=L,O(R))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},e.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function O(V){if(V.h!=0)return!1;for(var A=0;A<V.g.length;A++)if(V.g[A]!=0)return!1;return!0}function P(V){return V.h==-1}e.l=function(V){return V=z(this,V),P(V)?-1:O(V)?0:1};function I(V){for(var A=V.g.length,R=[],k=0;k<A;k++)R[k]=~V.g[k];return new c(R,~V.h).add(E)}e.abs=function(){return P(this)?I(this):this},e.add=function(V){for(var A=Math.max(this.g.length,V.g.length),R=[],k=0,L=0;L<=A;L++){var U=k+(this.i(L)&65535)+(V.i(L)&65535),D=(U>>>16)+(this.i(L)>>>16)+(V.i(L)>>>16);k=D>>>16,U&=65535,D&=65535,R[L]=D<<16|U}return new c(R,R[R.length-1]&-2147483648?-1:0)};function z(V,A){return V.add(I(A))}e.j=function(V){if(O(this)||O(V))return v;if(P(this))return P(V)?I(this).j(I(V)):I(I(this).j(V));if(P(V))return I(this.j(I(V)));if(0>this.l(S)&&0>V.l(S))return g(this.m()*V.m());for(var A=this.g.length+V.g.length,R=[],k=0;k<2*A;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<V.g.length;L++){var U=this.i(k)>>>16,D=this.i(k)&65535,M=V.i(L)>>>16,Q=V.i(L)&65535;R[2*k+2*L]+=D*Q,H(R,2*k+2*L),R[2*k+2*L+1]+=U*Q,H(R,2*k+2*L+1),R[2*k+2*L+1]+=D*M,H(R,2*k+2*L+1),R[2*k+2*L+2]+=U*M,H(R,2*k+2*L+2)}for(k=0;k<A;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=A;k<2*A;k++)R[k]=0;return new c(R,0)};function H(V,A){for(;(V[A]&65535)!=V[A];)V[A+1]+=V[A]>>>16,V[A]&=65535,A++}function F(V,A){this.g=V,this.h=A}function q(V,A){if(O(A))throw Error("division by zero");if(O(V))return new F(v,v);if(P(V))return A=q(I(V),A),new F(I(A.g),I(A.h));if(P(A))return A=q(V,I(A)),new F(I(A.g),A.h);if(30<V.g.length){if(P(V)||P(A))throw Error("slowDivide_ only works with positive integers.");for(var R=E,k=A;0>=k.l(V);)R=K(R),k=K(k);var L=it(R,1),U=it(k,1);for(k=it(k,2),R=it(R,2);!O(k);){var D=U.add(k);0>=D.l(V)&&(L=L.add(R),U=D),k=it(k,1),R=it(R,1)}return A=z(V,L.j(A)),new F(L,A)}for(L=v;0<=V.l(A);){for(R=Math.max(1,Math.floor(V.m()/A.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=g(R),D=U.j(A);P(D)||0<D.l(V);)R-=k,U=g(R),D=U.j(A);O(U)&&(U=E),L=L.add(U),V=z(V,D)}return new F(L,V)}e.A=function(V){return q(this,V).h},e.and=function(V){for(var A=Math.max(this.g.length,V.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)&V.i(k);return new c(R,this.h&V.h)},e.or=function(V){for(var A=Math.max(this.g.length,V.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)|V.i(k);return new c(R,this.h|V.h)},e.xor=function(V){for(var A=Math.max(this.g.length,V.g.length),R=[],k=0;k<A;k++)R[k]=this.i(k)^V.i(k);return new c(R,this.h^V.h)};function K(V){for(var A=V.g.length+1,R=[],k=0;k<A;k++)R[k]=V.i(k)<<1|V.i(k-1)>>>31;return new c(R,V.h)}function it(V,A){var R=A>>5;A%=32;for(var k=V.g.length-R,L=[],U=0;U<k;U++)L[U]=0<A?V.i(U+R)>>>A|V.i(U+R+1)<<32-A:V.i(U+R);return new c(L,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Ps=c}).apply(typeof ET<"u"?ET:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N1,ku,D1,af,mp,M1,O1,V1;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,T){return h==Array.prototype||h==Object.prototype||(h[_]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function a(h,_){if(_)t:{var T=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var W=h[C];if(!(W in T))break t;T=T[W]}h=h[h.length-1],C=T[h],_=_(C),_!=C&&_!=null&&t(T,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var T=0,C=!1,W={next:function(){if(!C&&T<h.length){var ot=T++;return{value:_(ot,h[ot]),done:!1}}return C=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function g(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,T){return h.call.apply(h.bind,arguments)}function v(h,_,T){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,C),h.apply(_,W)}}return function(){return h.apply(_,arguments)}}function E(h,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function S(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function O(h,_){function T(){}T.prototype=_.prototype,h.aa=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(C,W,ot){for(var _t=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)_t[Kt-2]=arguments[Kt];return _.prototype[W].apply(C,_t)}}function P(h){const _=h.length;if(0<_){const T=Array(_);for(let C=0;C<_;C++)T[C]=h[C];return T}return[]}function I(h,_){for(let T=1;T<arguments.length;T++){const C=arguments[T];if(m(C)){const W=h.length||0,ot=C.length||0;h.length=W+ot;for(let _t=0;_t<ot;_t++)h[W+_t]=C[_t]}else h.push(C)}}class z{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function H(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function q(h){return q[" "](h),h}q[" "]=function(){};var K=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function it(h,_,T){for(const C in h)_.call(T,h[C],C,h)}function V(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function A(h){const _={};for(const T in h)_[T]=h[T];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,_){let T,C;for(let W=1;W<arguments.length;W++){C=arguments[W];for(T in C)h[T]=C[T];for(let ot=0;ot<R.length;ot++)T=R[ot],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function L(h){var _=1;h=h.split(":");const T=[];for(;0<_&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function U(h){d.setTimeout(()=>{throw h},0)}function D(){var h=X;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class M{constructor(){this.h=this.g=null}add(_,T){const C=Q.get();C.set(_,T),this.h?this.h.next=C:this.g=C,this.h=C}}var Q=new z(()=>new x,h=>h.reset());class x{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let j,J=!1,X=new M,N=()=>{const h=d.Promise.resolve(void 0);j=()=>{h.then(Y)}};var Y=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(T){U(T)}var _=Q;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}J=!1};function et(){this.s=this.s,this.C=this.C}et.prototype.s=!1,et.prototype.ma=function(){this.s||(this.s=!0,this.N())},et.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,_),d.removeEventListener("test",T,_)}catch{}return h}();function pt(h,_){if(st.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(K){t:{try{q(_.nodeName);var W=!0;break t}catch{}W=!1}W||(_=null)}}else T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:yt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pt.aa.h.call(this)}}O(pt,st);var yt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),At=0;function kt(h,_,T,C,W){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!C,this.ha=W,this.key=++At,this.da=this.fa=!1}function Pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,_,T,C,W){var ot=h.toString();h=this.g[ot],h||(h=this.g[ot]=[],this.h++);var _t=Ee(h,_,C,W);return-1<_t?(_=h[_t],T||(_.fa=!1)):(_=new kt(_,this.src,ot,!!C,W),_.fa=T,h.push(_)),_};function ce(h,_){var T=_.type;if(T in h.g){var C=h.g[T],W=Array.prototype.indexOf.call(C,_,void 0),ot;(ot=0<=W)&&Array.prototype.splice.call(C,W,1),ot&&(Pt(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ee(h,_,T,C){for(var W=0;W<h.length;++W){var ot=h[W];if(!ot.da&&ot.listener==_&&ot.capture==!!T&&ot.ha==C)return W}return-1}var _e="closure_lm_"+(1e6*Math.random()|0),he={};function Xe(h,_,T,C,W){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)Xe(h,_[ot],T,C,W);return null}return T=Si(T),h&&h[It]?h.K(_,T,g(C)?!!C.capture:!1,W):Lt(h,_,T,!1,C,W)}function Lt(h,_,T,C,W,ot){if(!_)throw Error("Invalid event type");var _t=g(W)?!!W.capture:!!W,Kt=zn(h);if(Kt||(h[_e]=Kt=new ue(h)),T=Kt.add(_,T,C,_t,ot),T.proxy)return T;if(C=wt(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)ct||(W=_t),W===void 0&&(W=!1),h.addEventListener(_.toString(),C,W);else if(h.attachEvent)h.attachEvent(Un(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function wt(){function h(T){return _.call(h.src,h.listener,T)}const _=Ui;return h}function xe(h,_,T,C,W){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)xe(h,_[ot],T,C,W);else C=g(C)?!!C.capture:!!C,T=Si(T),h&&h[It]?(h=h.i,_=String(_).toString(),_ in h.g&&(ot=h.g[_],T=Ee(ot,T,C,W),-1<T&&(Pt(ot[T]),Array.prototype.splice.call(ot,T,1),ot.length==0&&(delete h.g[_],h.h--)))):h&&(h=zn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ee(_,T,C,W)),(T=-1<h?_[h]:null)&&pn(T))}function pn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[It])ce(_.i,h);else{var T=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(T,C,h.capture):_.detachEvent?_.detachEvent(Un(T),C):_.addListener&&_.removeListener&&_.removeListener(C),(T=zn(_))?(ce(T,h),T.h==0&&(T.src=null,_[_e]=null)):Pt(h)}}}function Un(h){return h in he?he[h]:he[h]="on"+h}function Ui(h,_){if(h.da)h=!0;else{_=new pt(_,this);var T=h.listener,C=h.ha||h.src;h.fa&&pn(h),h=T.call(C,_)}return h}function zn(h){return h=h[_e],h instanceof ue?h:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Si(h){return typeof h=="function"?h:(h[Sn]||(h[Sn]=function(_){return h.handleEvent(_)}),h[Sn])}function te(){et.call(this),this.i=new ue(this),this.M=this,this.F=null}O(te,et),te.prototype[It]=!0,te.prototype.removeEventListener=function(h,_,T,C){xe(this,h,_,T,C)};function Ft(h,_){var T,C=h.F;if(C)for(T=[];C;C=C.F)T.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new st(_,h);else if(_ instanceof st)_.target=_.target||h;else{var W=_;_=new st(C,h),k(_,W)}if(W=!0,T)for(var ot=T.length-1;0<=ot;ot--){var _t=_.g=T[ot];W=Ve(_t,C,!0,_)&&W}if(_t=_.g=h,W=Ve(_t,C,!0,_)&&W,W=Ve(_t,C,!1,_)&&W,T)for(ot=0;ot<T.length;ot++)_t=_.g=T[ot],W=Ve(_t,C,!1,_)&&W}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var T=h.g[_],C=0;C<T.length;C++)Pt(T[C]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,T,C){return this.i.add(String(h),_,!1,T,C)},te.prototype.L=function(h,_,T,C){return this.i.add(String(h),_,!0,T,C)};function Ve(h,_,T,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var W=!0,ot=0;ot<_.length;++ot){var _t=_[ot];if(_t&&!_t.da&&_t.capture==T){var Kt=_t.listener,qe=_t.ha||_t.src;_t.fa&&ce(h.i,_t),W=Kt.call(qe,C)!==!1&&W}}return W&&!C.defaultPrevented}function Te(h,_,T){if(typeof h=="function")T&&(h=E(h,T));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function zi(h){h.g=Te(()=>{h.g=null,h.i&&(h.i=!1,zi(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class ke extends et{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qe(h){et.call(this),this.h=h,this.g={}}O(Qe,et);var bn=[];function An(h){it(h.g,function(_,T){this.g.hasOwnProperty(T)&&pn(_)},h),h.g={}}Qe.prototype.N=function(){Qe.aa.N.call(this),An(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=d.JSON.stringify,an=d.JSON.parse,Rn=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function dr(){}dr.prototype.h=null;function mr(h){return h.h||(h.h=h.i())}function bi(){}var Bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ni(){st.call(this,"d")}O(ni,st);function Hn(){st.call(this,"c")}O(Hn,st);var ii={},Qs=null;function Bi(){return Qs=Qs||new te}ii.La="serverreachability";function Qr(h){st.call(this,ii.La,h)}O(Qr,st);function Hi(h){const _=Bi();Ft(_,new Qr(_))}ii.STAT_EVENT="statevent";function $a(h,_){st.call(this,ii.STAT_EVENT,h),this.stat=_}O($a,st);function de(h){const _=Bi();Ft(_,new $a(_,h))}ii.Ma="timingevent";function Ne(h,_){st.call(this,ii.Ma,h),this.size=_}O(Ne,st);function Ae(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Zs(h,_,T,C,W,ot){h.info(function(){if(h.g)if(ot)for(var _t="",Kt=ot.split("&"),qe=0;qe<Kt.length;qe++){var Xt=Kt[qe].split("=");if(1<Xt.length){var Je=Xt[0];Xt=Xt[1];var Fe=Je.split("_");_t=2<=Fe.length&&Fe[1]=="type"?_t+(Je+"="+Xt+"&"):_t+(Je+"=redacted&")}}else _t=null;else _t=ot;return"XMLHTTP REQ ("+C+") [attempt "+W+"]: "+_+`
`+T+`
`+_t})}function bl(h,_,T,C,W,ot,_t){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+W+"]: "+_+`
`+T+`
`+ot+" "+_t})}function qi(h,_,T,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+gr(h,T)+(C?" "+C:"")})}function Ya(h,_){h.info(function(){return"TIMEOUT: "+_})}Dn.prototype.info=function(){};function gr(h,_){if(!h.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var C=T[h];if(!(2>C.length)){var W=C[1];if(Array.isArray(W)&&!(1>W.length)){var ot=W[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var _t=1;_t<W.length;_t++)W[_t]=""}}}}return Ze(T)}catch{return _}}var Fi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ri={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function ai(){}O(ai,dr),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},si=new ai;function on(h,_,T,C){this.j=h,this.i=_,this.l=T,this.R=C||1,this.U=new Qe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Ws={},Zr={};function qn(h,_,T){h.L=1,h.v=na(Fn(_)),h.m=T,h.P=!0,Ai(h,null)}function Ai(h,_){h.F=Date.now(),pr(h),h.A=Fn(h.v);var T=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),Nl(T.i,"t",C),h.C=0,T=h.j.J,h.h=new we,h.g=kc(h.j,T?_:null,!h.m),0<h.O&&(h.M=new ke(E(h.Y,h,h.g),h.O)),_=h.U,T=h.g,C=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(bn[0]=W.toString()),W=bn);for(var ot=0;ot<W.length;ot++){var _t=Xe(T,W[ot],C||_.handleEvent,!1,_.h||_);if(!_t)break;_.g[_t.key]=_t}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Hi(),Zs(h.i,h.u,h.A,h.l,h.R,h.m)}on.prototype.ca=function(h){h=h.target;const _=this.M;_&&hi(h)==3?_.j():this.Y(h)},on.prototype.Y=function(h){try{if(h==this.g)t:{const Fe=hi(this.g);var _=this.g.Ba();const Sr=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Ic(this.g)))){this.J||Fe!=4||_==7||(_==8||0>=Sr?Hi(3):Hi(2)),ji(this);var T=this.g.Z();this.X=T;e:if(Js(this)){var C=Ic(this.g);h="";var W=C.length,ot=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),oi(this);var _t="";break e}this.h.i=new d.TextDecoder}for(_=0;_<W;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(ot&&_==W-1)});C.length=0,this.h.g+=h,this.C=0,_t=this.h.g}else _t=this.g.oa();if(this.o=T==200,bl(this.i,this.u,this.A,this.l,this.R,Fe,T),this.o){if(this.T&&!this.K){e:{if(this.g){var Kt,qe=this.g;if((Kt=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Kt)){var Xt=Kt;break e}}Xt=null}if(T=Xt)qi(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gi(this,T);else{this.o=!1,this.s=3,de(12),He(this),oi(this);break t}}if(this.P){T=!0;let ln;for(;!this.J&&this.C<_t.length;)if(ln=Ka(this,_t),ln==Zr){Fe==4&&(this.s=4,de(14),T=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Ws){this.s=4,de(15),qi(this.i,this.l,_t,"[Invalid Chunk]"),T=!1;break}else qi(this.i,this.l,ln,null),Gi(this,ln);if(Js(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||_t.length!=0||this.h.h||(this.s=1,de(16),T=!1),this.o=this.o&&T,!T)qi(this.i,this.l,_t,"[Invalid Chunked Response]"),He(this),oi(this);else if(0<_t.length&&!this.W){this.W=!0;var Je=this.j;Je.g==this&&Je.ba&&!Je.M&&(Je.j.info("Great, no buffering proxy detected. Bytes received: "+_t.length),ca(Je),Je.M=!0,de(11))}}else qi(this.i,this.l,_t,null),Gi(this,_t);Fe==4&&He(this),this.o&&!this.J&&(Fe==4?Mc(this.j,this):(this.o=!1,pr(this)))}else Sd(this.g),T==400&&0<_t.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),He(this),oi(this)}}}catch{}finally{}};function Js(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ka(h,_){var T=h.C,C=_.indexOf(`
`,T);return C==-1?Zr:(T=Number(_.substring(T,C)),isNaN(T)?Ws:(C+=1,C+T>_.length?Zr:(_=_.slice(C,C+T),h.C=C+T,_)))}on.prototype.cancel=function(){this.J=!0,He(this)};function pr(h){h.S=Date.now()+h.I,Xa(h,h.I)}function Xa(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ae(E(h.ba,h),_)}function ji(h){h.B&&(d.clearTimeout(h.B),h.B=null)}on.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ya(this.i,this.A),this.L!=2&&(Hi(),de(17)),He(this),this.s=2,oi(this)):Xa(this,this.S-h)};function oi(h){h.j.G==0||h.J||Mc(h.j,h)}function He(h){ji(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,An(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Gi(h,_){try{var T=h.j;if(T.G!=0&&(T.g==h||Al(T.h,h))){if(!h.K&&Al(T.h,h)&&T.G==3){try{var C=T.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var W=C;if(W[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)ao(T),ro(T);else break t;kl(T),de(18)}}else T.za=W[1],0<T.za-T.T&&37500>W[2]&&T.F&&T.v==0&&!T.C&&(T.C=Ae(E(T.Za,T),6e3));if(1>=$i(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else wr(T,11)}else if((h.K||T.g==h)&&ao(T),!H(_))for(W=T.Da.g.parse(_),_=0;_<W.length;_++){let Xt=W[_];if(T.T=Xt[0],Xt=Xt[1],T.G==2)if(Xt[0]=="c"){T.K=Xt[1],T.ia=Xt[2];const Je=Xt[3];Je!=null&&(T.la=Je,T.j.info("VER="+T.la));const Fe=Xt[4];Fe!=null&&(T.Aa=Fe,T.j.info("SVER="+T.Aa));const Sr=Xt[5];Sr!=null&&typeof Sr=="number"&&0<Sr&&(C=1.5*Sr,T.L=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const ln=h.g;if(ln){const Ji=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var ot=C.h;ot.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Za(ot,ot.h),ot.h=null))}if(C.D){const Ll=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ll&&(C.ya=Ll,se(C.I,C.D,Ll))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),C=T;var _t=h;if(C.qa=Vc(C,C.J?C.ia:null,C.W),_t.K){In(C.h,_t);var Kt=_t,qe=C.L;qe&&(Kt.I=qe),Kt.B&&(ji(Kt),pr(Kt)),C.g=_t}else Nc(C);0<T.i.length&&so(T)}else Xt[0]!="stop"&&Xt[0]!="close"||wr(T,7);else T.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?wr(T,7):Ol(T):Xt[0]!="noop"&&T.l&&T.l.ta(Xt),T.v=0)}}Hi(4)}catch{}}var Qa=class{constructor(h,_){this.g=h,this.map=_}};function Ri(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $i(h){return h.h?1:h.g?h.g.size:0}function Al(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Za(h,_){h.g?h.g.add(_):h.h=_}function In(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ri.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Rl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.D);return _}return P(h.i)}function vd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],T=h.length,C=0;C<T;C++)_.push(h[C]);return _}_=[],T=0;for(C in h)_[T++]=h[C];return _}function Wa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var T=0;T<h;T++)_.push(T);return _}_=[],T=0;for(const C in h)_[T++]=C;return _}}}function Il(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var T=Wa(h),C=vd(h),W=C.length,ot=0;ot<W;ot++)_.call(void 0,C[ot],T&&T[ot],h)}var ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ed(h,_){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var C=h[T].indexOf("="),W=null;if(0<=C){var ot=h[T].substring(0,C);W=h[T].substring(C+1)}else ot=h[T];_(ot,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Pe(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pe){this.h=h.h,ea(this,h.j),this.o=h.o,this.g=h.g,Jr(this,h.s),this.l=h.l;var _=h.i,T=new _r;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),yr(this,T),this.m=h.m}else h&&(_=String(h).match(ta))?(this.h=!1,ea(this,_[1]||"",!0),this.o=li(_[2]||""),this.g=li(_[3]||"",!0),Jr(this,_[4]),this.l=li(_[5]||"",!0),yr(this,_[6]||"",!0),this.m=li(_[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}Pe.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ia(_,Cl,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ia(_,Cl,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ia(T,T.charAt(0)=="/"?Td:xl,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ia(T,Ja)),h.join("")};function Fn(h){return new Pe(h)}function ea(h,_,T){h.j=T?li(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Jr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function yr(h,_,T){_ instanceof _r?(h.i=_,Ac(h.i,h.h)):(T||(_=ia(_,wd)),h.i=new _r(_,h.h))}function se(h,_,T){h.i.set(_,T)}function na(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function li(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ia(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,bc),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function bc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Cl=/[#\/\?@]/g,xl=/[#\?:]/g,Td=/[#\?]/g,wd=/[#\?@]/g,Ja=/#/g;function _r(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ui(h){h.g||(h.g=new Map,h.h=0,h.i&&Ed(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}e=_r.prototype,e.add=function(h,_){ui(this),this.i=null,h=Yi(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function vr(h,_){ui(h),_=Yi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Er(h,_){return ui(h),_=Yi(h,_),h.g.has(_)}e.forEach=function(h,_){ui(this),this.g.forEach(function(T,C){T.forEach(function(W){h.call(_,W,C,this)},this)},this)},e.na=function(){ui(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let C=0;C<_.length;C++){const W=h[C];for(let ot=0;ot<W.length;ot++)T.push(_[C])}return T},e.V=function(h){ui(this);let _=[];if(typeof h=="string")Er(this,h)&&(_=_.concat(this.g.get(Yi(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)_=_.concat(h[T])}return _},e.set=function(h,_){return ui(this),this.i=null,h=Yi(this,h),Er(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Nl(h,_,T){vr(h,_),0<T.length&&(h.i=null,h.g.set(Yi(h,_),P(T)),h.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var C=_[T];const ot=encodeURIComponent(String(C)),_t=this.V(C);for(C=0;C<_t.length;C++){var W=ot;_t[C]!==""&&(W+="="+encodeURIComponent(String(_t[C]))),h.push(W)}}return this.i=h.join("&")};function Yi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Ac(h,_){_&&!h.j&&(ui(h),h.i=null,h.g.forEach(function(T,C){var W=C.toLowerCase();C!=W&&(vr(this,C),Nl(this,W,T))},h)),h.j=_}function ra(h,_){const T=new Dn;if(d.Image){const C=new Image;C.onload=S(ci,T,"TestLoadImage: loaded",!0,_,C),C.onerror=S(ci,T,"TestLoadImage: error",!1,_,C),C.onabort=S(ci,T,"TestLoadImage: abort",!1,_,C),C.ontimeout=S(ci,T,"TestLoadImage: timeout",!1,_,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function Ii(h,_){const T=new Dn,C=new AbortController,W=setTimeout(()=>{C.abort(),ci(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(ot=>{clearTimeout(W),ot.ok?ci(T,"TestPingServer: ok",!0,_):ci(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),ci(T,"TestPingServer: error",!1,_)})}function ci(h,_,T,C,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),C(T)}catch{}}function sa(){this.g=new Rn}function Ki(h,_,T){const C=T||"";try{Il(h,function(W,ot){let _t=W;g(W)&&(_t=Ze(W)),_.push(C+ot+"="+encodeURIComponent(_t))})}catch(W){throw _.push(C+"type="+encodeURIComponent("_badmap")),W}}function ts(h){this.l=h.Ub||null,this.j=h.eb||!1}O(ts,dr),ts.prototype.g=function(){return new Tr(this.l,this.j)},ts.prototype.i=function(h){return function(){return h}}({});function Tr(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Tr,te),e=Tr.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Qi(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xi(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Xi(this):Qi(this),this.readyState==3&&Dl(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,Xi(this))},e.Qa=function(h){this.g&&(this.response=h,Xi(this))},e.ga=function(){this.g&&Xi(this)};function Xi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Qi(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function Qi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ml(h){let _="";return it(h,function(T,C){_+=C,_+=":",_+=T,_+=`\r
`}),_}function We(h,_,T){t:{for(C in T){var C=!1;break t}C=!0}C||(T=Ml(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):se(h,_,T))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(ee,te);var to=/^https?$/i,aa=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?mr(this.o):mr(si),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ot){Rc(this,ot);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var W in C)T.set(W,C[W]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ot of C.keys())T.set(ot,C.get(ot));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(ot=>ot.toLowerCase()=="content-type"),W=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(aa,_,void 0))||C||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,_t]of T)this.g.setRequestHeader(ot,_t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oa(this),this.u=!0,this.g.send(h),this.u=!1}catch(ot){Rc(this,ot)}};function Rc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,eo(h),Zi(h)}function eo(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),Zi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zi(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?no(this):this.bb())},e.bb=function(){no(this)};function no(h){if(h.h&&typeof c<"u"&&(!h.v[1]||hi(h)!=4||h.Z()!=2)){if(h.u&&hi(h)==4)Te(h.Ea,0,h);else if(Ft(h,"readystatechange"),hi(h)==4){h.h=!1;try{const _t=h.Z();t:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var T;if(!(T=_)){var C;if(C=_t===0){var W=String(h.D).match(ta)[1]||null;!W&&d.self&&d.self.location&&(W=d.self.location.protocol.slice(0,-1)),C=!to.test(W?W.toLowerCase():"")}T=C}if(T)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var ot=2<hi(h)?h.g.statusText:""}catch{ot=""}h.l=ot+" ["+h.Z()+"]",eo(h)}}finally{Zi(h)}}}}function Zi(h,_){if(h.g){oa(h);const T=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{T.onreadystatechange=C}catch{}}}function oa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function hi(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),an(_)}};function Ic(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Sd(h){const _={};h=(h.g&&2<=hi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(H(h[C]))continue;var T=L(h[C]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ot=_[W]||[];_[W]=ot,ot.push(T)}V(_,function(C){return C.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function io(h){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=la("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=la("baseRetryDelayMs",5e3,h),this.cb=la("retryDelaySeedMs",1e4,h),this.Wa=la("forwardChannelMaxRetries",2,h),this.wa=la("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(h&&h.concurrentRequestLimit),this.Da=new sa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=io.prototype,e.la=8,e.G=1,e.connect=function(h,_,T,C){de(0),this.W=h,this.H=_||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.I=Vc(this,null,this.W),so(this)};function Ol(h){if(Cc(h),h.G==3){var _=h.U++,T=Fn(h.I);if(se(T,"SID",h.K),se(T,"RID",_),se(T,"TYPE","terminate"),ua(h,T),_=new on(h,h.j,_),_.L=2,_.v=na(Fn(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=_.v,T=!0),T||(_.g=kc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),pr(_)}Oc(h)}function ro(h){h.g&&(ca(h),h.g.cancel(),h.g=null)}function Cc(h){ro(h),h.u&&(d.clearTimeout(h.u),h.u=null),ao(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function so(h){if(!Wr(h.h)&&!h.s){h.s=!0;var _=h.Ga;j||N(),J||(j(),J=!0),X.add(_,h),h.B=0}}function bd(h,_){return $i(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ae(E(h.Ga,h,_),Pl(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new on(this,this.j,h);let ot=this.o;if(this.S&&(ot?(ot=A(ot),k(ot,this.S)):ot=this.S),this.m!==null||this.O||(W.H=ot,ot=null),this.P)t:{for(var _=0,T=0;T<this.i.length;T++){e:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=T;break t}if(_===4096||T===this.i.length-1){_=T+1;break t}}_=1e3}else _=1e3;_=xc(this,W,_),T=Fn(this.I),se(T,"RID",h),se(T,"CVER",22),this.D&&se(T,"X-HTTP-Session-Id",this.D),ua(this,T),ot&&(this.O?_="headers="+encodeURIComponent(String(Ml(ot)))+"&"+_:this.m&&We(T,this.m,ot)),Za(this.h,W),this.Ua&&se(T,"TYPE","init"),this.P?(se(T,"$req",_),se(T,"SID","null"),W.T=!0,qn(W,T,null)):qn(W,T,_),this.G=2}}else this.G==3&&(h?Vl(this,h):this.i.length==0||Wr(this.h)||Vl(this))};function Vl(h,_){var T;_?T=_.l:T=h.U++;const C=Fn(h.I);se(C,"SID",h.K),se(C,"RID",T),se(C,"AID",h.T),ua(h,C),h.m&&h.o&&We(C,h.m,h.o),T=new on(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),_&&(h.i=_.D.concat(h.i)),_=xc(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Za(h.h,T),qn(T,C,_)}function ua(h,_){h.H&&it(h.H,function(T,C){se(_,C,T)}),h.l&&Il({},function(T,C){se(_,C,T)})}function xc(h,_,T){T=Math.min(h.i.length,T);var C=h.l?E(h.l.Na,h.l,h):null;t:{var W=h.i;let ot=-1;for(;;){const _t=["count="+T];ot==-1?0<T?(ot=W[0].g,_t.push("ofs="+ot)):ot=0:_t.push("ofs="+ot);let Kt=!0;for(let qe=0;qe<T;qe++){let Xt=W[qe].g;const Je=W[qe].map;if(Xt-=ot,0>Xt)ot=Math.max(0,W[qe].g-100),Kt=!1;else try{Ki(Je,_t,"req"+Xt+"_")}catch{C&&C(Je)}}if(Kt){C=_t.join("&");break t}}}return h=h.i.splice(0,T),_.D=h,C}function Nc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;j||N(),J||(j(),J=!0),X.add(_,h),h.v=0}}function kl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ae(E(h.Fa,h),Pl(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,Dc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ae(E(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),ro(this),Dc(this))};function ca(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Dc(h){h.g=new on(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Fn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),ua(h,_),h.m&&h.o&&We(_,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=na(Fn(_)),T.m=null,T.P=!0,Ai(T,h)}e.Za=function(){this.C!=null&&(this.C=null,ro(this),kl(this),de(19))};function ao(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Mc(h,_){var T=null;if(h.g==_){ao(h),ca(h),h.g=null;var C=2}else if(Al(h.h,_))T=_.D,In(h.h,_),C=1;else return;if(h.G!=0){if(_.o)if(C==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var W=h.B;C=Bi(),Ft(C,new Ne(C,T)),so(h)}else Nc(h);else if(W=_.s,W==3||W==0&&0<_.X||!(C==1&&bd(h,_)||C==2&&kl(h)))switch(T&&0<T.length&&(_=h.h,_.i=_.i.concat(T)),W){case 1:wr(h,5);break;case 4:wr(h,10);break;case 3:wr(h,6);break;default:wr(h,2)}}}function Pl(h,_){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*_}function wr(h,_){if(h.j.info("Error code "+_),_==2){var T=E(h.fb,h),C=h.Xa;const W=!C;C=new Pe(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ea(C,"https"),na(C),W?ra(C.toString(),T):Ii(C.toString(),T)}else de(2);h.G=0,h.l&&h.l.sa(_),Oc(h),Cc(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Oc(h){if(h.G=0,h.ka=[],h.l){const _=Rl(h.h);(_.length!=0||h.i.length!=0)&&(I(h.ka,_),I(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function Vc(h,_,T){var C=T instanceof Pe?Fn(T):new Pe(T);if(C.g!="")_&&(C.g=_+"."+C.g),Jr(C,C.s);else{var W=d.location;C=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;var ot=new Pe(null);C&&ea(ot,C),_&&(ot.g=_),W&&Jr(ot,W),T&&(ot.l=T),C=ot}return T=h.D,_=h.ya,T&&_&&se(C,T,_),se(C,"VER",h.la),ua(h,C),C}function kc(h,_,T){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new ts({eb:T})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}e=Pc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function oo(){}oo.prototype.g=function(h,_){return new Cn(h,_)};function Cn(h,_){te.call(this),this.g=new io(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!H(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!H(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Wi(this)}O(Cn,te),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Ol(this.g)},Cn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Ze(h),h=T);_.i.push(new Qa(_.Ya++,h)),_.G==3&&so(_)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,Cn.aa.N.call(this)};function Lc(h){ni.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const T in _){h=T;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}O(Lc,ni);function Uc(){Hn.call(this),this.status=1}O(Uc,Hn);function Wi(h){this.g=h}O(Wi,Pc),Wi.prototype.ua=function(){Ft(this.g,"a")},Wi.prototype.ta=function(h){Ft(this.g,new Lc(h))},Wi.prototype.sa=function(h){Ft(this.g,new Uc)},Wi.prototype.ra=function(){Ft(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,V1=function(){return new oo},O1=function(){return Bi()},M1=ii,mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fi.NO_ERROR=0,Fi.TIMEOUT=8,Fi.HTTP_ERROR=6,af=Fi,ri.COMPLETE="complete",D1=ri,bi.EventType=Bn,Bn.OPEN="a",Bn.CLOSE="b",Bn.ERROR="c",Bn.MESSAGE="d",te.prototype.listen=te.prototype.K,ku=bi,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,N1=ee}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});const TT="@firebase/firestore",wT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new Jp("@firebase/firestore");function qo(){return La.logLevel}function vt(e,...t){if(La.logLevel<=$t.DEBUG){const n=t.map(ny);La.debug(`Firestore (${yl}): ${e}`,...n)}}function $r(e,...t){if(La.logLevel<=$t.ERROR){const n=t.map(ny);La.error(`Firestore (${yl}): ${e}`,...n)}}function ll(e,...t){if(La.logLevel<=$t.WARN){const n=t.map(ny);La.warn(`Firestore (${yl}): ${e}`,...n)}}function ny(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,k1(e,r,n)}function k1(e,t,n){let r=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function ne(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||k1(t,a,r)}function Vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends Xr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class fV{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dV{constructor(t){this.t=t,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,n(m)):Promise.resolve();let l=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ls,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ls)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new P1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new En(t)}}class mV{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gV{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new mV(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ST{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pV{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const r=l=>{l.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,vt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ST(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ST(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=yV(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Bt(e,t){return e<t?-1:e>t?1:0}function gp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Bt(r,a);{const l=L1(),c=_V(l.encode(bT(e,n)),l.encode(bT(t,n)));return c!==0?c:Bt(r,a)}}n+=r>65535?2:1}return Bt(e.length,t.length)}function bT(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function _V(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Bt(e[n],t[n]);return Bt(e.length,t.length)}function ul(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=-62135596800,RT=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(t){return ye.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*RT);return new ye(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<AT)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-AT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new ye(0,0))}static max(){return new Ot(new ye(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__name__";class sr{constructor(t,n,r){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Dt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return sr.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof sr?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=sr.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Bt(t.length,n.length)}static compareSegments(t,n){const r=sr.isNumericId(t),a=sr.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?sr.extractNumericId(t).compare(sr.extractNumericId(n)):gp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ps.fromString(t.substring(4,t.length-2))}}class pe extends sr{construct(t,n,r){return new pe(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const vV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends sr{construct(t,n,r){return new dn(t,n,r)}static isValidIdentifier(t){return vV.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IT}static keyField(){return new dn([IT])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new Et(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Et(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new Et(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new dn(n)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.path=t}static fromPath(t){return new Rt(pe.fromString(t))}static fromName(t){return new Rt(pe.fromString(t).popFirst(5))}static empty(){return new Rt(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Rt(new pe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=-1;function EV(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Ot.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new Bs(a,Rt.empty(),t)}function TV(e){return new Bs(e.readTime,e.key,Ju)}class Bs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Bs(Ot.min(),Rt.empty(),Ju)}static max(){return new Bs(Ot.max(),Rt.empty(),Ju)}}function wV(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Rt.comparator(e.documentKey,t.documentKey),n!==0?n:Bt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==SV)throw e;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new mt((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof mt?n:mt.resolve(n)}catch(n){return mt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):mt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):mt.reject(n)}static resolve(t){return new mt((n,r)=>{n(t)})}static reject(t){return new mt((n,r)=>{r(t)})}static waitFor(t){return new mt((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},m=>r(m))}),c=!0,l===a&&n()})}static or(t){let n=mt.resolve(!1);for(const r of t)n=n.next(a=>a?mt.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new mt((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;n(t[g]).next(y=>{c[g]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new mt((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function AV(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Wf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function Jf(e){return e==null}function If(e){return e===0&&1/e==-1/0}function RV(e){return typeof e=="number"&&Number.isInteger(e)&&!If(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="";function IV(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=CT(t)),t=CV(e.get(n),t);return CT(t)}function CV(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case z1:n+="";break;default:n+=l}}return n}function CT(e){return e+z1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $s(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function B1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,n){this.comparator=t,this.root=n||fn.EMPTY}insert(t,n){return new be(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xh(this.root,t,this.comparator,!0)}}class Xh{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class fn{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??fn.RED,this.left=a??fn.EMPTY,this.right=l??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new fn(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new fn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new NT(this.data.getIterator())}getIteratorFrom(t){return new NT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class NT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t){this.fields=t,t.sort(dn.comparator)}static empty(){return new Zn([])}unionWith(t){let n=new $e(dn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Zn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ul(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new H1("Invalid base64 string: "+l):l}}(t);return new mn(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new mn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const xV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=xV.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Oe(e.seconds),nanos:Oe(e.nanos)}}function Oe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function qs(e){return typeof e=="string"?mn.fromBase64String(e):mn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="server_timestamp",F1="__type__",j1="__previous_value__",G1="__local_write_time__";function ry(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[F1])===null||n===void 0?void 0:n.stringValue)===q1}function td(e){const t=e.mapValue.fields[j1];return ry(t)?td(t):t}function tc(e){const t=Hs(e.mapValue.fields[G1].timestampValue);return new ye(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(t,n,r,a,l,c,d,m,g,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const Cf="(default)";class ec{constructor(t,n){this.projectId=t,this.database=n||Cf}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Cf}isEqual(t){return t instanceof ec&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="__type__",DV="__max__",Qh={mapValue:{}},Y1="__vector__",xf="value";function Fs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ry(e)?4:OV(e)?9007199254740991:MV(e)?10:11:Dt(28295,{value:e})}function hr(e,t){if(e===t)return!0;const n=Fs(e);if(n!==Fs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tc(e).isEqual(tc(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Hs(a.timestampValue),d=Hs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return qs(a.bytesValue).isEqual(qs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return Oe(a.geoPointValue.latitude)===Oe(l.geoPointValue.latitude)&&Oe(a.geoPointValue.longitude)===Oe(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Oe(a.integerValue)===Oe(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Oe(a.doubleValue),d=Oe(l.doubleValue);return c===d?If(c)===If(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return ul(e.arrayValue.values||[],t.arrayValue.values||[],hr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(xT(c)!==xT(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!hr(c[m],d[m])))return!1;return!0}(e,t);default:return Dt(52216,{left:e})}}function nc(e,t){return(e.values||[]).find(n=>hr(n,t))!==void 0}function cl(e,t){if(e===t)return 0;const n=Fs(e),r=Fs(t);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Oe(l.integerValue||l.doubleValue),m=Oe(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(e,t);case 3:return DT(e.timestampValue,t.timestampValue);case 4:return DT(tc(e),tc(t));case 5:return gp(e.stringValue,t.stringValue);case 6:return function(l,c){const d=qs(l),m=qs(c);return d.compareTo(m)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const y=Bt(d[g],m[g]);if(y!==0)return y}return Bt(d.length,m.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Bt(Oe(l.latitude),Oe(c.latitude));return d!==0?d:Bt(Oe(l.longitude),Oe(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return MT(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,m,g,y;const v=l.fields||{},E=c.fields||{},S=(d=v[xf])===null||d===void 0?void 0:d.arrayValue,O=(m=E[xf])===null||m===void 0?void 0:m.arrayValue,P=Bt(((g=S?.values)===null||g===void 0?void 0:g.length)||0,((y=O?.values)===null||y===void 0?void 0:y.length)||0);return P!==0?P:MT(S,O)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===Qh.mapValue&&c===Qh.mapValue)return 0;if(l===Qh.mapValue)return 1;if(c===Qh.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const E=gp(m[v],y[v]);if(E!==0)return E;const S=cl(d[m[v]],g[y[v]]);if(S!==0)return S}return Bt(m.length,y.length)}(e.mapValue,t.mapValue);default:throw Dt(23264,{Pe:n})}}function DT(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bt(e,t);const n=Hs(e),r=Hs(t),a=Bt(n.seconds,r.seconds);return a!==0?a:Bt(n.nanos,r.nanos)}function MT(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=cl(n[a],r[a]);if(l)return l}return Bt(n.length,r.length)}function hl(e){return pp(e)}function pp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Hs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return qs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=pp(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${pp(n.fields[c])}`;return a+"}"}(e.mapValue):Dt(61005,{value:e})}function of(e){switch(Fs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=td(e);return t?16+of(t):16;case 5:return 2*e.stringValue.length;case 6:return qs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+of(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return $s(r.fields,(l,c)=>{a+=l.length+of(c)}),a}(e.mapValue);default:throw Dt(13486,{value:e})}}function OT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function yp(e){return!!e&&"integerValue"in e}function sy(e){return!!e&&"arrayValue"in e}function VT(e){return!!e&&"nullValue"in e}function kT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lf(e){return!!e&&"mapValue"in e}function MV(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[$1])===null||n===void 0?void 0:n.stringValue)===Y1}function zu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $s(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=zu(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function OV(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===DV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.value=t}static empty(){return new Pn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!lf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=zu(n)}setAll(t){let n=dn.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const m=this.getFieldsMap(n);this.applyChanges(m,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=zu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return hr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];lf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){$s(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new Pn(zu(this.value))}}function K1(e){const t=[];return $s(e.fields,(n,r)=>{const a=new dn([n]);if(lf(r)){const l=K1(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Zn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new Tn(t,0,Ot.min(),Ot.min(),Ot.min(),Pn.empty(),0)}static newFoundDocument(t,n,r,a){return new Tn(t,1,n,Ot.min(),r,a,0)}static newNoDocument(t,n){return new Tn(t,2,n,Ot.min(),Ot.min(),Pn.empty(),0)}static newUnknownDocument(t,n){return new Tn(t,3,n,Ot.min(),Ot.min(),Pn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,n){this.position=t,this.inclusive=n}}function PT(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=Rt.comparator(Rt.fromName(c.referenceValue),n.key):r=cl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function LT(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,n="asc"){this.field=t,this.dir=n}}function VV(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{}class Be extends X1{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new PV(t,n,r):n==="array-contains"?new zV(t,r):n==="in"?new BV(t,r):n==="not-in"?new HV(t,r):n==="array-contains-any"?new qV(t,r):new Be(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new LV(t,r):new UV(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cl(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(cl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vi extends X1{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Vi(t,n)}matches(t){return Q1(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Q1(e){return e.op==="and"}function Z1(e){return kV(e)&&Q1(e)}function kV(e){for(const t of e.filters)if(t instanceof Vi)return!1;return!0}function _p(e){if(e instanceof Be)return e.field.canonicalString()+e.op.toString()+hl(e.value);if(Z1(e))return e.filters.map(t=>_p(t)).join(",");{const t=e.filters.map(n=>_p(n)).join(",");return`${e.op}(${t})`}}function W1(e,t){return e instanceof Be?function(r,a){return a instanceof Be&&r.op===a.op&&r.field.isEqual(a.field)&&hr(r.value,a.value)}(e,t):e instanceof Vi?function(r,a){return a instanceof Vi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&W1(c,a.filters[d]),!0):!1}(e,t):void Dt(19439)}function J1(e){return e instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${hl(n.value)}`}(e):e instanceof Vi?function(n){return n.op.toString()+" {"+n.getFilters().map(J1).join(" ,")+"}"}(e):"Filter"}class PV extends Be{constructor(t,n,r){super(t,n,r),this.key=Rt.fromName(r.referenceValue)}matches(t){const n=Rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class LV extends Be{constructor(t,n){super(t,"in",n),this.keys=tb("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class UV extends Be{constructor(t,n){super(t,"not-in",n),this.keys=tb("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function tb(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Rt.fromName(r.referenceValue))}class zV extends Be{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return sy(n)&&nc(n.arrayValue,this.value)}}class BV extends Be{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class HV extends Be{constructor(t,n){super(t,"not-in",n)}matches(t){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nc(this.value.arrayValue,n)}}class qV extends Be{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!sy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>nc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function UT(e,t=null,n=[],r=[],a=null,l=null,c=null){return new FV(e,t,n,r,a,l,c)}function ay(e){const t=Vt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>_p(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Jf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>hl(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>hl(r)).join(",")),t.Ie=n}return t.Ie}function oy(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!VV(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!W1(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!LT(e.startAt,t.startAt)&&LT(e.endAt,t.endAt)}function vp(e){return Rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function jV(e,t,n,r,a,l,c,d){return new El(e,t,n,r,a,l,c,d)}function eb(e){return new El(e)}function zT(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function nb(e){return e.collectionGroup!==null}function Bu(e){const t=Vt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(dn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new ic(l,r))}),n.has(dn.keyField().canonicalString())||t.Ee.push(new ic(dn.keyField(),r))}return t.Ee}function or(e){const t=Vt(e);return t.de||(t.de=GV(t,Bu(e))),t.de}function GV(e,t){if(e.limitType==="F")return UT(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ic(a.field,l)});const n=e.endAt?new Nf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nf(e.startAt.position,e.startAt.inclusive):null;return UT(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ep(e,t){const n=e.filters.concat([t]);return new El(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Tp(e,t,n){return new El(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ed(e,t){return oy(or(e),or(t))&&e.limitType===t.limitType}function ib(e){return`${ay(or(e))}|lt:${e.limitType}`}function Fo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>J1(a)).join(", ")}]`),Jf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>hl(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>hl(a)).join(",")),`Target(${r})`}(or(e))}; limitType=${e.limitType})`}function nd(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Rt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of Bu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,m){const g=PT(c,d,m);return c.inclusive?g<=0:g<0}(r.startAt,Bu(r),a)||r.endAt&&!function(c,d,m){const g=PT(c,d,m);return c.inclusive?g>=0:g>0}(r.endAt,Bu(r),a))}(e,t)}function $V(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rb(e){return(t,n)=>{let r=!1;for(const a of Bu(e)){const l=YV(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function YV(e,t,n){const r=e.field.isKeyField()?Rt.comparator(t.key,n.key):function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?cl(m,g):Dt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){$s(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return B1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=new be(Rt.comparator);function Yr(){return KV}const sb=new be(Rt.comparator);function Pu(...e){let t=sb;for(const n of e)t=t.insert(n.key,n);return t}function ab(e){let t=sb;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Na(){return Hu()}function ob(){return Hu()}function Hu(){return new qa(e=>e.toString(),(e,t)=>e.isEqual(t))}const XV=new be(Rt.comparator),QV=new $e(Rt.comparator);function Yt(...e){let t=QV;for(const n of e)t=t.add(n);return t}const ZV=new $e(Bt);function WV(){return ZV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(t)?"-0":t}}function lb(e){return{integerValue:""+e}}function JV(e,t){return RV(t)?lb(t):ly(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(){this._=void 0}}function t4(e,t,n){return e instanceof Df?function(a,l){const c={fields:{[F1]:{stringValue:q1},[G1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&ry(l)&&(l=td(l)),l&&(c.fields[j1]=l),{mapValue:c}}(n,t):e instanceof rc?cb(e,t):e instanceof sc?hb(e,t):function(a,l){const c=ub(a,l),d=BT(c)+BT(a.Re);return yp(c)&&yp(a.Re)?lb(d):ly(a.serializer,d)}(e,t)}function e4(e,t,n){return e instanceof rc?cb(e,t):e instanceof sc?hb(e,t):n}function ub(e,t){return e instanceof Mf?function(r){return yp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class Df extends id{}class rc extends id{constructor(t){super(),this.elements=t}}function cb(e,t){const n=fb(t);for(const r of e.elements)n.some(a=>hr(a,r))||n.push(r);return{arrayValue:{values:n}}}class sc extends id{constructor(t){super(),this.elements=t}}function hb(e,t){let n=fb(t);for(const r of e.elements)n=n.filter(a=>!hr(a,r));return{arrayValue:{values:n}}}class Mf extends id{constructor(t,n){super(),this.serializer=t,this.Re=n}}function BT(e){return Oe(e.integerValue||e.doubleValue)}function fb(e){return sy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function n4(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof rc&&a instanceof rc||r instanceof sc&&a instanceof sc?ul(r.elements,a.elements,hr):r instanceof Mf&&a instanceof Mf?hr(r.Re,a.Re):r instanceof Df&&a instanceof Df}(e.transform,t.transform)}class i4{constructor(t,n){this.version=t,this.transformResults=n}}class Wn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wn}static exists(t){return new Wn(void 0,t)}static updateTime(t){return new Wn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function uf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class rd{}function db(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new sd(e.key,Wn.none()):new mc(e.key,e.data,Wn.none());{const n=e.data,r=Pn.empty();let a=new $e(dn.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Ys(e.key,r,new Zn(a.toArray()),Wn.none())}}function r4(e,t,n){e instanceof mc?function(a,l,c){const d=a.value.clone(),m=qT(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof Ys?function(a,l,c){if(!uf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=qT(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(mb(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function qu(e,t,n,r){return e instanceof mc?function(l,c,d,m){if(!uf(l.precondition,c))return d;const g=l.value.clone(),y=FT(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ys?function(l,c,d,m){if(!uf(l.precondition,c))return d;const g=FT(l.fieldTransforms,m,c),y=c.data;return y.setAll(mb(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return uf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function s4(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=ub(r.transform,a||null);l!=null&&(n===null&&(n=Pn.empty()),n.set(r.field,l))}return n||null}function HT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&ul(r,a,(l,c)=>n4(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class mc extends rd{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ys extends rd{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function mb(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function qT(e,t,n){const r=new Map;ne(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,e4(c,d,n[a]))}return r}function FT(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,t4(l,c,t))}return r}class sd extends rd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a4 extends rd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&r4(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=qu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=qu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=ob();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const m=db(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Yt())}isEqual(t){return this.batchId===t.batchId&&ul(this.mutations,t.mutations,(n,r)=>HT(n,r))&&ul(this.baseMutations,t.baseMutations,(n,r)=>HT(n,r))}}class uy{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){ne(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return XV}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new uy(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Zt;function c4(e){switch(e){case dt.OK:return Dt(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Dt(15467,{code:e})}}function gb(e){if(e===void 0)return $r("GRPC error has no .code"),dt.UNKNOWN;switch(e){case ze.OK:return dt.OK;case ze.CANCELLED:return dt.CANCELLED;case ze.UNKNOWN:return dt.UNKNOWN;case ze.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case ze.INTERNAL:return dt.INTERNAL;case ze.UNAVAILABLE:return dt.UNAVAILABLE;case ze.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case ze.NOT_FOUND:return dt.NOT_FOUND;case ze.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case ze.ABORTED:return dt.ABORTED;case ze.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case ze.DATA_LOSS:return dt.DATA_LOSS;default:return Dt(39323,{code:e})}}(Zt=ze||(ze={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Ps([4294967295,4294967295],0);function jT(e){const t=L1().encode(e),n=new x1;return n.update(t),new Uint8Array(n.digest())}function GT(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Ps([n,r],0),new Ps([a,l],0)]}class cy{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lu(`Invalid padding: ${n}`);if(r<0)throw new Lu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Ps.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(Ps.fromNumber(r)));return a.compare(h4)===1&&(a=new Ps([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=jT(t),[r,a]=GT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new cy(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=jT(t),[r,a]=GT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,gc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new ad(Ot.min(),a,new be(Bt),Yr(),Yt())}}class gc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new gc(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class pb{constructor(t,n){this.targetId=t,this.Ce=n}}class yb{constructor(t,n,r=mn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class $T{constructor(){this.Fe=0,this.Me=YT(),this.xe=mn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Yt(),n=Yt(),r=Yt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Dt(38017,{changeType:l})}}),new gc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=YT()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class f4{constructor(t){this.ze=t,this.je=new Map,this.He=Yr(),this.Je=Zh(),this.Ye=Zh(),this.Ze=new be(Bt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(vp(l))if(r===0){const c=new Rt(l.path);this.tt(n,c,Tn.newNoDocument(c,Ot.min()))}else ne(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),m=d?this.lt(d,t,c):1;if(m!==0){this.st(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=qs(r).toUint8Array()}catch(m){if(m instanceof H1)return ll("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new cy(c,a,l)}catch(m){return ll(m instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&vp(d.target)){const m=new Rt(d.target.path);this.Et(m).has(c)||this.dt(c,m)||this.tt(c,m,Tn.newNoDocument(m,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Yt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const g=this._t(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new ad(t,n,this.Ze,this.He,r);return this.He=Yr(),this.Je=Zh(),this.Ye=Zh(),this.Ze=new be(Bt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new $T,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Bt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Bt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||vt("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new $T),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Zh(){return new be(Rt.comparator)}function YT(){return new be(Rt.comparator)}const d4={asc:"ASCENDING",desc:"DESCENDING"},m4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g4={and:"AND",or:"OR"};class p4{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function wp(e,t){return e.useProto3Json||Jf(t)?t:{value:t}}function Of(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _b(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function y4(e,t){return Of(e,t.toTimestamp())}function lr(e){return ne(!!e,49232),Ot.fromTimestamp(function(n){const r=Hs(n);return new ye(r.seconds,r.nanos)}(e))}function hy(e,t){return Sp(e,t).canonicalString()}function Sp(e,t){const n=function(a){return new pe(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function vb(e){const t=pe.fromString(e);return ne(bb(t),10190,{key:t.toString()}),t}function bp(e,t){return hy(e.databaseId,t.path)}function Bg(e,t){const n=vb(t);if(n.get(1)!==e.databaseId.projectId)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Et(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rt(Tb(n))}function Eb(e,t){return hy(e.databaseId,t)}function _4(e){const t=vb(e);return t.length===4?pe.emptyPath():Tb(t)}function Ap(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Tb(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function KT(e,t,n){return{name:bp(e,t),fields:n.value.mapValue.fields}}function v4(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Dt(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(g,y){return g.useProto3Json?(ne(y===void 0||typeof y=="string",58123),mn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),mn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(g){const y=g.code===void 0?dt.UNKNOWN:gb(g.code);return new Et(y,g.message||"")}(c);n=new yb(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Bg(e,r.document.name),l=lr(r.document.updateTime),c=r.document.createTime?lr(r.document.createTime):Ot.min(),d=new Pn({mapValue:{fields:r.document.fields}}),m=Tn.newFoundDocument(a,l,c,d),g=r.targetIds||[],y=r.removedTargetIds||[];n=new cf(g,y,m.key,m)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Bg(e,r.document),l=r.readTime?lr(r.readTime):Ot.min(),c=Tn.newNoDocument(a,l),d=r.removedTargetIds||[];n=new cf([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Bg(e,r.document),l=r.removedTargetIds||[];n=new cf([],l,a,null)}else{if(!("filter"in t))return Dt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new u4(a,l),d=r.targetId;n=new pb(d,c)}}return n}function E4(e,t){let n;if(t instanceof mc)n={update:KT(e,t.key,t.value)};else if(t instanceof sd)n={delete:bp(e,t.key)};else if(t instanceof Ys)n={update:KT(e,t.key,t.data),updateMask:x4(t.fieldMask)};else{if(!(t instanceof a4))return Dt(16599,{ft:t.type});n={verify:bp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Df)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof rc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof sc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Mf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Dt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:y4(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Dt(27497)}(e,t.precondition)),n}function T4(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?lr(a.updateTime):lr(l);return c.isEqual(Ot.min())&&(c=lr(l)),new i4(c,a.transformResults||[])}(n,t))):[]}function w4(e,t){return{documents:[Eb(e,t.path)]}}function S4(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Eb(e,a);const l=function(g){if(g.length!==0)return Sb(Vi.create(g,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(y=>function(E){return{field:jo(E.field),direction:R4(E.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=wp(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:n,parent:a}}function b4(e){let t=_4(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ne(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const E=wb(v);return E instanceof Vi&&Z1(E)?E.getFilters():[E]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(E=>function(O){return new ic(Go(O.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(E))}(n.orderBy));let d=null;n.limit&&(d=function(v){let E;return E=typeof v=="object"?v.value:v,Jf(E)?null:E}(n.limit));let m=null;n.startAt&&(m=function(v){const E=!!v.before,S=v.values||[];return new Nf(S,E)}(n.startAt));let g=null;return n.endAt&&(g=function(v){const E=!v.before,S=v.values||[];return new Nf(S,E)}(n.endAt)),jV(t,a,c,l,d,"F",m,g)}function A4(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function wb(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Go(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Go(n.unaryFilter.field);return Be.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Go(n.unaryFilter.field);return Be.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Go(n.unaryFilter.field);return Be.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Be.create(Go(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Vi.create(n.compositeFilter.filters.map(r=>wb(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(n.compositeFilter.op))}(e):Dt(30097,{filter:e})}function R4(e){return d4[e]}function I4(e){return m4[e]}function C4(e){return g4[e]}function jo(e){return{fieldPath:e.canonicalString()}}function Go(e){return dn.fromServerFormat(e.fieldPath)}function Sb(e){return e instanceof Be?function(n){if(n.op==="=="){if(kT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(VT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(VT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:I4(n.op),value:n.value}}}(e):e instanceof Vi?function(n){const r=n.getFilters().map(a=>Sb(a));return r.length===1?r[0]:{compositeFilter:{op:C4(n.op),filters:r}}}(e):Dt(54877,{filter:e})}function x4(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function bb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n,r,a,l=Ot.min(),c=Ot.min(),d=mn.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(t){return new Ds(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(t){this.wt=t}}function D4(e){const t=b4({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Tp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.Cn=new O4}addToCollectionParentIndex(t,n){return this.Cn.add(n),mt.resolve()}getCollectionParents(t,n){return mt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return mt.resolve()}deleteFieldIndex(t,n){return mt.resolve()}deleteAllFieldIndexes(t){return mt.resolve()}createTargetIndexes(t,n){return mt.resolve()}getDocumentsMatchingTarget(t,n){return mt.resolve(null)}getIndexType(t,n){return mt.resolve(0)}getFieldIndexes(t,n){return mt.resolve([])}getNextCollectionGroupToUpdate(t){return mt.resolve(null)}getMinOffset(t,n){return mt.resolve(Bs.min())}getMinOffsetFromCollectionGroup(t,n){return mt.resolve(Bs.min())}updateCollectionGroup(t,n,r){return mt.resolve()}updateIndexEntries(t,n){return mt.resolve()}}class O4{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new $e(pe.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new $e(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ab=41943040;class kn{static withCacheSize(t){return new kn(t,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(Ab,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new fl(0)}static lr(){return new fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="LruGarbageCollector",V4=1048576;function ZT([e,t],[n,r]){const a=Bt(e,n);return a===0?Bt(t,r):a}class k4{constructor(t){this.Er=t,this.buffer=new $e(ZT),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ZT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class P4{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){vt(QT,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vl(n)?vt(QT,"Ignoring IndexedDB error during garbage collection: ",n):await _l(n)}await this.mr(3e5)})}}class L4{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return mt.resolve(Wf.le);const r=new k4(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),mt.resolve(XT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XT):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,m,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(g=Date.now(),qo()<=$t.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${v} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),mt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function U4(e,t){return new L4(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.changes=new qa(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?mt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&qu(r.mutation,a,Zn.empty(),ye.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Yt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Yt()){const a=Na();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=Pu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Na();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Yt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=Yr();const c=Hu(),d=function(){return Hu()}();return n.forEach((m,g)=>{const y=r.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof Ys)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),qu(y.mutation,g,y.mutation.getFieldMask(),ye.now())):c.set(g.key,Zn.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((g,y)=>c.set(g,y)),n.forEach((g,y)=>{var v;return d.set(g,new B4(y,(v=c.get(g))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Hu();let a=new be((c,d)=>c-d),l=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=n.get(m);if(g===null)return;let y=r.get(m)||Zn.empty();y=d.applyToLocalView(g,y),r.set(m,y);const v=(a.get(d.batchId)||Yt()).add(m);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,y=m.value,v=ob();y.forEach(E=>{if(!l.has(E)){const S=db(n.get(E),r.get(E));S!==null&&v.set(E,S),l=l.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,v))}return mt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return Rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):nb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):mt.resolve(Na());let d=Ju,m=l;return c.next(g=>mt.forEach(g,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?mt.resolve():this.remoteDocumentCache.getEntry(t,y).next(E=>{m=m.insert(y,E)}))).next(()=>this.populateOverlays(t,g,l)).next(()=>this.computeViews(t,m,g,Yt())).next(y=>({batchId:d,changes:ab(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Rt(n)).next(r=>{let a=Pu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(t,l).next(d=>mt.forEach(d,m=>{const g=function(v,E){return new El(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,g,r,a).next(y=>{y.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Tn.newInvalidDocument(y)))});let d=Pu();return c.forEach((m,g)=>{const y=l.get(m);y!==void 0&&qu(y.mutation,g,Zn.empty(),ye.now()),nd(n,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return mt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:lr(a.createTime)}}(n)),mt.resolve()}getNamedQuery(t,n){return mt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:D4(a.bundledQuery),readTime:lr(a.readTime)}}(n)),mt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.overlays=new be(Rt.comparator),this.Qr=new Map}getOverlay(t,n){return mt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Na();return mt.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),mt.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),mt.resolve()}getOverlaysForCollection(t,n,r){const a=Na(),l=n.length+1,c=new Rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return mt.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new be((g,y)=>g-y);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let y=l.get(g.largestBatchId);y===null&&(y=Na(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=Na(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,y)=>d.set(g,y)),!(d.size()>=a)););return mt.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new l4(n,r));let l=this.Qr.get(n);l===void 0&&(l=Yt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(t){return mt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,mt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.$r=new $e(rn.Ur),this.Kr=new $e(rn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new rn(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new rn(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new Rt(new pe([])),r=new rn(n,t),a=new rn(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new Rt(new pe([])),r=new rn(n,t),a=new rn(n,t+1);let l=Yt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new rn(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class rn{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return Rt.comparator(t.key,n.key)||Bt(t.Zr,n.Zr)}static Wr(t,n){return Bt(t.Zr,n.Zr)||Rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(rn.Ur)}checkEmpty(t){return mt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new o4(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new rn(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return mt.resolve(c)}lookupMutationBatch(t,n){return mt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return mt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return mt.resolve(this.mutationQueue.length===0?iy:this.nr-1)}getAllMutationBatches(t){return mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new rn(n,0),a=new rn(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),mt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Bt);return n.forEach(a=>{const l=new rn(a,0),c=new rn(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),mt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;Rt.isDocumentKey(l)||(l=l.child(""));const c=new rn(new Rt(l),0);let d=new $e(Bt);return this.Xr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Zr)),!0)},c),mt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return mt.forEach(n.mutations,a=>{const l=new rn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new rn(n,0),a=this.Xr.firstAfterOrEqual(r);return mt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,mt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(t){this.ii=t,this.docs=function(){return new be(Rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return mt.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(t,n){let r=Yr();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():Tn.newInvalidDocument(a))}),mt.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=Yr();const c=n.path,d=new Rt(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||wV(TV(y),r)<=0||(a.has(y.key)||nd(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return mt.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Dt(9500)}si(t,n){return mt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Y4(this)}getSize(t){return mt.resolve(this.size)}}class Y4 extends z4{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),mt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(t){this.persistence=t,this.oi=new qa(n=>ay(n),oy),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this._i=0,this.ai=new fy,this.targetCount=0,this.ui=fl.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),mt.resolve()}getLastRemoteSnapshotVersion(t){return mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return mt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),mt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),mt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new fl(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,mt.resolve()}updateTargetData(t,n){return this.Tr(n),mt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,mt.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),mt.waitFor(l).next(()=>a)}getTargetCount(t){return mt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return mt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),mt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),mt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),mt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return mt.resolve(r)}containsKey(t,n){return mt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(t,n){this.ci={},this.overlays={},this.li=new Wf(0),this.hi=!1,this.hi=!0,this.Pi=new j4,this.referenceDelegate=t(this),this.Ti=new K4(this),this.indexManager=new M4,this.remoteDocumentCache=function(a){return new $4(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new N4(n),this.Ei=new q4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new F4,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new G4(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){vt("MemoryPersistence","Starting transaction:",t);const a=new X4(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return mt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class X4 extends bV{constructor(t){super(),this.currentSequenceNumber=t}}class dy{constructor(t){this.persistence=t,this.Vi=new fy,this.mi=null}static fi(t){return new dy(t)}get gi(){if(this.mi)return this.mi;throw Dt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),mt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),mt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),mt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.gi,r=>{const a=Rt.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,Ot.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return mt.or([()=>mt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Vf{constructor(t,n){this.persistence=t,this.yi=new qa(r=>IV(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=U4(this,n)}static fi(t,n){return new Vf(t,n)}di(){}Ai(t){return mt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return mt.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?mt.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Ot.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),mt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),mt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),mt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),mt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=of(t.data.value)),n}Dr(t,n,r){return mt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return mt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=Yt(),a=Yt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new my(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return GM()?8:AV(wn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Q4;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(qo()<=$t.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",Fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),mt.resolve()):(qo()<=$t.DEBUG&&vt("QueryEngine","Query:",Fo(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(qo()<=$t.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",Fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,or(n))):mt.resolve())}ws(t,n){if(zT(n))return mt.resolve(null);let r=or(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Tp(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Yt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(m=>{const g=this.vs(n,d);return this.Cs(n,g,c,m.readTime)?this.ws(t,Tp(n,null,"F")):this.Fs(t,g,n,m)}))})))}bs(t,n,r,a){return zT(n)||a.isEqual(Ot.min())?mt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?mt.resolve(null):(qo()<=$t.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Fo(n)),this.Fs(t,c,n,EV(a,Ju)).next(d=>d))})}vs(t,n){let r=new $e(rb(t));return n.forEach((a,l)=>{nd(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return qo()<=$t.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",Fo(n)),this.ys.getDocumentsMatchingQuery(t,n,Bs.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="LocalStore",W4=3e8;class J4{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new be(Bt),this.Os=new qa(l=>ay(l),oy),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new H4(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function t3(e,t,n,r){return new J4(e,t,n,r)}async function Ib(e,t){const n=Vt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let m=Yt();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return n.localDocuments.getDocuments(r,m).next(g=>({ks:g,removedBatchIds:c,addedBatchIds:d}))})})}function e3(e,t){const n=Vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,m,g,y){const v=g.batch,E=v.keys();let S=mt.resolve();return E.forEach(O=>{S=S.next(()=>y.getEntry(m,O)).next(P=>{const I=g.docVersions.get(O);ne(I!==null,48541),P.version.compareTo(I)<0&&(v.applyToRemoteDocument(P,g),P.isValidDocument()&&(P.setReadTime(g.commitVersion),y.addEntry(P)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(m,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Yt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function Cb(e){const t=Vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function n3(e,t){const n=Vt(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const E=a.get(v);if(!E)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let S=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(mn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),a=a.insert(v,S),function(P,I,z){return P.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=W4?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(E,S,y)&&d.push(n.Ti.updateTargetData(l,S))});let m=Yr(),g=Yt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(i3(l,c,t.documentUpdates).next(y=>{m=y.qs,g=y.Qs})),!r.isEqual(Ot.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return mt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(n.xs=a,l))}function i3(e,t,n){let r=Yt(),a=Yt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=Yr();return n.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ot.min())?(t.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(m),c=c.insert(d,m)):vt(gy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{qs:c,Qs:a}})}function r3(e,t){const n=Vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=iy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function s3(e,t){const n=Vt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,mt.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new Ds(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function Rp(e,t,n){const r=Vt(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!vl(c))throw c;vt(gy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function WT(e,t,n){const r=Vt(e);let a=Ot.min(),l=Yt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,y){const v=Vt(m),E=v.Os.get(y);return E!==void 0?mt.resolve(v.xs.get(E)):v.Ti.getTargetData(g,y)}(r,c,or(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:Ot.min(),n?l:Yt())).next(d=>(a3(r,$V(t),d),{documents:d,$s:l})))}function a3(e,t,n){let r=e.Ns.get(t)||Ot.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class JT{constructor(){this.activeTargetIds=WV()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class o3{constructor(){this.xo=new JT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new JT,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="ConnectivityMonitor";class ew{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){vt(tw,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){vt(tw,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function Ip(){return Wh===null?Wh=function(){return 268435456+Math.round(2147483648*Math.random())}():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="RestConnection",u3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c3{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===Cf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=Ip(),d=this.jo(t,n.toUriEncodedString());vt(Hg,`Sending RPC '${t}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,a,l);const{host:g}=new URL(d),y=gl(g);return this.Jo(t,d,m,r,y).then(v=>(vt(Hg,`Received RPC '${t}' ${c}: `,v),v),v=>{throw ll(Hg,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=u3[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class f3 extends c3{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=Ip();return new Promise((d,m)=>{const g=new N1;g.setWithCredentials(!0),g.listenOnce(D1.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case af.NO_ERROR:const v=g.getResponseJson();vt(vn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case af.TIMEOUT:vt(vn,`RPC '${t}' ${c} timed out`),m(new Et(dt.DEADLINE_EXCEEDED,"Request time out"));break;case af.HTTP_ERROR:const E=g.getStatus();if(vt(vn,`RPC '${t}' ${c} failed with status:`,E,"response text:",g.getResponseText()),E>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const O=S?.error;if(O&&O.status&&O.message){const P=function(z){const H=z.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(H)>=0?H:dt.UNKNOWN}(O.status);m(new Et(P,O.message))}else m(new Et(dt.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Et(dt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{h_:t,streamId:c,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{vt(vn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);vt(vn,`RPC '${t}' ${c} sending request:`,a),g.send(n,"POST",y,r,15)})}I_(t,n,r){const a=Ip(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=V1(),d=O1(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const y=l.join("");vt(vn,`Creating RPC '${t}' stream ${a}: ${y}`,m);const v=c.createWebChannel(y,m);this.E_(v);let E=!1,S=!1;const O=new h3({Zo:I=>{S?vt(vn,`Not sending because RPC '${t}' stream ${a} is closed:`,I):(E||(vt(vn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),E=!0),vt(vn,`RPC '${t}' stream ${a} sending:`,I),v.send(I))},Xo:()=>v.close()}),P=(I,z,H)=>{I.listen(z,F=>{try{H(F)}catch(q){setTimeout(()=>{throw q},0)}})};return P(v,ku.EventType.OPEN,()=>{S||(vt(vn,`RPC '${t}' stream ${a} transport opened.`),O.__())}),P(v,ku.EventType.CLOSE,()=>{S||(S=!0,vt(vn,`RPC '${t}' stream ${a} transport closed`),O.u_(),this.d_(v))}),P(v,ku.EventType.ERROR,I=>{S||(S=!0,ll(vn,`RPC '${t}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),O.u_(new Et(dt.UNAVAILABLE,"The operation could not be completed")))}),P(v,ku.EventType.MESSAGE,I=>{var z;if(!S){const H=I.data[0];ne(!!H,16349);const F=H,q=F?.error||((z=F[0])===null||z===void 0?void 0:z.error);if(q){vt(vn,`RPC '${t}' stream ${a} received error:`,q);const K=q.status;let it=function(R){const k=ze[R];if(k!==void 0)return gb(k)}(K),V=q.message;it===void 0&&(it=dt.INTERNAL,V="Unknown error status: "+K+" with message "+q.message),S=!0,O.u_(new Et(it,V)),v.close()}else vt(vn,`RPC '${t}' stream ${a} received:`,H),O.c_(H)}}),P(d,M1.STAT_EVENT,I=>{I.stat===mp.PROXY?vt(vn,`RPC '${t}' stream ${a} detected buffering proxy`):I.stat===mp.NOPROXY&&vt(vn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.a_()},0),O}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(e){return new p4(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&vt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="PersistentStream";class Nb{constructor(t,n,r,a,l,c,d,m){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new xb(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new Et(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return vt(nw,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(vt(nw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d3 extends Nb{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=v4(this.serializer,t),r=function(l){if(!("targetChange"in l))return Ot.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?lr(c.readTime):Ot.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=Ap(this.serializer),n.addTarget=function(l,c){let d;const m=c.target;if(d=vp(m)?{documents:w4(l,m)}:{query:S4(l,m).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=_b(l,c.resumeToken);const g=wp(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ot.min())>0){d.readTime=Of(l,c.snapshotVersion.toTimestamp());const g=wp(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,t);const r=A4(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=Ap(this.serializer),n.removeTarget=t,this.Q_(n)}}class m3 extends Nb{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=T4(t.writeResults,t.commitTime),r=lr(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=Ap(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>E4(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{}class p3 extends g3{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,Sp(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Et(dt.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,Sp(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(dt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class y3{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?($r(n),this.ua=!1):vt("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="RemoteStore";class _3{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Fa(this)&&(vt(Ua,"Restarting streams for network reachability change."),await async function(m){const g=Vt(m);g.da.add(4),await pc(g),g.Va.set("Unknown"),g.da.delete(4),await ld(g)}(this))})}),this.Va=new y3(r,a)}}async function ld(e){if(Fa(e))for(const t of e.Aa)await t(!0)}async function pc(e){for(const t of e.Aa)await t(!1)}function Db(e,t){const n=Vt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),vy(n)?_y(n):Tl(n).N_()&&yy(n,t))}function py(e,t){const n=Vt(e),r=Tl(n);n.Ea.delete(t),r.N_()&&Mb(n,t),n.Ea.size===0&&(r.N_()?r.k_():Fa(n)&&n.Va.set("Unknown"))}function yy(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ot.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tl(e).Z_(t)}function Mb(e,t){e.ma.Ke(t),Tl(e).X_(t)}function _y(e){e.ma=new f4({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Tl(e).start(),e.Va.ca()}function vy(e){return Fa(e)&&!Tl(e).O_()&&e.Ea.size>0}function Fa(e){return Vt(e).da.size===0}function Ob(e){e.ma=void 0}async function v3(e){e.Va.set("Online")}async function E3(e){e.Ea.forEach((t,n)=>{yy(e,t)})}async function T3(e,t){Ob(e),vy(e)?(e.Va.Pa(t),_y(e)):e.Va.set("Unknown")}async function w3(e,t,n){if(e.Va.set("Online"),t instanceof yb&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){vt(Ua,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await kf(e,r)}else if(t instanceof cf?e.ma.Xe(t):t instanceof pb?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Ot.min()))try{const r=await Cb(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ea.get(g);y&&l.Ea.set(g,y.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const y=l.Ea.get(m);if(!y)return;l.Ea.set(m,y.withResumeToken(mn.EMPTY_BYTE_STRING,y.snapshotVersion)),Mb(l,m);const v=new Ds(y.target,m,g,y.sequenceNumber);yy(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){vt(Ua,"Failed to raise snapshot:",r),await kf(e,r)}}async function kf(e,t,n){if(!vl(t))throw t;e.da.add(1),await pc(e),e.Va.set("Offline"),n||(n=()=>Cb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{vt(Ua,"Retrying IndexedDB access"),await n(),e.da.delete(1),await ld(e)})}function Vb(e,t){return t().catch(n=>kf(e,n,t))}async function ud(e){const t=Vt(e),n=js(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:iy;for(;S3(t);)try{const a=await r3(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,b3(t,a)}catch(a){await kf(t,a)}kb(t)&&Pb(t)}function S3(e){return Fa(e)&&e.Ia.length<10}function b3(e,t){e.Ia.push(t);const n=js(e);n.N_()&&n.ea&&n.ta(t.mutations)}function kb(e){return Fa(e)&&!js(e).O_()&&e.Ia.length>0}function Pb(e){js(e).start()}async function A3(e){js(e).ia()}async function R3(e){const t=js(e);for(const n of e.Ia)t.ta(n.mutations)}async function I3(e,t,n){const r=e.Ia.shift(),a=uy.from(r,t,n);await Vb(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await ud(e)}async function C3(e,t){t&&js(e).ea&&await async function(r,a){if(function(c){return c4(c)&&c!==dt.ABORTED}(a.code)){const l=r.Ia.shift();js(r).L_(),await Vb(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await ud(r)}}(e,t),kb(e)&&Pb(e)}async function iw(e,t){const n=Vt(e);n.asyncQueue.verifyOperationInProgress(),vt(Ua,"RemoteStore received new credentials");const r=Fa(n);n.da.add(3),await pc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await ld(n)}async function x3(e,t){const n=Vt(e);t?(n.da.delete(2),await ld(n)):t||(n.da.add(2),await pc(n),n.Va.set("Unknown"))}function Tl(e){return e.fa||(e.fa=function(n,r,a){const l=Vt(n);return l.oa(),new d3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:v3.bind(null,e),n_:E3.bind(null,e),i_:T3.bind(null,e),Y_:w3.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),vy(e)?_y(e):e.Va.set("Unknown")):(await e.fa.stop(),Ob(e))})),e.fa}function js(e){return e.ga||(e.ga=function(n,r,a){const l=Vt(n);return l.oa(),new m3(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:A3.bind(null,e),i_:C3.bind(null,e),na:R3.bind(null,e),ra:I3.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await ud(e)):(await e.ga.stop(),e.Ia.length>0&&(vt(Ua,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new Ey(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ty(e,t){if($r("AsyncQueue",`${t}: ${e}`),vl(e))return new Et(dt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(t){return new Wo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Rt.comparator(n.key,r.key):(n,r)=>Rt.comparator(n.key,r.key),this.keyedMap=Pu(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Wo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Wo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.pa=new be(Rt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Dt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class dl{constructor(t,n,r,a,l,c,d,m,g){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new dl(t,n,Wo.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ed(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class D3{constructor(){this.queries=sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Vt(n),l=a.queries;a.queries=sw(),l.forEach((c,d)=>{for(const m of d.Sa)m.onError(r)})})(this,new Et(dt.ABORTED,"Firestore shutting down"))}}function sw(){return new qa(e=>ib(e),ed)}async function M3(e,t){const n=Vt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new N3,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Ty(c,`Initialization of query '${Fo(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&wy(n)}async function O3(e,t){const n=Vt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function V3(e,t){const n=Vt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&wy(n)}function k3(e,t,n){const r=Vt(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function wy(e){e.Ca.forEach(t=>{t.next()})}var Cp,aw;(aw=Cp||(Cp={})).xa="default",aw.Cache="cache";class P3{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new dl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=dl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t){this.key=t}}class Ub{constructor(t){this.key=t}}class L3{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yt(),this.mutatedKeys=Yt(),this.Za=rb(t),this.Xa=new Wo(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new rw,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const E=a.get(y),S=nd(this.query,v)?v:null,O=!!E&&this.mutatedKeys.has(E.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let I=!1;E&&S?E.data.isEqual(S.data)?O!==P&&(r.track({type:3,doc:S}),I=!0):this.ru(E,S)||(r.track({type:2,doc:S}),I=!0,(m&&this.Za(S,m)>0||g&&this.Za(S,g)<0)&&(d=!0)):!E&&S?(r.track({type:0,doc:S}),I=!0):E&&!S&&(r.track({type:1,doc:E}),I=!0,(m||g)&&(d=!0)),I&&(S?(c=c.add(S),l=P?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(S,O){const P=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Vt:I})}};return P(S)-P(O)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],m=this.Ya.size===0&&this.current&&!a?1:0,g=m!==this.Ja;return this.Ja=m,c.length!==0||g?{snapshot:new dl(this.query,t.Xa,l,c,t.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new rw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Yt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new Ub(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new Lb(r))}),n}au(t){this.Ha=t.$s,this.Ya=Yt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return dl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Sy="SyncEngine";class U3{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class z3{constructor(t){this.key=t,this.cu=!1}}class B3{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new qa(d=>ib(d),ed),this.Pu=new Map,this.Tu=new Set,this.Iu=new be(Rt.comparator),this.Eu=new Map,this.du=new fy,this.Au={},this.Ru=new Map,this.Vu=fl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function H3(e,t,n=!0){const r=jb(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await zb(r,t,n,!0),a}async function q3(e,t){const n=jb(e);await zb(n,t,!0,!1)}async function zb(e,t,n,r){const a=await s3(e.localStore,or(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await F3(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&Db(e.remoteStore,a),d}async function F3(e,t,n,r,a){e.fu=(v,E,S)=>async function(P,I,z,H){let F=I.view.tu(z);F.Cs&&(F=await WT(P.localStore,I.query,!1).then(({documents:V})=>I.view.tu(V,F)));const q=H&&H.targetChanges.get(I.targetId),K=H&&H.targetMismatches.get(I.targetId)!=null,it=I.view.applyChanges(F,P.isPrimaryClient,q,K);return lw(P,I.targetId,it.ou),it.snapshot}(e,v,E,S);const l=await WT(e.localStore,t,!0),c=new L3(t,l.$s),d=c.tu(l.documents),m=gc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),g=c.applyChanges(d,e.isPrimaryClient,m);lw(e,n,g.ou);const y=new U3(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),g.snapshot}async function j3(e,t,n){const r=Vt(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!ed(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Rp(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&py(r.remoteStore,a.targetId),xp(r,a.targetId)}).catch(_l)):(xp(r,a.targetId),await Rp(r.localStore,a.targetId,!0))}async function G3(e,t){const n=Vt(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),py(n.remoteStore,r.targetId))}async function $3(e,t,n){const r=J3(e);try{const a=await function(c,d){const m=Vt(c),g=ye.now(),y=d.reduce((S,O)=>S.add(O.key),Yt());let v,E;return m.persistence.runTransaction("Locally write mutations","readwrite",S=>{let O=Yr(),P=Yt();return m.Bs.getEntries(S,y).next(I=>{O=I,O.forEach((z,H)=>{H.isValidDocument()||(P=P.add(z))})}).next(()=>m.localDocuments.getOverlayedDocuments(S,O)).next(I=>{v=I;const z=[];for(const H of d){const F=s4(H,v.get(H.key).overlayedDocument);F!=null&&z.push(new Ys(H.key,F,K1(F.value.mapValue),Wn.exists(!0)))}return m.mutationQueue.addMutationBatch(S,g,z,d)}).next(I=>{E=I;const z=I.applyToLocalDocumentSet(v,P);return m.documentOverlayCache.saveOverlays(S,I.batchId,z)})}).then(()=>({batchId:E.batchId,changes:ab(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let g=c.Au[c.currentUser.toKey()];g||(g=new be(Bt)),g=g.insert(d,m),c.Au[c.currentUser.toKey()]=g}(r,a.batchId,n),await yc(r,a.changes),await ud(r.remoteStore)}catch(a){const l=Ty(a,"Failed to persist write");n.reject(l)}}async function Bb(e,t){const n=Vt(e);try{const r=await n3(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ne(c.cu,14607):a.removedDocuments.size>0&&(ne(c.cu,42227),c.cu=!1))}),await yc(n,r,t)}catch(r){await _l(r)}}function ow(e,t,n){const r=Vt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=Vt(c);m.onlineState=d;let g=!1;m.queries.forEach((y,v)=>{for(const E of v.Sa)E.Fa(d)&&(g=!0)}),g&&wy(m)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Y3(e,t,n){const r=Vt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new be(Rt.comparator);c=c.insert(l,Tn.newNoDocument(l,Ot.min()));const d=Yt().add(l),m=new ad(Ot.min(),new Map,new be(Bt),c,d);await Bb(r,m),r.Iu=r.Iu.remove(l),r.Eu.delete(t),by(r)}else await Rp(r.localStore,t,!1).then(()=>xp(r,t,n)).catch(_l)}async function K3(e,t){const n=Vt(e),r=t.batch.batchId;try{const a=await e3(n.localStore,t);qb(n,r,null),Hb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yc(n,a)}catch(a){await _l(a)}}async function X3(e,t,n){const r=Vt(e);try{const a=await function(c,d){const m=Vt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return m.mutationQueue.lookupMutationBatch(g,d).next(v=>(ne(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(g,v))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>m.localDocuments.getDocuments(g,y))})}(r.localStore,t);qb(r,t,n),Hb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await yc(r,a)}catch(a){await _l(a)}}function Hb(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function qb(e,t,n){const r=Vt(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function xp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||Fb(e,r)})}function Fb(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(py(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),by(e))}function lw(e,t,n){for(const r of n)r instanceof Lb?(e.du.addReference(r.key,t),Q3(e,r)):r instanceof Ub?(vt(Sy,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Fb(e,r.key)):Dt(19791,{pu:r})}function Q3(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(vt(Sy,"New document in limbo: "+n),e.Tu.add(r),by(e))}function by(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new Rt(pe.fromString(t)),r=e.Vu.next();e.Eu.set(r,new z3(n)),e.Iu=e.Iu.insert(n,r),Db(e.remoteStore,new Ds(or(eb(n.path)),r,"TargetPurposeLimboResolution",Wf.le))}}async function yc(e,t,n){const r=Vt(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,m)=>{c.push(r.fu(m,t,n).then(g=>{var y;if((g||n)&&r.isPrimaryClient){const v=g?!g.fromCache:(y=n?.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=my.Rs(m.targetId,g);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(m,g){const y=Vt(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>mt.forEach(g,E=>mt.forEach(E.ds,S=>y.persistence.referenceDelegate.addReference(v,E.targetId,S)).next(()=>mt.forEach(E.As,S=>y.persistence.referenceDelegate.removeReference(v,E.targetId,S)))))}catch(v){if(!vl(v))throw v;vt(gy,"Failed to update sequence numbers: "+v)}for(const v of g){const E=v.targetId;if(!v.fromCache){const S=y.xs.get(E),O=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(O);y.xs=y.xs.insert(E,P)}}}(r.localStore,l))}async function Z3(e,t){const n=Vt(e);if(!n.currentUser.isEqual(t)){vt(Sy,"User change. New user:",t.toKey());const r=await Ib(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(m=>{m.reject(new Et(dt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await yc(n,r.ks)}}function W3(e,t){const n=Vt(e),r=n.Eu.get(t);if(r&&r.cu)return Yt().add(r.key);{let a=Yt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function jb(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=W3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Y3.bind(null,t),t.lu.Y_=V3.bind(null,t.eventManager),t.lu.gu=k3.bind(null,t.eventManager),t}function J3(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=K3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=X3.bind(null,t),t}class Pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=od(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return t3(this.persistence,new Z4,t.initialUser,this.serializer)}Su(t){return new Rb(dy.fi,this.serializer)}bu(t){return new o3}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pf.provider={build:()=>new Pf};class tk extends Pf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ne(this.persistence.referenceDelegate instanceof Vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new P4(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new Rb(r=>Vf.fi(r,n),this.serializer)}}class Np{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ow(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Z3.bind(null,this.syncEngine),await x3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new D3}()}createDatastore(t){const n=od(t.databaseInfo.databaseId),r=function(l){return new f3(l)}(t.databaseInfo);return function(l,c,d,m){return new p3(l,c,d,m)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new _3(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>ow(this.syncEngine,n,0),function(){return ew.C()?new ew:new l3}())}createSyncEngine(t,n){return function(a,l,c,d,m,g,y){const v=new B3(a,l,c,d,m,g);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=Vt(a);vt(Ua,"RemoteStore shutting down."),l.da.add(5),await pc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Np.provider={build:()=>new Np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):$r("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class nk{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=En.UNAUTHENTICATED,this.clientId=U1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{vt(Gs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(vt(Gs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ty(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Fg(e,t){e.asyncQueue.verifyOperationInProgress(),vt(Gs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await Ib(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ik(e);vt(Gs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>iw(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>iw(t.remoteStore,a)),e._onlineComponents=t}async function ik(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(Gs,"Using user provided OfflineComponentProvider");try{await Fg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===dt.FAILED_PRECONDITION||a.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;ll("Error using user provided cache. Falling back to memory cache: "+n),await Fg(e,new Pf)}}else vt(Gs,"Using default OfflineComponentProvider"),await Fg(e,new tk(void 0));return e._offlineComponents}async function Gb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(Gs,"Using user provided OnlineComponentProvider"),await uw(e,e._uninitializedComponentsProvider._online)):(vt(Gs,"Using default OnlineComponentProvider"),await uw(e,new Np))),e._onlineComponents}function rk(e){return Gb(e).then(t=>t.syncEngine)}async function sk(e){const t=await Gb(e),n=t.eventManager;return n.onListen=H3.bind(null,t.syncEngine),n.onUnlisten=j3.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=q3.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=G3.bind(null,t.syncEngine),n}function ak(e,t,n={}){const r=new Ls;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const y=new ek({next:E=>{y.xu(),c.enqueueAndForget(()=>O3(l,v)),E.fromCache&&m.source==="server"?g.reject(new Et(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(E)},error:E=>g.reject(E)}),v=new P3(d,y,{includeMetadataChanges:!0,Qa:!0});return M3(l,v)}(await sk(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(e,t,n){if(!n)throw new Et(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ok(e,t,n,r){if(t===!0&&r===!0)throw new Et(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hw(e){if(!Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function fw(e){if(Rt.isDocumentKey(e))throw new Et(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dt(12329,{type:typeof e})}function za(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cd(e);throw new Et(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firestore.googleapis.com",dw=!0;class mw{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kb,this.ssl=dw}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:dw;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ab;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<V4)throw new Et(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ok("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$b((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Et(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hd{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mw(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hV;switch(r.type){case"firstParty":return new gV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cw.get(n);r&&(vt("ComponentProvider","Removing Datastore"),cw.delete(n),r.terminate())}(this),Promise.resolve()}}function lk(e,t,n,r={}){var a;e=za(e,hd);const l=gl(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),m=`${t}:${n}`;l&&(T1(`https://${m}`),w1("Firestore",!0)),c.host!==Kb&&c.host!==m&&ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:r});if(!ka(g,d)&&(e._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=En.MOCK_USER;else{y=PM(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Et(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new En(E)}e._authCredentials=new fV(new P1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ja(this.firestore,t,this._query)}}class Jn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Jn(this.firestore,t,this._key)}}class Us extends ja{constructor(t,n,r){super(t,n,eb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Jn(this.firestore,null,new Rt(t))}withConverter(t){return new Us(this.firestore,t,this._path)}}function Ay(e,t,...n){if(e=Ye(e),Yb("collection","path",t),e instanceof hd){const r=pe.fromString(t,...n);return fw(r),new Us(e,null,r)}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return fw(r),new Us(e.firestore,null,r)}}function wl(e,t,...n){if(e=Ye(e),arguments.length===1&&(t=U1.newId()),Yb("doc","path",t),e instanceof hd){const r=pe.fromString(t,...n);return hw(r),new Jn(e,null,new Rt(r))}{if(!(e instanceof Jn||e instanceof Us))throw new Et(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return hw(r),new Jn(e.firestore,e instanceof Us?e.converter:null,new Rt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="AsyncQueue";class pw{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new xb(this,"async_queue_retry"),this.rc=()=>{const r=qg();r&&vt(gw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=qg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!vl(t))throw t;vt(gw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,$r("INTERNAL UNHANDLED ERROR: ",yw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=Ey.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Dt(47125,{cc:yw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function yw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class _c extends hd{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new pw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pw(t),this._firestoreClient=void 0,await t}}}function uk(e,t){const n=typeof e=="object"?e:R1(),r=typeof e=="string"?e:Cf,a=ey(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=VM("firestore");l&&lk(a,...l)}return a}function Ry(e){if(e._terminated)throw new Et(dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ck(e),e._firestoreClient}function ck(e){var t,n,r;const a=e._freezeSettings(),l=function(d,m,g,y){return new NV(d,m,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,$b(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new nk(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const m=d?._online.build();return{_offline:d?._offline.build(m),_online:m}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ml(mn.fromBase64String(t))}catch(n){throw new Et(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ml(mn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=/^__.*__$/;class fk{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms):new mc(t,this.data,n,this.fieldTransforms)}}class Xb{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ys(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Qb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ic:e})}}class Ny{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Ny(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Lf(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(Qb(this.Ic)&&hk.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class dk{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||od(t)}bc(t,n,r,a=!1){return new Ny({Ic:t,methodName:n,wc:r,path:dn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dy(e){const t=e._freezeSettings(),n=od(e._databaseId);return new dk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zb(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);My("Data must be an object, but it was:",c,r);const d=Wb(r,c);let m,g;if(l.merge)m=new Zn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const E=Dp(t,v,n);if(!c.contains(E))throw new Et(dt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);tA(y,E)||y.push(E)}m=new Zn(y),g=c.fieldTransforms.filter(v=>m.covers(v.field))}else m=null,g=c.fieldTransforms;return new fk(new Pn(d),m,g)}class dd extends Iy{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dd}}function mk(e,t,n,r){const a=e.bc(1,t,n);My("Data must be an object, but it was:",a,r);const l=[],c=Pn.empty();$s(r,(m,g)=>{const y=Oy(t,m,n);g=Ye(g);const v=a.mc(y);if(g instanceof dd)l.push(y);else{const E=vc(g,v);E!=null&&(l.push(y),c.set(y,E))}});const d=new Zn(l);return new Xb(c,d,a.fieldTransforms)}function gk(e,t,n,r,a,l){const c=e.bc(1,t,n),d=[Dp(t,r,n)],m=[a];if(l.length%2!=0)throw new Et(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)d.push(Dp(t,l[E])),m.push(l[E+1]);const g=[],y=Pn.empty();for(let E=d.length-1;E>=0;--E)if(!tA(g,d[E])){const S=d[E];let O=m[E];O=Ye(O);const P=c.mc(S);if(O instanceof dd)g.push(S);else{const I=vc(O,P);I!=null&&(g.push(S),y.set(S,I))}}const v=new Zn(g);return new Xb(y,v,c.fieldTransforms)}function pk(e,t,n,r=!1){return vc(n,e.bc(r?4:3,t))}function vc(e,t){if(Jb(e=Ye(e)))return My("Unsupported field value:",t,e),Wb(e,t);if(e instanceof Iy)return function(r,a){if(!Qb(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let m=vc(d,a.fc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JV(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ye.fromDate(r);return{timestampValue:Of(a.serializer,l)}}if(r instanceof ye){const l=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(a.serializer,l)}}if(r instanceof Cy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ml)return{bytesValue:_b(a.serializer,r._byteString)};if(r instanceof Jn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:hy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof xy)return function(c,d){return{mapValue:{fields:{[$1]:{stringValue:Y1},[xf]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.gc("VectorValues must only contain numeric values.");return ly(d.serializer,g)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${cd(r)}`)}(e,t)}function Wb(e,t){const n={};return B1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$s(e,(r,a)=>{const l=vc(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function Jb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof Cy||e instanceof ml||e instanceof Jn||e instanceof Iy||e instanceof xy)}function My(e,t,n){if(!Jb(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=cd(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Dp(e,t,n){if((t=Ye(t))instanceof fd)return t._internalPath;if(typeof t=="string")return Oy(e,t);throw Lf("Field path arguments must be of type string or ",e,!1,void 0,n)}const yk=new RegExp("[~\\*/\\[\\]]");function Oy(e,t,n){if(t.search(yk)>=0)throw Lf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new fd(...t.split("."))._internalPath}catch{throw Lf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Lf(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new Et(dt.INVALID_ARGUMENT,d+e+m)}function tA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _k(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _k extends eA{data(){return super.data()}}function md(e,t){return typeof t=="string"?Oy(e,t):t instanceof fd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class nA extends Vy{}function Ek(e,t,...n){let r=[];t instanceof Vy&&r.push(t),r=r.concat(n),function(l){const c=l.filter(m=>m instanceof ky).length,d=l.filter(m=>m instanceof gd).length;if(c>1||c>0&&d>0)throw new Et(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class gd extends nA{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new gd(t,n,r)}_apply(t){const n=this._parse(t);return iA(t._query,n),new ja(t.firestore,t.converter,Ep(t._query,n))}_parse(t){const n=Dy(t.firestore);return function(l,c,d,m,g,y,v){let E;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){vw(v,y);const O=[];for(const P of v)O.push(_w(m,l,P));E={arrayValue:{values:O}}}else E=_w(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||vw(v,y),E=pk(d,c,v,y==="in"||y==="not-in");return Be.create(g,y,E)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Tk(e,t,n){const r=t,a=md("where",e);return gd._create(a,r,n)}class ky extends Vy{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new ky(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)iA(c,m),c=Ep(c,m)}(t._query,n),new ja(t.firestore,t.converter,Ep(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends nA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Py(t,n)}_apply(t){const n=function(a,l,c){if(a.startAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Et(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ic(l,c)}(t._query,this._field,this._direction);return new ja(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new El(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,n))}}function wk(e,t="asc"){const n=t,r=md("orderBy",e);return Py._create(r,n)}function _w(e,t,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new Et(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nb(t)&&n.indexOf("/")!==-1)throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pe.fromString(n));if(!Rt.isDocumentKey(r))throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OT(e,new Rt(r))}if(n instanceof Jn)return OT(e,n._key);throw new Et(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(n)}.`)}function vw(e,t){if(!Array.isArray(e)||e.length===0)throw new Et(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function iA(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Sk{convertValue(t,n="none"){switch(Fs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(qs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return $s(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[xf].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Oe(c.doubleValue));return new xy(l)}convertGeoPoint(t){return new Cy(Oe(t.latitude),Oe(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=td(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tc(t));default:return null}}convertTimestamp(t){const n=Hs(t);return new ye(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=pe.fromString(t);ne(bb(r),9688,{name:t});const a=new ec(r.get(1),r.get(3)),l=new Rt(r.popFirst(5));return a.isEqual(n)||$r(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bk extends eA{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(md("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hf extends bk{data(t={}){return super.data(t)}}class Ak{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Jh(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new hf(this._firestore,this._userDataWriter,r.key,r,new Jh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new hf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new hf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:Rk(d.type),doc:m,oldIndex:g,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Rk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:e})}}class Ik extends Sk{constructor(t){super(),this.firestore=t}convertBytes(t){return new ml(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Jn(this.firestore,null,n)}}function Ly(e){e=za(e,ja);const t=za(e.firestore,_c),n=Ry(t),r=new Ik(t);return vk(e._query),ak(n,e._query).then(a=>new Ak(t,r,e,a))}function Uy(e,t,n){e=za(e,Jn);const r=za(e.firestore,_c),a=rA(e.converter,t,n);return zy(r,[Zb(Dy(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,Wn.none())])}function Ck(e){return zy(za(e.firestore,_c),[new sd(e._key,Wn.none())])}function zy(e,t){return function(r,a){const l=new Ls;return r.asyncQueue.enqueueAndForget(async()=>$3(await rk(r),a,l)),l.promise}(Ry(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dy(t)}set(t,n,r){this._verifyNotCommitted();const a=jg(t,this._firestore),l=rA(a.converter,n,r),c=Zb(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Wn.none())),this}update(t,n,r,...a){this._verifyNotCommitted();const l=jg(t,this._firestore);let c;return c=typeof(n=Ye(n))=="string"||n instanceof fd?gk(this._dataReader,"WriteBatch.update",l._key,n,r,a):mk(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Wn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=jg(t,this._firestore);return this._mutations=this._mutations.concat(new sd(n._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Et(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jg(e,t){if((e=Ye(e)).firestore!==t)throw new Et(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(e){return Ry(e=za(e,_c)),new xk(e,t=>zy(e,t))}(function(t,n=!0){(function(a){yl=a})(pl),ol(new Pa("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new _c(new dV(r.getProvider("auth-internal")),new pV(c,r.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Et(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(g.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),ks(TT,wT,t),ks(TT,wT,"esm2017")})();function By(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function aA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nk=aA,oA=new fc("auth","Firebase",aA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Jp("@firebase/auth");function Dk(e,...t){Uf.logLevel<=$t.WARN&&Uf.warn(`Auth (${pl}): ${e}`,...t)}function ff(e,...t){Uf.logLevel<=$t.ERROR&&Uf.error(`Auth (${pl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e,...t){throw Hy(e,...t)}function ur(e,...t){return Hy(e,...t)}function lA(e,t,n){const r=Object.assign(Object.assign({},Nk()),{[t]:n});return new fc("auth","Firebase",r).create(t,{appName:e.name})}function qr(e){return lA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return oA.create(e,...t)}function Nt(e,t,...n){if(!e)throw Hy(t,...n)}function zr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ff(t),new Error(t)}function Kr(e,t){e||zr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Mk(){return Ew()==="http:"||Ew()==="https:"}function Ew(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Mk()||qM()||"connection"in navigator)?navigator.onLine:!0}function Vk(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,n){this.shortDelay=t,this.longDelay=n,Kr(n>t,"Short delay should be less than long delay!"),this.isMobile=zM()||FM()}get(){return Ok()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e,t){Kr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Lk=new Ec(3e4,6e4);function Ks(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Xs(e,t,n,r,a={}){return cA(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=dc(Object.assign({key:e.config.apiKey},c)).slice(1),m=await e._getAdditionalHeaders();m["Content-Type"]="application/json",e.languageCode&&(m["X-Firebase-Locale"]=e.languageCode);const g=Object.assign({method:t,headers:m},l);return HM()||(g.referrerPolicy="no-referrer"),e.emulatorConfig&&gl(e.emulatorConfig.host)&&(g.credentials="include"),uA.fetch()(await hA(e,e.config.apiHost,n,d),g)})}async function cA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},kk),t);try{const a=new zk(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw tf(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(e,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw tf(e,"email-already-in-use",c);if(m==="USER_DISABLED")throw tf(e,"user-disabled",c);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw lA(e,y,g);ki(e,y)}}catch(a){if(a instanceof Xr)throw a;ki(e,"network-request-failed",{message:String(a)})}}async function Tc(e,t,n,r,a={}){const l=await Xs(e,t,n,r,a);return"mfaPendingCredential"in l&&ki(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function hA(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?qy(e.config,a):`${e.config.apiScheme}://${a}`;return Pk.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Uk(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ur(this.auth,"network-request-failed")),Lk.get())})}}function tf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=ur(e,t,r);return a.customData._tokenResponse=n,a}function Tw(e){return e!==void 0&&e.enterprise!==void 0}class Bk{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Uk(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Hk(e,t){return Xs(e,"GET","/v2/recaptchaConfig",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(e,t){return Xs(e,"POST","/v1/accounts:delete",t)}async function zf(e,t){return Xs(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Fk(e,t=!1){const n=Ye(e),r=await n.getIdToken(t),a=Fy(r);Nt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Fu(Gg(a.auth_time)),issuedAtTime:Fu(Gg(a.iat)),expirationTime:Fu(Gg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Gg(e){return Number(e)*1e3}function Fy(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return ff("JWT malformed, contained fewer than 3 sections"),null;try{const a=y1(n);return a?JSON.parse(a):(ff("Failed to decode base64 JWT payload"),null)}catch(a){return ff("Caught error parsing JWT payload as JSON",a?.toString()),null}}function ww(e){const t=Fy(e);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Xr&&jk(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function jk({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fu(this.lastLoginAt),this.creationTime=Fu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(e){var t;const n=e.auth,r=await e.getIdToken(),a=await ac(e,zf(n,{idToken:r}));Nt(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?fA(l.providerUserInfo):[],d=Yk(e.providerData,c),m=e.isAnonymous,g=!(e.email&&l.passwordHash)&&!d?.length,y=m?g:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Op(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function $k(e){const t=Ye(e);await Bf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Yk(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function fA(e){return e.map(t=>{var{providerId:n}=t,r=By(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(e,t){const n=await cA(e,{},async()=>{const r=dc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await hA(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return e.emulatorConfig&&gl(e.emulatorConfig.host)&&(m.credentials="include"),uA.fetch()(c,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Xk(e,t){return Xs(e,"POST","/v2/accounts:revokeToken",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ww(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const n=ww(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await Kk(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Jo;return r&&(Nt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Nt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Nt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(e,t){Nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Oi{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=By(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Op(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await ac(this,this.stsTokenManager.getToken(this.auth,t));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Fk(this,t)}reload(){return $k(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Oi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(qr(this.auth));const t=await this.getIdToken();return await ac(this,qk(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,m,g,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(a=n.email)!==null&&a!==void 0?a:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,O=(c=n.photoURL)!==null&&c!==void 0?c:void 0,P=(d=n.tenantId)!==null&&d!==void 0?d:void 0,I=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,z=(g=n.createdAt)!==null&&g!==void 0?g:void 0,H=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:F,emailVerified:q,isAnonymous:K,providerData:it,stsTokenManager:V}=n;Nt(F&&V,t,"internal-error");const A=Jo.fromJSON(this.name,V);Nt(typeof F=="string",t,"internal-error"),Ss(v,t.name),Ss(E,t.name),Nt(typeof q=="boolean",t,"internal-error"),Nt(typeof K=="boolean",t,"internal-error"),Ss(S,t.name),Ss(O,t.name),Ss(P,t.name),Ss(I,t.name),Ss(z,t.name),Ss(H,t.name);const R=new Oi({uid:F,auth:t,email:E,emailVerified:q,displayName:v,isAnonymous:K,photoURL:O,phoneNumber:S,tenantId:P,stsTokenManager:A,createdAt:z,lastLoginAt:H});return it&&Array.isArray(it)&&(R.providerData=it.map(k=>Object.assign({},k))),I&&(R._redirectEventId=I),R}static async _fromIdTokenResponse(t,n,r=!1){const a=new Jo;a.updateFromServerResponse(n);const l=new Oi({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Bf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];Nt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?fA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Jo;d.updateFromIdToken(r);const m=new Oi({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Op(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function Br(e){Kr(e instanceof Function,"Expected a class definition");let t=Sw.get(e);return t?(Kr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Sw.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}dA.type="NONE";const bw=dA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(e,t,n){return`firebase:${e}:${t}:${n}`}class tl{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=df(this.userKey,a.apiKey,l),this.fullPersistenceKey=df("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await zf(this.auth,{idToken:t}).catch(()=>{});return n?Oi._fromGetAccountInfoResponse(this.auth,n,t):null}return Oi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new tl(Br(bw),t,r);const a=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Br(bw);const c=df(r,t.config.apiKey,t.name);let d=null;for(const g of n)try{const y=await g._get(c);if(y){let v;if(typeof y=="string"){const E=await zf(t,{idToken:y}).catch(()=>{});if(!E)break;v=await Oi._fromGetAccountInfoResponse(t,E,y)}else v=Oi._fromJSON(t,y);g!==l&&(d=v),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new tl(l,t,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new tl(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(mA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vA(t))return"Blackberry";if(EA(t))return"Webos";if(gA(t))return"Safari";if((t.includes("chrome/")||pA(t))&&!t.includes("edge/"))return"Chrome";if(_A(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function mA(e=wn()){return/firefox\//i.test(e)}function gA(e=wn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function pA(e=wn()){return/crios\//i.test(e)}function yA(e=wn()){return/iemobile/i.test(e)}function _A(e=wn()){return/android/i.test(e)}function vA(e=wn()){return/blackberry/i.test(e)}function EA(e=wn()){return/webos/i.test(e)}function jy(e=wn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qk(e=wn()){var t;return jy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Zk(){return jM()&&document.documentMode===10}function TA(e=wn()){return jy(e)||_A(e)||EA(e)||vA(e)||/windows phone/i.test(e)||yA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(e,t=[]){let n;switch(e){case"Browser":n=Aw(wn());break;case"Worker":n=`${Aw(wn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${pl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const m=t(l);c(m)}catch(m){d(m)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(e,t={}){return Xs(e,"GET","/v2/passwordPolicy",Ks(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=6;class eP{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:tP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rw(this),this.idTokenSubscription=new Rw(this),this.beforeStateQueue=new Wk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await tl.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await zf(this,{idToken:t}),r=await Oi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(t);(!c||c===d)&&m?.user&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Bf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Vk()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ei(this.app))return Promise.reject(qr(this));const n=t?Ye(t):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ei(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Jk(this),n=new eP(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new fc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Xk(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Br(t)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const m=t.addObserver(n,r,a);return()=>{c=!0,m()}}else{const m=t.addObserver(n);return()=>{c=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=wA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&Dk(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ga(e){return Ye(e)}class Rw{constructor(t){this.auth=t,this.observer=null,this.addObserver=WM(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iP(e){pd=e}function SA(e){return pd.loadJS(e)}function rP(){return pd.recaptchaEnterpriseScript}function sP(){return pd.gapiScript}function aP(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class oP{constructor(){this.enterprise=new lP}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class lP{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const uP="recaptcha-enterprise",bA="NO_RECAPTCHA";class cP{constructor(t){this.type=uP,this.auth=Ga(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Hk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new Bk(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;Tw(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:t}).then(g=>{c(g)}).catch(()=>{c(bA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&Tw(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=rP();m.length!==0&&(m+=d),SA(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Iw(e,t,n,r=!1,a=!1){const l=new cP(e);let c;if(a)c=bA;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Vp(e,t,n,r,a){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Iw(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Iw(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(e,t){const n=ey(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(ka(l,t??{}))return a;ki(a,"already-initialized")}return n.initialize({options:t})}function fP(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Br);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function dP(e,t,n){const r=Ga(e);Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=AA(t),{host:c,port:d}=mP(t),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(ka(g,r.config.emulator)&&ka(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,gl(c)?(T1(`${l}//${c}${m}`),w1("Auth",!0)):gP()}function AA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mP(e){const t=AA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Cw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:Cw(c)}}}function Cw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function gP(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zr("not implemented")}_getIdTokenResponse(t){return zr("not implemented")}_linkToIdToken(t,n){return zr("not implemented")}_getReauthenticationResolver(t){return zr("not implemented")}}async function pP(e,t){return Xs(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(e,t){return Tc(e,"POST","/v1/accounts:signInWithPassword",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(e,t){return Tc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}async function vP(e,t){return Tc(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends Gy{constructor(t,n,r,a=null){super("password",r),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new oc(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new oc(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(t,n,"signInWithPassword",yP);case"emailLink":return _P(t,{email:this._email,oobCode:this._password});default:ki(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(t,r,"signUpPassword",pP);case"emailLink":return vP(t,{idToken:n,email:this._email,oobCode:this._password});default:ki(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(e,t){return Tc(e,"POST","/v1/accounts:signInWithIdp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="http://localhost";class Ba extends Gy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ba(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ki("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=By(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Ba(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return el(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,el(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,el(t,n)}buildRequest(){const t={requestUri:EP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=dc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wP(e){const t=Ou(Vu(e)).link,n=t?Ou(Vu(t)).deep_link_id:null,r=Ou(Vu(e)).deep_link_id;return(r?Ou(Vu(r)).link:null)||r||n||t||e}class $y{constructor(t){var n,r,a,l,c,d;const m=Ou(Vu(t)),g=(n=m.apiKey)!==null&&n!==void 0?n:null,y=(r=m.oobCode)!==null&&r!==void 0?r:null,v=TP((a=m.mode)!==null&&a!==void 0?a:null);Nt(g&&y&&v,"argument-error"),this.apiKey=g,this.operation=v,this.code=y,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=wP(t);try{return new $y(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.providerId=Sl.PROVIDER_ID}static credential(t,n){return oc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=$y.parseLink(n);return Nt(r,"argument-error"),oc._fromEmailAndCode(t,r.code,r.tenantId)}}Sl.PROVIDER_ID="password";Sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends RA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends wc{constructor(){super("facebook.com")}static credential(t){return Ba._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Is.credential(t.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ba._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends wc{constructor(){super("github.com")}static credential(t){return Ba._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xs.credential(t.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends wc{constructor(){super("twitter.com")}static credential(t,n){return Ba._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(e,t){return Tc(e,"POST","/v1/accounts:signUp",Ks(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Oi._fromIdTokenResponse(t,r,a),c=xw(r);return new Ha({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=xw(r);return new Ha({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function xw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends Xr{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new Hf(t,n,r,a)}}function IA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(e,l,t,r):l})}async function bP(e,t,n=!1){const r=await ac(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ha._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(e,t,n=!1){const{auth:r}=e;if(Ei(r.app))return Promise.reject(qr(r));const a="reauthenticate";try{const l=await ac(e,IA(r,a,t,e),n);Nt(l.idToken,r,"internal-error");const c=Fy(l.idToken);Nt(c,r,"internal-error");const{sub:d}=c;return Nt(e.uid===d,r,"user-mismatch"),Ha._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ki(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(e,t,n=!1){if(Ei(e.app))return Promise.reject(qr(e));const r="signIn",a=await IA(e,r,t),l=await Ha._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}async function RP(e,t){return CA(Ga(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(e){const t=Ga(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function IP(e,t,n){if(Ei(e.app))return Promise.reject(qr(e));const r=Ga(e),c=await Vp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SP).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&xA(e),m}),d=await Ha._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function CP(e,t,n){return Ei(e.app)?Promise.reject(qr(e)):RP(Ye(e),Sl.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xA(e),r})}function xP(e,t,n,r){return Ye(e).onIdTokenChanged(t,n,r)}function NP(e,t,n){return Ye(e).beforeAuthStateChanged(t,n)}function NA(e,t,n,r){return Ye(e).onAuthStateChanged(t,n,r)}function DA(e){return Ye(e).signOut()}const qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qf,"1"),this.storage.removeItem(qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=1e3,MP=10;class OA extends MA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Zk()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,MP):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},DP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}OA.type="LOCAL";const OP=OA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA extends MA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}VA.type="SESSION";const kA=VA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new yd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(n.origin,l)),m=await VP(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=Yy("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const E=v;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(E.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function PP(e){cr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function LP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UP(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function zP(){return PA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebaseLocalStorageDb",BP=1,Ff="firebaseLocalStorage",UA="fbase_key";class Sc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _d(e,t){return e.transaction([Ff],t?"readwrite":"readonly").objectStore(Ff)}function HP(){const e=indexedDB.deleteDatabase(LA);return new Sc(e).toPromise()}function kp(){const e=indexedDB.open(LA,BP);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Ff,{keyPath:UA})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Ff)?t(r):(r.close(),await HP(),t(await kp()))})})}async function Nw(e,t,n){const r=_d(e,!0).put({[UA]:t,value:n});return new Sc(r).toPromise()}async function qP(e,t){const n=_d(e,!1).get(t),r=await new Sc(n).toPromise();return r===void 0?null:r.value}function Dw(e,t){const n=_d(e,!0).delete(t);return new Sc(n).toPromise()}const FP=800,jP=3;class zA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>jP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(zP()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await LP(),!this.activeServiceWorker)return;this.sender=new kP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||UP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await kp();return await Nw(t,qf,"1"),await Dw(t,qf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>qP(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dw(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=_d(a,!1).getAll();return new Sc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zA.type="LOCAL";const GP=zA;new Ec(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(e,t){return t?Br(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky extends Gy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return el(t,this._buildIdpRequest())}_linkToIdToken(t,n){return el(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return el(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function YP(e){return CA(e.auth,new Ky(e),e.bypassAuthState)}function KP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),AP(n,new Ky(e),e.bypassAuthState)}async function XP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),bP(n,new Ky(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return YP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return KP;default:ki(this.auth,"internal-error")}}resolve(t){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new Ec(2e3,1e4);class Yo extends BA{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const t=Yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,QP.get())};t()}}Yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="pendingRedirect",mf=new Map;class WP extends BA{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=mf.get(this.auth._key());if(!t){try{const r=await JP(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}mf.set(this.auth._key(),t)}return this.bypassAuthState||mf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JP(e,t){const n=n6(t),r=e6(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function t6(e,t){mf.set(e._key(),t)}function e6(e){return Br(e._redirectPersistence)}function n6(e){return df(ZP,e.config.apiKey,e.name)}async function i6(e,t,n=!1){if(Ei(e.app))return Promise.reject(qr(e));const r=Ga(e),a=$P(r,t),c=await new WP(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=10*60*1e3;class s6{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!a6(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!HA(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ur(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=r6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mw(t))}saveEventToCache(t){this.cachedEventUids.add(Mw(t)),this.lastProcessedEventTime=Date.now()}}function Mw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function HA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function a6(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(e,t={}){return Xs(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u6=/^https?/;async function c6(e){if(e.config.emulator)return;const{authorizedDomains:t}=await o6(e);for(const n of t)try{if(h6(n))return}catch{}ki(e,"unauthorized-domain")}function h6(e){const t=Mp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!u6.test(n))return!1;if(l6.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new Ec(3e4,6e4);function Ow(){const e=cr().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function d6(e){return new Promise((t,n)=>{var r,a,l;function c(){Ow(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ow(),n(ur(e,"network-request-failed"))},timeout:f6.get()})}if(!((a=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=cr().gapi)===null||l===void 0)&&l.load)c();else{const d=aP("iframefcb");return cr()[d]=()=>{gapi.load?c():n(ur(e,"network-request-failed"))},SA(`${sP()}?onload=${d}`).catch(m=>n(m))}}).catch(t=>{throw gf=null,t})}let gf=null;function m6(e){return gf=gf||d6(e),gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=new Ec(5e3,15e3),p6="__/auth/iframe",y6="emulator/auth/iframe",_6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E6(e){const t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?qy(t,y6):`https://${e.config.authDomain}/${p6}`,r={apiKey:t.apiKey,appName:e.name,v:pl},a=v6.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${dc(r).slice(1)}`}async function T6(e){const t=await m6(e),n=cr().gapi;return Nt(n,e,"internal-error"),t.open({where:document.body,url:E6(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_6,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=ur(e,"network-request-failed"),d=cr().setTimeout(()=>{l(c)},g6.get());function m(){cr().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S6=500,b6=600,A6="_blank",R6="http://localhost";class Vw{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I6(e,t,n,r=S6,a=b6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m=Object.assign(Object.assign({},w6),{width:r.toString(),height:a.toString(),top:l,left:c}),g=wn().toLowerCase();n&&(d=pA(g)?A6:n),mA(g)&&(t=t||R6,m.scrollbars="yes");const y=Object.entries(m).reduce((E,[S,O])=>`${E}${S}=${O},`,"");if(Qk(g)&&d!=="_self")return C6(t||"",d),new Vw(null);const v=window.open(t||"",d,y);Nt(v,e,"popup-blocked");try{v.focus()}catch{}return new Vw(v)}function C6(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="__/auth/handler",N6="emulator/auth/handler",D6=encodeURIComponent("fac");async function kw(e,t,n,r,a,l){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:pl,eventId:a};if(t instanceof RA){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",ZM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof wc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await e._getAppCheckToken(),g=m?`#${D6}=${encodeURIComponent(m)}`:"";return`${M6(e)}?${dc(d).slice(1)}${g}`}function M6({config:e}){return e.emulator?qy(e,N6):`https://${e.authDomain}/${x6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class O6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kA,this._completeRedirectFn=i6,this._overrideRedirectResult=t6}async _openPopup(t,n,r,a){var l;Kr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await kw(t,n,r,Mp(),a);return I6(t,c,Yy())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await kw(t,n,r,Mp(),a);return PP(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Kr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await T6(t),r=new s6(t);return n.register("authEvent",a=>(Nt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send($g,{type:$g},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[$g];c!==void 0&&n(!!c),ki(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c6(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return TA()||gA()||jy()}}const V6=O6;var Pw="@firebase/auth",Lw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L6(e){ol(new Pa("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wA(e)},g=new nP(r,a,l,m);return fP(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ol(new Pa("auth-internal",t=>{const n=Ga(t.getProvider("auth").getImmediate());return(r=>new k6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(Pw,Lw,P6(e)),ks(Pw,Lw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=5*60,z6=E1("authIdTokenMaxAge")||U6;let Uw=null;const B6=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>z6)return;const a=n?.token;Uw!==a&&(Uw=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function H6(e=R1()){const t=ey(e,"auth");if(t.isInitialized())return t.getImmediate();const n=hP(e,{popupRedirectResolver:V6,persistence:[GP,OP,kA]}),r=E1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=B6(l.toString());NP(n,c,()=>c(n.currentUser)),xP(n,d=>c(d))}}const a=_1("auth");return a&&dP(n,`http://${a}`),n}function q6(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}iP({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=ur("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",q6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L6("Browser");const F6={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},qA=A1(F6),Pi=uk(qA),Ko=H6(qA),ei={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Nn={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function j6({onAuthed:e}){const[t,n]=$.useState(!1),[r,a]=$.useState(null),[l,c]=$.useState(""),[d,m]=$.useState(""),[g,y]=$.useState(!1),[v,E]=$.useState(!1),[S,O]=$.useState("");$.useEffect(()=>{const H=NA(Ko,F=>{F?(n(!0),e(F),a(F)):(n(!1),a(null))});return()=>H()},[e]);const P=async H=>{H.preventDefault(),E(!0),O("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(Nn.INVALID_EMAIL);if(d.length<6)throw new Error(Nn.WEAK_PASSWORD);const q=await IP(Ko,l,d);e(q.user)}catch(F){console.error("Sign up error:",F);let q="Failed to create account";F.code==="auth/email-already-in-use"?q=Nn.EMAIL_IN_USE:F.code==="auth/invalid-email"?q=Nn.INVALID_EMAIL:F.code==="auth/weak-password"?q=Nn.WEAK_PASSWORD:F.code==="auth/operation-not-allowed"?q="Email/password accounts are not enabled. Please contact support.":F.message&&(q=F.message),O(q)}finally{E(!1)}},I=async H=>{H.preventDefault(),E(!0),O("");try{if(!l||!d)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw new Error(Nn.INVALID_EMAIL);const q=await CP(Ko,l,d);e(q.user)}catch(F){console.error("Sign in error:",F);let q="Failed to sign in";F.code==="auth/user-not-found"?q=Nn.USER_NOT_FOUND:F.code==="auth/wrong-password"?q=Nn.WRONG_PASSWORD:F.code==="auth/invalid-email"?q=Nn.INVALID_EMAIL:F.code==="auth/user-disabled"?q="This account has been disabled. Please contact support.":F.code==="auth/too-many-requests"?q=Nn.TOO_MANY_REQUESTS:F.message&&(q=F.message),O(q)}finally{E(!1)}},z=async()=>{try{await DA(Ko)}catch(H){O(H.message)}};return t?gt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif"},children:gt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9",textAlign:"center"},children:[gt.jsxs("p",{style:{marginBottom:"1rem"},children:["Welcome, ",r?.email,"!"]}),gt.jsx("button",{onClick:z,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Sign Out"})]})}):gt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:gt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[gt.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:g?"Sign Up":"Sign In"}),gt.jsxs("form",{onSubmit:g?P:I,children:[gt.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:H=>c(H.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),gt.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:H=>m(H.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),gt.jsx("button",{type:"submit",disabled:v,style:{width:"100%",padding:"0.75rem",backgroundColor:v?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:v?"not-allowed":"pointer",marginBottom:"1rem"},children:v?"Loading...":g?"Sign Up":"Sign In"}),S&&gt.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:S})]}),gt.jsxs("p",{style:{textAlign:"center",margin:0},children:[g?"Already have an account?":"Don't have an account?",gt.jsx("button",{type:"button",onClick:()=>y(!g),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:g?"Sign In":"Sign Up"})]})]})})}function G6({allBoards:e,currentBoard:t,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,m]=$.useState(!1),g=async()=>{try{m(!0),await r()}catch(v){console.error("Error in sidebar create board:",v)}finally{m(!1)}},y=(v,E)=>{v.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(E)};return gt.jsx(gt.Fragment,{children:gt.jsxs("div",{className:"sidebar",children:[gt.jsxs("div",{className:"sidebar-header",children:[gt.jsx("h2",{children:"Launch Hacks"}),gt.jsx("button",{onClick:g,disabled:c||d,style:{opacity:c||d?.6:1,cursor:c||d?"not-allowed":"pointer"},children:d?"Creating...":"+ New Board"})]}),gt.jsxs("div",{className:"sidebar-content",children:[c&&gt.jsx("div",{className:"loading-indicator",children:"Switching boards..."}),gt.jsxs("div",{style:{padding:"10px",fontSize:"12px",color:"#666"},children:["Boards: ",e?.length||0]}),gt.jsx("ul",{children:e?.map(v=>(console.log("Rendering board:",v),gt.jsxs("li",{onClick:()=>!c&&n(v.id),className:t?.id===v.id?"active":"",children:[gt.jsx("span",{className:"board-name",children:v.name}),gt.jsxs("div",{className:"board-actions",children:[v.isOpen&&gt.jsx("span",{className:"open-indicator",children:""}),e.length>1&&gt.jsx("button",{className:"delete-btn",onClick:E=>y(E,v.id),title:"Delete board",children:""})]})]},v.id)))})]}),gt.jsx("div",{className:"sidebar-footer",children:gt.jsx("button",{onClick:l,children:"Sign Out"})})]})})}function $6({name:e,onSetName:t,user:n,isSaving:r,isConceptMode:a,onToggleMode:l}){const[c,d]=$.useState(!1),[m,g]=$.useState(e||"");$.useEffect(()=>{g(e||"")},[e]);const y=E=>{E.key==="Enter"&&(t(m),d(!1))},v=()=>{d(!0),g(e||"")};return gt.jsx(gt.Fragment,{children:gt.jsxs("div",{className:"name",children:[gt.jsx("div",{className:"app-container",children:gt.jsxs("header",{className:"app-header",children:[gt.jsx("h1",{children:"Tink Flow Editor"}),gt.jsxs("div",{className:"user-info",children:[gt.jsxs("p",{children:["Welcome,"," ",n?.isAnonymous?"Anonymous User":n?.email||"User"]}),r&&gt.jsx("span",{className:"save-indicator",children:" Saving..."}),gt.jsx("button",{className:"mode-toggle-btn",onClick:l,title:`Switch to ${a?"Word":"Concept"} Mode`,children:a?" Word Mode":" Concept Mode"})]})]})}),gt.jsxs("div",{className:"board-title-section",children:[c?gt.jsx("input",{type:"text",value:m,onChange:E=>g(E.target.value),onKeyDown:y,onBlur:()=>{t(m),d(!1)},autoFocus:!0}):gt.jsx("h6",{onClick:v,style:{cursor:"pointer"},children:e||"Untitled Board"}),gt.jsx("div",{className:"keyboard-shortcuts",children:gt.jsx("small",{children:" Tips: Ctrl+N for new board, Ctrl+1-9 to switch boards"})})]})]})})}const Y6=({notification:e,onRemove:t})=>{const n=r=>{switch(r){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}};return gt.jsxs("div",{className:`notification notification-${e.type}`,children:[gt.jsxs("div",{className:"notification-content",children:[gt.jsx("span",{className:"notification-icon",children:n(e.type)}),gt.jsx("span",{className:"notification-message",children:e.message})]}),gt.jsx("button",{className:"notification-close",onClick:()=>t(e.id),children:""})]})},K6=({notifications:e,onRemove:t})=>e.length===0?null:gt.jsx("div",{className:"notifications-container",children:e.map(n=>gt.jsx(Y6,{notification:n,onRemove:t},n.id))}),X6=async()=>{try{await DA(Ko),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},Q6=()=>{const[e,t]=$.useState(null);return $.useEffect(()=>{const a=NA(Ko,l=>{l?(t(l),console.log("User signed in:",l.uid)):(t(null),console.log("No user signed in"))});return()=>a()},[]),{user:e,signOut:async()=>{try{await X6(),t(null)}catch(a){console.error("Error in sign out:",a)}},onAuthed:a=>{t(a)}}},FA=e=>!!(e&&e.uid),nl=[{id:"1",type:"draggableEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"This is a simple sentence with multiple words to demonstrate word mode functionality"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"_Machine learning_ algorithms can _predict outcomes_ with high accuracy"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Static node with _key concepts_ highlighted"},position:{x:250,y:200},draggable:!1}],il=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}],Z6=async e=>{if(!FA({uid:e}))throw new Error(Nn.AUTH_REQUIRED);try{const t=Ay(Pi,ei.BOARDS),n=Ek(t,Tk("userId","==",e),wk("createdAt","desc")),r=await Ly(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:ye.now(),isOpen:!0};return await Uy(wl(Pi,ei.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:ye.now(),isOpen:!0,isFallback:!0}]}throw new Error(Nn.LOAD_FAILED)}},zw=async e=>{if(!e)return console.warn("No board ID provided for fetching nodes"),nl;try{const t=Ay(Pi,ei.BOARDS,e,ei.NODES),n=await Ly(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),nl;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched nodes from board:",r),r}catch(t){return console.error("Fetch nodes error:",t),nl}},Bw=async e=>{if(!e)return console.warn("No board ID provided for fetching edges"),il;try{const t=Ay(Pi,ei.BOARDS,e,ei.EDGES),n=await Ly(t);if(n.empty)return console.log("No edges found for board, using initial edges"),il;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",r),r}catch(t){return console.error("Fetch edges error:",t),il}},W6=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving nodes:",{boardId:e,nodesCount:t?.length});return}try{const n=sA(Pi);t.forEach(r=>{const a=wl(Pi,ei.BOARDS,e,ei.NODES,r.id);n.set(a,{type:r.type,data:r.data,position:r.position,draggable:r.draggable,updatedAt:ye.now()})}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Nn.SAVE_FAILED)}},J6=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving edges:",{boardId:e,edgesCount:t?.length});return}try{const n=sA(Pi);t.forEach(r=>{const a=wl(Pi,ei.BOARDS,e,ei.EDGES,r.id);n.set(a,{source:r.source,target:r.target,sourceHandle:r.sourceHandle,targetHandle:r.targetHandle,updatedAt:ye.now()})}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(Nn.SAVE_FAILED)}},t9=async(e,t,n)=>{if(!FA({uid:e}))throw new Error(Nn.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:ye.now(),isOpen:!1};return console.log("Creating board:",r),await Uy(wl(Pi,ei.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},e9=async e=>{if(!e)throw new Error("Board ID is required for deletion");try{await Ck(wl(Pi,ei.BOARDS,e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):t}},Ho=async(e,t)=>{if(!e||!t)throw new Error("Board ID and updates are required");try{const n={...t,updatedAt:ye.now()};await Uy(wl(Pi,ei.BOARDS,e),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},n9=(e,t={})=>{const[n,r,a]=eM([]),[l,c,d]=nM([]),[m,g]=$.useState(!0),[y,v]=$.useState(!1),[E,S]=$.useState(!1),[O,P]=$.useState([]),[I,z]=$.useState(null),[H,F]=$.useState(null),{showSuccess:q,showError:K,showInfo:it}=t,V=M=>{const Q=M.find(x=>x.isOpen===!0);if(Q)return Q;if(M.length>0){const x={...M[0],isOpen:!0};return Ho(x.id,x).catch(console.error),x}return null};$.useEffect(()=>{(async()=>{if(e)try{g(!0);const Q=await Z6(e.uid);P(Q);const x=Q.some(N=>N.isFallback);x&&K&&K("Database index missing. Please create the required Firestore index. Check console for details.");const j=V(Q);if(!j){console.error("No board found for user"),K&&K("No boards found. Creating a default board..."),r(nl),c(il);return}z(j);const[J,X]=await Promise.all([zw(j.id),Bw(j.id)]);r(J),c(X),it&&!x&&it("Board loaded successfully!")}catch(Q){console.error("Error loading initial data:",Q),K&&K("Failed to load board data. Using default board."),r(nl),c(il)}finally{g(!1)}})()},[e,r,c]);const A=$.useCallback(async(M,Q,x)=>{H&&clearTimeout(H);const j=setTimeout(async()=>{try{S(!0);const J=[];Q&&Q.length>0&&J.push(W6(M,Q)),x&&x.length>0&&J.push(J6(M,x)),J.length>0&&(await Promise.all(J),console.log("Auto-save completed successfully"))}catch(J){console.error("Auto-save failed:",J),K&&K("Failed to save changes automatically")}finally{S(!1),F(null)}},1e3);F(j)},[H,K]);$.useEffect(()=>(!m&&I&&!y&&!I.isFallback&&A(I.id,n,l),()=>{H&&clearTimeout(H)}),[n,l,m,I,y,A,H]);const R=$.useCallback(async M=>{try{if(I?.id===M)return;if(I?.isFallback||O.find(x=>x.id===M)?.isFallback){K&&K("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),I&&!I.isFallback){const x={...I,isOpen:!1};await Ho(I.id,x),P(j=>j.map(J=>J.id===I.id?x:J))}const Q=O.find(x=>x.id===M);if(Q){const x={...Q,isOpen:!0};await Ho(M,x),z(x),P(X=>X.map(N=>N.id===M?x:N));const[j,J]=await Promise.all([zw(M),Bw(M)]);r(j),c(J),q&&q(`Switched to "${x.name}"`)}else console.error("Board not found:",M),K&&K("Board not found")}catch(Q){console.error("Error switching board:",Q),K&&K("Failed to switch board. Please try again.")}finally{v(!1)}},[I,O,r,c,q,K]),k=$.useCallback(async()=>{try{if(!e)return K&&K("You must be logged in to create a board"),null;it&&it("Creating new board..."),console.log("Creating new board for user:",e.uid),console.log("Current boards count:",O.length);const M=await t9(e.uid,null,O);if(M){if(console.log("Board created successfully:",M),I&&!I.isFallback){const x={...I,isOpen:!1};Ho(I.id,x).catch(console.error)}const Q={...M,isOpen:!0};return P(x=>{const j=x.map(J=>J.id===I?.id?{...J,isOpen:!1}:J);return[Q,...j]}),z(Q),Ho(M.id,Q).catch(console.error),r(nl),c(il),q&&q("New board created and opened!"),Q}else return K&&K("Failed to create board. Please try again."),null}catch(M){return console.error("Error creating new board:",M),K&&K(`Failed to create board: ${M.message}`),null}},[e,O,I,q,K,it,r,c]),L=$.useCallback(async M=>{try{if(O.length<=1){K&&K("Cannot delete the last board!");return}if(!O.find(x=>x.id===M)){console.error("Board not found for deletion"),K&&K("Board not found");return}if(it&&it("Deleting board..."),I?.id===M){const x=O.find(j=>j.id!==M);x&&await R(x.id)}await e9(M),P(x=>x.filter(j=>j.id!==M)),q&&q("Board deleted successfully!")}catch(Q){console.error("Error deleting board:",Q),K&&K("Failed to delete board. Please try again.")}},[O,I,R,q,K,it]),U=$.useCallback(async M=>{if(I&&I.name!==M){const Q={...I,name:M};z(Q),P(x=>x.map(j=>j.id===I.id?Q:j));try{await Ho(I.id,Q),console.log("Board name updated successfully")}catch(x){console.error("Error updating board name:",x)}}},[I]),D=$.useCallback(()=>{H&&(clearTimeout(H),F(null)),P([]),z(null),r([]),c([]),g(!0),v(!1),S(!1)},[r,c,H]);return{nodes:n,edges:l,allBoards:O,currentBoard:I,isLoading:m,isSwitchingBoard:y,isSaving:E,onNodesChange:a,onEdgesChange:d,switchToBoard:R,createNewBoard:k,deleteBoard:L,updateBoardName:U,clearBoardState:D}},i9=({allBoards:e,currentBoard:t,createNewBoard:n,switchToBoard:r})=>{$.useEffect(()=>{const a=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&r(e[c].id)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,t,n,r])},r9=()=>{const[e,t]=$.useState([]),n=$.useCallback(g=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...g};return t(E=>[...E,v]),g.autoRemove!==!1&&setTimeout(()=>{r(y)},g.duration||5e3),y},[]),r=$.useCallback(g=>{t(y=>y.filter(v=>v.id!==g))},[]),a=$.useCallback(()=>{t([])},[]),l=$.useCallback((g,y={})=>n({type:"success",message:g,...y}),[n]),c=$.useCallback((g,y={})=>n({type:"error",message:g,duration:7e3,...y}),[n]),d=$.useCallback((g,y={})=>n({type:"info",message:g,...y}),[n]),m=$.useCallback((g,y={})=>n({type:"warning",message:g,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:r,clearAllNotifications:a,showSuccess:l,showError:c,showInfo:d,showWarning:m}},jA=$.createContext(void 0),s9=({children:e})=>{const[t,n]=$.useState("word"),r=$.useCallback(()=>{n(c=>c==="word"?"concept":"word")},[]),a=$.useCallback(c=>{n(c)},[]),l=$.useMemo(()=>({mode:t,toggleMode:r,setMode:a}),[t,r,a]);return gt.jsx(jA.Provider,{value:l,children:e})},Xy=()=>{const e=$.useContext(jA);if(e===void 0)throw new Error("useMode must be used within a ModeProvider");return e};function a9({data:e}){const[t,n]=$.useState(!1),[r,a]=$.useState(e.label||"Static Node"),[l,c]=$.useState(!1),[d,m]=$.useState(!1),{mode:g}=Xy(),y=$.useCallback(I=>{I.stopPropagation(),n(!0)},[]),v=$.useCallback(()=>{n(!1),console.log("Static node text changed to:",r)},[r]),E=$.useCallback(I=>{I.stopPropagation()},[]),S=$.useCallback(I=>{I.stopPropagation(),I.key==="Enter"&&v(),I.key==="Escape"&&(a(e.label||"Static Node"),n(!1))},[v,e.label]),O=$.useCallback(I=>{I.stopPropagation(),m(!d)},[d]),P=$.useMemo(()=>{if(t)return gt.jsx("input",{type:"text",value:r,onChange:I=>a(I.target.value),onBlur:v,onKeyDown:S,onClick:E,className:"node-input nodrag",autoFocus:!0});if(g==="word"){const I=r.split(" ").filter(H=>H.trim()!==""),z=d?I:I.slice(0,3);return gt.jsxs("div",{className:"node-content-word",children:[gt.jsxs("div",{onClick:y,children:[z.map((H,F)=>gt.jsxs("span",{className:"word-token",children:[H,F<z.length-1?" ":""]},F)),I.length>3&&!d&&gt.jsx("span",{children:"..."})]}),I.length>3&&gt.jsx("button",{className:"node-expand-btn",onClick:O,title:d?"Show less":"Show more",children:d?"":"+"})]})}else{const I=r.split("_");return gt.jsx("div",{className:"node-content-concept",onClick:y,children:I.map((z,H)=>H%2===1?gt.jsx("span",{className:"concept-token",children:z},H):gt.jsx("span",{children:z},H))})}},[t,r,g,d,y,v,S,E,O]);return gt.jsxs("div",{className:"static-editable-node nodrag",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[gt.jsx(Va,{type:"target",position:bt.Bottom,id:"bottom"}),l&&gt.jsx("div",{className:"node-tooltip",children:gt.jsxs("div",{className:"tooltip-content",children:[gt.jsx("span",{children:" Static Node"}),gt.jsxs("span",{children:["Mode: ",g==="word"?" Word":" Concept"]}),gt.jsx("span",{children:"Click to edit text"})]})}),P,gt.jsx(Va,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}function o9({data:e}){const[t,n]=$.useState(!1),[r,a]=$.useState(e.label||"Draggable Node"),[l,c]=$.useState(!1),[d,m]=$.useState(!1),{mode:g}=Xy(),y=$.useCallback(I=>{I.stopPropagation(),n(!0)},[]),v=$.useCallback(()=>{n(!1),console.log("Draggable node text changed to:",r)},[r]),E=$.useCallback(I=>{I.stopPropagation()},[]),S=$.useCallback(I=>{I.stopPropagation(),I.key==="Enter"&&v(),I.key==="Escape"&&(a(e.label||"Draggable Node"),n(!1))},[v,e.label]),O=$.useCallback(I=>{I.stopPropagation(),m(!d)},[d]),P=$.useMemo(()=>{if(t)return gt.jsx("input",{type:"text",value:r,onChange:I=>a(I.target.value),onBlur:v,onKeyDown:S,onClick:E,className:"node-input nodrag",autoFocus:!0});if(g==="word"){const I=r.split(" ").filter(H=>H.trim()!==""),z=d?I:I.slice(0,3);return gt.jsxs("div",{className:"node-content-word",children:[gt.jsxs("div",{onClick:y,children:[z.map((H,F)=>gt.jsxs("span",{className:"word-token",children:[H,F<z.length-1?" ":""]},F)),I.length>3&&!d&&gt.jsx("span",{children:"..."})]}),I.length>3&&gt.jsx("button",{className:"node-expand-btn",onClick:O,title:d?"Show less":"Show more",children:d?"":"+"})]})}else{const I=r.split("_");return gt.jsx("div",{className:"node-content-concept",onClick:y,children:I.map((z,H)=>H%2===1?gt.jsx("span",{className:"concept-token",children:z},H):gt.jsx("span",{children:z},H))})}},[t,r,g,d,y,v,S,E,O]);return gt.jsxs("div",{className:"draggable-editable-node",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[l&&gt.jsx("div",{className:"node-tooltip",children:gt.jsxs("div",{className:"tooltip-content",children:[gt.jsx("span",{children:" Draggable Node"}),gt.jsxs("span",{children:["Mode: ",g==="word"?" Word":" Concept"]}),gt.jsx("span",{children:"Drag me around!"}),gt.jsx("span",{children:"Click to edit text"})]})}),gt.jsx("div",{className:"node-content",children:P}),gt.jsx(Va,{type:"source",position:bt.Bottom,id:"bottom-source"})]})}const l9={staticEditable:a9,draggableEditable:o9};function u9(){const{user:e,onAuthed:t}=Q6(),{mode:n,toggleMode:r}=Xy(),{notifications:a,removeNotification:l,showSuccess:c,showError:d,showInfo:m}=r9(),{nodes:g,edges:y,allBoards:v,currentBoard:E,isSwitchingBoard:S,isSaving:O,onNodesChange:P,onEdgesChange:I,switchToBoard:z,createNewBoard:H,deleteBoard:F,updateBoardName:q}=n9(e,{showSuccess:c,showError:d,showInfo:m});return i9({allBoards:v,currentBoard:E,createNewBoard:H,switchToBoard:z}),e?gt.jsxs(gt.Fragment,{children:[gt.jsx(G6,{allBoards:v,currentBoard:E,onSwitchBoard:z,onCreateBoard:()=>(H(),Promise.resolve()),onDeleteBoard:F,onSignOut:()=>{},isLoading:S}),gt.jsx($6,{name:E?.name||"Loading...",onSetName:q,user:e,isSaving:O,isConceptMode:n==="concept",onToggleMode:r}),gt.jsx(K6,{notifications:a,onRemove:l}),gt.jsx("div",{style:{width:"100vw",height:"100vh"},children:gt.jsxs(u1,{nodes:g,edges:y,onNodesChange:P,onEdgesChange:I,onConnect:()=>{},nodeTypes:l9,connectionMode:zs.Loose,fitView:!0,children:[gt.jsx(vM,{}),gt.jsx(fM,{}),gt.jsx(AM,{variant:wi.Cross,gap:12,size:1})]})})]}):gt.jsx(j6,{onAuthed:t})}function c9(){return gt.jsx(s9,{children:gt.jsx(u9,{})})}const GA=document.getElementById("root");if(!GA)throw new Error("Failed to find the root element");bI.createRoot(GA).render(gt.jsx($.StrictMode,{children:gt.jsx(c9,{})}));
