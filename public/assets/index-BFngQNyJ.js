function sD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Vv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A0={exports:{}},Ic={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function aD(){if(ZE)return Ic;ZE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:o}}return Ic.Fragment=e,Ic.jsx=n,Ic.jsxs=n,Ic}var JE;function oD(){return JE||(JE=1,A0.exports=aD()),A0.exports}var L=oD(),x0={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function lD(){if(eT)return Ue;eT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function w(U){return U===null||typeof U!="object"?null:(U=_&&U[_]||U["@@iterator"],typeof U=="function"?U:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,V={};function z(U,Q,ne){this.props=U,this.context=Q,this.refs=V,this.updater=ne||R}z.prototype.isReactComponent={},z.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},z.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function j(){}j.prototype=z.prototype;function F(U,Q,ne){this.props=U,this.context=Q,this.refs=V,this.updater=ne||R}var X=F.prototype=new j;X.constructor=F,O(X,z.prototype),X.isPureReactComponent=!0;var y=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},b=Object.prototype.hasOwnProperty;function T(U,Q,ne,J,te,oe){return ne=oe.ref,{$$typeof:t,type:U,key:Q,ref:ne!==void 0?ne:null,props:oe}}function A(U,Q){return T(U.type,Q,void 0,void 0,void 0,U.props)}function x(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function k(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ne){return Q[ne]})}var I=/\/+/g;function B(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?k(""+U.key):Q.toString(36)}function P(){}function M(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(Q){U.status==="pending"&&(U.status="fulfilled",U.value=Q)},function(Q){U.status==="pending"&&(U.status="rejected",U.reason=Q)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function K(U,Q,ne,J,te){var oe=typeof U;(oe==="undefined"||oe==="boolean")&&(U=null);var ce=!1;if(U===null)ce=!0;else switch(oe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(U.$$typeof){case t:case e:ce=!0;break;case m:return ce=U._init,K(ce(U._payload),Q,ne,J,te)}}if(ce)return te=te(U),ce=J===""?"."+B(U,0):J,y(te)?(ne="",ce!=null&&(ne=ce.replace(I,"$&/")+"/"),K(te,Q,ne,"",function(be){return be})):te!=null&&(x(te)&&(te=A(te,ne+(te.key==null||U&&U.key===te.key?"":(""+te.key).replace(I,"$&/")+"/")+ce)),Q.push(te)),1;ce=0;var fe=J===""?".":J+":";if(y(U))for(var me=0;me<U.length;me++)J=U[me],oe=fe+B(J,me),ce+=K(J,Q,ne,oe,te);else if(me=w(U),typeof me=="function")for(U=me.call(U),me=0;!(J=U.next()).done;)J=J.value,oe=fe+B(J,me++),ce+=K(J,Q,ne,oe,te);else if(oe==="object"){if(typeof U.then=="function")return K(M(U),Q,ne,J,te);throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ce}function C(U,Q,ne){if(U==null)return U;var J=[],te=0;return K(U,J,"","",function(oe){return Q.call(ne,oe,te++)}),J}function q(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(ne){(U._status===0||U._status===-1)&&(U._status=1,U._result=ne)},function(ne){(U._status===0||U._status===-1)&&(U._status=2,U._result=ne)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var Y=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function W(){}return Ue.Children={map:C,forEach:function(U,Q,ne){C(U,function(){Q.apply(this,arguments)},ne)},count:function(U){var Q=0;return C(U,function(){Q++}),Q},toArray:function(U){return C(U,function(Q){return Q})||[]},only:function(U){if(!x(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ue.Component=z,Ue.Fragment=n,Ue.Profiler=s,Ue.PureComponent=F,Ue.StrictMode=r,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(U){return E.H.useMemoCache(U)}},Ue.cache=function(U){return function(){return U.apply(null,arguments)}},Ue.cloneElement=function(U,Q,ne){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var J=O({},U.props),te=U.key,oe=void 0;if(Q!=null)for(ce in Q.ref!==void 0&&(oe=void 0),Q.key!==void 0&&(te=""+Q.key),Q)!b.call(Q,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Q.ref===void 0||(J[ce]=Q[ce]);var ce=arguments.length-2;if(ce===1)J.children=ne;else if(1<ce){for(var fe=Array(ce),me=0;me<ce;me++)fe[me]=arguments[me+2];J.children=fe}return T(U.type,te,void 0,void 0,oe,J)},Ue.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},Ue.createElement=function(U,Q,ne){var J,te={},oe=null;if(Q!=null)for(J in Q.key!==void 0&&(oe=""+Q.key),Q)b.call(Q,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(te[J]=Q[J]);var ce=arguments.length-2;if(ce===1)te.children=ne;else if(1<ce){for(var fe=Array(ce),me=0;me<ce;me++)fe[me]=arguments[me+2];te.children=fe}if(U&&U.defaultProps)for(J in ce=U.defaultProps,ce)te[J]===void 0&&(te[J]=ce[J]);return T(U,oe,void 0,void 0,null,te)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(U){return{$$typeof:c,render:U}},Ue.isValidElement=x,Ue.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:q}},Ue.memo=function(U,Q){return{$$typeof:h,type:U,compare:Q===void 0?null:Q}},Ue.startTransition=function(U){var Q=E.T,ne={};E.T=ne;try{var J=U(),te=E.S;te!==null&&te(ne,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(W,Y)}catch(oe){Y(oe)}finally{E.T=Q}},Ue.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ue.use=function(U){return E.H.use(U)},Ue.useActionState=function(U,Q,ne){return E.H.useActionState(U,Q,ne)},Ue.useCallback=function(U,Q){return E.H.useCallback(U,Q)},Ue.useContext=function(U){return E.H.useContext(U)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(U,Q){return E.H.useDeferredValue(U,Q)},Ue.useEffect=function(U,Q,ne){var J=E.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(U,Q)},Ue.useId=function(){return E.H.useId()},Ue.useImperativeHandle=function(U,Q,ne){return E.H.useImperativeHandle(U,Q,ne)},Ue.useInsertionEffect=function(U,Q){return E.H.useInsertionEffect(U,Q)},Ue.useLayoutEffect=function(U,Q){return E.H.useLayoutEffect(U,Q)},Ue.useMemo=function(U,Q){return E.H.useMemo(U,Q)},Ue.useOptimistic=function(U,Q){return E.H.useOptimistic(U,Q)},Ue.useReducer=function(U,Q,ne){return E.H.useReducer(U,Q,ne)},Ue.useRef=function(U){return E.H.useRef(U)},Ue.useState=function(U){return E.H.useState(U)},Ue.useSyncExternalStore=function(U,Q,ne){return E.H.useSyncExternalStore(U,Q,ne)},Ue.useTransition=function(){return E.H.useTransition()},Ue.version="19.1.0",Ue}var tT;function Vd(){return tT||(tT=1,x0.exports=lD()),x0.exports}var $=Vd();const he=Vv($),uD=sD({__proto__:null,default:he},[$]);var C0={exports:{}},Nc={},R0={exports:{}},k0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function cD(){return nT||(nT=1,function(t){function e(C,q){var Y=C.length;C.push(q);e:for(;0<Y;){var W=Y-1>>>1,U=C[W];if(0<s(U,q))C[W]=q,C[Y]=U,Y=W;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var q=C[0],Y=C.pop();if(Y!==q){C[0]=Y;e:for(var W=0,U=C.length,Q=U>>>1;W<Q;){var ne=2*(W+1)-1,J=C[ne],te=ne+1,oe=C[te];if(0>s(J,Y))te<U&&0>s(oe,J)?(C[W]=oe,C[te]=Y,W=te):(C[W]=J,C[ne]=Y,W=ne);else if(te<U&&0>s(oe,Y))C[W]=oe,C[te]=Y,W=te;else break e}}return q}function s(C,q){var Y=C.sortIndex-q.sortIndex;return Y!==0?Y:C.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],h=[],m=1,_=null,w=3,R=!1,O=!1,V=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function y(C){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=C)r(h),q.sortIndex=q.expirationTime,e(f,q);else break;q=n(h)}}function E(C){if(V=!1,y(C),!O)if(n(f)!==null)O=!0,b||(b=!0,B());else{var q=n(h);q!==null&&K(E,q.startTime-C)}}var b=!1,T=-1,A=5,x=-1;function k(){return z?!0:!(t.unstable_now()-x<A)}function I(){if(z=!1,b){var C=t.unstable_now();x=C;var q=!0;try{e:{O=!1,V&&(V=!1,F(T),T=-1),R=!0;var Y=w;try{t:{for(y(C),_=n(f);_!==null&&!(_.expirationTime>C&&k());){var W=_.callback;if(typeof W=="function"){_.callback=null,w=_.priorityLevel;var U=W(_.expirationTime<=C);if(C=t.unstable_now(),typeof U=="function"){_.callback=U,y(C),q=!0;break t}_===n(f)&&r(f),y(C)}else r(f);_=n(f)}if(_!==null)q=!0;else{var Q=n(h);Q!==null&&K(E,Q.startTime-C),q=!1}}break e}finally{_=null,w=Y,R=!1}q=void 0}}finally{q?B():b=!1}}}var B;if(typeof X=="function")B=function(){X(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=I,B=function(){M.postMessage(null)}}else B=function(){j(I,0)};function K(C,q){T=j(function(){C(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(C){switch(w){case 1:case 2:case 3:var q=3;break;default:q=w}var Y=w;w=q;try{return C()}finally{w=Y}},t.unstable_requestPaint=function(){z=!0},t.unstable_runWithPriority=function(C,q){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var Y=w;w=C;try{return q()}finally{w=Y}},t.unstable_scheduleCallback=function(C,q,Y){var W=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,C){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Y+U,C={id:m++,callback:q,priorityLevel:C,startTime:Y,expirationTime:U,sortIndex:-1},Y>W?(C.sortIndex=Y,e(h,C),n(f)===null&&C===n(h)&&(V?(F(T),T=-1):V=!0,K(E,Y-W))):(C.sortIndex=U,e(f,C),O||R||(O=!0,b||(b=!0,B()))),C},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(C){var q=w;return function(){var Y=w;w=q;try{return C.apply(this,arguments)}finally{w=Y}}}}(k0)),k0}var rT;function dD(){return rT||(rT=1,R0.exports=cD()),R0.exports}var I0={exports:{}},xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function fD(){if(iT)return xn;iT=1;var t=Vd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:f,containerInfo:h,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,xn.createPortal=function(f,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,m)},xn.flushSync=function(f){var h=l.T,m=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=m,r.d.f()}},xn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},xn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},xn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var m=h.as,_=c(m,h.crossOrigin),w=typeof h.integrity=="string"?h.integrity:void 0,R=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:R}):m==="script"&&r.d.X(f,{crossOrigin:_,integrity:w,fetchPriority:R,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},xn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,_=c(m,h.crossOrigin);r.d.L(f,m,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xn.preloadModule=function(f,h){if(typeof f=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},xn.requestFormReset=function(f){r.d.r(f)},xn.unstable_batchedUpdates=function(f,h){return f(h)},xn.useFormState=function(f,h,m){return l.H.useFormState(f,h,m)},xn.useFormStatus=function(){return l.H.useHostTransitionStatus()},xn.version="19.1.0",xn}var sT;function bx(){if(sT)return I0.exports;sT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),I0.exports=fD(),I0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function hD(){if(aT)return Nc;aT=1;var t=dD(),e=Vd(),n=bx();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function f(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var u=i,d=a;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){u=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return c(g),i;if(v===d)return c(g),a;v=v.sibling}throw Error(r(188))}if(u.return!==d.return)u=g,d=v;else{for(var D=!1,H=g.child;H;){if(H===u){D=!0,u=g,d=v;break}if(H===d){D=!0,d=g,u=v;break}H=H.sibling}if(!D){for(H=v.child;H;){if(H===u){D=!0,u=v,d=g;break}if(H===d){D=!0,d=v,u=g;break}H=H.sibling}if(!D)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?i:a}function h(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=h(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,_=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),X=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=I&&i[I]||i["@@iterator"],typeof i=="function"?i:null)}var P=Symbol.for("react.client.reference");function M(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===P?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case z:return"Profiler";case V:return"StrictMode";case E:return"Suspense";case b:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case R:return"Portal";case X:return(i.displayName||"Context")+".Provider";case F:return(i._context.displayName||"Context")+".Consumer";case y:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case T:return a=i.displayName||null,a!==null?a:M(i.type)||"Memo";case A:a=i._payload,i=i._init;try{return M(i(a))}catch{}}return null}var K=Array.isArray,C=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},W=[],U=-1;function Q(i){return{current:i}}function ne(i){0>U||(i.current=W[U],W[U]=null,U--)}function J(i,a){U++,W[U]=i.current,i.current=a}var te=Q(null),oe=Q(null),ce=Q(null),fe=Q(null);function me(i,a){switch(J(ce,a),J(oe,i),J(te,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?xE(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=xE(a),i=CE(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(te),J(te,i)}function be(){ne(te),ne(oe),ne(ce)}function Ce(i){i.memoizedState!==null&&J(fe,i);var a=te.current,u=CE(a,i.type);a!==u&&(J(oe,i),J(te,u))}function Qe(i){oe.current===i&&(ne(te),ne(oe)),fe.current===i&&(ne(fe),Ac._currentValue=Y)}var Ze=Object.prototype.hasOwnProperty,Ve=t.unstable_scheduleCallback,rt=t.unstable_cancelCallback,st=t.unstable_shouldYield,Ht=t.unstable_requestPaint,je=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,kt=t.unstable_ImmediatePriority,Sn=t.unstable_UserBlockingPriority,Qt=t.unstable_NormalPriority,Jn=t.unstable_LowPriority,Pn=t.unstable_IdlePriority,On=t.log,Hr=t.unstable_setDisableYieldValue,ot=null,Ge=null;function $t(i){if(typeof On=="function"&&Hr(i),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(ot,i)}catch{}}var Tt=Math.clz32?Math.clz32:sn,oi=Math.log,Ft=Math.LN2;function sn(i){return i>>>=0,i===0?32:31-(oi(i)/Ft|0)|0}var Vn=256,Ln=4194304;function an(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function pn(i,a,u){var d=i.pendingLanes;if(d===0)return 0;var g=0,v=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var H=d&134217727;return H!==0?(d=H&~v,d!==0?g=an(d):(D&=H,D!==0?g=an(D):u||(u=H&~i,u!==0&&(g=an(u))))):(H=d&~v,H!==0?g=an(H):D!==0?g=an(D):u||(u=d&~i,u!==0&&(g=an(u)))),g===0?0:a!==0&&a!==g&&(a&v)===0&&(v=g&-g,u=a&-a,v>=u||v===32&&(u&4194048)!==0)?a:g}function zn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Bi(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hi(){var i=Vn;return Vn<<=1,(Vn&4194048)===0&&(Vn=256),i}function $r(){var i=Ln;return Ln<<=1,(Ln&62914560)===0&&(Ln=4194304),i}function er(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function wr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function tr(i,a,u,d,g,v){var D=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var H=i.entanglements,Z=i.expirationTimes,ae=i.hiddenUpdates;for(u=D&~u;0<u;){var pe=31-Tt(u),ye=1<<pe;H[pe]=0,Z[pe]=-1;var le=ae[pe];if(le!==null)for(ae[pe]=null,pe=0;pe<le.length;pe++){var ue=le[pe];ue!==null&&(ue.lane&=-536870913)}u&=~ye}d!==0&&br(i,d,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(D&~a))}function br(i,a,u){i.pendingLanes|=a,i.suspendedLanes&=~a;var d=31-Tt(a);i.entangledLanes|=a,i.entanglements[d]=i.entanglements[d]|1073741824|u&4194090}function Da(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var d=31-Tt(u),g=1<<d;g&a|i[d]&a&&(i[d]|=a),u&=~g}}function li(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function As(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ui(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:GE(i.type))}function Uo(i,a){var u=q.p;try{return q.p=i,a()}finally{q.p=u}}var yt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+yt,It="__reactProps$"+yt,Fn="__reactContainer$"+yt,Ma="__reactEvents$"+yt,Nu="__reactListeners$"+yt,ci="__reactHandles$"+yt,Bo="__reactResources$"+yt,$i="__reactMarker$"+yt;function di(i){delete i[Lt],delete i[It],delete i[Ma],delete i[Nu],delete i[ci]}function Er(i){var a=i[Lt];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Fn]||u[Lt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=NE(i);i!==null;){if(u=i[Lt])return u;i=NE(i)}return a}i=u,u=i.parentNode}return null}function Tr(i){if(i=i[Lt]||i[Fn]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Sr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function mn(i){var a=i[Bo];return a||(a=i[Bo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function St(i){i[$i]=!0}var Pa=new Set,xs={};function nr(i,a){Fr(i,a),Fr(i+"Capture",a)}function Fr(i,a){for(xs[i]=a,i=0;i<a.length;i++)Pa.add(a[i])}var Oa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ho={},Fi={};function $o(i){return Ze.call(Fi,i)?!0:Ze.call(Ho,i)?!1:Oa.test(i)?Fi[i]=!0:(Ho[i]=!0,!1)}function fi(i,a,u){if($o(a))if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+u)}}function Ar(i,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+u)}}function Zt(i,a,u,d){if(d===null)i.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(a,u,""+d)}}var hi,Fo;function qr(i){if(hi===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);hi=a&&a[1]||"",Fo=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+i+Fo}var Cs=!1;function pi(i,a){if(!i||Cs)return"";Cs=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(ue){var le=ue}Reflect.construct(i,[],ye)}else{try{ye.call()}catch(ue){le=ue}i.call(ye.prototype)}}else{try{throw Error()}catch(ue){le=ue}(ye=i())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(ue){if(ue&&le&&typeof ue.stack=="string")return[ue.stack,le.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),D=v[0],H=v[1];if(D&&H){var Z=D.split(`
`),ae=H.split(`
`);for(g=d=0;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(d===Z.length||g===ae.length)for(d=Z.length-1,g=ae.length-1;1<=d&&0<=g&&Z[d]!==ae[g];)g--;for(;1<=d&&0<=g;d--,g--)if(Z[d]!==ae[g]){if(d!==1||g!==1)do if(d--,g--,0>g||Z[d]!==ae[g]){var pe=`
`+Z[d].replace(" at new "," at ");return i.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",i.displayName)),pe}while(1<=d&&0<=g);break}}}finally{Cs=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?qr(u):""}function Du(i){switch(i.tag){case 26:case 27:case 5:return qr(i.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 15:return pi(i.type,!1);case 11:return pi(i.type.render,!1);case 1:return pi(i.type,!0);case 31:return qr("Activity");default:return""}}function qo(i){try{var a="";do a+=Du(i),i=i.return;while(i);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function jn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Mu(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function km(i){var a=Mu(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),d=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(D){d=""+D,v.call(this,D)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(D){d=""+D},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Go(i){i._valueTracker||(i._valueTracker=km(i))}function Pu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return i&&(d=Mu(i)?i.checked?"true":"false":i.value),i=d,i!==u?(a.setValue(i),!0):!1}function Va(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Im=/[\n"\\]/g;function qt(i){return i.replace(Im,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function rr(i,a,u,d,g,v,D,H){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),a!=null?D==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+jn(a)):i.value!==""+jn(a)&&(i.value=""+jn(a)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),a!=null?Rs(i,D,jn(a)):u!=null?Rs(i,D,jn(u)):d!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.name=""+jn(H):i.removeAttribute("name")}function La(i,a,u,d,g,v,D,H){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;u=u!=null?""+jn(u):"",a=a!=null?""+jn(a):u,H||a===i.value||(i.value=a),i.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=H?i.checked:!!d,i.defaultChecked=!!d,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D)}function Rs(i,a,u){a==="number"&&Va(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function qi(i,a,u,d){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&d&&(i[u].defaultSelected=!0)}else{for(u=""+jn(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ft(i,a,u){if(a!=null&&(a=""+jn(a),a!==i.value&&(i.value=a),u==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=u!=null?""+jn(u):""}function za(i,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(r(92));if(K(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=jn(a),i.defaultValue=u,d=i.textContent,d===u&&d!==""&&d!==null&&(i.value=d)}function xr(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var ja=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rf(i,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":d?i.setProperty(a,u):typeof u!="number"||u===0||ja.has(a)?a==="float"?i.cssFloat=u:i[a]=(""+u).trim():i[a]=u+"px"}function Ou(i,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&u[g]!==d&&rf(i,g,d)}else for(var v in a)a.hasOwnProperty(v)&&rf(i,v,a[v])}function Vu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(i){return Dm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Gi=null;function Cr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ki=null,Yi=null;function Lu(i){var a=Tr(i);if(a&&(i=a.stateNode)){var u=i[It]||null;e:switch(i=a.stateNode,a.type){case"input":if(rr(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+qt(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==i&&d.form===i.form){var g=d[It]||null;if(!g)throw Error(r(90));rr(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===i.form&&Pu(d)}break e;case"textarea":ft(i,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&qi(i,!!u.multiple,a,!1)}}}var mi=!1;function sf(i,a,u){if(mi)return i(a,u);mi=!0;try{var d=i(a);return d}finally{if(mi=!1,(Ki!==null||Yi!==null)&&(Zf(),Ki&&(a=Ki,i=Yi,Yi=Ki=null,Lu(a),i)))for(a=0;a<i.length;a++)Lu(i[a])}}function Ua(i,a){var u=i.stateNode;if(u===null)return null;var d=u[It]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rr=!1;if(Gr)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Rr=!1}var gi=null,ks=null,Xi=null;function zu(){if(Xi)return Xi;var i,a=ks,u=a.length,d,g="value"in gi?gi.value:gi.textContent,v=g.length;for(i=0;i<u&&a[i]===g[i];i++);var D=u-i;for(d=1;d<=D&&a[u-d]===g[v-d];d++);return Xi=g.slice(i,1<d?1-d:void 0)}function yi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function vi(){return!0}function ju(){return!1}function on(i){function a(u,d,g,v,D){this._reactName=u,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=D,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(u=i[H],this[H]=u?u(v):v[H]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?vi:ju,this.isPropagationStopped=ju,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),a}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yo=on(lt),Ha=m({},lt,{view:0,detail:0}),af=on(Ha),Xo,Wo,_i,$a=m({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_i&&(_i&&i.type==="mousemove"?(Xo=i.screenX-_i.screenX,Wo=i.screenY-_i.screenY):Wo=Xo=0,_i=i),Xo)},movementY:function(i){return"movementY"in i?i.movementY:Wo}}),kr=on($a),of=m({},$a,{dataTransfer:0}),Mm=on(of),Fa=m({},Ha,{relatedTarget:0}),Qo=on(Fa),Uu=m({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),Zo=on(Uu),lf=m({},lt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jo=on(lf),Pm=m({},lt,{data:0}),Bu=on(Pm),qa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=cf[i])?!!a[i]:!1}function Ga(){return Hu}var df=m({},Ha,{key:function(i){if(i.key){var a=qa[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=yi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?uf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(i){return i.type==="keypress"?yi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?yi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),el=on(df),ff=m({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=on(ff),Wi=m({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),hf=on(Wi),pf=m({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),mf=on(pf),gf=m({},$a,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tl=on(gf),Un=m({},lt,{newState:0,oldState:0}),yf=on(Un),vf=[9,13,27,32],wi=Gr&&"CompositionEvent"in window,p=null;Gr&&"documentMode"in document&&(p=document.documentMode);var S=Gr&&"TextEvent"in window&&!p,N=Gr&&(!wi||p&&8<p&&11>=p),G=" ",ie=!1;function de(i,a){switch(i){case"keyup":return vf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function we(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Je=!1;function Jt(i,a){switch(i){case"compositionend":return we(a);case"keypress":return a.which!==32?null:(ie=!0,G);case"textInput":return i=a.data,i===G&&ie?null:i;default:return null}}function et(i,a){if(Je)return i==="compositionend"||!wi&&de(i,a)?(i=zu(),Xi=ks=gi=null,Je=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return N&&a.locale!=="ko"?null:a.data;default:return null}}var ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function en(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ln[i.type]:a==="textarea"}function Qi(i,a,u,d){Ki?Yi?Yi.push(d):Yi=[d]:Ki=d,a=ih(a,"onChange"),0<a.length&&(u=new Yo("onChange","change",null,u,d),i.push({event:u,listeners:a}))}var gn=null,bi=null;function Fu(i){bE(i,0)}function _f(i){var a=Sr(i);if(Pu(a))return i}function Hw(i,a){if(i==="change")return a}var $w=!1;if(Gr){var Om;if(Gr){var Vm="oninput"in document;if(!Vm){var Fw=document.createElement("div");Fw.setAttribute("oninput","return;"),Vm=typeof Fw.oninput=="function"}Om=Vm}else Om=!1;$w=Om&&(!document.documentMode||9<document.documentMode)}function qw(){gn&&(gn.detachEvent("onpropertychange",Gw),bi=gn=null)}function Gw(i){if(i.propertyName==="value"&&_f(bi)){var a=[];Qi(a,bi,i,Cr(i)),sf(Fu,a)}}function OI(i,a,u){i==="focusin"?(qw(),gn=a,bi=u,gn.attachEvent("onpropertychange",Gw)):i==="focusout"&&qw()}function VI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _f(bi)}function LI(i,a){if(i==="click")return _f(a)}function zI(i,a){if(i==="input"||i==="change")return _f(a)}function jI(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ir=typeof Object.is=="function"?Object.is:jI;function qu(i,a){if(ir(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var g=u[d];if(!Ze.call(a,g)||!ir(i[g],a[g]))return!1}return!0}function Kw(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Yw(i,a){var u=Kw(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=a&&d>=a)return{node:u,offset:a-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Kw(u)}}function Xw(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Xw(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Ww(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Va(i.document);a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Va(i.document)}return a}function Lm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var UI=Gr&&"documentMode"in document&&11>=document.documentMode,nl=null,zm=null,Gu=null,jm=!1;function Qw(i,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;jm||nl==null||nl!==Va(d)||(d=nl,"selectionStart"in d&&Lm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Gu&&qu(Gu,d)||(Gu=d,d=ih(zm,"onSelect"),0<d.length&&(a=new Yo("onSelect","select",null,a,u),i.push({event:a,listeners:d}),a.target=nl)))}function Ka(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var rl={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},Um={},Zw={};Gr&&(Zw=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Ya(i){if(Um[i])return Um[i];if(!rl[i])return i;var a=rl[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Zw)return Um[i]=a[u];return i}var Jw=Ya("animationend"),eb=Ya("animationiteration"),tb=Ya("animationstart"),BI=Ya("transitionrun"),HI=Ya("transitionstart"),$I=Ya("transitioncancel"),nb=Ya("transitionend"),rb=new Map,Bm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bm.push("scrollEnd");function Kr(i,a){rb.set(i,a),nr(a,[i])}var ib=new WeakMap;function Ir(i,a){if(typeof i=="object"&&i!==null){var u=ib.get(i);return u!==void 0?u:(a={value:i,source:a,stack:qo(a)},ib.set(i,a),a)}return{value:i,source:a,stack:qo(a)}}var Nr=[],il=0,Hm=0;function wf(){for(var i=il,a=Hm=il=0;a<i;){var u=Nr[a];Nr[a++]=null;var d=Nr[a];Nr[a++]=null;var g=Nr[a];Nr[a++]=null;var v=Nr[a];if(Nr[a++]=null,d!==null&&g!==null){var D=d.pending;D===null?g.next=g:(g.next=D.next,D.next=g),d.pending=g}v!==0&&sb(u,g,v)}}function bf(i,a,u,d){Nr[il++]=i,Nr[il++]=a,Nr[il++]=u,Nr[il++]=d,Hm|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function $m(i,a,u,d){return bf(i,a,u,d),Ef(i)}function sl(i,a){return bf(i,null,null,a),Ef(i)}function sb(i,a,u){i.lanes|=u;var d=i.alternate;d!==null&&(d.lanes|=u);for(var g=!1,v=i.return;v!==null;)v.childLanes|=u,d=v.alternate,d!==null&&(d.childLanes|=u),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&a!==null&&(g=31-Tt(u),i=v.hiddenUpdates,d=i[g],d===null?i[g]=[a]:d.push(a),a.lane=u|536870912),v):null}function Ef(i){if(50<yc)throw yc=0,Xg=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var al={};function FI(i,a,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(i,a,u,d){return new FI(i,a,u,d)}function Fm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zi(i,a){var u=i.alternate;return u===null?(u=sr(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function ab(i,a){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,a=u.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Tf(i,a,u,d,g,v){var D=0;if(d=i,typeof i=="function")Fm(i)&&(D=1);else if(typeof i=="string")D=GN(i,u,te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=sr(31,u,a,g),i.elementType=x,i.lanes=v,i;case O:return Xa(u.children,g,v,a);case V:D=8,g|=24;break;case z:return i=sr(12,u,a,g|2),i.elementType=z,i.lanes=v,i;case E:return i=sr(13,u,a,g),i.elementType=E,i.lanes=v,i;case b:return i=sr(19,u,a,g),i.elementType=b,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:case X:D=10;break e;case F:D=9;break e;case y:D=11;break e;case T:D=14;break e;case A:D=16,d=null;break e}D=29,u=Error(r(130,i===null?"null":typeof i,"")),d=null}return a=sr(D,u,a,g),a.elementType=i,a.type=d,a.lanes=v,a}function Xa(i,a,u,d){return i=sr(7,i,d,a),i.lanes=u,i}function qm(i,a,u){return i=sr(6,i,null,a),i.lanes=u,i}function Gm(i,a,u){return a=sr(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var ol=[],ll=0,Sf=null,Af=0,Dr=[],Mr=0,Wa=null,Ji=1,es="";function Qa(i,a){ol[ll++]=Af,ol[ll++]=Sf,Sf=i,Af=a}function ob(i,a,u){Dr[Mr++]=Ji,Dr[Mr++]=es,Dr[Mr++]=Wa,Wa=i;var d=Ji;i=es;var g=32-Tt(d)-1;d&=~(1<<g),u+=1;var v=32-Tt(a)+g;if(30<v){var D=g-g%5;v=(d&(1<<D)-1).toString(32),d>>=D,g-=D,Ji=1<<32-Tt(a)+g|u<<g|d,es=v+i}else Ji=1<<v|u<<g|d,es=i}function Km(i){i.return!==null&&(Qa(i,1),ob(i,1,0))}function Ym(i){for(;i===Sf;)Sf=ol[--ll],ol[ll]=null,Af=ol[--ll],ol[ll]=null;for(;i===Wa;)Wa=Dr[--Mr],Dr[Mr]=null,es=Dr[--Mr],Dr[Mr]=null,Ji=Dr[--Mr],Dr[Mr]=null}var Bn=null,Nt=null,at=!1,Za=null,Ei=!1,Xm=Error(r(519));function Ja(i){var a=Error(r(418,""));throw Xu(Ir(a,i)),Xm}function lb(i){var a=i.stateNode,u=i.type,d=i.memoizedProps;switch(a[Lt]=i,a[It]=d,u){case"dialog":Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":case"embed":Ye("load",a);break;case"video":case"audio":for(u=0;u<_c.length;u++)Ye(_c[u],a);break;case"source":Ye("error",a);break;case"img":case"image":case"link":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"input":Ye("invalid",a),La(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Go(a);break;case"select":Ye("invalid",a);break;case"textarea":Ye("invalid",a),za(a,d.value,d.defaultValue,d.children),Go(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||AE(a.textContent,u)?(d.popover!=null&&(Ye("beforetoggle",a),Ye("toggle",a)),d.onScroll!=null&&Ye("scroll",a),d.onScrollEnd!=null&&Ye("scrollend",a),d.onClick!=null&&(a.onclick=sh),a=!0):a=!1,a||Ja(i)}function ub(i){for(Bn=i.return;Bn;)switch(Bn.tag){case 5:case 13:Ei=!1;return;case 27:case 3:Ei=!0;return;default:Bn=Bn.return}}function Ku(i){if(i!==Bn)return!1;if(!at)return ub(i),at=!0,!1;var a=i.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||d0(i.type,i.memoizedProps)),u=!u),u&&Nt&&Ja(i),ub(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(a===0){Nt=Xr(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;i=i.nextSibling}Nt=null}}else a===27?(a=Nt,qs(i.type)?(i=m0,m0=null,Nt=i):Nt=a):Nt=Bn?Xr(i.stateNode.nextSibling):null;return!0}function Yu(){Nt=Bn=null,at=!1}function cb(){var i=Za;return i!==null&&(Kn===null?Kn=i:Kn.push.apply(Kn,i),Za=null),i}function Xu(i){Za===null?Za=[i]:Za.push(i)}var Wm=Q(null),eo=null,ts=null;function Is(i,a,u){J(Wm,a._currentValue),a._currentValue=u}function ns(i){i._currentValue=Wm.current,ne(Wm)}function Qm(i,a,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),i===u)break;i=i.return}}function Zm(i,a,u,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var D=g.child;v=v.firstContext;e:for(;v!==null;){var H=v;v=g;for(var Z=0;Z<a.length;Z++)if(H.context===a[Z]){v.lanes|=u,H=v.alternate,H!==null&&(H.lanes|=u),Qm(v.return,u,i),d||(D=null);break e}v=H.next}}else if(g.tag===18){if(D=g.return,D===null)throw Error(r(341));D.lanes|=u,v=D.alternate,v!==null&&(v.lanes|=u),Qm(D,u,i),D=null}else D=g.child;if(D!==null)D.return=g;else for(D=g;D!==null;){if(D===i){D=null;break}if(g=D.sibling,g!==null){g.return=D.return,D=g;break}D=D.return}g=D}}function Wu(i,a,u,d){i=null;for(var g=a,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var D=g.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var H=g.type;ir(g.pendingProps.value,D.value)||(i!==null?i.push(H):i=[H])}}else if(g===fe.current){if(D=g.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Ac):i=[Ac])}g=g.return}i!==null&&Zm(a,i,u,d),a.flags|=262144}function xf(i){for(i=i.firstContext;i!==null;){if(!ir(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function to(i){eo=i,ts=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return db(eo,i)}function Cf(i,a){return eo===null&&to(i),db(i,a)}function db(i,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ts===null){if(i===null)throw Error(r(308));ts=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else ts=ts.next=a;return u}var qI=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(u,d){i.push(d)}};this.abort=function(){a.aborted=!0,i.forEach(function(u){return u()})}},GI=t.unstable_scheduleCallback,KI=t.unstable_NormalPriority,tn={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jm(){return{controller:new qI,data:new Map,refCount:0}}function Qu(i){i.refCount--,i.refCount===0&&GI(KI,function(){i.controller.abort()})}var Zu=null,eg=0,ul=0,cl=null;function YI(i,a){if(Zu===null){var u=Zu=[];eg=0,ul=n0(),cl={status:"pending",value:void 0,then:function(d){u.push(d)}}}return eg++,a.then(fb,fb),a}function fb(){if(--eg===0&&Zu!==null){cl!==null&&(cl.status="fulfilled");var i=Zu;Zu=null,ul=0,cl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function XI(i,a){var u=[],d={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return i.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<u.length;g++)(0,u[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),d}var hb=C.S;C.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&YI(i,a),hb!==null&&hb(i,a)};var no=Q(null);function tg(){var i=no.current;return i!==null?i:vt.pooledCache}function Rf(i,a){a===null?J(no,no.current):J(no,a.pool)}function pb(){var i=tg();return i===null?null:{parent:tn._currentValue,pool:i}}var Ju=Error(r(460)),mb=Error(r(474)),kf=Error(r(542)),ng={then:function(){}};function gb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function If(){}function yb(i,a,u){switch(u=i[u],u===void 0?i.push(a):u!==a&&(a.then(If,If),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,_b(i),i;default:if(typeof a.status=="string")a.then(If,If);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,_b(i),i}throw ec=a,Ju}}var ec=null;function vb(){if(ec===null)throw Error(r(459));var i=ec;return ec=null,i}function _b(i){if(i===Ju||i===kf)throw Error(r(483))}var Ns=!1;function rg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ig(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ds(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ms(i,a,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ct&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=Ef(i),sb(i,null,u),a}return bf(i,d,a,u),Ef(i)}function tc(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=i.pendingLanes,u|=d,a.lanes=u,Da(i,u)}}function sg(i,a){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var D={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?g=v=D:v=v.next=D,u=u.next}while(u!==null);v===null?g=v=a:v=v.next=a}else g=v=a;u={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}var ag=!1;function nc(){if(ag){var i=cl;if(i!==null)throw i}}function rc(i,a,u,d){ag=!1;var g=i.updateQueue;Ns=!1;var v=g.firstBaseUpdate,D=g.lastBaseUpdate,H=g.shared.pending;if(H!==null){g.shared.pending=null;var Z=H,ae=Z.next;Z.next=null,D===null?v=ae:D.next=ae,D=Z;var pe=i.alternate;pe!==null&&(pe=pe.updateQueue,H=pe.lastBaseUpdate,H!==D&&(H===null?pe.firstBaseUpdate=ae:H.next=ae,pe.lastBaseUpdate=Z))}if(v!==null){var ye=g.baseState;D=0,pe=ae=Z=null,H=v;do{var le=H.lane&-536870913,ue=le!==H.lane;if(ue?(tt&le)===le:(d&le)===le){le!==0&&le===ul&&(ag=!0),pe!==null&&(pe=pe.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Pe=i,Ie=H;le=a;var mt=u;switch(Ie.tag){case 1:if(Pe=Ie.payload,typeof Pe=="function"){ye=Pe.call(mt,ye,le);break e}ye=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ie.payload,le=typeof Pe=="function"?Pe.call(mt,ye,le):Pe,le==null)break e;ye=m({},ye,le);break e;case 2:Ns=!0}}le=H.callback,le!==null&&(i.flags|=64,ue&&(i.flags|=8192),ue=g.callbacks,ue===null?g.callbacks=[le]:ue.push(le))}else ue={lane:le,tag:H.tag,payload:H.payload,callback:H.callback,next:null},pe===null?(ae=pe=ue,Z=ye):pe=pe.next=ue,D|=le;if(H=H.next,H===null){if(H=g.shared.pending,H===null)break;ue=H,H=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);pe===null&&(Z=ye),g.baseState=Z,g.firstBaseUpdate=ae,g.lastBaseUpdate=pe,v===null&&(g.shared.lanes=0),Bs|=D,i.lanes=D,i.memoizedState=ye}}function wb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function bb(i,a){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)wb(u[i],a)}var dl=Q(null),Nf=Q(0);function Eb(i,a){i=us,J(Nf,i),J(dl,a),us=i|a.baseLanes}function og(){J(Nf,us),J(dl,dl.current)}function lg(){us=Nf.current,ne(dl),ne(Nf)}var Ps=0,He=null,ht=null,Gt=null,Df=!1,fl=!1,ro=!1,Mf=0,ic=0,hl=null,WI=0;function zt(){throw Error(r(321))}function ug(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!ir(i[u],a[u]))return!1;return!0}function cg(i,a,u,d,g,v){return Ps=v,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,C.H=i===null||i.memoizedState===null?s1:a1,ro=!1,v=u(d,g),ro=!1,fl&&(v=Sb(a,u,d,g)),Tb(i),v}function Tb(i){C.H=jf;var a=ht!==null&&ht.next!==null;if(Ps=0,Gt=ht=He=null,Df=!1,ic=0,hl=null,a)throw Error(r(300));i===null||un||(i=i.dependencies,i!==null&&xf(i)&&(un=!0))}function Sb(i,a,u,d){He=i;var g=0;do{if(fl&&(hl=null),ic=0,fl=!1,25<=g)throw Error(r(301));if(g+=1,Gt=ht=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}C.H=rN,v=a(u,d)}while(fl);return v}function QI(){var i=C.H,a=i.useState()[0];return a=typeof a.then=="function"?sc(a):a,i=i.useState()[0],(ht!==null?ht.memoizedState:null)!==i&&(He.flags|=1024),a}function dg(){var i=Mf!==0;return Mf=0,i}function fg(i,a,u){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u}function hg(i){if(Df){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Df=!1}Ps=0,Gt=ht=He=null,fl=!1,ic=Mf=0,hl=null}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?He.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Kt(){if(ht===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var a=Gt===null?He.memoizedState:Gt.next;if(a!==null)Gt=a,ht=i;else{if(i===null)throw He.alternate===null?Error(r(467)):Error(r(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Gt===null?He.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function pg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sc(i){var a=ic;return ic+=1,hl===null&&(hl=[]),i=yb(hl,i,a),a=He,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,C.H=a===null||a.memoizedState===null?s1:a1),i}function Pf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return sc(i);if(i.$$typeof===X)return An(i)}throw Error(r(438,String(i)))}function mg(i){var a=null,u=He.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=pg(),He.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(i),d=0;d<i;d++)u[d]=k;return a.index++,u}function rs(i,a){return typeof a=="function"?a(i):a}function Of(i){var a=Kt();return gg(a,ht,i)}function gg(i,a,u){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var g=i.baseQueue,v=d.pending;if(v!==null){if(g!==null){var D=g.next;g.next=v.next,v.next=D}a.baseQueue=g=v,d.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{a=g.next;var H=D=null,Z=null,ae=a,pe=!1;do{var ye=ae.lane&-536870913;if(ye!==ae.lane?(tt&ye)===ye:(Ps&ye)===ye){var le=ae.revertLane;if(le===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ye===ul&&(pe=!0);else if((Ps&le)===le){ae=ae.next,le===ul&&(pe=!0);continue}else ye={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Z===null?(H=Z=ye,D=v):Z=Z.next=ye,He.lanes|=le,Bs|=le;ye=ae.action,ro&&u(v,ye),v=ae.hasEagerState?ae.eagerState:u(v,ye)}else le={lane:ye,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},Z===null?(H=Z=le,D=v):Z=Z.next=le,He.lanes|=ye,Bs|=ye;ae=ae.next}while(ae!==null&&ae!==a);if(Z===null?D=v:Z.next=H,!ir(v,i.memoizedState)&&(un=!0,pe&&(u=cl,u!==null)))throw u;i.memoizedState=v,i.baseState=D,i.baseQueue=Z,d.lastRenderedState=v}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function yg(i){var a=Kt(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=i;var d=u.dispatch,g=u.pending,v=a.memoizedState;if(g!==null){u.pending=null;var D=g=g.next;do v=i(v,D.action),D=D.next;while(D!==g);ir(v,a.memoizedState)||(un=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,d]}function Ab(i,a,u){var d=He,g=Kt(),v=at;if(v){if(u===void 0)throw Error(r(407));u=u()}else u=a();var D=!ir((ht||g).memoizedState,u);D&&(g.memoizedState=u,un=!0),g=g.queue;var H=Rb.bind(null,d,g,i);if(ac(2048,8,H,[i]),g.getSnapshot!==a||D||Gt!==null&&Gt.memoizedState.tag&1){if(d.flags|=2048,pl(9,Vf(),Cb.bind(null,d,g,u,a),null),vt===null)throw Error(r(349));v||(Ps&124)!==0||xb(d,a,u)}return u}function xb(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=He.updateQueue,a===null?(a=pg(),He.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function Cb(i,a,u,d){a.value=u,a.getSnapshot=d,kb(a)&&Ib(i)}function Rb(i,a,u){return u(function(){kb(a)&&Ib(i)})}function kb(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!ir(i,u)}catch{return!0}}function Ib(i){var a=sl(i,2);a!==null&&cr(a,i,2)}function vg(i){var a=qn();if(typeof i=="function"){var u=i;if(i=u(),ro){$t(!0);try{u()}finally{$t(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:i},a}function Nb(i,a,u,d){return i.baseState=u,gg(i,ht,typeof d=="function"?d:rs)}function ZI(i,a,u,d,g){if(zf(i))throw Error(r(485));if(i=a.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){v.listeners.push(D)}};C.T!==null?u(!0):v.isTransition=!1,d(v),u=a.pending,u===null?(v.next=a.pending=v,Db(a,v)):(v.next=u.next,a.pending=u.next=v)}}function Db(i,a){var u=a.action,d=a.payload,g=i.state;if(a.isTransition){var v=C.T,D={};C.T=D;try{var H=u(g,d),Z=C.S;Z!==null&&Z(D,H),Mb(i,a,H)}catch(ae){_g(i,a,ae)}finally{C.T=v}}else try{v=u(g,d),Mb(i,a,v)}catch(ae){_g(i,a,ae)}}function Mb(i,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){Pb(i,a,d)},function(d){return _g(i,a,d)}):Pb(i,a,u)}function Pb(i,a,u){a.status="fulfilled",a.value=u,Ob(a),i.state=u,a=i.pending,a!==null&&(u=a.next,u===a?i.pending=null:(u=u.next,a.next=u,Db(i,u)))}function _g(i,a,u){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,Ob(a),a=a.next;while(a!==d)}i.action=null}function Ob(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Vb(i,a){return a}function Lb(i,a){if(at){var u=vt.formState;if(u!==null){e:{var d=He;if(at){if(Nt){t:{for(var g=Nt,v=Ei;g.nodeType!==8;){if(!v){g=null;break t}if(g=Xr(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Nt=Xr(g.nextSibling),d=g.data==="F!";break e}}Ja(d)}d=!1}d&&(a=u[0])}}return u=qn(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vb,lastRenderedState:a},u.queue=d,u=n1.bind(null,He,d),d.dispatch=u,d=vg(!1),v=Sg.bind(null,He,!1,d.queue),d=qn(),g={state:a,dispatch:null,action:i,pending:null},d.queue=g,u=ZI.bind(null,He,g,v,u),g.dispatch=u,d.memoizedState=i,[a,u,!1]}function zb(i){var a=Kt();return jb(a,ht,i)}function jb(i,a,u){if(a=gg(i,a,Vb)[0],i=Of(rs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=sc(a)}catch(D){throw D===Ju?kf:D}else d=a;a=Kt();var g=a.queue,v=g.dispatch;return u!==a.memoizedState&&(He.flags|=2048,pl(9,Vf(),JI.bind(null,g,u),null)),[d,v,i]}function JI(i,a){i.action=a}function Ub(i){var a=Kt(),u=ht;if(u!==null)return jb(a,u,i);Kt(),a=a.memoizedState,u=Kt();var d=u.queue.dispatch;return u.memoizedState=i,[a,d,!1]}function pl(i,a,u,d){return i={tag:i,create:u,deps:d,inst:a,next:null},a=He.updateQueue,a===null&&(a=pg(),He.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,a.lastEffect=i),i}function Vf(){return{destroy:void 0,resource:void 0}}function Bb(){return Kt().memoizedState}function Lf(i,a,u,d){var g=qn();d=d===void 0?null:d,He.flags|=i,g.memoizedState=pl(1|a,Vf(),u,d)}function ac(i,a,u,d){var g=Kt();d=d===void 0?null:d;var v=g.memoizedState.inst;ht!==null&&d!==null&&ug(d,ht.memoizedState.deps)?g.memoizedState=pl(a,v,u,d):(He.flags|=i,g.memoizedState=pl(1|a,v,u,d))}function Hb(i,a){Lf(8390656,8,i,a)}function $b(i,a){ac(2048,8,i,a)}function Fb(i,a){return ac(4,2,i,a)}function qb(i,a){return ac(4,4,i,a)}function Gb(i,a){if(typeof a=="function"){i=i();var u=a(i);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Kb(i,a,u){u=u!=null?u.concat([i]):null,ac(4,4,Gb.bind(null,a,i),u)}function wg(){}function Yb(i,a){var u=Kt();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&ug(a,d[1])?d[0]:(u.memoizedState=[i,a],i)}function Xb(i,a){var u=Kt();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&ug(a,d[1]))return d[0];if(d=i(),ro){$t(!0);try{i()}finally{$t(!1)}}return u.memoizedState=[d,a],d}function bg(i,a,u){return u===void 0||(Ps&1073741824)!==0?i.memoizedState=a:(i.memoizedState=u,i=Z1(),He.lanes|=i,Bs|=i,u)}function Wb(i,a,u,d){return ir(u,a)?u:dl.current!==null?(i=bg(i,u,d),ir(i,a)||(un=!0),i):(Ps&42)===0?(un=!0,i.memoizedState=u):(i=Z1(),He.lanes|=i,Bs|=i,a)}function Qb(i,a,u,d,g){var v=q.p;q.p=v!==0&&8>v?v:8;var D=C.T,H={};C.T=H,Sg(i,!1,a,u);try{var Z=g(),ae=C.S;if(ae!==null&&ae(H,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var pe=XI(Z,d);oc(i,a,pe,ur(i))}else oc(i,a,d,ur(i))}catch(ye){oc(i,a,{then:function(){},status:"rejected",reason:ye},ur())}finally{q.p=v,C.T=D}}function eN(){}function Eg(i,a,u,d){if(i.tag!==5)throw Error(r(476));var g=Zb(i).queue;Qb(i,g,a,Y,u===null?eN:function(){return Jb(i),u(d)})}function Zb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:Y},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:u},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Jb(i){var a=Zb(i).next.queue;oc(i,a,{},ur())}function Tg(){return An(Ac)}function e1(){return Kt().memoizedState}function t1(){return Kt().memoizedState}function tN(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var u=ur();i=Ds(u);var d=Ms(a,i,u);d!==null&&(cr(d,a,u),tc(d,a,u)),a={cache:Jm()},i.payload=a;return}a=a.return}}function nN(i,a,u){var d=ur();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},zf(i)?r1(a,u):(u=$m(i,a,u,d),u!==null&&(cr(u,i,d),i1(u,a,d)))}function n1(i,a,u){var d=ur();oc(i,a,u,d)}function oc(i,a,u,d){var g={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(zf(i))r1(a,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var D=a.lastRenderedState,H=v(D,u);if(g.hasEagerState=!0,g.eagerState=H,ir(H,D))return bf(i,a,g,0),vt===null&&wf(),!1}catch{}finally{}if(u=$m(i,a,g,d),u!==null)return cr(u,i,d),i1(u,a,d),!0}return!1}function Sg(i,a,u,d){if(d={lane:2,revertLane:n0(),action:d,hasEagerState:!1,eagerState:null,next:null},zf(i)){if(a)throw Error(r(479))}else a=$m(i,u,d,2),a!==null&&cr(a,i,2)}function zf(i){var a=i.alternate;return i===He||a!==null&&a===He}function r1(i,a){fl=Df=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function i1(i,a,u){if((u&4194048)!==0){var d=a.lanes;d&=i.pendingLanes,u|=d,a.lanes=u,Da(i,u)}}var jf={readContext:An,use:Pf,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},s1={readContext:An,use:Pf,useCallback:function(i,a){return qn().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:Hb,useImperativeHandle:function(i,a,u){u=u!=null?u.concat([i]):null,Lf(4194308,4,Gb.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Lf(4194308,4,i,a)},useInsertionEffect:function(i,a){Lf(4,2,i,a)},useMemo:function(i,a){var u=qn();a=a===void 0?null:a;var d=i();if(ro){$t(!0);try{i()}finally{$t(!1)}}return u.memoizedState=[d,a],d},useReducer:function(i,a,u){var d=qn();if(u!==void 0){var g=u(a);if(ro){$t(!0);try{u(a)}finally{$t(!1)}}}else g=a;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=nN.bind(null,He,i),[d.memoizedState,i]},useRef:function(i){var a=qn();return i={current:i},a.memoizedState=i},useState:function(i){i=vg(i);var a=i.queue,u=n1.bind(null,He,a);return a.dispatch=u,[i.memoizedState,u]},useDebugValue:wg,useDeferredValue:function(i,a){var u=qn();return bg(u,i,a)},useTransition:function(){var i=vg(!1);return i=Qb.bind(null,He,i.queue,!0,!1),qn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,u){var d=He,g=qn();if(at){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),vt===null)throw Error(r(349));(tt&124)!==0||xb(d,a,u)}g.memoizedState=u;var v={value:u,getSnapshot:a};return g.queue=v,Hb(Rb.bind(null,d,v,i),[i]),d.flags|=2048,pl(9,Vf(),Cb.bind(null,d,v,u,a),null),u},useId:function(){var i=qn(),a=vt.identifierPrefix;if(at){var u=es,d=Ji;u=(d&~(1<<32-Tt(d)-1)).toString(32)+u,a=""+a+"R"+u,u=Mf++,0<u&&(a+="H"+u.toString(32)),a+=""}else u=WI++,a=""+a+"r"+u.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:Tg,useFormState:Lb,useActionState:Lb,useOptimistic:function(i){var a=qn();a.memoizedState=a.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Sg.bind(null,He,!0,u),u.dispatch=a,[i,a]},useMemoCache:mg,useCacheRefresh:function(){return qn().memoizedState=tN.bind(null,He)}},a1={readContext:An,use:Pf,useCallback:Yb,useContext:An,useEffect:$b,useImperativeHandle:Kb,useInsertionEffect:Fb,useLayoutEffect:qb,useMemo:Xb,useReducer:Of,useRef:Bb,useState:function(){return Of(rs)},useDebugValue:wg,useDeferredValue:function(i,a){var u=Kt();return Wb(u,ht.memoizedState,i,a)},useTransition:function(){var i=Of(rs)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:sc(i),a]},useSyncExternalStore:Ab,useId:e1,useHostTransitionStatus:Tg,useFormState:zb,useActionState:zb,useOptimistic:function(i,a){var u=Kt();return Nb(u,ht,i,a)},useMemoCache:mg,useCacheRefresh:t1},rN={readContext:An,use:Pf,useCallback:Yb,useContext:An,useEffect:$b,useImperativeHandle:Kb,useInsertionEffect:Fb,useLayoutEffect:qb,useMemo:Xb,useReducer:yg,useRef:Bb,useState:function(){return yg(rs)},useDebugValue:wg,useDeferredValue:function(i,a){var u=Kt();return ht===null?bg(u,i,a):Wb(u,ht.memoizedState,i,a)},useTransition:function(){var i=yg(rs)[0],a=Kt().memoizedState;return[typeof i=="boolean"?i:sc(i),a]},useSyncExternalStore:Ab,useId:e1,useHostTransitionStatus:Tg,useFormState:Ub,useActionState:Ub,useOptimistic:function(i,a){var u=Kt();return ht!==null?Nb(u,ht,i,a):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:mg,useCacheRefresh:t1},ml=null,lc=0;function Uf(i){var a=lc;return lc+=1,ml===null&&(ml=[]),yb(ml,i,a)}function uc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Bf(i,a){throw a.$$typeof===_?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function o1(i){var a=i._init;return a(i._payload)}function l1(i){function a(re,ee){if(i){var se=re.deletions;se===null?(re.deletions=[ee],re.flags|=16):se.push(ee)}}function u(re,ee){if(!i)return null;for(;ee!==null;)a(re,ee),ee=ee.sibling;return null}function d(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function g(re,ee){return re=Zi(re,ee),re.index=0,re.sibling=null,re}function v(re,ee,se){return re.index=se,i?(se=re.alternate,se!==null?(se=se.index,se<ee?(re.flags|=67108866,ee):se):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function D(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function H(re,ee,se,ge){return ee===null||ee.tag!==6?(ee=qm(se,re.mode,ge),ee.return=re,ee):(ee=g(ee,se),ee.return=re,ee)}function Z(re,ee,se,ge){var xe=se.type;return xe===O?pe(re,ee,se.props.children,ge,se.key):ee!==null&&(ee.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===A&&o1(xe)===ee.type)?(ee=g(ee,se.props),uc(ee,se),ee.return=re,ee):(ee=Tf(se.type,se.key,se.props,null,re.mode,ge),uc(ee,se),ee.return=re,ee)}function ae(re,ee,se,ge){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=Gm(se,re.mode,ge),ee.return=re,ee):(ee=g(ee,se.children||[]),ee.return=re,ee)}function pe(re,ee,se,ge,xe){return ee===null||ee.tag!==7?(ee=Xa(se,re.mode,ge,xe),ee.return=re,ee):(ee=g(ee,se),ee.return=re,ee)}function ye(re,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=qm(""+ee,re.mode,se),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return se=Tf(ee.type,ee.key,ee.props,null,re.mode,se),uc(se,ee),se.return=re,se;case R:return ee=Gm(ee,re.mode,se),ee.return=re,ee;case A:var ge=ee._init;return ee=ge(ee._payload),ye(re,ee,se)}if(K(ee)||B(ee))return ee=Xa(ee,re.mode,se,null),ee.return=re,ee;if(typeof ee.then=="function")return ye(re,Uf(ee),se);if(ee.$$typeof===X)return ye(re,Cf(re,ee),se);Bf(re,ee)}return null}function le(re,ee,se,ge){var xe=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return xe!==null?null:H(re,ee,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return se.key===xe?Z(re,ee,se,ge):null;case R:return se.key===xe?ae(re,ee,se,ge):null;case A:return xe=se._init,se=xe(se._payload),le(re,ee,se,ge)}if(K(se)||B(se))return xe!==null?null:pe(re,ee,se,ge,null);if(typeof se.then=="function")return le(re,ee,Uf(se),ge);if(se.$$typeof===X)return le(re,ee,Cf(re,se),ge);Bf(re,se)}return null}function ue(re,ee,se,ge,xe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return re=re.get(se)||null,H(ee,re,""+ge,xe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case w:return re=re.get(ge.key===null?se:ge.key)||null,Z(ee,re,ge,xe);case R:return re=re.get(ge.key===null?se:ge.key)||null,ae(ee,re,ge,xe);case A:var Fe=ge._init;return ge=Fe(ge._payload),ue(re,ee,se,ge,xe)}if(K(ge)||B(ge))return re=re.get(se)||null,pe(ee,re,ge,xe,null);if(typeof ge.then=="function")return ue(re,ee,se,Uf(ge),xe);if(ge.$$typeof===X)return ue(re,ee,se,Cf(ee,ge),xe);Bf(ee,ge)}return null}function Pe(re,ee,se,ge){for(var xe=null,Fe=null,Re=ee,Ne=ee=0,dn=null;Re!==null&&Ne<se.length;Ne++){Re.index>Ne?(dn=Re,Re=null):dn=Re.sibling;var it=le(re,Re,se[Ne],ge);if(it===null){Re===null&&(Re=dn);break}i&&Re&&it.alternate===null&&a(re,Re),ee=v(it,ee,Ne),Fe===null?xe=it:Fe.sibling=it,Fe=it,Re=dn}if(Ne===se.length)return u(re,Re),at&&Qa(re,Ne),xe;if(Re===null){for(;Ne<se.length;Ne++)Re=ye(re,se[Ne],ge),Re!==null&&(ee=v(Re,ee,Ne),Fe===null?xe=Re:Fe.sibling=Re,Fe=Re);return at&&Qa(re,Ne),xe}for(Re=d(Re);Ne<se.length;Ne++)dn=ue(Re,re,Ne,se[Ne],ge),dn!==null&&(i&&dn.alternate!==null&&Re.delete(dn.key===null?Ne:dn.key),ee=v(dn,ee,Ne),Fe===null?xe=dn:Fe.sibling=dn,Fe=dn);return i&&Re.forEach(function(Ws){return a(re,Ws)}),at&&Qa(re,Ne),xe}function Ie(re,ee,se,ge){if(se==null)throw Error(r(151));for(var xe=null,Fe=null,Re=ee,Ne=ee=0,dn=null,it=se.next();Re!==null&&!it.done;Ne++,it=se.next()){Re.index>Ne?(dn=Re,Re=null):dn=Re.sibling;var Ws=le(re,Re,it.value,ge);if(Ws===null){Re===null&&(Re=dn);break}i&&Re&&Ws.alternate===null&&a(re,Re),ee=v(Ws,ee,Ne),Fe===null?xe=Ws:Fe.sibling=Ws,Fe=Ws,Re=dn}if(it.done)return u(re,Re),at&&Qa(re,Ne),xe;if(Re===null){for(;!it.done;Ne++,it=se.next())it=ye(re,it.value,ge),it!==null&&(ee=v(it,ee,Ne),Fe===null?xe=it:Fe.sibling=it,Fe=it);return at&&Qa(re,Ne),xe}for(Re=d(Re);!it.done;Ne++,it=se.next())it=ue(Re,re,Ne,it.value,ge),it!==null&&(i&&it.alternate!==null&&Re.delete(it.key===null?Ne:it.key),ee=v(it,ee,Ne),Fe===null?xe=it:Fe.sibling=it,Fe=it);return i&&Re.forEach(function(iD){return a(re,iD)}),at&&Qa(re,Ne),xe}function mt(re,ee,se,ge){if(typeof se=="object"&&se!==null&&se.type===O&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case w:e:{for(var xe=se.key;ee!==null;){if(ee.key===xe){if(xe=se.type,xe===O){if(ee.tag===7){u(re,ee.sibling),ge=g(ee,se.props.children),ge.return=re,re=ge;break e}}else if(ee.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===A&&o1(xe)===ee.type){u(re,ee.sibling),ge=g(ee,se.props),uc(ge,se),ge.return=re,re=ge;break e}u(re,ee);break}else a(re,ee);ee=ee.sibling}se.type===O?(ge=Xa(se.props.children,re.mode,ge,se.key),ge.return=re,re=ge):(ge=Tf(se.type,se.key,se.props,null,re.mode,ge),uc(ge,se),ge.return=re,re=ge)}return D(re);case R:e:{for(xe=se.key;ee!==null;){if(ee.key===xe)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){u(re,ee.sibling),ge=g(ee,se.children||[]),ge.return=re,re=ge;break e}else{u(re,ee);break}else a(re,ee);ee=ee.sibling}ge=Gm(se,re.mode,ge),ge.return=re,re=ge}return D(re);case A:return xe=se._init,se=xe(se._payload),mt(re,ee,se,ge)}if(K(se))return Pe(re,ee,se,ge);if(B(se)){if(xe=B(se),typeof xe!="function")throw Error(r(150));return se=xe.call(se),Ie(re,ee,se,ge)}if(typeof se.then=="function")return mt(re,ee,Uf(se),ge);if(se.$$typeof===X)return mt(re,ee,Cf(re,se),ge);Bf(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(u(re,ee.sibling),ge=g(ee,se),ge.return=re,re=ge):(u(re,ee),ge=qm(se,re.mode,ge),ge.return=re,re=ge),D(re)):u(re,ee)}return function(re,ee,se,ge){try{lc=0;var xe=mt(re,ee,se,ge);return ml=null,xe}catch(Re){if(Re===Ju||Re===kf)throw Re;var Fe=sr(29,Re,null,re.mode);return Fe.lanes=ge,Fe.return=re,Fe}finally{}}}var gl=l1(!0),u1=l1(!1),Pr=Q(null),Ti=null;function Os(i){var a=i.alternate;J(nn,nn.current&1),J(Pr,i),Ti===null&&(a===null||dl.current!==null||a.memoizedState!==null)&&(Ti=i)}function c1(i){if(i.tag===22){if(J(nn,nn.current),J(Pr,i),Ti===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Ti=i)}}else Vs()}function Vs(){J(nn,nn.current),J(Pr,Pr.current)}function is(i){ne(Pr),Ti===i&&(Ti=null),ne(nn)}var nn=Q(0);function Hf(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||p0(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Ag(i,a,u,d){a=i.memoizedState,u=u(d,a),u=u==null?a:m({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var xg={enqueueSetState:function(i,a,u){i=i._reactInternals;var d=ur(),g=Ds(d);g.payload=a,u!=null&&(g.callback=u),a=Ms(i,g,d),a!==null&&(cr(a,i,d),tc(a,i,d))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var d=ur(),g=Ds(d);g.tag=1,g.payload=a,u!=null&&(g.callback=u),a=Ms(i,g,d),a!==null&&(cr(a,i,d),tc(a,i,d))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=ur(),d=Ds(u);d.tag=2,a!=null&&(d.callback=a),a=Ms(i,d,u),a!==null&&(cr(a,i,u),tc(a,i,u))}};function d1(i,a,u,d,g,v,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,D):a.prototype&&a.prototype.isPureReactComponent?!qu(u,d)||!qu(g,v):!0}function f1(i,a,u,d){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==i&&xg.enqueueReplaceState(a,a.state,null)}function io(i,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(i=i.defaultProps){u===a&&(u=m({},u));for(var g in i)u[g]===void 0&&(u[g]=i[g])}return u}var $f=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function h1(i){$f(i)}function p1(i){console.error(i)}function m1(i){$f(i)}function Ff(i,a){try{var u=i.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function g1(i,a,u){try{var d=i.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Cg(i,a,u){return u=Ds(u),u.tag=3,u.payload={element:null},u.callback=function(){Ff(i,a)},u}function y1(i){return i=Ds(i),i.tag=3,i}function v1(i,a,u,d){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;i.payload=function(){return g(v)},i.callback=function(){g1(a,u,d)}}var D=u.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){g1(a,u,d),typeof g!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var H=d.stack;this.componentDidCatch(d.value,{componentStack:H!==null?H:""})})}function iN(i,a,u,d,g){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&Wu(a,u,g,!0),u=Pr.current,u!==null){switch(u.tag){case 13:return Ti===null?Qg():u.alternate===null&&Dt===0&&(Dt=3),u.flags&=-257,u.flags|=65536,u.lanes=g,d===ng?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),Jg(i,d,g)),!1;case 22:return u.flags|=65536,d===ng?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),Jg(i,d,g)),!1}throw Error(r(435,u.tag))}return Jg(i,d,g),Qg(),!1}if(at)return a=Pr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Xm&&(i=Error(r(422),{cause:d}),Xu(Ir(i,u)))):(d!==Xm&&(a=Error(r(423),{cause:d}),Xu(Ir(a,u))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=Ir(d,u),g=Cg(i.stateNode,d,g),sg(i,g),Dt!==4&&(Dt=2)),!1;var v=Error(r(520),{cause:d});if(v=Ir(v,u),gc===null?gc=[v]:gc.push(v),Dt!==4&&(Dt=2),a===null)return!0;d=Ir(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,i=g&-g,u.lanes|=i,i=Cg(u.stateNode,d,i),sg(u,i),!1;case 1:if(a=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hs===null||!Hs.has(v))))return u.flags|=65536,g&=-g,u.lanes|=g,g=y1(g),v1(g,i,u,d),sg(u,g),!1}u=u.return}while(u!==null);return!1}var _1=Error(r(461)),un=!1;function yn(i,a,u,d){a.child=i===null?u1(a,null,u,d):gl(a,i.child,u,d)}function w1(i,a,u,d,g){u=u.render;var v=a.ref;if("ref"in d){var D={};for(var H in d)H!=="ref"&&(D[H]=d[H])}else D=d;return to(a),d=cg(i,a,u,D,v,g),H=dg(),i!==null&&!un?(fg(i,a,g),ss(i,a,g)):(at&&H&&Km(a),a.flags|=1,yn(i,a,d,g),a.child)}function b1(i,a,u,d,g){if(i===null){var v=u.type;return typeof v=="function"&&!Fm(v)&&v.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=v,E1(i,a,v,d,g)):(i=Tf(u.type,null,d,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!Og(i,g)){var D=v.memoizedProps;if(u=u.compare,u=u!==null?u:qu,u(D,d)&&i.ref===a.ref)return ss(i,a,g)}return a.flags|=1,i=Zi(v,d),i.ref=a.ref,i.return=a,a.child=i}function E1(i,a,u,d,g){if(i!==null){var v=i.memoizedProps;if(qu(v,d)&&i.ref===a.ref)if(un=!1,a.pendingProps=d=v,Og(i,g))(i.flags&131072)!==0&&(un=!0);else return a.lanes=i.lanes,ss(i,a,g)}return Rg(i,a,u,d,g)}function T1(i,a,u){var d=a.pendingProps,g=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=v!==null?v.baseLanes|u:u,i!==null){for(g=a.child=i.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;a.childLanes=v&~d}else a.childLanes=0,a.child=null;return S1(i,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Rf(a,v!==null?v.cachePool:null),v!==null?Eb(a,v):og(),c1(a);else return a.lanes=a.childLanes=536870912,S1(i,a,v!==null?v.baseLanes|u:u,u)}else v!==null?(Rf(a,v.cachePool),Eb(a,v),Vs(),a.memoizedState=null):(i!==null&&Rf(a,null),og(),Vs());return yn(i,a,g,u),a.child}function S1(i,a,u,d){var g=tg();return g=g===null?null:{parent:tn._currentValue,pool:g},a.memoizedState={baseLanes:u,cachePool:g},i!==null&&Rf(a,null),og(),c1(a),i!==null&&Wu(i,a,d,!0),null}function qf(i,a){var u=a.ref;if(u===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(i===null||i.ref!==u)&&(a.flags|=4194816)}}function Rg(i,a,u,d,g){return to(a),u=cg(i,a,u,d,void 0,g),d=dg(),i!==null&&!un?(fg(i,a,g),ss(i,a,g)):(at&&d&&Km(a),a.flags|=1,yn(i,a,u,g),a.child)}function A1(i,a,u,d,g,v){return to(a),a.updateQueue=null,u=Sb(a,d,u,g),Tb(i),d=dg(),i!==null&&!un?(fg(i,a,v),ss(i,a,v)):(at&&d&&Km(a),a.flags|=1,yn(i,a,u,v),a.child)}function x1(i,a,u,d,g){if(to(a),a.stateNode===null){var v=al,D=u.contextType;typeof D=="object"&&D!==null&&(v=An(D)),v=new u(d,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=xg,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=d,v.state=a.memoizedState,v.refs={},rg(a),D=u.contextType,v.context=typeof D=="object"&&D!==null?An(D):al,v.state=a.memoizedState,D=u.getDerivedStateFromProps,typeof D=="function"&&(Ag(a,u,D,d),v.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(D=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),D!==v.state&&xg.enqueueReplaceState(v,v.state,null),rc(a,d,v,g),nc(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(i===null){v=a.stateNode;var H=a.memoizedProps,Z=io(u,H);v.props=Z;var ae=v.context,pe=u.contextType;D=al,typeof pe=="object"&&pe!==null&&(D=An(pe));var ye=u.getDerivedStateFromProps;pe=typeof ye=="function"||typeof v.getSnapshotBeforeUpdate=="function",H=a.pendingProps!==H,pe||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(H||ae!==D)&&f1(a,v,d,D),Ns=!1;var le=a.memoizedState;v.state=le,rc(a,d,v,g),nc(),ae=a.memoizedState,H||le!==ae||Ns?(typeof ye=="function"&&(Ag(a,u,ye,d),ae=a.memoizedState),(Z=Ns||d1(a,u,Z,d,le,ae,D))?(pe||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=ae),v.props=d,v.state=ae,v.context=D,d=Z):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{v=a.stateNode,ig(i,a),D=a.memoizedProps,pe=io(u,D),v.props=pe,ye=a.pendingProps,le=v.context,ae=u.contextType,Z=al,typeof ae=="object"&&ae!==null&&(Z=An(ae)),H=u.getDerivedStateFromProps,(ae=typeof H=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D!==ye||le!==Z)&&f1(a,v,d,Z),Ns=!1,le=a.memoizedState,v.state=le,rc(a,d,v,g),nc();var ue=a.memoizedState;D!==ye||le!==ue||Ns||i!==null&&i.dependencies!==null&&xf(i.dependencies)?(typeof H=="function"&&(Ag(a,u,H,d),ue=a.memoizedState),(pe=Ns||d1(a,u,pe,d,le,ue,Z)||i!==null&&i.dependencies!==null&&xf(i.dependencies))?(ae||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ue,Z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ue,Z)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ue),v.props=d,v.state=ue,v.context=Z,d=pe):(typeof v.componentDidUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&le===i.memoizedState||(a.flags|=1024),d=!1)}return v=d,qf(i,a),d=(a.flags&128)!==0,v||d?(v=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&d?(a.child=gl(a,i.child,null,g),a.child=gl(a,null,u,g)):yn(i,a,u,g),a.memoizedState=v.state,i=a.child):i=ss(i,a,g),i}function C1(i,a,u,d){return Yu(),a.flags|=256,yn(i,a,u,d),a.child}var kg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ig(i){return{baseLanes:i,cachePool:pb()}}function Ng(i,a,u){return i=i!==null?i.childLanes&~u:0,a&&(i|=Or),i}function R1(i,a,u){var d=a.pendingProps,g=!1,v=(a.flags&128)!==0,D;if((D=v)||(D=i!==null&&i.memoizedState===null?!1:(nn.current&2)!==0),D&&(g=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,i===null){if(at){if(g?Os(a):Vs(),at){var H=Nt,Z;if(Z=H){e:{for(Z=H,H=Ei;Z.nodeType!==8;){if(!H){H=null;break e}if(Z=Xr(Z.nextSibling),Z===null){H=null;break e}}H=Z}H!==null?(a.memoizedState={dehydrated:H,treeContext:Wa!==null?{id:Ji,overflow:es}:null,retryLane:536870912,hydrationErrors:null},Z=sr(18,null,null,0),Z.stateNode=H,Z.return=a,a.child=Z,Bn=a,Nt=null,Z=!0):Z=!1}Z||Ja(a)}if(H=a.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return p0(H)?a.lanes=32:a.lanes=536870912,null;is(a)}return H=d.children,d=d.fallback,g?(Vs(),g=a.mode,H=Gf({mode:"hidden",children:H},g),d=Xa(d,g,u,null),H.return=a,d.return=a,H.sibling=d,a.child=H,g=a.child,g.memoizedState=Ig(u),g.childLanes=Ng(i,D,u),a.memoizedState=kg,d):(Os(a),Dg(a,H))}if(Z=i.memoizedState,Z!==null&&(H=Z.dehydrated,H!==null)){if(v)a.flags&256?(Os(a),a.flags&=-257,a=Mg(i,a,u)):a.memoizedState!==null?(Vs(),a.child=i.child,a.flags|=128,a=null):(Vs(),g=d.fallback,H=a.mode,d=Gf({mode:"visible",children:d.children},H),g=Xa(g,H,u,null),g.flags|=2,d.return=a,g.return=a,d.sibling=g,a.child=d,gl(a,i.child,null,u),d=a.child,d.memoizedState=Ig(u),d.childLanes=Ng(i,D,u),a.memoizedState=kg,a=g);else if(Os(a),p0(H)){if(D=H.nextSibling&&H.nextSibling.dataset,D)var ae=D.dgst;D=ae,d=Error(r(419)),d.stack="",d.digest=D,Xu({value:d,source:null,stack:null}),a=Mg(i,a,u)}else if(un||Wu(i,a,u,!1),D=(u&i.childLanes)!==0,un||D){if(D=vt,D!==null&&(d=u&-u,d=(d&42)!==0?1:li(d),d=(d&(D.suspendedLanes|u))!==0?0:d,d!==0&&d!==Z.retryLane))throw Z.retryLane=d,sl(i,d),cr(D,i,d),_1;H.data==="$?"||Qg(),a=Mg(i,a,u)}else H.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=Z.treeContext,Nt=Xr(H.nextSibling),Bn=a,at=!0,Za=null,Ei=!1,i!==null&&(Dr[Mr++]=Ji,Dr[Mr++]=es,Dr[Mr++]=Wa,Ji=i.id,es=i.overflow,Wa=a),a=Dg(a,d.children),a.flags|=4096);return a}return g?(Vs(),g=d.fallback,H=a.mode,Z=i.child,ae=Z.sibling,d=Zi(Z,{mode:"hidden",children:d.children}),d.subtreeFlags=Z.subtreeFlags&65011712,ae!==null?g=Zi(ae,g):(g=Xa(g,H,u,null),g.flags|=2),g.return=a,d.return=a,d.sibling=g,a.child=d,d=g,g=a.child,H=i.child.memoizedState,H===null?H=Ig(u):(Z=H.cachePool,Z!==null?(ae=tn._currentValue,Z=Z.parent!==ae?{parent:ae,pool:ae}:Z):Z=pb(),H={baseLanes:H.baseLanes|u,cachePool:Z}),g.memoizedState=H,g.childLanes=Ng(i,D,u),a.memoizedState=kg,d):(Os(a),u=i.child,i=u.sibling,u=Zi(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,i!==null&&(D=a.deletions,D===null?(a.deletions=[i],a.flags|=16):D.push(i)),a.child=u,a.memoizedState=null,u)}function Dg(i,a){return a=Gf({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function Gf(i,a){return i=sr(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Mg(i,a,u){return gl(a,i.child,null,u),i=Dg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function k1(i,a,u){i.lanes|=a;var d=i.alternate;d!==null&&(d.lanes|=a),Qm(i.return,a,u)}function Pg(i,a,u,d,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=u,v.tailMode=g)}function I1(i,a,u){var d=a.pendingProps,g=d.revealOrder,v=d.tail;if(yn(i,a,d.children,u),d=nn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&k1(i,u,a);else if(i.tag===19)k1(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(J(nn,d),g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&Hf(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Pg(a,!1,g,u,v);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&Hf(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Pg(a,!0,u,null,v);break;case"together":Pg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ss(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Bs|=a.lanes,(u&a.childLanes)===0)if(i!==null){if(Wu(i,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,u=Zi(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Zi(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function Og(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&xf(i)))}function sN(i,a,u){switch(a.tag){case 3:me(a,a.stateNode.containerInfo),Is(a,tn,i.memoizedState.cache),Yu();break;case 27:case 5:Ce(a);break;case 4:me(a,a.stateNode.containerInfo);break;case 10:Is(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Os(a),a.flags|=128,null):(u&a.child.childLanes)!==0?R1(i,a,u):(Os(a),i=ss(i,a,u),i!==null?i.sibling:null);Os(a);break;case 19:var g=(i.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(Wu(i,a,u,!1),d=(u&a.childLanes)!==0),g){if(d)return I1(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),J(nn,nn.current),d)break;return null;case 22:case 23:return a.lanes=0,T1(i,a,u);case 24:Is(a,tn,i.memoizedState.cache)}return ss(i,a,u)}function N1(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps)un=!0;else{if(!Og(i,u)&&(a.flags&128)===0)return un=!1,sN(i,a,u);un=(i.flags&131072)!==0}else un=!1,at&&(a.flags&1048576)!==0&&ob(a,Af,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var d=a.elementType,g=d._init;if(d=g(d._payload),a.type=d,typeof d=="function")Fm(d)?(i=io(d,i),a.tag=1,a=x1(null,a,d,i,u)):(a.tag=0,a=Rg(null,a,d,i,u));else{if(d!=null){if(g=d.$$typeof,g===y){a.tag=11,a=w1(null,a,d,i,u);break e}else if(g===T){a.tag=14,a=b1(null,a,d,i,u);break e}}throw a=M(d)||d,Error(r(306,a,""))}}return a;case 0:return Rg(i,a,a.type,a.pendingProps,u);case 1:return d=a.type,g=io(d,a.pendingProps),x1(i,a,d,g,u);case 3:e:{if(me(a,a.stateNode.containerInfo),i===null)throw Error(r(387));d=a.pendingProps;var v=a.memoizedState;g=v.element,ig(i,a),rc(a,d,null,u);var D=a.memoizedState;if(d=D.cache,Is(a,tn,d),d!==v.cache&&Zm(a,[tn],u,!0),nc(),d=D.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=C1(i,a,d,u);break e}else if(d!==g){g=Ir(Error(r(424)),a),Xu(g),a=C1(i,a,d,u);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Nt=Xr(i.firstChild),Bn=a,at=!0,Za=null,Ei=!0,u=u1(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Yu(),d===g){a=ss(i,a,u);break e}yn(i,a,d,u)}a=a.child}return a;case 26:return qf(i,a),i===null?(u=OE(a.type,null,a.pendingProps,null))?a.memoizedState=u:at||(u=a.type,i=a.pendingProps,d=ah(ce.current).createElement(u),d[Lt]=a,d[It]=i,_n(d,u,i),St(d),a.stateNode=d):a.memoizedState=OE(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ce(a),i===null&&at&&(d=a.stateNode=DE(a.type,a.pendingProps,ce.current),Bn=a,Ei=!0,g=Nt,qs(a.type)?(m0=g,Nt=Xr(d.firstChild)):Nt=g),yn(i,a,a.pendingProps.children,u),qf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&at&&((g=d=Nt)&&(d=MN(d,a.type,a.pendingProps,Ei),d!==null?(a.stateNode=d,Bn=a,Nt=Xr(d.firstChild),Ei=!1,g=!0):g=!1),g||Ja(a)),Ce(a),g=a.type,v=a.pendingProps,D=i!==null?i.memoizedProps:null,d=v.children,d0(g,v)?d=null:D!==null&&d0(g,D)&&(a.flags|=32),a.memoizedState!==null&&(g=cg(i,a,QI,null,null,u),Ac._currentValue=g),qf(i,a),yn(i,a,d,u),a.child;case 6:return i===null&&at&&((i=u=Nt)&&(u=PN(u,a.pendingProps,Ei),u!==null?(a.stateNode=u,Bn=a,Nt=null,i=!0):i=!1),i||Ja(a)),null;case 13:return R1(i,a,u);case 4:return me(a,a.stateNode.containerInfo),d=a.pendingProps,i===null?a.child=gl(a,null,d,u):yn(i,a,d,u),a.child;case 11:return w1(i,a,a.type,a.pendingProps,u);case 7:return yn(i,a,a.pendingProps,u),a.child;case 8:return yn(i,a,a.pendingProps.children,u),a.child;case 12:return yn(i,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Is(a,a.type,d.value),yn(i,a,d.children,u),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,to(a),g=An(g),d=d(g),a.flags|=1,yn(i,a,d,u),a.child;case 14:return b1(i,a,a.type,a.pendingProps,u);case 15:return E1(i,a,a.type,a.pendingProps,u);case 19:return I1(i,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},i===null?(u=Gf(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=Zi(i.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return T1(i,a,u);case 24:return to(a),d=An(tn),i===null?(g=tg(),g===null&&(g=vt,v=Jm(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=u),g=v),a.memoizedState={parent:d,cache:g},rg(a),Is(a,tn,g)):((i.lanes&u)!==0&&(ig(i,a),rc(a,null,null,u),nc()),g=i.memoizedState,v=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Is(a,tn,d)):(d=v.cache,Is(a,tn,d),d!==g.cache&&Zm(a,[tn],u,!0))),yn(i,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function as(i){i.flags|=4}function D1(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!UE(a)){if(a=Pr.current,a!==null&&((tt&4194048)===tt?Ti!==null:(tt&62914560)!==tt&&(tt&536870912)===0||a!==Ti))throw ec=ng,mb;i.flags|=8192}}function Kf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?$r():536870912,i.lanes|=a,wl|=a)}function cc(i,a){if(!at)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function At(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=u,a}function aN(i,a,u){var d=a.pendingProps;switch(Ym(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(a),null;case 1:return At(a),null;case 3:return u=a.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),ns(tn),be(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Ku(a)?as(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,cb())),At(a),null;case 26:return u=a.memoizedState,i===null?(as(a),u!==null?(At(a),D1(a,u)):(At(a),a.flags&=-16777217)):u?u!==i.memoizedState?(as(a),At(a),D1(a,u)):(At(a),a.flags&=-16777217):(i.memoizedProps!==d&&as(a),At(a),a.flags&=-16777217),null;case 27:Qe(a),u=ce.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==d&&as(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return At(a),null}i=te.current,Ku(a)?lb(a):(i=DE(g,d,u),a.stateNode=i,as(a))}return At(a),null;case 5:if(Qe(a),u=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==d&&as(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return At(a),null}if(i=te.current,Ku(a))lb(a);else{switch(g=ah(ce.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?g.createElement(u,{is:d.is}):g.createElement(u)}}i[Lt]=a,i[It]=d;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(_n(i,u,d),u){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&as(a)}}return At(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==d&&as(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(i=ce.current,Ku(a)){if(i=a.stateNode,u=a.memoizedProps,d=null,g=Bn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[Lt]=a,i=!!(i.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||AE(i.nodeValue,u)),i||Ja(a)}else i=ah(i).createTextNode(d),i[Lt]=a,a.stateNode=i}return At(a),null;case 13:if(d=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Ku(a),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=a}else Yu(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;At(a),g=!1}else g=cb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(is(a),a):(is(a),null)}if(is(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,i=i!==null&&i.memoizedState!==null,u){d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)}return u!==i&&u&&(a.child.flags|=8192),Kf(a,a.updateQueue),At(a),null;case 4:return be(),i===null&&a0(a.stateNode.containerInfo),At(a),null;case 10:return ns(a.type),At(a),null;case 19:if(ne(nn),g=a.memoizedState,g===null)return At(a),null;if(d=(a.flags&128)!==0,v=g.rendering,v===null)if(d)cc(g,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=Hf(i),v!==null){for(a.flags|=128,cc(g,!1),i=v.updateQueue,a.updateQueue=i,Kf(a,i),a.subtreeFlags=0,i=u,u=a.child;u!==null;)ab(u,i),u=u.sibling;return J(nn,nn.current&1|2),a.child}i=i.sibling}g.tail!==null&&je()>Wf&&(a.flags|=128,d=!0,cc(g,!1),a.lanes=4194304)}else{if(!d)if(i=Hf(v),i!==null){if(a.flags|=128,d=!0,i=i.updateQueue,a.updateQueue=i,Kf(a,i),cc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!at)return At(a),null}else 2*je()-g.renderingStartTime>Wf&&u!==536870912&&(a.flags|=128,d=!0,cc(g,!1),a.lanes=4194304);g.isBackwards?(v.sibling=a.child,a.child=v):(i=g.last,i!==null?i.sibling=v:a.child=v,g.last=v)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=je(),a.sibling=null,i=nn.current,J(nn,d?i&1|2:i&1),a):(At(a),null);case 22:case 23:return is(a),lg(),d=a.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(At(a),a.subtreeFlags&6&&(a.flags|=8192)):At(a),u=a.updateQueue,u!==null&&Kf(a,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),i!==null&&ne(no),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ns(tn),At(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function oN(i,a){switch(Ym(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ns(tn),be(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Qe(a),null;case 13:if(is(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Yu()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ne(nn),null;case 4:return be(),null;case 10:return ns(a.type),null;case 22:case 23:return is(a),lg(),i!==null&&ne(no),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ns(tn),null;case 25:return null;default:return null}}function M1(i,a){switch(Ym(a),a.tag){case 3:ns(tn),be();break;case 26:case 27:case 5:Qe(a);break;case 4:be();break;case 13:is(a);break;case 19:ne(nn);break;case 10:ns(a.type);break;case 22:case 23:is(a),lg(),i!==null&&ne(no);break;case 24:ns(tn)}}function dc(i,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var g=d.next;u=g;do{if((u.tag&i)===i){d=void 0;var v=u.create,D=u.inst;d=v(),D.destroy=d}u=u.next}while(u!==g)}}catch(H){gt(a,a.return,H)}}function Ls(i,a,u){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&i)===i){var D=d.inst,H=D.destroy;if(H!==void 0){D.destroy=void 0,g=a;var Z=u,ae=H;try{ae()}catch(pe){gt(g,Z,pe)}}}d=d.next}while(d!==v)}}catch(pe){gt(a,a.return,pe)}}function P1(i){var a=i.updateQueue;if(a!==null){var u=i.stateNode;try{bb(a,u)}catch(d){gt(i,i.return,d)}}}function O1(i,a,u){u.props=io(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(d){gt(i,a,d)}}function fc(i,a){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof u=="function"?i.refCleanup=u(d):u.current=d}}catch(g){gt(i,a,g)}}function Si(i,a){var u=i.ref,d=i.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(g){gt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){gt(i,a,g)}else u.current=null}function V1(i){var a=i.type,u=i.memoizedProps,d=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(g){gt(i,i.return,g)}}function Vg(i,a,u){try{var d=i.stateNode;RN(d,i.type,u,a),d[It]=a}catch(g){gt(i,i.return,g)}}function L1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&qs(i.type)||i.tag===4}function Lg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||L1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&qs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zg(i,a,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(i),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=sh));else if(d!==4&&(d===27&&qs(i.type)&&(u=i.stateNode,a=null),i=i.child,i!==null))for(zg(i,a,u),i=i.sibling;i!==null;)zg(i,a,u),i=i.sibling}function Yf(i,a,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(d!==4&&(d===27&&qs(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Yf(i,a,u),i=i.sibling;i!==null;)Yf(i,a,u),i=i.sibling}function z1(i){var a=i.stateNode,u=i.memoizedProps;try{for(var d=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);_n(a,d,u),a[Lt]=i,a[It]=u}catch(v){gt(i,i.return,v)}}var os=!1,jt=!1,jg=!1,j1=typeof WeakSet=="function"?WeakSet:Set,cn=null;function lN(i,a){if(i=i.containerInfo,u0=fh,i=Ww(i),Lm(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var D=0,H=-1,Z=-1,ae=0,pe=0,ye=i,le=null;t:for(;;){for(var ue;ye!==u||g!==0&&ye.nodeType!==3||(H=D+g),ye!==v||d!==0&&ye.nodeType!==3||(Z=D+d),ye.nodeType===3&&(D+=ye.nodeValue.length),(ue=ye.firstChild)!==null;)le=ye,ye=ue;for(;;){if(ye===i)break t;if(le===u&&++ae===g&&(H=D),le===v&&++pe===d&&(Z=D),(ue=ye.nextSibling)!==null)break;ye=le,le=ye.parentNode}ye=ue}u=H===-1||Z===-1?null:{start:H,end:Z}}else u=null}u=u||{start:0,end:0}}else u=null;for(c0={focusedElem:i,selectionRange:u},fh=!1,cn=a;cn!==null;)if(a=cn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,cn=i;else for(;cn!==null;){switch(a=cn,v=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,u=a,g=v.memoizedProps,v=v.memoizedState,d=u.stateNode;try{var Pe=io(u.type,g,u.elementType===u.type);i=d.getSnapshotBeforeUpdate(Pe,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ie){gt(u,u.return,Ie)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,u=i.nodeType,u===9)h0(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":h0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,cn=i;break}cn=a.return}}function U1(i,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:zs(i,u),d&4&&dc(5,u);break;case 1:if(zs(i,u),d&4)if(i=u.stateNode,a===null)try{i.componentDidMount()}catch(D){gt(u,u.return,D)}else{var g=io(u.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(D){gt(u,u.return,D)}}d&64&&P1(u),d&512&&fc(u,u.return);break;case 3:if(zs(i,u),d&64&&(i=u.updateQueue,i!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{bb(i,a)}catch(D){gt(u,u.return,D)}}break;case 27:a===null&&d&4&&z1(u);case 26:case 5:zs(i,u),a===null&&d&4&&V1(u),d&512&&fc(u,u.return);break;case 12:zs(i,u);break;case 13:zs(i,u),d&4&&$1(i,u),d&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=yN.bind(null,u),ON(i,u))));break;case 22:if(d=u.memoizedState!==null||os,!d){a=a!==null&&a.memoizedState!==null||jt,g=os;var v=jt;os=d,(jt=a)&&!v?js(i,u,(u.subtreeFlags&8772)!==0):zs(i,u),os=g,jt=v}break;case 30:break;default:zs(i,u)}}function B1(i){var a=i.alternate;a!==null&&(i.alternate=null,B1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&di(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var bt=null,Gn=!1;function ls(i,a,u){for(u=u.child;u!==null;)H1(i,a,u),u=u.sibling}function H1(i,a,u){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(ot,u)}catch{}switch(u.tag){case 26:jt||Si(u,a),ls(i,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:jt||Si(u,a);var d=bt,g=Gn;qs(u.type)&&(bt=u.stateNode,Gn=!1),ls(i,a,u),bc(u.stateNode),bt=d,Gn=g;break;case 5:jt||Si(u,a);case 6:if(d=bt,g=Gn,bt=null,ls(i,a,u),bt=d,Gn=g,bt!==null)if(Gn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(u.stateNode)}catch(v){gt(u,a,v)}else try{bt.removeChild(u.stateNode)}catch(v){gt(u,a,v)}break;case 18:bt!==null&&(Gn?(i=bt,IE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),kc(i)):IE(bt,u.stateNode));break;case 4:d=bt,g=Gn,bt=u.stateNode.containerInfo,Gn=!0,ls(i,a,u),bt=d,Gn=g;break;case 0:case 11:case 14:case 15:jt||Ls(2,u,a),jt||Ls(4,u,a),ls(i,a,u);break;case 1:jt||(Si(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&O1(u,a,d)),ls(i,a,u);break;case 21:ls(i,a,u);break;case 22:jt=(d=jt)||u.memoizedState!==null,ls(i,a,u),jt=d;break;default:ls(i,a,u)}}function $1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{kc(i)}catch(u){gt(a,a.return,u)}}function uN(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new j1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new j1),a;default:throw Error(r(435,i.tag))}}function Ug(i,a){var u=uN(i);a.forEach(function(d){var g=vN.bind(null,i,d);u.has(d)||(u.add(d),d.then(g,g))})}function ar(i,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var g=u[d],v=i,D=a,H=D;e:for(;H!==null;){switch(H.tag){case 27:if(qs(H.type)){bt=H.stateNode,Gn=!1;break e}break;case 5:bt=H.stateNode,Gn=!1;break e;case 3:case 4:bt=H.stateNode.containerInfo,Gn=!0;break e}H=H.return}if(bt===null)throw Error(r(160));H1(v,D,g),bt=null,Gn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)F1(a,i),a=a.sibling}var Yr=null;function F1(i,a){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ar(a,i),or(i),d&4&&(Ls(3,i,i.return),dc(3,i),Ls(5,i,i.return));break;case 1:ar(a,i),or(i),d&512&&(jt||u===null||Si(u,u.return)),d&64&&os&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var g=Yr;if(ar(a,i),or(i),d&512&&(jt||u===null||Si(u,u.return)),d&4){var v=u!==null?u.memoizedState:null;if(d=i.memoizedState,u===null)if(d===null)if(i.stateNode===null){e:{d=i.type,u=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[$i]||v[Lt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),_n(v,d,u),v[Lt]=i,St(v),d=v;break e;case"link":var D=zE("link","href",g).get(d+(u.href||""));if(D){for(var H=0;H<D.length;H++)if(v=D[H],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){D.splice(H,1);break t}}v=g.createElement(d),_n(v,d,u),g.head.appendChild(v);break;case"meta":if(D=zE("meta","content",g).get(d+(u.content||""))){for(H=0;H<D.length;H++)if(v=D[H],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){D.splice(H,1);break t}}v=g.createElement(d),_n(v,d,u),g.head.appendChild(v);break;default:throw Error(r(468,d))}v[Lt]=i,St(v),d=v}i.stateNode=d}else jE(g,i.type,i.stateNode);else i.stateNode=LE(g,d,i.memoizedProps);else v!==d?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,d===null?jE(g,i.type,i.stateNode):LE(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Vg(i,i.memoizedProps,u.memoizedProps)}break;case 27:ar(a,i),or(i),d&512&&(jt||u===null||Si(u,u.return)),u!==null&&d&4&&Vg(i,i.memoizedProps,u.memoizedProps);break;case 5:if(ar(a,i),or(i),d&512&&(jt||u===null||Si(u,u.return)),i.flags&32){g=i.stateNode;try{xr(g,"")}catch(ue){gt(i,i.return,ue)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,Vg(i,g,u!==null?u.memoizedProps:g)),d&1024&&(jg=!0);break;case 6:if(ar(a,i),or(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,u=i.stateNode;try{u.nodeValue=d}catch(ue){gt(i,i.return,ue)}}break;case 3:if(uh=null,g=Yr,Yr=oh(a.containerInfo),ar(a,i),Yr=g,or(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{kc(a.containerInfo)}catch(ue){gt(i,i.return,ue)}jg&&(jg=!1,q1(i));break;case 4:d=Yr,Yr=oh(i.stateNode.containerInfo),ar(a,i),or(i),Yr=d;break;case 12:ar(a,i),or(i);break;case 13:ar(a,i),or(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Gg=je()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Ug(i,d)));break;case 22:g=i.memoizedState!==null;var Z=u!==null&&u.memoizedState!==null,ae=os,pe=jt;if(os=ae||g,jt=pe||Z,ar(a,i),jt=pe,os=ae,or(i),d&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(u===null||Z||os||jt||so(i)),u=null,a=i;;){if(a.tag===5||a.tag===26){if(u===null){Z=u=a;try{if(v=Z.stateNode,g)D=v.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{H=Z.stateNode;var ye=Z.memoizedProps.style,le=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;H.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ue){gt(Z,Z.return,ue)}}}else if(a.tag===6){if(u===null){Z=a;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(ue){gt(Z,Z.return,ue)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=i.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Ug(i,u))));break;case 19:ar(a,i),or(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Ug(i,d)));break;case 30:break;case 21:break;default:ar(a,i),or(i)}}function or(i){var a=i.flags;if(a&2){try{for(var u,d=i.return;d!==null;){if(L1(d)){u=d;break}d=d.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var g=u.stateNode,v=Lg(i);Yf(i,v,g);break;case 5:var D=u.stateNode;u.flags&32&&(xr(D,""),u.flags&=-33);var H=Lg(i);Yf(i,H,D);break;case 3:case 4:var Z=u.stateNode.containerInfo,ae=Lg(i);zg(i,ae,Z);break;default:throw Error(r(161))}}catch(pe){gt(i,i.return,pe)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function q1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;q1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function zs(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)U1(i,a.alternate,a),a=a.sibling}function so(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ls(4,a,a.return),so(a);break;case 1:Si(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&O1(a,a.return,u),so(a);break;case 27:bc(a.stateNode);case 26:case 5:Si(a,a.return),so(a);break;case 22:a.memoizedState===null&&so(a);break;case 30:so(a);break;default:so(a)}i=i.sibling}}function js(i,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=i,v=a,D=v.flags;switch(v.tag){case 0:case 11:case 15:js(g,v,u),dc(4,v);break;case 1:if(js(g,v,u),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){gt(d,d.return,ae)}if(d=v,g=d.updateQueue,g!==null){var H=d.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)wb(Z[g],H)}catch(ae){gt(d,d.return,ae)}}u&&D&64&&P1(v),fc(v,v.return);break;case 27:z1(v);case 26:case 5:js(g,v,u),u&&d===null&&D&4&&V1(v),fc(v,v.return);break;case 12:js(g,v,u);break;case 13:js(g,v,u),u&&D&4&&$1(g,v);break;case 22:v.memoizedState===null&&js(g,v,u),fc(v,v.return);break;case 30:break;default:js(g,v,u)}a=a.sibling}}function Bg(i,a){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&Qu(u))}function Hg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qu(i))}function Ai(i,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)G1(i,a,u,d),a=a.sibling}function G1(i,a,u,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Ai(i,a,u,d),g&2048&&dc(9,a);break;case 1:Ai(i,a,u,d);break;case 3:Ai(i,a,u,d),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Qu(i)));break;case 12:if(g&2048){Ai(i,a,u,d),i=a.stateNode;try{var v=a.memoizedProps,D=v.id,H=v.onPostCommit;typeof H=="function"&&H(D,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Z){gt(a,a.return,Z)}}else Ai(i,a,u,d);break;case 13:Ai(i,a,u,d);break;case 23:break;case 22:v=a.stateNode,D=a.alternate,a.memoizedState!==null?v._visibility&2?Ai(i,a,u,d):hc(i,a):v._visibility&2?Ai(i,a,u,d):(v._visibility|=2,yl(i,a,u,d,(a.subtreeFlags&10256)!==0)),g&2048&&Bg(D,a);break;case 24:Ai(i,a,u,d),g&2048&&Hg(a.alternate,a);break;default:Ai(i,a,u,d)}}function yl(i,a,u,d,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=i,D=a,H=u,Z=d,ae=D.flags;switch(D.tag){case 0:case 11:case 15:yl(v,D,H,Z,g),dc(8,D);break;case 23:break;case 22:var pe=D.stateNode;D.memoizedState!==null?pe._visibility&2?yl(v,D,H,Z,g):hc(v,D):(pe._visibility|=2,yl(v,D,H,Z,g)),g&&ae&2048&&Bg(D.alternate,D);break;case 24:yl(v,D,H,Z,g),g&&ae&2048&&Hg(D.alternate,D);break;default:yl(v,D,H,Z,g)}a=a.sibling}}function hc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=i,d=a,g=d.flags;switch(d.tag){case 22:hc(u,d),g&2048&&Bg(d.alternate,d);break;case 24:hc(u,d),g&2048&&Hg(d.alternate,d);break;default:hc(u,d)}a=a.sibling}}var pc=8192;function vl(i){if(i.subtreeFlags&pc)for(i=i.child;i!==null;)K1(i),i=i.sibling}function K1(i){switch(i.tag){case 26:vl(i),i.flags&pc&&i.memoizedState!==null&&YN(Yr,i.memoizedState,i.memoizedProps);break;case 5:vl(i);break;case 3:case 4:var a=Yr;Yr=oh(i.stateNode.containerInfo),vl(i),Yr=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=pc,pc=16777216,vl(i),pc=a):vl(i));break;default:vl(i)}}function Y1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function mc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];cn=d,W1(d,i)}Y1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)X1(i),i=i.sibling}function X1(i){switch(i.tag){case 0:case 11:case 15:mc(i),i.flags&2048&&Ls(9,i,i.return);break;case 3:mc(i);break;case 12:mc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Xf(i)):mc(i);break;default:mc(i)}}function Xf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];cn=d,W1(d,i)}Y1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ls(8,a,a.return),Xf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Xf(a));break;default:Xf(a)}i=i.sibling}}function W1(i,a){for(;cn!==null;){var u=cn;switch(u.tag){case 0:case 11:case 15:Ls(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Qu(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,cn=d;else e:for(u=i;cn!==null;){d=cn;var g=d.sibling,v=d.return;if(B1(d),d===u){cn=null;break e}if(g!==null){g.return=v,cn=g;break e}cn=v}}}var cN={getCacheForType:function(i){var a=An(tn),u=a.data.get(i);return u===void 0&&(u=i(),a.data.set(i,u)),u}},dN=typeof WeakMap=="function"?WeakMap:Map,ct=0,vt=null,Ke=null,tt=0,dt=0,lr=null,Us=!1,_l=!1,$g=!1,us=0,Dt=0,Bs=0,ao=0,Fg=0,Or=0,wl=0,gc=null,Kn=null,qg=!1,Gg=0,Wf=1/0,Qf=null,Hs=null,vn=0,$s=null,bl=null,El=0,Kg=0,Yg=null,Q1=null,yc=0,Xg=null;function ur(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(C.T!==null){var i=ul;return i!==0?i:n0()}return ui()}function Z1(){Or===0&&(Or=(tt&536870912)===0||at?Hi():536870912);var i=Pr.current;return i!==null&&(i.flags|=32),Or}function cr(i,a,u){(i===vt&&(dt===2||dt===9)||i.cancelPendingCommit!==null)&&(Tl(i,0),Fs(i,tt,Or,!1)),wr(i,u),((ct&2)===0||i!==vt)&&(i===vt&&((ct&2)===0&&(ao|=u),Dt===4&&Fs(i,tt,Or,!1)),xi(i))}function J1(i,a,u){if((ct&6)!==0)throw Error(r(327));var d=!u&&(a&124)===0&&(a&i.expiredLanes)===0||zn(i,a),g=d?pN(i,a):Zg(i,a,!0),v=d;do{if(g===0){_l&&!d&&Fs(i,a,0,!1);break}else{if(u=i.current.alternate,v&&!fN(u)){g=Zg(i,a,!1),v=!1;continue}if(g===2){if(v=a,i.errorRecoveryDisabledLanes&v)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var H=i;g=gc;var Z=H.current.memoizedState.isDehydrated;if(Z&&(Tl(H,D).flags|=256),D=Zg(H,D,!1),D!==2){if($g&&!Z){H.errorRecoveryDisabledLanes|=v,ao|=v,g=4;break e}v=Kn,Kn=g,v!==null&&(Kn===null?Kn=v:Kn.push.apply(Kn,v))}g=D}if(v=!1,g!==2)continue}}if(g===1){Tl(i,0),Fs(i,a,0,!0);break}e:{switch(d=i,v=g,v){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Fs(d,a,Or,!Us);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=Gg+300-je(),10<g)){if(Fs(d,a,Or,!Us),pn(d,0,!0)!==0)break e;d.timeoutHandle=RE(eE.bind(null,d,u,Kn,Qf,qg,a,Or,ao,wl,Us,v,2,-0,0),g);break e}eE(d,u,Kn,Qf,qg,a,Or,ao,wl,Us,v,0,-0,0)}}break}while(!0);xi(i)}function eE(i,a,u,d,g,v,D,H,Z,ae,pe,ye,le,ue){if(i.timeoutHandle=-1,ye=a.subtreeFlags,(ye&8192||(ye&16785408)===16785408)&&(Sc={stylesheets:null,count:0,unsuspend:KN},K1(a),ye=XN(),ye!==null)){i.cancelPendingCommit=ye(oE.bind(null,i,a,v,u,d,g,D,H,Z,pe,1,le,ue)),Fs(i,v,D,!ae);return}oE(i,a,v,u,d,g,D,H,Z)}function fN(i){for(var a=i;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var g=u[d],v=g.getSnapshot;g=g.value;try{if(!ir(v(),g))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Fs(i,a,u,d){a&=~Fg,a&=~ao,i.suspendedLanes|=a,i.pingedLanes&=~a,d&&(i.warmLanes|=a),d=i.expirationTimes;for(var g=a;0<g;){var v=31-Tt(g),D=1<<v;d[v]=-1,g&=~D}u!==0&&br(i,u,a)}function Zf(){return(ct&6)===0?(vc(0),!1):!0}function Wg(){if(Ke!==null){if(dt===0)var i=Ke.return;else i=Ke,ts=eo=null,hg(i),ml=null,lc=0,i=Ke;for(;i!==null;)M1(i.alternate,i),i=i.return;Ke=null}}function Tl(i,a){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,IN(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Wg(),vt=i,Ke=u=Zi(i.current,null),tt=a,dt=0,lr=null,Us=!1,_l=zn(i,a),$g=!1,wl=Or=Fg=ao=Bs=Dt=0,Kn=gc=null,qg=!1,(a&8)!==0&&(a|=a&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=a;0<d;){var g=31-Tt(d),v=1<<g;a|=i[g],d&=~v}return us=a,wf(),u}function tE(i,a){He=null,C.H=jf,a===Ju||a===kf?(a=vb(),dt=3):a===mb?(a=vb(),dt=4):dt=a===_1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,lr=a,Ke===null&&(Dt=1,Ff(i,Ir(a,i.current)))}function nE(){var i=C.H;return C.H=jf,i===null?jf:i}function rE(){var i=C.A;return C.A=cN,i}function Qg(){Dt=4,Us||(tt&4194048)!==tt&&Pr.current!==null||(_l=!0),(Bs&134217727)===0&&(ao&134217727)===0||vt===null||Fs(vt,tt,Or,!1)}function Zg(i,a,u){var d=ct;ct|=2;var g=nE(),v=rE();(vt!==i||tt!==a)&&(Qf=null,Tl(i,a)),a=!1;var D=Dt;e:do try{if(dt!==0&&Ke!==null){var H=Ke,Z=lr;switch(dt){case 8:Wg(),D=6;break e;case 3:case 2:case 9:case 6:Pr.current===null&&(a=!0);var ae=dt;if(dt=0,lr=null,Sl(i,H,Z,ae),u&&_l){D=0;break e}break;default:ae=dt,dt=0,lr=null,Sl(i,H,Z,ae)}}hN(),D=Dt;break}catch(pe){tE(i,pe)}while(!0);return a&&i.shellSuspendCounter++,ts=eo=null,ct=d,C.H=g,C.A=v,Ke===null&&(vt=null,tt=0,wf()),D}function hN(){for(;Ke!==null;)iE(Ke)}function pN(i,a){var u=ct;ct|=2;var d=nE(),g=rE();vt!==i||tt!==a?(Qf=null,Wf=je()+500,Tl(i,a)):_l=zn(i,a);e:do try{if(dt!==0&&Ke!==null){a=Ke;var v=lr;t:switch(dt){case 1:dt=0,lr=null,Sl(i,a,v,1);break;case 2:case 9:if(gb(v)){dt=0,lr=null,sE(a);break}a=function(){dt!==2&&dt!==9||vt!==i||(dt=7),xi(i)},v.then(a,a);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:gb(v)?(dt=0,lr=null,sE(a)):(dt=0,lr=null,Sl(i,a,v,7));break;case 5:var D=null;switch(Ke.tag){case 26:D=Ke.memoizedState;case 5:case 27:var H=Ke;if(!D||UE(D)){dt=0,lr=null;var Z=H.sibling;if(Z!==null)Ke=Z;else{var ae=H.return;ae!==null?(Ke=ae,Jf(ae)):Ke=null}break t}}dt=0,lr=null,Sl(i,a,v,5);break;case 6:dt=0,lr=null,Sl(i,a,v,6);break;case 8:Wg(),Dt=6;break e;default:throw Error(r(462))}}mN();break}catch(pe){tE(i,pe)}while(!0);return ts=eo=null,C.H=d,C.A=g,ct=u,Ke!==null?0:(vt=null,tt=0,wf(),Dt)}function mN(){for(;Ke!==null&&!st();)iE(Ke)}function iE(i){var a=N1(i.alternate,i,us);i.memoizedProps=i.pendingProps,a===null?Jf(i):Ke=a}function sE(i){var a=i,u=a.alternate;switch(a.tag){case 15:case 0:a=A1(u,a,a.pendingProps,a.type,void 0,tt);break;case 11:a=A1(u,a,a.pendingProps,a.type.render,a.ref,tt);break;case 5:hg(a);default:M1(u,a),a=Ke=ab(a,us),a=N1(u,a,us)}i.memoizedProps=i.pendingProps,a===null?Jf(i):Ke=a}function Sl(i,a,u,d){ts=eo=null,hg(a),ml=null,lc=0;var g=a.return;try{if(iN(i,g,a,u,tt)){Dt=1,Ff(i,Ir(u,i.current)),Ke=null;return}}catch(v){if(g!==null)throw Ke=g,v;Dt=1,Ff(i,Ir(u,i.current)),Ke=null;return}a.flags&32768?(at||d===1?i=!0:_l||(tt&536870912)!==0?i=!1:(Us=i=!0,(d===2||d===9||d===3||d===6)&&(d=Pr.current,d!==null&&d.tag===13&&(d.flags|=16384))),aE(a,i)):Jf(a)}function Jf(i){var a=i;do{if((a.flags&32768)!==0){aE(a,Us);return}i=a.return;var u=aN(a.alternate,a,us);if(u!==null){Ke=u;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=i}while(a!==null);Dt===0&&(Dt=5)}function aE(i,a){do{var u=oN(i.alternate,i);if(u!==null){u.flags&=32767,Ke=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(i=i.sibling,i!==null)){Ke=i;return}Ke=i=u}while(i!==null);Dt=6,Ke=null}function oE(i,a,u,d,g,v,D,H,Z){i.cancelPendingCommit=null;do eh();while(vn!==0);if((ct&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(v=a.lanes|a.childLanes,v|=Hm,tr(i,u,v,D,H,Z),i===vt&&(Ke=vt=null,tt=0),bl=a,$s=i,El=u,Kg=v,Yg=g,Q1=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_N(Qt,function(){return fE(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=C.T,C.T=null,g=q.p,q.p=2,D=ct,ct|=4;try{lN(i,a,u)}finally{ct=D,q.p=g,C.T=d}}vn=1,lE(),uE(),cE()}}function lE(){if(vn===1){vn=0;var i=$s,a=bl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=C.T,C.T=null;var d=q.p;q.p=2;var g=ct;ct|=4;try{F1(a,i);var v=c0,D=Ww(i.containerInfo),H=v.focusedElem,Z=v.selectionRange;if(D!==H&&H&&H.ownerDocument&&Xw(H.ownerDocument.documentElement,H)){if(Z!==null&&Lm(H)){var ae=Z.start,pe=Z.end;if(pe===void 0&&(pe=ae),"selectionStart"in H)H.selectionStart=ae,H.selectionEnd=Math.min(pe,H.value.length);else{var ye=H.ownerDocument||document,le=ye&&ye.defaultView||window;if(le.getSelection){var ue=le.getSelection(),Pe=H.textContent.length,Ie=Math.min(Z.start,Pe),mt=Z.end===void 0?Ie:Math.min(Z.end,Pe);!ue.extend&&Ie>mt&&(D=mt,mt=Ie,Ie=D);var re=Yw(H,Ie),ee=Yw(H,mt);if(re&&ee&&(ue.rangeCount!==1||ue.anchorNode!==re.node||ue.anchorOffset!==re.offset||ue.focusNode!==ee.node||ue.focusOffset!==ee.offset)){var se=ye.createRange();se.setStart(re.node,re.offset),ue.removeAllRanges(),Ie>mt?(ue.addRange(se),ue.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),ue.addRange(se))}}}}for(ye=[],ue=H;ue=ue.parentNode;)ue.nodeType===1&&ye.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<ye.length;H++){var ge=ye[H];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}fh=!!u0,c0=u0=null}finally{ct=g,q.p=d,C.T=u}}i.current=a,vn=2}}function uE(){if(vn===2){vn=0;var i=$s,a=bl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=C.T,C.T=null;var d=q.p;q.p=2;var g=ct;ct|=4;try{U1(i,a.alternate,a)}finally{ct=g,q.p=d,C.T=u}}vn=3}}function cE(){if(vn===4||vn===3){vn=0,Ht();var i=$s,a=bl,u=El,d=Q1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?vn=5:(vn=0,bl=$s=null,dE(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Hs=null),As(u),a=a.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(ot,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=C.T,g=q.p,q.p=2,C.T=null;try{for(var v=i.onRecoverableError,D=0;D<d.length;D++){var H=d[D];v(H.value,{componentStack:H.stack})}}finally{C.T=a,q.p=g}}(El&3)!==0&&eh(),xi(i),g=i.pendingLanes,(u&4194090)!==0&&(g&42)!==0?i===Xg?yc++:(yc=0,Xg=i):yc=0,vc(0)}}function dE(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Qu(a)))}function eh(i){return lE(),uE(),cE(),fE()}function fE(){if(vn!==5)return!1;var i=$s,a=Kg;Kg=0;var u=As(El),d=C.T,g=q.p;try{q.p=32>u?32:u,C.T=null,u=Yg,Yg=null;var v=$s,D=El;if(vn=0,bl=$s=null,El=0,(ct&6)!==0)throw Error(r(331));var H=ct;if(ct|=4,X1(v.current),G1(v,v.current,D,u),ct=H,vc(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(ot,v)}catch{}return!0}finally{q.p=g,C.T=d,dE(i,a)}}function hE(i,a,u){a=Ir(u,a),a=Cg(i.stateNode,a,2),i=Ms(i,a,2),i!==null&&(wr(i,2),xi(i))}function gt(i,a,u){if(i.tag===3)hE(i,i,u);else for(;a!==null;){if(a.tag===3){hE(a,i,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Hs===null||!Hs.has(d))){i=Ir(u,i),u=y1(2),d=Ms(a,u,2),d!==null&&(v1(u,d,a,i),wr(d,2),xi(d));break}}a=a.return}}function Jg(i,a,u){var d=i.pingCache;if(d===null){d=i.pingCache=new dN;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(u)||($g=!0,g.add(u),i=gN.bind(null,i,a,u),a.then(i,i))}function gN(i,a,u){var d=i.pingCache;d!==null&&d.delete(a),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,vt===i&&(tt&u)===u&&(Dt===4||Dt===3&&(tt&62914560)===tt&&300>je()-Gg?(ct&2)===0&&Tl(i,0):Fg|=u,wl===tt&&(wl=0)),xi(i)}function pE(i,a){a===0&&(a=$r()),i=sl(i,a),i!==null&&(wr(i,a),xi(i))}function yN(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),pE(i,u)}function vN(i,a){var u=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),pE(i,u)}function _N(i,a){return Ve(i,a)}var th=null,Al=null,e0=!1,nh=!1,t0=!1,oo=0;function xi(i){i!==Al&&i.next===null&&(Al===null?th=Al=i:Al=Al.next=i),nh=!0,e0||(e0=!0,bN())}function vc(i,a){if(!t0&&nh){t0=!0;do for(var u=!1,d=th;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var D=d.suspendedLanes,H=d.pingedLanes;v=(1<<31-Tt(42|i)+1)-1,v&=g&~(D&~H),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,vE(d,v))}else v=tt,v=pn(d,d===vt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||zn(d,v)||(u=!0,vE(d,v));d=d.next}while(u);t0=!1}}function wN(){mE()}function mE(){nh=e0=!1;var i=0;oo!==0&&(kN()&&(i=oo),oo=0);for(var a=je(),u=null,d=th;d!==null;){var g=d.next,v=gE(d,a);v===0?(d.next=null,u===null?th=g:u.next=g,g===null&&(Al=u)):(u=d,(i!==0||(v&3)!==0)&&(nh=!0)),d=g}vc(i)}function gE(i,a){for(var u=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var D=31-Tt(v),H=1<<D,Z=g[D];Z===-1?((H&u)===0||(H&d)!==0)&&(g[D]=Bi(H,a)):Z<=a&&(i.expiredLanes|=H),v&=~H}if(a=vt,u=tt,u=pn(i,i===a?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,u===0||i===a&&(dt===2||dt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&rt(d),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||zn(i,u)){if(a=u&-u,a===i.callbackPriority)return a;switch(d!==null&&rt(d),As(u)){case 2:case 8:u=Sn;break;case 32:u=Qt;break;case 268435456:u=Pn;break;default:u=Qt}return d=yE.bind(null,i),u=Ve(u,d),i.callbackPriority=a,i.callbackNode=u,a}return d!==null&&d!==null&&rt(d),i.callbackPriority=2,i.callbackNode=null,2}function yE(i,a){if(vn!==0&&vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(eh()&&i.callbackNode!==u)return null;var d=tt;return d=pn(i,i===vt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(J1(i,d,a),gE(i,je()),i.callbackNode!=null&&i.callbackNode===u?yE.bind(null,i):null)}function vE(i,a){if(eh())return null;J1(i,a,!0)}function bN(){NN(function(){(ct&6)!==0?Ve(kt,wN):mE()})}function n0(){return oo===0&&(oo=Hi()),oo}function _E(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ko(""+i)}function wE(i,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,i.id&&u.setAttribute("form",i.id),a.parentNode.insertBefore(u,a),i=new FormData(i),u.parentNode.removeChild(u),i}function EN(i,a,u,d,g){if(a==="submit"&&u&&u.stateNode===g){var v=_E((g[It]||null).action),D=d.submitter;D&&(a=(a=D[It]||null)?_E(a.formAction):D.getAttribute("formAction"),a!==null&&(v=a,D=null));var H=new Yo("action","action",null,d,g);i.push({event:H,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(oo!==0){var Z=D?wE(g,D):new FormData(g);Eg(u,{pending:!0,data:Z,method:g.method,action:v},null,Z)}}else typeof v=="function"&&(H.preventDefault(),Z=D?wE(g,D):new FormData(g),Eg(u,{pending:!0,data:Z,method:g.method,action:v},v,Z))},currentTarget:g}]})}}for(var r0=0;r0<Bm.length;r0++){var i0=Bm[r0],TN=i0.toLowerCase(),SN=i0[0].toUpperCase()+i0.slice(1);Kr(TN,"on"+SN)}Kr(Jw,"onAnimationEnd"),Kr(eb,"onAnimationIteration"),Kr(tb,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(BI,"onTransitionRun"),Kr(HI,"onTransitionStart"),Kr($I,"onTransitionCancel"),Kr(nb,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_c));function bE(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],g=d.event;d=d.listeners;e:{var v=void 0;if(a)for(var D=d.length-1;0<=D;D--){var H=d[D],Z=H.instance,ae=H.currentTarget;if(H=H.listener,Z!==v&&g.isPropagationStopped())break e;v=H,g.currentTarget=ae;try{v(g)}catch(pe){$f(pe)}g.currentTarget=null,v=Z}else for(D=0;D<d.length;D++){if(H=d[D],Z=H.instance,ae=H.currentTarget,H=H.listener,Z!==v&&g.isPropagationStopped())break e;v=H,g.currentTarget=ae;try{v(g)}catch(pe){$f(pe)}g.currentTarget=null,v=Z}}}}function Ye(i,a){var u=a[Ma];u===void 0&&(u=a[Ma]=new Set);var d=i+"__bubble";u.has(d)||(EE(a,i,2,!1),u.add(d))}function s0(i,a,u){var d=0;a&&(d|=4),EE(u,i,d,a)}var rh="_reactListening"+Math.random().toString(36).slice(2);function a0(i){if(!i[rh]){i[rh]=!0,Pa.forEach(function(u){u!=="selectionchange"&&(AN.has(u)||s0(u,!1,i),s0(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[rh]||(a[rh]=!0,s0("selectionchange",!1,a))}}function EE(i,a,u,d){switch(GE(a)){case 2:var g=ZN;break;case 8:g=JN;break;default:g=w0}u=g.bind(null,a,u,i),g=void 0,!Rr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function o0(i,a,u,d,g){var v=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var D=d.tag;if(D===3||D===4){var H=d.stateNode.containerInfo;if(H===g)break;if(D===4)for(D=d.return;D!==null;){var Z=D.tag;if((Z===3||Z===4)&&D.stateNode.containerInfo===g)return;D=D.return}for(;H!==null;){if(D=Er(H),D===null)return;if(Z=D.tag,Z===5||Z===6||Z===26||Z===27){d=v=D;continue e}H=H.parentNode}}d=d.return}sf(function(){var ae=v,pe=Cr(u),ye=[];e:{var le=rb.get(i);if(le!==void 0){var ue=Yo,Pe=i;switch(i){case"keypress":if(yi(u)===0)break e;case"keydown":case"keyup":ue=el;break;case"focusin":Pe="focus",ue=Qo;break;case"focusout":Pe="blur",ue=Qo;break;case"beforeblur":case"afterblur":ue=Qo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=kr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Mm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=hf;break;case Jw:case eb:case tb:ue=Zo;break;case nb:ue=mf;break;case"scroll":case"scrollend":ue=af;break;case"wheel":ue=tl;break;case"copy":case"cut":case"paste":ue=Jo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=$u;break;case"toggle":case"beforetoggle":ue=yf}var Ie=(a&4)!==0,mt=!Ie&&(i==="scroll"||i==="scrollend"),re=Ie?le!==null?le+"Capture":null:le;Ie=[];for(var ee=ae,se;ee!==null;){var ge=ee;if(se=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||se===null||re===null||(ge=Ua(ee,re),ge!=null&&Ie.push(wc(ee,ge,se))),mt)break;ee=ee.return}0<Ie.length&&(le=new ue(le,Pe,null,u,pe),ye.push({event:le,listeners:Ie}))}}if((a&7)===0){e:{if(le=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",le&&u!==Gi&&(Pe=u.relatedTarget||u.fromElement)&&(Er(Pe)||Pe[Fn]))break e;if((ue||le)&&(le=pe.window===pe?pe:(le=pe.ownerDocument)?le.defaultView||le.parentWindow:window,ue?(Pe=u.relatedTarget||u.toElement,ue=ae,Pe=Pe?Er(Pe):null,Pe!==null&&(mt=o(Pe),Ie=Pe.tag,Pe!==mt||Ie!==5&&Ie!==27&&Ie!==6)&&(Pe=null)):(ue=null,Pe=ae),ue!==Pe)){if(Ie=kr,ge="onMouseLeave",re="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=$u,ge="onPointerLeave",re="onPointerEnter",ee="pointer"),mt=ue==null?le:Sr(ue),se=Pe==null?le:Sr(Pe),le=new Ie(ge,ee+"leave",ue,u,pe),le.target=mt,le.relatedTarget=se,ge=null,Er(pe)===ae&&(Ie=new Ie(re,ee+"enter",Pe,u,pe),Ie.target=se,Ie.relatedTarget=mt,ge=Ie),mt=ge,ue&&Pe)t:{for(Ie=ue,re=Pe,ee=0,se=Ie;se;se=xl(se))ee++;for(se=0,ge=re;ge;ge=xl(ge))se++;for(;0<ee-se;)Ie=xl(Ie),ee--;for(;0<se-ee;)re=xl(re),se--;for(;ee--;){if(Ie===re||re!==null&&Ie===re.alternate)break t;Ie=xl(Ie),re=xl(re)}Ie=null}else Ie=null;ue!==null&&TE(ye,le,ue,Ie,!1),Pe!==null&&mt!==null&&TE(ye,mt,Pe,Ie,!0)}}e:{if(le=ae?Sr(ae):window,ue=le.nodeName&&le.nodeName.toLowerCase(),ue==="select"||ue==="input"&&le.type==="file")var xe=Hw;else if(en(le))if($w)xe=zI;else{xe=VI;var Fe=OI}else ue=le.nodeName,!ue||ue.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ae&&Vu(ae.elementType)&&(xe=Hw):xe=LI;if(xe&&(xe=xe(i,ae))){Qi(ye,xe,u,pe);break e}Fe&&Fe(i,le,ae),i==="focusout"&&ae&&le.type==="number"&&ae.memoizedProps.value!=null&&Rs(le,"number",le.value)}switch(Fe=ae?Sr(ae):window,i){case"focusin":(en(Fe)||Fe.contentEditable==="true")&&(nl=Fe,zm=ae,Gu=null);break;case"focusout":Gu=zm=nl=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,Qw(ye,u,pe);break;case"selectionchange":if(UI)break;case"keydown":case"keyup":Qw(ye,u,pe)}var Re;if(wi)e:{switch(i){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Je?de(i,u)&&(Ne="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ne="onCompositionStart");Ne&&(N&&u.locale!=="ko"&&(Je||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Je&&(Re=zu()):(gi=pe,ks="value"in gi?gi.value:gi.textContent,Je=!0)),Fe=ih(ae,Ne),0<Fe.length&&(Ne=new Bu(Ne,i,null,u,pe),ye.push({event:Ne,listeners:Fe}),Re?Ne.data=Re:(Re=we(u),Re!==null&&(Ne.data=Re)))),(Re=S?Jt(i,u):et(i,u))&&(Ne=ih(ae,"onBeforeInput"),0<Ne.length&&(Fe=new Bu("onBeforeInput","beforeinput",null,u,pe),ye.push({event:Fe,listeners:Ne}),Fe.data=Re)),EN(ye,i,ae,u,pe)}bE(ye,a)})}function wc(i,a,u){return{instance:i,listener:a,currentTarget:u}}function ih(i,a){for(var u=a+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Ua(i,u),g!=null&&d.unshift(wc(i,g,v)),g=Ua(i,a),g!=null&&d.push(wc(i,g,v))),i.tag===3)return d;i=i.return}return[]}function xl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function TE(i,a,u,d,g){for(var v=a._reactName,D=[];u!==null&&u!==d;){var H=u,Z=H.alternate,ae=H.stateNode;if(H=H.tag,Z!==null&&Z===d)break;H!==5&&H!==26&&H!==27||ae===null||(Z=ae,g?(ae=Ua(u,v),ae!=null&&D.unshift(wc(u,ae,Z))):g||(ae=Ua(u,v),ae!=null&&D.push(wc(u,ae,Z)))),u=u.return}D.length!==0&&i.push({event:a,listeners:D})}var xN=/\r\n?/g,CN=/\u0000|\uFFFD/g;function SE(i){return(typeof i=="string"?i:""+i).replace(xN,`
`).replace(CN,"")}function AE(i,a){return a=SE(a),SE(i)===a}function sh(){}function pt(i,a,u,d,g,v){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||xr(i,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&xr(i,""+d);break;case"className":Ar(i,"class",d);break;case"tabIndex":Ar(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(i,u,d);break;case"style":Ou(i,d,v);break;case"data":if(a!=="object"){Ar(i,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){i.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=Ko(""+d),i.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(a!=="input"&&pt(i,a,"name",g.name,g,null),pt(i,a,"formEncType",g.formEncType,g,null),pt(i,a,"formMethod",g.formMethod,g,null),pt(i,a,"formTarget",g.formTarget,g,null)):(pt(i,a,"encType",g.encType,g,null),pt(i,a,"method",g.method,g,null),pt(i,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(u);break}d=Ko(""+d),i.setAttribute(u,d);break;case"onClick":d!=null&&(i.onclick=sh);break;case"onScroll":d!=null&&Ye("scroll",i);break;case"onScrollEnd":d!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}u=Ko(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""+d):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":d===!0?i.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(u,d):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(u,d):i.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(u):i.setAttribute(u,d);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),fi(i,"popover",d);break;case"xlinkActuate":Zt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":fi(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Nm.get(u)||u,fi(i,u,d))}}function l0(i,a,u,d,g,v){switch(u){case"style":Ou(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=u}}break;case"children":typeof d=="string"?xr(i,d):(typeof d=="number"||typeof d=="bigint")&&xr(i,""+d);break;case"onScroll":d!=null&&Ye("scroll",i);break;case"onScrollEnd":d!=null&&Ye("scrollend",i);break;case"onClick":d!=null&&(i.onclick=sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xs.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),a=u.slice(2,g?u.length-7:void 0),v=i[It]||null,v=v!=null?v[u]:null,typeof v=="function"&&i.removeEventListener(a,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(a,d,g);break e}u in i?i[u]=d:d===!0?i.setAttribute(u,""):fi(i,u,d)}}}function _n(i,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var d=!1,g=!1,v;for(v in u)if(u.hasOwnProperty(v)){var D=u[v];if(D!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:pt(i,a,v,D,u,null)}}g&&pt(i,a,"srcSet",u.srcSet,u,null),d&&pt(i,a,"src",u.src,u,null);return;case"input":Ye("invalid",i);var H=v=D=g=null,Z=null,ae=null;for(d in u)if(u.hasOwnProperty(d)){var pe=u[d];if(pe!=null)switch(d){case"name":g=pe;break;case"type":D=pe;break;case"checked":Z=pe;break;case"defaultChecked":ae=pe;break;case"value":v=pe;break;case"defaultValue":H=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,a));break;default:pt(i,a,d,pe,u,null)}}La(i,v,H,Z,ae,D,g,!1),Go(i);return;case"select":Ye("invalid",i),d=D=v=null;for(g in u)if(u.hasOwnProperty(g)&&(H=u[g],H!=null))switch(g){case"value":v=H;break;case"defaultValue":D=H;break;case"multiple":d=H;default:pt(i,a,g,H,u,null)}a=v,u=D,i.multiple=!!d,a!=null?qi(i,!!d,a,!1):u!=null&&qi(i,!!d,u,!0);return;case"textarea":Ye("invalid",i),v=g=d=null;for(D in u)if(u.hasOwnProperty(D)&&(H=u[D],H!=null))switch(D){case"value":d=H;break;case"defaultValue":g=H;break;case"children":v=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:pt(i,a,D,H,u,null)}za(i,d,g,v),Go(i);return;case"option":for(Z in u)if(u.hasOwnProperty(Z)&&(d=u[Z],d!=null))switch(Z){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:pt(i,a,Z,d,u,null)}return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(d=0;d<_c.length;d++)Ye(_c[d],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in u)if(u.hasOwnProperty(ae)&&(d=u[ae],d!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:pt(i,a,ae,d,u,null)}return;default:if(Vu(a)){for(pe in u)u.hasOwnProperty(pe)&&(d=u[pe],d!==void 0&&l0(i,a,pe,d,u,void 0));return}}for(H in u)u.hasOwnProperty(H)&&(d=u[H],d!=null&&pt(i,a,H,d,u,null))}function RN(i,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,D=null,H=null,Z=null,ae=null,pe=null;for(ue in u){var ye=u[ue];if(u.hasOwnProperty(ue)&&ye!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":Z=ye;default:d.hasOwnProperty(ue)||pt(i,a,ue,null,d,ye)}}for(var le in d){var ue=d[le];if(ye=u[le],d.hasOwnProperty(le)&&(ue!=null||ye!=null))switch(le){case"type":v=ue;break;case"name":g=ue;break;case"checked":ae=ue;break;case"defaultChecked":pe=ue;break;case"value":D=ue;break;case"defaultValue":H=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,a));break;default:ue!==ye&&pt(i,a,le,ue,d,ye)}}rr(i,D,H,Z,ae,pe,v,g);return;case"select":ue=D=H=le=null;for(v in u)if(Z=u[v],u.hasOwnProperty(v)&&Z!=null)switch(v){case"value":break;case"multiple":ue=Z;default:d.hasOwnProperty(v)||pt(i,a,v,null,d,Z)}for(g in d)if(v=d[g],Z=u[g],d.hasOwnProperty(g)&&(v!=null||Z!=null))switch(g){case"value":le=v;break;case"defaultValue":H=v;break;case"multiple":D=v;default:v!==Z&&pt(i,a,g,v,d,Z)}a=H,u=D,d=ue,le!=null?qi(i,!!u,le,!1):!!d!=!!u&&(a!=null?qi(i,!!u,a,!0):qi(i,!!u,u?[]:"",!1));return;case"textarea":ue=le=null;for(H in u)if(g=u[H],u.hasOwnProperty(H)&&g!=null&&!d.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:pt(i,a,H,null,d,g)}for(D in d)if(g=d[D],v=u[D],d.hasOwnProperty(D)&&(g!=null||v!=null))switch(D){case"value":le=g;break;case"defaultValue":ue=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==v&&pt(i,a,D,g,d,v)}ft(i,le,ue);return;case"option":for(var Pe in u)if(le=u[Pe],u.hasOwnProperty(Pe)&&le!=null&&!d.hasOwnProperty(Pe))switch(Pe){case"selected":i.selected=!1;break;default:pt(i,a,Pe,null,d,le)}for(Z in d)if(le=d[Z],ue=u[Z],d.hasOwnProperty(Z)&&le!==ue&&(le!=null||ue!=null))switch(Z){case"selected":i.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:pt(i,a,Z,le,d,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in u)le=u[Ie],u.hasOwnProperty(Ie)&&le!=null&&!d.hasOwnProperty(Ie)&&pt(i,a,Ie,null,d,le);for(ae in d)if(le=d[ae],ue=u[ae],d.hasOwnProperty(ae)&&le!==ue&&(le!=null||ue!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:pt(i,a,ae,le,d,ue)}return;default:if(Vu(a)){for(var mt in u)le=u[mt],u.hasOwnProperty(mt)&&le!==void 0&&!d.hasOwnProperty(mt)&&l0(i,a,mt,void 0,d,le);for(pe in d)le=d[pe],ue=u[pe],!d.hasOwnProperty(pe)||le===ue||le===void 0&&ue===void 0||l0(i,a,pe,le,d,ue);return}}for(var re in u)le=u[re],u.hasOwnProperty(re)&&le!=null&&!d.hasOwnProperty(re)&&pt(i,a,re,null,d,le);for(ye in d)le=d[ye],ue=u[ye],!d.hasOwnProperty(ye)||le===ue||le==null&&ue==null||pt(i,a,ye,le,d,ue)}var u0=null,c0=null;function ah(i){return i.nodeType===9?i:i.ownerDocument}function xE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function CE(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function d0(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var f0=null;function kN(){var i=window.event;return i&&i.type==="popstate"?i===f0?!1:(f0=i,!0):(f0=null,!1)}var RE=typeof setTimeout=="function"?setTimeout:void 0,IN=typeof clearTimeout=="function"?clearTimeout:void 0,kE=typeof Promise=="function"?Promise:void 0,NN=typeof queueMicrotask=="function"?queueMicrotask:typeof kE<"u"?function(i){return kE.resolve(null).then(i).catch(DN)}:RE;function DN(i){setTimeout(function(){throw i})}function qs(i){return i==="head"}function IE(i,a){var u=a,d=0,g=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(0<d&&8>d){u=d;var D=i.ownerDocument;if(u&1&&bc(D.documentElement),u&2&&bc(D.body),u&4)for(u=D.head,bc(u),D=u.firstChild;D;){var H=D.nextSibling,Z=D.nodeName;D[$i]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&D.rel.toLowerCase()==="stylesheet"||u.removeChild(D),D=H}}if(g===0){i.removeChild(v),kc(a);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:d=u.charCodeAt(0)-48;else d=0;u=v}while(u);kc(a)}function h0(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":h0(u),di(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function MN(i,a,u,d){for(;i.nodeType===1;){var g=u;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[$i])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Xr(i.nextSibling),i===null)break}return null}function PN(i,a,u){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Xr(i.nextSibling),i===null))return null;return i}function p0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function ON(i,a){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Xr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var m0=null;function NE(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}function DE(i,a,u){switch(a=ah(u),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function bc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);di(i)}var Vr=new Map,ME=new Set;function oh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=q.d;q.d={f:VN,r:LN,D:zN,C:jN,L:UN,m:BN,X:$N,S:HN,M:FN};function VN(){var i=cs.f(),a=Zf();return i||a}function LN(i){var a=Tr(i);a!==null&&a.tag===5&&a.type==="form"?Jb(a):cs.r(i)}var Cl=typeof document>"u"?null:document;function PE(i,a,u){var d=Cl;if(d&&typeof a=="string"&&a){var g=qt(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),ME.has(g)||(ME.add(g),i={rel:i,crossOrigin:u,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),_n(a,"link",i),St(a),d.head.appendChild(a)))}}function zN(i){cs.D(i),PE("dns-prefetch",i,null)}function jN(i,a){cs.C(i,a),PE("preconnect",i,a)}function UN(i,a,u){cs.L(i,a,u);var d=Cl;if(d&&i&&a){var g='link[rel="preload"][as="'+qt(a)+'"]';a==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+qt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+qt(u.imageSizes)+'"]')):g+='[href="'+qt(i)+'"]';var v=g;switch(a){case"style":v=Rl(i);break;case"script":v=kl(i)}Vr.has(v)||(i=m({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:i,as:a},u),Vr.set(v,i),d.querySelector(g)!==null||a==="style"&&d.querySelector(Ec(v))||a==="script"&&d.querySelector(Tc(v))||(a=d.createElement("link"),_n(a,"link",i),St(a),d.head.appendChild(a)))}}function BN(i,a){cs.m(i,a);var u=Cl;if(u&&i){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+qt(d)+'"][href="'+qt(i)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=kl(i)}if(!Vr.has(v)&&(i=m({rel:"modulepreload",href:i},a),Vr.set(v,i),u.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Tc(v)))return}d=u.createElement("link"),_n(d,"link",i),St(d),u.head.appendChild(d)}}}function HN(i,a,u){cs.S(i,a,u);var d=Cl;if(d&&i){var g=mn(d).hoistableStyles,v=Rl(i);a=a||"default";var D=g.get(v);if(!D){var H={loading:0,preload:null};if(D=d.querySelector(Ec(v)))H.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},u),(u=Vr.get(v))&&g0(i,u);var Z=D=d.createElement("link");St(Z),_n(Z,"link",i),Z._p=new Promise(function(ae,pe){Z.onload=ae,Z.onerror=pe}),Z.addEventListener("load",function(){H.loading|=1}),Z.addEventListener("error",function(){H.loading|=2}),H.loading|=4,lh(D,a,d)}D={type:"stylesheet",instance:D,count:1,state:H},g.set(v,D)}}}function $N(i,a){cs.X(i,a);var u=Cl;if(u&&i){var d=mn(u).hoistableScripts,g=kl(i),v=d.get(g);v||(v=u.querySelector(Tc(g)),v||(i=m({src:i,async:!0},a),(a=Vr.get(g))&&y0(i,a),v=u.createElement("script"),St(v),_n(v,"link",i),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function FN(i,a){cs.M(i,a);var u=Cl;if(u&&i){var d=mn(u).hoistableScripts,g=kl(i),v=d.get(g);v||(v=u.querySelector(Tc(g)),v||(i=m({src:i,async:!0,type:"module"},a),(a=Vr.get(g))&&y0(i,a),v=u.createElement("script"),St(v),_n(v,"link",i),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function OE(i,a,u,d){var g=(g=ce.current)?oh(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Rl(u.href),u=mn(g).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Rl(u.href);var v=mn(g).hoistableStyles,D=v.get(i);if(D||(g=g.ownerDocument||g,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,D),(v=g.querySelector(Ec(i)))&&!v._p&&(D.instance=v,D.state.loading=5),Vr.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Vr.set(i,u),v||qN(g,i,u,D.state))),a&&d===null)throw Error(r(528,""));return D}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=kl(u),u=mn(g).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Rl(i){return'href="'+qt(i)+'"'}function Ec(i){return'link[rel="stylesheet"]['+i+"]"}function VE(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function qN(i,a,u,d){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=i.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),_n(a,"link",u),St(a),i.head.appendChild(a))}function kl(i){return'[src="'+qt(i)+'"]'}function Tc(i){return"script[async]"+i}function LE(i,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=i.querySelector('style[data-href~="'+qt(u.href)+'"]');if(d)return a.instance=d,St(d),d;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),St(d),_n(d,"style",g),lh(d,u.precedence,i),a.instance=d;case"stylesheet":g=Rl(u.href);var v=i.querySelector(Ec(g));if(v)return a.state.loading|=4,a.instance=v,St(v),v;d=VE(u),(g=Vr.get(g))&&g0(d,g),v=(i.ownerDocument||i).createElement("link"),St(v);var D=v;return D._p=new Promise(function(H,Z){D.onload=H,D.onerror=Z}),_n(v,"link",d),a.state.loading|=4,lh(v,u.precedence,i),a.instance=v;case"script":return v=kl(u.src),(g=i.querySelector(Tc(v)))?(a.instance=g,St(g),g):(d=u,(g=Vr.get(v))&&(d=m({},u),y0(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),St(g),_n(g,"link",d),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,lh(d,u.precedence,i));return a.instance}function lh(i,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,D=0;D<d.length;D++){var H=d[D];if(H.dataset.precedence===a)v=H;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(i,a.firstChild))}function g0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function y0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var uh=null;function zE(i,a,u){if(uh===null){var d=new Map,g=uh=new Map;g.set(u,d)}else g=uh,d=g.get(u),d||(d=new Map,g.set(u,d));if(d.has(i))return d;for(d.set(i,null),u=u.getElementsByTagName(i),g=0;g<u.length;g++){var v=u[g];if(!(v[$i]||v[Lt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var D=v.getAttribute(a)||"";D=i+D;var H=d.get(D);H?H.push(v):d.set(D,[v])}}return d}function jE(i,a,u){i=i.ownerDocument||i,i.head.insertBefore(u,a==="title"?i.querySelector("head > title"):null)}function GN(i,a,u){if(u===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function UE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Sc=null;function KN(){}function YN(i,a,u){if(Sc===null)throw Error(r(475));var d=Sc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Rl(u.href),v=i.querySelector(Ec(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=ch.bind(d),i.then(d,d)),a.state.loading|=4,a.instance=v,St(v);return}v=i.ownerDocument||i,u=VE(u),(g=Vr.get(g))&&g0(u,g),v=v.createElement("link"),St(v);var D=v;D._p=new Promise(function(H,Z){D.onload=H,D.onerror=Z}),_n(v,"link",u),a.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=ch.bind(d),i.addEventListener("load",a),i.addEventListener("error",a))}}function XN(){if(Sc===null)throw Error(r(475));var i=Sc;return i.stylesheets&&i.count===0&&v0(i,i.stylesheets),0<i.count?function(a){var u=setTimeout(function(){if(i.stylesheets&&v0(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u)}}:null}function ch(){if(this.count--,this.count===0){if(this.stylesheets)v0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var dh=null;function v0(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,dh=new Map,a.forEach(WN,i),dh=null,ch.call(i))}function WN(i,a){if(!(a.state.loading&4)){var u=dh.get(i);if(u)var d=u.get(null);else{u=new Map,dh.set(i,u);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var D=g[v];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(u.set(D.dataset.precedence,D),d=D)}d&&u.set(null,d)}g=a.instance,D=g.getAttribute("data-precedence"),v=u.get(D)||d,v===d&&u.set(null,g),u.set(D,g),this.count++,d=ch.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var Ac={$$typeof:X,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function QN(i,a,u,d,g,v,D,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function BE(i,a,u,d,g,v,D,H,Z,ae,pe,ye){return i=new QN(i,a,u,D,H,Z,ae,ye),a=1,v===!0&&(a|=24),v=sr(3,null,null,a),i.current=v,v.stateNode=i,a=Jm(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:d,isDehydrated:u,cache:a},rg(v),i}function HE(i){return i?(i=al,i):al}function $E(i,a,u,d,g,v){g=HE(g),d.context===null?d.context=g:d.pendingContext=g,d=Ds(a),d.payload={element:u},v=v===void 0?null:v,v!==null&&(d.callback=v),u=Ms(i,d,a),u!==null&&(cr(u,i,a),tc(u,i,a))}function FE(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function _0(i,a){FE(i,a),(i=i.alternate)&&FE(i,a)}function qE(i){if(i.tag===13){var a=sl(i,67108864);a!==null&&cr(a,i,67108864),_0(i,67108864)}}var fh=!0;function ZN(i,a,u,d){var g=C.T;C.T=null;var v=q.p;try{q.p=2,w0(i,a,u,d)}finally{q.p=v,C.T=g}}function JN(i,a,u,d){var g=C.T;C.T=null;var v=q.p;try{q.p=8,w0(i,a,u,d)}finally{q.p=v,C.T=g}}function w0(i,a,u,d){if(fh){var g=b0(d);if(g===null)o0(i,a,d,hh,u),KE(i,d);else if(tD(g,i,a,u,d))d.stopPropagation();else if(KE(i,d),a&4&&-1<eD.indexOf(i)){for(;g!==null;){var v=Tr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var D=an(v.pendingLanes);if(D!==0){var H=v;for(H.pendingLanes|=2,H.entangledLanes|=2;D;){var Z=1<<31-Tt(D);H.entanglements[1]|=Z,D&=~Z}xi(v),(ct&6)===0&&(Wf=je()+500,vc(0))}}break;case 13:H=sl(v,2),H!==null&&cr(H,v,2),Zf(),_0(v,2)}if(v=b0(d),v===null&&o0(i,a,d,hh,u),v===g)break;g=v}g!==null&&d.stopPropagation()}else o0(i,a,d,null,u)}}function b0(i){return i=Cr(i),E0(i)}var hh=null;function E0(i){if(hh=null,i=Er(i),i!==null){var a=o(i);if(a===null)i=null;else{var u=a.tag;if(u===13){if(i=l(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return hh=i,null}function GE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case kt:return 2;case Sn:return 8;case Qt:case Jn:return 32;case Pn:return 268435456;default:return 32}default:return 32}}var T0=!1,Gs=null,Ks=null,Ys=null,xc=new Map,Cc=new Map,Xs=[],eD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KE(i,a){switch(i){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":xc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cc.delete(a.pointerId)}}function Rc(i,a,u,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},a!==null&&(a=Tr(a),a!==null&&qE(a)),i):(i.eventSystemFlags|=d,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function tD(i,a,u,d,g){switch(a){case"focusin":return Gs=Rc(Gs,i,a,u,d,g),!0;case"dragenter":return Ks=Rc(Ks,i,a,u,d,g),!0;case"mouseover":return Ys=Rc(Ys,i,a,u,d,g),!0;case"pointerover":var v=g.pointerId;return xc.set(v,Rc(xc.get(v)||null,i,a,u,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Cc.set(v,Rc(Cc.get(v)||null,i,a,u,d,g)),!0}return!1}function YE(i){var a=Er(i.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){i.blockedOn=a,Uo(i.priority,function(){if(u.tag===13){var d=ur();d=li(d);var g=sl(u,d);g!==null&&cr(g,u,d),_0(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ph(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=b0(i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);Gi=d,u.target.dispatchEvent(d),Gi=null}else return a=Tr(u),a!==null&&qE(a),i.blockedOn=u,!1;a.shift()}return!0}function XE(i,a,u){ph(i)&&u.delete(a)}function nD(){T0=!1,Gs!==null&&ph(Gs)&&(Gs=null),Ks!==null&&ph(Ks)&&(Ks=null),Ys!==null&&ph(Ys)&&(Ys=null),xc.forEach(XE),Cc.forEach(XE)}function mh(i,a){i.blockedOn===a&&(i.blockedOn=null,T0||(T0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nD)))}var gh=null;function WE(i){gh!==i&&(gh=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){gh===i&&(gh=null);for(var a=0;a<i.length;a+=3){var u=i[a],d=i[a+1],g=i[a+2];if(typeof d!="function"){if(E0(d||u)===null)continue;break}var v=Tr(u);v!==null&&(i.splice(a,3),a-=3,Eg(v,{pending:!0,data:g,method:u.method,action:d},d,g))}}))}function kc(i){function a(Z){return mh(Z,i)}Gs!==null&&mh(Gs,i),Ks!==null&&mh(Ks,i),Ys!==null&&mh(Ys,i),xc.forEach(a),Cc.forEach(a);for(var u=0;u<Xs.length;u++){var d=Xs[u];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Xs.length&&(u=Xs[0],u.blockedOn===null);)YE(u),u.blockedOn===null&&Xs.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var g=u[d],v=u[d+1],D=g[It]||null;if(typeof v=="function")D||WE(u);else if(D){var H=null;if(v&&v.hasAttribute("formAction")){if(g=v,D=v[It]||null)H=D.formAction;else if(E0(g)!==null)continue}else H=D.action;typeof H=="function"?u[d+1]=H:(u.splice(d,3),d-=3),WE(u)}}}function S0(i){this._internalRoot=i}yh.prototype.render=S0.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,d=ur();$E(u,d,i,a,null,null)},yh.prototype.unmount=S0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;$E(i.current,2,null,i,null,null),Zf(),a[Fn]=null}};function yh(i){this._internalRoot=i}yh.prototype.unstable_scheduleHydration=function(i){if(i){var a=ui();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Xs.length&&a!==0&&a<Xs[u].priority;u++);Xs.splice(u,0,i),u===0&&YE(i)}};var QE=e.version;if(QE!=="19.1.0")throw Error(r(527,QE,"19.1.0"));q.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(a),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var rD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{ot=vh.inject(rD),Ge=vh}catch{}}return Nc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var u=!1,d="",g=h1,v=p1,D=m1,H=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(H=a.unstable_transitionCallbacks)),a=BE(i,1,!1,null,null,u,d,g,v,D,H,null),i[Fn]=a.current,a0(i),new S0(a)},Nc.hydrateRoot=function(i,a,u){if(!s(i))throw Error(r(299));var d=!1,g="",v=h1,D=p1,H=m1,Z=null,ae=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(H=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Z=u.unstable_transitionCallbacks),u.formState!==void 0&&(ae=u.formState)),a=BE(i,1,!0,a,u??null,d,g,v,D,H,Z,ae),a.context=HE(null),u=a.current,d=ur(),d=li(d),g=Ds(d),g.callback=null,Ms(u,g,d),u=d,a.current.lanes=u,wr(a,u),xi(a),i[Fn]=a.current,a0(i),new yh(a)},Nc.version="19.1.0",Nc}var oT;function pD(){if(oT)return C0.exports;oT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),C0.exports=hD(),C0.exports}var mD=pD();function $n(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=$n(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var N0={exports:{}},D0={},M0={exports:{}},P0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function gD(){if(lT)return P0;lT=1;var t=Vd();function e(_,w){return _===w&&(_!==0||1/_===1/w)||_!==_&&w!==w}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(_,w){var R=w(),O=r({inst:{value:R,getSnapshot:w}}),V=O[0].inst,z=O[1];return o(function(){V.value=R,V.getSnapshot=w,f(V)&&z({inst:V})},[_,R,w]),s(function(){return f(V)&&z({inst:V}),_(function(){f(V)&&z({inst:V})})},[_]),l(R),R}function f(_){var w=_.getSnapshot;_=_.value;try{var R=w();return!n(_,R)}catch{return!0}}function h(_,w){return w()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return P0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,P0}var uT;function yD(){return uT||(uT=1,M0.exports=gD()),M0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function vD(){if(cT)return D0;cT=1;var t=Vd(),e=yD();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return D0.useSyncExternalStoreWithSelector=function(h,m,_,w,R){var O=o(null);if(O.current===null){var V={hasValue:!1,value:null};O.current=V}else V=O.current;O=c(function(){function j(b){if(!F){if(F=!0,X=b,b=w(b),R!==void 0&&V.hasValue){var T=V.value;if(R(T,b))return y=T}return y=b}if(T=y,r(X,b))return T;var A=w(b);return R!==void 0&&R(T,A)?(X=b,T):(X=b,y=A)}var F=!1,X,y,E=_===void 0?null:_;return[function(){return j(m())},E===null?void 0:function(){return j(E())}]},[m,_,w,R]);var z=s(h,O[0],O[1]);return l(function(){V.hasValue=!0,V.value=z},[z]),f(z),z},D0}var dT;function _D(){return dT||(dT=1,N0.exports=vD()),N0.exports}var wD=_D();const bD=Vv(wD),ED={},fT=t=>{let e;const n=new Set,r=(m,_)=>{const w=typeof m=="function"?m(e):m;if(!Object.is(w,e)){const R=e;e=_??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(O=>O(e,R))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>h,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(ED?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(r,s,f);return f},TD=t=>t?fT(t):fT,{useDebugValue:SD}=he,{useSyncExternalStoreWithSelector:AD}=bD,xD=t=>t;function Ex(t,e=xD,n){const r=AD(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return SD(r),r}const hT=(t,e)=>{const n=TD(t),r=(s,o=e)=>Ex(n,s,o);return Object.assign(r,n),r},CD=(t,e)=>t?hT(t,e):hT;function Dn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var RD={value:()=>{}};function Fp(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Bh(n)}function Bh(t){this._=t}function kD(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Bh.prototype=Fp.prototype={constructor:Bh,on:function(t,e){var n=this._,r=kD(t+"",n),s,o=-1,l=r.length;if(arguments.length<2){for(;++o<l;)if((s=(t=r[o]).type)&&(s=ID(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(s=(t=r[o]).type)n[s]=pT(n[s],t.name,e);else if(e==null)for(s in n)n[s]=pT(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Bh(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function ID(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function pT(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=RD,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ty="http://www.w3.org/1999/xhtml";const mT={svg:"http://www.w3.org/2000/svg",xhtml:Ty,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qp(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),mT.hasOwnProperty(e)?{space:mT[e],local:t}:t}function ND(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ty&&e.documentElement.namespaceURI===Ty?e.createElement(t):e.createElementNS(n,t)}}function DD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tx(t){var e=qp(t);return(e.local?DD:ND)(e)}function MD(){}function Lv(t){return t==null?MD:function(){return this.querySelector(t)}}function PD(t){typeof t!="function"&&(t=Lv(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=new Array(l),f,h,m=0;m<l;++m)(f=o[m])&&(h=t.call(f,f.__data__,m,o))&&("__data__"in f&&(h.__data__=f.__data__),c[m]=h);return new vr(r,this._parents)}function OD(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function VD(){return[]}function Sx(t){return t==null?VD:function(){return this.querySelectorAll(t)}}function LD(t){return function(){return OD(t.apply(this,arguments))}}function zD(t){typeof t=="function"?t=LD(t):t=Sx(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var l=e[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&(r.push(t.call(f,f.__data__,h,l)),s.push(f));return new vr(r,s)}function Ax(t){return function(){return this.matches(t)}}function xx(t){return function(e){return e.matches(t)}}var jD=Array.prototype.find;function UD(t){return function(){return jD.call(this.children,t)}}function BD(){return this.firstElementChild}function HD(t){return this.select(t==null?BD:UD(typeof t=="function"?t:xx(t)))}var $D=Array.prototype.filter;function FD(){return Array.from(this.children)}function qD(t){return function(){return $D.call(this.children,t)}}function GD(t){return this.selectAll(t==null?FD:qD(typeof t=="function"?t:xx(t)))}function KD(t){typeof t!="function"&&(t=Ax(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new vr(r,this._parents)}function Cx(t){return new Array(t.length)}function YD(){return new vr(this._enter||this._groups.map(Cx),this._parents)}function lp(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}lp.prototype={constructor:lp,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function XD(t){return function(){return t}}function WD(t,e,n,r,s,o){for(var l=0,c,f=e.length,h=o.length;l<h;++l)(c=e[l])?(c.__data__=o[l],r[l]=c):n[l]=new lp(t,o[l]);for(;l<f;++l)(c=e[l])&&(s[l]=c)}function QD(t,e,n,r,s,o,l){var c,f,h=new Map,m=e.length,_=o.length,w=new Array(m),R;for(c=0;c<m;++c)(f=e[c])&&(w[c]=R=l.call(f,f.__data__,c,e)+"",h.has(R)?s[c]=f:h.set(R,f));for(c=0;c<_;++c)R=l.call(t,o[c],c,o)+"",(f=h.get(R))?(r[c]=f,f.__data__=o[c],h.delete(R)):n[c]=new lp(t,o[c]);for(c=0;c<m;++c)(f=e[c])&&h.get(w[c])===f&&(s[c]=f)}function ZD(t){return t.__data__}function JD(t,e){if(!arguments.length)return Array.from(this,ZD);var n=e?QD:WD,r=this._parents,s=this._groups;typeof t!="function"&&(t=XD(t));for(var o=s.length,l=new Array(o),c=new Array(o),f=new Array(o),h=0;h<o;++h){var m=r[h],_=s[h],w=_.length,R=e4(t.call(m,m&&m.__data__,h,r)),O=R.length,V=c[h]=new Array(O),z=l[h]=new Array(O),j=f[h]=new Array(w);n(m,_,V,z,j,R,e);for(var F=0,X=0,y,E;F<O;++F)if(y=V[F]){for(F>=X&&(X=F+1);!(E=z[X])&&++X<O;);y._next=E||null}}return l=new vr(l,r),l._enter=c,l._exit=f,l}function e4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function t4(){return new vr(this._exit||this._groups.map(Cx),this._parents)}function n4(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function r4(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,l=Math.min(s,o),c=new Array(s),f=0;f<l;++f)for(var h=n[f],m=r[f],_=h.length,w=c[f]=new Array(_),R,O=0;O<_;++O)(R=h[O]||m[O])&&(w[O]=R);for(;f<s;++f)c[f]=n[f];return new vr(c,this._parents)}function i4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],l;--s>=0;)(l=r[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function s4(t){t||(t=a4);function e(_,w){return _&&w?t(_.__data__,w.__data__):!_-!w}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var l=n[o],c=l.length,f=s[o]=new Array(c),h,m=0;m<c;++m)(h=l[m])&&(f[m]=h);f.sort(e)}return new vr(s,this._parents).order()}function a4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function o4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function l4(){return Array.from(this)}function u4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var l=r[s];if(l)return l}return null}function c4(){let t=0;for(const e of this)++t;return t}function d4(){return!this.node()}function f4(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,l=s.length,c;o<l;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function h4(t){return function(){this.removeAttribute(t)}}function p4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m4(t,e){return function(){this.setAttribute(t,e)}}function g4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function y4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function v4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _4(t,e){var n=qp(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?p4:h4:typeof e=="function"?n.local?v4:y4:n.local?g4:m4)(n,e))}function Rx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function w4(t){return function(){this.style.removeProperty(t)}}function b4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function E4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function T4(t,e,n){return arguments.length>1?this.each((e==null?w4:typeof e=="function"?E4:b4)(t,e,n??"")):au(this.node(),t)}function au(t,e){return t.style.getPropertyValue(e)||Rx(t).getComputedStyle(t,null).getPropertyValue(e)}function S4(t){return function(){delete this[t]}}function A4(t,e){return function(){this[t]=e}}function x4(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function C4(t,e){return arguments.length>1?this.each((e==null?S4:typeof e=="function"?x4:A4)(t,e)):this.node()[t]}function kx(t){return t.trim().split(/^|\s+/)}function zv(t){return t.classList||new Ix(t)}function Ix(t){this._node=t,this._names=kx(t.getAttribute("class")||"")}Ix.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Nx(t,e){for(var n=zv(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function Dx(t,e){for(var n=zv(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function R4(t){return function(){Nx(this,t)}}function k4(t){return function(){Dx(this,t)}}function I4(t,e){return function(){(e.apply(this,arguments)?Nx:Dx)(this,t)}}function N4(t,e){var n=kx(t+"");if(arguments.length<2){for(var r=zv(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?I4:e?R4:k4)(n,e))}function D4(){this.textContent=""}function M4(t){return function(){this.textContent=t}}function P4(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function O4(t){return arguments.length?this.each(t==null?D4:(typeof t=="function"?P4:M4)(t)):this.node().textContent}function V4(){this.innerHTML=""}function L4(t){return function(){this.innerHTML=t}}function z4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function j4(t){return arguments.length?this.each(t==null?V4:(typeof t=="function"?z4:L4)(t)):this.node().innerHTML}function U4(){this.nextSibling&&this.parentNode.appendChild(this)}function B4(){return this.each(U4)}function H4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $4(){return this.each(H4)}function F4(t){var e=typeof t=="function"?t:Tx(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function q4(){return null}function G4(t,e){var n=typeof t=="function"?t:Tx(t),r=e==null?q4:typeof e=="function"?e:Lv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function K4(){var t=this.parentNode;t&&t.removeChild(this)}function Y4(){return this.each(K4)}function X4(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function W4(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Q4(t){return this.select(t?W4:X4)}function Z4(t){return arguments.length?this.property("__data__",t):this.node().__data__}function J4(t){return function(e){t.call(this,e,this.__data__)}}function eM(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function tM(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function nM(t,e,n){return function(){var r=this.__on,s,o=J4(e);if(r){for(var l=0,c=r.length;l<c;++l)if((s=r[l]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function rM(t,e,n){var r=eM(t+""),s,o=r.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,h=c.length,m;f<h;++f)for(s=0,m=c[f];s<o;++s)if((l=r[s]).type===m.type&&l.name===m.name)return m.value}return}for(c=e?nM:tM,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function Mx(t,e,n){var r=Rx(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function iM(t,e){return function(){return Mx(this,t,e)}}function sM(t,e){return function(){return Mx(this,t,e.apply(this,arguments))}}function aM(t,e){return this.each((typeof e=="function"?sM:iM)(t,e))}function*oM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,l;s<o;++s)(l=r[s])&&(yield l)}var Px=[null];function vr(t,e){this._groups=t,this._parents=e}function Ld(){return new vr([[document.documentElement]],Px)}function lM(){return this}vr.prototype=Ld.prototype={constructor:vr,select:PD,selectAll:zD,selectChild:HD,selectChildren:GD,filter:KD,data:JD,enter:YD,exit:t4,join:n4,merge:r4,selection:lM,order:i4,sort:s4,call:o4,nodes:l4,node:u4,size:c4,empty:d4,each:f4,attr:_4,style:T4,property:C4,classed:N4,text:O4,html:j4,raise:B4,lower:$4,append:F4,insert:G4,remove:Y4,clone:Q4,datum:Z4,on:rM,dispatch:aM,[Symbol.iterator]:oM};function Zr(t){return typeof t=="string"?new vr([[document.querySelector(t)]],[document.documentElement]):new vr([[t]],Px)}function uM(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ci(t,e){if(t=uM(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const cM={passive:!1},cd={capture:!0,passive:!1};function O0(t){t.stopImmediatePropagation()}function Wl(t){t.preventDefault(),t.stopImmediatePropagation()}function Ox(t){var e=t.document.documentElement,n=Zr(t).on("dragstart.drag",Wl,cd);"onselectstart"in e?n.on("selectstart.drag",Wl,cd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Vx(t,e){var n=t.document.documentElement,r=Zr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Wl,cd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const _h=t=>()=>t;function Sy(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:l,y:c,dx:f,dy:h,dispatch:m}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:m}})}Sy.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function dM(t){return!t.ctrlKey&&!t.button}function fM(){return this.parentNode}function hM(t,e){return e??{x:t.x,y:t.y}}function pM(){return navigator.maxTouchPoints||"ontouchstart"in this}function mM(){var t=dM,e=fM,n=hM,r=pM,s={},o=Fp("start","drag","end"),l=0,c,f,h,m,_=0;function w(y){y.on("mousedown.drag",R).filter(r).on("touchstart.drag",z).on("touchmove.drag",j,cM).on("touchend.drag touchcancel.drag",F).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function R(y,E){if(!(m||!t.call(this,y,E))){var b=X(this,e.call(this,y,E),y,E,"mouse");b&&(Zr(y.view).on("mousemove.drag",O,cd).on("mouseup.drag",V,cd),Ox(y.view),O0(y),h=!1,c=y.clientX,f=y.clientY,b("start",y))}}function O(y){if(Wl(y),!h){var E=y.clientX-c,b=y.clientY-f;h=E*E+b*b>_}s.mouse("drag",y)}function V(y){Zr(y.view).on("mousemove.drag mouseup.drag",null),Vx(y.view,h),Wl(y),s.mouse("end",y)}function z(y,E){if(t.call(this,y,E)){var b=y.changedTouches,T=e.call(this,y,E),A=b.length,x,k;for(x=0;x<A;++x)(k=X(this,T,y,E,b[x].identifier,b[x]))&&(O0(y),k("start",y,b[x]))}}function j(y){var E=y.changedTouches,b=E.length,T,A;for(T=0;T<b;++T)(A=s[E[T].identifier])&&(Wl(y),A("drag",y,E[T]))}function F(y){var E=y.changedTouches,b=E.length,T,A;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),T=0;T<b;++T)(A=s[E[T].identifier])&&(O0(y),A("end",y,E[T]))}function X(y,E,b,T,A,x){var k=o.copy(),I=Ci(x||b,E),B,P,M;if((M=n.call(y,new Sy("beforestart",{sourceEvent:b,target:w,identifier:A,active:l,x:I[0],y:I[1],dx:0,dy:0,dispatch:k}),T))!=null)return B=M.x-I[0]||0,P=M.y-I[1]||0,function K(C,q,Y){var W=I,U;switch(C){case"start":s[A]=K,U=l++;break;case"end":delete s[A],--l;case"drag":I=Ci(Y||q,E),U=l;break}k.call(C,y,new Sy(C,{sourceEvent:q,subject:M,target:w,identifier:A,active:U,x:I[0]+B,y:I[1]+P,dx:I[0]-W[0],dy:I[1]-W[1],dispatch:k}),T)}}return w.filter=function(y){return arguments.length?(t=typeof y=="function"?y:_h(!!y),w):t},w.container=function(y){return arguments.length?(e=typeof y=="function"?y:_h(y),w):e},w.subject=function(y){return arguments.length?(n=typeof y=="function"?y:_h(y),w):n},w.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:_h(!!y),w):r},w.on=function(){var y=o.on.apply(o,arguments);return y===o?w:y},w.clickDistance=function(y){return arguments.length?(_=(y=+y)*y,w):Math.sqrt(_)},w}function jv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Lx(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function zd(){}var dd=.7,up=1/dd,Ql="\\s*([+-]?\\d+)\\s*",fd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ki="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gM=/^#([0-9a-f]{3,8})$/,yM=new RegExp(`^rgb\\(${Ql},${Ql},${Ql}\\)$`),vM=new RegExp(`^rgb\\(${ki},${ki},${ki}\\)$`),_M=new RegExp(`^rgba\\(${Ql},${Ql},${Ql},${fd}\\)$`),wM=new RegExp(`^rgba\\(${ki},${ki},${ki},${fd}\\)$`),bM=new RegExp(`^hsl\\(${fd},${ki},${ki}\\)$`),EM=new RegExp(`^hsla\\(${fd},${ki},${ki},${fd}\\)$`),gT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jv(zd,hd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yT,formatHex:yT,formatHex8:TM,formatHsl:SM,formatRgb:vT,toString:vT});function yT(){return this.rgb().formatHex()}function TM(){return this.rgb().formatHex8()}function SM(){return zx(this).formatHsl()}function vT(){return this.rgb().formatRgb()}function hd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_T(e):n===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yM.exec(t))?new Wn(e[1],e[2],e[3],1):(e=vM.exec(t))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_M.exec(t))?wh(e[1],e[2],e[3],e[4]):(e=wM.exec(t))?wh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bM.exec(t))?ET(e[1],e[2]/100,e[3]/100,1):(e=EM.exec(t))?ET(e[1],e[2]/100,e[3]/100,e[4]):gT.hasOwnProperty(t)?_T(gT[t]):t==="transparent"?new Wn(NaN,NaN,NaN,0):null}function _T(t){return new Wn(t>>16&255,t>>8&255,t&255,1)}function wh(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wn(t,e,n,r)}function AM(t){return t instanceof zd||(t=hd(t)),t?(t=t.rgb(),new Wn(t.r,t.g,t.b,t.opacity)):new Wn}function Ay(t,e,n,r){return arguments.length===1?AM(t):new Wn(t,e,n,r??1)}function Wn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}jv(Wn,Ay,Lx(zd,{brighter(t){return t=t==null?up:Math.pow(up,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dd:Math.pow(dd,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wn(bo(this.r),bo(this.g),bo(this.b),cp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wT,formatHex:wT,formatHex8:xM,formatRgb:bT,toString:bT}));function wT(){return`#${go(this.r)}${go(this.g)}${go(this.b)}`}function xM(){return`#${go(this.r)}${go(this.g)}${go(this.b)}${go((isNaN(this.opacity)?1:this.opacity)*255)}`}function bT(){const t=cp(this.opacity);return`${t===1?"rgb(":"rgba("}${bo(this.r)}, ${bo(this.g)}, ${bo(this.b)}${t===1?")":`, ${t})`}`}function cp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function go(t){return t=bo(t),(t<16?"0":"")+t.toString(16)}function ET(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jr(t,e,n,r)}function zx(t){if(t instanceof Jr)return new Jr(t.h,t.s,t.l,t.opacity);if(t instanceof zd||(t=hd(t)),!t)return new Jr;if(t instanceof Jr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),l=NaN,c=o-s,f=(o+s)/2;return c?(e===o?l=(n-r)/c+(n<r)*6:n===o?l=(r-e)/c+2:l=(e-n)/c+4,c/=f<.5?o+s:2-o-s,l*=60):c=f>0&&f<1?0:l,new Jr(l,c,f,t.opacity)}function CM(t,e,n,r){return arguments.length===1?zx(t):new Jr(t,e,n,r??1)}function Jr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}jv(Jr,CM,Lx(zd,{brighter(t){return t=t==null?up:Math.pow(up,t),new Jr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dd:Math.pow(dd,t),new Jr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Wn(V0(t>=240?t-240:t+120,s,r),V0(t,s,r),V0(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Jr(TT(this.h),bh(this.s),bh(this.l),cp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cp(this.opacity);return`${t===1?"hsl(":"hsla("}${TT(this.h)}, ${bh(this.s)*100}%, ${bh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function TT(t){return t=(t||0)%360,t<0?t+360:t}function bh(t){return Math.max(0,Math.min(1,t||0))}function V0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Uv=t=>()=>t;function jx(t,e){return function(n){return t+n*e}}function RM(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yY(t,e){var n=e-t;return n?jx(t,n>180||n<-180?n-360*Math.round(n/360):n):Uv(isNaN(t)?e:t)}function kM(t){return(t=+t)==1?Ux:function(e,n){return n-e?RM(e,n,t):Uv(isNaN(e)?n:e)}}function Ux(t,e){var n=e-t;return n?jx(t,n):Uv(isNaN(t)?e:t)}const ST=function t(e){var n=kM(e);function r(s,o){var l=n((s=Ay(s)).r,(o=Ay(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=Ux(s.opacity,o.opacity);return function(m){return s.r=l(m),s.g=c(m),s.b=f(m),s.opacity=h(m),s+""}}return r.gamma=t,r}(1);function ea(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var xy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L0=new RegExp(xy.source,"g");function IM(t){return function(){return t}}function NM(t){return function(e){return t(e)+""}}function DM(t,e){var n=xy.lastIndex=L0.lastIndex=0,r,s,o,l=-1,c=[],f=[];for(t=t+"",e=e+"";(r=xy.exec(t))&&(s=L0.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(r=r[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:ea(r,s)})),n=L0.lastIndex;return n<e.length&&(o=e.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?f[0]?NM(f[0].x):IM(e):(e=f.length,function(h){for(var m=0,_;m<e;++m)c[(_=f[m]).i]=_.x(h);return c.join("")})}var AT=180/Math.PI,Cy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bx(t,e,n,r,s,o){var l,c,f;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(f=t*n+e*r)&&(n-=t*f,r-=e*f),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,f/=c),t*r<e*n&&(t=-t,e=-e,f=-f,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*AT,skewX:Math.atan(f)*AT,scaleX:l,scaleY:c}}var Eh;function MM(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Cy:Bx(e.a,e.b,e.c,e.d,e.e,e.f)}function PM(t){return t==null||(Eh||(Eh=document.createElementNS("http://www.w3.org/2000/svg","g")),Eh.setAttribute("transform",t),!(t=Eh.transform.baseVal.consolidate()))?Cy:(t=t.matrix,Bx(t.a,t.b,t.c,t.d,t.e,t.f))}function Hx(t,e,n,r){function s(h){return h.length?h.pop()+" ":""}function o(h,m,_,w,R,O){if(h!==_||m!==w){var V=R.push("translate(",null,e,null,n);O.push({i:V-4,x:ea(h,_)},{i:V-2,x:ea(m,w)})}else(_||w)&&R.push("translate("+_+e+w+n)}function l(h,m,_,w){h!==m?(h-m>180?m+=360:m-h>180&&(h+=360),w.push({i:_.push(s(_)+"rotate(",null,r)-2,x:ea(h,m)})):m&&_.push(s(_)+"rotate("+m+r)}function c(h,m,_,w){h!==m?w.push({i:_.push(s(_)+"skewX(",null,r)-2,x:ea(h,m)}):m&&_.push(s(_)+"skewX("+m+r)}function f(h,m,_,w,R,O){if(h!==_||m!==w){var V=R.push(s(R)+"scale(",null,",",null,")");O.push({i:V-4,x:ea(h,_)},{i:V-2,x:ea(m,w)})}else(_!==1||w!==1)&&R.push(s(R)+"scale("+_+","+w+")")}return function(h,m){var _=[],w=[];return h=t(h),m=t(m),o(h.translateX,h.translateY,m.translateX,m.translateY,_,w),l(h.rotate,m.rotate,_,w),c(h.skewX,m.skewX,_,w),f(h.scaleX,h.scaleY,m.scaleX,m.scaleY,_,w),h=m=null,function(R){for(var O=-1,V=w.length,z;++O<V;)_[(z=w[O]).i]=z.x(R);return _.join("")}}}var OM=Hx(MM,"px, ","px)","deg)"),VM=Hx(PM,", ",")",")"),LM=1e-12;function xT(t){return((t=Math.exp(t))+1/t)/2}function zM(t){return((t=Math.exp(t))-1/t)/2}function jM(t){return((t=Math.exp(2*t))-1)/(t+1)}const UM=function t(e,n,r){function s(o,l){var c=o[0],f=o[1],h=o[2],m=l[0],_=l[1],w=l[2],R=m-c,O=_-f,V=R*R+O*O,z,j;if(V<LM)j=Math.log(w/h)/e,z=function(T){return[c+T*R,f+T*O,h*Math.exp(e*T*j)]};else{var F=Math.sqrt(V),X=(w*w-h*h+r*V)/(2*h*n*F),y=(w*w-h*h-r*V)/(2*w*n*F),E=Math.log(Math.sqrt(X*X+1)-X),b=Math.log(Math.sqrt(y*y+1)-y);j=(b-E)/e,z=function(T){var A=T*j,x=xT(E),k=h/(n*F)*(x*jM(e*A+E)-zM(E));return[c+k*R,f+k*O,h*x/xT(e*A+E)]}}return z.duration=j*1e3*e/Math.SQRT2,z}return s.rho=function(o){var l=Math.max(.001,+o),c=l*l,f=c*c;return t(l,c,f)},s}(Math.SQRT2,2,4);var ou=0,Bc=0,Dc=0,$x=1e3,dp,Hc,fp=0,Ao=0,Gp=0,pd=typeof performance=="object"&&performance.now?performance:Date,Fx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bv(){return Ao||(Fx(BM),Ao=pd.now()+Gp)}function BM(){Ao=0}function hp(){this._call=this._time=this._next=null}hp.prototype=qx.prototype={constructor:hp,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Bv():+n)+(e==null?0:+e),!this._next&&Hc!==this&&(Hc?Hc._next=this:dp=this,Hc=this),this._call=t,this._time=n,Ry()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ry())}};function qx(t,e,n){var r=new hp;return r.restart(t,e,n),r}function HM(){Bv(),++ou;for(var t=dp,e;t;)(e=Ao-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ou}function CT(){Ao=(fp=pd.now())+Gp,ou=Bc=0;try{HM()}finally{ou=0,FM(),Ao=0}}function $M(){var t=pd.now(),e=t-fp;e>$x&&(Gp-=e,fp=t)}function FM(){for(var t,e=dp,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:dp=n);Hc=t,Ry(r)}function Ry(t){if(!ou){Bc&&(Bc=clearTimeout(Bc));var e=t-Ao;e>24?(t<1/0&&(Bc=setTimeout(CT,t-pd.now()-Gp)),Dc&&(Dc=clearInterval(Dc))):(Dc||(fp=pd.now(),Dc=setInterval($M,$x)),ou=1,Fx(CT))}}function RT(t,e,n){var r=new hp;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var qM=Fp("start","end","cancel","interrupt"),GM=[],Gx=0,kT=1,ky=2,Hh=3,IT=4,Iy=5,$h=6;function Kp(t,e,n,r,s,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;KM(t,n,{name:e,index:r,group:s,on:qM,tween:GM,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Gx})}function Hv(t,e){var n=ai(t,e);if(n.state>Gx)throw new Error("too late; already scheduled");return n}function ji(t,e){var n=ai(t,e);if(n.state>Hh)throw new Error("too late; already running");return n}function ai(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function KM(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=qx(o,0,n.time);function o(h){n.state=kT,n.timer.restart(l,n.delay,n.time),n.delay<=h&&l(h-n.delay)}function l(h){var m,_,w,R;if(n.state!==kT)return f();for(m in r)if(R=r[m],R.name===n.name){if(R.state===Hh)return RT(l);R.state===IT?(R.state=$h,R.timer.stop(),R.on.call("interrupt",t,t.__data__,R.index,R.group),delete r[m]):+m<e&&(R.state=$h,R.timer.stop(),R.on.call("cancel",t,t.__data__,R.index,R.group),delete r[m])}if(RT(function(){n.state===Hh&&(n.state=IT,n.timer.restart(c,n.delay,n.time),c(h))}),n.state=ky,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ky){for(n.state=Hh,s=new Array(w=n.tween.length),m=0,_=-1;m<w;++m)(R=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(s[++_]=R);s.length=_+1}}function c(h){for(var m=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=Iy,1),_=-1,w=s.length;++_<w;)s[_].call(t,m);n.state===Iy&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=$h,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function Fh(t,e){var n=t.__transition,r,s,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((r=n[l]).name!==e){o=!1;continue}s=r.state>ky&&r.state<Iy,r.state=$h,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[l]}o&&delete t.__transition}}function YM(t){return this.each(function(){Fh(this,t)})}function XM(t,e){var n,r;return function(){var s=ji(this,t),o=s.tween;if(o!==n){r=n=o;for(var l=0,c=r.length;l<c;++l)if(r[l].name===e){r=r.slice(),r.splice(l,1);break}}s.tween=r}}function WM(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=ji(this,t),l=o.tween;if(l!==r){s=(r=l).slice();for(var c={name:e,value:n},f=0,h=s.length;f<h;++f)if(s[f].name===e){s[f]=c;break}f===h&&s.push(c)}o.tween=s}}function QM(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ai(this.node(),n).tween,s=0,o=r.length,l;s<o;++s)if((l=r[s]).name===t)return l.value;return null}return this.each((e==null?XM:WM)(n,t,e))}function $v(t,e,n){var r=t._id;return t.each(function(){var s=ji(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ai(s,r).value[e]}}function Kx(t,e){var n;return(typeof e=="number"?ea:e instanceof hd?ST:(n=hd(e))?(e=n,ST):DM)(t,e)}function ZM(t){return function(){this.removeAttribute(t)}}function JM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function eP(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttribute(t);return l===s?null:l===r?o:o=e(r=l,n)}}function tP(t,e,n){var r,s=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===s?null:l===r?o:o=e(r=l,n)}}function nP(t,e,n){var r,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),f=c+"",l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c)))}}function rP(t,e,n){var r,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),f=c+"",l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c)))}}function iP(t,e){var n=qp(t),r=n==="transform"?VM:Kx;return this.attrTween(t,typeof e=="function"?(n.local?rP:nP)(n,r,$v(this,"attr."+t,e)):e==null?(n.local?JM:ZM)(n):(n.local?tP:eP)(n,r,e))}function sP(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function aP(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function oP(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&aP(t,o)),n}return s._value=e,s}function lP(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&sP(t,o)),n}return s._value=e,s}function uP(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=qp(t);return this.tween(n,(r.local?oP:lP)(r,e))}function cP(t,e){return function(){Hv(this,t).delay=+e.apply(this,arguments)}}function dP(t,e){return e=+e,function(){Hv(this,t).delay=e}}function fP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cP:dP)(e,t)):ai(this.node(),e).delay}function hP(t,e){return function(){ji(this,t).duration=+e.apply(this,arguments)}}function pP(t,e){return e=+e,function(){ji(this,t).duration=e}}function mP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hP:pP)(e,t)):ai(this.node(),e).duration}function gP(t,e){if(typeof e!="function")throw new Error;return function(){ji(this,t).ease=e}}function yP(t){var e=this._id;return arguments.length?this.each(gP(e,t)):ai(this.node(),e).ease}function vP(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ji(this,t).ease=n}}function _P(t){if(typeof t!="function")throw new Error;return this.each(vP(this._id,t))}function wP(t){typeof t!="function"&&(t=Ax(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=r[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new ys(r,this._parents,this._name,this._id)}function bP(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),l=new Array(r),c=0;c<o;++c)for(var f=e[c],h=n[c],m=f.length,_=l[c]=new Array(m),w,R=0;R<m;++R)(w=f[R]||h[R])&&(_[R]=w);for(;c<r;++c)l[c]=e[c];return new ys(l,this._parents,this._name,this._id)}function EP(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function TP(t,e,n){var r,s,o=EP(e)?Hv:ji;return function(){var l=o(this,t),c=l.on;c!==r&&(s=(r=c).copy()).on(e,n),l.on=s}}function SP(t,e){var n=this._id;return arguments.length<2?ai(this.node(),n).on.on(t):this.each(TP(n,t,e))}function AP(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function xP(){return this.on("end.remove",AP(this._id))}function CP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Lv(t));for(var r=this._groups,s=r.length,o=new Array(s),l=0;l<s;++l)for(var c=r[l],f=c.length,h=o[l]=new Array(f),m,_,w=0;w<f;++w)(m=c[w])&&(_=t.call(m,m.__data__,w,c))&&("__data__"in m&&(_.__data__=m.__data__),h[w]=_,Kp(h[w],e,n,w,h,ai(m,n)));return new ys(o,this._parents,e,n)}function RP(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sx(t));for(var r=this._groups,s=r.length,o=[],l=[],c=0;c<s;++c)for(var f=r[c],h=f.length,m,_=0;_<h;++_)if(m=f[_]){for(var w=t.call(m,m.__data__,_,f),R,O=ai(m,n),V=0,z=w.length;V<z;++V)(R=w[V])&&Kp(R,e,n,V,w,O);o.push(w),l.push(m)}return new ys(o,l,e,n)}var kP=Ld.prototype.constructor;function IP(){return new kP(this._groups,this._parents)}function NP(t,e){var n,r,s;return function(){var o=au(this,t),l=(this.style.removeProperty(t),au(this,t));return o===l?null:o===n&&l===r?s:s=e(n=o,r=l)}}function Yx(t){return function(){this.style.removeProperty(t)}}function DP(t,e,n){var r,s=n+"",o;return function(){var l=au(this,t);return l===s?null:l===r?o:o=e(r=l,n)}}function MP(t,e,n){var r,s,o;return function(){var l=au(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),au(this,t))),l===f?null:l===r&&f===s?o:(s=f,o=e(r=l,c))}}function PP(t,e){var n,r,s,o="style."+e,l="end."+o,c;return function(){var f=ji(this,t),h=f.on,m=f.value[o]==null?c||(c=Yx(e)):void 0;(h!==n||s!==m)&&(r=(n=h).copy()).on(l,s=m),f.on=r}}function OP(t,e,n){var r=(t+="")=="transform"?OM:Kx;return e==null?this.styleTween(t,NP(t,r)).on("end.style."+t,Yx(t)):typeof e=="function"?this.styleTween(t,MP(t,r,$v(this,"style."+t,e))).each(PP(this._id,t)):this.styleTween(t,DP(t,r,e),n).on("end.style."+t,null)}function VP(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function LP(t,e,n){var r,s;function o(){var l=e.apply(this,arguments);return l!==s&&(r=(s=l)&&VP(t,l,n)),r}return o._value=e,o}function zP(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,LP(t,e,n??""))}function jP(t){return function(){this.textContent=t}}function UP(t){return function(){var e=t(this);this.textContent=e??""}}function BP(t){return this.tween("text",typeof t=="function"?UP($v(this,"text",t)):jP(t==null?"":t+""))}function HP(t){return function(e){this.textContent=t.call(this,e)}}function $P(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&HP(s)),e}return r._value=t,r}function FP(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,$P(t))}function qP(){for(var t=this._name,e=this._id,n=Xx(),r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],c=l.length,f,h=0;h<c;++h)if(f=l[h]){var m=ai(f,e);Kp(f,t,n,h,l,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new ys(r,this._parents,t,n)}function GP(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,l){var c={value:l},f={value:function(){--s===0&&o()}};n.each(function(){var h=ji(this,r),m=h.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),h.on=e}),s===0&&o()})}var KP=0;function ys(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Xx(){return++KP}var ds=Ld.prototype;ys.prototype={constructor:ys,select:CP,selectAll:RP,selectChild:ds.selectChild,selectChildren:ds.selectChildren,filter:wP,merge:bP,selection:IP,transition:qP,call:ds.call,nodes:ds.nodes,node:ds.node,size:ds.size,empty:ds.empty,each:ds.each,on:SP,attr:iP,attrTween:uP,style:OP,styleTween:zP,text:BP,textTween:FP,remove:xP,tween:QM,delay:fP,duration:mP,ease:yP,easeVarying:_P,end:GP,[Symbol.iterator]:ds[Symbol.iterator]};function YP(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var XP={time:null,delay:0,duration:250,ease:YP};function WP(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function QP(t){var e,n;t instanceof ys?(e=t._id,t=t._name):(e=Xx(),(n=XP).time=Bv(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var l=r[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&Kp(f,t,e,h,l,n||WP(f,e));return new ys(r,this._parents,t,e)}Ld.prototype.interrupt=YM;Ld.prototype.transition=QP;const Th=t=>()=>t;function ZP(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function hs(t,e,n){this.k=t,this.x=e,this.y=n}hs.prototype={constructor:hs,scale:function(t){return t===1?this:new hs(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new hs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ca=new hs(1,0,0);hs.prototype;function z0(t){t.stopImmediatePropagation()}function Mc(t){t.preventDefault(),t.stopImmediatePropagation()}function JP(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function e6(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function NT(){return this.__zoom||ca}function t6(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function n6(){return navigator.maxTouchPoints||"ontouchstart"in this}function r6(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function i6(){var t=JP,e=e6,n=r6,r=t6,s=n6,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=UM,h=Fp("start","zoom","end"),m,_,w,R=500,O=150,V=0,z=10;function j(M){M.property("__zoom",NT).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",I).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}j.transform=function(M,K,C,q){var Y=M.selection?M.selection():M;Y.property("__zoom",NT),M!==Y?E(M,K,C,q):Y.interrupt().each(function(){b(this,arguments).event(q).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},j.scaleBy=function(M,K,C,q){j.scaleTo(M,function(){var Y=this.__zoom.k,W=typeof K=="function"?K.apply(this,arguments):K;return Y*W},C,q)},j.scaleTo=function(M,K,C,q){j.transform(M,function(){var Y=e.apply(this,arguments),W=this.__zoom,U=C==null?y(Y):typeof C=="function"?C.apply(this,arguments):C,Q=W.invert(U),ne=typeof K=="function"?K.apply(this,arguments):K;return n(X(F(W,ne),U,Q),Y,l)},C,q)},j.translateBy=function(M,K,C,q){j.transform(M,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof C=="function"?C.apply(this,arguments):C),e.apply(this,arguments),l)},null,q)},j.translateTo=function(M,K,C,q,Y){j.transform(M,function(){var W=e.apply(this,arguments),U=this.__zoom,Q=q==null?y(W):typeof q=="function"?q.apply(this,arguments):q;return n(ca.translate(Q[0],Q[1]).scale(U.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof C=="function"?-C.apply(this,arguments):-C),W,l)},q,Y)};function F(M,K){return K=Math.max(o[0],Math.min(o[1],K)),K===M.k?M:new hs(K,M.x,M.y)}function X(M,K,C){var q=K[0]-C[0]*M.k,Y=K[1]-C[1]*M.k;return q===M.x&&Y===M.y?M:new hs(M.k,q,Y)}function y(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function E(M,K,C,q){M.on("start.zoom",function(){b(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(q).end()}).tween("zoom",function(){var Y=this,W=arguments,U=b(Y,W).event(q),Q=e.apply(Y,W),ne=C==null?y(Q):typeof C=="function"?C.apply(Y,W):C,J=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),te=Y.__zoom,oe=typeof K=="function"?K.apply(Y,W):K,ce=f(te.invert(ne).concat(J/te.k),oe.invert(ne).concat(J/oe.k));return function(fe){if(fe===1)fe=oe;else{var me=ce(fe),be=J/me[2];fe=new hs(be,ne[0]-me[0]*be,ne[1]-me[1]*be)}U.zoom(null,fe)}})}function b(M,K,C){return!C&&M.__zooming||new T(M,K)}function T(M,K){this.that=M,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(M,K),this.taps=0}T.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,K){return this.mouse&&M!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var K=Zr(this.that).datum();h.call(M,this.that,new ZP(M,{sourceEvent:this.sourceEvent,target:j,transform:this.that.__zoom,dispatch:h}),K)}};function A(M,...K){if(!t.apply(this,arguments))return;var C=b(this,K).event(M),q=this.__zoom,Y=Math.max(o[0],Math.min(o[1],q.k*Math.pow(2,r.apply(this,arguments)))),W=Ci(M);if(C.wheel)(C.mouse[0][0]!==W[0]||C.mouse[0][1]!==W[1])&&(C.mouse[1]=q.invert(C.mouse[0]=W)),clearTimeout(C.wheel);else{if(q.k===Y)return;C.mouse=[W,q.invert(W)],Fh(this),C.start()}Mc(M),C.wheel=setTimeout(U,O),C.zoom("mouse",n(X(F(q,Y),C.mouse[0],C.mouse[1]),C.extent,l));function U(){C.wheel=null,C.end()}}function x(M,...K){if(w||!t.apply(this,arguments))return;var C=M.currentTarget,q=b(this,K,!0).event(M),Y=Zr(M.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",J,!0),W=Ci(M,C),U=M.clientX,Q=M.clientY;Ox(M.view),z0(M),q.mouse=[W,this.__zoom.invert(W)],Fh(this),q.start();function ne(te){if(Mc(te),!q.moved){var oe=te.clientX-U,ce=te.clientY-Q;q.moved=oe*oe+ce*ce>V}q.event(te).zoom("mouse",n(X(q.that.__zoom,q.mouse[0]=Ci(te,C),q.mouse[1]),q.extent,l))}function J(te){Y.on("mousemove.zoom mouseup.zoom",null),Vx(te.view,q.moved),Mc(te),q.event(te).end()}}function k(M,...K){if(t.apply(this,arguments)){var C=this.__zoom,q=Ci(M.changedTouches?M.changedTouches[0]:M,this),Y=C.invert(q),W=C.k*(M.shiftKey?.5:2),U=n(X(F(C,W),q,Y),e.apply(this,K),l);Mc(M),c>0?Zr(this).transition().duration(c).call(E,U,q,M):Zr(this).call(j.transform,U,q,M)}}function I(M,...K){if(t.apply(this,arguments)){var C=M.touches,q=C.length,Y=b(this,K,M.changedTouches.length===q).event(M),W,U,Q,ne;for(z0(M),U=0;U<q;++U)Q=C[U],ne=Ci(Q,this),ne=[ne,this.__zoom.invert(ne),Q.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==ne[2]&&(Y.touch1=ne,Y.taps=0):(Y.touch0=ne,W=!0,Y.taps=1+!!m);m&&(m=clearTimeout(m)),W&&(Y.taps<2&&(_=ne[0],m=setTimeout(function(){m=null},R)),Fh(this),Y.start())}}function B(M,...K){if(this.__zooming){var C=b(this,K).event(M),q=M.changedTouches,Y=q.length,W,U,Q,ne;for(Mc(M),W=0;W<Y;++W)U=q[W],Q=Ci(U,this),C.touch0&&C.touch0[2]===U.identifier?C.touch0[0]=Q:C.touch1&&C.touch1[2]===U.identifier&&(C.touch1[0]=Q);if(U=C.that.__zoom,C.touch1){var J=C.touch0[0],te=C.touch0[1],oe=C.touch1[0],ce=C.touch1[1],fe=(fe=oe[0]-J[0])*fe+(fe=oe[1]-J[1])*fe,me=(me=ce[0]-te[0])*me+(me=ce[1]-te[1])*me;U=F(U,Math.sqrt(fe/me)),Q=[(J[0]+oe[0])/2,(J[1]+oe[1])/2],ne=[(te[0]+ce[0])/2,(te[1]+ce[1])/2]}else if(C.touch0)Q=C.touch0[0],ne=C.touch0[1];else return;C.zoom("touch",n(X(U,Q,ne),C.extent,l))}}function P(M,...K){if(this.__zooming){var C=b(this,K).event(M),q=M.changedTouches,Y=q.length,W,U;for(z0(M),w&&clearTimeout(w),w=setTimeout(function(){w=null},R),W=0;W<Y;++W)U=q[W],C.touch0&&C.touch0[2]===U.identifier?delete C.touch0:C.touch1&&C.touch1[2]===U.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(U=Ci(U,this),Math.hypot(_[0]-U[0],_[1]-U[1])<z)){var Q=Zr(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return j.wheelDelta=function(M){return arguments.length?(r=typeof M=="function"?M:Th(+M),j):r},j.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Th(!!M),j):t},j.touchable=function(M){return arguments.length?(s=typeof M=="function"?M:Th(!!M),j):s},j.extent=function(M){return arguments.length?(e=typeof M=="function"?M:Th([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),j):e},j.scaleExtent=function(M){return arguments.length?(o[0]=+M[0],o[1]=+M[1],j):[o[0],o[1]]},j.translateExtent=function(M){return arguments.length?(l[0][0]=+M[0][0],l[1][0]=+M[1][0],l[0][1]=+M[0][1],l[1][1]=+M[1][1],j):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},j.constrain=function(M){return arguments.length?(n=M,j):n},j.duration=function(M){return arguments.length?(c=+M,j):c},j.interpolate=function(M){return arguments.length?(f=M,j):f},j.on=function(){var M=h.on.apply(h,arguments);return M===h?j:M},j.clickDistance=function(M){return arguments.length?(V=(M=+M)*M,j):Math.sqrt(V)},j.tapDistance=function(M){return arguments.length?(z=+M,j):z},j}var Wx=bx();const Yp=$.createContext(null),s6=Yp.Provider,vs={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Qx=vs.error001();function Ct(t,e){const n=$.useContext(Yp);if(n===null)throw new Error(Qx);return Ex(n,t,e)}const hn=()=>{const t=$.useContext(Yp);if(t===null)throw new Error(Qx);return $.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},a6=t=>t.userSelectionActive?"none":"all";function Zx({position:t,children:e,className:n,style:r,...s}){const o=Ct(a6),l=`${t}`.split("-");return he.createElement("div",{className:$n(["react-flow__panel",n,...l]),style:{...r,pointerEvents:o},...s},e)}function o6({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:he.createElement(Zx,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},he.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const l6=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:f,className:h,...m})=>{const _=$.useRef(null),[w,R]=$.useState({x:0,y:0,width:0,height:0}),O=$n(["react-flow__edge-textwrapper",h]);return $.useEffect(()=>{if(_.current){const V=_.current.getBBox();R({x:V.x,y:V.y,width:V.width,height:V.height})}},[n]),typeof n>"u"||!n?null:he.createElement("g",{transform:`translate(${t-w.width/2} ${e-w.height/2})`,className:O,visibility:w.width?"visible":"hidden",...m},s&&he.createElement("rect",{width:w.width+2*l[0],x:-l[0],y:-l[1],height:w.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),he.createElement("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:_,style:r},n),f)};var u6=$.memo(l6);const Fv=t=>({width:t.offsetWidth,height:t.offsetHeight}),lu=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),qv=(t={x:0,y:0},e)=>({x:lu(t.x,e[0][0],e[1][0]),y:lu(t.y,e[0][1],e[1][1])}),DT=(t,e,n)=>t<e?lu(Math.abs(t-e),1,50)/50:t>n?-lu(Math.abs(t-n),1,50)/50:0,Jx=(t,e)=>{const n=DT(t.x,35,e.width-35)*20,r=DT(t.y,35,e.height-35)*20;return[n,r]},e3=t=>t.getRootNode?.()||window?.document,c6=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Gv=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),d6=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),MT=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Ny=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},f6=t=>jr(t.width)&&jr(t.height)&&jr(t.x)&&jr(t.y),jr=t=>!isNaN(t)&&isFinite(t),Ot=Symbol.for("internals"),t3=["Enter"," ","Escape"],h6=(t,e)=>{},p6=t=>"nativeEvent"in t;function Dy(t){const n=(p6(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const n3=t=>"clientX"in t,da=(t,e)=>{const n=n3(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},pp=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,jd=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:_,markerStart:w,interactionWidth:R=20})=>he.createElement(he.Fragment,null,he.createElement("path",{id:t,style:m,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:_,markerStart:w}),R&&he.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:R,className:"react-flow__edge-interaction"}),s&&jr(n)&&jr(r)?he.createElement(u6,{x:n,y:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h}):null);jd.displayName="BaseEdge";function Pc(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function r3({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,l=Math.abs(r-e)/2,c=r<e?r+l:r-l;return[o,c,s,l]}function i3({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:c}){const f=t*.125+s*.375+l*.375+n*.125,h=e*.125+o*.375+c*.375+r*.125,m=Math.abs(f-t),_=Math.abs(h-e);return[f,h,m,_]}var ya;(function(t){t.Strict="strict",t.Loose="loose"})(ya||(ya={}));var yo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(yo||(yo={}));var md;(function(t){t.Partial="partial",t.Full="full"})(md||(md={}));var na;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(na||(na={}));var xo;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(xo||(xo={}));var Te;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Te||(Te={}));function PT({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Te.Left||t===Te.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function s3({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:o=Te.Top}){const[l,c]=PT({pos:n,x1:t,y1:e,x2:r,y2:s}),[f,h]=PT({pos:o,x1:r,y1:s,x2:t,y2:e}),[m,_,w,R]=i3({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${t},${e} C${l},${c} ${f},${h} ${r},${s}`,m,_,w,R]}const Kv=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:o=Te.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:R,markerStart:O,interactionWidth:V})=>{const[z,j,F]=s3({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return he.createElement(jd,{path:z,labelX:j,labelY:F,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:R,markerStart:O,interactionWidth:V})});Kv.displayName="SimpleBezierEdge";const OT={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},m6=({source:t,sourcePosition:e=Te.Bottom,target:n})=>e===Te.Left||e===Te.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},VT=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function g6({source:t,sourcePosition:e=Te.Bottom,target:n,targetPosition:r=Te.Top,center:s,offset:o}){const l=OT[e],c=OT[r],f={x:t.x+l.x*o,y:t.y+l.y*o},h={x:n.x+c.x*o,y:n.y+c.y*o},m=m6({source:f,sourcePosition:e,target:h}),_=m.x!==0?"x":"y",w=m[_];let R=[],O,V;const z={x:0,y:0},j={x:0,y:0},[F,X,y,E]=r3({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[_]*c[_]===-1){O=s.x??F,V=s.y??X;const T=[{x:O,y:f.y},{x:O,y:h.y}],A=[{x:f.x,y:V},{x:h.x,y:V}];l[_]===w?R=_==="x"?T:A:R=_==="x"?A:T}else{const T=[{x:f.x,y:h.y}],A=[{x:h.x,y:f.y}];if(_==="x"?R=l.x===w?A:T:R=l.y===w?T:A,e===r){const P=Math.abs(t[_]-n[_]);if(P<=o){const M=Math.min(o-1,o-P);l[_]===w?z[_]=(f[_]>t[_]?-1:1)*M:j[_]=(h[_]>n[_]?-1:1)*M}}if(e!==r){const P=_==="x"?"y":"x",M=l[_]===c[P],K=f[P]>h[P],C=f[P]<h[P];(l[_]===1&&(!M&&K||M&&C)||l[_]!==1&&(!M&&C||M&&K))&&(R=_==="x"?T:A)}const x={x:f.x+z.x,y:f.y+z.y},k={x:h.x+j.x,y:h.y+j.y},I=Math.max(Math.abs(x.x-R[0].x),Math.abs(k.x-R[0].x)),B=Math.max(Math.abs(x.y-R[0].y),Math.abs(k.y-R[0].y));I>=B?(O=(x.x+k.x)/2,V=R[0].y):(O=R[0].x,V=(x.y+k.y)/2)}return[[t,{x:f.x+z.x,y:f.y+z.y},...R,{x:h.x+j.x,y:h.y+j.y},n],O,V,y,E]}function y6(t,e,n,r){const s=Math.min(VT(t,e)/2,VT(e,n)/2,r),{x:o,y:l}=e;if(t.x===o&&o===n.x||t.y===l&&l===n.y)return`L${o} ${l}`;if(t.y===l){const h=t.x<n.x?-1:1,m=t.y<n.y?1:-1;return`L ${o+s*h},${l}Q ${o},${l} ${o},${l+s*m}`}const c=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${o},${l+s*f}Q ${o},${l} ${o+s*c},${l}`}function My({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:o=Te.Top,borderRadius:l=5,centerX:c,centerY:f,offset:h=20}){const[m,_,w,R,O]=g6({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:f},offset:h});return[m.reduce((z,j,F)=>{let X="";return F>0&&F<m.length-1?X=y6(m[F-1],j,m[F+1],l):X=`${F===0?"M":"L"}${j.x} ${j.y}`,z+=X,z},""),_,w,R,O]}const Xp=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,sourcePosition:_=Te.Bottom,targetPosition:w=Te.Top,markerEnd:R,markerStart:O,pathOptions:V,interactionWidth:z})=>{const[j,F,X]=My({sourceX:t,sourceY:e,sourcePosition:_,targetX:n,targetY:r,targetPosition:w,borderRadius:V?.borderRadius,offset:V?.offset});return he.createElement(jd,{path:j,labelX:F,labelY:X,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:R,markerStart:O,interactionWidth:z})});Xp.displayName="SmoothStepEdge";const Yv=$.memo(t=>he.createElement(Xp,{...t,pathOptions:$.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Yv.displayName="StepEdge";function v6({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,l,c]=r3({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,l,c]}const Xv=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:_,markerStart:w,interactionWidth:R})=>{const[O,V,z]=v6({sourceX:t,sourceY:e,targetX:n,targetY:r});return he.createElement(jd,{path:O,labelX:V,labelY:z,label:s,labelStyle:o,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:m,markerEnd:_,markerStart:w,interactionWidth:R})});Xv.displayName="StraightEdge";function Sh(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function LT({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case Te.Left:return[e-Sh(e-r,o),n];case Te.Right:return[e+Sh(r-e,o),n];case Te.Top:return[e,n-Sh(n-s,o)];case Te.Bottom:return[e,n+Sh(s-n,o)]}}function a3({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:o=Te.Top,curvature:l=.25}){const[c,f]=LT({pos:n,x1:t,y1:e,x2:r,y2:s,c:l}),[h,m]=LT({pos:o,x1:r,y1:s,x2:t,y2:e,c:l}),[_,w,R,O]=i3({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:m});return[`M${t},${e} C${c},${f} ${h},${m} ${r},${s}`,_,w,R,O]}const mp=$.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:o=Te.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:R,markerStart:O,pathOptions:V,interactionWidth:z})=>{const[j,F,X]=a3({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:V?.curvature});return he.createElement(jd,{path:j,labelX:F,labelY:X,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:m,labelBgBorderRadius:_,style:w,markerEnd:R,markerStart:O,interactionWidth:z})});mp.displayName="BezierEdge";const Wv=$.createContext(null),_6=Wv.Provider;Wv.Consumer;const w6=()=>$.useContext(Wv),b6=t=>"id"in t&&"source"in t&&"target"in t,E6=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Py=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,T6=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),S6=(t,e)=>{if(!t.source||!t.target)return e;let n;return b6(t)?n={...t}:n={...t,id:E6(t)},T6(n,e)?e:e.concat(n)},Oy=({x:t,y:e},[n,r,s],o,[l,c])=>{const f={x:(t-n)/s,y:(e-r)/s};return o?{x:l*Math.round(f.x/l),y:c*Math.round(f.y/c)}:f},o3=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),Zl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},Qv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:l}=Zl(s,e).positionAbsolute;return c6(r,Gv({x:o,y:l,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return d6(n)},l3=(t,e,[n,r,s]=[0,0,1],o=!1,l=!1,c=[0,0])=>{const f={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},h=[];return t.forEach(m=>{const{width:_,height:w,selectable:R=!0,hidden:O=!1}=m;if(l&&!R||O)return!1;const{positionAbsolute:V}=Zl(m,c),z={x:V.x,y:V.y,width:_||0,height:w||0},j=Ny(f,z),F=typeof _>"u"||typeof w>"u"||_===null||w===null,X=o&&j>0,y=(_||0)*(w||0);(F||X||j>=y||m.dragging)&&h.push(m)}),h},u3=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},c3=(t,e,n,r,s,o=.1)=>{const l=e/(t.width*(1+o)),c=n/(t.height*(1+o)),f=Math.min(l,c),h=lu(f,r,s),m=t.x+t.width/2,_=t.y+t.height/2,w=e/2-m*h,R=n/2-_*h;return{x:w,y:R,zoom:h}},fo=(t,e=0)=>t.transition().duration(e);function zT(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function A6(t,e,n,r,s,o){const{x:l,y:c}=da(t),h=e.elementsFromPoint(l,c).find(O=>O.classList.contains("react-flow__handle"));if(h){const O=h.getAttribute("data-nodeid");if(O){const V=Zv(void 0,h),z=h.getAttribute("data-handleid"),j=o({nodeId:O,id:z,type:V});if(j){const F=s.find(X=>X.nodeId===O&&X.type===V&&X.id===z);return{handle:{id:z,type:V,nodeId:O,x:F?.x||n.x,y:F?.y||n.y},validHandleResult:j}}}}let m=[],_=1/0;if(s.forEach(O=>{const V=Math.sqrt((O.x-n.x)**2+(O.y-n.y)**2);if(V<=r){const z=o(O);V<=_&&(V<_?m=[{handle:O,validHandleResult:z}]:V===_&&m.push({handle:O,validHandleResult:z}),_=V)}}),!m.length)return{handle:null,validHandleResult:d3()};if(m.length===1)return m[0];const w=m.some(({validHandleResult:O})=>O.isValid),R=m.some(({handle:O})=>O.type==="target");return m.find(({handle:O,validHandleResult:V})=>R?O.type==="target":w?V.isValid:!0)||m[0]}const x6={source:null,target:null,sourceHandle:null,targetHandle:null},d3=()=>({handleDomNode:null,isValid:!1,connection:x6,endHandle:null});function f3(t,e,n,r,s,o,l){const c=s==="target",f=l.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),h={...d3(),handleDomNode:f};if(f){const m=Zv(void 0,f),_=f.getAttribute("data-nodeid"),w=f.getAttribute("data-handleid"),R=f.classList.contains("connectable"),O=f.classList.contains("connectableend"),V={source:c?_:n,sourceHandle:c?w:r,target:c?n:_,targetHandle:c?r:w};h.connection=V,R&&O&&(e===ya.Strict?c&&m==="source"||!c&&m==="target":_!==n||w!==r)&&(h.endHandle={nodeId:_,handleId:w,type:m},h.isValid=o(V))}return h}function C6({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[Ot]){const{handleBounds:l}=o[Ot];let c=[],f=[];l&&(c=zT(o,l,"source",`${e}-${n}-${r}`),f=zT(o,l,"target",`${e}-${n}-${r}`)),s.push(...c,...f)}return s},[])}function Zv(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function j0(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function R6(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function h3({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:l,isValidConnection:c,edgeUpdaterType:f,onReconnectEnd:h}){const m=e3(t.target),{connectionMode:_,domNode:w,autoPanOnConnect:R,connectionRadius:O,onConnectStart:V,panBy:z,getNodes:j,cancelConnection:F}=o();let X=0,y;const{x:E,y:b}=da(t),T=m?.elementFromPoint(E,b),A=Zv(f,T),x=w?.getBoundingClientRect();if(!x||!A)return;let k,I=da(t,x),B=!1,P=null,M=!1,K=null;const C=C6({nodes:j(),nodeId:n,handleId:e,handleType:A}),q=()=>{if(!R)return;const[U,Q]=Jx(I,x);z({x:U,y:Q}),X=requestAnimationFrame(q)};l({connectionPosition:I,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:e,type:A},connectionEndHandle:null}),V?.(t,{nodeId:n,handleId:e,handleType:A});function Y(U){const{transform:Q}=o();I=da(U,x);const{handle:ne,validHandleResult:J}=A6(U,m,Oy(I,Q,!1,[1,1]),O,C,te=>f3(te,_,n,e,s?"target":"source",c,m));if(y=ne,B||(q(),B=!0),K=J.handleDomNode,P=J.connection,M=J.isValid,l({connectionPosition:y&&M?o3({x:y.x,y:y.y},Q):I,connectionStatus:R6(!!y,M),connectionEndHandle:J.endHandle}),!y&&!M&&!K)return j0(k);P.source!==P.target&&K&&(j0(k),k=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",M),K.classList.toggle("react-flow__handle-valid",M))}function W(U){(y||K)&&P&&M&&r?.(P),o().onConnectEnd?.(U),f&&h?.(U),j0(k),F(),cancelAnimationFrame(X),B=!1,M=!1,P=null,K=null,m.removeEventListener("mousemove",Y),m.removeEventListener("mouseup",W),m.removeEventListener("touchmove",Y),m.removeEventListener("touchend",W)}m.addEventListener("mousemove",Y),m.addEventListener("mouseup",W),m.addEventListener("touchmove",Y),m.addEventListener("touchend",W)}const jT=()=>!0,k6=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),I6=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:l}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:l?.nodeId===t&&l?.handleId===e&&l?.type===n}},p3=$.forwardRef(({type:t="source",position:e=Te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:c,children:f,className:h,onMouseDown:m,onTouchStart:_,...w},R)=>{const O=l||null,V=t==="target",z=hn(),j=w6(),{connectOnClick:F,noPanClassName:X}=Ct(k6,Dn),{connecting:y,clickConnecting:E}=Ct(I6(j,O,t),Dn);j||z.getState().onError?.("010",vs.error010());const b=x=>{const{defaultEdgeOptions:k,onConnect:I,hasDefaultEdges:B}=z.getState(),P={...k,...x};if(B){const{edges:M,setEdges:K}=z.getState();K(S6(P,M))}I?.(P),c?.(P)},T=x=>{if(!j)return;const k=n3(x);s&&(k&&x.button===0||!k)&&h3({event:x,handleId:O,nodeId:j,onConnect:b,isTarget:V,getState:z.getState,setState:z.setState,isValidConnection:n||z.getState().isValidConnection||jT}),k?m?.(x):_?.(x)},A=x=>{const{onClickConnectStart:k,onClickConnectEnd:I,connectionClickStartHandle:B,connectionMode:P,isValidConnection:M}=z.getState();if(!j||!B&&!s)return;if(!B){k?.(x,{nodeId:j,handleId:O,handleType:t}),z.setState({connectionClickStartHandle:{nodeId:j,type:t,handleId:O}});return}const K=e3(x.target),C=n||M||jT,{connection:q,isValid:Y}=f3({nodeId:j,id:O,type:t},P,B.nodeId,B.handleId||null,B.type,C,K);Y&&b(q),I?.(x),z.setState({connectionClickStartHandle:null})};return he.createElement("div",{"data-handleid":O,"data-nodeid":j,"data-handlepos":e,"data-id":`${j}-${O}-${t}`,className:$n(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",X,h,{source:!V,target:V,connectable:r,connectablestart:s,connectableend:o,connecting:E,connectionindicator:r&&(s&&!y||o&&y)}]),onMouseDown:T,onTouchStart:T,onClick:F?A:void 0,ref:R,...w},f)});p3.displayName="Handle";var kn=$.memo(p3);const m3=({data:t,isConnectable:e,targetPosition:n=Te.Top,sourcePosition:r=Te.Bottom})=>he.createElement(he.Fragment,null,he.createElement(kn,{type:"target",position:n,isConnectable:e}),t?.label,he.createElement(kn,{type:"source",position:r,isConnectable:e}));m3.displayName="DefaultNode";var Vy=$.memo(m3);const g3=({data:t,isConnectable:e,sourcePosition:n=Te.Bottom})=>he.createElement(he.Fragment,null,t?.label,he.createElement(kn,{type:"source",position:n,isConnectable:e}));g3.displayName="InputNode";var y3=$.memo(g3);const v3=({data:t,isConnectable:e,targetPosition:n=Te.Top})=>he.createElement(he.Fragment,null,he.createElement(kn,{type:"target",position:n,isConnectable:e}),t?.label);v3.displayName="OutputNode";var _3=$.memo(v3);const Jv=()=>null;Jv.displayName="GroupNode";const N6=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Ah=t=>t.id;function D6(t,e){return Dn(t.selectedNodes.map(Ah),e.selectedNodes.map(Ah))&&Dn(t.selectedEdges.map(Ah),e.selectedEdges.map(Ah))}const w3=$.memo(({onSelectionChange:t})=>{const e=hn(),{selectedNodes:n,selectedEdges:r}=Ct(N6,D6);return $.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});w3.displayName="SelectionListener";const M6=t=>!!t.onSelectionChange;function P6({onSelectionChange:t}){const e=Ct(M6);return t||e?he.createElement(w3,{onSelectionChange:t}):null}const O6=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Il(t,e){$.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function qe(t,e,n){$.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const V6=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:f,nodesDraggable:h,nodesConnectable:m,nodesFocusable:_,edgesFocusable:w,edgesUpdatable:R,elevateNodesOnSelect:O,minZoom:V,maxZoom:z,nodeExtent:j,onNodesChange:F,onEdgesChange:X,elementsSelectable:y,connectionMode:E,snapGrid:b,snapToGrid:T,translateExtent:A,connectOnClick:x,defaultEdgeOptions:k,fitView:I,fitViewOptions:B,onNodesDelete:P,onEdgesDelete:M,onNodeDrag:K,onNodeDragStart:C,onNodeDragStop:q,onSelectionDrag:Y,onSelectionDragStart:W,onSelectionDragStop:U,noPanClassName:Q,nodeOrigin:ne,rfId:J,autoPanOnConnect:te,autoPanOnNodeDrag:oe,onError:ce,connectionRadius:fe,isValidConnection:me,nodeDragThreshold:be})=>{const{setNodes:Ce,setEdges:Qe,setDefaultNodesAndEdges:Ze,setMinZoom:Ve,setMaxZoom:rt,setTranslateExtent:st,setNodeExtent:Ht,reset:je}=Ct(O6,Dn),Ee=hn();return $.useEffect(()=>{const kt=r?.map(Sn=>({...Sn,...k}));return Ze(n,kt),()=>{je()}},[]),qe("defaultEdgeOptions",k,Ee.setState),qe("connectionMode",E,Ee.setState),qe("onConnect",s,Ee.setState),qe("onConnectStart",o,Ee.setState),qe("onConnectEnd",l,Ee.setState),qe("onClickConnectStart",c,Ee.setState),qe("onClickConnectEnd",f,Ee.setState),qe("nodesDraggable",h,Ee.setState),qe("nodesConnectable",m,Ee.setState),qe("nodesFocusable",_,Ee.setState),qe("edgesFocusable",w,Ee.setState),qe("edgesUpdatable",R,Ee.setState),qe("elementsSelectable",y,Ee.setState),qe("elevateNodesOnSelect",O,Ee.setState),qe("snapToGrid",T,Ee.setState),qe("snapGrid",b,Ee.setState),qe("onNodesChange",F,Ee.setState),qe("onEdgesChange",X,Ee.setState),qe("connectOnClick",x,Ee.setState),qe("fitViewOnInit",I,Ee.setState),qe("fitViewOnInitOptions",B,Ee.setState),qe("onNodesDelete",P,Ee.setState),qe("onEdgesDelete",M,Ee.setState),qe("onNodeDrag",K,Ee.setState),qe("onNodeDragStart",C,Ee.setState),qe("onNodeDragStop",q,Ee.setState),qe("onSelectionDrag",Y,Ee.setState),qe("onSelectionDragStart",W,Ee.setState),qe("onSelectionDragStop",U,Ee.setState),qe("noPanClassName",Q,Ee.setState),qe("nodeOrigin",ne,Ee.setState),qe("rfId",J,Ee.setState),qe("autoPanOnConnect",te,Ee.setState),qe("autoPanOnNodeDrag",oe,Ee.setState),qe("onError",ce,Ee.setState),qe("connectionRadius",fe,Ee.setState),qe("isValidConnection",me,Ee.setState),qe("nodeDragThreshold",be,Ee.setState),Il(t,Ce),Il(e,Qe),Il(V,Ve),Il(z,rt),Il(A,st),Il(j,Ht),null},UT={display:"none"},L6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},b3="react-flow__node-desc",E3="react-flow__edge-desc",z6="react-flow__aria-live",j6=t=>t.ariaLiveMessage;function U6({rfId:t}){const e=Ct(j6);return he.createElement("div",{id:`${z6}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:L6},e)}function B6({rfId:t,disableKeyboardA11y:e}){return he.createElement(he.Fragment,null,he.createElement("div",{id:`${b3}-${t}`,style:UT},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),he.createElement("div",{id:`${E3}-${t}`,style:UT},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&he.createElement(U6,{rfId:t}))}var gd=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=$.useState(!1),s=$.useRef(!1),o=$.useRef(new Set([])),[l,c]=$.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(_=>typeof _=="string").map(_=>_.split("+")),m=h.reduce((_,w)=>_.concat(...w),[]);return[h,m]}return[[],[]]},[t]);return $.useEffect(()=>{const f=typeof document<"u"?document:null,h=e?.target||f;if(t!==null){const m=R=>{if(s.current=R.ctrlKey||R.metaKey||R.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&Dy(R))return!1;const V=HT(R.code,c);o.current.add(R[V]),BT(l,o.current,!1)&&(R.preventDefault(),r(!0))},_=R=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&Dy(R))return!1;const V=HT(R.code,c);BT(l,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(R[V]),R.key==="Meta"&&o.current.clear(),s.current=!1},w=()=>{o.current.clear(),r(!1)};return h?.addEventListener("keydown",m),h?.addEventListener("keyup",_),window.addEventListener("blur",w),()=>{h?.removeEventListener("keydown",m),h?.removeEventListener("keyup",_),window.removeEventListener("blur",w)}}},[t,r]),n};function BT(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function HT(t,e){return e.includes(t)?"code":"key"}function T3(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),l=Zl(o,r);return T3(o,e,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:(o[Ot]?.z??0)>(n.z??0)?o[Ot]?.z??0:n.z??0},r)}function S3(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:l,z:c}=T3(r,t,{...r.position,z:r[Ot]?.z??0},e);r.positionAbsolute={x:o,y:l},r[Ot].z=c,n?.[r.id]&&(r[Ot].isParent=!0)}})}function U0(t,e,n,r){const s=new Map,o={},l=r?1e3:0;return t.forEach(c=>{const f=(jr(c.zIndex)?c.zIndex:0)+(c.selected?l:0),h=e.get(c.id),m={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},_=c.parentNode||c.parentId;_&&(o[_]=!0);const w=h?.type&&h?.type!==c.type;Object.defineProperty(m,Ot,{enumerable:!1,value:{handleBounds:w?void 0:h?.[Ot]?.handleBounds,z:f}}),s.set(c.id,m)}),S3(s,n,o),s}function A3(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:l,d3Zoom:c,d3Selection:f,fitViewOnInitDone:h,fitViewOnInit:m,nodeOrigin:_}=t(),w=e.initial&&!h&&m;if(c&&f&&(w||!e.initial)){const O=n().filter(z=>{const j=e.includeHiddenNodes?z.width&&z.height:!z.hidden;return e.nodes?.length?j&&e.nodes.some(F=>F.id===z.id):j}),V=O.every(z=>z.width&&z.height);if(O.length>0&&V){const z=Qv(O,_),{x:j,y:F,zoom:X}=c3(z,r,s,e.minZoom??o,e.maxZoom??l,e.padding??.1),y=ca.translate(j,F).scale(X);return typeof e.duration=="number"&&e.duration>0?c.transform(fo(f,e.duration),y):c.transform(f,y),!0}}return!1}function H6(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Ot]:r[Ot],selected:n.selected})}),new Map(e)}function $6(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function xh({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:l,onEdgesChange:c,hasDefaultNodes:f,hasDefaultEdges:h}=n();t?.length&&(f&&r({nodeInternals:H6(t,s)}),l?.(t)),e?.length&&(h&&r({edges:$6(e,o)}),c?.(e))}const Nl=()=>{},F6={zoomIn:Nl,zoomOut:Nl,zoomTo:Nl,getZoom:()=>1,setViewport:Nl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Nl,fitBounds:Nl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},q6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),G6=()=>{const t=hn(),{d3Zoom:e,d3Selection:n}=Ct(q6,Dn);return $.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(fo(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(fo(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(fo(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[l,c,f]=t.getState().transform,h=ca.translate(s.x??l,s.y??c).scale(s.zoom??f);e.transform(fo(n,o?.duration),h)},getViewport:()=>{const[s,o,l]=t.getState().transform;return{x:s,y:o,zoom:l}},fitView:s=>A3(t.getState,s),setCenter:(s,o,l)=>{const{width:c,height:f,maxZoom:h}=t.getState(),m=typeof l?.zoom<"u"?l.zoom:h,_=c/2-s*m,w=f/2-o*m,R=ca.translate(_,w).scale(m);e.transform(fo(n,l?.duration),R)},fitBounds:(s,o)=>{const{width:l,height:c,minZoom:f,maxZoom:h}=t.getState(),{x:m,y:_,zoom:w}=c3(s,l,c,f,h,o?.padding??.1),R=ca.translate(m,_).scale(w);e.transform(fo(n,o?.duration),R)},project:s=>{const{transform:o,snapToGrid:l,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Oy(s,o,l,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:l,snapGrid:c,domNode:f}=t.getState();if(!f)return s;const{x:h,y:m}=f.getBoundingClientRect(),_={x:s.x-h,y:s.y-m};return Oy(_,o,l,c)},flowToScreenPosition:s=>{const{transform:o,domNode:l}=t.getState();if(!l)return s;const{x:c,y:f}=l.getBoundingClientRect(),h=o3(s,o);return{x:h.x+c,y:h.y+f}},viewportInitialized:!0}:F6,[e,n])};function Ud(){const t=G6(),e=hn(),n=$.useCallback(()=>e.getState().getNodes().map(V=>({...V})),[]),r=$.useCallback(V=>e.getState().nodeInternals.get(V),[]),s=$.useCallback(()=>{const{edges:V=[]}=e.getState();return V.map(z=>({...z}))},[]),o=$.useCallback(V=>{const{edges:z=[]}=e.getState();return z.find(j=>j.id===V)},[]),l=$.useCallback(V=>{const{getNodes:z,setNodes:j,hasDefaultNodes:F,onNodesChange:X}=e.getState(),y=z(),E=typeof V=="function"?V(y):V;if(F)j(E);else if(X){const b=E.length===0?y.map(T=>({type:"remove",id:T.id})):E.map(T=>({item:T,type:"reset"}));X(b)}},[]),c=$.useCallback(V=>{const{edges:z=[],setEdges:j,hasDefaultEdges:F,onEdgesChange:X}=e.getState(),y=typeof V=="function"?V(z):V;if(F)j(y);else if(X){const E=y.length===0?z.map(b=>({type:"remove",id:b.id})):y.map(b=>({item:b,type:"reset"}));X(E)}},[]),f=$.useCallback(V=>{const z=Array.isArray(V)?V:[V],{getNodes:j,setNodes:F,hasDefaultNodes:X,onNodesChange:y}=e.getState();if(X){const b=[...j(),...z];F(b)}else if(y){const E=z.map(b=>({item:b,type:"add"}));y(E)}},[]),h=$.useCallback(V=>{const z=Array.isArray(V)?V:[V],{edges:j=[],setEdges:F,hasDefaultEdges:X,onEdgesChange:y}=e.getState();if(X)F([...j,...z]);else if(y){const E=z.map(b=>({item:b,type:"add"}));y(E)}},[]),m=$.useCallback(()=>{const{getNodes:V,edges:z=[],transform:j}=e.getState(),[F,X,y]=j;return{nodes:V().map(E=>({...E})),edges:z.map(E=>({...E})),viewport:{x:F,y:X,zoom:y}}},[]),_=$.useCallback(({nodes:V,edges:z})=>{const{nodeInternals:j,getNodes:F,edges:X,hasDefaultNodes:y,hasDefaultEdges:E,onNodesDelete:b,onEdgesDelete:T,onNodesChange:A,onEdgesChange:x}=e.getState(),k=(V||[]).map(K=>K.id),I=(z||[]).map(K=>K.id),B=F().reduce((K,C)=>{const q=C.parentNode||C.parentId,Y=!k.includes(C.id)&&q&&K.find(U=>U.id===q);return(typeof C.deletable=="boolean"?C.deletable:!0)&&(k.includes(C.id)||Y)&&K.push(C),K},[]),P=X.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),M=P.filter(K=>I.includes(K.id));if(B||M){const K=u3(B,P),C=[...M,...K],q=C.reduce((Y,W)=>(Y.includes(W.id)||Y.push(W.id),Y),[]);if((E||y)&&(E&&e.setState({edges:X.filter(Y=>!q.includes(Y.id))}),y&&(B.forEach(Y=>{j.delete(Y.id)}),e.setState({nodeInternals:new Map(j)}))),q.length>0&&(T?.(C),x&&x(q.map(Y=>({id:Y,type:"remove"})))),B.length>0&&(b?.(B),A)){const Y=B.map(W=>({id:W.id,type:"remove"}));A(Y)}}},[]),w=$.useCallback(V=>{const z=f6(V),j=z?null:e.getState().nodeInternals.get(V.id);return!z&&!j?[null,null,z]:[z?V:MT(j),j,z]},[]),R=$.useCallback((V,z=!0,j)=>{const[F,X,y]=w(V);return F?(j||e.getState().getNodes()).filter(E=>{if(!y&&(E.id===X.id||!E.positionAbsolute))return!1;const b=MT(E),T=Ny(b,F);return z&&T>0||T>=F.width*F.height}):[]},[]),O=$.useCallback((V,z,j=!0)=>{const[F]=w(V);if(!F)return!1;const X=Ny(F,z);return j&&X>0||X>=F.width*F.height},[]);return $.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:l,setEdges:c,addNodes:f,addEdges:h,toObject:m,deleteElements:_,getIntersectingNodes:R,isNodeIntersecting:O}),[t,n,r,s,o,l,c,f,h,m,_,R,O])}const K6={actInsideInputWithModifier:!1};var Y6=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=hn(),{deleteElements:r}=Ud(),s=gd(t,K6),o=gd(e);$.useEffect(()=>{if(s){const{edges:l,getNodes:c}=n.getState(),f=c().filter(m=>m.selected),h=l.filter(m=>m.selected);r({nodes:f,edges:h}),n.setState({nodesSelectionActive:!1})}},[s]),$.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function X6(t){const e=hn();$.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=Fv(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",vs.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const e_={position:"absolute",width:"100%",height:"100%",top:0,left:0},W6=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Ch=t=>({x:t.x,y:t.y,zoom:t.k}),Dl=(t,e)=>t.target.closest(`.${e}`),$T=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),FT=t=>{const e=t.ctrlKey&&pp()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Q6=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Z6=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:f=yo.Free,zoomOnDoubleClick:h=!0,elementsSelectable:m,panOnDrag:_=!0,defaultViewport:w,translateExtent:R,minZoom:O,maxZoom:V,zoomActivationKeyCode:z,preventScrolling:j=!0,children:F,noWheelClassName:X,noPanClassName:y})=>{const E=$.useRef(),b=hn(),T=$.useRef(!1),A=$.useRef(!1),x=$.useRef(null),k=$.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:B,d3ZoomHandler:P,userSelectionActive:M}=Ct(Q6,Dn),K=gd(z),C=$.useRef(0),q=$.useRef(!1),Y=$.useRef();return X6(x),$.useEffect(()=>{if(x.current){const W=x.current.getBoundingClientRect(),U=i6().scaleExtent([O,V]).translateExtent(R),Q=Zr(x.current).call(U),ne=ca.translate(w.x,w.y).scale(lu(w.zoom,O,V)),J=[[0,0],[W.width,W.height]],te=U.constrain()(ne,J,R);U.transform(Q,te),U.wheelDelta(FT),b.setState({d3Zoom:U,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[te.x,te.y,te.k],domNode:x.current.closest(".react-flow")})}},[]),$.useEffect(()=>{B&&I&&(l&&!K&&!M?B.on("wheel.zoom",W=>{if(Dl(W,X))return!1;W.preventDefault(),W.stopImmediatePropagation();const U=B.property("__zoom").k||1;if(W.ctrlKey&&o){const me=Ci(W),be=FT(W),Ce=U*Math.pow(2,be);I.scaleTo(B,Ce,me,W);return}const Q=W.deltaMode===1?20:1;let ne=f===yo.Vertical?0:W.deltaX*Q,J=f===yo.Horizontal?0:W.deltaY*Q;!pp()&&W.shiftKey&&f!==yo.Vertical&&(ne=W.deltaY*Q,J=0),I.translateBy(B,-(ne/U)*c,-(J/U)*c,{internal:!0});const te=Ch(B.property("__zoom")),{onViewportChangeStart:oe,onViewportChange:ce,onViewportChangeEnd:fe}=b.getState();clearTimeout(Y.current),q.current||(q.current=!0,e?.(W,te),oe?.(te)),q.current&&(t?.(W,te),ce?.(te),Y.current=setTimeout(()=>{n?.(W,te),fe?.(te),q.current=!1},150))},{passive:!1}):typeof P<"u"&&B.on("wheel.zoom",function(W,U){if(!j&&W.type==="wheel"&&!W.ctrlKey||Dl(W,X))return null;W.preventDefault(),P.call(this,W,U)},{passive:!1}))},[M,l,f,B,I,P,K,o,j,X,e,t,n]),$.useEffect(()=>{I&&I.on("start",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;C.current=W.sourceEvent?.button;const{onViewportChangeStart:U}=b.getState(),Q=Ch(W.transform);T.current=!0,k.current=Q,W.sourceEvent?.type==="mousedown"&&b.setState({paneDragging:!0}),U?.(Q),e?.(W.sourceEvent,Q)})},[I,e]),$.useEffect(()=>{I&&(M&&!T.current?I.on("zoom",null):M||I.on("zoom",W=>{const{onViewportChange:U}=b.getState();if(b.setState({transform:[W.transform.x,W.transform.y,W.transform.k]}),A.current=!!(r&&$T(_,C.current??0)),(t||U)&&!W.sourceEvent?.internal){const Q=Ch(W.transform);U?.(Q),t?.(W.sourceEvent,Q)}}))},[M,I,t,_,r]),$.useEffect(()=>{I&&I.on("end",W=>{if(!W.sourceEvent||W.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=b.getState();if(T.current=!1,b.setState({paneDragging:!1}),r&&$T(_,C.current??0)&&!A.current&&r(W.sourceEvent),A.current=!1,(n||U)&&W6(k.current,W.transform)){const Q=Ch(W.transform);k.current=Q,clearTimeout(E.current),E.current=setTimeout(()=>{U?.(Q),n?.(W.sourceEvent,Q)},l?150:0)}})},[I,l,_,n,r]),$.useEffect(()=>{I&&I.filter(W=>{const U=K||s,Q=o&&W.ctrlKey;if((_===!0||Array.isArray(_)&&_.includes(1))&&W.button===1&&W.type==="mousedown"&&(Dl(W,"react-flow__node")||Dl(W,"react-flow__edge")))return!0;if(!_&&!U&&!l&&!h&&!o||M||!h&&W.type==="dblclick"||Dl(W,X)&&W.type==="wheel"||Dl(W,y)&&(W.type!=="wheel"||l&&W.type==="wheel"&&!K)||!o&&W.ctrlKey&&W.type==="wheel"||!U&&!l&&!Q&&W.type==="wheel"||!_&&(W.type==="mousedown"||W.type==="touchstart")||Array.isArray(_)&&!_.includes(W.button)&&W.type==="mousedown")return!1;const ne=Array.isArray(_)&&_.includes(W.button)||!W.button||W.button<=1;return(!W.ctrlKey||W.type==="wheel")&&ne})},[M,I,s,o,l,h,_,m,K]),he.createElement("div",{className:"react-flow__renderer",ref:x,style:e_},F)},J6=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function e5(){const{userSelectionActive:t,userSelectionRect:e}=Ct(J6,Dn);return t&&e?he.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function qT(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function x3(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const l={...s};for(const c of o)if(c)switch(c.type){case"select":{l.selected=c.selected;break}case"position":{typeof c.position<"u"&&(l.position=c.position),typeof c.positionAbsolute<"u"&&(l.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(l.dragging=c.dragging),l.expandParent&&qT(r,l);break}case"dimensions":{typeof c.dimensions<"u"&&(l.width=c.dimensions.width,l.height=c.dimensions.height),typeof c.updateStyle<"u"&&(l.style={...l.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(l.resizing=c.resizing),l.expandParent&&qT(r,l);break}case"remove":return r}return r.push(l),r},n)}function C3(t,e){return x3(t,e)}function t5(t,e){return x3(t,e)}const ta=(t,e)=>({id:t,type:"select",selected:e});function Hl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(ta(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(ta(r.id,!1))),n},[])}const B0=(t,e)=>n=>{n.target===e.current&&t?.(n)},n5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),R3=$.memo(({isSelecting:t,selectionMode:e=md.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:m,children:_})=>{const w=$.useRef(null),R=hn(),O=$.useRef(0),V=$.useRef(0),z=$.useRef(),{userSelectionActive:j,elementsSelectable:F,dragging:X}=Ct(n5,Dn),y=()=>{R.setState({userSelectionActive:!1,userSelectionRect:null}),O.current=0,V.current=0},E=P=>{o?.(P),R.getState().resetSelectedElements(),R.setState({nodesSelectionActive:!1})},b=P=>{if(Array.isArray(n)&&n?.includes(2)){P.preventDefault();return}l?.(P)},T=c?P=>c(P):void 0,A=P=>{const{resetSelectedElements:M,domNode:K}=R.getState();if(z.current=K?.getBoundingClientRect(),!F||!t||P.button!==0||P.target!==w.current||!z.current)return;const{x:C,y:q}=da(P,z.current);M(),R.setState({userSelectionRect:{width:0,height:0,startX:C,startY:q,x:C,y:q}}),r?.(P)},x=P=>{const{userSelectionRect:M,nodeInternals:K,edges:C,transform:q,onNodesChange:Y,onEdgesChange:W,nodeOrigin:U,getNodes:Q}=R.getState();if(!t||!z.current||!M)return;R.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ne=da(P,z.current),J=M.startX??0,te=M.startY??0,oe={...M,x:ne.x<J?ne.x:J,y:ne.y<te?ne.y:te,width:Math.abs(ne.x-J),height:Math.abs(ne.y-te)},ce=Q(),fe=l3(K,oe,q,e===md.Partial,!0,U),me=u3(fe,C).map(Ce=>Ce.id),be=fe.map(Ce=>Ce.id);if(O.current!==be.length){O.current=be.length;const Ce=Hl(ce,be);Ce.length&&Y?.(Ce)}if(V.current!==me.length){V.current=me.length;const Ce=Hl(C,me);Ce.length&&W?.(Ce)}R.setState({userSelectionRect:oe})},k=P=>{if(P.button!==0)return;const{userSelectionRect:M}=R.getState();!j&&M&&P.target===w.current&&E?.(P),R.setState({nodesSelectionActive:O.current>0}),y(),s?.(P)},I=P=>{j&&(R.setState({nodesSelectionActive:O.current>0}),s?.(P)),y()},B=F&&(t||j);return he.createElement("div",{className:$n(["react-flow__pane",{dragging:X,selection:t}]),onClick:B?void 0:B0(E,w),onContextMenu:B0(b,w),onWheel:B0(T,w),onMouseEnter:B?void 0:f,onMouseDown:B?A:void 0,onMouseMove:B?x:h,onMouseUp:B?k:void 0,onMouseLeave:B?I:m,ref:w,style:e_},_,he.createElement(e5,null))});R3.displayName="Pane";function k3(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:k3(r,e):!1}function GT(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function r5(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!k3(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function i5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function I3(t,e,n,r,s=[0,0],o){const l=i5(t,t.extent||r);let c=l;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const _=n.get(f),{x:w,y:R}=Zl(_,s).positionAbsolute;c=_&&jr(w)&&jr(R)&&jr(_.width)&&jr(_.height)?[[w+t.width*s[0],R+t.height*s[1]],[w+_.width-t.width+t.width*s[0],R+_.height-t.height+t.height*s[1]]]:c}else o?.("005",vs.error005()),c=l;else if(t.extent&&f&&t.extent!=="parent"){const _=n.get(f),{x:w,y:R}=Zl(_,s).positionAbsolute;c=[[t.extent[0][0]+w,t.extent[0][1]+R],[t.extent[1][0]+w,t.extent[1][1]+R]]}let h={x:0,y:0};if(f){const _=n.get(f);h=Zl(_,s).positionAbsolute}const m=c&&c!=="parent"?qv(e,c):e;return{position:{x:m.x-h.x,y:m.y-h.y},positionAbsolute:m}}function H0({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const KT=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),l=e.getBoundingClientRect(),c={x:l.width*r[0],y:l.height*r[1]};return o.map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(h.left-l.left-c.x)/n,y:(h.top-l.top-c.y)/n,...Fv(f)}})};function Oc(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function Ly({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeInternals:c,onError:f}=e.getState(),h=c.get(t);if(!h){f?.("012",vs.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(o({nodes:[h],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function s5(){const t=hn();return $.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),l=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,f={x:(l-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(f.x/s[0]):f.x,ySnapped:o?s[1]*Math.round(f.y/s[1]):f.y,...f}},[])}function $0(t){return(e,n,r)=>t?.(e,r)}function N3({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:l}){const c=hn(),[f,h]=$.useState(!1),m=$.useRef([]),_=$.useRef({x:null,y:null}),w=$.useRef(0),R=$.useRef(null),O=$.useRef({x:0,y:0}),V=$.useRef(null),z=$.useRef(!1),j=$.useRef(!1),F=$.useRef(!1),X=s5();return $.useEffect(()=>{if(t?.current){const y=Zr(t.current),E=({x:A,y:x})=>{const{nodeInternals:k,onNodeDrag:I,onSelectionDrag:B,updateNodePositions:P,nodeExtent:M,snapGrid:K,snapToGrid:C,nodeOrigin:q,onError:Y}=c.getState();_.current={x:A,y:x};let W=!1,U={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&M){const ne=Qv(m.current,q);U=Gv(ne)}if(m.current=m.current.map(ne=>{const J={x:A-ne.distance.x,y:x-ne.distance.y};C&&(J.x=K[0]*Math.round(J.x/K[0]),J.y=K[1]*Math.round(J.y/K[1]));const te=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];m.current.length>1&&M&&!ne.extent&&(te[0][0]=ne.positionAbsolute.x-U.x+M[0][0],te[1][0]=ne.positionAbsolute.x+(ne.width??0)-U.x2+M[1][0],te[0][1]=ne.positionAbsolute.y-U.y+M[0][1],te[1][1]=ne.positionAbsolute.y+(ne.height??0)-U.y2+M[1][1]);const oe=I3(ne,J,k,te,q,Y);return W=W||ne.position.x!==oe.position.x||ne.position.y!==oe.position.y,ne.position=oe.position,ne.positionAbsolute=oe.positionAbsolute,ne}),!W)return;P(m.current,!0,!0),h(!0);const Q=s?I:$0(B);if(Q&&V.current){const[ne,J]=H0({nodeId:s,dragItems:m.current,nodeInternals:k});Q(V.current,ne,J)}},b=()=>{if(!R.current)return;const[A,x]=Jx(O.current,R.current);if(A!==0||x!==0){const{transform:k,panBy:I}=c.getState();_.current.x=(_.current.x??0)-A/k[2],_.current.y=(_.current.y??0)-x/k[2],I({x:A,y:x})&&E(_.current)}w.current=requestAnimationFrame(b)},T=A=>{const{nodeInternals:x,multiSelectionActive:k,nodesDraggable:I,unselectNodesAndEdges:B,onNodeDragStart:P,onSelectionDragStart:M}=c.getState();j.current=!0;const K=s?P:$0(M);(!l||!o)&&!k&&s&&(x.get(s)?.selected||B()),s&&o&&l&&Ly({id:s,store:c,nodeRef:t});const C=X(A);if(_.current=C,m.current=r5(x,I,C,s),K&&m.current){const[q,Y]=H0({nodeId:s,dragItems:m.current,nodeInternals:x});K(A.sourceEvent,q,Y)}};if(e)y.on(".drag",null);else{const A=mM().on("start",x=>{const{domNode:k,nodeDragThreshold:I}=c.getState();I===0&&T(x),F.current=!1;const B=X(x);_.current=B,R.current=k?.getBoundingClientRect()||null,O.current=da(x.sourceEvent,R.current)}).on("drag",x=>{const k=X(x),{autoPanOnNodeDrag:I,nodeDragThreshold:B}=c.getState();if(x.sourceEvent.type==="touchmove"&&x.sourceEvent.touches.length>1&&(F.current=!0),!F.current){if(!z.current&&j.current&&I&&(z.current=!0,b()),!j.current){const P=k.xSnapped-(_?.current?.x??0),M=k.ySnapped-(_?.current?.y??0);Math.sqrt(P*P+M*M)>B&&T(x)}(_.current.x!==k.xSnapped||_.current.y!==k.ySnapped)&&m.current&&j.current&&(V.current=x.sourceEvent,O.current=da(x.sourceEvent,R.current),E(k))}}).on("end",x=>{if(!(!j.current||F.current)&&(h(!1),z.current=!1,j.current=!1,cancelAnimationFrame(w.current),m.current)){const{updateNodePositions:k,nodeInternals:I,onNodeDragStop:B,onSelectionDragStop:P}=c.getState(),M=s?B:$0(P);if(k(m.current,!1,!1),M){const[K,C]=H0({nodeId:s,dragItems:m.current,nodeInternals:I});M(x.sourceEvent,K,C)}}}).filter(x=>{const k=x.target;return!x.button&&(!n||!GT(k,`.${n}`,t))&&(!r||GT(k,r,t))});return y.call(A),()=>{y.on(".drag",null)}}}},[t,e,n,r,o,c,s,l,X]),f}function D3(){const t=hn();return $.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:l,snapToGrid:c,snapGrid:f,onError:h,nodesDraggable:m}=t.getState(),_=l().filter(F=>F.selected&&(F.draggable||m&&typeof F.draggable>"u")),w=c?f[0]:5,R=c?f[1]:5,O=n.isShiftPressed?4:1,V=n.x*w*O,z=n.y*R*O,j=_.map(F=>{if(F.positionAbsolute){const X={x:F.positionAbsolute.x+V,y:F.positionAbsolute.y+z};c&&(X.x=f[0]*Math.round(X.x/f[0]),X.y=f[1]*Math.round(X.y/f[1]));const{positionAbsolute:y,position:E}=I3(F,X,r,s,void 0,h);F.position=E,F.positionAbsolute=y}return F});o(j,!0,!1)},[])}const Jl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Vc=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:l,xPosOrigin:c,yPosOrigin:f,selected:h,onClick:m,onMouseEnter:_,onMouseMove:w,onMouseLeave:R,onContextMenu:O,onDoubleClick:V,style:z,className:j,isDraggable:F,isSelectable:X,isConnectable:y,isFocusable:E,selectNodesOnDrag:b,sourcePosition:T,targetPosition:A,hidden:x,resizeObserver:k,dragHandle:I,zIndex:B,isParent:P,noDragClassName:M,noPanClassName:K,initialized:C,disableKeyboardA11y:q,ariaLabel:Y,rfId:W,hasHandleBounds:U})=>{const Q=hn(),ne=$.useRef(null),J=$.useRef(null),te=$.useRef(T),oe=$.useRef(A),ce=$.useRef(r),fe=X||F||m||_||w||R,me=D3(),be=Oc(n,Q.getState,_),Ce=Oc(n,Q.getState,w),Qe=Oc(n,Q.getState,R),Ze=Oc(n,Q.getState,O),Ve=Oc(n,Q.getState,V),rt=je=>{const{nodeDragThreshold:Ee}=Q.getState();if(X&&(!b||!F||Ee>0)&&Ly({id:n,store:Q,nodeRef:ne}),m){const kt=Q.getState().nodeInternals.get(n);kt&&m(je,{...kt})}},st=je=>{if(!Dy(je)&&!q)if(t3.includes(je.key)&&X){const Ee=je.key==="Escape";Ly({id:n,store:Q,unselect:Ee,nodeRef:ne})}else F&&h&&Object.prototype.hasOwnProperty.call(Jl,je.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~l}`}),me({x:Jl[je.key].x,y:Jl[je.key].y,isShiftPressed:je.shiftKey}))};$.useEffect(()=>()=>{J.current&&(k?.unobserve(J.current),J.current=null)},[]),$.useEffect(()=>{if(ne.current&&!x){const je=ne.current;(!C||!U||J.current!==je)&&(J.current&&k?.unobserve(J.current),k?.observe(je),J.current=je)}},[x,C,U]),$.useEffect(()=>{const je=ce.current!==r,Ee=te.current!==T,kt=oe.current!==A;ne.current&&(je||Ee||kt)&&(je&&(ce.current=r),Ee&&(te.current=T),kt&&(oe.current=A),Q.getState().updateNodeDimensions([{id:n,nodeElement:ne.current,forceUpdate:!0}]))},[n,r,T,A]);const Ht=N3({nodeRef:ne,disabled:x||!F,noDragClassName:M,handleSelector:I,nodeId:n,isSelectable:X,selectNodesOnDrag:b});return x?null:he.createElement("div",{className:$n(["react-flow__node",`react-flow__node-${r}`,{[K]:F},j,{selected:h,selectable:X,parent:P,dragging:Ht}]),ref:ne,style:{zIndex:B,transform:`translate(${c}px,${f}px)`,pointerEvents:fe?"all":"none",visibility:C?"visible":"hidden",...z},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:be,onMouseMove:Ce,onMouseLeave:Qe,onContextMenu:Ze,onClick:rt,onDoubleClick:Ve,onKeyDown:E?st:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":q?void 0:`${b3}-${W}`,"aria-label":Y},he.createElement(_6,{value:n},he.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:l,selected:h,isConnectable:y,sourcePosition:T,targetPosition:A,dragging:Ht,dragHandle:I,zIndex:B})))};return e.displayName="NodeWrapper",$.memo(e)};const a5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...Qv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function o5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=hn(),{width:s,height:o,x:l,y:c,transformString:f,userSelectionActive:h}=Ct(a5,Dn),m=D3(),_=$.useRef(null);if($.useEffect(()=>{n||_.current?.focus({preventScroll:!0})},[n]),N3({nodeRef:_}),h||!s||!o)return null;const w=t?O=>{const V=r.getState().getNodes().filter(z=>z.selected);t(O,V)}:void 0,R=O=>{Object.prototype.hasOwnProperty.call(Jl,O.key)&&m({x:Jl[O.key].x,y:Jl[O.key].y,isShiftPressed:O.shiftKey})};return he.createElement("div",{className:$n(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},he.createElement("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:w,tabIndex:n?void 0:-1,onKeyDown:n?void 0:R,style:{width:s,height:o,top:c,left:l}}))}var l5=$.memo(o5);const u5=t=>t.nodesSelectionActive,M3=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,deleteKeyCode:c,onMove:f,onMoveStart:h,onMoveEnd:m,selectionKeyCode:_,selectionOnDrag:w,selectionMode:R,onSelectionStart:O,onSelectionEnd:V,multiSelectionKeyCode:z,panActivationKeyCode:j,zoomActivationKeyCode:F,elementsSelectable:X,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:b,panOnScrollSpeed:T,panOnScrollMode:A,zoomOnDoubleClick:x,panOnDrag:k,defaultViewport:I,translateExtent:B,minZoom:P,maxZoom:M,preventScrolling:K,onSelectionContextMenu:C,noWheelClassName:q,noPanClassName:Y,disableKeyboardA11y:W})=>{const U=Ct(u5),Q=gd(_),ne=gd(j),J=ne||k,te=ne||b,oe=Q||w&&J!==!0;return Y6({deleteKeyCode:c,multiSelectionKeyCode:z}),he.createElement(Z6,{onMove:f,onMoveStart:h,onMoveEnd:m,onPaneContextMenu:o,elementsSelectable:X,zoomOnScroll:y,zoomOnPinch:E,panOnScroll:te,panOnScrollSpeed:T,panOnScrollMode:A,zoomOnDoubleClick:x,panOnDrag:!Q&&J,defaultViewport:I,translateExtent:B,minZoom:P,maxZoom:M,zoomActivationKeyCode:F,preventScrolling:K,noWheelClassName:q,noPanClassName:Y},he.createElement(R3,{onSelectionStart:O,onSelectionEnd:V,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:J,isSelecting:!!oe,selectionMode:R},t,U&&he.createElement(l5,{onSelectionContextMenu:C,noPanClassName:Y,disableKeyboardA11y:W})))};M3.displayName="FlowRenderer";var c5=$.memo(M3);function d5(t){return Ct($.useCallback(n=>t?l3(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function f5(t){const e={input:Vc(t.input||y3),default:Vc(t.default||Vy),output:Vc(t.output||_3),group:Vc(t.group||Jv)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=Vc(t[o]||Vy),s),n);return{...e,...r}}const h5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},p5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),P3=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:l}=Ct(p5,Dn),c=d5(t.onlyRenderVisibleElements),f=$.useRef(),h=$.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(_=>{const w=_.map(R=>({id:R.target.getAttribute("data-id"),nodeElement:R.target,forceUpdate:!0}));o(w)});return f.current=m,m},[]);return $.useEffect(()=>()=>{f?.current?.disconnect()},[]),he.createElement("div",{className:"react-flow__nodes",style:e_},c.map(m=>{let _=m.type||"default";t.nodeTypes[_]||(l?.("003",vs.error003(_)),_="default");const w=t.nodeTypes[_]||t.nodeTypes.default,R=!!(m.draggable||e&&typeof m.draggable>"u"),O=!!(m.selectable||s&&typeof m.selectable>"u"),V=!!(m.connectable||n&&typeof m.connectable>"u"),z=!!(m.focusable||r&&typeof m.focusable>"u"),j=t.nodeExtent?qv(m.positionAbsolute,t.nodeExtent):m.positionAbsolute,F=j?.x??0,X=j?.y??0,y=h5({x:F,y:X,width:m.width??0,height:m.height??0,origin:t.nodeOrigin});return he.createElement(w,{key:m.id,id:m.id,className:m.className,style:m.style,type:_,data:m.data,sourcePosition:m.sourcePosition||Te.Bottom,targetPosition:m.targetPosition||Te.Top,hidden:m.hidden,xPos:F,yPos:X,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!m.selected,isDraggable:R,isSelectable:O,isConnectable:V,isFocusable:z,resizeObserver:h,dragHandle:m.dragHandle,zIndex:m[Ot]?.z??0,isParent:!!m[Ot]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!m.width&&!!m.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!m[Ot]?.handleBounds})}))};P3.displayName="NodeRenderer";var m5=$.memo(P3);const g5=(t,e,n)=>n===Te.Left?t-e:n===Te.Right?t+e:t,y5=(t,e,n)=>n===Te.Top?t-e:n===Te.Bottom?t+e:t,YT="react-flow__edgeupdater",XT=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:c})=>he.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:$n([YT,`${YT}-${c}`]),cx:g5(e,r,t),cy:y5(n,r,t),r,stroke:"transparent",fill:"transparent"}),v5=()=>!0;var Ml=t=>{const e=({id:n,className:r,type:s,data:o,onClick:l,onEdgeDoubleClick:c,selected:f,animated:h,label:m,labelStyle:_,labelShowBg:w,labelBgStyle:R,labelBgPadding:O,labelBgBorderRadius:V,style:z,source:j,target:F,sourceX:X,sourceY:y,targetX:E,targetY:b,sourcePosition:T,targetPosition:A,elementsSelectable:x,hidden:k,sourceHandleId:I,targetHandleId:B,onContextMenu:P,onMouseEnter:M,onMouseMove:K,onMouseLeave:C,reconnectRadius:q,onReconnect:Y,onReconnectStart:W,onReconnectEnd:U,markerEnd:Q,markerStart:ne,rfId:J,ariaLabel:te,isFocusable:oe,isReconnectable:ce,pathOptions:fe,interactionWidth:me,disableKeyboardA11y:be})=>{const Ce=$.useRef(null),[Qe,Ze]=$.useState(!1),[Ve,rt]=$.useState(!1),st=hn(),Ht=$.useMemo(()=>`url('#${Py(ne,J)}')`,[ne,J]),je=$.useMemo(()=>`url('#${Py(Q,J)}')`,[Q,J]);if(k)return null;const Ee=Ft=>{const{edges:sn,addSelectedEdges:Vn,unselectNodesAndEdges:Ln,multiSelectionActive:an}=st.getState(),pn=sn.find(zn=>zn.id===n);pn&&(x&&(st.setState({nodesSelectionActive:!1}),pn.selected&&an?(Ln({nodes:[],edges:[pn]}),Ce.current?.blur()):Vn([n])),l&&l(Ft,pn))},kt=Pc(n,st.getState,c),Sn=Pc(n,st.getState,P),Qt=Pc(n,st.getState,M),Jn=Pc(n,st.getState,K),Pn=Pc(n,st.getState,C),On=(Ft,sn)=>{if(Ft.button!==0)return;const{edges:Vn,isValidConnection:Ln}=st.getState(),an=sn?F:j,pn=(sn?B:I)||null,zn=sn?"target":"source",Bi=Ln||v5,Hi=sn,$r=Vn.find(tr=>tr.id===n);rt(!0),W?.(Ft,$r,zn);const er=tr=>{rt(!1),U?.(tr,$r,zn)};h3({event:Ft,handleId:pn,nodeId:an,onConnect:tr=>Y?.($r,tr),isTarget:Hi,getState:st.getState,setState:st.setState,isValidConnection:Bi,edgeUpdaterType:zn,onReconnectEnd:er})},Hr=Ft=>On(Ft,!0),ot=Ft=>On(Ft,!1),Ge=()=>Ze(!0),$t=()=>Ze(!1),Tt=!x&&!l,oi=Ft=>{if(!be&&t3.includes(Ft.key)&&x){const{unselectNodesAndEdges:sn,addSelectedEdges:Vn,edges:Ln}=st.getState();Ft.key==="Escape"?(Ce.current?.blur(),sn({edges:[Ln.find(pn=>pn.id===n)]})):Vn([n])}};return he.createElement("g",{className:$n(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:f,animated:h,inactive:Tt,updating:Qe}]),onClick:Ee,onDoubleClick:kt,onContextMenu:Sn,onMouseEnter:Qt,onMouseMove:Jn,onMouseLeave:Pn,onKeyDown:oe?oi:void 0,tabIndex:oe?0:void 0,role:oe?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":te===null?void 0:te||`Edge from ${j} to ${F}`,"aria-describedby":oe?`${E3}-${J}`:void 0,ref:Ce},!Ve&&he.createElement(t,{id:n,source:j,target:F,selected:f,animated:h,label:m,labelStyle:_,labelShowBg:w,labelBgStyle:R,labelBgPadding:O,labelBgBorderRadius:V,data:o,style:z,sourceX:X,sourceY:y,targetX:E,targetY:b,sourcePosition:T,targetPosition:A,sourceHandleId:I,targetHandleId:B,markerStart:Ht,markerEnd:je,pathOptions:fe,interactionWidth:me}),ce&&he.createElement(he.Fragment,null,(ce==="source"||ce===!0)&&he.createElement(XT,{position:T,centerX:X,centerY:y,radius:q,onMouseDown:Hr,onMouseEnter:Ge,onMouseOut:$t,type:"source"}),(ce==="target"||ce===!0)&&he.createElement(XT,{position:A,centerX:E,centerY:b,radius:q,onMouseDown:ot,onMouseEnter:Ge,onMouseOut:$t,type:"target"})))};return e.displayName="EdgeWrapper",$.memo(e)};function _5(t){const e={default:Ml(t.default||mp),straight:Ml(t.bezier||Xv),step:Ml(t.step||Yv),smoothstep:Ml(t.step||Xp),simplebezier:Ml(t.simplebezier||Kv)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=Ml(t[o]||mp),s),n);return{...e,...r}}function WT(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,l=n?.height||e.height;switch(t){case Te.Top:return{x:r+o/2,y:s};case Te.Right:return{x:r+o,y:s+l/2};case Te.Bottom:return{x:r+o/2,y:s+l};case Te.Left:return{x:r,y:s+l/2}}}function QT(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const w5=(t,e,n,r,s,o)=>{const l=WT(n,t,e),c=WT(o,r,s);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y}};function b5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:l,height:c,transform:f}){const h={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const m=Gv({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:l/f[2],height:c/f[2]}),_=Math.max(0,Math.min(m.x2,h.x2)-Math.max(m.x,h.x)),w=Math.max(0,Math.min(m.y2,h.y2)-Math.max(m.y,h.y));return Math.ceil(_*w)>0}function ZT(t){const e=t?.[Ot]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const E5=[{level:0,isMaxLevel:!0,edges:[]}];function T5(t,e,n=!1){let r=-1;const s=t.reduce((l,c)=>{const f=jr(c.zIndex);let h=f?c.zIndex:0;if(n){const m=e.get(c.target),_=e.get(c.source),w=c.selected||m?.selected||_?.selected,R=Math.max(_?.[Ot]?.z||0,m?.[Ot]?.z||0,1e3);h=(f?c.zIndex:0)+(w?R:0)}return l[h]?l[h].push(c):l[h]=[c],r=h>r?h:r,l},{}),o=Object.entries(s).map(([l,c])=>{const f=+l;return{edges:c,level:f,isMaxLevel:f===r}});return o.length===0?E5:o}function S5(t,e,n){const r=Ct($.useCallback(s=>t?s.edges.filter(o=>{const l=e.get(o.source),c=e.get(o.target);return l?.width&&l?.height&&c?.width&&c?.height&&b5({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return T5(r,e,n)}const A5=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),x5=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),JT={[xo.Arrow]:A5,[xo.ArrowClosed]:x5};function C5(t){const e=hn();return $.useMemo(()=>Object.prototype.hasOwnProperty.call(JT,t)?JT[t]:(e.getState().onError?.("009",vs.error009(t)),null),[t])}const R5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const f=C5(e);return f?he.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},he.createElement(f,{color:n,strokeWidth:l})):null},k5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const c=Py(l,e);r.includes(c)||(s.push({id:c,color:l.color||t,...l}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},O3=({defaultColor:t,rfId:e})=>{const n=Ct($.useCallback(k5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,l)=>o.id!==s[l].id)));return he.createElement("defs",null,n.map(r=>he.createElement(R5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};O3.displayName="MarkerDefinitions";var I5=$.memo(O3);const N5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),V3=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:m,onEdgeDoubleClick:_,onReconnect:w,onReconnectStart:R,onReconnectEnd:O,reconnectRadius:V,children:z,disableKeyboardA11y:j})=>{const{edgesFocusable:F,edgesUpdatable:X,elementsSelectable:y,width:E,height:b,connectionMode:T,nodeInternals:A,onError:x}=Ct(N5,Dn),k=S5(e,A,n);return E?he.createElement(he.Fragment,null,k.map(({level:I,edges:B,isMaxLevel:P})=>he.createElement("svg",{key:I,style:{zIndex:I},width:E,height:b,className:"react-flow__edges react-flow__container"},P&&he.createElement(I5,{defaultColor:t,rfId:r}),he.createElement("g",null,B.map(M=>{const[K,C,q]=ZT(A.get(M.source)),[Y,W,U]=ZT(A.get(M.target));if(!q||!U)return null;let Q=M.type||"default";s[Q]||(x?.("011",vs.error011(Q)),Q="default");const ne=s[Q]||s.default,J=T===ya.Strict?W.target:(W.target??[]).concat(W.source??[]),te=QT(C.source,M.sourceHandle),oe=QT(J,M.targetHandle),ce=te?.position||Te.Bottom,fe=oe?.position||Te.Top,me=!!(M.focusable||F&&typeof M.focusable>"u"),be=M.reconnectable||M.updatable,Ce=typeof w<"u"&&(be||X&&typeof be>"u");if(!te||!oe)return x?.("008",vs.error008(te,M)),null;const{sourceX:Qe,sourceY:Ze,targetX:Ve,targetY:rt}=w5(K,te,ce,Y,oe,fe);return he.createElement(ne,{key:M.id,id:M.id,className:$n([M.className,o]),type:Q,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:Qe,sourceY:Ze,targetX:Ve,targetY:rt,sourcePosition:ce,targetPosition:fe,elementsSelectable:y,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,onClick:m,onEdgeDoubleClick:_,onReconnect:w,onReconnectStart:R,onReconnectEnd:O,reconnectRadius:V,rfId:r,ariaLabel:M.ariaLabel,isFocusable:me,isReconnectable:Ce,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:j})})))),z):null};V3.displayName="EdgeRenderer";var D5=$.memo(V3);const M5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function P5({children:t}){const e=Ct(M5);return he.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function O5(t){const e=Ud(),n=$.useRef(!1);$.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const V5={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},L3=({nodeId:t,handleType:e,style:n,type:r=na.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:l,handleId:c,toX:f,toY:h,connectionMode:m}=Ct($.useCallback(b=>({fromNode:b.nodeInternals.get(t),handleId:b.connectionHandleId,toX:(b.connectionPosition.x-b.transform[0])/b.transform[2],toY:(b.connectionPosition.y-b.transform[1])/b.transform[2],connectionMode:b.connectionMode}),[t]),Dn),_=l?.[Ot]?.handleBounds;let w=_?.[e];if(m===ya.Loose&&(w=w||_?.[e==="source"?"target":"source"]),!l||!w)return null;const R=c?w.find(b=>b.id===c):w[0],O=R?R.x+R.width/2:(l.width??0)/2,V=R?R.y+R.height/2:l.height??0,z=(l.positionAbsolute?.x??0)+O,j=(l.positionAbsolute?.y??0)+V,F=R?.position,X=F?V5[F]:null;if(!F||!X)return null;if(s)return he.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:l,fromHandle:R,fromX:z,fromY:j,toX:f,toY:h,fromPosition:F,toPosition:X,connectionStatus:o});let y="";const E={sourceX:z,sourceY:j,sourcePosition:F,targetX:f,targetY:h,targetPosition:X};return r===na.Bezier?[y]=a3(E):r===na.Step?[y]=My({...E,borderRadius:0}):r===na.SmoothStep?[y]=My(E):r===na.SimpleBezier?[y]=s3(E):y=`M${z},${j} ${f},${h}`,he.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};L3.displayName="ConnectionLine";const L5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function z5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:l,width:c,height:f,connectionStatus:h}=Ct(L5,Dn);return!(s&&o&&c&&l)?null:he.createElement("svg",{style:t,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},he.createElement("g",{className:$n(["react-flow__connection",h])},he.createElement(L3,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:h})))}function eS(t,e){return $.useRef(null),hn(),$.useMemo(()=>e(t),[t])}const z3=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:f,onEdgeDoubleClick:h,onNodeMouseEnter:m,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:R,onSelectionContextMenu:O,onSelectionStart:V,onSelectionEnd:z,connectionLineType:j,connectionLineStyle:F,connectionLineComponent:X,connectionLineContainerStyle:y,selectionKeyCode:E,selectionOnDrag:b,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:x,zoomActivationKeyCode:k,deleteKeyCode:I,onlyRenderVisibleElements:B,elementsSelectable:P,selectNodesOnDrag:M,defaultViewport:K,translateExtent:C,minZoom:q,maxZoom:Y,preventScrolling:W,defaultMarkerColor:U,zoomOnScroll:Q,zoomOnPinch:ne,panOnScroll:J,panOnScrollSpeed:te,panOnScrollMode:oe,zoomOnDoubleClick:ce,panOnDrag:fe,onPaneClick:me,onPaneMouseEnter:be,onPaneMouseMove:Ce,onPaneMouseLeave:Qe,onPaneScroll:Ze,onPaneContextMenu:Ve,onEdgeContextMenu:rt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:je,onReconnect:Ee,onReconnectStart:kt,onReconnectEnd:Sn,reconnectRadius:Qt,noDragClassName:Jn,noWheelClassName:Pn,noPanClassName:On,elevateEdgesOnSelect:Hr,disableKeyboardA11y:ot,nodeOrigin:Ge,nodeExtent:$t,rfId:Tt})=>{const oi=eS(t,f5),Ft=eS(e,_5);return O5(o),he.createElement(c5,{onPaneClick:me,onPaneMouseEnter:be,onPaneMouseMove:Ce,onPaneMouseLeave:Qe,onPaneContextMenu:Ve,onPaneScroll:Ze,deleteKeyCode:I,selectionKeyCode:E,selectionOnDrag:b,selectionMode:T,onSelectionStart:V,onSelectionEnd:z,multiSelectionKeyCode:A,panActivationKeyCode:x,zoomActivationKeyCode:k,elementsSelectable:P,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:Q,zoomOnPinch:ne,zoomOnDoubleClick:ce,panOnScroll:J,panOnScrollSpeed:te,panOnScrollMode:oe,panOnDrag:fe,defaultViewport:K,translateExtent:C,minZoom:q,maxZoom:Y,onSelectionContextMenu:O,preventScrolling:W,noDragClassName:Jn,noWheelClassName:Pn,noPanClassName:On,disableKeyboardA11y:ot},he.createElement(P5,null,he.createElement(D5,{edgeTypes:Ft,onEdgeClick:c,onEdgeDoubleClick:h,onlyRenderVisibleElements:B,onEdgeContextMenu:rt,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:je,onReconnect:Ee,onReconnectStart:kt,onReconnectEnd:Sn,reconnectRadius:Qt,defaultMarkerColor:U,noPanClassName:On,elevateEdgesOnSelect:!!Hr,disableKeyboardA11y:ot,rfId:Tt},he.createElement(z5,{style:F,type:j,component:X,containerStyle:y})),he.createElement("div",{className:"react-flow__edgelabel-renderer"}),he.createElement(m5,{nodeTypes:oi,onNodeClick:l,onNodeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:R,selectNodesOnDrag:M,onlyRenderVisibleElements:B,noPanClassName:On,noDragClassName:Jn,disableKeyboardA11y:ot,nodeOrigin:Ge,nodeExtent:$t,rfId:Tt})))};z3.displayName="GraphView";var j5=$.memo(z3);const zy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Qs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:zy,nodeExtent:zy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ya.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:h6,isValidConnection:void 0},U5=()=>CD((t,e)=>({...Qs,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:U0(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",l=s?U0(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:l,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:l,fitViewOnInitOptions:c,domNode:f,nodeOrigin:h}=e(),m=f?.querySelector(".react-flow__viewport");if(!m)return;const _=window.getComputedStyle(m),{m22:w}=new window.DOMMatrixReadOnly(_.transform),R=n.reduce((V,z)=>{const j=s.get(z.id);if(j?.hidden)s.set(j.id,{...j,[Ot]:{...j[Ot],handleBounds:void 0}});else if(j){const F=Fv(z.nodeElement);!!(F.width&&F.height&&(j.width!==F.width||j.height!==F.height||z.forceUpdate))&&(s.set(j.id,{...j,[Ot]:{...j[Ot],handleBounds:{source:KT(".source",z.nodeElement,w,h),target:KT(".target",z.nodeElement,w,h)}},...F}),V.push({id:j.id,type:"dimensions",dimensions:F}))}return V},[]);S3(s,h);const O=l||o&&!l&&A3(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:O}),R?.length>0&&r?.(R)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),l=n.map(c=>{const f={id:c.id,type:"position",dragging:s};return r&&(f.positionAbsolute=c.positionAbsolute,f.position=c.position),f});o(l)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:l,getNodes:c,elevateNodesOnSelect:f}=e();if(n?.length){if(o){const h=C3(n,c()),m=U0(h,s,l,f);t({nodeInternals:m})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,c=null;r?l=n.map(f=>ta(f,!0)):(l=Hl(o(),n),c=Hl(s,[])),xh({changedNodes:l,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let l,c=null;r?l=n.map(f=>ta(f,!0)):(l=Hl(s,n),c=Hl(o(),[])),xh({changedNodes:c,changedEdges:l,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),l=n||o(),c=r||s,f=l.map(m=>(m.selected=!1,ta(m.id,!1))),h=c.map(m=>ta(m.id,!1));xh({changedNodes:f,changedEdges:h,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>ta(c.id,!1)),l=n.filter(c=>c.selected).map(c=>ta(c.id,!1));xh({changedNodes:o,changedEdges:l,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=qv(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:l,d3Selection:c,translateExtent:f}=e();if(!l||!c||!n.x&&!n.y)return!1;const h=ca.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),m=[[0,0],[s,o]],_=l?.constrain()(h,m,f);return l.transform(c,_),r[0]!==_.x||r[1]!==_.y||r[2]!==_.k},cancelConnection:()=>t({connectionNodeId:Qs.connectionNodeId,connectionHandleId:Qs.connectionHandleId,connectionHandleType:Qs.connectionHandleType,connectionStatus:Qs.connectionStatus,connectionStartHandle:Qs.connectionStartHandle,connectionEndHandle:Qs.connectionEndHandle}),reset:()=>t({...Qs})}),Object.is),j3=({children:t})=>{const e=$.useRef(null);return e.current||(e.current=U5()),he.createElement(s6,{value:e.current},t)};j3.displayName="ReactFlowProvider";const U3=({children:t})=>$.useContext(Yp)?he.createElement(he.Fragment,null,t):he.createElement(j3,null,t);U3.displayName="ReactFlowWrapper";const B5={input:y3,default:Vy,output:_3,group:Jv},H5={default:mp,straight:Xv,step:Yv,smoothstep:Xp,simplebezier:Kv},$5=[0,0],F5=[15,15],q5={x:0,y:0,zoom:1},G5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},B3=$.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=B5,edgeTypes:l=H5,onNodeClick:c,onEdgeClick:f,onInit:h,onMove:m,onMoveStart:_,onMoveEnd:w,onConnect:R,onConnectStart:O,onConnectEnd:V,onClickConnectStart:z,onClickConnectEnd:j,onNodeMouseEnter:F,onNodeMouseMove:X,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:b,onNodeDragStart:T,onNodeDrag:A,onNodeDragStop:x,onNodesDelete:k,onEdgesDelete:I,onSelectionChange:B,onSelectionDragStart:P,onSelectionDrag:M,onSelectionDragStop:K,onSelectionContextMenu:C,onSelectionStart:q,onSelectionEnd:Y,connectionMode:W=ya.Strict,connectionLineType:U=na.Bezier,connectionLineStyle:Q,connectionLineComponent:ne,connectionLineContainerStyle:J,deleteKeyCode:te="Backspace",selectionKeyCode:oe="Shift",selectionOnDrag:ce=!1,selectionMode:fe=md.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:be=pp()?"Meta":"Control",zoomActivationKeyCode:Ce=pp()?"Meta":"Control",snapToGrid:Qe=!1,snapGrid:Ze=F5,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:rt=!0,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:je,nodeOrigin:Ee=$5,edgesFocusable:kt,edgesUpdatable:Sn,elementsSelectable:Qt,defaultViewport:Jn=q5,minZoom:Pn=.5,maxZoom:On=2,translateExtent:Hr=zy,preventScrolling:ot=!0,nodeExtent:Ge,defaultMarkerColor:$t="#b1b1b7",zoomOnScroll:Tt=!0,zoomOnPinch:oi=!0,panOnScroll:Ft=!1,panOnScrollSpeed:sn=.5,panOnScrollMode:Vn=yo.Free,zoomOnDoubleClick:Ln=!0,panOnDrag:an=!0,onPaneClick:pn,onPaneMouseEnter:zn,onPaneMouseMove:Bi,onPaneMouseLeave:Hi,onPaneScroll:$r,onPaneContextMenu:er,children:wr,onEdgeContextMenu:tr,onEdgeDoubleClick:br,onEdgeMouseEnter:Da,onEdgeMouseMove:li,onEdgeMouseLeave:As,onEdgeUpdate:ui,onEdgeUpdateStart:Uo,onEdgeUpdateEnd:yt,onReconnect:Lt,onReconnectStart:It,onReconnectEnd:Fn,reconnectRadius:Ma=10,edgeUpdaterRadius:Nu=10,onNodesChange:ci,onEdgesChange:Bo,noDragClassName:$i="nodrag",noWheelClassName:di="nowheel",noPanClassName:Er="nopan",fitView:Tr=!1,fitViewOptions:Sr,connectOnClick:mn=!0,attributionPosition:St,proOptions:Pa,defaultEdgeOptions:xs,elevateNodesOnSelect:nr=!0,elevateEdgesOnSelect:Fr=!1,disableKeyboardA11y:Oa=!1,autoPanOnConnect:Ho=!0,autoPanOnNodeDrag:Fi=!0,connectionRadius:$o=20,isValidConnection:fi,onError:Ar,style:Zt,id:hi,nodeDragThreshold:Fo,...qr},Cs)=>{const pi=hi||"1";return he.createElement("div",{...qr,style:{...Zt,...G5},ref:Cs,className:$n(["react-flow",s]),"data-testid":"rf__wrapper",id:hi},he.createElement(U3,null,he.createElement(j5,{onInit:h,onMove:m,onMoveStart:_,onMoveEnd:w,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:F,onNodeMouseMove:X,onNodeMouseLeave:y,onNodeContextMenu:E,onNodeDoubleClick:b,nodeTypes:o,edgeTypes:l,connectionLineType:U,connectionLineStyle:Q,connectionLineComponent:ne,connectionLineContainerStyle:J,selectionKeyCode:oe,selectionOnDrag:ce,selectionMode:fe,deleteKeyCode:te,multiSelectionKeyCode:be,panActivationKeyCode:me,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:Ve,selectNodesOnDrag:rt,defaultViewport:Jn,translateExtent:Hr,minZoom:Pn,maxZoom:On,preventScrolling:ot,zoomOnScroll:Tt,zoomOnPinch:oi,zoomOnDoubleClick:Ln,panOnScroll:Ft,panOnScrollSpeed:sn,panOnScrollMode:Vn,panOnDrag:an,onPaneClick:pn,onPaneMouseEnter:zn,onPaneMouseMove:Bi,onPaneMouseLeave:Hi,onPaneScroll:$r,onPaneContextMenu:er,onSelectionContextMenu:C,onSelectionStart:q,onSelectionEnd:Y,onEdgeContextMenu:tr,onEdgeDoubleClick:br,onEdgeMouseEnter:Da,onEdgeMouseMove:li,onEdgeMouseLeave:As,onReconnect:Lt??ui,onReconnectStart:It??Uo,onReconnectEnd:Fn??yt,reconnectRadius:Ma??Nu,defaultMarkerColor:$t,noDragClassName:$i,noWheelClassName:di,noPanClassName:Er,elevateEdgesOnSelect:Fr,rfId:pi,disableKeyboardA11y:Oa,nodeOrigin:Ee,nodeExtent:Ge}),he.createElement(V6,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:R,onConnectStart:O,onConnectEnd:V,onClickConnectStart:z,onClickConnectEnd:j,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:je,edgesFocusable:kt,edgesUpdatable:Sn,elementsSelectable:Qt,elevateNodesOnSelect:nr,minZoom:Pn,maxZoom:On,nodeExtent:Ge,onNodesChange:ci,onEdgesChange:Bo,snapToGrid:Qe,snapGrid:Ze,connectionMode:W,translateExtent:Hr,connectOnClick:mn,defaultEdgeOptions:xs,fitView:Tr,fitViewOptions:Sr,onNodesDelete:k,onEdgesDelete:I,onNodeDragStart:T,onNodeDrag:A,onNodeDragStop:x,onSelectionDrag:M,onSelectionDragStart:P,onSelectionDragStop:K,noPanClassName:Er,nodeOrigin:Ee,rfId:pi,autoPanOnConnect:Ho,autoPanOnNodeDrag:Fi,onError:Ar,connectionRadius:$o,isValidConnection:fi,nodeDragThreshold:Fo}),he.createElement(P6,{onSelectionChange:B}),wr,he.createElement(o6,{proOptions:Pa,position:St}),he.createElement(B6,{rfId:pi,disableKeyboardA11y:Oa})))});B3.displayName="ReactFlow";function H3(t){return e=>{const[n,r]=$.useState(e),s=$.useCallback(o=>r(l=>t(o,l)),[]);return[n,r,s]}}const K5=H3(C3),Y5=H3(t5);function X5(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},he.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function W5(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},he.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Q5(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},he.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Z5(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function J5(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const $c=({children:t,className:e,...n})=>he.createElement("button",{type:"button",className:$n(["react-flow__controls-button",e]),...n},t);$c.displayName="ControlButton";const eO=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),$3=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:c,onInteractiveChange:f,className:h,children:m,position:_="bottom-left"})=>{const w=hn(),[R,O]=$.useState(!1),{isInteractive:V,minZoomReached:z,maxZoomReached:j}=Ct(eO,Dn),{zoomIn:F,zoomOut:X,fitView:y}=Ud();if($.useEffect(()=>{O(!0)},[]),!R)return null;const E=()=>{F(),o?.()},b=()=>{X(),l?.()},T=()=>{y(s),c?.()},A=()=>{w.setState({nodesDraggable:!V,nodesConnectable:!V,elementsSelectable:!V}),f?.(!V)};return he.createElement(Zx,{className:$n(["react-flow__controls",h]),position:_,style:t,"data-testid":"rf__controls"},e&&he.createElement(he.Fragment,null,he.createElement($c,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:j},he.createElement(X5,null)),he.createElement($c,{onClick:b,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:z},he.createElement(W5,null))),n&&he.createElement($c,{className:"react-flow__controls-fitview",onClick:T,title:"fit view","aria-label":"fit view"},he.createElement(Q5,null)),r&&he.createElement($c,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},V?he.createElement(J5,null):he.createElement(Z5,null)),m)};$3.displayName="Controls";var tO=$.memo($3),Ur;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Ur||(Ur={}));function nO({color:t,dimensions:e,lineWidth:n}){return he.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function rO({color:t,radius:e}){return he.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const iO={[Ur.Dots]:"#91919a",[Ur.Lines]:"#eee",[Ur.Cross]:"#e2e2e2"},sO={[Ur.Dots]:1,[Ur.Lines]:1,[Ur.Cross]:6},aO=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function F3({id:t,variant:e=Ur.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:l,style:c,className:f}){const h=$.useRef(null),{transform:m,patternId:_}=Ct(aO,Dn),w=l||iO[e],R=r||sO[e],O=e===Ur.Dots,V=e===Ur.Cross,z=Array.isArray(n)?n:[n,n],j=[z[0]*m[2]||1,z[1]*m[2]||1],F=R*m[2],X=V?[F,F]:j,y=O?[F/o,F/o]:[X[0]/o,X[1]/o];return he.createElement("svg",{className:$n(["react-flow__background",f]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},he.createElement("pattern",{id:_+t,x:m[0]%j[0],y:m[1]%j[1],width:j[0],height:j[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`},O?he.createElement(rO,{color:w,radius:F/o}):he.createElement(nO,{dimensions:X,color:w,lineWidth:s})),he.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_+t})`}))}F3.displayName="Background";var oO=$.memo(F3);const Wp=$.createContext(null);Wp.displayName="PanelGroupContext";const Pt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},t_=10,Eo=$.useLayoutEffect,tS=uD.useId,lO=typeof tS=="function"?tS:()=>null;let uO=0;function n_(t=null){const e=lO(),n=$.useRef(t||e||null);return n.current===null&&(n.current=""+uO++),t??n.current}function q3({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:l,maxSize:c,minSize:f,onCollapse:h,onExpand:m,onResize:_,order:w,style:R,tagName:O="div",...V}){const z=$.useContext(Wp);if(z===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:j,expandPanel:F,getPanelSize:X,getPanelStyle:y,groupId:E,isPanelCollapsed:b,reevaluatePanelConstraints:T,registerPanel:A,resizePanel:x,unregisterPanel:k}=z,I=n_(l),B=$.useRef({callbacks:{onCollapse:h,onExpand:m,onResize:_},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:c,minSize:f},id:I,idIsFromProps:l!==void 0,order:w});$.useRef({didLogMissingDefaultSizeWarning:!1}),Eo(()=>{const{callbacks:M,constraints:K}=B.current,C={...K};B.current.id=I,B.current.idIsFromProps=l!==void 0,B.current.order=w,M.onCollapse=h,M.onExpand=m,M.onResize=_,K.collapsedSize=n,K.collapsible=r,K.defaultSize=s,K.maxSize=c,K.minSize=f,(C.collapsedSize!==K.collapsedSize||C.collapsible!==K.collapsible||C.maxSize!==K.maxSize||C.minSize!==K.minSize)&&T(B.current,C)}),Eo(()=>{const M=B.current;return A(M),()=>{k(M)}},[w,I,A,k]),$.useImperativeHandle(o,()=>({collapse:()=>{j(B.current)},expand:M=>{F(B.current,M)},getId(){return I},getSize(){return X(B.current)},isCollapsed(){return b(B.current)},isExpanded(){return!b(B.current)},resize:M=>{x(B.current,M)}}),[j,F,X,b,I,x]);const P=y(B.current,s);return $.createElement(O,{...V,children:t,className:e,id:I,style:{...P,...R},[Pt.groupId]:E,[Pt.panel]:"",[Pt.panelCollapsible]:r||void 0,[Pt.panelId]:I,[Pt.panelSize]:parseFloat(""+P.flexGrow).toFixed(1)})}const jy=$.forwardRef((t,e)=>$.createElement(q3,{...t,forwardedRef:e}));q3.displayName="Panel";jy.displayName="forwardRef(Panel)";let Uy=null,qh=-1,ra=null;function cO(t,e){if(e){const n=(e&W3)!==0,r=(e&Q3)!==0,s=(e&Z3)!==0,o=(e&J3)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function dO(){ra!==null&&(document.head.removeChild(ra),Uy=null,ra=null,qh=-1)}function F0(t,e){var n,r;const s=cO(t,e);if(Uy!==s){if(Uy=s,ra===null&&(ra=document.createElement("style"),document.head.appendChild(ra)),qh>=0){var o;(o=ra.sheet)===null||o===void 0||o.removeRule(qh)}qh=(n=(r=ra.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function G3(t){return t.type==="keydown"}function K3(t){return t.type.startsWith("pointer")}function Y3(t){return t.type.startsWith("mouse")}function Qp(t){if(K3(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(Y3(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function fO(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function hO(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function pO(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:iS(t),b:iS(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Be(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:rS(nS(n.a)),b:rS(nS(n.b))};if(s.a===s.b){const o=r.childNodes,l={a:n.a.at(-1),b:n.b.at(-1)};let c=o.length;for(;c--;){const f=o[c];if(f===l.a)return 1;if(f===l.b)return-1}}return Math.sign(s.a-s.b)}const mO=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function gO(t){var e;const n=getComputedStyle((e=X3(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function yO(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||gO(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||mO.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function nS(t){let e=t.length;for(;e--;){const n=t[e];if(Be(n,"Missing node"),yO(n))return n}return null}function rS(t){return t&&Number(getComputedStyle(t).zIndex)||0}function iS(t){const e=[];for(;t;)e.push(t),t=X3(t);return e}function X3(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const W3=1,Q3=2,Z3=4,J3=8,vO=fO()==="coarse";let ti=[],eu=!1,ia=new Map,Zp=new Map;const yd=new Set;function _O(t,e,n,r,s){var o;const{ownerDocument:l}=e,c={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},f=(o=ia.get(l))!==null&&o!==void 0?o:0;return ia.set(l,f+1),yd.add(c),gp(),function(){var m;Zp.delete(t),yd.delete(c);const _=(m=ia.get(l))!==null&&m!==void 0?m:1;if(ia.set(l,_-1),gp(),_===1&&ia.delete(l),ti.includes(c)){const w=ti.indexOf(c);w>=0&&ti.splice(w,1),i_(),s("up",!0,null)}}}function wO(t){const{target:e}=t,{x:n,y:r}=Qp(t);eu=!0,r_({target:e,x:n,y:r}),gp(),ti.length>0&&(yp("down",t),t.preventDefault(),eC(e)||t.stopImmediatePropagation())}function q0(t){const{x:e,y:n}=Qp(t);if(eu&&t.buttons===0&&(eu=!1,yp("up",t)),!eu){const{target:r}=t;r_({target:r,x:e,y:n})}yp("move",t),i_(),ti.length>0&&t.preventDefault()}function G0(t){const{target:e}=t,{x:n,y:r}=Qp(t);Zp.clear(),eu=!1,ti.length>0&&(t.preventDefault(),eC(e)||t.stopImmediatePropagation()),yp("up",t),r_({target:e,x:n,y:r}),i_(),gp()}function eC(t){let e=t;for(;e;){if(e.hasAttribute(Pt.resizeHandle))return!0;e=e.parentElement}return!1}function r_({target:t,x:e,y:n}){ti.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),yd.forEach(s=>{const{element:o,hitAreaMargins:l}=s,c=o.getBoundingClientRect(),{bottom:f,left:h,right:m,top:_}=c,w=vO?l.coarse:l.fine;if(e>=h-w&&e<=m+w&&n>=_-w&&n<=f+w){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&pO(r,o)>0){let O=r,V=!1;for(;O&&!O.contains(o);){if(hO(O.getBoundingClientRect(),c)){V=!0;break}O=O.parentElement}if(V)return}ti.push(s)}})}function K0(t,e){Zp.set(t,e)}function i_(){let t=!1,e=!1;ti.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;Zp.forEach(r=>{n|=r}),t&&e?F0("intersection",n):t?F0("horizontal",n):e?F0("vertical",n):dO()}let Y0;function gp(){var t;(t=Y0)===null||t===void 0||t.abort(),Y0=new AbortController;const e={capture:!0,signal:Y0.signal};yd.size&&(eu?(ti.length>0&&ia.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",G0,e),s.addEventListener("pointerleave",q0,e),s.addEventListener("pointermove",q0,e))}),ia.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",G0,e),s.addEventListener("pointercancel",G0,e)})):ia.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",wO,e),s.addEventListener("pointermove",q0,e))}))}function yp(t,e){yd.forEach(n=>{const{setResizeHandlerState:r}=n,s=ti.includes(n);r(t,s,e)})}function bO(){const[t,e]=$.useState(0);return $.useCallback(()=>e(n=>n+1),[])}function Be(t,e){if(!t)throw console.error(e),Error(e)}function Co(t,e,n=t_){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function fs(t,e,n=t_){return Co(t,e,n)===0}function dr(t,e,n){return Co(t,e,n)===0}function EO(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],o=e[r];if(!dr(s,o,n))return!1}return!0}function $l({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Be(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:l=100,minSize:c=0}=r;if(Co(n,c)<0)if(o){const f=(s+c)/2;Co(n,f)<0?n=s:n=c}else n=c;return n=Math.min(l,n),n=parseFloat(n.toFixed(t_)),n}function Fc({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(dr(t,0))return e;const l=[...e],[c,f]=r;Be(c!=null,"Invalid first pivot index"),Be(f!=null,"Invalid second pivot index");let h=0;if(o==="keyboard"){{const _=t<0?f:c,w=n[_];Be(w,`Panel constraints not found for index ${_}`);const{collapsedSize:R=0,collapsible:O,minSize:V=0}=w;if(O){const z=e[_];if(Be(z!=null,`Previous layout not found for panel index ${_}`),dr(z,R)){const j=V-z;Co(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}{const _=t<0?c:f,w=n[_];Be(w,`No panel constraints found for index ${_}`);const{collapsedSize:R=0,collapsible:O,minSize:V=0}=w;if(O){const z=e[_];if(Be(z!=null,`Previous layout not found for panel index ${_}`),dr(z,V)){const j=z-R;Co(j,Math.abs(t))>0&&(t=t<0?0-j:j)}}}}{const _=t<0?1:-1;let w=t<0?f:c,R=0;for(;;){const V=e[w];Be(V!=null,`Previous layout not found for panel index ${w}`);const j=$l({panelConstraints:n,panelIndex:w,size:100})-V;if(R+=j,w+=_,w<0||w>=n.length)break}const O=Math.min(Math.abs(t),Math.abs(R));t=t<0?0-O:O}{let w=t<0?c:f;for(;w>=0&&w<n.length;){const R=Math.abs(t)-Math.abs(h),O=e[w];Be(O!=null,`Previous layout not found for panel index ${w}`);const V=O-R,z=$l({panelConstraints:n,panelIndex:w,size:V});if(!dr(O,z)&&(h+=O-z,l[w]=z,h.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?w--:w++}}if(EO(s,l))return s;{const _=t<0?f:c,w=e[_];Be(w!=null,`Previous layout not found for panel index ${_}`);const R=w+h,O=$l({panelConstraints:n,panelIndex:_,size:R});if(l[_]=O,!dr(O,R)){let V=R-O,j=t<0?f:c;for(;j>=0&&j<n.length;){const F=l[j];Be(F!=null,`Previous layout not found for panel index ${j}`);const X=F+V,y=$l({panelConstraints:n,panelIndex:j,size:X});if(dr(F,y)||(V-=y-F,l[j]=y),dr(V,0))break;t>0?j--:j++}}}const m=l.reduce((_,w)=>w+_,0);return dr(m,100)?l:s}function TO({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,o=0,l=0;const c=n[0];Be(c!=null,"No pivot index found"),e.forEach((_,w)=>{const{constraints:R}=_,{maxSize:O=100,minSize:V=0}=R;w===c?(r=V,s=O):(o+=V,l+=O)});const f=Math.min(s,100-o),h=Math.max(r,100-l),m=t[c];return{valueMax:f,valueMin:h,valueNow:m}}function vd(t,e=document){return Array.from(e.querySelectorAll(`[${Pt.resizeHandleId}][data-panel-group-id="${t}"]`))}function tC(t,e,n=document){const s=vd(t,n).findIndex(o=>o.getAttribute(Pt.resizeHandleId)===e);return s??null}function nC(t,e,n){const r=tC(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function SO(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function rC(t,e=document){if(SO(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Jp(t,e=document){const n=e.querySelector(`[${Pt.resizeHandleId}="${t}"]`);return n||null}function AO(t,e,n,r=document){var s,o,l,c;const f=Jp(e,r),h=vd(t,r),m=f?h.indexOf(f):-1,_=(s=(o=n[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,w=(l=(c=n[m+1])===null||c===void 0?void 0:c.id)!==null&&l!==void 0?l:null;return[_,w]}function xO({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:l}){$.useRef({didWarnAboutMissingResizeHandle:!1}),Eo(()=>{if(!o)return;const c=vd(n,o);for(let f=0;f<s.length-1;f++){const{valueMax:h,valueMin:m,valueNow:_}=TO({layout:r,panelsArray:s,pivotIndices:[f,f+1]}),w=c[f];if(w!=null){const R=s[f];Be(R,`No panel data found for index "${f}"`),w.setAttribute("aria-controls",R.id),w.setAttribute("aria-valuemax",""+Math.round(h)),w.setAttribute("aria-valuemin",""+Math.round(m)),w.setAttribute("aria-valuenow",_!=null?""+Math.round(_):"")}}return()=>{c.forEach((f,h)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,r,s,o]),$.useEffect(()=>{if(!o)return;const c=e.current;Be(c,"Eager values not found");const{panelDataArray:f}=c,h=rC(n,o);Be(h!=null,`No group found for id "${n}"`);const m=vd(n,o);Be(m,`No resize handles found for group id "${n}"`);const _=m.map(w=>{const R=w.getAttribute(Pt.resizeHandleId);Be(R,"Resize handle element has no handle id attribute");const[O,V]=AO(n,R,f,o);if(O==null||V==null)return()=>{};const z=j=>{if(!j.defaultPrevented)switch(j.key){case"Enter":{j.preventDefault();const F=f.findIndex(X=>X.id===O);if(F>=0){const X=f[F];Be(X,`No panel data found for index ${F}`);const y=r[F],{collapsedSize:E=0,collapsible:b,minSize:T=0}=X.constraints;if(y!=null&&b){const A=Fc({delta:dr(y,E)?T-E:E-y,initialLayout:r,panelConstraints:f.map(x=>x.constraints),pivotIndices:nC(n,R,o),prevLayout:r,trigger:"keyboard"});r!==A&&l(A)}}break}}};return w.addEventListener("keydown",z),()=>{w.removeEventListener("keydown",z)}});return()=>{_.forEach(w=>w())}},[o,t,e,n,r,s,l])}function sS(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function iC(t,e){const n=t==="horizontal",{x:r,y:s}=Qp(e);return n?r:s}function CO(t,e,n,r,s){const o=n==="horizontal",l=Jp(e,s);Be(l,`No resize handle element found for id "${e}"`);const c=l.getAttribute(Pt.groupId);Be(c,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=r;const h=iC(n,t),m=rC(c,s);Be(m,`No group element found for id "${c}"`);const _=m.getBoundingClientRect(),w=o?_.width:_.height;return(h-f)/w*100}function RO(t,e,n,r,s,o){if(G3(t)){const l=n==="horizontal";let c=0;t.shiftKey?c=100:s!=null?c=s:c=10;let f=0;switch(t.key){case"ArrowDown":f=l?0:c;break;case"ArrowLeft":f=l?-c:0;break;case"ArrowRight":f=l?c:0;break;case"ArrowUp":f=l?0:-c;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return r==null?0:CO(t,e,n,r,o)}function kO({panelDataArray:t}){const e=Array(t.length),n=t.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<t.length;o++){const l=n[o];Be(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;c!=null&&(r++,e[o]=c,s-=c)}for(let o=0;o<t.length;o++){const l=n[o];Be(l,`Panel constraints not found for index ${o}`);const{defaultSize:c}=l;if(c!=null)continue;const f=t.length-r,h=s/f;r++,e[o]=h,s-=h}return e}function Pl(t,e,n){e.forEach((r,s)=>{const o=t[s];Be(o,`Panel data not found for index ${s}`);const{callbacks:l,constraints:c,id:f}=o,{collapsedSize:h=0,collapsible:m}=c,_=n[f];if(_==null||r!==_){n[f]=r;const{onCollapse:w,onExpand:R,onResize:O}=l;O&&O(r,_),m&&(w||R)&&(R&&(_==null||fs(_,h))&&!fs(r,h)&&R(),w&&(_==null||!fs(_,h))&&fs(r,h)&&w())}})}function Rh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function IO({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:o=3}){const l=n[s];let c;return l==null?c=t!=null?t.toPrecision(o):"1":r.length===1?c="1":c=l.toPrecision(o),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function NO(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function aS(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function sC(t){return`react-resizable-panels:${t}`}function aC(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function oC(t,e){try{const n=sC(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function DO(t,e,n){var r,s;const o=(r=oC(t,n))!==null&&r!==void 0?r:{},l=aC(e);return(s=o[l])!==null&&s!==void 0?s:null}function MO(t,e,n,r,s){var o;const l=sC(t),c=aC(e),f=(o=oC(t,s))!==null&&o!==void 0?o:{};f[c]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(l,JSON.stringify(f))}catch(h){console.error(h)}}function oS({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((o,l)=>o+l,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!dr(r,100)&&n.length>0)for(let o=0;o<e.length;o++){const l=n[o];Be(l!=null,`No layout data found for index ${o}`);const c=100/r*l;n[o]=c}let s=0;for(let o=0;o<e.length;o++){const l=n[o];Be(l!=null,`No layout data found for index ${o}`);const c=$l({panelConstraints:e,panelIndex:o,size:l});l!=c&&(s+=l-c,n[o]=c)}if(!dr(s,0))for(let o=0;o<e.length;o++){const l=n[o];Be(l!=null,`No layout data found for index ${o}`);const c=l+s,f=$l({panelConstraints:e,panelIndex:o,size:c});if(l!==f&&(s-=f-l,n[o]=f,dr(s,0)))break}return n}const PO=100,qc={getItem:t=>(aS(qc),qc.getItem(t)),setItem:(t,e)=>{aS(qc),qc.setItem(t,e)}},lS={};function lC({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:l=null,keyboardResizeBy:c=null,storage:f=qc,style:h,tagName:m="div",..._}){const w=n_(o),R=$.useRef(null),[O,V]=$.useState(null),[z,j]=$.useState([]),F=bO(),X=$.useRef({}),y=$.useRef(new Map),E=$.useRef(0),b=$.useRef({autoSaveId:t,direction:r,dragState:O,id:w,keyboardResizeBy:c,onLayout:l,storage:f}),T=$.useRef({layout:z,panelDataArray:[],panelDataArrayChanged:!1});$.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),$.useImperativeHandle(s,()=>({getId:()=>b.current.id,getLayout:()=>{const{layout:J}=T.current;return J},setLayout:J=>{const{onLayout:te}=b.current,{layout:oe,panelDataArray:ce}=T.current,fe=oS({layout:J,panelConstraints:ce.map(me=>me.constraints)});sS(oe,fe)||(j(fe),T.current.layout=fe,te&&te(fe),Pl(ce,fe,X.current))}}),[]),Eo(()=>{b.current.autoSaveId=t,b.current.direction=r,b.current.dragState=O,b.current.id=w,b.current.onLayout=l,b.current.storage=f}),xO({committedValuesRef:b,eagerValuesRef:T,groupId:w,layout:z,panelDataArray:T.current.panelDataArray,setLayout:j,panelGroupElement:R.current}),$.useEffect(()=>{const{panelDataArray:J}=T.current;if(t){if(z.length===0||z.length!==J.length)return;let te=lS[t];te==null&&(te=NO(MO,PO),lS[t]=te);const oe=[...J],ce=new Map(y.current);te(t,oe,ce,z,f)}},[t,z,f]),$.useEffect(()=>{});const A=$.useCallback(J=>{const{onLayout:te}=b.current,{layout:oe,panelDataArray:ce}=T.current;if(J.constraints.collapsible){const fe=ce.map(Qe=>Qe.constraints),{collapsedSize:me=0,panelSize:be,pivotIndices:Ce}=lo(ce,J,oe);if(Be(be!=null,`Panel size not found for panel "${J.id}"`),!fs(be,me)){y.current.set(J.id,be);const Ze=Ll(ce,J)===ce.length-1?be-me:me-be,Ve=Fc({delta:Ze,initialLayout:oe,panelConstraints:fe,pivotIndices:Ce,prevLayout:oe,trigger:"imperative-api"});Rh(oe,Ve)||(j(Ve),T.current.layout=Ve,te&&te(Ve),Pl(ce,Ve,X.current))}}},[]),x=$.useCallback((J,te)=>{const{onLayout:oe}=b.current,{layout:ce,panelDataArray:fe}=T.current;if(J.constraints.collapsible){const me=fe.map(rt=>rt.constraints),{collapsedSize:be=0,panelSize:Ce=0,minSize:Qe=0,pivotIndices:Ze}=lo(fe,J,ce),Ve=te??Qe;if(fs(Ce,be)){const rt=y.current.get(J.id),st=rt!=null&&rt>=Ve?rt:Ve,je=Ll(fe,J)===fe.length-1?Ce-st:st-Ce,Ee=Fc({delta:je,initialLayout:ce,panelConstraints:me,pivotIndices:Ze,prevLayout:ce,trigger:"imperative-api"});Rh(ce,Ee)||(j(Ee),T.current.layout=Ee,oe&&oe(Ee),Pl(fe,Ee,X.current))}}},[]),k=$.useCallback(J=>{const{layout:te,panelDataArray:oe}=T.current,{panelSize:ce}=lo(oe,J,te);return Be(ce!=null,`Panel size not found for panel "${J.id}"`),ce},[]),I=$.useCallback((J,te)=>{const{panelDataArray:oe}=T.current,ce=Ll(oe,J);return IO({defaultSize:te,dragState:O,layout:z,panelData:oe,panelIndex:ce})},[O,z]),B=$.useCallback(J=>{const{layout:te,panelDataArray:oe}=T.current,{collapsedSize:ce=0,collapsible:fe,panelSize:me}=lo(oe,J,te);return Be(me!=null,`Panel size not found for panel "${J.id}"`),fe===!0&&fs(me,ce)},[]),P=$.useCallback(J=>{const{layout:te,panelDataArray:oe}=T.current,{collapsedSize:ce=0,collapsible:fe,panelSize:me}=lo(oe,J,te);return Be(me!=null,`Panel size not found for panel "${J.id}"`),!fe||Co(me,ce)>0},[]),M=$.useCallback(J=>{const{panelDataArray:te}=T.current;te.push(J),te.sort((oe,ce)=>{const fe=oe.order,me=ce.order;return fe==null&&me==null?0:fe==null?-1:me==null?1:fe-me}),T.current.panelDataArrayChanged=!0,F()},[F]);Eo(()=>{if(T.current.panelDataArrayChanged){T.current.panelDataArrayChanged=!1;const{autoSaveId:J,onLayout:te,storage:oe}=b.current,{layout:ce,panelDataArray:fe}=T.current;let me=null;if(J){const Ce=DO(J,fe,oe);Ce&&(y.current=new Map(Object.entries(Ce.expandToSizes)),me=Ce.layout)}me==null&&(me=kO({panelDataArray:fe}));const be=oS({layout:me,panelConstraints:fe.map(Ce=>Ce.constraints)});sS(ce,be)||(j(be),T.current.layout=be,te&&te(be),Pl(fe,be,X.current))}}),Eo(()=>{const J=T.current;return()=>{J.layout=[]}},[]);const K=$.useCallback(J=>{let te=!1;const oe=R.current;return oe&&window.getComputedStyle(oe,null).getPropertyValue("direction")==="rtl"&&(te=!0),function(fe){fe.preventDefault();const me=R.current;if(!me)return()=>null;const{direction:be,dragState:Ce,id:Qe,keyboardResizeBy:Ze,onLayout:Ve}=b.current,{layout:rt,panelDataArray:st}=T.current,{initialLayout:Ht}=Ce??{},je=nC(Qe,J,me);let Ee=RO(fe,J,be,Ce,Ze,me);const kt=be==="horizontal";kt&&te&&(Ee=-Ee);const Sn=st.map(Pn=>Pn.constraints),Qt=Fc({delta:Ee,initialLayout:Ht??rt,panelConstraints:Sn,pivotIndices:je,prevLayout:rt,trigger:G3(fe)?"keyboard":"mouse-or-touch"}),Jn=!Rh(rt,Qt);(K3(fe)||Y3(fe))&&E.current!=Ee&&(E.current=Ee,!Jn&&Ee!==0?kt?K0(J,Ee<0?W3:Q3):K0(J,Ee<0?Z3:J3):K0(J,0)),Jn&&(j(Qt),T.current.layout=Qt,Ve&&Ve(Qt),Pl(st,Qt,X.current))}},[]),C=$.useCallback((J,te)=>{const{onLayout:oe}=b.current,{layout:ce,panelDataArray:fe}=T.current,me=fe.map(rt=>rt.constraints),{panelSize:be,pivotIndices:Ce}=lo(fe,J,ce);Be(be!=null,`Panel size not found for panel "${J.id}"`);const Ze=Ll(fe,J)===fe.length-1?be-te:te-be,Ve=Fc({delta:Ze,initialLayout:ce,panelConstraints:me,pivotIndices:Ce,prevLayout:ce,trigger:"imperative-api"});Rh(ce,Ve)||(j(Ve),T.current.layout=Ve,oe&&oe(Ve),Pl(fe,Ve,X.current))},[]),q=$.useCallback((J,te)=>{const{layout:oe,panelDataArray:ce}=T.current,{collapsedSize:fe=0,collapsible:me}=te,{collapsedSize:be=0,collapsible:Ce,maxSize:Qe=100,minSize:Ze=0}=J.constraints,{panelSize:Ve}=lo(ce,J,oe);Ve!=null&&(me&&Ce&&fs(Ve,fe)?fs(fe,be)||C(J,be):Ve<Ze?C(J,Ze):Ve>Qe&&C(J,Qe))},[C]),Y=$.useCallback((J,te)=>{const{direction:oe}=b.current,{layout:ce}=T.current;if(!R.current)return;const fe=Jp(J,R.current);Be(fe,`Drag handle element not found for id "${J}"`);const me=iC(oe,te);V({dragHandleId:J,dragHandleRect:fe.getBoundingClientRect(),initialCursorPosition:me,initialLayout:ce})},[]),W=$.useCallback(()=>{V(null)},[]),U=$.useCallback(J=>{const{panelDataArray:te}=T.current,oe=Ll(te,J);oe>=0&&(te.splice(oe,1),delete X.current[J.id],T.current.panelDataArrayChanged=!0,F())},[F]),Q=$.useMemo(()=>({collapsePanel:A,direction:r,dragState:O,expandPanel:x,getPanelSize:k,getPanelStyle:I,groupId:w,isPanelCollapsed:B,isPanelExpanded:P,reevaluatePanelConstraints:q,registerPanel:M,registerResizeHandle:K,resizePanel:C,startDragging:Y,stopDragging:W,unregisterPanel:U,panelGroupElement:R.current}),[A,O,r,x,k,I,w,B,P,q,M,K,C,Y,W,U]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return $.createElement(Wp.Provider,{value:Q},$.createElement(m,{..._,children:e,className:n,id:o,ref:R,style:{...ne,...h},[Pt.group]:"",[Pt.groupDirection]:r,[Pt.groupId]:w}))}const uC=$.forwardRef((t,e)=>$.createElement(lC,{...t,forwardedRef:e}));lC.displayName="PanelGroup";uC.displayName="forwardRef(PanelGroup)";function Ll(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function lo(t,e,n){const r=Ll(t,e),o=r===t.length-1?[r-1,r]:[r,r+1],l=n[r];return{...e.constraints,panelSize:l,pivotIndices:o}}function OO({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){$.useEffect(()=>{if(t||n==null||r==null)return;const s=Jp(e,r);if(s==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),n(l);break}case"F6":{l.preventDefault();const c=s.getAttribute(Pt.groupId);Be(c,`No group element found for id "${c}"`);const f=vd(c,r),h=tC(c,e,r);Be(h!==null,`No resize element found for id "${e}"`);const m=l.shiftKey?h>0?h-1:f.length-1:h+1<f.length?h+1:0;f[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,t,e,n])}function cC({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:l,onDragging:c,onFocus:f,onPointerDown:h,onPointerUp:m,style:_={},tabIndex:w=0,tagName:R="div",...O}){var V,z;const j=$.useRef(null),F=$.useRef({onClick:l,onDragging:c,onPointerDown:h,onPointerUp:m});$.useEffect(()=>{F.current.onClick=l,F.current.onDragging=c,F.current.onPointerDown=h,F.current.onPointerUp=m});const X=$.useContext(Wp);if(X===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:E,registerResizeHandle:b,startDragging:T,stopDragging:A,panelGroupElement:x}=X,k=n_(s),[I,B]=$.useState("inactive"),[P,M]=$.useState(!1),[K,C]=$.useState(null),q=$.useRef({state:I});Eo(()=>{q.current.state=I}),$.useEffect(()=>{if(n)C(null);else{const Q=b(k);C(()=>Q)}},[n,k,b]);const Y=(V=r?.coarse)!==null&&V!==void 0?V:15,W=(z=r?.fine)!==null&&z!==void 0?z:5;$.useEffect(()=>{if(n||K==null)return;const Q=j.current;Be(Q,"Element ref not attached");let ne=!1;return _O(k,Q,y,{coarse:Y,fine:W},(te,oe,ce)=>{if(!oe){B("inactive");return}switch(te){case"down":{B("drag"),ne=!1,Be(ce,'Expected event to be defined for "down" action'),T(k,ce);const{onDragging:fe,onPointerDown:me}=F.current;fe?.(!0),me?.();break}case"move":{const{state:fe}=q.current;ne=!0,fe!=="drag"&&B("hover"),Be(ce,'Expected event to be defined for "move" action'),K(ce);break}case"up":{B("hover"),A();const{onClick:fe,onDragging:me,onPointerUp:be}=F.current;me?.(!1),be?.(),ne||fe?.();break}}})},[Y,y,n,W,b,k,K,T,A]),OO({disabled:n,handleId:k,resizeHandler:K,panelGroupElement:x});const U={touchAction:"none",userSelect:"none"};return $.createElement(R,{...O,children:t,className:e,id:s,onBlur:()=>{M(!1),o?.()},onFocus:()=>{M(!0),f?.()},ref:j,role:"separator",style:{...U,..._},tabIndex:w,[Pt.groupDirection]:y,[Pt.groupId]:E,[Pt.resizeHandle]:"",[Pt.resizeHandleActive]:I==="drag"?"pointer":P?"keyboard":void 0,[Pt.resizeHandleEnabled]:!n,[Pt.resizeHandleId]:k,[Pt.resizeHandleState]:I})}cC.displayName="PanelResizeHandle";const dC=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim(),myConcept:s})})}return e},uS=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},cS=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,r=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),o=parseInt(n.slice(4,6),16);const l=f=>Math.max(0,Math.min(255,f)),c=1-e;return r=l(Math.round(r*c)),s=l(Math.round(s*c)),o=l(Math.round(o*c)),`#${[r,s,o].map(f=>f.toString(16).padStart(2,"0")).join("")}`},VO=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,l=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),f=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(l).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},LO=t=>{const s=(Math.random()-.5)*400*2,o=(Math.random()-.5)*30*2;return{x:t.x+s,y:t.y+650+o}},zO=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,jO=(t,e)=>`edge_${t}_${e}`,UO=(t,e,n,r,s,o,l)=>({id:zO(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:l}}),BO=(t,e,n,r)=>({id:jO(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:xo.ArrowClosed,color:n}}),HO="modulepreload",$O=function(t){return"/"+t},dS={},fC=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let f=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=f(n.map(h=>{if(h=$O(h),h in dS)return;dS[h]=!0;const m=h.endsWith(".css"),_=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":HO,m||(w.as="script"),w.crossOrigin="",w.href=h,c&&w.setAttribute("nonce",c),document.head.appendChild(w),m)return new Promise((R,O)=>{w.addEventListener("load",R),w.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},FO=()=>{};var fS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],c=t[n++],f=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},pC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,f=s+2<t.length,h=f?t[s+2]:0,m=o>>2,_=(o&3)<<4|c>>4;let w=(c&15)<<2|h>>6,R=h&63;f||(R=64,l||(w=64)),r.push(n[m],n[_],n[w],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const _=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||h==null||_==null)throw new GO;const w=o<<2|c>>4;if(r.push(w),h!==64){const R=c<<4&240|h>>2;if(r.push(R),_!==64){const O=h<<6&192|_;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KO=function(t){const e=hC(t);return pC.encodeByteArray(e,!0)},vp=function(t){return KO(t).replace(/\./g,"")},mC=function(t){try{return pC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=()=>YO().__FIREBASE_DEFAULTS__,WO=()=>{if(typeof process>"u"||typeof fS>"u")return;const t=fS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mC(t[1]);return e&&JSON.parse(e)},em=()=>{try{return FO()||XO()||WO()||QO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gC=t=>{var e,n;return(n=(e=em())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yC=t=>{const e=gC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vC=()=>{var t;return(t=em())===null||t===void 0?void 0:t.config},_C=t=>{var e;return(e=em())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){return t.endsWith(".cloudworkstations.dev")}async function s_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vp(JSON.stringify(n)),vp(JSON.stringify(l)),""].join(".")}const Zc={};function eV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zc))Zc[e]?t.emulator.push(e):t.prod.push(e);return t}function tV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let hS=!1;function a_(t,e){if(typeof window>"u"||typeof document>"u"||!Oo(window.location.host)||Zc[t]===e||Zc[t]||hS)return;Zc[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=eV().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function f(w,R){w.setAttribute("width","24"),w.setAttribute("id",R),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{hS=!0,l()},w}function m(w,R){w.setAttribute("id",R),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){const w=tV(r),R=n("text"),O=document.getElementById(R)||document.createElement("span"),V=n("learnmore"),z=document.getElementById(V)||document.createElement("a"),j=n("preprendIcon"),F=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const X=w.element;c(X),m(z,V);const y=h();f(F,j),X.append(F,O,z,y),document.body.appendChild(X)}o?(O.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function rV(){var t;const e=(t=em())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oV(){const t=Mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lV(){return!rV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uV(){try{return typeof indexedDB=="object"}catch{return!1}}function cV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="FirebaseError";class Ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dV,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bd.prototype.create)}}class Bd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?fV(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Ui(s,c,r)}}function fV(t,e){return t.replace(hV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hV=/\{\$([^}]+)}/g;function pV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ro(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(pS(o)&&pS(l)){if(!Ro(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function pS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Kc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mV(t,e){const n=new gV(t,e);return n.subscribe.bind(n)}class gV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=X0),s.error===void 0&&(s.error=X0),s.complete===void 0&&(s.complete=X0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function X0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class va{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wV(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_V(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _V(t){return t===ho?void 0:t}function wV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const EV={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},TV=Xe.INFO,SV={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},AV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=SV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o_{constructor(e){this.name=e,this._logLevel=TV,this._logHandler=AV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const xV=(t,e)=>e.some(n=>t instanceof n);let mS,gS;function CV(){return mS||(mS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RV(){return gS||(gS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wC=new WeakMap,By=new WeakMap,bC=new WeakMap,W0=new WeakMap,l_=new WeakMap;function kV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(fa(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&wC.set(n,t)}).catch(()=>{}),l_.set(e,t),e}function IV(t){if(By.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});By.set(t,e)}let Hy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return By.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NV(t){Hy=t(Hy)}function DV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Q0(this),e,...n);return bC.set(r,e.sort?e.sort():[e]),fa(r)}:RV().includes(t)?function(...e){return t.apply(Q0(this),e),fa(wC.get(this))}:function(...e){return fa(t.apply(Q0(this),e))}}function MV(t){return typeof t=="function"?DV(t):(t instanceof IDBTransaction&&IV(t),xV(t,CV())?new Proxy(t,Hy):t)}function fa(t){if(t instanceof IDBRequest)return kV(t);if(W0.has(t))return W0.get(t);const e=MV(t);return e!==t&&(W0.set(t,e),l_.set(e,t)),e}const Q0=t=>l_.get(t);function PV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),c=fa(l);return r&&l.addEventListener("upgradeneeded",f=>{r(fa(l.result),f.oldVersion,f.newVersion,fa(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const OV=["get","getKey","getAll","getAllKeys","count"],VV=["put","add","delete","clear"],Z0=new Map;function yS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Z0.get(e))return Z0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=VV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||OV.includes(n)))return;const o=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&f.done]))[0]};return Z0.set(e,o),o}NV(t=>({...t,get:(e,n,r)=>yS(e,n)||t.get(e,n,r),has:(e,n)=>!!yS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zV(t){const e=t.getComponent();return e?.type==="VERSION"}const $y="@firebase/app",vS="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new o_("@firebase/app"),jV="@firebase/app-compat",UV="@firebase/analytics-compat",BV="@firebase/analytics",HV="@firebase/app-check-compat",$V="@firebase/app-check",FV="@firebase/auth",qV="@firebase/auth-compat",GV="@firebase/database",KV="@firebase/data-connect",YV="@firebase/database-compat",XV="@firebase/functions",WV="@firebase/functions-compat",QV="@firebase/installations",ZV="@firebase/installations-compat",JV="@firebase/messaging",eL="@firebase/messaging-compat",tL="@firebase/performance",nL="@firebase/performance-compat",rL="@firebase/remote-config",iL="@firebase/remote-config-compat",sL="@firebase/storage",aL="@firebase/storage-compat",oL="@firebase/firestore",lL="@firebase/ai",uL="@firebase/firestore-compat",cL="firebase",dL="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="[DEFAULT]",fL={[$y]:"fire-core",[jV]:"fire-core-compat",[BV]:"fire-analytics",[UV]:"fire-analytics-compat",[$V]:"fire-app-check",[HV]:"fire-app-check-compat",[FV]:"fire-auth",[qV]:"fire-auth-compat",[GV]:"fire-rtdb",[KV]:"fire-data-connect",[YV]:"fire-rtdb-compat",[XV]:"fire-fn",[WV]:"fire-fn-compat",[QV]:"fire-iid",[ZV]:"fire-iid-compat",[JV]:"fire-fcm",[eL]:"fire-fcm-compat",[tL]:"fire-perf",[nL]:"fire-perf-compat",[rL]:"fire-rc",[iL]:"fire-rc-compat",[sL]:"fire-gcs",[aL]:"fire-gcs-compat",[oL]:"fire-fst",[uL]:"fire-fst-compat",[lL]:"fire-vertex","fire-js":"fire-js",[cL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new Map,hL=new Map,qy=new Map;function _S(t,e){try{t.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ko(t){const e=t.name;if(qy.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;qy.set(e,t);for(const n of _p.values())_S(n,t);for(const n of hL.values())_S(n,t);return!0}function tm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ha=new Bd("app","Firebase",pL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=dL;function EC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fy,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw ha.create("bad-app-name",{appName:String(s)});if(n||(n=vC()),!n)throw ha.create("no-options");const o=_p.get(s);if(o){if(Ro(n,o.options)&&Ro(r,o.config))return o;throw ha.create("duplicate-app",{appName:s})}const l=new bV(s);for(const f of qy.values())l.addComponent(f);const c=new mL(n,r,l);return _p.set(s,c),c}function u_(t=Fy){const e=_p.get(t);if(!e&&t===Fy&&vC())return EC();if(!e)throw ha.create("no-app",{appName:t});return e}function Ii(t,e,n){var r;let s=(r=fL[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}ko(new va(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="firebase-heartbeat-database",yL=1,_d="firebase-heartbeat-store";let J0=null;function TC(){return J0||(J0=PV(gL,yL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_d)}catch(n){console.warn(n)}}}}).catch(t=>{throw ha.create("idb-open",{originalErrorMessage:t.message})})),J0}async function vL(t){try{const n=(await TC()).transaction(_d),r=await n.objectStore(_d).get(SC(t));return await n.done,r}catch(e){if(e instanceof Ui)_s.warn(e.message);else{const n=ha.create("idb-get",{originalErrorMessage:e?.message});_s.warn(n.message)}}}async function wS(t,e){try{const r=(await TC()).transaction(_d,"readwrite");await r.objectStore(_d).put(e,SC(t)),await r.done}catch(n){if(n instanceof Ui)_s.warn(n.message);else{const r=ha.create("idb-set",{originalErrorMessage:n?.message});_s.warn(r.message)}}}function SC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=1024,wL=30;class bL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=bS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>wL){const l=SL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bS(),{heartbeatsToSend:r,unsentEntries:s}=EL(this._heartbeatsCache.heartbeats),o=vp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return _s.warn(n),""}}}function bS(){return new Date().toISOString().substring(0,10)}function EL(t,e=_L){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),ES(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ES(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uV()?cV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ES(t){return vp(JSON.stringify({version:2,heartbeats:t})).length}function SL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t){ko(new va("platform-logger",e=>new LV(e),"PRIVATE")),ko(new va("heartbeat",e=>new bL(e),"PRIVATE")),Ii($y,vS,t),Ii($y,vS,"esm2017"),Ii("fire-js","")}AL("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL="type.googleapis.com/google.protobuf.Int64Value",CL="type.googleapis.com/google.protobuf.UInt64Value";function AC(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function wp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>wp(e));if(typeof t=="function"||typeof t=="object")return AC(t,e=>wp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function uu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case xL:case CL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>uu(e)):typeof t=="function"||typeof t=="object"?AC(t,e=>uu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qn extends Ui{constructor(e,n,r){super(`${c_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Qn.prototype)}}function RL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function bp(t,e){let n=RL(t),r=n,s;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!TS[l])return new Qn("internal","internal");n=TS[l],r=l}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=uu(s))}}catch{}return n==="ok"?null:new Qn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="us-central1",IL=/^data: (.*?)(?:\n|$)/;function NL(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Qn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class DL{constructor(e,n,r,s,o=Gy,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new kL(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Gy}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function ML(t,e,n){const r=Oo(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(s_(t.emulatorOrigin),a_("Functions",!0))}function PL(t,e,n){const r=s=>VL(t,e,s,{});return r.stream=(s,o)=>zL(t,e,s,o),r}async function OL(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function xC(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function VL(t,e,n,r){const s=t._url(e);return LL(t,s,n,r)}async function LL(t,e,n,r){n=wp(n);const s={data:n},o=await xC(t,r),l=r.timeout||7e4,c=NL(l),f=await Promise.race([OL(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!f)throw new Qn("cancelled","Firebase Functions instance was deleted.");const h=bp(f.status,f.json);if(h)throw h;if(!f.json)throw new Qn("internal","Response is not valid JSON object.");let m=f.json.data;if(typeof m>"u"&&(m=f.json.result),typeof m>"u")throw new Qn("internal","Response is missing data field.");return{data:uu(m)}}function zL(t,e,n,r){const s=t._url(e);return jL(t,s,n,r||{})}async function jL(t,e,n,r){var s;n=wp(n);const o={data:n},l=await xC(t,r);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:r?.signal})}catch(R){if(R instanceof Error&&R.name==="AbortError"){const V=new Qn("cancelled","Request was cancelled.");return{data:Promise.reject(V),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(V)}}}}}}const O=bp(0,null);return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}let f,h;const m=new Promise((R,O)=>{f=R,h=O});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const R=new Qn("cancelled","Request was cancelled.");h(R)});const _=c.body.getReader(),w=UL(_,f,h,r?.signal);return{stream:{[Symbol.asyncIterator](){const R=w.getReader();return{async next(){const{value:O,done:V}=await R.read();return{value:O,done:V}},async return(){return await R.cancel(),{done:!0,value:void 0}}}}},data:m}}function UL(t,e,n,r){const s=(l,c)=>{const f=l.match(IL);if(!f)return;const h=f[1];try{const m=JSON.parse(h);if("result"in m){e(uu(m.result));return}if("message"in m){c.enqueue(uu(m.message));return}if("error"in m){const _=bp(0,m);c.error(_),n(_);return}}catch(m){if(m instanceof Qn){c.error(m),n(m);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return f();async function f(){if(r?.aborted){const h=new Qn("cancelled","Request was cancelled");return l.error(h),n(h),Promise.resolve()}try{const{value:h,done:m}=await t.read();if(m){c.trim()&&s(c.trim(),l),l.close();return}if(r?.aborted){const w=new Qn("cancelled","Request was cancelled");l.error(w),n(w),await t.cancel();return}c+=o.decode(h,{stream:!0});const _=c.split(`
`);c=_.pop()||"";for(const w of _)w.trim()&&s(w.trim(),l);return f()}catch(h){const m=h instanceof Qn?h:bp(0,null);l.error(m),n(m)}}},cancel(){return t.cancel()}})}const SS="@firebase/functions",AS="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="auth-internal",HL="app-check-internal",$L="messaging-internal";function FL(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(BL),l=n.getProvider($L),c=n.getProvider(HL);return new DL(s,o,l,c,r)};ko(new va(c_,e,"PUBLIC").setMultipleInstances(!0)),Ii(SS,AS,t),Ii(SS,AS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t=u_(),e=Gy){const r=tm(Vt(t),c_).getImmediate({identifier:e}),s=yC("functions");return s&&GL(r,...s),r}function GL(t,e,n){ML(Vt(t),e,n)}function KL(t,e,n){return PL(Vt(t),e)}FL();var YL="firebase",XL="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(YL,XL,"app");var xS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pa,CC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,A){function x(){}x.prototype=A.prototype,T.D=A.prototype,T.prototype=new x,T.prototype.constructor=T,T.C=function(k,I,B){for(var P=Array(arguments.length-2),M=2;M<arguments.length;M++)P[M-2]=arguments[M];return A.prototype[I].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,A,x){x||(x=0);var k=Array(16);if(typeof A=="string")for(var I=0;16>I;++I)k[I]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(I=0;16>I;++I)k[I]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=T.g[0],x=T.g[1],I=T.g[2];var B=T.g[3],P=A+(B^x&(I^B))+k[0]+3614090360&4294967295;A=x+(P<<7&4294967295|P>>>25),P=B+(I^A&(x^I))+k[1]+3905402710&4294967295,B=A+(P<<12&4294967295|P>>>20),P=I+(x^B&(A^x))+k[2]+606105819&4294967295,I=B+(P<<17&4294967295|P>>>15),P=x+(A^I&(B^A))+k[3]+3250441966&4294967295,x=I+(P<<22&4294967295|P>>>10),P=A+(B^x&(I^B))+k[4]+4118548399&4294967295,A=x+(P<<7&4294967295|P>>>25),P=B+(I^A&(x^I))+k[5]+1200080426&4294967295,B=A+(P<<12&4294967295|P>>>20),P=I+(x^B&(A^x))+k[6]+2821735955&4294967295,I=B+(P<<17&4294967295|P>>>15),P=x+(A^I&(B^A))+k[7]+4249261313&4294967295,x=I+(P<<22&4294967295|P>>>10),P=A+(B^x&(I^B))+k[8]+1770035416&4294967295,A=x+(P<<7&4294967295|P>>>25),P=B+(I^A&(x^I))+k[9]+2336552879&4294967295,B=A+(P<<12&4294967295|P>>>20),P=I+(x^B&(A^x))+k[10]+4294925233&4294967295,I=B+(P<<17&4294967295|P>>>15),P=x+(A^I&(B^A))+k[11]+2304563134&4294967295,x=I+(P<<22&4294967295|P>>>10),P=A+(B^x&(I^B))+k[12]+1804603682&4294967295,A=x+(P<<7&4294967295|P>>>25),P=B+(I^A&(x^I))+k[13]+4254626195&4294967295,B=A+(P<<12&4294967295|P>>>20),P=I+(x^B&(A^x))+k[14]+2792965006&4294967295,I=B+(P<<17&4294967295|P>>>15),P=x+(A^I&(B^A))+k[15]+1236535329&4294967295,x=I+(P<<22&4294967295|P>>>10),P=A+(I^B&(x^I))+k[1]+4129170786&4294967295,A=x+(P<<5&4294967295|P>>>27),P=B+(x^I&(A^x))+k[6]+3225465664&4294967295,B=A+(P<<9&4294967295|P>>>23),P=I+(A^x&(B^A))+k[11]+643717713&4294967295,I=B+(P<<14&4294967295|P>>>18),P=x+(B^A&(I^B))+k[0]+3921069994&4294967295,x=I+(P<<20&4294967295|P>>>12),P=A+(I^B&(x^I))+k[5]+3593408605&4294967295,A=x+(P<<5&4294967295|P>>>27),P=B+(x^I&(A^x))+k[10]+38016083&4294967295,B=A+(P<<9&4294967295|P>>>23),P=I+(A^x&(B^A))+k[15]+3634488961&4294967295,I=B+(P<<14&4294967295|P>>>18),P=x+(B^A&(I^B))+k[4]+3889429448&4294967295,x=I+(P<<20&4294967295|P>>>12),P=A+(I^B&(x^I))+k[9]+568446438&4294967295,A=x+(P<<5&4294967295|P>>>27),P=B+(x^I&(A^x))+k[14]+3275163606&4294967295,B=A+(P<<9&4294967295|P>>>23),P=I+(A^x&(B^A))+k[3]+4107603335&4294967295,I=B+(P<<14&4294967295|P>>>18),P=x+(B^A&(I^B))+k[8]+1163531501&4294967295,x=I+(P<<20&4294967295|P>>>12),P=A+(I^B&(x^I))+k[13]+2850285829&4294967295,A=x+(P<<5&4294967295|P>>>27),P=B+(x^I&(A^x))+k[2]+4243563512&4294967295,B=A+(P<<9&4294967295|P>>>23),P=I+(A^x&(B^A))+k[7]+1735328473&4294967295,I=B+(P<<14&4294967295|P>>>18),P=x+(B^A&(I^B))+k[12]+2368359562&4294967295,x=I+(P<<20&4294967295|P>>>12),P=A+(x^I^B)+k[5]+4294588738&4294967295,A=x+(P<<4&4294967295|P>>>28),P=B+(A^x^I)+k[8]+2272392833&4294967295,B=A+(P<<11&4294967295|P>>>21),P=I+(B^A^x)+k[11]+1839030562&4294967295,I=B+(P<<16&4294967295|P>>>16),P=x+(I^B^A)+k[14]+4259657740&4294967295,x=I+(P<<23&4294967295|P>>>9),P=A+(x^I^B)+k[1]+2763975236&4294967295,A=x+(P<<4&4294967295|P>>>28),P=B+(A^x^I)+k[4]+1272893353&4294967295,B=A+(P<<11&4294967295|P>>>21),P=I+(B^A^x)+k[7]+4139469664&4294967295,I=B+(P<<16&4294967295|P>>>16),P=x+(I^B^A)+k[10]+3200236656&4294967295,x=I+(P<<23&4294967295|P>>>9),P=A+(x^I^B)+k[13]+681279174&4294967295,A=x+(P<<4&4294967295|P>>>28),P=B+(A^x^I)+k[0]+3936430074&4294967295,B=A+(P<<11&4294967295|P>>>21),P=I+(B^A^x)+k[3]+3572445317&4294967295,I=B+(P<<16&4294967295|P>>>16),P=x+(I^B^A)+k[6]+76029189&4294967295,x=I+(P<<23&4294967295|P>>>9),P=A+(x^I^B)+k[9]+3654602809&4294967295,A=x+(P<<4&4294967295|P>>>28),P=B+(A^x^I)+k[12]+3873151461&4294967295,B=A+(P<<11&4294967295|P>>>21),P=I+(B^A^x)+k[15]+530742520&4294967295,I=B+(P<<16&4294967295|P>>>16),P=x+(I^B^A)+k[2]+3299628645&4294967295,x=I+(P<<23&4294967295|P>>>9),P=A+(I^(x|~B))+k[0]+4096336452&4294967295,A=x+(P<<6&4294967295|P>>>26),P=B+(x^(A|~I))+k[7]+1126891415&4294967295,B=A+(P<<10&4294967295|P>>>22),P=I+(A^(B|~x))+k[14]+2878612391&4294967295,I=B+(P<<15&4294967295|P>>>17),P=x+(B^(I|~A))+k[5]+4237533241&4294967295,x=I+(P<<21&4294967295|P>>>11),P=A+(I^(x|~B))+k[12]+1700485571&4294967295,A=x+(P<<6&4294967295|P>>>26),P=B+(x^(A|~I))+k[3]+2399980690&4294967295,B=A+(P<<10&4294967295|P>>>22),P=I+(A^(B|~x))+k[10]+4293915773&4294967295,I=B+(P<<15&4294967295|P>>>17),P=x+(B^(I|~A))+k[1]+2240044497&4294967295,x=I+(P<<21&4294967295|P>>>11),P=A+(I^(x|~B))+k[8]+1873313359&4294967295,A=x+(P<<6&4294967295|P>>>26),P=B+(x^(A|~I))+k[15]+4264355552&4294967295,B=A+(P<<10&4294967295|P>>>22),P=I+(A^(B|~x))+k[6]+2734768916&4294967295,I=B+(P<<15&4294967295|P>>>17),P=x+(B^(I|~A))+k[13]+1309151649&4294967295,x=I+(P<<21&4294967295|P>>>11),P=A+(I^(x|~B))+k[4]+4149444226&4294967295,A=x+(P<<6&4294967295|P>>>26),P=B+(x^(A|~I))+k[11]+3174756917&4294967295,B=A+(P<<10&4294967295|P>>>22),P=I+(A^(B|~x))+k[2]+718787259&4294967295,I=B+(P<<15&4294967295|P>>>17),P=x+(B^(I|~A))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(I+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+B&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var x=A-this.blockSize,k=this.B,I=this.h,B=0;B<A;){if(I==0)for(;B<=x;)s(this,T,B),B+=this.blockSize;if(typeof T=="string"){for(;B<A;)if(k[I++]=T.charCodeAt(B++),I==this.blockSize){s(this,k),I=0;break}}else for(;B<A;)if(k[I++]=T[B++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var x=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=x&255,x/=256;for(this.u(T),T=Array(16),A=x=0;4>A;++A)for(var k=0;32>k;k+=8)T[x++]=this.g[A]>>>k&255;return T};function o(T,A){var x=c;return Object.prototype.hasOwnProperty.call(x,T)?x[T]:x[T]=A(T)}function l(T,A){this.h=A;for(var x=[],k=!0,I=T.length-1;0<=I;I--){var B=T[I]|0;k&&B==A||(x[I]=B,k=!1)}this.g=x}var c={};function f(T){return-128<=T&&128>T?o(T,function(A){return new l([A|0],0>A?-1:0)}):new l([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return _;if(0>T)return z(h(-T));for(var A=[],x=1,k=0;T>=x;k++)A[k]=T/x|0,x*=4294967296;return new l(A,0)}function m(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return z(m(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=h(Math.pow(A,8)),k=_,I=0;I<T.length;I+=8){var B=Math.min(8,T.length-I),P=parseInt(T.substring(I,I+B),A);8>B?(B=h(Math.pow(A,B)),k=k.j(B).add(h(P))):(k=k.j(x),k=k.add(h(P)))}return k}var _=f(0),w=f(1),R=f(16777216);t=l.prototype,t.m=function(){if(V(this))return-z(this).m();for(var T=0,A=1,x=0;x<this.g.length;x++){var k=this.i(x);T+=(0<=k?k:4294967296+k)*A,A*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(O(this))return"0";if(V(this))return"-"+z(this).toString(T);for(var A=h(Math.pow(T,6)),x=this,k="";;){var I=y(x,A).g;x=j(x,I.j(A));var B=((0<x.g.length?x.g[0]:x.h)>>>0).toString(T);if(x=I,O(x))return B+k;for(;6>B.length;)B="0"+B;k=B+k}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function O(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function V(T){return T.h==-1}t.l=function(T){return T=j(this,T),V(T)?-1:O(T)?0:1};function z(T){for(var A=T.g.length,x=[],k=0;k<A;k++)x[k]=~T.g[k];return new l(x,~T.h).add(w)}t.abs=function(){return V(this)?z(this):this},t.add=function(T){for(var A=Math.max(this.g.length,T.g.length),x=[],k=0,I=0;I<=A;I++){var B=k+(this.i(I)&65535)+(T.i(I)&65535),P=(B>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);k=P>>>16,B&=65535,P&=65535,x[I]=P<<16|B}return new l(x,x[x.length-1]&-2147483648?-1:0)};function j(T,A){return T.add(z(A))}t.j=function(T){if(O(this)||O(T))return _;if(V(this))return V(T)?z(this).j(z(T)):z(z(this).j(T));if(V(T))return z(this.j(z(T)));if(0>this.l(R)&&0>T.l(R))return h(this.m()*T.m());for(var A=this.g.length+T.g.length,x=[],k=0;k<2*A;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var I=0;I<T.g.length;I++){var B=this.i(k)>>>16,P=this.i(k)&65535,M=T.i(I)>>>16,K=T.i(I)&65535;x[2*k+2*I]+=P*K,F(x,2*k+2*I),x[2*k+2*I+1]+=B*K,F(x,2*k+2*I+1),x[2*k+2*I+1]+=P*M,F(x,2*k+2*I+1),x[2*k+2*I+2]+=B*M,F(x,2*k+2*I+2)}for(k=0;k<A;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=A;k<2*A;k++)x[k]=0;return new l(x,0)};function F(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function X(T,A){this.g=T,this.h=A}function y(T,A){if(O(A))throw Error("division by zero");if(O(T))return new X(_,_);if(V(T))return A=y(z(T),A),new X(z(A.g),z(A.h));if(V(A))return A=y(T,z(A)),new X(z(A.g),A.h);if(30<T.g.length){if(V(T)||V(A))throw Error("slowDivide_ only works with positive integers.");for(var x=w,k=A;0>=k.l(T);)x=E(x),k=E(k);var I=b(x,1),B=b(k,1);for(k=b(k,2),x=b(x,2);!O(k);){var P=B.add(k);0>=P.l(T)&&(I=I.add(x),B=P),k=b(k,1),x=b(x,1)}return A=j(T,I.j(A)),new X(I,A)}for(I=_;0<=T.l(A);){for(x=Math.max(1,Math.floor(T.m()/A.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),B=h(x),P=B.j(A);V(P)||0<P.l(T);)x-=k,B=h(x),P=B.j(A);O(B)&&(B=w),I=I.add(B),T=j(T,P)}return new X(I,T)}t.A=function(T){return y(this,T).h},t.and=function(T){for(var A=Math.max(this.g.length,T.g.length),x=[],k=0;k<A;k++)x[k]=this.i(k)&T.i(k);return new l(x,this.h&T.h)},t.or=function(T){for(var A=Math.max(this.g.length,T.g.length),x=[],k=0;k<A;k++)x[k]=this.i(k)|T.i(k);return new l(x,this.h|T.h)},t.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),x=[],k=0;k<A;k++)x[k]=this.i(k)^T.i(k);return new l(x,this.h^T.h)};function E(T){for(var A=T.g.length+1,x=[],k=0;k<A;k++)x[k]=T.i(k)<<1|T.i(k-1)>>>31;return new l(x,T.h)}function b(T,A){var x=A>>5;A%=32;for(var k=T.g.length-x,I=[],B=0;B<k;B++)I[B]=0<A?T.i(B+x)>>>A|T.i(B+x+1)<<32-A:T.i(B+x);return new l(I,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=m,pa=l}).apply(typeof xS<"u"?xS:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RC,Yc,kC,Gh,Ky,IC,NC,DC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,S,N){return p==Array.prototype||p==Object.prototype||(p[S]=N.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var S=0;S<p.length;++S){var N=p[S];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function s(p,S){if(S)e:{var N=r;p=p.split(".");for(var G=0;G<p.length-1;G++){var ie=p[G];if(!(ie in N))break e;N=N[ie]}p=p[p.length-1],G=N[p],S=S(G),S!=G&&S!=null&&e(N,p,{configurable:!0,writable:!0,value:S})}}function o(p,S){p instanceof String&&(p+="");var N=0,G=!1,ie={next:function(){if(!G&&N<p.length){var de=N++;return{value:S(de,p[de]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(p){return p||function(){return o(this,function(S,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(p){var S=typeof p;return S=S!="object"?S:p?Array.isArray(p)?"array":S:"null",S=="array"||S=="object"&&typeof p.length=="number"}function h(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function m(p,S,N){return p.call.apply(p.bind,arguments)}function _(p,S,N){if(!p)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,G),p.apply(S,ie)}}return function(){return p.apply(S,arguments)}}function w(p,S,N){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:_,w.apply(null,arguments)}function R(p,S){var N=Array.prototype.slice.call(arguments,1);return function(){var G=N.slice();return G.push.apply(G,arguments),p.apply(this,G)}}function O(p,S){function N(){}N.prototype=S.prototype,p.aa=S.prototype,p.prototype=new N,p.prototype.constructor=p,p.Qb=function(G,ie,de){for(var we=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)we[Je-2]=arguments[Je];return S.prototype[ie].apply(G,we)}}function V(p){const S=p.length;if(0<S){const N=Array(S);for(let G=0;G<S;G++)N[G]=p[G];return N}return[]}function z(p,S){for(let N=1;N<arguments.length;N++){const G=arguments[N];if(f(G)){const ie=p.length||0,de=G.length||0;p.length=ie+de;for(let we=0;we<de;we++)p[ie+we]=G[we]}else p.push(G)}}class j{constructor(S,N){this.i=S,this.j=N,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function F(p){return/^[\s\xa0]*$/.test(p)}function X(){var p=c.navigator;return p&&(p=p.userAgent)?p:""}function y(p){return y[" "](p),p}y[" "]=function(){};var E=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function b(p,S,N){for(const G in p)S.call(N,p[G],G,p)}function T(p,S){for(const N in p)S.call(void 0,p[N],N,p)}function A(p){const S={};for(const N in p)S[N]=p[N];return S}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(p,S){let N,G;for(let ie=1;ie<arguments.length;ie++){G=arguments[ie];for(N in G)p[N]=G[N];for(let de=0;de<x.length;de++)N=x[de],Object.prototype.hasOwnProperty.call(G,N)&&(p[N]=G[N])}}function I(p){var S=1;p=p.split(":");const N=[];for(;0<S&&p.length;)N.push(p.shift()),S--;return p.length&&N.push(p.join(":")),N}function B(p){c.setTimeout(()=>{throw p},0)}function P(){var p=W;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class M{constructor(){this.h=this.g=null}add(S,N){const G=K.get();G.set(S,N),this.h?this.h.next=G:this.g=G,this.h=G}}var K=new j(()=>new C,p=>p.reset());class C{constructor(){this.next=this.g=this.h=null}set(S,N){this.h=S,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let q,Y=!1,W=new M,U=()=>{const p=c.Promise.resolve(void 0);q=()=>{p.then(Q)}};var Q=()=>{for(var p;p=P();){try{p.h.call(p.g)}catch(N){B(N)}var S=K;S.j(p),100>S.h&&(S.h++,p.next=S.g,S.g=p)}Y=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const N=()=>{};c.addEventListener("test",N,S),c.removeEventListener("test",N,S)}catch{}return p}();function oe(p,S){if(J.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var N=this.type=p.type,G=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget){if(E){e:{try{y(S.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(S=null)}}else N=="mouseover"?S=p.fromElement:N=="mouseout"&&(S=p.toElement);this.relatedTarget=S,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ce[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&oe.aa.h.call(this)}}O(oe,J);var ce={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),me=0;function be(p,S,N,G,ie){this.listener=p,this.proxy=null,this.src=S,this.type=N,this.capture=!!G,this.ha=ie,this.key=++me,this.da=this.fa=!1}function Ce(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Qe(p){this.src=p,this.g={},this.h=0}Qe.prototype.add=function(p,S,N,G,ie){var de=p.toString();p=this.g[de],p||(p=this.g[de]=[],this.h++);var we=Ve(p,S,G,ie);return-1<we?(S=p[we],N||(S.fa=!1)):(S=new be(S,this.src,de,!!G,ie),S.fa=N,p.push(S)),S};function Ze(p,S){var N=S.type;if(N in p.g){var G=p.g[N],ie=Array.prototype.indexOf.call(G,S,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(G,ie,1),de&&(Ce(S),p.g[N].length==0&&(delete p.g[N],p.h--))}}function Ve(p,S,N,G){for(var ie=0;ie<p.length;++ie){var de=p[ie];if(!de.da&&de.listener==S&&de.capture==!!N&&de.ha==G)return ie}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),st={};function Ht(p,S,N,G,ie){if(Array.isArray(S)){for(var de=0;de<S.length;de++)Ht(p,S[de],N,G,ie);return null}return N=Hr(N),p&&p[fe]?p.K(S,N,h(G)?!!G.capture:!1,ie):je(p,S,N,!1,G,ie)}function je(p,S,N,G,ie,de){if(!S)throw Error("Invalid event type");var we=h(ie)?!!ie.capture:!!ie,Je=Pn(p);if(Je||(p[rt]=Je=new Qe(p)),N=Je.add(S,N,G,we,de),N.proxy)return N;if(G=Ee(),N.proxy=G,G.src=p,G.listener=N,p.addEventListener)te||(ie=we),ie===void 0&&(ie=!1),p.addEventListener(S.toString(),G,ie);else if(p.attachEvent)p.attachEvent(Qt(S.toString()),G);else if(p.addListener&&p.removeListener)p.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Ee(){function p(N){return S.call(p.src,p.listener,N)}const S=Jn;return p}function kt(p,S,N,G,ie){if(Array.isArray(S))for(var de=0;de<S.length;de++)kt(p,S[de],N,G,ie);else G=h(G)?!!G.capture:!!G,N=Hr(N),p&&p[fe]?(p=p.i,S=String(S).toString(),S in p.g&&(de=p.g[S],N=Ve(de,N,G,ie),-1<N&&(Ce(de[N]),Array.prototype.splice.call(de,N,1),de.length==0&&(delete p.g[S],p.h--)))):p&&(p=Pn(p))&&(S=p.g[S.toString()],p=-1,S&&(p=Ve(S,N,G,ie)),(N=-1<p?S[p]:null)&&Sn(N))}function Sn(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[fe])Ze(S.i,p);else{var N=p.type,G=p.proxy;S.removeEventListener?S.removeEventListener(N,G,p.capture):S.detachEvent?S.detachEvent(Qt(N),G):S.addListener&&S.removeListener&&S.removeListener(G),(N=Pn(S))?(Ze(N,p),N.h==0&&(N.src=null,S[rt]=null)):Ce(p)}}}function Qt(p){return p in st?st[p]:st[p]="on"+p}function Jn(p,S){if(p.da)p=!0;else{S=new oe(S,this);var N=p.listener,G=p.ha||p.src;p.fa&&Sn(p),p=N.call(G,S)}return p}function Pn(p){return p=p[rt],p instanceof Qe?p:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(p){return typeof p=="function"?p:(p[On]||(p[On]=function(S){return p.handleEvent(S)}),p[On])}function ot(){ne.call(this),this.i=new Qe(this),this.M=this,this.F=null}O(ot,ne),ot.prototype[fe]=!0,ot.prototype.removeEventListener=function(p,S,N,G){kt(this,p,S,N,G)};function Ge(p,S){var N,G=p.F;if(G)for(N=[];G;G=G.F)N.push(G);if(p=p.M,G=S.type||S,typeof S=="string")S=new J(S,p);else if(S instanceof J)S.target=S.target||p;else{var ie=S;S=new J(G,p),k(S,ie)}if(ie=!0,N)for(var de=N.length-1;0<=de;de--){var we=S.g=N[de];ie=$t(we,G,!0,S)&&ie}if(we=S.g=p,ie=$t(we,G,!0,S)&&ie,ie=$t(we,G,!1,S)&&ie,N)for(de=0;de<N.length;de++)we=S.g=N[de],ie=$t(we,G,!1,S)&&ie}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var p=this.i,S;for(S in p.g){for(var N=p.g[S],G=0;G<N.length;G++)Ce(N[G]);delete p.g[S],p.h--}}this.F=null},ot.prototype.K=function(p,S,N,G){return this.i.add(String(p),S,!1,N,G)},ot.prototype.L=function(p,S,N,G){return this.i.add(String(p),S,!0,N,G)};function $t(p,S,N,G){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();for(var ie=!0,de=0;de<S.length;++de){var we=S[de];if(we&&!we.da&&we.capture==N){var Je=we.listener,Jt=we.ha||we.src;we.fa&&Ze(p.i,we),ie=Je.call(Jt,G)!==!1&&ie}}return ie&&!G.defaultPrevented}function Tt(p,S,N){if(typeof p=="function")N&&(p=w(p,N));else if(p&&typeof p.handleEvent=="function")p=w(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:c.setTimeout(p,S||0)}function oi(p){p.g=Tt(()=>{p.g=null,p.i&&(p.i=!1,oi(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class Ft extends ne{constructor(S,N){super(),this.m=S,this.l=N,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:oi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(p){ne.call(this),this.h=p,this.g={}}O(sn,ne);var Vn=[];function Ln(p){b(p.g,function(S,N){this.g.hasOwnProperty(N)&&Sn(S)},p),p.g={}}sn.prototype.N=function(){sn.aa.N.call(this),Ln(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=c.JSON.stringify,pn=c.JSON.parse,zn=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Bi(){}Bi.prototype.h=null;function Hi(p){return p.h||(p.h=p.i())}function $r(){}var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wr(){J.call(this,"d")}O(wr,J);function tr(){J.call(this,"c")}O(tr,J);var br={},Da=null;function li(){return Da=Da||new ot}br.La="serverreachability";function As(p){J.call(this,br.La,p)}O(As,J);function ui(p){const S=li();Ge(S,new As(S))}br.STAT_EVENT="statevent";function Uo(p,S){J.call(this,br.STAT_EVENT,p),this.stat=S}O(Uo,J);function yt(p){const S=li();Ge(S,new Uo(S,p))}br.Ma="timingevent";function Lt(p,S){J.call(this,br.Ma,p),this.size=S}O(Lt,J);function It(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},S)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Ma(p,S,N,G,ie,de){p.info(function(){if(p.g)if(de)for(var we="",Je=de.split("&"),Jt=0;Jt<Je.length;Jt++){var et=Je[Jt].split("=");if(1<et.length){var ln=et[0];et=et[1];var en=ln.split("_");we=2<=en.length&&en[1]=="type"?we+(ln+"="+et+"&"):we+(ln+"=redacted&")}}else we=null;else we=de;return"XMLHTTP REQ ("+G+") [attempt "+ie+"]: "+S+`
`+N+`
`+we})}function Nu(p,S,N,G,ie,de,we){p.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ie+"]: "+S+`
`+N+`
`+de+" "+we})}function ci(p,S,N,G){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+$i(p,N)+(G?" "+G:"")})}function Bo(p,S){p.info(function(){return"TIMEOUT: "+S})}Fn.prototype.info=function(){};function $i(p,S){if(!p.g)return S;if(!S)return null;try{var N=JSON.parse(S);if(N){for(p=0;p<N.length;p++)if(Array.isArray(N[p])){var G=N[p];if(!(2>G.length)){var ie=G[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var we=1;we<ie.length;we++)ie[we]=""}}}}return an(N)}catch{return S}}var di={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Er={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function Sr(){}O(Sr,Bi),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},Tr=new Sr;function mn(p,S,N,G){this.j=p,this.i=S,this.l=N,this.R=G||1,this.U=new sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Pa={},xs={};function nr(p,S,N){p.L=1,p.v=za(rr(S)),p.m=N,p.P=!0,Fr(p,null)}function Fr(p,S){p.F=Date.now(),Fi(p),p.A=rr(p.v);var N=p.A,G=p.R;Array.isArray(G)||(G=[String(G)]),Lu(N.i,"t",G),p.C=0,N=p.j.J,p.h=new St,p.g=mf(p.j,N?S:null,!p.m),0<p.O&&(p.M=new Ft(w(p.Y,p,p.g),p.O)),S=p.U,N=p.g,G=p.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Vn[0]=ie.toString()),ie=Vn);for(var de=0;de<ie.length;de++){var we=Ht(N,ie[de],G||S.handleEvent,!1,S.h||S);if(!we)break;S.g[we.key]=we}S=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,S)):(p.u="GET",p.g.ea(p.A,p.u,null,S)),ui(),Ma(p.i,p.u,p.A,p.l,p.R,p.m)}mn.prototype.ca=function(p){p=p.target;const S=this.M;S&&kr(p)==3?S.j():this.Y(p)},mn.prototype.Y=function(p){try{if(p==this.g)e:{const en=kr(this.g);var S=this.g.Ba();const Qi=this.g.Z();if(!(3>en)&&(en!=3||this.g&&(this.h.h||this.g.oa()||of(this.g)))){this.J||en!=4||S==7||(S==8||0>=Qi?ui(3):ui(2)),fi(this);var N=this.g.Z();this.X=N;t:if(Oa(this)){var G=of(this.g);p="";var ie=G.length,de=kr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Ar(this);var we="";break t}this.h.i=new c.TextDecoder}for(S=0;S<ie;S++)this.h.h=!0,p+=this.h.i.decode(G[S],{stream:!(de&&S==ie-1)});G.length=0,this.h.g+=p,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=N==200,Nu(this.i,this.u,this.A,this.l,this.R,en,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Jt=this.g;if((Je=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Je)){var et=Je;break t}}et=null}if(N=et)ci(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hi(this,N);else{this.o=!1,this.s=3,yt(12),Zt(this),Ar(this);break e}}if(this.P){N=!0;let gn;for(;!this.J&&this.C<we.length;)if(gn=Ho(this,we),gn==xs){en==4&&(this.s=4,yt(14),N=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Pa){this.s=4,yt(15),ci(this.i,this.l,we,"[Invalid Chunk]"),N=!1;break}else ci(this.i,this.l,gn,null),hi(this,gn);if(Oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||we.length!=0||this.h.h||(this.s=1,yt(16),N=!1),this.o=this.o&&N,!N)ci(this.i,this.l,we,"[Invalid Chunked Response]"),Zt(this),Ar(this);else if(0<we.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),Ga(ln),ln.M=!0,yt(11))}}else ci(this.i,this.l,we,null),hi(this,we);en==4&&Zt(this),this.o&&!this.J&&(en==4?ff(this.j,this):(this.o=!1,Fi(this)))}else Mm(this.g),N==400&&0<we.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Zt(this),Ar(this)}}}catch{}finally{}};function Oa(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function Ho(p,S){var N=p.C,G=S.indexOf(`
`,N);return G==-1?xs:(N=Number(S.substring(N,G)),isNaN(N)?Pa:(G+=1,G+N>S.length?xs:(S=S.slice(G,G+N),p.C=G+N,S)))}mn.prototype.cancel=function(){this.J=!0,Zt(this)};function Fi(p){p.S=Date.now()+p.I,$o(p,p.I)}function $o(p,S){if(p.B!=null)throw Error("WatchDog timer not null");p.B=It(w(p.ba,p),S)}function fi(p){p.B&&(c.clearTimeout(p.B),p.B=null)}mn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Bo(this.i,this.A),this.L!=2&&(ui(),yt(17)),Zt(this),this.s=2,Ar(this)):$o(this,this.S-p)};function Ar(p){p.j.G==0||p.J||ff(p.j,p)}function Zt(p){fi(p);var S=p.M;S&&typeof S.ma=="function"&&S.ma(),p.M=null,Ln(p.U),p.g&&(S=p.g,p.g=null,S.abort(),S.ma())}function hi(p,S){try{var N=p.j;if(N.G!=0&&(N.g==p||Du(N.h,p))){if(!p.K&&Du(N.h,p)&&N.G==3){try{var G=N.Da.g.parse(S)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ie=G;if(ie[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<p.F)el(N),Zo(N);else break e;Hu(N),yt(18)}}else N.za=ie[1],0<N.za-N.T&&37500>ie[2]&&N.F&&N.v==0&&!N.C&&(N.C=It(w(N.Za,N),6e3));if(1>=pi(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Wi(N,11)}else if((p.K||N.g==p)&&el(N),!F(S))for(ie=N.Da.g.parse(S),S=0;S<ie.length;S++){let et=ie[S];if(N.T=et[0],et=et[1],N.G==2)if(et[0]=="c"){N.K=et[1],N.ia=et[2];const ln=et[3];ln!=null&&(N.la=ln,N.j.info("VER="+N.la));const en=et[4];en!=null&&(N.Aa=en,N.j.info("SVER="+N.Aa));const Qi=et[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(G=1.5*Qi,N.L=G,N.j.info("backChannelRequestTimeoutMs_="+G)),G=N;const gn=p.g;if(gn){const bi=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bi){var de=G.h;de.g||bi.indexOf("spdy")==-1&&bi.indexOf("quic")==-1&&bi.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(qo(de,de.h),de.h=null))}if(G.D){const Fu=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fu&&(G.ya=Fu,ft(G.I,G.D,Fu))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-p.F,N.j.info("Handshake RTT: "+N.R+"ms")),G=N;var we=p;if(G.qa=pf(G,G.J?G.ia:null,G.W),we.K){jn(G.h,we);var Je=we,Jt=G.L;Jt&&(Je.I=Jt),Je.B&&(fi(Je),Fi(Je)),G.g=we}else cf(G);0<N.i.length&&Jo(N)}else et[0]!="stop"&&et[0]!="close"||Wi(N,7);else N.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Wi(N,7):Uu(N):et[0]!="noop"&&N.l&&N.l.ta(et),N.v=0)}}ui(4)}catch{}}var Fo=class{constructor(p,S){this.g=p,this.map=S}};function qr(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cs(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function pi(p){return p.h?1:p.g?p.g.size:0}function Du(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function qo(p,S){p.g?p.g.add(S):p.h=S}function jn(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}qr.prototype.cancel=function(){if(this.i=Mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Mu(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const N of p.g.values())S=S.concat(N.D);return S}return V(p.i)}function km(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(f(p)){for(var S=[],N=p.length,G=0;G<N;G++)S.push(p[G]);return S}S=[],N=0;for(G in p)S[N++]=p[G];return S}function Go(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(f(p)||typeof p=="string"){var S=[];p=p.length;for(var N=0;N<p;N++)S.push(N);return S}S=[],N=0;for(const G in p)S[N++]=G;return S}}}function Pu(p,S){if(p.forEach&&typeof p.forEach=="function")p.forEach(S,void 0);else if(f(p)||typeof p=="string")Array.prototype.forEach.call(p,S,void 0);else for(var N=Go(p),G=km(p),ie=G.length,de=0;de<ie;de++)S.call(void 0,G[de],N&&N[de],p)}var Va=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Im(p,S){if(p){p=p.split("&");for(var N=0;N<p.length;N++){var G=p[N].indexOf("="),ie=null;if(0<=G){var de=p[N].substring(0,G);ie=p[N].substring(G+1)}else de=p[N];S(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function qt(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof qt){this.h=p.h,La(this,p.j),this.o=p.o,this.g=p.g,Rs(this,p.s),this.l=p.l;var S=p.i,N=new Gi;N.i=S.i,S.g&&(N.g=new Map(S.g),N.h=S.h),qi(this,N),this.m=p.m}else p&&(S=String(p).match(Va))?(this.h=!1,La(this,S[1]||"",!0),this.o=xr(S[2]||""),this.g=xr(S[3]||"",!0),Rs(this,S[4]),this.l=xr(S[5]||"",!0),qi(this,S[6]||"",!0),this.m=xr(S[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}qt.prototype.toString=function(){var p=[],S=this.j;S&&p.push(ja(S,Ou,!0),":");var N=this.g;return(N||S=="file")&&(p.push("//"),(S=this.o)&&p.push(ja(S,Ou,!0),"@"),p.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&p.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&p.push("/"),p.push(ja(N,N.charAt(0)=="/"?Nm:Vu,!0))),(N=this.i.toString())&&p.push("?",N),(N=this.m)&&p.push("#",ja(N,Ko)),p.join("")};function rr(p){return new qt(p)}function La(p,S,N){p.j=N?xr(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function Rs(p,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);p.s=S}else p.s=null}function qi(p,S,N){S instanceof Gi?(p.i=S,sf(p.i,p.h)):(N||(S=ja(S,Dm)),p.i=new Gi(S,p.h))}function ft(p,S,N){p.i.set(S,N)}function za(p){return ft(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function xr(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ja(p,S,N){return typeof p=="string"?(p=encodeURI(p).replace(S,rf),N&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function rf(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ou=/[#\/\?@]/g,Vu=/[#\?:]/g,Nm=/[#\?]/g,Dm=/[#\?@]/g,Ko=/#/g;function Gi(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function Cr(p){p.g||(p.g=new Map,p.h=0,p.i&&Im(p.i,function(S,N){p.add(decodeURIComponent(S.replace(/\+/g," ")),N)}))}t=Gi.prototype,t.add=function(p,S){Cr(this),this.i=null,p=mi(this,p);var N=this.g.get(p);return N||this.g.set(p,N=[]),N.push(S),this.h+=1,this};function Ki(p,S){Cr(p),S=mi(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function Yi(p,S){return Cr(p),S=mi(p,S),p.g.has(S)}t.forEach=function(p,S){Cr(this),this.g.forEach(function(N,G){N.forEach(function(ie){p.call(S,ie,G,this)},this)},this)},t.na=function(){Cr(this);const p=Array.from(this.g.values()),S=Array.from(this.g.keys()),N=[];for(let G=0;G<S.length;G++){const ie=p[G];for(let de=0;de<ie.length;de++)N.push(S[G])}return N},t.V=function(p){Cr(this);let S=[];if(typeof p=="string")Yi(this,p)&&(S=S.concat(this.g.get(mi(this,p))));else{p=Array.from(this.g.values());for(let N=0;N<p.length;N++)S=S.concat(p[N])}return S},t.set=function(p,S){return Cr(this),this.i=null,p=mi(this,p),Yi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},t.get=function(p,S){return p?(p=this.V(p),0<p.length?String(p[0]):S):S};function Lu(p,S,N){Ki(p,S),0<N.length&&(p.i=null,p.g.set(mi(p,S),V(N)),p.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(var N=0;N<S.length;N++){var G=S[N];const de=encodeURIComponent(String(G)),we=this.V(G);for(G=0;G<we.length;G++){var ie=de;we[G]!==""&&(ie+="="+encodeURIComponent(String(we[G]))),p.push(ie)}}return this.i=p.join("&")};function mi(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function sf(p,S){S&&!p.j&&(Cr(p),p.i=null,p.g.forEach(function(N,G){var ie=G.toLowerCase();G!=ie&&(Ki(this,G),Lu(this,ie,N))},p)),p.j=S}function Ua(p,S){const N=new Fn;if(c.Image){const G=new Image;G.onload=R(Rr,N,"TestLoadImage: loaded",!0,S,G),G.onerror=R(Rr,N,"TestLoadImage: error",!1,S,G),G.onabort=R(Rr,N,"TestLoadImage: abort",!1,S,G),G.ontimeout=R(Rr,N,"TestLoadImage: timeout",!1,S,G),c.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=p}else S(!1)}function Gr(p,S){const N=new Fn,G=new AbortController,ie=setTimeout(()=>{G.abort(),Rr(N,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:G.signal}).then(de=>{clearTimeout(ie),de.ok?Rr(N,"TestPingServer: ok",!0,S):Rr(N,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ie),Rr(N,"TestPingServer: error",!1,S)})}function Rr(p,S,N,G,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),G(N)}catch{}}function Ba(){this.g=new zn}function gi(p,S,N){const G=N||"";try{Pu(p,function(ie,de){let we=ie;h(ie)&&(we=an(ie)),S.push(G+de+"="+encodeURIComponent(we))})}catch(ie){throw S.push(G+"type="+encodeURIComponent("_badmap")),ie}}function ks(p){this.l=p.Ub||null,this.j=p.eb||!1}O(ks,Bi),ks.prototype.g=function(){return new Xi(this.l,this.j)},ks.prototype.i=function(p){return function(){return p}}({});function Xi(p,S){ot.call(this),this.D=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Xi,ot),t=Xi.prototype,t.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=S,this.readyState=1,vi(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(S.body=p),(this.D||c).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,vi(this)),this.g&&(this.readyState=3,vi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zu(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function zu(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?yi(this):vi(this),this.readyState==3&&zu(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,yi(this))},t.Qa=function(p){this.g&&(this.response=p,yi(this))},t.ga=function(){this.g&&yi(this)};function yi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,vi(p)}t.setRequestHeader=function(p,S){this.u.append(p,S)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var N=S.next();!N.done;)N=N.value,p.push(N[0]+": "+N[1]),N=S.next();return p.join(`\r
`)};function vi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ju(p){let S="";return b(p,function(N,G){S+=G,S+=":",S+=N,S+=`\r
`}),S}function on(p,S,N){e:{for(G in N){var G=!1;break e}G=!0}G||(N=ju(N),typeof p=="string"?N!=null&&encodeURIComponent(String(N)):ft(p,S,N))}function lt(p){ot.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(lt,ot);var Yo=/^https?$/i,Ha=["POST","PUT"];t=lt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,S,N,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?Hi(this.o):Hi(Tr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(de){af(this,de);return}if(p=N||"",N=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ie in G)N.set(ie,G[ie]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const de of G.keys())N.set(de,G.get(de));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(N.keys()).find(de=>de.toLowerCase()=="content-type"),ie=c.FormData&&p instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ha,S,void 0))||G||ie||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,we]of N)this.g.setRequestHeader(de,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$a(this),this.u=!0,this.g.send(p),this.u=!1}catch(de){af(this,de)}};function af(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.m=5,Xo(p),_i(p)}function Xo(p){p.A||(p.A=!0,Ge(p,"complete"),Ge(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ge(this,"complete"),Ge(this,"abort"),_i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Wo(this):this.bb())},t.bb=function(){Wo(this)};function Wo(p){if(p.h&&typeof l<"u"&&(!p.v[1]||kr(p)!=4||p.Z()!=2)){if(p.u&&kr(p)==4)Tt(p.Ea,0,p);else if(Ge(p,"readystatechange"),kr(p)==4){p.h=!1;try{const we=p.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var N;if(!(N=S)){var G;if(G=we===0){var ie=String(p.D).match(Va)[1]||null;!ie&&c.self&&c.self.location&&(ie=c.self.location.protocol.slice(0,-1)),G=!Yo.test(ie?ie.toLowerCase():"")}N=G}if(N)Ge(p,"complete"),Ge(p,"success");else{p.m=6;try{var de=2<kr(p)?p.g.statusText:""}catch{de=""}p.l=de+" ["+p.Z()+"]",Xo(p)}}finally{_i(p)}}}}function _i(p,S){if(p.g){$a(p);const N=p.g,G=p.v[0]?()=>{}:null;p.g=null,p.v=null,S||Ge(p,"ready");try{N.onreadystatechange=G}catch{}}}function $a(p){p.I&&(c.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function kr(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<kr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),pn(S)}};function of(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Mm(p){const S={};p=(p.g&&2<=kr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<p.length;G++){if(F(p[G]))continue;var N=I(p[G]);const ie=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const de=S[ie]||[];S[ie]=de,de.push(N)}T(S,function(G){return G.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fa(p,S,N){return N&&N.internalChannelParams&&N.internalChannelParams[p]||S}function Qo(p){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fa("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fa("baseRetryDelayMs",5e3,p),this.cb=Fa("retryDelaySeedMs",1e4,p),this.Wa=Fa("forwardChannelMaxRetries",2,p),this.wa=Fa("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new qr(p&&p.concurrentRequestLimit),this.Da=new Ba,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qo.prototype,t.la=8,t.G=1,t.connect=function(p,S,N,G){yt(0),this.W=p,this.H=S||{},N&&G!==void 0&&(this.H.OSID=N,this.H.OAID=G),this.F=this.X,this.I=pf(this,null,this.W),Jo(this)};function Uu(p){if(lf(p),p.G==3){var S=p.U++,N=rr(p.I);if(ft(N,"SID",p.K),ft(N,"RID",S),ft(N,"TYPE","terminate"),qa(p,N),S=new mn(p,p.j,S),S.L=2,S.v=za(rr(N)),N=!1,c.navigator&&c.navigator.sendBeacon)try{N=c.navigator.sendBeacon(S.v.toString(),"")}catch{}!N&&c.Image&&(new Image().src=S.v,N=!0),N||(S.g=mf(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Fi(S)}hf(p)}function Zo(p){p.g&&(Ga(p),p.g.cancel(),p.g=null)}function lf(p){Zo(p),p.u&&(c.clearTimeout(p.u),p.u=null),el(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&c.clearTimeout(p.s),p.s=null)}function Jo(p){if(!Cs(p.h)&&!p.s){p.s=!0;var S=p.Ga;q||U(),Y||(q(),Y=!0),W.add(S,p),p.B=0}}function Pm(p,S){return pi(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=S.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=It(w(p.Ga,p,S),$u(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ie=new mn(this,this.j,p);let de=this.o;if(this.S&&(de?(de=A(de),k(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var S=0,N=0;N<this.i.length;N++){t:{var G=this.i[N];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(S+=G,4096<S){S=N;break e}if(S===4096||N===this.i.length-1){S=N+1;break e}}S=1e3}else S=1e3;S=uf(this,ie,S),N=rr(this.I),ft(N,"RID",p),ft(N,"CVER",22),this.D&&ft(N,"X-HTTP-Session-Id",this.D),qa(this,N),de&&(this.O?S="headers="+encodeURIComponent(String(ju(de)))+"&"+S:this.m&&on(N,this.m,de)),qo(this.h,ie),this.Ua&&ft(N,"TYPE","init"),this.P?(ft(N,"$req",S),ft(N,"SID","null"),ie.T=!0,nr(ie,N,null)):nr(ie,N,S),this.G=2}}else this.G==3&&(p?Bu(this,p):this.i.length==0||Cs(this.h)||Bu(this))};function Bu(p,S){var N;S?N=S.l:N=p.U++;const G=rr(p.I);ft(G,"SID",p.K),ft(G,"RID",N),ft(G,"AID",p.T),qa(p,G),p.m&&p.o&&on(G,p.m,p.o),N=new mn(p,p.j,N,p.B+1),p.m===null&&(N.H=p.o),S&&(p.i=S.D.concat(p.i)),S=uf(p,N,1e3),N.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),qo(p.h,N),nr(N,G,S)}function qa(p,S){p.H&&b(p.H,function(N,G){ft(S,G,N)}),p.l&&Pu({},function(N,G){ft(S,G,N)})}function uf(p,S,N){N=Math.min(p.i.length,N);var G=p.l?w(p.l.Na,p.l,p):null;e:{var ie=p.i;let de=-1;for(;;){const we=["count="+N];de==-1?0<N?(de=ie[0].g,we.push("ofs="+de)):de=0:we.push("ofs="+de);let Je=!0;for(let Jt=0;Jt<N;Jt++){let et=ie[Jt].g;const ln=ie[Jt].map;if(et-=de,0>et)de=Math.max(0,ie[Jt].g-100),Je=!1;else try{gi(ln,we,"req"+et+"_")}catch{G&&G(ln)}}if(Je){G=we.join("&");break e}}}return p=p.i.splice(0,N),S.D=p,G}function cf(p){if(!p.g&&!p.u){p.Y=1;var S=p.Fa;q||U(),Y||(q(),Y=!0),W.add(S,p),p.v=0}}function Hu(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=It(w(p.Fa,p),$u(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,df(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=It(w(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Zo(this),df(this))};function Ga(p){p.A!=null&&(c.clearTimeout(p.A),p.A=null)}function df(p){p.g=new mn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var S=rr(p.qa);ft(S,"RID","rpc"),ft(S,"SID",p.K),ft(S,"AID",p.T),ft(S,"CI",p.F?"0":"1"),!p.F&&p.ja&&ft(S,"TO",p.ja),ft(S,"TYPE","xmlhttp"),qa(p,S),p.m&&p.o&&on(S,p.m,p.o),p.L&&(p.g.I=p.L);var N=p.g;p=p.ia,N.L=1,N.v=za(rr(S)),N.m=null,N.P=!0,Fr(N,p)}t.Za=function(){this.C!=null&&(this.C=null,Zo(this),Hu(this),yt(19))};function el(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function ff(p,S){var N=null;if(p.g==S){el(p),Ga(p),p.g=null;var G=2}else if(Du(p.h,S))N=S.D,jn(p.h,S),G=1;else return;if(p.G!=0){if(S.o)if(G==1){N=S.m?S.m.length:0,S=Date.now()-S.F;var ie=p.B;G=li(),Ge(G,new Lt(G,N)),Jo(p)}else cf(p);else if(ie=S.s,ie==3||ie==0&&0<S.X||!(G==1&&Pm(p,S)||G==2&&Hu(p)))switch(N&&0<N.length&&(S=p.h,S.i=S.i.concat(N)),ie){case 1:Wi(p,5);break;case 4:Wi(p,10);break;case 3:Wi(p,6);break;default:Wi(p,2)}}}function $u(p,S){let N=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(N*=2),N*S}function Wi(p,S){if(p.j.info("Error code "+S),S==2){var N=w(p.fb,p),G=p.Xa;const ie=!G;G=new qt(G||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||La(G,"https"),za(G),ie?Ua(G.toString(),N):Gr(G.toString(),N)}else yt(2);p.G=0,p.l&&p.l.sa(S),hf(p),lf(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function hf(p){if(p.G=0,p.ka=[],p.l){const S=Mu(p.h);(S.length!=0||p.i.length!=0)&&(z(p.ka,S),z(p.ka,p.i),p.h.i.length=0,V(p.i),p.i.length=0),p.l.ra()}}function pf(p,S,N){var G=N instanceof qt?rr(N):new qt(N);if(G.g!="")S&&(G.g=S+"."+G.g),Rs(G,G.s);else{var ie=c.location;G=ie.protocol,S=S?S+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new qt(null);G&&La(de,G),S&&(de.g=S),ie&&Rs(de,ie),N&&(de.l=N),G=de}return N=p.D,S=p.ya,N&&S&&ft(G,N,S),ft(G,"VER",p.la),qa(p,G),G}function mf(p,S,N){if(S&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Ca&&!p.pa?new lt(new ks({eb:N})):new lt(p.pa),S.Ha(p.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gf(){}t=gf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tl(){}tl.prototype.g=function(p,S){return new Un(p,S)};function Un(p,S){ot.call(this),this.g=new Qo(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(p?p["X-WebChannel-Client-Profile"]=S.va:p={"X-WebChannel-Client-Profile":S.va}),this.g.S=p,(p=S&&S.Sb)&&!F(p)&&(this.g.m=p),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.D=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new wi(this)}O(Un,ot),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Uu(this.g)},Un.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var N={};N.__data__=p,p=N}else this.u&&(N={},N.__data__=an(p),p=N);S.i.push(new Fo(S.Ya++,p)),S.G==3&&Jo(S)},Un.prototype.N=function(){this.g.l=null,delete this.j,Uu(this.g),delete this.g,Un.aa.N.call(this)};function yf(p){wr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const N in S){p=N;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}O(yf,wr);function vf(){tr.call(this),this.status=1}O(vf,tr);function wi(p){this.g=p}O(wi,gf),wi.prototype.ua=function(){Ge(this.g,"a")},wi.prototype.ta=function(p){Ge(this.g,new yf(p))},wi.prototype.sa=function(p){Ge(this.g,new vf)},wi.prototype.ra=function(){Ge(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,DC=function(){return new tl},NC=function(){return li()},IC=br,Ky={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},di.NO_ERROR=0,di.TIMEOUT=8,di.HTTP_ERROR=6,Gh=di,Er.COMPLETE="complete",kC=Er,$r.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Yc=$r,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,RC=lt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const CS="@firebase/firestore",RS="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new o_("@firebase/firestore");function zl(){return Io.logLevel}function Se(t,...e){if(Io.logLevel<=Xe.DEBUG){const n=e.map(d_);Io.debug(`Firestore (${wu}): ${t}`,...n)}}function ws(t,...e){if(Io.logLevel<=Xe.ERROR){const n=e.map(d_);Io.error(`Firestore (${wu}): ${t}`,...n)}}function cu(t,...e){if(Io.logLevel<=Xe.WARN){const n=e.map(d_);Io.warn(`Firestore (${wu}): ${t}`,...n)}}function d_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,MC(t,r,n)}function MC(t,e,n){let r=`FIRESTORE (${wu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ws(r),new Error(r)}function ut(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||MC(e,s,r)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rn.UNAUTHENTICATED))}shutdown(){}}class QL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZL{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ut(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new ma;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ma,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},c=f=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>c(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ma)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string",31837,{l:r}),new PC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new Rn(e)}}class JL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class e9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ut(this.o===void 0,3512);const r=o=>{o.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=n9(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function Yy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return $e(r,s);{const o=OC(),l=r9(o.encode(IS(t,n)),o.encode(IS(e,n)));return l!==0?l:$e(r,s)}}n+=r>65535?2:1}return $e(t.length,e.length)}function IS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function r9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $e(t[n],e[n]);return $e(t.length,e.length)}function du(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=-62135596800,DS=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*DS);return new wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<NS)throw new Ae(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DS}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-NS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new wt(0,0))}static max(){return new Le(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="__name__";class Ri{constructor(e,n,r){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Ri.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return $e(e.length,n.length)}static compareSegments(e,n){const r=Ri.isNumericId(e),s=Ri.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ri.extractNumericId(e).compare(Ri.extractNumericId(n)):Yy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pa.fromString(e.substring(4,e.length-2))}}class _t extends Ri{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const i9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Ri{construct(e,n,r){return new En(e,n,r)}static isValidIdentifier(e){return i9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MS}static keyField(){return new En([MS])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ae(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ae(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ae(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new Ae(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(_t.fromString(e))}static fromName(e){return new ke(_t.fromString(e).popFirst(5))}static empty(){return new ke(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new _t(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=-1;function s9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new _a(s,ke.empty(),e)}function a9(t){return new _a(t.readTime,t.key,wd)}class _a{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _a(Le.min(),ke.empty(),wd)}static max(){return new _a(Le.max(),ke.empty(),wd)}}function o9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==l9)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,r)=>{n(e)})}static reject(e){return new _e((n,r)=>{r(e)})}static waitFor(e){return new _e((n,r)=>{let s=0,o=0,l=!1;e.forEach(c=>{++s,c.next(()=>{++o,l&&o===s&&n()},f=>r(f))}),l=!0,o===s&&n()})}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next(s=>s?_e.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new _e((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const h=f;n(e[h]).next(m=>{l[h]=m,++c,c===o&&r(l)},m=>s(m))}})}static doWhile(e,n){return new _e((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function c9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}nm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=-1;function rm(t){return t==null}function Ep(t){return t===0&&1/t==-1/0}function d9(t){return typeof t=="number"&&Number.isInteger(t)&&!Ep(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="";function f9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=PS(e)),e=h9(t.get(n),e);return PS(e)}function h9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case LC:n+="";break;default:n+=o}}return n}function PS(t){return t+LC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??bn.RED,this.left=s??bn.EMPTY,this.right=o??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new bn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VS(this.data.getIterator())}getIteratorFrom(e){return new VS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rn(this.comparator);return n.data=e,n}}class VS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new pr([])}unionWith(e){let n=new rn(En.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return du(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jC("Invalid base64 string: "+o):o}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const p9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wa(t){if(ut(!!t,39018),typeof t=="string"){let e=0;const n=p9.exec(t);if(ut(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ba(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="server_timestamp",BC="__type__",HC="__previous_value__",$C="__local_write_time__";function h_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[BC])===null||n===void 0?void 0:n.stringValue)===UC}function im(t){const e=t.mapValue.fields[HC];return h_(e)?im(e):e}function bd(t){const e=wa(t.mapValue.fields[$C].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n,r,s,o,l,c,f,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=m}}const Tp="(default)";class Ed{constructor(e,n){this.projectId=e,this.database=n||Tp}static empty(){return new Ed("","")}get isDefaultDatabase(){return this.database===Tp}isEqual(e){return e instanceof Ed&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="__type__",g9="__max__",Nh={mapValue:{}},qC="__vector__",Sp="value";function Ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?h_(t)?4:v9(t)?9007199254740991:y9(t)?10:11:Me(28295,{value:t})}function zi(t,e){if(t===e)return!0;const n=Ea(t);if(n!==Ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bd(t).isEqual(bd(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=wa(s.timestampValue),c=wa(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return ba(s.bytesValue).isEqual(ba(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Bt(s.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(s.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Bt(s.integerValue)===Bt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Bt(s.doubleValue),c=Bt(o.doubleValue);return l===c?Ep(l)===Ep(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return du(t.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(OS(l)!==OS(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!zi(l[f],c[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Td(t,e){return(t.values||[]).find(n=>zi(n,e))!==void 0}function fu(t,e){if(t===e)return 0;const n=Ea(t),r=Ea(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Bt(o.integerValue||o.doubleValue),f=Bt(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(t,e);case 3:return LS(t.timestampValue,e.timestampValue);case 4:return LS(bd(t),bd(e));case 5:return Yy(t.stringValue,e.stringValue);case 6:return function(o,l){const c=ba(o),f=ba(l);return c.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),f=l.split("/");for(let h=0;h<c.length&&h<f.length;h++){const m=$e(c[h],f[h]);if(m!==0)return m}return $e(c.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const c=$e(Bt(o.latitude),Bt(l.latitude));return c!==0?c:$e(Bt(o.longitude),Bt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zS(t.arrayValue,e.arrayValue);case 10:return function(o,l){var c,f,h,m;const _=o.fields||{},w=l.fields||{},R=(c=_[Sp])===null||c===void 0?void 0:c.arrayValue,O=(f=w[Sp])===null||f===void 0?void 0:f.arrayValue,V=$e(((h=R?.values)===null||h===void 0?void 0:h.length)||0,((m=O?.values)===null||m===void 0?void 0:m.length)||0);return V!==0?V:zS(R,O)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Nh.mapValue&&l===Nh.mapValue)return 0;if(o===Nh.mapValue)return 1;if(l===Nh.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),h=l.fields||{},m=Object.keys(h);f.sort(),m.sort();for(let _=0;_<f.length&&_<m.length;++_){const w=Yy(f[_],m[_]);if(w!==0)return w;const R=fu(c[f[_]],h[m[_]]);if(R!==0)return R}return $e(f.length,m.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function LS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=wa(t),r=wa(e),s=$e(n.seconds,r.seconds);return s!==0?s:$e(n.nanos,r.nanos)}function zS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=fu(n[s],r[s]);if(o)return o}return $e(n.length,r.length)}function hu(t){return Xy(t)}function Xy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=wa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ba(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Xy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Xy(n.fields[l])}`;return s+"}"}(t.mapValue):Me(61005,{value:t})}function Kh(t){switch(Ea(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=im(t);return e?16+Kh(e):16;case 5:return 2*t.stringValue.length;case 6:return ba(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Kh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ca(r.fields,(o,l)=>{s+=o.length+Kh(l)}),s}(t.mapValue);default:throw Me(13486,{value:t})}}function jS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wy(t){return!!t&&"integerValue"in t}function p_(t){return!!t&&"arrayValue"in t}function US(t){return!!t&&"nullValue"in t}function BS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yh(t){return!!t&&"mapValue"in t}function y9(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[FC])===null||n===void 0?void 0:n.stringValue)===qC}function Jc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ca(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function v9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===g9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=En.emptyPath(),r={},s=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,s),r={},s=[],n=c.popLast()}l?r[c.lastSegment()]=Jc(l):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Yh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ca(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Xn(Jc(this.value))}}function GC(t){const e=[];return Ca(t.fields,(n,r)=>{const s=new En([n]);if(Yh(r)){const o=GC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n,r,s,o,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new In(e,0,Le.min(),Le.min(),Le.min(),Xn.empty(),0)}static newFoundDocument(e,n,r,s){return new In(e,1,n,Le.min(),r,s,0)}static newNoDocument(e,n){return new In(e,2,n,Le.min(),Le.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new In(e,3,n,Le.min(),Le.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.position=e,this.inclusive=n}}function HS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=ke.comparator(ke.fromName(l.referenceValue),n.key):r=fu(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $S(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function _9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class Wt extends KC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new b9(e,n,r):n==="array-contains"?new S9(e,r):n==="in"?new A9(e,r):n==="not-in"?new x9(e,r):n==="array-contains-any"?new C9(e,r):new Wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new E9(e,r):new T9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fu(n,this.value)):n!==null&&Ea(this.value)===Ea(n)&&this.matchesComparison(fu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends KC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ni(e,n)}matches(e){return YC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function YC(t){return t.op==="and"}function XC(t){return w9(t)&&YC(t)}function w9(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function Qy(t){if(t instanceof Wt)return t.field.canonicalString()+t.op.toString()+hu(t.value);if(XC(t))return t.filters.map(e=>Qy(e)).join(",");{const e=t.filters.map(n=>Qy(n)).join(",");return`${t.op}(${e})`}}function WC(t,e){return t instanceof Wt?function(r,s){return s instanceof Wt&&r.op===s.op&&r.field.isEqual(s.field)&&zi(r.value,s.value)}(t,e):t instanceof ni?function(r,s){return s instanceof ni&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,c)=>o&&WC(l,s.filters[c]),!0):!1}(t,e):void Me(19439)}function QC(t){return t instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${hu(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(QC).join(" ,")+"}"}(t):"Filter"}class b9 extends Wt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class E9 extends Wt{constructor(e,n){super(e,"in",n),this.keys=ZC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T9 extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=ZC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ke.fromName(r.referenceValue))}class S9 extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return p_(n)&&Td(n.arrayValue,this.value)}}class A9 extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Td(this.value.arrayValue,n)}}class x9 extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Td(this.value.arrayValue,n)}}class C9 extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!p_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Td(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,n=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Ie=null}}function FS(t,e=null,n=[],r=[],s=null,o=null,l=null){return new R9(t,e,n,r,s,o,l)}function m_(t){const e=ze(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),rm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hu(r)).join(",")),e.Ie=n}return e.Ie}function g_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$S(t.startAt,e.startAt)&&$S(t.endAt,e.endAt)}function Zy(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n=null,r=[],s=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function k9(t,e,n,r,s,o,l,c){return new Tu(t,e,n,r,s,o,l,c)}function JC(t){return new Tu(t)}function qS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eR(t){return t.collectionGroup!==null}function ed(t){const e=ze(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new rn(En.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Sd(o,r))}),n.has(En.keyField().canonicalString())||e.Ee.push(new Sd(En.keyField(),r))}return e.Ee}function Ni(t){const e=ze(t);return e.de||(e.de=I9(e,ed(t))),e.de}function I9(t,e){if(t.limitType==="F")return FS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Sd(s.field,o)});const n=t.endAt?new Ap(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ap(t.startAt.position,t.startAt.inclusive):null;return FS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jy(t,e){const n=t.filters.concat([e]);return new Tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ev(t,e,n){return new Tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sm(t,e){return g_(Ni(t),Ni(e))&&t.limitType===e.limitType}function tR(t){return`${m_(Ni(t))}|lt:${t.limitType}`}function jl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>QC(s)).join(", ")}]`),rm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>hu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>hu(s)).join(",")),`Target(${r})`}(Ni(t))}; limitType=${t.limitType})`}function am(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of ed(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,c,f){const h=HS(l,c,f);return l.inclusive?h<=0:h<0}(r.startAt,ed(r),s)||r.endAt&&!function(l,c,f){const h=HS(l,c,f);return l.inclusive?h>=0:h>0}(r.endAt,ed(r),s))}(t,e)}function N9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nR(t){return(e,n)=>{let r=!1;for(const s of ed(t)){const o=D9(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function D9(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):function(o,l,c){const f=l.data.field(o),h=c.data.field(o);return f!==null&&h!==null?fu(f,h):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return zC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=new Rt(ke.comparator);function bs(){return M9}const rR=new Rt(ke.comparator);function Xc(...t){let e=rR;for(const n of t)e=e.insert(n.key,n);return e}function iR(t){let e=rR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vo(){return td()}function sR(){return td()}function td(){return new Vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const P9=new Rt(ke.comparator),O9=new rn(ke.comparator);function We(...t){let e=O9;for(const n of t)e=e.add(n);return e}const V9=new rn($e);function L9(){return V9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ep(e)?"-0":e}}function aR(t){return{integerValue:""+t}}function z9(t,e){return d9(e)?aR(e):y_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this._=void 0}}function j9(t,e,n){return t instanceof xp?function(s,o){const l={fields:{[BC]:{stringValue:UC},[$C]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&h_(o)&&(o=im(o)),o&&(l.fields[HC]=o),{mapValue:l}}(n,e):t instanceof Ad?lR(t,e):t instanceof xd?uR(t,e):function(s,o){const l=oR(s,o),c=GS(l)+GS(s.Re);return Wy(l)&&Wy(s.Re)?aR(c):y_(s.serializer,c)}(t,e)}function U9(t,e,n){return t instanceof Ad?lR(t,e):t instanceof xd?uR(t,e):n}function oR(t,e){return t instanceof Cp?function(r){return Wy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class xp extends om{}class Ad extends om{constructor(e){super(),this.elements=e}}function lR(t,e){const n=cR(e);for(const r of t.elements)n.some(s=>zi(s,r))||n.push(r);return{arrayValue:{values:n}}}class xd extends om{constructor(e){super(),this.elements=e}}function uR(t,e){let n=cR(e);for(const r of t.elements)n=n.filter(s=>!zi(s,r));return{arrayValue:{values:n}}}class Cp extends om{constructor(e,n){super(),this.serializer=e,this.Re=n}}function GS(t){return Bt(t.integerValue||t.doubleValue)}function cR(t){return p_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function B9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ad&&s instanceof Ad||r instanceof xd&&s instanceof xd?du(r.elements,s.elements,zi):r instanceof Cp&&s instanceof Cp?zi(r.Re,s.Re):r instanceof xp&&s instanceof xp}(t.transform,e.transform)}class H9{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lm{}function dR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new um(t.key,gr.none()):new $d(t.key,t.data,gr.none());{const n=t.data,r=Xn.empty();let s=new rn(En.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Ra(t.key,r,new pr(s.toArray()),gr.none())}}function $9(t,e,n){t instanceof $d?function(s,o,l){const c=s.value.clone(),f=YS(s.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ra?function(s,o,l){if(!Xh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=YS(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(fR(s)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function nd(t,e,n,r){return t instanceof $d?function(o,l,c,f){if(!Xh(o.precondition,l))return c;const h=o.value.clone(),m=XS(o.fieldTransforms,f,l);return h.setAll(m),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ra?function(o,l,c,f){if(!Xh(o.precondition,l))return c;const h=XS(o.fieldTransforms,f,l),m=l.data;return m.setAll(fR(o)),m.setAll(h),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,r):function(o,l,c){return Xh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,n)}function F9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=oR(r.transform,s||null);o!=null&&(n===null&&(n=Xn.empty()),n.set(r.field,o))}return n||null}function KS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&du(r,s,(o,l)=>B9(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $d extends lm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ra extends lm{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YS(t,e,n){const r=new Map;ut(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,U9(l,c,n[s]))}return r}function XS(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,j9(o,l,e))}return r}class um extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q9 extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&$9(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sR();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(s.key)?null:c;const f=dR(l,c);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&du(this.mutations,e.mutations,(n,r)=>KS(n,r))&&du(this.baseMutations,e.baseMutations,(n,r)=>KS(n,r))}}class v_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ut(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return P9}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new v_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,nt;function X9(t){switch(t){case ve.OK:return Me(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function hR(t){if(t===void 0)return ws("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Yt.OK:return ve.OK;case Yt.CANCELLED:return ve.CANCELLED;case Yt.UNKNOWN:return ve.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ve.INTERNAL;case Yt.UNAVAILABLE:return ve.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ve.NOT_FOUND;case Yt.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Yt.ABORTED:return ve.ABORTED;case Yt.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Yt.DATA_LOSS:return ve.DATA_LOSS;default:return Me(39323,{code:t})}}(nt=Yt||(Yt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=new pa([4294967295,4294967295],0);function WS(t){const e=OC().encode(t),n=new CC;return n.update(e),new Uint8Array(n.digest())}function QS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pa([n,r],0),new pa([s,o],0)]}class __{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wc(`Invalid padding: ${n}`);if(r<0)throw new Wc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=pa.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(pa.fromNumber(r)));return s.compare(W9)===1&&(s=new pa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=WS(e),[r,s]=QS(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);if(!this.be(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new __(o,s,n);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.pe===0)return;const n=WS(e),[r,s]=QS(n);for(let o=0;o<this.hashCount;o++){const l=this.we(r,s,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cm(Le.min(),s,new Rt($e),bs(),We())}}class Fd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fd(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class pR{constructor(e,n){this.targetId=e,this.Ce=n}}class mR{constructor(e,n,r=Tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ZS{constructor(){this.Fe=0,this.Me=JS(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=We(),n=We(),r=We();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Me(38017,{changeType:o})}}),new Fd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=JS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ut(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Q9{constructor(e){this.ze=e,this.je=new Map,this.He=bs(),this.Je=Dh(),this.Ye=Dh(),this.Ze=new Rt($e)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(Zy(o))if(r===0){const l=new ke(o.path);this.tt(n,l,In.newNoDocument(l,Le.min()))}else ut(r===1,20013,{expectedCount:r});else{const l=this.ut(n);if(l!==r){const c=this.ct(e),f=c?this.lt(c,e,l):1;if(f!==0){this.st(n);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,c;try{l=ba(r).toUint8Array()}catch(f){if(f instanceof jC)return cu("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new __(l,s,o)}catch(f){return cu(f instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ze.Pt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,l)=>{const c=this._t(l);if(c){if(o.current&&Zy(c.target)){const f=new ke(c.target.path);this.Et(f).has(l)||this.dt(l,f)||this.tt(l,f,In.newNoDocument(f,e))}o.Le&&(n.set(l,o.qe()),o.Qe())}});let r=We();this.Ye.forEach((o,l)=>{let c=!0;l.forEachWhile(f=>{const h=this._t(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,l)=>l.setReadTime(e));const s=new cm(e,n,this.Ze,this.He,r);return this.He=bs(),this.Je=Dh(),this.Ye=Dh(),this.Ze=new Rt($e),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new ZS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new rn($e),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new rn($e),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new ZS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Dh(){return new Rt(ke.comparator)}function JS(){return new Rt(ke.comparator)}const Z9={asc:"ASCENDING",desc:"DESCENDING"},J9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ez={and:"AND",or:"OR"};class tz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tv(t,e){return t.useProto3Json||rm(e)?e:{value:e}}function Rp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nz(t,e){return Rp(t,e.toTimestamp())}function Di(t){return ut(!!t,49232),Le.fromTimestamp(function(n){const r=wa(n);return new wt(r.seconds,r.nanos)}(t))}function w_(t,e){return nv(t,e).canonicalString()}function nv(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yR(t){const e=_t.fromString(t);return ut(ER(e),10190,{key:e.toString()}),e}function rv(t,e){return w_(t.databaseId,e.path)}function ey(t,e){const n=yR(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(_R(n))}function vR(t,e){return w_(t.databaseId,e)}function rz(t){const e=yR(t);return e.length===4?_t.emptyPath():_R(e)}function iv(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _R(t){return ut(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function eA(t,e,n){return{name:rv(t,e),fields:n.value.mapValue.fields}}function iz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Me(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,m){return h.useProto3Json?(ut(m===void 0||typeof m=="string",58123),Tn.fromBase64String(m||"")):(ut(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Tn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(h){const m=h.code===void 0?ve.UNKNOWN:hR(h.code);return new Ae(m,h.message||"")}(l);n=new mR(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ey(t,r.document.name),o=Di(r.document.updateTime),l=r.document.createTime?Di(r.document.createTime):Le.min(),c=new Xn({mapValue:{fields:r.document.fields}}),f=In.newFoundDocument(s,o,l,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Wh(h,m,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ey(t,r.document),o=r.readTime?Di(r.readTime):Le.min(),l=In.newNoDocument(s,o),c=r.removedTargetIds||[];n=new Wh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ey(t,r.document),o=r.removedTargetIds||[];n=new Wh([],o,s,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new Y9(s,o),c=r.targetId;n=new pR(c,l)}}return n}function sz(t,e){let n;if(e instanceof $d)n={update:eA(t,e.key,e.value)};else if(e instanceof um)n={delete:rv(t,e.key)};else if(e instanceof Ra)n={update:eA(t,e.key,e.data),updateMask:pz(e.fieldMask)};else{if(!(e instanceof q9))return Me(16599,{ft:e.type});n={verify:rv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof xp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ad)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof xd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Cp)return{fieldPath:l.field.canonicalString(),increment:c.Re};throw Me(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:nz(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Me(27497)}(t,e.precondition)),n}function az(t,e){return t&&t.length>0?(ut(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?Di(s.updateTime):Di(o);return l.isEqual(Le.min())&&(l=Di(o)),new H9(l,s.transformResults||[])}(n,e))):[]}function oz(t,e){return{documents:[vR(t,e.path)]}}function lz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vR(t,s);const o=function(h){if(h.length!==0)return bR(ni.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(m=>function(w){return{field:Ul(w.field),direction:dz(w.dir)}}(m))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=tv(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:s}}function uz(t){let e=rz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ut(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(_){const w=wR(_);return w instanceof ni&&XC(w)?w.getFilters():[w]}(n.where));let l=[];n.orderBy&&(l=function(_){return _.map(w=>function(O){return new Sd(Bl(O.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(w))}(n.orderBy));let c=null;n.limit&&(c=function(_){let w;return w=typeof _=="object"?_.value:_,rm(w)?null:w}(n.limit));let f=null;n.startAt&&(f=function(_){const w=!!_.before,R=_.values||[];return new Ap(R,w)}(n.startAt));let h=null;return n.endAt&&(h=function(_){const w=!_.before,R=_.values||[];return new Ap(R,w)}(n.endAt)),k9(e,s,l,o,c,"F",f,h)}function cz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Bl(n.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Bl(n.unaryFilter.field);return Wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Bl(n.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Bl(n.unaryFilter.field);return Wt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Wt.create(Bl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(r=>wR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function dz(t){return Z9[t]}function fz(t){return J9[t]}function hz(t){return ez[t]}function Ul(t){return{fieldPath:t.canonicalString()}}function Bl(t){return En.fromServerFormat(t.fieldPath)}function bR(t){return t instanceof Wt?function(n){if(n.op==="=="){if(BS(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NAN"}};if(US(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BS(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NAN"}};if(US(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(n.field),op:fz(n.op),value:n.value}}}(t):t instanceof ni?function(n){const r=n.getFilters().map(s=>bR(s));return r.length===1?r[0]:{compositeFilter:{op:hz(n.op),filters:r}}}(t):Me(54877,{filter:t})}function pz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ER(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r,s,o=Le.min(),l=Le.min(),c=Tn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e){this.wt=e}}function gz(t){const e=uz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ev(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.Cn=new vz}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(_a.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class vz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rn(_t.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rn(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TR=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(TR,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new pu(0)}static lr(){return new pu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="LruGarbageCollector",_z=1048576;function rA([t,e],[n,r]){const s=$e(t,n);return s===0?$e(e,r):s}class wz{constructor(e){this.Er=e,this.buffer=new rn(rA),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Se(nA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eu(n)?Se(nA,"Ignoring IndexedDB error during garbage collection: ",n):await bu(n)}await this.mr(3e5)})}}class Ez{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(nm.le);const r=new wz(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(tA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tA):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,l,c,f,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),s=this.params.maximumSequenceNumbersToCollect):s=_,l=Date.now(),this.nthSequenceNumber(e,s))).next(_=>(r=_,c=Date.now(),this.removeTargets(e,r,n))).next(_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(h=Date.now(),zl()<=Xe.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${_} documents in `+(h-f)+`ms
Total Duration: ${h-m}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:_})))}}function Tz(t,e){return new Ez(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(){this.changes=new Vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&nd(r.mutation,s,pr.empty(),wt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const s=vo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=Xc();return o.forEach((c,f)=>{l=l.insert(c,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=vo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,r,s){let o=bs();const l=td(),c=function(){return td()}();return n.forEach((f,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Ra)?o=o.insert(h.key,h):m!==void 0?(l.set(h.key,m.mutation.getFieldMask()),nd(m.mutation,h,m.mutation.getFieldMask(),wt.now())):l.set(h.key,pr.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((h,m)=>l.set(h,m)),n.forEach((h,m)=>{var _;return c.set(h,new Az(m,(_=l.get(h))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){const r=td();let s=new Rt((l,c)=>l-c),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(f=>{const h=n.get(f);if(h===null)return;let m=r.get(f)||pr.empty();m=c.applyToLocalView(h,m),r.set(f,m);const _=(s.get(c.batchId)||We()).add(f);s=s.insert(c.batchId,_)})}).next(()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),h=f.key,m=f.value,_=sR();m.forEach(w=>{if(!o.has(w)){const R=dR(n.get(w),r.get(w));R!==null&&_.set(w,R),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,_))}return _e.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):_e.resolve(vo());let c=wd,f=o;return l.next(h=>_e.forEach(h,(m,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(m)?_e.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{f=f.insert(m,w)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,f,h,We())).next(m=>({batchId:c,changes:iR(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(r=>{let s=Xc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=Xc();return this.indexManager.getCollectionParents(e,o).next(c=>_e.forEach(c,f=>{const h=function(_,w){return new Tu(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((_,w)=>{l=l.insert(_,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((f,h)=>{const m=h.getKey();l.get(m)===null&&(l=l.insert(m,In.newInvalidDocument(m)))});let c=Xc();return l.forEach((f,h)=>{const m=o.get(f);m!==void 0&&nd(m.mutation,h,pr.empty(),wt.now()),am(n,h)&&(c=c.insert(f,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return _e.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Di(s.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:gz(s.bundledQuery),readTime:Di(s.readTime)}}(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(){this.overlays=new Rt(ke.comparator),this.Qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vo();return _e.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),_e.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const s=vo(),o=n.length+1,l=new ke(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,h=f.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return _e.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Rt((h,m)=>h-m);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=o.get(h.largestBatchId);m===null&&(m=vo(),o=o.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=vo(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((h,m)=>c.set(h,m)),!(c.size()>=s)););return _e.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new K9(n,r));let o=this.Qr.get(n);o===void 0&&(o=We(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.$r=new rn(fn.Ur),this.Kr=new rn(fn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new fn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new fn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new ke(new _t([])),r=new fn(n,e),s=new fn(n,e+1),o=[];return this.Kr.forEachInRange([r,s],l=>{this.zr(l),o.push(l.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ke(new _t([])),r=new fn(n,e),s=new fn(n,e+1);let o=We();return this.Kr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new fn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ke.comparator(e.key,n.key)||$e(e.Zr,n.Zr)}static Wr(e,n){return $e(e.Zr,n.Zr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new rn(fn.Ur)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new G9(o,n,r,s);this.mutationQueue.push(l);for(const c of s)this.Xr=this.Xr.add(new fn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return _e.resolve(l)}lookupMutationBatch(e,n){return _e.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return _e.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?f_:this.nr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],l=>{const c=this.ei(l.Zr);o.push(c)}),_e.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rn($e);return n.forEach(s=>{const o=new fn(s,0),l=new fn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,l],c=>{r=r.add(c.Zr)})}),_e.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;ke.isDocumentKey(o)||(o=o.child(""));const l=new fn(new ke(o),0);let c=new rn($e);return this.Xr.forEachWhile(f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(f.Zr)),!0)},l),_e.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ut(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return _e.forEach(n.mutations,s=>{const o=new fn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new fn(n,0),s=this.Xr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.ii=e,this.docs=function(){return new Rt(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():In.newInvalidDocument(n))}getEntries(e,n){let r=bs();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():In.newInvalidDocument(s))}),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=bs();const l=n.path,c=new ke(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:h,value:{document:m}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||o9(a9(m),r)<=0||(s.has(m.key)||am(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return _e.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Me(9500)}si(e,n){return _e.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Dz(this)}getSize(e){return _e.resolve(this.size)}}class Dz extends Sz{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),_e.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e){this.persistence=e,this.oi=new Vo(n=>m_(n),g_),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this._i=0,this.ai=new b_,this.targetCount=0,this.ui=pu.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),_e.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new pu(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Tr(n),_e.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),_e.waitFor(o).next(()=>s)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),_e.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.ci={},this.overlays={},this.li=new nm(0),this.hi=!1,this.hi=!0,this.Pi=new kz,this.referenceDelegate=e(this),this.Ti=new Mz(this),this.indexManager=new yz,this.remoteDocumentCache=function(s){return new Nz(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new mz(n),this.Ei=new Cz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new Iz(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Se("MemoryPersistence","Starting transaction:",e);const s=new Pz(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return _e.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class Pz extends u9{constructor(e){super(),this.currentSequenceNumber=e}}class E_{constructor(e){this.persistence=e,this.Vi=new b_,this.mi=null}static fi(e){return new E_(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.gi,r=>{const s=ke.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,Le.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return _e.or([()=>_e.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class kp{constructor(e,n){this.persistence=e,this.yi=new Vo(r=>f9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Tz(this,n)}static fi(e,n){return new kp(e,n)}di(){}Ai(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return _e.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?_e.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,l=>this.Dr(e,l,n).next(c=>{c||(r++,o.removeEntry(l,Le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),_e.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kh(e.data.value)),n}Dr(e,n,r){return _e.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return _e.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=We(),s=We();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new T_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return lV()?8:c9(Mn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new Oz;return this.Ss(e,n,l).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,l,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(zl()<=Xe.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",jl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),_e.resolve()):(zl()<=Xe.DEBUG&&Se("QueryEngine","Query:",jl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(zl()<=Xe.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",jl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(n))):_e.resolve())}ws(e,n){if(qS(n))return _e.resolve(null);let r=Ni(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ev(n,null,"F"),r=Ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=We(...o);return this.ys.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const h=this.vs(n,c);return this.Cs(n,h,l,f.readTime)?this.ws(e,ev(n,null,"F")):this.Fs(e,h,n,f)}))})))}bs(e,n,r,s){return qS(n)||s.isEqual(Le.min())?_e.resolve(null):this.ys.getDocuments(e,r).next(o=>{const l=this.vs(n,o);return this.Cs(n,l,r,s)?_e.resolve(null):(zl()<=Xe.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jl(n)),this.Fs(e,l,n,s9(s,wd)).next(c=>c))})}vs(e,n){let r=new rn(nR(e));return n.forEach((s,o)=>{am(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return zl()<=Xe.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",jl(n)),this.ys.getDocumentsMatchingQuery(e,n,_a.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="LocalStore",Lz=3e8;class zz{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Rt($e),this.Os=new Vo(o=>m_(o),g_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xz(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function jz(t,e,n,r){return new zz(t,e,n,r)}async function AR(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let f=We();for(const h of s){l.push(h.batchId);for(const m of h.mutations)f=f.add(m.key)}for(const h of o){c.push(h.batchId);for(const m of h.mutations)f=f.add(m.key)}return n.localDocuments.getDocuments(r,f).next(h=>({ks:h,removedBatchIds:l,addedBatchIds:c}))})})}function Uz(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,f,h,m){const _=h.batch,w=_.keys();let R=_e.resolve();return w.forEach(O=>{R=R.next(()=>m.getEntry(f,O)).next(V=>{const z=h.docVersions.get(O);ut(z!==null,48541),V.version.compareTo(z)<0&&(_.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),m.addEntry(V)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(f,_))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=We();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(f=f.add(c.batch.mutations[h].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xR(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Bz(t,e){const n=ze(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((m,_)=>{const w=s.get(_);if(!w)return;c.push(n.Ti.removeMatchingKeys(o,m.removedDocuments,_).next(()=>n.Ti.addMatchingKeys(o,m.addedDocuments,_)));let R=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?R=R.withResumeToken(Tn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):m.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(m.resumeToken,r)),s=s.insert(_,R),function(V,z,j){return V.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Lz?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(w,R,m)&&c.push(n.Ti.updateTargetData(o,R))});let f=bs(),h=We();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(Hz(o,l,e.documentUpdates).next(m=>{f=m.qs,h=m.Qs})),!r.isEqual(Le.min())){const m=n.Ti.getLastRemoteSnapshotVersion(o).next(_=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return _e.waitFor(c).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,f,h)).next(()=>f)}).then(o=>(n.xs=s,o))}function Hz(t,e,n){let r=We(),s=We();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=bs();return n.forEach((c,f)=>{const h=o.get(c);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(Le.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):Se(S_,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",f.version)}),{qs:l,Qs:s}})}function $z(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=f_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fz(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,_e.resolve(s)):n.Ti.allocateTargetId(r).next(l=>(s=new ua(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function sv(t,e,n){const r=ze(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Eu(l))throw l;Se(S_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function iA(t,e,n){const r=ze(t);let s=Le.min(),o=We();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,h,m){const _=ze(f),w=_.Os.get(m);return w!==void 0?_e.resolve(_.xs.get(w)):_.Ti.getTargetData(h,m)}(r,l,Ni(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(l,c.targetId).next(f=>{o=f})}).next(()=>r.Ms.getDocumentsMatchingQuery(l,e,n?s:Le.min(),n?o:We())).next(c=>(qz(r,N9(e),c),{documents:c,$s:o})))}function qz(t,e,n){let r=t.Ns.get(e)||Le.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class sA{constructor(){this.activeTargetIds=L9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gz{constructor(){this.xo=new sA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new sA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="ConnectivityMonitor";class oA{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Se(aA,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Se(aA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function av(){return Mh===null?Mh=function(){return 268435456+Math.round(2147483648*Math.random())}():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="RestConnection",Yz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xz{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Tp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const l=av(),c=this.jo(e,n.toUriEncodedString());Se(ty,`Sending RPC '${e}' ${l}:`,c,r);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,o);const{host:h}=new URL(c),m=Oo(h);return this.Jo(e,c,f,r,m).then(_=>(Se(ty,`Received RPC '${e}' ${l}: `,_),_),_=>{throw cu(ty,`RPC '${e}' ${l} failed with error: `,_,"url: ",c,"request:",r),_})}Yo(e,n,r,s,o,l){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=Yz[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class Qz extends Xz{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const l=av();return new Promise((c,f)=>{const h=new RC;h.setWithCredentials(!0),h.listenOnce(kC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Gh.NO_ERROR:const _=h.getResponseJson();Se(Cn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case Gh.TIMEOUT:Se(Cn,`RPC '${e}' ${l} timed out`),f(new Ae(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Gh.HTTP_ERROR:const w=h.getStatus();if(Se(Cn,`RPC '${e}' ${l} failed with status:`,w,"response text:",h.getResponseText()),w>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const O=R?.error;if(O&&O.status&&O.message){const V=function(j){const F=j.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(F)>=0?F:ve.UNKNOWN}(O.status);f(new Ae(V,O.message))}else f(new Ae(ve.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Ae(ve.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:l,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{Se(Cn,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(s);Se(Cn,`RPC '${e}' ${l} sending request:`,s),h.send(n,"POST",m,r,15)})}I_(e,n,r){const s=av(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=DC(),c=NC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const m=o.join("");Se(Cn,`Creating RPC '${e}' stream ${s}: ${m}`,f);const _=l.createWebChannel(m,f);this.E_(_);let w=!1,R=!1;const O=new Wz({Zo:z=>{R?Se(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,z):(w||(Se(Cn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),w=!0),Se(Cn,`RPC '${e}' stream ${s} sending:`,z),_.send(z))},Xo:()=>_.close()}),V=(z,j,F)=>{z.listen(j,X=>{try{F(X)}catch(y){setTimeout(()=>{throw y},0)}})};return V(_,Yc.EventType.OPEN,()=>{R||(Se(Cn,`RPC '${e}' stream ${s} transport opened.`),O.__())}),V(_,Yc.EventType.CLOSE,()=>{R||(R=!0,Se(Cn,`RPC '${e}' stream ${s} transport closed`),O.u_(),this.d_(_))}),V(_,Yc.EventType.ERROR,z=>{R||(R=!0,cu(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,z.name,"Message:",z.message),O.u_(new Ae(ve.UNAVAILABLE,"The operation could not be completed")))}),V(_,Yc.EventType.MESSAGE,z=>{var j;if(!R){const F=z.data[0];ut(!!F,16349);const X=F,y=X?.error||((j=X[0])===null||j===void 0?void 0:j.error);if(y){Se(Cn,`RPC '${e}' stream ${s} received error:`,y);const E=y.status;let b=function(x){const k=Yt[x];if(k!==void 0)return hR(k)}(E),T=y.message;b===void 0&&(b=ve.INTERNAL,T="Unknown error status: "+E+" with message "+y.message),R=!0,O.u_(new Ae(b,T)),_.close()}else Se(Cn,`RPC '${e}' stream ${s} received:`,F),O.c_(F)}}),V(c,IC.STAT_EVENT,z=>{z.stat===Ky.PROXY?Se(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):z.stat===Ky.NOPROXY&&Se(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{O.a_()},0),O}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function ny(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t){return new tz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="PersistentStream";class RR{constructor(e,n,r,s,o,l,c,f){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new CR(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(ws(n.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Ae(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Se(lA,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Se(lA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zz extends RR{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=iz(this.serializer,e),r=function(o){if(!("targetChange"in o))return Le.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Le.min():l.readTime?Di(l.readTime):Le.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=iv(this.serializer),n.addTarget=function(o,l){let c;const f=l.target;if(c=Zy(f)?{documents:oz(o,f)}:{query:lz(o,f).gt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=gR(o,l.resumeToken);const h=tv(o,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Le.min())>0){c.readTime=Rp(o,l.snapshotVersion.toTimestamp());const h=tv(o,l.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=cz(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=iv(this.serializer),n.removeTarget=e,this.Q_(n)}}class Jz extends RR{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=az(e.writeResults,e.commitTime),r=Di(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=iv(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sz(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{}class t7 extends e7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Ae(ve.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.zo(e,nv(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ve.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Yo(e,nv(n,r),s,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(ve.UNKNOWN,l.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class n7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ws(n),this.ua=!1):Se("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RemoteStore";class r7{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(l=>{r.enqueueAndForget(async()=>{Lo(this)&&(Se(No,"Restarting streams for network reachability change."),await async function(f){const h=ze(f);h.da.add(4),await qd(h),h.Va.set("Unknown"),h.da.delete(4),await fm(h)}(this))})}),this.Va=new n7(r,s)}}async function fm(t){if(Lo(t))for(const e of t.Aa)await e(!0)}async function qd(t){for(const e of t.Aa)await e(!1)}function kR(t,e){const n=ze(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),R_(n)?C_(n):Su(n).N_()&&x_(n,e))}function A_(t,e){const n=ze(t),r=Su(n);n.Ea.delete(e),r.N_()&&IR(n,e),n.Ea.size===0&&(r.N_()?r.k_():Lo(n)&&n.Va.set("Unknown"))}function x_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Su(t).Z_(e)}function IR(t,e){t.ma.Ke(e),Su(t).X_(e)}function C_(t){t.ma=new Q9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Su(t).start(),t.Va.ca()}function R_(t){return Lo(t)&&!Su(t).O_()&&t.Ea.size>0}function Lo(t){return ze(t).da.size===0}function NR(t){t.ma=void 0}async function i7(t){t.Va.set("Online")}async function s7(t){t.Ea.forEach((e,n)=>{x_(t,e)})}async function a7(t,e){NR(t),R_(t)?(t.Va.Pa(e),C_(t)):t.Va.set("Unknown")}async function o7(t,e,n){if(t.Va.set("Online"),e instanceof mR&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Se(No,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ip(t,r)}else if(e instanceof Wh?t.ma.Xe(e):e instanceof pR?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Le.min()))try{const r=await xR(t.localStore);n.compareTo(r)>=0&&await function(o,l){const c=o.ma.It(l);return c.targetChanges.forEach((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const m=o.Ea.get(h);m&&o.Ea.set(h,m.withResumeToken(f.resumeToken,l))}}),c.targetMismatches.forEach((f,h)=>{const m=o.Ea.get(f);if(!m)return;o.Ea.set(f,m.withResumeToken(Tn.EMPTY_BYTE_STRING,m.snapshotVersion)),IR(o,f);const _=new ua(m.target,f,h,m.sequenceNumber);x_(o,_)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Se(No,"Failed to raise snapshot:",r),await Ip(t,r)}}async function Ip(t,e,n){if(!Eu(e))throw e;t.da.add(1),await qd(t),t.Va.set("Offline"),n||(n=()=>xR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Se(No,"Retrying IndexedDB access"),await n(),t.da.delete(1),await fm(t)})}function DR(t,e){return e().catch(n=>Ip(t,n,e))}async function hm(t){const e=ze(t),n=Ta(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:f_;for(;l7(e);)try{const s=await $z(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,u7(e,s)}catch(s){await Ip(e,s)}MR(e)&&PR(e)}function l7(t){return Lo(t)&&t.Ia.length<10}function u7(t,e){t.Ia.push(e);const n=Ta(t);n.N_()&&n.ea&&n.ta(e.mutations)}function MR(t){return Lo(t)&&!Ta(t).O_()&&t.Ia.length>0}function PR(t){Ta(t).start()}async function c7(t){Ta(t).ia()}async function d7(t){const e=Ta(t);for(const n of t.Ia)e.ta(n.mutations)}async function f7(t,e,n){const r=t.Ia.shift(),s=v_.from(r,e,n);await DR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hm(t)}async function h7(t,e){e&&Ta(t).ea&&await async function(r,s){if(function(l){return X9(l)&&l!==ve.ABORTED}(s.code)){const o=r.Ia.shift();Ta(r).L_(),await DR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await hm(r)}}(t,e),MR(t)&&PR(t)}async function uA(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),Se(No,"RemoteStore received new credentials");const r=Lo(n);n.da.add(3),await qd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await fm(n)}async function p7(t,e){const n=ze(t);e?(n.da.delete(2),await fm(n)):e||(n.da.add(2),await qd(n),n.Va.set("Unknown"))}function Su(t){return t.fa||(t.fa=function(n,r,s){const o=ze(n);return o.oa(),new Zz(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:i7.bind(null,t),n_:s7.bind(null,t),i_:a7.bind(null,t),Y_:o7.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),R_(t)?C_(t):t.Va.set("Unknown")):(await t.fa.stop(),NR(t))})),t.fa}function Ta(t){return t.ga||(t.ga=function(n,r,s){const o=ze(n);return o.oa(),new Jz(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:c7.bind(null,t),i_:h7.bind(null,t),na:d7.bind(null,t),ra:f7.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await hm(t)):(await t.ga.stop(),t.Ia.length>0&&(Se(No,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,c=new k_(e,n,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function I_(t,e){if(ws("AsyncQueue",`${e}: ${t}`),Eu(t))return new Ae(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{static emptySet(e){return new tu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=Xc(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof tu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new tu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.pa=new Rt(ke.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class mu{constructor(e,n,r,s,o,l,c,f,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new mu(e,n,tu.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class g7{constructor(){this.queries=dA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ze(n),o=s.queries;s.queries=dA(),o.forEach((l,c)=>{for(const f of c.Sa)f.onError(r)})})(this,new Ae(ve.ABORTED,"Firestore shutting down"))}}function dA(){return new Vo(t=>tR(t),sm)}async function y7(t,e){const n=ze(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new m7,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const c=I_(l,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&N_(n)}async function v7(t,e){const n=ze(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _7(t,e){const n=ze(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const c of l.Sa)c.Ma(s)&&(r=!0);l.ba=s}}r&&N_(n)}function w7(t,e,n){const r=ze(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function N_(t){t.Ca.forEach(e=>{e.next()})}var ov,fA;(fA=ov||(ov={})).xa="default",fA.Cache="cache";class b7{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ov.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.key=e}}class VR{constructor(e){this.key=e}}class E7{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.Za=nR(e),this.Xa=new tu(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new cA,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,_)=>{const w=s.get(m),R=am(this.query,_)?_:null,O=!!w&&this.mutatedKeys.has(w.key),V=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let z=!1;w&&R?w.data.isEqual(R.data)?O!==V&&(r.track({type:3,doc:R}),z=!0):this.ru(w,R)||(r.track({type:2,doc:R}),z=!0,(f&&this.Za(R,f)>0||h&&this.Za(R,h)<0)&&(c=!0)):!w&&R?(r.track({type:0,doc:R}),z=!0):w&&!R&&(r.track({type:1,doc:w}),z=!0,(f||h)&&(c=!0)),z&&(R?(l=l.add(R),o=V?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Xa:l,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const l=e.nu.wa();l.sort((m,_)=>function(R,O){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:z})}};return V(R)-V(O)}(m.type,_.type)||this.Za(m.doc,_.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],f=this.Ya.size===0&&this.current&&!s?1:0,h=f!==this.Ja;return this.Ja=f,l.length!==0||h?{snapshot:new mu(this.query,e.Xa,o,l,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new cA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new VR(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new OR(r))}),n}au(e){this.Ha=e.$s,this.Ya=We();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return mu.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const D_="SyncEngine";class T7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class S7{constructor(e){this.key=e,this.cu=!1}}class A7{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.lu={},this.hu=new Vo(c=>tR(c),sm),this.Pu=new Map,this.Tu=new Set,this.Iu=new Rt(ke.comparator),this.Eu=new Map,this.du=new b_,this.Au={},this.Ru=new Map,this.Vu=pu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function x7(t,e,n=!0){const r=HR(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await LR(r,e,n,!0),s}async function C7(t,e){const n=HR(t);await LR(n,e,!0,!1)}async function LR(t,e,n,r){const s=await Fz(t.localStore,Ni(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await R7(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&kR(t.remoteStore,s),c}async function R7(t,e,n,r,s){t.fu=(_,w,R)=>async function(V,z,j,F){let X=z.view.tu(j);X.Cs&&(X=await iA(V.localStore,z.query,!1).then(({documents:T})=>z.view.tu(T,X)));const y=F&&F.targetChanges.get(z.targetId),E=F&&F.targetMismatches.get(z.targetId)!=null,b=z.view.applyChanges(X,V.isPrimaryClient,y,E);return pA(V,z.targetId,b.ou),b.snapshot}(t,_,w,R);const o=await iA(t.localStore,e,!0),l=new E7(e,o.$s),c=l.tu(o.documents),f=Fd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=l.applyChanges(c,t.isPrimaryClient,f);pA(t,n,h.ou);const m=new T7(e,n,l);return t.hu.set(e,m),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),h.snapshot}async function k7(t,e,n){const r=ze(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(l=>!sm(l,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&A_(r.remoteStore,s.targetId),lv(r,s.targetId)}).catch(bu)):(lv(r,s.targetId),await sv(r.localStore,s.targetId,!0))}async function I7(t,e){const n=ze(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),A_(n.remoteStore,r.targetId))}async function N7(t,e,n){const r=z7(t);try{const s=await function(l,c){const f=ze(l),h=wt.now(),m=c.reduce((R,O)=>R.add(O.key),We());let _,w;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let O=bs(),V=We();return f.Bs.getEntries(R,m).next(z=>{O=z,O.forEach((j,F)=>{F.isValidDocument()||(V=V.add(j))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,O)).next(z=>{_=z;const j=[];for(const F of c){const X=F9(F,_.get(F.key).overlayedDocument);X!=null&&j.push(new Ra(F.key,X,GC(X.value.mapValue),gr.exists(!0)))}return f.mutationQueue.addMutationBatch(R,h,j,c)}).next(z=>{w=z;const j=z.applyToLocalDocumentSet(_,V);return f.documentOverlayCache.saveOverlays(R,z.batchId,j)})}).then(()=>({batchId:w.batchId,changes:iR(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,c,f){let h=l.Au[l.currentUser.toKey()];h||(h=new Rt($e)),h=h.insert(c,f),l.Au[l.currentUser.toKey()]=h}(r,s.batchId,n),await Gd(r,s.changes),await hm(r.remoteStore)}catch(s){const o=I_(s,"Failed to persist write");n.reject(o)}}async function zR(t,e){const n=ze(t);try{const r=await Bz(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Eu.get(o);l&&(ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.cu=!0:s.modifiedDocuments.size>0?ut(l.cu,14607):s.removedDocuments.size>0&&(ut(l.cu,42227),l.cu=!1))}),await Gd(n,r,e)}catch(r){await bu(r)}}function hA(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,l)=>{const c=l.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(l,c){const f=ze(l);f.onlineState=c;let h=!1;f.queries.forEach((m,_)=>{for(const w of _.Sa)w.Fa(c)&&(h=!0)}),h&&N_(f)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D7(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let l=new Rt(ke.comparator);l=l.insert(o,In.newNoDocument(o,Le.min()));const c=We().add(o),f=new cm(Le.min(),new Map,new Rt($e),l,c);await zR(r,f),r.Iu=r.Iu.remove(o),r.Eu.delete(e),M_(r)}else await sv(r.localStore,e,!1).then(()=>lv(r,e,n)).catch(bu)}async function M7(t,e){const n=ze(t),r=e.batch.batchId;try{const s=await Uz(n.localStore,e);UR(n,r,null),jR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gd(n,s)}catch(s){await bu(s)}}async function P7(t,e,n){const r=ze(t);try{const s=await function(l,c){const f=ze(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return f.mutationQueue.lookupMutationBatch(h,c).next(_=>(ut(_!==null,37113),m=_.keys(),f.mutationQueue.removeMutationBatch(h,_))).next(()=>f.mutationQueue.performConsistencyCheck(h)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>f.localDocuments.getDocuments(h,m))})}(r.localStore,e);UR(r,e,n),jR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gd(r,s)}catch(s){await bu(s)}}function jR(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function UR(t,e,n){const r=ze(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function lv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||BR(t,r)})}function BR(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(A_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),M_(t))}function pA(t,e,n){for(const r of n)r instanceof OR?(t.du.addReference(r.key,e),O7(t,r)):r instanceof VR?(Se(D_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||BR(t,r.key)):Me(19791,{pu:r})}function O7(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Se(D_,"New document in limbo: "+n),t.Tu.add(r),M_(t))}function M_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new ke(_t.fromString(e)),r=t.Vu.next();t.Eu.set(r,new S7(n)),t.Iu=t.Iu.insert(n,r),kR(t.remoteStore,new ua(Ni(JC(n.path)),r,"TargetPurposeLimboResolution",nm.le))}}async function Gd(t,e,n){const r=ze(t),s=[],o=[],l=[];r.hu.isEmpty()||(r.hu.forEach((c,f)=>{l.push(r.fu(f,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const _=h?!h.fromCache:(m=n?.targetChanges.get(f.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(h){s.push(h);const _=T_.Rs(f.targetId,h);o.push(_)}}))}),await Promise.all(l),r.lu.Y_(s),await async function(f,h){const m=ze(f);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>_e.forEach(h,w=>_e.forEach(w.ds,R=>m.persistence.referenceDelegate.addReference(_,w.targetId,R)).next(()=>_e.forEach(w.As,R=>m.persistence.referenceDelegate.removeReference(_,w.targetId,R)))))}catch(_){if(!Eu(_))throw _;Se(S_,"Failed to update sequence numbers: "+_)}for(const _ of h){const w=_.targetId;if(!_.fromCache){const R=m.xs.get(w),O=R.snapshotVersion,V=R.withLastLimboFreeSnapshotVersion(O);m.xs=m.xs.insert(w,V)}}}(r.localStore,o))}async function V7(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){Se(D_,"User change. New user:",e.toKey());const r=await AR(n.localStore,e);n.currentUser=e,function(o,l){o.Ru.forEach(c=>{c.forEach(f=>{f.reject(new Ae(ve.CANCELLED,l))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gd(n,r.ks)}}function L7(t,e){const n=ze(t),r=n.Eu.get(e);if(r&&r.cu)return We().add(r.key);{let s=We();const o=n.Pu.get(e);if(!o)return s;for(const l of o){const c=n.hu.get(l);s=s.unionWith(c.view.eu)}return s}}function HR(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D7.bind(null,e),e.lu.Y_=_7.bind(null,e.eventManager),e.lu.gu=w7.bind(null,e.eventManager),e}function z7(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P7.bind(null,e),e}class Np{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return jz(this.persistence,new Vz,e.initialUser,this.serializer)}Su(e){return new SR(E_.fi,this.serializer)}bu(e){return new Gz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Np.provider={build:()=>new Np};class j7 extends Np{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ut(this.persistence.referenceDelegate instanceof kp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bz(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new SR(r=>kp.fi(r,n),this.serializer)}}class uv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V7.bind(null,this.syncEngine),await p7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g7}()}createDatastore(e){const n=dm(e.databaseInfo.databaseId),r=function(o){return new Qz(o)}(e.databaseInfo);return function(o,l,c,f){return new t7(o,l,c,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,c){return new r7(r,s,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,n=>hA(this.syncEngine,n,0),function(){return oA.C()?new oA:new Kz}())}createSyncEngine(e,n){return function(s,o,l,c,f,h,m){const _=new A7(s,o,l,c,f,h);return m&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ze(s);Se(No,"RemoteStore shutting down."),o.da.add(5),await qd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}uv.provider={build:()=>new uv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="FirestoreClient";class B7{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Rn.UNAUTHENTICATED,this.clientId=VC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{Se(Sa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(Se(Sa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=I_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ry(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Sa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await AR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await H7(t);Se(Sa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>uA(e.remoteStore,s)),t._onlineComponents=e}async function H7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Sa,"Using user provided OfflineComponentProvider");try{await ry(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ve.FAILED_PRECONDITION||s.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;cu("Error using user provided cache. Falling back to memory cache: "+n),await ry(t,new Np)}}else Se(Sa,"Using default OfflineComponentProvider"),await ry(t,new j7(void 0));return t._offlineComponents}async function $R(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Sa,"Using user provided OnlineComponentProvider"),await mA(t,t._uninitializedComponentsProvider._online)):(Se(Sa,"Using default OnlineComponentProvider"),await mA(t,new uv))),t._onlineComponents}function $7(t){return $R(t).then(e=>e.syncEngine)}async function F7(t){const e=await $R(t),n=e.eventManager;return n.onListen=x7.bind(null,e.syncEngine),n.onUnlisten=k7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=C7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I7.bind(null,e.syncEngine),n}function q7(t,e,n={}){const r=new ma;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,c,f,h){const m=new U7({next:w=>{m.xu(),l.enqueueAndForget(()=>v7(o,_)),w.fromCache&&f.source==="server"?h.reject(new Ae(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),_=new b7(c,m,{includeMetadataChanges:!0,Qa:!0});return y7(o,_)}(await F7(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e,n){if(!n)throw new Ae(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G7(t,e,n,r){if(e===!0&&r===!0)throw new Ae(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yA(t){if(!ke.isDocumentKey(t))throw new Ae(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vA(t){if(ke.isDocumentKey(t))throw new Ae(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Do(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pm(t);throw new Ae(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="firestore.googleapis.com",_A=!0;class wA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GR,this.ssl=_A}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:_A;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_z)throw new Ae(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ae(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ae(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ae(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WL;switch(r.type){case"firstParty":return new e9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gA.get(n);r&&(Se("ComponentProvider","Removing Datastore"),gA.delete(n),r.terminate())}(this),Promise.resolve()}}function K7(t,e,n,r={}){var s;t=Do(t,mm);const o=Oo(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(s_(`https://${f}`),a_("Firestore",!0)),l.host!==GR&&l.host!==f&&cu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},l),{host:f,ssl:o,emulatorOptions:r});if(!Ro(h,c)&&(t._setSettings(h),r.mockUserToken)){let m,_;if(typeof r.mockUserToken=="string")m=r.mockUserToken,_=Rn.MOCK_USER;else{m=JO(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Rn(w)}t._authCredentials=new QL(new PC(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zo(this.firestore,e,this._query)}}class yr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yr(this.firestore,e,this._key)}}class ga extends zo{constructor(e,n,r){super(e,n,JC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yr(this.firestore,null,new ke(e))}withConverter(e){return new ga(this.firestore,e,this._path)}}function P_(t,e,...n){if(t=Vt(t),qR("collection","path",e),t instanceof mm){const r=_t.fromString(e,...n);return vA(r),new ga(t,null,r)}{if(!(t instanceof yr||t instanceof ga))throw new Ae(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return vA(r),new ga(t.firestore,null,r)}}function Au(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=VC.newId()),qR("doc","path",e),t instanceof mm){const r=_t.fromString(e,...n);return yA(r),new yr(t,null,new ke(r))}{if(!(t instanceof yr||t instanceof ga))throw new Ae(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return yA(r),new yr(t.firestore,t instanceof ga?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="AsyncQueue";class EA{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new CR(this,"async_queue_retry"),this.rc=()=>{const r=ny();r&&Se(bA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=ny();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=ny();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ma;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Eu(e))throw e;Se(bA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ws("INTERNAL UNHANDLED ERROR: ",TA(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=k_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Me(47125,{cc:TA(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function TA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Kd extends mm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new EA,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EA(e),this._firestoreClient=void 0,await e}}}function Y7(t,e){const n=typeof t=="object"?t:u_(),r=typeof t=="string"?t:Tp,s=tm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=yC("firestore");o&&K7(s,...o)}return s}function O_(t){if(t._terminated)throw new Ae(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||X7(t),t._firestoreClient}function X7(t){var e,n,r;const s=t._freezeSettings(),o=function(c,f,h,m){return new m9(c,f,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,FR(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new B7(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const f=c?._online.build();return{_offline:c?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gu(Tn.fromBase64String(e))}catch(n){throw new Ae(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gu(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7=/^__.*__$/;class Q7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new $d(e,this.data,n,this.fieldTransforms)}}class KR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class j_{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new j_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Dp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(YR(this.Ic)&&W7.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Z7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dm(e)}bc(e,n,r,s=!1){return new j_({Ic:e,methodName:n,wc:r,path:En.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U_(t){const e=t._freezeSettings(),n=dm(t._databaseId);return new Z7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XR(t,e,n,r,s,o={}){const l=t.bc(o.merge||o.mergeFields?2:0,e,n,s);B_("Data must be an object, but it was:",l,r);const c=WR(r,l);let f,h;if(o.merge)f=new pr(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const _ of o.mergeFields){const w=cv(e,_,n);if(!l.contains(w))throw new Ae(ve.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);ZR(m,w)||m.push(w)}f=new pr(m),h=l.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,h=l.fieldTransforms;return new Q7(new Xn(c),f,h)}class ym extends V_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ym}}function J7(t,e,n,r){const s=t.bc(1,e,n);B_("Data must be an object, but it was:",s,r);const o=[],l=Xn.empty();Ca(r,(f,h)=>{const m=H_(e,f,n);h=Vt(h);const _=s.mc(m);if(h instanceof ym)o.push(m);else{const w=Yd(h,_);w!=null&&(o.push(m),l.set(m,w))}});const c=new pr(o);return new KR(l,c,s.fieldTransforms)}function ej(t,e,n,r,s,o){const l=t.bc(1,e,n),c=[cv(e,r,n)],f=[s];if(o.length%2!=0)throw new Ae(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(cv(e,o[w])),f.push(o[w+1]);const h=[],m=Xn.empty();for(let w=c.length-1;w>=0;--w)if(!ZR(h,c[w])){const R=c[w];let O=f[w];O=Vt(O);const V=l.mc(R);if(O instanceof ym)h.push(R);else{const z=Yd(O,V);z!=null&&(h.push(R),m.set(R,z))}}const _=new pr(h);return new KR(m,_,l.fieldTransforms)}function tj(t,e,n,r=!1){return Yd(n,t.bc(r?4:3,e))}function Yd(t,e){if(QR(t=Vt(t)))return B_("Unsupported field value:",e,t),WR(t,e);if(t instanceof V_)return function(r,s){if(!YR(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const c of r){let f=Yd(c,s.fc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:Rp(s.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rp(s.serializer,o)}}if(r instanceof L_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gu)return{bytesValue:gR(s.serializer,r._byteString)};if(r instanceof yr){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.gc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:w_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof z_)return function(l,c){return{mapValue:{fields:{[FC]:{stringValue:qC},[Sp]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw c.gc("VectorValues must only contain numeric values.");return y_(c.serializer,h)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${pm(r)}`)}(t,e)}function WR(t,e){const n={};return zC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(t,(r,s)=>{const o=Yd(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function QR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof L_||t instanceof gu||t instanceof yr||t instanceof V_||t instanceof z_)}function B_(t,e,n){if(!QR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=pm(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function cv(t,e,n){if((e=Vt(e))instanceof gm)return e._internalPath;if(typeof e=="string")return H_(t,e);throw Dp("Field path arguments must be of type string or ",t,!1,void 0,n)}const nj=new RegExp("[~\\*/\\[\\]]");function H_(t,e,n){if(e.search(nj)>=0)throw Dp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gm(...e.split("."))._internalPath}catch{throw Dp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dp(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new Ae(ve.INVALID_ARGUMENT,c+t+f)}function ZR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rj extends JR{data(){return super.data()}}function vm(t,e){return typeof e=="string"?H_(t,e):e instanceof gm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $_{}class ek extends $_{}function sj(t,e,...n){let r=[];e instanceof $_&&r.push(e),r=r.concat(n),function(o){const l=o.filter(f=>f instanceof F_).length,c=o.filter(f=>f instanceof _m).length;if(l>1||l>0&&c>0)throw new Ae(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _m extends ek{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _m(e,n,r)}_apply(e){const n=this._parse(e);return tk(e._query,n),new zo(e.firestore,e.converter,Jy(e._query,n))}_parse(e){const n=U_(e.firestore);return function(o,l,c,f,h,m,_){let w;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ae(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){AA(_,m);const O=[];for(const V of _)O.push(SA(f,o,V));w={arrayValue:{values:O}}}else w=SA(f,o,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||AA(_,m),w=tj(c,l,_,m==="in"||m==="not-in");return Wt.create(h,m,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function aj(t,e,n){const r=e,s=vm("where",t);return _m._create(s,r,n)}class F_ extends $_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new F_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const c=o.getFlattenedFilters();for(const f of c)tk(l,f),l=Jy(l,f)}(e._query,n),new zo(e.firestore,e.converter,Jy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class q_ extends ek{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new q_(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new Ae(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ae(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sd(o,l)}(e._query,this._field,this._direction);return new zo(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new Tu(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function oj(t,e="asc"){const n=e,r=vm("orderBy",t);return q_._create(r,n)}function SA(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new Ae(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eR(e)&&n.indexOf("/")!==-1)throw new Ae(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_t.fromString(n));if(!ke.isDocumentKey(r))throw new Ae(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jS(t,new ke(r))}if(n instanceof yr)return jS(t,n._key);throw new Ae(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pm(n)}.`)}function AA(t,e){if(!Array.isArray(t)||t.length===0)throw new Ae(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tk(t,e){const n=function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ae(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lj{convertValue(e,n="none"){switch(Ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ca(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Sp].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Bt(l.doubleValue));return new z_(o)}convertGeoPoint(e){return new L_(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=im(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bd(e));default:return null}}convertTimestamp(e){const n=wa(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);ut(ER(r),9688,{name:e});const s=new Ed(r.get(1),r.get(3)),o=new ke(r.popFirst(5));return s.isEqual(n)||ws(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uj extends JR{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qh extends uj{data(e={}){return super.data(e)}}class cj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ph(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qh(this._firestore,this._userDataWriter,r.key,r,new Ph(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(c=>{const f=new Qh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ph(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const f=new Qh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ph(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:dj(c.type),doc:f,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class fj extends lj{constructor(e){super(),this.firestore=e}convertBytes(e){return new gu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,n)}}function G_(t){t=Do(t,zo);const e=Do(t.firestore,Kd),n=O_(e),r=new fj(e);return ij(t._query),q7(n,t._query).then(s=>new cj(e,r,t,s))}function K_(t,e,n){t=Do(t,yr);const r=Do(t.firestore,Kd),s=nk(t.converter,e,n);return Y_(r,[XR(U_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gr.none())])}function hj(t){return Y_(Do(t.firestore,Kd),[new um(t._key,gr.none())])}function Y_(t,e){return function(r,s){const o=new ma;return r.asyncQueue.enqueueAndForget(async()=>N7(await $7(r),s,o)),o.promise}(O_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=U_(e)}set(e,n,r){this._verifyNotCommitted();const s=iy(e,this._firestore),o=nk(s.converter,n,r),l=XR(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,gr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=iy(e,this._firestore);let l;return l=typeof(n=Vt(n))=="string"||n instanceof gm?ej(this._dataReader,"WriteBatch.update",o._key,n,r,s):J7(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(l.toMutation(o._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=iy(e,this._firestore);return this._mutations=this._mutations.concat(new um(n._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function iy(t,e){if((t=Vt(t)).firestore!==e)throw new Ae(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){return O_(t=Do(t,Kd)),new pj(t,e=>Y_(t,e))}(function(e,n=!0){(function(s){wu=s})(_u),ko(new va("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Kd(new ZL(r.getProvider("auth-internal")),new t9(l,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ae(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ed(h.options.projectId,m)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ii(CS,RS,e),Ii(CS,RS,"esm2017")})();function X_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ik(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mj=ik,sk=new Bd("auth","Firebase",ik());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new o_("@firebase/auth");function gj(t,...e){Mp.logLevel<=Xe.WARN&&Mp.warn(`Auth (${_u}): ${t}`,...e)}function Zh(t,...e){Mp.logLevel<=Xe.ERROR&&Mp.error(`Auth (${_u}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,...e){throw W_(t,...e)}function Mi(t,...e){return W_(t,...e)}function ak(t,e,n){const r=Object.assign(Object.assign({},mj()),{[e]:n});return new Bd("auth","Firebase",r).create(e,{appName:t.name})}function gs(t){return ak(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sk.create(t,...e)}function De(t,e,...n){if(!t)throw W_(e,...n)}function ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zh(e),new Error(e)}function Es(t,e){t||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yj(){return xA()==="http:"||xA()==="https:"}function xA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yj()||sV()||"connection"in navigator)?navigator.onLine:!0}function _j(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Es(n>e,"Short delay should be less than long delay!"),this.isMobile=nV()||aV()}get(){return vj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){Es(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ej=new Xd(3e4,6e4);function ka(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ia(t,e,n,r,s={}){return lk(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Hd(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:f},o);return iV()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Oo(t.emulatorConfig.host)&&(h.credentials="include"),ok.fetch()(await uk(t,t.config.apiHost,n,c),h)})}async function lk(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wj),e);try{const s=new Sj(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Oh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,h]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Oh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw Oh(t,"user-disabled",l);const m=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ak(t,m,h);ri(t,m)}}catch(s){if(s instanceof Ui)throw s;ri(t,"network-request-failed",{message:String(s)})}}async function Wd(t,e,n,r,s={}){const o=await Ia(t,e,n,r,s);return"mfaPendingCredential"in o&&ri(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function uk(t,e,n,r){const s=`${e}${n}?${r}`,o=t,l=o.config.emulator?Q_(t.config,s):`${t.config.apiScheme}://${s}`;return bj.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function Tj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mi(this.auth,"network-request-failed")),Ej.get())})}}function Oh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Mi(t,e,r);return s.customData._tokenResponse=n,s}function CA(t){return t!==void 0&&t.enterprise!==void 0}class Aj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Tj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xj(t,e){return Ia(t,"GET","/v2/recaptchaConfig",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(t,e){return Ia(t,"POST","/v1/accounts:delete",e)}async function Pp(t,e){return Ia(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rj(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=Z_(r);De(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:rd(sy(s.auth_time)),issuedAtTime:rd(sy(s.iat)),expirationTime:rd(sy(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function sy(t){return Number(t)*1e3}function Z_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{const s=mC(n);return s?JSON.parse(s):(Zh("Failed to decode base64 JWT payload"),null)}catch(s){return Zh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function RA(t){const e=Z_(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ui&&kj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rd(this.lastLoginAt),this.creationTime=rd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Op(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Cd(t,Pp(n,{idToken:r}));De(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ck(o.providerUserInfo):[],c=Dj(t.providerData,l),f=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!c?.length,m=f?h:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new fv(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,_)}async function Nj(t){const e=Vt(t);await Op(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ck(t){return t.map(e=>{var{providerId:n}=e,r=X_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e){const n=await lk(t,{},async()=>{const r=Hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await uk(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return t.emulatorConfig&&Oo(t.emulatorConfig.host)&&(f.credentials="include"),ok.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Pj(t,e){return Ia(t,"POST","/v2/accounts:revokeToken",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=RA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await Mj(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new nu;return r&&(De(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(De(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(De(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new nu,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ei{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=X_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ij(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new fv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Cd(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Rj(this,e)}reload(){return Nj(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Op(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Cd(this,Cj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,c,f,h,m;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(s=n.email)!==null&&s!==void 0?s:void 0,R=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,O=(l=n.photoURL)!==null&&l!==void 0?l:void 0,V=(c=n.tenantId)!==null&&c!==void 0?c:void 0,z=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,j=(h=n.createdAt)!==null&&h!==void 0?h:void 0,F=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:X,emailVerified:y,isAnonymous:E,providerData:b,stsTokenManager:T}=n;De(X&&T,e,"internal-error");const A=nu.fromJSON(this.name,T);De(typeof X=="string",e,"internal-error"),Zs(_,e.name),Zs(w,e.name),De(typeof y=="boolean",e,"internal-error"),De(typeof E=="boolean",e,"internal-error"),Zs(R,e.name),Zs(O,e.name),Zs(V,e.name),Zs(z,e.name),Zs(j,e.name),Zs(F,e.name);const x=new ei({uid:X,auth:e,email:w,emailVerified:y,displayName:_,isAnonymous:E,photoURL:O,phoneNumber:R,tenantId:V,stsTokenManager:A,createdAt:j,lastLoginAt:F});return b&&Array.isArray(b)&&(x.providerData=b.map(k=>Object.assign({},k))),z&&(x._redirectEventId=z),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new nu;s.updateFromServerResponse(n);const o=new ei({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Op(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];De(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?ck(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,c=new nu;c.updateFromIdToken(r);const f=new ei({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new fv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Map;function ms(t){Es(t instanceof Function,"Expected a class definition");let e=kA.get(t);return e?(Es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dk.type="NONE";const IA=dk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t,e,n){return`firebase:${t}:${e}:${n}`}class ru{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Jh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Jh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pp(this.auth,{idToken:e}).catch(()=>{});return n?ei._fromGetAccountInfoResponse(this.auth,n,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ru(ms(IA),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||ms(IA);const l=Jh(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(l);if(m){let _;if(typeof m=="string"){const w=await Pp(e,{idToken:m}).catch(()=>{});if(!w)break;_=await ei._fromGetAccountInfoResponse(e,w,m)}else _=ei._fromJSON(e,m);h!==o&&(c=_),o=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new ru(o,e,r):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new ru(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yk(e))return"Blackberry";if(vk(e))return"Webos";if(hk(e))return"Safari";if((e.includes("chrome/")||pk(e))&&!e.includes("edge/"))return"Chrome";if(gk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function fk(t=Mn()){return/firefox\//i.test(t)}function hk(t=Mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pk(t=Mn()){return/crios\//i.test(t)}function mk(t=Mn()){return/iemobile/i.test(t)}function gk(t=Mn()){return/android/i.test(t)}function yk(t=Mn()){return/blackberry/i.test(t)}function vk(t=Mn()){return/webos/i.test(t)}function J_(t=Mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Oj(t=Mn()){var e;return J_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Vj(){return oV()&&document.documentMode===10}function _k(t=Mn()){return J_(t)||gk(t)||vk(t)||yk(t)||/windows phone/i.test(t)||mk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e=[]){let n;switch(t){case"Browser":n=NA(Mn());break;case"Worker":n=`${NA(Mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_u}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e={}){return Ia(t,"GET","/v2/passwordPolicy",ka(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=6;class Uj{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:jj,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DA(this),this.idTokenSubscription=new DA(this),this.beforeStateQueue=new Lj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ms(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await ru.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pp(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(s=f.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Op(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_j()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hr(this.app))return Promise.reject(gs(this));const n=e?Vt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zj(this),n=new Uj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Pj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ms(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await ru.create(this,[ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&gj(`Error while retrieving App Check token: ${n.error}`),n?.token}}function jo(t){return Vt(t)}class DA{constructor(e){this.auth=e,this.observer=null,this.addObserver=mV(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hj(t){wm=t}function bk(t){return wm.loadJS(t)}function $j(){return wm.recaptchaEnterpriseScript}function Fj(){return wm.gapiScript}function qj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Gj{constructor(){this.enterprise=new Kj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Kj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Yj="recaptcha-enterprise",Ek="NO_RECAPTCHA";class Xj{constructor(e){this.type=Yj,this.auth=jo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{xj(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new Aj(f);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(f=>{c(f)})})}function s(o,l,c){const f=window.grecaptcha;CA(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(Ek)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gj().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!n&&CA(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=$j();f.length!==0&&(f+=c),bk(f).then(()=>{s(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function MA(t,e,n,r=!1,s=!1){const o=new Xj(t);let l;if(s)l=Ek;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function hv(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await MA(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await MA(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t,e){const n=tm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Ro(o,e??{}))return s;ri(s,"already-initialized")}return n.initialize({options:e})}function Qj(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ms);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Zj(t,e,n){const r=jo(t);De(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Tk(e),{host:l,port:c}=Jj(e),f=c===null?"":`:${c}`,h={url:`${o}//${l}${f}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){De(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),De(Ro(h,r.config.emulator)&&Ro(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Oo(l)?(s_(`${o}//${l}${f}`),a_("Auth",!0)):eU()}function Tk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Jj(t){const e=Tk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:PA(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:PA(l)}}}function PA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function tU(t,e){return Ia(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(t,e){return Wd(t,"POST","/v1/accounts:signInWithPassword",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(t,e){return Wd(t,"POST","/v1/accounts:signInWithEmailLink",ka(t,e))}async function iU(t,e){return Wd(t,"POST","/v1/accounts:signInWithEmailLink",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends ew{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Rd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Rd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hv(e,n,"signInWithPassword",nU);case"emailLink":return rU(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hv(e,r,"signUpPassword",tU);case"emailLink":return iU(e,{idToken:n,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t,e){return Wd(t,"POST","/v1/accounts:signInWithIdp",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="http://localhost";class Mo extends ew{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=X_(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Mo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return iu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,iu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,iu(e,n)}buildRequest(){const e={requestUri:sU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oU(t){const e=Gc(Kc(t)).link,n=e?Gc(Kc(e)).deep_link_id:null,r=Gc(Kc(t)).deep_link_id;return(r?Gc(Kc(r)).link:null)||r||n||e||t}class tw{constructor(e){var n,r,s,o,l,c;const f=Gc(Kc(e)),h=(n=f.apiKey)!==null&&n!==void 0?n:null,m=(r=f.oobCode)!==null&&r!==void 0?r:null,_=aU((s=f.mode)!==null&&s!==void 0?s:null);De(h&&m&&_,"argument-error"),this.apiKey=h,this.operation=_,this.code=m,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=f.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=oU(e);try{return new tw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.providerId=xu.PROVIDER_ID}static credential(e,n){return Rd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tw.parseLink(n);return De(r,"argument-error"),Rd._fromEmailAndCode(e,r.code,r.tenantId)}}xu.PROVIDER_ID="password";xu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends Sk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Qd{constructor(){super("facebook.com")}static credential(e){return Mo._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.FACEBOOK_SIGN_IN_METHOD="facebook.com";sa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Qd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mo._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return aa.credential(n,r)}catch{return null}}}aa.GOOGLE_SIGN_IN_METHOD="google.com";aa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends Qd{constructor(){super("github.com")}static credential(e){return Mo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oa.credential(e.oauthAccessToken)}catch{return null}}}oa.GITHUB_SIGN_IN_METHOD="github.com";oa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Qd{constructor(){super("twitter.com")}static credential(e,n){return Mo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return la.credential(n,r)}catch{return null}}}la.TWITTER_SIGN_IN_METHOD="twitter.com";la.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(t,e){return Wd(t,"POST","/v1/accounts:signUp",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ei._fromIdTokenResponse(e,r,s),l=OA(r);return new Po({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=OA(r);return new Po({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function OA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Ui{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vp(e,n,r,s)}}function Ak(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vp._fromErrorAndOperation(t,o,e,r):o})}async function uU(t,e,n=!1){const r=await Cd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Po._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(t,e,n=!1){const{auth:r}=t;if(hr(r.app))return Promise.reject(gs(r));const s="reauthenticate";try{const o=await Cd(t,Ak(r,s,e,t),n);De(o.idToken,r,"internal-error");const l=Z_(o.idToken);De(l,r,"internal-error");const{sub:c}=l;return De(t.uid===c,r,"user-mismatch"),Po._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&ri(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e,n=!1){if(hr(t.app))return Promise.reject(gs(t));const r="signIn",s=await Ak(t,r,e),o=await Po._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function dU(t,e){return xk(jo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t){const e=jo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fU(t,e,n){if(hr(t.app))return Promise.reject(gs(t));const r=jo(t),l=await hv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lU).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Ck(t),f}),c=await Po._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function hU(t,e,n){return hr(t.app)?Promise.reject(gs(t)):dU(Vt(t),xu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ck(t),r})}function pU(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function mU(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function gU(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function yU(t){return Vt(t).signOut()}const Lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lp,"1"),this.storage.removeItem(Lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=1e3,_U=10;class kk extends Rk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_k(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Vj()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,_U):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},vU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kk.type="LOCAL";const wU=kk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik extends Rk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ik.type="SESSION";const Nk=Ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async h=>h(n.origin,o)),f=await bU(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const h=nw("",20);s.port1.start();const m=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(_){const w=_;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(m),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function TU(t){Pi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function SU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xU(){return Dk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="firebaseLocalStorageDb",CU=1,zp="firebaseLocalStorage",Pk="fbase_key";class Zd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Em(t,e){return t.transaction([zp],e?"readwrite":"readonly").objectStore(zp)}function RU(){const t=indexedDB.deleteDatabase(Mk);return new Zd(t).toPromise()}function pv(){const t=indexedDB.open(Mk,CU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zp,{keyPath:Pk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zp)?e(r):(r.close(),await RU(),e(await pv()))})})}async function VA(t,e,n){const r=Em(t,!0).put({[Pk]:e,value:n});return new Zd(r).toPromise()}async function kU(t,e){const n=Em(t,!1).get(e),r=await new Zd(n).toPromise();return r===void 0?null:r.value}function LA(t,e){const n=Em(t,!0).delete(e);return new Zd(n).toPromise()}const IU=800,NU=3;class Ok{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bm._getInstance(xU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SU(),!this.activeServiceWorker)return;this.sender=new EU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pv();return await VA(e,Lp,"1"),await LA(e,Lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>VA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>kU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Em(s,!1).getAll();return new Zd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ok.type="LOCAL";const DU=Ok;new Xd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t,e){return e?ms(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw extends ew{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return iu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return iu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function PU(t){return xk(t.auth,new rw(t),t.bypassAuthState)}function OU(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),cU(n,new rw(t),t.bypassAuthState)}async function VU(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),uU(n,new rw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PU;case"linkViaPopup":case"linkViaRedirect":return VU;case"reauthViaPopup":case"reauthViaRedirect":return OU;default:ri(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new Xd(2e3,1e4);class Fl extends Vk{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Fl.currentPopupAction&&Fl.currentPopupAction.cancel(),Fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=nw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LU.get())};e()}}Fl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="pendingRedirect",ep=new Map;class jU extends Vk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ep.get(this.auth._key());if(!e){try{const r=await UU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ep.set(this.auth._key(),e)}return this.bypassAuthState||ep.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UU(t,e){const n=$U(e),r=HU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function BU(t,e){ep.set(t._key(),e)}function HU(t){return ms(t._redirectPersistence)}function $U(t){return Jh(zU,t.config.apiKey,t.name)}async function FU(t,e,n=!1){if(hr(t.app))return Promise.reject(gs(t));const r=jo(t),s=MU(r,e),l=await new jU(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=10*60*1e3;class GU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Lk(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qU&&this.cachedEventUids.clear(),this.cachedEventUids.has(zA(e))}saveEventToCache(e){this.cachedEventUids.add(zA(e)),this.lastProcessedEventTime=Date.now()}}function zA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lk({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function KU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(t,e={}){return Ia(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WU=/^https?/;async function QU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YU(t);for(const n of e)try{if(ZU(n))return}catch{}ri(t,"unauthorized-domain")}function ZU(t){const e=dv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!WU.test(n))return!1;if(XU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=new Xd(3e4,6e4);function jA(){const t=Pi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eB(t){return new Promise((e,n)=>{var r,s,o;function l(){jA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jA(),n(Mi(t,"network-request-failed"))},timeout:JU.get()})}if(!((s=(r=Pi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Pi().gapi)===null||o===void 0)&&o.load)l();else{const c=qj("iframefcb");return Pi()[c]=()=>{gapi.load?l():n(Mi(t,"network-request-failed"))},bk(`${Fj()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw tp=null,e})}let tp=null;function tB(t){return tp=tp||eB(t),tp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=new Xd(5e3,15e3),rB="__/auth/iframe",iB="emulator/auth/iframe",sB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oB(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Q_(e,iB):`https://${t.config.authDomain}/${rB}`,r={apiKey:e.apiKey,appName:t.name,v:_u},s=aB.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Hd(r).slice(1)}`}async function lB(t){const e=await tB(t),n=Pi().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:oB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sB,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Mi(t,"network-request-failed"),c=Pi().setTimeout(()=>{o(l)},nB.get());function f(){Pi().clearTimeout(c),s(r)}r.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cB=500,dB=600,fB="_blank",hB="http://localhost";class UA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pB(t,e,n,r=cB,s=dB){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f=Object.assign(Object.assign({},uB),{width:r.toString(),height:s.toString(),top:o,left:l}),h=Mn().toLowerCase();n&&(c=pk(h)?fB:n),fk(h)&&(e=e||hB,f.scrollbars="yes");const m=Object.entries(f).reduce((w,[R,O])=>`${w}${R}=${O},`,"");if(Oj(h)&&c!=="_self")return mB(e||"",c),new UA(null);const _=window.open(e||"",c,m);De(_,t,"popup-blocked");try{_.focus()}catch{}return new UA(_)}function mB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB="__/auth/handler",yB="emulator/auth/handler",vB=encodeURIComponent("fac");async function BA(t,e,n,r,s,o){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_u,eventId:s};if(e instanceof Sk){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",pV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries({}))l[m]=_}if(e instanceof Qd){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const f=await t._getAppCheckToken(),h=f?`#${vB}=${encodeURIComponent(f)}`:"";return`${_B(t)}?${Hd(c).slice(1)}${h}`}function _B({config:t}){return t.emulator?Q_(t,yB):`https://${t.authDomain}/${gB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="webStorageSupport";class wB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nk,this._completeRedirectFn=FU,this._overrideRedirectResult=BU}async _openPopup(e,n,r,s){var o;Es((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await BA(e,n,r,dv(),s);return pB(e,l,nw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await BA(e,n,r,dv(),s);return TU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Es(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lB(e),r=new GU(e);return n.register("authEvent",s=>(De(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ay,{type:ay},s=>{var o;const l=(o=s?.[0])===null||o===void 0?void 0:o[ay];l!==void 0&&n(!!l),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _k()||hk()||J_()}}const bB=wB;var HA="@firebase/auth",$A="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SB(t){ko(new va("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;De(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wk(t)},h=new Bj(r,s,o,f);return Qj(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ko(new va("auth-internal",e=>{const n=jo(e.getProvider("auth").getImmediate());return(r=>new EB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(HA,$A,TB(t)),Ii(HA,$A,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=5*60,xB=_C("authIdTokenMaxAge")||AB;let FA=null;const CB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xB)return;const s=n?.token;FA!==s&&(FA=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function RB(t=u_()){const e=tm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Wj(t,{popupRedirectResolver:bB,persistence:[DU,wU,Nk]}),r=_C("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=CB(o.toString());mU(n,l,()=>l(n.currentUser)),pU(n,c=>l(c))}}const s=gC("auth");return s&&Zj(n,`http://${s}`),n}function kB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Hj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Mi("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",kB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SB("Browser");const IB={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},iw=EC(IB),ii=Y7(iw),sw=RB(iw),NB=qL(iw,"us-central1");class Ol extends Error{constructor(e,n){super(`${e} at position ${n}`),this.position=n}}const zk=32,DB=10,jk=9,Uk=13,MB=160,PB=8192,OB=8202,VB=8239,LB=8287,zB=12288;function jB(t){return/^[0-9A-Fa-f]$/.test(t)}function uo(t){return t>="0"&&t<="9"}function UB(t){return t>=" "}function Vh(t){return`,:[]/{}()
+`.includes(t)}function qA(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"}function GA(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"||t>="0"&&t<="9"}const KA=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,YA=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function XA(t){return`,[]/{}
+`.includes(t)}function WA(t){return np(t)||BB.test(t)}const BB=/^[[{\w-]$/;function HB(t){return t===`
`||t==="\r"||t==="	"||t==="\b"||t==="\f"}function mo(t,e){const n=t.charCodeAt(e);return n===zk||n===DB||n===jk||n===Uk}function $B(t,e){const n=t.charCodeAt(e);return n===zk||n===jk||n===Uk}function FB(t,e){const n=t.charCodeAt(e);return n===MB||n>=PB&&n<=OB||n===VB||n===LB||n===zB}function np(t){return Bk(t)||mv(t)}function Bk(t){return t==='"'||t===""||t===""}function QA(t){return t==='"'}function mv(t){return t==="'"||t===""||t===""||t==="`"||t===""}function ZA(t){return t==="'"}function Lc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=t.lastIndexOf(e);return r!==-1?t.substring(0,r)+(n?"":t.substring(r+1)):t}function Wr(t,e){let n=t.length;if(!mo(t,n-1))return t+e;for(;mo(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function qB(t,e,n){return t.substring(0,e)+t.substring(e+n)}function GB(t){return/[,\n][ \t\r]*$/.test(t)}const KB={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},YB={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function aw(t){let e=0,n="";h(["```","[```","{```"]),o()||M(),h(["```","```]","```}"]);const s=_(",");for(s&&l(),WA(t[e])&&GB(n)?(s||(n=Wr(n,",")),j()):s&&(n=Lc(n,","));t[e]==="}"||t[e]==="]";)e++,l();if(e>=t.length)return n;P();function o(){l();const Y=V()||z()||F()||y()||E()||T(!1)||A();return l(),Y}function l(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const W=e;let U=c(Y);do U=f(),U&&(U=c(Y));while(U);return e>W}function c(Y){const W=Y?mo:$B;let U="";for(;;)if(W(t,e))U+=t[e],e++;else if(FB(t,e))U+=" ",e++;else break;return U.length>0?(n+=U,!0):!1}function f(){if(t[e]==="/"&&t[e+1]==="*"){for(;e<t.length&&!XB(t,e);)e++;return e+=2,!0}if(t[e]==="/"&&t[e+1]==="/"){for(;e<t.length&&t[e]!==`
`;)e++;return!0}return!1}function h(Y){if(m(Y)){if(qA(t[e]))for(;e<t.length&&GA(t[e]);)e++;return l(),!0}return!1}function m(Y){for(const W of Y){const U=e+W.length;if(t.slice(e,U)===W)return e=U,!0}return!1}function _(Y){return t[e]===Y?(n+=t[e],e++,!0):!1}function w(Y){return t[e]===Y?(e++,!0):!1}function R(){return w("\\")}function O(){return l(),t[e]==="."&&t[e+1]==="."&&t[e+2]==="."?(e+=3,l(),w(","),!0):!1}function V(){if(t[e]==="{"){n+="{",e++,l(),w(",")&&l();let Y=!0;for(;e<t.length&&t[e]!=="}";){let W;if(Y?(W=!0,Y=!1):(W=_(","),W||(n=Wr(n,",")),l()),O(),!(F()||T(!0))){t[e]==="}"||t[e]==="{"||t[e]==="]"||t[e]==="["||t[e]===void 0?n=Lc(n,","):K();break}l();const Q=_(":"),ne=e>=t.length;Q||(WA(t[e])||ne?n=Wr(n,":"):C()),o()||(Q||ne?n+="null":C())}return t[e]==="}"?(n+="}",e++):n=Wr(n,"}"),!0}return!1}function z(){if(t[e]==="["){n+="[",e++,l(),w(",")&&l();let Y=!0;for(;e<t.length&&t[e]!=="]";)if(Y?Y=!1:_(",")||(n=Wr(n,",")),O(),!o()){n=Lc(n,",");break}return t[e]==="]"?(n+="]",e++):n=Wr(n,"]"),!0}return!1}function j(){let Y=!0,W=!0;for(;W;)Y?Y=!1:_(",")||(n=Wr(n,",")),W=o();W||(n=Lc(n,",")),n=`[
${n}
]`}function F(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,U=t[e]==="\\";if(U&&(e++,U=!0),np(t[e])){const Q=QA(t[e])?QA:ZA(t[e])?ZA:mv(t[e])?mv:Bk,ne=e,J=n.length;let te='"';for(e++;;){if(e>=t.length){const oe=x(e-1);return!Y&&Vh(t.charAt(oe))?(e=ne,n=n.substring(0,J),F(!0)):(te=Wr(te,'"'),n+=te,!0)}if(e===W)return te=Wr(te,'"'),n+=te,!0;if(Q(t[e])){const oe=e,ce=te.length;if(te+='"',e++,n+=te,l(!1),Y||e>=t.length||Vh(t[e])||np(t[e])||uo(t[e]))return X(),!0;const fe=x(oe-1),me=t.charAt(fe);if(me===",")return e=ne,n=n.substring(0,J),F(!1,fe);if(Vh(me))return e=ne,n=n.substring(0,J),F(!0);n=n.substring(0,J),e=oe+1,te=`${te.substring(0,ce)}\\${te.substring(ce)}`}else if(Y&&XA(t[e])){if(t[e-1]===":"&&KA.test(t.substring(ne+1,e+2)))for(;e<t.length&&YA.test(t[e]);)te+=t[e],e++;return te=Wr(te,'"'),n+=te,X(),!0}else if(t[e]==="\\"){const oe=t.charAt(e+1);if(YB[oe]!==void 0)te+=t.slice(e,e+2),e+=2;else if(oe==="u"){let fe=2;for(;fe<6&&jB(t[e+fe]);)fe++;fe===6?(te+=t.slice(e,e+6),e+=6):e+fe>=t.length?e=t.length:q()}else te+=oe,e+=2}else{const oe=t.charAt(e);oe==='"'&&t[e-1]!=="\\"?(te+=`\\${oe}`,e++):HB(oe)?(te+=KB[oe],e++):(UB(oe)||B(oe),te+=oe,e++)}U&&R()}}return!1}function X(){let Y=!1;for(l();t[e]==="+";){Y=!0,e++,l(),n=Lc(n,'"',!0);const W=n.length;F()?n=qB(n,W,1):n=Wr(n,'"')}return Y}function y(){const Y=e;if(t[e]==="-"){if(e++,k())return I(Y),!0;if(!uo(t[e]))return e=Y,!1}for(;uo(t[e]);)e++;if(t[e]==="."){if(e++,k())return I(Y),!0;if(!uo(t[e]))return e=Y,!1;for(;uo(t[e]);)e++}if(t[e]==="e"||t[e]==="E"){if(e++,(t[e]==="-"||t[e]==="+")&&e++,k())return I(Y),!0;if(!uo(t[e]))return e=Y,!1;for(;uo(t[e]);)e++}if(!k())return e=Y,!1;if(e>Y){const W=t.slice(Y,e),U=/^0\d/.test(W);return n+=U?`"${W}"`:W,!0}return!1}function E(){return b("true","true")||b("false","false")||b("null","null")||b("True","true")||b("False","false")||b("None","null")}function b(Y,W){return t.slice(e,e+Y.length)===Y?(n+=W,e+=Y.length,!0):!1}function T(Y){const W=e;if(qA(t[e])){for(;e<t.length&&GA(t[e]);)e++;let U=e;for(;mo(t,U);)U++;if(t[U]==="(")return e=U+1,o(),t[e]===")"&&(e++,t[e]===";"&&e++),!0}for(;e<t.length&&!XA(t[e])&&!np(t[e])&&(!Y||t[e]!==":");)e++;if(t[e-1]===":"&&KA.test(t.substring(W,e+2)))for(;e<t.length&&YA.test(t[e]);)e++;if(e>W){for(;mo(t,e-1)&&e>0;)e--;const U=t.slice(W,e);return n+=U==="undefined"?"null":JSON.stringify(U),t[e]==='"'&&e++,!0}}function A(){if(t[e]==="/"){const Y=e;for(e++;e<t.length&&(t[e]!=="/"||t[e-1]==="\\");)e++;return e++,n+=`"${t.substring(Y,e)}"`,!0}}function x(Y){let W=Y;for(;W>0&&mo(t,W);)W--;return W}function k(){return e>=t.length||Vh(t[e])||mo(t,e)}function I(Y){n+=`${t.slice(Y,e)}0`}function B(Y){throw new Ol(`Invalid character ${JSON.stringify(Y)}`,e)}function P(){throw new Ol(`Unexpected character ${JSON.stringify(t[e])}`,e)}function M(){throw new Ol("Unexpected end of json string",t.length)}function K(){throw new Ol("Object key expected",e)}function C(){throw new Ol("Colon expected",e)}function q(){const Y=t.slice(e,e+6);throw new Ol(`Invalid unicode character "${Y}"`,e)}}function XB(t,e){return t[e]==="*"&&t[e+1]==="/"}const Hk={1:"Hero visual with comprehensive explanation - large image with detailed educational content",2:"Step-by-step visual guide - multiple images with substantial explanations for each step",3:"Process diagram with detailed explanation - flowchart showing complex processes with educational context",4:"Concept map with analysis - mind map with detailed explanations of relationships",5:"Data visualization with analysis - pie chart with detailed statistical breakdown and interpretation",6:"Strategic framework with detailed explanation - quadrant analysis with comprehensive guidelines",7:"Featured concept layout - large visual with title and multiple paragraphs of educational content",8:"Comparative analysis - main concept with supporting evidence and detailed explanations",9:"Video learning with context - educational video with substantial background information",12:"Illustrated guide with key insights - central visual with detailed bullet points and explanations",13:"Media-rich educational content - video with comprehensive overview and context",14:"Comprehensive topic exploration - alternating visuals and detailed explanations for thorough understanding",15:"Historical timeline with detailed context - chronological progression with substantial descriptions",16:"Multi-concept comparison - grid layout with detailed descriptions for comparing related topics",17:"Code tutorial with visual examples - code snippets with explanations and visual diagrams",18:"Technical documentation - code examples with comprehensive API documentation and use cases"},WB={1:'["compelling_title", "comprehensive_educational_content", ["hero_image_prompt", "supporting_visual_1", "supporting_visual_2"]]',2:'[["step_image_1", "detailed_step_explanation_1"], ["step_image_2", "detailed_step_explanation_2"], ["step_image_3", "detailed_step_explanation_3"]]',3:[`flowchart TD
    A[starting_concept] -->|process_1| B(intermediate_result)
    B --> C{decision_point}
    C -->|outcome_a| D[final_result_1]
    C -->|outcome_b| E[final_result_2]
    C -->|outcome_c| F[fa:fa-star special_case]`,"comprehensive_process_explanation"],4:[`mindmap
  root((Central_Educational_Concept))
    Key_Aspect_1
      Supporting_Detail_A
      Supporting_Detail_B
    Key_Aspect_2
      Supporting_Detail_C
      Supporting_Detail_D`,"detailed_concept_analysis"],5:[`pie
    title Educational_Data_Analysis
    "Primary_Factor" : 45
    "Secondary_Factor" : 30
    "Additional_Factors" : 25`,"comprehensive_data_interpretation"],6:[`quadrantChart
    title Educational_Framework
    x-axis Low_Complexity --> High_Complexity
    y-axis Low_Impact --> High_Impact
    quadrant-1 Quick_Concepts
    quadrant-2 Advanced_Topics
    quadrant-3 Basic_Ideas
    quadrant-4 Fundamental_Principles
    "Concept_A": [0.3, 0.7]
    "Concept_B": [0.8, 0.4]
    "Concept_C": [0.2, 0.8]`,"detailed_framework_explanation"],7:"[featured_visual_prompt, educational_title, detailed_paragraph_1, detailed_paragraph_2, detailed_paragraph_3]",8:"[main_concept_visual, educational_title, comprehensive_explanation, [evidence_visual_1, evidence_visual_2, evidence_visual_3]]",9:"[educational_video_prompt, comprehensive_contextual_explanation]",12:"[central_educational_visual, [detailed_insight_1, detailed_insight_2, detailed_insight_3, detailed_insight_4]]",13:"[educational_section_title, comprehensive_overview_text, instructional_video_prompt]",14:"[educational_visual_1, detailed_explanation_1, educational_visual_2, detailed_explanation_2, educational_visual_3, detailed_explanation_3]",15:"[date_1, historical_visual_1, comprehensive_event_description_1, date_2, historical_visual_2, comprehensive_event_description_2]",16:"[topic_title_1, topic_visual_1, detailed_description_1, topic_title_2, topic_visual_2, detailed_description_2]",17:"[tutorial_title, code_example_1, code_explanation_1, architecture_diagram_prompt, implementation_explanation, code_example_2, code_explanation_2]",18:"[api_title, code_snippet, comprehensive_documentation, usage_examples, visual_diagram_prompt, best_practices_explanation]"},QB=Object.freeze(Object.defineProperty({__proto__:null,LAYOUT_SCHEMA:WB,LAYOUT_TYPES:Hk},Symbol.toStringTag,{value:"Module"})),ZB=(t,e,n,r)=>`You are an expert educational designer who creates comprehensive, visually-enhanced learning content.
    Return ONLY a valid array. Do not include markdown formatting, code blocks, or any text before or after the array.
        
        EDUCATIONAL CONTENT RULES:
         COMPREHENSIVE: Each node should contain 100+ words of educational content total
         WELL-STRUCTURED: Use proper paragraphs, clear explanations, and logical flow
         VISUAL BALANCE: Combine substantial text with compelling visuals
         EDUCATIONAL DEPTH: Explain concepts thoroughly with examples, context, and details
         ENGAGING WRITING: Use clear, engaging language that teaches effectively
        
        TEXT GUIDELINES:
         Titles: Clear, educational (3-8 words)
         Paragraphs: Full explanations (3-5 sentences each, 20-40 words per sentence)
         Descriptions: Detailed and informative (2-3 sentences minimum)
         Content should flow logically and build understanding progressively
         Markdown should be used for formatting

        IMAGE PROMPTS:
         Educational and specific: "Detailed diagram of photosynthesis process in plant cells"
         Include visual style: "realistic scientific illustration", "clean educational diagram"
         Support the educational content meaningfully
        
        CONTENT BALANCE:
         60% substantial educational text
         40% compelling visuals that enhance learning
         Ensure minimum 100 words total per node
         Use markdown formatting in text (headings, bold, italics where appropriate)
        
        OUTPUT FORMAT:
        Return ONLY a valid array based on the SCHEMA. Follow the exact structure.
        NO markdown code blocks, NO extra text.
        RETURN AN ARRAY [] - NOT AN OBJECT!

        CONCEPT: ${e}
        CONTEXT: ${t}
        REMEMBER: THIS IS REALLY IMPORTANT : Focus strictly on the main topic. The provided context should be used only to clarify the topic or provide concrete examples  not as the focus of the explanation. If the context is irrelevant or distracting, ignore it entirely
        SCHEMA: ${r}`,JB=(t,e)=>{const n=(r,s)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${r}-${s} logical next topics.
        - Each topic <4 words, doublequoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},eH=(t,e)=>`RETURN ONLY THE FA ICON CORRESPONDING TO THE CONCEPT: "${t}". EXAMPLE: <i class="fas fa-check"></i>`,tH=(t,e,n)=>`Choose the best educational layout for "${t}" - prioritize diversity and optimal content presentation.
        
        Use diverse layouts for better user experience. If both layouts are suitable, prefer the one that is different from the last used layout. Last used layout: ${n}.
        
        SELECTION CRITERIA:
         Content Type Match: Which layout best fits the specific content structure?
         Visual Balance: Optimal text-to-visual ratio for the topic
         Learning Effectiveness: Best presentation for comprehension
         Layout Variety: Strongly prefer different layouts (avoid repeating same layout)
        
        PRIORITY LAYOUT SELECTION GUIDE:
         **Technical/Programming topics**: Use layouts 17, 18 (code tutorials, API docs), 1, 8
         **Process/systems**: Use diagram layouts 3, 4, 5, 6
         **Comprehensive explanations**: Use hero layouts 1, 7, 12
         **Step-by-step content**: Use layouts 2, 15 (timeline), 17 (code tutorial)
         **Multi-aspect topics**: Use layouts 12, 13, 16
         **Media-heavy content**: Use layouts 9, 13
         **Quick concepts**: Use layouts 1, 6, 8
         **Historical/chronological**: Use layout 15
         **Comparison content**: Use layouts 8, 16, 14
        
        DIVERSIFICATION RULES:
        - Prioritize new code layouts (17, 18) for technical content
        - Rotate between different layout families
        - Match complexity of layout to complexity of content
        - Consider visual appeal and educational effectiveness
        
        Return ONLY the layout number as an integer (1-18).
        
        LAYOUT TYPES:
        ${JSON.stringify(Hk)}`,$k=t=>{try{let e=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"");e=e.trim();const n=e.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return n&&(e=n[0]),aw(e)}catch(e){console.warn("Failed to repair JSON:",e),console.warn("Original response:",t);let n=t.replace(/```json\s*\n?/gi,"").replace(/```\s*$/gi,"").trim();const r=n.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return r?r[0]:n}},Tm=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await KL(NB,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},nH=async t=>{try{const e=await Tm(JB(t,"default"));console.log("Suggestions response:",e);const n=$k(e);try{const r=JSON.parse(n);return Array.isArray(r)?r:[]}catch(r){console.warn("JSON parse failed for suggestions, attempting repair:",r);const s=aw(e),o=JSON.parse(s);return Array.isArray(o)?o:[]}}catch(e){return console.error("Error fetching suggestions:",e),[]}},rH=async t=>{try{const e=await Tm(eH(t,"default"));return console.log("Icon response:",e),e||""}catch(e){return console.error("Error fetching icon:",e),""}},iH=async(t,e)=>{try{const n=await Tm(tH(t,"default",e));console.log("Layout response:",n);const r=n.replace(/[^\d]/g,""),s=parseInt(r);return isNaN(s)||s<1||s>18?(console.warn(`Invalid layout number: ${s}, defaulting to 1`),1):s}catch(n){return console.error("Error fetching layout:",n),1}},sH=async(t,e,n,r)=>{try{const o=(await fC(()=>Promise.resolve().then(()=>QB),void 0)).LAYOUT_SCHEMA[n.toString()],l=Array.isArray(o)?JSON.stringify(o):o,c=await Tm(ZB(e,t,r,l));console.log("Content response:",c);const f=$k(c);try{const h=JSON.parse(f);return Array.isArray(h)?h:[]}catch(h){console.warn("JSON parse failed, attempting repair:",h);const m=aw(c),_=JSON.parse(m);return Array.isArray(_)?_:[]}}catch(s){return console.error("Error fetching content:",s),[]}},aH=async(t,e="",n="default",r)=>{try{const s=await iH(t,r);console.log("Selected layout:",s);const[o,l,c]=await Promise.all([sH(t,e,s,n),nH(t),rH(t)]);return console.log("Generated content:",o),console.log("Generated suggestions:",l),console.log("Generated icon:",c),{layout:s,content:o,suggestions:l,icon:c,title:t,fullText:t}}catch(s){return console.error("Error in generateNodeContent:",s),{layout:1,content:[t,"Content loading failed",[]],suggestions:[],icon:"",title:t,fullText:t}}},oH="AIzaSyD2LVnTgBbk-5Wo1V2sCmY9ebcmIPdS1ng",lH="93fe2cec9d77f4202",uH="https://www.googleapis.com/customsearch/v1",cH="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",dH="https://www.googleapis.com/youtube/v3/search",zc=new Map,jc=new Map,si=async t=>{if(zc.has(t))return zc.get(t);try{const e=encodeURIComponent(t),n=`${uH}?key=${oH}&cx=${lH}&q=${e}&searchType=image&num=1&safe=active`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const l=s.items[0],c=l.link||l.pagemap?.cse_image?.[0]?.src;if(c)return zc.set(t,c),c}const o=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return zc.set(t,o),o}catch(e){console.error("Error fetching Google image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return zc.set(t,n),n}},Fk=async t=>{if(jc.has(t))return jc.get(t);try{const e=encodeURIComponent(t),n=`${dH}?key=${cH}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const l=s.items[0].id.videoId;if(l)return jc.set(t,l),l}const o="dQw4w9WgXcQ";return jc.set(t,o),o}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return jc.set(t,n),n}},qk=t=>`https://www.youtube.com/embed/${t}`;async function Sm(t){const n=(await fC(()=>import("./mermaid.core-CDg-c7pi.js").then(o=>o.bo),[])).default??window.mermaid?.mermaidAPI;window.___mermaidInitialised||(n.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit"}),window.___mermaidInitialised=!0);let r;try{r=(await n.render("m_"+Math.random().toString(36).slice(2),t.trim())).svg}catch(o){throw o}return new DOMParser().parseFromString(r,"image/svg+xml").documentElement}var rp={exports:{}},fH=rp.exports,JA;function hH(){return JA||(JA=1,function(t){(function(){function e(y){var E={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `` and `` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(y===!1)return JSON.parse(JSON.stringify(E));var b={};for(var T in E)E.hasOwnProperty(T)&&(b[T]=E[T].defaultValue);return b}function n(){var y=e(!0),E={};for(var b in y)y.hasOwnProperty(b)&&(E[b]=!0);return E}var r={},s={},o={},l=e(!0),c="vanilla",f={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:n()};r.helper={},r.extensions={},r.setOption=function(y,E){return l[y]=E,this},r.getOption=function(y){return l[y]},r.getOptions=function(){return l},r.resetOptions=function(){l=e(!0)},r.setFlavor=function(y){if(!f.hasOwnProperty(y))throw Error(y+" flavor was not found");r.resetOptions();var E=f[y];c=y;for(var b in E)E.hasOwnProperty(b)&&(l[b]=E[b])},r.getFlavor=function(){return c},r.getFlavorOptions=function(y){if(f.hasOwnProperty(y))return f[y]},r.getDefaultOptions=function(y){return e(y)},r.subParser=function(y,E){if(r.helper.isString(y))if(typeof E<"u")s[y]=E;else{if(s.hasOwnProperty(y))return s[y];throw Error("SubParser named "+y+" not registered!")}},r.extension=function(y,E){if(!r.helper.isString(y))throw Error("Extension 'name' must be a string");if(y=r.helper.stdExtName(y),r.helper.isUndefined(E)){if(!o.hasOwnProperty(y))throw Error("Extension named "+y+" is not registered!");return o[y]}else{typeof E=="function"&&(E=E()),r.helper.isArray(E)||(E=[E]);var b=h(E,y);if(b.valid)o[y]=E;else throw Error(b.error)}},r.getAllExtensions=function(){return o},r.removeExtension=function(y){delete o[y]},r.resetExtensions=function(){o={}};function h(y,E){var b=E?"Error in "+E+" extension->":"Error in unnamed extension",T={valid:!0,error:""};r.helper.isArray(y)||(y=[y]);for(var A=0;A<y.length;++A){var x=b+" sub-extension "+A+": ",k=y[A];if(typeof k!="object")return T.valid=!1,T.error=x+"must be an object, but "+typeof k+" given",T;if(!r.helper.isString(k.type))return T.valid=!1,T.error=x+'property "type" must be a string, but '+typeof k.type+" given",T;var I=k.type=k.type.toLowerCase();if(I==="language"&&(I=k.type="lang"),I==="html"&&(I=k.type="output"),I!=="lang"&&I!=="output"&&I!=="listener")return T.valid=!1,T.error=x+"type "+I+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',T;if(I==="listener"){if(r.helper.isUndefined(k.listeners))return T.valid=!1,T.error=x+'. Extensions of type "listener" must have a property called "listeners"',T}else if(r.helper.isUndefined(k.filter)&&r.helper.isUndefined(k.regex))return T.valid=!1,T.error=x+I+' extensions must define either a "regex" property or a "filter" method',T;if(k.listeners){if(typeof k.listeners!="object")return T.valid=!1,T.error=x+'"listeners" property must be an object but '+typeof k.listeners+" given",T;for(var B in k.listeners)if(k.listeners.hasOwnProperty(B)&&typeof k.listeners[B]!="function")return T.valid=!1,T.error=x+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+B+" must be a function but "+typeof k.listeners[B]+" given",T}if(k.filter){if(typeof k.filter!="function")return T.valid=!1,T.error=x+'"filter" must be a function, but '+typeof k.filter+" given",T}else if(k.regex){if(r.helper.isString(k.regex)&&(k.regex=new RegExp(k.regex,"g")),!(k.regex instanceof RegExp))return T.valid=!1,T.error=x+'"regex" property must either be a string or a RegExp object, but '+typeof k.regex+" given",T;if(r.helper.isUndefined(k.replace))return T.valid=!1,T.error=x+'"regex" extensions must implement a replace string or function',T}}return T}r.validateExtension=function(y){var E=h(y,null);return E.valid?!0:(console.warn(E.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(y){return typeof y=="string"||y instanceof String},r.helper.isFunction=function(y){var E={};return y&&E.toString.call(y)==="[object Function]"},r.helper.isArray=function(y){return Array.isArray(y)},r.helper.isUndefined=function(y){return typeof y>"u"},r.helper.forEach=function(y,E){if(r.helper.isUndefined(y))throw new Error("obj param is required");if(r.helper.isUndefined(E))throw new Error("callback param is required");if(!r.helper.isFunction(E))throw new Error("callback param must be a function/closure");if(typeof y.forEach=="function")y.forEach(E);else if(r.helper.isArray(y))for(var b=0;b<y.length;b++)E(y[b],b,y);else if(typeof y=="object")for(var T in y)y.hasOwnProperty(T)&&E(y[T],T,y);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(y){return y.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function m(y,E){var b=E.charCodeAt(0);return"E"+b+"E"}r.helper.escapeCharactersCallback=m,r.helper.escapeCharacters=function(y,E,b){var T="(["+E.replace(/([\[\]\\])/g,"\\$1")+"])";b&&(T="\\\\"+T);var A=new RegExp(T,"g");return y=y.replace(A,m),y},r.helper.unescapeHTMLEntities=function(y){return y.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var _=function(y,E,b,T){var A=T||"",x=A.indexOf("g")>-1,k=new RegExp(E+"|"+b,"g"+A.replace(/g/g,"")),I=new RegExp(E,A.replace(/g/g,"")),B=[],P,M,K,C,q;do for(P=0;K=k.exec(y);)if(I.test(K[0]))P++||(M=k.lastIndex,C=M-K[0].length);else if(P&&!--P){q=K.index+K[0].length;var Y={left:{start:C,end:M},match:{start:M,end:K.index},right:{start:K.index,end:q},wholeMatch:{start:C,end:q}};if(B.push(Y),!x)return B}while(P&&(k.lastIndex=M));return B};r.helper.matchRecursiveRegExp=function(y,E,b,T){for(var A=_(y,E,b,T),x=[],k=0;k<A.length;++k)x.push([y.slice(A[k].wholeMatch.start,A[k].wholeMatch.end),y.slice(A[k].match.start,A[k].match.end),y.slice(A[k].left.start,A[k].left.end),y.slice(A[k].right.start,A[k].right.end)]);return x},r.helper.replaceRecursiveRegExp=function(y,E,b,T,A){if(!r.helper.isFunction(E)){var x=E;E=function(){return x}}var k=_(y,b,T,A),I=y,B=k.length;if(B>0){var P=[];k[0].wholeMatch.start!==0&&P.push(y.slice(0,k[0].wholeMatch.start));for(var M=0;M<B;++M)P.push(E(y.slice(k[M].wholeMatch.start,k[M].wholeMatch.end),y.slice(k[M].match.start,k[M].match.end),y.slice(k[M].left.start,k[M].left.end),y.slice(k[M].right.start,k[M].right.end))),M<B-1&&P.push(y.slice(k[M].wholeMatch.end,k[M+1].wholeMatch.start));k[B-1].wholeMatch.end<y.length&&P.push(y.slice(k[B-1].wholeMatch.end)),I=P.join("")}return I},r.helper.regexIndexOf=function(y,E,b){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(E instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var T=y.substring(b||0).search(E);return T>=0?T+(b||0):T},r.helper.splitAtIndex=function(y,E){if(!r.helper.isString(y))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[y.substring(0,E),y.substring(E)]},r.helper.encodeEmailAddress=function(y){var E=[function(b){return"&#"+b.charCodeAt(0)+";"},function(b){return"&#x"+b.charCodeAt(0).toString(16)+";"},function(b){return b}];return y=y.replace(/./g,function(b){if(b==="@")b=E[Math.floor(Math.random()*2)](b);else{var T=Math.random();b=T>.9?E[2](b):T>.45?E[1](b):E[0](b)}return b}),y},r.helper.padEnd=function(E,b,T){return b=b>>0,T=String(T||" "),E.length>b?String(E):(b=b-E.length,b>T.length&&(T+=T.repeat(b/T.length)),String(E)+T.slice(0,b))},typeof console>"u"&&(console={warn:function(y){alert(y)},log:function(y){alert(y)},error:function(y){throw y}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"","-1":"",100:"",1234:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"","8ball":"",a:"",ab:"",abc:"",abcd:"",accept:"",aerial_tramway:"",airplane:"",alarm_clock:"",alembic:"",alien:"",ambulance:"",amphora:"",anchor:"",angel:"",anger:"",angry:"",anguished:"",ant:"",apple:"",aquarius:"",aries:"",arrow_backward:"",arrow_double_down:"",arrow_double_up:"",arrow_down:"",arrow_down_small:"",arrow_forward:"",arrow_heading_down:"",arrow_heading_up:"",arrow_left:"",arrow_lower_left:"",arrow_lower_right:"",arrow_right:"",arrow_right_hook:"",arrow_up:"",arrow_up_down:"",arrow_up_small:"",arrow_upper_left:"",arrow_upper_right:"",arrows_clockwise:"",arrows_counterclockwise:"",art:"",articulated_lorry:"",artificial_satellite:"",astonished:"",athletic_shoe:"",atm:"",atom_symbol:"",avocado:"",b:"",baby:"",baby_bottle:"",baby_chick:"",baby_symbol:"",back:"",bacon:"",badminton:"",baggage_claim:"",baguette_bread:"",balance_scale:"",balloon:"",ballot_box:"",ballot_box_with_check:"",bamboo:"",banana:"",bangbang:"",bank:"",bar_chart:"",barber:"",baseball:"",basketball:"",basketball_man:"",basketball_woman:"&zwj;",bat:"",bath:"",bathtub:"",battery:"",beach_umbrella:"",bear:"",bed:"",bee:"",beer:"",beers:"",beetle:"",beginner:"",bell:"",bellhop_bell:"",bento:"",biking_man:"",bike:"",biking_woman:"&zwj;",bikini:"",biohazard:"",bird:"",birthday:"",black_circle:"",black_flag:"",black_heart:"",black_joker:"",black_large_square:"",black_medium_small_square:"",black_medium_square:"",black_nib:"",black_small_square:"",black_square_button:"",blonde_man:"",blonde_woman:"&zwj;",blossom:"",blowfish:"",blue_book:"",blue_car:"",blue_heart:"",blush:"",boar:"",boat:"",bomb:"",book:"",bookmark:"",bookmark_tabs:"",books:"",boom:"",boot:"",bouquet:"",bowing_man:"",bow_and_arrow:"",bowing_woman:"&zwj;",bowling:"",boxing_glove:"",boy:"",bread:"",bride_with_veil:"",bridge_at_night:"",briefcase:"",broken_heart:"",bug:"",building_construction:"",bulb:"",bullettrain_front:"",bullettrain_side:"",burrito:"",bus:"",business_suit_levitating:"",busstop:"",bust_in_silhouette:"",busts_in_silhouette:"",butterfly:"",cactus:"",cake:"",calendar:"",call_me_hand:"",calling:"",camel:"",camera:"",camera_flash:"",camping:"",cancer:"",candle:"",candy:"",canoe:"",capital_abcd:"",capricorn:"",car:"",card_file_box:"",card_index:"",card_index_dividers:"",carousel_horse:"",carrot:"",cat:"",cat2:"",cd:"",chains:"",champagne:"",chart:"",chart_with_downwards_trend:"",chart_with_upwards_trend:"",checkered_flag:"",cheese:"",cherries:"",cherry_blossom:"",chestnut:"",chicken:"",children_crossing:"",chipmunk:"",chocolate_bar:"",christmas_tree:"",church:"",cinema:"",circus_tent:"",city_sunrise:"",city_sunset:"",cityscape:"",cl:"",clamp:"",clap:"",clapper:"",classical_building:"",clinking_glasses:"",clipboard:"",clock1:"",clock10:"",clock1030:"",clock11:"",clock1130:"",clock12:"",clock1230:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",closed_book:"",closed_lock_with_key:"",closed_umbrella:"",cloud:"",cloud_with_lightning:"",cloud_with_lightning_and_rain:"",cloud_with_rain:"",cloud_with_snow:"",clown_face:"",clubs:"",cocktail:"",coffee:"",coffin:"",cold_sweat:"",comet:"",computer:"",computer_mouse:"",confetti_ball:"",confounded:"",confused:"",congratulations:"",construction:"",construction_worker_man:"",construction_worker_woman:"&zwj;",control_knobs:"",convenience_store:"",cookie:"",cool:"",policeman:"",copyright:"",corn:"",couch_and_lamp:"",couple:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"&zwj;&zwj;",couple_with_heart_woman_woman:"&zwj;&zwj;",couplekiss_man_man:"&zwj;&zwj;&zwj;",couplekiss_man_woman:"",couplekiss_woman_woman:"&zwj;&zwj;&zwj;",cow:"",cow2:"",cowboy_hat_face:"",crab:"",crayon:"",credit_card:"",crescent_moon:"",cricket:"",crocodile:"",croissant:"",crossed_fingers:"",crossed_flags:"",crossed_swords:"",crown:"",cry:"",crying_cat_face:"",crystal_ball:"",cucumber:"",cupid:"",curly_loop:"",currency_exchange:"",curry:"",custard:"",customs:"",cyclone:"",dagger:"",dancer:"",dancing_women:"",dancing_men:"&zwj;",dango:"",dark_sunglasses:"",dart:"",dash:"",date:"",deciduous_tree:"",deer:"",department_store:"",derelict_house:"",desert:"",desert_island:"",desktop_computer:"",male_detective:"",diamond_shape_with_a_dot_inside:"",diamonds:"",disappointed:"",disappointed_relieved:"",dizzy:"",dizzy_face:"",do_not_litter:"",dog:"",dog2:"",dollar:"",dolls:"",dolphin:"",door:"",doughnut:"",dove:"",dragon:"",dragon_face:"",dress:"",dromedary_camel:"",drooling_face:"",droplet:"",drum:"",duck:"",dvd:"","e-mail":"",eagle:"",ear:"",ear_of_rice:"",earth_africa:"",earth_americas:"",earth_asia:"",egg:"",eggplant:"",eight_pointed_black_star:"",eight_spoked_asterisk:"",electric_plug:"",elephant:"",email:"",end:"",envelope_with_arrow:"",euro:"",european_castle:"",european_post_office:"",evergreen_tree:"",exclamation:"",expressionless:"",eye:"",eye_speech_bubble:"&zwj;",eyeglasses:"",eyes:"",face_with_head_bandage:"",face_with_thermometer:"",fist_oncoming:"",factory:"",fallen_leaf:"",family_man_woman_boy:"",family_man_boy:"&zwj;",family_man_boy_boy:"&zwj;&zwj;",family_man_girl:"&zwj;",family_man_girl_boy:"&zwj;&zwj;",family_man_girl_girl:"&zwj;&zwj;",family_man_man_boy:"&zwj;&zwj;",family_man_man_boy_boy:"&zwj;&zwj;&zwj;",family_man_man_girl:"&zwj;&zwj;",family_man_man_girl_boy:"&zwj;&zwj;&zwj;",family_man_man_girl_girl:"&zwj;&zwj;&zwj;",family_man_woman_boy_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl:"&zwj;&zwj;",family_man_woman_girl_boy:"&zwj;&zwj;&zwj;",family_man_woman_girl_girl:"&zwj;&zwj;&zwj;",family_woman_boy:"&zwj;",family_woman_boy_boy:"&zwj;&zwj;",family_woman_girl:"&zwj;",family_woman_girl_boy:"&zwj;&zwj;",family_woman_girl_girl:"&zwj;&zwj;",family_woman_woman_boy:"&zwj;&zwj;",family_woman_woman_boy_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl:"&zwj;&zwj;",family_woman_woman_girl_boy:"&zwj;&zwj;&zwj;",family_woman_woman_girl_girl:"&zwj;&zwj;&zwj;",fast_forward:"",fax:"",fearful:"",feet:"",female_detective:"&zwj;",ferris_wheel:"",ferry:"",field_hockey:"",file_cabinet:"",file_folder:"",film_projector:"",film_strip:"",fire:"",fire_engine:"",fireworks:"",first_quarter_moon:"",first_quarter_moon_with_face:"",fish:"",fish_cake:"",fishing_pole_and_fish:"",fist_raised:"",fist_left:"",fist_right:"",flags:"",flashlight:"",fleur_de_lis:"",flight_arrival:"",flight_departure:"",floppy_disk:"",flower_playing_cards:"",flushed:"",fog:"",foggy:"",football:"",footprints:"",fork_and_knife:"",fountain:"",fountain_pen:"",four_leaf_clover:"",fox_face:"",framed_picture:"",free:"",fried_egg:"",fried_shrimp:"",fries:"",frog:"",frowning:"",frowning_face:"",frowning_man:"&zwj;",frowning_woman:"",middle_finger:"",fuelpump:"",full_moon:"",full_moon_with_face:"",funeral_urn:"",game_die:"",gear:"",gem:"",gemini:"",ghost:"",gift:"",gift_heart:"",girl:"",globe_with_meridians:"",goal_net:"",goat:"",golf:"",golfing_man:"",golfing_woman:"&zwj;",gorilla:"",grapes:"",green_apple:"",green_book:"",green_heart:"",green_salad:"",grey_exclamation:"",grey_question:"",grimacing:"",grin:"",grinning:"",guardsman:"",guardswoman:"&zwj;",guitar:"",gun:"",haircut_woman:"",haircut_man:"&zwj;",hamburger:"",hammer:"",hammer_and_pick:"",hammer_and_wrench:"",hamster:"",hand:"",handbag:"",handshake:"",hankey:"",hatched_chick:"",hatching_chick:"",headphones:"",hear_no_evil:"",heart:"",heart_decoration:"",heart_eyes:"",heart_eyes_cat:"",heartbeat:"",heartpulse:"",hearts:"",heavy_check_mark:"",heavy_division_sign:"",heavy_dollar_sign:"",heavy_heart_exclamation:"",heavy_minus_sign:"",heavy_multiplication_x:"",heavy_plus_sign:"",helicopter:"",herb:"",hibiscus:"",high_brightness:"",high_heel:"",hocho:"",hole:"",honey_pot:"",horse:"",horse_racing:"",hospital:"",hot_pepper:"",hotdog:"",hotel:"",hotsprings:"",hourglass:"",hourglass_flowing_sand:"",house:"",house_with_garden:"",houses:"",hugs:"",hushed:"",ice_cream:"",ice_hockey:"",ice_skate:"",icecream:"",id:"",ideograph_advantage:"",imp:"",inbox_tray:"",incoming_envelope:"",tipping_hand_woman:"",information_source:"",innocent:"",interrobang:"",iphone:"",izakaya_lantern:"",jack_o_lantern:"",japan:"",japanese_castle:"",japanese_goblin:"",japanese_ogre:"",jeans:"",joy:"",joy_cat:"",joystick:"",kaaba:"",key:"",keyboard:"",keycap_ten:"",kick_scooter:"",kimono:"",kiss:"",kissing:"",kissing_cat:"",kissing_closed_eyes:"",kissing_heart:"",kissing_smiling_eyes:"",kiwi_fruit:"",koala:"",koko:"",label:"",large_blue_circle:"",large_blue_diamond:"",large_orange_diamond:"",last_quarter_moon:"",last_quarter_moon_with_face:"",latin_cross:"",laughing:"",leaves:"",ledger:"",left_luggage:"",left_right_arrow:"",leftwards_arrow_with_hook:"",lemon:"",leo:"",leopard:"",level_slider:"",libra:"",light_rail:"",link:"",lion:"",lips:"",lipstick:"",lizard:"",lock:"",lock_with_ink_pen:"",lollipop:"",loop:"",loud_sound:"",loudspeaker:"",love_hotel:"",love_letter:"",low_brightness:"",lying_face:"",m:"",mag:"",mag_right:"",mahjong:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",man:"",man_artist:"&zwj;",man_astronaut:"&zwj;",man_cartwheeling:"&zwj;",man_cook:"&zwj;",man_dancing:"",man_facepalming:"&zwj;",man_factory_worker:"&zwj;",man_farmer:"&zwj;",man_firefighter:"&zwj;",man_health_worker:"&zwj;",man_in_tuxedo:"",man_judge:"&zwj;",man_juggling:"&zwj;",man_mechanic:"&zwj;",man_office_worker:"&zwj;",man_pilot:"&zwj;",man_playing_handball:"&zwj;",man_playing_water_polo:"&zwj;",man_scientist:"&zwj;",man_shrugging:"&zwj;",man_singer:"&zwj;",man_student:"&zwj;",man_teacher:"&zwj;",man_technologist:"&zwj;",man_with_gua_pi_mao:"",man_with_turban:"",tangerine:"",mans_shoe:"",mantelpiece_clock:"",maple_leaf:"",martial_arts_uniform:"",mask:"",massage_woman:"",massage_man:"&zwj;",meat_on_bone:"",medal_military:"",medal_sports:"",mega:"",melon:"",memo:"",men_wrestling:"&zwj;",menorah:"",mens:"",metal:"",metro:"",microphone:"",microscope:"",milk_glass:"",milky_way:"",minibus:"",minidisc:"",mobile_phone_off:"",money_mouth_face:"",money_with_wings:"",moneybag:"",monkey:"",monkey_face:"",monorail:"",moon:"",mortar_board:"",mosque:"",motor_boat:"",motor_scooter:"",motorcycle:"",motorway:"",mount_fuji:"",mountain:"",mountain_biking_man:"",mountain_biking_woman:"&zwj;",mountain_cableway:"",mountain_railway:"",mountain_snow:"",mouse:"",mouse2:"",movie_camera:"",moyai:"",mrs_claus:"",muscle:"",mushroom:"",musical_keyboard:"",musical_note:"",musical_score:"",mute:"",nail_care:"",name_badge:"",national_park:"",nauseated_face:"",necktie:"",negative_squared_cross_mark:"",nerd_face:"",neutral_face:"",new:"",new_moon:"",new_moon_with_face:"",newspaper:"",newspaper_roll:"",next_track_button:"",ng:"",no_good_man:"&zwj;",no_good_woman:"",night_with_stars:"",no_bell:"",no_bicycles:"",no_entry:"",no_entry_sign:"",no_mobile_phones:"",no_mouth:"",no_pedestrians:"",no_smoking:"","non-potable_water":"",nose:"",notebook:"",notebook_with_decorative_cover:"",notes:"",nut_and_bolt:"",o:"",o2:"",ocean:"",octopus:"",oden:"",office:"",oil_drum:"",ok:"",ok_hand:"",ok_man:"&zwj;",ok_woman:"",old_key:"",older_man:"",older_woman:"",om:"",on:"",oncoming_automobile:"",oncoming_bus:"",oncoming_police_car:"",oncoming_taxi:"",open_file_folder:"",open_hands:"",open_mouth:"",open_umbrella:"",ophiuchus:"",orange_book:"",orthodox_cross:"",outbox_tray:"",owl:"",ox:"",package:"",page_facing_up:"",page_with_curl:"",pager:"",paintbrush:"",palm_tree:"",pancakes:"",panda_face:"",paperclip:"",paperclips:"",parasol_on_ground:"",parking:"",part_alternation_mark:"",partly_sunny:"",passenger_ship:"",passport_control:"",pause_button:"",peace_symbol:"",peach:"",peanuts:"",pear:"",pen:"",pencil2:"",penguin:"",pensive:"",performing_arts:"",persevere:"",person_fencing:"",pouting_woman:"",phone:"",pick:"",pig:"",pig2:"",pig_nose:"",pill:"",pineapple:"",ping_pong:"",pisces:"",pizza:"",place_of_worship:"",plate_with_cutlery:"",play_or_pause_button:"",point_down:"",point_left:"",point_right:"",point_up:"",point_up_2:"",police_car:"",policewoman:"&zwj;",poodle:"",popcorn:"",post_office:"",postal_horn:"",postbox:"",potable_water:"",potato:"",pouch:"",poultry_leg:"",pound:"",rage:"",pouting_cat:"",pouting_man:"&zwj;",pray:"",prayer_beads:"",pregnant_woman:"",previous_track_button:"",prince:"",princess:"",printer:"",purple_heart:"",purse:"",pushpin:"",put_litter_in_its_place:"",question:"",rabbit:"",rabbit2:"",racehorse:"",racing_car:"",radio:"",radio_button:"",radioactive:"",railway_car:"",railway_track:"",rainbow:"",rainbow_flag:"&zwj;",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",raised_hands:"",raising_hand_woman:"",raising_hand_man:"&zwj;",ram:"",ramen:"",rat:"",record_button:"",recycle:"",red_circle:"",registered:"",relaxed:"",relieved:"",reminder_ribbon:"",repeat:"",repeat_one:"",rescue_worker_helmet:"",restroom:"",revolving_hearts:"",rewind:"",rhinoceros:"",ribbon:"",rice:"",rice_ball:"",rice_cracker:"",rice_scene:"",right_anger_bubble:"",ring:"",robot:"",rocket:"",rofl:"",roll_eyes:"",roller_coaster:"",rooster:"",rose:"",rosette:"",rotating_light:"",round_pushpin:"",rowing_man:"",rowing_woman:"&zwj;",rugby_football:"",running_man:"",running_shirt_with_sash:"",running_woman:"&zwj;",sa:"",sagittarius:"",sake:"",sandal:"",santa:"",satellite:"",saxophone:"",school:"",school_satchel:"",scissors:"",scorpion:"",scorpius:"",scream:"",scream_cat:"",scroll:"",seat:"",secret:"",see_no_evil:"",seedling:"",selfie:"",shallow_pan_of_food:"",shamrock:"",shark:"",shaved_ice:"",sheep:"",shell:"",shield:"",shinto_shrine:"",ship:"",shirt:"",shopping:"",shopping_cart:"",shower:"",shrimp:"",signal_strength:"",six_pointed_star:"",ski:"",skier:"",skull:"",skull_and_crossbones:"",sleeping:"",sleeping_bed:"",sleepy:"",slightly_frowning_face:"",slightly_smiling_face:"",slot_machine:"",small_airplane:"",small_blue_diamond:"",small_orange_diamond:"",small_red_triangle:"",small_red_triangle_down:"",smile:"",smile_cat:"",smiley:"",smiley_cat:"",smiling_imp:"",smirk:"",smirk_cat:"",smoking:"",snail:"",snake:"",sneezing_face:"",snowboarder:"",snowflake:"",snowman:"",snowman_with_snow:"",sob:"",soccer:"",soon:"",sos:"",sound:"",space_invader:"",spades:"",spaghetti:"",sparkle:"",sparkler:"",sparkles:"",sparkling_heart:"",speak_no_evil:"",speaker:"",speaking_head:"",speech_balloon:"",speedboat:"",spider:"",spider_web:"",spiral_calendar:"",spiral_notepad:"",spoon:"",squid:"",stadium:"",star:"",star2:"",star_and_crescent:"",star_of_david:"",stars:"",station:"",statue_of_liberty:"",steam_locomotive:"",stew:"",stop_button:"",stop_sign:"",stopwatch:"",straight_ruler:"",strawberry:"",stuck_out_tongue:"",stuck_out_tongue_closed_eyes:"",stuck_out_tongue_winking_eye:"",studio_microphone:"",stuffed_flatbread:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",sun_behind_small_cloud:"",sun_with_face:"",sunflower:"",sunglasses:"",sunny:"",sunrise:"",sunrise_over_mountains:"",surfing_man:"",surfing_woman:"&zwj;",sushi:"",suspension_railway:"",sweat:"",sweat_drops:"",sweat_smile:"",sweet_potato:"",swimming_man:"",swimming_woman:"&zwj;",symbols:"",synagogue:"",syringe:"",taco:"",tada:"",tanabata_tree:"",taurus:"",taxi:"",tea:"",telephone_receiver:"",telescope:"",tennis:"",tent:"",thermometer:"",thinking:"",thought_balloon:"",ticket:"",tickets:"",tiger:"",tiger2:"",timer_clock:"",tipping_hand_man:"&zwj;",tired_face:"",tm:"",toilet:"",tokyo_tower:"",tomato:"",tongue:"",top:"",tophat:"",tornado:"",trackball:"",tractor:"",traffic_light:"",train:"",train2:"",tram:"",triangular_flag_on_post:"",triangular_ruler:"",trident:"",triumph:"",trolleybus:"",trophy:"",tropical_drink:"",tropical_fish:"",truck:"",trumpet:"",tulip:"",tumbler_glass:"",turkey:"",turtle:"",tv:"",twisted_rightwards_arrows:"",two_hearts:"",two_men_holding_hands:"",two_women_holding_hands:"",u5272:"",u5408:"",u55b6:"",u6307:"",u6708:"",u6709:"",u6e80:"",u7121:"",u7533:"",u7981:"",u7a7a:"",umbrella:"",unamused:"",underage:"",unicorn:"",unlock:"",up:"",upside_down_face:"",v:"",vertical_traffic_light:"",vhs:"",vibration_mode:"",video_camera:"",video_game:"",violin:"",virgo:"",volcano:"",volleyball:"",vs:"",vulcan_salute:"",walking_man:"",walking_woman:"&zwj;",waning_crescent_moon:"",waning_gibbous_moon:"",warning:"",wastebasket:"",watch:"",water_buffalo:"",watermelon:"",wave:"",wavy_dash:"",waxing_crescent_moon:"",wc:"",weary:"",wedding:"",weight_lifting_man:"",weight_lifting_woman:"&zwj;",whale:"",whale2:"",wheel_of_dharma:"",wheelchair:"",white_check_mark:"",white_circle:"",white_flag:"",white_flower:"",white_large_square:"",white_medium_small_square:"",white_medium_square:"",white_small_square:"",white_square_button:"",wilted_flower:"",wind_chime:"",wind_face:"",wine_glass:"",wink:"",wolf:"",woman:"",woman_artist:"&zwj;",woman_astronaut:"&zwj;",woman_cartwheeling:"&zwj;",woman_cook:"&zwj;",woman_facepalming:"&zwj;",woman_factory_worker:"&zwj;",woman_farmer:"&zwj;",woman_firefighter:"&zwj;",woman_health_worker:"&zwj;",woman_judge:"&zwj;",woman_juggling:"&zwj;",woman_mechanic:"&zwj;",woman_office_worker:"&zwj;",woman_pilot:"&zwj;",woman_playing_handball:"&zwj;",woman_playing_water_polo:"&zwj;",woman_scientist:"&zwj;",woman_shrugging:"&zwj;",woman_singer:"&zwj;",woman_student:"&zwj;",woman_teacher:"&zwj;",woman_technologist:"&zwj;",woman_with_turban:"&zwj;",womans_clothes:"",womans_hat:"",women_wrestling:"&zwj;",womens:"",world_map:"",worried:"",wrench:"",writing_hand:"",x:"",yellow_heart:"",yen:"",yin_yang:"",yum:"",zap:"",zipper_mouth_face:"",zzz:"",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(y){var E={},b=[],T=[],A={},x=c,k={parsed:{},raw:"",format:""};I();function I(){y=y||{};for(var C in l)l.hasOwnProperty(C)&&(E[C]=l[C]);if(typeof y=="object")for(var q in y)y.hasOwnProperty(q)&&(E[q]=y[q]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof y+" was passed instead.");E.extensions&&r.helper.forEach(E.extensions,B)}function B(C,q){if(q=q||null,r.helper.isString(C))if(C=r.helper.stdExtName(C),q=C,r.extensions[C]){console.warn("DEPRECATION WARNING: "+C+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),P(r.extensions[C],C);return}else if(!r.helper.isUndefined(o[C]))C=o[C];else throw Error('Extension "'+C+'" could not be loaded. It was either not found or is not a valid extension.');typeof C=="function"&&(C=C()),r.helper.isArray(C)||(C=[C]);var Y=h(C,q);if(!Y.valid)throw Error(Y.error);for(var W=0;W<C.length;++W){switch(C[W].type){case"lang":b.push(C[W]);break;case"output":T.push(C[W]);break}if(C[W].hasOwnProperty("listeners"))for(var U in C[W].listeners)C[W].listeners.hasOwnProperty(U)&&M(U,C[W].listeners[U])}}function P(C,q){typeof C=="function"&&(C=C(new r.Converter)),r.helper.isArray(C)||(C=[C]);var Y=h(C,q);if(!Y.valid)throw Error(Y.error);for(var W=0;W<C.length;++W)switch(C[W].type){case"lang":b.push(C[W]);break;case"output":T.push(C[W]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function M(C,q){if(!r.helper.isString(C))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof C+" given");if(typeof q!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof q+" given");A.hasOwnProperty(C)||(A[C]=[]),A[C].push(q)}function K(C){var q=C.match(/^\s*/)[0].length,Y=new RegExp("^\\s{0,"+q+"}","gm");return C.replace(Y,"")}this._dispatch=function(q,Y,W,U){if(A.hasOwnProperty(q))for(var Q=0;Q<A[q].length;++Q){var ne=A[q][Q](q,Y,this,W,U);ne&&typeof ne<"u"&&(Y=ne)}return Y},this.listen=function(C,q){return M(C,q),this},this.makeHtml=function(C){if(!C)return C;var q={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:b,outputModifiers:T,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return C=C.replace(//g,"T"),C=C.replace(/\$/g,"D"),C=C.replace(/\r\n/g,`
`),C=C.replace(/\r/g,`
`),C=C.replace(/\u00A0/g,"&nbsp;"),E.smartIndentationFix&&(C=K(C)),C=`

`+C+`

`,C=r.subParser("detab")(C,E,q),C=C.replace(/^[ \t]+$/mg,""),r.helper.forEach(b,function(Y){C=r.subParser("runExtension")(Y,C,E,q)}),C=r.subParser("metadata")(C,E,q),C=r.subParser("hashPreCodeTags")(C,E,q),C=r.subParser("githubCodeBlocks")(C,E,q),C=r.subParser("hashHTMLBlocks")(C,E,q),C=r.subParser("hashCodeTags")(C,E,q),C=r.subParser("stripLinkDefinitions")(C,E,q),C=r.subParser("blockGamut")(C,E,q),C=r.subParser("unhashHTMLSpans")(C,E,q),C=r.subParser("unescapeSpecialChars")(C,E,q),C=C.replace(/D/g,"$$"),C=C.replace(/T/g,""),C=r.subParser("completeHTMLDocument")(C,E,q),r.helper.forEach(T,function(Y){C=r.subParser("runExtension")(Y,C,E,q)}),k=q.metadata,C},this.makeMarkdown=this.makeMd=function(C,q){if(C=C.replace(/\r\n/g,`
`),C=C.replace(/\r/g,`
`),C=C.replace(/>[ \t]+</,">NBSP;<"),!q)if(window&&window.document)q=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var Y=q.createElement("div");Y.innerHTML=C;var W={preList:te(Y)};J(Y);for(var U=Y.childNodes,Q="",ne=0;ne<U.length;ne++)Q+=r.subParser("makeMarkdown.node")(U[ne],W);function J(oe){for(var ce=0;ce<oe.childNodes.length;++ce){var fe=oe.childNodes[ce];fe.nodeType===3?!/\S/.test(fe.nodeValue)&&!/^[ ]+$/.test(fe.nodeValue)?(oe.removeChild(fe),--ce):(fe.nodeValue=fe.nodeValue.split(`
`).join(" "),fe.nodeValue=fe.nodeValue.replace(/(\s)+/g,"$1")):fe.nodeType===1&&J(fe)}}function te(oe){for(var ce=oe.querySelectorAll("pre"),fe=[],me=0;me<ce.length;++me)if(ce[me].childElementCount===1&&ce[me].firstChild.tagName.toLowerCase()==="code"){var be=ce[me].firstChild.innerHTML.trim(),Ce=ce[me].firstChild.getAttribute("data-language")||"";if(Ce==="")for(var Qe=ce[me].firstChild.className.split(" "),Ze=0;Ze<Qe.length;++Ze){var Ve=Qe[Ze].match(/^language-(.+)$/);if(Ve!==null){Ce=Ve[1];break}}be=r.helper.unescapeHTMLEntities(be),fe.push(be),ce[me].outerHTML='<precode language="'+Ce+'" precodenum="'+me.toString()+'"></precode>'}else fe.push(ce[me].innerHTML),ce[me].innerHTML="",ce[me].setAttribute("prenum",me.toString());return fe}return Q},this.setOption=function(C,q){E[C]=q},this.getOption=function(C){return E[C]},this.getOptions=function(){return E},this.addExtension=function(C,q){q=q||null,B(C,q)},this.useExtension=function(C){B(C)},this.setFlavor=function(C){if(!f.hasOwnProperty(C))throw Error(C+" flavor was not found");var q=f[C];x=C;for(var Y in q)q.hasOwnProperty(Y)&&(E[Y]=q[Y])},this.getFlavor=function(){return x},this.removeExtension=function(C){r.helper.isArray(C)||(C=[C]);for(var q=0;q<C.length;++q){for(var Y=C[q],W=0;W<b.length;++W)b[W]===Y&&b.splice(W,1);for(var U=0;U<T.length;++U)T[U]===Y&&T.splice(U,1)}},this.getAllExtensions=function(){return{language:b,output:T}},this.getMetadata=function(C){return C?k.raw:k.parsed},this.getMetadataFormat=function(){return k.format},this._setMetadataPair=function(C,q){k.parsed[C]=q},this._setMetadataFormat=function(C){k.format=C},this._setMetadataRaw=function(C){k.raw=C}},r.subParser("anchors",function(y,E,b){y=b.converter._dispatch("anchors.before",y,E,b);var T=function(A,x,k,I,B,P,M){if(r.helper.isUndefined(M)&&(M=""),k=k.toLowerCase(),A.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)I="";else if(!I)if(k||(k=x.toLowerCase().replace(/ ?\n/g," ")),I="#"+k,!r.helper.isUndefined(b.gUrls[k]))I=b.gUrls[k],r.helper.isUndefined(b.gTitles[k])||(M=b.gTitles[k]);else return A;I=I.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var K='<a href="'+I+'"';return M!==""&&M!==null&&(M=M.replace(/"/g,"&quot;"),M=M.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),K+=' title="'+M+'"'),E.openLinksInNewWindow&&!/^#/.test(I)&&(K+=' rel="noopener noreferrer" target="E95Eblank"'),K+=">"+x+"</a>",K};return y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,T),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,T),y=y.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,T),y=y.replace(/\[([^\[\]]+)]()()()()()/g,T),E.ghMentions&&(y=y.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(A,x,k,I,B){if(k==="\\")return x+I;if(!r.helper.isString(E.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var P=E.ghMentionsLink.replace(/\{u}/g,B),M="";return E.openLinksInNewWindow&&(M=' rel="noopener noreferrer" target="E95Eblank"'),x+'<a href="'+P+'"'+M+">"+I+"</a>"})),y=b.converter._dispatch("anchors.after",y,E,b),y});var w=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,R=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,O=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,V=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,z=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,j=function(y){return function(E,b,T,A,x,k,I){T=T.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var B=T,P="",M="",K=b||"",C=I||"";return/^www\./i.test(T)&&(T=T.replace(/^www\./i,"http://www.")),y.excludeTrailingPunctuationFromURLs&&k&&(P=k),y.openLinksInNewWindow&&(M=' rel="noopener noreferrer" target="E95Eblank"'),K+'<a href="'+T+'"'+M+">"+B+"</a>"+P+C}},F=function(y,E){return function(b,T,A){var x="mailto:";return T=T||"",A=r.subParser("unescapeSpecialChars")(A,y,E),y.encodeEmails?(x=r.helper.encodeEmailAddress(x+A),A=r.helper.encodeEmailAddress(A)):x=x+A,T+'<a href="'+x+'">'+A+"</a>"}};r.subParser("autoLinks",function(y,E,b){return y=b.converter._dispatch("autoLinks.before",y,E,b),y=y.replace(O,j(E)),y=y.replace(z,F(E,b)),y=b.converter._dispatch("autoLinks.after",y,E,b),y}),r.subParser("simplifiedAutoLinks",function(y,E,b){return E.simplifiedAutoLink&&(y=b.converter._dispatch("simplifiedAutoLinks.before",y,E,b),E.excludeTrailingPunctuationFromURLs?y=y.replace(R,j(E)):y=y.replace(w,j(E)),y=y.replace(V,F(E,b)),y=b.converter._dispatch("simplifiedAutoLinks.after",y,E,b)),y}),r.subParser("blockGamut",function(y,E,b){return y=b.converter._dispatch("blockGamut.before",y,E,b),y=r.subParser("blockQuotes")(y,E,b),y=r.subParser("headers")(y,E,b),y=r.subParser("horizontalRule")(y,E,b),y=r.subParser("lists")(y,E,b),y=r.subParser("codeBlocks")(y,E,b),y=r.subParser("tables")(y,E,b),y=r.subParser("hashHTMLBlocks")(y,E,b),y=r.subParser("paragraphs")(y,E,b),y=b.converter._dispatch("blockGamut.after",y,E,b),y}),r.subParser("blockQuotes",function(y,E,b){y=b.converter._dispatch("blockQuotes.before",y,E,b),y=y+`

`;var T=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return E.splitAdjacentBlockquotes&&(T=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),y=y.replace(T,function(A){return A=A.replace(/^[ \t]*>[ \t]?/gm,""),A=A.replace(/0/g,""),A=A.replace(/^[ \t]+$/gm,""),A=r.subParser("githubCodeBlocks")(A,E,b),A=r.subParser("blockGamut")(A,E,b),A=A.replace(/(^|\n)/g,"$1  "),A=A.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(x,k){var I=k;return I=I.replace(/^  /mg,"0"),I=I.replace(/0/g,""),I}),r.subParser("hashBlock")(`<blockquote>
`+A+`
</blockquote>`,E,b)}),y=b.converter._dispatch("blockQuotes.after",y,E,b),y}),r.subParser("codeBlocks",function(y,E,b){y=b.converter._dispatch("codeBlocks.before",y,E,b),y+="0";var T=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;return y=y.replace(T,function(A,x,k){var I=x,B=k,P=`
`;return I=r.subParser("outdent")(I,E,b),I=r.subParser("encodeCode")(I,E,b),I=r.subParser("detab")(I,E,b),I=I.replace(/^\n+/g,""),I=I.replace(/\n+$/g,""),E.omitExtraWLInCodeBlocks&&(P=""),I="<pre><code>"+I+P+"</code></pre>",r.subParser("hashBlock")(I,E,b)+B}),y=y.replace(/0/,""),y=b.converter._dispatch("codeBlocks.after",y,E,b),y}),r.subParser("codeSpans",function(y,E,b){return y=b.converter._dispatch("codeSpans.before",y,E,b),typeof y>"u"&&(y=""),y=y.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(T,A,x,k){var I=k;return I=I.replace(/^([ \t]*)/g,""),I=I.replace(/[ \t]*$/g,""),I=r.subParser("encodeCode")(I,E,b),I=A+"<code>"+I+"</code>",I=r.subParser("hashHTMLSpans")(I,E,b),I}),y=b.converter._dispatch("codeSpans.after",y,E,b),y}),r.subParser("completeHTMLDocument",function(y,E,b){if(!E.completeHTMLDocument)return y;y=b.converter._dispatch("completeHTMLDocument.before",y,E,b);var T="html",A=`<!DOCTYPE HTML>
`,x="",k=`<meta charset="utf-8">
`,I="",B="";typeof b.metadata.parsed.doctype<"u"&&(A="<!DOCTYPE "+b.metadata.parsed.doctype+`>
`,T=b.metadata.parsed.doctype.toString().toLowerCase(),(T==="html"||T==="html5")&&(k='<meta charset="utf-8">'));for(var P in b.metadata.parsed)if(b.metadata.parsed.hasOwnProperty(P))switch(P.toLowerCase()){case"doctype":break;case"title":x="<title>"+b.metadata.parsed.title+`</title>
`;break;case"charset":T==="html"||T==="html5"?k='<meta charset="'+b.metadata.parsed.charset+`">
`:k='<meta name="charset" content="'+b.metadata.parsed.charset+`">
`;break;case"language":case"lang":I=' lang="'+b.metadata.parsed[P]+'"',B+='<meta name="'+P+'" content="'+b.metadata.parsed[P]+`">
`;break;default:B+='<meta name="'+P+'" content="'+b.metadata.parsed[P]+`">
`}return y=A+"<html"+I+`>
<head>
`+x+k+B+`</head>
<body>
`+y.trim()+`
</body>
</html>`,y=b.converter._dispatch("completeHTMLDocument.after",y,E,b),y}),r.subParser("detab",function(y,E,b){return y=b.converter._dispatch("detab.before",y,E,b),y=y.replace(/\t(?=\t)/g,"    "),y=y.replace(/\t/g,"AB"),y=y.replace(/B(.+?)A/g,function(T,A){for(var x=A,k=4-x.length%4,I=0;I<k;I++)x+=" ";return x}),y=y.replace(/A/g,"    "),y=y.replace(/B/g,""),y=b.converter._dispatch("detab.after",y,E,b),y}),r.subParser("ellipsis",function(y,E,b){return E.ellipsis&&(y=b.converter._dispatch("ellipsis.before",y,E,b),y=y.replace(/\.\.\./g,""),y=b.converter._dispatch("ellipsis.after",y,E,b)),y}),r.subParser("emoji",function(y,E,b){if(!E.emoji)return y;y=b.converter._dispatch("emoji.before",y,E,b);var T=/:([\S]+?):/g;return y=y.replace(T,function(A,x){return r.helper.emojis.hasOwnProperty(x)?r.helper.emojis[x]:A}),y=b.converter._dispatch("emoji.after",y,E,b),y}),r.subParser("encodeAmpsAndAngles",function(y,E,b){return y=b.converter._dispatch("encodeAmpsAndAngles.before",y,E,b),y=y.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),y=y.replace(/<(?![a-z\/?$!])/gi,"&lt;"),y=y.replace(/</g,"&lt;"),y=y.replace(/>/g,"&gt;"),y=b.converter._dispatch("encodeAmpsAndAngles.after",y,E,b),y}),r.subParser("encodeBackslashEscapes",function(y,E,b){return y=b.converter._dispatch("encodeBackslashEscapes.before",y,E,b),y=y.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),y=y.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),y=b.converter._dispatch("encodeBackslashEscapes.after",y,E,b),y}),r.subParser("encodeCode",function(y,E,b){return y=b.converter._dispatch("encodeCode.before",y,E,b),y=y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),y=b.converter._dispatch("encodeCode.after",y,E,b),y}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(y,E,b){y=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",y,E,b);var T=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,A=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return y=y.replace(T,function(x){return x.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=y.replace(A,function(x){return x.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),y=b.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",y,E,b),y}),r.subParser("githubCodeBlocks",function(y,E,b){return E.ghCodeBlocks?(y=b.converter._dispatch("githubCodeBlocks.before",y,E,b),y+="0",y=y.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(T,A,x,k){var I=E.omitExtraWLInCodeBlocks?"":`
`;return k=r.subParser("encodeCode")(k,E,b),k=r.subParser("detab")(k,E,b),k=k.replace(/^\n+/g,""),k=k.replace(/\n+$/g,""),k="<pre><code"+(x?' class="'+x+" language-"+x+'"':"")+">"+k+I+"</code></pre>",k=r.subParser("hashBlock")(k,E,b),`

G`+(b.ghCodeBlocks.push({text:T,codeblock:k})-1)+`G

`}),y=y.replace(/0/,""),b.converter._dispatch("githubCodeBlocks.after",y,E,b)):y}),r.subParser("hashBlock",function(y,E,b){return y=b.converter._dispatch("hashBlock.before",y,E,b),y=y.replace(/(^\n+|\n+$)/g,""),y=`

K`+(b.gHtmlBlocks.push(y)-1)+`K

`,y=b.converter._dispatch("hashBlock.after",y,E,b),y}),r.subParser("hashCodeTags",function(y,E,b){y=b.converter._dispatch("hashCodeTags.before",y,E,b);var T=function(A,x,k,I){var B=k+r.subParser("encodeCode")(x,E,b)+I;return"C"+(b.gHtmlSpans.push(B)-1)+"C"};return y=r.helper.replaceRecursiveRegExp(y,T,"<code\\b[^>]*>","</code>","gim"),y=b.converter._dispatch("hashCodeTags.after",y,E,b),y}),r.subParser("hashElement",function(y,E,b){return function(T,A){var x=A;return x=x.replace(/\n\n/g,`
`),x=x.replace(/^\n/,""),x=x.replace(/\n+$/g,""),x=`

K`+(b.gHtmlBlocks.push(x)-1)+`K

`,x}}),r.subParser("hashHTMLBlocks",function(y,E,b){y=b.converter._dispatch("hashHTMLBlocks.before",y,E,b);var T=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],A=function(C,q,Y,W){var U=C;return Y.search(/\bmarkdown\b/)!==-1&&(U=Y+b.converter.makeHtml(q)+W),`

K`+(b.gHtmlBlocks.push(U)-1)+`K

`};E.backslashEscapesHTMLTags&&(y=y.replace(/\\<(\/?[^>]+?)>/g,function(C,q){return"&lt;"+q+"&gt;"}));for(var x=0;x<T.length;++x)for(var k,I=new RegExp("^ {0,3}(<"+T[x]+"\\b[^>]*>)","im"),B="<"+T[x]+"\\b[^>]*>",P="</"+T[x]+">";(k=r.helper.regexIndexOf(y,I))!==-1;){var M=r.helper.splitAtIndex(y,k),K=r.helper.replaceRecursiveRegExp(M[1],A,B,P,"im");if(K===M[1])break;y=M[0].concat(K)}return y=y.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,b)),y=r.helper.replaceRecursiveRegExp(y,function(C){return`

K`+(b.gHtmlBlocks.push(C)-1)+`K

`},"^ {0,3}<!--","-->","gm"),y=y.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(y,E,b)),y=b.converter._dispatch("hashHTMLBlocks.after",y,E,b),y}),r.subParser("hashHTMLSpans",function(y,E,b){y=b.converter._dispatch("hashHTMLSpans.before",y,E,b);function T(A){return"C"+(b.gHtmlSpans.push(A)-1)+"C"}return y=y.replace(/<[^>]+?\/>/gi,function(A){return T(A)}),y=y.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(A){return T(A)}),y=y.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(A){return T(A)}),y=y.replace(/<[^>]+?>/gi,function(A){return T(A)}),y=b.converter._dispatch("hashHTMLSpans.after",y,E,b),y}),r.subParser("unhashHTMLSpans",function(y,E,b){y=b.converter._dispatch("unhashHTMLSpans.before",y,E,b);for(var T=0;T<b.gHtmlSpans.length;++T){for(var A=b.gHtmlSpans[T],x=0;/C(\d+)C/.test(A);){var k=RegExp.$1;if(A=A.replace("C"+k+"C",b.gHtmlSpans[k]),x===10){console.error("maximum nesting of 10 spans reached!!!");break}++x}y=y.replace("C"+T+"C",A)}return y=b.converter._dispatch("unhashHTMLSpans.after",y,E,b),y}),r.subParser("hashPreCodeTags",function(y,E,b){y=b.converter._dispatch("hashPreCodeTags.before",y,E,b);var T=function(A,x,k,I){var B=k+r.subParser("encodeCode")(x,E,b)+I;return`

G`+(b.ghCodeBlocks.push({text:A,codeblock:B})-1)+`G

`};return y=r.helper.replaceRecursiveRegExp(y,T,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),y=b.converter._dispatch("hashPreCodeTags.after",y,E,b),y}),r.subParser("headers",function(y,E,b){y=b.converter._dispatch("headers.before",y,E,b);var T=isNaN(parseInt(E.headerLevelStart))?1:parseInt(E.headerLevelStart),A=E.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,x=E.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;y=y.replace(A,function(B,P){var M=r.subParser("spanGamut")(P,E,b),K=E.noHeaderId?"":' id="'+I(P)+'"',C=T,q="<h"+C+K+">"+M+"</h"+C+">";return r.subParser("hashBlock")(q,E,b)}),y=y.replace(x,function(B,P){var M=r.subParser("spanGamut")(P,E,b),K=E.noHeaderId?"":' id="'+I(P)+'"',C=T+1,q="<h"+C+K+">"+M+"</h"+C+">";return r.subParser("hashBlock")(q,E,b)});var k=E.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;y=y.replace(k,function(B,P,M){var K=M;E.customizedHeaderId&&(K=M.replace(/\s?\{([^{]+?)}\s*$/,""));var C=r.subParser("spanGamut")(K,E,b),q=E.noHeaderId?"":' id="'+I(M)+'"',Y=T-1+P.length,W="<h"+Y+q+">"+C+"</h"+Y+">";return r.subParser("hashBlock")(W,E,b)});function I(B){var P,M;if(E.customizedHeaderId){var K=B.match(/\{([^{]+?)}\s*$/);K&&K[1]&&(B=K[1])}return P=B,r.helper.isString(E.prefixHeaderId)?M=E.prefixHeaderId:E.prefixHeaderId===!0?M="section-":M="",E.rawPrefixHeaderId||(P=M+P),E.ghCompatibleHeaderId?P=P.replace(/ /g,"-").replace(/&amp;/g,"").replace(/T/g,"").replace(/D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():E.rawHeaderId?P=P.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/T/g,"").replace(/D/g,"$").replace(/["']/g,"-").toLowerCase():P=P.replace(/[^\w]/g,"").toLowerCase(),E.rawPrefixHeaderId&&(P=M+P),b.hashLinkCounts[P]?P=P+"-"+b.hashLinkCounts[P]++:b.hashLinkCounts[P]=1,P}return y=b.converter._dispatch("headers.after",y,E,b),y}),r.subParser("horizontalRule",function(y,E,b){y=b.converter._dispatch("horizontalRule.before",y,E,b);var T=r.subParser("hashBlock")("<hr />",E,b);return y=y.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,T),y=y.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,T),y=y.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,T),y=b.converter._dispatch("horizontalRule.after",y,E,b),y}),r.subParser("images",function(y,E,b){y=b.converter._dispatch("images.before",y,E,b);var T=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,A=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,x=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,k=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,I=/!\[([^\[\]]+)]()()()()()/g;function B(M,K,C,q,Y,W,U,Q){return q=q.replace(/\s/g,""),P(M,K,C,q,Y,W,U,Q)}function P(M,K,C,q,Y,W,U,Q){var ne=b.gUrls,J=b.gTitles,te=b.gDimensions;if(C=C.toLowerCase(),Q||(Q=""),M.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)q="";else if(q===""||q===null)if((C===""||C===null)&&(C=K.toLowerCase().replace(/ ?\n/g," ")),q="#"+C,!r.helper.isUndefined(ne[C]))q=ne[C],r.helper.isUndefined(J[C])||(Q=J[C]),r.helper.isUndefined(te[C])||(Y=te[C].width,W=te[C].height);else return M;K=K.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),q=q.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var oe='<img src="'+q+'" alt="'+K+'"';return Q&&r.helper.isString(Q)&&(Q=Q.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),oe+=' title="'+Q+'"'),Y&&W&&(Y=Y==="*"?"auto":Y,W=W==="*"?"auto":W,oe+=' width="'+Y+'"',oe+=' height="'+W+'"'),oe+=" />",oe}return y=y.replace(k,P),y=y.replace(x,B),y=y.replace(A,P),y=y.replace(T,P),y=y.replace(I,P),y=b.converter._dispatch("images.after",y,E,b),y}),r.subParser("italicsAndBold",function(y,E,b){y=b.converter._dispatch("italicsAndBold.before",y,E,b);function T(A,x,k){return x+A+k}return E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(A,x){return T(x,"<strong><em>","</em></strong>")}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(A,x){return T(x,"<strong>","</strong>")}),y=y.replace(/\b_(\S[\s\S]*?)_\b/g,function(A,x){return T(x,"<em>","</em>")})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(A,x){return/\S$/.test(x)?T(x,"<strong><em>","</em></strong>"):A}),y=y.replace(/__(\S[\s\S]*?)__/g,function(A,x){return/\S$/.test(x)?T(x,"<strong>","</strong>"):A}),y=y.replace(/_([^\s_][\s\S]*?)_/g,function(A,x){return/\S$/.test(x)?T(x,"<em>","</em>"):A})),E.literalMidWordAsterisks?(y=y.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(A,x,k){return T(k,x+"<strong><em>","</em></strong>")}),y=y.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(A,x,k){return T(k,x+"<strong>","</strong>")}),y=y.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(A,x,k){return T(k,x+"<em>","</em>")})):(y=y.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(A,x){return/\S$/.test(x)?T(x,"<strong><em>","</em></strong>"):A}),y=y.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(A,x){return/\S$/.test(x)?T(x,"<strong>","</strong>"):A}),y=y.replace(/\*([^\s*][\s\S]*?)\*/g,function(A,x){return/\S$/.test(x)?T(x,"<em>","</em>"):A})),y=b.converter._dispatch("italicsAndBold.after",y,E,b),y}),r.subParser("lists",function(y,E,b){function T(k,I){b.gListLevel++,k=k.replace(/\n{2,}$/,`
`),k+="0";var B=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,P=/\n[ \t]*\n(?!0)/.test(k);return E.disableForced4SpacesIndentedSublists&&(B=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm),k=k.replace(B,function(M,K,C,q,Y,W,U){U=U&&U.trim()!=="";var Q=r.subParser("outdent")(Y,E,b),ne="";return W&&E.tasklists&&(ne=' class="task-list-item" style="list-style-type: none;"',Q=Q.replace(/^[ \t]*\[(x|X| )?]/m,function(){var J='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return U&&(J+=" checked"),J+=">",J})),Q=Q.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(J){return"A"+J}),K||Q.search(/\n{2,}/)>-1?(Q=r.subParser("githubCodeBlocks")(Q,E,b),Q=r.subParser("blockGamut")(Q,E,b)):(Q=r.subParser("lists")(Q,E,b),Q=Q.replace(/\n$/,""),Q=r.subParser("hashHTMLBlocks")(Q,E,b),Q=Q.replace(/\n\n+/g,`

`),P?Q=r.subParser("paragraphs")(Q,E,b):Q=r.subParser("spanGamut")(Q,E,b)),Q=Q.replace("A",""),Q="<li"+ne+">"+Q+`</li>
`,Q}),k=k.replace(/0/g,""),b.gListLevel--,I&&(k=k.replace(/\s+$/,"")),k}function A(k,I){if(I==="ol"){var B=k.match(/^ *(\d+)\./);if(B&&B[1]!=="1")return' start="'+B[1]+'"'}return""}function x(k,I,B){var P=E.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,M=E.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,K=I==="ul"?P:M,C="";if(k.search(K)!==-1)(function Y(W){var U=W.search(K),Q=A(k,I);U!==-1?(C+=`

<`+I+Q+`>
`+T(W.slice(0,U),!!B)+"</"+I+`>
`,I=I==="ul"?"ol":"ul",K=I==="ul"?P:M,Y(W.slice(U))):C+=`

<`+I+Q+`>
`+T(W,!!B)+"</"+I+`>
`})(k);else{var q=A(k,I);C=`

<`+I+q+`>
`+T(k,!!B)+"</"+I+`>
`}return C}return y=b.converter._dispatch("lists.before",y,E,b),y+="0",b.gListLevel?y=y.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,I,B){var P=B.search(/[*+-]/g)>-1?"ul":"ol";return x(I,P,!0)}):y=y.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(k,I,B,P){var M=P.search(/[*+-]/g)>-1?"ul":"ol";return x(B,M,!1)}),y=y.replace(/0/,""),y=b.converter._dispatch("lists.after",y,E,b),y}),r.subParser("metadata",function(y,E,b){if(!E.metadata)return y;y=b.converter._dispatch("metadata.before",y,E,b);function T(A){b.metadata.raw=A,A=A.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),A=A.replace(/\n {4}/g," "),A.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(x,k,I){return b.metadata.parsed[k]=I,""})}return y=y.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/,function(A,x,k){return T(k),"M"}),y=y.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(A,x,k){return x&&(b.metadata.format=x),T(k),"M"}),y=y.replace(/M/g,""),y=b.converter._dispatch("metadata.after",y,E,b),y}),r.subParser("outdent",function(y,E,b){return y=b.converter._dispatch("outdent.before",y,E,b),y=y.replace(/^(\t|[ ]{1,4})/gm,"0"),y=y.replace(/0/g,""),y=b.converter._dispatch("outdent.after",y,E,b),y}),r.subParser("paragraphs",function(y,E,b){y=b.converter._dispatch("paragraphs.before",y,E,b),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,"");for(var T=y.split(/\n{2,}/g),A=[],x=T.length,k=0;k<x;k++){var I=T[k];I.search(/(K|G)(\d+)\1/g)>=0?A.push(I):I.search(/\S/)>=0&&(I=r.subParser("spanGamut")(I,E,b),I=I.replace(/^([ \t]*)/g,"<p>"),I+="</p>",A.push(I))}for(x=A.length,k=0;k<x;k++){for(var B="",P=A[k],M=!1;/(K|G)(\d+)\1/.test(P);){var K=RegExp.$1,C=RegExp.$2;K==="K"?B=b.gHtmlBlocks[C]:M?B=r.subParser("encodeCode")(b.ghCodeBlocks[C].text,E,b):B=b.ghCodeBlocks[C].codeblock,B=B.replace(/\$/g,"$$$$"),P=P.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/,B),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(P)&&(M=!0)}A[k]=P}return y=A.join(`
`),y=y.replace(/^\n+/g,""),y=y.replace(/\n+$/g,""),b.converter._dispatch("paragraphs.after",y,E,b)}),r.subParser("runExtension",function(y,E,b,T){if(y.filter)E=y.filter(E,T.converter,b);else if(y.regex){var A=y.regex;A instanceof RegExp||(A=new RegExp(A,"g")),E=E.replace(A,y.replace)}return E}),r.subParser("spanGamut",function(y,E,b){return y=b.converter._dispatch("spanGamut.before",y,E,b),y=r.subParser("codeSpans")(y,E,b),y=r.subParser("escapeSpecialCharsWithinTagAttributes")(y,E,b),y=r.subParser("encodeBackslashEscapes")(y,E,b),y=r.subParser("images")(y,E,b),y=r.subParser("anchors")(y,E,b),y=r.subParser("autoLinks")(y,E,b),y=r.subParser("simplifiedAutoLinks")(y,E,b),y=r.subParser("emoji")(y,E,b),y=r.subParser("underline")(y,E,b),y=r.subParser("italicsAndBold")(y,E,b),y=r.subParser("strikethrough")(y,E,b),y=r.subParser("ellipsis")(y,E,b),y=r.subParser("hashHTMLSpans")(y,E,b),y=r.subParser("encodeAmpsAndAngles")(y,E,b),E.simpleLineBreaks?/\n\nK/.test(y)||(y=y.replace(/\n+/g,`<br />
`)):y=y.replace(/  +\n/g,`<br />
`),y=b.converter._dispatch("spanGamut.after",y,E,b),y}),r.subParser("strikethrough",function(y,E,b){function T(A){return E.simplifiedAutoLink&&(A=r.subParser("simplifiedAutoLinks")(A,E,b)),"<del>"+A+"</del>"}return E.strikethrough&&(y=b.converter._dispatch("strikethrough.before",y,E,b),y=y.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(A,x){return T(x)}),y=b.converter._dispatch("strikethrough.after",y,E,b)),y}),r.subParser("stripLinkDefinitions",function(y,E,b){var T=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm,A=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;y+="0";var x=function(k,I,B,P,M,K,C){return I=I.toLowerCase(),y.toLowerCase().split(I).length-1<2?k:(B.match(/^data:.+?\/.+?;base64,/)?b.gUrls[I]=B.replace(/\s/g,""):b.gUrls[I]=r.subParser("encodeAmpsAndAngles")(B,E,b),K?K+C:(C&&(b.gTitles[I]=C.replace(/"|'/g,"&quot;")),E.parseImgDimensions&&P&&M&&(b.gDimensions[I]={width:P,height:M}),""))};return y=y.replace(A,x),y=y.replace(T,x),y=y.replace(/0/,""),y}),r.subParser("tables",function(y,E,b){if(!E.tables)return y;var T=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm,A=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;function x(M){return/^:[ \t]*--*$/.test(M)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(M)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(M)?' style="text-align:center;"':""}function k(M,K){var C="";return M=M.trim(),(E.tablesHeaderId||E.tableHeaderId)&&(C=' id="'+M.replace(/ /g,"_").toLowerCase()+'"'),M=r.subParser("spanGamut")(M,E,b),"<th"+C+K+">"+M+`</th>
`}function I(M,K){var C=r.subParser("spanGamut")(M,E,b);return"<td"+K+">"+C+`</td>
`}function B(M,K){for(var C=`<table>
<thead>
<tr>
`,q=M.length,Y=0;Y<q;++Y)C+=M[Y];for(C+=`</tr>
</thead>
<tbody>
`,Y=0;Y<K.length;++Y){C+=`<tr>
`;for(var W=0;W<q;++W)C+=K[Y][W];C+=`</tr>
`}return C+=`</tbody>
</table>
`,C}function P(M){var K,C=M.split(`
`);for(K=0;K<C.length;++K)/^ {0,3}\|/.test(C[K])&&(C[K]=C[K].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(C[K])&&(C[K]=C[K].replace(/\|[ \t]*$/,"")),C[K]=r.subParser("codeSpans")(C[K],E,b);var q=C[0].split("|").map(function(oe){return oe.trim()}),Y=C[1].split("|").map(function(oe){return oe.trim()}),W=[],U=[],Q=[],ne=[];for(C.shift(),C.shift(),K=0;K<C.length;++K)C[K].trim()!==""&&W.push(C[K].split("|").map(function(oe){return oe.trim()}));if(q.length<Y.length)return M;for(K=0;K<Y.length;++K)Q.push(x(Y[K]));for(K=0;K<q.length;++K)r.helper.isUndefined(Q[K])&&(Q[K]=""),U.push(k(q[K],Q[K]));for(K=0;K<W.length;++K){for(var J=[],te=0;te<U.length;++te)r.helper.isUndefined(W[K][te]),J.push(I(W[K][te],Q[te]));ne.push(J)}return B(U,ne)}return y=b.converter._dispatch("tables.before",y,E,b),y=y.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),y=y.replace(T,P),y=y.replace(A,P),y=b.converter._dispatch("tables.after",y,E,b),y}),r.subParser("underline",function(y,E,b){return E.underline&&(y=b.converter._dispatch("underline.before",y,E,b),E.literalMidWordUnderscores?(y=y.replace(/\b___(\S[\s\S]*?)___\b/g,function(T,A){return"<u>"+A+"</u>"}),y=y.replace(/\b__(\S[\s\S]*?)__\b/g,function(T,A){return"<u>"+A+"</u>"})):(y=y.replace(/___(\S[\s\S]*?)___/g,function(T,A){return/\S$/.test(A)?"<u>"+A+"</u>":T}),y=y.replace(/__(\S[\s\S]*?)__/g,function(T,A){return/\S$/.test(A)?"<u>"+A+"</u>":T})),y=y.replace(/(_)/g,r.helper.escapeCharactersCallback),y=b.converter._dispatch("underline.after",y,E,b)),y}),r.subParser("unescapeSpecialChars",function(y,E,b){return y=b.converter._dispatch("unescapeSpecialChars.before",y,E,b),y=y.replace(/E(\d+)E/g,function(T,A){var x=parseInt(A);return String.fromCharCode(x)}),y=b.converter._dispatch("unescapeSpecialChars.after",y,E,b),y}),r.subParser("makeMarkdown.blockquote",function(y,E){var b="";if(y.hasChildNodes())for(var T=y.childNodes,A=T.length,x=0;x<A;++x){var k=r.subParser("makeMarkdown.node")(T[x],E);k!==""&&(b+=k)}return b=b.trim(),b="> "+b.split(`
`).join(`
> `),b}),r.subParser("makeMarkdown.codeBlock",function(y,E){var b=y.getAttribute("language"),T=y.getAttribute("precodenum");return"```"+b+`
`+E.preList[T]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(y){return"`"+y.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(y,E){var b="";if(y.hasChildNodes()){b+="*";for(var T=y.childNodes,A=T.length,x=0;x<A;++x)b+=r.subParser("makeMarkdown.node")(T[x],E);b+="*"}return b}),r.subParser("makeMarkdown.header",function(y,E,b){var T=new Array(b+1).join("#"),A="";if(y.hasChildNodes()){A=T+" ";for(var x=y.childNodes,k=x.length,I=0;I<k;++I)A+=r.subParser("makeMarkdown.node")(x[I],E)}return A}),r.subParser("makeMarkdown.hr",function(){return"---"}),r.subParser("makeMarkdown.image",function(y){var E="";return y.hasAttribute("src")&&(E+="!["+y.getAttribute("alt")+"](",E+="<"+y.getAttribute("src")+">",y.hasAttribute("width")&&y.hasAttribute("height")&&(E+=" ="+y.getAttribute("width")+"x"+y.getAttribute("height")),y.hasAttribute("title")&&(E+=' "'+y.getAttribute("title")+'"'),E+=")"),E}),r.subParser("makeMarkdown.links",function(y,E){var b="";if(y.hasChildNodes()&&y.hasAttribute("href")){var T=y.childNodes,A=T.length;b="[";for(var x=0;x<A;++x)b+=r.subParser("makeMarkdown.node")(T[x],E);b+="](",b+="<"+y.getAttribute("href")+">",y.hasAttribute("title")&&(b+=' "'+y.getAttribute("title")+'"'),b+=")"}return b}),r.subParser("makeMarkdown.list",function(y,E,b){var T="";if(!y.hasChildNodes())return"";for(var A=y.childNodes,x=A.length,k=y.getAttribute("start")||1,I=0;I<x;++I)if(!(typeof A[I].tagName>"u"||A[I].tagName.toLowerCase()!=="li")){var B="";b==="ol"?B=k.toString()+". ":B="- ",T+=B+r.subParser("makeMarkdown.listItem")(A[I],E),++k}return T+=`
<!-- -->
`,T.trim()}),r.subParser("makeMarkdown.listItem",function(y,E){for(var b="",T=y.childNodes,A=T.length,x=0;x<A;++x)b+=r.subParser("makeMarkdown.node")(T[x],E);return/\n$/.test(b)?b=b.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):b+=`
`,b}),r.subParser("makeMarkdown.node",function(y,E,b){b=b||!1;var T="";if(y.nodeType===3)return r.subParser("makeMarkdown.txt")(y,E);if(y.nodeType===8)return"<!--"+y.data+`-->

`;if(y.nodeType!==1)return"";var A=y.tagName.toLowerCase();switch(A){case"h1":b||(T=r.subParser("makeMarkdown.header")(y,E,1)+`

`);break;case"h2":b||(T=r.subParser("makeMarkdown.header")(y,E,2)+`

`);break;case"h3":b||(T=r.subParser("makeMarkdown.header")(y,E,3)+`

`);break;case"h4":b||(T=r.subParser("makeMarkdown.header")(y,E,4)+`

`);break;case"h5":b||(T=r.subParser("makeMarkdown.header")(y,E,5)+`

`);break;case"h6":b||(T=r.subParser("makeMarkdown.header")(y,E,6)+`

`);break;case"p":b||(T=r.subParser("makeMarkdown.paragraph")(y,E)+`

`);break;case"blockquote":b||(T=r.subParser("makeMarkdown.blockquote")(y,E)+`

`);break;case"hr":b||(T=r.subParser("makeMarkdown.hr")(y,E)+`

`);break;case"ol":b||(T=r.subParser("makeMarkdown.list")(y,E,"ol")+`

`);break;case"ul":b||(T=r.subParser("makeMarkdown.list")(y,E,"ul")+`

`);break;case"precode":b||(T=r.subParser("makeMarkdown.codeBlock")(y,E)+`

`);break;case"pre":b||(T=r.subParser("makeMarkdown.pre")(y,E)+`

`);break;case"table":b||(T=r.subParser("makeMarkdown.table")(y,E)+`

`);break;case"code":T=r.subParser("makeMarkdown.codeSpan")(y,E);break;case"em":case"i":T=r.subParser("makeMarkdown.emphasis")(y,E);break;case"strong":case"b":T=r.subParser("makeMarkdown.strong")(y,E);break;case"del":T=r.subParser("makeMarkdown.strikethrough")(y,E);break;case"a":T=r.subParser("makeMarkdown.links")(y,E);break;case"img":T=r.subParser("makeMarkdown.image")(y,E);break;default:T=y.outerHTML+`

`}return T}),r.subParser("makeMarkdown.paragraph",function(y,E){var b="";if(y.hasChildNodes())for(var T=y.childNodes,A=T.length,x=0;x<A;++x)b+=r.subParser("makeMarkdown.node")(T[x],E);return b=b.trim(),b}),r.subParser("makeMarkdown.pre",function(y,E){var b=y.getAttribute("prenum");return"<pre>"+E.preList[b]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(y,E){var b="";if(y.hasChildNodes()){b+="~~";for(var T=y.childNodes,A=T.length,x=0;x<A;++x)b+=r.subParser("makeMarkdown.node")(T[x],E);b+="~~"}return b}),r.subParser("makeMarkdown.strong",function(y,E){var b="";if(y.hasChildNodes()){b+="**";for(var T=y.childNodes,A=T.length,x=0;x<A;++x)b+=r.subParser("makeMarkdown.node")(T[x],E);b+="**"}return b}),r.subParser("makeMarkdown.table",function(y,E){var b="",T=[[],[]],A=y.querySelectorAll("thead>tr>th"),x=y.querySelectorAll("tbody>tr"),k,I;for(k=0;k<A.length;++k){var B=r.subParser("makeMarkdown.tableCell")(A[k],E),P="---";if(A[k].hasAttribute("style")){var M=A[k].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(M){case"text-align:left;":P=":---";break;case"text-align:right;":P="---:";break;case"text-align:center;":P=":---:";break}}T[0][k]=B.trim(),T[1][k]=P}for(k=0;k<x.length;++k){var K=T.push([])-1,C=x[k].getElementsByTagName("td");for(I=0;I<A.length;++I){var q=" ";typeof C[I]<"u"&&(q=r.subParser("makeMarkdown.tableCell")(C[I],E)),T[K].push(q)}}var Y=3;for(k=0;k<T.length;++k)for(I=0;I<T[k].length;++I){var W=T[k][I].length;W>Y&&(Y=W)}for(k=0;k<T.length;++k){for(I=0;I<T[k].length;++I)k===1?T[k][I].slice(-1)===":"?T[k][I]=r.helper.padEnd(T[k][I].slice(-1),Y-1,"-")+":":T[k][I]=r.helper.padEnd(T[k][I],Y,"-"):T[k][I]=r.helper.padEnd(T[k][I],Y);b+="| "+T[k].join(" | ")+` |
`}return b.trim()}),r.subParser("makeMarkdown.tableCell",function(y,E){var b="";if(!y.hasChildNodes())return"";for(var T=y.childNodes,A=T.length,x=0;x<A;++x)b+=r.subParser("makeMarkdown.node")(T[x],E,!0);return b.trim()}),r.subParser("makeMarkdown.txt",function(y){var E=y.nodeValue;return E=E.replace(/ +/g," "),E=E.replace(/NBSP;/g," "),E=r.helper.unescapeHTMLEntities(E),E=E.replace(/([*_~|`])/g,"\\$1"),E=E.replace(/^(\s*)>/g,"\\$1>"),E=E.replace(/^#/gm,"\\#"),E=E.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),E=E.replace(/^( {0,3}\d+)\./gm,"$1\\."),E=E.replace(/^( {0,3})([+-])/gm,"$1\\$2"),E=E.replace(/]([\s]*)\(/g,"\\]$1\\("),E=E.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),E});var X=this;t.exports?t.exports=r:X.showdown=r}).call(fH)}(rp)),rp.exports}var pH=hH();const mH=Vv(pH),gH=new mH.Converter({tables:!0,strikethrough:!0,emoji:!0,underline:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,openLinksInNewWindow:!0,backslashEscapesHTMLTags:!0,ghCodeBlocks:!0,tasklists:!0});function mr(t){return t?gH.makeHtml(t):""}const yH=async(t,e,n)=>{let r="";if(!Array.isArray(e)||e.length===0)return console.warn(`Layout ${t}: Empty or invalid content array`),{html:`<div class="layout-error">
                <div class="error-icon"></div>
                <div class="error-message">No content available</div>
            </div>`};try{switch(t){case 1:r=await e2(e,n);break;case 2:r=await vH(e,n);break;case 3:r=await _H(e,n);break;case 4:r=await wH(e,n);break;case 5:r=await bH(e,n);break;case 6:r=await EH(e,n);break;case 7:r=await TH(e,n);break;case 8:r=await SH(e,n);break;case 9:r=await AH(e,n);break;case 12:r=await xH(e,n);break;case 13:r=await CH(e,n);break;case 14:r=await RH(e,n);break;case 15:r=await kH(e,n);break;case 16:r=await IH(e,n);break;case 17:r=await NH(e,n);break;case 18:r=await DH(e,n);break;default:console.warn(`Layout ${t} not implemented, falling back to layout 1`),r=await e2(e,n)}if(!r||r.trim().length===0)throw new Error("Layout parser returned empty HTML")}catch(s){console.error(`Error parsing layout ${t}:`,s),r=`
            <div class="layout-error">
                <div class="error-icon"></div>
                <div class="error-message">
                    <strong>Layout Error</strong><br>
                    Unable to render content for layout ${t}
                </div>
                <div class="error-details">
                    ${s instanceof Error?s.message:"Unknown error occurred"}
                </div>
            </div>
        `}return{html:r}};async function e2(t,e){const[n,r,s]=t;let o=`
        <div class="layout-1">
            <div class="layout-header">
                <h2 class="layout-title">${n||"Educational Topic"}</h2>
                <div class="layout-textbar">${mr(r||"Content description")}</div>
            </div>
    `;return Array.isArray(s)&&s.length>0&&(o+='<div class="layout-images">',(await Promise.all(s.map(c=>si(c).catch(()=>null)))).forEach((c,f)=>{c?o+=`
                    <div class="layout-image-wrapper">
                        <img class="layout-small-image" src="${c}" alt="Illustration ${f+1}" loading="lazy" />
                    </div>
                `:o+=`
                    <div class="layout-image-wrapper">
                        <div class="image-error">
                            <span class="error-icon"></span>
                            <span>Image ${f+1} unavailable</span>
                        </div>
                    </div>
                `}),o+="</div>"),o+=`
        </div>
    `,o}async function vH(t,e){let n='<div class="layout-2">',r=[];if(t.length>0&&Array.isArray(t[0]))r=t.filter(l=>Array.isArray(l)&&l.length>=2);else for(let l=0;l<t.length;l+=2)l+1<t.length&&r.push([t[l],t[l+1]]);if(r.length===0)return n+=`
            <div class="layout-error">
                <div class="error-icon"></div>
                <div class="error-message">No image-caption pairs found</div>
            </div>
        `,n+="</div>",n;const s=r.map(async([l,c])=>{try{return{url:await si(l),caption:c,error:null}}catch(f){return{url:null,caption:c,error:f instanceof Error?f.message:"Unknown error"}}});return(await Promise.all(s)).forEach(({url:l,caption:c,error:f},h)=>{n+=`
            <div class="layout-image-caption">
        `,l?n+=`
                <div class="layout-image-wrapper">
                    <img class="layout-image" src="${l}" alt="Educational image ${h+1}" loading="lazy" />
                </div>
            `:n+=`
                <div class="layout-image-wrapper">
                    <div class="image-error">
                        <div class="error-icon"></div>
                        <span class="error-message">Image ${h+1} unavailable</span>
                        ${f?`<span class="error-details">${f}</span>`:""}
                    </div>
                </div>
            `,n+=`
                <div class="layout-caption-wrapper">
                    <p class="layout-caption">${mr(c)}</p>
                </div>
            </div>
        `}),n+="</div>",n}async function _H(t,e){const[n,r]=t;let o=`
        <div class="layout-3">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading diagram...</div>
            <div class="layout-description">${mr(r||"")}</div>
        </div>
    `;try{const l=await Sm(n);o=o.replace("Loading diagram...",l.outerHTML)}catch{o=o.replace("Loading diagram...",'<div class="mermaid-error">Error loading diagram</div>')}return o}async function wH(t,e){const[n,r]=t;let o=`
        <div class="layout-4">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading mindmap...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const l=await Sm(n);o=o.replace("Loading mindmap...",l.outerHTML)}catch{o=o.replace("Loading mindmap...",'<div class="mermaid-error">Error loading mindmap</div>')}return o}async function bH(t,e){const[n,r]=t;let o=`
        <div class="layout-5">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading piechart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const l=await Sm(n);o=o.replace("Loading piechart...",l.outerHTML)}catch{o=o.replace("Loading piechart...",'<div class="mermaid-error">Error loading piechart</div>')}return o}async function EH(t,e){const[n,r]=t;let o=`
        <div class="layout-6">
            <div id="${`mermaid-${e}`}" class="layout-mermaid">Loading quadrant chart...</div>
            <p class="layout-description">${r||""}</p>
        </div>
    `;try{const l=await Sm(n);o=o.replace("Loading quadrant chart...",l.outerHTML)}catch{o=o.replace("Loading quadrant chart...",'<div class="mermaid-error">Error loading quadrant chart</div>')}return o}async function TH(t,e){const[n,r,s,o,l]=t,c=`img-${e}`;try{const f=await si(n);return`
            <div class="layout-7">
                <div class="layout-visual-section">
                    <img id="${c}" class="layout-featured-image" src="${f}" alt="Featured Visual" />
                </div>
                <div class="layout-content-section">
                    <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    <div class="layout-educational-content">
                        ${s?`<p class="layout-paragraph">${s}</p>`:""}
                        ${o?`<p class="layout-paragraph">${o}</p>`:""}
                        ${l?`<p class="layout-paragraph">${l}</p>`:""}
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-7">
                <div class="layout-visual-section">
                    <div class="image-error">Error loading featured image</div>
                </div>
                <div class="layout-content-section">
                    <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    <div class="layout-educational-content">
                        ${s?`<p class="layout-paragraph">${s}</p>`:""}
                        ${o?`<p class="layout-paragraph">${o}</p>`:""}
                        ${l?`<p class="layout-paragraph">${l}</p>`:""}
                    </div>
                </div>
            </div>
        `}}async function SH(t,e){const[n,r,s]=t,o=`img-main-${e}`;try{const l=await si(n);let c=`
            <div class="layout-8">
                <div class="layout-primary-content">
                    <div class="layout-content-header">
                        <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    </div>
        `;return Array.isArray(s)&&s.length>0&&(c+='<div class="layout-thumbnail-grid">',(await Promise.all(s.map(h=>si(h).catch(()=>null)))).forEach((h,m)=>{h?c+=`
                        <div class="layout-thumbnail-wrapper">
                            <img class="layout-thumbnail-image" src="${h}" alt="Detail ${m+1}" loading="lazy" />
                        </div>
                    `:c+=`
                        <div class="layout-thumbnail-wrapper">
                            <div class="thumbnail-error">
                                <span></span>
                            </div>
                        </div>
                    `}),c+="</div>"),c+=`
                </div>
                <div class="layout-hero-visual">
                    <img id="${o}" class="layout-hero-image" src="${l}" alt="Main Visual" loading="lazy" />
                </div>
            </div>
        `,c}catch(l){console.error("Layout 8 error:",l);let c=`
            <div class="layout-8">
                <div class="layout-primary-content">
                    <div class="layout-content-header">
                        <h2 class="layout-title">${r||"Educational Topic"}</h2>
                    </div>
        `;return Array.isArray(s)&&s.length>0&&(c+=`
                <div class="layout-thumbnail-grid">
                    ${s.map((f,h)=>`
                        <div class="layout-thumbnail-wrapper">
                            <div class="thumbnail-error">
                                <span class="error-icon"></span>
                                <span class="error-text">Error ${h+1}</span>
                            </div>
                        </div>
                    `).join("")}
                </div>
            `),c+=`
                </div>
                <div class="layout-hero-visual">
                    <div class="image-error">
                        <div class="error-icon"></div>
                        <span>Main image unavailable</span>
                    </div>
                </div>
            </div>
        `,c}}async function AH(t,e){const[n,r]=t,s=`video-${e}`;try{const o=await Fk(n),l=qk(o);return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <iframe src="${l}" frameborder="0" allowfullscreen></iframe>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}catch{return`
            <div class="layout-9">
                <div id="${s}" class="layout-video">
                    <div class="video-error">Error loading video</div>
                </div>
                <p class="layout-caption">${r||""}</p>
            </div>
        `}}async function xH(t,e){const[n,r]=t,s=`illustration-${e}`;try{const o=await si(n);let l=`
            <div class="layout-12">
                <div class="layout-hero-section">
                    <div class="layout-central-visual">
                        <img id="${s}" class="layout-hero-image" src="${o}" alt="Educational Illustration" />
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?l+=`
                <div class="layout-text-content">
                    <p class="layout-description">${mr(r)}</p>
                </div>
            `:Array.isArray(r)&&(l+='<div class="layout-points-grid">',r.forEach((c,f)=>{const h=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),m=h?h[1]:t2(f),_=h?h[2]:c;l+=`
                    <div class="layout-educational-point">
                        <div class="layout-point-icon">${m}</div>
                        <div class="layout-point-content">
                            <span class="layout-point-text">${mr(_)}</span>
                        </div>
                    </div>
                `}),l+="</div>"),l+=`
                    </div>
                </div>
            </div>
        `,l}catch(o){console.error("Layout 12 error:",o);let l=`
            <div class="layout-12">
                <div class="layout-hero-section">
                    <div class="layout-central-visual">
                        <div class="image-error">
                            <div class="error-icon"></div>
                            <span>Unable to load illustration</span>
                        </div>
                    </div>
                </div>
                <div class="layout-content-section">
                    <div class="layout-educational-content">
        `;return typeof r=="string"?l+=`
                <div class="layout-text-content">
                    <p class="layout-description">${mr(r)}</p>
                </div>
            `:Array.isArray(r)&&(l+='<div class="layout-points-grid">',r.forEach((c,f)=>{const h=c.match(new RegExp("^(\\p{Emoji}|\\p{Symbol})\\s+(.+)$","u")),m=h?h[1]:t2(f),_=h?h[2]:c;l+=`
                    <div class="layout-educational-point">
                        <div class="layout-point-icon">${m}</div>
                        <div class="layout-point-content">
                            <span class="layout-point-text">${mr(_)}</span>
                        </div>
                    </div>
                `}),l+="</div>"),l+=`
                    </div>
                </div>
            </div>
        `,l}}function t2(t){const e=["","","","","","","","","",""];return e[t%e.length]}async function CH(t,e){const[n,r,s]=t,o=`video-${e}`;try{const l=await Fk(s),c=qk(l);return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <iframe src="${c}" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        `}catch{return`
            <div class="layout-13">
                <div class="layout-left">
                    <h2 class="layout-title">${n||"Title"}</h2>
                    <p class="layout-text">${r||""}</p>
                </div>
                <div class="layout-right">
                    <div id="${o}" class="layout-video">
                        <div class="video-error">Error loading video</div>
                    </div>
                </div>
            </div>
        `}}async function RH(t,e){let n='<div class="layout-14">';for(let r=0;r<t.length;r+=2){const s=t[r],o=t[r+1];if(s&&o){const l=r/2,c=l%2===0;try{const f=await si(s);n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <img class="layout-large-image" src="${f}" alt="Section ${l+1}" />
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${o}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-section ${c?"layout-section-normal":"layout-section-reverse"}">
                        <div class="layout-section-image">
                            <div class="image-error">Error loading image</div>
                        </div>
                        <div class="layout-section-content">
                            <p class="layout-text">${o}</p>
                        </div>
                    </div>
                `}}}return n+="</div>",n}async function kH(t,e){let n='<div class="layout-15">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],l=t[r+2];if(s&&o&&l)try{const c=await si(o);n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <img class="layout-timeline-image" src="${c}" alt="Timeline event" />
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${l}</p>
                        </div>
                    </div>
                `}catch{n+=`
                    <div class="layout-timeline-item">
                        <div class="layout-timeline-date">${s}</div>
                        <div class="image-error">Error loading image</div>
                        <div class="layout-timeline-content">
                            <p class="layout-timeline-text">${l}</p>
                        </div>
                    </div>
                `}}return n+="</div>",n}async function IH(t,e){let n='<div class="layout-16">';for(let r=0;r<t.length;r+=3){const s=t[r],o=t[r+1],l=t[r+2];if(s&&o&&l)try{const c=await si(o);n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <img class="layout-card-image" src="${c}" alt="${s}" />
                        <p class="layout-card-description">${l}</p>
                    </div>
                `}catch{n+=`
                    <div class="layout-card">
                        <h3 class="layout-card-title">${s}</h3>
                        <div class="image-error">Error loading image</div>
                        <p class="layout-card-description">${l}</p>
                    </div>
                `}}return n+="</div>",n}async function NH(t,e){const[n,r,s,o,l,c,f]=t;try{const h=await si(o),m=z=>{let j="javascript",F=(z||"").toString();if(F.startsWith("```")){const X=F.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);X?(X[1]&&(j=X[1]),F=X[2]||""):F=F.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else F.includes("def ")||F.includes("import ")||F.includes("print(")?j="python":F.includes("function ")||F.includes("const ")||F.includes("let ")?j="javascript":F.includes("public class ")||F.includes("System.out.println")?j="java":F.includes("#include")||F.includes("int main")?j="cpp":(F.includes("SELECT ")||F.includes("FROM "))&&(j="sql");return(!F||F.trim()==="")&&(F="// No code provided"),{lang:j,cleanCode:F}},{lang:_,cleanCode:w}=m(r),{lang:R,cleanCode:O}=m(c);return`
            <div class="layout-17">
                <h2 class="layout-title">${n||"Code Tutorial"}</h2>
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${_}"><code class="language-${_}">${w}</code></pre>
                    <div class="layout-code-explanation">${mr(s||"")}</div>
                </div>
                <div class="layout-diagram-section">
                    <img class="layout-diagram-image" src="${h}" alt="Architecture Diagram" />
                    <div class="layout-implementation-explanation">${mr(l||"")}</div>
                </div>
                <div class="layout-code-section">
                    <pre class="layout-code-block language-${R}"><code class="language-${R}">${O}</code></pre>
                    <div class="layout-code-explanation">${mr(f||"")}</div>
                </div>
            </div>
        `}catch{return'<div class="layout-17"><div class="error-content">Error loading tutorial content</div></div>'}}async function DH(t,e){const[n,r,s,o,l,c]=t;try{const f=await si(l),h=R=>{let O="javascript",V=(R||"").toString();if(V.startsWith("```")){const z=V.match(/```(\w+)?\n?([\s\S]*?)\n?```$/);z?(z[1]&&(O=z[1]),V=z[2]||""):V=V.replace(/^```\w*\n?/,"").replace(/\n?```$/,"")}else V.includes("def ")||V.includes("import ")||V.includes("print(")?O="python":V.includes("function ")||V.includes("const ")||V.includes("let ")?O="javascript":V.includes("public class ")||V.includes("System.out.println")?O="java":V.includes("#include")||V.includes("int main")?O="cpp":V.includes("SELECT ")||V.includes("FROM ")?O="sql":(V.includes("curl ")||V.includes("GET ")||V.includes("POST "))&&(O="bash");return(!V||V.trim()==="")&&(V="// No code provided"),{lang:O,cleanCode:V}},{lang:m,cleanCode:_}=h(r);return`
            <div class="layout-18">
                <h2 class="layout-title">${n||"API Documentation"}</h2>
                <div class="layout-api-section">
                    <div class="layout-code-container">
                        <pre class="layout-code-block language-${m}"><code class="language-${m}">${_}</code></pre>
                    </div>
                    <div class="layout-documentation">${mr(s||"")}</div>
                </div>
                <div class="layout-usage-section">
                    <h3 class="layout-subtitle">Usage Examples</h3>
                    <div class="layout-usage-examples">${mr(o||"")}</div>
                </div>
                <div class="layout-diagram-section">
                    <img class="layout-api-diagram" src="${f}" alt="API Flow Diagram" />
                    <div class="layout-best-practices">
                        <h3 class="layout-subtitle">Best Practices</h3>
                        ${mr(c||"")}
                    </div>
                </div>
            </div>
        `}catch{return'<div class="layout-18"><div class="error-content">Error loading documentation content</div></div>'}}const Gk=$.createContext(null),Kk=(t,e,n,r,s,o,l,c,f,h,m,_,w,R,O,V)=>{console.log(1);const z=s.find(y=>y.id===e);if(!z)return null;console.log(2);const j=z.data.tokenColors||{};if(console.log(3),!w){const y=t.myConcept||t.word;if(j[y])return console.log(`Token "${y}" is already colored, ignoring click`),null}console.log(4);let F;r==="staticEditable"?F=uS():F=h?VO(h):uS();let X=null;if(w)X=R;else{const y={...j};t.myConcept?y[t.myConcept]=F:y[t.word]=F,o(T=>T.map(A=>A.id===e?{...A,data:{...A.data,tokenColors:y}}:A));const E=LO(n);X=UO(E,t.myConcept||t.word,"Loading...","",F,r,e);const b=BO(e,X.id,F,_);l([{type:"add",item:X}]),c([{type:"add",item:b}])}return X&&(X.data.isLoading=!0,X.data.previousNode=e),w&&o(y=>y.map(E=>E.id===X?.id?{...E,data:{...X.data}}:E)),aH(t.myConcept||t.word,m||"",O||"default",f).then(async y=>{console.log("AI Response received:",y),console.log("Selected layout:",y.layout),console.log("Content array:",y.content),V&&y.layout&&V(y.layout.toString());const{html:E}=await yH(y.layout,y.content,X?.id||"");console.log("Layout HTML generated (first 500 chars):",E.substring(0,500)),console.log("Layout HTML full length:",E.length),o(b=>b.map(T=>{if(T.id===X?.id){const A={...T,data:{...T.data,title:y.title,full_text:y.fullText,suggestions:y.suggestions,layout:y.layout,contents:[E],isLoading:!1,icon:y.icon}};return console.log("Updated node data:",A.data),A}return T}))}).catch(y=>{console.error("Error generating node content:",y),o(E=>E.map(b=>b.id===X?.id?{...b,data:{...b.data,title:t.word,full_text:t.word,suggestions:[],layout:1,contents:[`<div class="error-content">Failed to load content for "${t.word}"</div>`],isLoading:!1,icon:""}}:b))}),F},MH=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s})=>{const[o,l]=he.useState("-999"),c=(f,h,m,_,w,R,O,V,z,j)=>Kk(f,h,m,_,e,s,n,r,o.toString(),w,R,O,V,z,j,l);return L.jsx(Gk.Provider,{value:{handleTokenClick:c,setNodes:s},children:t})},Yk=()=>{const t=$.useContext(Gk);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function PH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const OH=$.forwardRef(PH);function VH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const LH=$.forwardRef(VH);function zH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const jH=$.forwardRef(zH);function UH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const BH=$.forwardRef(UH);function HH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $H=$.forwardRef(HH);function FH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const qH=$.forwardRef(FH);function GH({title:t,titleId:e,...n},r){return $.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?$.createElement("title",{id:e},t):null,$.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const KH=$.forwardRef(GH),ow=$.createContext({});function lw(t){const e=$.useRef(null);return e.current===null&&(e.current=t()),e.current}const uw=typeof window<"u",Xk=uw?$.useLayoutEffect:$.useEffect,Am=$.createContext(null);function cw(t,e){t.indexOf(e)===-1&&t.push(e)}function dw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ts=(t,e,n)=>n>e?e:n<t?t:n;let fw=()=>{};const Ss={},Wk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Qk(t){return typeof t=="object"&&t!==null}const Zk=t=>/^0[^.\s]+$/u.test(t);function hw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Br=t=>t,YH=(t,e)=>n=>e(t(n)),Jd=(...t)=>t.reduce(YH),kd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class pw{constructor(){this.subscriptions=[]}add(e){return cw(this.subscriptions,e),()=>dw(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Oi=t=>t*1e3,Vi=t=>t/1e3;function Jk(t,e){return e?t*(1e3/e):0}const e8=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,XH=1e-7,WH=12;function QH(t,e,n,r,s){let o,l,c=0;do l=e+(n-e)/2,o=e8(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>XH&&++c<WH);return l}function ef(t,e,n,r){if(t===e&&n===r)return Br;const s=o=>QH(o,0,1,t,n);return o=>o===0||o===1?o:e8(s(o),e,r)}const t8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,n8=t=>e=>1-t(1-e),r8=ef(.33,1.53,.69,.99),mw=n8(r8),i8=t8(mw),s8=t=>(t*=2)<1?.5*mw(t):.5*(2-Math.pow(2,-10*(t-1))),gw=t=>1-Math.sin(Math.acos(t)),a8=n8(gw),o8=t8(gw),ZH=ef(.42,0,1,1),JH=ef(0,0,.58,1),l8=ef(.42,0,.58,1),e$=t=>Array.isArray(t)&&typeof t[0]!="number",u8=t=>Array.isArray(t)&&typeof t[0]=="number",t$={linear:Br,easeIn:ZH,easeInOut:l8,easeOut:JH,circIn:gw,circInOut:o8,circOut:a8,backIn:mw,backInOut:i8,backOut:r8,anticipate:s8},n$=t=>typeof t=="string",n2=t=>{if(u8(t)){fw(t.length===4);const[e,n,r,s]=t;return ef(e,n,r,s)}else if(n$(t))return t$[t];return t},Lh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r$(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(m){l.has(m)&&(h.schedule(m),t()),m(c)}const h={schedule:(m,_=!1,w=!1)=>{const O=w&&s?n:r;return _&&l.add(m),O.has(m)||O.add(m),m},cancel:m=>{r.delete(m),l.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(f),n.clear(),s=!1,o&&(o=!1,h.process(m))}};return h}const i$=40;function c8(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Lh.reduce((X,y)=>(X[y]=r$(o),X),{}),{setup:c,read:f,resolveKeyframes:h,preUpdate:m,update:_,preRender:w,render:R,postRender:O}=l,V=()=>{const X=Ss.useManualTiming?s.timestamp:performance.now();n=!1,Ss.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(X-s.timestamp,i$),1)),s.timestamp=X,s.isProcessing=!0,c.process(s),f.process(s),h.process(s),m.process(s),_.process(s),w.process(s),R.process(s),O.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(V))},z=()=>{n=!0,r=!0,s.isProcessing||t(V)};return{schedule:Lh.reduce((X,y)=>{const E=l[y];return X[y]=(b,T=!1,A=!1)=>(n||z(),E.schedule(b,T,A)),X},{}),cancel:X=>{for(let y=0;y<Lh.length;y++)l[Lh[y]].cancel(X)},state:s,steps:l}}const{schedule:Et,cancel:Aa,state:wn,steps:oy}=c8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Br,!0);let ip;function s$(){ip=void 0}const Zn={now:()=>(ip===void 0&&Zn.set(wn.isProcessing||Ss.useManualTiming?wn.timestamp:performance.now()),ip),set:t=>{ip=t,queueMicrotask(s$)}},d8=t=>e=>typeof e=="string"&&e.startsWith(t),yw=d8("--"),a$=d8("var(--"),vw=t=>a$(t)?o$.test(t.split("/*")[0].trim()):!1,o$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Id={...Cu,transform:t=>Ts(0,1,t)},zh={...Cu,default:1},id=t=>Math.round(t*1e5)/1e5,_w=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l$(t){return t==null}const u$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ww=(t,e)=>n=>!!(typeof n=="string"&&u$.test(n)&&n.startsWith(t)||e&&!l$(n)&&Object.prototype.hasOwnProperty.call(n,e)),f8=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(_w);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},c$=t=>Ts(0,255,t),ly={...Cu,transform:t=>Math.round(c$(t))},_o={test:ww("rgb","red"),parse:f8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ly.transform(t)+", "+ly.transform(e)+", "+ly.transform(n)+", "+id(Id.transform(r))+")"};function d$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const gv={test:ww("#"),parse:d$,transform:_o.transform},tf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Js=tf("deg"),Li=tf("%"),Oe=tf("px"),f$=tf("vh"),h$=tf("vw"),r2={...Li,parse:t=>Li.parse(t)/100,transform:t=>Li.transform(t*100)},ql={test:ww("hsl","hue"),parse:f8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Li.transform(id(e))+", "+Li.transform(id(n))+", "+id(Id.transform(r))+")"},Xt={test:t=>_o.test(t)||gv.test(t)||ql.test(t),parse:t=>_o.test(t)?_o.parse(t):ql.test(t)?ql.parse(t):gv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_o.transform(t):ql.transform(t),getAnimatableNone:t=>{const e=Xt.parse(t);return e.alpha=0,Xt.transform(e)}},p$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m$(t){return isNaN(t)&&typeof t=="string"&&(t.match(_w)?.length||0)+(t.match(p$)?.length||0)>0}const h8="number",p8="color",g$="var",y$="var(",i2="${}",v$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(v$,f=>(Xt.test(f)?(r.color.push(o),s.push(p8),n.push(Xt.parse(f))):f.startsWith(y$)?(r.var.push(o),s.push(g$),n.push(f)):(r.number.push(o),s.push(h8),n.push(parseFloat(f))),++o,i2)).split(i2);return{values:n,split:c,indexes:r,types:s}}function m8(t){return Nd(t).values}function g8(t){const{split:e,types:n}=Nd(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=n[l];c===h8?o+=id(s[l]):c===p8?o+=Xt.transform(s[l]):o+=s[l]}return o}}const _$=t=>typeof t=="number"?0:Xt.test(t)?Xt.getAnimatableNone(t):t;function w$(t){const e=m8(t);return g8(t)(e.map(_$))}const xa={test:m$,parse:m8,createTransformer:g8,getAnimatableNone:w$};function uy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function b$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;s=uy(f,c,t+1/3),o=uy(f,c,t),l=uy(f,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function jp(t,e){return n=>n>0?e:t}const xt=(t,e,n)=>t+(e-t)*n,cy=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},E$=[gv,_o,ql],T$=t=>E$.find(e=>e.test(t));function s2(t){const e=T$(t);if(!e)return!1;let n=e.parse(t);return e===ql&&(n=b$(n)),n}const a2=(t,e)=>{const n=s2(t),r=s2(e);if(!n||!r)return jp(t,e);const s={...n};return o=>(s.red=cy(n.red,r.red,o),s.green=cy(n.green,r.green,o),s.blue=cy(n.blue,r.blue,o),s.alpha=xt(n.alpha,r.alpha,o),_o.transform(s))},yv=new Set(["none","hidden"]);function S$(t,e){return yv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function A$(t,e){return n=>xt(t,e,n)}function bw(t){return typeof t=="number"?A$:typeof t=="string"?vw(t)?jp:Xt.test(t)?a2:R$:Array.isArray(t)?y8:typeof t=="object"?Xt.test(t)?a2:x$:jp}function y8(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>bw(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function x$(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=bw(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function C$(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],c=t.values[l]??0;n[s]=c,r[o]++}return n}const R$=(t,e)=>{const n=xa.createTransformer(e),r=Nd(t),s=Nd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?yv.has(t)&&!s.values.length||yv.has(e)&&!r.values.length?S$(t,e):Jd(y8(C$(r,s),s.values),n):jp(t,e)};function v8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xt(t,e,n):bw(t)(t,e)}const k$=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Et.update(e,n),stop:()=>Aa(e),now:()=>wn.isProcessing?wn.timestamp:Zn.now()}},_8=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Up=2e4;function Ew(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Up;)e+=n,r=t.next(e);return e>=Up?1/0:e}function I$(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Ew(r),Up);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Vi(s)}}const N$=5;function w8(t,e,n){const r=Math.max(e-N$,0);return Jk(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dy=.001;function D$({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let s,o,l=1-e;l=Ts(Mt.minDamping,Mt.maxDamping,l),t=Ts(Mt.minDuration,Mt.maxDuration,Vi(t)),l<1?(s=h=>{const m=h*l,_=m*t,w=m-n,R=vv(h,l),O=Math.exp(-_);return dy-w/R*O},o=h=>{const _=h*l*t,w=_*n+n,R=Math.pow(l,2)*Math.pow(h,2)*t,O=Math.exp(-_),V=vv(Math.pow(h,2),l);return(-s(h)+dy>0?-1:1)*((w-R)*O)/V}):(s=h=>{const m=Math.exp(-h*t),_=(h-n)*t+1;return-dy+m*_},o=h=>{const m=Math.exp(-h*t),_=(n-h)*(t*t);return m*_});const c=5/t,f=P$(s,o,c);if(t=Oi(t),isNaN(f))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const M$=12;function P$(t,e,n){let r=n;for(let s=1;s<M$;s++)r=r-t(r)/e(r);return r}function vv(t,e){return t*Math.sqrt(1-e*e)}const O$=["duration","bounce"],V$=["stiffness","damping","mass"];function o2(t,e){return e.some(n=>t[n]!==void 0)}function L$(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!o2(t,V$)&&o2(t,O$))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Ts(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:o}}else{const n=D$(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Bp(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:h,mass:m,duration:_,velocity:w,isResolvedFromDuration:R}=L$({...n,velocity:-Vi(n.velocity||0)}),O=w||0,V=h/(2*Math.sqrt(f*m)),z=l-o,j=Vi(Math.sqrt(f/m)),F=Math.abs(z)<5;r||(r=F?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=F?Mt.restDelta.granular:Mt.restDelta.default);let X;if(V<1){const E=vv(j,V);X=b=>{const T=Math.exp(-V*j*b);return l-T*((O+V*j*z)/E*Math.sin(E*b)+z*Math.cos(E*b))}}else if(V===1)X=E=>l-Math.exp(-j*E)*(z+(O+j*z)*E);else{const E=j*Math.sqrt(V*V-1);X=b=>{const T=Math.exp(-V*j*b),A=Math.min(E*b,300);return l-T*((O+V*j*z)*Math.sinh(A)+E*z*Math.cosh(A))/E}}const y={calculatedDuration:R&&_||null,next:E=>{const b=X(E);if(R)c.done=E>=_;else{let T=E===0?O:0;V<1&&(T=E===0?Oi(O):w8(X,E,b));const A=Math.abs(T)<=r,x=Math.abs(l-b)<=s;c.done=A&&x}return c.value=c.done?l:b,c},toString:()=>{const E=Math.min(Ew(y),Up),b=_8(T=>y.next(E*T).value,E,30);return E+"ms "+b},toTransition:()=>{}};return y}Bp.applyToOptions=t=>{const e=I$(t,100,Bp);return t.ease=e.ease,t.duration=Oi(e.duration),t.type="keyframes",t};function _v({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:h=.5,restSpeed:m}){const _=t[0],w={done:!1,value:_},R=A=>c!==void 0&&A<c||f!==void 0&&A>f,O=A=>c===void 0?f:f===void 0||Math.abs(c-A)<Math.abs(f-A)?c:f;let V=n*e;const z=_+V,j=l===void 0?z:l(z);j!==z&&(V=j-_);const F=A=>-V*Math.exp(-A/r),X=A=>j+F(A),y=A=>{const x=F(A),k=X(A);w.done=Math.abs(x)<=h,w.value=w.done?j:k};let E,b;const T=A=>{R(w.value)&&(E=A,b=Bp({keyframes:[w.value,O(w.value)],velocity:w8(X,A,w.value),damping:s,stiffness:o,restDelta:h,restSpeed:m}))};return T(0),{calculatedDuration:null,next:A=>{let x=!1;return!b&&E===void 0&&(x=!0,y(A),T(A)),E!==void 0&&A>=E?b.next(A-E):(!x&&y(A),w)}}}function z$(t,e,n){const r=[],s=n||Ss.mix||v8,o=t.length-1;for(let l=0;l<o;l++){let c=s(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Br:e;c=Jd(f,c)}r.push(c)}return r}function j$(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(fw(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=z$(e,r,s),f=c.length,h=m=>{if(l&&m<t[0])return e[0];let _=0;if(f>1)for(;_<t.length-2&&!(m<t[_+1]);_++);const w=kd(t[_],t[_+1],m);return c[_](w)};return n?m=>h(Ts(t[0],t[o-1],m)):h}function U$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=kd(0,e,r);t.push(xt(n,1,s))}}function B$(t){const e=[0];return U$(e,t.length-1),e}function H$(t,e){return t.map(n=>n*e)}function $$(t,e){return t.map(()=>e||l8).splice(0,t.length-1)}function sd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=e$(r)?r.map(n2):n2(r),o={done:!1,value:e[0]},l=H$(n&&n.length===e.length?n:B$(e),t),c=j$(l,e,{ease:Array.isArray(s)?s:$$(e,s)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const F$=t=>t!==null;function Tw(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(F$),c=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const q$={decay:_v,inertia:_v,tween:sd,keyframes:sd,spring:Bp};function b8(t){typeof t.type=="string"&&(t.type=q$[t.type])}class Sw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const G$=t=>t/100;class Aw extends Sw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Zn.now()&&this.tick(Zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;b8(e);const{type:n=sd,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const f=n||sd;f!==sd&&typeof c[0]!="number"&&(this.mixKeyframes=Jd(G$,v8(c[0],c[1])),c=[0,100]);const h=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=Ew(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:_,repeatType:w,repeatDelay:R,type:O,onUpdate:V,finalKeyframe:z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-h*(this.playbackSpeed>=0?1:-1),F=this.playbackSpeed>=0?j<0:j>s;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let X=this.currentTime,y=r;if(_){const A=Math.min(this.currentTime,s)/c;let x=Math.floor(A),k=A%1;!k&&A>=1&&(k=1),k===1&&x--,x=Math.min(x,_+1),!!(x%2)&&(w==="reverse"?(k=1-k,R&&(k-=R/c)):w==="mirror"&&(y=l)),X=Ts(0,1,k)*c}const E=F?{done:!1,value:m[0]}:y.next(X);o&&(E.value=o(E.value));let{done:b}=E;!F&&f!==null&&(b=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return T&&O!==_v&&(E.value=Tw(m,this.options,z,this.speed)),V&&V(E.value),T&&this.finish(),E}then(e,n){return this.finished.then(e,n)}get duration(){return Vi(this.calculatedDuration)}get time(){return Vi(this.currentTime)}set time(e){e=Oi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Zn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=k$,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function K$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wo=t=>t*180/Math.PI,wv=t=>{const e=wo(Math.atan2(t[1],t[0]));return bv(e)},Y$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:wv,rotateZ:wv,skewX:t=>wo(Math.atan(t[1])),skewY:t=>wo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bv=t=>(t=t%360,t<0&&(t+=360),t),l2=wv,u2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),c2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),X$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:u2,scaleY:c2,scale:t=>(u2(t)+c2(t))/2,rotateX:t=>bv(wo(Math.atan2(t[6],t[5]))),rotateY:t=>bv(wo(Math.atan2(-t[2],t[0]))),rotateZ:l2,rotate:l2,skewX:t=>wo(Math.atan(t[4])),skewY:t=>wo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ev(t){return t.includes("scale")?1:0}function Tv(t,e){if(!t||t==="none")return Ev(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=X$,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Y$,s=c}if(!s)return Ev(e);const o=r[e],l=s[1].split(",").map(Q$);return typeof o=="function"?o(l):l[o]}const W$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Tv(n,e)};function Q$(t){return parseFloat(t.trim())}const Ru=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ku=new Set(Ru),d2=t=>t===Cu||t===Oe,Z$=new Set(["x","y","z"]),J$=Ru.filter(t=>!Z$.has(t));function eF(t){const e=[];return J$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const To={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Tv(e,"x"),y:(t,{transform:e})=>Tv(e,"y")};To.translateX=To.x;To.translateY=To.y;const So=new Set;let Sv=!1,Av=!1,xv=!1;function E8(){if(Av){const t=Array.from(So).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=eF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Av=!1,Sv=!1,So.forEach(t=>t.complete(xv)),So.clear()}function T8(){So.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Av=!0)})}function tF(){xv=!0,T8(),E8(),xv=!1}class xw{constructor(e,n,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(So.add(this),Sv||(Sv=!0,Et.read(T8),Et.resolveKeyframes(E8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}K$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),So.delete(this)}cancel(){this.state==="scheduled"&&(So.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nF=t=>t.startsWith("--");function rF(t,e,n){nF(e)?t.style.setProperty(e,n):t.style[e]=n}const iF=hw(()=>window.ScrollTimeline!==void 0),sF={};function aF(t,e){const n=hw(t);return()=>sF[e]??n()}const S8=aF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,f2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qc([0,.65,.55,1]),circOut:Qc([.55,0,1,.45]),backIn:Qc([.31,.01,.66,-.59]),backOut:Qc([.33,1.53,.69,.99])};function A8(t,e){if(t)return typeof t=="function"?S8()?_8(t,e):"ease-out":u8(t)?Qc(t):Array.isArray(t)?t.map(n=>A8(n,e)||f2.easeOut):f2[t]}function oF(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:f}={},h=void 0){const m={[e]:n};f&&(m.offset=f);const _=A8(c,s);Array.isArray(_)&&(m.easing=_);const w={delay:r,duration:s,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(w.pseudoElement=h),t.animate(m,w)}function x8(t){return typeof t=="function"&&"applyToOptions"in t}function lF({type:t,...e}){return x8(t)&&S8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class uF extends Sw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,fw(typeof e.type!="string");const h=lF(e);this.animation=oF(n,r,s,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=Tw(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):rF(n,r,m),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Vi(Number(e))}get time(){return Vi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Oi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iF()?(this.animation.timeline=e,Br):n(this)}}const C8={anticipate:s8,backInOut:i8,circInOut:o8};function cF(t){return t in C8}function dF(t){typeof t.ease=="string"&&cF(t.ease)&&(t.ease=C8[t.ease])}const h2=10;class fF extends uF{constructor(e){dF(e),b8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Aw({...l,autoplay:!1}),f=Oi(this.finishedTime??this.time);n.setWithVelocity(c.sample(f-h2).value,c.sample(f).value,h2),c.stop()}}const p2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xa.test(t)||t==="0")&&!t.startsWith("url("));function hF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function pF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=p2(s,e),c=p2(o,e);return!l||!c?!1:hF(t)||(n==="spring"||x8(n))&&r}const mF=new Set(["opacity","clipPath","filter","transform"]),gF=hw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:h}=e.owner.getProps();return gF()&&n&&mF.has(n)&&(n!=="transform"||!h)&&!f&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const vF=40;class _F extends Sw{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:f,motionValue:h,element:m,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Zn.now();const w={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,name:f,motionValue:h,element:m,..._},R=m?.KeyframeResolver||xw;this.keyframeResolver=new R(c,(O,V,z)=>this.onKeyframesResolved(O,V,w,!z),f,h,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:f,isHandoff:h,onUpdate:m}=r;this.resolvedAt=Zn.now(),pF(e,o,l,c)||((Ss.instantAnimations||!f)&&m?.(Tw(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>vF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},R=!h&&yF(w)?new fF({...w,element:w.motionValue.owner.current}):new Aw(w);R.finished.then(()=>this.notifyFinished()).catch(Br),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),tF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const wF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bF(t){const e=wF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function R8(t,e,n=1){const[r,s]=bF(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return Wk(l)?parseFloat(l):l}return vw(s)?R8(s,e,n+1):s}function Cw(t,e){return t?.[e]??t?.default??t}const k8=new Set(["width","height","top","left","right","bottom",...Ru]),EF={test:t=>t==="auto",parse:t=>t},I8=t=>e=>e.test(t),N8=[Cu,Oe,Li,Js,h$,f$,EF],m2=t=>N8.find(I8(t));function TF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Zk(t):!0}const SF=new Set(["brightness","contrast","saturate","opacity"]);function AF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_w)||[];if(!r)return t;const s=n.replace(r,"");let o=SF.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const xF=/\b([a-z-]*)\(.*?\)/gu,Cv={...xa,getAnimatableNone:t=>{const e=t.match(xF);return e?e.map(AF).join(" "):t}},g2={...Cu,transform:Math.round},CF={rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:zh,scaleX:zh,scaleY:zh,scaleZ:zh,skew:Js,skewX:Js,skewY:Js,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Id,originX:r2,originY:r2,originZ:Oe},Rw={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...CF,zIndex:g2,fillOpacity:Id,strokeOpacity:Id,numOctaves:g2},RF={...Rw,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:Cv,WebkitFilter:Cv},D8=t=>RF[t];function M8(t,e){let n=D8(t);return n!==Cv&&(n=xa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kF=new Set(["auto","none","0"]);function IF(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!kF.has(o)&&Nd(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=M8(n,s)}class NF extends xw{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),vw(h))){const m=R8(h,n.current);m!==void 0&&(e[f]=m),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!k8.has(r)||e.length!==2)return;const[s,o]=e,l=m2(s),c=m2(o);if(l!==c)if(d2(l)&&d2(c))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else To[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||TF(e[s]))&&r.push(s);r.length&&IF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=To[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=To[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function DF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const P8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function O8(t){return Qk(t)&&"offsetHeight"in t}const y2=30,MF=t=>!isNaN(parseFloat(t));class PF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Zn.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=MF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new pw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>y2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,y2);return Jk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function yu(t,e){return new PF(t,e)}const{schedule:kw}=c8(queueMicrotask,!1),Qr={x:!1,y:!1};function V8(){return Qr.x||Qr.y}function OF(t){return t==="x"||t==="y"?Qr[t]?null:(Qr[t]=!0,()=>{Qr[t]=!1}):Qr.x||Qr.y?null:(Qr.x=Qr.y=!0,()=>{Qr.x=Qr.y=!1})}function L8(t,e){const n=DF(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function v2(t){return!(t.pointerType==="touch"||V8())}function VF(t,e,n={}){const[r,s,o]=L8(t,n),l=c=>{if(!v2(c))return;const{target:f}=c,h=e(f,c);if(typeof h!="function"||!f)return;const m=_=>{v2(_)&&(h(_),f.removeEventListener("pointerleave",m))};f.addEventListener("pointerleave",m,s)};return r.forEach(c=>{c.addEventListener("pointerenter",l,s)}),o}const z8=(t,e)=>e?t===e?!0:z8(t,e.parentElement):!1,Iw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,LF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zF(t){return LF.has(t.tagName)||t.tabIndex!==-1}const sp=new WeakSet;function _2(t){return e=>{e.key==="Enter"&&t(e)}}function fy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const jF=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=_2(()=>{if(sp.has(n))return;fy(n,"down");const s=_2(()=>{fy(n,"up")}),o=()=>fy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function w2(t){return Iw(t)&&!V8()}function UF(t,e,n={}){const[r,s,o]=L8(t,n),l=c=>{const f=c.currentTarget;if(!w2(c))return;sp.add(f);const h=e(f,c),m=(R,O)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",w),sp.has(f)&&sp.delete(f),w2(R)&&typeof h=="function"&&h(R,{success:O})},_=R=>{m(R,f===window||f===document||n.useGlobalTarget||z8(f,R.target))},w=R=>{m(R,!1)};window.addEventListener("pointerup",_,s),window.addEventListener("pointercancel",w,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),O8(c)&&(c.addEventListener("focus",h=>jF(h,s)),!zF(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function j8(t){return Qk(t)&&"ownerSVGElement"in t}function BF(t){return j8(t)&&t.tagName==="svg"}const Nn=t=>!!(t&&t.getVelocity),HF=[...N8,Xt,xa],$F=t=>HF.find(I8(t)),Nw=$.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class FF extends $.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=O8(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qF({children:t,isPresent:e,anchorX:n,root:r}){const s=$.useId(),o=$.useRef(null),l=$.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=$.useContext(Nw);return $.useInsertionEffect(()=>{const{width:f,height:h,top:m,left:_,right:w}=l.current;if(e||!o.current||!f||!h)return;const R=n==="left"?`left: ${_}`:`right: ${w}`;o.current.dataset.motionPopId=s;const O=document.createElement("style");c&&(O.nonce=c);const V=r??document.head;return V.appendChild(O),O.sheet&&O.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${R}px !important;
            top: ${m}px !important;
          }
        `),()=>{V.removeChild(O),V.contains(O)&&V.removeChild(O)}},[e]),L.jsx(FF,{isPresent:e,childRef:o,sizeRef:l,children:$.cloneElement(t,{ref:o})})}const GF=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c,root:f})=>{const h=lw(KF),m=$.useId();let _=!0,w=$.useMemo(()=>(_=!1,{id:m,initial:e,isPresent:n,custom:s,onExitComplete:R=>{h.set(R,!0);for(const O of h.values())if(!O)return;r&&r()},register:R=>(h.set(R,!1),()=>h.delete(R))}),[n,h,r]);return o&&_&&(w={...w}),$.useMemo(()=>{h.forEach((R,O)=>h.set(O,!1))},[n]),$.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),l==="popLayout"&&(t=L.jsx(qF,{isPresent:n,anchorX:c,root:f,children:t})),L.jsx(Am.Provider,{value:w,children:t})};function KF(){return new Map}function U8(t=!0){const e=$.useContext(Am);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=$.useId();$.useEffect(()=>{if(t)return s(o)},[t]);const l=$.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const jh=t=>t.key||"";function b2(t){const e=[];return $.Children.forEach(t,n=>{$.isValidElement(n)&&e.push(n)}),e}const E2=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:f})=>{const[h,m]=U8(l),_=$.useMemo(()=>b2(t),[t]),w=l&&!h?[]:_.map(jh),R=$.useRef(!0),O=$.useRef(_),V=lw(()=>new Map),[z,j]=$.useState(_),[F,X]=$.useState(_);Xk(()=>{R.current=!1,O.current=_;for(let b=0;b<F.length;b++){const T=jh(F[b]);w.includes(T)?V.delete(T):V.get(T)!==!0&&V.set(T,!1)}},[F,w.length,w.join("-")]);const y=[];if(_!==z){let b=[..._];for(let T=0;T<F.length;T++){const A=F[T],x=jh(A);w.includes(x)||(b.splice(T,0,A),y.push(A))}return o==="wait"&&y.length&&(b=y),X(b2(b)),j(_),null}const{forceRender:E}=$.useContext(ow);return L.jsx(L.Fragment,{children:F.map(b=>{const T=jh(b),A=l&&!h?!1:_===F||w.includes(T),x=()=>{if(V.has(T))V.set(T,!0);else return;let k=!0;V.forEach(I=>{I||(k=!1)}),k&&(E?.(),X(O.current),l&&m?.(),r&&r())};return L.jsx(GF,{isPresent:A,initial:!R.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:f,onExitComplete:A?void 0:x,anchorX:c,children:b},T)})})},B8=$.createContext({strict:!1}),T2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vu={};for(const t in T2)vu[t]={isEnabled:e=>T2[t].some(n=>!!e[n])};function YF(t){for(const e in t)vu[e]={...vu[e],...t[e]}}const XF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||XF.has(t)}let H8=t=>!Hp(t);function WF(t){typeof t=="function"&&(H8=e=>e.startsWith("on")?!Hp(e):t(e))}try{WF(require("@emotion/is-prop-valid").default)}catch{}function QF(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(H8(s)||n===!0&&Hp(s)||!e&&!Hp(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const xm=$.createContext({});function Cm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Dd(t){return typeof t=="string"||Array.isArray(t)}const Dw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Mw=["initial",...Dw];function Rm(t){return Cm(t.animate)||Mw.some(e=>Dd(t[e]))}function $8(t){return!!(Rm(t)||t.variants)}function ZF(t,e){if(Rm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Dd(n)?n:void 0,animate:Dd(r)?r:void 0}}return t.inherit!==!1?e:{}}function JF(t){const{initial:e,animate:n}=ZF(t,$.useContext(xm));return $.useMemo(()=>({initial:e,animate:n}),[S2(e),S2(n)])}function S2(t){return Array.isArray(t)?t.join(" "):t}const Md={};function eq(t){for(const e in t)Md[e]=t[e],yw(e)&&(Md[e].isCSSVariable=!0)}function F8(t,{layout:e,layoutId:n}){return ku.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Md[t]||t==="opacity")}const tq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nq=Ru.length;function rq(t,e,n){let r="",s=!0;for(let o=0;o<nq;o++){const l=Ru[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const h=P8(c,Rw[l]);if(!f){s=!1;const m=tq[l]||l;r+=`${m}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Pw(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const h=e[f];if(ku.has(f)){l=!0;continue}else if(yw(f)){s[f]=h;continue}else{const m=P8(h,Rw[f]);f.startsWith("origin")?(c=!0,o[f]=m):r[f]=m}}if(e.transform||(l||n?r.transform=rq(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:h="50%",originZ:m=0}=o;r.transformOrigin=`${f} ${h} ${m}`}}const Ow=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function q8(t,e,n){for(const r in e)!Nn(e[r])&&!F8(r,n)&&(t[r]=e[r])}function iq({transformTemplate:t},e){return $.useMemo(()=>{const n=Ow();return Pw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function sq(t,e){const n=t.style||{},r={};return q8(r,n,t),Object.assign(r,iq(t,e)),r}function aq(t,e){const n={},r=sq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const oq={offset:"stroke-dashoffset",array:"stroke-dasharray"},lq={offset:"strokeDashoffset",array:"strokeDasharray"};function uq(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?oq:lq;t[o.offset]=Oe.transform(-r);const l=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${l} ${c}`}function G8(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},f,h,m){if(Pw(t,c,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:w}=t;_.transform&&(w.transform=_.transform,delete _.transform),(w.transform||_.transformOrigin)&&(w.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),w.transform&&(w.transformBox=m?.transformBox??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),r!==void 0&&(_.scale=r),s!==void 0&&uq(_,s,o,l,!1)}const K8=()=>({...Ow(),attrs:{}}),Y8=t=>typeof t=="string"&&t.toLowerCase()==="svg";function cq(t,e,n,r){const s=$.useMemo(()=>{const o=K8();return G8(o,e,Y8(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};q8(o,t.style,t),s.style={...o,...s.style}}return s}const dq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vw(t){return typeof t!="string"||t.includes("-")?!1:!!(dq.indexOf(t)>-1||/[A-Z]/u.test(t))}function fq(t,e,n,{latestValues:r},s,o=!1){const c=(Vw(t)?cq:aq)(e,r,s,t),f=QF(e,typeof t=="string",o),h=t!==$.Fragment?{...f,...c,ref:n}:{},{children:m}=e,_=$.useMemo(()=>Nn(m)?m.get():m,[m]);return $.createElement(t,{...h,children:_})}function A2(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Lw(t,e,n,r){if(typeof e=="function"){const[s,o]=A2(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=A2(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function ap(t){return Nn(t)?t.get():t}function hq({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:pq(n,r,s,t),renderState:e()}}function pq(t,e,n,r){const s={},o=r(t,{});for(const w in o)s[w]=ap(o[w]);let{initial:l,animate:c}=t;const f=Rm(t),h=$8(t);e&&h&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const _=m?c:l;if(_&&typeof _!="boolean"&&!Cm(_)){const w=Array.isArray(_)?_:[_];for(let R=0;R<w.length;R++){const O=Lw(t,w[R]);if(O){const{transitionEnd:V,transition:z,...j}=O;for(const F in j){let X=j[F];if(Array.isArray(X)){const y=m?X.length-1:0;X=X[y]}X!==null&&(s[F]=X)}for(const F in V)s[F]=V[F]}}}return s}const X8=t=>(e,n)=>{const r=$.useContext(xm),s=$.useContext(Am),o=()=>hq(t,e,r,s);return n?o():lw(o)};function zw(t,e,n){const{style:r}=t,s={};for(const o in r)(Nn(r[o])||e.style&&Nn(e.style[o])||F8(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(s[o]=r[o]);return s}const mq=X8({scrapeMotionValuesFromProps:zw,createRenderState:Ow});function W8(t,e,n){const r=zw(t,e,n);for(const s in t)if(Nn(t[s])||Nn(e[s])){const o=Ru.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const gq=X8({scrapeMotionValuesFromProps:W8,createRenderState:K8}),yq=Symbol.for("motionComponentSymbol");function Gl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vq(t,e,n){return $.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Gl(n)&&(n.current=r))},[e])}const jw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_q="framerAppearId",Q8="data-"+jw(_q),Z8=$.createContext({});function wq(t,e,n,r,s){const{visualElement:o}=$.useContext(xm),l=$.useContext(B8),c=$.useContext(Am),f=$.useContext(Nw).reducedMotion,h=$.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const m=h.current,_=$.useContext(Z8);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&bq(h.current,n,s,_);const w=$.useRef(!1);$.useInsertionEffect(()=>{m&&w.current&&m.update(n,c)});const R=n[Q8],O=$.useRef(!!R&&!window.MotionHandoffIsComplete?.(R)&&window.MotionHasOptimisedAnimation?.(R));return Xk(()=>{m&&(w.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),O.current&&m.animationState&&m.animationState.animateChanges())}),$.useEffect(()=>{m&&(!O.current&&m.animationState&&m.animationState.animateChanges(),O.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(R)}),O.current=!1))}),m}function bq(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:h,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:J8(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&Gl(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:f,layoutRoot:h})}function J8(t){if(t)return t.options.allowProjection!==!1?t.projection:J8(t.parent)}function hy(t,{forwardMotionProps:e=!1}={},n,r){n&&YF(n);const s=Vw(t)?gq:mq;function o(c,f){let h;const m={...$.useContext(Nw),...c,layoutId:Eq(c)},{isStatic:_}=m,w=JF(c),R=s(c,_);if(!_&&uw){Tq();const O=Sq(m);h=O.MeasureLayout,w.visualElement=wq(t,R,m,r,O.ProjectionNode)}return L.jsxs(xm.Provider,{value:w,children:[h&&w.visualElement?L.jsx(h,{visualElement:w.visualElement,...m}):null,fq(t,c,vq(R,w.visualElement,f),R,_,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=$.forwardRef(o);return l[yq]=t,l}function Eq({layoutId:t}){const e=$.useContext(ow).id;return e&&t!==void 0?e+"-"+t:t}function Tq(t,e){$.useContext(B8).strict}function Sq(t){const{drag:e,layout:n}=vu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Aq(t,e){if(typeof Proxy>"u")return hy;const n=new Map,r=(o,l)=>hy(o,l,t,e),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(n.has(l)||n.set(l,hy(l,void 0,t,e)),n.get(l))})}function eI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function xq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Cq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function py(t){return t===void 0||t===1}function Rv({scale:t,scaleX:e,scaleY:n}){return!py(t)||!py(e)||!py(n)}function po(t){return Rv(t)||tI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tI(t){return x2(t.x)||x2(t.y)}function x2(t){return t&&t!=="0%"}function $p(t,e,n){const r=t-n,s=e*r;return n+s}function C2(t,e,n,r,s){return s!==void 0&&(t=$p(t,s,r)),$p(t,n,r)+e}function kv(t,e=0,n=1,r,s){t.min=C2(t.min,e,n,r,s),t.max=C2(t.max,e,n,r,s)}function nI(t,{x:e,y:n}){kv(t.x,e.translate,e.scale,e.originPoint),kv(t.y,n.translate,n.scale,n.originPoint)}const R2=.999999999999,k2=1.0000000000001;function Rq(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Yl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,nI(t,l)),r&&po(o.latestValues)&&Yl(t,o.latestValues))}e.x<k2&&e.x>R2&&(e.x=1),e.y<k2&&e.y>R2&&(e.y=1)}function Kl(t,e){t.min=t.min+e,t.max=t.max+e}function I2(t,e,n,r,s=.5){const o=xt(t.min,t.max,s);kv(t,e,n,o,r)}function Yl(t,e){I2(t.x,e.x,e.scaleX,e.scale,e.originX),I2(t.y,e.y,e.scaleY,e.scale,e.originY)}function rI(t,e){return eI(Cq(t.getBoundingClientRect(),e))}function kq(t,e,n){const r=rI(t,n),{scroll:s}=e;return s&&(Kl(r.x,s.offset.x),Kl(r.y,s.offset.y)),r}const N2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xl=()=>({x:N2(),y:N2()}),D2=()=>({min:0,max:0}),Ut=()=>({x:D2(),y:D2()}),Iv={current:null},iI={current:!1};function Iq(){if(iI.current=!0,!!uw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Iv.current=t.matches;t.addEventListener("change",e),e()}else Iv.current=!1}const Nq=new WeakMap;function Dq(t,e,n){for(const r in e){const s=e[r],o=n[r];if(Nn(s))t.addValue(r,s);else if(Nn(o))t.addValue(r,yu(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,yu(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const M2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Mq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const w=Zn.now();this.renderScheduledAt<w&&(this.renderScheduledAt=w,Et.render(this.render,!1,!0))};const{latestValues:f,renderState:h}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Rm(n),this.isVariantNode=$8(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const w in _){const R=_[w];f[w]!==void 0&&Nn(R)&&R.set(f[w],!1)}}mount(e){this.current=e,Nq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),iI.current||Iq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Iv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Aa(this.notifyUpdate),Aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ku.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vu){const n=vu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ut()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<M2.length;r++){const s=M2[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=Dq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=yu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Wk(r)||Zk(r))?r=parseFloat(r):!$F(r)&&xa.test(n)&&(r=M8(e,n)),this.setBaseTarget(e,Nn(r)?r.get():r)),Nn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Lw(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Nn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new pw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){kw.render(this.render)}}class sI extends Mq{constructor(){super(...arguments),this.KeyframeResolver=NF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function aI(t,{style:e,vars:n},r,s){const o=t.style;let l;for(l in e)o[l]=e[l];s?.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function Pq(t){return window.getComputedStyle(t)}class Oq extends sI{constructor(){super(...arguments),this.type="html",this.renderInstance=aI}readValueFromInstance(e,n){if(ku.has(n))return this.projection?.isProjecting?Ev(n):W$(e,n);{const r=Pq(e),s=(yw(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return rI(e,n)}build(e,n,r){Pw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return zw(e,n,r)}}const oI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vq(t,e,n,r){aI(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(oI.has(s)?s:jw(s),e.attrs[s])}class Lq extends sI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ut}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ku.has(n)){const r=D8(n);return r&&r.default||0}return n=oI.has(n)?n:jw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return W8(e,n,r)}build(e,n,r){G8(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){Vq(e,n,r,s)}mount(e){this.isSVGTag=Y8(e.tagName),super.mount(e)}}const zq=(t,e)=>Vw(t)?new Lq(e):new Oq(e,{allowProjection:t!==$.Fragment});function Pd(t,e,n){const r=t.getProps();return Lw(r,e,n!==void 0?n:r.custom,t)}const Nv=t=>Array.isArray(t);function jq(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,yu(n))}function Uq(t){return Nv(t)?t[t.length-1]||0:t}function Bq(t,e){const n=Pd(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const c=Uq(o[l]);jq(t,l,c)}}function Hq(t){return!!(Nn(t)&&t.add)}function Dv(t,e){const n=t.getValue("willChange");if(Hq(n))return n.add(e);if(!n&&Ss.WillChange){const r=new Ss.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function lI(t){return t.props[Q8]}const $q=t=>t!==null;function Fq(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter($q),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[o]}const qq={type:"spring",stiffness:500,damping:25,restSpeed:10},Gq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Kq={type:"keyframes",duration:.8},Yq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Xq=(t,{keyframes:e})=>e.length>2?Kq:ku.has(t)?t.startsWith("scale")?Gq(e[1]):qq:Yq;function Wq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:h,...m}){return!!Object.keys(m).length}const Uw=(t,e,n,r={},s,o)=>l=>{const c=Cw(r,t)||{},f=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Oi(f);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:w=>{e.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:s};Wq(c)||Object.assign(m,Xq(t,m)),m.duration&&(m.duration=Oi(m.duration)),m.repeatDelay&&(m.repeatDelay=Oi(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let _=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(_=!0)),(Ss.instantAnimations||Ss.skipAnimations)&&(_=!0,m.duration=0,m.delay=0),m.allowFlatten=!c.type&&!c.ease,_&&!o&&e.get()!==void 0){const w=Fq(m.keyframes,c);if(w!==void 0){Et.update(()=>{m.onUpdate(w),m.onComplete()});return}}return c.isSync?new Aw(m):new _F(m)};function Qq({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function uI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const f=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const m in c){const _=t.getValue(m,t.latestValues[m]??null),w=c[m];if(w===void 0||h&&Qq(h,m))continue;const R={delay:n,...Cw(o||{},m)},O=_.get();if(O!==void 0&&!_.isAnimating&&!Array.isArray(w)&&w===O&&!R.velocity)continue;let V=!1;if(window.MotionHandoffAnimation){const j=lI(t);if(j){const F=window.MotionHandoffAnimation(j,m,Et);F!==null&&(R.startTime=F,V=!0)}}Dv(t,m),_.start(Uw(m,_,w,t.shouldReduceMotion&&k8.has(m)?{type:!1}:R,t,V));const z=_.animation;z&&f.push(z)}return l&&Promise.all(f).then(()=>{Et.update(()=>{l&&Bq(t,l)})}),f}function Mv(t,e,n={}){const r=Pd(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(uI(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:_}=s;return Zq(t,e,f,h,m,_,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[f,h]=c==="beforeChildren"?[o,l]:[l,o];return f().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function Zq(t,e,n=0,r=0,s=0,o=1,l){const c=[],f=t.variantChildren.size,h=(f-1)*s,m=typeof r=="function",_=m?w=>r(w,f):o===1?(w=0)=>w*s:(w=0)=>h-w*s;return Array.from(t.variantChildren).sort(Jq).forEach((w,R)=>{w.notify("AnimationStart",e),c.push(Mv(w,e,{...l,delay:n+(m?0:r)+_(R)}).then(()=>w.notify("AnimationComplete",e)))}),Promise.all(c)}function Jq(t,e){return t.sortNodePosition(e)}function eG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>Mv(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=Mv(t,e,n);else{const s=typeof e=="function"?Pd(t,e,n.custom):e;r=Promise.all(uI(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function cI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const tG=Mw.length;function dI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?dI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<tG;n++){const r=Mw[n],s=t.props[r];(Dd(s)||s===!1)&&(e[r]=s)}return e}const nG=[...Dw].reverse(),rG=Dw.length;function iG(t){return e=>Promise.all(e.map(({animation:n,options:r})=>eG(t,n,r)))}function sG(t){let e=iG(t),n=P2(),r=!0;const s=f=>(h,m)=>{const _=Pd(t,m,f==="exit"?t.presenceContext?.custom:void 0);if(_){const{transition:w,transitionEnd:R,...O}=_;h={...h,...O,...R}}return h};function o(f){e=f(t)}function l(f){const{props:h}=t,m=dI(t.parent)||{},_=[],w=new Set;let R={},O=1/0;for(let z=0;z<rG;z++){const j=nG[z],F=n[j],X=h[j]!==void 0?h[j]:m[j],y=Dd(X),E=j===f?F.isActive:null;E===!1&&(O=z);let b=X===m[j]&&X!==h[j]&&y;if(b&&r&&t.manuallyAnimateOnMount&&(b=!1),F.protectedKeys={...R},!F.isActive&&E===null||!X&&!F.prevProp||Cm(X)||typeof X=="boolean")continue;const T=aG(F.prevProp,X);let A=T||j===f&&F.isActive&&!b&&y||z>O&&y,x=!1;const k=Array.isArray(X)?X:[X];let I=k.reduce(s(j),{});E===!1&&(I={});const{prevResolvedValues:B={}}=F,P={...B,...I},M=q=>{A=!0,w.has(q)&&(x=!0,w.delete(q)),F.needsAnimating[q]=!0;const Y=t.getValue(q);Y&&(Y.liveStyle=!1)};for(const q in P){const Y=I[q],W=B[q];if(R.hasOwnProperty(q))continue;let U=!1;Nv(Y)&&Nv(W)?U=!cI(Y,W):U=Y!==W,U?Y!=null?M(q):w.add(q):Y!==void 0&&w.has(q)?M(q):F.protectedKeys[q]=!0}F.prevProp=X,F.prevResolvedValues=I,F.isActive&&(R={...R,...I}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(b&&T)||x)&&_.push(...k.map(q=>({animation:q,options:{type:j}})))}if(w.size){const z={};if(typeof h.initial!="boolean"){const j=Pd(t,Array.isArray(h.initial)?h.initial[0]:h.initial);j&&j.transition&&(z.transition=j.transition)}w.forEach(j=>{const F=t.getBaseTarget(j),X=t.getValue(j);X&&(X.liveStyle=!0),z[j]=F??null}),_.push({animation:z})}let V=!!_.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(V=!1),r=!1,V?e(_):Promise.resolve()}function c(f,h){if(n[f].isActive===h)return Promise.resolve();t.variantChildren?.forEach(_=>_.animationState?.setActive(f,h)),n[f].isActive=h;const m=l(f);for(const _ in n)n[_].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=P2(),r=!0}}}function aG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!cI(e,t):!1}function co(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P2(){return{animate:co(!0),whileInView:co(),whileHover:co(),whileTap:co(),whileDrag:co(),whileFocus:co(),exit:co()}}class Na{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oG extends Na{constructor(e){super(e),e.animationState||(e.animationState=sG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Cm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let lG=0;class uG extends Na{constructor(){super(...arguments),this.id=lG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cG={animation:{Feature:oG},exit:{Feature:uG}};function Od(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function nf(t){return{point:{x:t.pageX,y:t.pageY}}}const dG=t=>e=>Iw(e)&&t(e,nf(e));function ad(t,e,n,r){return Od(t,e,dG(n),r)}const fI=1e-4,fG=1-fI,hG=1+fI,hI=.01,pG=0-hI,mG=0+hI;function Hn(t){return t.max-t.min}function gG(t,e,n){return Math.abs(t-e)<=n}function O2(t,e,n,r=.5){t.origin=r,t.originPoint=xt(e.min,e.max,t.origin),t.scale=Hn(n)/Hn(e),t.translate=xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=fG&&t.scale<=hG||isNaN(t.scale))&&(t.scale=1),(t.translate>=pG&&t.translate<=mG||isNaN(t.translate))&&(t.translate=0)}function od(t,e,n,r){O2(t.x,e.x,n.x,r?r.originX:void 0),O2(t.y,e.y,n.y,r?r.originY:void 0)}function V2(t,e,n){t.min=n.min+e.min,t.max=t.min+Hn(e)}function yG(t,e,n){V2(t.x,e.x,n.x),V2(t.y,e.y,n.y)}function L2(t,e,n){t.min=e.min-n.min,t.max=t.min+Hn(e)}function ld(t,e,n){L2(t.x,e.x,n.x),L2(t.y,e.y,n.y)}function zr(t){return[t("x"),t("y")]}const pI=({current:t})=>t?t.ownerDocument.defaultView:null,z2=(t,e)=>Math.abs(t-e);function vG(t,e){const n=z2(t.x,e.x),r=z2(t.y,e.y);return Math.sqrt(n**2+r**2)}class mI{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=gy(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,O=vG(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!R&&!O)return;const{point:V}=w,{timestamp:z}=wn;this.history.push({...V,timestamp:z});const{onStart:j,onMove:F}=this.handlers;R||(j&&j(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,w)},this.handlePointerMove=(w,R)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=my(R,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(w,R)=>{this.end();const{onEnd:O,onSessionEnd:V,resumeAnimation:z}=this.handlers;if(this.dragSnapToOrigin&&z&&z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=gy(w.type==="pointercancel"?this.lastMoveEventInfo:my(R,this.transformPagePoint),this.history);this.startEvent&&O&&O(w,j),V&&V(w,j)},!Iw(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const c=nf(e),f=my(c,this.transformPagePoint),{point:h}=f,{timestamp:m}=wn;this.history=[{...h,timestamp:m}];const{onSessionStart:_}=n;_&&_(e,gy(f,this.history)),this.removeListeners=Jd(ad(this.contextWindow,"pointermove",this.handlePointerMove),ad(this.contextWindow,"pointerup",this.handlePointerUp),ad(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Aa(this.updatePoint)}}function my(t,e){return e?{point:e(t.point)}:t}function j2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gy({point:t},e){return{point:t,delta:j2(t,gI(e)),offset:j2(t,_G(e)),velocity:wG(e,.1)}}function _G(t){return t[0]}function gI(t){return t[t.length-1]}function wG(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=gI(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Oi(e)));)n--;if(!r)return{x:0,y:0};const o=Vi(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function bG(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?xt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?xt(n,t,r.max):Math.min(t,n)),t}function U2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function EG(t,{top:e,left:n,bottom:r,right:s}){return{x:U2(t.x,n,s),y:U2(t.y,e,r)}}function B2(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function TG(t,e){return{x:B2(t.x,e.x),y:B2(t.y,e.y)}}function SG(t,e){let n=.5;const r=Hn(t),s=Hn(e);return s>r?n=kd(e.min,e.max-r,t.min):r>s&&(n=kd(t.min,t.max-s,e.min)),Ts(0,1,n)}function AG(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Pv=.35;function xG(t=Pv){return t===!1?t=0:t===!0&&(t=Pv),{x:H2(t,"left","right"),y:H2(t,"top","bottom")}}function H2(t,e,n){return{min:$2(t,e),max:$2(t,n)}}function $2(t,e){return typeof t=="number"?t:t[e]||0}const CG=new WeakMap;class RG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ut(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nf(_).point)},l=(_,w)=>{const{drag:R,dragPropagation:O,onDragStart:V}=this.getProps();if(R&&!O&&(this.openDragLock&&this.openDragLock(),this.openDragLock=OF(R),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zr(j=>{let F=this.getAxisMotionValue(j).get()||0;if(Li.test(F)){const{projection:X}=this.visualElement;if(X&&X.layout){const y=X.layout.layoutBox[j];y&&(F=Hn(y)*(parseFloat(F)/100))}}this.originPoint[j]=F}),V&&Et.postRender(()=>V(_,w)),Dv(this.visualElement,"transform");const{animationState:z}=this.visualElement;z&&z.setActive("whileDrag",!0)},c=(_,w)=>{this.latestPointerEvent=_,this.latestPanInfo=w;const{dragPropagation:R,dragDirectionLock:O,onDirectionLock:V,onDrag:z}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:j}=w;if(O&&this.currentDirection===null){this.currentDirection=kG(j),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",w.point,j),this.updateAxis("y",w.point,j),this.visualElement.render(),z&&z(_,w)},f=(_,w)=>{this.latestPointerEvent=_,this.latestPanInfo=w,this.stop(_,w),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>zr(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new mI(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:pI(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Et.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Uh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=bG(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Gl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=EG(r.layoutBox,e):this.constraints=!1,this.elastic=xG(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=AG(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Gl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=kq(r,s.root,this.visualElement.getTransformPagePoint());let l=TG(s.layout.layoutBox,o);if(n){const c=n(xq(l));this.hasMutatedConstraints=!!c,c&&(l=eI(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},h=zr(m=>{if(!Uh(m,n,this.currentDirection))return;let _=f&&f[m]||{};l&&(_={min:0,max:0});const w=s?200:1e6,R=s?40:1e7,O={type:"inertia",velocity:r?e[m]:0,bounceStiffness:w,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(m,O)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Dv(this.visualElement,e),r.start(Uw(e,r,0,n,this.visualElement,!1))}stopAnimation(){zr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zr(n=>{const{drag:r}=this.getProps();if(!Uh(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[n];o.set(e[n]-xt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Gl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();s[l]=SG({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zr(l=>{if(!Uh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:h}=this.constraints[l];c.set(xt(f,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;CG.set(this.visualElement,this);const e=this.visualElement.current,n=ad(e,"pointerdown",f=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Gl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Et.read(r);const l=Od(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(zr(m=>{const _=this.getAxisMotionValue(m);_&&(this.originPoint[m]+=f[m].translate,_.set(_.get()+f[m].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Pv,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Uh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function kG(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class IG extends Na{constructor(e){super(e),this.removeGroupControls=Br,this.removeListeners=Br,this.controls=new RG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Br}unmount(){this.removeGroupControls(),this.removeListeners()}}const F2=t=>(e,n)=>{t&&Et.postRender(()=>t(e,n))};class NG extends Na{constructor(){super(...arguments),this.removePointerDownListener=Br}onPointerDown(e){this.session=new mI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:F2(e),onStart:F2(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&Et.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=ad(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const op={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function q2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Uc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=q2(t,e.target.x),r=q2(t,e.target.y);return`${n}% ${r}%`}},DG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=xa.parse(t);if(s.length>5)return r;const o=xa.createTransformer(t),l=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;s[0+l]/=c,s[1+l]/=f;const h=xt(c,f,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};let G2=!1;class MG extends $.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;eq(PG),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),G2&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),op.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,G2=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Et.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),kw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yI(t){const[e,n]=U8(),r=$.useContext(ow);return L.jsx(MG,{...t,layoutGroup:r,switchLayoutGroup:$.useContext(Z8),isPresent:e,safeToRemove:n})}const PG={borderRadius:{...Uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uc,borderTopRightRadius:Uc,borderBottomLeftRadius:Uc,borderBottomRightRadius:Uc,boxShadow:DG};function OG(t,e,n){const r=Nn(t)?t:yu(t);return r.start(Uw("",r,e,n)),r.animation}const VG=(t,e)=>t.depth-e.depth;class LG{constructor(){this.children=[],this.isDirty=!1}add(e){cw(this.children,e),this.isDirty=!0}remove(e){dw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(VG),this.isDirty=!1,this.children.forEach(e)}}function zG(t,e){const n=Zn.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Aa(r),t(o-e))};return Et.setup(r,!0),()=>Aa(r)}const vI=["TopLeft","TopRight","BottomLeft","BottomRight"],jG=vI.length,K2=t=>typeof t=="string"?parseFloat(t):t,Y2=t=>typeof t=="number"||Oe.test(t);function UG(t,e,n,r,s,o){s?(t.opacity=xt(0,n.opacity??1,BG(r)),t.opacityExit=xt(e.opacity??1,0,HG(r))):o&&(t.opacity=xt(e.opacity??1,n.opacity??1,r));for(let l=0;l<jG;l++){const c=`border${vI[l]}Radius`;let f=X2(e,c),h=X2(n,c);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||Y2(f)===Y2(h)?(t[c]=Math.max(xt(K2(f),K2(h),r),0),(Li.test(h)||Li.test(f))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=xt(e.rotate||0,n.rotate||0,r))}function X2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BG=_I(0,.5,a8),HG=_I(.5,.95,Br);function _I(t,e,n){return r=>r<t?0:r>e?1:n(kd(t,e,r))}function W2(t,e){t.min=e.min,t.max=e.max}function Lr(t,e){W2(t.x,e.x),W2(t.y,e.y)}function Q2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Z2(t,e,n,r,s){return t-=e,t=$p(t,1/n,r),s!==void 0&&(t=$p(t,1/s,r)),t}function $G(t,e=0,n=1,r=.5,s,o=t,l=t){if(Li.test(e)&&(e=parseFloat(e),e=xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=xt(o.min,o.max,r);t===o&&(c-=e),t.min=Z2(t.min,e,n,c,s),t.max=Z2(t.max,e,n,c,s)}function J2(t,e,[n,r,s],o,l){$G(t,e[n],e[r],e[s],e.scale,o,l)}const FG=["x","scaleX","originX"],qG=["y","scaleY","originY"];function ex(t,e,n,r){J2(t.x,e,FG,n?n.x:void 0,r?r.x:void 0),J2(t.y,e,qG,n?n.y:void 0,r?r.y:void 0)}function tx(t){return t.translate===0&&t.scale===1}function wI(t){return tx(t.x)&&tx(t.y)}function nx(t,e){return t.min===e.min&&t.max===e.max}function GG(t,e){return nx(t.x,e.x)&&nx(t.y,e.y)}function rx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function bI(t,e){return rx(t.x,e.x)&&rx(t.y,e.y)}function ix(t){return Hn(t.x)/Hn(t.y)}function sx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class KG{constructor(){this.members=[]}add(e){cw(this.members,e),e.scheduleRender()}remove(e){if(dw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YG(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:_,rotateY:w,skewX:R,skewY:O}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),_&&(r+=`rotateX(${_}deg) `),w&&(r+=`rotateY(${w}deg) `),R&&(r+=`skewX(${R}deg) `),O&&(r+=`skewY(${O}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const yy=["","X","Y","Z"],XG=1e3;let WG=0;function vy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function EI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=lI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Et,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&EI(r)}function TI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e?.()){this.id=WG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JG),this.nodes.forEach(rK),this.nodes.forEach(iK),this.nodes.forEach(eK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new LG)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new pw),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=j8(l)&&!BF(l),this.instance=l;const{layoutId:c,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let m,_=0;const w=()=>this.root.updateBlockedByResize=!1;Et.read(()=>{_=window.innerWidth}),t(l,()=>{const R=window.innerWidth;R!==_&&(_=R,this.root.updateBlockedByResize=!0,m&&m(),m=zG(w,250),op.hasAnimatedSinceResize&&(op.hasAnimatedSinceResize=!1,this.nodes.forEach(lx)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:_,hasRelativeLayoutChanged:w,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||h.getDefaultTransition()||uK,{onLayoutAnimationStart:V,onLayoutAnimationComplete:z}=h.getProps(),j=!this.targetLayout||!bI(this.targetLayout,R),F=!_&&w;if(this.options.layoutRoot||this.resumeFrom||F||_&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const X={...Cw(O,"layout"),onPlay:V,onComplete:z};(h.shouldReduceMotion||this.options.layoutRoot)&&(X.delay=0,X.type=!1),this.startAnimation(X),this.setAnimationOrigin(m,F)}else _||lx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sK),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const _=this.path[m];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ax);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ox);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nK),this.nodes.forEach(QG),this.nodes.forEach(ZG)):this.nodes.forEach(ox),this.clearAllSnapshots();const c=Zn.now();wn.delta=Ts(0,1e3/60,c-wn.timestamp),wn.timestamp=c,wn.isProcessing=!0,oy.update.process(wn),oy.preRender.process(wn),oy.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tK),this.sharedNodes.forEach(aK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hn(this.snapshot.measuredBox.x)&&!Hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ut(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!wI(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||po(this.latestValues)||m)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),cK(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Ut();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(dK))){const{scroll:h}=this.root;h&&(Kl(c.x,h.offset.x),Kl(c.y,h.offset.y))}return c}removeElementScroll(l){const c=Ut();if(Lr(c,l),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const h=this.path[f],{scroll:m,options:_}=h;h!==this.root&&m&&_.layoutScroll&&(m.wasRoot&&Lr(c,l),Kl(c.x,m.offset.x),Kl(c.y,m.offset.y))}return c}applyTransform(l,c=!1){const f=Ut();Lr(f,l);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Yl(f,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),po(m.latestValues)&&Yl(f,m.latestValues)}return po(this.latestValues)&&Yl(f,this.latestValues),f}removeTransform(l){const c=Ut();Lr(c,l);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!po(h.latestValues))continue;Rv(h.latestValues)&&h.updateSnapshot();const m=Ut(),_=h.measurePageBox();Lr(m,_),ex(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return po(this.latestValues)&&ex(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:_}=this.options;if(!(!this.layout||!(m||_))){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),ld(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ut(),this.targetWithTransforms=Ut()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),nI(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ut(),this.relativeTargetOrigin=Ut(),ld(this.relativeTargetOrigin,this.target,w.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rv(this.parent.latestValues)||tI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(f=!1),f)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;Lr(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,w=this.treeScale.y;Rq(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ut());const{target:R}=l;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Q2(this.prevProjectionDelta.x,this.projectionDelta.x),Q2(this.prevProjectionDelta.y,this.projectionDelta.y)),od(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==w||!sx(this.projectionDelta.x,this.prevProjectionDelta.x)||!sx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xl(),this.projectionDelta=Xl(),this.projectionDeltaWithTransform=Xl()}setAnimationOrigin(l,c=!1){const f=this.snapshot,h=f?f.latestValues:{},m={...this.latestValues},_=Xl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=Ut(),R=f?f.source:void 0,O=this.layout?this.layout.source:void 0,V=R!==O,z=this.getStack(),j=!z||z.members.length<=1,F=!!(V&&!j&&this.options.crossfade===!0&&!this.path.some(lK));this.animationProgress=0;let X;this.mixTargetDelta=y=>{const E=y/1e3;ux(_.x,l.x,E),ux(_.y,l.y,E),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ld(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oK(this.relativeTarget,this.relativeTargetOrigin,w,E),X&&GG(this.relativeTarget,X)&&(this.isProjectionDirty=!1),X||(X=Ut()),Lr(X,this.relativeTarget)),V&&(this.animationValues=m,UG(m,h,this.latestValues,E,F,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{op.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=yu(0)),this.currentAnimation=OG(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:h,latestValues:m}=l;if(!(!c||!f||!h)){if(this!==l&&this.layout&&h&&SI(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||Ut();const _=Hn(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+_;const w=Hn(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+w}Lr(c,f),Yl(c,m),od(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new KG),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const h={};f.z&&vy("z",l,h,this.animationValues);for(let m=0;m<yy.length;m++)vy(`rotate${yy[m]}`,l,h,this.animationValues),vy(`skew${yy[m]}`,l,h,this.animationValues);l.render();for(const m in h)l.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=ap(c?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=ap(c?.pointerEvents)||""),this.hasProjected&&!po(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let _=YG(this.projectionDeltaWithTransform,this.treeScale,m);f&&(_=f(m,_)),l.transform=_;const{x:w,y:R}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${R.origin*100}% 0`,h.animationValues?l.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const O in Md){if(m[O]===void 0)continue;const{correct:V,applyTo:z,isCSSVariable:j}=Md[O],F=_==="none"?m[O]:V(m[O],h);if(z){const X=z.length;for(let y=0;y<X;y++)l[z[y]]=F}else j?this.options.visualElement.renderState.vars[O]=F:l[O]=F}this.options.layoutId&&(l.pointerEvents=h===this?ap(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(ax),this.root.sharedNodes.clear()}}}function QG(t){t.updateLayout()}function ZG(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?zr(m=>{const _=o?e.measuredBox[m]:e.layoutBox[m],w=Hn(_);_.min=n[m].min,_.max=_.min+w}):SI(s,e.layoutBox,n)&&zr(m=>{const _=o?e.measuredBox[m]:e.layoutBox[m],w=Hn(n[m]);_.max=_.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+w)});const l=Xl();od(l,n,e.layoutBox);const c=Xl();o?od(c,t.applyTransform(r,!0),e.measuredBox):od(c,n,e.layoutBox);const f=!wI(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:_,layout:w}=m;if(_&&w){const R=Ut();ld(R,e.layoutBox,_.layoutBox);const O=Ut();ld(O,n,w.layoutBox),bI(R,O)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=O,t.relativeTargetOrigin=R,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function JG(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tK(t){t.clearSnapshot()}function ax(t){t.clearMeasurements()}function ox(t){t.isLayoutDirty=!1}function nK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rK(t){t.resolveTargetDelta()}function iK(t){t.calcProjection()}function sK(t){t.resetSkewAndRotation()}function aK(t){t.removeLeadSnapshot()}function ux(t,e,n){t.translate=xt(e.translate,0,n),t.scale=xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function cx(t,e,n,r){t.min=xt(e.min,n.min,r),t.max=xt(e.max,n.max,r)}function oK(t,e,n,r){cx(t.x,e.x,n.x,r),cx(t.y,e.y,n.y,r)}function lK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uK={duration:.45,ease:[.4,0,.1,1]},dx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),fx=dx("applewebkit/")&&!dx("chrome/")?Math.round:Br;function hx(t){t.min=fx(t.min),t.max=fx(t.max)}function cK(t){hx(t.x),hx(t.y)}function SI(t,e,n){return t==="position"||t==="preserve-aspect"&&!gG(ix(e),ix(n),.2)}function dK(t){return t!==t.root&&t.scroll?.wasRoot}const fK=TI({attachResizeListener:(t,e)=>Od(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_y={current:void 0},AI=TI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_y.current){const t=new fK({});t.mount(window),t.setOptions({layoutScroll:!0}),_y.current=t}return _y.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),hK={pan:{Feature:NG},drag:{Feature:IG,ProjectionNode:AI,MeasureLayout:yI}};function px(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&Et.postRender(()=>o(e,nf(e)))}class pK extends Na{mount(){const{current:e}=this.node;e&&(this.unmount=VF(e,(n,r)=>(px(this.node,r,"Start"),s=>px(this.node,s,"End"))))}unmount(){}}class mK extends Na{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jd(Od(this.node.current,"focus",()=>this.onFocus()),Od(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mx(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&Et.postRender(()=>o(e,nf(e)))}class gK extends Na{mount(){const{current:e}=this.node;e&&(this.unmount=UF(e,(n,r)=>(mx(this.node,r,"Start"),(s,{success:o})=>mx(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ov=new WeakMap,wy=new WeakMap,yK=t=>{const e=Ov.get(t.target);e&&e(t)},vK=t=>{t.forEach(yK)};function _K({root:t,...e}){const n=t||document;wy.has(n)||wy.set(n,{});const r=wy.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(vK,{root:t,...e})),r[s]}function wK(t,e,n){const r=_K(e);return Ov.set(t,n),r.observe(t),()=>{Ov.delete(t),r.unobserve(t)}}const bK={some:0,all:1};class EK extends Na{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:bK[s]},c=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:_}=this.node.getProps(),w=h?m:_;w&&w(f)};return wK(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(TK(e,n))&&this.startObserver()}unmount(){}}function TK({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const SK={inView:{Feature:EK},tap:{Feature:gK},focus:{Feature:mK},hover:{Feature:pK}},AK={layout:{ProjectionNode:AI,MeasureLayout:yI}},xK={...cG,...SK,...hK,...AK},by=Aq(xK,zq),_r={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},fr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function CK(){const[t,e]=$.useState(""),[n,r]=$.useState(""),[s,o]=$.useState(!1),[l,c]=$.useState(!1),[f,h]=$.useState(!1),[m,_]=$.useState(""),w=async V=>{V.preventDefault(),h(!0),_("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(fr.INVALID_EMAIL);if(n.length<6)throw new Error(fr.WEAK_PASSWORD);const j=s?fU:hU,{user:F}=await j(sw,t,n);console.info("Auth success  uid:",F.uid)}catch(z){_(R(z))}finally{h(!1)}},R=V=>{switch(V.code){case"auth/email-already-in-use":return fr.EMAIL_IN_USE;case"auth/invalid-email":return fr.INVALID_EMAIL;case"auth/weak-password":return fr.WEAK_PASSWORD;case"auth/user-not-found":return fr.USER_NOT_FOUND;case"auth/wrong-password":return fr.WRONG_PASSWORD;case"auth/too-many-requests":return fr.TOO_MANY_REQUESTS;case"auth/user-disabled":return"This account has been disabled. Please contact support.";default:return V.message||"Authentication error"}},O="w-full px-4 py-3 rounded-lg border bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition";return L.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 dark:bg-gray-950/60 backdrop-blur-sm p-4",children:L.jsxs(by.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},className:"w-full max-w-md rounded-3xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 overflow-hidden",children:[L.jsxs("div",{className:"px-8 pt-8 pb-4 text-center",children:[L.jsx(E2,{mode:"wait",children:L.jsx(by.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:s?"Create an account":"Welcome back"},s?"signup-header":"signin-header")}),L.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s?"Start your AIpowered journey.":"Sign in to continue."})]}),L.jsxs("form",{onSubmit:w,className:"px-8 pb-8 space-y-6",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),L.jsxs("div",{className:"relative",children:[L.jsx(LH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),L.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:V=>e(V.target.value),placeholder:"you@example.com",className:`${O} pl-11`})]})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),L.jsxs("div",{className:"relative",children:[L.jsx(qH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),L.jsx("input",{id:"password",type:l?"text":"password",autoComplete:s?"new-password":"current-password",required:!0,value:n,onChange:V=>r(V.target.value),placeholder:"",className:`${O} pl-11 pr-11`}),L.jsx("button",{type:"button",onClick:()=>c(V=>!V),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":l?"Hide password":"Show password",children:l?L.jsx(BH,{className:"h-5 w-5"}):L.jsx($H,{className:"h-5 w-5"})})]})]}),L.jsx(E2,{children:m&&L.jsxs(by.div,{initial:{y:-6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},className:"flex items-start gap-3 rounded-lg border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert",children:[L.jsx(jH,{className:"h-5 w-5 flex-shrink-0"}),L.jsx("span",{children:m})]},"error")}),L.jsxs("button",{type:"submit",disabled:f,className:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:[f?L.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[L.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),L.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):s?L.jsx(KH,{className:"h-5 w-5"}):L.jsx(OH,{className:"h-5 w-5"}),L.jsx("span",{children:f?s?"Creating account":"Signing in":s?"Sign Up":"Sign In"})]})]}),L.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-8 py-4 text-center",children:[L.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Already have an account?":"New to TinkFlow?"}),L.jsx("button",{onClick:()=>o(V=>!V),type:"button",className:"mt-2 text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Create an account"})]})]})})}function RK({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=$.useState(""),[l,c]=$.useState(!0),f=w=>{const R=w.target.value;o(R),c(R.trim().length>0&&R.trim().length<=50)},h=w=>{w.preventDefault();const R=s.trim();R.length>0&&R.length<=50&&(n(R),o(""),c(!0))},m=()=>{o(""),c(!0),e()},_=w=>{w.key==="Enter"&&h(w)};return t?L.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:L.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[L.jsxs("div",{className:"flex justify-between items-center mb-6",children:[L.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),L.jsx("button",{onClick:m,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),L.jsxs("form",{onSubmit:h,className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),L.jsx("input",{type:"text",value:s,onChange:f,onKeyDown:_,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${l?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!l&&L.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),L.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),L.jsxs("div",{className:"flex gap-3 pt-4",children:[L.jsx("button",{type:"button",onClick:m,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),L.jsx("button",{type:"submit",disabled:!l||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function kK({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:l}){const[c,f]=$.useState(!1),[h,m]=$.useState(!1),[_,w]=$.useState(null),R=async j=>{try{f(!0),await r(j),m(!1)}catch(F){console.error("Error in sidebar create board:",F)}finally{f(!1)}},O=()=>{m(!0)},V=()=>{m(!1)},z=(j,F)=>{j.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(F)};return L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:L.jsxs("div",{className:"flex flex-col h-full",children:[L.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[L.jsx("h2",{className:"m-0 mb-3 text-lg font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),L.jsx("button",{onClick:O,disabled:l||c,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-base font-medium transition-all duration-200 
                                      ${l||c?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:c?"Creating...":"+ New Board"})]}),L.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(j=>{const F=e?.id===j.id,X=_===j.id;return L.jsxs("div",{onClick:()=>!l&&n(j.id),onMouseEnter:()=>w(j.id),onMouseLeave:()=>w(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-lg leading-tight
                                        ${l?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${F?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":X?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&!l&&n(j.id)},children:[L.jsx("span",{className:`
                                        ${F?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-lg leading-tight
                                    `,children:j.name}),L.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[j.isOpen&&L.jsx("span",{className:"text-green-500 dark:text-green-400 text-base",children:""}),t.length>1&&L.jsx("button",{onClick:y=>{y.stopPropagation(),z(y,j.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-lg leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${X?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:""})]})]},j.id)})}),l&&L.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-base font-medium",children:"Loading boards..."}),L.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:L.jsx("button",{onClick:o,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-base font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),L.jsx(RK,{show:h,onHide:V,onConfirm:R,isCreating:c})]})}const xI=$.createContext(void 0),IK=()=>{const t=$.useContext(xI);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},NK=({children:t})=>{const[e,n]=$.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});$.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return L.jsx(xI.Provider,{value:{theme:e,toggleTheme:r},children:t})},CI=()=>{const{theme:t,toggleTheme:e}=IK();return L.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?L.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:L.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):L.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:L.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function DK({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=$.useState(!1),[l,c]=$.useState(t||"");$.useEffect(()=>{c(t||"")},[t]);const f=m=>{m.key==="Enter"&&(e(l),o(!1))},h=()=>{o(!0),c(t||"")};return L.jsx(L.Fragment,{children:L.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:L.jsx("div",{className:"max-w-none mx-auto px-4",children:L.jsxs("header",{className:"flex justify-between items-center py-3",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:L.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),L.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),L.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:""}),s?L.jsx("input",{type:"text",value:l,onChange:m=>c(m.target.value),onKeyDown:f,onBlur:()=>{e(l),o(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):L.jsx("button",{onClick:h,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),L.jsxs("div",{className:"flex items-center gap-3",children:[r&&L.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[L.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),L.jsx("span",{className:"font-medium",children:"Saving..."})]}),L.jsx(CI,{}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:L.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),L.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const MK=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return L.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",L.jsxs("div",{className:"flex items-start gap-3",children:[" ",L.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",L.jsxs("div",{className:"flex-1 min-w-0",children:[" ",L.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",L.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",L.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",L.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},PK=({notifications:t,onRemove:e})=>L.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>L.jsxs("div",{className:"pointer-events-auto",children:[" ",L.jsx(MK,{notification:n,onRemove:e})," "]},n.id))," "]});function OK({onLogin:t}){return L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",L.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",L.jsxs("div",{className:"flex items-center space-x-3",children:[" ",L.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",L.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",L.jsxs("div",{className:"flex flex-col",children:[" ",L.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",L.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",L.jsxs("div",{className:"flex items-center gap-4",children:[" ",L.jsx(CI,{})," ",L.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"relative overflow-hidden",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",L.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",L.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",L.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",L.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",L.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",L.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",L.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",L.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",L.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"text-center mb-16",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",L.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",L.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",L.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",L.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",L.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",L.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",L.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",L.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"text-center mb-16",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",L.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",L.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",L.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",L.jsxs("div",{className:"text-center",children:[" ",L.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",L.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"27K+"})," ",L.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"2.4K+"})," ",L.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",L.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",L.jsxs("div",{className:"text-white",children:[" ",L.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",L.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"text-center mb-16",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",L.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",L.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" Research paper analysis"})," ",L.jsx("li",{children:" Concept mapping for exams"})," ",L.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" Idea generation workflows"})," ",L.jsx("li",{children:" Problem-solving frameworks"})," ",L.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" System architecture learning"})," ",L.jsx("li",{children:" Technology stack exploration"})," ",L.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",L.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",L.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",L.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",L.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",L.jsx("li",{children:" Skill gap analysis"})," ",L.jsx("li",{children:" Career pathway planning"})," ",L.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",L.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",L.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",L.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",L.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",L.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",L.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",L.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",L.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",L.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",L.jsxs("div",{className:"col-span-1",children:[" ",L.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",L.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",L.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",L.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",L.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",L.jsxs("div",{children:[" ",L.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",L.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",L.jsxs("div",{children:[" ",L.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",L.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",L.jsxs("div",{children:[" ",L.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",L.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",L.jsx("li",{children:L.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",L.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",L.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2025 TinkFlow. All rights reserved."," "]})," ",L.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",L.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",L.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",L.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",L.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",L.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",L.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",L.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LK=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),gx=t=>{const e=LK(t);return e.charAt(0).toUpperCase()+e.slice(1)},RI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),zK=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=$.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},f)=>$.createElement("svg",{ref:f,...jK,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:RI("lucide",s),...!o&&!zK(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,m])=>$.createElement(h,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=(t,e)=>{const n=$.forwardRef(({className:r,...s},o)=>$.createElement(UK,{ref:o,iconNode:e,className:RI(`lucide-${VK(gx(t))}`,`lucide-${t}`,r),...s}));return n.displayName=gx(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BK=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],kI=Iu("gavel",BK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],$K=Iu("hash",HK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],II=Iu("info",FK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],NI=Iu("lightbulb",qK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],KK=Iu("loader-circle",GK);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Bw=Iu("sparkles",YK),yx={default:{border:"border-gray-400",ring:"ring-gray-100 dark:ring-gray-500/30",placeholder:"Enter your text...",Icon:$K,color:"#6b7280"},explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Explain this concept...",Icon:II,color:"#3b82f6"},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Answer this question...",Icon:NI,color:"#10b981"},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Argue this point...",Icon:kI,color:"#f43f5e"}};function XK({data:t}){const[e,n]=$.useState("default"),r=$.useRef(null),[s,o]=$.useState(t.label||""),l=["default","explain","answer","argue"];$.useEffect(()=>{const V=r.current;if(!V)return;const z=setTimeout(()=>{V.focus()},100),j=new IntersectionObserver(([F])=>{F.isIntersecting&&(V.focus(),j.disconnect())},{threshold:.1});return j.observe(V),()=>{clearTimeout(z),j.disconnect()}},[]);const c=V=>{V.preventDefault();const z=s.trim();z&&t.onNodeCallback?.(z)},f=V=>{if(V.key==="ArrowUp"||V.key==="ArrowDown"){V.preventDefault();const z=l.indexOf(e);let j;V.key==="ArrowUp"?j=z>0?z-1:l.length-1:j=z<l.length-1?z+1:0,n(l[j])}},h=yx[e]||yx.default,{border:m,ring:_,placeholder:w,color:R}=h,O=h.Icon;return L.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border transition-all duration-300 ease-in-out ${m} ring-1 ${_}`,style:{borderColor:R,boxShadow:`0 0 0 1px ${R}20, 0 4px 6px -1px rgb(0 0 0 / 0.1)`},children:[L.jsxs("form",{onSubmit:c,className:"flex items-center gap-2",children:[L.jsx("div",{className:"transition-all duration-300 ease-in-out transform hover:scale-110",children:L.jsx(O,{size:18,className:"shrink-0 transition-colors duration-300 ease-in-out animate-pulse",style:{color:R}})}),L.jsx("input",{ref:r,value:s,onChange:V=>o(V.target.value),onKeyDown:f,placeholder:w,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-gray-900 dark:caret-gray-100 text-gray-900 dark:text-gray-100 transition-all duration-300",style:{caretColor:R}})]}),L.jsx("div",{className:"absolute -top-2 -right-2 px-2 py-1 text-xs font-semibold text-white rounded-full transition-all duration-300 ease-in-out",style:{backgroundColor:R},children:e}),L.jsx(kn,{type:"target",position:Te.Top}),L.jsx(kn,{type:"source",position:Te.Bottom})]})}const WK=async()=>{try{await yU(sw),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},QK=()=>{const[t,e]=$.useState(null);return $.useEffect(()=>{const r=gU(sw,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await WK(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},DI=t=>!!(t&&t.uid),ud=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],su=[],ZK=async t=>{if(!DI({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const e=P_(ii,_r.BOARDS),n=sj(e,aj("userId","==",t),oj("createdAt","desc")),r=await G_(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:wt.now(),isOpen:!0};return await K_(Au(ii,_r.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:wt.now(),isOpen:!0,isFallback:!0}]}throw new Error(fr.LOAD_FAILED)}},vx=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),ud;try{const e=P_(ii,_r.BOARDS,t,_r.NODES),n=await G_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),ud;const r=n.docs.map(s=>{const o=s.data(),l={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:l,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),ud}},_x=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),su;try{const e=P_(ii,_r.BOARDS,t,_r.EDGES),n=await G_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),su;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),su}},JK=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=rk(ii);e.forEach(r=>{const s=Au(ii,_r.BOARDS,t,_r.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:wt.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(fr.SAVE_FAILED)}},eY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=rk(ii);e.forEach(r=>{const s=Au(ii,_r.BOARDS,t,_r.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:wt.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(fr.SAVE_FAILED)}},tY=async(t,e,n)=>{if(!DI({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:wt.now(),isOpen:!1};return console.log("Creating board:",r),await K_(Au(ii,_r.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},nY=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await hj(Au(ii,_r.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},Vl=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:wt.now()};await K_(Au(ii,_r.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},rY=(t,e={})=>{const[n,r,s]=K5([]),[o,l,c]=Y5([]),[f,h]=$.useState(!0),[m,_]=$.useState(!1),[w,R]=$.useState(!1),[O,V]=$.useState([]),[z,j]=$.useState(null),F=$.useRef(null),{showSuccess:X,showError:y,showInfo:E}=e,b=P=>{const M=P.find(K=>K.isOpen===!0);if(M)return M;if(P.length>0){const K={...P[0],isOpen:!0};return Vl(K.id,K).catch(console.error),K}return null};$.useEffect(()=>{(async()=>{if(t)try{h(!0);const M=await ZK(t.uid);V(M);const K=M.some(W=>W.isFallback);K&&y&&y("Database index missing. Please create the required Firestore index. Check console for details.");const C=b(M);if(!C){console.error("No board found for user"),y&&y("No boards found. Creating a default board..."),r(ud),l(su);return}j(C);const[q,Y]=await Promise.all([vx(C.id),_x(C.id)]);r(q),l(Y),E&&!K&&E("Board loaded successfully!")}catch(M){console.error("Error loading initial data:",M),y&&y("Failed to load board data. Using default board."),r(ud),l(su)}finally{h(!1)}})()},[t,r,l]);const T=async(P,M,K)=>{F.current&&clearTimeout(F.current);const C=setTimeout(async()=>{try{R(!0);const q=[];M&&M.length>0&&q.push(JK(P,M)),K&&K.length>0&&q.push(eY(P,K)),q.length>0&&(await Promise.all(q),console.log("Auto-save completed successfully"))}catch(q){console.error("Auto-save failed:",q),y&&y("Failed to save changes automatically")}finally{R(!1),F.current=null}},1e3);F.current=C};$.useEffect(()=>(!f&&z&&!m&&!z.isFallback&&T(z.id,n,o),()=>{F.current&&clearTimeout(F.current)}),[n,o,f,z,m]);const A=async P=>{try{if(z?.id===P)return;if(z?.isFallback||O.find(K=>K.id===P)?.isFallback){y&&y("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(_(!0),z&&!z.isFallback){const K={...z,isOpen:!1};await Vl(z.id,K),V(C=>C.map(q=>q.id===z.id?K:q))}const M=O.find(K=>K.id===P);if(M){const K={...M,isOpen:!0};await Vl(P,K),j(K),V(Y=>Y.map(W=>W.id===P?K:W));const[C,q]=await Promise.all([vx(P),_x(P)]);r(C),l(q),X&&X(`Switched to "${K.name}"`)}else console.error("Board not found:",P),y&&y("Board not found")}catch(M){console.error("Error switching board:",M),y&&y("Failed to switch board. Please try again.")}finally{_(!1)}};return{nodes:n,edges:o,allBoards:O,currentBoard:z,isLoading:f,isSwitchingBoard:m,isSaving:w,onNodesChange:s,onEdgesChange:c,setNodes:r,setEdges:l,switchToBoard:A,createNewBoard:async P=>{try{if(!t)return y&&y("You must be logged in to create a board"),null;E&&E("Creating new board...");const M=await tY(t.uid,P||null,O);if(M){if(z&&!z.isFallback){const C={...z,isOpen:!1};Vl(z.id,C).catch(console.error)}const K={...M,isOpen:!0};return V(C=>{const q=C.map(Y=>Y.id===z?.id?{...Y,isOpen:!1}:Y);return[K,...q]}),j(K),Vl(M.id,K).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:P||"New Board"},position:{x:250,y:25},draggable:!1}]),l(su),X&&X(`Board "${M.name}" created and opened!`),K}else return y&&y("Failed to create board. Please try again."),null}catch(M){return y&&y(`Failed to create board: ${M.message}`),null}},deleteBoard:async P=>{try{if(O.length<=1){y&&y("Cannot delete the last board!");return}if(!O.find(K=>K.id===P)){console.error("Board not found for deletion"),y&&y("Board not found");return}if(E&&E("Deleting board..."),z?.id===P){const K=O.find(C=>C.id!==P);K&&await A(K.id)}await nY(P),V(K=>K.filter(C=>C.id!==P)),X&&X("Board deleted successfully!")}catch(M){console.error("Error deleting board:",M),y&&y("Failed to delete board. Please try again.")}},updateBoardName:async P=>{if(z&&z.name!==P){const M={...z,name:P};j(M),V(K=>K.map(C=>C.id===z.id?M:C));try{await Vl(z.id,M),console.log("Board name updated successfully")}catch(K){console.error("Error updating board name:",K)}}},clearBoardState:()=>{F.current&&(clearTimeout(F.current),F.current=null),V([]),j(null),r([]),l([]),h(!0),_(!1),R(!1)}}},iY=()=>{const[t,e]=$.useState([]),n=h=>{e(m=>m.filter(_=>_.id!==h))},r=h=>{const m=Date.now().toString(),_={id:m,timestamp:new Date,...h};return e(w=>[...w,_]),h.autoRemove!==!1&&setTimeout(()=>{n(m)},h.duration||5e3),m};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(h,m={})=>r({type:"success",message:h,...m}),showError:(h,m={})=>r({type:"error",message:h,duration:7e3,...m}),showInfo:(h,m={})=>r({type:"info",message:h,...m}),showWarning:(h,m={})=>r({type:"warning",message:h,duration:6e3,...m})}},MI=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return L.jsx("div",{className:"flex items-center justify-center",children:L.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})},Ey={explain:{classes:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-300 dark:border-blue-700",color:"#3b82f6",Icon:II},answer:{classes:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-950 dark:text-emerald-300 dark:border-emerald-700",color:"#10b981",Icon:NI},argue:{classes:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-700",color:"#fb7185",Icon:kI}};function sY({dragState:t,handleDragStart:e,handleOrigin:n,getParentCenter:r}){return L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"absolute left-1/2 z-10 flex gap-2 select-none",style:{transform:"translateX(-50%) translateY(24px)"},children:["explain","answer","argue"].map(s=>{const{classes:o,Icon:l}=Ey[s],c=t.isDragging&&t.mode===s;return L.jsxs("div",{draggable:!1,onPointerDown:f=>{f.stopPropagation(),f.preventDefault(),f.button===0&&e(s,f.nativeEvent)},className:`px-2 py-1 rounded-lg border text-sm font-medium flex items-center gap-1 shadow-sm cursor-grab transition-opacity duration-150 ${o} ${c?"opacity-0":"opacity-100"}`,style:{position:"relative",zIndex:11},children:[L.jsx(l,{size:16,strokeWidth:2}),s.charAt(0).toUpperCase()+s.slice(1),L.jsx(kn,{type:"source",position:Te.Bottom,id:s})]},s)})}),t.isDragging&&typeof window<"u"&&Wx.createPortal(L.jsxs(L.Fragment,{children:[L.jsx("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:L.jsx("line",{x1:n?n.x:r().x,y1:n?n.y:r().y,x2:t.x,y2:t.y,stroke:Ey[t.mode??"explain"].color,strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})}),L.jsx("div",{className:"fixed pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:L.jsx("div",{className:"px-4 py-1 rounded-lg shadow-lg font-semibold text-white backdrop-blur-sm",style:{background:Ey[t.mode??"explain"].color},children:t.mode&&t.mode.charAt(0).toUpperCase()+t.mode.slice(1)})})]}),document.body)]})}function wx(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),[o,l,c]=[n,r,s].map(h=>{const m=h/255;return m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4)});return .2126*o+.7152*l+.0722*c>.179?"#000000":"#ffffff"}function aY({data:t,id:e}){const[n,r]=$.useState(t.summary||t.label||"Static Node"),{screenToFlowPosition:s}=Ud(),{handleTokenClick:o}=Yk(),l=$.useRef(null),[c,f]=$.useState({mode:void 0,x:0,y:0,isDragging:!1}),h=$.useRef(c);$.useEffect(()=>{h.current=c},[c]);const[m,_]=$.useState(null);$.useEffect(()=>{r(t.summary||t.label||"Static Node")},[t.summary,t.label]);const R=dC(n),O=(b,T)=>{T.stopPropagation(),o(b,e,{x:0,y:0},"staticEditable",t.myColor,t.label||t.title||"Static Node",b.suggestionId)},V=(b,T)=>{const x=T.target.getBoundingClientRect();_({x:x.left+x.width/2,y:x.top+x.height/2}),f({mode:b,x:T.clientX,y:T.clientY,isDragging:!0}),document.addEventListener("pointermove",z),document.addEventListener("pointerup",j)},z=b=>{f(T=>T.isDragging?{...T,x:b.clientX,y:b.clientY}:T)},j=()=>{const b=h.current;if(console.log("handleDragEnd",b),b.isDragging&&t.onNodeCallback){const T=s({x:b.x,y:b.y});console.log("Calling onNodeCallback",b.mode,T),t.onNodeCallback(b.mode||void 0,e,T)}f({mode:"explain",x:0,y:0,isDragging:!1}),_(null),document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",j)},F=()=>{if(!l.current)return{x:0,y:0};const b=l.current.getBoundingClientRect();return{x:b.left+b.width/2,y:b.top+b.height/2}},X=$.useMemo(()=>{const b=t.tokenColors||{};return R.map((T,A)=>{const x=T.myConcept||T.word,k=b[x],I=!k;return L.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${I?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${T.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:k||"transparent",color:k?wx(k):"#f8faff",border:k?`1px solid ${cS(k,20)}`:""},onClick:B=>I?O(T,B):B.stopPropagation(),children:[T.word,A<R.length-1?" ":""]},A)})},[R,t.tokenColors]),y=$.useMemo(()=>{const b=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?L.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((T,A)=>{const x=b[T],k=!x;return L.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${k?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:x||"transparent",color:x?wx(x):"#f8faff",border:x?`1px solid ${cS(x,20)}`:""},onClick:I=>k?O({word:T,myConcept:T,suggestionId:(t.label||"")+T+A},I):I.stopPropagation(),children:T},A)})},[t.suggestions,t.tokenColors]),E=$.useMemo(()=>t.isLoading?L.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[L.jsx(MI,{size:"small",color:"#6366f1"}),L.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):L.jsxs("div",{className:"flex flex-col gap-3",children:[L.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[L.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),L.jsx("div",{className:"flex gap-2",children:L.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,title:"Show full text",children:""})})]}),L.jsx("div",{className:"flex-1",children:L.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:X})}),L.jsxs("div",{className:"mt-2",children:[L.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),L.jsx("div",{className:"flex flex-wrap gap-1",children:y})]})]}),[t.isLoading,t.title,X,y]);return L.jsxs("div",{ref:l,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[L.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:E}),L.jsx(kn,{type:"source",position:Te.Bottom,id:"bottom-source"}),L.jsx(kn,{type:"target",position:Te.Bottom,id:"bottom-target"}),L.jsx(sY,{dragState:c,handleDragStart:V,handleOrigin:m,getParentCenter:F})]})}const oY=6,lY=({dragState:t,handleOrigin:e,getParentCenter:n})=>{if(!t.isDragging||typeof window>"u")return null;const r=e||n();return Wx.createPortal(L.jsxs(L.Fragment,{children:[L.jsxs("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:[L.jsx("defs",{children:L.jsxs("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[L.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.8"}),L.jsx("stop",{offset:"100%",stopColor:"#1d4ed8",stopOpacity:"1"})]})}),L.jsx("line",{x1:r.x,y1:r.y,x2:t.x,y2:t.y,stroke:"url(#connectionGradient)",strokeWidth:3,strokeLinecap:"round",strokeDasharray:"5,5",className:"animate-pulse"})]}),L.jsx("div",{className:"fixed pointer-events-none z-[9999] transform -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:L.jsx("div",{className:`px-4 py-2 rounded-lg shadow-xl font-medium text-white 
                               bg-gradient-to-r from-blue-600 to-blue-700 backdrop-blur-sm
                               border border-blue-500/30 animate-bounce`,children:L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx(Bw,{size:14,className:"animate-spin"}),t.suggestion]})})})]}),document.body)},uY=({suggestion:t,index:e,position:n,style:r,isHidden:s,onDragStart:o})=>{const l=c=>{c.stopPropagation(),c.preventDefault(),c.button===0&&o(t,c.nativeEvent)};return L.jsx("div",{className:`absolute z-10 select-none transition-all duration-200 ease-out ${s?"opacity-0 scale-95":"opacity-100 scale-100"}`,style:{...r,[n===Te.Right?"right":"left"]:"-12px",transform:"translateY(-50%)"},onPointerDown:l,draggable:!1,children:L.jsxs("div",{className:`group relative flex items-center justify-center w-8 h-8
                          bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200
                          dark:from-blue-950 dark:to-blue-900 dark:hover:from-blue-900 dark:hover:to-blue-800
                          border-2 border-blue-200 hover:border-blue-300 
                          dark:border-blue-700 dark:hover:border-blue-600
                          rounded-full cursor-grab active:cursor-grabbing 
                          shadow-sm hover:shadow-md transition-all duration-200 ease-out 
                          hover:scale-110 active:scale-95`,title:t,onPointerDown:l,draggable:!1,children:[L.jsx(Bw,{size:16,className:`text-blue-600 dark:text-blue-400 transition-transform duration-200 
                             group-hover:rotate-12 group-active:rotate-45`}),L.jsxs("div",{className:`absolute z-20 px-3 py-1.5 text-xs font-medium text-white 
                              bg-gray-900/90 backdrop-blur-sm rounded-md shadow-lg 
                              opacity-0 group-hover:opacity-100 pointer-events-none
                              transition-opacity duration-200 ease-out whitespace-nowrap
                              transform -translate-y-1/2`,style:{[n===Te.Right?"left":"right"]:"calc(100% + 8px)",top:"50%"},children:[t,L.jsx("div",{className:`absolute w-0 h-0 top-1/2 transform -translate-y-1/2
                                   border-t-[4px] border-b-[4px] border-t-transparent border-b-transparent
                                   ${n===Te.Right?"border-r-[4px] border-r-gray-900/90 -left-1":"border-l-[4px] border-l-gray-900/90 -right-1"}`})]}),L.jsx(kn,{type:"source",position:n,id:t,className:"opacity-0"})]})},`${t}-${e}`)};function cY({suggestions:t,dragState:e,handleDragStart:n,handleOrigin:r,getParentCenter:s}){if(!t?.length)return null;const o=t.slice(0,oY),l=(c,f)=>{if(f===1)return{position:Te.Right,style:{top:"50%"}};const h=c<Math.ceil(f/2),m=h?Te.Right:Te.Left,_=h?c:c-Math.ceil(f/2),w=h?Math.ceil(f/2):Math.floor(f/2),R=w===1?50:_/(w-1)*60+20;return{position:m,style:{top:`${R}%`}}};return L.jsxs(L.Fragment,{children:[o.map((c,f)=>{const{position:h,style:m}=l(f,o.length),_=e.isDragging&&e.suggestion===c;return L.jsx(uY,{suggestion:c,index:f,position:h,style:m,isHidden:_,onDragStart:n},`${c}-${f}`)}),L.jsx(lY,{dragState:e,handleOrigin:r,getParentCenter:s})]})}function dY(){return L.jsxs(L.Fragment,{children:[L.jsx(kn,{style:{transform:"translateY(-150%)"},type:"source",position:Te.Bottom,id:"bottom-source"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Top,id:"top-target"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Left,id:"left-source"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Left,id:"left-target"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Right,id:"right-source"}),L.jsx(kn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Right,id:"right-target"})]})}function fY({data:t,id:e}){const[n,r]=$.useState(t.summary||t.label||"Draggable Node");$.useEffect(()=>{t.layout||(t.layout=1)},[t.layout]);const{getNode:s,setViewport:o,screenToFlowPosition:l}=Ud(),{handleTokenClick:c}=Yk(),[f,h]=$.useState(!1),m=$.useRef(null),[_,w]=$.useState({suggestion:"",x:0,y:0,isDragging:!1}),R=$.useRef(_);$.useEffect(()=>{R.current=_},[_]);const[O,V]=$.useState(null);$.useEffect(()=>{R.current=_},[_]);function z(){h(!0)}function j(){h(!1)}$.useEffect(()=>{r(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const F=dC(n),X=F,y=()=>!0,E=(I,B)=>{if(B.stopPropagation(),m.current){const P=m.current.getBoundingClientRect(),M=l({x:P.left,y:P.top});c(I,e,M,"draggableEditable",t.myColor,t.label||t.title||"")}},b=$.useMemo(()=>{if(t.contents&&t.contents.length>0)return t.contents[0].trim()?L.jsx("div",{className:"node-rich-content w-full",dangerouslySetInnerHTML:{__html:t.contents[0]}}):L.jsx("div",{className:"text-center py-8 text-gray-500",children:L.jsx("p",{children:"No content available"})});if(t.isLoading)return L.jsxs("div",{className:"flex items-center justify-center gap-3 py-6",children:[L.jsx(MI,{}),L.jsx("span",{className:"text-slate-400 text-sm",children:"Generating content..."})]})},[t.contents,t.isLoading,t.title,X,y,t.tokenColors,E,t.myColor,c,e,m,l,t.full_text]),T=()=>{if(!m.current)return{x:0,y:0};const I=m.current.getBoundingClientRect();return{x:I.left+I.width/2,y:I.top+I.height/2}},A=(I,B)=>{const M=B.target.getBoundingClientRect();V({x:M.left+M.width/2,y:M.top+M.height/2}),w({suggestion:I,x:B.clientX,y:B.clientY,isDragging:!0}),document.addEventListener("pointermove",x),document.addEventListener("pointerup",k)},x=I=>{w(B=>B.isDragging?{...B,x:I.clientX,y:I.clientY}:B)},k=()=>{const I=R.current;if(I.isDragging&&t.onNodeCallback){const B=l({x:I.x,y:I.y});t.onNodeCallback(I.suggestion||void 0,e,B)}w({suggestion:"explain",x:0,y:0,isDragging:!1}),V(null),document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",k)};return L.jsxs("div",{ref:m,className:`group relative bg-white/95 border border-gray-200/60 rounded-3xl
                       min-w-[320px] max-w-[640px] cursor-grab select-none
                       transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]
                       hover:border-gray-300/80`,style:{background:t.myColor?`linear-gradient(135deg, ${t.myColor}f0, ${t.myColor}e0)`:"linear-gradient(135deg, #ffffff, #fafafa)",borderColor:t.myColor?`${t.myColor}60`:"rgba(229, 231, 235, 0.6)",transform:"translateZ(0)",willChange:"transform",backfaceVisibility:"hidden"},onMouseEnter:z,onMouseLeave:j,children:[L.jsxs("div",{className:"relative p-6 text-gray-900",children:[t.isLoading&&L.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[L.jsxs("div",{className:"relative",children:[L.jsx(KK,{className:"w-8 h-8 text-blue-500 animate-spin"}),L.jsx("div",{className:"absolute inset-0 w-8 h-8 rounded-full bg-blue-500/20 animate-ping"})]}),L.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Generating content..."})]}),!t.isLoading&&L.jsx("header",{className:"flex flex-col items-center gap-4 mb-6",children:L.jsxs("div",{className:"flex items-center gap-3 group/header",children:[t.icon?L.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-white/50 backdrop-blur-sm border border-white/80 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:L.jsx("span",{className:"text-2xl",dangerouslySetInnerHTML:{__html:t.icon}})}):L.jsx("div",{className:`w-12 h-12 flex items-center justify-center rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 text-white 
                                               transition-transform duration-200 ease-out group-hover/header:scale-105`,children:L.jsx(Bw,{className:"w-6 h-6"})}),L.jsx("h2",{className:`text-2xl font-bold tracking-tight text-gray-900 
                                          transition-colors duration-200 group-hover/header:text-gray-700`,children:t.label||"Node"})]})}),!t.isLoading&&b,t.suggestions&&t.suggestions.length>0&&L.jsx(cY,{suggestions:t.suggestions,dragState:_,handleDragStart:A,handleOrigin:O,getParentCenter:T})]}),L.jsx(dY,{})]})}const hY={staticEditable:aY,draggableEditable:fY},pY={...hY,tempInput:XK};function mY(){const[t,e]=$.useState(!1),{user:n,signOut:r}=QK(),{notifications:s,removeNotification:o,showSuccess:l,showError:c,showInfo:f}=iY(),{nodes:h,edges:m,allBoards:_,currentBoard:w,isSwitchingBoard:R,isSaving:O,onNodesChange:V,onEdgesChange:z,setNodes:j,setEdges:F,switchToBoard:X,createNewBoard:y,deleteBoard:E,updateBoardName:b,clearBoardState:T}=rY(n,{showSuccess:l,showError:c,showInfo:f}),A=async()=>{await r(),T()},x=()=>{e(!0)},k=$.useCallback(M=>{const K={id:`e${M.source}-${M.target}`,source:M.source,target:M.target,sourceHandle:M.sourceHandle,targetHandle:M.targetHandle};z([{type:"add",item:K}])},[z]),I=$.useCallback((M,K,C,q,Y)=>{if(!C||!Y){console.warn("handleNodeCallback called without suggestion or position",C,Y);return}const W=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;j(Q=>[...Q,{id:W,type:"tempInput",position:{x:Y.x-80,y:Y.y-40},data:{label:C,parent:q}}]);const U="#3b82f6";q&&z([{type:"add",item:{id:`e${q}-${W}`,source:q,target:W,sourceHandle:C,style:{stroke:U,strokeWidth:3},markerEnd:{type:xo.ArrowClosed,color:U}}}])},[j]),B=$.useMemo(()=>h.map(M=>{let K={...M.data};return K.onNodeCallback=(C,q,Y)=>I(M.id,M.data,C,q,Y),M.type==="tempInput"&&(K.onNodeCallback=(C,q)=>{j(me=>me.map(be=>be.id===M.id?{...be,type:"draggableEditable",data:{...be.data,label:C}}:be));const Y=h.find(me=>me.id===M.data.parent),W=Y?.data?.color,U=Y?.data?.label,Q={word:C},ne=M.data.parent,J={x:M.position.x,y:M.position.y},fe=Kk(Q,ne,J,"draggableEditable",h,j,V,z,W,U,void 0,!0,M,M.data.mode);if(j(me=>me.map(be=>be.id===M.id?{...be,data:{...be.data,myColor:fe}}:be)),M.data.parent){if(!fe)return;F(me=>me.map(be=>be.id===`e${M.data.parent}-${M.id}`?{...be,style:{...be.style||{},stroke:fe,strokeWidth:3},markerEnd:{type:xo.ArrowClosed,color:fe}}:be))}}),{...M,data:K}}),[h,I,j]),P=$.useMemo(()=>L.jsxs(B3,{nodes:B,edges:m,onNodesChange:V,onEdgesChange:z,onConnect:k,nodeTypes:pY,connectionMode:ya.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[L.jsx(tO,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),L.jsx(oO,{variant:Ur.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[B,m,V,z,k]);return n?L.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[L.jsx(PK,{notifications:s,onRemove:o}),L.jsx("div",{style:{height:"100%",position:"relative"},children:L.jsxs(uC,{direction:"horizontal",children:[L.jsx(jy,{defaultSize:15,minSize:10,maxSize:30,children:L.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:L.jsx(kK,{allBoards:_,currentBoard:w,onSwitchBoard:X,onCreateBoard:async M=>{await y(M)},onDeleteBoard:E,onSignOut:A,isLoading:R})})}),L.jsx(cC,{}),L.jsx(jy,{children:L.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[L.jsx(DK,{name:w?.name||"Loading...",onSetName:b,user:n,isSaving:O}),L.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:L.jsx(MH,{nodes:h,onNodesChange:V,onEdgesChange:z,setNodes:j,children:P})})]})})]})})]}):t?L.jsx(CK,{}):L.jsx(OK,{onLogin:x})}function gY(){return L.jsx(NK,{children:L.jsx(mY,{})})}const PI=document.getElementById("root");if(!PI)throw new Error("Failed to find the root element");mD.createRoot(PI).render(L.jsx($.StrictMode,{children:L.jsx(gY,{})}));export{zd as C,Wn as R,fC as _,ST as a,DM as b,Uv as c,hd as d,jv as e,Lx as f,Vv as g,yY as h,ea as i,Ux as n,AM as r,Zr as s};
