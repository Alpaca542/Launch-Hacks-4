function lO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function S2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var R0={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1;function cO(){if(t1)return Nu;t1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:c,ref:s!==void 0?s:null,props:a}}return Nu.Fragment=e,Nu.jsx=n,Nu.jsxs=n,Nu}var n1;function uO(){return n1||(n1=1,R0.exports=cO()),R0.exports}var C=uO(),I0={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1;function dO(){if(r1)return je;r1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,A={};function R(N,J,ne){this.props=N,this.context=J,this.refs=A,this.updater=ne||E}R.prototype.isReactComponent={},R.prototype.setState=function(N,J){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,J,"setState")},R.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function k(){}k.prototype=R.prototype;function z(N,J,ne){this.props=N,this.context=J,this.refs=A,this.updater=ne||E}var B=z.prototype=new k;B.constructor=z,T(B,R.prototype),B.isPureReactComponent=!0;var U=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function D(N,J,ne,Z,te,le){return ne=le.ref,{$$typeof:t,type:N,key:J,ref:ne!==void 0?ne:null,props:le}}function S(N,J){return D(N.type,J,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function j(N){var J={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ne){return J[ne]})}var F=/\/+/g;function $(N,J){return typeof N=="object"&&N!==null&&N.key!=null?j(""+N.key):J.toString(36)}function O(){}function L(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(O,O):(N.status="pending",N.then(function(J){N.status==="pending"&&(N.status="fulfilled",N.value=J)},function(J){N.status==="pending"&&(N.status="rejected",N.reason=J)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function q(N,J,ne,Z,te){var le=typeof N;(le==="undefined"||le==="boolean")&&(N=null);var de=!1;if(N===null)de=!0;else switch(le){case"bigint":case"string":case"number":de=!0;break;case"object":switch(N.$$typeof){case t:case e:de=!0;break;case p:return de=N._init,q(de(N._payload),J,ne,Z,te)}}if(de)return te=te(N),de=Z===""?"."+$(N,0):Z,U(te)?(ne="",de!=null&&(ne=de.replace(F,"$&/")+"/"),q(te,J,ne,"",function(Ae){return Ae})):te!=null&&(I(te)&&(te=S(te,ne+(te.key==null||N&&N.key===te.key?"":(""+te.key).replace(F,"$&/")+"/")+de)),J.push(te)),1;de=0;var me=Z===""?".":Z+":";if(U(N))for(var be=0;be<N.length;be++)Z=N[be],le=me+$(Z,be),de+=q(Z,J,ne,le,te);else if(be=b(N),typeof be=="function")for(N=be.call(N),be=0;!(Z=N.next()).done;)Z=Z.value,le=me+$(Z,be++),de+=q(Z,J,ne,le,te);else if(le==="object"){if(typeof N.then=="function")return q(L(N),J,ne,Z,te);throw J=String(N),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return de}function M(N,J,ne){if(N==null)return N;var Z=[],te=0;return q(N,Z,"","",function(le){return J.call(ne,le,te++)}),Z}function W(N){if(N._status===-1){var J=N._result;J=J(),J.then(function(ne){(N._status===0||N._status===-1)&&(N._status=1,N._result=ne)},function(ne){(N._status===0||N._status===-1)&&(N._status=2,N._result=ne)}),N._status===-1&&(N._status=0,N._result=J)}if(N._status===1)return N._result.default;throw N._result}var G=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function K(){}return je.Children={map:M,forEach:function(N,J,ne){M(N,function(){J.apply(this,arguments)},ne)},count:function(N){var J=0;return M(N,function(){J++}),J},toArray:function(N){return M(N,function(J){return J})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},je.Component=R,je.Fragment=n,je.Profiler=s,je.PureComponent=z,je.StrictMode=r,je.Suspense=h,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,je.__COMPILER_RUNTIME={__proto__:null,c:function(N){return Y.H.useMemoCache(N)}},je.cache=function(N){return function(){return N.apply(null,arguments)}},je.cloneElement=function(N,J,ne){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var Z=T({},N.props),te=N.key,le=void 0;if(J!=null)for(de in J.ref!==void 0&&(le=void 0),J.key!==void 0&&(te=""+J.key),J)!X.call(J,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&J.ref===void 0||(Z[de]=J[de]);var de=arguments.length-2;if(de===1)Z.children=ne;else if(1<de){for(var me=Array(de),be=0;be<de;be++)me[be]=arguments[be+2];Z.children=me}return D(N.type,te,void 0,void 0,le,Z)},je.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},je.createElement=function(N,J,ne){var Z,te={},le=null;if(J!=null)for(Z in J.key!==void 0&&(le=""+J.key),J)X.call(J,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(te[Z]=J[Z]);var de=arguments.length-2;if(de===1)te.children=ne;else if(1<de){for(var me=Array(de),be=0;be<de;be++)me[be]=arguments[be+2];te.children=me}if(N&&N.defaultProps)for(Z in de=N.defaultProps,de)te[Z]===void 0&&(te[Z]=de[Z]);return D(N,le,void 0,void 0,null,te)},je.createRef=function(){return{current:null}},je.forwardRef=function(N){return{$$typeof:u,render:N}},je.isValidElement=I,je.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:W}},je.memo=function(N,J){return{$$typeof:f,type:N,compare:J===void 0?null:J}},je.startTransition=function(N){var J=Y.T,ne={};Y.T=ne;try{var Z=N(),te=Y.S;te!==null&&te(ne,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(K,G)}catch(le){G(le)}finally{Y.T=J}},je.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},je.use=function(N){return Y.H.use(N)},je.useActionState=function(N,J,ne){return Y.H.useActionState(N,J,ne)},je.useCallback=function(N,J){return Y.H.useCallback(N,J)},je.useContext=function(N){return Y.H.useContext(N)},je.useDebugValue=function(){},je.useDeferredValue=function(N,J){return Y.H.useDeferredValue(N,J)},je.useEffect=function(N,J,ne){var Z=Y.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(N,J)},je.useId=function(){return Y.H.useId()},je.useImperativeHandle=function(N,J,ne){return Y.H.useImperativeHandle(N,J,ne)},je.useInsertionEffect=function(N,J){return Y.H.useInsertionEffect(N,J)},je.useLayoutEffect=function(N,J){return Y.H.useLayoutEffect(N,J)},je.useMemo=function(N,J){return Y.H.useMemo(N,J)},je.useOptimistic=function(N,J){return Y.H.useOptimistic(N,J)},je.useReducer=function(N,J,ne){return Y.H.useReducer(N,J,ne)},je.useRef=function(N){return Y.H.useRef(N)},je.useState=function(N){return Y.H.useState(N)},je.useSyncExternalStore=function(N,J,ne){return Y.H.useSyncExternalStore(N,J,ne)},je.useTransition=function(){return Y.H.useTransition()},je.version="19.1.0",je}var i1;function zd(){return i1||(i1=1,I0.exports=dO()),I0.exports}var P=zd();const fe=S2(P),hO=lO({__proto__:null,default:fe},[P]);var N0={exports:{}},ku={},k0={exports:{}},D0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function fO(){return s1||(s1=1,function(t){function e(M,W){var G=M.length;M.push(W);e:for(;0<G;){var K=G-1>>>1,N=M[K];if(0<s(N,W))M[K]=W,M[G]=N,G=K;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var W=M[0],G=M.pop();if(G!==W){M[0]=G;e:for(var K=0,N=M.length,J=N>>>1;K<J;){var ne=2*(K+1)-1,Z=M[ne],te=ne+1,le=M[te];if(0>s(Z,G))te<N&&0>s(le,Z)?(M[K]=le,M[te]=G,K=te):(M[K]=Z,M[ne]=G,K=ne);else if(te<N&&0>s(le,G))M[K]=le,M[te]=G,K=te;else break e}}return W}function s(M,W){var G=M.sortIndex-W.sortIndex;return G!==0?G:M.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,y=null,b=3,E=!1,T=!1,A=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function U(M){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=M)r(f),W.sortIndex=W.expirationTime,e(h,W);else break;W=n(f)}}function Y(M){if(A=!1,U(M),!T)if(n(h)!==null)T=!0,X||(X=!0,$());else{var W=n(f);W!==null&&q(Y,W.startTime-M)}}var X=!1,D=-1,S=5,I=-1;function j(){return R?!0:!(t.unstable_now()-I<S)}function F(){if(R=!1,X){var M=t.unstable_now();I=M;var W=!0;try{e:{T=!1,A&&(A=!1,z(D),D=-1),E=!0;var G=b;try{t:{for(U(M),y=n(h);y!==null&&!(y.expirationTime>M&&j());){var K=y.callback;if(typeof K=="function"){y.callback=null,b=y.priorityLevel;var N=K(y.expirationTime<=M);if(M=t.unstable_now(),typeof N=="function"){y.callback=N,U(M),W=!0;break t}y===n(h)&&r(h),U(M)}else r(h);y=n(h)}if(y!==null)W=!0;else{var J=n(f);J!==null&&q(Y,J.startTime-M),W=!1}}break e}finally{y=null,b=G,E=!1}W=void 0}}finally{W?$():X=!1}}}var $;if(typeof B=="function")$=function(){B(F)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,L=O.port2;O.port1.onmessage=F,$=function(){L.postMessage(null)}}else $=function(){k(F,0)};function q(M,W){D=k(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(M){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var G=b;b=W;try{return M()}finally{b=G}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=b;b=M;try{return W()}finally{b=G}},t.unstable_scheduleCallback=function(M,W,G){var K=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,M){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=G+N,M={id:p++,callback:W,priorityLevel:M,startTime:G,expirationTime:N,sortIndex:-1},G>K?(M.sortIndex=G,e(f,M),n(h)===null&&M===n(f)&&(A?(z(D),D=-1):A=!0,q(Y,G-K))):(M.sortIndex=N,e(h,M),T||E||(T=!0,X||(X=!0,$()))),M},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(M){var W=b;return function(){var G=b;b=W;try{return M.apply(this,arguments)}finally{b=G}}}}(D0)),D0}var o1;function mO(){return o1||(o1=1,k0.exports=fO()),k0.exports}var M0={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1;function pO(){if(a1)return Cn;a1=1;var t=zd();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,p)},Cn.flushSync=function(h){var f=c.T,p=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=p,r.d.f()}},Cn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Cn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Cn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:E}):p==="script"&&r.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Cn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Cn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);r.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Cn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Cn.requestFormReset=function(h){r.d.r(h)},Cn.unstable_batchedUpdates=function(h,f){return h(f)},Cn.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},Cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Cn.version="19.1.0",Cn}var l1;function A2(){if(l1)return M0.exports;l1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),M0.exports=pO(),M0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c1;function gO(){if(c1)return ku;c1=1;var t=mO(),e=zd(),n=A2();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(a(i)!==i)throw Error(r(188))}function h(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var l=i,d=o;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return u(g),i;if(v===d)return u(g),o;v=v.sibling}throw Error(r(188))}if(l.return!==d.return)l=g,d=v;else{for(var x=!1,V=g.child;V;){if(V===l){x=!0,l=g,d=v;break}if(V===d){x=!0,d=g,l=v;break}V=V.sibling}if(!x){for(V=v.child;V;){if(V===l){x=!0,l=v,d=g;break}if(V===d){x=!0,d=v,l=g;break}V=V.sibling}if(!x)throw Error(r(189))}}if(l.alternate!==d)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:o}function f(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=f(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function $(i){return i===null||typeof i!="object"?null:(i=F&&i[F]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function L(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case R:return"Profiler";case A:return"StrictMode";case Y:return"Suspense";case X:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case E:return"Portal";case B:return(i.displayName||"Context")+".Provider";case z:return(i._context.displayName||"Context")+".Consumer";case U:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return o=i.displayName||null,o!==null?o:L(i.type)||"Memo";case S:o=i._payload,i=i._init;try{return L(i(o))}catch{}}return null}var q=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},K=[],N=-1;function J(i){return{current:i}}function ne(i){0>N||(i.current=K[N],K[N]=null,N--)}function Z(i,o){N++,K[N]=i.current,i.current=o}var te=J(null),le=J(null),de=J(null),me=J(null);function be(i,o){switch(Z(de,o),Z(le,i),Z(te,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Ix(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Ix(o),i=Nx(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(te),Z(te,i)}function Ae(){ne(te),ne(le),ne(de)}function Re(i){i.memoizedState!==null&&Z(me,i);var o=te.current,l=Nx(o,i.type);o!==l&&(Z(le,i),Z(te,l))}function rt(i){le.current===i&&(ne(te),ne(le)),me.current===i&&(ne(me),Su._currentValue=G)}var Ye=Object.prototype.hasOwnProperty,ke=t.unstable_scheduleCallback,Le=t.unstable_cancelCallback,st=t.unstable_shouldYield,Ht=t.unstable_requestPaint,Be=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,It=t.unstable_ImmediatePriority,Sn=t.unstable_UserBlockingPriority,Zt=t.unstable_NormalPriority,er=t.unstable_LowPriority,Pn=t.unstable_IdlePriority,Vn=t.log,Hr=t.unstable_setDisableYieldValue,at=null,Ke=null;function Ft(i){if(typeof Vn=="function"&&Hr(i),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(at,i)}catch{}}var xt=Math.clz32?Math.clz32:on,oi=Math.log,$t=Math.LN2;function on(i){return i>>>=0,i===0?32:31-(oi(i)/$t|0)|0}var Ln=256,zn=4194304;function an(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function pn(i,o,l){var d=i.pendingLanes;if(d===0)return 0;var g=0,v=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var V=d&134217727;return V!==0?(d=V&~v,d!==0?g=an(d):(x&=V,x!==0?g=an(x):l||(l=V&~i,l!==0&&(g=an(l))))):(V=d&~v,V!==0?g=an(V):x!==0?g=an(x):l||(l=d&~i,l!==0&&(g=an(l)))),g===0?0:o!==0&&o!==g&&(o&v)===0&&(v=g&-g,l=o&-o,v>=l||v===32&&(l&4194048)!==0)?o:g}function Un(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function ji(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hi(){var i=Ln;return Ln<<=1,(Ln&4194048)===0&&(Ln=256),i}function Fr(){var i=zn;return zn<<=1,(zn&62914560)===0&&(zn=4194304),i}function tr(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function _r(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function nr(i,o,l,d,g,v){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var V=i.entanglements,Q=i.expirationTimes,oe=i.hiddenUpdates;for(l=x&~l;0<l;){var he=31-xt(l),ge=1<<he;V[he]=0,Q[he]=-1;var ae=oe[he];if(ae!==null)for(oe[he]=null,he=0;he<ae.length;he++){var ce=ae[he];ce!==null&&(ce.lane&=-536870913)}l&=~ge}d!==0&&Er(i,d,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(x&~o))}function Er(i,o,l){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-xt(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|l&4194090}function Mo(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var d=31-xt(l),g=1<<d;g&o|i[d]&o&&(i[d]|=o),l&=~g}}function ai(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ss(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function li(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:Xx(i.type))}function Ba(i,o){var l=W.p;try{return W.p=i,o()}finally{W.p=l}}var yt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+yt,Nt="__reactProps$"+yt,qn="__reactContainer$"+yt,Oo="__reactEvents$"+yt,kc="__reactListeners$"+yt,ci="__reactHandles$"+yt,ja="__reactResources$"+yt,Fi="__reactMarker$"+yt;function ui(i){delete i[Lt],delete i[Nt],delete i[Oo],delete i[kc],delete i[ci]}function wr(i){var o=i[Lt];if(o)return o;for(var l=i.parentNode;l;){if(o=l[qn]||l[Lt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=Ox(i);i!==null;){if(l=i[Lt])return l;i=Ox(i)}return o}i=l,l=i.parentNode}return null}function xr(i){if(i=i[Lt]||i[qn]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function Tr(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function gn(i){var o=i[ja];return o||(o=i[ja]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Tt(i){i[Fi]=!0}var Po=new Set,As={};function rr(i,o){$r(i,o),$r(i+"Capture",o)}function $r(i,o){for(As[i]=o,i=0;i<o.length;i++)Po.add(o[i])}var Vo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ha={},$i={};function Fa(i){return Ye.call($i,i)?!0:Ye.call(Ha,i)?!1:Vo.test(i)?$i[i]=!0:(Ha[i]=!0,!1)}function di(i,o,l){if(Fa(o))if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+l)}}function Sr(i,o,l){if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+l)}}function Jt(i,o,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(o,l,""+d)}}var hi,$a;function qr(i){if(hi===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);hi=o&&o[1]||"",$a=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+i+$a}var Cs=!1;function fi(i,o){if(!i||Cs)return"";Cs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ce){var ae=ce}Reflect.construct(i,[],ge)}else{try{ge.call()}catch(ce){ae=ce}i.call(ge.prototype)}}else{try{throw Error()}catch(ce){ae=ce}(ge=i())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ce){if(ce&&ae&&typeof ce.stack=="string")return[ce.stack,ae.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),x=v[0],V=v[1];if(x&&V){var Q=x.split(`
`),oe=V.split(`
`);for(g=d=0;d<Q.length&&!Q[d].includes("DetermineComponentFrameRoot");)d++;for(;g<oe.length&&!oe[g].includes("DetermineComponentFrameRoot");)g++;if(d===Q.length||g===oe.length)for(d=Q.length-1,g=oe.length-1;1<=d&&0<=g&&Q[d]!==oe[g];)g--;for(;1<=d&&0<=g;d--,g--)if(Q[d]!==oe[g]){if(d!==1||g!==1)do if(d--,g--,0>g||Q[d]!==oe[g]){var he=`
`+Q[d].replace(" at new "," at ");return i.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",i.displayName)),he}while(1<=d&&0<=g);break}}}finally{Cs=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?qr(l):""}function Dc(i){switch(i.tag){case 26:case 27:case 5:return qr(i.type);case 16:return qr("Lazy");case 13:return qr("Suspense");case 19:return qr("SuspenseList");case 0:case 15:return fi(i.type,!1);case 11:return fi(i.type.render,!1);case 1:return fi(i.type,!0);case 31:return qr("Activity");default:return""}}function qa(i){try{var o="";do o+=Dc(i),i=i.return;while(i);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Mc(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Dp(i){var o=Mc(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){d=""+x,v.call(this,x)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ga(i){i._valueTracker||(i._valueTracker=Dp(i))}function Oc(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return i&&(d=Mc(i)?i.checked?"true":"false":i.value),i=d,i!==l?(o.setValue(i),!0):!1}function Lo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Mp=/[\n"\\]/g;function qt(i){return i.replace(Mp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ir(i,o,l,d,g,v,x,V){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),o!=null?x==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Bn(o)):i.value!==""+Bn(o)&&(i.value=""+Bn(o)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),o!=null?Rs(i,x,Bn(o)):l!=null?Rs(i,x,Bn(l)):d!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?i.name=""+Bn(V):i.removeAttribute("name")}function zo(i,o,l,d,g,v,x,V){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null))return;l=l!=null?""+Bn(l):"",o=o!=null?""+Bn(o):l,V||o===i.value||(i.value=o),i.defaultValue=o}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=V?i.checked:!!d,i.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function Rs(i,o,l){o==="number"&&Lo(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function qi(i,o,l,d){if(i=i.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=o.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Bn(l),o=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function ht(i,o,l){if(o!=null&&(o=""+Bn(o),o!==i.value&&(i.value=o),l==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=l!=null?""+Bn(l):""}function Uo(i,o,l,d){if(o==null){if(d!=null){if(l!=null)throw Error(r(92));if(q(d)){if(1<d.length)throw Error(r(93));d=d[0]}l=d}l==null&&(l=""),o=l}l=Bn(o),i.defaultValue=l,d=i.textContent,d===l&&d!==""&&d!==null&&(i.value=d)}function Ar(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var Bo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sh(i,o,l){var d=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,l):typeof l!="number"||l===0||Bo.has(o)?o==="float"?i.cssFloat=l:i[o]=(""+l).trim():i[o]=l+"px"}function Pc(i,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in o)d=o[g],o.hasOwnProperty(g)&&l[g]!==d&&sh(i,g,d)}else for(var v in o)o.hasOwnProperty(v)&&sh(i,v,o[v])}function Vc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Op=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(i){return Pp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Gi=null;function Cr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Yi=null,Ki=null;function Lc(i){var o=xr(i);if(o&&(i=o.stateNode)){var l=i[Nt]||null;e:switch(i=o.stateNode,o.type){case"input":if(ir(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==i&&d.form===i.form){var g=d[Nt]||null;if(!g)throw Error(r(90));ir(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<l.length;o++)d=l[o],d.form===i.form&&Oc(d)}break e;case"textarea":ht(i,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&qi(i,!!l.multiple,o,!1)}}}var mi=!1;function oh(i,o,l){if(mi)return i(o,l);mi=!0;try{var d=i(o);return d}finally{if(mi=!1,(Yi!==null||Ki!==null)&&(Jh(),Yi&&(o=Yi,i=Ki,Ki=Yi=null,Lc(o),i)))for(o=0;o<i.length;o++)Lc(i[o])}}function jo(i,o){var l=i.stateNode;if(l===null)return null;var d=l[Nt]||null;if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rr=!1;if(Gr)try{var Ho={};Object.defineProperty(Ho,"passive",{get:function(){Rr=!0}}),window.addEventListener("test",Ho,Ho),window.removeEventListener("test",Ho,Ho)}catch{Rr=!1}var pi=null,Is=null,Xi=null;function zc(){if(Xi)return Xi;var i,o=Is,l=o.length,d,g="value"in pi?pi.value:pi.textContent,v=g.length;for(i=0;i<l&&o[i]===g[i];i++);var x=l-i;for(d=1;d<=x&&o[l-d]===g[v-d];d++);return Xi=g.slice(i,1<d?1-d:void 0)}function gi(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function yi(){return!0}function Uc(){return!1}function ln(i){function o(l,d,g,v,x){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var V in i)i.hasOwnProperty(V)&&(l=i[V],this[V]=l?l(v):v[V]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?yi:Uc,this.isPropagationStopped=Uc,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=yi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=yi)},persist:function(){},isPersistent:yi}),o}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ka=ln(lt),Fo=p({},lt,{view:0,detail:0}),ah=ln(Fo),Xa,Wa,vi,$o=p({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vi&&(vi&&i.type==="mousemove"?(Xa=i.screenX-vi.screenX,Wa=i.screenY-vi.screenY):Wa=Xa=0,vi=i),Xa)},movementY:function(i){return"movementY"in i?i.movementY:Wa}}),Ir=ln($o),lh=p({},$o,{dataTransfer:0}),Vp=ln(lh),qo=p({},Fo,{relatedTarget:0}),Qa=ln(qo),Bc=p({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),Za=ln(Bc),ch=p({},lt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ja=ln(ch),Lp=p({},lt,{data:0}),jc=ln(Lp),Go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=dh[i])?!!o[i]:!1}function Yo(){return Hc}var hh=p({},Fo,{key:function(i){if(i.key){var o=Go[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=gi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?uh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yo,charCode:function(i){return i.type==="keypress"?gi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?gi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),el=ln(hh),fh=p({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fc=ln(fh),Wi=p({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yo}),mh=ln(Wi),ph=p({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),gh=ln(ph),yh=p({},$o,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tl=ln(yh),jn=p({},lt,{newState:0,oldState:0}),vh=ln(jn),bh=[9,13,27,32],bi=Gr&&"CompositionEvent"in window,m=null;Gr&&"documentMode"in document&&(m=document.documentMode);var _=Gr&&"TextEvent"in window&&!m,w=Gr&&(!bi||m&&8<m&&11>=m),H=" ",ie=!1;function ue(i,o){switch(i){case"keyup":return bh.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _e(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Je=!1;function en(i,o){switch(i){case"compositionend":return _e(o);case"keypress":return o.which!==32?null:(ie=!0,H);case"textInput":return i=o.data,i===H&&ie?null:i;default:return null}}function et(i,o){if(Je)return i==="compositionend"||!bi&&ue(i,o)?(i=zc(),Xi=Is=pi=null,Je=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return w&&o.locale!=="ko"?null:o.data;default:return null}}var cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tn(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!cn[i.type]:o==="textarea"}function Qi(i,o,l,d){Yi?Ki?Ki.push(d):Ki=[d]:Yi=d,o=of(o,"onChange"),0<o.length&&(l=new Ka("onChange","change",null,l,d),i.push({event:l,listeners:o}))}var yn=null,_i=null;function $c(i){Tx(i,0)}function _h(i){var o=Tr(i);if(Oc(o))return i}function q_(i,o){if(i==="change")return o}var G_=!1;if(Gr){var zp;if(Gr){var Up="oninput"in document;if(!Up){var Y_=document.createElement("div");Y_.setAttribute("oninput","return;"),Up=typeof Y_.oninput=="function"}zp=Up}else zp=!1;G_=zp&&(!document.documentMode||9<document.documentMode)}function K_(){yn&&(yn.detachEvent("onpropertychange",X_),_i=yn=null)}function X_(i){if(i.propertyName==="value"&&_h(_i)){var o=[];Qi(o,_i,i,Cr(i)),oh($c,o)}}function zD(i,o,l){i==="focusin"?(K_(),yn=o,_i=l,yn.attachEvent("onpropertychange",X_)):i==="focusout"&&K_()}function UD(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _h(_i)}function BD(i,o){if(i==="click")return _h(o)}function jD(i,o){if(i==="input"||i==="change")return _h(o)}function HD(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sr=typeof Object.is=="function"?Object.is:HD;function qc(i,o){if(sr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!Ye.call(o,g)||!sr(i[g],o[g]))return!1}return!0}function W_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Q_(i,o){var l=W_(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=o&&d>=o)return{node:l,offset:o-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=W_(l)}}function Z_(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Z_(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function J_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Lo(i.document);o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=Lo(i.document)}return o}function Bp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var FD=Gr&&"documentMode"in document&&11>=document.documentMode,nl=null,jp=null,Gc=null,Hp=!1;function eE(i,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hp||nl==null||nl!==Lo(d)||(d=nl,"selectionStart"in d&&Bp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Gc&&qc(Gc,d)||(Gc=d,d=of(jp,"onSelect"),0<d.length&&(o=new Ka("onSelect","select",null,o,l),i.push({event:o,listeners:d}),o.target=nl)))}function Ko(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var rl={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionrun:Ko("Transition","TransitionRun"),transitionstart:Ko("Transition","TransitionStart"),transitioncancel:Ko("Transition","TransitionCancel"),transitionend:Ko("Transition","TransitionEnd")},Fp={},tE={};Gr&&(tE=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Xo(i){if(Fp[i])return Fp[i];if(!rl[i])return i;var o=rl[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in tE)return Fp[i]=o[l];return i}var nE=Xo("animationend"),rE=Xo("animationiteration"),iE=Xo("animationstart"),$D=Xo("transitionrun"),qD=Xo("transitionstart"),GD=Xo("transitioncancel"),sE=Xo("transitionend"),oE=new Map,$p="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$p.push("scrollEnd");function Yr(i,o){oE.set(i,o),rr(o,[i])}var aE=new WeakMap;function Nr(i,o){if(typeof i=="object"&&i!==null){var l=aE.get(i);return l!==void 0?l:(o={value:i,source:o,stack:qa(o)},aE.set(i,o),o)}return{value:i,source:o,stack:qa(o)}}var kr=[],il=0,qp=0;function Eh(){for(var i=il,o=qp=il=0;o<i;){var l=kr[o];kr[o++]=null;var d=kr[o];kr[o++]=null;var g=kr[o];kr[o++]=null;var v=kr[o];if(kr[o++]=null,d!==null&&g!==null){var x=d.pending;x===null?g.next=g:(g.next=x.next,x.next=g),d.pending=g}v!==0&&lE(l,g,v)}}function wh(i,o,l,d){kr[il++]=i,kr[il++]=o,kr[il++]=l,kr[il++]=d,qp|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Gp(i,o,l,d){return wh(i,o,l,d),xh(i)}function sl(i,o){return wh(i,null,null,o),xh(i)}function lE(i,o,l){i.lanes|=l;var d=i.alternate;d!==null&&(d.lanes|=l);for(var g=!1,v=i.return;v!==null;)v.childLanes|=l,d=v.alternate,d!==null&&(d.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&o!==null&&(g=31-xt(l),i=v.hiddenUpdates,d=i[g],d===null?i[g]=[o]:d.push(o),o.lane=l|536870912),v):null}function xh(i){if(50<yu)throw yu=0,Zg=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ol={};function YD(i,o,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(i,o,l,d){return new YD(i,o,l,d)}function Yp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zi(i,o){var l=i.alternate;return l===null?(l=or(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function cE(i,o){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,o=l.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Th(i,o,l,d,g,v){var x=0;if(d=i,typeof i=="function")Yp(i)&&(x=1);else if(typeof i=="string")x=XM(i,l,te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=or(31,l,o,g),i.elementType=I,i.lanes=v,i;case T:return Wo(l.children,g,v,o);case A:x=8,g|=24;break;case R:return i=or(12,l,o,g|2),i.elementType=R,i.lanes=v,i;case Y:return i=or(13,l,o,g),i.elementType=Y,i.lanes=v,i;case X:return i=or(19,l,o,g),i.elementType=X,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:case B:x=10;break e;case z:x=9;break e;case U:x=11;break e;case D:x=14;break e;case S:x=16,d=null;break e}x=29,l=Error(r(130,i===null?"null":typeof i,"")),d=null}return o=or(x,l,o,g),o.elementType=i,o.type=d,o.lanes=v,o}function Wo(i,o,l,d){return i=or(7,i,d,o),i.lanes=l,i}function Kp(i,o,l){return i=or(6,i,null,o),i.lanes=l,i}function Xp(i,o,l){return o=or(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var al=[],ll=0,Sh=null,Ah=0,Dr=[],Mr=0,Qo=null,Ji=1,es="";function Zo(i,o){al[ll++]=Ah,al[ll++]=Sh,Sh=i,Ah=o}function uE(i,o,l){Dr[Mr++]=Ji,Dr[Mr++]=es,Dr[Mr++]=Qo,Qo=i;var d=Ji;i=es;var g=32-xt(d)-1;d&=~(1<<g),l+=1;var v=32-xt(o)+g;if(30<v){var x=g-g%5;v=(d&(1<<x)-1).toString(32),d>>=x,g-=x,Ji=1<<32-xt(o)+g|l<<g|d,es=v+i}else Ji=1<<v|l<<g|d,es=i}function Wp(i){i.return!==null&&(Zo(i,1),uE(i,1,0))}function Qp(i){for(;i===Sh;)Sh=al[--ll],al[ll]=null,Ah=al[--ll],al[ll]=null;for(;i===Qo;)Qo=Dr[--Mr],Dr[Mr]=null,es=Dr[--Mr],Dr[Mr]=null,Ji=Dr[--Mr],Dr[Mr]=null}var Hn=null,kt=null,ot=!1,Jo=null,Ei=!1,Zp=Error(r(519));function ea(i){var o=Error(r(418,""));throw Xc(Nr(o,i)),Zp}function dE(i){var o=i.stateNode,l=i.type,d=i.memoizedProps;switch(o[Lt]=i,o[Nt]=d,l){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(l=0;l<bu.length;l++)We(bu[l],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),zo(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ga(o);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),Uo(o,d.value,d.defaultValue,d.children),Ga(o)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||d.suppressHydrationWarning===!0||Rx(o.textContent,l)?(d.popover!=null&&(We("beforetoggle",o),We("toggle",o)),d.onScroll!=null&&We("scroll",o),d.onScrollEnd!=null&&We("scrollend",o),d.onClick!=null&&(o.onclick=af),o=!0):o=!1,o||ea(i)}function hE(i){for(Hn=i.return;Hn;)switch(Hn.tag){case 5:case 13:Ei=!1;return;case 27:case 3:Ei=!0;return;default:Hn=Hn.return}}function Yc(i){if(i!==Hn)return!1;if(!ot)return hE(i),ot=!0,!1;var o=i.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||m0(i.type,i.memoizedProps)),l=!l),l&&kt&&ea(i),hE(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(o===0){kt=Xr(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;i=i.nextSibling}kt=null}}else o===27?(o=kt,qs(i.type)?(i=v0,v0=null,kt=i):kt=o):kt=Hn?Xr(i.stateNode.nextSibling):null;return!0}function Kc(){kt=Hn=null,ot=!1}function fE(){var i=Jo;return i!==null&&(Kn===null?Kn=i:Kn.push.apply(Kn,i),Jo=null),i}function Xc(i){Jo===null?Jo=[i]:Jo.push(i)}var Jp=J(null),ta=null,ts=null;function Ns(i,o,l){Z(Jp,o._currentValue),o._currentValue=l}function ns(i){i._currentValue=Jp.current,ne(Jp)}function eg(i,o,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===l)break;i=i.return}}function tg(i,o,l,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var x=g.child;v=v.firstContext;e:for(;v!==null;){var V=v;v=g;for(var Q=0;Q<o.length;Q++)if(V.context===o[Q]){v.lanes|=l,V=v.alternate,V!==null&&(V.lanes|=l),eg(v.return,l,i),d||(x=null);break e}v=V.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=l,v=x.alternate,v!==null&&(v.lanes|=l),eg(x,l,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Wc(i,o,l,d){i=null;for(var g=o,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var V=g.type;sr(g.pendingProps.value,x.value)||(i!==null?i.push(V):i=[V])}}else if(g===me.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Su):i=[Su])}g=g.return}i!==null&&tg(o,i,l,d),o.flags|=262144}function Ch(i){for(i=i.firstContext;i!==null;){if(!sr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function na(i){ta=i,ts=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function An(i){return mE(ta,i)}function Rh(i,o){return ta===null&&na(i),mE(i,o)}function mE(i,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},ts===null){if(i===null)throw Error(r(308));ts=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ts=ts.next=o;return l}var KD=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(l,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(l){return l()})}},XD=t.unstable_scheduleCallback,WD=t.unstable_NormalPriority,nn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ng(){return{controller:new KD,data:new Map,refCount:0}}function Qc(i){i.refCount--,i.refCount===0&&XD(WD,function(){i.controller.abort()})}var Zc=null,rg=0,cl=0,ul=null;function QD(i,o){if(Zc===null){var l=Zc=[];rg=0,cl=s0(),ul={status:"pending",value:void 0,then:function(d){l.push(d)}}}return rg++,o.then(pE,pE),o}function pE(){if(--rg===0&&Zc!==null){ul!==null&&(ul.status="fulfilled");var i=Zc;Zc=null,cl=0,ul=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function ZD(i,o){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var g=0;g<l.length;g++)(0,l[g])(o)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var gE=M.S;M.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&QD(i,o),gE!==null&&gE(i,o)};var ra=J(null);function ig(){var i=ra.current;return i!==null?i:vt.pooledCache}function Ih(i,o){o===null?Z(ra,ra.current):Z(ra,o.pool)}function yE(){var i=ig();return i===null?null:{parent:nn._currentValue,pool:i}}var Jc=Error(r(460)),vE=Error(r(474)),Nh=Error(r(542)),sg={then:function(){}};function bE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function kh(){}function _E(i,o,l){switch(l=i[l],l===void 0?i.push(o):l!==o&&(o.then(kh,kh),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,wE(i),i;default:if(typeof o.status=="string")o.then(kh,kh);else{if(i=vt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=d}},function(d){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,wE(i),i}throw eu=o,Jc}}var eu=null;function EE(){if(eu===null)throw Error(r(459));var i=eu;return eu=null,i}function wE(i){if(i===Jc||i===Nh)throw Error(r(483))}var ks=!1;function og(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ag(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ds(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ms(i,o,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ut&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,o=xh(i),lE(i,null,l),o}return wh(i,d,o,l),xh(i)}function tu(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,Mo(i,l)}}function lg(i,o){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=x:v=v.next=x,l=l.next}while(l!==null);v===null?g=v=o:v=v.next=o}else g=v=o;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}var cg=!1;function nu(){if(cg){var i=ul;if(i!==null)throw i}}function ru(i,o,l,d){cg=!1;var g=i.updateQueue;ks=!1;var v=g.firstBaseUpdate,x=g.lastBaseUpdate,V=g.shared.pending;if(V!==null){g.shared.pending=null;var Q=V,oe=Q.next;Q.next=null,x===null?v=oe:x.next=oe,x=Q;var he=i.alternate;he!==null&&(he=he.updateQueue,V=he.lastBaseUpdate,V!==x&&(V===null?he.firstBaseUpdate=oe:V.next=oe,he.lastBaseUpdate=Q))}if(v!==null){var ge=g.baseState;x=0,he=oe=Q=null,V=v;do{var ae=V.lane&-536870913,ce=ae!==V.lane;if(ce?(tt&ae)===ae:(d&ae)===ae){ae!==0&&ae===cl&&(cg=!0),he!==null&&(he=he.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var Pe=i,Ne=V;ae=o;var pt=l;switch(Ne.tag){case 1:if(Pe=Ne.payload,typeof Pe=="function"){ge=Pe.call(pt,ge,ae);break e}ge=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ne.payload,ae=typeof Pe=="function"?Pe.call(pt,ge,ae):Pe,ae==null)break e;ge=p({},ge,ae);break e;case 2:ks=!0}}ae=V.callback,ae!==null&&(i.flags|=64,ce&&(i.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[ae]:ce.push(ae))}else ce={lane:ae,tag:V.tag,payload:V.payload,callback:V.callback,next:null},he===null?(oe=he=ce,Q=ge):he=he.next=ce,x|=ae;if(V=V.next,V===null){if(V=g.shared.pending,V===null)break;ce=V,V=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);he===null&&(Q=ge),g.baseState=Q,g.firstBaseUpdate=oe,g.lastBaseUpdate=he,v===null&&(g.shared.lanes=0),js|=x,i.lanes=x,i.memoizedState=ge}}function xE(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function TE(i,o){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)xE(l[i],o)}var dl=J(null),Dh=J(0);function SE(i,o){i=cs,Z(Dh,i),Z(dl,o),cs=i|o.baseLanes}function ug(){Z(Dh,cs),Z(dl,dl.current)}function dg(){cs=Dh.current,ne(dl),ne(Dh)}var Os=0,Fe=null,ft=null,Gt=null,Mh=!1,hl=!1,ia=!1,Oh=0,iu=0,fl=null,JD=0;function zt(){throw Error(r(321))}function hg(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!sr(i[l],o[l]))return!1;return!0}function fg(i,o,l,d,g,v){return Os=v,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,M.H=i===null||i.memoizedState===null?lw:cw,ia=!1,v=l(d,g),ia=!1,hl&&(v=CE(o,l,d,g)),AE(i),v}function AE(i){M.H=Bh;var o=ft!==null&&ft.next!==null;if(Os=0,Gt=ft=Fe=null,Mh=!1,iu=0,fl=null,o)throw Error(r(300));i===null||un||(i=i.dependencies,i!==null&&Ch(i)&&(un=!0))}function CE(i,o,l,d){Fe=i;var g=0;do{if(hl&&(fl=null),iu=0,hl=!1,25<=g)throw Error(r(301));if(g+=1,Gt=ft=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}M.H=oM,v=o(l,d)}while(hl);return v}function eM(){var i=M.H,o=i.useState()[0];return o=typeof o.then=="function"?su(o):o,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(Fe.flags|=1024),o}function mg(){var i=Oh!==0;return Oh=0,i}function pg(i,o,l){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~l}function gg(i){if(Mh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Mh=!1}Os=0,Gt=ft=Fe=null,hl=!1,iu=Oh=0,fl=null}function Gn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Fe.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function Yt(){if(ft===null){var i=Fe.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=Gt===null?Fe.memoizedState:Gt.next;if(o!==null)Gt=o,ft=i;else{if(i===null)throw Fe.alternate===null?Error(r(467)):Error(r(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Gt===null?Fe.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function yg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(i){var o=iu;return iu+=1,fl===null&&(fl=[]),i=_E(fl,i,o),o=Fe,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,M.H=o===null||o.memoizedState===null?lw:cw),i}function Ph(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return su(i);if(i.$$typeof===B)return An(i)}throw Error(r(438,String(i)))}function vg(i){var o=null,l=Fe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var d=Fe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=yg(),Fe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(i),d=0;d<i;d++)l[d]=j;return o.index++,l}function rs(i,o){return typeof o=="function"?o(i):o}function Vh(i){var o=Yt();return bg(o,ft,i)}function bg(i,o,l){var d=i.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=l;var g=i.baseQueue,v=d.pending;if(v!==null){if(g!==null){var x=g.next;g.next=v.next,v.next=x}o.baseQueue=g=v,d.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{o=g.next;var V=x=null,Q=null,oe=o,he=!1;do{var ge=oe.lane&-536870913;if(ge!==oe.lane?(tt&ge)===ge:(Os&ge)===ge){var ae=oe.revertLane;if(ae===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),ge===cl&&(he=!0);else if((Os&ae)===ae){oe=oe.next,ae===cl&&(he=!0);continue}else ge={lane:0,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Q===null?(V=Q=ge,x=v):Q=Q.next=ge,Fe.lanes|=ae,js|=ae;ge=oe.action,ia&&l(v,ge),v=oe.hasEagerState?oe.eagerState:l(v,ge)}else ae={lane:ge,revertLane:oe.revertLane,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},Q===null?(V=Q=ae,x=v):Q=Q.next=ae,Fe.lanes|=ge,js|=ge;oe=oe.next}while(oe!==null&&oe!==o);if(Q===null?x=v:Q.next=V,!sr(v,i.memoizedState)&&(un=!0,he&&(l=ul,l!==null)))throw l;i.memoizedState=v,i.baseState=x,i.baseQueue=Q,d.lastRenderedState=v}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function _g(i){var o=Yt(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var d=l.dispatch,g=l.pending,v=o.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do v=i(v,x.action),x=x.next;while(x!==g);sr(v,o.memoizedState)||(un=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,d]}function RE(i,o,l){var d=Fe,g=Yt(),v=ot;if(v){if(l===void 0)throw Error(r(407));l=l()}else l=o();var x=!sr((ft||g).memoizedState,l);x&&(g.memoizedState=l,un=!0),g=g.queue;var V=kE.bind(null,d,g,i);if(ou(2048,8,V,[i]),g.getSnapshot!==o||x||Gt!==null&&Gt.memoizedState.tag&1){if(d.flags|=2048,ml(9,Lh(),NE.bind(null,d,g,l,o),null),vt===null)throw Error(r(349));v||(Os&124)!==0||IE(d,o,l)}return l}function IE(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Fe.updateQueue,o===null?(o=yg(),Fe.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function NE(i,o,l,d){o.value=l,o.getSnapshot=d,DE(o)&&ME(i)}function kE(i,o,l){return l(function(){DE(o)&&ME(i)})}function DE(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!sr(i,l)}catch{return!0}}function ME(i){var o=sl(i,2);o!==null&&dr(o,i,2)}function Eg(i){var o=Gn();if(typeof i=="function"){var l=i;if(i=l(),ia){Ft(!0);try{l()}finally{Ft(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:i},o}function OE(i,o,l,d){return i.baseState=l,bg(i,ft,typeof d=="function"?d:rs)}function tM(i,o,l,d,g){if(Uh(i))throw Error(r(485));if(i=o.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){v.listeners.push(x)}};M.T!==null?l(!0):v.isTransition=!1,d(v),l=o.pending,l===null?(v.next=o.pending=v,PE(o,v)):(v.next=l.next,o.pending=l.next=v)}}function PE(i,o){var l=o.action,d=o.payload,g=i.state;if(o.isTransition){var v=M.T,x={};M.T=x;try{var V=l(g,d),Q=M.S;Q!==null&&Q(x,V),VE(i,o,V)}catch(oe){wg(i,o,oe)}finally{M.T=v}}else try{v=l(g,d),VE(i,o,v)}catch(oe){wg(i,o,oe)}}function VE(i,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){LE(i,o,d)},function(d){return wg(i,o,d)}):LE(i,o,l)}function LE(i,o,l){o.status="fulfilled",o.value=l,zE(o),i.state=l,o=i.pending,o!==null&&(l=o.next,l===o?i.pending=null:(l=l.next,o.next=l,PE(i,l)))}function wg(i,o,l){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=l,zE(o),o=o.next;while(o!==d)}i.action=null}function zE(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function UE(i,o){return o}function BE(i,o){if(ot){var l=vt.formState;if(l!==null){e:{var d=Fe;if(ot){if(kt){t:{for(var g=kt,v=Ei;g.nodeType!==8;){if(!v){g=null;break t}if(g=Xr(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){kt=Xr(g.nextSibling),d=g.data==="F!";break e}}ea(d)}d=!1}d&&(o=l[0])}}return l=Gn(),l.memoizedState=l.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:UE,lastRenderedState:o},l.queue=d,l=sw.bind(null,Fe,d),d.dispatch=l,d=Eg(!1),v=Cg.bind(null,Fe,!1,d.queue),d=Gn(),g={state:o,dispatch:null,action:i,pending:null},d.queue=g,l=tM.bind(null,Fe,g,v,l),g.dispatch=l,d.memoizedState=i,[o,l,!1]}function jE(i){var o=Yt();return HE(o,ft,i)}function HE(i,o,l){if(o=bg(i,o,UE)[0],i=Vh(rs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=su(o)}catch(x){throw x===Jc?Nh:x}else d=o;o=Yt();var g=o.queue,v=g.dispatch;return l!==o.memoizedState&&(Fe.flags|=2048,ml(9,Lh(),nM.bind(null,g,l),null)),[d,v,i]}function nM(i,o){i.action=o}function FE(i){var o=Yt(),l=ft;if(l!==null)return HE(o,l,i);Yt(),o=o.memoizedState,l=Yt();var d=l.queue.dispatch;return l.memoizedState=i,[o,d,!1]}function ml(i,o,l,d){return i={tag:i,create:l,deps:d,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=yg(),Fe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,o.lastEffect=i),i}function Lh(){return{destroy:void 0,resource:void 0}}function $E(){return Yt().memoizedState}function zh(i,o,l,d){var g=Gn();d=d===void 0?null:d,Fe.flags|=i,g.memoizedState=ml(1|o,Lh(),l,d)}function ou(i,o,l,d){var g=Yt();d=d===void 0?null:d;var v=g.memoizedState.inst;ft!==null&&d!==null&&hg(d,ft.memoizedState.deps)?g.memoizedState=ml(o,v,l,d):(Fe.flags|=i,g.memoizedState=ml(1|o,v,l,d))}function qE(i,o){zh(8390656,8,i,o)}function GE(i,o){ou(2048,8,i,o)}function YE(i,o){return ou(4,2,i,o)}function KE(i,o){return ou(4,4,i,o)}function XE(i,o){if(typeof o=="function"){i=i();var l=o(i);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function WE(i,o,l){l=l!=null?l.concat([i]):null,ou(4,4,XE.bind(null,o,i),l)}function xg(){}function QE(i,o){var l=Yt();o=o===void 0?null:o;var d=l.memoizedState;return o!==null&&hg(o,d[1])?d[0]:(l.memoizedState=[i,o],i)}function ZE(i,o){var l=Yt();o=o===void 0?null:o;var d=l.memoizedState;if(o!==null&&hg(o,d[1]))return d[0];if(d=i(),ia){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[d,o],d}function Tg(i,o,l){return l===void 0||(Os&1073741824)!==0?i.memoizedState=o:(i.memoizedState=l,i=tx(),Fe.lanes|=i,js|=i,l)}function JE(i,o,l,d){return sr(l,o)?l:dl.current!==null?(i=Tg(i,l,d),sr(i,o)||(un=!0),i):(Os&42)===0?(un=!0,i.memoizedState=l):(i=tx(),Fe.lanes|=i,js|=i,o)}function ew(i,o,l,d,g){var v=W.p;W.p=v!==0&&8>v?v:8;var x=M.T,V={};M.T=V,Cg(i,!1,o,l);try{var Q=g(),oe=M.S;if(oe!==null&&oe(V,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var he=ZD(Q,d);au(i,o,he,ur(i))}else au(i,o,d,ur(i))}catch(ge){au(i,o,{then:function(){},status:"rejected",reason:ge},ur())}finally{W.p=v,M.T=x}}function rM(){}function Sg(i,o,l,d){if(i.tag!==5)throw Error(r(476));var g=tw(i).queue;ew(i,g,o,G,l===null?rM:function(){return nw(i),l(d)})}function tw(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:G},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:l},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function nw(i){var o=tw(i).next.queue;au(i,o,{},ur())}function Ag(){return An(Su)}function rw(){return Yt().memoizedState}function iw(){return Yt().memoizedState}function iM(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var l=ur();i=Ds(l);var d=Ms(o,i,l);d!==null&&(dr(d,o,l),tu(d,o,l)),o={cache:ng()},i.payload=o;return}o=o.return}}function sM(i,o,l){var d=ur();l={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Uh(i)?ow(o,l):(l=Gp(i,o,l,d),l!==null&&(dr(l,i,d),aw(l,o,d)))}function sw(i,o,l){var d=ur();au(i,o,l,d)}function au(i,o,l,d){var g={lane:d,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Uh(i))ow(o,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var x=o.lastRenderedState,V=v(x,l);if(g.hasEagerState=!0,g.eagerState=V,sr(V,x))return wh(i,o,g,0),vt===null&&Eh(),!1}catch{}finally{}if(l=Gp(i,o,g,d),l!==null)return dr(l,i,d),aw(l,o,d),!0}return!1}function Cg(i,o,l,d){if(d={lane:2,revertLane:s0(),action:d,hasEagerState:!1,eagerState:null,next:null},Uh(i)){if(o)throw Error(r(479))}else o=Gp(i,l,d,2),o!==null&&dr(o,i,2)}function Uh(i){var o=i.alternate;return i===Fe||o!==null&&o===Fe}function ow(i,o){hl=Mh=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function aw(i,o,l){if((l&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,l|=d,o.lanes=l,Mo(i,l)}}var Bh={readContext:An,use:Ph,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},lw={readContext:An,use:Ph,useCallback:function(i,o){return Gn().memoizedState=[i,o===void 0?null:o],i},useContext:An,useEffect:qE,useImperativeHandle:function(i,o,l){l=l!=null?l.concat([i]):null,zh(4194308,4,XE.bind(null,o,i),l)},useLayoutEffect:function(i,o){return zh(4194308,4,i,o)},useInsertionEffect:function(i,o){zh(4,2,i,o)},useMemo:function(i,o){var l=Gn();o=o===void 0?null:o;var d=i();if(ia){Ft(!0);try{i()}finally{Ft(!1)}}return l.memoizedState=[d,o],d},useReducer:function(i,o,l){var d=Gn();if(l!==void 0){var g=l(o);if(ia){Ft(!0);try{l(o)}finally{Ft(!1)}}}else g=o;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=sM.bind(null,Fe,i),[d.memoizedState,i]},useRef:function(i){var o=Gn();return i={current:i},o.memoizedState=i},useState:function(i){i=Eg(i);var o=i.queue,l=sw.bind(null,Fe,o);return o.dispatch=l,[i.memoizedState,l]},useDebugValue:xg,useDeferredValue:function(i,o){var l=Gn();return Tg(l,i,o)},useTransition:function(){var i=Eg(!1);return i=ew.bind(null,Fe,i.queue,!0,!1),Gn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,l){var d=Fe,g=Gn();if(ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),vt===null)throw Error(r(349));(tt&124)!==0||IE(d,o,l)}g.memoizedState=l;var v={value:l,getSnapshot:o};return g.queue=v,qE(kE.bind(null,d,v,i),[i]),d.flags|=2048,ml(9,Lh(),NE.bind(null,d,v,l,o),null),l},useId:function(){var i=Gn(),o=vt.identifierPrefix;if(ot){var l=es,d=Ji;l=(d&~(1<<32-xt(d)-1)).toString(32)+l,o="«"+o+"R"+l,l=Oh++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=JD++,o="«"+o+"r"+l.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:Ag,useFormState:BE,useActionState:BE,useOptimistic:function(i){var o=Gn();o.memoizedState=o.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Cg.bind(null,Fe,!0,l),l.dispatch=o,[i,o]},useMemoCache:vg,useCacheRefresh:function(){return Gn().memoizedState=iM.bind(null,Fe)}},cw={readContext:An,use:Ph,useCallback:QE,useContext:An,useEffect:GE,useImperativeHandle:WE,useInsertionEffect:YE,useLayoutEffect:KE,useMemo:ZE,useReducer:Vh,useRef:$E,useState:function(){return Vh(rs)},useDebugValue:xg,useDeferredValue:function(i,o){var l=Yt();return JE(l,ft.memoizedState,i,o)},useTransition:function(){var i=Vh(rs)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:su(i),o]},useSyncExternalStore:RE,useId:rw,useHostTransitionStatus:Ag,useFormState:jE,useActionState:jE,useOptimistic:function(i,o){var l=Yt();return OE(l,ft,i,o)},useMemoCache:vg,useCacheRefresh:iw},oM={readContext:An,use:Ph,useCallback:QE,useContext:An,useEffect:GE,useImperativeHandle:WE,useInsertionEffect:YE,useLayoutEffect:KE,useMemo:ZE,useReducer:_g,useRef:$E,useState:function(){return _g(rs)},useDebugValue:xg,useDeferredValue:function(i,o){var l=Yt();return ft===null?Tg(l,i,o):JE(l,ft.memoizedState,i,o)},useTransition:function(){var i=_g(rs)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:su(i),o]},useSyncExternalStore:RE,useId:rw,useHostTransitionStatus:Ag,useFormState:FE,useActionState:FE,useOptimistic:function(i,o){var l=Yt();return ft!==null?OE(l,ft,i,o):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:vg,useCacheRefresh:iw},pl=null,lu=0;function jh(i){var o=lu;return lu+=1,pl===null&&(pl=[]),_E(pl,i,o)}function cu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Hh(i,o){throw o.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function uw(i){var o=i._init;return o(i._payload)}function dw(i){function o(re,ee){if(i){var se=re.deletions;se===null?(re.deletions=[ee],re.flags|=16):se.push(ee)}}function l(re,ee){if(!i)return null;for(;ee!==null;)o(re,ee),ee=ee.sibling;return null}function d(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function g(re,ee){return re=Zi(re,ee),re.index=0,re.sibling=null,re}function v(re,ee,se){return re.index=se,i?(se=re.alternate,se!==null?(se=se.index,se<ee?(re.flags|=67108866,ee):se):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function x(re){return i&&re.alternate===null&&(re.flags|=67108866),re}function V(re,ee,se,pe){return ee===null||ee.tag!==6?(ee=Kp(se,re.mode,pe),ee.return=re,ee):(ee=g(ee,se),ee.return=re,ee)}function Q(re,ee,se,pe){var Se=se.type;return Se===T?he(re,ee,se.props.children,pe,se.key):ee!==null&&(ee.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&uw(Se)===ee.type)?(ee=g(ee,se.props),cu(ee,se),ee.return=re,ee):(ee=Th(se.type,se.key,se.props,null,re.mode,pe),cu(ee,se),ee.return=re,ee)}function oe(re,ee,se,pe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==se.containerInfo||ee.stateNode.implementation!==se.implementation?(ee=Xp(se,re.mode,pe),ee.return=re,ee):(ee=g(ee,se.children||[]),ee.return=re,ee)}function he(re,ee,se,pe,Se){return ee===null||ee.tag!==7?(ee=Wo(se,re.mode,pe,Se),ee.return=re,ee):(ee=g(ee,se),ee.return=re,ee)}function ge(re,ee,se){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Kp(""+ee,re.mode,se),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return se=Th(ee.type,ee.key,ee.props,null,re.mode,se),cu(se,ee),se.return=re,se;case E:return ee=Xp(ee,re.mode,se),ee.return=re,ee;case S:var pe=ee._init;return ee=pe(ee._payload),ge(re,ee,se)}if(q(ee)||$(ee))return ee=Wo(ee,re.mode,se,null),ee.return=re,ee;if(typeof ee.then=="function")return ge(re,jh(ee),se);if(ee.$$typeof===B)return ge(re,Rh(re,ee),se);Hh(re,ee)}return null}function ae(re,ee,se,pe){var Se=ee!==null?ee.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Se!==null?null:V(re,ee,""+se,pe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Se?Q(re,ee,se,pe):null;case E:return se.key===Se?oe(re,ee,se,pe):null;case S:return Se=se._init,se=Se(se._payload),ae(re,ee,se,pe)}if(q(se)||$(se))return Se!==null?null:he(re,ee,se,pe,null);if(typeof se.then=="function")return ae(re,ee,jh(se),pe);if(se.$$typeof===B)return ae(re,ee,Rh(re,se),pe);Hh(re,se)}return null}function ce(re,ee,se,pe,Se){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return re=re.get(se)||null,V(ee,re,""+pe,Se);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case b:return re=re.get(pe.key===null?se:pe.key)||null,Q(ee,re,pe,Se);case E:return re=re.get(pe.key===null?se:pe.key)||null,oe(ee,re,pe,Se);case S:var qe=pe._init;return pe=qe(pe._payload),ce(re,ee,se,pe,Se)}if(q(pe)||$(pe))return re=re.get(se)||null,he(ee,re,pe,Se,null);if(typeof pe.then=="function")return ce(re,ee,se,jh(pe),Se);if(pe.$$typeof===B)return ce(re,ee,se,Rh(ee,pe),Se);Hh(ee,pe)}return null}function Pe(re,ee,se,pe){for(var Se=null,qe=null,Ce=ee,De=ee=0,hn=null;Ce!==null&&De<se.length;De++){Ce.index>De?(hn=Ce,Ce=null):hn=Ce.sibling;var it=ae(re,Ce,se[De],pe);if(it===null){Ce===null&&(Ce=hn);break}i&&Ce&&it.alternate===null&&o(re,Ce),ee=v(it,ee,De),qe===null?Se=it:qe.sibling=it,qe=it,Ce=hn}if(De===se.length)return l(re,Ce),ot&&Zo(re,De),Se;if(Ce===null){for(;De<se.length;De++)Ce=ge(re,se[De],pe),Ce!==null&&(ee=v(Ce,ee,De),qe===null?Se=Ce:qe.sibling=Ce,qe=Ce);return ot&&Zo(re,De),Se}for(Ce=d(Ce);De<se.length;De++)hn=ce(Ce,re,De,se[De],pe),hn!==null&&(i&&hn.alternate!==null&&Ce.delete(hn.key===null?De:hn.key),ee=v(hn,ee,De),qe===null?Se=hn:qe.sibling=hn,qe=hn);return i&&Ce.forEach(function(Ws){return o(re,Ws)}),ot&&Zo(re,De),Se}function Ne(re,ee,se,pe){if(se==null)throw Error(r(151));for(var Se=null,qe=null,Ce=ee,De=ee=0,hn=null,it=se.next();Ce!==null&&!it.done;De++,it=se.next()){Ce.index>De?(hn=Ce,Ce=null):hn=Ce.sibling;var Ws=ae(re,Ce,it.value,pe);if(Ws===null){Ce===null&&(Ce=hn);break}i&&Ce&&Ws.alternate===null&&o(re,Ce),ee=v(Ws,ee,De),qe===null?Se=Ws:qe.sibling=Ws,qe=Ws,Ce=hn}if(it.done)return l(re,Ce),ot&&Zo(re,De),Se;if(Ce===null){for(;!it.done;De++,it=se.next())it=ge(re,it.value,pe),it!==null&&(ee=v(it,ee,De),qe===null?Se=it:qe.sibling=it,qe=it);return ot&&Zo(re,De),Se}for(Ce=d(Ce);!it.done;De++,it=se.next())it=ce(Ce,re,De,it.value,pe),it!==null&&(i&&it.alternate!==null&&Ce.delete(it.key===null?De:it.key),ee=v(it,ee,De),qe===null?Se=it:qe.sibling=it,qe=it);return i&&Ce.forEach(function(aO){return o(re,aO)}),ot&&Zo(re,De),Se}function pt(re,ee,se,pe){if(typeof se=="object"&&se!==null&&se.type===T&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Se=se.key;ee!==null;){if(ee.key===Se){if(Se=se.type,Se===T){if(ee.tag===7){l(re,ee.sibling),pe=g(ee,se.props.children),pe.return=re,re=pe;break e}}else if(ee.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===S&&uw(Se)===ee.type){l(re,ee.sibling),pe=g(ee,se.props),cu(pe,se),pe.return=re,re=pe;break e}l(re,ee);break}else o(re,ee);ee=ee.sibling}se.type===T?(pe=Wo(se.props.children,re.mode,pe,se.key),pe.return=re,re=pe):(pe=Th(se.type,se.key,se.props,null,re.mode,pe),cu(pe,se),pe.return=re,re=pe)}return x(re);case E:e:{for(Se=se.key;ee!==null;){if(ee.key===Se)if(ee.tag===4&&ee.stateNode.containerInfo===se.containerInfo&&ee.stateNode.implementation===se.implementation){l(re,ee.sibling),pe=g(ee,se.children||[]),pe.return=re,re=pe;break e}else{l(re,ee);break}else o(re,ee);ee=ee.sibling}pe=Xp(se,re.mode,pe),pe.return=re,re=pe}return x(re);case S:return Se=se._init,se=Se(se._payload),pt(re,ee,se,pe)}if(q(se))return Pe(re,ee,se,pe);if($(se)){if(Se=$(se),typeof Se!="function")throw Error(r(150));return se=Se.call(se),Ne(re,ee,se,pe)}if(typeof se.then=="function")return pt(re,ee,jh(se),pe);if(se.$$typeof===B)return pt(re,ee,Rh(re,se),pe);Hh(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,ee!==null&&ee.tag===6?(l(re,ee.sibling),pe=g(ee,se),pe.return=re,re=pe):(l(re,ee),pe=Kp(se,re.mode,pe),pe.return=re,re=pe),x(re)):l(re,ee)}return function(re,ee,se,pe){try{lu=0;var Se=pt(re,ee,se,pe);return pl=null,Se}catch(Ce){if(Ce===Jc||Ce===Nh)throw Ce;var qe=or(29,Ce,null,re.mode);return qe.lanes=pe,qe.return=re,qe}finally{}}}var gl=dw(!0),hw=dw(!1),Or=J(null),wi=null;function Ps(i){var o=i.alternate;Z(rn,rn.current&1),Z(Or,i),wi===null&&(o===null||dl.current!==null||o.memoizedState!==null)&&(wi=i)}function fw(i){if(i.tag===22){if(Z(rn,rn.current),Z(Or,i),wi===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(wi=i)}}else Vs()}function Vs(){Z(rn,rn.current),Z(Or,Or.current)}function is(i){ne(Or),wi===i&&(wi=null),ne(rn)}var rn=J(0);function Fh(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||y0(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Rg(i,o,l,d){o=i.memoizedState,l=l(d,o),l=l==null?o:p({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Ig={enqueueSetState:function(i,o,l){i=i._reactInternals;var d=ur(),g=Ds(d);g.payload=o,l!=null&&(g.callback=l),o=Ms(i,g,d),o!==null&&(dr(o,i,d),tu(o,i,d))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var d=ur(),g=Ds(d);g.tag=1,g.payload=o,l!=null&&(g.callback=l),o=Ms(i,g,d),o!==null&&(dr(o,i,d),tu(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=ur(),d=Ds(l);d.tag=2,o!=null&&(d.callback=o),o=Ms(i,d,l),o!==null&&(dr(o,i,l),tu(o,i,l))}};function mw(i,o,l,d,g,v,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,x):o.prototype&&o.prototype.isPureReactComponent?!qc(l,d)||!qc(g,v):!0}function pw(i,o,l,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==i&&Ig.enqueueReplaceState(o,o.state,null)}function sa(i,o){var l=o;if("ref"in o){l={};for(var d in o)d!=="ref"&&(l[d]=o[d])}if(i=i.defaultProps){l===o&&(l=p({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var $h=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function gw(i){$h(i)}function yw(i){console.error(i)}function vw(i){$h(i)}function qh(i,o){try{var l=i.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function bw(i,o,l){try{var d=i.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Ng(i,o,l){return l=Ds(l),l.tag=3,l.payload={element:null},l.callback=function(){qh(i,o)},l}function _w(i){return i=Ds(i),i.tag=3,i}function Ew(i,o,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;i.payload=function(){return g(v)},i.callback=function(){bw(o,l,d)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){bw(o,l,d),typeof g!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var V=d.stack;this.componentDidCatch(d.value,{componentStack:V!==null?V:""})})}function aM(i,o,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=l.alternate,o!==null&&Wc(o,l,g,!0),l=Or.current,l!==null){switch(l.tag){case 13:return wi===null?e0():l.alternate===null&&Dt===0&&(Dt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===sg?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([d]):o.add(d),n0(i,d,g)),!1;case 22:return l.flags|=65536,d===sg?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([d]):l.add(d)),n0(i,d,g)),!1}throw Error(r(435,l.tag))}return n0(i,d,g),e0(),!1}if(ot)return o=Or.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,d!==Zp&&(i=Error(r(422),{cause:d}),Xc(Nr(i,l)))):(d!==Zp&&(o=Error(r(423),{cause:d}),Xc(Nr(o,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=Nr(d,l),g=Ng(i.stateNode,d,g),lg(i,g),Dt!==4&&(Dt=2)),!1;var v=Error(r(520),{cause:d});if(v=Nr(v,l),gu===null?gu=[v]:gu.push(v),Dt!==4&&(Dt=2),o===null)return!0;d=Nr(d,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Ng(l.stateNode,d,i),lg(l,i),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hs===null||!Hs.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=_w(g),Ew(g,i,l,d),lg(l,g),!1}l=l.return}while(l!==null);return!1}var ww=Error(r(461)),un=!1;function vn(i,o,l,d){o.child=i===null?hw(o,null,l,d):gl(o,i.child,l,d)}function xw(i,o,l,d,g){l=l.render;var v=o.ref;if("ref"in d){var x={};for(var V in d)V!=="ref"&&(x[V]=d[V])}else x=d;return na(o),d=fg(i,o,l,x,v,g),V=mg(),i!==null&&!un?(pg(i,o,g),ss(i,o,g)):(ot&&V&&Wp(o),o.flags|=1,vn(i,o,d,g),o.child)}function Tw(i,o,l,d,g){if(i===null){var v=l.type;return typeof v=="function"&&!Yp(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,Sw(i,o,v,d,g)):(i=Th(l.type,null,d,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!zg(i,g)){var x=v.memoizedProps;if(l=l.compare,l=l!==null?l:qc,l(x,d)&&i.ref===o.ref)return ss(i,o,g)}return o.flags|=1,i=Zi(v,d),i.ref=o.ref,i.return=o,o.child=i}function Sw(i,o,l,d,g){if(i!==null){var v=i.memoizedProps;if(qc(v,d)&&i.ref===o.ref)if(un=!1,o.pendingProps=d=v,zg(i,g))(i.flags&131072)!==0&&(un=!0);else return o.lanes=i.lanes,ss(i,o,g)}return kg(i,o,l,d,g)}function Aw(i,o,l){var d=o.pendingProps,g=d.children,v=i!==null?i.memoizedState:null;if(d.mode==="hidden"){if((o.flags&128)!==0){if(d=v!==null?v.baseLanes|l:l,i!==null){for(g=o.child=i.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;o.childLanes=v&~d}else o.childLanes=0,o.child=null;return Cw(i,o,d,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ih(o,v!==null?v.cachePool:null),v!==null?SE(o,v):ug(),fw(o);else return o.lanes=o.childLanes=536870912,Cw(i,o,v!==null?v.baseLanes|l:l,l)}else v!==null?(Ih(o,v.cachePool),SE(o,v),Vs(),o.memoizedState=null):(i!==null&&Ih(o,null),ug(),Vs());return vn(i,o,g,l),o.child}function Cw(i,o,l,d){var g=ig();return g=g===null?null:{parent:nn._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},i!==null&&Ih(o,null),ug(),fw(o),i!==null&&Wc(i,o,d,!0),null}function Gh(i,o){var l=o.ref;if(l===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(o.flags|=4194816)}}function kg(i,o,l,d,g){return na(o),l=fg(i,o,l,d,void 0,g),d=mg(),i!==null&&!un?(pg(i,o,g),ss(i,o,g)):(ot&&d&&Wp(o),o.flags|=1,vn(i,o,l,g),o.child)}function Rw(i,o,l,d,g,v){return na(o),o.updateQueue=null,l=CE(o,d,l,g),AE(i),d=mg(),i!==null&&!un?(pg(i,o,v),ss(i,o,v)):(ot&&d&&Wp(o),o.flags|=1,vn(i,o,l,v),o.child)}function Iw(i,o,l,d,g){if(na(o),o.stateNode===null){var v=ol,x=l.contextType;typeof x=="object"&&x!==null&&(v=An(x)),v=new l(d,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Ig,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=d,v.state=o.memoizedState,v.refs={},og(o),x=l.contextType,v.context=typeof x=="object"&&x!==null?An(x):ol,v.state=o.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Rg(o,l,x,d),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(x=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),x!==v.state&&Ig.enqueueReplaceState(v,v.state,null),ru(o,d,v,g),nu(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){v=o.stateNode;var V=o.memoizedProps,Q=sa(l,V);v.props=Q;var oe=v.context,he=l.contextType;x=ol,typeof he=="object"&&he!==null&&(x=An(he));var ge=l.getDerivedStateFromProps;he=typeof ge=="function"||typeof v.getSnapshotBeforeUpdate=="function",V=o.pendingProps!==V,he||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(V||oe!==x)&&pw(o,v,d,x),ks=!1;var ae=o.memoizedState;v.state=ae,ru(o,d,v,g),nu(),oe=o.memoizedState,V||ae!==oe||ks?(typeof ge=="function"&&(Rg(o,l,ge,d),oe=o.memoizedState),(Q=ks||mw(o,l,Q,d,ae,oe,x))?(he||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=oe),v.props=d,v.state=oe,v.context=x,d=Q):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{v=o.stateNode,ag(i,o),x=o.memoizedProps,he=sa(l,x),v.props=he,ge=o.pendingProps,ae=v.context,oe=l.contextType,Q=ol,typeof oe=="object"&&oe!==null&&(Q=An(oe)),V=l.getDerivedStateFromProps,(oe=typeof V=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x!==ge||ae!==Q)&&pw(o,v,d,Q),ks=!1,ae=o.memoizedState,v.state=ae,ru(o,d,v,g),nu();var ce=o.memoizedState;x!==ge||ae!==ce||ks||i!==null&&i.dependencies!==null&&Ch(i.dependencies)?(typeof V=="function"&&(Rg(o,l,V,d),ce=o.memoizedState),(he=ks||mw(o,l,he,d,ae,ce,Q)||i!==null&&i.dependencies!==null&&Ch(i.dependencies))?(oe||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ce,Q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ce,Q)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ce),v.props=d,v.state=ce,v.context=Q,d=he):(typeof v.componentDidUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&ae===i.memoizedState||(o.flags|=1024),d=!1)}return v=d,Gh(i,o),d=(o.flags&128)!==0,v||d?(v=o.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&d?(o.child=gl(o,i.child,null,g),o.child=gl(o,null,l,g)):vn(i,o,l,g),o.memoizedState=v.state,i=o.child):i=ss(i,o,g),i}function Nw(i,o,l,d){return Kc(),o.flags|=256,vn(i,o,l,d),o.child}var Dg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mg(i){return{baseLanes:i,cachePool:yE()}}function Og(i,o,l){return i=i!==null?i.childLanes&~l:0,o&&(i|=Pr),i}function kw(i,o,l){var d=o.pendingProps,g=!1,v=(o.flags&128)!==0,x;if((x=v)||(x=i!==null&&i.memoizedState===null?!1:(rn.current&2)!==0),x&&(g=!0,o.flags&=-129),x=(o.flags&32)!==0,o.flags&=-33,i===null){if(ot){if(g?Ps(o):Vs(),ot){var V=kt,Q;if(Q=V){e:{for(Q=V,V=Ei;Q.nodeType!==8;){if(!V){V=null;break e}if(Q=Xr(Q.nextSibling),Q===null){V=null;break e}}V=Q}V!==null?(o.memoizedState={dehydrated:V,treeContext:Qo!==null?{id:Ji,overflow:es}:null,retryLane:536870912,hydrationErrors:null},Q=or(18,null,null,0),Q.stateNode=V,Q.return=o,o.child=Q,Hn=o,kt=null,Q=!0):Q=!1}Q||ea(o)}if(V=o.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return y0(V)?o.lanes=32:o.lanes=536870912,null;is(o)}return V=d.children,d=d.fallback,g?(Vs(),g=o.mode,V=Yh({mode:"hidden",children:V},g),d=Wo(d,g,l,null),V.return=o,d.return=o,V.sibling=d,o.child=V,g=o.child,g.memoizedState=Mg(l),g.childLanes=Og(i,x,l),o.memoizedState=Dg,d):(Ps(o),Pg(o,V))}if(Q=i.memoizedState,Q!==null&&(V=Q.dehydrated,V!==null)){if(v)o.flags&256?(Ps(o),o.flags&=-257,o=Vg(i,o,l)):o.memoizedState!==null?(Vs(),o.child=i.child,o.flags|=128,o=null):(Vs(),g=d.fallback,V=o.mode,d=Yh({mode:"visible",children:d.children},V),g=Wo(g,V,l,null),g.flags|=2,d.return=o,g.return=o,d.sibling=g,o.child=d,gl(o,i.child,null,l),d=o.child,d.memoizedState=Mg(l),d.childLanes=Og(i,x,l),o.memoizedState=Dg,o=g);else if(Ps(o),y0(V)){if(x=V.nextSibling&&V.nextSibling.dataset,x)var oe=x.dgst;x=oe,d=Error(r(419)),d.stack="",d.digest=x,Xc({value:d,source:null,stack:null}),o=Vg(i,o,l)}else if(un||Wc(i,o,l,!1),x=(l&i.childLanes)!==0,un||x){if(x=vt,x!==null&&(d=l&-l,d=(d&42)!==0?1:ai(d),d=(d&(x.suspendedLanes|l))!==0?0:d,d!==0&&d!==Q.retryLane))throw Q.retryLane=d,sl(i,d),dr(x,i,d),ww;V.data==="$?"||e0(),o=Vg(i,o,l)}else V.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=Q.treeContext,kt=Xr(V.nextSibling),Hn=o,ot=!0,Jo=null,Ei=!1,i!==null&&(Dr[Mr++]=Ji,Dr[Mr++]=es,Dr[Mr++]=Qo,Ji=i.id,es=i.overflow,Qo=o),o=Pg(o,d.children),o.flags|=4096);return o}return g?(Vs(),g=d.fallback,V=o.mode,Q=i.child,oe=Q.sibling,d=Zi(Q,{mode:"hidden",children:d.children}),d.subtreeFlags=Q.subtreeFlags&65011712,oe!==null?g=Zi(oe,g):(g=Wo(g,V,l,null),g.flags|=2),g.return=o,d.return=o,d.sibling=g,o.child=d,d=g,g=o.child,V=i.child.memoizedState,V===null?V=Mg(l):(Q=V.cachePool,Q!==null?(oe=nn._currentValue,Q=Q.parent!==oe?{parent:oe,pool:oe}:Q):Q=yE(),V={baseLanes:V.baseLanes|l,cachePool:Q}),g.memoizedState=V,g.childLanes=Og(i,x,l),o.memoizedState=Dg,d):(Ps(o),l=i.child,i=l.sibling,l=Zi(l,{mode:"visible",children:d.children}),l.return=o,l.sibling=null,i!==null&&(x=o.deletions,x===null?(o.deletions=[i],o.flags|=16):x.push(i)),o.child=l,o.memoizedState=null,l)}function Pg(i,o){return o=Yh({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Yh(i,o){return i=or(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Vg(i,o,l){return gl(o,i.child,null,l),i=Pg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Dw(i,o,l){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),eg(i.return,o,l)}function Lg(i,o,l,d,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=l,v.tailMode=g)}function Mw(i,o,l){var d=o.pendingProps,g=d.revealOrder,v=d.tail;if(vn(i,o,d.children,l),d=rn.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Dw(i,l,o);else if(i.tag===19)Dw(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}switch(Z(rn,d),g){case"forwards":for(l=o.child,g=null;l!==null;)i=l.alternate,i!==null&&Fh(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),Lg(o,!1,g,l,v);break;case"backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Fh(i)===null){o.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Lg(o,!0,l,null,v);break;case"together":Lg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ss(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),js|=o.lanes,(l&o.childLanes)===0)if(i!==null){if(Wc(i,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,l=Zi(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=Zi(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function zg(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Ch(i)))}function lM(i,o,l){switch(o.tag){case 3:be(o,o.stateNode.containerInfo),Ns(o,nn,i.memoizedState.cache),Kc();break;case 27:case 5:Re(o);break;case 4:be(o,o.stateNode.containerInfo);break;case 10:Ns(o,o.type,o.memoizedProps.value);break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Ps(o),o.flags|=128,null):(l&o.child.childLanes)!==0?kw(i,o,l):(Ps(o),i=ss(i,o,l),i!==null?i.sibling:null);Ps(o);break;case 19:var g=(i.flags&128)!==0;if(d=(l&o.childLanes)!==0,d||(Wc(i,o,l,!1),d=(l&o.childLanes)!==0),g){if(d)return Mw(i,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(rn,rn.current),d)break;return null;case 22:case 23:return o.lanes=0,Aw(i,o,l);case 24:Ns(o,nn,i.memoizedState.cache)}return ss(i,o,l)}function Ow(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps)un=!0;else{if(!zg(i,l)&&(o.flags&128)===0)return un=!1,lM(i,o,l);un=(i.flags&131072)!==0}else un=!1,ot&&(o.flags&1048576)!==0&&uE(o,Ah,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var d=o.elementType,g=d._init;if(d=g(d._payload),o.type=d,typeof d=="function")Yp(d)?(i=sa(d,i),o.tag=1,o=Iw(null,o,d,i,l)):(o.tag=0,o=kg(null,o,d,i,l));else{if(d!=null){if(g=d.$$typeof,g===U){o.tag=11,o=xw(null,o,d,i,l);break e}else if(g===D){o.tag=14,o=Tw(null,o,d,i,l);break e}}throw o=L(d)||d,Error(r(306,o,""))}}return o;case 0:return kg(i,o,o.type,o.pendingProps,l);case 1:return d=o.type,g=sa(d,o.pendingProps),Iw(i,o,d,g,l);case 3:e:{if(be(o,o.stateNode.containerInfo),i===null)throw Error(r(387));d=o.pendingProps;var v=o.memoizedState;g=v.element,ag(i,o),ru(o,d,null,l);var x=o.memoizedState;if(d=x.cache,Ns(o,nn,d),d!==v.cache&&tg(o,[nn],l,!0),nu(),d=x.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:x.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Nw(i,o,d,l);break e}else if(d!==g){g=Nr(Error(r(424)),o),Xc(g),o=Nw(i,o,d,l);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(kt=Xr(i.firstChild),Hn=o,ot=!0,Jo=null,Ei=!0,l=hw(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Kc(),d===g){o=ss(i,o,l);break e}vn(i,o,d,l)}o=o.child}return o;case 26:return Gh(i,o),i===null?(l=zx(o.type,null,o.pendingProps,null))?o.memoizedState=l:ot||(l=o.type,i=o.pendingProps,d=lf(de.current).createElement(l),d[Lt]=o,d[Nt]=i,_n(d,l,i),Tt(d),o.stateNode=d):o.memoizedState=zx(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Re(o),i===null&&ot&&(d=o.stateNode=Px(o.type,o.pendingProps,de.current),Hn=o,Ei=!0,g=kt,qs(o.type)?(v0=g,kt=Xr(d.firstChild)):kt=g),vn(i,o,o.pendingProps.children,l),Gh(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&ot&&((g=d=kt)&&(d=VM(d,o.type,o.pendingProps,Ei),d!==null?(o.stateNode=d,Hn=o,kt=Xr(d.firstChild),Ei=!1,g=!0):g=!1),g||ea(o)),Re(o),g=o.type,v=o.pendingProps,x=i!==null?i.memoizedProps:null,d=v.children,m0(g,v)?d=null:x!==null&&m0(g,x)&&(o.flags|=32),o.memoizedState!==null&&(g=fg(i,o,eM,null,null,l),Su._currentValue=g),Gh(i,o),vn(i,o,d,l),o.child;case 6:return i===null&&ot&&((i=l=kt)&&(l=LM(l,o.pendingProps,Ei),l!==null?(o.stateNode=l,Hn=o,kt=null,i=!0):i=!1),i||ea(o)),null;case 13:return kw(i,o,l);case 4:return be(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=gl(o,null,d,l):vn(i,o,d,l),o.child;case 11:return xw(i,o,o.type,o.pendingProps,l);case 7:return vn(i,o,o.pendingProps,l),o.child;case 8:return vn(i,o,o.pendingProps.children,l),o.child;case 12:return vn(i,o,o.pendingProps.children,l),o.child;case 10:return d=o.pendingProps,Ns(o,o.type,d.value),vn(i,o,d.children,l),o.child;case 9:return g=o.type._context,d=o.pendingProps.children,na(o),g=An(g),d=d(g),o.flags|=1,vn(i,o,d,l),o.child;case 14:return Tw(i,o,o.type,o.pendingProps,l);case 15:return Sw(i,o,o.type,o.pendingProps,l);case 19:return Mw(i,o,l);case 31:return d=o.pendingProps,l=o.mode,d={mode:d.mode,children:d.children},i===null?(l=Yh(d,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=Zi(i.child,d),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return Aw(i,o,l);case 24:return na(o),d=An(nn),i===null?(g=ig(),g===null&&(g=vt,v=ng(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),o.memoizedState={parent:d,cache:g},og(o),Ns(o,nn,g)):((i.lanes&l)!==0&&(ag(i,o),ru(o,null,null,l),nu()),g=i.memoizedState,v=o.memoizedState,g.parent!==d?(g={parent:d,cache:d},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Ns(o,nn,d)):(d=v.cache,Ns(o,nn,d),d!==g.cache&&tg(o,[nn],l,!0))),vn(i,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function os(i){i.flags|=4}function Pw(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Fx(o)){if(o=Or.current,o!==null&&((tt&4194048)===tt?wi!==null:(tt&62914560)!==tt&&(tt&536870912)===0||o!==wi))throw eu=sg,vE;i.flags|=8192}}function Kh(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Fr():536870912,i.lanes|=o,_l|=o)}function uu(i,o){if(!ot)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function St(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(o)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=l,o}function cM(i,o,l){var d=o.pendingProps;switch(Qp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(o),null;case 1:return St(o),null;case 3:return l=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ns(nn),Ae(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(Yc(o)?os(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,fE())),St(o),null;case 26:return l=o.memoizedState,i===null?(os(o),l!==null?(St(o),Pw(o,l)):(St(o),o.flags&=-16777217)):l?l!==i.memoizedState?(os(o),St(o),Pw(o,l)):(St(o),o.flags&=-16777217):(i.memoizedProps!==d&&os(o),St(o),o.flags&=-16777217),null;case 27:rt(o),l=de.current;var g=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==d&&os(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return St(o),null}i=te.current,Yc(o)?dE(o):(i=Px(g,d,l),o.stateNode=i,os(o))}return St(o),null;case 5:if(rt(o),l=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&os(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return St(o),null}if(i=te.current,Yc(o))dE(o);else{switch(g=lf(de.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?i.multiple=!0:d.size&&(i.size=d.size);break;default:i=typeof d.is=="string"?g.createElement(l,{is:d.is}):g.createElement(l)}}i[Lt]=o,i[Nt]=d;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=i;e:switch(_n(i,l,d),l){case"button":case"input":case"select":case"textarea":i=!!d.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&os(o)}}return St(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&os(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(i=de.current,Yc(o)){if(i=o.stateNode,l=o.memoizedProps,d=null,g=Hn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[Lt]=o,i=!!(i.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Rx(i.nodeValue,l)),i||ea(o)}else i=lf(i).createTextNode(d),i[Lt]=o,o.stateNode=i}return St(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Yc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=o}else Kc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),g=!1}else g=fE(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(is(o),o):(is(o),null)}if(is(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=d!==null,i=i!==null&&i.memoizedState!==null,l){d=o.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)}return l!==i&&l&&(o.child.flags|=8192),Kh(o,o.updateQueue),St(o),null;case 4:return Ae(),i===null&&c0(o.stateNode.containerInfo),St(o),null;case 10:return ns(o.type),St(o),null;case 19:if(ne(rn),g=o.memoizedState,g===null)return St(o),null;if(d=(o.flags&128)!==0,v=g.rendering,v===null)if(d)uu(g,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=Fh(i),v!==null){for(o.flags|=128,uu(g,!1),i=v.updateQueue,o.updateQueue=i,Kh(o,i),o.subtreeFlags=0,i=l,l=o.child;l!==null;)cE(l,i),l=l.sibling;return Z(rn,rn.current&1|2),o.child}i=i.sibling}g.tail!==null&&Be()>Qh&&(o.flags|=128,d=!0,uu(g,!1),o.lanes=4194304)}else{if(!d)if(i=Fh(v),i!==null){if(o.flags|=128,d=!0,i=i.updateQueue,o.updateQueue=i,Kh(o,i),uu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!ot)return St(o),null}else 2*Be()-g.renderingStartTime>Qh&&l!==536870912&&(o.flags|=128,d=!0,uu(g,!1),o.lanes=4194304);g.isBackwards?(v.sibling=o.child,o.child=v):(i=g.last,i!==null?i.sibling=v:o.child=v,g.last=v)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Be(),o.sibling=null,i=rn.current,Z(rn,d?i&1|2:i&1),o):(St(o),null);case 22:case 23:return is(o),dg(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(l&536870912)!==0&&(o.flags&128)===0&&(St(o),o.subtreeFlags&6&&(o.flags|=8192)):St(o),l=o.updateQueue,l!==null&&Kh(o,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==l&&(o.flags|=2048),i!==null&&ne(ra),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ns(nn),St(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function uM(i,o){switch(Qp(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ns(nn),Ae(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return rt(o),null;case 13:if(is(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Kc()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ne(rn),null;case 4:return Ae(),null;case 10:return ns(o.type),null;case 22:case 23:return is(o),dg(),i!==null&&ne(ra),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ns(nn),null;case 25:return null;default:return null}}function Vw(i,o){switch(Qp(o),o.tag){case 3:ns(nn),Ae();break;case 26:case 27:case 5:rt(o);break;case 4:Ae();break;case 13:is(o);break;case 19:ne(rn);break;case 10:ns(o.type);break;case 22:case 23:is(o),dg(),i!==null&&ne(ra);break;case 24:ns(nn)}}function du(i,o){try{var l=o.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&i)===i){d=void 0;var v=l.create,x=l.inst;d=v(),x.destroy=d}l=l.next}while(l!==g)}}catch(V){gt(o,o.return,V)}}function Ls(i,o,l){try{var d=o.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&i)===i){var x=d.inst,V=x.destroy;if(V!==void 0){x.destroy=void 0,g=o;var Q=l,oe=V;try{oe()}catch(he){gt(g,Q,he)}}}d=d.next}while(d!==v)}}catch(he){gt(o,o.return,he)}}function Lw(i){var o=i.updateQueue;if(o!==null){var l=i.stateNode;try{TE(o,l)}catch(d){gt(i,i.return,d)}}}function zw(i,o,l){l.props=sa(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(d){gt(i,o,d)}}function hu(i,o){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof l=="function"?i.refCleanup=l(d):l.current=d}}catch(g){gt(i,o,g)}}function xi(i,o){var l=i.ref,d=i.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){gt(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){gt(i,o,g)}else l.current=null}function Uw(i){var o=i.type,l=i.memoizedProps,d=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){gt(i,i.return,g)}}function Ug(i,o,l){try{var d=i.stateNode;kM(d,i.type,l,o),d[Nt]=o}catch(g){gt(i,i.return,g)}}function Bw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&qs(i.type)||i.tag===4}function Bg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Bw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&qs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function jg(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(i),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=af));else if(d!==4&&(d===27&&qs(i.type)&&(l=i.stateNode,o=null),i=i.child,i!==null))for(jg(i,o,l),i=i.sibling;i!==null;)jg(i,o,l),i=i.sibling}function Xh(i,o,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(d!==4&&(d===27&&qs(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Xh(i,o,l),i=i.sibling;i!==null;)Xh(i,o,l),i=i.sibling}function jw(i){var o=i.stateNode,l=i.memoizedProps;try{for(var d=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);_n(o,d,l),o[Lt]=i,o[Nt]=l}catch(v){gt(i,i.return,v)}}var as=!1,Ut=!1,Hg=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,dn=null;function dM(i,o){if(i=i.containerInfo,h0=mf,i=J_(i),Bp(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var x=0,V=-1,Q=-1,oe=0,he=0,ge=i,ae=null;t:for(;;){for(var ce;ge!==l||g!==0&&ge.nodeType!==3||(V=x+g),ge!==v||d!==0&&ge.nodeType!==3||(Q=x+d),ge.nodeType===3&&(x+=ge.nodeValue.length),(ce=ge.firstChild)!==null;)ae=ge,ge=ce;for(;;){if(ge===i)break t;if(ae===l&&++oe===g&&(V=x),ae===v&&++he===d&&(Q=x),(ce=ge.nextSibling)!==null)break;ge=ae,ae=ge.parentNode}ge=ce}l=V===-1||Q===-1?null:{start:V,end:Q}}else l=null}l=l||{start:0,end:0}}else l=null;for(f0={focusedElem:i,selectionRange:l},mf=!1,dn=o;dn!==null;)if(o=dn,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,dn=i;else for(;dn!==null;){switch(o=dn,v=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=o,g=v.memoizedProps,v=v.memoizedState,d=l.stateNode;try{var Pe=sa(l.type,g,l.elementType===l.type);i=d.getSnapshotBeforeUpdate(Pe,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ne){gt(l,l.return,Ne)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,l=i.nodeType,l===9)g0(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":g0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,dn=i;break}dn=o.return}}function Fw(i,o,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:zs(i,l),d&4&&du(5,l);break;case 1:if(zs(i,l),d&4)if(i=l.stateNode,o===null)try{i.componentDidMount()}catch(x){gt(l,l.return,x)}else{var g=sa(l.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(x){gt(l,l.return,x)}}d&64&&Lw(l),d&512&&hu(l,l.return);break;case 3:if(zs(i,l),d&64&&(i=l.updateQueue,i!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{TE(i,o)}catch(x){gt(l,l.return,x)}}break;case 27:o===null&&d&4&&jw(l);case 26:case 5:zs(i,l),o===null&&d&4&&Uw(l),d&512&&hu(l,l.return);break;case 12:zs(i,l);break;case 13:zs(i,l),d&4&&Gw(i,l),d&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=_M.bind(null,l),zM(i,l))));break;case 22:if(d=l.memoizedState!==null||as,!d){o=o!==null&&o.memoizedState!==null||Ut,g=as;var v=Ut;as=d,(Ut=o)&&!v?Us(i,l,(l.subtreeFlags&8772)!==0):zs(i,l),as=g,Ut=v}break;case 30:break;default:zs(i,l)}}function $w(i){var o=i.alternate;o!==null&&(i.alternate=null,$w(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&ui(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Et=null,Yn=!1;function ls(i,o,l){for(l=l.child;l!==null;)qw(i,o,l),l=l.sibling}function qw(i,o,l){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(at,l)}catch{}switch(l.tag){case 26:Ut||xi(l,o),ls(i,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ut||xi(l,o);var d=Et,g=Yn;qs(l.type)&&(Et=l.stateNode,Yn=!1),ls(i,o,l),Eu(l.stateNode),Et=d,Yn=g;break;case 5:Ut||xi(l,o);case 6:if(d=Et,g=Yn,Et=null,ls(i,o,l),Et=d,Yn=g,Et!==null)if(Yn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(l.stateNode)}catch(v){gt(l,o,v)}else try{Et.removeChild(l.stateNode)}catch(v){gt(l,o,v)}break;case 18:Et!==null&&(Yn?(i=Et,Mx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Iu(i)):Mx(Et,l.stateNode));break;case 4:d=Et,g=Yn,Et=l.stateNode.containerInfo,Yn=!0,ls(i,o,l),Et=d,Yn=g;break;case 0:case 11:case 14:case 15:Ut||Ls(2,l,o),Ut||Ls(4,l,o),ls(i,o,l);break;case 1:Ut||(xi(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"&&zw(l,o,d)),ls(i,o,l);break;case 21:ls(i,o,l);break;case 22:Ut=(d=Ut)||l.memoizedState!==null,ls(i,o,l),Ut=d;break;default:ls(i,o,l)}}function Gw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Iu(i)}catch(l){gt(o,o.return,l)}}function hM(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Hw),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Hw),o;default:throw Error(r(435,i.tag))}}function Fg(i,o){var l=hM(i);o.forEach(function(d){var g=EM.bind(null,i,d);l.has(d)||(l.add(d),d.then(g,g))})}function ar(i,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],v=i,x=o,V=x;e:for(;V!==null;){switch(V.tag){case 27:if(qs(V.type)){Et=V.stateNode,Yn=!1;break e}break;case 5:Et=V.stateNode,Yn=!1;break e;case 3:case 4:Et=V.stateNode.containerInfo,Yn=!0;break e}V=V.return}if(Et===null)throw Error(r(160));qw(v,x,g),Et=null,Yn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Yw(o,i),o=o.sibling}var Kr=null;function Yw(i,o){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ar(o,i),lr(i),d&4&&(Ls(3,i,i.return),du(3,i),Ls(5,i,i.return));break;case 1:ar(o,i),lr(i),d&512&&(Ut||l===null||xi(l,l.return)),d&64&&as&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=Kr;if(ar(o,i),lr(i),d&512&&(Ut||l===null||xi(l,l.return)),d&4){var v=l!==null?l.memoizedState:null;if(d=i.memoizedState,l===null)if(d===null)if(i.stateNode===null){e:{d=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Fi]||v[Lt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),_n(v,d,l),v[Lt]=i,Tt(v),d=v;break e;case"link":var x=jx("link","href",g).get(d+(l.href||""));if(x){for(var V=0;V<x.length;V++)if(v=x[V],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(V,1);break t}}v=g.createElement(d),_n(v,d,l),g.head.appendChild(v);break;case"meta":if(x=jx("meta","content",g).get(d+(l.content||""))){for(V=0;V<x.length;V++)if(v=x[V],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(V,1);break t}}v=g.createElement(d),_n(v,d,l),g.head.appendChild(v);break;default:throw Error(r(468,d))}v[Lt]=i,Tt(v),d=v}i.stateNode=d}else Hx(g,i.type,i.stateNode);else i.stateNode=Bx(g,d,i.memoizedProps);else v!==d?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,d===null?Hx(g,i.type,i.stateNode):Bx(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&Ug(i,i.memoizedProps,l.memoizedProps)}break;case 27:ar(o,i),lr(i),d&512&&(Ut||l===null||xi(l,l.return)),l!==null&&d&4&&Ug(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ar(o,i),lr(i),d&512&&(Ut||l===null||xi(l,l.return)),i.flags&32){g=i.stateNode;try{Ar(g,"")}catch(ce){gt(i,i.return,ce)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,Ug(i,g,l!==null?l.memoizedProps:g)),d&1024&&(Hg=!0);break;case 6:if(ar(o,i),lr(i),d&4){if(i.stateNode===null)throw Error(r(162));d=i.memoizedProps,l=i.stateNode;try{l.nodeValue=d}catch(ce){gt(i,i.return,ce)}}break;case 3:if(df=null,g=Kr,Kr=cf(o.containerInfo),ar(o,i),Kr=g,lr(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Iu(o.containerInfo)}catch(ce){gt(i,i.return,ce)}Hg&&(Hg=!1,Kw(i));break;case 4:d=Kr,Kr=cf(i.stateNode.containerInfo),ar(o,i),lr(i),Kr=d;break;case 12:ar(o,i),lr(i);break;case 13:ar(o,i),lr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Xg=Be()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Fg(i,d)));break;case 22:g=i.memoizedState!==null;var Q=l!==null&&l.memoizedState!==null,oe=as,he=Ut;if(as=oe||g,Ut=he||Q,ar(o,i),Ut=he,as=oe,lr(i),d&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(l===null||Q||as||Ut||oa(i)),l=null,o=i;;){if(o.tag===5||o.tag===26){if(l===null){Q=l=o;try{if(v=Q.stateNode,g)x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{V=Q.stateNode;var ge=Q.memoizedProps.style,ae=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;V.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ce){gt(Q,Q.return,ce)}}}else if(o.tag===6){if(l===null){Q=o;try{Q.stateNode.nodeValue=g?"":Q.memoizedProps}catch(ce){gt(Q,Q.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Fg(i,l))));break;case 19:ar(o,i),lr(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,Fg(i,d)));break;case 30:break;case 21:break;default:ar(o,i),lr(i)}}function lr(i){var o=i.flags;if(o&2){try{for(var l,d=i.return;d!==null;){if(Bw(d)){l=d;break}d=d.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,v=Bg(i);Xh(i,v,g);break;case 5:var x=l.stateNode;l.flags&32&&(Ar(x,""),l.flags&=-33);var V=Bg(i);Xh(i,V,x);break;case 3:case 4:var Q=l.stateNode.containerInfo,oe=Bg(i);jg(i,oe,Q);break;default:throw Error(r(161))}}catch(he){gt(i,i.return,he)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Kw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Kw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function zs(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Fw(i,o.alternate,o),o=o.sibling}function oa(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ls(4,o,o.return),oa(o);break;case 1:xi(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&zw(o,o.return,l),oa(o);break;case 27:Eu(o.stateNode);case 26:case 5:xi(o,o.return),oa(o);break;case 22:o.memoizedState===null&&oa(o);break;case 30:oa(o);break;default:oa(o)}i=i.sibling}}function Us(i,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,g=i,v=o,x=v.flags;switch(v.tag){case 0:case 11:case 15:Us(g,v,l),du(4,v);break;case 1:if(Us(g,v,l),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(oe){gt(d,d.return,oe)}if(d=v,g=d.updateQueue,g!==null){var V=d.stateNode;try{var Q=g.shared.hiddenCallbacks;if(Q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Q.length;g++)xE(Q[g],V)}catch(oe){gt(d,d.return,oe)}}l&&x&64&&Lw(v),hu(v,v.return);break;case 27:jw(v);case 26:case 5:Us(g,v,l),l&&d===null&&x&4&&Uw(v),hu(v,v.return);break;case 12:Us(g,v,l);break;case 13:Us(g,v,l),l&&x&4&&Gw(g,v);break;case 22:v.memoizedState===null&&Us(g,v,l),hu(v,v.return);break;case 30:break;default:Us(g,v,l)}o=o.sibling}}function $g(i,o){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Qc(l))}function qg(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Qc(i))}function Ti(i,o,l,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Xw(i,o,l,d),o=o.sibling}function Xw(i,o,l,d){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Ti(i,o,l,d),g&2048&&du(9,o);break;case 1:Ti(i,o,l,d);break;case 3:Ti(i,o,l,d),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Qc(i)));break;case 12:if(g&2048){Ti(i,o,l,d),i=o.stateNode;try{var v=o.memoizedProps,x=v.id,V=v.onPostCommit;typeof V=="function"&&V(x,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Q){gt(o,o.return,Q)}}else Ti(i,o,l,d);break;case 13:Ti(i,o,l,d);break;case 23:break;case 22:v=o.stateNode,x=o.alternate,o.memoizedState!==null?v._visibility&2?Ti(i,o,l,d):fu(i,o):v._visibility&2?Ti(i,o,l,d):(v._visibility|=2,yl(i,o,l,d,(o.subtreeFlags&10256)!==0)),g&2048&&$g(x,o);break;case 24:Ti(i,o,l,d),g&2048&&qg(o.alternate,o);break;default:Ti(i,o,l,d)}}function yl(i,o,l,d,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var v=i,x=o,V=l,Q=d,oe=x.flags;switch(x.tag){case 0:case 11:case 15:yl(v,x,V,Q,g),du(8,x);break;case 23:break;case 22:var he=x.stateNode;x.memoizedState!==null?he._visibility&2?yl(v,x,V,Q,g):fu(v,x):(he._visibility|=2,yl(v,x,V,Q,g)),g&&oe&2048&&$g(x.alternate,x);break;case 24:yl(v,x,V,Q,g),g&&oe&2048&&qg(x.alternate,x);break;default:yl(v,x,V,Q,g)}o=o.sibling}}function fu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=i,d=o,g=d.flags;switch(d.tag){case 22:fu(l,d),g&2048&&$g(d.alternate,d);break;case 24:fu(l,d),g&2048&&qg(d.alternate,d);break;default:fu(l,d)}o=o.sibling}}var mu=8192;function vl(i){if(i.subtreeFlags&mu)for(i=i.child;i!==null;)Ww(i),i=i.sibling}function Ww(i){switch(i.tag){case 26:vl(i),i.flags&mu&&i.memoizedState!==null&&QM(Kr,i.memoizedState,i.memoizedProps);break;case 5:vl(i);break;case 3:case 4:var o=Kr;Kr=cf(i.stateNode.containerInfo),vl(i),Kr=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=mu,mu=16777216,vl(i),mu=o):vl(i));break;default:vl(i)}}function Qw(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function pu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];dn=d,Jw(d,i)}Qw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zw(i),i=i.sibling}function Zw(i){switch(i.tag){case 0:case 11:case 15:pu(i),i.flags&2048&&Ls(9,i,i.return);break;case 3:pu(i);break;case 12:pu(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Wh(i)):pu(i);break;default:pu(i)}}function Wh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];dn=d,Jw(d,i)}Qw(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ls(8,o,o.return),Wh(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Wh(o));break;default:Wh(o)}i=i.sibling}}function Jw(i,o){for(;dn!==null;){var l=dn;switch(l.tag){case 0:case 11:case 15:Ls(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Qc(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,dn=d;else e:for(l=i;dn!==null;){d=dn;var g=d.sibling,v=d.return;if($w(d),d===l){dn=null;break e}if(g!==null){g.return=v,dn=g;break e}dn=v}}}var fM={getCacheForType:function(i){var o=An(nn),l=o.data.get(i);return l===void 0&&(l=i(),o.data.set(i,l)),l}},mM=typeof WeakMap=="function"?WeakMap:Map,ut=0,vt=null,Xe=null,tt=0,dt=0,cr=null,Bs=!1,bl=!1,Gg=!1,cs=0,Dt=0,js=0,aa=0,Yg=0,Pr=0,_l=0,gu=null,Kn=null,Kg=!1,Xg=0,Qh=1/0,Zh=null,Hs=null,bn=0,Fs=null,El=null,wl=0,Wg=0,Qg=null,ex=null,yu=0,Zg=null;function ur(){if((ut&2)!==0&&tt!==0)return tt&-tt;if(M.T!==null){var i=cl;return i!==0?i:s0()}return li()}function tx(){Pr===0&&(Pr=(tt&536870912)===0||ot?Hi():536870912);var i=Or.current;return i!==null&&(i.flags|=32),Pr}function dr(i,o,l){(i===vt&&(dt===2||dt===9)||i.cancelPendingCommit!==null)&&(xl(i,0),$s(i,tt,Pr,!1)),_r(i,l),((ut&2)===0||i!==vt)&&(i===vt&&((ut&2)===0&&(aa|=l),Dt===4&&$s(i,tt,Pr,!1)),Si(i))}function nx(i,o,l){if((ut&6)!==0)throw Error(r(327));var d=!l&&(o&124)===0&&(o&i.expiredLanes)===0||Un(i,o),g=d?yM(i,o):t0(i,o,!0),v=d;do{if(g===0){bl&&!d&&$s(i,o,0,!1);break}else{if(l=i.current.alternate,v&&!pM(l)){g=t0(i,o,!1),v=!1;continue}if(g===2){if(v=o,i.errorRecoveryDisabledLanes&v)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){o=x;e:{var V=i;g=gu;var Q=V.current.memoizedState.isDehydrated;if(Q&&(xl(V,x).flags|=256),x=t0(V,x,!1),x!==2){if(Gg&&!Q){V.errorRecoveryDisabledLanes|=v,aa|=v,g=4;break e}v=Kn,Kn=g,v!==null&&(Kn===null?Kn=v:Kn.push.apply(Kn,v))}g=x}if(v=!1,g!==2)continue}}if(g===1){xl(i,0),$s(i,o,0,!0);break}e:{switch(d=i,v=g,v){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:$s(d,o,Pr,!Bs);break e;case 2:Kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=Xg+300-Be(),10<g)){if($s(d,o,Pr,!Bs),pn(d,0,!0)!==0)break e;d.timeoutHandle=kx(rx.bind(null,d,l,Kn,Zh,Kg,o,Pr,aa,_l,Bs,v,2,-0,0),g);break e}rx(d,l,Kn,Zh,Kg,o,Pr,aa,_l,Bs,v,0,-0,0)}}break}while(!0);Si(i)}function rx(i,o,l,d,g,v,x,V,Q,oe,he,ge,ae,ce){if(i.timeoutHandle=-1,ge=o.subtreeFlags,(ge&8192||(ge&16785408)===16785408)&&(Tu={stylesheets:null,count:0,unsuspend:WM},Ww(o),ge=ZM(),ge!==null)){i.cancelPendingCommit=ge(ux.bind(null,i,o,v,l,d,g,x,V,Q,he,1,ae,ce)),$s(i,v,x,!oe);return}ux(i,o,v,l,d,g,x,V,Q)}function pM(i){for(var o=i;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],v=g.getSnapshot;g=g.value;try{if(!sr(v(),g))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $s(i,o,l,d){o&=~Yg,o&=~aa,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var g=o;0<g;){var v=31-xt(g),x=1<<v;d[v]=-1,g&=~x}l!==0&&Er(i,l,o)}function Jh(){return(ut&6)===0?(vu(0),!1):!0}function Jg(){if(Xe!==null){if(dt===0)var i=Xe.return;else i=Xe,ts=ta=null,gg(i),pl=null,lu=0,i=Xe;for(;i!==null;)Vw(i.alternate,i),i=i.return;Xe=null}}function xl(i,o){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,MM(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Jg(),vt=i,Xe=l=Zi(i.current,null),tt=o,dt=0,cr=null,Bs=!1,bl=Un(i,o),Gg=!1,_l=Pr=Yg=aa=js=Dt=0,Kn=gu=null,Kg=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var g=31-xt(d),v=1<<g;o|=i[g],d&=~v}return cs=o,Eh(),l}function ix(i,o){Fe=null,M.H=Bh,o===Jc||o===Nh?(o=EE(),dt=3):o===vE?(o=EE(),dt=4):dt=o===ww?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,cr=o,Xe===null&&(Dt=1,qh(i,Nr(o,i.current)))}function sx(){var i=M.H;return M.H=Bh,i===null?Bh:i}function ox(){var i=M.A;return M.A=fM,i}function e0(){Dt=4,Bs||(tt&4194048)!==tt&&Or.current!==null||(bl=!0),(js&134217727)===0&&(aa&134217727)===0||vt===null||$s(vt,tt,Pr,!1)}function t0(i,o,l){var d=ut;ut|=2;var g=sx(),v=ox();(vt!==i||tt!==o)&&(Zh=null,xl(i,o)),o=!1;var x=Dt;e:do try{if(dt!==0&&Xe!==null){var V=Xe,Q=cr;switch(dt){case 8:Jg(),x=6;break e;case 3:case 2:case 9:case 6:Or.current===null&&(o=!0);var oe=dt;if(dt=0,cr=null,Tl(i,V,Q,oe),l&&bl){x=0;break e}break;default:oe=dt,dt=0,cr=null,Tl(i,V,Q,oe)}}gM(),x=Dt;break}catch(he){ix(i,he)}while(!0);return o&&i.shellSuspendCounter++,ts=ta=null,ut=d,M.H=g,M.A=v,Xe===null&&(vt=null,tt=0,Eh()),x}function gM(){for(;Xe!==null;)ax(Xe)}function yM(i,o){var l=ut;ut|=2;var d=sx(),g=ox();vt!==i||tt!==o?(Zh=null,Qh=Be()+500,xl(i,o)):bl=Un(i,o);e:do try{if(dt!==0&&Xe!==null){o=Xe;var v=cr;t:switch(dt){case 1:dt=0,cr=null,Tl(i,o,v,1);break;case 2:case 9:if(bE(v)){dt=0,cr=null,lx(o);break}o=function(){dt!==2&&dt!==9||vt!==i||(dt=7),Si(i)},v.then(o,o);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:bE(v)?(dt=0,cr=null,lx(o)):(dt=0,cr=null,Tl(i,o,v,7));break;case 5:var x=null;switch(Xe.tag){case 26:x=Xe.memoizedState;case 5:case 27:var V=Xe;if(!x||Fx(x)){dt=0,cr=null;var Q=V.sibling;if(Q!==null)Xe=Q;else{var oe=V.return;oe!==null?(Xe=oe,ef(oe)):Xe=null}break t}}dt=0,cr=null,Tl(i,o,v,5);break;case 6:dt=0,cr=null,Tl(i,o,v,6);break;case 8:Jg(),Dt=6;break e;default:throw Error(r(462))}}vM();break}catch(he){ix(i,he)}while(!0);return ts=ta=null,M.H=d,M.A=g,ut=l,Xe!==null?0:(vt=null,tt=0,Eh(),Dt)}function vM(){for(;Xe!==null&&!st();)ax(Xe)}function ax(i){var o=Ow(i.alternate,i,cs);i.memoizedProps=i.pendingProps,o===null?ef(i):Xe=o}function lx(i){var o=i,l=o.alternate;switch(o.tag){case 15:case 0:o=Rw(l,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=Rw(l,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:gg(o);default:Vw(l,o),o=Xe=cE(o,cs),o=Ow(l,o,cs)}i.memoizedProps=i.pendingProps,o===null?ef(i):Xe=o}function Tl(i,o,l,d){ts=ta=null,gg(o),pl=null,lu=0;var g=o.return;try{if(aM(i,g,o,l,tt)){Dt=1,qh(i,Nr(l,i.current)),Xe=null;return}}catch(v){if(g!==null)throw Xe=g,v;Dt=1,qh(i,Nr(l,i.current)),Xe=null;return}o.flags&32768?(ot||d===1?i=!0:bl||(tt&536870912)!==0?i=!1:(Bs=i=!0,(d===2||d===9||d===3||d===6)&&(d=Or.current,d!==null&&d.tag===13&&(d.flags|=16384))),cx(o,i)):ef(o)}function ef(i){var o=i;do{if((o.flags&32768)!==0){cx(o,Bs);return}i=o.return;var l=cM(o.alternate,o,cs);if(l!==null){Xe=l;return}if(o=o.sibling,o!==null){Xe=o;return}Xe=o=i}while(o!==null);Dt===0&&(Dt=5)}function cx(i,o){do{var l=uM(i.alternate,i);if(l!==null){l.flags&=32767,Xe=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=l}while(i!==null);Dt=6,Xe=null}function ux(i,o,l,d,g,v,x,V,Q){i.cancelPendingCommit=null;do tf();while(bn!==0);if((ut&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(v=o.lanes|o.childLanes,v|=qp,nr(i,l,v,x,V,Q),i===vt&&(Xe=vt=null,tt=0),El=o,Fs=i,wl=l,Wg=v,Qg=g,ex=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,wM(Zt,function(){return px(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=M.T,M.T=null,g=W.p,W.p=2,x=ut,ut|=4;try{dM(i,o,l)}finally{ut=x,W.p=g,M.T=d}}bn=1,dx(),hx(),fx()}}function dx(){if(bn===1){bn=0;var i=Fs,o=El,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=M.T,M.T=null;var d=W.p;W.p=2;var g=ut;ut|=4;try{Yw(o,i);var v=f0,x=J_(i.containerInfo),V=v.focusedElem,Q=v.selectionRange;if(x!==V&&V&&V.ownerDocument&&Z_(V.ownerDocument.documentElement,V)){if(Q!==null&&Bp(V)){var oe=Q.start,he=Q.end;if(he===void 0&&(he=oe),"selectionStart"in V)V.selectionStart=oe,V.selectionEnd=Math.min(he,V.value.length);else{var ge=V.ownerDocument||document,ae=ge&&ge.defaultView||window;if(ae.getSelection){var ce=ae.getSelection(),Pe=V.textContent.length,Ne=Math.min(Q.start,Pe),pt=Q.end===void 0?Ne:Math.min(Q.end,Pe);!ce.extend&&Ne>pt&&(x=pt,pt=Ne,Ne=x);var re=Q_(V,Ne),ee=Q_(V,pt);if(re&&ee&&(ce.rangeCount!==1||ce.anchorNode!==re.node||ce.anchorOffset!==re.offset||ce.focusNode!==ee.node||ce.focusOffset!==ee.offset)){var se=ge.createRange();se.setStart(re.node,re.offset),ce.removeAllRanges(),Ne>pt?(ce.addRange(se),ce.extend(ee.node,ee.offset)):(se.setEnd(ee.node,ee.offset),ce.addRange(se))}}}}for(ge=[],ce=V;ce=ce.parentNode;)ce.nodeType===1&&ge.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<ge.length;V++){var pe=ge[V];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}mf=!!h0,f0=h0=null}finally{ut=g,W.p=d,M.T=l}}i.current=o,bn=2}}function hx(){if(bn===2){bn=0;var i=Fs,o=El,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=M.T,M.T=null;var d=W.p;W.p=2;var g=ut;ut|=4;try{Fw(i,o.alternate,o)}finally{ut=g,W.p=d,M.T=l}}bn=3}}function fx(){if(bn===4||bn===3){bn=0,Ht();var i=Fs,o=El,l=wl,d=ex;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?bn=5:(bn=0,El=Fs=null,mx(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Hs=null),Ss(l),o=o.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(at,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=M.T,g=W.p,W.p=2,M.T=null;try{for(var v=i.onRecoverableError,x=0;x<d.length;x++){var V=d[x];v(V.value,{componentStack:V.stack})}}finally{M.T=o,W.p=g}}(wl&3)!==0&&tf(),Si(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===Zg?yu++:(yu=0,Zg=i):yu=0,vu(0)}}function mx(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Qc(o)))}function tf(i){return dx(),hx(),fx(),px()}function px(){if(bn!==5)return!1;var i=Fs,o=Wg;Wg=0;var l=Ss(wl),d=M.T,g=W.p;try{W.p=32>l?32:l,M.T=null,l=Qg,Qg=null;var v=Fs,x=wl;if(bn=0,El=Fs=null,wl=0,(ut&6)!==0)throw Error(r(331));var V=ut;if(ut|=4,Zw(v.current),Xw(v,v.current,x,l),ut=V,vu(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(at,v)}catch{}return!0}finally{W.p=g,M.T=d,mx(i,o)}}function gx(i,o,l){o=Nr(l,o),o=Ng(i.stateNode,o,2),i=Ms(i,o,2),i!==null&&(_r(i,2),Si(i))}function gt(i,o,l){if(i.tag===3)gx(i,i,l);else for(;o!==null;){if(o.tag===3){gx(o,i,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Hs===null||!Hs.has(d))){i=Nr(l,i),l=_w(2),d=Ms(o,l,2),d!==null&&(Ew(l,d,o,i),_r(d,2),Si(d));break}}o=o.return}}function n0(i,o,l){var d=i.pingCache;if(d===null){d=i.pingCache=new mM;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(l)||(Gg=!0,g.add(l),i=bM.bind(null,i,o,l),o.then(i,i))}function bM(i,o,l){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,vt===i&&(tt&l)===l&&(Dt===4||Dt===3&&(tt&62914560)===tt&&300>Be()-Xg?(ut&2)===0&&xl(i,0):Yg|=l,_l===tt&&(_l=0)),Si(i)}function yx(i,o){o===0&&(o=Fr()),i=sl(i,o),i!==null&&(_r(i,o),Si(i))}function _M(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),yx(i,l)}function EM(i,o){var l=0;switch(i.tag){case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),yx(i,l)}function wM(i,o){return ke(i,o)}var nf=null,Sl=null,r0=!1,rf=!1,i0=!1,la=0;function Si(i){i!==Sl&&i.next===null&&(Sl===null?nf=Sl=i:Sl=Sl.next=i),rf=!0,r0||(r0=!0,TM())}function vu(i,o){if(!i0&&rf){i0=!0;do for(var l=!1,d=nf;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var x=d.suspendedLanes,V=d.pingedLanes;v=(1<<31-xt(42|i)+1)-1,v&=g&~(x&~V),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,Ex(d,v))}else v=tt,v=pn(d,d===vt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Un(d,v)||(l=!0,Ex(d,v));d=d.next}while(l);i0=!1}}function xM(){vx()}function vx(){rf=r0=!1;var i=0;la!==0&&(DM()&&(i=la),la=0);for(var o=Be(),l=null,d=nf;d!==null;){var g=d.next,v=bx(d,o);v===0?(d.next=null,l===null?nf=g:l.next=g,g===null&&(Sl=l)):(l=d,(i!==0||(v&3)!==0)&&(rf=!0)),d=g}vu(i)}function bx(i,o){for(var l=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var x=31-xt(v),V=1<<x,Q=g[x];Q===-1?((V&l)===0||(V&d)!==0)&&(g[x]=ji(V,o)):Q<=o&&(i.expiredLanes|=V),v&=~V}if(o=vt,l=tt,l=pn(i,i===o?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,l===0||i===o&&(dt===2||dt===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&Le(d),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Un(i,l)){if(o=l&-l,o===i.callbackPriority)return o;switch(d!==null&&Le(d),Ss(l)){case 2:case 8:l=Sn;break;case 32:l=Zt;break;case 268435456:l=Pn;break;default:l=Zt}return d=_x.bind(null,i),l=ke(l,d),i.callbackPriority=o,i.callbackNode=l,o}return d!==null&&d!==null&&Le(d),i.callbackPriority=2,i.callbackNode=null,2}function _x(i,o){if(bn!==0&&bn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(tf()&&i.callbackNode!==l)return null;var d=tt;return d=pn(i,i===vt?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(nx(i,d,o),bx(i,Be()),i.callbackNode!=null&&i.callbackNode===l?_x.bind(null,i):null)}function Ex(i,o){if(tf())return null;nx(i,o,!0)}function TM(){OM(function(){(ut&6)!==0?ke(It,xM):vx()})}function s0(){return la===0&&(la=Hi()),la}function wx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ya(""+i)}function xx(i,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,i.id&&l.setAttribute("form",i.id),o.parentNode.insertBefore(l,o),i=new FormData(i),l.parentNode.removeChild(l),i}function SM(i,o,l,d,g){if(o==="submit"&&l&&l.stateNode===g){var v=wx((g[Nt]||null).action),x=d.submitter;x&&(o=(o=x[Nt]||null)?wx(o.formAction):x.getAttribute("formAction"),o!==null&&(v=o,x=null));var V=new Ka("action","action",null,d,g);i.push({event:V,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(la!==0){var Q=x?xx(g,x):new FormData(g);Sg(l,{pending:!0,data:Q,method:g.method,action:v},null,Q)}}else typeof v=="function"&&(V.preventDefault(),Q=x?xx(g,x):new FormData(g),Sg(l,{pending:!0,data:Q,method:g.method,action:v},v,Q))},currentTarget:g}]})}}for(var o0=0;o0<$p.length;o0++){var a0=$p[o0],AM=a0.toLowerCase(),CM=a0[0].toUpperCase()+a0.slice(1);Yr(AM,"on"+CM)}Yr(nE,"onAnimationEnd"),Yr(rE,"onAnimationIteration"),Yr(iE,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr($D,"onTransitionRun"),Yr(qD,"onTransitionStart"),Yr(GD,"onTransitionCancel"),Yr(sE,"onTransitionEnd"),$r("onMouseEnter",["mouseout","mouseover"]),$r("onMouseLeave",["mouseout","mouseover"]),$r("onPointerEnter",["pointerout","pointerover"]),$r("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function Tx(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],g=d.event;d=d.listeners;e:{var v=void 0;if(o)for(var x=d.length-1;0<=x;x--){var V=d[x],Q=V.instance,oe=V.currentTarget;if(V=V.listener,Q!==v&&g.isPropagationStopped())break e;v=V,g.currentTarget=oe;try{v(g)}catch(he){$h(he)}g.currentTarget=null,v=Q}else for(x=0;x<d.length;x++){if(V=d[x],Q=V.instance,oe=V.currentTarget,V=V.listener,Q!==v&&g.isPropagationStopped())break e;v=V,g.currentTarget=oe;try{v(g)}catch(he){$h(he)}g.currentTarget=null,v=Q}}}}function We(i,o){var l=o[Oo];l===void 0&&(l=o[Oo]=new Set);var d=i+"__bubble";l.has(d)||(Sx(o,i,2,!1),l.add(d))}function l0(i,o,l){var d=0;o&&(d|=4),Sx(l,i,d,o)}var sf="_reactListening"+Math.random().toString(36).slice(2);function c0(i){if(!i[sf]){i[sf]=!0,Po.forEach(function(l){l!=="selectionchange"&&(RM.has(l)||l0(l,!1,i),l0(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[sf]||(o[sf]=!0,l0("selectionchange",!1,o))}}function Sx(i,o,l,d){switch(Xx(o)){case 2:var g=tO;break;case 8:g=nO;break;default:g=x0}l=g.bind(null,o,l,i),g=void 0,!Rr||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(o,l,{capture:!0,passive:g}):i.addEventListener(o,l,!0):g!==void 0?i.addEventListener(o,l,{passive:g}):i.addEventListener(o,l,!1)}function u0(i,o,l,d,g){var v=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var V=d.stateNode.containerInfo;if(V===g)break;if(x===4)for(x=d.return;x!==null;){var Q=x.tag;if((Q===3||Q===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;V!==null;){if(x=wr(V),x===null)return;if(Q=x.tag,Q===5||Q===6||Q===26||Q===27){d=v=x;continue e}V=V.parentNode}}d=d.return}oh(function(){var oe=v,he=Cr(l),ge=[];e:{var ae=oE.get(i);if(ae!==void 0){var ce=Ka,Pe=i;switch(i){case"keypress":if(gi(l)===0)break e;case"keydown":case"keyup":ce=el;break;case"focusin":Pe="focus",ce=Qa;break;case"focusout":Pe="blur",ce=Qa;break;case"beforeblur":case"afterblur":ce=Qa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Ir;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Vp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=mh;break;case nE:case rE:case iE:ce=Za;break;case sE:ce=gh;break;case"scroll":case"scrollend":ce=ah;break;case"wheel":ce=tl;break;case"copy":case"cut":case"paste":ce=Ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Fc;break;case"toggle":case"beforetoggle":ce=vh}var Ne=(o&4)!==0,pt=!Ne&&(i==="scroll"||i==="scrollend"),re=Ne?ae!==null?ae+"Capture":null:ae;Ne=[];for(var ee=oe,se;ee!==null;){var pe=ee;if(se=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||se===null||re===null||(pe=jo(ee,re),pe!=null&&Ne.push(_u(ee,pe,se))),pt)break;ee=ee.return}0<Ne.length&&(ae=new ce(ae,Pe,null,l,he),ge.push({event:ae,listeners:Ne}))}}if((o&7)===0){e:{if(ae=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",ae&&l!==Gi&&(Pe=l.relatedTarget||l.fromElement)&&(wr(Pe)||Pe[qn]))break e;if((ce||ae)&&(ae=he.window===he?he:(ae=he.ownerDocument)?ae.defaultView||ae.parentWindow:window,ce?(Pe=l.relatedTarget||l.toElement,ce=oe,Pe=Pe?wr(Pe):null,Pe!==null&&(pt=a(Pe),Ne=Pe.tag,Pe!==pt||Ne!==5&&Ne!==27&&Ne!==6)&&(Pe=null)):(ce=null,Pe=oe),ce!==Pe)){if(Ne=Ir,pe="onMouseLeave",re="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Ne=Fc,pe="onPointerLeave",re="onPointerEnter",ee="pointer"),pt=ce==null?ae:Tr(ce),se=Pe==null?ae:Tr(Pe),ae=new Ne(pe,ee+"leave",ce,l,he),ae.target=pt,ae.relatedTarget=se,pe=null,wr(he)===oe&&(Ne=new Ne(re,ee+"enter",Pe,l,he),Ne.target=se,Ne.relatedTarget=pt,pe=Ne),pt=pe,ce&&Pe)t:{for(Ne=ce,re=Pe,ee=0,se=Ne;se;se=Al(se))ee++;for(se=0,pe=re;pe;pe=Al(pe))se++;for(;0<ee-se;)Ne=Al(Ne),ee--;for(;0<se-ee;)re=Al(re),se--;for(;ee--;){if(Ne===re||re!==null&&Ne===re.alternate)break t;Ne=Al(Ne),re=Al(re)}Ne=null}else Ne=null;ce!==null&&Ax(ge,ae,ce,Ne,!1),Pe!==null&&pt!==null&&Ax(ge,pt,Pe,Ne,!0)}}e:{if(ae=oe?Tr(oe):window,ce=ae.nodeName&&ae.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ae.type==="file")var Se=q_;else if(tn(ae))if(G_)Se=jD;else{Se=UD;var qe=zD}else ce=ae.nodeName,!ce||ce.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?oe&&Vc(oe.elementType)&&(Se=q_):Se=BD;if(Se&&(Se=Se(i,oe))){Qi(ge,Se,l,he);break e}qe&&qe(i,ae,oe),i==="focusout"&&oe&&ae.type==="number"&&oe.memoizedProps.value!=null&&Rs(ae,"number",ae.value)}switch(qe=oe?Tr(oe):window,i){case"focusin":(tn(qe)||qe.contentEditable==="true")&&(nl=qe,jp=oe,Gc=null);break;case"focusout":Gc=jp=nl=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,eE(ge,l,he);break;case"selectionchange":if(FD)break;case"keydown":case"keyup":eE(ge,l,he)}var Ce;if(bi)e:{switch(i){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Je?ue(i,l)&&(De="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(w&&l.locale!=="ko"&&(Je||De!=="onCompositionStart"?De==="onCompositionEnd"&&Je&&(Ce=zc()):(pi=he,Is="value"in pi?pi.value:pi.textContent,Je=!0)),qe=of(oe,De),0<qe.length&&(De=new jc(De,i,null,l,he),ge.push({event:De,listeners:qe}),Ce?De.data=Ce:(Ce=_e(l),Ce!==null&&(De.data=Ce)))),(Ce=_?en(i,l):et(i,l))&&(De=of(oe,"onBeforeInput"),0<De.length&&(qe=new jc("onBeforeInput","beforeinput",null,l,he),ge.push({event:qe,listeners:De}),qe.data=Ce)),SM(ge,i,oe,l,he)}Tx(ge,o)})}function _u(i,o,l){return{instance:i,listener:o,currentTarget:l}}function of(i,o){for(var l=o+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=jo(i,l),g!=null&&d.unshift(_u(i,g,v)),g=jo(i,o),g!=null&&d.push(_u(i,g,v))),i.tag===3)return d;i=i.return}return[]}function Al(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ax(i,o,l,d,g){for(var v=o._reactName,x=[];l!==null&&l!==d;){var V=l,Q=V.alternate,oe=V.stateNode;if(V=V.tag,Q!==null&&Q===d)break;V!==5&&V!==26&&V!==27||oe===null||(Q=oe,g?(oe=jo(l,v),oe!=null&&x.unshift(_u(l,oe,Q))):g||(oe=jo(l,v),oe!=null&&x.push(_u(l,oe,Q)))),l=l.return}x.length!==0&&i.push({event:o,listeners:x})}var IM=/\r\n?/g,NM=/\u0000|\uFFFD/g;function Cx(i){return(typeof i=="string"?i:""+i).replace(IM,`
`).replace(NM,"")}function Rx(i,o){return o=Cx(o),Cx(i)===o}function af(){}function mt(i,o,l,d,g,v){switch(l){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Ar(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Ar(i,""+d);break;case"className":Sr(i,"class",d);break;case"tabIndex":Sr(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(i,l,d);break;case"style":Pc(i,d,v);break;case"data":if(o!=="object"){Sr(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||l!=="href")){i.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Ya(""+d),i.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&mt(i,o,"name",g.name,g,null),mt(i,o,"formEncType",g.formEncType,g,null),mt(i,o,"formMethod",g.formMethod,g,null),mt(i,o,"formTarget",g.formTarget,g,null)):(mt(i,o,"encType",g.encType,g,null),mt(i,o,"method",g.method,g,null),mt(i,o,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(l);break}d=Ya(""+d),i.setAttribute(l,d);break;case"onClick":d!=null&&(i.onclick=af);break;case"onScroll":d!=null&&We("scroll",i);break;case"onScrollEnd":d!=null&&We("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}l=Ya(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""+d):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":d===!0?i.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(l,d):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(l,d):i.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(l):i.setAttribute(l,d);break;case"popover":We("beforetoggle",i),We("toggle",i),di(i,"popover",d);break;case"xlinkActuate":Jt(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Jt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Jt(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Jt(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Jt(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Jt(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Jt(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":di(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Op.get(l)||l,di(i,l,d))}}function d0(i,o,l,d,g,v){switch(l){case"style":Pc(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof d=="string"?Ar(i,d):(typeof d=="number"||typeof d=="bigint")&&Ar(i,""+d);break;case"onScroll":d!=null&&We("scroll",i);break;case"onScrollEnd":d!=null&&We("scrollend",i);break;case"onClick":d!=null&&(i.onclick=af);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!As.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),o=l.slice(2,g?l.length-7:void 0),v=i[Nt]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(o,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(o,d,g);break e}l in i?i[l]=d:d===!0?i.setAttribute(l,""):di(i,l,d)}}}function _n(i,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",i),We("load",i);var d=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var x=l[v];if(x!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(i,o,v,x,l,null)}}g&&mt(i,o,"srcSet",l.srcSet,l,null),d&&mt(i,o,"src",l.src,l,null);return;case"input":We("invalid",i);var V=v=x=g=null,Q=null,oe=null;for(d in l)if(l.hasOwnProperty(d)){var he=l[d];if(he!=null)switch(d){case"name":g=he;break;case"type":x=he;break;case"checked":Q=he;break;case"defaultChecked":oe=he;break;case"value":v=he;break;case"defaultValue":V=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,o));break;default:mt(i,o,d,he,l,null)}}zo(i,v,V,Q,oe,x,g,!1),Ga(i);return;case"select":We("invalid",i),d=x=v=null;for(g in l)if(l.hasOwnProperty(g)&&(V=l[g],V!=null))switch(g){case"value":v=V;break;case"defaultValue":x=V;break;case"multiple":d=V;default:mt(i,o,g,V,l,null)}o=v,l=x,i.multiple=!!d,o!=null?qi(i,!!d,o,!1):l!=null&&qi(i,!!d,l,!0);return;case"textarea":We("invalid",i),v=g=d=null;for(x in l)if(l.hasOwnProperty(x)&&(V=l[x],V!=null))switch(x){case"value":d=V;break;case"defaultValue":g=V;break;case"children":v=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:mt(i,o,x,V,l,null)}Uo(i,d,g,v),Ga(i);return;case"option":for(Q in l)if(l.hasOwnProperty(Q)&&(d=l[Q],d!=null))switch(Q){case"selected":i.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:mt(i,o,Q,d,l,null)}return;case"dialog":We("beforetoggle",i),We("toggle",i),We("cancel",i),We("close",i);break;case"iframe":case"object":We("load",i);break;case"video":case"audio":for(d=0;d<bu.length;d++)We(bu[d],i);break;case"image":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"embed":case"source":case"link":We("error",i),We("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in l)if(l.hasOwnProperty(oe)&&(d=l[oe],d!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:mt(i,o,oe,d,l,null)}return;default:if(Vc(o)){for(he in l)l.hasOwnProperty(he)&&(d=l[he],d!==void 0&&d0(i,o,he,d,l,void 0));return}}for(V in l)l.hasOwnProperty(V)&&(d=l[V],d!=null&&mt(i,o,V,d,l,null))}function kM(i,o,l,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,x=null,V=null,Q=null,oe=null,he=null;for(ce in l){var ge=l[ce];if(l.hasOwnProperty(ce)&&ge!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":Q=ge;default:d.hasOwnProperty(ce)||mt(i,o,ce,null,d,ge)}}for(var ae in d){var ce=d[ae];if(ge=l[ae],d.hasOwnProperty(ae)&&(ce!=null||ge!=null))switch(ae){case"type":v=ce;break;case"name":g=ce;break;case"checked":oe=ce;break;case"defaultChecked":he=ce;break;case"value":x=ce;break;case"defaultValue":V=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,o));break;default:ce!==ge&&mt(i,o,ae,ce,d,ge)}}ir(i,x,V,Q,oe,he,v,g);return;case"select":ce=x=V=ae=null;for(v in l)if(Q=l[v],l.hasOwnProperty(v)&&Q!=null)switch(v){case"value":break;case"multiple":ce=Q;default:d.hasOwnProperty(v)||mt(i,o,v,null,d,Q)}for(g in d)if(v=d[g],Q=l[g],d.hasOwnProperty(g)&&(v!=null||Q!=null))switch(g){case"value":ae=v;break;case"defaultValue":V=v;break;case"multiple":x=v;default:v!==Q&&mt(i,o,g,v,d,Q)}o=V,l=x,d=ce,ae!=null?qi(i,!!l,ae,!1):!!d!=!!l&&(o!=null?qi(i,!!l,o,!0):qi(i,!!l,l?[]:"",!1));return;case"textarea":ce=ae=null;for(V in l)if(g=l[V],l.hasOwnProperty(V)&&g!=null&&!d.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:mt(i,o,V,null,d,g)}for(x in d)if(g=d[x],v=l[x],d.hasOwnProperty(x)&&(g!=null||v!=null))switch(x){case"value":ae=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==v&&mt(i,o,x,g,d,v)}ht(i,ae,ce);return;case"option":for(var Pe in l)if(ae=l[Pe],l.hasOwnProperty(Pe)&&ae!=null&&!d.hasOwnProperty(Pe))switch(Pe){case"selected":i.selected=!1;break;default:mt(i,o,Pe,null,d,ae)}for(Q in d)if(ae=d[Q],ce=l[Q],d.hasOwnProperty(Q)&&ae!==ce&&(ae!=null||ce!=null))switch(Q){case"selected":i.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:mt(i,o,Q,ae,d,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)ae=l[Ne],l.hasOwnProperty(Ne)&&ae!=null&&!d.hasOwnProperty(Ne)&&mt(i,o,Ne,null,d,ae);for(oe in d)if(ae=d[oe],ce=l[oe],d.hasOwnProperty(oe)&&ae!==ce&&(ae!=null||ce!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,o));break;default:mt(i,o,oe,ae,d,ce)}return;default:if(Vc(o)){for(var pt in l)ae=l[pt],l.hasOwnProperty(pt)&&ae!==void 0&&!d.hasOwnProperty(pt)&&d0(i,o,pt,void 0,d,ae);for(he in d)ae=d[he],ce=l[he],!d.hasOwnProperty(he)||ae===ce||ae===void 0&&ce===void 0||d0(i,o,he,ae,d,ce);return}}for(var re in l)ae=l[re],l.hasOwnProperty(re)&&ae!=null&&!d.hasOwnProperty(re)&&mt(i,o,re,null,d,ae);for(ge in d)ae=d[ge],ce=l[ge],!d.hasOwnProperty(ge)||ae===ce||ae==null&&ce==null||mt(i,o,ge,ae,d,ce)}var h0=null,f0=null;function lf(i){return i.nodeType===9?i:i.ownerDocument}function Ix(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nx(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function m0(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var p0=null;function DM(){var i=window.event;return i&&i.type==="popstate"?i===p0?!1:(p0=i,!0):(p0=null,!1)}var kx=typeof setTimeout=="function"?setTimeout:void 0,MM=typeof clearTimeout=="function"?clearTimeout:void 0,Dx=typeof Promise=="function"?Promise:void 0,OM=typeof queueMicrotask=="function"?queueMicrotask:typeof Dx<"u"?function(i){return Dx.resolve(null).then(i).catch(PM)}:kx;function PM(i){setTimeout(function(){throw i})}function qs(i){return i==="head"}function Mx(i,o){var l=o,d=0,g=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(0<d&&8>d){l=d;var x=i.ownerDocument;if(l&1&&Eu(x.documentElement),l&2&&Eu(x.body),l&4)for(l=x.head,Eu(l),x=l.firstChild;x;){var V=x.nextSibling,Q=x.nodeName;x[Fi]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=V}}if(g===0){i.removeChild(v),Iu(o);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:d=l.charCodeAt(0)-48;else d=0;l=v}while(l);Iu(o)}function g0(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":g0(l),ui(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function VM(i,o,l,d){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Fi])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Xr(i.nextSibling),i===null)break}return null}function LM(i,o,l){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Xr(i.nextSibling),i===null))return null;return i}function y0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function zM(i,o){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")o();else{var d=function(){o(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Xr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var v0=null;function Ox(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}function Px(i,o,l){switch(o=lf(l),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Eu(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);ui(i)}var Vr=new Map,Vx=new Set;function cf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var us=W.d;W.d={f:UM,r:BM,D:jM,C:HM,L:FM,m:$M,X:GM,S:qM,M:YM};function UM(){var i=us.f(),o=Jh();return i||o}function BM(i){var o=xr(i);o!==null&&o.tag===5&&o.type==="form"?nw(o):us.r(i)}var Cl=typeof document>"u"?null:document;function Lx(i,o,l){var d=Cl;if(d&&typeof o=="string"&&o){var g=qt(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Vx.has(g)||(Vx.add(g),i={rel:i,crossOrigin:l,href:o},d.querySelector(g)===null&&(o=d.createElement("link"),_n(o,"link",i),Tt(o),d.head.appendChild(o)))}}function jM(i){us.D(i),Lx("dns-prefetch",i,null)}function HM(i,o){us.C(i,o),Lx("preconnect",i,o)}function FM(i,o,l){us.L(i,o,l);var d=Cl;if(d&&i&&o){var g='link[rel="preload"][as="'+qt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+qt(l.imageSizes)+'"]')):g+='[href="'+qt(i)+'"]';var v=g;switch(o){case"style":v=Rl(i);break;case"script":v=Il(i)}Vr.has(v)||(i=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:i,as:o},l),Vr.set(v,i),d.querySelector(g)!==null||o==="style"&&d.querySelector(wu(v))||o==="script"&&d.querySelector(xu(v))||(o=d.createElement("link"),_n(o,"link",i),Tt(o),d.head.appendChild(o)))}}function $M(i,o){us.m(i,o);var l=Cl;if(l&&i){var d=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+qt(d)+'"][href="'+qt(i)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Il(i)}if(!Vr.has(v)&&(i=p({rel:"modulepreload",href:i},o),Vr.set(v,i),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(xu(v)))return}d=l.createElement("link"),_n(d,"link",i),Tt(d),l.head.appendChild(d)}}}function qM(i,o,l){us.S(i,o,l);var d=Cl;if(d&&i){var g=gn(d).hoistableStyles,v=Rl(i);o=o||"default";var x=g.get(v);if(!x){var V={loading:0,preload:null};if(x=d.querySelector(wu(v)))V.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},l),(l=Vr.get(v))&&b0(i,l);var Q=x=d.createElement("link");Tt(Q),_n(Q,"link",i),Q._p=new Promise(function(oe,he){Q.onload=oe,Q.onerror=he}),Q.addEventListener("load",function(){V.loading|=1}),Q.addEventListener("error",function(){V.loading|=2}),V.loading|=4,uf(x,o,d)}x={type:"stylesheet",instance:x,count:1,state:V},g.set(v,x)}}}function GM(i,o){us.X(i,o);var l=Cl;if(l&&i){var d=gn(l).hoistableScripts,g=Il(i),v=d.get(g);v||(v=l.querySelector(xu(g)),v||(i=p({src:i,async:!0},o),(o=Vr.get(g))&&_0(i,o),v=l.createElement("script"),Tt(v),_n(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function YM(i,o){us.M(i,o);var l=Cl;if(l&&i){var d=gn(l).hoistableScripts,g=Il(i),v=d.get(g);v||(v=l.querySelector(xu(g)),v||(i=p({src:i,async:!0,type:"module"},o),(o=Vr.get(g))&&_0(i,o),v=l.createElement("script"),Tt(v),_n(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function zx(i,o,l,d){var g=(g=de.current)?cf(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Rl(l.href),l=gn(g).hoistableStyles,d=l.get(o),d||(d={type:"style",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Rl(l.href);var v=gn(g).hoistableStyles,x=v.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,x),(v=g.querySelector(wu(i)))&&!v._p&&(x.instance=v,x.state.loading=5),Vr.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Vr.set(i,l),v||KM(g,i,l,x.state))),o&&d===null)throw Error(r(528,""));return x}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Il(l),l=gn(g).hoistableScripts,d=l.get(o),d||(d={type:"script",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Rl(i){return'href="'+qt(i)+'"'}function wu(i){return'link[rel="stylesheet"]['+i+"]"}function Ux(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function KM(i,o,l,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),_n(o,"link",l),Tt(o),i.head.appendChild(o))}function Il(i){return'[src="'+qt(i)+'"]'}function xu(i){return"script[async]"+i}function Bx(i,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+qt(l.href)+'"]');if(d)return o.instance=d,Tt(d),d;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Tt(d),_n(d,"style",g),uf(d,l.precedence,i),o.instance=d;case"stylesheet":g=Rl(l.href);var v=i.querySelector(wu(g));if(v)return o.state.loading|=4,o.instance=v,Tt(v),v;d=Ux(l),(g=Vr.get(g))&&b0(d,g),v=(i.ownerDocument||i).createElement("link"),Tt(v);var x=v;return x._p=new Promise(function(V,Q){x.onload=V,x.onerror=Q}),_n(v,"link",d),o.state.loading|=4,uf(v,l.precedence,i),o.instance=v;case"script":return v=Il(l.src),(g=i.querySelector(xu(v)))?(o.instance=g,Tt(g),g):(d=l,(g=Vr.get(v))&&(d=p({},l),_0(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),Tt(g),_n(g,"link",d),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,uf(d,l.precedence,i));return o.instance}function uf(i,o,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,x=0;x<d.length;x++){var V=d[x];if(V.dataset.precedence===o)v=V;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(i,o.firstChild))}function b0(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function _0(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var df=null;function jx(i,o,l){if(df===null){var d=new Map,g=df=new Map;g.set(l,d)}else g=df,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(i))return d;for(d.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var v=l[g];if(!(v[Fi]||v[Lt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var x=v.getAttribute(o)||"";x=i+x;var V=d.get(x);V?V.push(v):d.set(x,[v])}}return d}function Hx(i,o,l){i=i.ownerDocument||i,i.head.insertBefore(l,o==="title"?i.querySelector("head > title"):null)}function XM(i,o,l){if(l===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Fx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Tu=null;function WM(){}function QM(i,o,l){if(Tu===null)throw Error(r(475));var d=Tu;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Rl(l.href),v=i.querySelector(wu(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(d.count++,d=hf.bind(d),i.then(d,d)),o.state.loading|=4,o.instance=v,Tt(v);return}v=i.ownerDocument||i,l=Ux(l),(g=Vr.get(g))&&b0(l,g),v=v.createElement("link"),Tt(v);var x=v;x._p=new Promise(function(V,Q){x.onload=V,x.onerror=Q}),_n(v,"link",l),o.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(d.count++,o=hf.bind(d),i.addEventListener("load",o),i.addEventListener("error",o))}}function ZM(){if(Tu===null)throw Error(r(475));var i=Tu;return i.stylesheets&&i.count===0&&E0(i,i.stylesheets),0<i.count?function(o){var l=setTimeout(function(){if(i.stylesheets&&E0(i,i.stylesheets),i.unsuspend){var d=i.unsuspend;i.unsuspend=null,d()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(l)}}:null}function hf(){if(this.count--,this.count===0){if(this.stylesheets)E0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ff=null;function E0(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ff=new Map,o.forEach(JM,i),ff=null,hf.call(i))}function JM(i,o){if(!(o.state.loading&4)){var l=ff.get(i);if(l)var d=l.get(null);else{l=new Map,ff.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var x=g[v];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),d=x)}d&&l.set(null,d)}g=o.instance,x=g.getAttribute("data-precedence"),v=l.get(x)||d,v===d&&l.set(null,g),l.set(x,g),this.count++,d=hf.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var Su={$$typeof:B,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function eO(i,o,l,d,g,v,x,V){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function $x(i,o,l,d,g,v,x,V,Q,oe,he,ge){return i=new eO(i,o,l,x,V,Q,oe,ge),o=1,v===!0&&(o|=24),v=or(3,null,null,o),i.current=v,v.stateNode=i,o=ng(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:d,isDehydrated:l,cache:o},og(v),i}function qx(i){return i?(i=ol,i):ol}function Gx(i,o,l,d,g,v){g=qx(g),d.context===null?d.context=g:d.pendingContext=g,d=Ds(o),d.payload={element:l},v=v===void 0?null:v,v!==null&&(d.callback=v),l=Ms(i,d,o),l!==null&&(dr(l,i,o),tu(l,i,o))}function Yx(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function w0(i,o){Yx(i,o),(i=i.alternate)&&Yx(i,o)}function Kx(i){if(i.tag===13){var o=sl(i,67108864);o!==null&&dr(o,i,67108864),w0(i,67108864)}}var mf=!0;function tO(i,o,l,d){var g=M.T;M.T=null;var v=W.p;try{W.p=2,x0(i,o,l,d)}finally{W.p=v,M.T=g}}function nO(i,o,l,d){var g=M.T;M.T=null;var v=W.p;try{W.p=8,x0(i,o,l,d)}finally{W.p=v,M.T=g}}function x0(i,o,l,d){if(mf){var g=T0(d);if(g===null)u0(i,o,d,pf,l),Wx(i,d);else if(iO(g,i,o,l,d))d.stopPropagation();else if(Wx(i,d),o&4&&-1<rO.indexOf(i)){for(;g!==null;){var v=xr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var x=an(v.pendingLanes);if(x!==0){var V=v;for(V.pendingLanes|=2,V.entangledLanes|=2;x;){var Q=1<<31-xt(x);V.entanglements[1]|=Q,x&=~Q}Si(v),(ut&6)===0&&(Qh=Be()+500,vu(0))}}break;case 13:V=sl(v,2),V!==null&&dr(V,v,2),Jh(),w0(v,2)}if(v=T0(d),v===null&&u0(i,o,d,pf,l),v===g)break;g=v}g!==null&&d.stopPropagation()}else u0(i,o,d,null,l)}}function T0(i){return i=Cr(i),S0(i)}var pf=null;function S0(i){if(pf=null,i=wr(i),i!==null){var o=a(i);if(o===null)i=null;else{var l=o.tag;if(l===13){if(i=c(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return pf=i,null}function Xx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case It:return 2;case Sn:return 8;case Zt:case er:return 32;case Pn:return 268435456;default:return 32}default:return 32}}var A0=!1,Gs=null,Ys=null,Ks=null,Au=new Map,Cu=new Map,Xs=[],rO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wx(i,o){switch(i){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":Au.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(o.pointerId)}}function Ru(i,o,l,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},o!==null&&(o=xr(o),o!==null&&Kx(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function iO(i,o,l,d,g){switch(o){case"focusin":return Gs=Ru(Gs,i,o,l,d,g),!0;case"dragenter":return Ys=Ru(Ys,i,o,l,d,g),!0;case"mouseover":return Ks=Ru(Ks,i,o,l,d,g),!0;case"pointerover":var v=g.pointerId;return Au.set(v,Ru(Au.get(v)||null,i,o,l,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Cu.set(v,Ru(Cu.get(v)||null,i,o,l,d,g)),!0}return!1}function Qx(i){var o=wr(i.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){i.blockedOn=o,Ba(i.priority,function(){if(l.tag===13){var d=ur();d=ai(d);var g=sl(l,d);g!==null&&dr(g,l,d),w0(l,d)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function gf(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=T0(i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Gi=d,l.target.dispatchEvent(d),Gi=null}else return o=xr(l),o!==null&&Kx(o),i.blockedOn=l,!1;o.shift()}return!0}function Zx(i,o,l){gf(i)&&l.delete(o)}function sO(){A0=!1,Gs!==null&&gf(Gs)&&(Gs=null),Ys!==null&&gf(Ys)&&(Ys=null),Ks!==null&&gf(Ks)&&(Ks=null),Au.forEach(Zx),Cu.forEach(Zx)}function yf(i,o){i.blockedOn===o&&(i.blockedOn=null,A0||(A0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sO)))}var vf=null;function Jx(i){vf!==i&&(vf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){vf===i&&(vf=null);for(var o=0;o<i.length;o+=3){var l=i[o],d=i[o+1],g=i[o+2];if(typeof d!="function"){if(S0(d||l)===null)continue;break}var v=xr(l);v!==null&&(i.splice(o,3),o-=3,Sg(v,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function Iu(i){function o(Q){return yf(Q,i)}Gs!==null&&yf(Gs,i),Ys!==null&&yf(Ys,i),Ks!==null&&yf(Ks,i),Au.forEach(o),Cu.forEach(o);for(var l=0;l<Xs.length;l++){var d=Xs[l];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Xs.length&&(l=Xs[0],l.blockedOn===null);)Qx(l),l.blockedOn===null&&Xs.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],v=l[d+1],x=g[Nt]||null;if(typeof v=="function")x||Jx(l);else if(x){var V=null;if(v&&v.hasAttribute("formAction")){if(g=v,x=v[Nt]||null)V=x.formAction;else if(S0(g)!==null)continue}else V=x.action;typeof V=="function"?l[d+1]=V:(l.splice(d,3),d-=3),Jx(l)}}}function C0(i){this._internalRoot=i}bf.prototype.render=C0.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,d=ur();Gx(l,d,i,o,null,null)},bf.prototype.unmount=C0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Gx(i.current,2,null,i,null,null),Jh(),o[qn]=null}};function bf(i){this._internalRoot=i}bf.prototype.unstable_scheduleHydration=function(i){if(i){var o=li();i={blockedOn:null,target:i,priority:o};for(var l=0;l<Xs.length&&o!==0&&o<Xs[l].priority;l++);Xs.splice(l,0,i),l===0&&Qx(i)}};var e1=e.version;if(e1!=="19.1.0")throw Error(r(527,e1,"19.1.0"));W.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(o),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var oO={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{at=_f.inject(oO),Ke=_f}catch{}}return ku.createRoot=function(i,o){if(!s(i))throw Error(r(299));var l=!1,d="",g=gw,v=yw,x=vw,V=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(V=o.unstable_transitionCallbacks)),o=$x(i,1,!1,null,null,l,d,g,v,x,V,null),i[qn]=o.current,c0(i),new C0(o)},ku.hydrateRoot=function(i,o,l){if(!s(i))throw Error(r(299));var d=!1,g="",v=gw,x=yw,V=vw,Q=null,oe=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(V=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Q=l.unstable_transitionCallbacks),l.formState!==void 0&&(oe=l.formState)),o=$x(i,1,!0,o,l??null,d,g,v,x,V,Q,oe),o.context=qx(null),l=o.current,d=ur(),d=ai(d),g=Ds(d),g.callback=null,Ms(l,g,d),l=d,o.current.lanes=l,_r(o,l),Si(o),i[qn]=o.current,c0(i),new bf(o)},ku.version="19.1.0",ku}var u1;function yO(){if(u1)return N0.exports;u1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),N0.exports=gO(),N0.exports}var vO=yO();function $n(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=$n(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var O0={exports:{}},P0={},V0={exports:{}},L0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1;function bO(){if(d1)return L0;d1=1;var t=zd();function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,c=t.useDebugValue;function u(y,b){var E=b(),T=r({inst:{value:E,getSnapshot:b}}),A=T[0].inst,R=T[1];return a(function(){A.value=E,A.getSnapshot=b,h(A)&&R({inst:A})},[y,E,b]),s(function(){return h(A)&&R({inst:A}),y(function(){h(A)&&R({inst:A})})},[y]),c(E),E}function h(y){var b=y.getSnapshot;y=y.value;try{var E=b();return!n(y,E)}catch{return!0}}function f(y,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return L0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,L0}var h1;function _O(){return h1||(h1=1,V0.exports=bO()),V0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1;function EO(){if(f1)return P0;f1=1;var t=zd(),e=_O();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,c=t.useEffect,u=t.useMemo,h=t.useDebugValue;return P0.useSyncExternalStoreWithSelector=function(f,p,y,b,E){var T=a(null);if(T.current===null){var A={hasValue:!1,value:null};T.current=A}else A=T.current;T=u(function(){function k(X){if(!z){if(z=!0,B=X,X=b(X),E!==void 0&&A.hasValue){var D=A.value;if(E(D,X))return U=D}return U=X}if(D=U,r(B,X))return D;var S=b(X);return E!==void 0&&E(D,S)?(B=X,D):(B=X,U=S)}var z=!1,B,U,Y=y===void 0?null:y;return[function(){return k(p())},Y===null?void 0:function(){return k(Y())}]},[p,y,b,E]);var R=s(f,T[0],T[1]);return c(function(){A.hasValue=!0,A.value=R},[R]),h(R),R},P0}var m1;function wO(){return m1||(m1=1,O0.exports=EO()),O0.exports}var xO=wO();const TO=S2(xO),SO={},p1=t=>{let e;const n=new Set,r=(p,y)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const E=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(T=>T(e,E))}},s=()=>e,h={setState:r,getState:s,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(SO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(r,s,h);return h},AO=t=>t?p1(t):p1,{useDebugValue:CO}=fe,{useSyncExternalStoreWithSelector:RO}=TO,IO=t=>t;function C2(t,e=IO,n){const r=RO(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return CO(r),r}const g1=(t,e)=>{const n=AO(t),r=(s,a=e)=>C2(n,s,a);return Object.assign(r,n),r},NO=(t,e)=>t?g1(t,e):g1;function Mn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var kO={value:()=>{}};function Xm(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yf(n)}function Yf(t){this._=t}function DO(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yf.prototype=Xm.prototype={constructor:Yf,on:function(t,e){var n=this._,r=DO(t+"",n),s,a=-1,c=r.length;if(arguments.length<2){for(;++a<c;)if((s=(t=r[a]).type)&&(s=MO(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<c;)if(s=(t=r[a]).type)n[s]=y1(n[s],t.name,e);else if(e==null)for(s in n)n[s]=y1(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Yf(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,a=r.length;s<a;++s)r[s].value.apply(e,n)}};function MO(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function y1(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=kO,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Cy="http://www.w3.org/1999/xhtml";const v1={svg:"http://www.w3.org/2000/svg",xhtml:Cy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wm(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),v1.hasOwnProperty(e)?{space:v1[e],local:t}:t}function OO(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Cy&&e.documentElement.namespaceURI===Cy?e.createElement(t):e.createElementNS(n,t)}}function PO(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function R2(t){var e=Wm(t);return(e.local?PO:OO)(e)}function VO(){}function Bv(t){return t==null?VO:function(){return this.querySelector(t)}}function LO(t){typeof t!="function"&&(t=Bv(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=new Array(c),h,f,p=0;p<c;++p)(h=a[p])&&(f=t.call(h,h.__data__,p,a))&&("__data__"in h&&(f.__data__=h.__data__),u[p]=f);return new vr(r,this._parents)}function zO(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function UO(){return[]}function I2(t){return t==null?UO:function(){return this.querySelectorAll(t)}}function BO(t){return function(){return zO(t.apply(this,arguments))}}function jO(t){typeof t=="function"?t=BO(t):t=I2(t);for(var e=this._groups,n=e.length,r=[],s=[],a=0;a<n;++a)for(var c=e[a],u=c.length,h,f=0;f<u;++f)(h=c[f])&&(r.push(t.call(h,h.__data__,f,c)),s.push(h));return new vr(r,s)}function N2(t){return function(){return this.matches(t)}}function k2(t){return function(e){return e.matches(t)}}var HO=Array.prototype.find;function FO(t){return function(){return HO.call(this.children,t)}}function $O(){return this.firstElementChild}function qO(t){return this.select(t==null?$O:FO(typeof t=="function"?t:k2(t)))}var GO=Array.prototype.filter;function YO(){return Array.from(this.children)}function KO(t){return function(){return GO.call(this.children,t)}}function XO(t){return this.selectAll(t==null?YO:KO(typeof t=="function"?t:k2(t)))}function WO(t){typeof t!="function"&&(t=N2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=[],h,f=0;f<c;++f)(h=a[f])&&t.call(h,h.__data__,f,a)&&u.push(h);return new vr(r,this._parents)}function D2(t){return new Array(t.length)}function QO(){return new vr(this._enter||this._groups.map(D2),this._parents)}function fm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}fm.prototype={constructor:fm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ZO(t){return function(){return t}}function JO(t,e,n,r,s,a){for(var c=0,u,h=e.length,f=a.length;c<f;++c)(u=e[c])?(u.__data__=a[c],r[c]=u):n[c]=new fm(t,a[c]);for(;c<h;++c)(u=e[c])&&(s[c]=u)}function e4(t,e,n,r,s,a,c){var u,h,f=new Map,p=e.length,y=a.length,b=new Array(p),E;for(u=0;u<p;++u)(h=e[u])&&(b[u]=E=c.call(h,h.__data__,u,e)+"",f.has(E)?s[u]=h:f.set(E,h));for(u=0;u<y;++u)E=c.call(t,a[u],u,a)+"",(h=f.get(E))?(r[u]=h,h.__data__=a[u],f.delete(E)):n[u]=new fm(t,a[u]);for(u=0;u<p;++u)(h=e[u])&&f.get(b[u])===h&&(s[u]=h)}function t4(t){return t.__data__}function n4(t,e){if(!arguments.length)return Array.from(this,t4);var n=e?e4:JO,r=this._parents,s=this._groups;typeof t!="function"&&(t=ZO(t));for(var a=s.length,c=new Array(a),u=new Array(a),h=new Array(a),f=0;f<a;++f){var p=r[f],y=s[f],b=y.length,E=r4(t.call(p,p&&p.__data__,f,r)),T=E.length,A=u[f]=new Array(T),R=c[f]=new Array(T),k=h[f]=new Array(b);n(p,y,A,R,k,E,e);for(var z=0,B=0,U,Y;z<T;++z)if(U=A[z]){for(z>=B&&(B=z+1);!(Y=R[B])&&++B<T;);U._next=Y||null}}return c=new vr(c,r),c._enter=u,c._exit=h,c}function r4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function i4(){return new vr(this._exit||this._groups.map(D2),this._parents)}function s4(t,e,n){var r=this.enter(),s=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function o4(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,a=r.length,c=Math.min(s,a),u=new Array(s),h=0;h<c;++h)for(var f=n[h],p=r[h],y=f.length,b=u[h]=new Array(y),E,T=0;T<y;++T)(E=f[T]||p[T])&&(b[T]=E);for(;h<s;++h)u[h]=n[h];return new vr(u,this._parents)}function a4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,a=r[s],c;--s>=0;)(c=r[s])&&(a&&c.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(c,a),a=c);return this}function l4(t){t||(t=c4);function e(y,b){return y&&b?t(y.__data__,b.__data__):!y-!b}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var c=n[a],u=c.length,h=s[a]=new Array(u),f,p=0;p<u;++p)(f=c[p])&&(h[p]=f);h.sort(e)}return new vr(s,this._parents).order()}function c4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function u4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function d4(){return Array.from(this)}function h4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length;s<a;++s){var c=r[s];if(c)return c}return null}function f4(){let t=0;for(const e of this)++t;return t}function m4(){return!this.node()}function p4(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,c=s.length,u;a<c;++a)(u=s[a])&&t.call(u,u.__data__,a,s);return this}function g4(t){return function(){this.removeAttribute(t)}}function y4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function v4(t,e){return function(){this.setAttribute(t,e)}}function b4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function E4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function w4(t,e){var n=Wm(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?y4:g4:typeof e=="function"?n.local?E4:_4:n.local?b4:v4)(n,e))}function M2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function x4(t){return function(){this.style.removeProperty(t)}}function T4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function S4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function A4(t,e,n){return arguments.length>1?this.each((e==null?x4:typeof e=="function"?S4:T4)(t,e,n??"")):ac(this.node(),t)}function ac(t,e){return t.style.getPropertyValue(e)||M2(t).getComputedStyle(t,null).getPropertyValue(e)}function C4(t){return function(){delete this[t]}}function R4(t,e){return function(){this[t]=e}}function I4(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function N4(t,e){return arguments.length>1?this.each((e==null?C4:typeof e=="function"?I4:R4)(t,e)):this.node()[t]}function O2(t){return t.trim().split(/^|\s+/)}function jv(t){return t.classList||new P2(t)}function P2(t){this._node=t,this._names=O2(t.getAttribute("class")||"")}P2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function V2(t,e){for(var n=jv(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function L2(t,e){for(var n=jv(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function k4(t){return function(){V2(this,t)}}function D4(t){return function(){L2(this,t)}}function M4(t,e){return function(){(e.apply(this,arguments)?V2:L2)(this,t)}}function O4(t,e){var n=O2(t+"");if(arguments.length<2){for(var r=jv(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?M4:e?k4:D4)(n,e))}function P4(){this.textContent=""}function V4(t){return function(){this.textContent=t}}function L4(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function z4(t){return arguments.length?this.each(t==null?P4:(typeof t=="function"?L4:V4)(t)):this.node().textContent}function U4(){this.innerHTML=""}function B4(t){return function(){this.innerHTML=t}}function j4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function H4(t){return arguments.length?this.each(t==null?U4:(typeof t=="function"?j4:B4)(t)):this.node().innerHTML}function F4(){this.nextSibling&&this.parentNode.appendChild(this)}function $4(){return this.each(F4)}function q4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G4(){return this.each(q4)}function Y4(t){var e=typeof t=="function"?t:R2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function K4(){return null}function X4(t,e){var n=typeof t=="function"?t:R2(t),r=e==null?K4:typeof e=="function"?e:Bv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function W4(){var t=this.parentNode;t&&t.removeChild(this)}function Q4(){return this.each(W4)}function Z4(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function J4(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eP(t){return this.select(t?J4:Z4)}function tP(t){return arguments.length?this.property("__data__",t):this.node().__data__}function nP(t){return function(e){t.call(this,e,this.__data__)}}function rP(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function iP(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,a;n<s;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function sP(t,e,n){return function(){var r=this.__on,s,a=nP(e);if(r){for(var c=0,u=r.length;c<u;++c)if((s=r[c]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=e;return}}this.addEventListener(t.type,a,n),s={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(s):this.__on=[s]}}function oP(t,e,n){var r=rP(t+""),s,a=r.length,c;if(arguments.length<2){var u=this.node().__on;if(u){for(var h=0,f=u.length,p;h<f;++h)for(s=0,p=u[h];s<a;++s)if((c=r[s]).type===p.type&&c.name===p.name)return p.value}return}for(u=e?sP:iP,s=0;s<a;++s)this.each(u(r[s],e,n));return this}function z2(t,e,n){var r=M2(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function aP(t,e){return function(){return z2(this,t,e)}}function lP(t,e){return function(){return z2(this,t,e.apply(this,arguments))}}function cP(t,e){return this.each((typeof e=="function"?lP:aP)(t,e))}function*uP(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,a=r.length,c;s<a;++s)(c=r[s])&&(yield c)}var U2=[null];function vr(t,e){this._groups=t,this._parents=e}function Ud(){return new vr([[document.documentElement]],U2)}function dP(){return this}vr.prototype=Ud.prototype={constructor:vr,select:LO,selectAll:jO,selectChild:qO,selectChildren:XO,filter:WO,data:n4,enter:QO,exit:i4,join:s4,merge:o4,selection:dP,order:a4,sort:l4,call:u4,nodes:d4,node:h4,size:f4,empty:m4,each:p4,attr:w4,style:A4,property:N4,classed:O4,text:z4,html:H4,raise:$4,lower:G4,append:Y4,insert:X4,remove:Q4,clone:eP,datum:tP,on:oP,dispatch:cP,[Symbol.iterator]:uP};function Zr(t){return typeof t=="string"?new vr([[document.querySelector(t)]],[document.documentElement]):new vr([[t]],U2)}function hP(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ci(t,e){if(t=hP(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const fP={passive:!1},hd={capture:!0,passive:!1};function z0(t){t.stopImmediatePropagation()}function Ql(t){t.preventDefault(),t.stopImmediatePropagation()}function B2(t){var e=t.document.documentElement,n=Zr(t).on("dragstart.drag",Ql,hd);"onselectstart"in e?n.on("selectstart.drag",Ql,hd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function j2(t,e){var n=t.document.documentElement,r=Zr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ql,hd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ef=t=>()=>t;function Ry(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:a,x:c,y:u,dx:h,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}Ry.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function mP(t){return!t.ctrlKey&&!t.button}function pP(){return this.parentNode}function gP(t,e){return e??{x:t.x,y:t.y}}function yP(){return navigator.maxTouchPoints||"ontouchstart"in this}function vP(){var t=mP,e=pP,n=gP,r=yP,s={},a=Xm("start","drag","end"),c=0,u,h,f,p,y=0;function b(U){U.on("mousedown.drag",E).filter(r).on("touchstart.drag",R).on("touchmove.drag",k,fP).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(U,Y){if(!(p||!t.call(this,U,Y))){var X=B(this,e.call(this,U,Y),U,Y,"mouse");X&&(Zr(U.view).on("mousemove.drag",T,hd).on("mouseup.drag",A,hd),B2(U.view),z0(U),f=!1,u=U.clientX,h=U.clientY,X("start",U))}}function T(U){if(Ql(U),!f){var Y=U.clientX-u,X=U.clientY-h;f=Y*Y+X*X>y}s.mouse("drag",U)}function A(U){Zr(U.view).on("mousemove.drag mouseup.drag",null),j2(U.view,f),Ql(U),s.mouse("end",U)}function R(U,Y){if(t.call(this,U,Y)){var X=U.changedTouches,D=e.call(this,U,Y),S=X.length,I,j;for(I=0;I<S;++I)(j=B(this,D,U,Y,X[I].identifier,X[I]))&&(z0(U),j("start",U,X[I]))}}function k(U){var Y=U.changedTouches,X=Y.length,D,S;for(D=0;D<X;++D)(S=s[Y[D].identifier])&&(Ql(U),S("drag",U,Y[D]))}function z(U){var Y=U.changedTouches,X=Y.length,D,S;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),D=0;D<X;++D)(S=s[Y[D].identifier])&&(z0(U),S("end",U,Y[D]))}function B(U,Y,X,D,S,I){var j=a.copy(),F=Ci(I||X,Y),$,O,L;if((L=n.call(U,new Ry("beforestart",{sourceEvent:X,target:b,identifier:S,active:c,x:F[0],y:F[1],dx:0,dy:0,dispatch:j}),D))!=null)return $=L.x-F[0]||0,O=L.y-F[1]||0,function q(M,W,G){var K=F,N;switch(M){case"start":s[S]=q,N=c++;break;case"end":delete s[S],--c;case"drag":F=Ci(G||W,Y),N=c;break}j.call(M,U,new Ry(M,{sourceEvent:W,subject:L,target:b,identifier:S,active:N,x:F[0]+$,y:F[1]+O,dx:F[0]-K[0],dy:F[1]-K[1],dispatch:j}),D)}}return b.filter=function(U){return arguments.length?(t=typeof U=="function"?U:Ef(!!U),b):t},b.container=function(U){return arguments.length?(e=typeof U=="function"?U:Ef(U),b):e},b.subject=function(U){return arguments.length?(n=typeof U=="function"?U:Ef(U),b):n},b.touchable=function(U){return arguments.length?(r=typeof U=="function"?U:Ef(!!U),b):r},b.on=function(){var U=a.on.apply(a,arguments);return U===a?b:U},b.clickDistance=function(U){return arguments.length?(y=(U=+U)*U,b):Math.sqrt(y)},b}function Hv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function H2(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Bd(){}var fd=.7,mm=1/fd,Zl="\\s*([+-]?\\d+)\\s*",md="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ii="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bP=/^#([0-9a-f]{3,8})$/,_P=new RegExp(`^rgb\\(${Zl},${Zl},${Zl}\\)$`),EP=new RegExp(`^rgb\\(${Ii},${Ii},${Ii}\\)$`),wP=new RegExp(`^rgba\\(${Zl},${Zl},${Zl},${md}\\)$`),xP=new RegExp(`^rgba\\(${Ii},${Ii},${Ii},${md}\\)$`),TP=new RegExp(`^hsl\\(${md},${Ii},${Ii}\\)$`),SP=new RegExp(`^hsla\\(${md},${Ii},${Ii},${md}\\)$`),b1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hv(Bd,pd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_1,formatHex:_1,formatHex8:AP,formatHsl:CP,formatRgb:E1,toString:E1});function _1(){return this.rgb().formatHex()}function AP(){return this.rgb().formatHex8()}function CP(){return F2(this).formatHsl()}function E1(){return this.rgb().formatRgb()}function pd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bP.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?w1(e):n===3?new Qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_P.exec(t))?new Qn(e[1],e[2],e[3],1):(e=EP.exec(t))?new Qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wP.exec(t))?wf(e[1],e[2],e[3],e[4]):(e=xP.exec(t))?wf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=TP.exec(t))?S1(e[1],e[2]/100,e[3]/100,1):(e=SP.exec(t))?S1(e[1],e[2]/100,e[3]/100,e[4]):b1.hasOwnProperty(t)?w1(b1[t]):t==="transparent"?new Qn(NaN,NaN,NaN,0):null}function w1(t){return new Qn(t>>16&255,t>>8&255,t&255,1)}function wf(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qn(t,e,n,r)}function RP(t){return t instanceof Bd||(t=pd(t)),t?(t=t.rgb(),new Qn(t.r,t.g,t.b,t.opacity)):new Qn}function Iy(t,e,n,r){return arguments.length===1?RP(t):new Qn(t,e,n,r??1)}function Qn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Hv(Qn,Iy,H2(Bd,{brighter(t){return t=t==null?mm:Math.pow(mm,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fd:Math.pow(fd,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn(Ea(this.r),Ea(this.g),Ea(this.b),pm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:x1,formatHex:x1,formatHex8:IP,formatRgb:T1,toString:T1}));function x1(){return`#${ga(this.r)}${ga(this.g)}${ga(this.b)}`}function IP(){return`#${ga(this.r)}${ga(this.g)}${ga(this.b)}${ga((isNaN(this.opacity)?1:this.opacity)*255)}`}function T1(){const t=pm(this.opacity);return`${t===1?"rgb(":"rgba("}${Ea(this.r)}, ${Ea(this.g)}, ${Ea(this.b)}${t===1?")":`, ${t})`}`}function pm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ea(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ga(t){return t=Ea(t),(t<16?"0":"")+t.toString(16)}function S1(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jr(t,e,n,r)}function F2(t){if(t instanceof Jr)return new Jr(t.h,t.s,t.l,t.opacity);if(t instanceof Bd||(t=pd(t)),!t)return new Jr;if(t instanceof Jr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),c=NaN,u=a-s,h=(a+s)/2;return u?(e===a?c=(n-r)/u+(n<r)*6:n===a?c=(r-e)/u+2:c=(e-n)/u+4,u/=h<.5?a+s:2-a-s,c*=60):u=h>0&&h<1?0:c,new Jr(c,u,h,t.opacity)}function NP(t,e,n,r){return arguments.length===1?F2(t):new Jr(t,e,n,r??1)}function Jr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Hv(Jr,NP,H2(Bd,{brighter(t){return t=t==null?mm:Math.pow(mm,t),new Jr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fd:Math.pow(fd,t),new Jr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Qn(U0(t>=240?t-240:t+120,s,r),U0(t,s,r),U0(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Jr(A1(this.h),xf(this.s),xf(this.l),pm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=pm(this.opacity);return`${t===1?"hsl(":"hsla("}${A1(this.h)}, ${xf(this.s)*100}%, ${xf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function A1(t){return t=(t||0)%360,t<0?t+360:t}function xf(t){return Math.max(0,Math.min(1,t||0))}function U0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Fv=t=>()=>t;function $2(t,e){return function(n){return t+n*e}}function kP(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function aK(t,e){var n=e-t;return n?$2(t,n>180||n<-180?n-360*Math.round(n/360):n):Fv(isNaN(t)?e:t)}function DP(t){return(t=+t)==1?q2:function(e,n){return n-e?kP(e,n,t):Fv(isNaN(e)?n:e)}}function q2(t,e){var n=e-t;return n?$2(t,n):Fv(isNaN(t)?e:t)}const C1=function t(e){var n=DP(e);function r(s,a){var c=n((s=Iy(s)).r,(a=Iy(a)).r),u=n(s.g,a.g),h=n(s.b,a.b),f=q2(s.opacity,a.opacity);return function(p){return s.r=c(p),s.g=u(p),s.b=h(p),s.opacity=f(p),s+""}}return r.gamma=t,r}(1);function eo(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ny=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,B0=new RegExp(Ny.source,"g");function MP(t){return function(){return t}}function OP(t){return function(e){return t(e)+""}}function PP(t,e){var n=Ny.lastIndex=B0.lastIndex=0,r,s,a,c=-1,u=[],h=[];for(t=t+"",e=e+"";(r=Ny.exec(t))&&(s=B0.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),u[c]?u[c]+=a:u[++c]=a),(r=r[0])===(s=s[0])?u[c]?u[c]+=s:u[++c]=s:(u[++c]=null,h.push({i:c,x:eo(r,s)})),n=B0.lastIndex;return n<e.length&&(a=e.slice(n),u[c]?u[c]+=a:u[++c]=a),u.length<2?h[0]?OP(h[0].x):MP(e):(e=h.length,function(f){for(var p=0,y;p<e;++p)u[(y=h[p]).i]=y.x(f);return u.join("")})}var R1=180/Math.PI,ky={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function G2(t,e,n,r,s,a){var c,u,h;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(h=t*n+e*r)&&(n-=t*h,r-=e*h),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,h/=u),t*r<e*n&&(t=-t,e=-e,h=-h,c=-c),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*R1,skewX:Math.atan(h)*R1,scaleX:c,scaleY:u}}var Tf;function VP(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ky:G2(e.a,e.b,e.c,e.d,e.e,e.f)}function LP(t){return t==null||(Tf||(Tf=document.createElementNS("http://www.w3.org/2000/svg","g")),Tf.setAttribute("transform",t),!(t=Tf.transform.baseVal.consolidate()))?ky:(t=t.matrix,G2(t.a,t.b,t.c,t.d,t.e,t.f))}function Y2(t,e,n,r){function s(f){return f.length?f.pop()+" ":""}function a(f,p,y,b,E,T){if(f!==y||p!==b){var A=E.push("translate(",null,e,null,n);T.push({i:A-4,x:eo(f,y)},{i:A-2,x:eo(p,b)})}else(y||b)&&E.push("translate("+y+e+b+n)}function c(f,p,y,b){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),b.push({i:y.push(s(y)+"rotate(",null,r)-2,x:eo(f,p)})):p&&y.push(s(y)+"rotate("+p+r)}function u(f,p,y,b){f!==p?b.push({i:y.push(s(y)+"skewX(",null,r)-2,x:eo(f,p)}):p&&y.push(s(y)+"skewX("+p+r)}function h(f,p,y,b,E,T){if(f!==y||p!==b){var A=E.push(s(E)+"scale(",null,",",null,")");T.push({i:A-4,x:eo(f,y)},{i:A-2,x:eo(p,b)})}else(y!==1||b!==1)&&E.push(s(E)+"scale("+y+","+b+")")}return function(f,p){var y=[],b=[];return f=t(f),p=t(p),a(f.translateX,f.translateY,p.translateX,p.translateY,y,b),c(f.rotate,p.rotate,y,b),u(f.skewX,p.skewX,y,b),h(f.scaleX,f.scaleY,p.scaleX,p.scaleY,y,b),f=p=null,function(E){for(var T=-1,A=b.length,R;++T<A;)y[(R=b[T]).i]=R.x(E);return y.join("")}}}var zP=Y2(VP,"px, ","px)","deg)"),UP=Y2(LP,", ",")",")"),BP=1e-12;function I1(t){return((t=Math.exp(t))+1/t)/2}function jP(t){return((t=Math.exp(t))-1/t)/2}function HP(t){return((t=Math.exp(2*t))-1)/(t+1)}const FP=function t(e,n,r){function s(a,c){var u=a[0],h=a[1],f=a[2],p=c[0],y=c[1],b=c[2],E=p-u,T=y-h,A=E*E+T*T,R,k;if(A<BP)k=Math.log(b/f)/e,R=function(D){return[u+D*E,h+D*T,f*Math.exp(e*D*k)]};else{var z=Math.sqrt(A),B=(b*b-f*f+r*A)/(2*f*n*z),U=(b*b-f*f-r*A)/(2*b*n*z),Y=Math.log(Math.sqrt(B*B+1)-B),X=Math.log(Math.sqrt(U*U+1)-U);k=(X-Y)/e,R=function(D){var S=D*k,I=I1(Y),j=f/(n*z)*(I*HP(e*S+Y)-jP(Y));return[u+j*E,h+j*T,f*I/I1(e*S+Y)]}}return R.duration=k*1e3*e/Math.SQRT2,R}return s.rho=function(a){var c=Math.max(.001,+a),u=c*c,h=u*u;return t(c,u,h)},s}(Math.SQRT2,2,4);var lc=0,Hu=0,Du=0,K2=1e3,gm,Fu,ym=0,Sa=0,Qm=0,gd=typeof performance=="object"&&performance.now?performance:Date,X2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $v(){return Sa||(X2($P),Sa=gd.now()+Qm)}function $P(){Sa=0}function vm(){this._call=this._time=this._next=null}vm.prototype=W2.prototype={constructor:vm,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$v():+n)+(e==null?0:+e),!this._next&&Fu!==this&&(Fu?Fu._next=this:gm=this,Fu=this),this._call=t,this._time=n,Dy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dy())}};function W2(t,e,n){var r=new vm;return r.restart(t,e,n),r}function qP(){$v(),++lc;for(var t=gm,e;t;)(e=Sa-t._time)>=0&&t._call.call(void 0,e),t=t._next;--lc}function N1(){Sa=(ym=gd.now())+Qm,lc=Hu=0;try{qP()}finally{lc=0,YP(),Sa=0}}function GP(){var t=gd.now(),e=t-ym;e>K2&&(Qm-=e,ym=t)}function YP(){for(var t,e=gm,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:gm=n);Fu=t,Dy(r)}function Dy(t){if(!lc){Hu&&(Hu=clearTimeout(Hu));var e=t-Sa;e>24?(t<1/0&&(Hu=setTimeout(N1,t-gd.now()-Qm)),Du&&(Du=clearInterval(Du))):(Du||(ym=gd.now(),Du=setInterval(GP,K2)),lc=1,X2(N1))}}function k1(t,e,n){var r=new vm;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var KP=Xm("start","end","cancel","interrupt"),XP=[],Q2=0,D1=1,My=2,Kf=3,M1=4,Oy=5,Xf=6;function Zm(t,e,n,r,s,a){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;WP(t,n,{name:e,index:r,group:s,on:KP,tween:XP,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Q2})}function qv(t,e){var n=si(t,e);if(n.state>Q2)throw new Error("too late; already scheduled");return n}function Ui(t,e){var n=si(t,e);if(n.state>Kf)throw new Error("too late; already running");return n}function si(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function WP(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=W2(a,0,n.time);function a(f){n.state=D1,n.timer.restart(c,n.delay,n.time),n.delay<=f&&c(f-n.delay)}function c(f){var p,y,b,E;if(n.state!==D1)return h();for(p in r)if(E=r[p],E.name===n.name){if(E.state===Kf)return k1(c);E.state===M1?(E.state=Xf,E.timer.stop(),E.on.call("interrupt",t,t.__data__,E.index,E.group),delete r[p]):+p<e&&(E.state=Xf,E.timer.stop(),E.on.call("cancel",t,t.__data__,E.index,E.group),delete r[p])}if(k1(function(){n.state===Kf&&(n.state=M1,n.timer.restart(u,n.delay,n.time),u(f))}),n.state=My,n.on.call("start",t,t.__data__,n.index,n.group),n.state===My){for(n.state=Kf,s=new Array(b=n.tween.length),p=0,y=-1;p<b;++p)(E=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++y]=E);s.length=y+1}}function u(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(h),n.state=Oy,1),y=-1,b=s.length;++y<b;)s[y].call(t,p);n.state===Oy&&(n.on.call("end",t,t.__data__,n.index,n.group),h())}function h(){n.state=Xf,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function Wf(t,e){var n=t.__transition,r,s,a=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((r=n[c]).name!==e){a=!1;continue}s=r.state>My&&r.state<Oy,r.state=Xf,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[c]}a&&delete t.__transition}}function QP(t){return this.each(function(){Wf(this,t)})}function ZP(t,e){var n,r;return function(){var s=Ui(this,t),a=s.tween;if(a!==n){r=n=a;for(var c=0,u=r.length;c<u;++c)if(r[c].name===e){r=r.slice(),r.splice(c,1);break}}s.tween=r}}function JP(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=Ui(this,t),c=a.tween;if(c!==r){s=(r=c).slice();for(var u={name:e,value:n},h=0,f=s.length;h<f;++h)if(s[h].name===e){s[h]=u;break}h===f&&s.push(u)}a.tween=s}}function e3(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=si(this.node(),n).tween,s=0,a=r.length,c;s<a;++s)if((c=r[s]).name===t)return c.value;return null}return this.each((e==null?ZP:JP)(n,t,e))}function Gv(t,e,n){var r=t._id;return t.each(function(){var s=Ui(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return si(s,r).value[e]}}function Z2(t,e){var n;return(typeof e=="number"?eo:e instanceof pd?C1:(n=pd(e))?(e=n,C1):PP)(t,e)}function t3(t){return function(){this.removeAttribute(t)}}function n3(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r3(t,e,n){var r,s=n+"",a;return function(){var c=this.getAttribute(t);return c===s?null:c===r?a:a=e(r=c,n)}}function i3(t,e,n){var r,s=n+"",a;return function(){var c=this.getAttributeNS(t.space,t.local);return c===s?null:c===r?a:a=e(r=c,n)}}function s3(t,e,n){var r,s,a;return function(){var c,u=n(this),h;return u==null?void this.removeAttribute(t):(c=this.getAttribute(t),h=u+"",c===h?null:c===r&&h===s?a:(s=h,a=e(r=c,u)))}}function o3(t,e,n){var r,s,a;return function(){var c,u=n(this),h;return u==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),h=u+"",c===h?null:c===r&&h===s?a:(s=h,a=e(r=c,u)))}}function a3(t,e){var n=Wm(t),r=n==="transform"?UP:Z2;return this.attrTween(t,typeof e=="function"?(n.local?o3:s3)(n,r,Gv(this,"attr."+t,e)):e==null?(n.local?n3:t3)(n):(n.local?i3:r3)(n,r,e))}function l3(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function c3(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function u3(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&c3(t,a)),n}return s._value=e,s}function d3(t,e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&l3(t,a)),n}return s._value=e,s}function h3(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Wm(t);return this.tween(n,(r.local?u3:d3)(r,e))}function f3(t,e){return function(){qv(this,t).delay=+e.apply(this,arguments)}}function m3(t,e){return e=+e,function(){qv(this,t).delay=e}}function p3(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?f3:m3)(e,t)):si(this.node(),e).delay}function g3(t,e){return function(){Ui(this,t).duration=+e.apply(this,arguments)}}function y3(t,e){return e=+e,function(){Ui(this,t).duration=e}}function v3(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?g3:y3)(e,t)):si(this.node(),e).duration}function b3(t,e){if(typeof e!="function")throw new Error;return function(){Ui(this,t).ease=e}}function _3(t){var e=this._id;return arguments.length?this.each(b3(e,t)):si(this.node(),e).ease}function E3(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ui(this,t).ease=n}}function w3(t){if(typeof t!="function")throw new Error;return this.each(E3(this._id,t))}function x3(t){typeof t!="function"&&(t=N2(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var a=e[s],c=a.length,u=r[s]=[],h,f=0;f<c;++f)(h=a[f])&&t.call(h,h.__data__,f,a)&&u.push(h);return new ys(r,this._parents,this._name,this._id)}function T3(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,a=Math.min(r,s),c=new Array(r),u=0;u<a;++u)for(var h=e[u],f=n[u],p=h.length,y=c[u]=new Array(p),b,E=0;E<p;++E)(b=h[E]||f[E])&&(y[E]=b);for(;u<r;++u)c[u]=e[u];return new ys(c,this._parents,this._name,this._id)}function S3(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function A3(t,e,n){var r,s,a=S3(e)?qv:Ui;return function(){var c=a(this,t),u=c.on;u!==r&&(s=(r=u).copy()).on(e,n),c.on=s}}function C3(t,e){var n=this._id;return arguments.length<2?si(this.node(),n).on.on(t):this.each(A3(n,t,e))}function R3(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function I3(){return this.on("end.remove",R3(this._id))}function N3(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bv(t));for(var r=this._groups,s=r.length,a=new Array(s),c=0;c<s;++c)for(var u=r[c],h=u.length,f=a[c]=new Array(h),p,y,b=0;b<h;++b)(p=u[b])&&(y=t.call(p,p.__data__,b,u))&&("__data__"in p&&(y.__data__=p.__data__),f[b]=y,Zm(f[b],e,n,b,f,si(p,n)));return new ys(a,this._parents,e,n)}function k3(t){var e=this._name,n=this._id;typeof t!="function"&&(t=I2(t));for(var r=this._groups,s=r.length,a=[],c=[],u=0;u<s;++u)for(var h=r[u],f=h.length,p,y=0;y<f;++y)if(p=h[y]){for(var b=t.call(p,p.__data__,y,h),E,T=si(p,n),A=0,R=b.length;A<R;++A)(E=b[A])&&Zm(E,e,n,A,b,T);a.push(b),c.push(p)}return new ys(a,c,e,n)}var D3=Ud.prototype.constructor;function M3(){return new D3(this._groups,this._parents)}function O3(t,e){var n,r,s;return function(){var a=ac(this,t),c=(this.style.removeProperty(t),ac(this,t));return a===c?null:a===n&&c===r?s:s=e(n=a,r=c)}}function J2(t){return function(){this.style.removeProperty(t)}}function P3(t,e,n){var r,s=n+"",a;return function(){var c=ac(this,t);return c===s?null:c===r?a:a=e(r=c,n)}}function V3(t,e,n){var r,s,a;return function(){var c=ac(this,t),u=n(this),h=u+"";return u==null&&(h=u=(this.style.removeProperty(t),ac(this,t))),c===h?null:c===r&&h===s?a:(s=h,a=e(r=c,u))}}function L3(t,e){var n,r,s,a="style."+e,c="end."+a,u;return function(){var h=Ui(this,t),f=h.on,p=h.value[a]==null?u||(u=J2(e)):void 0;(f!==n||s!==p)&&(r=(n=f).copy()).on(c,s=p),h.on=r}}function z3(t,e,n){var r=(t+="")=="transform"?zP:Z2;return e==null?this.styleTween(t,O3(t,r)).on("end.style."+t,J2(t)):typeof e=="function"?this.styleTween(t,V3(t,r,Gv(this,"style."+t,e))).each(L3(this._id,t)):this.styleTween(t,P3(t,r,e),n).on("end.style."+t,null)}function U3(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function B3(t,e,n){var r,s;function a(){var c=e.apply(this,arguments);return c!==s&&(r=(s=c)&&U3(t,c,n)),r}return a._value=e,a}function j3(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,B3(t,e,n??""))}function H3(t){return function(){this.textContent=t}}function F3(t){return function(){var e=t(this);this.textContent=e??""}}function $3(t){return this.tween("text",typeof t=="function"?F3(Gv(this,"text",t)):H3(t==null?"":t+""))}function q3(t){return function(e){this.textContent=t.call(this,e)}}function G3(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&q3(s)),e}return r._value=t,r}function Y3(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,G3(t))}function K3(){for(var t=this._name,e=this._id,n=eC(),r=this._groups,s=r.length,a=0;a<s;++a)for(var c=r[a],u=c.length,h,f=0;f<u;++f)if(h=c[f]){var p=si(h,e);Zm(h,t,n,f,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ys(r,this._parents,t,n)}function X3(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(a,c){var u={value:c},h={value:function(){--s===0&&a()}};n.each(function(){var f=Ui(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(h)),f.on=e}),s===0&&a()})}var W3=0;function ys(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function eC(){return++W3}var ds=Ud.prototype;ys.prototype={constructor:ys,select:N3,selectAll:k3,selectChild:ds.selectChild,selectChildren:ds.selectChildren,filter:x3,merge:T3,selection:M3,transition:K3,call:ds.call,nodes:ds.nodes,node:ds.node,size:ds.size,empty:ds.empty,each:ds.each,on:C3,attr:a3,attrTween:h3,style:z3,styleTween:j3,text:$3,textTween:Y3,remove:I3,tween:e3,delay:p3,duration:v3,ease:_3,easeVarying:w3,end:X3,[Symbol.iterator]:ds[Symbol.iterator]};function Q3(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Z3={time:null,delay:0,duration:250,ease:Q3};function J3(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function eV(t){var e,n;t instanceof ys?(e=t._id,t=t._name):(e=eC(),(n=Z3).time=$v(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var c=r[a],u=c.length,h,f=0;f<u;++f)(h=c[f])&&Zm(h,t,e,f,c,n||J3(h,e));return new ys(r,this._parents,t,e)}Ud.prototype.interrupt=QP;Ud.prototype.transition=eV;const Sf=t=>()=>t;function tV(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function fs(t,e,n){this.k=t,this.x=e,this.y=n}fs.prototype={constructor:fs,scale:function(t){return t===1?this:new fs(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new fs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var uo=new fs(1,0,0);fs.prototype;function j0(t){t.stopImmediatePropagation()}function Mu(t){t.preventDefault(),t.stopImmediatePropagation()}function nV(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function rV(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function O1(){return this.__zoom||uo}function iV(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function sV(){return navigator.maxTouchPoints||"ontouchstart"in this}function oV(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),c>a?(a+c)/2:Math.min(0,a)||Math.max(0,c))}function aV(){var t=nV,e=rV,n=oV,r=iV,s=sV,a=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=FP,f=Xm("start","zoom","end"),p,y,b,E=500,T=150,A=0,R=10;function k(L){L.property("__zoom",O1).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",j).filter(s).on("touchstart.zoom",F).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(L,q,M,W){var G=L.selection?L.selection():L;G.property("__zoom",O1),L!==G?Y(L,q,M,W):G.interrupt().each(function(){X(this,arguments).event(W).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},k.scaleBy=function(L,q,M,W){k.scaleTo(L,function(){var G=this.__zoom.k,K=typeof q=="function"?q.apply(this,arguments):q;return G*K},M,W)},k.scaleTo=function(L,q,M,W){k.transform(L,function(){var G=e.apply(this,arguments),K=this.__zoom,N=M==null?U(G):typeof M=="function"?M.apply(this,arguments):M,J=K.invert(N),ne=typeof q=="function"?q.apply(this,arguments):q;return n(B(z(K,ne),N,J),G,c)},M,W)},k.translateBy=function(L,q,M,W){k.transform(L,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof M=="function"?M.apply(this,arguments):M),e.apply(this,arguments),c)},null,W)},k.translateTo=function(L,q,M,W,G){k.transform(L,function(){var K=e.apply(this,arguments),N=this.__zoom,J=W==null?U(K):typeof W=="function"?W.apply(this,arguments):W;return n(uo.translate(J[0],J[1]).scale(N.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof M=="function"?-M.apply(this,arguments):-M),K,c)},W,G)};function z(L,q){return q=Math.max(a[0],Math.min(a[1],q)),q===L.k?L:new fs(q,L.x,L.y)}function B(L,q,M){var W=q[0]-M[0]*L.k,G=q[1]-M[1]*L.k;return W===L.x&&G===L.y?L:new fs(L.k,W,G)}function U(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function Y(L,q,M,W){L.on("start.zoom",function(){X(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event(W).end()}).tween("zoom",function(){var G=this,K=arguments,N=X(G,K).event(W),J=e.apply(G,K),ne=M==null?U(J):typeof M=="function"?M.apply(G,K):M,Z=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),te=G.__zoom,le=typeof q=="function"?q.apply(G,K):q,de=h(te.invert(ne).concat(Z/te.k),le.invert(ne).concat(Z/le.k));return function(me){if(me===1)me=le;else{var be=de(me),Ae=Z/be[2];me=new fs(Ae,ne[0]-be[0]*Ae,ne[1]-be[1]*Ae)}N.zoom(null,me)}})}function X(L,q,M){return!M&&L.__zooming||new D(L,q)}function D(L,q){this.that=L,this.args=q,this.active=0,this.sourceEvent=null,this.extent=e.apply(L,q),this.taps=0}D.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,q){return this.mouse&&L!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var q=Zr(this.that).datum();f.call(L,this.that,new tV(L,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:f}),q)}};function S(L,...q){if(!t.apply(this,arguments))return;var M=X(this,q).event(L),W=this.__zoom,G=Math.max(a[0],Math.min(a[1],W.k*Math.pow(2,r.apply(this,arguments)))),K=Ci(L);if(M.wheel)(M.mouse[0][0]!==K[0]||M.mouse[0][1]!==K[1])&&(M.mouse[1]=W.invert(M.mouse[0]=K)),clearTimeout(M.wheel);else{if(W.k===G)return;M.mouse=[K,W.invert(K)],Wf(this),M.start()}Mu(L),M.wheel=setTimeout(N,T),M.zoom("mouse",n(B(z(W,G),M.mouse[0],M.mouse[1]),M.extent,c));function N(){M.wheel=null,M.end()}}function I(L,...q){if(b||!t.apply(this,arguments))return;var M=L.currentTarget,W=X(this,q,!0).event(L),G=Zr(L.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",Z,!0),K=Ci(L,M),N=L.clientX,J=L.clientY;B2(L.view),j0(L),W.mouse=[K,this.__zoom.invert(K)],Wf(this),W.start();function ne(te){if(Mu(te),!W.moved){var le=te.clientX-N,de=te.clientY-J;W.moved=le*le+de*de>A}W.event(te).zoom("mouse",n(B(W.that.__zoom,W.mouse[0]=Ci(te,M),W.mouse[1]),W.extent,c))}function Z(te){G.on("mousemove.zoom mouseup.zoom",null),j2(te.view,W.moved),Mu(te),W.event(te).end()}}function j(L,...q){if(t.apply(this,arguments)){var M=this.__zoom,W=Ci(L.changedTouches?L.changedTouches[0]:L,this),G=M.invert(W),K=M.k*(L.shiftKey?.5:2),N=n(B(z(M,K),W,G),e.apply(this,q),c);Mu(L),u>0?Zr(this).transition().duration(u).call(Y,N,W,L):Zr(this).call(k.transform,N,W,L)}}function F(L,...q){if(t.apply(this,arguments)){var M=L.touches,W=M.length,G=X(this,q,L.changedTouches.length===W).event(L),K,N,J,ne;for(j0(L),N=0;N<W;++N)J=M[N],ne=Ci(J,this),ne=[ne,this.__zoom.invert(ne),J.identifier],G.touch0?!G.touch1&&G.touch0[2]!==ne[2]&&(G.touch1=ne,G.taps=0):(G.touch0=ne,K=!0,G.taps=1+!!p);p&&(p=clearTimeout(p)),K&&(G.taps<2&&(y=ne[0],p=setTimeout(function(){p=null},E)),Wf(this),G.start())}}function $(L,...q){if(this.__zooming){var M=X(this,q).event(L),W=L.changedTouches,G=W.length,K,N,J,ne;for(Mu(L),K=0;K<G;++K)N=W[K],J=Ci(N,this),M.touch0&&M.touch0[2]===N.identifier?M.touch0[0]=J:M.touch1&&M.touch1[2]===N.identifier&&(M.touch1[0]=J);if(N=M.that.__zoom,M.touch1){var Z=M.touch0[0],te=M.touch0[1],le=M.touch1[0],de=M.touch1[1],me=(me=le[0]-Z[0])*me+(me=le[1]-Z[1])*me,be=(be=de[0]-te[0])*be+(be=de[1]-te[1])*be;N=z(N,Math.sqrt(me/be)),J=[(Z[0]+le[0])/2,(Z[1]+le[1])/2],ne=[(te[0]+de[0])/2,(te[1]+de[1])/2]}else if(M.touch0)J=M.touch0[0],ne=M.touch0[1];else return;M.zoom("touch",n(B(N,J,ne),M.extent,c))}}function O(L,...q){if(this.__zooming){var M=X(this,q).event(L),W=L.changedTouches,G=W.length,K,N;for(j0(L),b&&clearTimeout(b),b=setTimeout(function(){b=null},E),K=0;K<G;++K)N=W[K],M.touch0&&M.touch0[2]===N.identifier?delete M.touch0:M.touch1&&M.touch1[2]===N.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(N=Ci(N,this),Math.hypot(y[0]-N[0],y[1]-N[1])<R)){var J=Zr(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return k.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:Sf(+L),k):r},k.filter=function(L){return arguments.length?(t=typeof L=="function"?L:Sf(!!L),k):t},k.touchable=function(L){return arguments.length?(s=typeof L=="function"?L:Sf(!!L),k):s},k.extent=function(L){return arguments.length?(e=typeof L=="function"?L:Sf([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),k):e},k.scaleExtent=function(L){return arguments.length?(a[0]=+L[0],a[1]=+L[1],k):[a[0],a[1]]},k.translateExtent=function(L){return arguments.length?(c[0][0]=+L[0][0],c[1][0]=+L[1][0],c[0][1]=+L[0][1],c[1][1]=+L[1][1],k):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},k.constrain=function(L){return arguments.length?(n=L,k):n},k.duration=function(L){return arguments.length?(u=+L,k):u},k.interpolate=function(L){return arguments.length?(h=L,k):h},k.on=function(){var L=f.on.apply(f,arguments);return L===f?k:L},k.clickDistance=function(L){return arguments.length?(A=(L=+L)*L,k):Math.sqrt(A)},k.tapDistance=function(L){return arguments.length?(R=+L,k):R},k}var tC=A2();const Jm=P.createContext(null),lV=Jm.Provider,vs={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},nC=vs.error001();function Ct(t,e){const n=P.useContext(Jm);if(n===null)throw new Error(nC);return C2(n,t,e)}const mn=()=>{const t=P.useContext(Jm);if(t===null)throw new Error(nC);return P.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},cV=t=>t.userSelectionActive?"none":"all";function rC({position:t,children:e,className:n,style:r,...s}){const a=Ct(cV),c=`${t}`.split("-");return fe.createElement("div",{className:$n(["react-flow__panel",n,...c]),style:{...r,pointerEvents:a},...s},e)}function uV({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:fe.createElement(rC,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const dV=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:h,className:f,...p})=>{const y=P.useRef(null),[b,E]=P.useState({x:0,y:0,width:0,height:0}),T=$n(["react-flow__edge-textwrapper",f]);return P.useEffect(()=>{if(y.current){const A=y.current.getBBox();E({x:A.x,y:A.y,width:A.width,height:A.height})}},[n]),typeof n>"u"||!n?null:fe.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:T,visibility:b.width?"visible":"hidden",...p},s&&fe.createElement("rect",{width:b.width+2*c[0],x:-c[0],y:-c[1],height:b.height+2*c[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),fe.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:y,style:r},n),h)};var hV=P.memo(dV);const Yv=t=>({width:t.offsetWidth,height:t.offsetHeight}),cc=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Kv=(t={x:0,y:0},e)=>({x:cc(t.x,e[0][0],e[1][0]),y:cc(t.y,e[0][1],e[1][1])}),P1=(t,e,n)=>t<e?cc(Math.abs(t-e),1,50)/50:t>n?-cc(Math.abs(t-n),1,50)/50:0,iC=(t,e)=>{const n=P1(t.x,35,e.width-35)*20,r=P1(t.y,35,e.height-35)*20;return[n,r]},sC=t=>t.getRootNode?.()||window?.document,fV=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Xv=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),mV=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),V1=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Py=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},pV=t=>Ur(t.width)&&Ur(t.height)&&Ur(t.x)&&Ur(t.y),Ur=t=>!isNaN(t)&&isFinite(t),Pt=Symbol.for("internals"),oC=["Enter"," ","Escape"],gV=(t,e)=>{},yV=t=>"nativeEvent"in t;function Vy(t){const n=(yV(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const aC=t=>"clientX"in t,ho=(t,e)=>{const n=aC(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},bm=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,jd=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:b,interactionWidth:E=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:b}),E&&fe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:E,className:"react-flow__edge-interaction"}),s&&Ur(n)&&Ur(r)?fe.createElement(hV,{x:n,y:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f}):null);jd.displayName="BaseEdge";function Ou(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(a=>a.id===t);s&&n(r,{...s})}}function lC({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,a=n<t?n+s:n-s,c=Math.abs(r-e)/2,u=r<e?r+c:r-c;return[a,u,s,c]}function cC({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u}){const h=t*.125+s*.375+c*.375+n*.125,f=e*.125+a*.375+u*.375+r*.125,p=Math.abs(h-t),y=Math.abs(f-e);return[h,f,p,y]}var vo;(function(t){t.Strict="strict",t.Loose="loose"})(vo||(vo={}));var ya;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ya||(ya={}));var yd;(function(t){t.Partial="partial",t.Full="full"})(yd||(yd={}));var no;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(no||(no={}));var Aa;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Aa||(Aa={}));var Te;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Te||(Te={}));function L1({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Te.Left||t===Te.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function uC({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top}){const[c,u]=L1({pos:n,x1:t,y1:e,x2:r,y2:s}),[h,f]=L1({pos:a,x1:r,y1:s,x2:t,y2:e}),[p,y,b,E]=cC({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:u,targetControlX:h,targetControlY:f});return[`M${t},${e} C${c},${u} ${h},${f} ${r},${s}`,p,y,b,E]}const Wv=P.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:a=Te.Top,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:T,interactionWidth:A})=>{const[R,k,z]=uC({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a});return fe.createElement(jd,{path:R,labelX:k,labelY:z,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:T,interactionWidth:A})});Wv.displayName="SimpleBezierEdge";const z1={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},vV=({source:t,sourcePosition:e=Te.Bottom,target:n})=>e===Te.Left||e===Te.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},U1=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function bV({source:t,sourcePosition:e=Te.Bottom,target:n,targetPosition:r=Te.Top,center:s,offset:a}){const c=z1[e],u=z1[r],h={x:t.x+c.x*a,y:t.y+c.y*a},f={x:n.x+u.x*a,y:n.y+u.y*a},p=vV({source:h,sourcePosition:e,target:f}),y=p.x!==0?"x":"y",b=p[y];let E=[],T,A;const R={x:0,y:0},k={x:0,y:0},[z,B,U,Y]=lC({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[y]*u[y]===-1){T=s.x??z,A=s.y??B;const D=[{x:T,y:h.y},{x:T,y:f.y}],S=[{x:h.x,y:A},{x:f.x,y:A}];c[y]===b?E=y==="x"?D:S:E=y==="x"?S:D}else{const D=[{x:h.x,y:f.y}],S=[{x:f.x,y:h.y}];if(y==="x"?E=c.x===b?S:D:E=c.y===b?D:S,e===r){const O=Math.abs(t[y]-n[y]);if(O<=a){const L=Math.min(a-1,a-O);c[y]===b?R[y]=(h[y]>t[y]?-1:1)*L:k[y]=(f[y]>n[y]?-1:1)*L}}if(e!==r){const O=y==="x"?"y":"x",L=c[y]===u[O],q=h[O]>f[O],M=h[O]<f[O];(c[y]===1&&(!L&&q||L&&M)||c[y]!==1&&(!L&&M||L&&q))&&(E=y==="x"?D:S)}const I={x:h.x+R.x,y:h.y+R.y},j={x:f.x+k.x,y:f.y+k.y},F=Math.max(Math.abs(I.x-E[0].x),Math.abs(j.x-E[0].x)),$=Math.max(Math.abs(I.y-E[0].y),Math.abs(j.y-E[0].y));F>=$?(T=(I.x+j.x)/2,A=E[0].y):(T=E[0].x,A=(I.y+j.y)/2)}return[[t,{x:h.x+R.x,y:h.y+R.y},...E,{x:f.x+k.x,y:f.y+k.y},n],T,A,U,Y]}function _V(t,e,n,r){const s=Math.min(U1(t,e)/2,U1(e,n)/2,r),{x:a,y:c}=e;if(t.x===a&&a===n.x||t.y===c&&c===n.y)return`L${a} ${c}`;if(t.y===c){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${a+s*f},${c}Q ${a},${c} ${a},${c+s*p}`}const u=t.x<n.x?1:-1,h=t.y<n.y?-1:1;return`L ${a},${c+s*h}Q ${a},${c} ${a+s*u},${c}`}function Ly({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top,borderRadius:c=5,centerX:u,centerY:h,offset:f=20}){const[p,y,b,E,T]=bV({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:u,y:h},offset:f});return[p.reduce((R,k,z)=>{let B="";return z>0&&z<p.length-1?B=_V(p[z-1],k,p[z+1],c):B=`${z===0?"M":"L"}${k.x} ${k.y}`,R+=B,R},""),y,b,E,T]}const ep=P.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,sourcePosition:y=Te.Bottom,targetPosition:b=Te.Top,markerEnd:E,markerStart:T,pathOptions:A,interactionWidth:R})=>{const[k,z,B]=Ly({sourceX:t,sourceY:e,sourcePosition:y,targetX:n,targetY:r,targetPosition:b,borderRadius:A?.borderRadius,offset:A?.offset});return fe.createElement(jd,{path:k,labelX:z,labelY:B,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:E,markerStart:T,interactionWidth:R})});ep.displayName="SmoothStepEdge";const Qv=P.memo(t=>fe.createElement(ep,{...t,pathOptions:P.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Qv.displayName="StepEdge";function EV({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,a,c,u]=lC({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,a,c,u]}const Zv=P.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:b,interactionWidth:E})=>{const[T,A,R]=EV({sourceX:t,sourceY:e,targetX:n,targetY:r});return fe.createElement(jd,{path:T,labelX:A,labelY:R,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:b,interactionWidth:E})});Zv.displayName="StraightEdge";function Af(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function B1({pos:t,x1:e,y1:n,x2:r,y2:s,c:a}){switch(t){case Te.Left:return[e-Af(e-r,a),n];case Te.Right:return[e+Af(r-e,a),n];case Te.Top:return[e,n-Af(n-s,a)];case Te.Bottom:return[e,n+Af(s-n,a)]}}function dC({sourceX:t,sourceY:e,sourcePosition:n=Te.Bottom,targetX:r,targetY:s,targetPosition:a=Te.Top,curvature:c=.25}){const[u,h]=B1({pos:n,x1:t,y1:e,x2:r,y2:s,c}),[f,p]=B1({pos:a,x1:r,y1:s,x2:t,y2:e,c}),[y,b,E,T]=cC({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:h,targetControlX:f,targetControlY:p});return[`M${t},${e} C${u},${h} ${f},${p} ${r},${s}`,y,b,E,T]}const _m=P.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=Te.Bottom,targetPosition:a=Te.Top,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:T,pathOptions:A,interactionWidth:R})=>{const[k,z,B]=dC({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:a,curvature:A?.curvature});return fe.createElement(jd,{path:k,labelX:z,labelY:B,label:c,labelStyle:u,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:T,interactionWidth:R})});_m.displayName="BezierEdge";const Jv=P.createContext(null),wV=Jv.Provider;Jv.Consumer;const xV=()=>P.useContext(Jv),TV=t=>"id"in t&&"source"in t&&"target"in t,SV=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,zy=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,AV=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),CV=(t,e)=>{if(!t.source||!t.target)return e;let n;return TV(t)?n={...t}:n={...t,id:SV(t)},AV(n,e)?e:e.concat(n)},Uy=({x:t,y:e},[n,r,s],a,[c,u])=>{const h={x:(t-n)/s,y:(e-r)/s};return a?{x:c*Math.round(h.x/c),y:u*Math.round(h.y/u)}:h},hC=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),Jl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},eb=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:a,y:c}=Jl(s,e).positionAbsolute;return fV(r,Xv({x:a,y:c,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return mV(n)},fC=(t,e,[n,r,s]=[0,0,1],a=!1,c=!1,u=[0,0])=>{const h={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},f=[];return t.forEach(p=>{const{width:y,height:b,selectable:E=!0,hidden:T=!1}=p;if(c&&!E||T)return!1;const{positionAbsolute:A}=Jl(p,u),R={x:A.x,y:A.y,width:y||0,height:b||0},k=Py(h,R),z=typeof y>"u"||typeof b>"u"||y===null||b===null,B=a&&k>0,U=(y||0)*(b||0);(z||B||k>=U||p.dragging)&&f.push(p)}),f},mC=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},pC=(t,e,n,r,s,a=.1)=>{const c=e/(t.width*(1+a)),u=n/(t.height*(1+a)),h=Math.min(c,u),f=cc(h,r,s),p=t.x+t.width/2,y=t.y+t.height/2,b=e/2-p*f,E=n/2-y*f;return{x:b,y:E,zoom:f}},ha=(t,e=0)=>t.transition().duration(e);function j1(t,e,n,r){return(e[n]||[]).reduce((s,a)=>(`${t.id}-${a.id}-${n}`!==r&&s.push({id:a.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+a.x+a.width/2,y:(t.positionAbsolute?.y??0)+a.y+a.height/2}),s),[])}function RV(t,e,n,r,s,a){const{x:c,y:u}=ho(t),f=e.elementsFromPoint(c,u).find(T=>T.classList.contains("react-flow__handle"));if(f){const T=f.getAttribute("data-nodeid");if(T){const A=tb(void 0,f),R=f.getAttribute("data-handleid"),k=a({nodeId:T,id:R,type:A});if(k){const z=s.find(B=>B.nodeId===T&&B.type===A&&B.id===R);return{handle:{id:R,type:A,nodeId:T,x:z?.x||n.x,y:z?.y||n.y},validHandleResult:k}}}}let p=[],y=1/0;if(s.forEach(T=>{const A=Math.sqrt((T.x-n.x)**2+(T.y-n.y)**2);if(A<=r){const R=a(T);A<=y&&(A<y?p=[{handle:T,validHandleResult:R}]:A===y&&p.push({handle:T,validHandleResult:R}),y=A)}}),!p.length)return{handle:null,validHandleResult:gC()};if(p.length===1)return p[0];const b=p.some(({validHandleResult:T})=>T.isValid),E=p.some(({handle:T})=>T.type==="target");return p.find(({handle:T,validHandleResult:A})=>E?T.type==="target":b?A.isValid:!0)||p[0]}const IV={source:null,target:null,sourceHandle:null,targetHandle:null},gC=()=>({handleDomNode:null,isValid:!1,connection:IV,endHandle:null});function yC(t,e,n,r,s,a,c){const u=s==="target",h=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...gC(),handleDomNode:h};if(h){const p=tb(void 0,h),y=h.getAttribute("data-nodeid"),b=h.getAttribute("data-handleid"),E=h.classList.contains("connectable"),T=h.classList.contains("connectableend"),A={source:u?y:n,sourceHandle:u?b:r,target:u?n:y,targetHandle:u?r:b};f.connection=A,E&&T&&(e===vo.Strict?u&&p==="source"||!u&&p==="target":y!==n||b!==r)&&(f.endHandle={nodeId:y,handleId:b,type:p},f.isValid=a(A))}return f}function NV({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,a)=>{if(a[Pt]){const{handleBounds:c}=a[Pt];let u=[],h=[];c&&(u=j1(a,c,"source",`${e}-${n}-${r}`),h=j1(a,c,"target",`${e}-${n}-${r}`)),s.push(...u,...h)}return s},[])}function tb(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function H0(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function kV(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function vC({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:a,setState:c,isValidConnection:u,edgeUpdaterType:h,onReconnectEnd:f}){const p=sC(t.target),{connectionMode:y,domNode:b,autoPanOnConnect:E,connectionRadius:T,onConnectStart:A,panBy:R,getNodes:k,cancelConnection:z}=a();let B=0,U;const{x:Y,y:X}=ho(t),D=p?.elementFromPoint(Y,X),S=tb(h,D),I=b?.getBoundingClientRect();if(!I||!S)return;let j,F=ho(t,I),$=!1,O=null,L=!1,q=null;const M=NV({nodes:k(),nodeId:n,handleId:e,handleType:S}),W=()=>{if(!E)return;const[N,J]=iC(F,I);R({x:N,y:J}),B=requestAnimationFrame(W)};c({connectionPosition:F,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:S,connectionStartHandle:{nodeId:n,handleId:e,type:S},connectionEndHandle:null}),A?.(t,{nodeId:n,handleId:e,handleType:S});function G(N){const{transform:J}=a();F=ho(N,I);const{handle:ne,validHandleResult:Z}=RV(N,p,Uy(F,J,!1,[1,1]),T,M,te=>yC(te,y,n,e,s?"target":"source",u,p));if(U=ne,$||(W(),$=!0),q=Z.handleDomNode,O=Z.connection,L=Z.isValid,c({connectionPosition:U&&L?hC({x:U.x,y:U.y},J):F,connectionStatus:kV(!!U,L),connectionEndHandle:Z.endHandle}),!U&&!L&&!q)return H0(j);O.source!==O.target&&q&&(H0(j),j=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",L),q.classList.toggle("react-flow__handle-valid",L))}function K(N){(U||q)&&O&&L&&r?.(O),a().onConnectEnd?.(N),h&&f?.(N),H0(j),z(),cancelAnimationFrame(B),$=!1,L=!1,O=null,q=null,p.removeEventListener("mousemove",G),p.removeEventListener("mouseup",K),p.removeEventListener("touchmove",G),p.removeEventListener("touchend",K)}p.addEventListener("mousemove",G),p.addEventListener("mouseup",K),p.addEventListener("touchmove",G),p.addEventListener("touchend",K)}const H1=()=>!0,DV=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),MV=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:c}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||a?.nodeId===t&&a?.handleId===e&&a?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},bC=P.forwardRef(({type:t="source",position:e=Te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:c,onConnect:u,children:h,className:f,onMouseDown:p,onTouchStart:y,...b},E)=>{const T=c||null,A=t==="target",R=mn(),k=xV(),{connectOnClick:z,noPanClassName:B}=Ct(DV,Mn),{connecting:U,clickConnecting:Y}=Ct(MV(k,T,t),Mn);k||R.getState().onError?.("010",vs.error010());const X=I=>{const{defaultEdgeOptions:j,onConnect:F,hasDefaultEdges:$}=R.getState(),O={...j,...I};if($){const{edges:L,setEdges:q}=R.getState();q(CV(O,L))}F?.(O),u?.(O)},D=I=>{if(!k)return;const j=aC(I);s&&(j&&I.button===0||!j)&&vC({event:I,handleId:T,nodeId:k,onConnect:X,isTarget:A,getState:R.getState,setState:R.setState,isValidConnection:n||R.getState().isValidConnection||H1}),j?p?.(I):y?.(I)},S=I=>{const{onClickConnectStart:j,onClickConnectEnd:F,connectionClickStartHandle:$,connectionMode:O,isValidConnection:L}=R.getState();if(!k||!$&&!s)return;if(!$){j?.(I,{nodeId:k,handleId:T,handleType:t}),R.setState({connectionClickStartHandle:{nodeId:k,type:t,handleId:T}});return}const q=sC(I.target),M=n||L||H1,{connection:W,isValid:G}=yC({nodeId:k,id:T,type:t},O,$.nodeId,$.handleId||null,$.type,M,q);G&&X(W),F?.(I),R.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":T,"data-nodeid":k,"data-handlepos":e,"data-id":`${k}-${T}-${t}`,className:$n(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",B,f,{source:!A,target:A,connectable:r,connectablestart:s,connectableend:a,connecting:Y,connectionindicator:r&&(s&&!U||a&&U)}]),onMouseDown:D,onTouchStart:D,onClick:z?S:void 0,ref:E,...b},h)});bC.displayName="Handle";var Nn=P.memo(bC);const _C=({data:t,isConnectable:e,targetPosition:n=Te.Top,sourcePosition:r=Te.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement(Nn,{type:"target",position:n,isConnectable:e}),t?.label,fe.createElement(Nn,{type:"source",position:r,isConnectable:e}));_C.displayName="DefaultNode";var By=P.memo(_C);const EC=({data:t,isConnectable:e,sourcePosition:n=Te.Bottom})=>fe.createElement(fe.Fragment,null,t?.label,fe.createElement(Nn,{type:"source",position:n,isConnectable:e}));EC.displayName="InputNode";var wC=P.memo(EC);const xC=({data:t,isConnectable:e,targetPosition:n=Te.Top})=>fe.createElement(fe.Fragment,null,fe.createElement(Nn,{type:"target",position:n,isConnectable:e}),t?.label);xC.displayName="OutputNode";var TC=P.memo(xC);const nb=()=>null;nb.displayName="GroupNode";const OV=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Cf=t=>t.id;function PV(t,e){return Mn(t.selectedNodes.map(Cf),e.selectedNodes.map(Cf))&&Mn(t.selectedEdges.map(Cf),e.selectedEdges.map(Cf))}const SC=P.memo(({onSelectionChange:t})=>{const e=mn(),{selectedNodes:n,selectedEdges:r}=Ct(OV,PV);return P.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(a=>a(s))},[n,r,t]),null});SC.displayName="SelectionListener";const VV=t=>!!t.onSelectionChange;function LV({onSelectionChange:t}){const e=Ct(VV);return t||e?fe.createElement(SC,{onSelectionChange:t}):null}const zV=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Nl(t,e){P.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ge(t,e,n){P.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const UV=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:a,onConnectEnd:c,onClickConnectStart:u,onClickConnectEnd:h,nodesDraggable:f,nodesConnectable:p,nodesFocusable:y,edgesFocusable:b,edgesUpdatable:E,elevateNodesOnSelect:T,minZoom:A,maxZoom:R,nodeExtent:k,onNodesChange:z,onEdgesChange:B,elementsSelectable:U,connectionMode:Y,snapGrid:X,snapToGrid:D,translateExtent:S,connectOnClick:I,defaultEdgeOptions:j,fitView:F,fitViewOptions:$,onNodesDelete:O,onEdgesDelete:L,onNodeDrag:q,onNodeDragStart:M,onNodeDragStop:W,onSelectionDrag:G,onSelectionDragStart:K,onSelectionDragStop:N,noPanClassName:J,nodeOrigin:ne,rfId:Z,autoPanOnConnect:te,autoPanOnNodeDrag:le,onError:de,connectionRadius:me,isValidConnection:be,nodeDragThreshold:Ae})=>{const{setNodes:Re,setEdges:rt,setDefaultNodesAndEdges:Ye,setMinZoom:ke,setMaxZoom:Le,setTranslateExtent:st,setNodeExtent:Ht,reset:Be}=Ct(zV,Mn),Ee=mn();return P.useEffect(()=>{const It=r?.map(Sn=>({...Sn,...j}));return Ye(n,It),()=>{Be()}},[]),Ge("defaultEdgeOptions",j,Ee.setState),Ge("connectionMode",Y,Ee.setState),Ge("onConnect",s,Ee.setState),Ge("onConnectStart",a,Ee.setState),Ge("onConnectEnd",c,Ee.setState),Ge("onClickConnectStart",u,Ee.setState),Ge("onClickConnectEnd",h,Ee.setState),Ge("nodesDraggable",f,Ee.setState),Ge("nodesConnectable",p,Ee.setState),Ge("nodesFocusable",y,Ee.setState),Ge("edgesFocusable",b,Ee.setState),Ge("edgesUpdatable",E,Ee.setState),Ge("elementsSelectable",U,Ee.setState),Ge("elevateNodesOnSelect",T,Ee.setState),Ge("snapToGrid",D,Ee.setState),Ge("snapGrid",X,Ee.setState),Ge("onNodesChange",z,Ee.setState),Ge("onEdgesChange",B,Ee.setState),Ge("connectOnClick",I,Ee.setState),Ge("fitViewOnInit",F,Ee.setState),Ge("fitViewOnInitOptions",$,Ee.setState),Ge("onNodesDelete",O,Ee.setState),Ge("onEdgesDelete",L,Ee.setState),Ge("onNodeDrag",q,Ee.setState),Ge("onNodeDragStart",M,Ee.setState),Ge("onNodeDragStop",W,Ee.setState),Ge("onSelectionDrag",G,Ee.setState),Ge("onSelectionDragStart",K,Ee.setState),Ge("onSelectionDragStop",N,Ee.setState),Ge("noPanClassName",J,Ee.setState),Ge("nodeOrigin",ne,Ee.setState),Ge("rfId",Z,Ee.setState),Ge("autoPanOnConnect",te,Ee.setState),Ge("autoPanOnNodeDrag",le,Ee.setState),Ge("onError",de,Ee.setState),Ge("connectionRadius",me,Ee.setState),Ge("isValidConnection",be,Ee.setState),Ge("nodeDragThreshold",Ae,Ee.setState),Nl(t,Re),Nl(e,rt),Nl(A,ke),Nl(R,Le),Nl(S,st),Nl(k,Ht),null},F1={display:"none"},BV={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},AC="react-flow__node-desc",CC="react-flow__edge-desc",jV="react-flow__aria-live",HV=t=>t.ariaLiveMessage;function FV({rfId:t}){const e=Ct(HV);return fe.createElement("div",{id:`${jV}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:BV},e)}function $V({rfId:t,disableKeyboardA11y:e}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${AC}-${t}`,style:F1},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${CC}-${t}`,style:F1},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&fe.createElement(FV,{rfId:t}))}var vd=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=P.useState(!1),s=P.useRef(!1),a=P.useRef(new Set([])),[c,u]=P.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),p=f.reduce((y,b)=>y.concat(...b),[]);return[f,p]}return[[],[]]},[t]);return P.useEffect(()=>{const h=typeof document<"u"?document:null,f=e?.target||h;if(t!==null){const p=E=>{if(s.current=E.ctrlKey||E.metaKey||E.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&Vy(E))return!1;const A=q1(E.code,u);a.current.add(E[A]),$1(c,a.current,!1)&&(E.preventDefault(),r(!0))},y=E=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&Vy(E))return!1;const A=q1(E.code,u);$1(c,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(E[A]),E.key==="Meta"&&a.current.clear(),s.current=!1},b=()=>{a.current.clear(),r(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",y),window.addEventListener("blur",b),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",y),window.removeEventListener("blur",b)}}},[t,r]),n};function $1(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function q1(t,e){return e.includes(t)?"code":"key"}function RC(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const a=e.get(s),c=Jl(a,r);return RC(a,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(a[Pt]?.z??0)>(n.z??0)?a[Pt]?.z??0:n.z??0},r)}function IC(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:a,y:c,z:u}=RC(r,t,{...r.position,z:r[Pt]?.z??0},e);r.positionAbsolute={x:a,y:c},r[Pt].z=u,n?.[r.id]&&(r[Pt].isParent=!0)}})}function F0(t,e,n,r){const s=new Map,a={},c=r?1e3:0;return t.forEach(u=>{const h=(Ur(u.zIndex)?u.zIndex:0)+(u.selected?c:0),f=e.get(u.id),p={...u,positionAbsolute:{x:u.position.x,y:u.position.y}},y=u.parentNode||u.parentId;y&&(a[y]=!0);const b=f?.type&&f?.type!==u.type;Object.defineProperty(p,Pt,{enumerable:!1,value:{handleBounds:b?void 0:f?.[Pt]?.handleBounds,z:h}}),s.set(u.id,p)}),IC(s,n,a),s}function NC(t,e={}){const{getNodes:n,width:r,height:s,minZoom:a,maxZoom:c,d3Zoom:u,d3Selection:h,fitViewOnInitDone:f,fitViewOnInit:p,nodeOrigin:y}=t(),b=e.initial&&!f&&p;if(u&&h&&(b||!e.initial)){const T=n().filter(R=>{const k=e.includeHiddenNodes?R.width&&R.height:!R.hidden;return e.nodes?.length?k&&e.nodes.some(z=>z.id===R.id):k}),A=T.every(R=>R.width&&R.height);if(T.length>0&&A){const R=eb(T,y),{x:k,y:z,zoom:B}=pC(R,r,s,e.minZoom??a,e.maxZoom??c,e.padding??.1),U=uo.translate(k,z).scale(B);return typeof e.duration=="number"&&e.duration>0?u.transform(ha(h,e.duration),U):u.transform(h,U),!0}}return!1}function qV(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[Pt]:r[Pt],selected:n.selected})}),new Map(e)}function GV(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Rf({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:a,onNodesChange:c,onEdgesChange:u,hasDefaultNodes:h,hasDefaultEdges:f}=n();t?.length&&(h&&r({nodeInternals:qV(t,s)}),c?.(t)),e?.length&&(f&&r({edges:GV(e,a)}),u?.(e))}const kl=()=>{},YV={zoomIn:kl,zoomOut:kl,zoomTo:kl,getZoom:()=>1,setViewport:kl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:kl,fitBounds:kl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},KV=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),XV=()=>{const t=mn(),{d3Zoom:e,d3Selection:n}=Ct(KV,Mn);return P.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(ha(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(ha(n,s?.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(ha(n,a?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[c,u,h]=t.getState().transform,f=uo.translate(s.x??c,s.y??u).scale(s.zoom??h);e.transform(ha(n,a?.duration),f)},getViewport:()=>{const[s,a,c]=t.getState().transform;return{x:s,y:a,zoom:c}},fitView:s=>NC(t.getState,s),setCenter:(s,a,c)=>{const{width:u,height:h,maxZoom:f}=t.getState(),p=typeof c?.zoom<"u"?c.zoom:f,y=u/2-s*p,b=h/2-a*p,E=uo.translate(y,b).scale(p);e.transform(ha(n,c?.duration),E)},fitBounds:(s,a)=>{const{width:c,height:u,minZoom:h,maxZoom:f}=t.getState(),{x:p,y,zoom:b}=pC(s,c,u,h,f,a?.padding??.1),E=uo.translate(p,y).scale(b);e.transform(ha(n,a?.duration),E)},project:s=>{const{transform:a,snapToGrid:c,snapGrid:u}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Uy(s,a,c,u)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:c,snapGrid:u,domNode:h}=t.getState();if(!h)return s;const{x:f,y:p}=h.getBoundingClientRect(),y={x:s.x-f,y:s.y-p};return Uy(y,a,c,u)},flowToScreenPosition:s=>{const{transform:a,domNode:c}=t.getState();if(!c)return s;const{x:u,y:h}=c.getBoundingClientRect(),f=hC(s,a);return{x:f.x+u,y:f.y+h}},viewportInitialized:!0}:YV,[e,n])};function Hd(){const t=XV(),e=mn(),n=P.useCallback(()=>e.getState().getNodes().map(A=>({...A})),[]),r=P.useCallback(A=>e.getState().nodeInternals.get(A),[]),s=P.useCallback(()=>{const{edges:A=[]}=e.getState();return A.map(R=>({...R}))},[]),a=P.useCallback(A=>{const{edges:R=[]}=e.getState();return R.find(k=>k.id===A)},[]),c=P.useCallback(A=>{const{getNodes:R,setNodes:k,hasDefaultNodes:z,onNodesChange:B}=e.getState(),U=R(),Y=typeof A=="function"?A(U):A;if(z)k(Y);else if(B){const X=Y.length===0?U.map(D=>({type:"remove",id:D.id})):Y.map(D=>({item:D,type:"reset"}));B(X)}},[]),u=P.useCallback(A=>{const{edges:R=[],setEdges:k,hasDefaultEdges:z,onEdgesChange:B}=e.getState(),U=typeof A=="function"?A(R):A;if(z)k(U);else if(B){const Y=U.length===0?R.map(X=>({type:"remove",id:X.id})):U.map(X=>({item:X,type:"reset"}));B(Y)}},[]),h=P.useCallback(A=>{const R=Array.isArray(A)?A:[A],{getNodes:k,setNodes:z,hasDefaultNodes:B,onNodesChange:U}=e.getState();if(B){const X=[...k(),...R];z(X)}else if(U){const Y=R.map(X=>({item:X,type:"add"}));U(Y)}},[]),f=P.useCallback(A=>{const R=Array.isArray(A)?A:[A],{edges:k=[],setEdges:z,hasDefaultEdges:B,onEdgesChange:U}=e.getState();if(B)z([...k,...R]);else if(U){const Y=R.map(X=>({item:X,type:"add"}));U(Y)}},[]),p=P.useCallback(()=>{const{getNodes:A,edges:R=[],transform:k}=e.getState(),[z,B,U]=k;return{nodes:A().map(Y=>({...Y})),edges:R.map(Y=>({...Y})),viewport:{x:z,y:B,zoom:U}}},[]),y=P.useCallback(({nodes:A,edges:R})=>{const{nodeInternals:k,getNodes:z,edges:B,hasDefaultNodes:U,hasDefaultEdges:Y,onNodesDelete:X,onEdgesDelete:D,onNodesChange:S,onEdgesChange:I}=e.getState(),j=(A||[]).map(q=>q.id),F=(R||[]).map(q=>q.id),$=z().reduce((q,M)=>{const W=M.parentNode||M.parentId,G=!j.includes(M.id)&&W&&q.find(N=>N.id===W);return(typeof M.deletable=="boolean"?M.deletable:!0)&&(j.includes(M.id)||G)&&q.push(M),q},[]),O=B.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),L=O.filter(q=>F.includes(q.id));if($||L){const q=mC($,O),M=[...L,...q],W=M.reduce((G,K)=>(G.includes(K.id)||G.push(K.id),G),[]);if((Y||U)&&(Y&&e.setState({edges:B.filter(G=>!W.includes(G.id))}),U&&($.forEach(G=>{k.delete(G.id)}),e.setState({nodeInternals:new Map(k)}))),W.length>0&&(D?.(M),I&&I(W.map(G=>({id:G,type:"remove"})))),$.length>0&&(X?.($),S)){const G=$.map(K=>({id:K.id,type:"remove"}));S(G)}}},[]),b=P.useCallback(A=>{const R=pV(A),k=R?null:e.getState().nodeInternals.get(A.id);return!R&&!k?[null,null,R]:[R?A:V1(k),k,R]},[]),E=P.useCallback((A,R=!0,k)=>{const[z,B,U]=b(A);return z?(k||e.getState().getNodes()).filter(Y=>{if(!U&&(Y.id===B.id||!Y.positionAbsolute))return!1;const X=V1(Y),D=Py(X,z);return R&&D>0||D>=z.width*z.height}):[]},[]),T=P.useCallback((A,R,k=!0)=>{const[z]=b(A);if(!z)return!1;const B=Py(z,R);return k&&B>0||B>=z.width*z.height},[]);return P.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:a,setNodes:c,setEdges:u,addNodes:h,addEdges:f,toObject:p,deleteElements:y,getIntersectingNodes:E,isNodeIntersecting:T}),[t,n,r,s,a,c,u,h,f,p,y,E,T])}const WV={actInsideInputWithModifier:!1};var QV=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=mn(),{deleteElements:r}=Hd(),s=vd(t,WV),a=vd(e);P.useEffect(()=>{if(s){const{edges:c,getNodes:u}=n.getState(),h=u().filter(p=>p.selected),f=c.filter(p=>p.selected);r({nodes:h,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),P.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function ZV(t){const e=mn();P.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=Yv(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",vs.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const rb={position:"absolute",width:"100%",height:"100%",top:0,left:0},JV=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,If=t=>({x:t.x,y:t.y,zoom:t.k}),Dl=(t,e)=>t.target.closest(`.${e}`),G1=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Y1=t=>{const e=t.ctrlKey&&bm()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},e5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),t5=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:c=!1,panOnScrollSpeed:u=.5,panOnScrollMode:h=ya.Free,zoomOnDoubleClick:f=!0,elementsSelectable:p,panOnDrag:y=!0,defaultViewport:b,translateExtent:E,minZoom:T,maxZoom:A,zoomActivationKeyCode:R,preventScrolling:k=!0,children:z,noWheelClassName:B,noPanClassName:U})=>{const Y=P.useRef(),X=mn(),D=P.useRef(!1),S=P.useRef(!1),I=P.useRef(null),j=P.useRef({x:0,y:0,zoom:0}),{d3Zoom:F,d3Selection:$,d3ZoomHandler:O,userSelectionActive:L}=Ct(e5,Mn),q=vd(R),M=P.useRef(0),W=P.useRef(!1),G=P.useRef();return ZV(I),P.useEffect(()=>{if(I.current){const K=I.current.getBoundingClientRect(),N=aV().scaleExtent([T,A]).translateExtent(E),J=Zr(I.current).call(N),ne=uo.translate(b.x,b.y).scale(cc(b.zoom,T,A)),Z=[[0,0],[K.width,K.height]],te=N.constrain()(ne,Z,E);N.transform(J,te),N.wheelDelta(Y1),X.setState({d3Zoom:N,d3Selection:J,d3ZoomHandler:J.on("wheel.zoom"),transform:[te.x,te.y,te.k],domNode:I.current.closest(".react-flow")})}},[]),P.useEffect(()=>{$&&F&&(c&&!q&&!L?$.on("wheel.zoom",K=>{if(Dl(K,B))return!1;K.preventDefault(),K.stopImmediatePropagation();const N=$.property("__zoom").k||1;if(K.ctrlKey&&a){const be=Ci(K),Ae=Y1(K),Re=N*Math.pow(2,Ae);F.scaleTo($,Re,be,K);return}const J=K.deltaMode===1?20:1;let ne=h===ya.Vertical?0:K.deltaX*J,Z=h===ya.Horizontal?0:K.deltaY*J;!bm()&&K.shiftKey&&h!==ya.Vertical&&(ne=K.deltaY*J,Z=0),F.translateBy($,-(ne/N)*u,-(Z/N)*u,{internal:!0});const te=If($.property("__zoom")),{onViewportChangeStart:le,onViewportChange:de,onViewportChangeEnd:me}=X.getState();clearTimeout(G.current),W.current||(W.current=!0,e?.(K,te),le?.(te)),W.current&&(t?.(K,te),de?.(te),G.current=setTimeout(()=>{n?.(K,te),me?.(te),W.current=!1},150))},{passive:!1}):typeof O<"u"&&$.on("wheel.zoom",function(K,N){if(!k&&K.type==="wheel"&&!K.ctrlKey||Dl(K,B))return null;K.preventDefault(),O.call(this,K,N)},{passive:!1}))},[L,c,h,$,F,O,q,a,k,B,e,t,n]),P.useEffect(()=>{F&&F.on("start",K=>{if(!K.sourceEvent||K.sourceEvent.internal)return null;M.current=K.sourceEvent?.button;const{onViewportChangeStart:N}=X.getState(),J=If(K.transform);D.current=!0,j.current=J,K.sourceEvent?.type==="mousedown"&&X.setState({paneDragging:!0}),N?.(J),e?.(K.sourceEvent,J)})},[F,e]),P.useEffect(()=>{F&&(L&&!D.current?F.on("zoom",null):L||F.on("zoom",K=>{const{onViewportChange:N}=X.getState();if(X.setState({transform:[K.transform.x,K.transform.y,K.transform.k]}),S.current=!!(r&&G1(y,M.current??0)),(t||N)&&!K.sourceEvent?.internal){const J=If(K.transform);N?.(J),t?.(K.sourceEvent,J)}}))},[L,F,t,y,r]),P.useEffect(()=>{F&&F.on("end",K=>{if(!K.sourceEvent||K.sourceEvent.internal)return null;const{onViewportChangeEnd:N}=X.getState();if(D.current=!1,X.setState({paneDragging:!1}),r&&G1(y,M.current??0)&&!S.current&&r(K.sourceEvent),S.current=!1,(n||N)&&JV(j.current,K.transform)){const J=If(K.transform);j.current=J,clearTimeout(Y.current),Y.current=setTimeout(()=>{N?.(J),n?.(K.sourceEvent,J)},c?150:0)}})},[F,c,y,n,r]),P.useEffect(()=>{F&&F.filter(K=>{const N=q||s,J=a&&K.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&K.button===1&&K.type==="mousedown"&&(Dl(K,"react-flow__node")||Dl(K,"react-flow__edge")))return!0;if(!y&&!N&&!c&&!f&&!a||L||!f&&K.type==="dblclick"||Dl(K,B)&&K.type==="wheel"||Dl(K,U)&&(K.type!=="wheel"||c&&K.type==="wheel"&&!q)||!a&&K.ctrlKey&&K.type==="wheel"||!N&&!c&&!J&&K.type==="wheel"||!y&&(K.type==="mousedown"||K.type==="touchstart")||Array.isArray(y)&&!y.includes(K.button)&&K.type==="mousedown")return!1;const ne=Array.isArray(y)&&y.includes(K.button)||!K.button||K.button<=1;return(!K.ctrlKey||K.type==="wheel")&&ne})},[L,F,s,a,c,f,y,p,q]),fe.createElement("div",{className:"react-flow__renderer",ref:I,style:rb},z)},n5=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function r5(){const{userSelectionActive:t,userSelectionRect:e}=Ct(n5,Mn);return t&&e?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function K1(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,a=e.position.y+e.height-r.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),a>0&&(r.style.height+=a),e.position.x<0){const c=Math.abs(e.position.x);r.position.x=r.position.x-c,r.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);r.position.y=r.position.y-c,r.style.height+=c,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function kC(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const a=t.filter(u=>u.id===s.id);if(a.length===0)return r.push(s),r;const c={...s};for(const u of a)if(u)switch(u.type){case"select":{c.selected=u.selected;break}case"position":{typeof u.position<"u"&&(c.position=u.position),typeof u.positionAbsolute<"u"&&(c.positionAbsolute=u.positionAbsolute),typeof u.dragging<"u"&&(c.dragging=u.dragging),c.expandParent&&K1(r,c);break}case"dimensions":{typeof u.dimensions<"u"&&(c.width=u.dimensions.width,c.height=u.dimensions.height),typeof u.updateStyle<"u"&&(c.style={...c.style||{},...u.dimensions}),typeof u.resizing=="boolean"&&(c.resizing=u.resizing),c.expandParent&&K1(r,c);break}case"remove":return r}return r.push(c),r},n)}function DC(t,e){return kC(t,e)}function i5(t,e){return kC(t,e)}const to=(t,e)=>({id:t,type:"select",selected:e});function Fl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(to(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(to(r.id,!1))),n},[])}const $0=(t,e)=>n=>{n.target===e.current&&t?.(n)},s5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),MC=P.memo(({isSelecting:t,selectionMode:e=yd.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:h,onPaneMouseMove:f,onPaneMouseLeave:p,children:y})=>{const b=P.useRef(null),E=mn(),T=P.useRef(0),A=P.useRef(0),R=P.useRef(),{userSelectionActive:k,elementsSelectable:z,dragging:B}=Ct(s5,Mn),U=()=>{E.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,A.current=0},Y=O=>{a?.(O),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},X=O=>{if(Array.isArray(n)&&n?.includes(2)){O.preventDefault();return}c?.(O)},D=u?O=>u(O):void 0,S=O=>{const{resetSelectedElements:L,domNode:q}=E.getState();if(R.current=q?.getBoundingClientRect(),!z||!t||O.button!==0||O.target!==b.current||!R.current)return;const{x:M,y:W}=ho(O,R.current);L(),E.setState({userSelectionRect:{width:0,height:0,startX:M,startY:W,x:M,y:W}}),r?.(O)},I=O=>{const{userSelectionRect:L,nodeInternals:q,edges:M,transform:W,onNodesChange:G,onEdgesChange:K,nodeOrigin:N,getNodes:J}=E.getState();if(!t||!R.current||!L)return;E.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ne=ho(O,R.current),Z=L.startX??0,te=L.startY??0,le={...L,x:ne.x<Z?ne.x:Z,y:ne.y<te?ne.y:te,width:Math.abs(ne.x-Z),height:Math.abs(ne.y-te)},de=J(),me=fC(q,le,W,e===yd.Partial,!0,N),be=mC(me,M).map(Re=>Re.id),Ae=me.map(Re=>Re.id);if(T.current!==Ae.length){T.current=Ae.length;const Re=Fl(de,Ae);Re.length&&G?.(Re)}if(A.current!==be.length){A.current=be.length;const Re=Fl(M,be);Re.length&&K?.(Re)}E.setState({userSelectionRect:le})},j=O=>{if(O.button!==0)return;const{userSelectionRect:L}=E.getState();!k&&L&&O.target===b.current&&Y?.(O),E.setState({nodesSelectionActive:T.current>0}),U(),s?.(O)},F=O=>{k&&(E.setState({nodesSelectionActive:T.current>0}),s?.(O)),U()},$=z&&(t||k);return fe.createElement("div",{className:$n(["react-flow__pane",{dragging:B,selection:t}]),onClick:$?void 0:$0(Y,b),onContextMenu:$0(X,b),onWheel:$0(D,b),onMouseEnter:$?void 0:h,onMouseDown:$?S:void 0,onMouseMove:$?I:f,onMouseUp:$?j:void 0,onMouseLeave:$?F:p,ref:b,style:rb},y,fe.createElement(r5,null))});MC.displayName="Pane";function OC(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:OC(r,e):!1}function X1(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function o5(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!OC(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function a5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function PC(t,e,n,r,s=[0,0],a){const c=a5(t,t.extent||r);let u=c;const h=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(h&&t.width&&t.height){const y=n.get(h),{x:b,y:E}=Jl(y,s).positionAbsolute;u=y&&Ur(b)&&Ur(E)&&Ur(y.width)&&Ur(y.height)?[[b+t.width*s[0],E+t.height*s[1]],[b+y.width-t.width+t.width*s[0],E+y.height-t.height+t.height*s[1]]]:u}else a?.("005",vs.error005()),u=c;else if(t.extent&&h&&t.extent!=="parent"){const y=n.get(h),{x:b,y:E}=Jl(y,s).positionAbsolute;u=[[t.extent[0][0]+b,t.extent[0][1]+E],[t.extent[1][0]+b,t.extent[1][1]+E]]}let f={x:0,y:0};if(h){const y=n.get(h);f=Jl(y,s).positionAbsolute}const p=u&&u!=="parent"?Kv(e,u):e;return{position:{x:p.x-f.x,y:p.y-f.y},positionAbsolute:p}}function q0({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const W1=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),c=e.getBoundingClientRect(),u={x:c.width*r[0],y:c.height*r[1]};return a.map(h=>{const f=h.getBoundingClientRect();return{id:h.getAttribute("data-handleid"),position:h.getAttribute("data-handlepos"),x:(f.left-c.left-u.x)/n,y:(f.top-c.top-u.y)/n,...Yv(h)}})};function Pu(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function jy({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:c,nodeInternals:u,onError:h}=e.getState(),f=u.get(t);if(!f){h?.("012",vs.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&c)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function l5(){const t=mn();return P.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:a}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,u=n.touches?n.touches[0].clientY:n.clientY,h={x:(c-r[0])/r[2],y:(u-r[1])/r[2]};return{xSnapped:a?s[0]*Math.round(h.x/s[0]):h.x,ySnapped:a?s[1]*Math.round(h.y/s[1]):h.y,...h}},[])}function G0(t){return(e,n,r)=>t?.(e,r)}function VC({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,selectNodesOnDrag:c}){const u=mn(),[h,f]=P.useState(!1),p=P.useRef([]),y=P.useRef({x:null,y:null}),b=P.useRef(0),E=P.useRef(null),T=P.useRef({x:0,y:0}),A=P.useRef(null),R=P.useRef(!1),k=P.useRef(!1),z=P.useRef(!1),B=l5();return P.useEffect(()=>{if(t?.current){const U=Zr(t.current),Y=({x:S,y:I})=>{const{nodeInternals:j,onNodeDrag:F,onSelectionDrag:$,updateNodePositions:O,nodeExtent:L,snapGrid:q,snapToGrid:M,nodeOrigin:W,onError:G}=u.getState();y.current={x:S,y:I};let K=!1,N={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&L){const ne=eb(p.current,W);N=Xv(ne)}if(p.current=p.current.map(ne=>{const Z={x:S-ne.distance.x,y:I-ne.distance.y};M&&(Z.x=q[0]*Math.round(Z.x/q[0]),Z.y=q[1]*Math.round(Z.y/q[1]));const te=[[L[0][0],L[0][1]],[L[1][0],L[1][1]]];p.current.length>1&&L&&!ne.extent&&(te[0][0]=ne.positionAbsolute.x-N.x+L[0][0],te[1][0]=ne.positionAbsolute.x+(ne.width??0)-N.x2+L[1][0],te[0][1]=ne.positionAbsolute.y-N.y+L[0][1],te[1][1]=ne.positionAbsolute.y+(ne.height??0)-N.y2+L[1][1]);const le=PC(ne,Z,j,te,W,G);return K=K||ne.position.x!==le.position.x||ne.position.y!==le.position.y,ne.position=le.position,ne.positionAbsolute=le.positionAbsolute,ne}),!K)return;O(p.current,!0,!0),f(!0);const J=s?F:G0($);if(J&&A.current){const[ne,Z]=q0({nodeId:s,dragItems:p.current,nodeInternals:j});J(A.current,ne,Z)}},X=()=>{if(!E.current)return;const[S,I]=iC(T.current,E.current);if(S!==0||I!==0){const{transform:j,panBy:F}=u.getState();y.current.x=(y.current.x??0)-S/j[2],y.current.y=(y.current.y??0)-I/j[2],F({x:S,y:I})&&Y(y.current)}b.current=requestAnimationFrame(X)},D=S=>{const{nodeInternals:I,multiSelectionActive:j,nodesDraggable:F,unselectNodesAndEdges:$,onNodeDragStart:O,onSelectionDragStart:L}=u.getState();k.current=!0;const q=s?O:G0(L);(!c||!a)&&!j&&s&&(I.get(s)?.selected||$()),s&&a&&c&&jy({id:s,store:u,nodeRef:t});const M=B(S);if(y.current=M,p.current=o5(I,F,M,s),q&&p.current){const[W,G]=q0({nodeId:s,dragItems:p.current,nodeInternals:I});q(S.sourceEvent,W,G)}};if(e)U.on(".drag",null);else{const S=vP().on("start",I=>{const{domNode:j,nodeDragThreshold:F}=u.getState();F===0&&D(I),z.current=!1;const $=B(I);y.current=$,E.current=j?.getBoundingClientRect()||null,T.current=ho(I.sourceEvent,E.current)}).on("drag",I=>{const j=B(I),{autoPanOnNodeDrag:F,nodeDragThreshold:$}=u.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(z.current=!0),!z.current){if(!R.current&&k.current&&F&&(R.current=!0,X()),!k.current){const O=j.xSnapped-(y?.current?.x??0),L=j.ySnapped-(y?.current?.y??0);Math.sqrt(O*O+L*L)>$&&D(I)}(y.current.x!==j.xSnapped||y.current.y!==j.ySnapped)&&p.current&&k.current&&(A.current=I.sourceEvent,T.current=ho(I.sourceEvent,E.current),Y(j))}}).on("end",I=>{if(!(!k.current||z.current)&&(f(!1),R.current=!1,k.current=!1,cancelAnimationFrame(b.current),p.current)){const{updateNodePositions:j,nodeInternals:F,onNodeDragStop:$,onSelectionDragStop:O}=u.getState(),L=s?$:G0(O);if(j(p.current,!1,!1),L){const[q,M]=q0({nodeId:s,dragItems:p.current,nodeInternals:F});L(I.sourceEvent,q,M)}}}).filter(I=>{const j=I.target;return!I.button&&(!n||!X1(j,`.${n}`,t))&&(!r||X1(j,r,t))});return U.call(S),()=>{U.on(".drag",null)}}}},[t,e,n,r,a,u,s,c,B]),h}function LC(){const t=mn();return P.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:a,getNodes:c,snapToGrid:u,snapGrid:h,onError:f,nodesDraggable:p}=t.getState(),y=c().filter(z=>z.selected&&(z.draggable||p&&typeof z.draggable>"u")),b=u?h[0]:5,E=u?h[1]:5,T=n.isShiftPressed?4:1,A=n.x*b*T,R=n.y*E*T,k=y.map(z=>{if(z.positionAbsolute){const B={x:z.positionAbsolute.x+A,y:z.positionAbsolute.y+R};u&&(B.x=h[0]*Math.round(B.x/h[0]),B.y=h[1]*Math.round(B.y/h[1]));const{positionAbsolute:U,position:Y}=PC(z,B,r,s,void 0,f);z.position=Y,z.positionAbsolute=U}return z});a(k,!0,!1)},[])}const ec={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Vu=t=>{const e=({id:n,type:r,data:s,xPos:a,yPos:c,xPosOrigin:u,yPosOrigin:h,selected:f,onClick:p,onMouseEnter:y,onMouseMove:b,onMouseLeave:E,onContextMenu:T,onDoubleClick:A,style:R,className:k,isDraggable:z,isSelectable:B,isConnectable:U,isFocusable:Y,selectNodesOnDrag:X,sourcePosition:D,targetPosition:S,hidden:I,resizeObserver:j,dragHandle:F,zIndex:$,isParent:O,noDragClassName:L,noPanClassName:q,initialized:M,disableKeyboardA11y:W,ariaLabel:G,rfId:K,hasHandleBounds:N})=>{const J=mn(),ne=P.useRef(null),Z=P.useRef(null),te=P.useRef(D),le=P.useRef(S),de=P.useRef(r),me=B||z||p||y||b||E,be=LC(),Ae=Pu(n,J.getState,y),Re=Pu(n,J.getState,b),rt=Pu(n,J.getState,E),Ye=Pu(n,J.getState,T),ke=Pu(n,J.getState,A),Le=Be=>{const{nodeDragThreshold:Ee}=J.getState();if(B&&(!X||!z||Ee>0)&&jy({id:n,store:J,nodeRef:ne}),p){const It=J.getState().nodeInternals.get(n);It&&p(Be,{...It})}},st=Be=>{if(!Vy(Be)&&!W)if(oC.includes(Be.key)&&B){const Ee=Be.key==="Escape";jy({id:n,store:J,unselect:Ee,nodeRef:ne})}else z&&f&&Object.prototype.hasOwnProperty.call(ec,Be.key)&&(J.setState({ariaLiveMessage:`Moved selected node ${Be.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~c}`}),be({x:ec[Be.key].x,y:ec[Be.key].y,isShiftPressed:Be.shiftKey}))};P.useEffect(()=>()=>{Z.current&&(j?.unobserve(Z.current),Z.current=null)},[]),P.useEffect(()=>{if(ne.current&&!I){const Be=ne.current;(!M||!N||Z.current!==Be)&&(Z.current&&j?.unobserve(Z.current),j?.observe(Be),Z.current=Be)}},[I,M,N]),P.useEffect(()=>{const Be=de.current!==r,Ee=te.current!==D,It=le.current!==S;ne.current&&(Be||Ee||It)&&(Be&&(de.current=r),Ee&&(te.current=D),It&&(le.current=S),J.getState().updateNodeDimensions([{id:n,nodeElement:ne.current,forceUpdate:!0}]))},[n,r,D,S]);const Ht=VC({nodeRef:ne,disabled:I||!z,noDragClassName:L,handleSelector:F,nodeId:n,isSelectable:B,selectNodesOnDrag:X});return I?null:fe.createElement("div",{className:$n(["react-flow__node",`react-flow__node-${r}`,{[q]:z},k,{selected:f,selectable:B,parent:O,dragging:Ht}]),ref:ne,style:{zIndex:$,transform:`translate(${u}px,${h}px)`,pointerEvents:me?"all":"none",visibility:M?"visible":"hidden",...R},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Re,onMouseLeave:rt,onContextMenu:Ye,onClick:Le,onDoubleClick:ke,onKeyDown:Y?st:void 0,tabIndex:Y?0:void 0,role:Y?"button":void 0,"aria-describedby":W?void 0:`${AC}-${K}`,"aria-label":G},fe.createElement(wV,{value:n},fe.createElement(t,{id:n,data:s,type:r,xPos:a,yPos:c,selected:f,isConnectable:U,sourcePosition:D,targetPosition:S,dragging:Ht,dragHandle:F,zIndex:$})))};return e.displayName="NodeWrapper",P.memo(e)};const c5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...eb(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function u5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=mn(),{width:s,height:a,x:c,y:u,transformString:h,userSelectionActive:f}=Ct(c5,Mn),p=LC(),y=P.useRef(null);if(P.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),VC({nodeRef:y}),f||!s||!a)return null;const b=t?T=>{const A=r.getState().getNodes().filter(R=>R.selected);t(T,A)}:void 0,E=T=>{Object.prototype.hasOwnProperty.call(ec,T.key)&&p({x:ec[T.key].x,y:ec[T.key].y,isShiftPressed:T.shiftKey})};return fe.createElement("div",{className:$n(["react-flow__nodesselection","react-flow__container",e]),style:{transform:h}},fe.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:E,style:{width:s,height:a,top:u,left:c}}))}var d5=P.memo(u5);const h5=t=>t.nodesSelectionActive,zC=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:c,deleteKeyCode:u,onMove:h,onMoveStart:f,onMoveEnd:p,selectionKeyCode:y,selectionOnDrag:b,selectionMode:E,onSelectionStart:T,onSelectionEnd:A,multiSelectionKeyCode:R,panActivationKeyCode:k,zoomActivationKeyCode:z,elementsSelectable:B,zoomOnScroll:U,zoomOnPinch:Y,panOnScroll:X,panOnScrollSpeed:D,panOnScrollMode:S,zoomOnDoubleClick:I,panOnDrag:j,defaultViewport:F,translateExtent:$,minZoom:O,maxZoom:L,preventScrolling:q,onSelectionContextMenu:M,noWheelClassName:W,noPanClassName:G,disableKeyboardA11y:K})=>{const N=Ct(h5),J=vd(y),ne=vd(k),Z=ne||j,te=ne||X,le=J||b&&Z!==!0;return QV({deleteKeyCode:u,multiSelectionKeyCode:R}),fe.createElement(t5,{onMove:h,onMoveStart:f,onMoveEnd:p,onPaneContextMenu:a,elementsSelectable:B,zoomOnScroll:U,zoomOnPinch:Y,panOnScroll:te,panOnScrollSpeed:D,panOnScrollMode:S,zoomOnDoubleClick:I,panOnDrag:!J&&Z,defaultViewport:F,translateExtent:$,minZoom:O,maxZoom:L,zoomActivationKeyCode:z,preventScrolling:q,noWheelClassName:W,noPanClassName:G},fe.createElement(MC,{onSelectionStart:T,onSelectionEnd:A,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:c,panOnDrag:Z,isSelecting:!!le,selectionMode:E},t,N&&fe.createElement(d5,{onSelectionContextMenu:M,noPanClassName:G,disableKeyboardA11y:K})))};zC.displayName="FlowRenderer";var f5=P.memo(zC);function m5(t){return Ct(P.useCallback(n=>t?fC(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function p5(t){const e={input:Vu(t.input||wC),default:Vu(t.default||By),output:Vu(t.output||TC),group:Vu(t.group||nb)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Vu(t[a]||By),s),n);return{...e,...r}}const g5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},y5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),UC=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:a,onError:c}=Ct(y5,Mn),u=m5(t.onlyRenderVisibleElements),h=P.useRef(),f=P.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(y=>{const b=y.map(E=>({id:E.target.getAttribute("data-id"),nodeElement:E.target,forceUpdate:!0}));a(b)});return h.current=p,p},[]);return P.useEffect(()=>()=>{h?.current?.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:rb},u.map(p=>{let y=p.type||"default";t.nodeTypes[y]||(c?.("003",vs.error003(y)),y="default");const b=t.nodeTypes[y]||t.nodeTypes.default,E=!!(p.draggable||e&&typeof p.draggable>"u"),T=!!(p.selectable||s&&typeof p.selectable>"u"),A=!!(p.connectable||n&&typeof p.connectable>"u"),R=!!(p.focusable||r&&typeof p.focusable>"u"),k=t.nodeExtent?Kv(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,z=k?.x??0,B=k?.y??0,U=g5({x:z,y:B,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return fe.createElement(b,{key:p.id,id:p.id,className:p.className,style:p.style,type:y,data:p.data,sourcePosition:p.sourcePosition||Te.Bottom,targetPosition:p.targetPosition||Te.Top,hidden:p.hidden,xPos:z,yPos:B,xPosOrigin:U.x,yPosOrigin:U.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:E,isSelectable:T,isConnectable:A,isFocusable:R,resizeObserver:f,dragHandle:p.dragHandle,zIndex:p[Pt]?.z??0,isParent:!!p[Pt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[Pt]?.handleBounds})}))};UC.displayName="NodeRenderer";var v5=P.memo(UC);const b5=(t,e,n)=>n===Te.Left?t-e:n===Te.Right?t+e:t,_5=(t,e,n)=>n===Te.Top?t-e:n===Te.Bottom?t+e:t,Q1="react-flow__edgeupdater",Z1=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:c,type:u})=>fe.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:c,className:$n([Q1,`${Q1}-${u}`]),cx:b5(e,r,t),cy:_5(n,r,t),r,stroke:"transparent",fill:"transparent"}),E5=()=>!0;var Ml=t=>{const e=({id:n,className:r,type:s,data:a,onClick:c,onEdgeDoubleClick:u,selected:h,animated:f,label:p,labelStyle:y,labelShowBg:b,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:A,style:R,source:k,target:z,sourceX:B,sourceY:U,targetX:Y,targetY:X,sourcePosition:D,targetPosition:S,elementsSelectable:I,hidden:j,sourceHandleId:F,targetHandleId:$,onContextMenu:O,onMouseEnter:L,onMouseMove:q,onMouseLeave:M,reconnectRadius:W,onReconnect:G,onReconnectStart:K,onReconnectEnd:N,markerEnd:J,markerStart:ne,rfId:Z,ariaLabel:te,isFocusable:le,isReconnectable:de,pathOptions:me,interactionWidth:be,disableKeyboardA11y:Ae})=>{const Re=P.useRef(null),[rt,Ye]=P.useState(!1),[ke,Le]=P.useState(!1),st=mn(),Ht=P.useMemo(()=>`url('#${zy(ne,Z)}')`,[ne,Z]),Be=P.useMemo(()=>`url('#${zy(J,Z)}')`,[J,Z]);if(j)return null;const Ee=$t=>{const{edges:on,addSelectedEdges:Ln,unselectNodesAndEdges:zn,multiSelectionActive:an}=st.getState(),pn=on.find(Un=>Un.id===n);pn&&(I&&(st.setState({nodesSelectionActive:!1}),pn.selected&&an?(zn({nodes:[],edges:[pn]}),Re.current?.blur()):Ln([n])),c&&c($t,pn))},It=Ou(n,st.getState,u),Sn=Ou(n,st.getState,O),Zt=Ou(n,st.getState,L),er=Ou(n,st.getState,q),Pn=Ou(n,st.getState,M),Vn=($t,on)=>{if($t.button!==0)return;const{edges:Ln,isValidConnection:zn}=st.getState(),an=on?z:k,pn=(on?$:F)||null,Un=on?"target":"source",ji=zn||E5,Hi=on,Fr=Ln.find(nr=>nr.id===n);Le(!0),K?.($t,Fr,Un);const tr=nr=>{Le(!1),N?.(nr,Fr,Un)};vC({event:$t,handleId:pn,nodeId:an,onConnect:nr=>G?.(Fr,nr),isTarget:Hi,getState:st.getState,setState:st.setState,isValidConnection:ji,edgeUpdaterType:Un,onReconnectEnd:tr})},Hr=$t=>Vn($t,!0),at=$t=>Vn($t,!1),Ke=()=>Ye(!0),Ft=()=>Ye(!1),xt=!I&&!c,oi=$t=>{if(!Ae&&oC.includes($t.key)&&I){const{unselectNodesAndEdges:on,addSelectedEdges:Ln,edges:zn}=st.getState();$t.key==="Escape"?(Re.current?.blur(),on({edges:[zn.find(pn=>pn.id===n)]})):Ln([n])}};return fe.createElement("g",{className:$n(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:h,animated:f,inactive:xt,updating:rt}]),onClick:Ee,onDoubleClick:It,onContextMenu:Sn,onMouseEnter:Zt,onMouseMove:er,onMouseLeave:Pn,onKeyDown:le?oi:void 0,tabIndex:le?0:void 0,role:le?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":te===null?void 0:te||`Edge from ${k} to ${z}`,"aria-describedby":le?`${CC}-${Z}`:void 0,ref:Re},!ke&&fe.createElement(t,{id:n,source:k,target:z,selected:h,animated:f,label:p,labelStyle:y,labelShowBg:b,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:A,data:a,style:R,sourceX:B,sourceY:U,targetX:Y,targetY:X,sourcePosition:D,targetPosition:S,sourceHandleId:F,targetHandleId:$,markerStart:Ht,markerEnd:Be,pathOptions:me,interactionWidth:be}),de&&fe.createElement(fe.Fragment,null,(de==="source"||de===!0)&&fe.createElement(Z1,{position:D,centerX:B,centerY:U,radius:W,onMouseDown:Hr,onMouseEnter:Ke,onMouseOut:Ft,type:"source"}),(de==="target"||de===!0)&&fe.createElement(Z1,{position:S,centerX:Y,centerY:X,radius:W,onMouseDown:at,onMouseEnter:Ke,onMouseOut:Ft,type:"target"})))};return e.displayName="EdgeWrapper",P.memo(e)};function w5(t){const e={default:Ml(t.default||_m),straight:Ml(t.bezier||Zv),step:Ml(t.step||Qv),smoothstep:Ml(t.step||ep),simplebezier:Ml(t.simplebezier||Wv)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=Ml(t[a]||_m),s),n);return{...e,...r}}function J1(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,a=n?.width||e.width,c=n?.height||e.height;switch(t){case Te.Top:return{x:r+a/2,y:s};case Te.Right:return{x:r+a,y:s+c/2};case Te.Bottom:return{x:r+a/2,y:s+c};case Te.Left:return{x:r,y:s+c/2}}}function eT(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const x5=(t,e,n,r,s,a)=>{const c=J1(n,t,e),u=J1(a,r,s);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y}};function T5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:a,width:c,height:u,transform:h}){const f={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+a)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const p=Xv({x:(0-h[0])/h[2],y:(0-h[1])/h[2],width:c/h[2],height:u/h[2]}),y=Math.max(0,Math.min(p.x2,f.x2)-Math.max(p.x,f.x)),b=Math.max(0,Math.min(p.y2,f.y2)-Math.max(p.y,f.y));return Math.ceil(y*b)>0}function tT(t){const e=t?.[Pt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const S5=[{level:0,isMaxLevel:!0,edges:[]}];function A5(t,e,n=!1){let r=-1;const s=t.reduce((c,u)=>{const h=Ur(u.zIndex);let f=h?u.zIndex:0;if(n){const p=e.get(u.target),y=e.get(u.source),b=u.selected||p?.selected||y?.selected,E=Math.max(y?.[Pt]?.z||0,p?.[Pt]?.z||0,1e3);f=(h?u.zIndex:0)+(b?E:0)}return c[f]?c[f].push(u):c[f]=[u],r=f>r?f:r,c},{}),a=Object.entries(s).map(([c,u])=>{const h=+c;return{edges:u,level:h,isMaxLevel:h===r}});return a.length===0?S5:a}function C5(t,e,n){const r=Ct(P.useCallback(s=>t?s.edges.filter(a=>{const c=e.get(a.source),u=e.get(a.target);return c?.width&&c?.height&&u?.width&&u?.height&&T5({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:u.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:u.width,targetHeight:u.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return A5(r,e,n)}const R5=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),I5=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),nT={[Aa.Arrow]:R5,[Aa.ArrowClosed]:I5};function N5(t){const e=mn();return P.useMemo(()=>Object.prototype.hasOwnProperty.call(nT,t)?nT[t]:(e.getState().onError?.("009",vs.error009(t)),null),[t])}const k5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:c,orient:u="auto-start-reverse"})=>{const h=N5(e);return h?fe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0"},fe.createElement(h,{color:n,strokeWidth:c})):null},D5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const u=zy(c,e);r.includes(u)||(s.push({id:u,color:c.color||t,...c}),r.push(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},BC=({defaultColor:t,rfId:e})=>{const n=Ct(P.useCallback(D5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((a,c)=>a.id!==s[c].id)));return fe.createElement("defs",null,n.map(r=>fe.createElement(k5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};BC.displayName="MarkerDefinitions";var M5=P.memo(BC);const O5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),jC=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:c,onEdgeMouseEnter:u,onEdgeMouseMove:h,onEdgeMouseLeave:f,onEdgeClick:p,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:E,onReconnectEnd:T,reconnectRadius:A,children:R,disableKeyboardA11y:k})=>{const{edgesFocusable:z,edgesUpdatable:B,elementsSelectable:U,width:Y,height:X,connectionMode:D,nodeInternals:S,onError:I}=Ct(O5,Mn),j=C5(e,S,n);return Y?fe.createElement(fe.Fragment,null,j.map(({level:F,edges:$,isMaxLevel:O})=>fe.createElement("svg",{key:F,style:{zIndex:F},width:Y,height:X,className:"react-flow__edges react-flow__container"},O&&fe.createElement(M5,{defaultColor:t,rfId:r}),fe.createElement("g",null,$.map(L=>{const[q,M,W]=tT(S.get(L.source)),[G,K,N]=tT(S.get(L.target));if(!W||!N)return null;let J=L.type||"default";s[J]||(I?.("011",vs.error011(J)),J="default");const ne=s[J]||s.default,Z=D===vo.Strict?K.target:(K.target??[]).concat(K.source??[]),te=eT(M.source,L.sourceHandle),le=eT(Z,L.targetHandle),de=te?.position||Te.Bottom,me=le?.position||Te.Top,be=!!(L.focusable||z&&typeof L.focusable>"u"),Ae=L.reconnectable||L.updatable,Re=typeof b<"u"&&(Ae||B&&typeof Ae>"u");if(!te||!le)return I?.("008",vs.error008(te,L)),null;const{sourceX:rt,sourceY:Ye,targetX:ke,targetY:Le}=x5(q,te,de,G,le,me);return fe.createElement(ne,{key:L.id,id:L.id,className:$n([L.className,a]),type:J,data:L.data,selected:!!L.selected,animated:!!L.animated,hidden:!!L.hidden,label:L.label,labelStyle:L.labelStyle,labelShowBg:L.labelShowBg,labelBgStyle:L.labelBgStyle,labelBgPadding:L.labelBgPadding,labelBgBorderRadius:L.labelBgBorderRadius,style:L.style,source:L.source,target:L.target,sourceHandleId:L.sourceHandle,targetHandleId:L.targetHandle,markerEnd:L.markerEnd,markerStart:L.markerStart,sourceX:rt,sourceY:Ye,targetX:ke,targetY:Le,sourcePosition:de,targetPosition:me,elementsSelectable:U,onContextMenu:c,onMouseEnter:u,onMouseMove:h,onMouseLeave:f,onClick:p,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:E,onReconnectEnd:T,reconnectRadius:A,rfId:r,ariaLabel:L.ariaLabel,isFocusable:be,isReconnectable:Re,pathOptions:"pathOptions"in L?L.pathOptions:void 0,interactionWidth:L.interactionWidth,disableKeyboardA11y:k})})))),R):null};jC.displayName="EdgeRenderer";var P5=P.memo(jC);const V5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function L5({children:t}){const e=Ct(V5);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function z5(t){const e=Hd(),n=P.useRef(!1);P.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const U5={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},HC=({nodeId:t,handleType:e,style:n,type:r=no.Bezier,CustomComponent:s,connectionStatus:a})=>{const{fromNode:c,handleId:u,toX:h,toY:f,connectionMode:p}=Ct(P.useCallback(X=>({fromNode:X.nodeInternals.get(t),handleId:X.connectionHandleId,toX:(X.connectionPosition.x-X.transform[0])/X.transform[2],toY:(X.connectionPosition.y-X.transform[1])/X.transform[2],connectionMode:X.connectionMode}),[t]),Mn),y=c?.[Pt]?.handleBounds;let b=y?.[e];if(p===vo.Loose&&(b=b||y?.[e==="source"?"target":"source"]),!c||!b)return null;const E=u?b.find(X=>X.id===u):b[0],T=E?E.x+E.width/2:(c.width??0)/2,A=E?E.y+E.height/2:c.height??0,R=(c.positionAbsolute?.x??0)+T,k=(c.positionAbsolute?.y??0)+A,z=E?.position,B=z?U5[z]:null;if(!z||!B)return null;if(s)return fe.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:E,fromX:R,fromY:k,toX:h,toY:f,fromPosition:z,toPosition:B,connectionStatus:a});let U="";const Y={sourceX:R,sourceY:k,sourcePosition:z,targetX:h,targetY:f,targetPosition:B};return r===no.Bezier?[U]=dC(Y):r===no.Step?[U]=Ly({...Y,borderRadius:0}):r===no.SmoothStep?[U]=Ly(Y):r===no.SimpleBezier?[U]=uC(Y):U=`M${R},${k} ${h},${f}`,fe.createElement("path",{d:U,fill:"none",className:"react-flow__connection-path",style:n})};HC.displayName="ConnectionLine";const B5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function j5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:a,nodesConnectable:c,width:u,height:h,connectionStatus:f}=Ct(B5,Mn);return!(s&&a&&u&&c)?null:fe.createElement("svg",{style:t,width:u,height:h,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:$n(["react-flow__connection",f])},fe.createElement(HC,{nodeId:s,handleType:a,style:e,type:n,CustomComponent:r,connectionStatus:f})))}function rT(t,e){return P.useRef(null),mn(),P.useMemo(()=>e(t),[t])}const FC=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:a,onNodeClick:c,onEdgeClick:u,onNodeDoubleClick:h,onEdgeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:E,onSelectionContextMenu:T,onSelectionStart:A,onSelectionEnd:R,connectionLineType:k,connectionLineStyle:z,connectionLineComponent:B,connectionLineContainerStyle:U,selectionKeyCode:Y,selectionOnDrag:X,selectionMode:D,multiSelectionKeyCode:S,panActivationKeyCode:I,zoomActivationKeyCode:j,deleteKeyCode:F,onlyRenderVisibleElements:$,elementsSelectable:O,selectNodesOnDrag:L,defaultViewport:q,translateExtent:M,minZoom:W,maxZoom:G,preventScrolling:K,defaultMarkerColor:N,zoomOnScroll:J,zoomOnPinch:ne,panOnScroll:Z,panOnScrollSpeed:te,panOnScrollMode:le,zoomOnDoubleClick:de,panOnDrag:me,onPaneClick:be,onPaneMouseEnter:Ae,onPaneMouseMove:Re,onPaneMouseLeave:rt,onPaneScroll:Ye,onPaneContextMenu:ke,onEdgeContextMenu:Le,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:Be,onReconnect:Ee,onReconnectStart:It,onReconnectEnd:Sn,reconnectRadius:Zt,noDragClassName:er,noWheelClassName:Pn,noPanClassName:Vn,elevateEdgesOnSelect:Hr,disableKeyboardA11y:at,nodeOrigin:Ke,nodeExtent:Ft,rfId:xt})=>{const oi=rT(t,p5),$t=rT(e,w5);return z5(a),fe.createElement(f5,{onPaneClick:be,onPaneMouseEnter:Ae,onPaneMouseMove:Re,onPaneMouseLeave:rt,onPaneContextMenu:ke,onPaneScroll:Ye,deleteKeyCode:F,selectionKeyCode:Y,selectionOnDrag:X,selectionMode:D,onSelectionStart:A,onSelectionEnd:R,multiSelectionKeyCode:S,panActivationKeyCode:I,zoomActivationKeyCode:j,elementsSelectable:O,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:J,zoomOnPinch:ne,zoomOnDoubleClick:de,panOnScroll:Z,panOnScrollSpeed:te,panOnScrollMode:le,panOnDrag:me,defaultViewport:q,translateExtent:M,minZoom:W,maxZoom:G,onSelectionContextMenu:T,preventScrolling:K,noDragClassName:er,noWheelClassName:Pn,noPanClassName:Vn,disableKeyboardA11y:at},fe.createElement(L5,null,fe.createElement(P5,{edgeTypes:$t,onEdgeClick:u,onEdgeDoubleClick:f,onlyRenderVisibleElements:$,onEdgeContextMenu:Le,onEdgeMouseEnter:st,onEdgeMouseMove:Ht,onEdgeMouseLeave:Be,onReconnect:Ee,onReconnectStart:It,onReconnectEnd:Sn,reconnectRadius:Zt,defaultMarkerColor:N,noPanClassName:Vn,elevateEdgesOnSelect:!!Hr,disableKeyboardA11y:at,rfId:xt},fe.createElement(j5,{style:z,type:k,component:B,containerStyle:U})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(v5,{nodeTypes:oi,onNodeClick:c,onNodeDoubleClick:h,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:E,selectNodesOnDrag:L,onlyRenderVisibleElements:$,noPanClassName:Vn,noDragClassName:er,disableKeyboardA11y:at,nodeOrigin:Ke,nodeExtent:Ft,rfId:xt})))};FC.displayName="GraphView";var H5=P.memo(FC);const Hy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Qs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Hy,nodeExtent:Hy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:vo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:gV,isValidConnection:void 0},F5=()=>NO((t,e)=>({...Qs,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:F0(n,r,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",a=typeof r<"u",c=s?F0(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:a?r:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:c,fitViewOnInitOptions:u,domNode:h,nodeOrigin:f}=e(),p=h?.querySelector(".react-flow__viewport");if(!p)return;const y=window.getComputedStyle(p),{m22:b}=new window.DOMMatrixReadOnly(y.transform),E=n.reduce((A,R)=>{const k=s.get(R.id);if(k?.hidden)s.set(k.id,{...k,[Pt]:{...k[Pt],handleBounds:void 0}});else if(k){const z=Yv(R.nodeElement);!!(z.width&&z.height&&(k.width!==z.width||k.height!==z.height||R.forceUpdate))&&(s.set(k.id,{...k,[Pt]:{...k[Pt],handleBounds:{source:W1(".source",R.nodeElement,b,f),target:W1(".target",R.nodeElement,b,f)}},...z}),A.push({id:k.id,type:"dimensions",dimensions:z}))}return A},[]);IC(s,f);const T=c||a&&!c&&NC(e,{initial:!0,...u});t({nodeInternals:new Map(s),fitViewOnInitDone:T}),E?.length>0&&r?.(E)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),c=n.map(u=>{const h={id:u.id,type:"position",dragging:s};return r&&(h.positionAbsolute=u.positionAbsolute,h.position=u.position),h});a(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:c,getNodes:u,elevateNodesOnSelect:h}=e();if(n?.length){if(a){const f=DC(n,u()),p=F0(f,s,c,h);t({nodeInternals:p})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let c,u=null;r?c=n.map(h=>to(h,!0)):(c=Fl(a(),n),u=Fl(s,[])),Rf({changedNodes:c,changedEdges:u,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:a}=e();let c,u=null;r?c=n.map(h=>to(h,!0)):(c=Fl(s,n),u=Fl(a(),[])),Rf({changedNodes:u,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:a}=e(),c=n||a(),u=r||s,h=c.map(p=>(p.selected=!1,to(p.id,!1))),f=u.map(p=>to(p.id,!1));Rf({changedNodes:h,changedEdges:f,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),a=r().filter(u=>u.selected).map(u=>to(u.id,!1)),c=n.filter(u=>u.selected).map(u=>to(u.id,!1));Rf({changedNodes:a,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=Kv(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:a,d3Zoom:c,d3Selection:u,translateExtent:h}=e();if(!c||!u||!n.x&&!n.y)return!1;const f=uo.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),p=[[0,0],[s,a]],y=c?.constrain()(f,p,h);return c.transform(u,y),r[0]!==y.x||r[1]!==y.y||r[2]!==y.k},cancelConnection:()=>t({connectionNodeId:Qs.connectionNodeId,connectionHandleId:Qs.connectionHandleId,connectionHandleType:Qs.connectionHandleType,connectionStatus:Qs.connectionStatus,connectionStartHandle:Qs.connectionStartHandle,connectionEndHandle:Qs.connectionEndHandle}),reset:()=>t({...Qs})}),Object.is),$C=({children:t})=>{const e=P.useRef(null);return e.current||(e.current=F5()),fe.createElement(lV,{value:e.current},t)};$C.displayName="ReactFlowProvider";const qC=({children:t})=>P.useContext(Jm)?fe.createElement(fe.Fragment,null,t):fe.createElement($C,null,t);qC.displayName="ReactFlowWrapper";const $5={input:wC,default:By,output:TC,group:nb},q5={default:_m,straight:Zv,step:Qv,smoothstep:ep,simplebezier:Wv},G5=[0,0],Y5=[15,15],K5={x:0,y:0,zoom:1},X5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},GC=P.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a=$5,edgeTypes:c=q5,onNodeClick:u,onEdgeClick:h,onInit:f,onMove:p,onMoveStart:y,onMoveEnd:b,onConnect:E,onConnectStart:T,onConnectEnd:A,onClickConnectStart:R,onClickConnectEnd:k,onNodeMouseEnter:z,onNodeMouseMove:B,onNodeMouseLeave:U,onNodeContextMenu:Y,onNodeDoubleClick:X,onNodeDragStart:D,onNodeDrag:S,onNodeDragStop:I,onNodesDelete:j,onEdgesDelete:F,onSelectionChange:$,onSelectionDragStart:O,onSelectionDrag:L,onSelectionDragStop:q,onSelectionContextMenu:M,onSelectionStart:W,onSelectionEnd:G,connectionMode:K=vo.Strict,connectionLineType:N=no.Bezier,connectionLineStyle:J,connectionLineComponent:ne,connectionLineContainerStyle:Z,deleteKeyCode:te="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:de=!1,selectionMode:me=yd.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:Ae=bm()?"Meta":"Control",zoomActivationKeyCode:Re=bm()?"Meta":"Control",snapToGrid:rt=!1,snapGrid:Ye=Y5,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:Le=!0,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:Be,nodeOrigin:Ee=G5,edgesFocusable:It,edgesUpdatable:Sn,elementsSelectable:Zt,defaultViewport:er=K5,minZoom:Pn=.5,maxZoom:Vn=2,translateExtent:Hr=Hy,preventScrolling:at=!0,nodeExtent:Ke,defaultMarkerColor:Ft="#b1b1b7",zoomOnScroll:xt=!0,zoomOnPinch:oi=!0,panOnScroll:$t=!1,panOnScrollSpeed:on=.5,panOnScrollMode:Ln=ya.Free,zoomOnDoubleClick:zn=!0,panOnDrag:an=!0,onPaneClick:pn,onPaneMouseEnter:Un,onPaneMouseMove:ji,onPaneMouseLeave:Hi,onPaneScroll:Fr,onPaneContextMenu:tr,children:_r,onEdgeContextMenu:nr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Mo,onEdgeMouseMove:ai,onEdgeMouseLeave:Ss,onEdgeUpdate:li,onEdgeUpdateStart:Ba,onEdgeUpdateEnd:yt,onReconnect:Lt,onReconnectStart:Nt,onReconnectEnd:qn,reconnectRadius:Oo=10,edgeUpdaterRadius:kc=10,onNodesChange:ci,onEdgesChange:ja,noDragClassName:Fi="nodrag",noWheelClassName:ui="nowheel",noPanClassName:wr="nopan",fitView:xr=!1,fitViewOptions:Tr,connectOnClick:gn=!0,attributionPosition:Tt,proOptions:Po,defaultEdgeOptions:As,elevateNodesOnSelect:rr=!0,elevateEdgesOnSelect:$r=!1,disableKeyboardA11y:Vo=!1,autoPanOnConnect:Ha=!0,autoPanOnNodeDrag:$i=!0,connectionRadius:Fa=20,isValidConnection:di,onError:Sr,style:Jt,id:hi,nodeDragThreshold:$a,...qr},Cs)=>{const fi=hi||"1";return fe.createElement("div",{...qr,style:{...Jt,...X5},ref:Cs,className:$n(["react-flow",s]),"data-testid":"rf__wrapper",id:hi},fe.createElement(qC,null,fe.createElement(H5,{onInit:f,onMove:p,onMoveStart:y,onMoveEnd:b,onNodeClick:u,onEdgeClick:h,onNodeMouseEnter:z,onNodeMouseMove:B,onNodeMouseLeave:U,onNodeContextMenu:Y,onNodeDoubleClick:X,nodeTypes:a,edgeTypes:c,connectionLineType:N,connectionLineStyle:J,connectionLineComponent:ne,connectionLineContainerStyle:Z,selectionKeyCode:le,selectionOnDrag:de,selectionMode:me,deleteKeyCode:te,multiSelectionKeyCode:Ae,panActivationKeyCode:be,zoomActivationKeyCode:Re,onlyRenderVisibleElements:ke,selectNodesOnDrag:Le,defaultViewport:er,translateExtent:Hr,minZoom:Pn,maxZoom:Vn,preventScrolling:at,zoomOnScroll:xt,zoomOnPinch:oi,zoomOnDoubleClick:zn,panOnScroll:$t,panOnScrollSpeed:on,panOnScrollMode:Ln,panOnDrag:an,onPaneClick:pn,onPaneMouseEnter:Un,onPaneMouseMove:ji,onPaneMouseLeave:Hi,onPaneScroll:Fr,onPaneContextMenu:tr,onSelectionContextMenu:M,onSelectionStart:W,onSelectionEnd:G,onEdgeContextMenu:nr,onEdgeDoubleClick:Er,onEdgeMouseEnter:Mo,onEdgeMouseMove:ai,onEdgeMouseLeave:Ss,onReconnect:Lt??li,onReconnectStart:Nt??Ba,onReconnectEnd:qn??yt,reconnectRadius:Oo??kc,defaultMarkerColor:Ft,noDragClassName:Fi,noWheelClassName:ui,noPanClassName:wr,elevateEdgesOnSelect:$r,rfId:fi,disableKeyboardA11y:Vo,nodeOrigin:Ee,nodeExtent:Ke}),fe.createElement(UV,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:E,onConnectStart:T,onConnectEnd:A,onClickConnectStart:R,onClickConnectEnd:k,nodesDraggable:st,nodesConnectable:Ht,nodesFocusable:Be,edgesFocusable:It,edgesUpdatable:Sn,elementsSelectable:Zt,elevateNodesOnSelect:rr,minZoom:Pn,maxZoom:Vn,nodeExtent:Ke,onNodesChange:ci,onEdgesChange:ja,snapToGrid:rt,snapGrid:Ye,connectionMode:K,translateExtent:Hr,connectOnClick:gn,defaultEdgeOptions:As,fitView:xr,fitViewOptions:Tr,onNodesDelete:j,onEdgesDelete:F,onNodeDragStart:D,onNodeDrag:S,onNodeDragStop:I,onSelectionDrag:L,onSelectionDragStart:O,onSelectionDragStop:q,noPanClassName:wr,nodeOrigin:Ee,rfId:fi,autoPanOnConnect:Ha,autoPanOnNodeDrag:$i,onError:Sr,connectionRadius:Fa,isValidConnection:di,nodeDragThreshold:$a}),fe.createElement(LV,{onSelectionChange:$}),_r,fe.createElement(uV,{proOptions:Po,position:Tt}),fe.createElement($V,{rfId:fi,disableKeyboardA11y:Vo})))});GC.displayName="ReactFlow";function YC(t){return e=>{const[n,r]=P.useState(e),s=P.useCallback(a=>r(c=>t(a,c)),[]);return[n,r,s]}}const W5=YC(DC),Q5=YC(i5);function Z5(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function J5(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function e6(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function t6(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function n6(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const $u=({children:t,className:e,...n})=>fe.createElement("button",{type:"button",className:$n(["react-flow__controls-button",e]),...n},t);$u.displayName="ControlButton";const r6=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),KC=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:c,onFitView:u,onInteractiveChange:h,className:f,children:p,position:y="bottom-left"})=>{const b=mn(),[E,T]=P.useState(!1),{isInteractive:A,minZoomReached:R,maxZoomReached:k}=Ct(r6,Mn),{zoomIn:z,zoomOut:B,fitView:U}=Hd();if(P.useEffect(()=>{T(!0)},[]),!E)return null;const Y=()=>{z(),a?.()},X=()=>{B(),c?.()},D=()=>{U(s),u?.()},S=()=>{b.setState({nodesDraggable:!A,nodesConnectable:!A,elementsSelectable:!A}),h?.(!A)};return fe.createElement(rC,{className:$n(["react-flow__controls",f]),position:y,style:t,"data-testid":"rf__controls"},e&&fe.createElement(fe.Fragment,null,fe.createElement($u,{onClick:Y,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:k},fe.createElement(Z5,null)),fe.createElement($u,{onClick:X,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:R},fe.createElement(J5,null))),n&&fe.createElement($u,{className:"react-flow__controls-fitview",onClick:D,title:"fit view","aria-label":"fit view"},fe.createElement(e6,null)),r&&fe.createElement($u,{className:"react-flow__controls-interactive",onClick:S,title:"toggle interactivity","aria-label":"toggle interactivity"},A?fe.createElement(n6,null):fe.createElement(t6,null)),p)};KC.displayName="Controls";var i6=P.memo(KC),Br;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Br||(Br={}));function s6({color:t,dimensions:e,lineWidth:n}){return fe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function o6({color:t,radius:e}){return fe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const a6={[Br.Dots]:"#91919a",[Br.Lines]:"#eee",[Br.Cross]:"#e2e2e2"},l6={[Br.Dots]:1,[Br.Lines]:1,[Br.Cross]:6},c6=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function XC({id:t,variant:e=Br.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=2,color:c,style:u,className:h}){const f=P.useRef(null),{transform:p,patternId:y}=Ct(c6,Mn),b=c||a6[e],E=r||l6[e],T=e===Br.Dots,A=e===Br.Cross,R=Array.isArray(n)?n:[n,n],k=[R[0]*p[2]||1,R[1]*p[2]||1],z=E*p[2],B=A?[z,z]:k,U=T?[z/a,z/a]:[B[0]/a,B[1]/a];return fe.createElement("svg",{className:$n(["react-flow__background",h]),style:{...u,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},fe.createElement("pattern",{id:y+t,x:p[0]%k[0],y:p[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${U[0]},-${U[1]})`},T?fe.createElement(o6,{color:b,radius:z/a}):fe.createElement(s6,{dimensions:B,color:b,lineWidth:s})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}XC.displayName="Background";var u6=P.memo(XC),Xt=function(){return Xt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Xt.apply(this,arguments)},iT={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},sT={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Nf={width:"20px",height:"20px",position:"absolute",zIndex:1},d6={top:Xt(Xt({},iT),{top:"-5px"}),right:Xt(Xt({},sT),{left:void 0,right:"-5px"}),bottom:Xt(Xt({},iT),{top:void 0,bottom:"-5px"}),left:Xt(Xt({},sT),{left:"-5px"}),topRight:Xt(Xt({},Nf),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Xt(Xt({},Nf),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Xt(Xt({},Nf),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Xt(Xt({},Nf),{left:"-10px",top:"-10px",cursor:"nw-resize"})},h6=P.memo(function(t){var e=t.onResizeStart,n=t.direction,r=t.children,s=t.replaceStyles,a=t.className,c=P.useCallback(function(f){e(f,n)},[e,n]),u=P.useCallback(function(f){e(f,n)},[e,n]),h=P.useMemo(function(){return Xt(Xt({position:"absolute",userSelect:"none"},d6[n]),s??{})},[s,n]);return C.jsx("div",{className:a||void 0,style:h,onMouseDown:c,onTouchStart:u,children:r})}),f6=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ai=function(){return Ai=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ai.apply(this,arguments)},m6={width:"auto",height:"auto"},kf=function(t,e,n){return Math.max(Math.min(t,n),e)},oT=function(t,e,n){var r=Math.round(t/e);return r*e+n*(r-1)},Ol=function(t,e){return new RegExp(t,"i").test(e)},Df=function(t){return!!(t.touches&&t.touches.length)},p6=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},aT=function(t,e,n){n===void 0&&(n=0);var r=e.reduce(function(a,c,u){return Math.abs(c-t)<Math.abs(e[a]-t)?u:a},0),s=Math.abs(e[r]-t);return n===0||s<n?e[r]:t},Y0=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},Mf=function(t,e,n,r){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var s=Number(t.replace("%",""))/100;return e*s}if(t.endsWith("vw")){var s=Number(t.replace("vw",""))/100;return n*s}if(t.endsWith("vh")){var s=Number(t.replace("vh",""))/100;return r*s}}return t},g6=function(t,e,n,r,s,a,c){return r=Mf(r,t.width,e,n),s=Mf(s,t.height,e,n),a=Mf(a,t.width,e,n),c=Mf(c,t.height,e,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof a>"u"?void 0:Number(a),minHeight:typeof c>"u"?void 0:Number(c)}},y6=function(t){return Array.isArray(t)?t:[t,t]},v6=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],lT="__resizable_base__",b6=function(t){f6(e,t);function e(n){var r,s,a,c,u=t.call(this,n)||this;return u.ratio=1,u.resizable=null,u.parentLeft=0,u.parentTop=0,u.resizableLeft=0,u.resizableRight=0,u.resizableTop=0,u.resizableBottom=0,u.targetLeft=0,u.targetTop=0,u.delta={width:0,height:0},u.appendBase=function(){if(!u.resizable||!u.window)return null;var h=u.parentNode;if(!h)return null;var f=u.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(lT):f.className+=lT,h.appendChild(f),f},u.removeBase=function(h){var f=u.parentNode;f&&f.removeChild(h)},u.state={isResizing:!1,width:(s=(r=u.propsSize)===null||r===void 0?void 0:r.width)!==null&&s!==void 0?s:"auto",height:(c=(a=u.propsSize)===null||a===void 0?void 0:a.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},u.onResizeStart=u.onResizeStart.bind(u),u.onMouseMove=u.onMouseMove.bind(u),u.onMouseUp=u.onMouseUp.bind(u),u}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||m6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,a=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:a,this.resizable.style.position=c}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,s=function(u){var h;if(typeof n.state[u]>"u"||n.state[u]==="auto")return"auto";if(n.propsSize&&n.propsSize[u]&&(!((h=n.propsSize[u])===null||h===void 0)&&h.toString().endsWith("%"))){if(n.state[u].toString().endsWith("%"))return n.state[u].toString();var f=n.getParentSize(),p=Number(n.state[u].toString().replace("px","")),y=p/f[u]*100;return"".concat(y,"%")}return Y0(n.state[u])},a=r&&typeof r.width<"u"&&!this.state.isResizing?Y0(r.width):s("width"),c=r&&typeof r.height<"u"&&!this.state.isResizing?Y0(r.height):s("height");return{width:a,height:c}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var a={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=s),this.removeBase(n),a},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,r){var s=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof s>"u"||s==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,r){var s=this.props.boundsByDirection,a=this.state.direction,c=s&&Ol("left",a),u=s&&Ol("top",a),h,f;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(h=c?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),f=u?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(h=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=u?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(h=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=u?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return h&&Number.isFinite(h)&&(n=n&&n<h?n:h),f&&Number.isFinite(f)&&(r=r&&r<f?r:f),{maxWidth:n,maxHeight:r}},e.prototype.calculateNewSizeFromDirection=function(n,r){var s=this.props.scale||1,a=y6(this.props.resizeRatio||1),c=a[0],u=a[1],h=this.state,f=h.direction,p=h.original,y=this.props,b=y.lockAspectRatio,E=y.lockAspectRatioExtraHeight,T=y.lockAspectRatioExtraWidth,A=p.width,R=p.height,k=E||0,z=T||0;return Ol("right",f)&&(A=p.width+(n-p.x)*c/s,b&&(R=(A-z)/this.ratio+k)),Ol("left",f)&&(A=p.width-(n-p.x)*c/s,b&&(R=(A-z)/this.ratio+k)),Ol("bottom",f)&&(R=p.height+(r-p.y)*u/s,b&&(A=(R-k)*this.ratio+z)),Ol("top",f)&&(R=p.height-(r-p.y)*u/s,b&&(A=(R-k)*this.ratio+z)),{newWidth:A,newHeight:R}},e.prototype.calculateNewSizeFromAspectRatio=function(n,r,s,a){var c=this.props,u=c.lockAspectRatio,h=c.lockAspectRatioExtraHeight,f=c.lockAspectRatioExtraWidth,p=typeof a.width>"u"?10:a.width,y=typeof s.width>"u"||s.width<0?n:s.width,b=typeof a.height>"u"?10:a.height,E=typeof s.height>"u"||s.height<0?r:s.height,T=h||0,A=f||0;if(u){var R=(b-T)*this.ratio+A,k=(E-T)*this.ratio+A,z=(p-A)/this.ratio+T,B=(y-A)/this.ratio+T,U=Math.max(p,R),Y=Math.min(y,k),X=Math.max(b,z),D=Math.min(E,B);n=kf(n,U,Y),r=kf(r,X,D)}else n=kf(n,p,y),r=kf(r,b,E);return{newWidth:n,newHeight:r}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var s=r.getBoundingClientRect();this.parentLeft=s.left*n,this.parentTop=s.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var a=this.props.bounds.getBoundingClientRect();this.targetLeft=a.left*n,this.targetTop=a.top*n}if(this.resizable){var c=this.resizable.getBoundingClientRect(),u=c.left,h=c.top,f=c.right,p=c.bottom;this.resizableLeft=u*n,this.resizableRight=f*n,this.resizableTop=h*n,this.resizableBottom=p*n}},e.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var s=0,a=0;if(n.nativeEvent&&p6(n.nativeEvent)?(s=n.nativeEvent.clientX,a=n.nativeEvent.clientY):n.nativeEvent&&Df(n.nativeEvent)&&(s=n.nativeEvent.touches[0].clientX,a=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(n,r,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var u,h=this.window.getComputedStyle(this.resizable);if(h.flexBasis!=="auto"){var f=this.parentNode;if(f){var p=this.window.getComputedStyle(f).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",u=h.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var y={original:{x:s,y:a,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Ai(Ai({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:u};this.setState(y)}},e.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Df(n))try{n.preventDefault(),n.stopPropagation()}catch{}var s=this.props,a=s.maxWidth,c=s.maxHeight,u=s.minWidth,h=s.minHeight,f=Df(n)?n.touches[0].clientX:n.clientX,p=Df(n)?n.touches[0].clientY:n.clientY,y=this.state,b=y.direction,E=y.original,T=y.width,A=y.height,R=this.getParentSize(),k=g6(R,this.window.innerWidth,this.window.innerHeight,a,c,u,h);a=k.maxWidth,c=k.maxHeight,u=k.minWidth,h=k.minHeight;var z=this.calculateNewSizeFromDirection(f,p),B=z.newHeight,U=z.newWidth,Y=this.calculateNewMaxFromBoundary(a,c);this.props.snap&&this.props.snap.x&&(U=aT(U,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(B=aT(B,this.props.snap.y,this.props.snapGap));var X=this.calculateNewSizeFromAspectRatio(U,B,{width:Y.maxWidth,height:Y.maxHeight},{width:u,height:h});if(U=X.newWidth,B=X.newHeight,this.props.grid){var D=oT(U,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),S=oT(B,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),I=this.props.snapGap||0,j=I===0||Math.abs(D-U)<=I?D:U,F=I===0||Math.abs(S-B)<=I?S:B;U=j,B=F}var $={width:U-E.width,height:B-E.height};if(this.delta=$,T&&typeof T=="string"){if(T.endsWith("%")){var O=U/R.width*100;U="".concat(O,"%")}else if(T.endsWith("vw")){var L=U/this.window.innerWidth*100;U="".concat(L,"vw")}else if(T.endsWith("vh")){var q=U/this.window.innerHeight*100;U="".concat(q,"vh")}}if(A&&typeof A=="string"){if(A.endsWith("%")){var O=B/R.height*100;B="".concat(O,"%")}else if(A.endsWith("vw")){var L=B/this.window.innerWidth*100;B="".concat(L,"vw")}else if(A.endsWith("vh")){var q=B/this.window.innerHeight*100;B="".concat(q,"vh")}}var M={width:this.createSizeForCssProperty(U,"width"),height:this.createSizeForCssProperty(B,"height")};this.flexDir==="row"?M.flexBasis=M.width:this.flexDir==="column"&&(M.flexBasis=M.height);var W=this.state.width!==M.width,G=this.state.height!==M.height,K=this.state.flexBasis!==M.flexBasis,N=W||G||K;N&&tC.flushSync(function(){r.setState(M)}),this.props.onResize&&N&&this.props.onResize(n,b,this.resizable,$)}},e.prototype.onMouseUp=function(n){var r,s,a=this.state,c=a.isResizing,u=a.direction;a.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,u,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Ai(Ai({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var r,s;this.setState({width:(r=n.width)!==null&&r!==void 0?r:"auto",height:(s=n.height)!==null&&s!==void 0?s:"auto"})},e.prototype.renderResizer=function(){var n=this,r=this.props,s=r.enable,a=r.handleStyles,c=r.handleClasses,u=r.handleWrapperStyle,h=r.handleWrapperClass,f=r.handleComponent;if(!s)return null;var p=Object.keys(s).map(function(y){return s[y]!==!1?C.jsx(h6,{direction:y,onResizeStart:n.onResizeStart,replaceStyles:a&&a[y],className:c&&c[y],children:f&&f[y]?f[y]:null},y):null});return C.jsx("div",{className:h,style:u,children:p})},e.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(c,u){return v6.indexOf(u)!==-1||(c[u]=n.props[u]),c},{}),s=Ai(Ai(Ai({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var a=this.props.as||"div";return C.jsxs(a,Ai({style:s,className:this.props.className},r,{ref:function(c){c&&(n.resizable=c)},children:[this.state.isResizing&&C.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(P.PureComponent);const tp=P.createContext(null);tp.displayName="PanelGroupContext";const Ot={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},ib=10,wa=P.useLayoutEffect,cT=hO.useId,_6=typeof cT=="function"?cT:()=>null;let E6=0;function sb(t=null){const e=_6(),n=P.useRef(t||e||null);return n.current===null&&(n.current=""+E6++),t??n.current}function WC({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:a,id:c,maxSize:u,minSize:h,onCollapse:f,onExpand:p,onResize:y,order:b,style:E,tagName:T="div",...A}){const R=P.useContext(tp);if(R===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:k,expandPanel:z,getPanelSize:B,getPanelStyle:U,groupId:Y,isPanelCollapsed:X,reevaluatePanelConstraints:D,registerPanel:S,resizePanel:I,unregisterPanel:j}=R,F=sb(c),$=P.useRef({callbacks:{onCollapse:f,onExpand:p,onResize:y},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:u,minSize:h},id:F,idIsFromProps:c!==void 0,order:b});P.useRef({didLogMissingDefaultSizeWarning:!1}),wa(()=>{const{callbacks:L,constraints:q}=$.current,M={...q};$.current.id=F,$.current.idIsFromProps=c!==void 0,$.current.order=b,L.onCollapse=f,L.onExpand=p,L.onResize=y,q.collapsedSize=n,q.collapsible=r,q.defaultSize=s,q.maxSize=u,q.minSize=h,(M.collapsedSize!==q.collapsedSize||M.collapsible!==q.collapsible||M.maxSize!==q.maxSize||M.minSize!==q.minSize)&&D($.current,M)}),wa(()=>{const L=$.current;return S(L),()=>{j(L)}},[b,F,S,j]),P.useImperativeHandle(a,()=>({collapse:()=>{k($.current)},expand:L=>{z($.current,L)},getId(){return F},getSize(){return B($.current)},isCollapsed(){return X($.current)},isExpanded(){return!X($.current)},resize:L=>{I($.current,L)}}),[k,z,B,X,F,I]);const O=U($.current,s);return P.createElement(T,{...A,children:t,className:e,id:F,style:{...O,...E},[Ot.groupId]:Y,[Ot.panel]:"",[Ot.panelCollapsible]:r||void 0,[Ot.panelId]:F,[Ot.panelSize]:parseFloat(""+O.flexGrow).toFixed(1)})}const Fy=P.forwardRef((t,e)=>P.createElement(WC,{...t,forwardedRef:e}));WC.displayName="Panel";Fy.displayName="forwardRef(Panel)";let $y=null,Qf=-1,ro=null;function w6(t,e){if(e){const n=(e&tR)!==0,r=(e&nR)!==0,s=(e&rR)!==0,a=(e&iR)!==0;if(n)return s?"se-resize":a?"ne-resize":"e-resize";if(r)return s?"sw-resize":a?"nw-resize":"w-resize";if(s)return"s-resize";if(a)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function x6(){ro!==null&&(document.head.removeChild(ro),$y=null,ro=null,Qf=-1)}function K0(t,e){var n,r;const s=w6(t,e);if($y!==s){if($y=s,ro===null&&(ro=document.createElement("style"),document.head.appendChild(ro)),Qf>=0){var a;(a=ro.sheet)===null||a===void 0||a.removeRule(Qf)}Qf=(n=(r=ro.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function QC(t){return t.type==="keydown"}function ZC(t){return t.type.startsWith("pointer")}function JC(t){return t.type.startsWith("mouse")}function np(t){if(ZC(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(JC(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function T6(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function S6(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function A6(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:hT(t),b:hT(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;He(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:dT(uT(n.a)),b:dT(uT(n.b))};if(s.a===s.b){const a=r.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let u=a.length;for(;u--;){const h=a[u];if(h===c.a)return 1;if(h===c.b)return-1}}return Math.sign(s.a-s.b)}const C6=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function R6(t){var e;const n=getComputedStyle((e=eR(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function I6(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||R6(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||C6.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function uT(t){let e=t.length;for(;e--;){const n=t[e];if(He(n,"Missing node"),I6(n))return n}return null}function dT(t){return t&&Number(getComputedStyle(t).zIndex)||0}function hT(t){const e=[];for(;t;)e.push(t),t=eR(t);return e}function eR(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const tR=1,nR=2,rR=4,iR=8,N6=T6()==="coarse";let ti=[],tc=!1,io=new Map,rp=new Map;const bd=new Set;function k6(t,e,n,r,s){var a;const{ownerDocument:c}=e,u={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},h=(a=io.get(c))!==null&&a!==void 0?a:0;return io.set(c,h+1),bd.add(u),Em(),function(){var p;rp.delete(t),bd.delete(u);const y=(p=io.get(c))!==null&&p!==void 0?p:1;if(io.set(c,y-1),Em(),y===1&&io.delete(c),ti.includes(u)){const b=ti.indexOf(u);b>=0&&ti.splice(b,1),ab(),s("up",!0,null)}}}function D6(t){const{target:e}=t,{x:n,y:r}=np(t);tc=!0,ob({target:e,x:n,y:r}),Em(),ti.length>0&&(wm("down",t),t.preventDefault(),sR(e)||t.stopImmediatePropagation())}function X0(t){const{x:e,y:n}=np(t);if(tc&&t.buttons===0&&(tc=!1,wm("up",t)),!tc){const{target:r}=t;ob({target:r,x:e,y:n})}wm("move",t),ab(),ti.length>0&&t.preventDefault()}function W0(t){const{target:e}=t,{x:n,y:r}=np(t);rp.clear(),tc=!1,ti.length>0&&(t.preventDefault(),sR(e)||t.stopImmediatePropagation()),wm("up",t),ob({target:e,x:n,y:r}),ab(),Em()}function sR(t){let e=t;for(;e;){if(e.hasAttribute(Ot.resizeHandle))return!0;e=e.parentElement}return!1}function ob({target:t,x:e,y:n}){ti.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),bd.forEach(s=>{const{element:a,hitAreaMargins:c}=s,u=a.getBoundingClientRect(),{bottom:h,left:f,right:p,top:y}=u,b=N6?c.coarse:c.fine;if(e>=f-b&&e<=p+b&&n>=y-b&&n<=h+b){if(r!==null&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&A6(r,a)>0){let T=r,A=!1;for(;T&&!T.contains(a);){if(S6(T.getBoundingClientRect(),u)){A=!0;break}T=T.parentElement}if(A)return}ti.push(s)}})}function Q0(t,e){rp.set(t,e)}function ab(){let t=!1,e=!1;ti.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;rp.forEach(r=>{n|=r}),t&&e?K0("intersection",n):t?K0("horizontal",n):e?K0("vertical",n):x6()}let Z0;function Em(){var t;(t=Z0)===null||t===void 0||t.abort(),Z0=new AbortController;const e={capture:!0,signal:Z0.signal};bd.size&&(tc?(ti.length>0&&io.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",W0,e),s.addEventListener("pointerleave",X0,e),s.addEventListener("pointermove",X0,e))}),io.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",W0,e),s.addEventListener("pointercancel",W0,e)})):io.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",D6,e),s.addEventListener("pointermove",X0,e))}))}function wm(t,e){bd.forEach(n=>{const{setResizeHandlerState:r}=n,s=ti.includes(n);r(t,s,e)})}function M6(){const[t,e]=P.useState(0);return P.useCallback(()=>e(n=>n+1),[])}function He(t,e){if(!t)throw console.error(e),Error(e)}function Ca(t,e,n=ib){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function hs(t,e,n=ib){return Ca(t,e,n)===0}function hr(t,e,n){return Ca(t,e,n)===0}function O6(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],a=e[r];if(!hr(s,a,n))return!1}return!0}function $l({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];He(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:a,maxSize:c=100,minSize:u=0}=r;if(Ca(n,u)<0)if(a){const h=(s+u)/2;Ca(n,h)<0?n=s:n=u}else n=u;return n=Math.min(c,n),n=parseFloat(n.toFixed(ib)),n}function qu({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:a}){if(hr(t,0))return e;const c=[...e],[u,h]=r;He(u!=null,"Invalid first pivot index"),He(h!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const y=t<0?h:u,b=n[y];He(b,`Panel constraints not found for index ${y}`);const{collapsedSize:E=0,collapsible:T,minSize:A=0}=b;if(T){const R=e[y];if(He(R!=null,`Previous layout not found for panel index ${y}`),hr(R,E)){const k=A-R;Ca(k,Math.abs(t))>0&&(t=t<0?0-k:k)}}}{const y=t<0?u:h,b=n[y];He(b,`No panel constraints found for index ${y}`);const{collapsedSize:E=0,collapsible:T,minSize:A=0}=b;if(T){const R=e[y];if(He(R!=null,`Previous layout not found for panel index ${y}`),hr(R,A)){const k=R-E;Ca(k,Math.abs(t))>0&&(t=t<0?0-k:k)}}}}{const y=t<0?1:-1;let b=t<0?h:u,E=0;for(;;){const A=e[b];He(A!=null,`Previous layout not found for panel index ${b}`);const k=$l({panelConstraints:n,panelIndex:b,size:100})-A;if(E+=k,b+=y,b<0||b>=n.length)break}const T=Math.min(Math.abs(t),Math.abs(E));t=t<0?0-T:T}{let b=t<0?u:h;for(;b>=0&&b<n.length;){const E=Math.abs(t)-Math.abs(f),T=e[b];He(T!=null,`Previous layout not found for panel index ${b}`);const A=T-E,R=$l({panelConstraints:n,panelIndex:b,size:A});if(!hr(T,R)&&(f+=T-R,c[b]=R,f.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(O6(s,c))return s;{const y=t<0?h:u,b=e[y];He(b!=null,`Previous layout not found for panel index ${y}`);const E=b+f,T=$l({panelConstraints:n,panelIndex:y,size:E});if(c[y]=T,!hr(T,E)){let A=E-T,k=t<0?h:u;for(;k>=0&&k<n.length;){const z=c[k];He(z!=null,`Previous layout not found for panel index ${k}`);const B=z+A,U=$l({panelConstraints:n,panelIndex:k,size:B});if(hr(z,U)||(A-=U-z,c[k]=U),hr(A,0))break;t>0?k--:k++}}}const p=c.reduce((y,b)=>b+y,0);return hr(p,100)?c:s}function P6({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,a=0,c=0;const u=n[0];He(u!=null,"No pivot index found"),e.forEach((y,b)=>{const{constraints:E}=y,{maxSize:T=100,minSize:A=0}=E;b===u?(r=A,s=T):(a+=A,c+=T)});const h=Math.min(s,100-a),f=Math.max(r,100-c),p=t[u];return{valueMax:h,valueMin:f,valueNow:p}}function _d(t,e=document){return Array.from(e.querySelectorAll(`[${Ot.resizeHandleId}][data-panel-group-id="${t}"]`))}function oR(t,e,n=document){const s=_d(t,n).findIndex(a=>a.getAttribute(Ot.resizeHandleId)===e);return s??null}function aR(t,e,n){const r=oR(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function V6(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function lR(t,e=document){if(V6(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function ip(t,e=document){const n=e.querySelector(`[${Ot.resizeHandleId}="${t}"]`);return n||null}function L6(t,e,n,r=document){var s,a,c,u;const h=ip(e,r),f=_d(t,r),p=h?f.indexOf(h):-1,y=(s=(a=n[p])===null||a===void 0?void 0:a.id)!==null&&s!==void 0?s:null,b=(c=(u=n[p+1])===null||u===void 0?void 0:u.id)!==null&&c!==void 0?c:null;return[y,b]}function z6({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:a,setLayout:c}){P.useRef({didWarnAboutMissingResizeHandle:!1}),wa(()=>{if(!a)return;const u=_d(n,a);for(let h=0;h<s.length-1;h++){const{valueMax:f,valueMin:p,valueNow:y}=P6({layout:r,panelsArray:s,pivotIndices:[h,h+1]}),b=u[h];if(b!=null){const E=s[h];He(E,`No panel data found for index "${h}"`),b.setAttribute("aria-controls",E.id),b.setAttribute("aria-valuemax",""+Math.round(f)),b.setAttribute("aria-valuemin",""+Math.round(p)),b.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{u.forEach((h,f)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[n,r,s,a]),P.useEffect(()=>{if(!a)return;const u=e.current;He(u,"Eager values not found");const{panelDataArray:h}=u,f=lR(n,a);He(f!=null,`No group found for id "${n}"`);const p=_d(n,a);He(p,`No resize handles found for group id "${n}"`);const y=p.map(b=>{const E=b.getAttribute(Ot.resizeHandleId);He(E,"Resize handle element has no handle id attribute");const[T,A]=L6(n,E,h,a);if(T==null||A==null)return()=>{};const R=k=>{if(!k.defaultPrevented)switch(k.key){case"Enter":{k.preventDefault();const z=h.findIndex(B=>B.id===T);if(z>=0){const B=h[z];He(B,`No panel data found for index ${z}`);const U=r[z],{collapsedSize:Y=0,collapsible:X,minSize:D=0}=B.constraints;if(U!=null&&X){const S=qu({delta:hr(U,Y)?D-Y:Y-U,initialLayout:r,panelConstraints:h.map(I=>I.constraints),pivotIndices:aR(n,E,a),prevLayout:r,trigger:"keyboard"});r!==S&&c(S)}}break}}};return b.addEventListener("keydown",R),()=>{b.removeEventListener("keydown",R)}});return()=>{y.forEach(b=>b())}},[a,t,e,n,r,s,c])}function fT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function cR(t,e){const n=t==="horizontal",{x:r,y:s}=np(e);return n?r:s}function U6(t,e,n,r,s){const a=n==="horizontal",c=ip(e,s);He(c,`No resize handle element found for id "${e}"`);const u=c.getAttribute(Ot.groupId);He(u,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=r;const f=cR(n,t),p=lR(u,s);He(p,`No group element found for id "${u}"`);const y=p.getBoundingClientRect(),b=a?y.width:y.height;return(f-h)/b*100}function B6(t,e,n,r,s,a){if(QC(t)){const c=n==="horizontal";let u=0;t.shiftKey?u=100:s!=null?u=s:u=10;let h=0;switch(t.key){case"ArrowDown":h=c?0:u;break;case"ArrowLeft":h=c?-u:0;break;case"ArrowRight":h=c?u:0;break;case"ArrowUp":h=c?0:-u;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return r==null?0:U6(t,e,n,r,a)}function j6({panelDataArray:t}){const e=Array(t.length),n=t.map(a=>a.constraints);let r=0,s=100;for(let a=0;a<t.length;a++){const c=n[a];He(c,`Panel constraints not found for index ${a}`);const{defaultSize:u}=c;u!=null&&(r++,e[a]=u,s-=u)}for(let a=0;a<t.length;a++){const c=n[a];He(c,`Panel constraints not found for index ${a}`);const{defaultSize:u}=c;if(u!=null)continue;const h=t.length-r,f=s/h;r++,e[a]=f,s-=f}return e}function Pl(t,e,n){e.forEach((r,s)=>{const a=t[s];He(a,`Panel data not found for index ${s}`);const{callbacks:c,constraints:u,id:h}=a,{collapsedSize:f=0,collapsible:p}=u,y=n[h];if(y==null||r!==y){n[h]=r;const{onCollapse:b,onExpand:E,onResize:T}=c;T&&T(r,y),p&&(b||E)&&(E&&(y==null||hs(y,f))&&!hs(r,f)&&E(),b&&(y==null||!hs(y,f))&&hs(r,f)&&b())}})}function Of(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function H6({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:a=3}){const c=n[s];let u;return c==null?u=t!=null?t.toPrecision(a):"1":r.length===1?u="1":u=c.toPrecision(a),{flexBasis:0,flexGrow:u,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function F6(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function mT(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function uR(t){return`react-resizable-panels:${t}`}function dR(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:a}=e;return s?r:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function hR(t,e){try{const n=uR(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function $6(t,e,n){var r,s;const a=(r=hR(t,n))!==null&&r!==void 0?r:{},c=dR(e);return(s=a[c])!==null&&s!==void 0?s:null}function q6(t,e,n,r,s){var a;const c=uR(t),u=dR(e),h=(a=hR(t,s))!==null&&a!==void 0?a:{};h[u]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(c,JSON.stringify(h))}catch(f){console.error(f)}}function pT({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((a,c)=>a+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!hr(r,100)&&n.length>0)for(let a=0;a<e.length;a++){const c=n[a];He(c!=null,`No layout data found for index ${a}`);const u=100/r*c;n[a]=u}let s=0;for(let a=0;a<e.length;a++){const c=n[a];He(c!=null,`No layout data found for index ${a}`);const u=$l({panelConstraints:e,panelIndex:a,size:c});c!=u&&(s+=c-u,n[a]=u)}if(!hr(s,0))for(let a=0;a<e.length;a++){const c=n[a];He(c!=null,`No layout data found for index ${a}`);const u=c+s,h=$l({panelConstraints:e,panelIndex:a,size:u});if(c!==h&&(s-=h-c,n[a]=h,hr(s,0)))break}return n}const G6=100,Gu={getItem:t=>(mT(Gu),Gu.getItem(t)),setItem:(t,e)=>{mT(Gu),Gu.setItem(t,e)}},gT={};function fR({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:a=null,onLayout:c=null,keyboardResizeBy:u=null,storage:h=Gu,style:f,tagName:p="div",...y}){const b=sb(a),E=P.useRef(null),[T,A]=P.useState(null),[R,k]=P.useState([]),z=M6(),B=P.useRef({}),U=P.useRef(new Map),Y=P.useRef(0),X=P.useRef({autoSaveId:t,direction:r,dragState:T,id:b,keyboardResizeBy:u,onLayout:c,storage:h}),D=P.useRef({layout:R,panelDataArray:[],panelDataArrayChanged:!1});P.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),P.useImperativeHandle(s,()=>({getId:()=>X.current.id,getLayout:()=>{const{layout:Z}=D.current;return Z},setLayout:Z=>{const{onLayout:te}=X.current,{layout:le,panelDataArray:de}=D.current,me=pT({layout:Z,panelConstraints:de.map(be=>be.constraints)});fT(le,me)||(k(me),D.current.layout=me,te&&te(me),Pl(de,me,B.current))}}),[]),wa(()=>{X.current.autoSaveId=t,X.current.direction=r,X.current.dragState=T,X.current.id=b,X.current.onLayout=c,X.current.storage=h}),z6({committedValuesRef:X,eagerValuesRef:D,groupId:b,layout:R,panelDataArray:D.current.panelDataArray,setLayout:k,panelGroupElement:E.current}),P.useEffect(()=>{const{panelDataArray:Z}=D.current;if(t){if(R.length===0||R.length!==Z.length)return;let te=gT[t];te==null&&(te=F6(q6,G6),gT[t]=te);const le=[...Z],de=new Map(U.current);te(t,le,de,R,h)}},[t,R,h]),P.useEffect(()=>{});const S=P.useCallback(Z=>{const{onLayout:te}=X.current,{layout:le,panelDataArray:de}=D.current;if(Z.constraints.collapsible){const me=de.map(rt=>rt.constraints),{collapsedSize:be=0,panelSize:Ae,pivotIndices:Re}=ca(de,Z,le);if(He(Ae!=null,`Panel size not found for panel "${Z.id}"`),!hs(Ae,be)){U.current.set(Z.id,Ae);const Ye=zl(de,Z)===de.length-1?Ae-be:be-Ae,ke=qu({delta:Ye,initialLayout:le,panelConstraints:me,pivotIndices:Re,prevLayout:le,trigger:"imperative-api"});Of(le,ke)||(k(ke),D.current.layout=ke,te&&te(ke),Pl(de,ke,B.current))}}},[]),I=P.useCallback((Z,te)=>{const{onLayout:le}=X.current,{layout:de,panelDataArray:me}=D.current;if(Z.constraints.collapsible){const be=me.map(Le=>Le.constraints),{collapsedSize:Ae=0,panelSize:Re=0,minSize:rt=0,pivotIndices:Ye}=ca(me,Z,de),ke=te??rt;if(hs(Re,Ae)){const Le=U.current.get(Z.id),st=Le!=null&&Le>=ke?Le:ke,Be=zl(me,Z)===me.length-1?Re-st:st-Re,Ee=qu({delta:Be,initialLayout:de,panelConstraints:be,pivotIndices:Ye,prevLayout:de,trigger:"imperative-api"});Of(de,Ee)||(k(Ee),D.current.layout=Ee,le&&le(Ee),Pl(me,Ee,B.current))}}},[]),j=P.useCallback(Z=>{const{layout:te,panelDataArray:le}=D.current,{panelSize:de}=ca(le,Z,te);return He(de!=null,`Panel size not found for panel "${Z.id}"`),de},[]),F=P.useCallback((Z,te)=>{const{panelDataArray:le}=D.current,de=zl(le,Z);return H6({defaultSize:te,dragState:T,layout:R,panelData:le,panelIndex:de})},[T,R]),$=P.useCallback(Z=>{const{layout:te,panelDataArray:le}=D.current,{collapsedSize:de=0,collapsible:me,panelSize:be}=ca(le,Z,te);return He(be!=null,`Panel size not found for panel "${Z.id}"`),me===!0&&hs(be,de)},[]),O=P.useCallback(Z=>{const{layout:te,panelDataArray:le}=D.current,{collapsedSize:de=0,collapsible:me,panelSize:be}=ca(le,Z,te);return He(be!=null,`Panel size not found for panel "${Z.id}"`),!me||Ca(be,de)>0},[]),L=P.useCallback(Z=>{const{panelDataArray:te}=D.current;te.push(Z),te.sort((le,de)=>{const me=le.order,be=de.order;return me==null&&be==null?0:me==null?-1:be==null?1:me-be}),D.current.panelDataArrayChanged=!0,z()},[z]);wa(()=>{if(D.current.panelDataArrayChanged){D.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:te,storage:le}=X.current,{layout:de,panelDataArray:me}=D.current;let be=null;if(Z){const Re=$6(Z,me,le);Re&&(U.current=new Map(Object.entries(Re.expandToSizes)),be=Re.layout)}be==null&&(be=j6({panelDataArray:me}));const Ae=pT({layout:be,panelConstraints:me.map(Re=>Re.constraints)});fT(de,Ae)||(k(Ae),D.current.layout=Ae,te&&te(Ae),Pl(me,Ae,B.current))}}),wa(()=>{const Z=D.current;return()=>{Z.layout=[]}},[]);const q=P.useCallback(Z=>{let te=!1;const le=E.current;return le&&window.getComputedStyle(le,null).getPropertyValue("direction")==="rtl"&&(te=!0),function(me){me.preventDefault();const be=E.current;if(!be)return()=>null;const{direction:Ae,dragState:Re,id:rt,keyboardResizeBy:Ye,onLayout:ke}=X.current,{layout:Le,panelDataArray:st}=D.current,{initialLayout:Ht}=Re??{},Be=aR(rt,Z,be);let Ee=B6(me,Z,Ae,Re,Ye,be);const It=Ae==="horizontal";It&&te&&(Ee=-Ee);const Sn=st.map(Pn=>Pn.constraints),Zt=qu({delta:Ee,initialLayout:Ht??Le,panelConstraints:Sn,pivotIndices:Be,prevLayout:Le,trigger:QC(me)?"keyboard":"mouse-or-touch"}),er=!Of(Le,Zt);(ZC(me)||JC(me))&&Y.current!=Ee&&(Y.current=Ee,!er&&Ee!==0?It?Q0(Z,Ee<0?tR:nR):Q0(Z,Ee<0?rR:iR):Q0(Z,0)),er&&(k(Zt),D.current.layout=Zt,ke&&ke(Zt),Pl(st,Zt,B.current))}},[]),M=P.useCallback((Z,te)=>{const{onLayout:le}=X.current,{layout:de,panelDataArray:me}=D.current,be=me.map(Le=>Le.constraints),{panelSize:Ae,pivotIndices:Re}=ca(me,Z,de);He(Ae!=null,`Panel size not found for panel "${Z.id}"`);const Ye=zl(me,Z)===me.length-1?Ae-te:te-Ae,ke=qu({delta:Ye,initialLayout:de,panelConstraints:be,pivotIndices:Re,prevLayout:de,trigger:"imperative-api"});Of(de,ke)||(k(ke),D.current.layout=ke,le&&le(ke),Pl(me,ke,B.current))},[]),W=P.useCallback((Z,te)=>{const{layout:le,panelDataArray:de}=D.current,{collapsedSize:me=0,collapsible:be}=te,{collapsedSize:Ae=0,collapsible:Re,maxSize:rt=100,minSize:Ye=0}=Z.constraints,{panelSize:ke}=ca(de,Z,le);ke!=null&&(be&&Re&&hs(ke,me)?hs(me,Ae)||M(Z,Ae):ke<Ye?M(Z,Ye):ke>rt&&M(Z,rt))},[M]),G=P.useCallback((Z,te)=>{const{direction:le}=X.current,{layout:de}=D.current;if(!E.current)return;const me=ip(Z,E.current);He(me,`Drag handle element not found for id "${Z}"`);const be=cR(le,te);A({dragHandleId:Z,dragHandleRect:me.getBoundingClientRect(),initialCursorPosition:be,initialLayout:de})},[]),K=P.useCallback(()=>{A(null)},[]),N=P.useCallback(Z=>{const{panelDataArray:te}=D.current,le=zl(te,Z);le>=0&&(te.splice(le,1),delete B.current[Z.id],D.current.panelDataArrayChanged=!0,z())},[z]),J=P.useMemo(()=>({collapsePanel:S,direction:r,dragState:T,expandPanel:I,getPanelSize:j,getPanelStyle:F,groupId:b,isPanelCollapsed:$,isPanelExpanded:O,reevaluatePanelConstraints:W,registerPanel:L,registerResizeHandle:q,resizePanel:M,startDragging:G,stopDragging:K,unregisterPanel:N,panelGroupElement:E.current}),[S,T,r,I,j,F,b,$,O,W,L,q,M,G,K,N]),ne={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return P.createElement(tp.Provider,{value:J},P.createElement(p,{...y,children:e,className:n,id:a,ref:E,style:{...ne,...f},[Ot.group]:"",[Ot.groupDirection]:r,[Ot.groupId]:b}))}const mR=P.forwardRef((t,e)=>P.createElement(fR,{...t,forwardedRef:e}));fR.displayName="PanelGroup";mR.displayName="forwardRef(PanelGroup)";function zl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ca(t,e,n){const r=zl(t,e),a=r===t.length-1?[r-1,r]:[r,r+1],c=n[r];return{...e.constraints,panelSize:c,pivotIndices:a}}function Y6({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){P.useEffect(()=>{if(t||n==null||r==null)return;const s=ip(e,r);if(s==null)return;const a=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const u=s.getAttribute(Ot.groupId);He(u,`No group element found for id "${u}"`);const h=_d(u,r),f=oR(u,e,r);He(f!==null,`No resize element found for id "${e}"`);const p=c.shiftKey?f>0?f-1:h.length-1:f+1<h.length?f+1:0;h[p].focus();break}}};return s.addEventListener("keydown",a),()=>{s.removeEventListener("keydown",a)}},[r,t,e,n])}function pR({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:a,onClick:c,onDragging:u,onFocus:h,onPointerDown:f,onPointerUp:p,style:y={},tabIndex:b=0,tagName:E="div",...T}){var A,R;const k=P.useRef(null),z=P.useRef({onClick:c,onDragging:u,onPointerDown:f,onPointerUp:p});P.useEffect(()=>{z.current.onClick=c,z.current.onDragging=u,z.current.onPointerDown=f,z.current.onPointerUp=p});const B=P.useContext(tp);if(B===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:U,groupId:Y,registerResizeHandle:X,startDragging:D,stopDragging:S,panelGroupElement:I}=B,j=sb(s),[F,$]=P.useState("inactive"),[O,L]=P.useState(!1),[q,M]=P.useState(null),W=P.useRef({state:F});wa(()=>{W.current.state=F}),P.useEffect(()=>{if(n)M(null);else{const J=X(j);M(()=>J)}},[n,j,X]);const G=(A=r?.coarse)!==null&&A!==void 0?A:15,K=(R=r?.fine)!==null&&R!==void 0?R:5;P.useEffect(()=>{if(n||q==null)return;const J=k.current;He(J,"Element ref not attached");let ne=!1;return k6(j,J,U,{coarse:G,fine:K},(te,le,de)=>{if(!le){$("inactive");return}switch(te){case"down":{$("drag"),ne=!1,He(de,'Expected event to be defined for "down" action'),D(j,de);const{onDragging:me,onPointerDown:be}=z.current;me?.(!0),be?.();break}case"move":{const{state:me}=W.current;ne=!0,me!=="drag"&&$("hover"),He(de,'Expected event to be defined for "move" action'),q(de);break}case"up":{$("hover"),S();const{onClick:me,onDragging:be,onPointerUp:Ae}=z.current;be?.(!1),Ae?.(),ne||me?.();break}}})},[G,U,n,K,X,j,q,D,S]),Y6({disabled:n,handleId:j,resizeHandler:q,panelGroupElement:I});const N={touchAction:"none",userSelect:"none"};return P.createElement(E,{...T,children:t,className:e,id:s,onBlur:()=>{L(!1),a?.()},onFocus:()=>{L(!0),h?.()},ref:k,role:"separator",style:{...N,...y},tabIndex:b,[Ot.groupDirection]:U,[Ot.groupId]:Y,[Ot.resizeHandle]:"",[Ot.resizeHandleActive]:F==="drag"?"pointer":O?"keyboard":void 0,[Ot.resizeHandleEnabled]:!n,[Ot.resizeHandleId]:j,[Ot.resizeHandleState]:F})}pR.displayName="PanelResizeHandle";const gR=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(a=>a.trim()!=="").forEach(a=>{e.push({word:a.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:s})})}return e},yT=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},Ju=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,r=parseInt(n.slice(0,2),16),s=parseInt(n.slice(2,4),16),a=parseInt(n.slice(4,6),16);const c=h=>Math.max(0,Math.min(255,h)),u=1-e;return r=c(Math.round(r*u)),s=c(Math.round(s*u)),a=c(Math.round(a*u)),`#${[r,s,a].map(h=>h.toString(16).padStart(2,"0")).join("")}`},K6=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),a=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*a*2)),u=Math.min(255,Math.max(0,r+(Math.random()-.5)*a*2)),h=Math.min(255,Math.max(0,s+(Math.random()-.5)*a*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(u).toString(16).padStart(2,"0")}${Math.round(h).toString(16).padStart(2,"0")}`},X6=t=>{const r=(Math.random()-.5)*150*2;return{x:t.x+r,y:t.y+200}},W6=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Q6=(t,e)=>`edge_${t}_${e}`,Z6=(t,e,n,r,s,a,c)=>({id:W6(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:c}}),J6=(t,e,n,r)=>({id:Q6(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Aa.ArrowClosed,color:n}}),eL=()=>{};var vT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},tL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],c=t[n++],u=t[n++],h=((s&7)<<18|(a&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},vR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],c=s+1<t.length,u=c?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,p=a>>2,y=(a&3)<<4|u>>4;let b=(u&15)<<2|f>>6,E=f&63;h||(E=64,c||(b=64)),r.push(n[p],n[y],n[b],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||y==null)throw new nL;const b=a<<2|u>>4;if(r.push(b),f!==64){const E=u<<4&240|f>>2;if(r.push(E),y!==64){const T=f<<6&192|y;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rL=function(t){const e=yR(t);return vR.encodeByteArray(e,!0)},xm=function(t){return rL(t).replace(/\./g,"")},bR=function(t){try{return vR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=()=>iL().__FIREBASE_DEFAULTS__,oL=()=>{if(typeof process>"u"||typeof vT>"u")return;const t=vT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bR(t[1]);return e&&JSON.parse(e)},sp=()=>{try{return eL()||sL()||oL()||aL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_R=t=>{var e,n;return(n=(e=sp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ER=t=>{const e=_R(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wR=()=>{var t;return(t=sp())===null||t===void 0?void 0:t.config},xR=t=>{var e;return(e=sp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){return t.endsWith(".cloudworkstations.dev")}async function lb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xm(JSON.stringify(n)),xm(JSON.stringify(c)),""].join(".")}const ed={};function uL(){const t={prod:[],emulator:[]};for(const e of Object.keys(ed))ed[e]?t.emulator.push(e):t.prod.push(e);return t}function dL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bT=!1;function cb(t,e){if(typeof window>"u"||typeof document>"u"||!Pa(window.location.host)||ed[t]===e||ed[t]||bT)return;ed[t]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",a=uL().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function u(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function h(b,E){b.setAttribute("width","24"),b.setAttribute("id",E),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{bT=!0,c()},b}function p(b,E){b.setAttribute("id",E),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){const b=dL(r),E=n("text"),T=document.getElementById(E)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),k=n("preprendIcon"),z=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const B=b.element;u(B),p(R,A);const U=f();h(z,k),B.append(z,T,R,U),document.body.appendChild(B)}a?(T.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function fL(){var t;const e=(t=sp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yL(){const t=On();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vL(){return!fL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bL(){try{return typeof indexedDB=="object"}catch{return!1}}function _L(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="FirebaseError";class Bi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EL,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fd.prototype.create)}}class Fd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?wL(a,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Bi(s,u,r)}}function wL(t,e){return t.replace(xL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const xL=/\{\$([^}]+)}/g;function TL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ra(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],c=e[s];if(_T(a)&&_T(c)){if(!Ra(a,c))return!1}else if(a!==c)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _T(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Ku(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SL(t,e){const n=new AL(t,e);return n.subscribe.bind(n)}class AL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=J0),s.error===void 0&&(s.error=J0),s.complete===void 0&&(s.complete=J0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function J0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class bo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NL(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&c.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IL(t){return t===fa?void 0:t}function NL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const DL={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},ML=Qe.INFO,OL={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},PL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=OL[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ub{constructor(e){this.name=e,this._logLevel=ML,this._logHandler=PL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const VL=(t,e)=>e.some(n=>t instanceof n);let ET,wT;function LL(){return ET||(ET=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zL(){return wT||(wT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TR=new WeakMap,qy=new WeakMap,SR=new WeakMap,ey=new WeakMap,db=new WeakMap;function UL(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(fo(t.result)),s()},c=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&TR.set(n,t)}).catch(()=>{}),db.set(e,t),e}function BL(t){if(qy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),s()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});qy.set(t,e)}let Gy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jL(t){Gy=t(Gy)}function HL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ty(this),e,...n);return SR.set(r,e.sort?e.sort():[e]),fo(r)}:zL().includes(t)?function(...e){return t.apply(ty(this),e),fo(TR.get(this))}:function(...e){return fo(t.apply(ty(this),e))}}function FL(t){return typeof t=="function"?HL(t):(t instanceof IDBTransaction&&BL(t),VL(t,LL())?new Proxy(t,Gy):t)}function fo(t){if(t instanceof IDBRequest)return UL(t);if(ey.has(t))return ey.get(t);const e=FL(t);return e!==t&&(ey.set(t,e),db.set(e,t)),e}const ty=t=>db.get(t);function $L(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const c=indexedDB.open(t,e),u=fo(c);return r&&c.addEventListener("upgradeneeded",h=>{r(fo(c.result),h.oldVersion,h.newVersion,fo(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const qL=["get","getKey","getAll","getAllKeys","count"],GL=["put","add","delete","clear"],ny=new Map;function xT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ny.get(e))return ny.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=GL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qL.includes(n)))return;const a=async function(c,...u){const h=this.transaction(c,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&h.done]))[0]};return ny.set(e,a),a}jL(t=>({...t,get:(e,n,r)=>xT(e,n)||t.get(e,n,r),has:(e,n)=>!!xT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KL(t){const e=t.getComponent();return e?.type==="VERSION"}const Yy="@firebase/app",TT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new ub("@firebase/app"),XL="@firebase/app-compat",WL="@firebase/analytics-compat",QL="@firebase/analytics",ZL="@firebase/app-check-compat",JL="@firebase/app-check",e9="@firebase/auth",t9="@firebase/auth-compat",n9="@firebase/database",r9="@firebase/data-connect",i9="@firebase/database-compat",s9="@firebase/functions",o9="@firebase/functions-compat",a9="@firebase/installations",l9="@firebase/installations-compat",c9="@firebase/messaging",u9="@firebase/messaging-compat",d9="@firebase/performance",h9="@firebase/performance-compat",f9="@firebase/remote-config",m9="@firebase/remote-config-compat",p9="@firebase/storage",g9="@firebase/storage-compat",y9="@firebase/firestore",v9="@firebase/ai",b9="@firebase/firestore-compat",_9="firebase",E9="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="[DEFAULT]",w9={[Yy]:"fire-core",[XL]:"fire-core-compat",[QL]:"fire-analytics",[WL]:"fire-analytics-compat",[JL]:"fire-app-check",[ZL]:"fire-app-check-compat",[e9]:"fire-auth",[t9]:"fire-auth-compat",[n9]:"fire-rtdb",[r9]:"fire-data-connect",[i9]:"fire-rtdb-compat",[s9]:"fire-fn",[o9]:"fire-fn-compat",[a9]:"fire-iid",[l9]:"fire-iid-compat",[c9]:"fire-fcm",[u9]:"fire-fcm-compat",[d9]:"fire-perf",[h9]:"fire-perf-compat",[f9]:"fire-rc",[m9]:"fire-rc-compat",[p9]:"fire-gcs",[g9]:"fire-gcs-compat",[y9]:"fire-fst",[b9]:"fire-fst-compat",[v9]:"fire-vertex","fire-js":"fire-js",[_9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=new Map,x9=new Map,Xy=new Map;function ST(t,e){try{t.container.addComponent(e)}catch(n){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ia(t){const e=t.name;if(Xy.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;Xy.set(e,t);for(const n of Tm.values())ST(n,t);for(const n of x9.values())ST(n,t);return!0}function op(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mo=new Fd("app","Firebase",T9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=E9;function AR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ky,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw mo.create("bad-app-name",{appName:String(s)});if(n||(n=wR()),!n)throw mo.create("no-options");const a=Tm.get(s);if(a){if(Ra(n,a.options)&&Ra(r,a.config))return a;throw mo.create("duplicate-app",{appName:s})}const c=new kL(s);for(const h of Xy.values())c.addComponent(h);const u=new S9(n,r,c);return Tm.set(s,u),u}function hb(t=Ky){const e=Tm.get(t);if(!e&&t===Ky&&wR())return AR();if(!e)throw mo.create("no-app",{appName:t});return e}function Ni(t,e,n){var r;let s=(r=w9[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(u.join(" "));return}Ia(new bo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9="firebase-heartbeat-database",C9=1,Ed="firebase-heartbeat-store";let ry=null;function CR(){return ry||(ry=$L(A9,C9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ed)}catch(n){console.warn(n)}}}}).catch(t=>{throw mo.create("idb-open",{originalErrorMessage:t.message})})),ry}async function R9(t){try{const n=(await CR()).transaction(Ed),r=await n.objectStore(Ed).get(RR(t));return await n.done,r}catch(e){if(e instanceof Bi)bs.warn(e.message);else{const n=mo.create("idb-get",{originalErrorMessage:e?.message});bs.warn(n.message)}}}async function AT(t,e){try{const r=(await CR()).transaction(Ed,"readwrite");await r.objectStore(Ed).put(e,RR(t)),await r.done}catch(n){if(n instanceof Bi)bs.warn(n.message);else{const r=mo.create("idb-set",{originalErrorMessage:n?.message});bs.warn(r.message)}}}function RR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9=1024,N9=30;class k9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=CT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>N9){const c=O9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=CT(),{heartbeatsToSend:r,unsentEntries:s}=D9(this._heartbeatsCache.heartbeats),a=xm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return bs.warn(n),""}}}function CT(){return new Date().toISOString().substring(0,10)}function D9(t,e=I9){const n=[];let r=t.slice();for(const s of t){const a=n.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),RT(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),RT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bL()?_L().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R9(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return AT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return AT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function RT(t){return xm(JSON.stringify({version:2,heartbeats:t})).length}function O9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(t){Ia(new bo("platform-logger",e=>new YL(e),"PRIVATE")),Ia(new bo("heartbeat",e=>new k9(e),"PRIVATE")),Ni(Yy,TT,t),Ni(Yy,TT,"esm2017"),Ni("fire-js","")}P9("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9="type.googleapis.com/google.protobuf.Int64Value",L9="type.googleapis.com/google.protobuf.UInt64Value";function IR(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Sm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Sm(e));if(typeof t=="function"||typeof t=="object")return IR(t,e=>Sm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function uc(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case V9:case L9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>uc(e)):typeof t=="function"||typeof t=="object"?IR(t,e=>uc(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zn extends Bi{constructor(e,n,r){super(`${fb}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Zn.prototype)}}function z9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Am(t,e){let n=z9(t),r=n,s;try{const a=e&&e.error;if(a){const c=a.status;if(typeof c=="string"){if(!IT[c])return new Zn("internal","internal");n=IT[c],r=c}const u=a.message;typeof u=="string"&&(r=u),s=a.details,s!==void 0&&(s=uc(s))}}catch{}return n==="ok"?null:new Zn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,mr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="us-central1",B9=/^data: (.*?)(?:\n|$)/;function j9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Zn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class H9{constructor(e,n,r,s,a=Wy,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new U9(e,n,r,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(a);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Wy}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function F9(t,e,n){const r=Pa(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(lb(t.emulatorOrigin),cb("Functions",!0))}function $9(t,e,n){const r=s=>G9(t,e,s,{});return r.stream=(s,a)=>K9(t,e,s,a),r}async function q9(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function NR(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function G9(t,e,n,r){const s=t._url(e);return Y9(t,s,n,r)}async function Y9(t,e,n,r){n=Sm(n);const s={data:n},a=await NR(t,r),c=r.timeout||7e4,u=j9(c),h=await Promise.race([q9(e,s,a,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!h)throw new Zn("cancelled","Firebase Functions instance was deleted.");const f=Am(h.status,h.json);if(f)throw f;if(!h.json)throw new Zn("internal","Response is not valid JSON object.");let p=h.json.data;if(typeof p>"u"&&(p=h.json.result),typeof p>"u")throw new Zn("internal","Response is missing data field.");return{data:uc(p)}}function K9(t,e,n,r){const s=t._url(e);return X9(t,s,n,r||{})}async function X9(t,e,n,r){var s;n=Sm(n);const a={data:n},c=await NR(t,r);c["Content-Type"]="application/json",c.Accept="text/event-stream";let u;try{u=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:c,signal:r?.signal})}catch(E){if(E instanceof Error&&E.name==="AbortError"){const A=new Zn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}const T=Am(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let h,f;const p=new Promise((E,T)=>{h=E,f=T});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const E=new Zn("cancelled","Request was cancelled.");f(E)});const y=u.body.getReader(),b=W9(y,h,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const E=b.getReader();return{async next(){const{value:T,done:A}=await E.read();return{value:T,done:A}},async return(){return await E.cancel(),{done:!0,value:void 0}}}}},data:p}}function W9(t,e,n,r){const s=(c,u)=>{const h=c.match(B9);if(!h)return;const f=h[1];try{const p=JSON.parse(f);if("result"in p){e(uc(p.result));return}if("message"in p){u.enqueue(uc(p.message));return}if("error"in p){const y=Am(0,p);u.error(y),n(y);return}}catch(p){if(p instanceof Zn){u.error(p),n(p);return}}},a=new TextDecoder;return new ReadableStream({start(c){let u="";return h();async function h(){if(r?.aborted){const f=new Zn("cancelled","Request was cancelled");return c.error(f),n(f),Promise.resolve()}try{const{value:f,done:p}=await t.read();if(p){u.trim()&&s(u.trim(),c),c.close();return}if(r?.aborted){const b=new Zn("cancelled","Request was cancelled");c.error(b),n(b),await t.cancel();return}u+=a.decode(f,{stream:!0});const y=u.split(`
`);u=y.pop()||"";for(const b of y)b.trim()&&s(b.trim(),c);return h()}catch(f){const p=f instanceof Zn?f:Am(0,null);c.error(p),n(p)}}},cancel(){return t.cancel()}})}const NT="@firebase/functions",kT="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="auth-internal",Z9="app-check-internal",J9="messaging-internal";function ez(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(Q9),c=n.getProvider(J9),u=n.getProvider(Z9);return new H9(s,a,c,u,r)};Ia(new bo(fb,e,"PUBLIC").setMultipleInstances(!0)),Ni(NT,kT,t),Ni(NT,kT,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(t=hb(),e=Wy){const r=op(Vt(t),fb).getImmediate({identifier:e}),s=ER("functions");return s&&kR(r,...s),r}function kR(t,e,n){F9(Vt(t),e,n)}function DR(t,e,n){return $9(Vt(t),e)}ez();var nz="firebase",rz="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni(nz,rz,"app");var DT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var po,MR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function I(){}I.prototype=S.prototype,D.D=S.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(j,F,$){for(var O=Array(arguments.length-2),L=2;L<arguments.length;L++)O[L-2]=arguments[L];return S.prototype[F].apply(j,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,S,I){I||(I=0);var j=Array(16);if(typeof S=="string")for(var F=0;16>F;++F)j[F]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(F=0;16>F;++F)j[F]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=D.g[0],I=D.g[1],F=D.g[2];var $=D.g[3],O=S+($^I&(F^$))+j[0]+3614090360&4294967295;S=I+(O<<7&4294967295|O>>>25),O=$+(F^S&(I^F))+j[1]+3905402710&4294967295,$=S+(O<<12&4294967295|O>>>20),O=F+(I^$&(S^I))+j[2]+606105819&4294967295,F=$+(O<<17&4294967295|O>>>15),O=I+(S^F&($^S))+j[3]+3250441966&4294967295,I=F+(O<<22&4294967295|O>>>10),O=S+($^I&(F^$))+j[4]+4118548399&4294967295,S=I+(O<<7&4294967295|O>>>25),O=$+(F^S&(I^F))+j[5]+1200080426&4294967295,$=S+(O<<12&4294967295|O>>>20),O=F+(I^$&(S^I))+j[6]+2821735955&4294967295,F=$+(O<<17&4294967295|O>>>15),O=I+(S^F&($^S))+j[7]+4249261313&4294967295,I=F+(O<<22&4294967295|O>>>10),O=S+($^I&(F^$))+j[8]+1770035416&4294967295,S=I+(O<<7&4294967295|O>>>25),O=$+(F^S&(I^F))+j[9]+2336552879&4294967295,$=S+(O<<12&4294967295|O>>>20),O=F+(I^$&(S^I))+j[10]+4294925233&4294967295,F=$+(O<<17&4294967295|O>>>15),O=I+(S^F&($^S))+j[11]+2304563134&4294967295,I=F+(O<<22&4294967295|O>>>10),O=S+($^I&(F^$))+j[12]+1804603682&4294967295,S=I+(O<<7&4294967295|O>>>25),O=$+(F^S&(I^F))+j[13]+4254626195&4294967295,$=S+(O<<12&4294967295|O>>>20),O=F+(I^$&(S^I))+j[14]+2792965006&4294967295,F=$+(O<<17&4294967295|O>>>15),O=I+(S^F&($^S))+j[15]+1236535329&4294967295,I=F+(O<<22&4294967295|O>>>10),O=S+(F^$&(I^F))+j[1]+4129170786&4294967295,S=I+(O<<5&4294967295|O>>>27),O=$+(I^F&(S^I))+j[6]+3225465664&4294967295,$=S+(O<<9&4294967295|O>>>23),O=F+(S^I&($^S))+j[11]+643717713&4294967295,F=$+(O<<14&4294967295|O>>>18),O=I+($^S&(F^$))+j[0]+3921069994&4294967295,I=F+(O<<20&4294967295|O>>>12),O=S+(F^$&(I^F))+j[5]+3593408605&4294967295,S=I+(O<<5&4294967295|O>>>27),O=$+(I^F&(S^I))+j[10]+38016083&4294967295,$=S+(O<<9&4294967295|O>>>23),O=F+(S^I&($^S))+j[15]+3634488961&4294967295,F=$+(O<<14&4294967295|O>>>18),O=I+($^S&(F^$))+j[4]+3889429448&4294967295,I=F+(O<<20&4294967295|O>>>12),O=S+(F^$&(I^F))+j[9]+568446438&4294967295,S=I+(O<<5&4294967295|O>>>27),O=$+(I^F&(S^I))+j[14]+3275163606&4294967295,$=S+(O<<9&4294967295|O>>>23),O=F+(S^I&($^S))+j[3]+4107603335&4294967295,F=$+(O<<14&4294967295|O>>>18),O=I+($^S&(F^$))+j[8]+1163531501&4294967295,I=F+(O<<20&4294967295|O>>>12),O=S+(F^$&(I^F))+j[13]+2850285829&4294967295,S=I+(O<<5&4294967295|O>>>27),O=$+(I^F&(S^I))+j[2]+4243563512&4294967295,$=S+(O<<9&4294967295|O>>>23),O=F+(S^I&($^S))+j[7]+1735328473&4294967295,F=$+(O<<14&4294967295|O>>>18),O=I+($^S&(F^$))+j[12]+2368359562&4294967295,I=F+(O<<20&4294967295|O>>>12),O=S+(I^F^$)+j[5]+4294588738&4294967295,S=I+(O<<4&4294967295|O>>>28),O=$+(S^I^F)+j[8]+2272392833&4294967295,$=S+(O<<11&4294967295|O>>>21),O=F+($^S^I)+j[11]+1839030562&4294967295,F=$+(O<<16&4294967295|O>>>16),O=I+(F^$^S)+j[14]+4259657740&4294967295,I=F+(O<<23&4294967295|O>>>9),O=S+(I^F^$)+j[1]+2763975236&4294967295,S=I+(O<<4&4294967295|O>>>28),O=$+(S^I^F)+j[4]+1272893353&4294967295,$=S+(O<<11&4294967295|O>>>21),O=F+($^S^I)+j[7]+4139469664&4294967295,F=$+(O<<16&4294967295|O>>>16),O=I+(F^$^S)+j[10]+3200236656&4294967295,I=F+(O<<23&4294967295|O>>>9),O=S+(I^F^$)+j[13]+681279174&4294967295,S=I+(O<<4&4294967295|O>>>28),O=$+(S^I^F)+j[0]+3936430074&4294967295,$=S+(O<<11&4294967295|O>>>21),O=F+($^S^I)+j[3]+3572445317&4294967295,F=$+(O<<16&4294967295|O>>>16),O=I+(F^$^S)+j[6]+76029189&4294967295,I=F+(O<<23&4294967295|O>>>9),O=S+(I^F^$)+j[9]+3654602809&4294967295,S=I+(O<<4&4294967295|O>>>28),O=$+(S^I^F)+j[12]+3873151461&4294967295,$=S+(O<<11&4294967295|O>>>21),O=F+($^S^I)+j[15]+530742520&4294967295,F=$+(O<<16&4294967295|O>>>16),O=I+(F^$^S)+j[2]+3299628645&4294967295,I=F+(O<<23&4294967295|O>>>9),O=S+(F^(I|~$))+j[0]+4096336452&4294967295,S=I+(O<<6&4294967295|O>>>26),O=$+(I^(S|~F))+j[7]+1126891415&4294967295,$=S+(O<<10&4294967295|O>>>22),O=F+(S^($|~I))+j[14]+2878612391&4294967295,F=$+(O<<15&4294967295|O>>>17),O=I+($^(F|~S))+j[5]+4237533241&4294967295,I=F+(O<<21&4294967295|O>>>11),O=S+(F^(I|~$))+j[12]+1700485571&4294967295,S=I+(O<<6&4294967295|O>>>26),O=$+(I^(S|~F))+j[3]+2399980690&4294967295,$=S+(O<<10&4294967295|O>>>22),O=F+(S^($|~I))+j[10]+4293915773&4294967295,F=$+(O<<15&4294967295|O>>>17),O=I+($^(F|~S))+j[1]+2240044497&4294967295,I=F+(O<<21&4294967295|O>>>11),O=S+(F^(I|~$))+j[8]+1873313359&4294967295,S=I+(O<<6&4294967295|O>>>26),O=$+(I^(S|~F))+j[15]+4264355552&4294967295,$=S+(O<<10&4294967295|O>>>22),O=F+(S^($|~I))+j[6]+2734768916&4294967295,F=$+(O<<15&4294967295|O>>>17),O=I+($^(F|~S))+j[13]+1309151649&4294967295,I=F+(O<<21&4294967295|O>>>11),O=S+(F^(I|~$))+j[4]+4149444226&4294967295,S=I+(O<<6&4294967295|O>>>26),O=$+(I^(S|~F))+j[11]+3174756917&4294967295,$=S+(O<<10&4294967295|O>>>22),O=F+(S^($|~I))+j[2]+718787259&4294967295,F=$+(O<<15&4294967295|O>>>17),O=I+($^(F|~S))+j[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(F+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+F&4294967295,D.g[3]=D.g[3]+$&4294967295}r.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var I=S-this.blockSize,j=this.B,F=this.h,$=0;$<S;){if(F==0)for(;$<=I;)s(this,D,$),$+=this.blockSize;if(typeof D=="string"){for(;$<S;)if(j[F++]=D.charCodeAt($++),F==this.blockSize){s(this,j),F=0;break}}else for(;$<S;)if(j[F++]=D[$++],F==this.blockSize){s(this,j),F=0;break}}this.h=F,this.o+=S},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var I=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=I&255,I/=256;for(this.u(D),D=Array(16),S=I=0;4>S;++S)for(var j=0;32>j;j+=8)D[I++]=this.g[S]>>>j&255;return D};function a(D,S){var I=u;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=S(D)}function c(D,S){this.h=S;for(var I=[],j=!0,F=D.length-1;0<=F;F--){var $=D[F]|0;j&&$==S||(I[F]=$,j=!1)}this.g=I}var u={};function h(D){return-128<=D&&128>D?a(D,function(S){return new c([S|0],0>S?-1:0)}):new c([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return R(f(-D));for(var S=[],I=1,j=0;D>=I;j++)S[j]=D/I|0,I*=4294967296;return new c(S,0)}function p(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return R(p(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=f(Math.pow(S,8)),j=y,F=0;F<D.length;F+=8){var $=Math.min(8,D.length-F),O=parseInt(D.substring(F,F+$),S);8>$?($=f(Math.pow(S,$)),j=j.j($).add(f(O))):(j=j.j(I),j=j.add(f(O)))}return j}var y=h(0),b=h(1),E=h(16777216);t=c.prototype,t.m=function(){if(A(this))return-R(this).m();for(var D=0,S=1,I=0;I<this.g.length;I++){var j=this.i(I);D+=(0<=j?j:4294967296+j)*S,S*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(T(this))return"0";if(A(this))return"-"+R(this).toString(D);for(var S=f(Math.pow(D,6)),I=this,j="";;){var F=U(I,S).g;I=k(I,F.j(S));var $=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=F,T(I))return $+j;for(;6>$.length;)$="0"+$;j=$+j}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function T(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function A(D){return D.h==-1}t.l=function(D){return D=k(this,D),A(D)?-1:T(D)?0:1};function R(D){for(var S=D.g.length,I=[],j=0;j<S;j++)I[j]=~D.g[j];return new c(I,~D.h).add(b)}t.abs=function(){return A(this)?R(this):this},t.add=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0,F=0;F<=S;F++){var $=j+(this.i(F)&65535)+(D.i(F)&65535),O=($>>>16)+(this.i(F)>>>16)+(D.i(F)>>>16);j=O>>>16,$&=65535,O&=65535,I[F]=O<<16|$}return new c(I,I[I.length-1]&-2147483648?-1:0)};function k(D,S){return D.add(R(S))}t.j=function(D){if(T(this)||T(D))return y;if(A(this))return A(D)?R(this).j(R(D)):R(R(this).j(D));if(A(D))return R(this.j(R(D)));if(0>this.l(E)&&0>D.l(E))return f(this.m()*D.m());for(var S=this.g.length+D.g.length,I=[],j=0;j<2*S;j++)I[j]=0;for(j=0;j<this.g.length;j++)for(var F=0;F<D.g.length;F++){var $=this.i(j)>>>16,O=this.i(j)&65535,L=D.i(F)>>>16,q=D.i(F)&65535;I[2*j+2*F]+=O*q,z(I,2*j+2*F),I[2*j+2*F+1]+=$*q,z(I,2*j+2*F+1),I[2*j+2*F+1]+=O*L,z(I,2*j+2*F+1),I[2*j+2*F+2]+=$*L,z(I,2*j+2*F+2)}for(j=0;j<S;j++)I[j]=I[2*j+1]<<16|I[2*j];for(j=S;j<2*S;j++)I[j]=0;return new c(I,0)};function z(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function B(D,S){this.g=D,this.h=S}function U(D,S){if(T(S))throw Error("division by zero");if(T(D))return new B(y,y);if(A(D))return S=U(R(D),S),new B(R(S.g),R(S.h));if(A(S))return S=U(D,R(S)),new B(R(S.g),S.h);if(30<D.g.length){if(A(D)||A(S))throw Error("slowDivide_ only works with positive integers.");for(var I=b,j=S;0>=j.l(D);)I=Y(I),j=Y(j);var F=X(I,1),$=X(j,1);for(j=X(j,2),I=X(I,2);!T(j);){var O=$.add(j);0>=O.l(D)&&(F=F.add(I),$=O),j=X(j,1),I=X(I,1)}return S=k(D,F.j(S)),new B(F,S)}for(F=y;0<=D.l(S);){for(I=Math.max(1,Math.floor(D.m()/S.m())),j=Math.ceil(Math.log(I)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),$=f(I),O=$.j(S);A(O)||0<O.l(D);)I-=j,$=f(I),O=$.j(S);T($)&&($=b),F=F.add($),D=k(D,O)}return new B(F,D)}t.A=function(D){return U(this,D).h},t.and=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0;j<S;j++)I[j]=this.i(j)&D.i(j);return new c(I,this.h&D.h)},t.or=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0;j<S;j++)I[j]=this.i(j)|D.i(j);return new c(I,this.h|D.h)},t.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],j=0;j<S;j++)I[j]=this.i(j)^D.i(j);return new c(I,this.h^D.h)};function Y(D){for(var S=D.g.length+1,I=[],j=0;j<S;j++)I[j]=D.i(j)<<1|D.i(j-1)>>>31;return new c(I,D.h)}function X(D,S){var I=S>>5;S%=32;for(var j=D.g.length-I,F=[],$=0;$<j;$++)F[$]=0<S?D.i($+I)>>>S|D.i($+I+1)<<32-S:D.i($+I);return new c(F,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=p,po=c}).apply(typeof DT<"u"?DT:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OR,Xu,PR,Zf,Qy,VR,LR,zR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,_,w){return m==Array.prototype||m==Object.prototype||(m[_]=w.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var _=0;_<m.length;++_){var w=m[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(m,_){if(_)e:{var w=r;m=m.split(".");for(var H=0;H<m.length-1;H++){var ie=m[H];if(!(ie in w))break e;w=w[ie]}m=m[m.length-1],H=w[m],_=_(H),_!=H&&_!=null&&e(w,m,{configurable:!0,writable:!0,value:_})}}function a(m,_){m instanceof String&&(m+="");var w=0,H=!1,ie={next:function(){if(!H&&w<m.length){var ue=w++;return{value:_(ue,m[ue]),done:!1}}return H=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}s("Array.prototype.values",function(m){return m||function(){return a(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function h(m){var _=typeof m;return _=_!="object"?_:m?Array.isArray(m)?"array":_:"null",_=="array"||_=="object"&&typeof m.length=="number"}function f(m){var _=typeof m;return _=="object"&&m!=null||_=="function"}function p(m,_,w){return m.call.apply(m.bind,arguments)}function y(m,_,w){if(!m)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,H),m.apply(_,ie)}}return function(){return m.apply(_,arguments)}}function b(m,_,w){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,b.apply(null,arguments)}function E(m,_){var w=Array.prototype.slice.call(arguments,1);return function(){var H=w.slice();return H.push.apply(H,arguments),m.apply(this,H)}}function T(m,_){function w(){}w.prototype=_.prototype,m.aa=_.prototype,m.prototype=new w,m.prototype.constructor=m,m.Qb=function(H,ie,ue){for(var _e=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)_e[Je-2]=arguments[Je];return _.prototype[ie].apply(H,_e)}}function A(m){const _=m.length;if(0<_){const w=Array(_);for(let H=0;H<_;H++)w[H]=m[H];return w}return[]}function R(m,_){for(let w=1;w<arguments.length;w++){const H=arguments[w];if(h(H)){const ie=m.length||0,ue=H.length||0;m.length=ie+ue;for(let _e=0;_e<ue;_e++)m[ie+_e]=H[_e]}else m.push(H)}}class k{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function z(m){return/^[\s\xa0]*$/.test(m)}function B(){var m=u.navigator;return m&&(m=m.userAgent)?m:""}function U(m){return U[" "](m),m}U[" "]=function(){};var Y=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function X(m,_,w){for(const H in m)_.call(w,m[H],H,m)}function D(m,_){for(const w in m)_.call(void 0,m[w],w,m)}function S(m){const _={};for(const w in m)_[w]=m[w];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(m,_){let w,H;for(let ie=1;ie<arguments.length;ie++){H=arguments[ie];for(w in H)m[w]=H[w];for(let ue=0;ue<I.length;ue++)w=I[ue],Object.prototype.hasOwnProperty.call(H,w)&&(m[w]=H[w])}}function F(m){var _=1;m=m.split(":");const w=[];for(;0<_&&m.length;)w.push(m.shift()),_--;return m.length&&w.push(m.join(":")),w}function $(m){u.setTimeout(()=>{throw m},0)}function O(){var m=K;let _=null;return m.g&&(_=m.g,m.g=m.g.next,m.g||(m.h=null),_.next=null),_}class L{constructor(){this.h=this.g=null}add(_,w){const H=q.get();H.set(_,w),this.h?this.h.next=H:this.g=H,this.h=H}}var q=new k(()=>new M,m=>m.reset());class M{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let W,G=!1,K=new L,N=()=>{const m=u.Promise.resolve(void 0);W=()=>{m.then(J)}};var J=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(w){$(w)}var _=q;_.j(m),100>_.h&&(_.h++,m.next=_.g,_.g=m)}G=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(m,_){this.type=m,this.g=this.target=_,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,_=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,_),u.removeEventListener("test",w,_)}catch{}return m}();function le(m,_){if(Z.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var w=this.type=m.type,H=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=_,_=m.relatedTarget){if(Y){e:{try{U(_.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(_=null)}}else w=="mouseover"?_=m.fromElement:w=="mouseout"&&(_=m.toElement);this.relatedTarget=_,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:de[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&le.aa.h.call(this)}}T(le,Z);var de={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),be=0;function Ae(m,_,w,H,ie){this.listener=m,this.proxy=null,this.src=_,this.type=w,this.capture=!!H,this.ha=ie,this.key=++be,this.da=this.fa=!1}function Re(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function rt(m){this.src=m,this.g={},this.h=0}rt.prototype.add=function(m,_,w,H,ie){var ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);var _e=ke(m,_,H,ie);return-1<_e?(_=m[_e],w||(_.fa=!1)):(_=new Ae(_,this.src,ue,!!H,ie),_.fa=w,m.push(_)),_};function Ye(m,_){var w=_.type;if(w in m.g){var H=m.g[w],ie=Array.prototype.indexOf.call(H,_,void 0),ue;(ue=0<=ie)&&Array.prototype.splice.call(H,ie,1),ue&&(Re(_),m.g[w].length==0&&(delete m.g[w],m.h--))}}function ke(m,_,w,H){for(var ie=0;ie<m.length;++ie){var ue=m[ie];if(!ue.da&&ue.listener==_&&ue.capture==!!w&&ue.ha==H)return ie}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),st={};function Ht(m,_,w,H,ie){if(Array.isArray(_)){for(var ue=0;ue<_.length;ue++)Ht(m,_[ue],w,H,ie);return null}return w=Hr(w),m&&m[me]?m.K(_,w,f(H)?!!H.capture:!1,ie):Be(m,_,w,!1,H,ie)}function Be(m,_,w,H,ie,ue){if(!_)throw Error("Invalid event type");var _e=f(ie)?!!ie.capture:!!ie,Je=Pn(m);if(Je||(m[Le]=Je=new rt(m)),w=Je.add(_,w,H,_e,ue),w.proxy)return w;if(H=Ee(),w.proxy=H,H.src=m,H.listener=w,m.addEventListener)te||(ie=_e),ie===void 0&&(ie=!1),m.addEventListener(_.toString(),H,ie);else if(m.attachEvent)m.attachEvent(Zt(_.toString()),H);else if(m.addListener&&m.removeListener)m.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ee(){function m(w){return _.call(m.src,m.listener,w)}const _=er;return m}function It(m,_,w,H,ie){if(Array.isArray(_))for(var ue=0;ue<_.length;ue++)It(m,_[ue],w,H,ie);else H=f(H)?!!H.capture:!!H,w=Hr(w),m&&m[me]?(m=m.i,_=String(_).toString(),_ in m.g&&(ue=m.g[_],w=ke(ue,w,H,ie),-1<w&&(Re(ue[w]),Array.prototype.splice.call(ue,w,1),ue.length==0&&(delete m.g[_],m.h--)))):m&&(m=Pn(m))&&(_=m.g[_.toString()],m=-1,_&&(m=ke(_,w,H,ie)),(w=-1<m?_[m]:null)&&Sn(w))}function Sn(m){if(typeof m!="number"&&m&&!m.da){var _=m.src;if(_&&_[me])Ye(_.i,m);else{var w=m.type,H=m.proxy;_.removeEventListener?_.removeEventListener(w,H,m.capture):_.detachEvent?_.detachEvent(Zt(w),H):_.addListener&&_.removeListener&&_.removeListener(H),(w=Pn(_))?(Ye(w,m),w.h==0&&(w.src=null,_[Le]=null)):Re(m)}}}function Zt(m){return m in st?st[m]:st[m]="on"+m}function er(m,_){if(m.da)m=!0;else{_=new le(_,this);var w=m.listener,H=m.ha||m.src;m.fa&&Sn(m),m=w.call(H,_)}return m}function Pn(m){return m=m[Le],m instanceof rt?m:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(m){return typeof m=="function"?m:(m[Vn]||(m[Vn]=function(_){return m.handleEvent(_)}),m[Vn])}function at(){ne.call(this),this.i=new rt(this),this.M=this,this.F=null}T(at,ne),at.prototype[me]=!0,at.prototype.removeEventListener=function(m,_,w,H){It(this,m,_,w,H)};function Ke(m,_){var w,H=m.F;if(H)for(w=[];H;H=H.F)w.push(H);if(m=m.M,H=_.type||_,typeof _=="string")_=new Z(_,m);else if(_ instanceof Z)_.target=_.target||m;else{var ie=_;_=new Z(H,m),j(_,ie)}if(ie=!0,w)for(var ue=w.length-1;0<=ue;ue--){var _e=_.g=w[ue];ie=Ft(_e,H,!0,_)&&ie}if(_e=_.g=m,ie=Ft(_e,H,!0,_)&&ie,ie=Ft(_e,H,!1,_)&&ie,w)for(ue=0;ue<w.length;ue++)_e=_.g=w[ue],ie=Ft(_e,H,!1,_)&&ie}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var m=this.i,_;for(_ in m.g){for(var w=m.g[_],H=0;H<w.length;H++)Re(w[H]);delete m.g[_],m.h--}}this.F=null},at.prototype.K=function(m,_,w,H){return this.i.add(String(m),_,!1,w,H)},at.prototype.L=function(m,_,w,H){return this.i.add(String(m),_,!0,w,H)};function Ft(m,_,w,H){if(_=m.i.g[String(_)],!_)return!0;_=_.concat();for(var ie=!0,ue=0;ue<_.length;++ue){var _e=_[ue];if(_e&&!_e.da&&_e.capture==w){var Je=_e.listener,en=_e.ha||_e.src;_e.fa&&Ye(m.i,_e),ie=Je.call(en,H)!==!1&&ie}}return ie&&!H.defaultPrevented}function xt(m,_,w){if(typeof m=="function")w&&(m=b(m,w));else if(m&&typeof m.handleEvent=="function")m=b(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(m,_||0)}function oi(m){m.g=xt(()=>{m.g=null,m.i&&(m.i=!1,oi(m))},m.l);const _=m.h;m.h=null,m.m.apply(null,_)}class $t extends ne{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:oi(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(m){ne.call(this),this.h=m,this.g={}}T(on,ne);var Ln=[];function zn(m){X(m.g,function(_,w){this.g.hasOwnProperty(w)&&Sn(_)},m),m.g={}}on.prototype.N=function(){on.aa.N.call(this),zn(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=u.JSON.stringify,pn=u.JSON.parse,Un=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ji(){}ji.prototype.h=null;function Hi(m){return m.h||(m.h=m.i())}function Fr(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _r(){Z.call(this,"d")}T(_r,Z);function nr(){Z.call(this,"c")}T(nr,Z);var Er={},Mo=null;function ai(){return Mo=Mo||new at}Er.La="serverreachability";function Ss(m){Z.call(this,Er.La,m)}T(Ss,Z);function li(m){const _=ai();Ke(_,new Ss(_))}Er.STAT_EVENT="statevent";function Ba(m,_){Z.call(this,Er.STAT_EVENT,m),this.stat=_}T(Ba,Z);function yt(m){const _=ai();Ke(_,new Ba(_,m))}Er.Ma="timingevent";function Lt(m,_){Z.call(this,Er.Ma,m),this.size=_}T(Lt,Z);function Nt(m,_){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},_)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Oo(m,_,w,H,ie,ue){m.info(function(){if(m.g)if(ue)for(var _e="",Je=ue.split("&"),en=0;en<Je.length;en++){var et=Je[en].split("=");if(1<et.length){var cn=et[0];et=et[1];var tn=cn.split("_");_e=2<=tn.length&&tn[1]=="type"?_e+(cn+"="+et+"&"):_e+(cn+"=redacted&")}}else _e=null;else _e=ue;return"XMLHTTP REQ ("+H+") [attempt "+ie+"]: "+_+`
`+w+`
`+_e})}function kc(m,_,w,H,ie,ue,_e){m.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ie+"]: "+_+`
`+w+`
`+ue+" "+_e})}function ci(m,_,w,H){m.info(function(){return"XMLHTTP TEXT ("+_+"): "+Fi(m,w)+(H?" "+H:"")})}function ja(m,_){m.info(function(){return"TIMEOUT: "+_})}qn.prototype.info=function(){};function Fi(m,_){if(!m.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(m=0;m<w.length;m++)if(Array.isArray(w[m])){var H=w[m];if(!(2>H.length)){var ie=H[1];if(Array.isArray(ie)&&!(1>ie.length)){var ue=ie[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var _e=1;_e<ie.length;_e++)ie[_e]=""}}}}return an(w)}catch{return _}}var ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xr;function Tr(){}T(Tr,ji),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},xr=new Tr;function gn(m,_,w,H){this.j=m,this.i=_,this.l=w,this.R=H||1,this.U=new on(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Po={},As={};function rr(m,_,w){m.L=1,m.v=Uo(ir(_)),m.m=w,m.P=!0,$r(m,null)}function $r(m,_){m.F=Date.now(),$i(m),m.A=ir(m.v);var w=m.A,H=m.R;Array.isArray(H)||(H=[String(H)]),Lc(w.i,"t",H),m.C=0,w=m.j.J,m.h=new Tt,m.g=gh(m.j,w?_:null,!m.m),0<m.O&&(m.M=new $t(b(m.Y,m,m.g),m.O)),_=m.U,w=m.g,H=m.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Ln[0]=ie.toString()),ie=Ln);for(var ue=0;ue<ie.length;ue++){var _e=Ht(w,ie[ue],H||_.handleEvent,!1,_.h||_);if(!_e)break;_.g[_e.key]=_e}_=m.H?S(m.H):{},m.m?(m.u||(m.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,_)):(m.u="GET",m.g.ea(m.A,m.u,null,_)),li(),Oo(m.i,m.u,m.A,m.l,m.R,m.m)}gn.prototype.ca=function(m){m=m.target;const _=this.M;_&&Ir(m)==3?_.j():this.Y(m)},gn.prototype.Y=function(m){try{if(m==this.g)e:{const tn=Ir(this.g);var _=this.g.Ba();const Qi=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||lh(this.g)))){this.J||tn!=4||_==7||(_==8||0>=Qi?li(3):li(2)),di(this);var w=this.g.Z();this.X=w;t:if(Vo(this)){var H=lh(this.g);m="";var ie=H.length,ue=Ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Sr(this);var _e="";break t}this.h.i=new u.TextDecoder}for(_=0;_<ie;_++)this.h.h=!0,m+=this.h.i.decode(H[_],{stream:!(ue&&_==ie-1)});H.length=0,this.h.g+=m,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=w==200,kc(this.i,this.u,this.A,this.l,this.R,tn,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,en=this.g;if((Je=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Je)){var et=Je;break t}}et=null}if(w=et)ci(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hi(this,w);else{this.o=!1,this.s=3,yt(12),Jt(this),Sr(this);break e}}if(this.P){w=!0;let yn;for(;!this.J&&this.C<_e.length;)if(yn=Ha(this,_e),yn==As){tn==4&&(this.s=4,yt(14),w=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Po){this.s=4,yt(15),ci(this.i,this.l,_e,"[Invalid Chunk]"),w=!1;break}else ci(this.i,this.l,yn,null),hi(this,yn);if(Vo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||_e.length!=0||this.h.h||(this.s=1,yt(16),w=!1),this.o=this.o&&w,!w)ci(this.i,this.l,_e,"[Invalid Chunked Response]"),Jt(this),Sr(this);else if(0<_e.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),Yo(cn),cn.M=!0,yt(11))}}else ci(this.i,this.l,_e,null),hi(this,_e);tn==4&&Jt(this),this.o&&!this.J&&(tn==4?fh(this.j,this):(this.o=!1,$i(this)))}else Vp(this.g),w==400&&0<_e.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Jt(this),Sr(this)}}}catch{}finally{}};function Vo(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Ha(m,_){var w=m.C,H=_.indexOf(`
`,w);return H==-1?As:(w=Number(_.substring(w,H)),isNaN(w)?Po:(H+=1,H+w>_.length?As:(_=_.slice(H,H+w),m.C=H+w,_)))}gn.prototype.cancel=function(){this.J=!0,Jt(this)};function $i(m){m.S=Date.now()+m.I,Fa(m,m.I)}function Fa(m,_){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Nt(b(m.ba,m),_)}function di(m){m.B&&(u.clearTimeout(m.B),m.B=null)}gn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(ja(this.i,this.A),this.L!=2&&(li(),yt(17)),Jt(this),this.s=2,Sr(this)):Fa(this,this.S-m)};function Sr(m){m.j.G==0||m.J||fh(m.j,m)}function Jt(m){di(m);var _=m.M;_&&typeof _.ma=="function"&&_.ma(),m.M=null,zn(m.U),m.g&&(_=m.g,m.g=null,_.abort(),_.ma())}function hi(m,_){try{var w=m.j;if(w.G!=0&&(w.g==m||Dc(w.h,m))){if(!m.K&&Dc(w.h,m)&&w.G==3){try{var H=w.Da.g.parse(_)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ie=H;if(ie[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<m.F)el(w),Za(w);else break e;Hc(w),yt(18)}}else w.za=ie[1],0<w.za-w.T&&37500>ie[2]&&w.F&&w.v==0&&!w.C&&(w.C=Nt(b(w.Za,w),6e3));if(1>=fi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Wi(w,11)}else if((m.K||w.g==m)&&el(w),!z(_))for(ie=w.Da.g.parse(_),_=0;_<ie.length;_++){let et=ie[_];if(w.T=et[0],et=et[1],w.G==2)if(et[0]=="c"){w.K=et[1],w.ia=et[2];const cn=et[3];cn!=null&&(w.la=cn,w.j.info("VER="+w.la));const tn=et[4];tn!=null&&(w.Aa=tn,w.j.info("SVER="+w.Aa));const Qi=et[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(H=1.5*Qi,w.L=H,w.j.info("backChannelRequestTimeoutMs_="+H)),H=w;const yn=m.g;if(yn){const _i=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var ue=H.h;ue.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(qa(ue,ue.h),ue.h=null))}if(H.D){const $c=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;$c&&(H.ya=$c,ht(H.I,H.D,$c))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-m.F,w.j.info("Handshake RTT: "+w.R+"ms")),H=w;var _e=m;if(H.qa=ph(H,H.J?H.ia:null,H.W),_e.K){Bn(H.h,_e);var Je=_e,en=H.L;en&&(Je.I=en),Je.B&&(di(Je),$i(Je)),H.g=_e}else dh(H);0<w.i.length&&Ja(w)}else et[0]!="stop"&&et[0]!="close"||Wi(w,7);else w.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Wi(w,7):Bc(w):et[0]!="noop"&&w.l&&w.l.ta(et),w.v=0)}}li(4)}catch{}}var $a=class{constructor(m,_){this.g=m,this.map=_}};function qr(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cs(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function fi(m){return m.h?1:m.g?m.g.size:0}function Dc(m,_){return m.h?m.h==_:m.g?m.g.has(_):!1}function qa(m,_){m.g?m.g.add(_):m.h=_}function Bn(m,_){m.h&&m.h==_?m.h=null:m.g&&m.g.has(_)&&m.g.delete(_)}qr.prototype.cancel=function(){if(this.i=Mc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Mc(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let _=m.i;for(const w of m.g.values())_=_.concat(w.D);return _}return A(m.i)}function Dp(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(h(m)){for(var _=[],w=m.length,H=0;H<w;H++)_.push(m[H]);return _}_=[],w=0;for(H in m)_[w++]=m[H];return _}function Ga(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(h(m)||typeof m=="string"){var _=[];m=m.length;for(var w=0;w<m;w++)_.push(w);return _}_=[],w=0;for(const H in m)_[w++]=H;return _}}}function Oc(m,_){if(m.forEach&&typeof m.forEach=="function")m.forEach(_,void 0);else if(h(m)||typeof m=="string")Array.prototype.forEach.call(m,_,void 0);else for(var w=Ga(m),H=Dp(m),ie=H.length,ue=0;ue<ie;ue++)_.call(void 0,H[ue],w&&w[ue],m)}var Lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mp(m,_){if(m){m=m.split("&");for(var w=0;w<m.length;w++){var H=m[w].indexOf("="),ie=null;if(0<=H){var ue=m[w].substring(0,H);ie=m[w].substring(H+1)}else ue=m[w];_(ue,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function qt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof qt){this.h=m.h,zo(this,m.j),this.o=m.o,this.g=m.g,Rs(this,m.s),this.l=m.l;var _=m.i,w=new Gi;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),qi(this,w),this.m=m.m}else m&&(_=String(m).match(Lo))?(this.h=!1,zo(this,_[1]||"",!0),this.o=Ar(_[2]||""),this.g=Ar(_[3]||"",!0),Rs(this,_[4]),this.l=Ar(_[5]||"",!0),qi(this,_[6]||"",!0),this.m=Ar(_[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}qt.prototype.toString=function(){var m=[],_=this.j;_&&m.push(Bo(_,Pc,!0),":");var w=this.g;return(w||_=="file")&&(m.push("//"),(_=this.o)&&m.push(Bo(_,Pc,!0),"@"),m.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&m.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Bo(w,w.charAt(0)=="/"?Op:Vc,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Bo(w,Ya)),m.join("")};function ir(m){return new qt(m)}function zo(m,_,w){m.j=w?Ar(_,!0):_,m.j&&(m.j=m.j.replace(/:$/,""))}function Rs(m,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);m.s=_}else m.s=null}function qi(m,_,w){_ instanceof Gi?(m.i=_,oh(m.i,m.h)):(w||(_=Bo(_,Pp)),m.i=new Gi(_,m.h))}function ht(m,_,w){m.i.set(_,w)}function Uo(m){return ht(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Ar(m,_){return m?_?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Bo(m,_,w){return typeof m=="string"?(m=encodeURI(m).replace(_,sh),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function sh(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Pc=/[#\/\?@]/g,Vc=/[#\?:]/g,Op=/[#\?]/g,Pp=/[#\?@]/g,Ya=/#/g;function Gi(m,_){this.h=this.g=null,this.i=m||null,this.j=!!_}function Cr(m){m.g||(m.g=new Map,m.h=0,m.i&&Mp(m.i,function(_,w){m.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}t=Gi.prototype,t.add=function(m,_){Cr(this),this.i=null,m=mi(this,m);var w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(_),this.h+=1,this};function Yi(m,_){Cr(m),_=mi(m,_),m.g.has(_)&&(m.i=null,m.h-=m.g.get(_).length,m.g.delete(_))}function Ki(m,_){return Cr(m),_=mi(m,_),m.g.has(_)}t.forEach=function(m,_){Cr(this),this.g.forEach(function(w,H){w.forEach(function(ie){m.call(_,ie,H,this)},this)},this)},t.na=function(){Cr(this);const m=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let H=0;H<_.length;H++){const ie=m[H];for(let ue=0;ue<ie.length;ue++)w.push(_[H])}return w},t.V=function(m){Cr(this);let _=[];if(typeof m=="string")Ki(this,m)&&(_=_.concat(this.g.get(mi(this,m))));else{m=Array.from(this.g.values());for(let w=0;w<m.length;w++)_=_.concat(m[w])}return _},t.set=function(m,_){return Cr(this),this.i=null,m=mi(this,m),Ki(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[_]),this.h+=1,this},t.get=function(m,_){return m?(m=this.V(m),0<m.length?String(m[0]):_):_};function Lc(m,_,w){Yi(m,_),0<w.length&&(m.i=null,m.g.set(mi(m,_),A(w)),m.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var H=_[w];const ue=encodeURIComponent(String(H)),_e=this.V(H);for(H=0;H<_e.length;H++){var ie=ue;_e[H]!==""&&(ie+="="+encodeURIComponent(String(_e[H]))),m.push(ie)}}return this.i=m.join("&")};function mi(m,_){return _=String(_),m.j&&(_=_.toLowerCase()),_}function oh(m,_){_&&!m.j&&(Cr(m),m.i=null,m.g.forEach(function(w,H){var ie=H.toLowerCase();H!=ie&&(Yi(this,H),Lc(this,ie,w))},m)),m.j=_}function jo(m,_){const w=new qn;if(u.Image){const H=new Image;H.onload=E(Rr,w,"TestLoadImage: loaded",!0,_,H),H.onerror=E(Rr,w,"TestLoadImage: error",!1,_,H),H.onabort=E(Rr,w,"TestLoadImage: abort",!1,_,H),H.ontimeout=E(Rr,w,"TestLoadImage: timeout",!1,_,H),u.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=m}else _(!1)}function Gr(m,_){const w=new qn,H=new AbortController,ie=setTimeout(()=>{H.abort(),Rr(w,"TestPingServer: timeout",!1,_)},1e4);fetch(m,{signal:H.signal}).then(ue=>{clearTimeout(ie),ue.ok?Rr(w,"TestPingServer: ok",!0,_):Rr(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ie),Rr(w,"TestPingServer: error",!1,_)})}function Rr(m,_,w,H,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),H(w)}catch{}}function Ho(){this.g=new Un}function pi(m,_,w){const H=w||"";try{Oc(m,function(ie,ue){let _e=ie;f(ie)&&(_e=an(ie)),_.push(H+ue+"="+encodeURIComponent(_e))})}catch(ie){throw _.push(H+"type="+encodeURIComponent("_badmap")),ie}}function Is(m){this.l=m.Ub||null,this.j=m.eb||!1}T(Is,ji),Is.prototype.g=function(){return new Xi(this.l,this.j)},Is.prototype.i=function(m){return function(){return m}}({});function Xi(m,_){at.call(this),this.D=m,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Xi,at),t=Xi.prototype,t.open=function(m,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=_,this.readyState=1,yi(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(_.body=m),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,yi(this)),this.g&&(this.readyState=3,yi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zc(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function zc(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var _=m.value?m.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!m.done}))&&(this.response=this.responseText+=_)}m.done?gi(this):yi(this),this.readyState==3&&zc(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,gi(this))},t.Qa=function(m){this.g&&(this.response=m,gi(this))},t.ga=function(){this.g&&gi(this)};function gi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,yi(m)}t.setRequestHeader=function(m,_){this.u.append(m,_)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=_.next();return m.join(`\r
`)};function yi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Uc(m){let _="";return X(m,function(w,H){_+=H,_+=":",_+=w,_+=`\r
`}),_}function ln(m,_,w){e:{for(H in w){var H=!1;break e}H=!0}H||(w=Uc(w),typeof m=="string"?w!=null&&encodeURIComponent(String(w)):ht(m,_,w))}function lt(m){at.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(lt,at);var Ka=/^https?$/i,Fo=["POST","PUT"];t=lt.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,_,w,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);_=_?_.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xr.g(),this.v=this.o?Hi(this.o):Hi(xr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(m),!0),this.B=!1}catch(ue){ah(this,ue);return}if(m=w||"",w=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ie in H)w.set(ie,H[ie]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ue of H.keys())w.set(ue,H.get(ue));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(w.keys()).find(ue=>ue.toLowerCase()=="content-type"),ie=u.FormData&&m instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Fo,_,void 0))||H||ie||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,_e]of w)this.g.setRequestHeader(ue,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$o(this),this.u=!0,this.g.send(m),this.u=!1}catch(ue){ah(this,ue)}};function ah(m,_){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=_,m.m=5,Xa(m),vi(m)}function Xa(m){m.A||(m.A=!0,Ke(m,"complete"),Ke(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Ke(this,"complete"),Ke(this,"abort"),vi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Wa(this):this.bb())},t.bb=function(){Wa(this)};function Wa(m){if(m.h&&typeof c<"u"&&(!m.v[1]||Ir(m)!=4||m.Z()!=2)){if(m.u&&Ir(m)==4)xt(m.Ea,0,m);else if(Ke(m,"readystatechange"),Ir(m)==4){m.h=!1;try{const _e=m.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var H;if(H=_e===0){var ie=String(m.D).match(Lo)[1]||null;!ie&&u.self&&u.self.location&&(ie=u.self.location.protocol.slice(0,-1)),H=!Ka.test(ie?ie.toLowerCase():"")}w=H}if(w)Ke(m,"complete"),Ke(m,"success");else{m.m=6;try{var ue=2<Ir(m)?m.g.statusText:""}catch{ue=""}m.l=ue+" ["+m.Z()+"]",Xa(m)}}finally{vi(m)}}}}function vi(m,_){if(m.g){$o(m);const w=m.g,H=m.v[0]?()=>{}:null;m.g=null,m.v=null,_||Ke(m,"ready");try{w.onreadystatechange=H}catch{}}}function $o(m){m.I&&(u.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Ir(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var _=this.g.responseText;return m&&_.indexOf(m)==0&&(_=_.substring(m.length)),pn(_)}};function lh(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Vp(m){const _={};m=(m.g&&2<=Ir(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<m.length;H++){if(z(m[H]))continue;var w=F(m[H]);const ie=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ue=_[ie]||[];_[ie]=ue,ue.push(w)}D(_,function(H){return H.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(m,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||_}function Qa(m){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,m),this.cb=qo("retryDelaySeedMs",1e4,m),this.Wa=qo("forwardChannelMaxRetries",2,m),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new qr(m&&m.concurrentRequestLimit),this.Da=new Ho,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Qa.prototype,t.la=8,t.G=1,t.connect=function(m,_,w,H){yt(0),this.W=m,this.H=_||{},w&&H!==void 0&&(this.H.OSID=w,this.H.OAID=H),this.F=this.X,this.I=ph(this,null,this.W),Ja(this)};function Bc(m){if(ch(m),m.G==3){var _=m.U++,w=ir(m.I);if(ht(w,"SID",m.K),ht(w,"RID",_),ht(w,"TYPE","terminate"),Go(m,w),_=new gn(m,m.j,_),_.L=2,_.v=Uo(ir(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=_.v,w=!0),w||(_.g=gh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),$i(_)}mh(m)}function Za(m){m.g&&(Yo(m),m.g.cancel(),m.g=null)}function ch(m){Za(m),m.u&&(u.clearTimeout(m.u),m.u=null),el(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&u.clearTimeout(m.s),m.s=null)}function Ja(m){if(!Cs(m.h)&&!m.s){m.s=!0;var _=m.Ga;W||N(),G||(W(),G=!0),K.add(_,m),m.B=0}}function Lp(m,_){return fi(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=_.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Nt(b(m.Ga,m,_),Fc(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ie=new gn(this,this.j,m);let ue=this.o;if(this.S&&(ue?(ue=S(ue),j(ue,this.S)):ue=this.S),this.m!==null||this.O||(ie.H=ue,ue=null),this.P)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var H=this.i[w];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(_+=H,4096<_){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=uh(this,ie,_),w=ir(this.I),ht(w,"RID",m),ht(w,"CVER",22),this.D&&ht(w,"X-HTTP-Session-Id",this.D),Go(this,w),ue&&(this.O?_="headers="+encodeURIComponent(String(Uc(ue)))+"&"+_:this.m&&ln(w,this.m,ue)),qa(this.h,ie),this.Ua&&ht(w,"TYPE","init"),this.P?(ht(w,"$req",_),ht(w,"SID","null"),ie.T=!0,rr(ie,w,null)):rr(ie,w,_),this.G=2}}else this.G==3&&(m?jc(this,m):this.i.length==0||Cs(this.h)||jc(this))};function jc(m,_){var w;_?w=_.l:w=m.U++;const H=ir(m.I);ht(H,"SID",m.K),ht(H,"RID",w),ht(H,"AID",m.T),Go(m,H),m.m&&m.o&&ln(H,m.m,m.o),w=new gn(m,m.j,w,m.B+1),m.m===null&&(w.H=m.o),_&&(m.i=_.D.concat(m.i)),_=uh(m,w,1e3),w.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),qa(m.h,w),rr(w,H,_)}function Go(m,_){m.H&&X(m.H,function(w,H){ht(_,H,w)}),m.l&&Oc({},function(w,H){ht(_,H,w)})}function uh(m,_,w){w=Math.min(m.i.length,w);var H=m.l?b(m.l.Na,m.l,m):null;e:{var ie=m.i;let ue=-1;for(;;){const _e=["count="+w];ue==-1?0<w?(ue=ie[0].g,_e.push("ofs="+ue)):ue=0:_e.push("ofs="+ue);let Je=!0;for(let en=0;en<w;en++){let et=ie[en].g;const cn=ie[en].map;if(et-=ue,0>et)ue=Math.max(0,ie[en].g-100),Je=!1;else try{pi(cn,_e,"req"+et+"_")}catch{H&&H(cn)}}if(Je){H=_e.join("&");break e}}}return m=m.i.splice(0,w),_.D=m,H}function dh(m){if(!m.g&&!m.u){m.Y=1;var _=m.Fa;W||N(),G||(W(),G=!0),K.add(_,m),m.v=0}}function Hc(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Nt(b(m.Fa,m),Fc(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,hh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Nt(b(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Za(this),hh(this))};function Yo(m){m.A!=null&&(u.clearTimeout(m.A),m.A=null)}function hh(m){m.g=new gn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var _=ir(m.qa);ht(_,"RID","rpc"),ht(_,"SID",m.K),ht(_,"AID",m.T),ht(_,"CI",m.F?"0":"1"),!m.F&&m.ja&&ht(_,"TO",m.ja),ht(_,"TYPE","xmlhttp"),Go(m,_),m.m&&m.o&&ln(_,m.m,m.o),m.L&&(m.g.I=m.L);var w=m.g;m=m.ia,w.L=1,w.v=Uo(ir(_)),w.m=null,w.P=!0,$r(w,m)}t.Za=function(){this.C!=null&&(this.C=null,Za(this),Hc(this),yt(19))};function el(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function fh(m,_){var w=null;if(m.g==_){el(m),Yo(m),m.g=null;var H=2}else if(Dc(m.h,_))w=_.D,Bn(m.h,_),H=1;else return;if(m.G!=0){if(_.o)if(H==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var ie=m.B;H=ai(),Ke(H,new Lt(H,w)),Ja(m)}else dh(m);else if(ie=_.s,ie==3||ie==0&&0<_.X||!(H==1&&Lp(m,_)||H==2&&Hc(m)))switch(w&&0<w.length&&(_=m.h,_.i=_.i.concat(w)),ie){case 1:Wi(m,5);break;case 4:Wi(m,10);break;case 3:Wi(m,6);break;default:Wi(m,2)}}}function Fc(m,_){let w=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(w*=2),w*_}function Wi(m,_){if(m.j.info("Error code "+_),_==2){var w=b(m.fb,m),H=m.Xa;const ie=!H;H=new qt(H||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||zo(H,"https"),Uo(H),ie?jo(H.toString(),w):Gr(H.toString(),w)}else yt(2);m.G=0,m.l&&m.l.sa(_),mh(m),ch(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function mh(m){if(m.G=0,m.ka=[],m.l){const _=Mc(m.h);(_.length!=0||m.i.length!=0)&&(R(m.ka,_),R(m.ka,m.i),m.h.i.length=0,A(m.i),m.i.length=0),m.l.ra()}}function ph(m,_,w){var H=w instanceof qt?ir(w):new qt(w);if(H.g!="")_&&(H.g=_+"."+H.g),Rs(H,H.s);else{var ie=u.location;H=ie.protocol,_=_?_+"."+ie.hostname:ie.hostname,ie=+ie.port;var ue=new qt(null);H&&zo(ue,H),_&&(ue.g=_),ie&&Rs(ue,ie),w&&(ue.l=w),H=ue}return w=m.D,_=m.ya,w&&_&&ht(H,w,_),ht(H,"VER",m.la),Go(m,H),H}function gh(m,_,w){if(_&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=m.Ca&&!m.pa?new lt(new Is({eb:w})):new lt(m.pa),_.Ha(m.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yh(){}t=yh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tl(){}tl.prototype.g=function(m,_){return new jn(m,_)};function jn(m,_){at.call(this),this.g=new Qa(_),this.l=m,this.h=_&&_.messageUrlParams||null,m=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(m?m["X-WebChannel-Content-Type"]=_.messageContentType:m={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(m?m["X-WebChannel-Client-Profile"]=_.va:m={"X-WebChannel-Client-Profile":_.va}),this.g.S=m,(m=_&&_.Sb)&&!z(m)&&(this.g.m=m),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!z(_)&&(this.g.D=_,m=this.h,m!==null&&_ in m&&(m=this.h,_ in m&&delete m[_])),this.j=new bi(this)}T(jn,at),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Bc(this.g)},jn.prototype.o=function(m){var _=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.u&&(w={},w.__data__=an(m),m=w);_.i.push(new $a(_.Ya++,m)),_.G==3&&Ja(_)},jn.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,jn.aa.N.call(this)};function vh(m){_r.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var _=m.__sm__;if(_){e:{for(const w in _){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,_=_!==null&&m in _?_[m]:void 0),this.data=_}else this.data=m}T(vh,_r);function bh(){nr.call(this),this.status=1}T(bh,nr);function bi(m){this.g=m}T(bi,yh),bi.prototype.ua=function(){Ke(this.g,"a")},bi.prototype.ta=function(m){Ke(this.g,new vh(m))},bi.prototype.sa=function(m){Ke(this.g,new bh)},bi.prototype.ra=function(){Ke(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,zR=function(){return new tl},LR=function(){return ai()},VR=Er,Qy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ui.NO_ERROR=0,ui.TIMEOUT=8,ui.HTTP_ERROR=6,Zf=ui,wr.COMPLETE="complete",PR=wr,Fr.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",at.prototype.listen=at.prototype.K,Xu=Fr,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,OR=lt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const MT="@firebase/firestore",OT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new ub("@firebase/firestore");function Ul(){return Na.logLevel}function we(t,...e){if(Na.logLevel<=Qe.DEBUG){const n=e.map(mb);Na.debug(`Firestore (${Ec}): ${t}`,...n)}}function _s(t,...e){if(Na.logLevel<=Qe.ERROR){const n=e.map(mb);Na.error(`Firestore (${Ec}): ${t}`,...n)}}function dc(t,...e){if(Na.logLevel<=Qe.WARN){const n=e.map(mb);Na.warn(`Firestore (${Ec}): ${t}`,...n)}}function mb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,UR(t,r,n)}function UR(t,e,n){let r=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _s(r),new Error(r)}function ct(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||UR(e,s,r)}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(In.UNAUTHENTICATED))}shutdown(){}}class sz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oz{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let a=new go;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new go,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const h=a;e.enqueueRetryable(async()=>{await h.promise,await s(this.currentUser)})},u=h=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new go)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new BR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class az{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new az(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const r=a=>{a.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new PT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new PT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uz(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function Zy(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return $e(r,s);{const a=jR(),c=dz(a.encode(VT(t,n)),a.encode(VT(e,n)));return c!==0?c:$e(r,s)}}n+=r>65535?2:1}return $e(t.length,e.length)}function VT(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function dz(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $e(t[n],e[n]);return $e(t.length,e.length)}function hc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=-62135596800,zT=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zT);return new _t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<LT)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zT}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new _t(0,0))}static max(){return new ze(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="__name__";class Ri{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Ri.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return $e(e.length,n.length)}static compareSegments(e,n){const r=Ri.isNumericId(e),s=Ri.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ri.extractNumericId(e).compare(Ri.extractNumericId(n)):Zy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return po.fromString(e.substring(4,e.length-2))}}class bt extends Ri{construct(e,n,r){return new bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new bt(n)}static emptyPath(){return new bt([])}}const hz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends Ri{construct(e,n,r){return new xn(e,n,r)}static isValidIdentifier(e){return hz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UT}static keyField(){return new xn([UT])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new xe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new xe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new xe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(a(),s++)}if(a(),c)throw new xe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(n)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=-1;function fz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new _o(s,Ie.empty(),e)}function mz(t){return new _o(t.readTime,t.key,wd)}class _o{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _o(ze.min(),Ie.empty(),wd)}static max(){return new _o(ze.max(),Ie.empty(),wd)}}function pz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==gz)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.reject(n)}static resolve(e){return new ve((n,r)=>{n(e)})}static reject(e){return new ve((n,r)=>{r(e)})}static waitFor(e){return new ve((n,r)=>{let s=0,a=0,c=!1;e.forEach(u=>{++s,u.next(()=>{++a,c&&a===s&&n()},h=>r(h))}),c=!0,a===s&&n()})}static or(e){let n=ve.resolve(!1);for(const r of e)n=n.next(s=>s?ve.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new ve((r,s)=>{const a=e.length,c=new Array(a);let u=0;for(let h=0;h<a;h++){const f=h;n(e[f]).next(p=>{c[f]=p,++u,u===a&&r(c)},p=>s(p))}})}static doWhile(e,n){return new ve((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function vz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ap.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=-1;function lp(t){return t==null}function Cm(t){return t===0&&1/t==-1/0}function bz(t){return typeof t=="number"&&Number.isInteger(t)&&!Cm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR="";function _z(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=BT(e)),e=Ez(t.get(n),e);return BT(e)}function Ez(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case FR:n+="";break;default:n+=a}}return n}function BT(t){return t+FR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $R(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??wn.RED,this.left=s??wn.EMPTY,this.right=a??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new wn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return wn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new HT(this.data.getIterator())}getIteratorFrom(e){return new HT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class HT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new pr([])}unionWith(e){let n=new sn(xn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new qR("Invalid base64 string: "+a):a}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const wz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eo(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=wz.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(t.seconds),nanos:jt(t.nanos)}}function jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wo(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="server_timestamp",YR="__type__",KR="__previous_value__",XR="__local_write_time__";function gb(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[YR])===null||n===void 0?void 0:n.stringValue)===GR}function cp(t){const e=t.mapValue.fields[KR];return gb(e)?cp(e):e}function xd(t){const e=Eo(t.mapValue.fields[XR].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n,r,s,a,c,u,h,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const Rm="(default)";class Td{constructor(e,n){this.projectId=e,this.database=n||Rm}static empty(){return new Td("","")}get isDefaultDatabase(){return this.database===Rm}isEqual(e){return e instanceof Td&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="__type__",Tz="__max__",Lf={mapValue:{}},QR="__vector__",Im="value";function xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gb(t)?4:Az(t)?9007199254740991:Sz(t)?10:11:Oe(28295,{value:t})}function zi(t,e){if(t===e)return!0;const n=xo(t);if(n!==xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xd(t).isEqual(xd(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Eo(s.timestampValue),u=Eo(a.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return wo(s.bytesValue).isEqual(wo(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return jt(s.geoPointValue.latitude)===jt(a.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return jt(s.integerValue)===jt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=jt(s.doubleValue),u=jt(a.doubleValue);return c===u?Cm(c)===Cm(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return hc(t.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},u=a.mapValue.fields||{};if(jT(c)!==jT(u))return!1;for(const h in c)if(c.hasOwnProperty(h)&&(u[h]===void 0||!zi(c[h],u[h])))return!1;return!0}(t,e);default:return Oe(52216,{left:t})}}function Sd(t,e){return(t.values||[]).find(n=>zi(n,e))!==void 0}function fc(t,e){if(t===e)return 0;const n=xo(t),r=xo(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(a,c){const u=jt(a.integerValue||a.doubleValue),h=jt(c.integerValue||c.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return FT(t.timestampValue,e.timestampValue);case 4:return FT(xd(t),xd(e));case 5:return Zy(t.stringValue,e.stringValue);case 6:return function(a,c){const u=wo(a),h=wo(c);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(a,c){const u=a.split("/"),h=c.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=$e(u[f],h[f]);if(p!==0)return p}return $e(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,c){const u=$e(jt(a.latitude),jt(c.latitude));return u!==0?u:$e(jt(a.longitude),jt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $T(t.arrayValue,e.arrayValue);case 10:return function(a,c){var u,h,f,p;const y=a.fields||{},b=c.fields||{},E=(u=y[Im])===null||u===void 0?void 0:u.arrayValue,T=(h=b[Im])===null||h===void 0?void 0:h.arrayValue,A=$e(((f=E?.values)===null||f===void 0?void 0:f.length)||0,((p=T?.values)===null||p===void 0?void 0:p.length)||0);return A!==0?A:$T(E,T)}(t.mapValue,e.mapValue);case 11:return function(a,c){if(a===Lf.mapValue&&c===Lf.mapValue)return 0;if(a===Lf.mapValue)return 1;if(c===Lf.mapValue)return-1;const u=a.fields||{},h=Object.keys(u),f=c.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let y=0;y<h.length&&y<p.length;++y){const b=Zy(h[y],p[y]);if(b!==0)return b;const E=fc(u[h[y]],f[p[y]]);if(E!==0)return E}return $e(h.length,p.length)}(t.mapValue,e.mapValue);default:throw Oe(23264,{Pe:n})}}function FT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=Eo(t),r=Eo(e),s=$e(n.seconds,r.seconds);return s!==0?s:$e(n.nanos,r.nanos)}function $T(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=fc(n[s],r[s]);if(a)return a}return $e(n.length,r.length)}function mc(t){return Jy(t)}function Jy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Eo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Jy(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const c of r)a?a=!1:s+=",",s+=`${c}:${Jy(n.fields[c])}`;return s+"}"}(t.mapValue):Oe(61005,{value:t})}function Jf(t){switch(xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cp(t);return e?16+Jf(e):16;case 5:return 2*t.stringValue.length;case 6:return wo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Jf(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ro(r.fields,(a,c)=>{s+=a.length+Jf(c)}),s}(t.mapValue);default:throw Oe(13486,{value:t})}}function qT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ev(t){return!!t&&"integerValue"in t}function yb(t){return!!t&&"arrayValue"in t}function GT(t){return!!t&&"nullValue"in t}function YT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function em(t){return!!t&&"mapValue"in t}function Sz(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[WR])===null||n===void 0?void 0:n.stringValue)===QR}function td(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ro(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=td(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=td(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Az(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Tz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!em(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=td(n)}setAll(e){let n=xn.emptyPath(),r={},s=[];e.forEach((c,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}c?r[u.lastSegment()]=td(c):s.push(u.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());em(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];em(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ro(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Wn(td(this.value))}}function ZR(t){const e=[];return Ro(t.fields,(n,r)=>{const s=new xn([n]);if(em(r)){const a=ZR(r.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r,s,a,c,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=c,this.documentState=u}static newInvalidDocument(e){return new kn(e,0,ze.min(),ze.min(),ze.min(),Wn.empty(),0)}static newFoundDocument(e,n,r,s){return new kn(e,1,n,ze.min(),r,s,0)}static newNoDocument(e,n){return new kn(e,2,n,ze.min(),ze.min(),Wn.empty(),0)}static newUnknownDocument(e,n){return new kn(e,3,n,ze.min(),ze.min(),Wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){this.position=e,this.inclusive=n}}function KT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],c=t.position[s];if(a.field.isKeyField()?r=Ie.comparator(Ie.fromName(c.referenceValue),n.key):r=fc(c,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function XT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n="asc"){this.field=e,this.dir=n}}function Cz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{}class Qt extends JR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Iz(e,n,r):n==="array-contains"?new Dz(e,r):n==="in"?new Mz(e,r):n==="not-in"?new Oz(e,r):n==="array-contains-any"?new Pz(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Nz(e,r):new kz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fc(n,this.value)):n!==null&&xo(this.value)===xo(n)&&this.matchesComparison(fc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends JR{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ni(e,n)}matches(e){return eI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function eI(t){return t.op==="and"}function tI(t){return Rz(t)&&eI(t)}function Rz(t){for(const e of t.filters)if(e instanceof ni)return!1;return!0}function tv(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+mc(t.value);if(tI(t))return t.filters.map(e=>tv(e)).join(",");{const e=t.filters.map(n=>tv(n)).join(",");return`${t.op}(${e})`}}function nI(t,e){return t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&zi(r.value,s.value)}(t,e):t instanceof ni?function(r,s){return s instanceof ni&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,c,u)=>a&&nI(c,s.filters[u]),!0):!1}(t,e):void Oe(19439)}function rI(t){return t instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${mc(n.value)}`}(t):t instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(rI).join(" ,")+"}"}(t):"Filter"}class Iz extends Qt{constructor(e,n,r){super(e,n,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class Nz extends Qt{constructor(e,n){super(e,"in",n),this.keys=iI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kz extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=iI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ie.fromName(r.referenceValue))}class Dz extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yb(n)&&Sd(n.arrayValue,this.value)}}class Mz extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sd(this.value.arrayValue,n)}}class Oz extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Sd(this.value.arrayValue,n)}}class Pz extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n=null,r=[],s=[],a=null,c=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=c,this.endAt=u,this.Ie=null}}function WT(t,e=null,n=[],r=[],s=null,a=null,c=null){return new Vz(t,e,n,r,s,a,c)}function vb(t){const e=Ue(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),lp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mc(r)).join(",")),e.Ie=n}return e.Ie}function bb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Cz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XT(t.startAt,e.startAt)&&XT(t.endAt,e.endAt)}function nv(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n=null,r=[],s=[],a=null,c="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=c,this.startAt=u,this.endAt=h,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Lz(t,e,n,r,s,a,c,u){return new Tc(t,e,n,r,s,a,c,u)}function sI(t){return new Tc(t)}function QT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oI(t){return t.collectionGroup!==null}function nd(t){const e=Ue(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new sn(xn.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Ad(a,r))}),n.has(xn.keyField().canonicalString())||e.Ee.push(new Ad(xn.keyField(),r))}return e.Ee}function ki(t){const e=Ue(t);return e.de||(e.de=zz(e,nd(t))),e.de}function zz(t,e){if(t.limitType==="F")return WT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Ad(s.field,a)});const n=t.endAt?new Nm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nm(t.startAt.position,t.startAt.inclusive):null;return WT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rv(t,e){const n=t.filters.concat([e]);return new Tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function iv(t,e,n){return new Tc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function up(t,e){return bb(ki(t),ki(e))&&t.limitType===e.limitType}function aI(t){return`${vb(ki(t))}|lt:${t.limitType}`}function Bl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rI(s)).join(", ")}]`),lp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>mc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>mc(s)).join(",")),`Target(${r})`}(ki(t))}; limitType=${t.limitType})`}function dp(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ie.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of nd(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(c,u,h){const f=KT(c,u,h);return c.inclusive?f<=0:f<0}(r.startAt,nd(r),s)||r.endAt&&!function(c,u,h){const f=KT(c,u,h);return c.inclusive?f>=0:f>0}(r.endAt,nd(r),s))}(t,e)}function Uz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lI(t){return(e,n)=>{let r=!1;for(const s of nd(t)){const a=Bz(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Bz(t,e,n){const r=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(a,c,u){const h=c.data.field(a),f=u.data.field(a);return h!==null&&f!==null?fc(h,f):Oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return $R(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=new Rt(Ie.comparator);function Es(){return jz}const cI=new Rt(Ie.comparator);function Wu(...t){let e=cI;for(const n of t)e=e.insert(n.key,n);return e}function uI(t){let e=cI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function va(){return rd()}function dI(){return rd()}function rd(){return new Va(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hz=new Rt(Ie.comparator),Fz=new sn(Ie.comparator);function Ze(...t){let e=Fz;for(const n of t)e=e.add(n);return e}const $z=new sn($e);function qz(){return $z}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cm(e)?"-0":e}}function hI(t){return{integerValue:""+t}}function Gz(t,e){return bz(e)?hI(e):_b(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this._=void 0}}function Yz(t,e,n){return t instanceof km?function(s,a){const c={fields:{[YR]:{stringValue:GR},[XR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&gb(a)&&(a=cp(a)),a&&(c.fields[KR]=a),{mapValue:c}}(n,e):t instanceof Cd?mI(t,e):t instanceof Rd?pI(t,e):function(s,a){const c=fI(s,a),u=ZT(c)+ZT(s.Re);return ev(c)&&ev(s.Re)?hI(u):_b(s.serializer,u)}(t,e)}function Kz(t,e,n){return t instanceof Cd?mI(t,e):t instanceof Rd?pI(t,e):n}function fI(t,e){return t instanceof Dm?function(r){return ev(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class km extends hp{}class Cd extends hp{constructor(e){super(),this.elements=e}}function mI(t,e){const n=gI(e);for(const r of t.elements)n.some(s=>zi(s,r))||n.push(r);return{arrayValue:{values:n}}}class Rd extends hp{constructor(e){super(),this.elements=e}}function pI(t,e){let n=gI(e);for(const r of t.elements)n=n.filter(s=>!zi(s,r));return{arrayValue:{values:n}}}class Dm extends hp{constructor(e,n){super(),this.serializer=e,this.Re=n}}function ZT(t){return jt(t.integerValue||t.doubleValue)}function gI(t){return yb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Cd&&s instanceof Cd||r instanceof Rd&&s instanceof Rd?hc(r.elements,s.elements,zi):r instanceof Dm&&s instanceof Dm?zi(r.Re,s.Re):r instanceof km&&s instanceof km}(t.transform,e.transform)}class Wz{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fp{}function yI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mp(t.key,gr.none()):new qd(t.key,t.data,gr.none());{const n=t.data,r=Wn.empty();let s=new sn(xn.comparator);for(let a of e.fields)if(!s.has(a)){let c=n.field(a);c===null&&a.length>1&&(a=a.popLast(),c=n.field(a)),c===null?r.delete(a):r.set(a,c),s=s.add(a)}return new Io(t.key,r,new pr(s.toArray()),gr.none())}}function Qz(t,e,n){t instanceof qd?function(s,a,c){const u=s.value.clone(),h=eS(s.fieldTransforms,a,c.transformResults);u.setAll(h),a.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Io?function(s,a,c){if(!tm(s.precondition,a))return void a.convertToUnknownDocument(c.version);const u=eS(s.fieldTransforms,a,c.transformResults),h=a.data;h.setAll(vI(s)),h.setAll(u),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(t,e,n):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function id(t,e,n,r){return t instanceof qd?function(a,c,u,h){if(!tm(a.precondition,c))return u;const f=a.value.clone(),p=tS(a.fieldTransforms,h,c);return f.setAll(p),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Io?function(a,c,u,h){if(!tm(a.precondition,c))return u;const f=tS(a.fieldTransforms,h,c),p=c.data;return p.setAll(vI(a)),p.setAll(f),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(a,c,u){return tm(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,n)}function Zz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=fI(r.transform,s||null);a!=null&&(n===null&&(n=Wn.empty()),n.set(r.field,a))}return n||null}function JT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&hc(r,s,(a,c)=>Xz(a,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qd extends fp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Io extends fp{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eS(t,e,n){const r=new Map;ct(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const a=t[s],c=a.transform,u=e.data.field(a.field);r.set(a.field,Kz(c,u,n[s]))}return r}function tS(t,e,n){const r=new Map;for(const s of t){const a=s.transform,c=n.data.field(s.field);r.set(s.field,Yz(a,c,e))}return r}class mp extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jz extends fp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Qz(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=id(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=id(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dI();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let u=this.applyToLocalView(c,a.mutatedFields);u=n.has(s.key)?null:u;const h=yI(c,u);h!==null&&r.set(s.key,h),c.isValidDocument()||c.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ze())}isEqual(e){return this.batchId===e.batchId&&hc(this.mutations,e.mutations,(n,r)=>JT(n,r))&&hc(this.baseMutations,e.baseMutations,(n,r)=>JT(n,r))}}class Eb{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ct(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return Hz}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,r[c].version);return new Eb(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,nt;function rU(t){switch(t){case ye.OK:return Oe(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Oe(15467,{code:t})}}function bI(t){if(t===void 0)return _s("GRPC error has no .code"),ye.UNKNOWN;switch(t){case Kt.OK:return ye.OK;case Kt.CANCELLED:return ye.CANCELLED;case Kt.UNKNOWN:return ye.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return ye.INTERNAL;case Kt.UNAVAILABLE:return ye.UNAVAILABLE;case Kt.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Kt.NOT_FOUND:return ye.NOT_FOUND;case Kt.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Kt.ABORTED:return ye.ABORTED;case Kt.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Kt.DATA_LOSS:return ye.DATA_LOSS;default:return Oe(39323,{code:t})}}(nt=Kt||(Kt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=new po([4294967295,4294967295],0);function nS(t){const e=jR().encode(t),n=new MR;return n.update(e),new Uint8Array(n.digest())}function rS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new po([n,r],0),new po([s,a],0)]}class wb{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qu(`Invalid padding: ${n}`);if(r<0)throw new Qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=po.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(po.fromNumber(r)));return s.compare(iU)===1&&(s=new po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=nS(e),[r,s]=rS(n);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);if(!this.be(c))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new wb(a,s,n);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.pe===0)return;const n=nS(e),[r,s]=rS(n);for(let a=0;a<this.hashCount;a++){const c=this.we(r,s,a);this.Se(c)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Gd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pp(ze.min(),s,new Rt($e),Es(),Ze())}}class Gd{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gd(r,n,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class _I{constructor(e,n){this.targetId=e,this.Ce=n}}class EI{constructor(e,n,r=Tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class iS{constructor(){this.Fe=0,this.Me=sS(),this.xe=Tn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ze(),n=Ze(),r=Ze();return this.Me.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Oe(38017,{changeType:a})}}),new Gd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=sS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class sU{constructor(e){this.ze=e,this.je=new Map,this.He=Es(),this.Je=zf(),this.Ye=zf(),this.Ze=new Rt($e)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const a=s.target;if(nv(a))if(r===0){const c=new Ie(a.path);this.tt(n,c,kn.newNoDocument(c,ze.min()))}else ct(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const u=this.ct(e),h=u?this.lt(u,e,c):1;if(h!==0){this.st(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let c,u;try{c=wo(r).toUint8Array()}catch(h){if(h instanceof qR)return dc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new wb(c,s,a)}catch(h){return dc(h instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.pe===0?null:u}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const c=this.ze.Pt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.tt(n,a,null),s++)}),s}It(e){const n=new Map;this.je.forEach((a,c)=>{const u=this._t(c);if(u){if(a.current&&nv(u.target)){const h=new Ie(u.target.path);this.Et(h).has(c)||this.dt(c,h)||this.tt(c,h,kn.newNoDocument(h,e))}a.Le&&(n.set(c,a.qe()),a.Qe())}});let r=Ze();this.Ye.forEach((a,c)=>{let u=!0;c.forEachWhile(h=>{const f=this._t(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const s=new pp(e,n,this.Ze,this.He,r);return this.He=Es(),this.Je=zf(),this.Ye=zf(),this.Ze=new Rt($e),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new iS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new sn($e),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new sn($e),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new iS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function zf(){return new Rt(Ie.comparator)}function sS(){return new Rt(Ie.comparator)}const oU={asc:"ASCENDING",desc:"DESCENDING"},aU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lU={and:"AND",or:"OR"};class cU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sv(t,e){return t.useProto3Json||lp(e)?e:{value:e}}function Mm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uU(t,e){return Mm(t,e.toTimestamp())}function Di(t){return ct(!!t,49232),ze.fromTimestamp(function(n){const r=Eo(n);return new _t(r.seconds,r.nanos)}(t))}function xb(t,e){return ov(t,e).canonicalString()}function ov(t,e){const n=function(s){return new bt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xI(t){const e=bt.fromString(t);return ct(RI(e),10190,{key:e.toString()}),e}function av(t,e){return xb(t.databaseId,e.path)}function iy(t,e){const n=xI(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(SI(n))}function TI(t,e){return xb(t.databaseId,e)}function dU(t){const e=xI(t);return e.length===4?bt.emptyPath():SI(e)}function lv(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SI(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oS(t,e,n){return{name:av(t,e),fields:n.value.mapValue.fields}}function hU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Oe(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(f,p){return f.useProto3Json?(ct(p===void 0||typeof p=="string",58123),Tn.fromBase64String(p||"")):(ct(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Tn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const p=f.code===void 0?ye.UNKNOWN:bI(f.code);return new xe(p,f.message||"")}(c);n=new EI(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=iy(t,r.document.name),a=Di(r.document.updateTime),c=r.document.createTime?Di(r.document.createTime):ze.min(),u=new Wn({mapValue:{fields:r.document.fields}}),h=kn.newFoundDocument(s,a,c,u),f=r.targetIds||[],p=r.removedTargetIds||[];n=new nm(f,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=iy(t,r.document),a=r.readTime?Di(r.readTime):ze.min(),c=kn.newNoDocument(s,a),u=r.removedTargetIds||[];n=new nm([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=iy(t,r.document),a=r.removedTargetIds||[];n=new nm([],a,s,null)}else{if(!("filter"in e))return Oe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,c=new nU(s,a),u=r.targetId;n=new _I(u,c)}}return n}function fU(t,e){let n;if(e instanceof qd)n={update:oS(t,e.key,e.value)};else if(e instanceof mp)n={delete:av(t,e.key)};else if(e instanceof Io)n={update:oS(t,e.key,e.data),updateMask:wU(e.fieldMask)};else{if(!(e instanceof Jz))return Oe(16599,{ft:e.type});n={verify:av(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const u=c.transform;if(u instanceof km)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Cd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Rd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Dm)return{fieldPath:c.field.canonicalString(),increment:u.Re};throw Oe(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:uU(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Oe(27497)}(t,e.precondition)),n}function mU(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map(n=>function(s,a){let c=s.updateTime?Di(s.updateTime):Di(a);return c.isEqual(ze.min())&&(c=Di(a)),new Wz(c,s.transformResults||[])}(n,e))):[]}function pU(t,e){return{documents:[TI(t,e.path)]}}function gU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TI(t,s);const a=function(f){if(f.length!==0)return CI(ni.create(f,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const c=function(f){if(f.length!==0)return f.map(p=>function(b){return{field:jl(b.field),direction:bU(b.dir)}}(p))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const u=sv(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function yU(t){let e=dU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ct(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=function(y){const b=AI(y);return b instanceof ni&&tI(b)?b.getFilters():[b]}(n.where));let c=[];n.orderBy&&(c=function(y){return y.map(b=>function(T){return new Ad(Hl(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(b))}(n.orderBy));let u=null;n.limit&&(u=function(y){let b;return b=typeof y=="object"?y.value:y,lp(b)?null:b}(n.limit));let h=null;n.startAt&&(h=function(y){const b=!!y.before,E=y.values||[];return new Nm(E,b)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const b=!y.before,E=y.values||[];return new Nm(E,b)}(n.endAt)),Lz(e,s,c,a,u,"F",h,f)}function vU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hl(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hl(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Hl(n.unaryFilter.field);return Qt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Hl(n.unaryFilter.field);return Qt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qt.create(Hl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(r=>AI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}}(n.compositeFilter.op))}(t):Oe(30097,{filter:t})}function bU(t){return oU[t]}function _U(t){return aU[t]}function EU(t){return lU[t]}function jl(t){return{fieldPath:t.canonicalString()}}function Hl(t){return xn.fromServerFormat(t.fieldPath)}function CI(t){return t instanceof Qt?function(n){if(n.op==="=="){if(YT(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NAN"}};if(GT(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YT(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NOT_NAN"}};if(GT(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(n.field),op:_U(n.op),value:n.value}}}(t):t instanceof ni?function(n){const r=n.getFilters().map(s=>CI(s));return r.length===1?r[0]:{compositeFilter:{op:EU(n.op),filters:r}}}(t):Oe(54877,{filter:t})}function wU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,r,s,a=ze.min(),c=ze.min(),u=Tn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.wt=e}}function TU(t){const e=yU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(){this.Cn=new AU}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(_o.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(_o.min())}updateCollectionGroup(e,n,r){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class AU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new sn(bt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new sn(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},II=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(II,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new pc(0)}static lr(){return new pc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="LruGarbageCollector",CU=1048576;function cS([t,e],[n,r]){const s=$e(t,n);return s===0?$e(e,r):s}class RU{constructor(e){this.Er=e,this.buffer=new sn(cS),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(lS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xc(n)?we(lS,"Ignoring IndexedDB error during garbage collection: ",n):await wc(n)}await this.mr(3e5)})}}class NU{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(ap.le);const r=new RU(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(aS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aS):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,a,c,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,c=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Ul()<=Qe.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${a} targets in `+(h-u)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:y})))}}function kU(t,e){return new NU(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(){this.changes=new Va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ve.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&id(r.mutation,s,pr.empty(),_t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ze()){const s=va();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let c=Wu();return a.forEach((u,h)=>{c=c.insert(u,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=va();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ze()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,u)=>{n.set(c,u)})})}computeViews(e,n,r,s){let a=Es();const c=rd(),u=function(){return rd()}();return n.forEach((h,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Io)?a=a.insert(f.key,f):p!==void 0?(c.set(f.key,p.mutation.getFieldMask()),id(p.mutation,f,p.mutation.getFieldMask(),_t.now())):c.set(f.key,pr.empty())}),this.recalculateAndSaveOverlays(e,a).next(h=>(h.forEach((f,p)=>c.set(f,p)),n.forEach((f,p)=>{var y;return u.set(f,new MU(p,(y=c.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=rd();let s=new Rt((c,u)=>c-u),a=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const u of c)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let p=r.get(h)||pr.empty();p=u.applyToLocalView(f,p),r.set(h,p);const y=(s.get(u.batchId)||Ze()).add(h);s=s.insert(u.batchId,y)})}).next(()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,y=dI();p.forEach(b=>{if(!a.has(b)){const E=yI(n.get(b),r.get(b));E!==null&&y.set(b,E),a=a.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ve.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(c){return Ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):oI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):ve.resolve(va());let u=wd,h=a;return c.next(f=>ve.forEach(f,(p,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),a.get(p)?ve.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{h=h.insert(p,b)}))).next(()=>this.populateOverlays(e,f,a)).next(()=>this.computeViews(e,h,f,Ze())).next(p=>({batchId:u,changes:uI(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(r=>{let s=Wu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let c=Wu();return this.indexManager.getCollectionParents(e,a).next(u=>ve.forEach(u,h=>{const f=function(y,b){return new Tc(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(p=>{p.forEach((y,b)=>{c=c.insert(y,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(c=>{a.forEach((h,f)=>{const p=f.getKey();c.get(p)===null&&(c=c.insert(p,kn.newInvalidDocument(p)))});let u=Wu();return c.forEach((h,f)=>{const p=a.get(h);p!==void 0&&id(p.mutation,f,pr.empty(),_t.now()),dp(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ve.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Di(s.createTime)}}(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:TU(s.bundledQuery),readTime:Di(s.readTime)}}(n)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.overlays=new Rt(Ie.comparator),this.Qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const r=va();return ve.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),ve.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),ve.resolve()}getOverlaysForCollection(e,n,r){const s=va(),a=n.length+1,c=new Ie(n.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ve.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Rt((f,p)=>f-p);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=a.get(f.largestBatchId);p===null&&(p=va(),a=a.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=va(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=s)););return ve.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new tU(n,r));let a=this.Qr.get(n);a===void 0&&(a=Ze(),this.Qr.set(n,a)),this.Qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.$r=new sn(fn.Ur),this.Kr=new sn(fn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new fn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new fn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Ie(new bt([])),r=new fn(n,e),s=new fn(n,e+1),a=[];return this.Kr.forEachInRange([r,s],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ie(new bt([])),r=new fn(n,e),s=new fn(n,e+1);let a=Ze();return this.Kr.forEachInRange([r,s],c=>{a=a.add(c.key)}),a}containsKey(e){const n=new fn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ie.comparator(e.key,n.key)||$e(e.Zr,n.Zr)}static Wr(e,n){return $e(e.Zr,n.Zr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new sn(fn.Ur)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new eU(a,n,r,s);this.mutationQueue.push(c);for(const u of s)this.Xr=this.Xr.add(new fn(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,n){return ve.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),a=s<0?0:s;return ve.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?pb:this.nr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),s=new fn(n,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,s],c=>{const u=this.ei(c.Zr);a.push(u)}),ve.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new sn($e);return n.forEach(s=>{const a=new fn(s,0),c=new fn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],u=>{r=r.add(u.Zr)})}),ve.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ie.isDocumentKey(a)||(a=a.child(""));const c=new fn(new Ie(a),0);let u=new sn($e);return this.Xr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Zr)),!0)},c),ve.resolve(this.ni(u))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ct(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ve.forEach(n.mutations,s=>{const a=new fn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new fn(n,0),s=this.Xr.firstAfterOrEqual(r);return ve.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.ii=e,this.docs=function(){return new Rt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ve.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(n))}getEntries(e,n){let r=Es();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():kn.newInvalidDocument(s))}),ve.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Es();const c=n.path,u=new Ie(c.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||pz(mz(p),r)<=0||(s.has(p.key)||dp(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return ve.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Oe(9500)}si(e,n){return ve.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BU(this)}getSize(e){return ve.resolve(this.size)}}class BU extends DU{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),ve.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e){this.persistence=e,this.oi=new Va(n=>vb(n),bb),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this._i=0,this.ai=new Tb,this.targetCount=0,this.ui=pc.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ve.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new pc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Tr(n),ve.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.oi.forEach((c,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ve.waitFor(a).next(()=>s)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return ve.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),ve.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),ve.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return ve.resolve(r)}containsKey(e,n){return ve.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.ci={},this.overlays={},this.li=new ap(0),this.hi=!1,this.hi=!0,this.Pi=new LU,this.referenceDelegate=e(this),this.Ti=new jU(this),this.indexManager=new SU,this.remoteDocumentCache=function(s){return new UU(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new xU(n),this.Ei=new PU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new zU(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){we("MemoryPersistence","Starting transaction:",e);const s=new HU(this.li.next());return this.referenceDelegate.di(),r(s).next(a=>this.referenceDelegate.Ai(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ri(e,n){return ve.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class HU extends yz{constructor(e){super(),this.currentSequenceNumber=e}}class Sb{constructor(e){this.persistence=e,this.Vi=new Tb,this.mi=null}static fi(e){return new Sb(e)}get gi(){if(this.mi)return this.mi;throw Oe(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ve.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.gi,r=>{const s=Ie.fromPath(r);return this.pi(e,s).next(a=>{a||n.removeEntry(s,ze.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ve.or([()=>ve.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Om{constructor(e,n){this.persistence=e,this.yi=new Va(r=>_z(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=kU(this,n)}static fi(e,n){return new Om(e,n)}di(){}Ai(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return ve.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(a=>a?ve.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.si(e,c=>this.Dr(e,c,n).next(u=>{u||(r++,a.removeEntry(c,ze.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jf(e.data.value)),n}Dr(e,n,r){return ve.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return ve.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=Ze(),s=Ze();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Ab(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return vL()?8:vz(On())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ws(e,n).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.bs(e,n,s,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new FU;return this.Ss(e,n,c).next(u=>{if(a.result=u,this.fs)return this.Ds(e,n,c,u.size)})}).next(()=>a.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Ul()<=Qe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Bl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ve.resolve()):(Ul()<=Qe.DEBUG&&we("QueryEngine","Query:",Bl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Ul()<=Qe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Bl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(n))):ve.resolve())}ws(e,n){if(QT(n))return ve.resolve(null);let r=ki(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=iv(n,null,"F"),r=ki(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Ze(...a);return this.ys.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.vs(n,u);return this.Cs(n,f,c,h.readTime)?this.ws(e,iv(n,null,"F")):this.Fs(e,f,n,h)}))})))}bs(e,n,r,s){return QT(n)||s.isEqual(ze.min())?ve.resolve(null):this.ys.getDocuments(e,r).next(a=>{const c=this.vs(n,a);return this.Cs(n,c,r,s)?ve.resolve(null):(Ul()<=Qe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bl(n)),this.Fs(e,c,n,fz(s,wd)).next(u=>u))})}vs(e,n){let r=new sn(lI(e));return n.forEach((s,a)=>{dp(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Ul()<=Qe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Bl(n)),this.ys.getDocumentsMatchingQuery(e,n,_o.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="LocalStore",qU=3e8;class GU{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Rt($e),this.Os=new Va(a=>vb(a),bb),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OU(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function YU(t,e,n,r){return new GU(t,e,n,r)}async function kI(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],u=[];let h=Ze();for(const f of s){c.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of a){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next(f=>({ks:f,removedBatchIds:c,addedBatchIds:u}))})})}function KU(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Bs.newChangeBuffer({trackRemovals:!0});return function(u,h,f,p){const y=f.batch,b=y.keys();let E=ve.resolve();return b.forEach(T=>{E=E.next(()=>p.getEntry(h,T)).next(A=>{const R=f.docVersions.get(T);ct(R!==null,48541),A.version.compareTo(R)<0&&(y.applyToRemoteDocument(A,f),A.isValidDocument()&&(A.setReadTime(f.commitVersion),p.addEntry(A)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(h,y))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function DI(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function XU(t,e){const n=Ue(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const u=[];e.targetChanges.forEach((p,y)=>{const b=s.get(y);if(!b)return;u.push(n.Ti.removeMatchingKeys(a,p.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(a,p.addedDocuments,y)));let E=b.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(Tn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),s=s.insert(y,E),function(A,R,k){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=qU?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(b,E,p)&&u.push(n.Ti.updateTargetData(a,E))});let h=Es(),f=Ze();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))}),u.push(WU(a,c,e.documentUpdates).next(p=>{h=p.qs,f=p.Qs})),!r.isEqual(ze.min())){const p=n.Ti.getLastRemoteSnapshotVersion(a).next(y=>n.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));u.push(p)}return ve.waitFor(u).next(()=>c.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(a=>(n.xs=s,a))}function WU(t,e,n){let r=Ze(),s=Ze();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let c=Es();return n.forEach((u,h)=>{const f=a.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),h.isNoDocument()&&h.version.isEqual(ze.min())?(e.removeEntry(u,h.readTime),c=c.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),c=c.insert(u,h)):we(Cb,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{qs:c,Qs:s}})}function QU(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pb),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZU(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(a=>a?(s=a,ve.resolve(s)):n.Ti.allocateTargetId(r).next(c=>(s=new co(e,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function cv(t,e,n){const r=Ue(t),s=r.xs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!xc(c))throw c;we(Cb,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function uS(t,e,n){const r=Ue(t);let s=ze.min(),a=Ze();return r.persistence.runTransaction("Execute query","readwrite",c=>function(h,f,p){const y=Ue(h),b=y.Os.get(p);return b!==void 0?ve.resolve(y.xs.get(b)):y.Ti.getTargetData(f,p)}(r,c,ki(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,u.targetId).next(h=>{a=h})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,n?s:ze.min(),n?a:Ze())).next(u=>(JU(r,Uz(e),u),{documents:u,$s:a})))}function JU(t,e,n){let r=t.Ns.get(e)||ze.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ns.set(e,r)}class dS{constructor(){this.activeTargetIds=qz()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eB{constructor(){this.xo=new dS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new dS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="ConnectivityMonitor";class fS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(hS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(hS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf=null;function uv(){return Uf===null?Uf=function(){return 268435456+Math.round(2147483648*Math.random())}():Uf++,"0x"+Uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="RestConnection",nB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rB{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Rm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,a){const c=uv(),u=this.jo(e,n.toUriEncodedString());we(sy,`Sending RPC '${e}' ${c}:`,u,r);const h={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(h,s,a);const{host:f}=new URL(u),p=Pa(f);return this.Jo(e,u,h,r,p).then(y=>(we(sy,`Received RPC '${e}' ${c}: `,y),y),y=>{throw dc(sy,`RPC '${e}' ${c} failed with error: `,y,"url: ",u,"request:",r),y})}Yo(e,n,r,s,a,c){return this.zo(e,n,r,s,a)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ec}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}jo(e,n){const r=nB[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class sB extends rB{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const c=uv();return new Promise((u,h)=>{const f=new OR;f.setWithCredentials(!0),f.listenOnce(PR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Zf.NO_ERROR:const y=f.getResponseJson();we(Rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),u(y);break;case Zf.TIMEOUT:we(Rn,`RPC '${e}' ${c} timed out`),h(new xe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Zf.HTTP_ERROR:const b=f.getStatus();if(we(Rn,`RPC '${e}' ${c} failed with status:`,b,"response text:",f.getResponseText()),b>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const T=E?.error;if(T&&T.status&&T.message){const A=function(k){const z=k.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(z)>=0?z:ye.UNKNOWN}(T.status);h(new xe(A,T.message))}else h(new xe(ye.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new xe(ye.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{h_:e,streamId:c,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{we(Rn,`RPC '${e}' ${c} completed.`)}});const p=JSON.stringify(s);we(Rn,`RPC '${e}' ${c} sending request:`,s),f.send(n,"POST",p,r,15)})}I_(e,n,r){const s=uv(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=zR(),u=LR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Ho(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const p=a.join("");we(Rn,`Creating RPC '${e}' stream ${s}: ${p}`,h);const y=c.createWebChannel(p,h);this.E_(y);let b=!1,E=!1;const T=new iB({Zo:R=>{E?we(Rn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(b||(we(Rn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),b=!0),we(Rn,`RPC '${e}' stream ${s} sending:`,R),y.send(R))},Xo:()=>y.close()}),A=(R,k,z)=>{R.listen(k,B=>{try{z(B)}catch(U){setTimeout(()=>{throw U},0)}})};return A(y,Xu.EventType.OPEN,()=>{E||(we(Rn,`RPC '${e}' stream ${s} transport opened.`),T.__())}),A(y,Xu.EventType.CLOSE,()=>{E||(E=!0,we(Rn,`RPC '${e}' stream ${s} transport closed`),T.u_(),this.d_(y))}),A(y,Xu.EventType.ERROR,R=>{E||(E=!0,dc(Rn,`RPC '${e}' stream ${s} transport errored. Name:`,R.name,"Message:",R.message),T.u_(new xe(ye.UNAVAILABLE,"The operation could not be completed")))}),A(y,Xu.EventType.MESSAGE,R=>{var k;if(!E){const z=R.data[0];ct(!!z,16349);const B=z,U=B?.error||((k=B[0])===null||k===void 0?void 0:k.error);if(U){we(Rn,`RPC '${e}' stream ${s} received error:`,U);const Y=U.status;let X=function(I){const j=Kt[I];if(j!==void 0)return bI(j)}(Y),D=U.message;X===void 0&&(X=ye.INTERNAL,D="Unknown error status: "+Y+" with message "+U.message),E=!0,T.u_(new xe(X,D)),y.close()}else we(Rn,`RPC '${e}' stream ${s} received:`,z),T.c_(z)}}),A(u,VR.STAT_EVENT,R=>{R.stat===Qy.PROXY?we(Rn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Qy.NOPROXY&&we(Rn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.a_()},0),T}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function oy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t){return new cU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n,r=1e3,s=1.5,a=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=a,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="PersistentStream";class OI{constructor(e,n,r,s,a,c,u,h){this.xi=e,this.S_=r,this.D_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new MI(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(_s(n.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new xe(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(mS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(mS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oB extends OI{constructor(e,n,r,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=hU(this.serializer,e),r=function(a){if(!("targetChange"in a))return ze.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ze.min():c.readTime?Di(c.readTime):ze.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=lv(this.serializer),n.addTarget=function(a,c){let u;const h=c.target;if(u=nv(h)?{documents:pU(a,h)}:{query:gU(a,h).gt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=wI(a,c.resumeToken);const f=sv(a,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(ze.min())>0){u.readTime=Mm(a,c.snapshotVersion.toTimestamp());const f=sv(a,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=vU(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=lv(this.serializer),n.removeTarget=e,this.Q_(n)}}class aB extends OI{constructor(e,n,r,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,c),this.serializer=a}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=mU(e.writeResults,e.commitTime),r=Di(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=lv(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fU(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{}class cB extends lB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,ov(n,r),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new xe(ye.UNKNOWN,a.toString())})}Yo(e,n,r,s,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Yo(e,ov(n,r),s,c,u,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(ye.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class uB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(_s(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="RemoteStore";class dB{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=a,this.Ra.No(c=>{r.enqueueAndForget(async()=>{La(this)&&(we(ka,"Restarting streams for network reachability change."),await async function(h){const f=Ue(h);f.da.add(4),await Yd(f),f.Va.set("Unknown"),f.da.delete(4),await yp(f)}(this))})}),this.Va=new uB(r,s)}}async function yp(t){if(La(t))for(const e of t.Aa)await e(!0)}async function Yd(t){for(const e of t.Aa)await e(!1)}function PI(t,e){const n=Ue(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),kb(n)?Nb(n):Sc(n).N_()&&Ib(n,e))}function Rb(t,e){const n=Ue(t),r=Sc(n);n.Ea.delete(e),r.N_()&&VI(n,e),n.Ea.size===0&&(r.N_()?r.k_():La(n)&&n.Va.set("Unknown"))}function Ib(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sc(t).Z_(e)}function VI(t,e){t.ma.Ke(e),Sc(t).X_(e)}function Nb(t){t.ma=new sU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Sc(t).start(),t.Va.ca()}function kb(t){return La(t)&&!Sc(t).O_()&&t.Ea.size>0}function La(t){return Ue(t).da.size===0}function LI(t){t.ma=void 0}async function hB(t){t.Va.set("Online")}async function fB(t){t.Ea.forEach((e,n)=>{Ib(t,e)})}async function mB(t,e){LI(t),kb(t)?(t.Va.Pa(e),Nb(t)):t.Va.set("Unknown")}async function pB(t,e,n){if(t.Va.set("Online"),e instanceof EI&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const u of a.targetIds)s.Ea.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ea.delete(u),s.ma.removeTarget(u))}(t,e)}catch(r){we(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pm(t,r)}else if(e instanceof nm?t.ma.Xe(e):e instanceof _I?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ze.min()))try{const r=await DI(t.localStore);n.compareTo(r)>=0&&await function(a,c){const u=a.ma.It(c);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const p=a.Ea.get(f);p&&a.Ea.set(f,p.withResumeToken(h.resumeToken,c))}}),u.targetMismatches.forEach((h,f)=>{const p=a.Ea.get(h);if(!p)return;a.Ea.set(h,p.withResumeToken(Tn.EMPTY_BYTE_STRING,p.snapshotVersion)),VI(a,h);const y=new co(p.target,h,f,p.sequenceNumber);Ib(a,y)}),a.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){we(ka,"Failed to raise snapshot:",r),await Pm(t,r)}}async function Pm(t,e,n){if(!xc(e))throw e;t.da.add(1),await Yd(t),t.Va.set("Offline"),n||(n=()=>DI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(ka,"Retrying IndexedDB access"),await n(),t.da.delete(1),await yp(t)})}function zI(t,e){return e().catch(n=>Pm(t,n,e))}async function vp(t){const e=Ue(t),n=To(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:pb;for(;gB(e);)try{const s=await QU(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,yB(e,s)}catch(s){await Pm(e,s)}UI(e)&&BI(e)}function gB(t){return La(t)&&t.Ia.length<10}function yB(t,e){t.Ia.push(e);const n=To(t);n.N_()&&n.ea&&n.ta(e.mutations)}function UI(t){return La(t)&&!To(t).O_()&&t.Ia.length>0}function BI(t){To(t).start()}async function vB(t){To(t).ia()}async function bB(t){const e=To(t);for(const n of t.Ia)e.ta(n.mutations)}async function _B(t,e,n){const r=t.Ia.shift(),s=Eb.from(r,e,n);await zI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await vp(t)}async function EB(t,e){e&&To(t).ea&&await async function(r,s){if(function(c){return rU(c)&&c!==ye.ABORTED}(s.code)){const a=r.Ia.shift();To(r).L_(),await zI(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await vp(r)}}(t,e),UI(t)&&BI(t)}async function pS(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),we(ka,"RemoteStore received new credentials");const r=La(n);n.da.add(3),await Yd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await yp(n)}async function wB(t,e){const n=Ue(t);e?(n.da.delete(2),await yp(n)):e||(n.da.add(2),await Yd(n),n.Va.set("Unknown"))}function Sc(t){return t.fa||(t.fa=function(n,r,s){const a=Ue(n);return a.oa(),new oB(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{e_:hB.bind(null,t),n_:fB.bind(null,t),i_:mB.bind(null,t),Y_:pB.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),kb(t)?Nb(t):t.Va.set("Unknown")):(await t.fa.stop(),LI(t))})),t.fa}function To(t){return t.ga||(t.ga=function(n,r,s){const a=Ue(n);return a.oa(),new aB(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:vB.bind(null,t),i_:EB.bind(null,t),na:bB.bind(null,t),ra:_B.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await vp(t)):(await t.ga.stop(),t.Ia.length>0&&(we(ka,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const c=Date.now()+r,u=new Db(e,n,c,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mb(t,e){if(_s("AsyncQueue",`${e}: ${t}`),xc(t))return new xe(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{static emptySet(e){return new nc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ie.comparator(n.key,r.key):(n,r)=>Ie.comparator(n.key,r.key),this.keyedMap=Wu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.pa=new Rt(Ie.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Oe(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class gc{constructor(e,n,r,s,a,c,u,h,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const c=[];return n.forEach(u=>{c.push({type:0,doc:u})}),new gc(e,n,nc.emptySet(n),c,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class TB{constructor(){this.queries=yS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ue(n),a=s.queries;s.queries=yS(),a.forEach((c,u)=>{for(const h of u.Sa)h.onError(r)})})(this,new xe(ye.ABORTED,"Firestore shutting down"))}}function yS(){return new Va(t=>aI(t),up)}async function SB(t,e){const n=Ue(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Da()&&e.va()&&(r=2):(a=new xB,r=e.va()?0:1);try{switch(r){case 0:a.ba=await n.onListen(s,!0);break;case 1:a.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(c){const u=Mb(c,`Initialization of query '${Bl(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.Sa.push(e),e.Fa(n.onlineState),a.ba&&e.Ma(a.ba)&&Ob(n)}async function AB(t,e){const n=Ue(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?s=e.va()?0:1:!a.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CB(t,e){const n=Ue(t);let r=!1;for(const s of e){const a=s.query,c=n.queries.get(a);if(c){for(const u of c.Sa)u.Ma(s)&&(r=!0);c.ba=s}}r&&Ob(n)}function RB(t,e,n){const r=Ue(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function Ob(t){t.Ca.forEach(e=>{e.next()})}var dv,vS;(vS=dv||(dv={})).xa="default",vS.Cache="cache";class IB{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==dv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.key=e}}class HI{constructor(e){this.key=e}}class NB{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.Za=lI(e),this.Xa=new nc(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new gS,s=n?n.Xa:this.Xa;let a=n?n.mutatedKeys:this.mutatedKeys,c=s,u=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const b=s.get(p),E=dp(this.query,y)?y:null,T=!!b&&this.mutatedKeys.has(b.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;b&&E?b.data.isEqual(E.data)?T!==A&&(r.track({type:3,doc:E}),R=!0):this.ru(b,E)||(r.track({type:2,doc:E}),R=!0,(h&&this.Za(E,h)>0||f&&this.Za(E,f)<0)&&(u=!0)):!b&&E?(r.track({type:0,doc:E}),R=!0):b&&!E&&(r.track({type:1,doc:b}),R=!0,(h||f)&&(u=!0)),R&&(E?(c=c.add(E),a=A?a.add(p):a.delete(p)):(c=c.delete(p),a=a.delete(p)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{Xa:c,nu:r,Cs:u,mutatedKeys:a}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((p,y)=>function(E,T){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Vt:R})}};return A(E)-A(T)}(p.type,y.type)||this.Za(p.doc,y.doc)),this.iu(r),s=s!=null&&s;const u=n&&!s?this.su():[],h=this.Ya.size===0&&this.current&&!s?1:0,f=h!==this.Ja;return this.Ja=h,c.length!==0||f?{snapshot:new gc(this.query,e.Xa,a,c,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:u}:{ou:u}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new gS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new HI(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new jI(r))}),n}au(e){this.Ha=e.$s,this.Ya=Ze();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return gc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Pb="SyncEngine";class kB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DB{constructor(e){this.key=e,this.cu=!1}}class MB{constructor(e,n,r,s,a,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Va(u=>aI(u),up),this.Pu=new Map,this.Tu=new Set,this.Iu=new Rt(Ie.comparator),this.Eu=new Map,this.du=new Tb,this.Au={},this.Ru=new Map,this.Vu=pc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function OB(t,e,n=!0){const r=KI(t);let s;const a=r.hu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.uu()):s=await FI(r,e,n,!0),s}async function PB(t,e){const n=KI(t);await FI(n,e,!0,!1)}async function FI(t,e,n,r){const s=await ZU(t.localStore,ki(e)),a=s.targetId,c=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await VB(t,e,a,c==="current",s.resumeToken)),t.isPrimaryClient&&n&&PI(t.remoteStore,s),u}async function VB(t,e,n,r,s){t.fu=(y,b,E)=>async function(A,R,k,z){let B=R.view.tu(k);B.Cs&&(B=await uS(A.localStore,R.query,!1).then(({documents:D})=>R.view.tu(D,B)));const U=z&&z.targetChanges.get(R.targetId),Y=z&&z.targetMismatches.get(R.targetId)!=null,X=R.view.applyChanges(B,A.isPrimaryClient,U,Y);return _S(A,R.targetId,X.ou),X.snapshot}(t,y,b,E);const a=await uS(t.localStore,e,!0),c=new NB(e,a.$s),u=c.tu(a.documents),h=Gd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=c.applyChanges(u,t.isPrimaryClient,h);_S(t,n,f.ou);const p=new kB(e,n,c);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function LB(t,e,n){const r=Ue(t),s=r.hu.get(e),a=r.Pu.get(s.targetId);if(a.length>1)return r.Pu.set(s.targetId,a.filter(c=>!up(c,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rb(r.remoteStore,s.targetId),hv(r,s.targetId)}).catch(wc)):(hv(r,s.targetId),await cv(r.localStore,s.targetId,!0))}async function zB(t,e){const n=Ue(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rb(n.remoteStore,r.targetId))}async function UB(t,e,n){const r=GB(t);try{const s=await function(c,u){const h=Ue(c),f=_t.now(),p=u.reduce((E,T)=>E.add(T.key),Ze());let y,b;return h.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=Es(),A=Ze();return h.Bs.getEntries(E,p).next(R=>{T=R,T.forEach((k,z)=>{z.isValidDocument()||(A=A.add(k))})}).next(()=>h.localDocuments.getOverlayedDocuments(E,T)).next(R=>{y=R;const k=[];for(const z of u){const B=Zz(z,y.get(z.key).overlayedDocument);B!=null&&k.push(new Io(z.key,B,ZR(B.value.mapValue),gr.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,k,u)}).next(R=>{b=R;const k=R.applyToLocalDocumentSet(y,A);return h.documentOverlayCache.saveOverlays(E,R.batchId,k)})}).then(()=>({batchId:b.batchId,changes:uI(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(c,u,h){let f=c.Au[c.currentUser.toKey()];f||(f=new Rt($e)),f=f.insert(u,h),c.Au[c.currentUser.toKey()]=f}(r,s.batchId,n),await Kd(r,s.changes),await vp(r.remoteStore)}catch(s){const a=Mb(s,"Failed to persist write");n.reject(a)}}async function $I(t,e){const n=Ue(t);try{const r=await XU(n.localStore,e);e.targetChanges.forEach((s,a)=>{const c=n.Eu.get(a);c&&(ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.cu=!0:s.modifiedDocuments.size>0?ct(c.cu,14607):s.removedDocuments.size>0&&(ct(c.cu,42227),c.cu=!1))}),await Kd(n,r,e)}catch(r){await wc(r)}}function bS(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((a,c)=>{const u=c.view.Fa(e);u.snapshot&&s.push(u.snapshot)}),function(c,u){const h=Ue(c);h.onlineState=u;let f=!1;h.queries.forEach((p,y)=>{for(const b of y.Sa)b.Fa(u)&&(f=!0)}),f&&Ob(h)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BB(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),a=s&&s.key;if(a){let c=new Rt(Ie.comparator);c=c.insert(a,kn.newNoDocument(a,ze.min()));const u=Ze().add(a),h=new pp(ze.min(),new Map,new Rt($e),c,u);await $I(r,h),r.Iu=r.Iu.remove(a),r.Eu.delete(e),Vb(r)}else await cv(r.localStore,e,!1).then(()=>hv(r,e,n)).catch(wc)}async function jB(t,e){const n=Ue(t),r=e.batch.batchId;try{const s=await KU(n.localStore,e);GI(n,r,null),qI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kd(n,s)}catch(s){await wc(s)}}async function HB(t,e,n){const r=Ue(t);try{const s=await function(c,u){const h=Ue(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next(y=>(ct(y!==null,37113),p=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>h.localDocuments.getDocuments(f,p))})}(r.localStore,e);GI(r,e,n),qI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Kd(r,s)}catch(s){await wc(s)}}function qI(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function GI(t,e,n){const r=Ue(t);let s=r.Au[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function hv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||YI(t,r)})}function YI(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Rb(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Vb(t))}function _S(t,e,n){for(const r of n)r instanceof jI?(t.du.addReference(r.key,e),FB(t,r)):r instanceof HI?(we(Pb,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||YI(t,r.key)):Oe(19791,{pu:r})}function FB(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(we(Pb,"New document in limbo: "+n),t.Tu.add(r),Vb(t))}function Vb(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ie(bt.fromString(e)),r=t.Vu.next();t.Eu.set(r,new DB(n)),t.Iu=t.Iu.insert(n,r),PI(t.remoteStore,new co(ki(sI(n.path)),r,"TargetPurposeLimboResolution",ap.le))}}async function Kd(t,e,n){const r=Ue(t),s=[],a=[],c=[];r.hu.isEmpty()||(r.hu.forEach((u,h)=>{c.push(r.fu(h,e,n).then(f=>{var p;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(p=n?.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){s.push(f);const y=Ab.Rs(h.targetId,f);a.push(y)}}))}),await Promise.all(c),r.lu.Y_(s),await async function(h,f){const p=Ue(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ve.forEach(f,b=>ve.forEach(b.ds,E=>p.persistence.referenceDelegate.addReference(y,b.targetId,E)).next(()=>ve.forEach(b.As,E=>p.persistence.referenceDelegate.removeReference(y,b.targetId,E)))))}catch(y){if(!xc(y))throw y;we(Cb,"Failed to update sequence numbers: "+y)}for(const y of f){const b=y.targetId;if(!y.fromCache){const E=p.xs.get(b),T=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(T);p.xs=p.xs.insert(b,A)}}}(r.localStore,a))}async function $B(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){we(Pb,"User change. New user:",e.toKey());const r=await kI(n.localStore,e);n.currentUser=e,function(a,c){a.Ru.forEach(u=>{u.forEach(h=>{h.reject(new xe(ye.CANCELLED,c))})}),a.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Kd(n,r.ks)}}function qB(t,e){const n=Ue(t),r=n.Eu.get(e);if(r&&r.cu)return Ze().add(r.key);{let s=Ze();const a=n.Pu.get(e);if(!a)return s;for(const c of a){const u=n.hu.get(c);s=s.unionWith(u.view.eu)}return s}}function KI(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$I.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BB.bind(null,e),e.lu.Y_=CB.bind(null,e.eventManager),e.lu.gu=RB.bind(null,e.eventManager),e}function GB(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HB.bind(null,e),e}class Vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return YU(this.persistence,new $U,e.initialUser,this.serializer)}Su(e){return new NI(Sb.fi,this.serializer)}bu(e){return new eB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vm.provider={build:()=>new Vm};class YB extends Vm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ct(this.persistence.referenceDelegate instanceof Om,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IU(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new NI(r=>Om.fi(r,n),this.serializer)}}class fv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$B.bind(null,this.syncEngine),await wB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TB}()}createDatastore(e){const n=gp(e.databaseInfo.databaseId),r=function(a){return new sB(a)}(e.databaseInfo);return function(a,c,u,h){return new cB(a,c,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,c,u){return new dB(r,s,a,c,u)}(this.localStore,this.datastore,e.asyncQueue,n=>bS(this.syncEngine,n,0),function(){return fS.C()?new fS:new tB}())}createSyncEngine(e,n){return function(s,a,c,u,h,f,p){const y=new MB(s,a,c,u,h,f);return p&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Ue(s);we(ka,"RemoteStore shutting down."),a.da.add(5),await Yd(a),a.Ra.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fv.provider={build:()=>new fv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="FirestoreClient";class XB{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=In.UNAUTHENTICATED,this.clientId=HR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{we(So,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(we(So,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mb(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ay(t,e){t.asyncQueue.verifyOperationInProgress(),we(So,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await kI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ES(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WB(t);we(So,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>pS(e.remoteStore,s)),t._onlineComponents=e}async function WB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(So,"Using user provided OfflineComponentProvider");try{await ay(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ye.FAILED_PRECONDITION||s.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;dc("Error using user provided cache. Falling back to memory cache: "+n),await ay(t,new Vm)}}else we(So,"Using default OfflineComponentProvider"),await ay(t,new YB(void 0));return t._offlineComponents}async function XI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(So,"Using user provided OnlineComponentProvider"),await ES(t,t._uninitializedComponentsProvider._online)):(we(So,"Using default OnlineComponentProvider"),await ES(t,new fv))),t._onlineComponents}function QB(t){return XI(t).then(e=>e.syncEngine)}async function ZB(t){const e=await XI(t),n=e.eventManager;return n.onListen=OB.bind(null,e.syncEngine),n.onUnlisten=LB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zB.bind(null,e.syncEngine),n}function JB(t,e,n={}){const r=new go;return t.asyncQueue.enqueueAndForget(async()=>function(a,c,u,h,f){const p=new KB({next:b=>{p.xu(),c.enqueueAndForget(()=>AB(a,y)),b.fromCache&&h.source==="server"?f.reject(new xe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),y=new IB(u,p,{includeMetadataChanges:!0,Qa:!0});return SB(a,y)}(await ZB(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t,e,n){if(!n)throw new xe(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e7(t,e,n,r){if(e===!0&&r===!0)throw new xe(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xS(t){if(!Ie.isDocumentKey(t))throw new xe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function TS(t){if(Ie.isDocumentKey(t))throw new xe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe(12329,{type:typeof t})}function Da(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bp(t);throw new xe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firestore.googleapis.com",SS=!0;class AS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZI,this.ssl=SS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:SS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=II;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CU)throw new xe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _p{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iz;switch(r.type){case"firstParty":return new lz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wS.get(n);r&&(we("ComponentProvider","Removing Datastore"),wS.delete(n),r.terminate())}(this),Promise.resolve()}}function t7(t,e,n,r={}){var s;t=Da(t,_p);const a=Pa(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),h=`${e}:${n}`;a&&(lb(`https://${h}`),cb("Firestore",!0)),c.host!==ZI&&c.host!==h&&dc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:h,ssl:a,emulatorOptions:r});if(!Ra(f,u)&&(t._setSettings(f),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=In.MOCK_USER;else{p=cL(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new xe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new In(b)}t._authCredentials=new sz(new BR(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new za(this.firestore,e,this._query)}}class yr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yr(this.firestore,e,this._key)}}class yo extends za{constructor(e,n,r){super(e,n,sI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yr(this.firestore,null,new Ie(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function Lb(t,e,...n){if(t=Vt(t),QI("collection","path",e),t instanceof _p){const r=bt.fromString(e,...n);return TS(r),new yo(t,null,r)}{if(!(t instanceof yr||t instanceof yo))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bt.fromString(e,...n));return TS(r),new yo(t.firestore,null,r)}}function Ac(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=HR.newId()),QI("doc","path",e),t instanceof _p){const r=bt.fromString(e,...n);return xS(r),new yr(t,null,new Ie(r))}{if(!(t instanceof yr||t instanceof yo))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(bt.fromString(e,...n));return xS(r),new yr(t.firestore,t instanceof yo?t.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="AsyncQueue";class RS{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new MI(this,"async_queue_retry"),this.rc=()=>{const r=oy();r&&we(CS,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=oy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=oy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new go;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!xc(e))throw e;we(CS,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,_s("INTERNAL UNHANDLED ERROR: ",IS(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=Db.createAndSchedule(this,e,n,r,a=>this.uc(a));return this.Zu.push(s),s}oc(){this.Xu&&Oe(47125,{cc:IS(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function IS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xd extends _p{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new RS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RS(e),this._firestoreClient=void 0,await e}}}function n7(t,e){const n=typeof t=="object"?t:hb(),r=typeof t=="string"?t:Rm,s=op(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=ER("firestore");a&&t7(s,...a)}return s}function zb(t){if(t._terminated)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||r7(t),t._firestoreClient}function r7(t){var e,n,r;const s=t._freezeSettings(),a=function(u,h,f,p){return new xz(u,h,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,WI(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new XB(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(u){const h=u?._online.build();return{_offline:u?._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yc(Tn.fromBase64String(e))}catch(n){throw new xe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yc(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=/^__.*__$/;class s7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Io(e,this.data,this.fieldMask,n,this.fieldTransforms):new qd(e,this.data,n,this.fieldTransforms)}}class JI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Io(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ic:t})}}class Hb{constructor(e,n,r,s,a,c){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ec(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Hb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Lm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(eN(this.Ic)&&i7.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class o7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gp(e)}bc(e,n,r,s=!1){return new Hb({Ic:e,methodName:n,wc:r,path:xn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fb(t){const e=t._freezeSettings(),n=gp(t._databaseId);return new o7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tN(t,e,n,r,s,a={}){const c=t.bc(a.merge||a.mergeFields?2:0,e,n,s);$b("Data must be an object, but it was:",c,r);const u=nN(r,c);let h,f;if(a.merge)h=new pr(c.fieldMask),f=c.fieldTransforms;else if(a.mergeFields){const p=[];for(const y of a.mergeFields){const b=mv(e,y,n);if(!c.contains(b))throw new xe(ye.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);iN(p,b)||p.push(b)}h=new pr(p),f=c.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=c.fieldTransforms;return new s7(new Wn(u),h,f)}class wp extends Ub{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wp}}function a7(t,e,n,r){const s=t.bc(1,e,n);$b("Data must be an object, but it was:",s,r);const a=[],c=Wn.empty();Ro(r,(h,f)=>{const p=qb(e,h,n);f=Vt(f);const y=s.mc(p);if(f instanceof wp)a.push(p);else{const b=Wd(f,y);b!=null&&(a.push(p),c.set(p,b))}});const u=new pr(a);return new JI(c,u,s.fieldTransforms)}function l7(t,e,n,r,s,a){const c=t.bc(1,e,n),u=[mv(e,r,n)],h=[s];if(a.length%2!=0)throw new xe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<a.length;b+=2)u.push(mv(e,a[b])),h.push(a[b+1]);const f=[],p=Wn.empty();for(let b=u.length-1;b>=0;--b)if(!iN(f,u[b])){const E=u[b];let T=h[b];T=Vt(T);const A=c.mc(E);if(T instanceof wp)f.push(E);else{const R=Wd(T,A);R!=null&&(f.push(E),p.set(E,R))}}const y=new pr(f);return new JI(p,y,c.fieldTransforms)}function c7(t,e,n,r=!1){return Wd(n,t.bc(r?4:3,e))}function Wd(t,e){if(rN(t=Vt(t)))return $b("Unsupported field value:",e,t),nN(t,e);if(t instanceof Ub)return function(r,s){if(!eN(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const a=[];let c=0;for(const u of r){let h=Wd(u,s.fc(c));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),c++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=_t.fromDate(r);return{timestampValue:Mm(s.serializer,a)}}if(r instanceof _t){const a=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mm(s.serializer,a)}}if(r instanceof Bb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yc)return{bytesValue:wI(s.serializer,r._byteString)};if(r instanceof yr){const a=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw s.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:xb(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jb)return function(c,u){return{mapValue:{fields:{[WR]:{stringValue:QR},[Im]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.gc("VectorValues must only contain numeric values.");return _b(u.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${bp(r)}`)}(t,e)}function nN(t,e){const n={};return $R(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(t,(r,s)=>{const a=Wd(s,e.Ac(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function rN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Bb||t instanceof yc||t instanceof yr||t instanceof Ub||t instanceof jb)}function $b(t,e,n){if(!rN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=bp(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function mv(t,e,n){if((e=Vt(e))instanceof Ep)return e._internalPath;if(typeof e=="string")return qb(t,e);throw Lm("Field path arguments must be of type string or ",t,!1,void 0,n)}const u7=new RegExp("[~\\*/\\[\\]]");function qb(t,e,n){if(e.search(u7)>=0)throw Lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ep(...e.split("."))._internalPath}catch{throw Lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lm(t,e,n,r,s){const a=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(a||c)&&(h+=" (found",a&&(h+=` in field ${r}`),c&&(h+=` in document ${s}`),h+=")"),new xe(ye.INVALID_ARGUMENT,u+t+h)}function iN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class d7 extends sN{data(){return super.data()}}function xp(t,e){return typeof e=="string"?qb(t,e):e instanceof Ep?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gb{}class oN extends Gb{}function f7(t,e,...n){let r=[];e instanceof Gb&&r.push(e),r=r.concat(n),function(a){const c=a.filter(h=>h instanceof Yb).length,u=a.filter(h=>h instanceof Tp).length;if(c>1||c>0&&u>0)throw new xe(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Tp extends oN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Tp(e,n,r)}_apply(e){const n=this._parse(e);return aN(e._query,n),new za(e.firestore,e.converter,rv(e._query,n))}_parse(e){const n=Fb(e.firestore);return function(a,c,u,h,f,p,y){let b;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){kS(y,p);const T=[];for(const A of y)T.push(NS(h,a,A));b={arrayValue:{values:T}}}else b=NS(h,a,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||kS(y,p),b=c7(u,c,y,p==="in"||p==="not-in");return Qt.create(f,p,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function m7(t,e,n){const r=e,s=xp("where",t);return Tp._create(s,r,n)}class Yb extends Gb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yb(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let c=s;const u=a.getFlattenedFilters();for(const h of u)aN(c,h),c=rv(c,h)}(e._query,n),new za(e.firestore,e.converter,rv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kb extends oN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kb(e,n)}_apply(e){const n=function(s,a,c){if(s.startAt!==null)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ad(a,c)}(e._query,this._field,this._direction);return new za(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Tc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function p7(t,e="asc"){const n=e,r=xp("orderBy",t);return Kb._create(r,n)}function NS(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new xe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oI(e)&&n.indexOf("/")!==-1)throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(bt.fromString(n));if(!Ie.isDocumentKey(r))throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qT(t,new Ie(r))}if(n instanceof yr)return qT(t,n._key);throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bp(n)}.`)}function kS(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aN(t,e){const n=function(s,a){for(const c of s)for(const u of c.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class g7{convertValue(e,n="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ro(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Im].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(c=>jt(c.doubleValue));return new jb(a)}convertGeoPoint(e){return new Bb(jt(e.latitude),jt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xd(e));default:return null}}convertTimestamp(e){const n=Eo(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=bt.fromString(e);ct(RI(r),9688,{name:e});const s=new Td(r.get(1),r.get(3)),a=new Ie(r.popFirst(5));return s.isEqual(n)||_s(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class y7 extends sN{constructor(e,n,r,s,a,c){super(e,n,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class rm extends y7{data(e={}){return super.data(e)}}class v7{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rm(this._firestore,this._userDataWriter,r.key,r,new Bf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(u=>{const h=new rm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Bf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>a||u.type!==3).map(u=>{const h=new rm(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Bf(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:b7(u.type),doc:h,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function b7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:t})}}class _7 extends g7{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,n)}}function Xb(t){t=Da(t,za);const e=Da(t.firestore,Xd),n=zb(e),r=new _7(e);return h7(t._query),JB(n,t._query).then(s=>new v7(e,r,t,s))}function Wb(t,e,n){t=Da(t,yr);const r=Da(t.firestore,Xd),s=lN(t.converter,e,n);return Qb(r,[tN(Fb(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gr.none())])}function E7(t){return Qb(Da(t.firestore,Xd),[new mp(t._key,gr.none())])}function Qb(t,e){return function(r,s){const a=new go;return r.asyncQueue.enqueueAndForget(async()=>UB(await QB(r),s,a)),a.promise}(zb(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fb(e)}set(e,n,r){this._verifyNotCommitted();const s=ly(e,this._firestore),a=lN(s.converter,n,r),c=tN(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,gr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=ly(e,this._firestore);let c;return c=typeof(n=Vt(n))=="string"||n instanceof Ep?l7(this._dataReader,"WriteBatch.update",a._key,n,r,s):a7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(c.toMutation(a._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ly(e,this._firestore);return this._mutations=this._mutations.concat(new mp(n._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ly(t,e){if((t=Vt(t)).firestore!==e)throw new xe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t){return zb(t=Da(t,Xd)),new w7(t,e=>Qb(t,e))}(function(e,n=!0){(function(s){Ec=s})(_c),Ia(new bo("firestore",(r,{instanceIdentifier:s,options:a})=>{const c=r.getProvider("app").getImmediate(),u=new Xd(new oz(r.getProvider("auth-internal")),new cz(c,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new xe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(f.options.projectId,p)}(c,s),c);return a=Object.assign({useFetchStreams:n},a),u._setSettings(a),u},"PUBLIC").setMultipleInstances(!0)),Ni(MT,OT,e),Ni(MT,OT,"esm2017")})();function Zb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x7=uN,dN=new Fd("auth","Firebase",uN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new ub("@firebase/auth");function T7(t,...e){zm.logLevel<=Qe.WARN&&zm.warn(`Auth (${_c}): ${t}`,...e)}function im(t,...e){zm.logLevel<=Qe.ERROR&&zm.error(`Auth (${_c}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,...e){throw Jb(t,...e)}function Mi(t,...e){return Jb(t,...e)}function hN(t,e,n){const r=Object.assign(Object.assign({},x7()),{[e]:n});return new Fd("auth","Firebase",r).create(e,{appName:t.name})}function gs(t){return hN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dN.create(t,...e)}function Me(t,e,...n){if(!t)throw Jb(e,...n)}function ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw im(e),new Error(e)}function ws(t,e){t||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function S7(){return DS()==="http:"||DS()==="https:"}function DS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S7()||pL()||"connection"in navigator)?navigator.onLine:!0}function C7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=hL()||gL()}get(){return A7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t,e){ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N7=new Qd(3e4,6e4);function No(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ko(t,e,n,r,s={}){return mN(t,s,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const u=$d(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},a);return mL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Pa(t.emulatorConfig.host)&&(f.credentials="include"),fN.fetch()(await pN(t,t.config.apiHost,n,u),f)})}async function mN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},R7),e);try{const s=new D7(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw jf(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const u=a.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw jf(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw jf(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw jf(t,"user-disabled",c);const p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw hN(t,p,f);ri(t,p)}}catch(s){if(s instanceof Bi)throw s;ri(t,"network-request-failed",{message:String(s)})}}async function Zd(t,e,n,r,s={}){const a=await ko(t,e,n,r,s);return"mfaPendingCredential"in a&&ri(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function pN(t,e,n,r){const s=`${e}${n}?${r}`,a=t,c=a.config.emulator?e_(t.config,s):`${t.config.apiScheme}://${s}`;return I7.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function k7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mi(this.auth,"network-request-failed")),N7.get())})}}function jf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Mi(t,e,r);return s.customData._tokenResponse=n,s}function MS(t){return t!==void 0&&t.enterprise!==void 0}class M7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return k7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O7(t,e){return ko(t,"GET","/v2/recaptchaConfig",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P7(t,e){return ko(t,"POST","/v1/accounts:delete",e)}async function Um(t,e){return ko(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V7(t,e=!1){const n=Vt(t),r=await n.getIdToken(e),s=t_(r);Me(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a?.sign_in_provider;return{claims:s,token:r,authTime:sd(cy(s.auth_time)),issuedAtTime:sd(cy(s.iat)),expirationTime:sd(cy(s.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function cy(t){return Number(t)*1e3}function t_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return im("JWT malformed, contained fewer than 3 sections"),null;try{const s=bR(n);return s?JSON.parse(s):(im("Failed to decode base64 JWT payload"),null)}catch(s){return im("Caught error parsing JWT payload as JSON",s?.toString()),null}}function OS(t){const e=t_(t);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bi&&L7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function L7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sd(this.lastLoginAt),this.creationTime=sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Id(t,Um(n,{idToken:r}));Me(s?.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?gN(a.providerUserInfo):[],u=B7(t.providerData,c),h=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!u?.length,p=h?f:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new gv(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function U7(t){const e=Vt(t);await Bm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function B7(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gN(t){return t.map(e=>{var{providerId:n}=e,r=Zb(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j7(t,e){const n=await mN(t,{},async()=>{const r=$d({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,c=await pN(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&Pa(t.emulatorConfig.host)&&(h.credentials="include"),fN.fetch()(c,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function H7(t,e){return ko(t,"POST","/v2/accounts:revokeToken",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=OS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await j7(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,c=new rc;return r&&(Me(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(Me(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Me(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rc,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t,e){Me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ei{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=Zb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new gv(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Id(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V7(this,e)}reload(){return U7(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ei(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(gs(this.auth));const e=await this.getIdToken();return await Id(this,P7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,c,u,h,f,p;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,b=(s=n.email)!==null&&s!==void 0?s:void 0,E=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(c=n.photoURL)!==null&&c!==void 0?c:void 0,A=(u=n.tenantId)!==null&&u!==void 0?u:void 0,R=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,k=(f=n.createdAt)!==null&&f!==void 0?f:void 0,z=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:B,emailVerified:U,isAnonymous:Y,providerData:X,stsTokenManager:D}=n;Me(B&&D,e,"internal-error");const S=rc.fromJSON(this.name,D);Me(typeof B=="string",e,"internal-error"),Zs(y,e.name),Zs(b,e.name),Me(typeof U=="boolean",e,"internal-error"),Me(typeof Y=="boolean",e,"internal-error"),Zs(E,e.name),Zs(T,e.name),Zs(A,e.name),Zs(R,e.name),Zs(k,e.name),Zs(z,e.name);const I=new ei({uid:B,auth:e,email:b,emailVerified:U,displayName:y,isAnonymous:Y,photoURL:T,phoneNumber:E,tenantId:A,stsTokenManager:S,createdAt:k,lastLoginAt:z});return X&&Array.isArray(X)&&(I.providerData=X.map(j=>Object.assign({},j))),R&&(I._redirectEventId=R),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new rc;s.updateFromServerResponse(n);const a=new ei({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Me(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?gN(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!a?.length,u=new rc;u.updateFromIdToken(r);const h=new ei({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new Map;function ps(t){ws(t instanceof Function,"Expected a class definition");let e=PS.get(t);return e?(ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yN.type="NONE";const VS=yN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e,n){return`firebase:${t}:${e}:${n}`}class ic{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=sm(this.userKey,s.apiKey,a),this.fullPersistenceKey=sm("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Um(this.auth,{idToken:e}).catch(()=>{});return n?ei._fromGetAccountInfoResponse(this.auth,n,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ic(ps(VS),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||ps(VS);const c=sm(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(c);if(p){let y;if(typeof p=="string"){const b=await Um(e,{idToken:p}).catch(()=>{});if(!b)break;y=await ei._fromGetAccountInfoResponse(e,b,p)}else y=ei._fromJSON(e,p);f!==a&&(u=y),a=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new ic(a,e,r):(a=h[0],u&&await a._set(c,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(c)}catch{}})),new ic(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xN(e))return"Blackberry";if(TN(e))return"Webos";if(bN(e))return"Safari";if((e.includes("chrome/")||_N(e))&&!e.includes("edge/"))return"Chrome";if(wN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function vN(t=On()){return/firefox\//i.test(t)}function bN(t=On()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _N(t=On()){return/crios\//i.test(t)}function EN(t=On()){return/iemobile/i.test(t)}function wN(t=On()){return/android/i.test(t)}function xN(t=On()){return/blackberry/i.test(t)}function TN(t=On()){return/webos/i.test(t)}function n_(t=On()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function F7(t=On()){var e;return n_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $7(){return yL()&&document.documentMode===10}function SN(t=On()){return n_(t)||wN(t)||TN(t)||xN(t)||/windows phone/i.test(t)||EN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e=[]){let n;switch(t){case"Browser":n=LS(On());break;case"Worker":n=`${LS(On())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${_c}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((c,u)=>{try{const h=e(a);c(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G7(t,e={}){return ko(t,"GET","/v2/passwordPolicy",No(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=6;class K7{constructor(e){var n,r,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:Y7,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,c,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(s=h.containsLowercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zS(this),this.idTokenSubscription=new zS(this),this.beforeStateQueue=new q7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await ic.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Um(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s?._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===u)&&h?.user&&(s=h.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(gs(this));const n=e?Vt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await G7(this),n=new K7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await H7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await ic.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(u,this,"internal-error"),u.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,s);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&T7(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ua(t){return Vt(t)}class zS{constructor(e){this.auth=e,this.observer=null,this.addObserver=SL(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W7(t){Sp=t}function CN(t){return Sp.loadJS(t)}function Q7(){return Sp.recaptchaEnterpriseScript}function Z7(){return Sp.gapiScript}function J7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class e8{constructor(){this.enterprise=new t8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class t8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const n8="recaptcha-enterprise",RN="NO_RECAPTCHA";class r8{constructor(e){this.type=n8,this.auth=Ua(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,u)=>{O7(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new M7(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function s(a,c,u){const h=window.grecaptcha;MS(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{c(f)}).catch(()=>{c(RN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e8().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(u=>{if(!n&&MS(window.grecaptcha))s(u,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Q7();h.length!==0&&(h+=u),CN(h).then(()=>{s(u,a,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function US(t,e,n,r=!1,s=!1){const a=new r8(t);let c;if(s)c=RN;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function yv(t,e,n,r,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await US(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await US(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t,e){const n=op(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Ra(a,e??{}))return s;ri(s,"already-initialized")}return n.initialize({options:e})}function s8(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function o8(t,e,n){const r=Ua(t);Me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=IN(e),{host:c,port:u}=a8(e),h=u===null?"":`:${u}`,f={url:`${a}//${c}${h}/`},p=Object.freeze({host:c,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Me(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Me(Ra(f,r.config.emulator)&&Ra(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Pa(c)?(lb(`${a}//${c}${h}`),cb("Auth",!0)):l8()}function IN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function a8(t){const e=IN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:BS(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:BS(c)}}}function BS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function l8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function c8(t,e){return ko(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8(t,e){return Zd(t,"POST","/v1/accounts:signInWithPassword",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}async function h8(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends r_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Nd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Nd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yv(e,n,"signInWithPassword",u8);case"emailLink":return d8(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yv(e,r,"signUpPassword",c8);case"emailLink":return h8(e,{idToken:n,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t,e){return Zd(t,"POST","/v1/accounts:signInWithIdp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8="http://localhost";class Ma extends r_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=Zb(n,["providerId","signInMethod"]);if(!r||!s)return null;const c=new Ma(r,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return sc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sc(e,n)}buildRequest(){const e={requestUri:f8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$d(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function p8(t){const e=Yu(Ku(t)).link,n=e?Yu(Ku(e)).deep_link_id:null,r=Yu(Ku(t)).deep_link_id;return(r?Yu(Ku(r)).link:null)||r||n||e||t}class i_{constructor(e){var n,r,s,a,c,u;const h=Yu(Ku(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,y=m8((s=h.mode)!==null&&s!==void 0?s:null);Me(f&&p&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=p,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=p8(e);try{return new i_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.providerId=Cc.PROVIDER_ID}static credential(e,n){return Nd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=i_.parseLink(n);return Me(r,"argument-error"),Nd._fromEmailAndCode(e,r.code,r.tenantId)}}Cc.PROVIDER_ID="password";Cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends NN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Jd{constructor(){super("facebook.com")}static credential(e){return Ma._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Jd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ma._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return oo.credential(n,r)}catch{return null}}}oo.GOOGLE_SIGN_IN_METHOD="google.com";oo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends Jd{constructor(){super("github.com")}static credential(e){return Ma._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com";ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends Jd{constructor(){super("twitter.com")}static credential(e,n){return Ma._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lo.credential(n,r)}catch{return null}}}lo.TWITTER_SIGN_IN_METHOD="twitter.com";lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g8(t,e){return Zd(t,"POST","/v1/accounts:signUp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await ei._fromIdTokenResponse(e,r,s),c=jS(r);return new Oa({user:a,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=jS(r);return new Oa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function jS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends Bi{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jm(e,n,r,s)}}function kN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?jm._fromErrorAndOperation(t,a,e,r):a})}async function y8(t,e,n=!1){const r=await Id(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Oa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v8(t,e,n=!1){const{auth:r}=t;if(mr(r.app))return Promise.reject(gs(r));const s="reauthenticate";try{const a=await Id(t,kN(r,s,e,t),n);Me(a.idToken,r,"internal-error");const c=t_(a.idToken);Me(c,r,"internal-error");const{sub:u}=c;return Me(t.uid===u,r,"user-mismatch"),Oa._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&ri(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e,n=!1){if(mr(t.app))return Promise.reject(gs(t));const r="signIn",s=await kN(t,r,e),a=await Oa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function b8(t,e){return DN(Ua(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t){const e=Ua(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _8(t,e,n){if(mr(t.app))return Promise.reject(gs(t));const r=Ua(t),c=await yv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g8).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&MN(t),h}),u=await Oa._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function E8(t,e,n){return mr(t.app)?Promise.reject(gs(t)):b8(Vt(t),Cc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MN(t),r})}function w8(t,e,n,r){return Vt(t).onIdTokenChanged(e,n,r)}function x8(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function T8(t,e,n,r){return Vt(t).onAuthStateChanged(e,n,r)}function S8(t){return Vt(t).signOut()}const Hm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hm,"1"),this.storage.removeItem(Hm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=1e3,C8=10;class PN extends ON{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);$7()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,C8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PN.type="LOCAL";const R8=PN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN extends ON{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VN.type="SESSION";const LN=VN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ap(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async f=>f(n.origin,a)),h=await I8(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,h)=>{const f=s_("",20);s.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(y){const b=y;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(b.data.response);break;default:clearTimeout(p),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function k8(t){Oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function D8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M8(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O8(){return zN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="firebaseLocalStorageDb",P8=1,Fm="firebaseLocalStorage",BN="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cp(t,e){return t.transaction([Fm],e?"readwrite":"readonly").objectStore(Fm)}function V8(){const t=indexedDB.deleteDatabase(UN);return new eh(t).toPromise()}function vv(){const t=indexedDB.open(UN,P8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fm,{keyPath:BN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fm)?e(r):(r.close(),await V8(),e(await vv()))})})}async function HS(t,e,n){const r=Cp(t,!0).put({[BN]:e,value:n});return new eh(r).toPromise()}async function L8(t,e){const n=Cp(t,!1).get(e),r=await new eh(n).toPromise();return r===void 0?null:r.value}function FS(t,e){const n=Cp(t,!0).delete(e);return new eh(n).toPromise()}const z8=800,U8=3;class jN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>U8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ap._getInstance(O8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D8(),!this.activeServiceWorker)return;this.sender=new N8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vv();return await HS(e,Hm,"1"),await FS(e,Hm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>L8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>FS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Cp(s,!1).getAll();return new eh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jN.type="LOCAL";const B8=jN;new Qd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t,e){return e?ps(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends r_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H8(t){return DN(t.auth,new o_(t),t.bypassAuthState)}function F8(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),v8(n,new o_(t),t.bypassAuthState)}async function $8(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),y8(n,new o_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H8;case"linkViaPopup":case"linkViaRedirect":return $8;case"reauthViaPopup":case"reauthViaRedirect":return F8;default:ri(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=new Qd(2e3,1e4);class ql extends HN{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,ql.currentPopupAction&&ql.currentPopupAction.cancel(),ql.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=s_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ql.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q8.get())};e()}}ql.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="pendingRedirect",om=new Map;class Y8 extends HN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=om.get(this.auth._key());if(!e){try{const r=await K8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}om.set(this.auth._key(),e)}return this.bypassAuthState||om.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K8(t,e){const n=Q8(e),r=W8(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function X8(t,e){om.set(t._key(),e)}function W8(t){return ps(t._redirectPersistence)}function Q8(t){return sm(G8,t.config.apiKey,t.name)}async function Z8(t,e,n=!1){if(mr(t.app))return Promise.reject(gs(t));const r=Ua(t),s=j8(r,e),c=await new Y8(r,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=10*60*1e3;class ej{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J8&&this.cachedEventUids.clear(),this.cachedEventUids.has($S(e))}saveEventToCache(e){this.cachedEventUids.add($S(e)),this.lastProcessedEventTime=Date.now()}}function $S(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function tj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(t,e={}){return ko(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ij=/^https?/;async function sj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nj(t);for(const n of e)try{if(oj(n))return}catch{}ri(t,"unauthorized-domain")}function oj(t){const e=pv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!ij.test(n))return!1;if(rj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=new Qd(3e4,6e4);function qS(){const t=Oi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lj(t){return new Promise((e,n)=>{var r,s,a;function c(){qS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qS(),n(Mi(t,"network-request-failed"))},timeout:aj.get()})}if(!((s=(r=Oi().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Oi().gapi)===null||a===void 0)&&a.load)c();else{const u=J7("iframefcb");return Oi()[u]=()=>{gapi.load?c():n(Mi(t,"network-request-failed"))},CN(`${Z7()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw am=null,e})}let am=null;function cj(t){return am=am||lj(t),am}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new Qd(5e3,15e3),dj="__/auth/iframe",hj="emulator/auth/iframe",fj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pj(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?e_(e,hj):`https://${t.config.authDomain}/${dj}`,r={apiKey:e.apiKey,appName:t.name,v:_c},s=mj.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${$d(r).slice(1)}`}async function gj(t){const e=await cj(t),n=Oi().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:pj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fj,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const c=Mi(t,"network-request-failed"),u=Oi().setTimeout(()=>{a(c)},uj.get());function h(){Oi().clearTimeout(u),s(r)}r.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vj=500,bj=600,_j="_blank",Ej="http://localhost";class GS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wj(t,e,n,r=vj,s=bj){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},yj),{width:r.toString(),height:s.toString(),top:a,left:c}),f=On().toLowerCase();n&&(u=_N(f)?_j:n),vN(f)&&(e=e||Ej,h.scrollbars="yes");const p=Object.entries(h).reduce((b,[E,T])=>`${b}${E}=${T},`,"");if(F7(f)&&u!=="_self")return xj(e||"",u),new GS(null);const y=window.open(e||"",u,p);Me(y,t,"popup-blocked");try{y.focus()}catch{}return new GS(y)}function xj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="__/auth/handler",Sj="emulator/auth/handler",Aj=encodeURIComponent("fac");async function YS(t,e,n,r,s,a){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:_c,eventId:s};if(e instanceof NN){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",TL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))c[p]=y}if(e instanceof Jd){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(c.scopes=p.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await t._getAppCheckToken(),f=h?`#${Aj}=${encodeURIComponent(h)}`:"";return`${Cj(t)}?${$d(u).slice(1)}${f}`}function Cj({config:t}){return t.emulator?e_(t,Sj):`https://${t.authDomain}/${Tj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="webStorageSupport";class Rj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LN,this._completeRedirectFn=Z8,this._overrideRedirectResult=X8}async _openPopup(e,n,r,s){var a;ws((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await YS(e,n,r,pv(),s);return wj(e,c,s_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await YS(e,n,r,pv(),s);return k8(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ws(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gj(e),r=new ej(e);return n.register("authEvent",s=>(Me(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(uy,{type:uy},s=>{var a;const c=(a=s?.[0])===null||a===void 0?void 0:a[uy];c!==void 0&&n(!!c),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SN()||bN()||n_()}}const Ij=Rj;var KS="@firebase/auth",XS="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(t){Ia(new bo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AN(t)},f=new X7(r,s,a,h);return s8(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ia(new bo("auth-internal",e=>{const n=Ua(e.getProvider("auth").getImmediate());return(r=>new Nj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(KS,XS,kj(t)),Ni(KS,XS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=5*60,Oj=xR("authIdTokenMaxAge")||Mj;let WS=null;const Pj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Oj)return;const s=n?.token;WS!==s&&(WS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Vj(t=hb()){const e=op(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i8(t,{popupRedirectResolver:Ij,persistence:[B8,R8,LN]}),r=xR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=Pj(a.toString());x8(n,c,()=>c(n.currentUser)),w8(n,u=>c(u))}}const s=_R("auth");return s&&o8(n,`http://${s}`),n}function Lj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}W7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Mi("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",Lj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");const zj={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},a_=AR(zj),ii=n7(a_),l_=Vj(a_),c_=tz(a_,"us-central1");kR(c_,"localhost",5001);const Uj="modulepreload",Bj=function(t){return"/"+t},QS={},jj=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");s=h(n.map(f=>{if(f=Bj(f),f in QS)return;QS[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":Uj,p||(b.as="script"),b.crossOrigin="",b.href=f,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((E,T)=>{b.addEventListener("load",E),b.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})},Hj="51259393-3a562db01323edade9561b8f0",Fj="LIVDSRZULELA",$j=t=>t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\*\*(.*?)\*\*/g,"<strong class='font-semibold text-gray-900 dark:text-gray-100'>$1</strong>").replace(/\((.*?)\)\[(.*?)\]/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors duration-200">$1</a>'),qj=async t=>{const e=t.map(async r=>{const s=Object.keys(r)[0],a=r[s];switch(s){case"large_header":return`<h1 class="text-4xl lg:text-4xl font-bold my-8 text-gray-900 dark:text-gray-100 leading-tight border-b-4 border-blue-600 dark:border-blue-400 pb-2 transition-colors duration-200">${a}</h1>`;case"small_header":return`<h2 class="text-3xl lg:text-3xl font-semibold mt-6 mb-3 text-gray-800 dark:text-gray-200 leading-snug transition-colors duration-200">${a}</h2>`;case"ul":return`<ul class="my-4 pl-6 space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${a.map(L=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${L}</li>`).join("")}</ul>`;case"ol":return`<ol class="my-4 pl-6 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${a.map(L=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${L}</li>`).join("")}</ol>`;case"quiz":const h=a,f=`quiz-set-${Math.random().toString(36).substr(2,9)}`,p=h.map((L,q)=>{const M=`${f}-q${q}`,W=L.answers.map((J,ne)=>{const Z=Object.keys(J)[0],te=J[Z],le=ne===L.correctAnswer;return`<button class="quiz-answer w-full bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 text-left font-medium text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-60" onclick="${`
                                        const quiz = document.getElementById('${M}');
                                        const hintDiv = document.getElementById('${M}-hint');
                                        const resultDiv = document.getElementById('${M}-result');
                                        const nextBtn = document.getElementById('${M}-next');
                                        const buttons = quiz.querySelectorAll('.quiz-answer');
                                        const selectedButton = this;
                                        
                                        if (${le}) {
                                            // Correct answer
                                            hintDiv.classList.add('hidden');
                                            resultDiv.classList.remove('hidden');
                                            if (nextBtn) nextBtn.classList.remove('hidden');
                                            buttons.forEach(btn => btn.disabled = true);
                                            selectedButton.classList.add('quiz-correct');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                        } else {
                                            // Wrong answer - show hint
                                            hintDiv.textContent = '${te.replace(/'/g,"\\'")}';
                                            hintDiv.classList.remove('hidden');
                                            selectedButton.classList.add('quiz-incorrect');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                            selectedButton.disabled = true;
                                        }
                                    `}">${Z}</button>`}).join(""),G=`
                                const quiz = document.getElementById('${M}');
                                const hintDiv = document.getElementById('${M}-hint');
                                const resultDiv = document.getElementById('${M}-result');
                                const nextBtn = document.getElementById('${M}-next');
                                const buttons = quiz.querySelectorAll('.quiz-answer');
                                
                                // Reset all states
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                            `,K=q<h.length-1?`
                                document.getElementById('${f}-q${q}').classList.add('hidden');
                                document.getElementById('${f}-q${q+1}').classList.remove('hidden');
                            `:`
                                document.getElementById('${f}-completion').classList.remove('hidden');
                                document.getElementById('${M}').classList.add('hidden');
                            `,N=q<h.length-1?`<button id="${M}-next" class="hidden bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${K}">Next Question →</button>`:`<button id="${M}-next" class="hidden bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${K}">Finish Quiz ✓</button>`;return`
                                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-200 ${q===0?"":"hidden"}" id="${M}">
                                    <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-2 text-center">Question ${q+1} of ${h.length}</div>
                                    <div class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6 text-center leading-relaxed">${L.question}</div>
                                    <div class="space-y-3 mb-4">
                                        ${W}
                                    </div>
                                    <div id="${M}-hint" class="hidden bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 text-yellow-800 dark:text-yellow-200 text-sm italic animate-fade-in"></div>
                                    <div id="${M}-result" class="hidden bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-6 text-center">
                                        <p class="text-xl font-bold text-green-800 dark:text-green-200 mb-4">🎉 Excellent! 🎉</p>
                                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                            <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${G}">↻ Try Again</button>
                                            ${N}
                                        </div>
                                    </div>
                                </div>
                            `}).join(""),y=`
                        document.getElementById('${f}-completion').classList.add('hidden');
                        document.getElementById('${f}-q0').classList.remove('hidden');
                        // Reset all questions
                        ${h.map((L,q)=>`
                            const quiz${q} = document.getElementById('${f}-q${q}');
                            if (quiz${q}) {
                                const hintDiv = document.getElementById('${f}-q${q}-hint');
                                const resultDiv = document.getElementById('${f}-q${q}-result');
                                const nextBtn = document.getElementById('${f}-q${q}-next');
                                const buttons = quiz${q}.querySelectorAll('.quiz-answer');
                                
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                                
                                if (${q} > 0) quiz${q}.classList.add('hidden');
                            }
                        `).join("")}
                    `;return`
                        <div class="my-8" id="${f}">
                            ${p}
                            <div id="${f}-completion" class="hidden bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-700 rounded-xl p-8 text-center">
                                <div class="text-4xl mb-4">🎊</div>
                                <h3 class="text-2xl font-bold text-green-800 dark:text-green-200 mb-2">Quiz Completed!</h3>
                                <p class="text-green-700 dark:text-green-300 mb-6">Congratulations! You've successfully completed all ${h.length} questions.</p>
                                <button class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg transform hover:scale-105 transition-all duration-200" onclick="${y}">🔄 Start Over</button>
                            </div>
                        </div>
                    `;case"img":const[b,E]=a;return`<figure class="my-6 text-center">
                    <img src="${await Kj(b)}" alt="${E}" 
                         class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                         onerror="this.onerror=null; this.src='https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error'; this.alt='Fallback image (original failed to load)';" />
                    <figcaption class="mt-3 text-sm text-gray-600 dark:text-gray-400">${E}</figcaption>
                    <div class="mt-2 text-xs text-gray-500 dark:text-gray-500 opacity-75">
                        <span class="inline-block mr-2">🔍 ${b}</span>
                        <a href="https://pixabay.com/" target="_blank" class="text-blue-500 dark:text-blue-400 hover:underline">Pixabay</a>
                    </div>
                    </figure>`;case"vid":const[A,R]=a;return`<figure class="my-6 text-center">
                        <div class="relative w-full max-w-4xl mx-auto" style="padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/${await eH(A)}" 
                                class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                                frameborder="0" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${R}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${A}" • <a href="https://developers.google.com/youtube/v3" target="_blank" class="text-red-600 dark:text-red-400 hover:underline">Powered by YouTube Data API</a></div>
                    </figure>`;case"gif":const[z,B]=a;return`<figure class="my-6 text-center">
                        <img src="${await Qj(z)}" alt="${B}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error'; this.alt='Fallback GIF (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${B}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${z}" • <a href="https://tenor.com/" target="_blank" class="text-purple-600 dark:text-purple-400 hover:underline">Powered by Tenor</a></div>
                    </figure>`;case"textblock":return`<div class="my-4 leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">${$j(a)}</div>`;case"codeblock":return`<pre class="my-6 bg-gray-900 dark:bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto border-l-4 border-blue-500 shadow-lg"><code class="font-mono text-sm leading-relaxed">${a}</code></pre>`;case"quote":return`<blockquote class="my-6 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-r-lg relative">
                        <div class="text-blue-600 dark:text-blue-400 text-4xl absolute -top-2 -left-1 font-serif">"</div>
                        <div class="italic text-gray-700 dark:text-gray-300 pl-6">${a}</div>
                    </blockquote>`;case"link":return`<a href="${a}" class="inline-block my-2 px-4 py-2 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-600 hover:text-white dark:hover:bg-blue-500 transition-all duration-200 font-medium" target="_blank">${a}</a>`;case"table":const Y=a,X=Y[0],D=Y.slice(1),S=`<thead><tr>${X.map(L=>`<th class="bg-blue-600 dark:bg-blue-700 text-white px-4 py-3 text-left font-semibold">${L}</th>`).join("")}</tr></thead>`,I=`<tbody>${D.map((L,q)=>`<tr class="${q%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-700"} hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200">${L.map(M=>`<td class="px-4 py-3 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">${M}</td>`).join("")}</tr>`).join("")}</tbody>`;return`<div class="my-6 overflow-x-auto shadow-lg rounded-lg border border-gray-200 dark:border-gray-700">
                        <table class="w-full border-collapse">${S}${I}</table>
                    </div>`;case"purehtml":return`<div class="my-4 p-2 rounded-md bg-gray-50 dark:bg-gray-800 transition-colors duration-200">${a}</div>`;case"sidecontainer":return`<aside class="float-right w-80 max-w-[40%] ml-4 mb-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200 lg:block hidden">
                        ${a}
                    </aside>
                    <div class="lg:hidden my-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">
                        ${a}
                    </div>`;case"flow":case"flowchart":case"diagram":case"mindmap":const j=`diagram_${Math.random().toString(36).slice(2)}`,F=a;try{const q=(await tH(`---
config:
    theme: 'base'
    themeVariables:
        primaryColor: '#6D28D9'
        primaryTextColor: '#F3F4F6'
        primaryBorderColor: '#4C1D95'
        lineColor: '#A78BFA'
        secondaryColor: '#1E1B4B'
        tertiaryColor: '#312E81'
---
                    ${F}`)).outerHTML;return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200"
                             id="${j}">
                            ${q}
                        </div>
                    `}catch(L){return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200"
                             id="${j}">
                            <div class="text-red-600 dark:text-red-400 italic">Diagram render error: ${String(L)}</div>
                        </div>
                    `}case"note":return`<div class="my-4 flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-blue-600 dark:text-blue-400 text-xl mr-3 flex-shrink-0 mt-0.5">📝</div>
                        <div class="text-blue-800 dark:text-blue-200 leading-relaxed">${a}</div>
                    </div>`;case"warning":return`<div class="my-4 flex items-start p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 dark:border-yellow-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-yellow-600 dark:text-yellow-400 text-xl mr-3 flex-shrink-0 mt-0.5">⚠️</div>
                        <div class="text-yellow-800 dark:text-yellow-200 leading-relaxed">${a}</div>
                    </div>`;case"tip":return`<div class="my-4 flex items-start p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-green-600 dark:text-green-400 text-xl mr-3 flex-shrink-0 mt-0.5">💡</div>
                        <div class="text-green-800 dark:text-green-200 leading-relaxed">${a}</div>
                    </div>`;case"htmlCanvas":const $=`canvas_${Math.random().toString(36).substr(2,9)}_${Date.now()}`;return`
                        <div class="my-6 bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-6 transition-colors duration-200" data-canvas-code="${a.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" data-canvas-id="${$}">
                            <canvas id="${$}" width="400" height="300" class="border border-gray-300 dark:border-gray-600 rounded-lg max-w-full mx-auto block bg-white dark:bg-gray-900"></canvas>
                            <div class="flex flex-wrap gap-2 mt-4 justify-center">
                                <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const code = canvasDiv.getAttribute('data-canvas-code');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        errorDiv.classList.add('hidden');
                                        errorDiv.textContent = '';
                                        
                                        try {
                                            canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                            const canvasFunction = new Function('canvas', 'ctx', code);
                                            canvasFunction(canvasElement, canvasContext);
                                        } catch (error) {
                                            console.error('Canvas error:', error);
                                            errorDiv.textContent = 'Error: ' + error.message;
                                            errorDiv.classList.remove('hidden');
                                        }
                                    }).call(this);
                                ">▶ Run Code</button>
                                <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                        errorDiv.classList.add('hidden');
                                    }).call(this);
                                ">🗑️ Clear</button>
                                <button class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        
                                        if (!document.fullscreenElement) {
                                            canvasElement.requestFullscreen().catch(err => {
                                                console.warn('Fullscreen failed:', err);
                                            });
                                        } else {
                                            document.exitFullscreen();
                                        }
                                    }).call(this);
                                ">⛶ Fullscreen</button>
                            </div>
                            <details class="mt-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors duration-200">
                                <summary class="p-3 font-medium text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200">📝 View Code</summary>
                                <pre class="p-4 bg-gray-900 dark:bg-gray-800 text-gray-100 rounded-b-lg overflow-x-auto"><code class="font-mono text-sm">${a}</code></pre>
                            </details>
                            <div id="${$}Error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200"></div>
                        </div>
                    `;default:return`<div class="my-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 font-mono text-sm">
                        <div class="font-semibold mb-2">Unknown content type:</div>
                        ${JSON.stringify(r)}
                    </div>`}});return(await Promise.all(e)).join(`
`)},Gj=Hj,Yj="https://pixabay.com/api/",Lu=new Map,Kj=async t=>{if(Lu.has(t))return Lu.get(t);try{const e=encodeURIComponent(t),n=`${Yj}?key=${Gj}&q=${e}&image_type=photo&per_page=3&safesearch=true&order=relevant`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.hits&&s.hits.length>0){const a=s.hits[0].webformatURL;return Lu.set(t,a),a}else{const a=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Lu.set(t,a),a}}catch(e){console.error("Error fetching Pixabay image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Lu.set(t,n),n}},Xj=Fj,Wj="https://g.tenor.com/v1/search",zu=new Map,Qj=async t=>{if(zu.has(t))return zu.get(t);try{const e=encodeURIComponent("explained "+t),n=`${Wj}?key=${Xj}&q=${e}&limit=1&media_filter=basic&contentfilter=medium`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.results&&s.results.length>0){const c=s.results[0],u=c.media[0]?.gif?.url||c.media[0]?.mediumgif?.url||c.media[0]?.tinygif?.url;if(u)return zu.set(t,u),u}const a=`https://via.placeholder.com/300x200/9333ea/ffffff?text=${e}+GIF`;return zu.set(t,a),a}catch(e){console.error("Error fetching Tenor GIF:",e);const n="https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error";return zu.set(t,n),n}},Zj="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",Jj="https://www.googleapis.com/youtube/v3/search",Uu=new Map,eH=async t=>{if(Uu.has(t))return Uu.get(t);try{const e=encodeURIComponent(t),n=`${Jj}?key=${Zj}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.items&&s.items.length>0){const c=s.items[0].id.videoId;if(c)return Uu.set(t,c),c}const a="dQw4w9WgXcQ";return Uu.set(t,a),a}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Uu.set(t,n),n}};async function tH(t){const n=(await jj(()=>import("./mermaid.core-Bg5Zfl_3.js").then(a=>a.bo),[])).default??window.mermaid?.mermaidAPI;window.___mermaidInitialised||(n.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"inherit"}),window.___mermaidInitialised=!0);let r;try{r=(await n.render("m_"+Math.random().toString(36).slice(2),t.trim())).svg}catch(a){throw a}return new DOMParser().parseFromString(r,"image/svg+xml").documentElement}const nH=qj;class Vl extends Error{constructor(e,n){super(`${e} at position ${n}`),this.position=n}}const $N=32,rH=10,qN=9,GN=13,iH=160,sH=8192,oH=8202,aH=8239,lH=8287,cH=12288;function uH(t){return/^[0-9A-Fa-f]$/.test(t)}function ua(t){return t>="0"&&t<="9"}function dH(t){return t>=" "}function Hf(t){return`,:[]/{}()
+`.includes(t)}function ZS(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"}function JS(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"||t>="0"&&t<="9"}const eA=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,tA=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function nA(t){return`,[]/{}
+`.includes(t)}function rA(t){return lm(t)||hH.test(t)}const hH=/^[[{\w-]$/;function fH(t){return t===`
`||t==="\r"||t==="	"||t==="\b"||t==="\f"}function pa(t,e){const n=t.charCodeAt(e);return n===$N||n===rH||n===qN||n===GN}function mH(t,e){const n=t.charCodeAt(e);return n===$N||n===qN||n===GN}function pH(t,e){const n=t.charCodeAt(e);return n===iH||n>=sH&&n<=oH||n===aH||n===lH||n===cH}function lm(t){return YN(t)||bv(t)}function YN(t){return t==='"'||t==="“"||t==="”"}function iA(t){return t==='"'}function bv(t){return t==="'"||t==="‘"||t==="’"||t==="`"||t==="´"}function sA(t){return t==="'"}function Bu(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const r=t.lastIndexOf(e);return r!==-1?t.substring(0,r)+(n?"":t.substring(r+1)):t}function Wr(t,e){let n=t.length;if(!pa(t,n-1))return t+e;for(;pa(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function gH(t,e,n){return t.substring(0,e)+t.substring(e+n)}function yH(t){return/[,\n][ \t\r]*$/.test(t)}const vH={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},bH={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function _H(t){let e=0,n="";f(["```","[```","{```"]),a()||L(),f(["```","```]","```}"]);const s=y(",");for(s&&c(),rA(t[e])&&yH(n)?(s||(n=Wr(n,",")),k()):s&&(n=Bu(n,","));t[e]==="}"||t[e]==="]";)e++,c();if(e>=t.length)return n;O();function a(){c();const G=A()||R()||z()||U()||Y()||D(!1)||S();return c(),G}function c(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const K=e;let N=u(G);do N=h(),N&&(N=u(G));while(N);return e>K}function u(G){const K=G?pa:mH;let N="";for(;;)if(K(t,e))N+=t[e],e++;else if(pH(t,e))N+=" ",e++;else break;return N.length>0?(n+=N,!0):!1}function h(){if(t[e]==="/"&&t[e+1]==="*"){for(;e<t.length&&!EH(t,e);)e++;return e+=2,!0}if(t[e]==="/"&&t[e+1]==="/"){for(;e<t.length&&t[e]!==`
`;)e++;return!0}return!1}function f(G){if(p(G)){if(ZS(t[e]))for(;e<t.length&&JS(t[e]);)e++;return c(),!0}return!1}function p(G){for(const K of G){const N=e+K.length;if(t.slice(e,N)===K)return e=N,!0}return!1}function y(G){return t[e]===G?(n+=t[e],e++,!0):!1}function b(G){return t[e]===G?(e++,!0):!1}function E(){return b("\\")}function T(){return c(),t[e]==="."&&t[e+1]==="."&&t[e+2]==="."?(e+=3,c(),b(","),!0):!1}function A(){if(t[e]==="{"){n+="{",e++,c(),b(",")&&c();let G=!0;for(;e<t.length&&t[e]!=="}";){let K;if(G?(K=!0,G=!1):(K=y(","),K||(n=Wr(n,",")),c()),T(),!(z()||D(!0))){t[e]==="}"||t[e]==="{"||t[e]==="]"||t[e]==="["||t[e]===void 0?n=Bu(n,","):q();break}c();const J=y(":"),ne=e>=t.length;J||(rA(t[e])||ne?n=Wr(n,":"):M()),a()||(J||ne?n+="null":M())}return t[e]==="}"?(n+="}",e++):n=Wr(n,"}"),!0}return!1}function R(){if(t[e]==="["){n+="[",e++,c(),b(",")&&c();let G=!0;for(;e<t.length&&t[e]!=="]";)if(G?G=!1:y(",")||(n=Wr(n,",")),T(),!a()){n=Bu(n,",");break}return t[e]==="]"?(n+="]",e++):n=Wr(n,"]"),!0}return!1}function k(){let G=!0,K=!0;for(;K;)G?G=!1:y(",")||(n=Wr(n,",")),K=a();K||(n=Bu(n,",")),n=`[
${n}
]`}function z(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,N=t[e]==="\\";if(N&&(e++,N=!0),lm(t[e])){const J=iA(t[e])?iA:sA(t[e])?sA:bv(t[e])?bv:YN,ne=e,Z=n.length;let te='"';for(e++;;){if(e>=t.length){const le=I(e-1);return!G&&Hf(t.charAt(le))?(e=ne,n=n.substring(0,Z),z(!0)):(te=Wr(te,'"'),n+=te,!0)}if(e===K)return te=Wr(te,'"'),n+=te,!0;if(J(t[e])){const le=e,de=te.length;if(te+='"',e++,n+=te,c(!1),G||e>=t.length||Hf(t[e])||lm(t[e])||ua(t[e]))return B(),!0;const me=I(le-1),be=t.charAt(me);if(be===",")return e=ne,n=n.substring(0,Z),z(!1,me);if(Hf(be))return e=ne,n=n.substring(0,Z),z(!0);n=n.substring(0,Z),e=le+1,te=`${te.substring(0,de)}\\${te.substring(de)}`}else if(G&&nA(t[e])){if(t[e-1]===":"&&eA.test(t.substring(ne+1,e+2)))for(;e<t.length&&tA.test(t[e]);)te+=t[e],e++;return te=Wr(te,'"'),n+=te,B(),!0}else if(t[e]==="\\"){const le=t.charAt(e+1);if(bH[le]!==void 0)te+=t.slice(e,e+2),e+=2;else if(le==="u"){let me=2;for(;me<6&&uH(t[e+me]);)me++;me===6?(te+=t.slice(e,e+6),e+=6):e+me>=t.length?e=t.length:W()}else te+=le,e+=2}else{const le=t.charAt(e);le==='"'&&t[e-1]!=="\\"?(te+=`\\${le}`,e++):fH(le)?(te+=vH[le],e++):(dH(le)||$(le),te+=le,e++)}N&&E()}}return!1}function B(){let G=!1;for(c();t[e]==="+";){G=!0,e++,c(),n=Bu(n,'"',!0);const K=n.length;z()?n=gH(n,K,1):n=Wr(n,'"')}return G}function U(){const G=e;if(t[e]==="-"){if(e++,j())return F(G),!0;if(!ua(t[e]))return e=G,!1}for(;ua(t[e]);)e++;if(t[e]==="."){if(e++,j())return F(G),!0;if(!ua(t[e]))return e=G,!1;for(;ua(t[e]);)e++}if(t[e]==="e"||t[e]==="E"){if(e++,(t[e]==="-"||t[e]==="+")&&e++,j())return F(G),!0;if(!ua(t[e]))return e=G,!1;for(;ua(t[e]);)e++}if(!j())return e=G,!1;if(e>G){const K=t.slice(G,e),N=/^0\d/.test(K);return n+=N?`"${K}"`:K,!0}return!1}function Y(){return X("true","true")||X("false","false")||X("null","null")||X("True","true")||X("False","false")||X("None","null")}function X(G,K){return t.slice(e,e+G.length)===G?(n+=K,e+=G.length,!0):!1}function D(G){const K=e;if(ZS(t[e])){for(;e<t.length&&JS(t[e]);)e++;let N=e;for(;pa(t,N);)N++;if(t[N]==="(")return e=N+1,a(),t[e]===")"&&(e++,t[e]===";"&&e++),!0}for(;e<t.length&&!nA(t[e])&&!lm(t[e])&&(!G||t[e]!==":");)e++;if(t[e-1]===":"&&eA.test(t.substring(K,e+2)))for(;e<t.length&&tA.test(t[e]);)e++;if(e>K){for(;pa(t,e-1)&&e>0;)e--;const N=t.slice(K,e);return n+=N==="undefined"?"null":JSON.stringify(N),t[e]==='"'&&e++,!0}}function S(){if(t[e]==="/"){const G=e;for(e++;e<t.length&&(t[e]!=="/"||t[e-1]==="\\");)e++;return e++,n+=`"${t.substring(G,e)}"`,!0}}function I(G){let K=G;for(;K>0&&pa(t,K);)K--;return K}function j(){return e>=t.length||Hf(t[e])||pa(t,e)}function F(G){n+=`${t.slice(G,e)}0`}function $(G){throw new Vl(`Invalid character ${JSON.stringify(G)}`,e)}function O(){throw new Vl(`Unexpected character ${JSON.stringify(t[e])}`,e)}function L(){throw new Vl("Unexpected end of json string",t.length)}function q(){throw new Vl("Object key expected",e)}function M(){throw new Vl("Colon expected",e)}function W(){const G=t.slice(e,e+6);throw new Vl(`Invalid unicode character "${G}"`,e)}}function EH(t,e){return t[e]==="*"&&t[e+1]==="/"}const wH=(t,e,n,r)=>{const s=`Return ONLY a valid JSON array.
        RULES
        • Each object = exactly one tag from SCHEMA; no new tags.
        • Include:
        • You should educate the user about the concept and then ask the quiz about the material you taught.
        • Use tags to make the reading experience diverse and engaging
        • If you have a long text, break it into multiple textblocks.
        • Only include tags that genuinely help explain the concept. Don't add tags unnecessarily or just to fill space.
        • Only include tags that genuinely help explain the concept. Don't add tags unnecessarily or just to fill space. Code snippets should ONLY BE USED IF THE CONCEPT IS TECHNICAL AND REQUIRES A CODE EXAMPLE
        • Tone: encouraging, professional
        • You need to have textblocks or lists separating each visual tag, e.g. img, vid, gif, codeblock, diagram, mindmap, htmlCanvas, table.
        • Make sure to put the concept over the context, not focusing on the context but rather on what actually needs to be explained.

        OUTPUT
        VALID JSON array only — no comments, or extra text. All the braces must be properly closed.`;return r==="default"?`${s}
    REQUIREMENTS:
    • Include exactly ONE {quiz} with 2-3 questions.
    • Include at least one of either {diagram | mindmap | htmlCanvas | table}.
    • Include at least one of either {img | vid | gif}.
    • Include at least five of either {textblock | ul | ol}.
    • Include exactly ONE of {tip | note | warning | quote | link}.
    • Cover: definition → explanation → worked example → real‑world analogy → what to explore next.
    • Break long texts into multiple textblocks.
    • Avoid filler tags.
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:r==="explain"?`${s}
    DEEP MODE REQUIREMENTS (layer‑by‑layer dive)
    • Exactly ONE {quiz} with 2-3 challenging questions (conceptual/applied).
    • Include at least one of either {diagram | mindmap | htmlCanvas | table}.
    • Include at least three of {img | vid | gif} for visual clarity
    • Include at least eight of {textblock | ul | ol}, organised as: Definition → Foundation → Mechanics → Edge‑cases → Misconceptions → Applications.
    • Exactly ONE of {tip | note | warning | quote | link}.
    • Total objects: 12-16.
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:r==="argue"?`${s}
    YOU SHOULD STRICTLY EVALUATE THE CONCEPT FROM MULTIPLE ANGLES
    • Include AT LEAST ONE {diagram | mindmap | htmlCanvas | table} to clarify the opinion.
    • Include AT LEAST ONE of {img | vid | gif} to illustrate the IDEA.
    • Include exactly ONE {quiz} with 2-3 questions to test understanding.
    • Include AS MANY of {textblock | ul | ol} AS NEEDED TO COVER THE OPINION
    • Keep total objects 8-12.
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:r==="answer"?`${s}
    YOU SHOULD ANSWER THE USER'S QUESTION DIRECTLY
    • Focus on answering the user's question directly.
    • Include exactly ONE {quiz} with 2‑3 questions.
    • Include exactly ONE of {diagram | mindmap | htmlCanvas | table} ONLY IF it clarifies the answer.
    • Include exactly ONE of {img | vid | gif} ONLY IF it clarifies the answer.
    • Include AT LEAST TWO of {textblock | ul | ol}
    • Keep it concise and focused on the question.
    • Total objects: 5‑8.
  
    OUTPUT VALID JSON ARRAY ONLY.
    SCHEMA = ${JSON.stringify(n)}
    CONTEXT = ${t}
    CONCEPT = ${e}
    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`:""},xH=(t,e,n)=>{const r=s=>`PROVIDE A SHORT YET DEEP EXPLANATION OF THE TOPIC STRICTLY in ${s} words or less. USE THE PROVIDED CONTEXT TO GUIDE YOUR RESPONSE.
        CRITICAL:
        - Enclose EVERY key term in [square‑braces].
        - No introductory phrases, bullet points, or extra formatting.
        - Start immediately with content.
        - ONLY the explanation text.
    
        TOPIC: ${t}
        CONTEXT: ${e}
        REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`;switch(n){case"explain":return r(60);case"argue":return`Balanced abstract (≤60 words) covering pros & cons of the TOPIC. USE THE PROVIDED CONTEXT TO GUIDE YOUR RESPONSE.
                    CRITICAL:
                    - Enclose key terms in [square‑braces].
                    - No introductory phrases.
                    - ONLY the abstract.
                
                    TOPIC: ${t}
                    CONTEXT: ${t}
                    REMEMBER: THIS IS REALLY IMPORTANT TO FOCUS ON THE TOPIC AND NOT ON THE CONTEXT. THE CONTEXT MAY BE USED TO CLARIFY THE TOPIC OR TO PROVIDE A CONCRETE EXAMPLE, BUT NOT TO FOCUS ON IT. IF IT IS NOT POSSIBLE TO FOCUS ON THE TOPIC, THEN DO COMPLETELY IGNORE THE CONTEXT.`;case"answer":return r(30);default:return r(50)}},TH=(t,e)=>{const n=(r,s)=>`Respond ONLY with a valid JSON array like ["topic1", "topic2"].
        Instructions:
        - Suggest exactly ${r}-${s} logical next topics.
        - Each topic <4 words, double‑quoted.
        - No explanation or extra text.
  
    Concept: ${t}`;switch(e){case"explain":return n(4,5);case"argue":return n(3,5);case"answer":return n(2,3);default:return n(3,5)}},SH=[{large_header:"Large Header Text"},{small_header:"Small Header Text"},{ul:["Item one","Item 2","Item 3"]},{quiz:[{question:"What is the capital of France?",answers:[{Berlin:"It's germany!"},{Madrid:"It is spain :("},{Paris:"Correct! It's Paris!"}],correctAnswer:2},{question:"What is the capital of Poland?",answers:[{Berlin:"It's germany!"},{Warshava:"Yahoo! It's Poland!"},{Paris:"No!"}],correctAnswer:1}]},{img:["very short image description(e.g. funny cats)","The image shows a group of cats doing something amusing."]},{vid:["very short video description(e.g. playing footbal)","This video shows a group of people playing football in a park."]},{gif:["very short gif description(e.g. frogs jumping)","This gif shows frogs jumping around in a pond."]},{textblock:"text, **text**, (text)[text.com]"},{ol:["Heyyo","Nice","That's a list"]},{codeblock:"console.log('Hello World');"},{quote:"This is a quote"},{link:"https://example.com"},{table:[["Header1","Header2"],["Row1Col1","Row1Col2"],["Row2Col1","Row2Col2"]]},{diagram:`flowchart TD
        A[Christmas] -->|Get money| B(Go shopping)
        B --> C{Let me think}
        C -->|One| D[Laptop]
        C -->|Two| E[iPhone]
        C -->|Three| F[fa:fa-car Car]`},{mindmap:`
mindmap
  root((mindmapname))
    Branch1
      id((Sub1))
      Sub2
      ::icon(fa fa-book)
    Branch2
      id)Sub3(
      Sub4
    `},{note:"This is a note."},{warning:"This is a warning note."},{tip:"This is a tip note."},{htmlCanvas:`
  function draw(ctx) {
    // Drawing a simple circle (example)
    ctx.beginPath();
    ctx.arc(50, 50, 30, 0, 2 * Math.PI);
    ctx.fillStyle = 'red';
    ctx.fill();
    ctx.closePath();
  }`}],oA=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await DR(c_,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},AH=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const r=DR(c_,"groqChat");console.log("Starting streaming request...");const{stream:s,data:a}=await r.stream({message:n});console.log("Stream started, waiting for chunks...");let c="";for await(const h of s)if(console.log("Received chunk:",h),h&&typeof h=="object"&&"type"in h&&"content"in h){const f=h;console.log("Processing chunk:",f),f.type==="chunk"&&f.content&&(c+=f.content,e?.(f.content))}console.log("Waiting for final result...");const u=await a;return console.log("Final result received:",u),u&&typeof u=="object"&&"response"in u?(console.log("Returning final result response"),u.response):(console.log("Returning accumulated response:",c),c)}catch(n){throw console.error("Firebase function streaming error:",n),n}},CH=async(t,e,n,r)=>{try{const s=oA(wH(e??"",t??"",SH??[],n??"")),a=oA(TH(t,n));let c="";const u=AH(xH(t,e,n),R=>{c+=R,r(R)}),[h,f,p]=await Promise.all([s,a,u]);let y=f??"";y=y.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").replace(/\\/g,"&#92;").replace(/\$/g,"&#36;").replace(/\^/g,"&#94;").replace(/_/g,"&#95;").replace(/~/g,"&#126;").replace(/&/g,"&#38;");let b=[];const E=y.match(/"(.*?)"/g);E&&(b=E.map(R=>R.replace(/"/g,"")));const T=R=>{try{return JSON.parse(R)}catch{try{const k=_H(R);return JSON.parse(k)}catch(k){throw console.error("JSON parsing and repair failed:",k),k}}},A={firstResponse:{response:await nH(T(h.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"")))},secondResponse:{response:p?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:(()=>{try{return T(y)}catch{return b}})()}};return console.log("askAITwice response:",A),A}catch(s){throw console.error("Error in askAITwice:",s),s}},KN=P.createContext(null),XN=(t,e,n,r,s,a,c,u,h,f,p,y,b,E,T)=>{console.log(1);const A=s.find(B=>B.id===e);if(!A)return null;console.log(2);const R=A.data.tokenColors||{};if(console.log(3),!y){const B=t.myConcept||t.word;if(R[B])return console.log(`Token "${B}" is already colored, ignoring click`),null}console.log(4);let k;r==="staticEditable"?k=yT():k=h?K6(h):yT();let z=null;if(y)z=b;else{const B={...R};t.myConcept?B[t.myConcept]=k:B[t.word]=k,a(X=>X.map(D=>D.id===e?{...D,data:{...D.data,tokenColors:B}}:D));const U=X6(n);z=Z6(U,t.word,"Loading...","",k,r,e);const Y=J6(e,z.id,k,p);c([{type:"add",item:z}]),u([{type:"add",item:Y}])}return z&&(z.data.isLoading=!0),y&&(console.log(5),a(B=>B.map(U=>U.id===z?.id?{...U,data:{...U.data,label:"Loading...",summary:"",full_text:"",previousNode:e,isLoading:!0}}:U))),CH(t.word,f||"",E||"default",B=>{a(U=>U.map(Y=>{if(Y.id===z?.id){const X=Y.data.summary||"";return{...Y,data:{...Y.data,label:X+B,summary:X+B}}}return Y}))}).then(B=>{const U=B.firstResponse?.response||t.word,Y=B.secondResponse?.response||t.word,X=B.thirdResponse?.response||{};a(D=>D.map(S=>S.id===z?.id?{...S,data:{...S.data,label:Y,title:t.word,summary:Y,full_text:U,suggestions:X,isLoading:!1}}:S))}).catch(()=>{a(B=>B.map(U=>U.id===z?.id?{...U,data:{...U.data,label:t.word,title:t.word,summary:t.word,full_text:t.word,suggestions:[],isLoading:!1}}:U))}),k},RH=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,showExplanation:a})=>{const c=(u,h,f,p,y,b,E,T,A,R)=>XN(u,h,f,p,e,s,n,r,y,b,E,T,A,R);return C.jsx(KN.Provider,{value:{handleTokenClick:c,setNodes:s,showExplanation:a},children:t})},WN=()=>{const t=P.useContext(KN);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t};function IH({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const NH=P.forwardRef(IH);function kH({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const DH=P.forwardRef(kH);function MH({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const OH=P.forwardRef(MH);function PH({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const VH=P.forwardRef(PH);function LH({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const zH=P.forwardRef(LH);function UH({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const BH=P.forwardRef(UH);function jH({title:t,titleId:e,...n},r){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?P.createElement("title",{id:e},t):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const HH=P.forwardRef(jH),u_=P.createContext({});function d_(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const h_=typeof window<"u",QN=h_?P.useLayoutEffect:P.useEffect,Rp=P.createContext(null);function f_(t,e){t.indexOf(e)===-1&&t.push(e)}function m_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const xs=(t,e,n)=>n>e?e:n<t?t:n;let p_=()=>{};const Ts={},ZN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function JN(t){return typeof t=="object"&&t!==null}const ek=t=>/^0[^.\s]+$/u.test(t);function g_(t){let e;return()=>(e===void 0&&(e=t()),e)}const jr=t=>t,FH=(t,e)=>n=>e(t(n)),th=(...t)=>t.reduce(FH),kd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class y_{constructor(){this.subscriptions=[]}add(e){return f_(this.subscriptions,e),()=>m_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const c=this.subscriptions[a];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pi=t=>t*1e3,Vi=t=>t/1e3;function tk(t,e){return e?t*(1e3/e):0}const nk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$H=1e-7,qH=12;function GH(t,e,n,r,s){let a,c,u=0;do c=e+(n-e)/2,a=nk(c,r,s)-t,a>0?n=c:e=c;while(Math.abs(a)>$H&&++u<qH);return c}function nh(t,e,n,r){if(t===e&&n===r)return jr;const s=a=>GH(a,0,1,t,n);return a=>a===0||a===1?a:nk(s(a),e,r)}const rk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ik=t=>e=>1-t(1-e),sk=nh(.33,1.53,.69,.99),v_=ik(sk),ok=rk(v_),ak=t=>(t*=2)<1?.5*v_(t):.5*(2-Math.pow(2,-10*(t-1))),b_=t=>1-Math.sin(Math.acos(t)),lk=ik(b_),ck=rk(b_),YH=nh(.42,0,1,1),KH=nh(0,0,.58,1),uk=nh(.42,0,.58,1),XH=t=>Array.isArray(t)&&typeof t[0]!="number",dk=t=>Array.isArray(t)&&typeof t[0]=="number",WH={linear:jr,easeIn:YH,easeInOut:uk,easeOut:KH,circIn:b_,circInOut:ck,circOut:lk,backIn:v_,backInOut:ok,backOut:sk,anticipate:ak},QH=t=>typeof t=="string",aA=t=>{if(dk(t)){p_(t.length===4);const[e,n,r,s]=t;return nh(e,n,r,s)}else if(QH(t))return WH[t];return t},Ff=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ZH(t,e){let n=new Set,r=new Set,s=!1,a=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){c.has(p)&&(f.schedule(p),t()),p(u)}const f={schedule:(p,y=!1,b=!1)=>{const T=b&&s?n:r;return y&&c.add(p),T.has(p)||T.add(p),p},cancel:p=>{r.delete(p),c.delete(p)},process:p=>{if(u=p,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(h),n.clear(),s=!1,a&&(a=!1,f.process(p))}};return f}const JH=40;function hk(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=Ff.reduce((B,U)=>(B[U]=ZH(a),B),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:p,update:y,preRender:b,render:E,postRender:T}=c,A=()=>{const B=Ts.useManualTiming?s.timestamp:performance.now();n=!1,Ts.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(B-s.timestamp,JH),1)),s.timestamp=B,s.isProcessing=!0,u.process(s),h.process(s),f.process(s),p.process(s),y.process(s),b.process(s),E.process(s),T.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(A))},R=()=>{n=!0,r=!0,s.isProcessing||t(A)};return{schedule:Ff.reduce((B,U)=>{const Y=c[U];return B[U]=(X,D=!1,S=!1)=>(n||R(),Y.schedule(X,D,S)),B},{}),cancel:B=>{for(let U=0;U<Ff.length;U++)c[Ff[U]].cancel(B)},state:s,steps:c}}const{schedule:wt,cancel:Ao,state:En,steps:dy}=hk(typeof requestAnimationFrame<"u"?requestAnimationFrame:jr,!0);let cm;function eF(){cm=void 0}const Jn={now:()=>(cm===void 0&&Jn.set(En.isProcessing||Ts.useManualTiming?En.timestamp:performance.now()),cm),set:t=>{cm=t,queueMicrotask(eF)}},fk=t=>e=>typeof e=="string"&&e.startsWith(t),__=fk("--"),tF=fk("var(--"),E_=t=>tF(t)?nF.test(t.split("/*")[0].trim()):!1,nF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Dd={...Rc,transform:t=>xs(0,1,t)},$f={...Rc,default:1},od=t=>Math.round(t*1e5)/1e5,w_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rF(t){return t==null}const iF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,x_=(t,e)=>n=>!!(typeof n=="string"&&iF.test(n)&&n.startsWith(t)||e&&!rF(n)&&Object.prototype.hasOwnProperty.call(n,e)),mk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,c,u]=r.match(w_);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},sF=t=>xs(0,255,t),hy={...Rc,transform:t=>Math.round(sF(t))},ba={test:x_("rgb","red"),parse:mk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+hy.transform(t)+", "+hy.transform(e)+", "+hy.transform(n)+", "+od(Dd.transform(r))+")"};function oF(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const _v={test:x_("#"),parse:oF,transform:ba.transform},rh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Js=rh("deg"),Li=rh("%"),Ve=rh("px"),aF=rh("vh"),lF=rh("vw"),lA={...Li,parse:t=>Li.parse(t)/100,transform:t=>Li.transform(t*100)},Gl={test:x_("hsl","hue"),parse:mk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Li.transform(od(e))+", "+Li.transform(od(n))+", "+od(Dd.transform(r))+")"},Wt={test:t=>ba.test(t)||_v.test(t)||Gl.test(t),parse:t=>ba.test(t)?ba.parse(t):Gl.test(t)?Gl.parse(t):_v.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ba.transform(t):Gl.transform(t),getAnimatableNone:t=>{const e=Wt.parse(t);return e.alpha=0,Wt.transform(e)}},cF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uF(t){return isNaN(t)&&typeof t=="string"&&(t.match(w_)?.length||0)+(t.match(cF)?.length||0)>0}const pk="number",gk="color",dF="var",hF="var(",cA="${}",fF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Md(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const u=e.replace(fF,h=>(Wt.test(h)?(r.color.push(a),s.push(gk),n.push(Wt.parse(h))):h.startsWith(hF)?(r.var.push(a),s.push(dF),n.push(h)):(r.number.push(a),s.push(pk),n.push(parseFloat(h))),++a,cA)).split(cA);return{values:n,split:u,indexes:r,types:s}}function yk(t){return Md(t).values}function vk(t){const{split:e,types:n}=Md(t),r=e.length;return s=>{let a="";for(let c=0;c<r;c++)if(a+=e[c],s[c]!==void 0){const u=n[c];u===pk?a+=od(s[c]):u===gk?a+=Wt.transform(s[c]):a+=s[c]}return a}}const mF=t=>typeof t=="number"?0:Wt.test(t)?Wt.getAnimatableNone(t):t;function pF(t){const e=yk(t);return vk(t)(e.map(mF))}const Co={test:uF,parse:yk,createTransformer:vk,getAnimatableNone:pF};function fy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function gF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,c=0;if(!e)s=a=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;s=fy(h,u,t+1/3),a=fy(h,u,t),c=fy(h,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function $m(t,e){return n=>n>0?e:t}const At=(t,e,n)=>t+(e-t)*n,my=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},yF=[_v,ba,Gl],vF=t=>yF.find(e=>e.test(t));function uA(t){const e=vF(t);if(!e)return!1;let n=e.parse(t);return e===Gl&&(n=gF(n)),n}const dA=(t,e)=>{const n=uA(t),r=uA(e);if(!n||!r)return $m(t,e);const s={...n};return a=>(s.red=my(n.red,r.red,a),s.green=my(n.green,r.green,a),s.blue=my(n.blue,r.blue,a),s.alpha=At(n.alpha,r.alpha,a),ba.transform(s))},Ev=new Set(["none","hidden"]);function bF(t,e){return Ev.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function _F(t,e){return n=>At(t,e,n)}function T_(t){return typeof t=="number"?_F:typeof t=="string"?E_(t)?$m:Wt.test(t)?dA:xF:Array.isArray(t)?bk:typeof t=="object"?Wt.test(t)?dA:EF:$m}function bk(t,e){const n=[...t],r=n.length,s=t.map((a,c)=>T_(a)(a,e[c]));return a=>{for(let c=0;c<r;c++)n[c]=s[c](a);return n}}function EF(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=T_(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function wF(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],c=t.indexes[a][r[a]],u=t.values[c]??0;n[s]=u,r[a]++}return n}const xF=(t,e)=>{const n=Co.createTransformer(e),r=Md(t),s=Md(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Ev.has(t)&&!s.values.length||Ev.has(e)&&!r.values.length?bF(t,e):th(bk(wF(r,s),s.values),n):$m(t,e)};function _k(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?At(t,e,n):T_(t)(t,e)}const TF=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>wt.update(e,n),stop:()=>Ao(e),now:()=>En.isProcessing?En.timestamp:Jn.now()}},Ek=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},qm=2e4;function S_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<qm;)e+=n,r=t.next(e);return e>=qm?1/0:e}function SF(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(S_(r),qm);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Vi(s)}}const AF=5;function wk(t,e,n){const r=Math.max(e-AF,0);return tk(n-t(r),e-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},py=.001;function CF({duration:t=Mt.duration,bounce:e=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let s,a,c=1-e;c=xs(Mt.minDamping,Mt.maxDamping,c),t=xs(Mt.minDuration,Mt.maxDuration,Vi(t)),c<1?(s=f=>{const p=f*c,y=p*t,b=p-n,E=wv(f,c),T=Math.exp(-y);return py-b/E*T},a=f=>{const y=f*c*t,b=y*n+n,E=Math.pow(c,2)*Math.pow(f,2)*t,T=Math.exp(-y),A=wv(Math.pow(f,2),c);return(-s(f)+py>0?-1:1)*((b-E)*T)/A}):(s=f=>{const p=Math.exp(-f*t),y=(f-n)*t+1;return-py+p*y},a=f=>{const p=Math.exp(-f*t),y=(n-f)*(t*t);return p*y});const u=5/t,h=IF(s,a,u);if(t=Pi(t),isNaN(h))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:t};{const f=Math.pow(h,2)*r;return{stiffness:f,damping:c*2*Math.sqrt(r*f),duration:t}}}const RF=12;function IF(t,e,n){let r=n;for(let s=1;s<RF;s++)r=r-t(r)/e(r);return r}function wv(t,e){return t*Math.sqrt(1-e*e)}const NF=["duration","bounce"],kF=["stiffness","damping","mass"];function hA(t,e){return e.some(n=>t[n]!==void 0)}function DF(t){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...t};if(!hA(t,kF)&&hA(t,NF))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*xs(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Mt.mass,stiffness:s,damping:a}}else{const n=CF(t);e={...e,...n,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function Gm(t=Mt.visualDuration,e=Mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:h,damping:f,mass:p,duration:y,velocity:b,isResolvedFromDuration:E}=DF({...n,velocity:-Vi(n.velocity||0)}),T=b||0,A=f/(2*Math.sqrt(h*p)),R=c-a,k=Vi(Math.sqrt(h/p)),z=Math.abs(R)<5;r||(r=z?Mt.restSpeed.granular:Mt.restSpeed.default),s||(s=z?Mt.restDelta.granular:Mt.restDelta.default);let B;if(A<1){const Y=wv(k,A);B=X=>{const D=Math.exp(-A*k*X);return c-D*((T+A*k*R)/Y*Math.sin(Y*X)+R*Math.cos(Y*X))}}else if(A===1)B=Y=>c-Math.exp(-k*Y)*(R+(T+k*R)*Y);else{const Y=k*Math.sqrt(A*A-1);B=X=>{const D=Math.exp(-A*k*X),S=Math.min(Y*X,300);return c-D*((T+A*k*R)*Math.sinh(S)+Y*R*Math.cosh(S))/Y}}const U={calculatedDuration:E&&y||null,next:Y=>{const X=B(Y);if(E)u.done=Y>=y;else{let D=Y===0?T:0;A<1&&(D=Y===0?Pi(T):wk(B,Y,X));const S=Math.abs(D)<=r,I=Math.abs(c-X)<=s;u.done=S&&I}return u.value=u.done?c:X,u},toString:()=>{const Y=Math.min(S_(U),qm),X=Ek(D=>U.next(Y*D).value,Y,30);return Y+"ms "+X},toTransition:()=>{}};return U}Gm.applyToOptions=t=>{const e=SF(t,100,Gm);return t.ease=e.ease,t.duration=Pi(e.duration),t.type="keyframes",t};function xv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:c,min:u,max:h,restDelta:f=.5,restSpeed:p}){const y=t[0],b={done:!1,value:y},E=S=>u!==void 0&&S<u||h!==void 0&&S>h,T=S=>u===void 0?h:h===void 0||Math.abs(u-S)<Math.abs(h-S)?u:h;let A=n*e;const R=y+A,k=c===void 0?R:c(R);k!==R&&(A=k-y);const z=S=>-A*Math.exp(-S/r),B=S=>k+z(S),U=S=>{const I=z(S),j=B(S);b.done=Math.abs(I)<=f,b.value=b.done?k:j};let Y,X;const D=S=>{E(b.value)&&(Y=S,X=Gm({keyframes:[b.value,T(b.value)],velocity:wk(B,S,b.value),damping:s,stiffness:a,restDelta:f,restSpeed:p}))};return D(0),{calculatedDuration:null,next:S=>{let I=!1;return!X&&Y===void 0&&(I=!0,U(S),D(S)),Y!==void 0&&S>=Y?X.next(S-Y):(!I&&U(S),b)}}}function MF(t,e,n){const r=[],s=n||Ts.mix||_k,a=t.length-1;for(let c=0;c<a;c++){let u=s(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||jr:e;u=th(h,u)}r.push(u)}return r}function OF(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(p_(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=MF(e,r,s),h=u.length,f=p=>{if(c&&p<t[0])return e[0];let y=0;if(h>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const b=kd(t[y],t[y+1],p);return u[y](b)};return n?p=>f(xs(t[0],t[a-1],p)):f}function PF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=kd(0,e,r);t.push(At(n,1,s))}}function VF(t){const e=[0];return PF(e,t.length-1),e}function LF(t,e){return t.map(n=>n*e)}function zF(t,e){return t.map(()=>e||uk).splice(0,t.length-1)}function ad({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=XH(r)?r.map(aA):aA(r),a={done:!1,value:e[0]},c=LF(n&&n.length===e.length?n:VF(e),t),u=OF(c,e,{ease:Array.isArray(s)?s:zF(e,s)});return{calculatedDuration:t,next:h=>(a.value=u(h),a.done=h>=t,a)}}const UF=t=>t!==null;function A_(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(UF),u=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const BF={decay:xv,inertia:xv,tween:ad,keyframes:ad,spring:Gm};function xk(t){typeof t.type=="string"&&(t.type=BF[t.type])}class C_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const jF=t=>t/100;class R_ extends C_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Jn.now()&&this.tick(Jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xk(e);const{type:n=ad,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:c=0}=e;let{keyframes:u}=e;const h=n||ad;h!==ad&&typeof u[0]!="number"&&(this.mixKeyframes=th(jF,_k(u[0],u[1])),u=[0,100]);const f=h({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...u].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=S_(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:p,repeat:y,repeatType:b,repeatDelay:E,type:T,onUpdate:A,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const k=this.currentTime-f*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?k<0:k>s;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let B=this.currentTime,U=r;if(y){const S=Math.min(this.currentTime,s)/u;let I=Math.floor(S),j=S%1;!j&&S>=1&&(j=1),j===1&&I--,I=Math.min(I,y+1),!!(I%2)&&(b==="reverse"?(j=1-j,E&&(j-=E/u)):b==="mirror"&&(U=c)),B=xs(0,1,j)*u}const Y=z?{done:!1,value:p[0]}:U.next(B);a&&(Y.value=a(Y.value));let{done:X}=Y;!z&&h!==null&&(X=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return D&&T!==xv&&(Y.value=A_(p,this.options,R,this.speed)),A&&A(Y.value),D&&this.finish(),Y}then(e,n){return this.finished.then(e,n)}get duration(){return Vi(this.calculatedDuration)}get time(){return Vi(this.currentTime)}set time(e){e=Pi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=TF,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function HF(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const _a=t=>t*180/Math.PI,Tv=t=>{const e=_a(Math.atan2(t[1],t[0]));return Sv(e)},FF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Tv,rotateZ:Tv,skewX:t=>_a(Math.atan(t[1])),skewY:t=>_a(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sv=t=>(t=t%360,t<0&&(t+=360),t),fA=Tv,mA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),pA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),$F={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:mA,scaleY:pA,scale:t=>(mA(t)+pA(t))/2,rotateX:t=>Sv(_a(Math.atan2(t[6],t[5]))),rotateY:t=>Sv(_a(Math.atan2(-t[2],t[0]))),rotateZ:fA,rotate:fA,skewX:t=>_a(Math.atan(t[4])),skewY:t=>_a(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Av(t){return t.includes("scale")?1:0}function Cv(t,e){if(!t||t==="none")return Av(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=$F,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=FF,s=u}if(!s)return Av(e);const a=r[e],c=s[1].split(",").map(GF);return typeof a=="function"?a(c):c[a]}const qF=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Cv(n,e)};function GF(t){return parseFloat(t.trim())}const Ic=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nc=new Set(Ic),gA=t=>t===Rc||t===Ve,YF=new Set(["x","y","z"]),KF=Ic.filter(t=>!YF.has(t));function XF(t){const e=[];return KF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const xa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Cv(e,"x"),y:(t,{transform:e})=>Cv(e,"y")};xa.translateX=xa.x;xa.translateY=xa.y;const Ta=new Set;let Rv=!1,Iv=!1,Nv=!1;function Tk(){if(Iv){const t=Array.from(Ta).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=XF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,c])=>{r.getValue(a)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Iv=!1,Rv=!1,Ta.forEach(t=>t.complete(Nv)),Ta.clear()}function Sk(){Ta.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Iv=!0)})}function WF(){Nv=!0,Sk(),Tk(),Nv=!1}class I_{constructor(e,n,r,s,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Ta.add(this),Rv||(Rv=!0,wt.read(Sk),wt.resolveKeyframes(Tk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s?.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),s&&a===void 0&&s.set(e[0])}HF(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ta.delete(this)}cancel(){this.state==="scheduled"&&(Ta.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const QF=t=>t.startsWith("--");function ZF(t,e,n){QF(e)?t.style.setProperty(e,n):t.style[e]=n}const JF=g_(()=>window.ScrollTimeline!==void 0),e$={};function t$(t,e){const n=g_(t);return()=>e$[e]??n()}const Ak=t$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,yA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zu([0,.65,.55,1]),circOut:Zu([.55,0,1,.45]),backIn:Zu([.31,.01,.66,-.59]),backOut:Zu([.33,1.53,.69,.99])};function Ck(t,e){if(t)return typeof t=="function"?Ak()?Ek(t,e):"ease-out":dk(t)?Zu(t):Array.isArray(t)?t.map(n=>Ck(n,e)||yA.easeOut):yA[t]}function n$(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:c="loop",ease:u="easeOut",times:h}={},f=void 0){const p={[e]:n};h&&(p.offset=h);const y=Ck(u,s);Array.isArray(y)&&(p.easing=y);const b={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(b.pseudoElement=f),t.animate(p,b)}function Rk(t){return typeof t=="function"&&"applyToOptions"in t}function r$({type:t,...e}){return Rk(t)&&Ak()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class i$ extends C_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:u,onComplete:h}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,p_(typeof e.type!="string");const f=r$(e);this.animation=n$(n,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=A_(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):ZF(n,r,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Vi(Number(e))}get time(){return Vi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Pi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&JF()?(this.animation.timeline=e,jr):n(this)}}const Ik={anticipate:ak,backInOut:ok,circInOut:ck};function s$(t){return t in Ik}function o$(t){typeof t.ease=="string"&&s$(t.ease)&&(t.ease=Ik[t.ease])}const vA=10;class a$ extends i${constructor(e){o$(e),xk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new R_({...c,autoplay:!1}),h=Pi(this.finishedTime??this.time);n.setWithVelocity(u.sample(h-vA).value,u.sample(h).value,vA),u.stop()}}const bA=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Co.test(t)||t==="0")&&!t.startsWith("url("));function l$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function c$(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=bA(s,e),u=bA(a,e);return!c||!u?!1:l$(t)||(n==="spring"||Rk(n))&&r}const u$=new Set(["opacity","clipPath","filter","transform"]),d$=g_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h$(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return d$()&&n&&u$.has(n)&&(n!=="transform"||!f)&&!h&&!r&&s!=="mirror"&&a!==0&&c!=="inertia"}const f$=40;class m$ extends C_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:c="loop",keyframes:u,name:h,motionValue:f,element:p,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jn.now();const b={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:c,name:h,motionValue:f,element:p,...y},E=p?.KeyframeResolver||I_;this.keyframeResolver=new E(u,(T,A,R)=>this.onKeyframesResolved(T,A,b,!R),h,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:c,velocity:u,delay:h,isHandoff:f,onUpdate:p}=r;this.resolvedAt=Jn.now(),c$(e,a,c,u)||((Ts.instantAnimations||!h)&&p?.(A_(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const b={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>f$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},E=!f&&h$(b)?new a$({...b,element:b.motionValue.owner.current}):new R_(b);E.finished.then(()=>this.notifyFinished()).catch(jr),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),WF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const p$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g$(t){const e=p$.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Nk(t,e,n=1){const[r,s]=g$(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const c=a.trim();return ZN(c)?parseFloat(c):c}return E_(s)?Nk(s,e,n+1):s}function N_(t,e){return t?.[e]??t?.default??t}const kk=new Set(["width","height","top","left","right","bottom",...Ic]),y$={test:t=>t==="auto",parse:t=>t},Dk=t=>e=>e.test(t),Mk=[Rc,Ve,Li,Js,lF,aF,y$],_A=t=>Mk.find(Dk(t));function v$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||ek(t):!0}const b$=new Set(["brightness","contrast","saturate","opacity"]);function _$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(w_)||[];if(!r)return t;const s=n.replace(r,"");let a=b$.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const E$=/\b([a-z-]*)\(.*?\)/gu,kv={...Co,getAnimatableNone:t=>{const e=t.match(E$);return e?e.map(_$).join(" "):t}},EA={...Rc,transform:Math.round},w$={rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:$f,scaleX:$f,scaleY:$f,scaleZ:$f,skew:Js,skewX:Js,skewY:Js,distance:Ve,translateX:Ve,translateY:Ve,translateZ:Ve,x:Ve,y:Ve,z:Ve,perspective:Ve,transformPerspective:Ve,opacity:Dd,originX:lA,originY:lA,originZ:Ve},k_={borderWidth:Ve,borderTopWidth:Ve,borderRightWidth:Ve,borderBottomWidth:Ve,borderLeftWidth:Ve,borderRadius:Ve,radius:Ve,borderTopLeftRadius:Ve,borderTopRightRadius:Ve,borderBottomRightRadius:Ve,borderBottomLeftRadius:Ve,width:Ve,maxWidth:Ve,height:Ve,maxHeight:Ve,top:Ve,right:Ve,bottom:Ve,left:Ve,padding:Ve,paddingTop:Ve,paddingRight:Ve,paddingBottom:Ve,paddingLeft:Ve,margin:Ve,marginTop:Ve,marginRight:Ve,marginBottom:Ve,marginLeft:Ve,backgroundPositionX:Ve,backgroundPositionY:Ve,...w$,zIndex:EA,fillOpacity:Dd,strokeOpacity:Dd,numOctaves:EA},x$={...k_,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:kv,WebkitFilter:kv},Ok=t=>x$[t];function Pk(t,e){let n=Ok(t);return n!==kv&&(n=Co),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const T$=new Set(["auto","none","0"]);function S$(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!T$.has(a)&&Md(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=Pk(n,s)}class A$ extends I_{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),E_(f))){const p=Nk(f,n.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!kk.has(r)||e.length!==2)return;const[s,a]=e,c=_A(s),u=_A(a);if(c!==u)if(gA(c)&&gA(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else xa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||v$(e[s]))&&r.push(s);r.length&&S$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=xa[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function C$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const Vk=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Lk(t){return JN(t)&&"offsetHeight"in t}const wA=30,R$=t=>!isNaN(parseFloat(t));class I${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Jn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=R$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new y_);const r=this.events[e].add(n);return e==="change"?()=>{r(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,wA);return tk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vc(t,e){return new I$(t,e)}const{schedule:D_}=hk(queueMicrotask,!1),Qr={x:!1,y:!1};function zk(){return Qr.x||Qr.y}function N$(t){return t==="x"||t==="y"?Qr[t]?null:(Qr[t]=!0,()=>{Qr[t]=!1}):Qr.x||Qr.y?null:(Qr.x=Qr.y=!0,()=>{Qr.x=Qr.y=!1})}function Uk(t,e){const n=C$(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function xA(t){return!(t.pointerType==="touch"||zk())}function k$(t,e,n={}){const[r,s,a]=Uk(t,n),c=u=>{if(!xA(u))return;const{target:h}=u,f=e(h,u);if(typeof f!="function"||!h)return;const p=y=>{xA(y)&&(f(y),h.removeEventListener("pointerleave",p))};h.addEventListener("pointerleave",p,s)};return r.forEach(u=>{u.addEventListener("pointerenter",c,s)}),a}const Bk=(t,e)=>e?t===e?!0:Bk(t,e.parentElement):!1,M_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,D$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function M$(t){return D$.has(t.tagName)||t.tabIndex!==-1}const um=new WeakSet;function TA(t){return e=>{e.key==="Enter"&&t(e)}}function gy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const O$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=TA(()=>{if(um.has(n))return;gy(n,"down");const s=TA(()=>{gy(n,"up")}),a=()=>gy(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function SA(t){return M_(t)&&!zk()}function P$(t,e,n={}){const[r,s,a]=Uk(t,n),c=u=>{const h=u.currentTarget;if(!SA(u))return;um.add(h);const f=e(h,u),p=(E,T)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",b),um.has(h)&&um.delete(h),SA(E)&&typeof f=="function"&&f(E,{success:T})},y=E=>{p(E,h===window||h===document||n.useGlobalTarget||Bk(h,E.target))},b=E=>{p(E,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",b,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,s),Lk(u)&&(u.addEventListener("focus",f=>O$(f,s)),!M$(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function jk(t){return JN(t)&&"ownerSVGElement"in t}function V$(t){return jk(t)&&t.tagName==="svg"}const Dn=t=>!!(t&&t.getVelocity),L$=[...Mk,Wt,Co],z$=t=>L$.find(Dk(t)),O_=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class U$ extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Lk(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B$({children:t,isPresent:e,anchorX:n,root:r}){const s=P.useId(),a=P.useRef(null),c=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=P.useContext(O_);return P.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:y,right:b}=c.current;if(e||!a.current||!h||!f)return;const E=n==="left"?`left: ${y}`:`right: ${b}`;a.current.dataset.motionPopId=s;const T=document.createElement("style");u&&(T.nonce=u);const A=r??document.head;return A.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{A.removeChild(T),A.contains(T)&&A.removeChild(T)}},[e]),C.jsx(U$,{isPresent:e,childRef:a,sizeRef:c,children:P.cloneElement(t,{ref:a})})}const j$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:c,anchorX:u,root:h})=>{const f=d_(H$),p=P.useId();let y=!0,b=P.useMemo(()=>(y=!1,{id:p,initial:e,isPresent:n,custom:s,onExitComplete:E=>{f.set(E,!0);for(const T of f.values())if(!T)return;r&&r()},register:E=>(f.set(E,!1),()=>f.delete(E))}),[n,f,r]);return a&&y&&(b={...b}),P.useMemo(()=>{f.forEach((E,T)=>f.set(T,!1))},[n]),P.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(t=C.jsx(B$,{isPresent:n,anchorX:u,root:h,children:t})),C.jsx(Rp.Provider,{value:b,children:t})};function H$(){return new Map}function Hk(t=!0){const e=P.useContext(Rp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=P.useId();P.useEffect(()=>{if(t)return s(a)},[t]);const c=P.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,c]:[!0]}const qf=t=>t.key||"";function AA(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const CA=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:c=!1,anchorX:u="left",root:h})=>{const[f,p]=Hk(c),y=P.useMemo(()=>AA(t),[t]),b=c&&!f?[]:y.map(qf),E=P.useRef(!0),T=P.useRef(y),A=d_(()=>new Map),[R,k]=P.useState(y),[z,B]=P.useState(y);QN(()=>{E.current=!1,T.current=y;for(let X=0;X<z.length;X++){const D=qf(z[X]);b.includes(D)?A.delete(D):A.get(D)!==!0&&A.set(D,!1)}},[z,b.length,b.join("-")]);const U=[];if(y!==R){let X=[...y];for(let D=0;D<z.length;D++){const S=z[D],I=qf(S);b.includes(I)||(X.splice(D,0,S),U.push(S))}return a==="wait"&&U.length&&(X=U),B(AA(X)),k(y),null}const{forceRender:Y}=P.useContext(u_);return C.jsx(C.Fragment,{children:z.map(X=>{const D=qf(X),S=c&&!f?!1:y===z||b.includes(D),I=()=>{if(A.has(D))A.set(D,!0);else return;let j=!0;A.forEach(F=>{F||(j=!1)}),j&&(Y?.(),B(T.current),c&&p?.(),r&&r())};return C.jsx(j$,{isPresent:S,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:h,onExitComplete:S?void 0:I,anchorX:u,children:X},D)})})},Fk=P.createContext({strict:!1}),RA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bc={};for(const t in RA)bc[t]={isEnabled:e=>RA[t].some(n=>!!e[n])};function F$(t){for(const e in t)bc[e]={...bc[e],...t[e]}}const $$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ym(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$$.has(t)}let $k=t=>!Ym(t);function q$(t){typeof t=="function"&&($k=e=>e.startsWith("on")?!Ym(e):t(e))}try{q$(require("@emotion/is-prop-valid").default)}catch{}function G$(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||($k(s)||n===!0&&Ym(s)||!e&&!Ym(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Ip=P.createContext({});function Np(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Od(t){return typeof t=="string"||Array.isArray(t)}const P_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],V_=["initial",...P_];function kp(t){return Np(t.animate)||V_.some(e=>Od(t[e]))}function qk(t){return!!(kp(t)||t.variants)}function Y$(t,e){if(kp(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Od(n)?n:void 0,animate:Od(r)?r:void 0}}return t.inherit!==!1?e:{}}function K$(t){const{initial:e,animate:n}=Y$(t,P.useContext(Ip));return P.useMemo(()=>({initial:e,animate:n}),[IA(e),IA(n)])}function IA(t){return Array.isArray(t)?t.join(" "):t}const Pd={};function X$(t){for(const e in t)Pd[e]=t[e],__(e)&&(Pd[e].isCSSVariable=!0)}function Gk(t,{layout:e,layoutId:n}){return Nc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Pd[t]||t==="opacity")}const W$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Q$=Ic.length;function Z$(t,e,n){let r="",s=!0;for(let a=0;a<Q$;a++){const c=Ic[a],u=t[c];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(c.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const f=Vk(u,k_[c]);if(!h){s=!1;const p=W$[c]||c;r+=`${p}(${f}) `}n&&(e[c]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function L_(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let c=!1,u=!1;for(const h in e){const f=e[h];if(Nc.has(h)){c=!0;continue}else if(__(h)){s[h]=f;continue}else{const p=Vk(f,k_[h]);h.startsWith("origin")?(u=!0,a[h]=p):r[h]=p}}if(e.transform||(c||n?r.transform=Z$(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=a;r.transformOrigin=`${h} ${f} ${p}`}}const z_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Yk(t,e,n){for(const r in e)!Dn(e[r])&&!Gk(r,n)&&(t[r]=e[r])}function J$({transformTemplate:t},e){return P.useMemo(()=>{const n=z_();return L_(n,e,t),Object.assign({},n.vars,n.style)},[e])}function eq(t,e){const n=t.style||{},r={};return Yk(r,n,t),Object.assign(r,J$(t,e)),r}function tq(t,e){const n={},r=eq(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const nq={offset:"stroke-dashoffset",array:"stroke-dasharray"},rq={offset:"strokeDashoffset",array:"strokeDasharray"};function iq(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?nq:rq;t[a.offset]=Ve.transform(-r);const c=Ve.transform(e),u=Ve.transform(n);t[a.array]=`${c} ${u}`}function Kk(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:c=0,...u},h,f,p){if(L_(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:b}=t;y.transform&&(b.transform=y.transform,delete y.transform),(b.transform||y.transformOrigin)&&(b.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),b.transform&&(b.transformBox=p?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),s!==void 0&&iq(y,s,a,c,!1)}const Xk=()=>({...z_(),attrs:{}}),Wk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sq(t,e,n,r){const s=P.useMemo(()=>{const a=Xk();return Kk(a,e,Wk(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};Yk(a,t.style,t),s.style={...a,...s.style}}return s}const oq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function U_(t){return typeof t!="string"||t.includes("-")?!1:!!(oq.indexOf(t)>-1||/[A-Z]/u.test(t))}function aq(t,e,n,{latestValues:r},s,a=!1){const u=(U_(t)?sq:tq)(e,r,s,t),h=G$(e,typeof t=="string",a),f=t!==P.Fragment?{...h,...u,ref:n}:{},{children:p}=e,y=P.useMemo(()=>Dn(p)?p.get():p,[p]);return P.createElement(t,{...f,children:y})}function NA(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function B_(t,e,n,r){if(typeof e=="function"){const[s,a]=NA(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=NA(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function dm(t){return Dn(t)?t.get():t}function lq({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:cq(n,r,s,t),renderState:e()}}function cq(t,e,n,r){const s={},a=r(t,{});for(const b in a)s[b]=dm(a[b]);let{initial:c,animate:u}=t;const h=kp(t),f=qk(t);e&&f&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let p=n?n.initial===!1:!1;p=p||c===!1;const y=p?u:c;if(y&&typeof y!="boolean"&&!Np(y)){const b=Array.isArray(y)?y:[y];for(let E=0;E<b.length;E++){const T=B_(t,b[E]);if(T){const{transitionEnd:A,transition:R,...k}=T;for(const z in k){let B=k[z];if(Array.isArray(B)){const U=p?B.length-1:0;B=B[U]}B!==null&&(s[z]=B)}for(const z in A)s[z]=A[z]}}}return s}const Qk=t=>(e,n)=>{const r=P.useContext(Ip),s=P.useContext(Rp),a=()=>lq(t,e,r,s);return n?a():d_(a)};function j_(t,e,n){const{style:r}=t,s={};for(const a in r)(Dn(r[a])||e.style&&Dn(e.style[a])||Gk(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const uq=Qk({scrapeMotionValuesFromProps:j_,createRenderState:z_});function Zk(t,e,n){const r=j_(t,e,n);for(const s in t)if(Dn(t[s])||Dn(e[s])){const a=Ic.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const dq=Qk({scrapeMotionValuesFromProps:Zk,createRenderState:Xk}),hq=Symbol.for("motionComponentSymbol");function Yl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fq(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yl(n)&&(n.current=r))},[e])}const H_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mq="framerAppearId",Jk="data-"+H_(mq),eD=P.createContext({});function pq(t,e,n,r,s){const{visualElement:a}=P.useContext(Ip),c=P.useContext(Fk),u=P.useContext(Rp),h=P.useContext(O_).reducedMotion,f=P.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,y=P.useContext(eD);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&gq(f.current,n,s,y);const b=P.useRef(!1);P.useInsertionEffect(()=>{p&&b.current&&p.update(n,u)});const E=n[Jk],T=P.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return QN(()=>{p&&(b.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),T.current&&p.animationState&&p.animationState.animateChanges())}),P.useEffect(()=>{p&&(!T.current&&p.animationState&&p.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),T.current=!1))}),p}function gq(t,e,n,r){const{layoutId:s,layout:a,drag:c,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:tD(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!c||u&&Yl(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:h,layoutRoot:f})}function tD(t){if(t)return t.options.allowProjection!==!1?t.projection:tD(t.parent)}function yy(t,{forwardMotionProps:e=!1}={},n,r){n&&F$(n);const s=U_(t)?dq:uq;function a(u,h){let f;const p={...P.useContext(O_),...u,layoutId:yq(u)},{isStatic:y}=p,b=K$(u),E=s(u,y);if(!y&&h_){vq();const T=bq(p);f=T.MeasureLayout,b.visualElement=pq(t,E,p,r,T.ProjectionNode)}return C.jsxs(Ip.Provider,{value:b,children:[f&&b.visualElement?C.jsx(f,{visualElement:b.visualElement,...p}):null,aq(t,u,fq(E,b.visualElement,h),E,y,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=P.forwardRef(a);return c[hq]=t,c}function yq({layoutId:t}){const e=P.useContext(u_).id;return e&&t!==void 0?e+"-"+t:t}function vq(t,e){P.useContext(Fk).strict}function bq(t){const{drag:e,layout:n}=bc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function _q(t,e){if(typeof Proxy>"u")return yy;const n=new Map,r=(a,c)=>yy(a,c,t,e),s=(a,c)=>r(a,c);return new Proxy(s,{get:(a,c)=>c==="create"?r:(n.has(c)||n.set(c,yy(c,void 0,t,e)),n.get(c))})}function nD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Eq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vy(t){return t===void 0||t===1}function Dv({scale:t,scaleX:e,scaleY:n}){return!vy(t)||!vy(e)||!vy(n)}function ma(t){return Dv(t)||rD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rD(t){return kA(t.x)||kA(t.y)}function kA(t){return t&&t!=="0%"}function Km(t,e,n){const r=t-n,s=e*r;return n+s}function DA(t,e,n,r,s){return s!==void 0&&(t=Km(t,s,r)),Km(t,n,r)+e}function Mv(t,e=0,n=1,r,s){t.min=DA(t.min,e,n,r,s),t.max=DA(t.max,e,n,r,s)}function iD(t,{x:e,y:n}){Mv(t.x,e.translate,e.scale,e.originPoint),Mv(t.y,n.translate,n.scale,n.originPoint)}const MA=.999999999999,OA=1.0000000000001;function xq(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,c;for(let u=0;u<s;u++){a=n[u],c=a.projectionDelta;const{visualElement:h}=a.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Xl(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,iD(t,c)),r&&ma(a.latestValues)&&Xl(t,a.latestValues))}e.x<OA&&e.x>MA&&(e.x=1),e.y<OA&&e.y>MA&&(e.y=1)}function Kl(t,e){t.min=t.min+e,t.max=t.max+e}function PA(t,e,n,r,s=.5){const a=At(t.min,t.max,s);Mv(t,e,n,a,r)}function Xl(t,e){PA(t.x,e.x,e.scaleX,e.scale,e.originX),PA(t.y,e.y,e.scaleY,e.scale,e.originY)}function sD(t,e){return nD(wq(t.getBoundingClientRect(),e))}function Tq(t,e,n){const r=sD(t,n),{scroll:s}=e;return s&&(Kl(r.x,s.offset.x),Kl(r.y,s.offset.y)),r}const VA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wl=()=>({x:VA(),y:VA()}),LA=()=>({min:0,max:0}),Bt=()=>({x:LA(),y:LA()}),Ov={current:null},oD={current:!1};function Sq(){if(oD.current=!0,!!h_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ov.current=t.matches;t.addEventListener("change",e),e()}else Ov.current=!1}const Aq=new WeakMap;function Cq(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Dn(s))t.addValue(r,s);else if(Dn(a))t.addValue(r,vc(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(r);t.addValue(r,vc(c!==void 0?c:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Rq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=I_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Jn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,wt.render(this.render,!1,!0))};const{latestValues:h,renderState:f}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=kp(n),this.isVariantNode=qk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in y){const E=y[b];h[b]!==void 0&&Dn(E)&&E.set(h[b],!1)}}mount(e){this.current=e,Aq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),oD.current||Sq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ov.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ao(this.notifyUpdate),Ao(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Nc.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&wt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bc){const n=bc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zA.length;r++){const s=zA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,c=e[a];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=Cq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ZN(r)||ek(r))?r=parseFloat(r):!z$(r)&&Co.test(n)&&(r=Pk(e,n)),this.setBaseTarget(e,Dn(r)?r.get():r)),Dn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=B_(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Dn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new y_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){D_.render(this.render)}}class aD extends Rq{constructor(){super(...arguments),this.KeyframeResolver=A$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function lD(t,{style:e,vars:n},r,s){const a=t.style;let c;for(c in e)a[c]=e[c];s?.applyProjectionStyles(a,r);for(c in n)a.setProperty(c,n[c])}function Iq(t){return window.getComputedStyle(t)}class Nq extends aD{constructor(){super(...arguments),this.type="html",this.renderInstance=lD}readValueFromInstance(e,n){if(Nc.has(n))return this.projection?.isProjecting?Av(n):qF(e,n);{const r=Iq(e),s=(__(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sD(e,n)}build(e,n,r){L_(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return j_(e,n,r)}}const cD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kq(t,e,n,r){lD(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(cD.has(s)?s:H_(s),e.attrs[s])}class Dq extends aD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Bt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Nc.has(n)){const r=Ok(n);return r&&r.default||0}return n=cD.has(n)?n:H_(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Zk(e,n,r)}build(e,n,r){Kk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){kq(e,n,r,s)}mount(e){this.isSVGTag=Wk(e.tagName),super.mount(e)}}const Mq=(t,e)=>U_(t)?new Dq(e):new Nq(e,{allowProjection:t!==P.Fragment});function Vd(t,e,n){const r=t.getProps();return B_(r,e,n!==void 0?n:r.custom,t)}const Pv=t=>Array.isArray(t);function Oq(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vc(n))}function Pq(t){return Pv(t)?t[t.length-1]||0:t}function Vq(t,e){const n=Vd(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const c in a){const u=Pq(a[c]);Oq(t,c,u)}}function Lq(t){return!!(Dn(t)&&t.add)}function Vv(t,e){const n=t.getValue("willChange");if(Lq(n))return n.add(e);if(!n&&Ts.WillChange){const r=new Ts.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function uD(t){return t.props[Jk]}const zq=t=>t!==null;function Uq(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(zq),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const Bq={type:"spring",stiffness:500,damping:25,restSpeed:10},jq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Hq={type:"keyframes",duration:.8},Fq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$q=(t,{keyframes:e})=>e.length>2?Hq:Nc.has(t)?t.startsWith("scale")?jq(e[1]):Bq:Fq;function qq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:c,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const F_=(t,e,n,r={},s,a)=>c=>{const u=N_(r,t)||{},h=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-Pi(h);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:b=>{e.set(b),u.onUpdate&&u.onUpdate(b)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:s};qq(u)||Object.assign(p,$q(t,p)),p.duration&&(p.duration=Pi(p.duration)),p.repeatDelay&&(p.repeatDelay=Pi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(y=!0)),(Ts.instantAnimations||Ts.skipAnimations)&&(y=!0,p.duration=0,p.delay=0),p.allowFlatten=!u.type&&!u.ease,y&&!a&&e.get()!==void 0){const b=Uq(p.keyframes,u);if(b!==void 0){wt.update(()=>{p.onUpdate(b),p.onComplete()});return}}return u.isSync?new R_(p):new m$(p)};function Gq({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function dD(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(a=r);const h=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const p in u){const y=t.getValue(p,t.latestValues[p]??null),b=u[p];if(b===void 0||f&&Gq(f,p))continue;const E={delay:n,...N_(a||{},p)},T=y.get();if(T!==void 0&&!y.isAnimating&&!Array.isArray(b)&&b===T&&!E.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const k=uD(t);if(k){const z=window.MotionHandoffAnimation(k,p,wt);z!==null&&(E.startTime=z,A=!0)}}Vv(t,p),y.start(F_(p,y,b,t.shouldReduceMotion&&kk.has(p)?{type:!1}:E,t,A));const R=y.animation;R&&h.push(R)}return c&&Promise.all(h).then(()=>{wt.update(()=>{c&&Vq(t,c)})}),h}function Lv(t,e,n={}){const r=Vd(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(dD(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:y}=s;return Yq(t,e,h,f,p,y,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[h,f]=u==="beforeChildren"?[a,c]:[c,a];return h().then(()=>f())}else return Promise.all([a(),c(n.delay)])}function Yq(t,e,n=0,r=0,s=0,a=1,c){const u=[],h=t.variantChildren.size,f=(h-1)*s,p=typeof r=="function",y=p?b=>r(b,h):a===1?(b=0)=>b*s:(b=0)=>f-b*s;return Array.from(t.variantChildren).sort(Kq).forEach((b,E)=>{b.notify("AnimationStart",e),u.push(Lv(b,e,{...c,delay:n+(p?0:r)+y(E)}).then(()=>b.notify("AnimationComplete",e)))}),Promise.all(u)}function Kq(t,e){return t.sortNodePosition(e)}function Xq(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>Lv(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=Lv(t,e,n);else{const s=typeof e=="function"?Vd(t,e,n.custom):e;r=Promise.all(dD(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function hD(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Wq=V_.length;function fD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Wq;n++){const r=V_[n],s=t.props[r];(Od(s)||s===!1)&&(e[r]=s)}return e}const Qq=[...P_].reverse(),Zq=P_.length;function Jq(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Xq(t,n,r)))}function eG(t){let e=Jq(t),n=UA(),r=!0;const s=h=>(f,p)=>{const y=Vd(t,p,h==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:b,transitionEnd:E,...T}=y;f={...f,...T,...E}}return f};function a(h){e=h(t)}function c(h){const{props:f}=t,p=fD(t.parent)||{},y=[],b=new Set;let E={},T=1/0;for(let R=0;R<Zq;R++){const k=Qq[R],z=n[k],B=f[k]!==void 0?f[k]:p[k],U=Od(B),Y=k===h?z.isActive:null;Y===!1&&(T=R);let X=B===p[k]&&B!==f[k]&&U;if(X&&r&&t.manuallyAnimateOnMount&&(X=!1),z.protectedKeys={...E},!z.isActive&&Y===null||!B&&!z.prevProp||Np(B)||typeof B=="boolean")continue;const D=tG(z.prevProp,B);let S=D||k===h&&z.isActive&&!X&&U||R>T&&U,I=!1;const j=Array.isArray(B)?B:[B];let F=j.reduce(s(k),{});Y===!1&&(F={});const{prevResolvedValues:$={}}=z,O={...$,...F},L=W=>{S=!0,b.has(W)&&(I=!0,b.delete(W)),z.needsAnimating[W]=!0;const G=t.getValue(W);G&&(G.liveStyle=!1)};for(const W in O){const G=F[W],K=$[W];if(E.hasOwnProperty(W))continue;let N=!1;Pv(G)&&Pv(K)?N=!hD(G,K):N=G!==K,N?G!=null?L(W):b.add(W):G!==void 0&&b.has(W)?L(W):z.protectedKeys[W]=!0}z.prevProp=B,z.prevResolvedValues=F,z.isActive&&(E={...E,...F}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(X&&D)||I)&&y.push(...j.map(W=>({animation:W,options:{type:k}})))}if(b.size){const R={};if(typeof f.initial!="boolean"){const k=Vd(t,Array.isArray(f.initial)?f.initial[0]:f.initial);k&&k.transition&&(R.transition=k.transition)}b.forEach(k=>{const z=t.getBaseTarget(k),B=t.getValue(k);B&&(B.liveStyle=!0),R[k]=z??null}),y.push({animation:R})}let A=!!y.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(y):Promise.resolve()}function u(h,f){if(n[h].isActive===f)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(h,f)),n[h].isActive=f;const p=c(h);for(const y in n)n[y].protectedKeys={};return p}return{animateChanges:c,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=UA(),r=!0}}}function tG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!hD(e,t):!1}function da(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function UA(){return{animate:da(!0),whileInView:da(),whileHover:da(),whileTap:da(),whileDrag:da(),whileFocus:da(),exit:da()}}class Do{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nG extends Do{constructor(e){super(e),e.animationState||(e.animationState=eG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Np(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let rG=0;class iG extends Do{constructor(){super(...arguments),this.id=rG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const sG={animation:{Feature:nG},exit:{Feature:iG}};function Ld(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ih(t){return{point:{x:t.pageX,y:t.pageY}}}const oG=t=>e=>M_(e)&&t(e,ih(e));function ld(t,e,n,r){return Ld(t,e,oG(n),r)}const mD=1e-4,aG=1-mD,lG=1+mD,pD=.01,cG=0-pD,uG=0+pD;function Fn(t){return t.max-t.min}function dG(t,e,n){return Math.abs(t-e)<=n}function BA(t,e,n,r=.5){t.origin=r,t.originPoint=At(e.min,e.max,t.origin),t.scale=Fn(n)/Fn(e),t.translate=At(n.min,n.max,t.origin)-t.originPoint,(t.scale>=aG&&t.scale<=lG||isNaN(t.scale))&&(t.scale=1),(t.translate>=cG&&t.translate<=uG||isNaN(t.translate))&&(t.translate=0)}function cd(t,e,n,r){BA(t.x,e.x,n.x,r?r.originX:void 0),BA(t.y,e.y,n.y,r?r.originY:void 0)}function jA(t,e,n){t.min=n.min+e.min,t.max=t.min+Fn(e)}function hG(t,e,n){jA(t.x,e.x,n.x),jA(t.y,e.y,n.y)}function HA(t,e,n){t.min=e.min-n.min,t.max=t.min+Fn(e)}function ud(t,e,n){HA(t.x,e.x,n.x),HA(t.y,e.y,n.y)}function zr(t){return[t("x"),t("y")]}const gD=({current:t})=>t?t.ownerDocument.defaultView:null,FA=(t,e)=>Math.abs(t-e);function fG(t,e){const n=FA(t.x,e.x),r=FA(t.y,e.y);return Math.sqrt(n**2+r**2)}class yD{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=_y(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,T=fG(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!T)return;const{point:A}=b,{timestamp:R}=En;this.history.push({...A,timestamp:R});const{onStart:k,onMove:z}=this.handlers;E||(k&&k(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,b)},this.handlePointerMove=(b,E)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=by(E,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(b,E)=>{this.end();const{onEnd:T,onSessionEnd:A,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=_y(b.type==="pointercancel"?this.lastMoveEventInfo:by(E,this.transformPagePoint),this.history);this.startEvent&&T&&T(b,k),A&&A(b,k)},!M_(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const u=ih(e),h=by(u,this.transformPagePoint),{point:f}=h,{timestamp:p}=En;this.history=[{...f,timestamp:p}];const{onSessionStart:y}=n;y&&y(e,_y(h,this.history)),this.removeListeners=th(ld(this.contextWindow,"pointermove",this.handlePointerMove),ld(this.contextWindow,"pointerup",this.handlePointerUp),ld(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ao(this.updatePoint)}}function by(t,e){return e?{point:e(t.point)}:t}function $A(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _y({point:t},e){return{point:t,delta:$A(t,vD(e)),offset:$A(t,mG(e)),velocity:pG(e,.1)}}function mG(t){return t[0]}function vD(t){return t[t.length-1]}function pG(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=vD(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Pi(e)));)n--;if(!r)return{x:0,y:0};const a=Vi(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function gG(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?At(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?At(n,t,r.max):Math.min(t,n)),t}function qA(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function yG(t,{top:e,left:n,bottom:r,right:s}){return{x:qA(t.x,n,s),y:qA(t.y,e,r)}}function GA(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function vG(t,e){return{x:GA(t.x,e.x),y:GA(t.y,e.y)}}function bG(t,e){let n=.5;const r=Fn(t),s=Fn(e);return s>r?n=kd(e.min,e.max-r,t.min):r>s&&(n=kd(t.min,t.max-s,e.min)),xs(0,1,n)}function _G(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const zv=.35;function EG(t=zv){return t===!1?t=0:t===!0&&(t=zv),{x:YA(t,"left","right"),y:YA(t,"top","bottom")}}function YA(t,e,n){return{min:KA(t,e),max:KA(t,n)}}function KA(t,e){return typeof t=="number"?t:t[e]||0}const wG=new WeakMap;class xG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ih(y).point)},c=(y,b)=>{const{drag:E,dragPropagation:T,onDragStart:A}=this.getProps();if(E&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=N$(E),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zr(k=>{let z=this.getAxisMotionValue(k).get()||0;if(Li.test(z)){const{projection:B}=this.visualElement;if(B&&B.layout){const U=B.layout.layoutBox[k];U&&(z=Fn(U)*(parseFloat(z)/100))}}this.originPoint[k]=z}),A&&wt.postRender(()=>A(y,b)),Vv(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},u=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b;const{dragPropagation:E,dragDirectionLock:T,onDirectionLock:A,onDrag:R}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:k}=b;if(T&&this.currentDirection===null){this.currentDirection=TG(k),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",b.point,k),this.updateAxis("y",b.point,k),this.visualElement.render(),R&&R(y,b)},h=(y,b)=>{this.latestPointerEvent=y,this.latestPanInfo=b,this.stop(y,b),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>zr(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new yD(e,{onSessionStart:a,onStart:c,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:gD(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&wt.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Gf(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=gG(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Yl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=yG(r.layoutBox,e):this.constraints=!1,this.elastic=EG(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=_G(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=Tq(r,s.root,this.visualElement.getTransformPagePoint());let c=vG(s.layout.layoutBox,a);if(n){const u=n(Eq(c));this.hasMutatedConstraints=!!u,u&&(c=nD(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=zr(p=>{if(!Gf(p,n,this.currentDirection))return;let y=h&&h[p]||{};c&&(y={min:0,max:0});const b=s?200:1e6,E=s?40:1e7,T={type:"inertia",velocity:r?e[p]:0,bounceStiffness:b,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(p,T)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Vv(this.visualElement,e),r.start(F_(e,r,0,n,this.visualElement,!1))}stopAnimation(){zr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zr(n=>{const{drag:r}=this.getProps();if(!Gf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:u}=s.layout.layoutBox[n];a.set(e[n]-At(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zr(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const h=u.get();s[c]=bG({min:h,max:h},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zr(c=>{if(!Gf(c,e,null))return;const u=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];u.set(At(h,f,s[c]))})}addListeners(){if(!this.visualElement.current)return;wG.set(this.visualElement,this);const e=this.visualElement.current,n=ld(e,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Yl(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),wt.read(r);const c=Ld(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(zr(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=h[p].translate,y.set(y.get()+h[p].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:c=zv,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:c,dragMomentum:u}}}function Gf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function TG(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class SG extends Do{constructor(e){super(e),this.removeGroupControls=jr,this.removeListeners=jr,this.controls=new xG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jr}unmount(){this.removeGroupControls(),this.removeListeners()}}const XA=t=>(e,n)=>{t&&wt.postRender(()=>t(e,n))};class AG extends Do{constructor(){super(...arguments),this.removePointerDownListener=jr}onPointerDown(e){this.session=new yD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:XA(e),onStart:XA(n),onMove:r,onEnd:(a,c)=>{delete this.session,s&&wt.postRender(()=>s(a,c))}}}mount(){this.removePointerDownListener=ld(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WA(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ju={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ve.test(t))t=parseFloat(t);else return t;const n=WA(t,e.target.x),r=WA(t,e.target.y);return`${n}% ${r}%`}},CG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Co.parse(t);if(s.length>5)return r;const a=Co.createTransformer(t),c=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;s[0+c]/=u,s[1+c]/=h;const f=At(u,h,.5);return typeof s[2+c]=="number"&&(s[2+c]/=f),typeof s[3+c]=="number"&&(s[3+c]/=f),a(s)}};let QA=!1;class RG extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;X$(IG),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),QA&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),hm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:c}=r;return c&&(c.isPresent=a,QA=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||wt.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),D_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bD(t){const[e,n]=Hk(),r=P.useContext(u_);return C.jsx(RG,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(eD),isPresent:e,safeToRemove:n})}const IG={borderRadius:{...ju,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ju,borderTopRightRadius:ju,borderBottomLeftRadius:ju,borderBottomRightRadius:ju,boxShadow:CG};function NG(t,e,n){const r=Dn(t)?t:vc(t);return r.start(F_("",r,e,n)),r.animation}const kG=(t,e)=>t.depth-e.depth;class DG{constructor(){this.children=[],this.isDirty=!1}add(e){f_(this.children,e),this.isDirty=!0}remove(e){m_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kG),this.isDirty=!1,this.children.forEach(e)}}function MG(t,e){const n=Jn.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(Ao(r),t(a-e))};return wt.setup(r,!0),()=>Ao(r)}const _D=["TopLeft","TopRight","BottomLeft","BottomRight"],OG=_D.length,ZA=t=>typeof t=="string"?parseFloat(t):t,JA=t=>typeof t=="number"||Ve.test(t);function PG(t,e,n,r,s,a){s?(t.opacity=At(0,n.opacity??1,VG(r)),t.opacityExit=At(e.opacity??1,0,LG(r))):a&&(t.opacity=At(e.opacity??1,n.opacity??1,r));for(let c=0;c<OG;c++){const u=`border${_D[c]}Radius`;let h=e2(e,u),f=e2(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||JA(h)===JA(f)?(t[u]=Math.max(At(ZA(h),ZA(f),r),0),(Li.test(f)||Li.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=At(e.rotate||0,n.rotate||0,r))}function e2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const VG=ED(0,.5,lk),LG=ED(.5,.95,jr);function ED(t,e,n){return r=>r<t?0:r>e?1:n(kd(t,e,r))}function t2(t,e){t.min=e.min,t.max=e.max}function Lr(t,e){t2(t.x,e.x),t2(t.y,e.y)}function n2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function r2(t,e,n,r,s){return t-=e,t=Km(t,1/n,r),s!==void 0&&(t=Km(t,1/s,r)),t}function zG(t,e=0,n=1,r=.5,s,a=t,c=t){if(Li.test(e)&&(e=parseFloat(e),e=At(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=At(a.min,a.max,r);t===a&&(u-=e),t.min=r2(t.min,e,n,u,s),t.max=r2(t.max,e,n,u,s)}function i2(t,e,[n,r,s],a,c){zG(t,e[n],e[r],e[s],e.scale,a,c)}const UG=["x","scaleX","originX"],BG=["y","scaleY","originY"];function s2(t,e,n,r){i2(t.x,e,UG,n?n.x:void 0,r?r.x:void 0),i2(t.y,e,BG,n?n.y:void 0,r?r.y:void 0)}function o2(t){return t.translate===0&&t.scale===1}function wD(t){return o2(t.x)&&o2(t.y)}function a2(t,e){return t.min===e.min&&t.max===e.max}function jG(t,e){return a2(t.x,e.x)&&a2(t.y,e.y)}function l2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function xD(t,e){return l2(t.x,e.x)&&l2(t.y,e.y)}function c2(t){return Fn(t.x)/Fn(t.y)}function u2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class HG{constructor(){this.members=[]}add(e){f_(this.members,e),e.scheduleRender()}remove(e){if(m_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FG(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,c=n?.z||0;if((s||a||c)&&(r=`translate3d(${s}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:y,rotateY:b,skewX:E,skewY:T}=n;f&&(r=`perspective(${f}px) ${r}`),p&&(r+=`rotate(${p}deg) `),y&&(r+=`rotateX(${y}deg) `),b&&(r+=`rotateY(${b}deg) `),E&&(r+=`skewX(${E}deg) `),T&&(r+=`skewY(${T}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const Ey=["","X","Y","Z"],$G=1e3;let qG=0;function wy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function TD(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=uD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",wt,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&TD(r)}function SD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},u=e?.()){this.id=qG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(KG),this.nodes.forEach(ZG),this.nodes.forEach(JG),this.nodes.forEach(XG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new DG)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new y_),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const h=this.eventHandlers.get(c);h&&h.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=jk(c)&&!V$(c),this.instance=c;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),t){let p,y=0;const b=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{y=window.innerWidth}),t(c,()=>{const E=window.innerWidth;E!==y&&(y=E,this.root.updateBlockedByResize=!0,p&&p(),p=MG(b,250),hm.hasAnimatedSinceResize&&(hm.hasAnimatedSinceResize=!1,this.nodes.forEach(f2)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:b,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||f.getDefaultTransition()||iY,{onLayoutAnimationStart:A,onLayoutAnimationComplete:R}=f.getProps(),k=!this.targetLayout||!xD(this.targetLayout,E),z=!y&&b;if(this.options.layoutRoot||this.resumeFrom||z||y&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const B={...N_(T,"layout"),onPlay:A,onComplete:R};(f.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B),this.setAnimationOrigin(p,z)}else y||f2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ao(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eY),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&TD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(d2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(h2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QG),this.nodes.forEach(GG),this.nodes.forEach(YG)):this.nodes.forEach(h2),this.clearAllSnapshots();const u=Jn.now();En.delta=xs(0,1e3/60,u-En.timestamp),En.timestamp=u,En.isProcessing=!0,dy.update.process(En),dy.preRender.process(En),dy.render.process(En),En.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,D_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(WG),this.sharedNodes.forEach(tY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Fn(this.snapshot.measuredBox.x)&&!Fn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!wD(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;c&&this.instance&&(u||ma(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return c&&(h=this.removeTransform(h)),sY(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Bt();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(oY))){const{scroll:f}=this.root;f&&(Kl(u.x,f.offset.x),Kl(u.y,f.offset.y))}return u}removeElementScroll(c){const u=Bt();if(Lr(u,c),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:y}=f;f!==this.root&&p&&y.layoutScroll&&(p.wasRoot&&Lr(u,c),Kl(u.x,p.offset.x),Kl(u.y,p.offset.y))}return u}applyTransform(c,u=!1){const h=Bt();Lr(h,c);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Xl(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ma(p.latestValues)&&Xl(h,p.latestValues)}return ma(this.latestValues)&&Xl(h,this.latestValues),h}removeTransform(c){const u=Bt();Lr(u,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!ma(f.latestValues))continue;Dv(f.latestValues)&&f.updateSnapshot();const p=Bt(),y=f.measurePageBox();Lr(p,y),s2(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return ma(this.latestValues)&&s2(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==En.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(c||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=En.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),ud(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Bt(),this.targetWithTransforms=Bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lr(this.target,this.layout.layoutBox),iD(this.target,this.targetDelta)):Lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bt(),this.relativeTargetOrigin=Bt(),ud(this.relativeTargetOrigin,this.target,b.target),Lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Dv(this.parent.latestValues)||rD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===En.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Lr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,b=this.treeScale.y;xq(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Bt());const{target:E}=c;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(n2(this.prevProjectionDelta.x,this.projectionDelta.x),n2(this.prevProjectionDelta.y,this.projectionDelta.y)),cd(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==b||!u2(this.projectionDelta.x,this.prevProjectionDelta.x)||!u2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wl(),this.projectionDelta=Wl(),this.projectionDeltaWithTransform=Wl()}setAnimationOrigin(c,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},y=Wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const b=Bt(),E=h?h.source:void 0,T=this.layout?this.layout.source:void 0,A=E!==T,R=this.getStack(),k=!R||R.members.length<=1,z=!!(A&&!k&&this.options.crossfade===!0&&!this.path.some(rY));this.animationProgress=0;let B;this.mixTargetDelta=U=>{const Y=U/1e3;m2(y.x,c.x,Y),m2(y.y,c.y,Y),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ud(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),nY(this.relativeTarget,this.relativeTargetOrigin,b,Y),B&&jG(this.relativeTarget,B)&&(this.isProjectionDirty=!1),B||(B=Bt()),Lr(B,this.relativeTarget)),A&&(this.animationValues=p,PG(p,f,this.latestValues,Y,z,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ao(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{hm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vc(0)),this.currentAnimation=NG(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($G),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=c;if(!(!u||!h||!f)){if(this!==c&&this.layout&&f&&AD(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Bt();const y=Fn(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+y;const b=Fn(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+b}Lr(u,h),Xl(u,p),cd(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new HG),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&wy("z",c,f,this.animationValues);for(let p=0;p<Ey.length;p++)wy(`rotate${Ey[p]}`,c,f,this.animationValues),wy(`skew${Ey[p]}`,c,f,this.animationValues);c.render();for(const p in f)c.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=dm(u?.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=dm(u?.pointerEvents)||""),this.hasProjected&&!ma(this.latestValues)&&(c.transform=h?h({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let y=FG(this.projectionDeltaWithTransform,this.treeScale,p);h&&(y=h(p,y)),c.transform=y;const{x:b,y:E}=this.projectionDelta;c.transformOrigin=`${b.origin*100}% ${E.origin*100}% 0`,f.animationValues?c.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const T in Pd){if(p[T]===void 0)continue;const{correct:A,applyTo:R,isCSSVariable:k}=Pd[T],z=y==="none"?p[T]:A(p[T],f);if(R){const B=R.length;for(let U=0;U<B;U++)c[R[U]]=z}else k?this.options.visualElement.renderState.vars[T]=z:c[T]=z}this.options.layoutId&&(c.pointerEvents=f===this?dm(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(d2),this.root.sharedNodes.clear()}}}function GG(t){t.updateLayout()}function YG(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?zr(p=>{const y=a?e.measuredBox[p]:e.layoutBox[p],b=Fn(y);y.min=n[p].min,y.max=y.min+b}):AD(s,e.layoutBox,n)&&zr(p=>{const y=a?e.measuredBox[p]:e.layoutBox[p],b=Fn(n[p]);y.max=y.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+b)});const c=Wl();cd(c,n,e.layoutBox);const u=Wl();a?cd(u,t.applyTransform(r,!0),e.measuredBox):cd(u,n,e.layoutBox);const h=!wD(c);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:y,layout:b}=p;if(y&&b){const E=Bt();ud(E,e.layoutBox,y.layoutBox);const T=Bt();ud(T,n,b.layoutBox),xD(E,T)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=E,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function KG(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function XG(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function WG(t){t.clearSnapshot()}function d2(t){t.clearMeasurements()}function h2(t){t.isLayoutDirty=!1}function QG(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function f2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ZG(t){t.resolveTargetDelta()}function JG(t){t.calcProjection()}function eY(t){t.resetSkewAndRotation()}function tY(t){t.removeLeadSnapshot()}function m2(t,e,n){t.translate=At(e.translate,0,n),t.scale=At(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function p2(t,e,n,r){t.min=At(e.min,n.min,r),t.max=At(e.max,n.max,r)}function nY(t,e,n,r){p2(t.x,e.x,n.x,r),p2(t.y,e.y,n.y,r)}function rY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const iY={duration:.45,ease:[.4,0,.1,1]},g2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),y2=g2("applewebkit/")&&!g2("chrome/")?Math.round:jr;function v2(t){t.min=y2(t.min),t.max=y2(t.max)}function sY(t){v2(t.x),v2(t.y)}function AD(t,e,n){return t==="position"||t==="preserve-aspect"&&!dG(c2(e),c2(n),.2)}function oY(t){return t!==t.root&&t.scroll?.wasRoot}const aY=SD({attachResizeListener:(t,e)=>Ld(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xy={current:void 0},CD=SD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xy.current){const t=new aY({});t.mount(window),t.setOptions({layoutScroll:!0}),xy.current=t}return xy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lY={pan:{Feature:AG},drag:{Feature:SG,ProjectionNode:CD,MeasureLayout:bD}};function b2(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&wt.postRender(()=>a(e,ih(e)))}class cY extends Do{mount(){const{current:e}=this.node;e&&(this.unmount=k$(e,(n,r)=>(b2(this.node,r,"Start"),s=>b2(this.node,s,"End"))))}unmount(){}}class uY extends Do{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=th(Ld(this.node.current,"focus",()=>this.onFocus()),Ld(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _2(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&wt.postRender(()=>a(e,ih(e)))}class dY extends Do{mount(){const{current:e}=this.node;e&&(this.unmount=P$(e,(n,r)=>(_2(this.node,r,"Start"),(s,{success:a})=>_2(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Uv=new WeakMap,Ty=new WeakMap,hY=t=>{const e=Uv.get(t.target);e&&e(t)},fY=t=>{t.forEach(hY)};function mY({root:t,...e}){const n=t||document;Ty.has(n)||Ty.set(n,{});const r=Ty.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(fY,{root:t,...e})),r[s]}function pY(t,e,n){const r=mY(e);return Uv.set(t,n),r.observe(t),()=>{Uv.delete(t),r.unobserve(t)}}const gY={some:0,all:1};class yY extends Do{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:gY[s]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),b=f?p:y;b&&b(h)};return pY(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(vY(e,n))&&this.startObserver()}unmount(){}}function vY({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bY={inView:{Feature:yY},tap:{Feature:dY},focus:{Feature:uY},hover:{Feature:cY}},_Y={layout:{ProjectionNode:CD,MeasureLayout:bD}},EY={...sG,...bY,...lY,..._Y},Sy=_q(EY,Mq),br={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},fr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function wY(){const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,a]=P.useState(!1),[c,u]=P.useState(!1),[h,f]=P.useState(!1),[p,y]=P.useState(""),b=async A=>{A.preventDefault(),f(!0),y("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(fr.INVALID_EMAIL);if(n.length<6)throw new Error(fr.WEAK_PASSWORD);const k=s?_8:E8,{user:z}=await k(l_,t,n);console.info("Auth success • uid:",z.uid)}catch(R){y(E(R))}finally{f(!1)}},E=A=>{switch(A.code){case"auth/email-already-in-use":return fr.EMAIL_IN_USE;case"auth/invalid-email":return fr.INVALID_EMAIL;case"auth/weak-password":return fr.WEAK_PASSWORD;case"auth/user-not-found":return fr.USER_NOT_FOUND;case"auth/wrong-password":return fr.WRONG_PASSWORD;case"auth/too-many-requests":return fr.TOO_MANY_REQUESTS;case"auth/user-disabled":return"This account has been disabled. Please contact support.";default:return A.message||"Authentication error"}},T="w-full px-4 py-3 rounded-lg border bg-white/80 dark:bg-gray-800/80 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 transition";return C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 dark:bg-gray-950/60 backdrop-blur-sm p-4",children:C.jsxs(Sy.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.25},className:"w-full max-w-md rounded-3xl shadow-lg bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 overflow-hidden",children:[C.jsxs("div",{className:"px-8 pt-8 pb-4 text-center",children:[C.jsx(CA,{mode:"wait",children:C.jsx(Sy.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25},className:"text-3xl font-semibold text-gray-900 dark:text-gray-100",children:s?"Create an account":"Welcome back"},s?"signup-header":"signin-header")}),C.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:s?"Start your AI‑powered journey.":"Sign in to continue."})]}),C.jsxs("form",{onSubmit:b,className:"px-8 pb-8 space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),C.jsxs("div",{className:"relative",children:[C.jsx(DH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),C.jsx("input",{id:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>e(A.target.value),placeholder:"you@example.com",className:`${T} pl-11`})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),C.jsxs("div",{className:"relative",children:[C.jsx(BH,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),C.jsx("input",{id:"password",type:c?"text":"password",autoComplete:s?"new-password":"current-password",required:!0,value:n,onChange:A=>r(A.target.value),placeholder:"••••••••",className:`${T} pl-11 pr-11`}),C.jsx("button",{type:"button",onClick:()=>u(A=>!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-500 dark:hover:text-gray-300","aria-label":c?"Hide password":"Show password",children:c?C.jsx(VH,{className:"h-5 w-5"}):C.jsx(zH,{className:"h-5 w-5"})})]})]}),C.jsx(CA,{children:p&&C.jsxs(Sy.div,{initial:{y:-6,opacity:0},animate:{y:0,opacity:1},exit:{y:-6,opacity:0},className:"flex items-start gap-3 rounded-lg border border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-900/30 px-4 py-3 text-sm text-red-700 dark:text-red-300",role:"alert",children:[C.jsx(OH,{className:"h-5 w-5 flex-shrink-0"}),C.jsx("span",{children:p})]},"error")}),C.jsxs("button",{type:"submit",disabled:h,className:"inline-flex w-full items-center justify-center gap-2 rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:cursor-not-allowed disabled:opacity-50 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:[h?C.jsxs("svg",{className:"h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):s?C.jsx(HH,{className:"h-5 w-5"}):C.jsx(NH,{className:"h-5 w-5"}),C.jsx("span",{children:h?s?"Creating account…":"Signing in…":s?"Sign Up":"Sign In"})]})]}),C.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 px-8 py-4 text-center",children:[C.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Already have an account?":"New to TinkFlow?"}),C.jsx("button",{onClick:()=>a(A=>!A),type:"button",className:"mt-2 text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none dark:text-indigo-400 dark:hover:text-indigo-300",children:s?"Sign In":"Create an account"})]})]})})}function xY({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,a]=P.useState(""),[c,u]=P.useState(!0),h=b=>{const E=b.target.value;a(E),u(E.trim().length>0&&E.trim().length<=50)},f=b=>{b.preventDefault();const E=s.trim();E.length>0&&E.length<=50&&(n(E),a(""),u(!0))},p=()=>{a(""),u(!0),e()},y=b=>{b.key==="Enter"&&f(b)};return t?C.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:C.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),C.jsx("button",{onClick:p,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:"×"})]}),C.jsxs("form",{onSubmit:f,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),C.jsx("input",{type:"text",value:s,onChange:h,onKeyDown:y,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&C.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),C.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),C.jsxs("div",{className:"flex gap-3 pt-4",children:[C.jsx("button",{type:"button",onClick:p,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),C.jsx("button",{type:"submit",disabled:!c||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function TY({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:a,isLoading:c}){const[u,h]=P.useState(!1),[f,p]=P.useState(!1),[y,b]=P.useState(null),E=async k=>{try{h(!0),await r(k),p(!1)}catch(z){console.error("Error in sidebar create board:",z)}finally{h(!1)}},T=()=>{p(!0)},A=()=>{p(!1)},R=(k,z)=>{k.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(z)};return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:C.jsxs("div",{className:"flex flex-col h-full",children:[C.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[C.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),C.jsx("button",{onClick:T,disabled:c||u,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||u?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:u?"Creating...":"+ New Board"})]}),C.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(k=>{const z=e?.id===k.id,B=y===k.id;return C.jsxs("div",{onClick:()=>!c&&n(k.id),onMouseEnter:()=>b(k.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${z?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":B?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:U=>{(U.key==="Enter"||U.key===" ")&&!c&&n(k.id)},children:[C.jsx("span",{className:`
                                        ${z?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:k.name}),C.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[k.isOpen&&C.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:"●"}),t.length>1&&C.jsx("button",{onClick:U=>{U.stopPropagation(),R(U,k.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${B?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:"×"})]})]},k.id)})}),c&&C.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),C.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:C.jsx("button",{onClick:a,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),C.jsx(xY,{show:f,onHide:A,onConfirm:E,isCreating:u})]})}const SY=P.memo(function({explanation:e,onClose:n,isVisible:r}){const[s,a]=P.useState(!1),[c,u]=P.useState(r);P.useEffect(()=>{r?(u(!0),setTimeout(()=>a(!0),10)):(a(!1),setTimeout(()=>u(!1),300))},[r]);const h=()=>{a(!1),setTimeout(()=>n(),300)};return c?C.jsx("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                                   border border-gray-200/50 dark:border-gray-700/50
                                   fade-in
                                   transition-all duration-300 ease-out
                                   ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                                   before:absolute before:inset-0 before:bg-gradient-to-br 
                                   before:from-white/40 before:to-transparent before:pointer-events-none
                                   dark:before:from-gray-800/40 dark:before:to-transparent
                                   relative overflow-auto
                                   ${s?"transform translate-x-0":"transform translate-x-full"}`,style:{height:"auto",maxHeight:"800px",minHeight:"200px"},children:C.jsxs("div",{className:`w-full h-full flex flex-col top-0 right-0 z-50 transition-all duration-300 ease-out ${s?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0"}`,children:[C.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${s?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,children:[C.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[C.jsx("span",{className:"text-blue-500",children:"📄"}),"Explanation"]}),C.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:h,title:"Close explanation","aria-label":"Close explanation sidebar",children:C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),C.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:e?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${s?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:C.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:e.title})}),C.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${s?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:C.jsx("div",{dangerouslySetInnerHTML:{__html:e.text}})})]}):C.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${s?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"text-6xl mb-6 opacity-60",children:"📄"}),C.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),C.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]})}):null}),RD=P.createContext(void 0),AY=()=>{const t=P.useContext(RD);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},CY=({children:t})=>{const[e,n]=P.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});P.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return C.jsx(RD.Provider,{value:{theme:e,toggleTheme:r},children:t})},ID=()=>{const{theme:t,toggleTheme:e}=AY();return C.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):C.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:C.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function RY({name:t,onSetName:e,user:n,isSaving:r}){const[s,a]=P.useState(!1),[c,u]=P.useState(t||"");P.useEffect(()=>{u(t||"")},[t]);const h=p=>{p.key==="Enter"&&(e(c),a(!1))},f=()=>{a(!0),u(t||"")};return C.jsx(C.Fragment,{children:C.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:C.jsx("div",{className:"max-w-none mx-auto px-4",children:C.jsxs("header",{className:"flex justify-between items-center py-3",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:C.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),C.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),C.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"•"}),s?C.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),onKeyDown:h,onBlur:()=>{e(c),a(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):C.jsx("button",{onClick:f,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[r&&C.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[C.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),C.jsx("span",{className:"font-medium",children:"Saving..."})]}),C.jsx(ID,{}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:C.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),C.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const IY=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return C.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",C.jsxs("div",{className:"flex items-start gap-3",children:[" ",C.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",C.jsxs("div",{className:"flex-1 min-w-0",children:[" ",C.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",C.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",C.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",C.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},NY=({notifications:t,onRemove:e})=>C.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>C.jsxs("div",{className:"pointer-events-auto",children:[" ",C.jsx(IY,{notification:n,onRemove:e})," "]},n.id))," "]});function kY({onLogin:t}){return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",C.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",C.jsxs("div",{className:"flex items-center space-x-3",children:[" ",C.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",C.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",C.jsxs("div",{className:"flex flex-col",children:[" ",C.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",C.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",C.jsxs("div",{className:"flex items-center gap-4",children:[" ",C.jsx(ID,{})," ",C.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"relative overflow-hidden",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",C.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",C.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",C.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",C.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",C.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",C.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",C.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",C.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",C.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"text-center mb-16",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",C.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",C.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",C.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",C.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",C.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",C.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",C.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",C.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"text-center mb-16",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",C.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",C.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",C.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",C.jsxs("div",{className:"text-center",children:[" ",C.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",C.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",C.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",C.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",C.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",C.jsxs("div",{className:"text-white",children:[" ",C.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",C.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"text-center mb-16",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",C.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",C.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🎓 Academic Learning"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:"• Research paper analysis"})," ",C.jsx("li",{children:"• Concept mapping for exams"})," ",C.jsx("li",{children:"• Cross-disciplinary connections"})," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","💡 Creative Exploration"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:"• Idea generation workflows"})," ",C.jsx("li",{children:"• Problem-solving frameworks"})," ",C.jsx("li",{children:"• Innovation mapping"})," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🔬 Technical Deep Dives"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:"• System architecture learning"})," ",C.jsx("li",{children:"• Technology stack exploration"})," ",C.jsx("li",{children:"• Code concept mapping"})," "]})," "]})," ",C.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",C.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🚀 Professional Development"," "]})," ",C.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",C.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",C.jsx("li",{children:"• Skill gap analysis"})," ",C.jsx("li",{children:"• Career pathway planning"})," ",C.jsx("li",{children:"• Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",C.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",C.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",C.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",C.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",C.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required • Get started in seconds"," "]})," "]})," "]})," "," ",C.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",C.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",C.jsxs("div",{className:"col-span-1",children:[" ",C.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",C.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",C.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",C.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",C.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",C.jsxs("div",{children:[" ",C.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",C.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",C.jsxs("div",{children:[" ",C.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",C.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",C.jsxs("div",{children:[" ",C.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",C.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",C.jsx("li",{children:C.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",C.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",C.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","© 2024 TinkFlow. All rights reserved."," "]})," ",C.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",C.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",C.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",C.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",C.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",C.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),E2=t=>{const e=MY(t);return e.charAt(0).toUpperCase()+e.slice(1)},ND=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),OY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:c,...u},h)=>P.createElement("svg",{ref:h,...PY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ND("lucide",s),...!a&&!OY(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,p])=>P.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=(t,e)=>{const n=P.forwardRef(({className:r,...s},a)=>P.createElement(VY,{ref:a,iconNode:e,className:ND(`lucide-${DY(E2(t))}`,`lucide-${t}`,r),...s}));return n.displayName=E2(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]],kD=$_("gavel",LY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],DD=$_("info",zY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],MD=$_("lightbulb",UY),BY={explain:{border:"border-blue-400",ring:"ring-blue-100 dark:ring-blue-500/30",placeholder:"Enter explanation…",Icon:DD},answer:{border:"border-emerald-400",ring:"ring-emerald-100 dark:ring-emerald-500/30",placeholder:"Enter answer…",Icon:MD},argue:{border:"border-rose-400",ring:"ring-rose-100 dark:ring-rose-500/30",placeholder:"Enter argument…",Icon:kD}};function jY({data:t}){const[e,n]=P.useState(""),r=P.useRef(null);P.useEffect(()=>{const f=requestAnimationFrame(()=>r.current?.focus());return()=>cancelAnimationFrame(f)},[]);const s=f=>{f.preventDefault();const p=e.trim();p&&t.onSubmit(p)},{border:a,ring:c,placeholder:u,Icon:h}=BY[t.mode];return C.jsxs("div",{className:`relative bg-white dark:bg-gray-900 shadow-lg rounded-xl px-4 py-3 min-w-[200px] border ${a} ring-1 ${c} transition-shadow`,children:[C.jsxs("form",{onSubmit:s,className:"flex items-center gap-2",children:[C.jsx(h,{size:18,className:"text-gray-400 dark:text-gray-500 shrink-0"}),C.jsx("input",{ref:r,value:e,onChange:f=>n(f.target.value),placeholder:u,className:"flex-1 bg-transparent outline-none text-sm placeholder-gray-400 dark:placeholder-gray-500 caret-gray-900 dark:caret-gray-100 text-gray-900 dark:text-gray-100"})]}),C.jsx(Nn,{type:"target",position:Te.Top}),C.jsx(Nn,{type:"source",position:Te.Bottom})]})}const HY=async()=>{try{await S8(l_),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},FY=()=>{const[t,e]=P.useState(null);return P.useEffect(()=>{const r=T8(l_,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await HY(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},OD=t=>!!(t&&t.uid),dd=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],oc=[],$Y=async t=>{if(!OD({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const e=Lb(ii,br.BOARDS),n=f7(e,m7("userId","==",t),p7("createdAt","desc")),r=await Xb(n);if(r.empty){const a={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:_t.now(),isOpen:!0};return await Wb(Ac(ii,br.BOARDS,a.id),a),console.log("Created default board:",a),[a]}const s=r.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:_t.now(),isOpen:!0,isFallback:!0}]}throw new Error(fr.LOAD_FAILED)}},w2=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),dd;try{const e=Lb(ii,br.BOARDS,t,br.NODES),n=await Xb(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),dd;const r=n.docs.map(s=>{const a=s.data(),c={...a.data,tokenColors:a.data?.tokenColors||{},previousNode:a.data?.previousNode||null};return{id:s.id,type:a.type,position:a.position,data:c,draggable:a.draggable,style:a.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),dd}},x2=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),oc;try{const e=Lb(ii,br.BOARDS,t,br.EDGES),n=await Xb(e);if(n.empty)return console.log("No edges found for board, using initial edges"),oc;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),oc}},qY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=cN(ii);e.forEach(r=>{const s=Ac(ii,br.BOARDS,t,br.NODES,r.id),a={type:r.type,data:r.data,position:r.position,updatedAt:_t.now()};r.draggable!=null&&(a.draggable=r.draggable),r.style!=null&&(a.style=r.style),n.set(s,a)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(fr.SAVE_FAILED)}},GY=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=cN(ii);e.forEach(r=>{const s=Ac(ii,br.BOARDS,t,br.EDGES,r.id),a={source:r.source,target:r.target,updatedAt:_t.now()};r.sourceHandle!=null&&(a.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(a.targetHandle=r.targetHandle),r.style!=null&&(a.style=r.style),r.markerEnd!=null&&(a.markerEnd=r.markerEnd),n.set(s,a)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(fr.SAVE_FAILED)}},YY=async(t,e,n)=>{if(!OD({uid:t}))throw new Error(fr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:_t.now(),isOpen:!1};return console.log("Creating board:",r),await Wb(Ac(ii,br.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},KY=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await E7(Ac(ii,br.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},Ll=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:_t.now()};await Wb(Ac(ii,br.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},XY=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},WY=t=>Array.isArray(t)?t.map(XY):[],QY=(t,e={})=>{const[n,r,s]=W5([]),[a,c,u]=Q5([]),[h,f]=P.useState(!0),[p,y]=P.useState(!1),[b,E]=P.useState(!1),[T,A]=P.useState([]),[R,k]=P.useState(null),z=P.useRef(null),{showSuccess:B,showError:U,showInfo:Y}=e,X=O=>{const L=O.find(q=>q.isOpen===!0);if(L)return L;if(O.length>0){const q={...O[0],isOpen:!0};return Ll(q.id,q).catch(console.error),q}return null};P.useEffect(()=>{(async()=>{if(t)try{f(!0);const L=await $Y(t.uid);A(L);const q=L.some(K=>K.isFallback);q&&U&&U("Database index missing. Please create the required Firestore index. Check console for details.");const M=X(L);if(!M){console.error("No board found for user"),U&&U("No boards found. Creating a default board..."),r(dd),c(oc);return}k(M);const[W,G]=await Promise.all([w2(M.id),x2(M.id)]);r(W),c(G),Y&&!q&&Y("Board loaded successfully!")}catch(L){console.error("Error loading initial data:",L),U&&U("Failed to load board data. Using default board."),r(dd),c(oc)}finally{f(!1)}})()},[t,r,c]);const D=async(O,L,q)=>{z.current&&clearTimeout(z.current);const M=setTimeout(async()=>{try{E(!0);const W=[];L&&L.length>0&&W.push(qY(O,L)),q&&q.length>0&&W.push(GY(O,q)),W.length>0&&(await Promise.all(W),console.log("Auto-save completed successfully"))}catch(W){console.error("Auto-save failed:",W),U&&U("Failed to save changes automatically")}finally{E(!1),z.current=null}},1e3);z.current=M};P.useEffect(()=>(!h&&R&&!p&&!R.isFallback&&D(R.id,n,a),()=>{z.current&&clearTimeout(z.current)}),[n,a,h,R,p]);const S=async O=>{try{if(R?.id===O)return;if(R?.isFallback||T.find(q=>q.id===O)?.isFallback){U&&U("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(y(!0),R&&!R.isFallback){const q={...R,isOpen:!1};await Ll(R.id,q),A(M=>M.map(W=>W.id===R.id?q:W))}const L=T.find(q=>q.id===O);if(L){const q={...L,isOpen:!0};await Ll(O,q),k(q),A(K=>K.map(N=>N.id===O?q:N));const[M,W]=await Promise.all([w2(O),x2(O)]),G=WY(M);r(G),c(W),B&&B(`Switched to "${q.name}"`)}else console.error("Board not found:",O),U&&U("Board not found")}catch(L){console.error("Error switching board:",L),U&&U("Failed to switch board. Please try again.")}finally{y(!1)}};return{nodes:n,edges:a,allBoards:T,currentBoard:R,isLoading:h,isSwitchingBoard:p,isSaving:b,onNodesChange:s,onEdgesChange:u,setNodes:r,setEdges:c,switchToBoard:S,createNewBoard:async O=>{try{if(!t)return U&&U("You must be logged in to create a board"),null;Y&&Y("Creating new board...");const L=await YY(t.uid,O||null,T);if(L){if(R&&!R.isFallback){const M={...R,isOpen:!1};Ll(R.id,M).catch(console.error)}const q={...L,isOpen:!0};return A(M=>{const W=M.map(G=>G.id===R?.id?{...G,isOpen:!1}:G);return[q,...W]}),k(q),Ll(L.id,q).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:O||"New Board"},position:{x:250,y:25},draggable:!1}]),c(oc),B&&B(`Board "${L.name}" created and opened!`),q}else return U&&U("Failed to create board. Please try again."),null}catch(L){return U&&U(`Failed to create board: ${L.message}`),null}},deleteBoard:async O=>{try{if(T.length<=1){U&&U("Cannot delete the last board!");return}if(!T.find(q=>q.id===O)){console.error("Board not found for deletion"),U&&U("Board not found");return}if(Y&&Y("Deleting board..."),R?.id===O){const q=T.find(M=>M.id!==O);q&&await S(q.id)}await KY(O),A(q=>q.filter(M=>M.id!==O)),B&&B("Board deleted successfully!")}catch(L){console.error("Error deleting board:",L),U&&U("Failed to delete board. Please try again.")}},updateBoardName:async O=>{if(R&&R.name!==O){const L={...R,name:O};k(L),A(q=>q.map(M=>M.id===R.id?L:M));try{await Ll(R.id,L),console.log("Board name updated successfully")}catch(q){console.error("Error updating board name:",q)}}},clearBoardState:()=>{z.current&&(clearTimeout(z.current),z.current=null),A([]),k(null),r([]),c([]),f(!0),y(!1),E(!1)}}},ZY=()=>{const[t,e]=P.useState([]),n=f=>{e(p=>p.filter(y=>y.id!==f))},r=f=>{const p=Date.now().toString(),y={id:p,timestamp:new Date,...f};return e(b=>[...b,y]),f.autoRemove!==!1&&setTimeout(()=>{n(p)},f.duration||5e3),p};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(f,p={})=>r({type:"success",message:f,...p}),showError:(f,p={})=>r({type:"error",message:f,duration:7e3,...p}),showInfo:(f,p={})=>r({type:"info",message:f,...p}),showWarning:(f,p={})=>r({type:"warning",message:f,duration:6e3,...p})}},PD=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return C.jsx("div",{className:"flex items-center justify-center",children:C.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})},Ay={explain:{classes:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-300 dark:border-blue-700",color:"#3b82f6",Icon:DD},answer:{classes:"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100 dark:bg-emerald-950 dark:text-emerald-300 dark:border-emerald-700",color:"#10b981",Icon:MD},argue:{classes:"bg-rose-50 text-rose-700 border-rose-200 hover:bg-rose-100 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-700",color:"#fb7185",Icon:kD}};function VD({dragState:t,handleDragStart:e,handleOrigin:n,getParentCenter:r}){return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 z-10 flex gap-2 select-none",children:["explain","answer","argue"].map(s=>{const{classes:a,Icon:c}=Ay[s],u=t.isDragging&&t.mode===s;return C.jsxs("div",{draggable:!1,onPointerDown:h=>{h.stopPropagation(),h.preventDefault(),h.button===0&&e(s,h.nativeEvent)},className:`px-2 py-1 rounded-lg border text-sm font-medium flex items-center gap-1 shadow-sm cursor-grab transition-all duration-150 ${a} ${u?"opacity-0":"opacity-100"}`,style:{position:"relative",zIndex:11},children:[C.jsx(c,{size:16,strokeWidth:2}),s.charAt(0).toUpperCase()+s.slice(1),C.jsx(Nn,{type:"source",position:Te.Bottom,id:s})]},s)})}),t.isDragging&&typeof window<"u"&&tC.createPortal(C.jsxs(C.Fragment,{children:[C.jsx("svg",{className:"fixed inset-0 pointer-events-none z-[9998]",width:"100vw",height:"100vh",children:C.jsx("line",{x1:n?n.x:r().x,y1:n?n.y:r().y,x2:t.x,y2:t.y,stroke:Ay[t.mode??"explain"].color,strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"})}),C.jsx("div",{className:"fixed pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2",style:{left:t.x,top:t.y},children:C.jsx("div",{className:"px-4 py-1 rounded-lg shadow-lg font-semibold text-white backdrop-blur-sm",style:{background:Ay[t.mode??"explain"].color},children:t.mode&&t.mode.charAt(0).toUpperCase()+t.mode.slice(1)})})]}),document.body)]})}function T2(t){if(!t)return"#ffffff";const e=(t??"000000").replace(/^#/,""),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),[a,c,u]=[n,r,s].map(f=>{const p=f/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)});return .2126*a+.7152*c+.0722*u>.179?"#000000":"#ffffff"}function JY({data:t,id:e}){const[n,r]=P.useState(t.summary||t.label||"Static Node"),{screenToFlowPosition:s}=Hd(),{handleTokenClick:a,showExplanation:c}=WN(),u=P.useRef(null),[h,f]=P.useState({mode:void 0,x:0,y:0,isDragging:!1}),p=P.useRef(h);P.useEffect(()=>{p.current=h},[h]);const[y,b]=P.useState(null);P.useEffect(()=>{r(t.summary||t.label||"Static Node")},[t.summary,t.label]);const T=gR(n),A=(S,I)=>{I.stopPropagation(),a(S,e,{x:0,y:0},"staticEditable",t.myColor,t.label||"Static Node",S.suggestionId)},R=S=>{S.stopPropagation(),c&&c(t.title||"Explanation",t.full_text||"No detailed information available.")},k=(S,I)=>{const F=I.target.getBoundingClientRect();b({x:F.left+F.width/2,y:F.top+F.height/2}),f({mode:S,x:I.clientX,y:I.clientY,isDragging:!0}),document.addEventListener("pointermove",z),document.addEventListener("pointerup",B)},z=S=>{f(I=>I.isDragging?{...I,x:S.clientX,y:S.clientY}:I)},B=()=>{const S=p.current;if(console.log("handleDragEnd",S),S.isDragging&&t.onNodeCallback){const I=s({x:S.x,y:S.y});console.log("Calling onNodeCallback",S.mode,I),t.onNodeCallback(S.mode||void 0,e,I)}f({mode:"explain",x:0,y:0,isDragging:!1}),b(null),document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",B)},U=()=>{if(!u.current)return{x:0,y:0};const S=u.current.getBoundingClientRect();return{x:S.left+S.width/2,y:S.top+S.height/2}},Y=P.useMemo(()=>{const S=t.tokenColors||{};return T.map((I,j)=>{const F=I.myConcept||I.word,$=S[F],O=!$;return C.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                        ${O?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}
                        ${I.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:$||"transparent",color:$?T2($):"#f8faff",border:$?`1px solid ${Ju($,20)}`:""},onClick:L=>O?A(I,L):L.stopPropagation(),children:[I.word,j<T.length-1?" ":""]},j)})},[T,t.tokenColors]),X=P.useMemo(()=>{const S=t.tokenColors||{};return!t.suggestions||t.suggestions.length===0?C.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"}):t.suggestions.map((I,j)=>{const F=S[I],$=!F;return C.jsx("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                        bg-white/5 border border-white/10 transition-all duration-200 
                        ${$?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:F||"transparent",color:F?T2(F):"#f8faff",border:F?`1px solid ${Ju(F,20)}`:""},onClick:O=>$?A({word:I,myConcept:I,suggestionId:(t.label||"")+I+j},O):O.stopPropagation(),children:I},j)})},[t.suggestions,t.tokenColors]),D=P.useMemo(()=>t.isLoading?C.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[C.jsx(PD,{size:"small",color:"#6366f1"}),C.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):C.jsxs("div",{className:"flex flex-col gap-3",children:[C.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[C.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),C.jsx("div",{className:"flex gap-2",children:C.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                transition-all duration-150 flex items-center justify-center text-sm`,onClick:R,title:"Show full text",children:"📄"})})]}),C.jsx("div",{className:"flex-1",children:C.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:Y})}),C.jsxs("div",{className:"mt-2",children:[C.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),C.jsx("div",{className:"flex flex-wrap gap-1",children:X})]})]}),[t.isLoading,t.title,Y,X]);return C.jsxs("div",{ref:u,className:`bg-black border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:"#000000",color:"#f8faff",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[C.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:D}),C.jsx(Nn,{type:"source",position:Te.Bottom,id:"bottom-source"}),C.jsx(Nn,{type:"target",position:Te.Bottom,id:"bottom-target"}),C.jsx(VD,{dragState:h,handleDragStart:k,handleOrigin:y,getParentCenter:U})]})}function eK(){return C.jsxs(C.Fragment,{children:[C.jsx(Nn,{type:"source",position:Te.Bottom,id:"bottom-source"}),C.jsx(Nn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Top,id:"top-target"}),C.jsx(Nn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Left,id:"left-source"}),C.jsx(Nn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Left,id:"left-target"}),C.jsx(Nn,{style:{transform:"translateY(100%)"},type:"source",position:Te.Right,id:"right-source"}),C.jsx(Nn,{style:{transform:"translateY(100%)"},type:"target",position:Te.Right,id:"right-target"})]})}function tK({data:t,id:e}){const[n,r]=P.useState(t.summary||t.label||"Draggable Node"),{getNodes:s,getNode:a,setViewport:c,screenToFlowPosition:u}=Hd(),{handleTokenClick:h,showExplanation:f}=WN(),[p,y]=P.useState(!1),b=P.useRef(null),[E,T]=P.useState({mode:void 0,x:0,y:0,isDragging:!1}),A=P.useRef(E);P.useEffect(()=>{A.current=E},[E]);const[R,k]=P.useState(null);P.useEffect(()=>{r(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const z=gR(n),B=z,U=()=>!0,Y=(q,M)=>{M.stopPropagation();const G=s().find(N=>N.id===e);if(!G){console.error("Shit went south");return}return h(q,e,G.position,G.type||"draggableEditable",t.myColor,t.label||"Draggable Node")},X=q=>{q.stopPropagation(),f&&f(t.title,t.full_text||"No detailed information available.")},D=q=>{if(q.stopPropagation(),t.previousNode){const M=a(t.previousNode);if(M){const{x:W,y:G}=M.position;c({x:-W+200,y:-G+100,zoom:1},{duration:500})}}},S=P.useMemo(()=>{const q={};return B.forEach(M=>{const W=M.myConcept||M.word;q[W]||(q[W]=[]),q[W].push(M)}),q},[B]);function I(q){if(!q)return"#000000";const M=(q??"000000").replace(/^#/,""),W=parseInt(M.substring(0,2),16),G=parseInt(M.substring(2,4),16),K=parseInt(M.substring(4,6),16),[N,J,ne]=[W,G,K].map(te=>{const le=te/255;return le<=.03928?le/12.92:Math.pow((le+.055)/1.055,2.4)});return .2126*N+.7152*J+.0722*ne>.179?"#000000":"#ffffff"}const j=P.useMemo(()=>C.jsxs(C.Fragment,{children:[t.isLoading&&C.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[C.jsx(PD,{size:"small",color:t.myColor||"#6366f1"}),C.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),C.jsxs("div",{className:"flex flex-col gap-3",children:[C.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[C.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),C.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&C.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:D,title:"Go to previous node",children:"←"}),C.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:X,title:"Show full text",children:"📄"})]})]}),C.jsx("div",{className:"flex-1",children:C.jsx("div",{className:"cursor-text leading-relaxed break-words",children:B.map((q,M)=>{const W=t.tokenColors||{},G=q.myConcept||q.word,K=W[G],N=!K;return C.jsxs("span",{className:`inline-block px-1 py-0.5 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${N?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${q.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:K||"transparent",color:I(K||t.myColor),border:K?`1px solid ${Ju(K,20)}`:"",boxShadow:K?`0 0 0 1px ${K}25`:""},onClick:J=>N?Y(q,J):J.stopPropagation(),children:[q.word,M<B.length-1?" ":""]},M)})})}),C.jsxs("div",{className:"mt-2",children:[C.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),C.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((q,M)=>{const G=(t.tokenColors||{})[q],K=!G;return C.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${K?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:G||"transparent",color:I(G||t.myColor),border:G?`1px solid ${Ju(G,20)}`:""},onClick:N=>K?Y({word:q,myConcept:q,suggestionId:t.label+q+M},N):N.stopPropagation(),children:[q,C.jsx(Nn,{type:"source",position:Te.Bottom,id:t.label+q+M})]},M)}):C.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,B,z,S,X,Y,U,t.previousNode,D,t.tokenColors,t.myColor,t.isLoading]),F=(q,M)=>{const G=M.target.getBoundingClientRect();k({x:G.left+G.width/2,y:G.top+G.height/2}),T({mode:q,x:M.clientX,y:M.clientY,isDragging:!0}),document.addEventListener("pointermove",$),document.addEventListener("pointerup",O)},$=q=>{T(M=>M.isDragging?{...M,x:q.clientX,y:q.clientY}:M)},O=()=>{const q=A.current;if(console.log("handleDragEnd",q),q.isDragging&&t.onNodeCallback){const M=u({x:q.x,y:q.y});console.log("Calling onNodeCallback",q.mode,M),t.onNodeCallback(q.mode||void 0,e,M)}T({mode:"explain",x:0,y:0,isDragging:!1}),k(null),document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",O)},L=()=>{if(!b.current)return{x:0,y:0};const q=b.current.getBoundingClientRect();return{x:q.left+q.width/2,y:q.top+q.height/2}};return C.jsxs("div",{ref:b,className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[600px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?I(t.myColor):"#f0f4f8",border:t.myColor?`2px solid ${Ju(t.myColor,.5)}`:"2px solid rgba(255, 255, 255, 0.12)"},children:[C.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:j}),C.jsx(eK,{}),C.jsx(VD,{dragState:E,handleDragStart:F,handleOrigin:R,getParentCenter:L})]})}const nK={staticEditable:JY,draggableEditable:tK},rK={...nK,tempInput:jY},iK=P.memo(function({isVisible:e,explanation:n,onClose:r}){return C.jsx(b6,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:C.jsx("div",{className:"relative z-10 overflow-auto h-full",children:C.jsx(SY,{explanation:n,onClose:r,isVisible:e})})})});function sK(){const[t,e]=P.useState(!1),[n,r]=P.useState(!1),[s,a]=P.useState(null),c=P.useCallback((N,J)=>{a({title:N,text:J}),e(!0)},[]),u=P.useCallback(()=>{e(!1)},[]),{user:h,signOut:f}=FY(),{notifications:p,removeNotification:y,showSuccess:b,showError:E,showInfo:T}=ZY(),{nodes:A,edges:R,allBoards:k,currentBoard:z,isSwitchingBoard:B,isSaving:U,onNodesChange:Y,onEdgesChange:X,setNodes:D,setEdges:S,switchToBoard:I,createNewBoard:j,deleteBoard:F,updateBoardName:$,clearBoardState:O}=QY(h,{showSuccess:b,showError:E,showInfo:T}),L=async()=>{await f(),O()},q=()=>{r(!0)},M=P.useCallback(N=>{const J={id:`e${N.source}-${N.target}`,source:N.source,target:N.target,sourceHandle:N.sourceHandle,targetHandle:N.targetHandle};X([{type:"add",item:J}])},[X]),W=P.useCallback((N,J,ne,Z,te)=>{if(!ne||!te){console.warn("handleNodeCallback called without mode or position",ne,te);return}const le=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;D(be=>[...be,{id:le,type:"tempInput",position:{x:te.x-80,y:te.y-40},data:{mode:ne,parent:Z}}]);const de={default:"#FFFFFF",explain:"#3b82f6",answer:"#10b981",argue:"#fb7185"},me=de[ne in de?ne:"default"];Z&&X([{type:"add",item:{id:`e${Z}-${le}`,source:Z,target:le,sourceHandle:ne,style:{stroke:me,strokeWidth:3},markerEnd:{type:Aa.ArrowClosed,color:me}}}])},[D]),G=P.useMemo(()=>A.map(N=>{let J={...N.data};return J.onNodeCallback=(ne,Z,te)=>W(N.id,N.data,ne,Z,te),N.type==="tempInput"&&(J.onSubmit=ne=>{D(ke=>ke.map(Le=>Le.id===N.id?{...Le,type:"draggableEditable",data:{...Le.data,label:ne}}:Le));const Z=A.find(ke=>ke.id===N.data.parent),te=Z?.data?.color,le=Z?.data?.label;console.log(Z);const de={word:ne},me=N.data.parent,be={x:N.position.x,y:N.position.y},Ye=XN(de,me,be,"draggableEditable",A,D,Y,X,te,le,void 0,!0,N,N.data.mode);if(console.log("Color from handleTokenClick:",Ye),D(ke=>ke.map(Le=>Le.id===N.id?{...Le,data:{...Le.data,myColor:Ye}}:Le)),N.data.parent){if(!Ye)return;S(ke=>ke.map(Le=>Le.id===`e${N.data.parent}-${N.id}`?{...Le,style:{...Le.style||{},stroke:Ye,strokeWidth:3},markerEnd:{type:Aa.ArrowClosed,color:Ye}}:Le))}}),{...N,data:J}}),[A,W,D]),K=P.useMemo(()=>C.jsxs(GC,{nodes:G,edges:R,onNodesChange:Y,onEdgesChange:X,onConnect:M,nodeTypes:rK,connectionMode:vo.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[C.jsx(i6,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),C.jsx(u6,{variant:Br.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[G,R,Y,X,M]);return h?C.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[C.jsx(NY,{notifications:p,onRemove:y}),C.jsxs("div",{style:{height:"100%",position:"relative"},children:[C.jsxs(mR,{direction:"horizontal",children:[C.jsx(Fy,{defaultSize:15,minSize:10,maxSize:30,children:C.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:C.jsx(TY,{allBoards:k,currentBoard:z,onSwitchBoard:I,onCreateBoard:async N=>{await j(N)},onDeleteBoard:F,onSignOut:L,isLoading:B})})}),C.jsx(pR,{}),C.jsx(Fy,{children:C.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[C.jsx(RY,{name:z?.name||"Loading...",onSetName:$,user:h,isSaving:U}),C.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:C.jsx(RH,{nodes:A,onNodesChange:Y,onEdgesChange:X,setNodes:D,showExplanation:c,children:K})})]})})]}),C.jsx(iK,{isVisible:t,explanation:s,onClose:u})]})]}):n?C.jsx(wY,{}):C.jsx(kY,{onLogin:q})}function oK(){return C.jsx(CY,{children:C.jsx(sK,{})})}const LD=document.getElementById("root");if(!LD)throw new Error("Failed to find the root element");vO.createRoot(LD).render(C.jsx(P.StrictMode,{children:C.jsx(oK,{})}));export{Bd as C,Qn as R,jj as _,C1 as a,PP as b,Fv as c,pd as d,Hv as e,H2 as f,S2 as g,aK as h,eo as i,q2 as n,RP as r,Zr as s};
