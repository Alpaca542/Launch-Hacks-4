(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Zu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b_={exports:{}},sd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function S6(){if(vb)return sd;vb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return sd.Fragment=e,sd.jsx=n,sd.jsxs=n,sd}var Sb;function C6(){return Sb||(Sb=1,b_.exports=S6()),b_.exports}var ie=C6(),I_={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function A6(){if(Cb)return gt;Cb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function T(I){return I===null||typeof I!="object"?null:(I=y&&I[y]||I["@@iterator"],typeof I=="function"?I:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function R(I,ne,le){this.props=I,this.context=ne,this.refs=w,this.updater=le||v}R.prototype.isReactComponent={},R.prototype.setState=function(I,ne){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,ne,"setState")},R.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function N(){}N.prototype=R.prototype;function V(I,ne,le){this.props=I,this.context=ne,this.refs=w,this.updater=le||v}var G=V.prototype=new N;G.constructor=V,b(G,R.prototype),G.isPureReactComponent=!0;var F=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function M(I,ne,le,H,ye,Ne){return le=Ne.ref,{$$typeof:t,type:I,key:ne,ref:le!==void 0?le:null,props:Ne}}function P(I,ne){return M(I.type,ne,void 0,void 0,void 0,I.props)}function L(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function O(I){var ne={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(le){return ne[le]})}var B=/\/+/g;function z(I,ne){return typeof I=="object"&&I!==null&&I.key!=null?O(""+I.key):ne.toString(36)}function D(){}function U(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(D,D):(I.status="pending",I.then(function(ne){I.status==="pending"&&(I.status="fulfilled",I.value=ne)},function(ne){I.status==="pending"&&(I.status="rejected",I.reason=ne)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function Q(I,ne,le,H,ye){var Ne=typeof I;(Ne==="undefined"||Ne==="boolean")&&(I=null);var Re=!1;if(I===null)Re=!0;else switch(Ne){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(I.$$typeof){case t:case e:Re=!0;break;case p:return Re=I._init,Q(Re(I._payload),ne,le,H,ye)}}if(Re)return ye=ye(I),Re=H===""?"."+z(I,0):H,F(ye)?(le="",Re!=null&&(le=Re.replace(B,"$&/")+"/"),Q(ye,ne,le,"",function(Ue){return Ue})):ye!=null&&(L(ye)&&(ye=P(ye,le+(ye.key==null||I&&I.key===ye.key?"":(""+ye.key).replace(B,"$&/")+"/")+Re)),ne.push(ye)),1;Re=0;var $e=H===""?".":H+":";if(F(I))for(var be=0;be<I.length;be++)H=I[be],Ne=$e+z(H,be),Re+=Q(H,ne,le,Ne,ye);else if(be=T(I),typeof be=="function")for(I=be.call(I),be=0;!(H=I.next()).done;)H=H.value,Ne=$e+z(H,be++),Re+=Q(H,ne,le,Ne,ye);else if(Ne==="object"){if(typeof I.then=="function")return Q(U(I),ne,le,H,ye);throw ne=String(I),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Re}function $(I,ne,le){if(I==null)return I;var H=[],ye=0;return Q(I,H,"","",function(Ne){return ne.call(le,Ne,ye++)}),H}function j(I){if(I._status===-1){var ne=I._result;ne=ne(),ne.then(function(le){(I._status===0||I._status===-1)&&(I._status=1,I._result=le)},function(le){(I._status===0||I._status===-1)&&(I._status=2,I._result=le)}),I._status===-1&&(I._status=0,I._result=ne)}if(I._status===1)return I._result.default;throw I._result}var se=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function oe(){}return gt.Children={map:$,forEach:function(I,ne,le){$(I,function(){ne.apply(this,arguments)},le)},count:function(I){var ne=0;return $(I,function(){ne++}),ne},toArray:function(I){return $(I,function(ne){return ne})||[]},only:function(I){if(!L(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},gt.Component=R,gt.Fragment=n,gt.Profiler=r,gt.PureComponent=V,gt.StrictMode=i,gt.Suspense=f,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,gt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return J.H.useMemoCache(I)}},gt.cache=function(I){return function(){return I.apply(null,arguments)}},gt.cloneElement=function(I,ne,le){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var H=b({},I.props),ye=I.key,Ne=void 0;if(ne!=null)for(Re in ne.ref!==void 0&&(Ne=void 0),ne.key!==void 0&&(ye=""+ne.key),ne)!K.call(ne,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ne.ref===void 0||(H[Re]=ne[Re]);var Re=arguments.length-2;if(Re===1)H.children=le;else if(1<Re){for(var $e=Array(Re),be=0;be<Re;be++)$e[be]=arguments[be+2];H.children=$e}return M(I.type,ye,void 0,void 0,Ne,H)},gt.createContext=function(I){return I={$$typeof:a,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:s,_context:I},I},gt.createElement=function(I,ne,le){var H,ye={},Ne=null;if(ne!=null)for(H in ne.key!==void 0&&(Ne=""+ne.key),ne)K.call(ne,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(ye[H]=ne[H]);var Re=arguments.length-2;if(Re===1)ye.children=le;else if(1<Re){for(var $e=Array(Re),be=0;be<Re;be++)$e[be]=arguments[be+2];ye.children=$e}if(I&&I.defaultProps)for(H in Re=I.defaultProps,Re)ye[H]===void 0&&(ye[H]=Re[H]);return M(I,Ne,void 0,void 0,null,ye)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(I){return{$$typeof:l,render:I}},gt.isValidElement=L,gt.lazy=function(I){return{$$typeof:p,_payload:{_status:-1,_result:I},_init:j}},gt.memo=function(I,ne){return{$$typeof:d,type:I,compare:ne===void 0?null:ne}},gt.startTransition=function(I){var ne=J.T,le={};J.T=le;try{var H=I(),ye=J.S;ye!==null&&ye(le,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(oe,se)}catch(Ne){se(Ne)}finally{J.T=ne}},gt.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},gt.use=function(I){return J.H.use(I)},gt.useActionState=function(I,ne,le){return J.H.useActionState(I,ne,le)},gt.useCallback=function(I,ne){return J.H.useCallback(I,ne)},gt.useContext=function(I){return J.H.useContext(I)},gt.useDebugValue=function(){},gt.useDeferredValue=function(I,ne){return J.H.useDeferredValue(I,ne)},gt.useEffect=function(I,ne,le){var H=J.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(I,ne)},gt.useId=function(){return J.H.useId()},gt.useImperativeHandle=function(I,ne,le){return J.H.useImperativeHandle(I,ne,le)},gt.useInsertionEffect=function(I,ne){return J.H.useInsertionEffect(I,ne)},gt.useLayoutEffect=function(I,ne){return J.H.useLayoutEffect(I,ne)},gt.useMemo=function(I,ne){return J.H.useMemo(I,ne)},gt.useOptimistic=function(I,ne){return J.H.useOptimistic(I,ne)},gt.useReducer=function(I,ne,le){return J.H.useReducer(I,ne,le)},gt.useRef=function(I){return J.H.useRef(I)},gt.useState=function(I){return J.H.useState(I)},gt.useSyncExternalStore=function(I,ne,le){return J.H.useSyncExternalStore(I,ne,le)},gt.useTransition=function(){return J.H.useTransition()},gt.version="19.1.0",gt}var Ab;function Eh(){return Ab||(Ab=1,I_.exports=A6()),I_.exports}var q=Eh();const Te=Zu(q);var w_={exports:{}},od={},x_={exports:{}},R_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb;function b6(){return bb||(bb=1,function(t){function e($,j){var se=$.length;$.push(j);e:for(;0<se;){var oe=se-1>>>1,I=$[oe];if(0<r(I,j))$[oe]=j,$[se]=I,se=oe;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var j=$[0],se=$.pop();if(se!==j){$[0]=se;e:for(var oe=0,I=$.length,ne=I>>>1;oe<ne;){var le=2*(oe+1)-1,H=$[le],ye=le+1,Ne=$[ye];if(0>r(H,se))ye<I&&0>r(Ne,H)?($[oe]=Ne,$[ye]=se,oe=ye):($[oe]=H,$[le]=se,oe=le);else if(ye<I&&0>r(Ne,se))$[oe]=Ne,$[ye]=se,oe=ye;else break e}}return j}function r($,j){var se=$.sortIndex-j.sortIndex;return se!==0?se:$.id-j.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var f=[],d=[],p=1,y=null,T=3,v=!1,b=!1,w=!1,R=!1,N=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function F($){for(var j=n(d);j!==null;){if(j.callback===null)i(d);else if(j.startTime<=$)i(d),j.sortIndex=j.expirationTime,e(f,j);else break;j=n(d)}}function J($){if(w=!1,F($),!b)if(n(f)!==null)b=!0,K||(K=!0,z());else{var j=n(d);j!==null&&Q(J,j.startTime-$)}}var K=!1,M=-1,P=5,L=-1;function O(){return R?!0:!(t.unstable_now()-L<P)}function B(){if(R=!1,K){var $=t.unstable_now();L=$;var j=!0;try{e:{b=!1,w&&(w=!1,V(M),M=-1),v=!0;var se=T;try{t:{for(F($),y=n(f);y!==null&&!(y.expirationTime>$&&O());){var oe=y.callback;if(typeof oe=="function"){y.callback=null,T=y.priorityLevel;var I=oe(y.expirationTime<=$);if($=t.unstable_now(),typeof I=="function"){y.callback=I,F($),j=!0;break t}y===n(f)&&i(f),F($)}else i(f);y=n(f)}if(y!==null)j=!0;else{var ne=n(d);ne!==null&&Q(J,ne.startTime-$),j=!1}}break e}finally{y=null,T=se,v=!1}j=void 0}}finally{j?z():K=!1}}}var z;if(typeof G=="function")z=function(){G(B)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,U=D.port2;D.port1.onmessage=B,z=function(){U.postMessage(null)}}else z=function(){N(B,0)};function Q($,j){M=N(function(){$(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function($){switch(T){case 1:case 2:case 3:var j=3;break;default:j=T}var se=T;T=j;try{return $()}finally{T=se}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function($,j){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var se=T;T=$;try{return j()}finally{T=se}},t.unstable_scheduleCallback=function($,j,se){var oe=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?oe+se:oe):se=oe,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=se+I,$={id:p++,callback:j,priorityLevel:$,startTime:se,expirationTime:I,sortIndex:-1},se>oe?($.sortIndex=se,e(d,$),n(f)===null&&$===n(d)&&(w?(V(M),M=-1):w=!0,Q(J,se-oe))):($.sortIndex=I,e(f,$),b||v||(b=!0,K||(K=!0,z()))),$},t.unstable_shouldYield=O,t.unstable_wrapCallback=function($){var j=T;return function(){var se=T;T=j;try{return $.apply(this,arguments)}finally{T=se}}}}(R_)),R_}var Ib;function I6(){return Ib||(Ib=1,x_.exports=b6()),x_.exports}var N_={exports:{}},Vi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wb;function w6(){if(wb)return Vi;wb=1;var t=Eh();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(f,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:d,implementation:p}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Vi.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(f,d,null,p)},Vi.flushSync=function(f){var d=a.T,p=i.p;try{if(a.T=null,i.p=2,f)return f()}finally{a.T=d,i.p=p,i.d.f()}},Vi.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},Vi.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Vi.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,y=l(p,d.crossOrigin),T=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:T,fetchPriority:v}):p==="script"&&i.d.X(f,{crossOrigin:y,integrity:T,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Vi.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=l(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},Vi.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=l(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Vi.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=l(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},Vi.requestFormReset=function(f){i.d.r(f)},Vi.unstable_batchedUpdates=function(f,d){return f(d)},Vi.useFormState=function(f,d,p){return a.H.useFormState(f,d,p)},Vi.useFormStatus=function(){return a.H.useHostTransitionStatus()},Vi.version="19.1.0",Vi}var xb;function y2(){if(xb)return N_.exports;xb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),N_.exports=w6(),N_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function x6(){if(Rb)return od;Rb=1;var t=I6(),e=Eh(),n=y2();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var u=o,c=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(c=u.return),o=u.return;while(o)}return u.tag===3?c:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(s(o)!==o)throw Error(i(188))}function f(o){var u=o.alternate;if(!u){if(u=s(o),u===null)throw Error(i(188));return u!==o?null:o}for(var c=o,g=u;;){var E=c.return;if(E===null)break;var S=E.alternate;if(S===null){if(g=E.return,g!==null){c=g;continue}break}if(E.child===S.child){for(S=E.child;S;){if(S===c)return l(E),o;if(S===g)return l(E),u;S=S.sibling}throw Error(i(188))}if(c.return!==g.return)c=E,g=S;else{for(var k=!1,Y=E.child;Y;){if(Y===c){k=!0,c=E,g=S;break}if(Y===g){k=!0,g=E,c=S;break}Y=Y.sibling}if(!k){for(Y=S.child;Y;){if(Y===c){k=!0,c=S,g=E;break}if(Y===g){k=!0,g=S,c=E;break}Y=Y.sibling}if(!k)throw Error(i(189))}}if(c.alternate!==g)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?o:u}function d(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=d(o),u!==null)return u;o=o.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),G=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function z(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function U(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case J:return"Suspense";case K:return"SuspenseList";case L:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case G:return(o.displayName||"Context")+".Provider";case V:return(o._context.displayName||"Context")+".Consumer";case F:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case M:return u=o.displayName||null,u!==null?u:U(o.type)||"Memo";case P:u=o._payload,o=o._init;try{return U(o(u))}catch{}}return null}var Q=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},oe=[],I=-1;function ne(o){return{current:o}}function le(o){0>I||(o.current=oe[I],oe[I]=null,I--)}function H(o,u){I++,oe[I]=o.current,o.current=u}var ye=ne(null),Ne=ne(null),Re=ne(null),$e=ne(null);function be(o,u){switch(H(Re,u),H(Ne,o),H(ye,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?XA(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=XA(u),o=QA(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}le(ye),H(ye,o)}function Ue(){le(ye),le(Ne),le(Re)}function Ve(o){o.memoizedState!==null&&H($e,o);var u=ye.current,c=QA(u,o.type);u!==c&&(H(Ne,o),H(ye,c))}function it(o){Ne.current===o&&(le(ye),le(Ne)),$e.current===o&&(le($e),ed._currentValue=se)}var Ht=Object.prototype.hasOwnProperty,zt=t.unstable_scheduleCallback,qt=t.unstable_cancelCallback,je=t.unstable_shouldYield,Cn=t.unstable_requestPaint,tt=t.unstable_now,Xe=t.unstable_getCurrentPriorityLevel,gn=t.unstable_ImmediatePriority,Fn=t.unstable_UserBlockingPriority,Hn=t.unstable_NormalPriority,Wn=t.unstable_LowPriority,zn=t.unstable_IdlePriority,wn=t.log,ii=t.unstable_setDisableYieldValue,ue=null,Se=null;function ze(o){if(typeof wn=="function"&&ii(o),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ue,o)}catch{}}var Qe=Math.clz32?Math.clz32:tn,_t=Math.log,kt=Math.LN2;function tn(o){return o>>>=0,o===0?32:31-(_t(o)/kt|0)|0}var nn=256,rn=4194304;function Pt(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Tt(o,u,c){var g=o.pendingLanes;if(g===0)return 0;var E=0,S=o.suspendedLanes,k=o.pingedLanes;o=o.warmLanes;var Y=g&134217727;return Y!==0?(g=Y&~S,g!==0?E=Pt(g):(k&=Y,k!==0?E=Pt(k):c||(c=Y&~o,c!==0&&(E=Pt(c))))):(Y=g&~S,Y!==0?E=Pt(Y):k!==0?E=Pt(k):c||(c=g&~o,c!==0&&(E=Pt(c)))),E===0?0:u!==0&&u!==E&&(u&S)===0&&(S=E&-E,c=u&-u,S>=c||S===32&&(c&4194048)!==0)?u:E}function pn(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function ln(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(){var o=nn;return nn<<=1,(nn&4194048)===0&&(nn=256),o}function Oi(){var o=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),o}function ri(o){for(var u=[],c=0;31>c;c++)u.push(o);return u}function Xi(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ui(o,u,c,g,E,S){var k=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var Y=o.entanglements,te=o.expirationTimes,pe=o.hiddenUpdates;for(c=k&~c;0<c;){var Ce=31-Qe(c),Ie=1<<Ce;Y[Ce]=0,te[Ce]=-1;var me=pe[Ce];if(me!==null)for(pe[Ce]=null,Ce=0;Ce<me.length;Ce++){var ge=me[Ce];ge!==null&&(ge.lane&=-536870913)}c&=~Ie}g!==0&&lr(o,g,0),S!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=S&~(k&~u))}function lr(o,u,c){o.pendingLanes|=u,o.suspendedLanes&=~u;var g=31-Qe(u);o.entangledLanes|=u,o.entanglements[g]=o.entanglements[g]|1073741824|c&4194090}function oo(o,u){var c=o.entangledLanes|=u;for(o=o.entanglements;c;){var g=31-Qe(c),E=1<<g;E&u|o[g]&u&&(o[g]|=u),c&=~E}}function vr(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ds(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Qi(){var o=j.p;return o!==0?o:(o=window.event,o===void 0?32:mb(o.type))}function Sr(o,u){var c=j.p;try{return j.p=o,u()}finally{j.p=c}}var cn=Math.random().toString(36).slice(2),Xt="__reactFiber$"+cn,xn="__reactProps$"+cn,Ln="__reactContainer$"+cn,ws="__reactEvents$"+cn,nu="__reactListeners$"+cn,Ji="__reactHandles$"+cn,xs="__reactResources$"+cn,Fr="__reactMarker$"+cn;function Cr(o){delete o[Xt],delete o[xn],delete o[ws],delete o[nu],delete o[Ji]}function Zi(o){var u=o[Xt];if(u)return u;for(var c=o.parentNode;c;){if(u=c[Ln]||c[Xt]){if(c=u.alternate,u.child!==null||c!==null&&c.child!==null)for(o=eb(o);o!==null;){if(c=o[Xt])return c;o=eb(o)}return u}o=c,c=o.parentNode}return null}function hi(o){if(o=o[Xt]||o[Ln]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function ji(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function si(o){var u=o[xs];return u||(u=o[xs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function re(o){o[Fr]=!0}var _e=new Set,ke={};function Fe(o,u){It(o,u),It(o+"Capture",u)}function It(o,u){for(ke[o]=u,o=0;o<u.length;o++)_e.add(u[o])}var ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sn={},Qt={};function pi(o){return Ht.call(Qt,o)?!0:Ht.call(sn,o)?!1:ht.test(o)?Qt[o]=!0:(sn[o]=!0,!1)}function Jt(o,u,c){if(pi(u))if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+c)}}function Gt(o,u,c){if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+c)}}function Zt(o,u,c,g){if(g===null)o.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(u,c,""+g)}}var Xn,On;function qn(o){if(Xn===void 0)try{throw Error()}catch(c){var u=c.stack.trim().match(/\n( *(at )?)/);Xn=u&&u[1]||"",On=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xn+o+On}var er=!1;function tr(o,u){if(!o||er)return"";er=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(ge){var me=ge}Reflect.construct(o,[],Ie)}else{try{Ie.call()}catch(ge){me=ge}o.call(Ie.prototype)}}else{try{throw Error()}catch(ge){me=ge}(Ie=o())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(ge){if(ge&&me&&typeof ge.stack=="string")return[ge.stack,me.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),k=S[0],Y=S[1];if(k&&Y){var te=k.split(`
`),pe=Y.split(`
`);for(E=g=0;g<te.length&&!te[g].includes("DetermineComponentFrameRoot");)g++;for(;E<pe.length&&!pe[E].includes("DetermineComponentFrameRoot");)E++;if(g===te.length||E===pe.length)for(g=te.length-1,E=pe.length-1;1<=g&&0<=E&&te[g]!==pe[E];)E--;for(;1<=g&&0<=E;g--,E--)if(te[g]!==pe[E]){if(g!==1||E!==1)do if(g--,E--,0>E||te[g]!==pe[E]){var Ce=`
`+te[g].replace(" at new "," at ");return o.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",o.displayName)),Ce}while(1<=g&&0<=E);break}}}finally{er=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?qn(c):""}function Hr(o){switch(o.tag){case 26:case 27:case 5:return qn(o.type);case 16:return qn("Lazy");case 13:return qn("Suspense");case 19:return qn("SuspenseList");case 0:case 15:return tr(o.type,!1);case 11:return tr(o.type.render,!1);case 1:return tr(o.type,!0);case 31:return qn("Activity");default:return""}}function zr(o){try{var u="";do u+=Hr(o),o=o.return;while(o);return u}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function mi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function iu(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ff(o){var u=iu(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),g=""+o[u];if(!o.hasOwnProperty(u)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var E=c.get,S=c.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return E.call(this)},set:function(k){g=""+k,S.call(this,k)}}),Object.defineProperty(o,u,{enumerable:c.enumerable}),{getValue:function(){return g},setValue:function(k){g=""+k},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Lt(o){o._valueTracker||(o._valueTracker=ff(o))}function Dt(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var c=u.getValue(),g="";return o&&(g=iu(o)?o.checked?"true":"false":o.value),o=g,o!==c?(u.setValue(o),!0):!1}function qr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Gr=/[\n"\\]/g;function Rn(o){return o.replace(Gr,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function yn(o,u,c,g,E,S,k,Y){o.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?o.type=k:o.removeAttribute("type"),u!=null?k==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+mi(u)):o.value!==""+mi(u)&&(o.value=""+mi(u)):k!=="submit"&&k!=="reset"||o.removeAttribute("value"),u!=null?Ii(o,k,mi(u)):c!=null?Ii(o,k,mi(c)):g!=null&&o.removeAttribute("value"),E==null&&S!=null&&(o.defaultChecked=!!S),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.name=""+mi(Y):o.removeAttribute("name")}function bi(o,u,c,g,E,S,k,Y){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),u!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;c=c!=null?""+mi(c):"",u=u!=null?""+mi(u):c,Y||u===o.value||(o.value=u),o.defaultValue=u}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=Y?o.checked:!!g,o.defaultChecked=!!g,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(o.name=k)}function Ii(o,u,c){u==="number"&&qr(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function nr(o,u,c,g){if(o=o.options,u){u={};for(var E=0;E<c.length;E++)u["$"+c[E]]=!0;for(c=0;c<o.length;c++)E=u.hasOwnProperty("$"+o[c].value),o[c].selected!==E&&(o[c].selected=E),E&&g&&(o[c].defaultSelected=!0)}else{for(c=""+mi(c),u=null,E=0;E<o.length;E++){if(o[E].value===c){o[E].selected=!0,g&&(o[E].defaultSelected=!0);return}u!==null||o[E].disabled||(u=o[E])}u!==null&&(u.selected=!0)}}function Ft(o,u,c){if(u!=null&&(u=""+mi(u),u!==o.value&&(o.value=u),c==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=c!=null?""+mi(c):""}function hs(o,u,c,g){if(u==null){if(g!=null){if(c!=null)throw Error(i(92));if(Q(g)){if(1<g.length)throw Error(i(93));g=g[0]}c=g}c==null&&(c=""),u=c}c=mi(u),o.defaultValue=c,g=o.textContent,g===c&&g!==""&&g!==null&&(o.value=g)}function wi(o,u){if(u){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=u;return}}o.textContent=u}var ir=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ru(o,u,c){var g=u.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":g?o.setProperty(u,c):typeof c!="number"||c===0||ir.has(u)?u==="float"?o.cssFloat=c:o[u]=(""+c).trim():o[u]=c+"px"}function Rs(o,u,c){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var E in u)g=u[E],u.hasOwnProperty(E)&&c[E]!==g&&ru(o,E,g)}else for(var S in u)u.hasOwnProperty(S)&&ru(o,S,u[S])}function ao(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ko=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uo(o){return Wo.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var cr=null;function xi(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var lo=null,co=null;function df(o){var u=hi(o);if(u&&(o=u.stateNode)){var c=o[xn]||null;e:switch(o=u.stateNode,u.type){case"input":if(yn(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),u=c.name,c.type==="radio"&&u!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Rn(""+u)+'"][type="radio"]'),u=0;u<c.length;u++){var g=c[u];if(g!==o&&g.form===o.form){var E=g[xn]||null;if(!E)throw Error(i(90));yn(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(u=0;u<c.length;u++)g=c[u],g.form===o.form&&Dt(g)}break e;case"textarea":Ft(o,c.value,c.defaultValue);break e;case"select":u=c.value,u!=null&&nr(o,!!c.multiple,u,!1)}}}var Ns=!1;function Gh(o,u,c){if(Ns)return o(u,c);Ns=!0;try{var g=o(u);return g}finally{if(Ns=!1,(lo!==null||co!==null)&&(Up(),lo&&(u=lo,o=co,co=lo=null,df(u),o)))for(u=0;u<o.length;u++)df(o[u])}}function su(o,u){var c=o.stateNode;if(c===null)return null;var g=c[xn]||null;if(g===null)return null;c=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(i(231,u,typeof c));return c}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(ps)try{var ou={};Object.defineProperty(ou,"passive",{get:function(){$r=!0}}),window.addEventListener("test",ou,ou),window.removeEventListener("test",ou,ou)}catch{$r=!1}var Ds=null,Xo=null,fo=null;function hf(){if(fo)return fo;var o,u=Xo,c=u.length,g,E="value"in Ds?Ds.value:Ds.textContent,S=E.length;for(o=0;o<c&&u[o]===E[o];o++);var k=c-o;for(g=1;g<=k&&u[c-g]===E[S-g];g++);return fo=E.slice(o,1<g?1-g:void 0)}function Ms(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function ks(){return!0}function pf(){return!1}function gi(o){function u(c,g,E,S,k){this._reactName=c,this._targetInst=E,this.type=g,this.nativeEvent=S,this.target=k,this.currentTarget=null;for(var Y in o)o.hasOwnProperty(Y)&&(c=o[Y],this[Y]=c?c(S):S[Y]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?ks:pf,this.isPropagationStopped=pf,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),u}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=gi(jt),au=p({},jt,{view:0,detail:0}),$h=gi(au),ul,ll,Ps,uu=p({},au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ps&&(Ps&&o.type==="mousemove"?(ul=o.screenX-Ps.screenX,ll=o.screenY-Ps.screenY):ll=ul=0,Ps=o),ul)},movementY:function(o){return"movementY"in o?o.movementY:ll}}),Yr=gi(uu),Yh=p({},uu,{dataTransfer:0}),k0=gi(Yh),lu=p({},au,{relatedTarget:0}),cl=gi(lu),mf=p({},jt,{animationName:0,elapsedTime:0,pseudoElement:0}),fl=gi(mf),Kh=p({},jt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),dl=gi(Kh),P0=p({},jt,{data:0}),gf=gi(P0),cu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yf(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Xh[o])?!!u[o]:!1}function fu(){return yf}var Qh=p({},au,{key:function(o){if(o.key){var u=cu[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Ms(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Wh[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(o){return o.type==="keypress"?Ms(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ms(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),hl=gi(Qh),Jh=p({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_f=gi(Jh),ho=p({},au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),Zh=gi(ho),jh=p({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ep=gi(jh),tp=p({},uu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),pl=gi(tp),rr=p({},jt,{newState:0,oldState:0}),np=gi(rr),ip=[9,13,27,32],Ls=ps&&"CompositionEvent"in window,_=null;ps&&"documentMode"in document&&(_=document.documentMode);var A=ps&&"TextEvent"in window&&!_,x=ps&&(!Ls||_&&8<_&&11>=_),W=" ",fe=!1;function Ee(o,u){switch(o){case"keyup":return ip.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Be(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ot=!1;function oi(o,u){switch(o){case"compositionend":return Be(u);case"keypress":return u.which!==32?null:(fe=!0,W);case"textInput":return o=u.data,o===W&&fe?null:o;default:return null}}function Ut(o,u){if(Ot)return o==="compositionend"||!Ls&&Ee(o,u)?(o=hf(),fo=Xo=Ds=null,Ot=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return x&&u.locale!=="ko"?null:u.data;default:return null}}var yi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ai(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!yi[o.type]:u==="textarea"}function po(o,u,c,g){lo?co?co.push(g):co=[g]:lo=g,u=qp(u,"onChange"),0<u.length&&(c=new al("onChange","change",null,c,g),o.push({event:c,listeners:u}))}var Ri=null,Os=null;function Ef(o){GA(o,0)}function rp(o){var u=ji(o);if(Dt(u))return o}function fS(o,u){if(o==="change")return u}var dS=!1;if(ps){var L0;if(ps){var O0="oninput"in document;if(!O0){var hS=document.createElement("div");hS.setAttribute("oninput","return;"),O0=typeof hS.oninput=="function"}L0=O0}else L0=!1;dS=L0&&(!document.documentMode||9<document.documentMode)}function pS(){Ri&&(Ri.detachEvent("onpropertychange",mS),Os=Ri=null)}function mS(o){if(o.propertyName==="value"&&rp(Os)){var u=[];po(u,Os,o,xi(o)),Gh(Ef,u)}}function ZO(o,u,c){o==="focusin"?(pS(),Ri=u,Os=c,Ri.attachEvent("onpropertychange",mS)):o==="focusout"&&pS()}function jO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return rp(Os)}function e3(o,u){if(o==="click")return rp(u)}function t3(o,u){if(o==="input"||o==="change")return rp(u)}function n3(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Ar=typeof Object.is=="function"?Object.is:n3;function Tf(o,u){if(Ar(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var c=Object.keys(o),g=Object.keys(u);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var E=c[g];if(!Ht.call(u,E)||!Ar(o[E],u[E]))return!1}return!0}function gS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function yS(o,u){var c=gS(o);o=0;for(var g;c;){if(c.nodeType===3){if(g=o+c.textContent.length,o<=u&&g>=u)return{node:c,offset:u-o};o=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=gS(c)}}function _S(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?_S(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function ES(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=qr(o.document);u instanceof o.HTMLIFrameElement;){try{var c=typeof u.contentWindow.location.href=="string"}catch{c=!1}if(c)o=u.contentWindow;else break;u=qr(o.document)}return u}function U0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var i3=ps&&"documentMode"in document&&11>=document.documentMode,ml=null,B0=null,vf=null,V0=!1;function TS(o,u,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;V0||ml==null||ml!==qr(g)||(g=ml,"selectionStart"in g&&U0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),vf&&Tf(vf,g)||(vf=g,g=qp(B0,"onSelect"),0<g.length&&(u=new al("onSelect","select",null,u,c),o.push({event:u,listeners:g}),u.target=ml)))}function du(o,u){var c={};return c[o.toLowerCase()]=u.toLowerCase(),c["Webkit"+o]="webkit"+u,c["Moz"+o]="moz"+u,c}var gl={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionrun:du("Transition","TransitionRun"),transitionstart:du("Transition","TransitionStart"),transitioncancel:du("Transition","TransitionCancel"),transitionend:du("Transition","TransitionEnd")},F0={},vS={};ps&&(vS=document.createElement("div").style,"AnimationEvent"in window||(delete gl.animationend.animation,delete gl.animationiteration.animation,delete gl.animationstart.animation),"TransitionEvent"in window||delete gl.transitionend.transition);function hu(o){if(F0[o])return F0[o];if(!gl[o])return o;var u=gl[o],c;for(c in u)if(u.hasOwnProperty(c)&&c in vS)return F0[o]=u[c];return o}var SS=hu("animationend"),CS=hu("animationiteration"),AS=hu("animationstart"),r3=hu("transitionrun"),s3=hu("transitionstart"),o3=hu("transitioncancel"),bS=hu("transitionend"),IS=new Map,H0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");H0.push("scrollEnd");function ms(o,u){IS.set(o,u),Fe(u,[o])}var wS=new WeakMap;function Kr(o,u){if(typeof o=="object"&&o!==null){var c=wS.get(o);return c!==void 0?c:(u={value:o,source:u,stack:zr(u)},wS.set(o,u),u)}return{value:o,source:u,stack:zr(u)}}var Wr=[],yl=0,z0=0;function sp(){for(var o=yl,u=z0=yl=0;u<o;){var c=Wr[u];Wr[u++]=null;var g=Wr[u];Wr[u++]=null;var E=Wr[u];Wr[u++]=null;var S=Wr[u];if(Wr[u++]=null,g!==null&&E!==null){var k=g.pending;k===null?E.next=E:(E.next=k.next,k.next=E),g.pending=E}S!==0&&xS(c,E,S)}}function op(o,u,c,g){Wr[yl++]=o,Wr[yl++]=u,Wr[yl++]=c,Wr[yl++]=g,z0|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function q0(o,u,c,g){return op(o,u,c,g),ap(o)}function _l(o,u){return op(o,null,null,u),ap(o)}function xS(o,u,c){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c);for(var E=!1,S=o.return;S!==null;)S.childLanes|=c,g=S.alternate,g!==null&&(g.childLanes|=c),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(E=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,E&&u!==null&&(E=31-Qe(c),o=S.hiddenUpdates,g=o[E],g===null?o[E]=[u]:g.push(u),u.lane=c|536870912),S):null}function ap(o){if(50<Yf)throw Yf=0,Xy=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var El={};function a3(o,u,c,g){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(o,u,c,g){return new a3(o,u,c,g)}function G0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function mo(o,u){var c=o.alternate;return c===null?(c=br(o.tag,u,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=u,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,u=o.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function RS(o,u){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,u=c.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function up(o,u,c,g,E,S){var k=0;if(g=o,typeof o=="function")G0(o)&&(k=1);else if(typeof o=="string")k=l6(o,c,ye.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case L:return o=br(31,c,u,E),o.elementType=L,o.lanes=S,o;case b:return pu(c.children,E,S,u);case w:k=8,E|=24;break;case R:return o=br(12,c,u,E|2),o.elementType=R,o.lanes=S,o;case J:return o=br(13,c,u,E),o.elementType=J,o.lanes=S,o;case K:return o=br(19,c,u,E),o.elementType=K,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:case G:k=10;break e;case V:k=9;break e;case F:k=11;break e;case M:k=14;break e;case P:k=16,g=null;break e}k=29,c=Error(i(130,o===null?"null":typeof o,"")),g=null}return u=br(k,c,u,E),u.elementType=o,u.type=g,u.lanes=S,u}function pu(o,u,c,g){return o=br(7,o,g,u),o.lanes=c,o}function $0(o,u,c){return o=br(6,o,null,u),o.lanes=c,o}function Y0(o,u,c){return u=br(4,o.children!==null?o.children:[],o.key,u),u.lanes=c,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Tl=[],vl=0,lp=null,cp=0,Xr=[],Qr=0,mu=null,go=1,yo="";function gu(o,u){Tl[vl++]=cp,Tl[vl++]=lp,lp=o,cp=u}function NS(o,u,c){Xr[Qr++]=go,Xr[Qr++]=yo,Xr[Qr++]=mu,mu=o;var g=go;o=yo;var E=32-Qe(g)-1;g&=~(1<<E),c+=1;var S=32-Qe(u)+E;if(30<S){var k=E-E%5;S=(g&(1<<k)-1).toString(32),g>>=k,E-=k,go=1<<32-Qe(u)+E|c<<E|g,yo=S+o}else go=1<<S|c<<E|g,yo=o}function K0(o){o.return!==null&&(gu(o,1),NS(o,1,0))}function W0(o){for(;o===lp;)lp=Tl[--vl],Tl[vl]=null,cp=Tl[--vl],Tl[vl]=null;for(;o===mu;)mu=Xr[--Qr],Xr[Qr]=null,yo=Xr[--Qr],Xr[Qr]=null,go=Xr[--Qr],Xr[Qr]=null}var sr=null,Un=null,Kt=!1,yu=null,Us=!1,X0=Error(i(519));function _u(o){var u=Error(i(418,""));throw Af(Kr(u,o)),X0}function DS(o){var u=o.stateNode,c=o.type,g=o.memoizedProps;switch(u[Xt]=o,u[xn]=g,c){case"dialog":xt("cancel",u),xt("close",u);break;case"iframe":case"object":case"embed":xt("load",u);break;case"video":case"audio":for(c=0;c<Wf.length;c++)xt(Wf[c],u);break;case"source":xt("error",u);break;case"img":case"image":case"link":xt("error",u),xt("load",u);break;case"details":xt("toggle",u);break;case"input":xt("invalid",u),bi(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Lt(u);break;case"select":xt("invalid",u);break;case"textarea":xt("invalid",u),hs(u,g.value,g.defaultValue,g.children),Lt(u)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||u.textContent===""+c||g.suppressHydrationWarning===!0||WA(u.textContent,c)?(g.popover!=null&&(xt("beforetoggle",u),xt("toggle",u)),g.onScroll!=null&&xt("scroll",u),g.onScrollEnd!=null&&xt("scrollend",u),g.onClick!=null&&(u.onclick=Gp),u=!0):u=!1,u||_u(o)}function MS(o){for(sr=o.return;sr;)switch(sr.tag){case 5:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:sr=sr.return}}function Sf(o){if(o!==sr)return!1;if(!Kt)return MS(o),Kt=!0,!1;var u=o.tag,c;if((c=u!==3&&u!==27)&&((c=u===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||f_(o.type,o.memoizedProps)),c=!c),c&&Un&&_u(o),MS(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(c=o.data,c==="/$"){if(u===0){Un=ys(o.nextSibling);break e}u--}else c!=="$"&&c!=="$!"&&c!=="$?"||u++;o=o.nextSibling}Un=null}}else u===27?(u=Un,fa(o.type)?(o=m_,m_=null,Un=o):Un=u):Un=sr?ys(o.stateNode.nextSibling):null;return!0}function Cf(){Un=sr=null,Kt=!1}function kS(){var o=yu;return o!==null&&(hr===null?hr=o:hr.push.apply(hr,o),yu=null),o}function Af(o){yu===null?yu=[o]:yu.push(o)}var Q0=ne(null),Eu=null,_o=null;function Qo(o,u,c){H(Q0,u._currentValue),u._currentValue=c}function Eo(o){o._currentValue=Q0.current,le(Q0)}function J0(o,u,c){for(;o!==null;){var g=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),o===c)break;o=o.return}}function Z0(o,u,c,g){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var S=E.dependencies;if(S!==null){var k=E.child;S=S.firstContext;e:for(;S!==null;){var Y=S;S=E;for(var te=0;te<u.length;te++)if(Y.context===u[te]){S.lanes|=c,Y=S.alternate,Y!==null&&(Y.lanes|=c),J0(S.return,c,o),g||(k=null);break e}S=Y.next}}else if(E.tag===18){if(k=E.return,k===null)throw Error(i(341));k.lanes|=c,S=k.alternate,S!==null&&(S.lanes|=c),J0(k,c,o),k=null}else k=E.child;if(k!==null)k.return=E;else for(k=E;k!==null;){if(k===o){k=null;break}if(E=k.sibling,E!==null){E.return=k.return,k=E;break}k=k.return}E=k}}function bf(o,u,c,g){o=null;for(var E=u,S=!1;E!==null;){if(!S){if((E.flags&524288)!==0)S=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var k=E.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var Y=E.type;Ar(E.pendingProps.value,k.value)||(o!==null?o.push(Y):o=[Y])}}else if(E===$e.current){if(k=E.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(ed):o=[ed])}E=E.return}o!==null&&Z0(u,o,c,g),u.flags|=262144}function fp(o){for(o=o.firstContext;o!==null;){if(!Ar(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Tu(o){Eu=o,_o=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Bi(o){return PS(Eu,o)}function dp(o,u){return Eu===null&&Tu(o),PS(o,u)}function PS(o,u){var c=u._currentValue;if(u={context:u,memoizedValue:c,next:null},_o===null){if(o===null)throw Error(i(308));_o=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else _o=_o.next=u;return c}var u3=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(c,g){o.push(g)}};this.abort=function(){u.aborted=!0,o.forEach(function(c){return c()})}},l3=t.unstable_scheduleCallback,c3=t.unstable_NormalPriority,ui={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function j0(){return{controller:new u3,data:new Map,refCount:0}}function If(o){o.refCount--,o.refCount===0&&l3(c3,function(){o.controller.abort()})}var wf=null,ey=0,Sl=0,Cl=null;function f3(o,u){if(wf===null){var c=wf=[];ey=0,Sl=n_(),Cl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return ey++,u.then(LS,LS),u}function LS(){if(--ey===0&&wf!==null){Cl!==null&&(Cl.status="fulfilled");var o=wf;wf=null,Sl=0,Cl=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function d3(o,u){var c=[],g={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return o.then(function(){g.status="fulfilled",g.value=u;for(var E=0;E<c.length;E++)(0,c[E])(u)},function(E){for(g.status="rejected",g.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),g}var OS=$.S;$.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&f3(o,u),OS!==null&&OS(o,u)};var vu=ne(null);function ty(){var o=vu.current;return o!==null?o:_n.pooledCache}function hp(o,u){u===null?H(vu,vu.current):H(vu,u.pool)}function US(){var o=ty();return o===null?null:{parent:ui._currentValue,pool:o}}var xf=Error(i(460)),BS=Error(i(474)),pp=Error(i(542)),ny={then:function(){}};function VS(o){return o=o.status,o==="fulfilled"||o==="rejected"}function mp(){}function FS(o,u,c){switch(c=o[c],c===void 0?o.push(u):c!==u&&(u.then(mp,mp),u=c),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,zS(o),o;default:if(typeof u.status=="string")u.then(mp,mp);else{if(o=_n,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(g){if(u.status==="pending"){var E=u;E.status="fulfilled",E.value=g}},function(g){if(u.status==="pending"){var E=u;E.status="rejected",E.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,zS(o),o}throw Rf=u,xf}}var Rf=null;function HS(){if(Rf===null)throw Error(i(459));var o=Rf;return Rf=null,o}function zS(o){if(o===xf||o===pp)throw Error(i(483))}var Jo=!1;function iy(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ry(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Zo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function jo(o,u,c){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(on&2)!==0){var E=g.pending;return E===null?u.next=u:(u.next=E.next,E.next=u),g.pending=u,u=ap(o),xS(o,null,c),u}return op(o,g,u,c),ap(o)}function Nf(o,u,c){if(u=u.updateQueue,u!==null&&(u=u.shared,(c&4194048)!==0)){var g=u.lanes;g&=o.pendingLanes,c|=g,u.lanes=c,oo(o,c)}}function sy(o,u){var c=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var E=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?E=S=k:S=S.next=k,c=c.next}while(c!==null);S===null?E=S=u:S=S.next=u}else E=S=u;c={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=u}var oy=!1;function Df(){if(oy){var o=Cl;if(o!==null)throw o}}function Mf(o,u,c,g){oy=!1;var E=o.updateQueue;Jo=!1;var S=E.firstBaseUpdate,k=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var te=Y,pe=te.next;te.next=null,k===null?S=pe:k.next=pe,k=te;var Ce=o.alternate;Ce!==null&&(Ce=Ce.updateQueue,Y=Ce.lastBaseUpdate,Y!==k&&(Y===null?Ce.firstBaseUpdate=pe:Y.next=pe,Ce.lastBaseUpdate=te))}if(S!==null){var Ie=E.baseState;k=0,Ce=pe=te=null,Y=S;do{var me=Y.lane&-536870913,ge=me!==Y.lane;if(ge?(Bt&me)===me:(g&me)===me){me!==0&&me===Sl&&(oy=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var ut=o,rt=Y;me=u;var hn=c;switch(rt.tag){case 1:if(ut=rt.payload,typeof ut=="function"){Ie=ut.call(hn,Ie,me);break e}Ie=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=rt.payload,me=typeof ut=="function"?ut.call(hn,Ie,me):ut,me==null)break e;Ie=p({},Ie,me);break e;case 2:Jo=!0}}me=Y.callback,me!==null&&(o.flags|=64,ge&&(o.flags|=8192),ge=E.callbacks,ge===null?E.callbacks=[me]:ge.push(me))}else ge={lane:me,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ce===null?(pe=Ce=ge,te=Ie):Ce=Ce.next=ge,k|=me;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;ge=Y,Y=ge.next,ge.next=null,E.lastBaseUpdate=ge,E.shared.pending=null}}while(!0);Ce===null&&(te=Ie),E.baseState=te,E.firstBaseUpdate=pe,E.lastBaseUpdate=Ce,S===null&&(E.shared.lanes=0),aa|=k,o.lanes=k,o.memoizedState=Ie}}function qS(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function GS(o,u){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)qS(c[o],u)}var Al=ne(null),gp=ne(0);function $S(o,u){o=Io,H(gp,o),H(Al,u),Io=o|u.baseLanes}function ay(){H(gp,Io),H(Al,Al.current)}function uy(){Io=gp.current,le(Al),le(gp)}var ea=0,vt=null,fn=null,Qn=null,yp=!1,bl=!1,Su=!1,_p=0,kf=0,Il=null,h3=0;function Gn(){throw Error(i(321))}function ly(o,u){if(u===null)return!1;for(var c=0;c<u.length&&c<o.length;c++)if(!Ar(o[c],u[c]))return!1;return!0}function cy(o,u,c,g,E,S){return ea=S,vt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,$.H=o===null||o.memoizedState===null?xC:RC,Su=!1,S=c(g,E),Su=!1,bl&&(S=KS(u,c,g,E)),YS(o),S}function YS(o){$.H=Ap;var u=fn!==null&&fn.next!==null;if(ea=0,Qn=fn=vt=null,yp=!1,kf=0,Il=null,u)throw Error(i(300));o===null||_i||(o=o.dependencies,o!==null&&fp(o)&&(_i=!0))}function KS(o,u,c,g){vt=o;var E=0;do{if(bl&&(Il=null),kf=0,bl=!1,25<=E)throw Error(i(301));if(E+=1,Qn=fn=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}$.H=T3,S=u(c,g)}while(bl);return S}function p3(){var o=$.H,u=o.useState()[0];return u=typeof u.then=="function"?Pf(u):u,o=o.useState()[0],(fn!==null?fn.memoizedState:null)!==o&&(vt.flags|=1024),u}function fy(){var o=_p!==0;return _p=0,o}function dy(o,u,c){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~c}function hy(o){if(yp){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}yp=!1}ea=0,Qn=fn=vt=null,bl=!1,kf=_p=0,Il=null}function fr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?vt.memoizedState=Qn=o:Qn=Qn.next=o,Qn}function Jn(){if(fn===null){var o=vt.alternate;o=o!==null?o.memoizedState:null}else o=fn.next;var u=Qn===null?vt.memoizedState:Qn.next;if(u!==null)Qn=u,fn=o;else{if(o===null)throw vt.alternate===null?Error(i(467)):Error(i(310));fn=o,o={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},Qn===null?vt.memoizedState=Qn=o:Qn=Qn.next=o}return Qn}function py(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pf(o){var u=kf;return kf+=1,Il===null&&(Il=[]),o=FS(Il,o,u),u=vt,(Qn===null?u.memoizedState:Qn.next)===null&&(u=u.alternate,$.H=u===null||u.memoizedState===null?xC:RC),o}function Ep(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Pf(o);if(o.$$typeof===G)return Bi(o)}throw Error(i(438,String(o)))}function my(o){var u=null,c=vt.updateQueue;if(c!==null&&(u=c.memoCache),u==null){var g=vt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(E){return E.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),c===null&&(c=py(),vt.updateQueue=c),c.memoCache=u,c=u.data[u.index],c===void 0)for(c=u.data[u.index]=Array(o),g=0;g<o;g++)c[g]=O;return u.index++,c}function To(o,u){return typeof u=="function"?u(o):u}function Tp(o){var u=Jn();return gy(u,fn,o)}function gy(o,u,c){var g=o.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=c;var E=o.baseQueue,S=g.pending;if(S!==null){if(E!==null){var k=E.next;E.next=S.next,S.next=k}u.baseQueue=E=S,g.pending=null}if(S=o.baseState,E===null)o.memoizedState=S;else{u=E.next;var Y=k=null,te=null,pe=u,Ce=!1;do{var Ie=pe.lane&-536870913;if(Ie!==pe.lane?(Bt&Ie)===Ie:(ea&Ie)===Ie){var me=pe.revertLane;if(me===0)te!==null&&(te=te.next={lane:0,revertLane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Ie===Sl&&(Ce=!0);else if((ea&me)===me){pe=pe.next,me===Sl&&(Ce=!0);continue}else Ie={lane:0,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},te===null?(Y=te=Ie,k=S):te=te.next=Ie,vt.lanes|=me,aa|=me;Ie=pe.action,Su&&c(S,Ie),S=pe.hasEagerState?pe.eagerState:c(S,Ie)}else me={lane:Ie,revertLane:pe.revertLane,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},te===null?(Y=te=me,k=S):te=te.next=me,vt.lanes|=Ie,aa|=Ie;pe=pe.next}while(pe!==null&&pe!==u);if(te===null?k=S:te.next=Y,!Ar(S,o.memoizedState)&&(_i=!0,Ce&&(c=Cl,c!==null)))throw c;o.memoizedState=S,o.baseState=k,o.baseQueue=te,g.lastRenderedState=S}return E===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function yy(o){var u=Jn(),c=u.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var g=c.dispatch,E=c.pending,S=u.memoizedState;if(E!==null){c.pending=null;var k=E=E.next;do S=o(S,k.action),k=k.next;while(k!==E);Ar(S,u.memoizedState)||(_i=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),c.lastRenderedState=S}return[S,g]}function WS(o,u,c){var g=vt,E=Jn(),S=Kt;if(S){if(c===void 0)throw Error(i(407));c=c()}else c=u();var k=!Ar((fn||E).memoizedState,c);k&&(E.memoizedState=c,_i=!0),E=E.queue;var Y=JS.bind(null,g,E,o);if(Lf(2048,8,Y,[o]),E.getSnapshot!==u||k||Qn!==null&&Qn.memoizedState.tag&1){if(g.flags|=2048,wl(9,vp(),QS.bind(null,g,E,c,u),null),_n===null)throw Error(i(349));S||(ea&124)!==0||XS(g,u,c)}return c}function XS(o,u,c){o.flags|=16384,o={getSnapshot:u,value:c},u=vt.updateQueue,u===null?(u=py(),vt.updateQueue=u,u.stores=[o]):(c=u.stores,c===null?u.stores=[o]:c.push(o))}function QS(o,u,c,g){u.value=c,u.getSnapshot=g,ZS(u)&&jS(o)}function JS(o,u,c){return c(function(){ZS(u)&&jS(o)})}function ZS(o){var u=o.getSnapshot;o=o.value;try{var c=u();return!Ar(o,c)}catch{return!0}}function jS(o){var u=_l(o,2);u!==null&&Nr(u,o,2)}function _y(o){var u=fr();if(typeof o=="function"){var c=o;if(o=c(),Su){ze(!0);try{c()}finally{ze(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:o},u}function eC(o,u,c,g){return o.baseState=c,gy(o,fn,typeof g=="function"?g:To)}function m3(o,u,c,g,E){if(Cp(o))throw Error(i(485));if(o=u.action,o!==null){var S={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){S.listeners.push(k)}};$.T!==null?c(!0):S.isTransition=!1,g(S),c=u.pending,c===null?(S.next=u.pending=S,tC(u,S)):(S.next=c.next,u.pending=c.next=S)}}function tC(o,u){var c=u.action,g=u.payload,E=o.state;if(u.isTransition){var S=$.T,k={};$.T=k;try{var Y=c(E,g),te=$.S;te!==null&&te(k,Y),nC(o,u,Y)}catch(pe){Ey(o,u,pe)}finally{$.T=S}}else try{S=c(E,g),nC(o,u,S)}catch(pe){Ey(o,u,pe)}}function nC(o,u,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){iC(o,u,g)},function(g){return Ey(o,u,g)}):iC(o,u,c)}function iC(o,u,c){u.status="fulfilled",u.value=c,rC(u),o.state=c,u=o.pending,u!==null&&(c=u.next,c===u?o.pending=null:(c=c.next,u.next=c,tC(o,c)))}function Ey(o,u,c){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=c,rC(u),u=u.next;while(u!==g)}o.action=null}function rC(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function sC(o,u){return u}function oC(o,u){if(Kt){var c=_n.formState;if(c!==null){e:{var g=vt;if(Kt){if(Un){t:{for(var E=Un,S=Us;E.nodeType!==8;){if(!S){E=null;break t}if(E=ys(E.nextSibling),E===null){E=null;break t}}S=E.data,E=S==="F!"||S==="F"?E:null}if(E){Un=ys(E.nextSibling),g=E.data==="F!";break e}}_u(g)}g=!1}g&&(u=c[0])}}return c=fr(),c.memoizedState=c.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sC,lastRenderedState:u},c.queue=g,c=bC.bind(null,vt,g),g.dispatch=c,g=_y(!1),S=Ay.bind(null,vt,!1,g.queue),g=fr(),E={state:u,dispatch:null,action:o,pending:null},g.queue=E,c=m3.bind(null,vt,E,S,c),E.dispatch=c,g.memoizedState=o,[u,c,!1]}function aC(o){var u=Jn();return uC(u,fn,o)}function uC(o,u,c){if(u=gy(o,u,sC)[0],o=Tp(To)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Pf(u)}catch(k){throw k===xf?pp:k}else g=u;u=Jn();var E=u.queue,S=E.dispatch;return c!==u.memoizedState&&(vt.flags|=2048,wl(9,vp(),g3.bind(null,E,c),null)),[g,S,o]}function g3(o,u){o.action=u}function lC(o){var u=Jn(),c=fn;if(c!==null)return uC(u,c,o);Jn(),u=u.memoizedState,c=Jn();var g=c.queue.dispatch;return c.memoizedState=o,[u,g,!1]}function wl(o,u,c,g){return o={tag:o,create:c,deps:g,inst:u,next:null},u=vt.updateQueue,u===null&&(u=py(),vt.updateQueue=u),c=u.lastEffect,c===null?u.lastEffect=o.next=o:(g=c.next,c.next=o,o.next=g,u.lastEffect=o),o}function vp(){return{destroy:void 0,resource:void 0}}function cC(){return Jn().memoizedState}function Sp(o,u,c,g){var E=fr();g=g===void 0?null:g,vt.flags|=o,E.memoizedState=wl(1|u,vp(),c,g)}function Lf(o,u,c,g){var E=Jn();g=g===void 0?null:g;var S=E.memoizedState.inst;fn!==null&&g!==null&&ly(g,fn.memoizedState.deps)?E.memoizedState=wl(u,S,c,g):(vt.flags|=o,E.memoizedState=wl(1|u,S,c,g))}function fC(o,u){Sp(8390656,8,o,u)}function dC(o,u){Lf(2048,8,o,u)}function hC(o,u){return Lf(4,2,o,u)}function pC(o,u){return Lf(4,4,o,u)}function mC(o,u){if(typeof u=="function"){o=o();var c=u(o);return function(){typeof c=="function"?c():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function gC(o,u,c){c=c!=null?c.concat([o]):null,Lf(4,4,mC.bind(null,u,o),c)}function Ty(){}function yC(o,u){var c=Jn();u=u===void 0?null:u;var g=c.memoizedState;return u!==null&&ly(u,g[1])?g[0]:(c.memoizedState=[o,u],o)}function _C(o,u){var c=Jn();u=u===void 0?null:u;var g=c.memoizedState;if(u!==null&&ly(u,g[1]))return g[0];if(g=o(),Su){ze(!0);try{o()}finally{ze(!1)}}return c.memoizedState=[g,u],g}function vy(o,u,c){return c===void 0||(ea&1073741824)!==0?o.memoizedState=u:(o.memoizedState=c,o=vA(),vt.lanes|=o,aa|=o,c)}function EC(o,u,c,g){return Ar(c,u)?c:Al.current!==null?(o=vy(o,c,g),Ar(o,u)||(_i=!0),o):(ea&42)===0?(_i=!0,o.memoizedState=c):(o=vA(),vt.lanes|=o,aa|=o,u)}function TC(o,u,c,g,E){var S=j.p;j.p=S!==0&&8>S?S:8;var k=$.T,Y={};$.T=Y,Ay(o,!1,u,c);try{var te=E(),pe=$.S;if(pe!==null&&pe(Y,te),te!==null&&typeof te=="object"&&typeof te.then=="function"){var Ce=d3(te,g);Of(o,u,Ce,Rr(o))}else Of(o,u,g,Rr(o))}catch(Ie){Of(o,u,{then:function(){},status:"rejected",reason:Ie},Rr())}finally{j.p=S,$.T=k}}function y3(){}function Sy(o,u,c,g){if(o.tag!==5)throw Error(i(476));var E=vC(o).queue;TC(o,E,u,se,c===null?y3:function(){return SC(o),c(g)})}function vC(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:se},next:null};var c={};return u.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:c},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function SC(o){var u=vC(o).next.queue;Of(o,u,{},Rr())}function Cy(){return Bi(ed)}function CC(){return Jn().memoizedState}function AC(){return Jn().memoizedState}function _3(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var c=Rr();o=Zo(c);var g=jo(u,o,c);g!==null&&(Nr(g,u,c),Nf(g,u,c)),u={cache:j0()},o.payload=u;return}u=u.return}}function E3(o,u,c){var g=Rr();c={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Cp(o)?IC(u,c):(c=q0(o,u,c,g),c!==null&&(Nr(c,o,g),wC(c,u,g)))}function bC(o,u,c){var g=Rr();Of(o,u,c,g)}function Of(o,u,c,g){var E={lane:g,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Cp(o))IC(u,E);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var k=u.lastRenderedState,Y=S(k,c);if(E.hasEagerState=!0,E.eagerState=Y,Ar(Y,k))return op(o,u,E,0),_n===null&&sp(),!1}catch{}finally{}if(c=q0(o,u,E,g),c!==null)return Nr(c,o,g),wC(c,u,g),!0}return!1}function Ay(o,u,c,g){if(g={lane:2,revertLane:n_(),action:g,hasEagerState:!1,eagerState:null,next:null},Cp(o)){if(u)throw Error(i(479))}else u=q0(o,c,g,2),u!==null&&Nr(u,o,2)}function Cp(o){var u=o.alternate;return o===vt||u!==null&&u===vt}function IC(o,u){bl=yp=!0;var c=o.pending;c===null?u.next=u:(u.next=c.next,c.next=u),o.pending=u}function wC(o,u,c){if((c&4194048)!==0){var g=u.lanes;g&=o.pendingLanes,c|=g,u.lanes=c,oo(o,c)}}var Ap={readContext:Bi,use:Ep,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn},xC={readContext:Bi,use:Ep,useCallback:function(o,u){return fr().memoizedState=[o,u===void 0?null:u],o},useContext:Bi,useEffect:fC,useImperativeHandle:function(o,u,c){c=c!=null?c.concat([o]):null,Sp(4194308,4,mC.bind(null,u,o),c)},useLayoutEffect:function(o,u){return Sp(4194308,4,o,u)},useInsertionEffect:function(o,u){Sp(4,2,o,u)},useMemo:function(o,u){var c=fr();u=u===void 0?null:u;var g=o();if(Su){ze(!0);try{o()}finally{ze(!1)}}return c.memoizedState=[g,u],g},useReducer:function(o,u,c){var g=fr();if(c!==void 0){var E=c(u);if(Su){ze(!0);try{c(u)}finally{ze(!1)}}}else E=u;return g.memoizedState=g.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},g.queue=o,o=o.dispatch=E3.bind(null,vt,o),[g.memoizedState,o]},useRef:function(o){var u=fr();return o={current:o},u.memoizedState=o},useState:function(o){o=_y(o);var u=o.queue,c=bC.bind(null,vt,u);return u.dispatch=c,[o.memoizedState,c]},useDebugValue:Ty,useDeferredValue:function(o,u){var c=fr();return vy(c,o,u)},useTransition:function(){var o=_y(!1);return o=TC.bind(null,vt,o.queue,!0,!1),fr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,c){var g=vt,E=fr();if(Kt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=u(),_n===null)throw Error(i(349));(Bt&124)!==0||XS(g,u,c)}E.memoizedState=c;var S={value:c,getSnapshot:u};return E.queue=S,fC(JS.bind(null,g,S,o),[o]),g.flags|=2048,wl(9,vp(),QS.bind(null,g,S,c,u),null),c},useId:function(){var o=fr(),u=_n.identifierPrefix;if(Kt){var c=yo,g=go;c=(g&~(1<<32-Qe(g)-1)).toString(32)+c,u=""+u+"R"+c,c=_p++,0<c&&(u+="H"+c.toString(32)),u+=""}else c=h3++,u=""+u+"r"+c.toString(32)+"";return o.memoizedState=u},useHostTransitionStatus:Cy,useFormState:oC,useActionState:oC,useOptimistic:function(o){var u=fr();u.memoizedState=u.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=c,u=Ay.bind(null,vt,!0,c),c.dispatch=u,[o,u]},useMemoCache:my,useCacheRefresh:function(){return fr().memoizedState=_3.bind(null,vt)}},RC={readContext:Bi,use:Ep,useCallback:yC,useContext:Bi,useEffect:dC,useImperativeHandle:gC,useInsertionEffect:hC,useLayoutEffect:pC,useMemo:_C,useReducer:Tp,useRef:cC,useState:function(){return Tp(To)},useDebugValue:Ty,useDeferredValue:function(o,u){var c=Jn();return EC(c,fn.memoizedState,o,u)},useTransition:function(){var o=Tp(To)[0],u=Jn().memoizedState;return[typeof o=="boolean"?o:Pf(o),u]},useSyncExternalStore:WS,useId:CC,useHostTransitionStatus:Cy,useFormState:aC,useActionState:aC,useOptimistic:function(o,u){var c=Jn();return eC(c,fn,o,u)},useMemoCache:my,useCacheRefresh:AC},T3={readContext:Bi,use:Ep,useCallback:yC,useContext:Bi,useEffect:dC,useImperativeHandle:gC,useInsertionEffect:hC,useLayoutEffect:pC,useMemo:_C,useReducer:yy,useRef:cC,useState:function(){return yy(To)},useDebugValue:Ty,useDeferredValue:function(o,u){var c=Jn();return fn===null?vy(c,o,u):EC(c,fn.memoizedState,o,u)},useTransition:function(){var o=yy(To)[0],u=Jn().memoizedState;return[typeof o=="boolean"?o:Pf(o),u]},useSyncExternalStore:WS,useId:CC,useHostTransitionStatus:Cy,useFormState:lC,useActionState:lC,useOptimistic:function(o,u){var c=Jn();return fn!==null?eC(c,fn,o,u):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:my,useCacheRefresh:AC},xl=null,Uf=0;function bp(o){var u=Uf;return Uf+=1,xl===null&&(xl=[]),FS(xl,o,u)}function Bf(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Ip(o,u){throw u.$$typeof===y?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function NC(o){var u=o._init;return u(o._payload)}function DC(o){function u(ce,ae){if(o){var de=ce.deletions;de===null?(ce.deletions=[ae],ce.flags|=16):de.push(ae)}}function c(ce,ae){if(!o)return null;for(;ae!==null;)u(ce,ae),ae=ae.sibling;return null}function g(ce){for(var ae=new Map;ce!==null;)ce.key!==null?ae.set(ce.key,ce):ae.set(ce.index,ce),ce=ce.sibling;return ae}function E(ce,ae){return ce=mo(ce,ae),ce.index=0,ce.sibling=null,ce}function S(ce,ae,de){return ce.index=de,o?(de=ce.alternate,de!==null?(de=de.index,de<ae?(ce.flags|=67108866,ae):de):(ce.flags|=67108866,ae)):(ce.flags|=1048576,ae)}function k(ce){return o&&ce.alternate===null&&(ce.flags|=67108866),ce}function Y(ce,ae,de,Ae){return ae===null||ae.tag!==6?(ae=$0(de,ce.mode,Ae),ae.return=ce,ae):(ae=E(ae,de),ae.return=ce,ae)}function te(ce,ae,de,Ae){var Ke=de.type;return Ke===b?Ce(ce,ae,de.props.children,Ae,de.key):ae!==null&&(ae.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&NC(Ke)===ae.type)?(ae=E(ae,de.props),Bf(ae,de),ae.return=ce,ae):(ae=up(de.type,de.key,de.props,null,ce.mode,Ae),Bf(ae,de),ae.return=ce,ae)}function pe(ce,ae,de,Ae){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==de.containerInfo||ae.stateNode.implementation!==de.implementation?(ae=Y0(de,ce.mode,Ae),ae.return=ce,ae):(ae=E(ae,de.children||[]),ae.return=ce,ae)}function Ce(ce,ae,de,Ae,Ke){return ae===null||ae.tag!==7?(ae=pu(de,ce.mode,Ae,Ke),ae.return=ce,ae):(ae=E(ae,de),ae.return=ce,ae)}function Ie(ce,ae,de){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=$0(""+ae,ce.mode,de),ae.return=ce,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case T:return de=up(ae.type,ae.key,ae.props,null,ce.mode,de),Bf(de,ae),de.return=ce,de;case v:return ae=Y0(ae,ce.mode,de),ae.return=ce,ae;case P:var Ae=ae._init;return ae=Ae(ae._payload),Ie(ce,ae,de)}if(Q(ae)||z(ae))return ae=pu(ae,ce.mode,de,null),ae.return=ce,ae;if(typeof ae.then=="function")return Ie(ce,bp(ae),de);if(ae.$$typeof===G)return Ie(ce,dp(ce,ae),de);Ip(ce,ae)}return null}function me(ce,ae,de,Ae){var Ke=ae!==null?ae.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Ke!==null?null:Y(ce,ae,""+de,Ae);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case T:return de.key===Ke?te(ce,ae,de,Ae):null;case v:return de.key===Ke?pe(ce,ae,de,Ae):null;case P:return Ke=de._init,de=Ke(de._payload),me(ce,ae,de,Ae)}if(Q(de)||z(de))return Ke!==null?null:Ce(ce,ae,de,Ae,null);if(typeof de.then=="function")return me(ce,ae,bp(de),Ae);if(de.$$typeof===G)return me(ce,ae,dp(ce,de),Ae);Ip(ce,de)}return null}function ge(ce,ae,de,Ae,Ke){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return ce=ce.get(de)||null,Y(ae,ce,""+Ae,Ke);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case T:return ce=ce.get(Ae.key===null?de:Ae.key)||null,te(ae,ce,Ae,Ke);case v:return ce=ce.get(Ae.key===null?de:Ae.key)||null,pe(ae,ce,Ae,Ke);case P:var Ct=Ae._init;return Ae=Ct(Ae._payload),ge(ce,ae,de,Ae,Ke)}if(Q(Ae)||z(Ae))return ce=ce.get(de)||null,Ce(ae,ce,Ae,Ke,null);if(typeof Ae.then=="function")return ge(ce,ae,de,bp(Ae),Ke);if(Ae.$$typeof===G)return ge(ce,ae,de,dp(ae,Ae),Ke);Ip(ae,Ae)}return null}function ut(ce,ae,de,Ae){for(var Ke=null,Ct=null,Ze=ae,st=ae=0,Ti=null;Ze!==null&&st<de.length;st++){Ze.index>st?(Ti=Ze,Ze=null):Ti=Ze.sibling;var $t=me(ce,Ze,de[st],Ae);if($t===null){Ze===null&&(Ze=Ti);break}o&&Ze&&$t.alternate===null&&u(ce,Ze),ae=S($t,ae,st),Ct===null?Ke=$t:Ct.sibling=$t,Ct=$t,Ze=Ti}if(st===de.length)return c(ce,Ze),Kt&&gu(ce,st),Ke;if(Ze===null){for(;st<de.length;st++)Ze=Ie(ce,de[st],Ae),Ze!==null&&(ae=S(Ze,ae,st),Ct===null?Ke=Ze:Ct.sibling=Ze,Ct=Ze);return Kt&&gu(ce,st),Ke}for(Ze=g(Ze);st<de.length;st++)Ti=ge(Ze,ce,st,de[st],Ae),Ti!==null&&(o&&Ti.alternate!==null&&Ze.delete(Ti.key===null?st:Ti.key),ae=S(Ti,ae,st),Ct===null?Ke=Ti:Ct.sibling=Ti,Ct=Ti);return o&&Ze.forEach(function(ga){return u(ce,ga)}),Kt&&gu(ce,st),Ke}function rt(ce,ae,de,Ae){if(de==null)throw Error(i(151));for(var Ke=null,Ct=null,Ze=ae,st=ae=0,Ti=null,$t=de.next();Ze!==null&&!$t.done;st++,$t=de.next()){Ze.index>st?(Ti=Ze,Ze=null):Ti=Ze.sibling;var ga=me(ce,Ze,$t.value,Ae);if(ga===null){Ze===null&&(Ze=Ti);break}o&&Ze&&ga.alternate===null&&u(ce,Ze),ae=S(ga,ae,st),Ct===null?Ke=ga:Ct.sibling=ga,Ct=ga,Ze=Ti}if($t.done)return c(ce,Ze),Kt&&gu(ce,st),Ke;if(Ze===null){for(;!$t.done;st++,$t=de.next())$t=Ie(ce,$t.value,Ae),$t!==null&&(ae=S($t,ae,st),Ct===null?Ke=$t:Ct.sibling=$t,Ct=$t);return Kt&&gu(ce,st),Ke}for(Ze=g(Ze);!$t.done;st++,$t=de.next())$t=ge(Ze,ce,st,$t.value,Ae),$t!==null&&(o&&$t.alternate!==null&&Ze.delete($t.key===null?st:$t.key),ae=S($t,ae,st),Ct===null?Ke=$t:Ct.sibling=$t,Ct=$t);return o&&Ze.forEach(function(v6){return u(ce,v6)}),Kt&&gu(ce,st),Ke}function hn(ce,ae,de,Ae){if(typeof de=="object"&&de!==null&&de.type===b&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case T:e:{for(var Ke=de.key;ae!==null;){if(ae.key===Ke){if(Ke=de.type,Ke===b){if(ae.tag===7){c(ce,ae.sibling),Ae=E(ae,de.props.children),Ae.return=ce,ce=Ae;break e}}else if(ae.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&NC(Ke)===ae.type){c(ce,ae.sibling),Ae=E(ae,de.props),Bf(Ae,de),Ae.return=ce,ce=Ae;break e}c(ce,ae);break}else u(ce,ae);ae=ae.sibling}de.type===b?(Ae=pu(de.props.children,ce.mode,Ae,de.key),Ae.return=ce,ce=Ae):(Ae=up(de.type,de.key,de.props,null,ce.mode,Ae),Bf(Ae,de),Ae.return=ce,ce=Ae)}return k(ce);case v:e:{for(Ke=de.key;ae!==null;){if(ae.key===Ke)if(ae.tag===4&&ae.stateNode.containerInfo===de.containerInfo&&ae.stateNode.implementation===de.implementation){c(ce,ae.sibling),Ae=E(ae,de.children||[]),Ae.return=ce,ce=Ae;break e}else{c(ce,ae);break}else u(ce,ae);ae=ae.sibling}Ae=Y0(de,ce.mode,Ae),Ae.return=ce,ce=Ae}return k(ce);case P:return Ke=de._init,de=Ke(de._payload),hn(ce,ae,de,Ae)}if(Q(de))return ut(ce,ae,de,Ae);if(z(de)){if(Ke=z(de),typeof Ke!="function")throw Error(i(150));return de=Ke.call(de),rt(ce,ae,de,Ae)}if(typeof de.then=="function")return hn(ce,ae,bp(de),Ae);if(de.$$typeof===G)return hn(ce,ae,dp(ce,de),Ae);Ip(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,ae!==null&&ae.tag===6?(c(ce,ae.sibling),Ae=E(ae,de),Ae.return=ce,ce=Ae):(c(ce,ae),Ae=$0(de,ce.mode,Ae),Ae.return=ce,ce=Ae),k(ce)):c(ce,ae)}return function(ce,ae,de,Ae){try{Uf=0;var Ke=hn(ce,ae,de,Ae);return xl=null,Ke}catch(Ze){if(Ze===xf||Ze===pp)throw Ze;var Ct=br(29,Ze,null,ce.mode);return Ct.lanes=Ae,Ct.return=ce,Ct}finally{}}}var Rl=DC(!0),MC=DC(!1),Jr=ne(null),Bs=null;function ta(o){var u=o.alternate;H(li,li.current&1),H(Jr,o),Bs===null&&(u===null||Al.current!==null||u.memoizedState!==null)&&(Bs=o)}function kC(o){if(o.tag===22){if(H(li,li.current),H(Jr,o),Bs===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(Bs=o)}}else na()}function na(){H(li,li.current),H(Jr,Jr.current)}function vo(o){le(Jr),Bs===o&&(Bs=null),le(li)}var li=ne(0);function wp(o){for(var u=o;u!==null;){if(u.tag===13){var c=u.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||p_(c)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function by(o,u,c,g){u=o.memoizedState,c=c(g,u),c=c==null?u:p({},u,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Iy={enqueueSetState:function(o,u,c){o=o._reactInternals;var g=Rr(),E=Zo(g);E.payload=u,c!=null&&(E.callback=c),u=jo(o,E,g),u!==null&&(Nr(u,o,g),Nf(u,o,g))},enqueueReplaceState:function(o,u,c){o=o._reactInternals;var g=Rr(),E=Zo(g);E.tag=1,E.payload=u,c!=null&&(E.callback=c),u=jo(o,E,g),u!==null&&(Nr(u,o,g),Nf(u,o,g))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var c=Rr(),g=Zo(c);g.tag=2,u!=null&&(g.callback=u),u=jo(o,g,c),u!==null&&(Nr(u,o,c),Nf(u,o,c))}};function PC(o,u,c,g,E,S,k){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,k):u.prototype&&u.prototype.isPureReactComponent?!Tf(c,g)||!Tf(E,S):!0}function LC(o,u,c,g){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(c,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(c,g),u.state!==o&&Iy.enqueueReplaceState(u,u.state,null)}function Cu(o,u){var c=u;if("ref"in u){c={};for(var g in u)g!=="ref"&&(c[g]=u[g])}if(o=o.defaultProps){c===u&&(c=p({},c));for(var E in o)c[E]===void 0&&(c[E]=o[E])}return c}var xp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function OC(o){xp(o)}function UC(o){console.error(o)}function BC(o){xp(o)}function Rp(o,u){try{var c=o.onUncaughtError;c(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function VC(o,u,c){try{var g=o.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function wy(o,u,c){return c=Zo(c),c.tag=3,c.payload={element:null},c.callback=function(){Rp(o,u)},c}function FC(o){return o=Zo(o),o.tag=3,o}function HC(o,u,c,g){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var S=g.value;o.payload=function(){return E(S)},o.callback=function(){VC(u,c,g)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(o.callback=function(){VC(u,c,g),typeof E!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var Y=g.stack;this.componentDidCatch(g.value,{componentStack:Y!==null?Y:""})})}function v3(o,u,c,g,E){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=c.alternate,u!==null&&bf(u,c,E,!0),c=Jr.current,c!==null){switch(c.tag){case 13:return Bs===null?Jy():c.alternate===null&&Bn===0&&(Bn=3),c.flags&=-257,c.flags|=65536,c.lanes=E,g===ny?c.flags|=16384:(u=c.updateQueue,u===null?c.updateQueue=new Set([g]):u.add(g),jy(o,g,E)),!1;case 22:return c.flags|=65536,g===ny?c.flags|=16384:(u=c.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=u):(c=u.retryQueue,c===null?u.retryQueue=new Set([g]):c.add(g)),jy(o,g,E)),!1}throw Error(i(435,c.tag))}return jy(o,g,E),Jy(),!1}if(Kt)return u=Jr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=E,g!==X0&&(o=Error(i(422),{cause:g}),Af(Kr(o,c)))):(g!==X0&&(u=Error(i(423),{cause:g}),Af(Kr(u,c))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,g=Kr(g,c),E=wy(o.stateNode,g,E),sy(o,E),Bn!==4&&(Bn=2)),!1;var S=Error(i(520),{cause:g});if(S=Kr(S,c),$f===null?$f=[S]:$f.push(S),Bn!==4&&(Bn=2),u===null)return!0;g=Kr(g,c),c=u;do{switch(c.tag){case 3:return c.flags|=65536,o=E&-E,c.lanes|=o,o=wy(c.stateNode,g,o),sy(c,o),!1;case 1:if(u=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ua===null||!ua.has(S))))return c.flags|=65536,E&=-E,c.lanes|=E,E=FC(E),HC(E,o,c,g),sy(c,E),!1}c=c.return}while(c!==null);return!1}var zC=Error(i(461)),_i=!1;function Ni(o,u,c,g){u.child=o===null?MC(u,null,c,g):Rl(u,o.child,c,g)}function qC(o,u,c,g,E){c=c.render;var S=u.ref;if("ref"in g){var k={};for(var Y in g)Y!=="ref"&&(k[Y]=g[Y])}else k=g;return Tu(u),g=cy(o,u,c,k,S,E),Y=fy(),o!==null&&!_i?(dy(o,u,E),So(o,u,E)):(Kt&&Y&&K0(u),u.flags|=1,Ni(o,u,g,E),u.child)}function GC(o,u,c,g,E){if(o===null){var S=c.type;return typeof S=="function"&&!G0(S)&&S.defaultProps===void 0&&c.compare===null?(u.tag=15,u.type=S,$C(o,u,S,g,E)):(o=up(c.type,null,g,u,u.mode,E),o.ref=u.ref,o.return=u,u.child=o)}if(S=o.child,!Ly(o,E)){var k=S.memoizedProps;if(c=c.compare,c=c!==null?c:Tf,c(k,g)&&o.ref===u.ref)return So(o,u,E)}return u.flags|=1,o=mo(S,g),o.ref=u.ref,o.return=u,u.child=o}function $C(o,u,c,g,E){if(o!==null){var S=o.memoizedProps;if(Tf(S,g)&&o.ref===u.ref)if(_i=!1,u.pendingProps=g=S,Ly(o,E))(o.flags&131072)!==0&&(_i=!0);else return u.lanes=o.lanes,So(o,u,E)}return xy(o,u,c,g,E)}function YC(o,u,c){var g=u.pendingProps,E=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden"){if((u.flags&128)!==0){if(g=S!==null?S.baseLanes|c:c,o!==null){for(E=u.child=o.child,S=0;E!==null;)S=S|E.lanes|E.childLanes,E=E.sibling;u.childLanes=S&~g}else u.childLanes=0,u.child=null;return KC(o,u,g,c)}if((c&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&hp(u,S!==null?S.cachePool:null),S!==null?$S(u,S):ay(),kC(u);else return u.lanes=u.childLanes=536870912,KC(o,u,S!==null?S.baseLanes|c:c,c)}else S!==null?(hp(u,S.cachePool),$S(u,S),na(),u.memoizedState=null):(o!==null&&hp(u,null),ay(),na());return Ni(o,u,E,c),u.child}function KC(o,u,c,g){var E=ty();return E=E===null?null:{parent:ui._currentValue,pool:E},u.memoizedState={baseLanes:c,cachePool:E},o!==null&&hp(u,null),ay(),kC(u),o!==null&&bf(o,u,g,!0),null}function Np(o,u){var c=u.ref;if(c===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(o===null||o.ref!==c)&&(u.flags|=4194816)}}function xy(o,u,c,g,E){return Tu(u),c=cy(o,u,c,g,void 0,E),g=fy(),o!==null&&!_i?(dy(o,u,E),So(o,u,E)):(Kt&&g&&K0(u),u.flags|=1,Ni(o,u,c,E),u.child)}function WC(o,u,c,g,E,S){return Tu(u),u.updateQueue=null,c=KS(u,g,c,E),YS(o),g=fy(),o!==null&&!_i?(dy(o,u,S),So(o,u,S)):(Kt&&g&&K0(u),u.flags|=1,Ni(o,u,c,S),u.child)}function XC(o,u,c,g,E){if(Tu(u),u.stateNode===null){var S=El,k=c.contextType;typeof k=="object"&&k!==null&&(S=Bi(k)),S=new c(g,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Iy,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=g,S.state=u.memoizedState,S.refs={},iy(u),k=c.contextType,S.context=typeof k=="object"&&k!==null?Bi(k):El,S.state=u.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(by(u,c,k,g),S.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(k=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),k!==S.state&&Iy.enqueueReplaceState(S,S.state,null),Mf(u,g,S,E),Df(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(o===null){S=u.stateNode;var Y=u.memoizedProps,te=Cu(c,Y);S.props=te;var pe=S.context,Ce=c.contextType;k=El,typeof Ce=="object"&&Ce!==null&&(k=Bi(Ce));var Ie=c.getDerivedStateFromProps;Ce=typeof Ie=="function"||typeof S.getSnapshotBeforeUpdate=="function",Y=u.pendingProps!==Y,Ce||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Y||pe!==k)&&LC(u,S,g,k),Jo=!1;var me=u.memoizedState;S.state=me,Mf(u,g,S,E),Df(),pe=u.memoizedState,Y||me!==pe||Jo?(typeof Ie=="function"&&(by(u,c,Ie,g),pe=u.memoizedState),(te=Jo||PC(u,c,te,g,me,pe,k))?(Ce||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=pe),S.props=g,S.state=pe,S.context=k,g=te):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{S=u.stateNode,ry(o,u),k=u.memoizedProps,Ce=Cu(c,k),S.props=Ce,Ie=u.pendingProps,me=S.context,pe=c.contextType,te=El,typeof pe=="object"&&pe!==null&&(te=Bi(pe)),Y=c.getDerivedStateFromProps,(pe=typeof Y=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(k!==Ie||me!==te)&&LC(u,S,g,te),Jo=!1,me=u.memoizedState,S.state=me,Mf(u,g,S,E),Df();var ge=u.memoizedState;k!==Ie||me!==ge||Jo||o!==null&&o.dependencies!==null&&fp(o.dependencies)?(typeof Y=="function"&&(by(u,c,Y,g),ge=u.memoizedState),(Ce=Jo||PC(u,c,Ce,g,me,ge,te)||o!==null&&o.dependencies!==null&&fp(o.dependencies))?(pe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,ge,te),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,ge,te)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||k===o.memoizedProps&&me===o.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||k===o.memoizedProps&&me===o.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=ge),S.props=g,S.state=ge,S.context=te,g=Ce):(typeof S.componentDidUpdate!="function"||k===o.memoizedProps&&me===o.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||k===o.memoizedProps&&me===o.memoizedState||(u.flags|=1024),g=!1)}return S=g,Np(o,u),g=(u.flags&128)!==0,S||g?(S=u.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,o!==null&&g?(u.child=Rl(u,o.child,null,E),u.child=Rl(u,null,c,E)):Ni(o,u,c,E),u.memoizedState=S.state,o=u.child):o=So(o,u,E),o}function QC(o,u,c,g){return Cf(),u.flags|=256,Ni(o,u,c,g),u.child}var Ry={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ny(o){return{baseLanes:o,cachePool:US()}}function Dy(o,u,c){return o=o!==null?o.childLanes&~c:0,u&&(o|=Zr),o}function JC(o,u,c){var g=u.pendingProps,E=!1,S=(u.flags&128)!==0,k;if((k=S)||(k=o!==null&&o.memoizedState===null?!1:(li.current&2)!==0),k&&(E=!0,u.flags&=-129),k=(u.flags&32)!==0,u.flags&=-33,o===null){if(Kt){if(E?ta(u):na(),Kt){var Y=Un,te;if(te=Y){e:{for(te=Y,Y=Us;te.nodeType!==8;){if(!Y){Y=null;break e}if(te=ys(te.nextSibling),te===null){Y=null;break e}}Y=te}Y!==null?(u.memoizedState={dehydrated:Y,treeContext:mu!==null?{id:go,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},te=br(18,null,null,0),te.stateNode=Y,te.return=u,u.child=te,sr=u,Un=null,te=!0):te=!1}te||_u(u)}if(Y=u.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return p_(Y)?u.lanes=32:u.lanes=536870912,null;vo(u)}return Y=g.children,g=g.fallback,E?(na(),E=u.mode,Y=Dp({mode:"hidden",children:Y},E),g=pu(g,E,c,null),Y.return=u,g.return=u,Y.sibling=g,u.child=Y,E=u.child,E.memoizedState=Ny(c),E.childLanes=Dy(o,k,c),u.memoizedState=Ry,g):(ta(u),My(u,Y))}if(te=o.memoizedState,te!==null&&(Y=te.dehydrated,Y!==null)){if(S)u.flags&256?(ta(u),u.flags&=-257,u=ky(o,u,c)):u.memoizedState!==null?(na(),u.child=o.child,u.flags|=128,u=null):(na(),E=g.fallback,Y=u.mode,g=Dp({mode:"visible",children:g.children},Y),E=pu(E,Y,c,null),E.flags|=2,g.return=u,E.return=u,g.sibling=E,u.child=g,Rl(u,o.child,null,c),g=u.child,g.memoizedState=Ny(c),g.childLanes=Dy(o,k,c),u.memoizedState=Ry,u=E);else if(ta(u),p_(Y)){if(k=Y.nextSibling&&Y.nextSibling.dataset,k)var pe=k.dgst;k=pe,g=Error(i(419)),g.stack="",g.digest=k,Af({value:g,source:null,stack:null}),u=ky(o,u,c)}else if(_i||bf(o,u,c,!1),k=(c&o.childLanes)!==0,_i||k){if(k=_n,k!==null&&(g=c&-c,g=(g&42)!==0?1:vr(g),g=(g&(k.suspendedLanes|c))!==0?0:g,g!==0&&g!==te.retryLane))throw te.retryLane=g,_l(o,g),Nr(k,o,g),zC;Y.data==="$?"||Jy(),u=ky(o,u,c)}else Y.data==="$?"?(u.flags|=192,u.child=o.child,u=null):(o=te.treeContext,Un=ys(Y.nextSibling),sr=u,Kt=!0,yu=null,Us=!1,o!==null&&(Xr[Qr++]=go,Xr[Qr++]=yo,Xr[Qr++]=mu,go=o.id,yo=o.overflow,mu=u),u=My(u,g.children),u.flags|=4096);return u}return E?(na(),E=g.fallback,Y=u.mode,te=o.child,pe=te.sibling,g=mo(te,{mode:"hidden",children:g.children}),g.subtreeFlags=te.subtreeFlags&65011712,pe!==null?E=mo(pe,E):(E=pu(E,Y,c,null),E.flags|=2),E.return=u,g.return=u,g.sibling=E,u.child=g,g=E,E=u.child,Y=o.child.memoizedState,Y===null?Y=Ny(c):(te=Y.cachePool,te!==null?(pe=ui._currentValue,te=te.parent!==pe?{parent:pe,pool:pe}:te):te=US(),Y={baseLanes:Y.baseLanes|c,cachePool:te}),E.memoizedState=Y,E.childLanes=Dy(o,k,c),u.memoizedState=Ry,g):(ta(u),c=o.child,o=c.sibling,c=mo(c,{mode:"visible",children:g.children}),c.return=u,c.sibling=null,o!==null&&(k=u.deletions,k===null?(u.deletions=[o],u.flags|=16):k.push(o)),u.child=c,u.memoizedState=null,c)}function My(o,u){return u=Dp({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Dp(o,u){return o=br(22,o,null,u),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function ky(o,u,c){return Rl(u,o.child,null,c),o=My(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function ZC(o,u,c){o.lanes|=u;var g=o.alternate;g!==null&&(g.lanes|=u),J0(o.return,u,c)}function Py(o,u,c,g,E){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:E}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=c,S.tailMode=E)}function jC(o,u,c){var g=u.pendingProps,E=g.revealOrder,S=g.tail;if(Ni(o,u,g.children,c),g=li.current,(g&2)!==0)g=g&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ZC(o,c,u);else if(o.tag===19)ZC(o,c,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}switch(H(li,g),E){case"forwards":for(c=u.child,E=null;c!==null;)o=c.alternate,o!==null&&wp(o)===null&&(E=c),c=c.sibling;c=E,c===null?(E=u.child,u.child=null):(E=c.sibling,c.sibling=null),Py(u,!1,E,c,S);break;case"backwards":for(c=null,E=u.child,u.child=null;E!==null;){if(o=E.alternate,o!==null&&wp(o)===null){u.child=E;break}o=E.sibling,E.sibling=c,c=E,E=o}Py(u,!0,c,null,S);break;case"together":Py(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function So(o,u,c){if(o!==null&&(u.dependencies=o.dependencies),aa|=u.lanes,(c&u.childLanes)===0)if(o!==null){if(bf(o,u,c,!1),(c&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,c=mo(o,o.pendingProps),u.child=c,c.return=u;o.sibling!==null;)o=o.sibling,c=c.sibling=mo(o,o.pendingProps),c.return=u;c.sibling=null}return u.child}function Ly(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&fp(o)))}function S3(o,u,c){switch(u.tag){case 3:be(u,u.stateNode.containerInfo),Qo(u,ui,o.memoizedState.cache),Cf();break;case 27:case 5:Ve(u);break;case 4:be(u,u.stateNode.containerInfo);break;case 10:Qo(u,u.type,u.memoizedProps.value);break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(ta(u),u.flags|=128,null):(c&u.child.childLanes)!==0?JC(o,u,c):(ta(u),o=So(o,u,c),o!==null?o.sibling:null);ta(u);break;case 19:var E=(o.flags&128)!==0;if(g=(c&u.childLanes)!==0,g||(bf(o,u,c,!1),g=(c&u.childLanes)!==0),E){if(g)return jC(o,u,c);u.flags|=128}if(E=u.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),H(li,li.current),g)break;return null;case 22:case 23:return u.lanes=0,YC(o,u,c);case 24:Qo(u,ui,o.memoizedState.cache)}return So(o,u,c)}function eA(o,u,c){if(o!==null)if(o.memoizedProps!==u.pendingProps)_i=!0;else{if(!Ly(o,c)&&(u.flags&128)===0)return _i=!1,S3(o,u,c);_i=(o.flags&131072)!==0}else _i=!1,Kt&&(u.flags&1048576)!==0&&NS(u,cp,u.index);switch(u.lanes=0,u.tag){case 16:e:{o=u.pendingProps;var g=u.elementType,E=g._init;if(g=E(g._payload),u.type=g,typeof g=="function")G0(g)?(o=Cu(g,o),u.tag=1,u=XC(null,u,g,o,c)):(u.tag=0,u=xy(null,u,g,o,c));else{if(g!=null){if(E=g.$$typeof,E===F){u.tag=11,u=qC(null,u,g,o,c);break e}else if(E===M){u.tag=14,u=GC(null,u,g,o,c);break e}}throw u=U(g)||g,Error(i(306,u,""))}}return u;case 0:return xy(o,u,u.type,u.pendingProps,c);case 1:return g=u.type,E=Cu(g,u.pendingProps),XC(o,u,g,E,c);case 3:e:{if(be(u,u.stateNode.containerInfo),o===null)throw Error(i(387));g=u.pendingProps;var S=u.memoizedState;E=S.element,ry(o,u),Mf(u,g,null,c);var k=u.memoizedState;if(g=k.cache,Qo(u,ui,g),g!==S.cache&&Z0(u,[ui],c,!0),Df(),g=k.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:k.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=QC(o,u,g,c);break e}else if(g!==E){E=Kr(Error(i(424)),u),Af(E),u=QC(o,u,g,c);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Un=ys(o.firstChild),sr=u,Kt=!0,yu=null,Us=!0,c=MC(u,null,g,c),u.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Cf(),g===E){u=So(o,u,c);break e}Ni(o,u,g,c)}u=u.child}return u;case 26:return Np(o,u),o===null?(c=rb(u.type,null,u.pendingProps,null))?u.memoizedState=c:Kt||(c=u.type,o=u.pendingProps,g=$p(Re.current).createElement(c),g[Xt]=u,g[xn]=o,Mi(g,c,o),re(g),u.stateNode=g):u.memoizedState=rb(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ve(u),o===null&&Kt&&(g=u.stateNode=tb(u.type,u.pendingProps,Re.current),sr=u,Us=!0,E=Un,fa(u.type)?(m_=E,Un=ys(g.firstChild)):Un=E),Ni(o,u,u.pendingProps.children,c),Np(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Kt&&((E=g=Un)&&(g=Q3(g,u.type,u.pendingProps,Us),g!==null?(u.stateNode=g,sr=u,Un=ys(g.firstChild),Us=!1,E=!0):E=!1),E||_u(u)),Ve(u),E=u.type,S=u.pendingProps,k=o!==null?o.memoizedProps:null,g=S.children,f_(E,S)?g=null:k!==null&&f_(E,k)&&(u.flags|=32),u.memoizedState!==null&&(E=cy(o,u,p3,null,null,c),ed._currentValue=E),Np(o,u),Ni(o,u,g,c),u.child;case 6:return o===null&&Kt&&((o=c=Un)&&(c=J3(c,u.pendingProps,Us),c!==null?(u.stateNode=c,sr=u,Un=null,o=!0):o=!1),o||_u(u)),null;case 13:return JC(o,u,c);case 4:return be(u,u.stateNode.containerInfo),g=u.pendingProps,o===null?u.child=Rl(u,null,g,c):Ni(o,u,g,c),u.child;case 11:return qC(o,u,u.type,u.pendingProps,c);case 7:return Ni(o,u,u.pendingProps,c),u.child;case 8:return Ni(o,u,u.pendingProps.children,c),u.child;case 12:return Ni(o,u,u.pendingProps.children,c),u.child;case 10:return g=u.pendingProps,Qo(u,u.type,g.value),Ni(o,u,g.children,c),u.child;case 9:return E=u.type._context,g=u.pendingProps.children,Tu(u),E=Bi(E),g=g(E),u.flags|=1,Ni(o,u,g,c),u.child;case 14:return GC(o,u,u.type,u.pendingProps,c);case 15:return $C(o,u,u.type,u.pendingProps,c);case 19:return jC(o,u,c);case 31:return g=u.pendingProps,c=u.mode,g={mode:g.mode,children:g.children},o===null?(c=Dp(g,c),c.ref=u.ref,u.child=c,c.return=u,u=c):(c=mo(o.child,g),c.ref=u.ref,u.child=c,c.return=u,u=c),u;case 22:return YC(o,u,c);case 24:return Tu(u),g=Bi(ui),o===null?(E=ty(),E===null&&(E=_n,S=j0(),E.pooledCache=S,S.refCount++,S!==null&&(E.pooledCacheLanes|=c),E=S),u.memoizedState={parent:g,cache:E},iy(u),Qo(u,ui,E)):((o.lanes&c)!==0&&(ry(o,u),Mf(u,null,null,c),Df()),E=o.memoizedState,S=u.memoizedState,E.parent!==g?(E={parent:g,cache:g},u.memoizedState=E,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=E),Qo(u,ui,g)):(g=S.cache,Qo(u,ui,g),g!==E.cache&&Z0(u,[ui],c,!0))),Ni(o,u,u.pendingProps.children,c),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Co(o){o.flags|=4}function tA(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!lb(u)){if(u=Jr.current,u!==null&&((Bt&4194048)===Bt?Bs!==null:(Bt&62914560)!==Bt&&(Bt&536870912)===0||u!==Bs))throw Rf=ny,BS;o.flags|=8192}}function Mp(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Oi():536870912,o.lanes|=u,kl|=u)}function Vf(o,u){if(!Kt)switch(o.tailMode){case"hidden":u=o.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Mn(o){var u=o.alternate!==null&&o.alternate.child===o.child,c=0,g=0;if(u)for(var E=o.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=g,o.childLanes=c,u}function C3(o,u,c){var g=u.pendingProps;switch(W0(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(u),null;case 1:return Mn(u),null;case 3:return c=u.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Eo(ui),Ue(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Sf(u)?Co(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,kS())),Mn(u),null;case 26:return c=u.memoizedState,o===null?(Co(u),c!==null?(Mn(u),tA(u,c)):(Mn(u),u.flags&=-16777217)):c?c!==o.memoizedState?(Co(u),Mn(u),tA(u,c)):(Mn(u),u.flags&=-16777217):(o.memoizedProps!==g&&Co(u),Mn(u),u.flags&=-16777217),null;case 27:it(u),c=Re.current;var E=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==g&&Co(u);else{if(!g){if(u.stateNode===null)throw Error(i(166));return Mn(u),null}o=ye.current,Sf(u)?DS(u):(o=tb(E,g,c),u.stateNode=o,Co(u))}return Mn(u),null;case 5:if(it(u),c=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&Co(u);else{if(!g){if(u.stateNode===null)throw Error(i(166));return Mn(u),null}if(o=ye.current,Sf(u))DS(u);else{switch(E=$p(Re.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?o.multiple=!0:g.size&&(o.size=g.size);break;default:o=typeof g.is=="string"?E.createElement(c,{is:g.is}):E.createElement(c)}}o[Xt]=u,o[xn]=g;e:for(E=u.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===u)break e;for(;E.sibling===null;){if(E.return===null||E.return===u)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}u.stateNode=o;e:switch(Mi(o,c,g),c){case"button":case"input":case"select":case"textarea":o=!!g.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Co(u)}}return Mn(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==g&&Co(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(i(166));if(o=Re.current,Sf(u)){if(o=u.stateNode,c=u.memoizedProps,g=null,E=sr,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}o[Xt]=u,o=!!(o.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||WA(o.nodeValue,c)),o||_u(u)}else o=$p(o).createTextNode(g),o[Xt]=u,u.stateNode=o}return Mn(u),null;case 13:if(g=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Sf(u),g!==null&&g.dehydrated!==null){if(o===null){if(!E)throw Error(i(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[Xt]=u}else Cf(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Mn(u),E=!1}else E=kS(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return u.flags&256?(vo(u),u):(vo(u),null)}if(vo(u),(u.flags&128)!==0)return u.lanes=c,u;if(c=g!==null,o=o!==null&&o.memoizedState!==null,c){g=u.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var S=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==E&&(g.flags|=2048)}return c!==o&&c&&(u.child.flags|=8192),Mp(u,u.updateQueue),Mn(u),null;case 4:return Ue(),o===null&&o_(u.stateNode.containerInfo),Mn(u),null;case 10:return Eo(u.type),Mn(u),null;case 19:if(le(li),E=u.memoizedState,E===null)return Mn(u),null;if(g=(u.flags&128)!==0,S=E.rendering,S===null)if(g)Vf(E,!1);else{if(Bn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(S=wp(o),S!==null){for(u.flags|=128,Vf(E,!1),o=S.updateQueue,u.updateQueue=o,Mp(u,o),u.subtreeFlags=0,o=c,c=u.child;c!==null;)RS(c,o),c=c.sibling;return H(li,li.current&1|2),u.child}o=o.sibling}E.tail!==null&&tt()>Lp&&(u.flags|=128,g=!0,Vf(E,!1),u.lanes=4194304)}else{if(!g)if(o=wp(S),o!==null){if(u.flags|=128,g=!0,o=o.updateQueue,u.updateQueue=o,Mp(u,o),Vf(E,!0),E.tail===null&&E.tailMode==="hidden"&&!S.alternate&&!Kt)return Mn(u),null}else 2*tt()-E.renderingStartTime>Lp&&c!==536870912&&(u.flags|=128,g=!0,Vf(E,!1),u.lanes=4194304);E.isBackwards?(S.sibling=u.child,u.child=S):(o=E.last,o!==null?o.sibling=S:u.child=S,E.last=S)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=tt(),u.sibling=null,o=li.current,H(li,g?o&1|2:o&1),u):(Mn(u),null);case 22:case 23:return vo(u),uy(),g=u.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(c&536870912)!==0&&(u.flags&128)===0&&(Mn(u),u.subtreeFlags&6&&(u.flags|=8192)):Mn(u),c=u.updateQueue,c!==null&&Mp(u,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==c&&(u.flags|=2048),o!==null&&le(vu),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),u.memoizedState.cache!==c&&(u.flags|=2048),Eo(ui),Mn(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function A3(o,u){switch(W0(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Eo(ui),Ue(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return it(u),null;case 13:if(vo(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Cf()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return le(li),null;case 4:return Ue(),null;case 10:return Eo(u.type),null;case 22:case 23:return vo(u),uy(),o!==null&&le(vu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Eo(ui),null;case 25:return null;default:return null}}function nA(o,u){switch(W0(u),u.tag){case 3:Eo(ui),Ue();break;case 26:case 27:case 5:it(u);break;case 4:Ue();break;case 13:vo(u);break;case 19:le(li);break;case 10:Eo(u.type);break;case 22:case 23:vo(u),uy(),o!==null&&le(vu);break;case 24:Eo(ui)}}function Ff(o,u){try{var c=u.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var E=g.next;c=E;do{if((c.tag&o)===o){g=void 0;var S=c.create,k=c.inst;g=S(),k.destroy=g}c=c.next}while(c!==E)}}catch(Y){mn(u,u.return,Y)}}function ia(o,u,c){try{var g=u.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var S=E.next;g=S;do{if((g.tag&o)===o){var k=g.inst,Y=k.destroy;if(Y!==void 0){k.destroy=void 0,E=u;var te=c,pe=Y;try{pe()}catch(Ce){mn(E,te,Ce)}}}g=g.next}while(g!==S)}}catch(Ce){mn(u,u.return,Ce)}}function iA(o){var u=o.updateQueue;if(u!==null){var c=o.stateNode;try{GS(u,c)}catch(g){mn(o,o.return,g)}}}function rA(o,u,c){c.props=Cu(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(g){mn(o,u,g)}}function Hf(o,u){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof c=="function"?o.refCleanup=c(g):c.current=g}}catch(E){mn(o,u,E)}}function Vs(o,u){var c=o.ref,g=o.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(E){mn(o,u,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){mn(o,u,E)}else c.current=null}function sA(o){var u=o.type,c=o.memoizedProps,g=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(E){mn(o,o.return,E)}}function Oy(o,u,c){try{var g=o.stateNode;$3(g,o.type,c,u),g[xn]=u}catch(E){mn(o,o.return,E)}}function oA(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&fa(o.type)||o.tag===4}function Uy(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||oA(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&fa(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function By(o,u,c){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,u):(u=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,u.appendChild(o),c=c._reactRootContainer,c!=null||u.onclick!==null||(u.onclick=Gp));else if(g!==4&&(g===27&&fa(o.type)&&(c=o.stateNode,u=null),o=o.child,o!==null))for(By(o,u,c),o=o.sibling;o!==null;)By(o,u,c),o=o.sibling}function kp(o,u,c){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?c.insertBefore(o,u):c.appendChild(o);else if(g!==4&&(g===27&&fa(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(kp(o,u,c),o=o.sibling;o!==null;)kp(o,u,c),o=o.sibling}function aA(o){var u=o.stateNode,c=o.memoizedProps;try{for(var g=o.type,E=u.attributes;E.length;)u.removeAttributeNode(E[0]);Mi(u,g,c),u[Xt]=o,u[xn]=c}catch(S){mn(o,o.return,S)}}var Ao=!1,$n=!1,Vy=!1,uA=typeof WeakSet=="function"?WeakSet:Set,Ei=null;function b3(o,u){if(o=o.containerInfo,l_=Jp,o=ES(o),U0(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var E=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break e}var k=0,Y=-1,te=-1,pe=0,Ce=0,Ie=o,me=null;t:for(;;){for(var ge;Ie!==c||E!==0&&Ie.nodeType!==3||(Y=k+E),Ie!==S||g!==0&&Ie.nodeType!==3||(te=k+g),Ie.nodeType===3&&(k+=Ie.nodeValue.length),(ge=Ie.firstChild)!==null;)me=Ie,Ie=ge;for(;;){if(Ie===o)break t;if(me===c&&++pe===E&&(Y=k),me===S&&++Ce===g&&(te=k),(ge=Ie.nextSibling)!==null)break;Ie=me,me=Ie.parentNode}Ie=ge}c=Y===-1||te===-1?null:{start:Y,end:te}}else c=null}c=c||{start:0,end:0}}else c=null;for(c_={focusedElem:o,selectionRange:c},Jp=!1,Ei=u;Ei!==null;)if(u=Ei,o=u.child,(u.subtreeFlags&1024)!==0&&o!==null)o.return=u,Ei=o;else for(;Ei!==null;){switch(u=Ei,S=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,c=u,E=S.memoizedProps,S=S.memoizedState,g=c.stateNode;try{var ut=Cu(c.type,E,c.elementType===c.type);o=g.getSnapshotBeforeUpdate(ut,S),g.__reactInternalSnapshotBeforeUpdate=o}catch(rt){mn(c,c.return,rt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,c=o.nodeType,c===9)h_(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":h_(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,Ei=o;break}Ei=u.return}}function lA(o,u,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:ra(o,c),g&4&&Ff(5,c);break;case 1:if(ra(o,c),g&4)if(o=c.stateNode,u===null)try{o.componentDidMount()}catch(k){mn(c,c.return,k)}else{var E=Cu(c.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(E,u,o.__reactInternalSnapshotBeforeUpdate)}catch(k){mn(c,c.return,k)}}g&64&&iA(c),g&512&&Hf(c,c.return);break;case 3:if(ra(o,c),g&64&&(o=c.updateQueue,o!==null)){if(u=null,c.child!==null)switch(c.child.tag){case 27:case 5:u=c.child.stateNode;break;case 1:u=c.child.stateNode}try{GS(o,u)}catch(k){mn(c,c.return,k)}}break;case 27:u===null&&g&4&&aA(c);case 26:case 5:ra(o,c),u===null&&g&4&&sA(c),g&512&&Hf(c,c.return);break;case 12:ra(o,c);break;case 13:ra(o,c),g&4&&dA(o,c),g&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=P3.bind(null,c),Z3(o,c))));break;case 22:if(g=c.memoizedState!==null||Ao,!g){u=u!==null&&u.memoizedState!==null||$n,E=Ao;var S=$n;Ao=g,($n=u)&&!S?sa(o,c,(c.subtreeFlags&8772)!==0):ra(o,c),Ao=E,$n=S}break;case 30:break;default:ra(o,c)}}function cA(o){var u=o.alternate;u!==null&&(o.alternate=null,cA(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Cr(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Nn=null,dr=!1;function bo(o,u,c){for(c=c.child;c!==null;)fA(o,u,c),c=c.sibling}function fA(o,u,c){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ue,c)}catch{}switch(c.tag){case 26:$n||Vs(c,u),bo(o,u,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:$n||Vs(c,u);var g=Nn,E=dr;fa(c.type)&&(Nn=c.stateNode,dr=!1),bo(o,u,c),Qf(c.stateNode),Nn=g,dr=E;break;case 5:$n||Vs(c,u);case 6:if(g=Nn,E=dr,Nn=null,bo(o,u,c),Nn=g,dr=E,Nn!==null)if(dr)try{(Nn.nodeType===9?Nn.body:Nn.nodeName==="HTML"?Nn.ownerDocument.body:Nn).removeChild(c.stateNode)}catch(S){mn(c,u,S)}else try{Nn.removeChild(c.stateNode)}catch(S){mn(c,u,S)}break;case 18:Nn!==null&&(dr?(o=Nn,jA(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),rd(o)):jA(Nn,c.stateNode));break;case 4:g=Nn,E=dr,Nn=c.stateNode.containerInfo,dr=!0,bo(o,u,c),Nn=g,dr=E;break;case 0:case 11:case 14:case 15:$n||ia(2,c,u),$n||ia(4,c,u),bo(o,u,c);break;case 1:$n||(Vs(c,u),g=c.stateNode,typeof g.componentWillUnmount=="function"&&rA(c,u,g)),bo(o,u,c);break;case 21:bo(o,u,c);break;case 22:$n=(g=$n)||c.memoizedState!==null,bo(o,u,c),$n=g;break;default:bo(o,u,c)}}function dA(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{rd(o)}catch(c){mn(u,u.return,c)}}function I3(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new uA),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new uA),u;default:throw Error(i(435,o.tag))}}function Fy(o,u){var c=I3(o);u.forEach(function(g){var E=L3.bind(null,o,g);c.has(g)||(c.add(g),g.then(E,E))})}function Ir(o,u){var c=u.deletions;if(c!==null)for(var g=0;g<c.length;g++){var E=c[g],S=o,k=u,Y=k;e:for(;Y!==null;){switch(Y.tag){case 27:if(fa(Y.type)){Nn=Y.stateNode,dr=!1;break e}break;case 5:Nn=Y.stateNode,dr=!1;break e;case 3:case 4:Nn=Y.stateNode.containerInfo,dr=!0;break e}Y=Y.return}if(Nn===null)throw Error(i(160));fA(S,k,E),Nn=null,dr=!1,S=E.alternate,S!==null&&(S.return=null),E.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)hA(u,o),u=u.sibling}var gs=null;function hA(o,u){var c=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ir(u,o),wr(o),g&4&&(ia(3,o,o.return),Ff(3,o),ia(5,o,o.return));break;case 1:Ir(u,o),wr(o),g&512&&($n||c===null||Vs(c,c.return)),g&64&&Ao&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var E=gs;if(Ir(u,o),wr(o),g&512&&($n||c===null||Vs(c,c.return)),g&4){var S=c!==null?c.memoizedState:null;if(g=o.memoizedState,c===null)if(g===null)if(o.stateNode===null){e:{g=o.type,c=o.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":S=E.getElementsByTagName("title")[0],(!S||S[Fr]||S[Xt]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=E.createElement(g),E.head.insertBefore(S,E.querySelector("head > title"))),Mi(S,g,c),S[Xt]=o,re(S),g=S;break e;case"link":var k=ab("link","href",E).get(g+(c.href||""));if(k){for(var Y=0;Y<k.length;Y++)if(S=k[Y],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(Y,1);break t}}S=E.createElement(g),Mi(S,g,c),E.head.appendChild(S);break;case"meta":if(k=ab("meta","content",E).get(g+(c.content||""))){for(Y=0;Y<k.length;Y++)if(S=k[Y],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(Y,1);break t}}S=E.createElement(g),Mi(S,g,c),E.head.appendChild(S);break;default:throw Error(i(468,g))}S[Xt]=o,re(S),g=S}o.stateNode=g}else ub(E,o.type,o.stateNode);else o.stateNode=ob(E,g,o.memoizedProps);else S!==g?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,g===null?ub(E,o.type,o.stateNode):ob(E,g,o.memoizedProps)):g===null&&o.stateNode!==null&&Oy(o,o.memoizedProps,c.memoizedProps)}break;case 27:Ir(u,o),wr(o),g&512&&($n||c===null||Vs(c,c.return)),c!==null&&g&4&&Oy(o,o.memoizedProps,c.memoizedProps);break;case 5:if(Ir(u,o),wr(o),g&512&&($n||c===null||Vs(c,c.return)),o.flags&32){E=o.stateNode;try{wi(E,"")}catch(ge){mn(o,o.return,ge)}}g&4&&o.stateNode!=null&&(E=o.memoizedProps,Oy(o,E,c!==null?c.memoizedProps:E)),g&1024&&(Vy=!0);break;case 6:if(Ir(u,o),wr(o),g&4){if(o.stateNode===null)throw Error(i(162));g=o.memoizedProps,c=o.stateNode;try{c.nodeValue=g}catch(ge){mn(o,o.return,ge)}}break;case 3:if(Wp=null,E=gs,gs=Yp(u.containerInfo),Ir(u,o),gs=E,wr(o),g&4&&c!==null&&c.memoizedState.isDehydrated)try{rd(u.containerInfo)}catch(ge){mn(o,o.return,ge)}Vy&&(Vy=!1,pA(o));break;case 4:g=gs,gs=Yp(o.stateNode.containerInfo),Ir(u,o),wr(o),gs=g;break;case 12:Ir(u,o),wr(o);break;case 13:Ir(u,o),wr(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Yy=tt()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Fy(o,g)));break;case 22:E=o.memoizedState!==null;var te=c!==null&&c.memoizedState!==null,pe=Ao,Ce=$n;if(Ao=pe||E,$n=Ce||te,Ir(u,o),$n=Ce,Ao=pe,wr(o),g&8192)e:for(u=o.stateNode,u._visibility=E?u._visibility&-2:u._visibility|1,E&&(c===null||te||Ao||$n||Au(o)),c=null,u=o;;){if(u.tag===5||u.tag===26){if(c===null){te=c=u;try{if(S=te.stateNode,E)k=S.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{Y=te.stateNode;var Ie=te.memoizedProps.style,me=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;Y.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(ge){mn(te,te.return,ge)}}}else if(u.tag===6){if(c===null){te=u;try{te.stateNode.nodeValue=E?"":te.memoizedProps}catch(ge){mn(te,te.return,ge)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=o.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,Fy(o,c))));break;case 19:Ir(u,o),wr(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Fy(o,g)));break;case 30:break;case 21:break;default:Ir(u,o),wr(o)}}function wr(o){var u=o.flags;if(u&2){try{for(var c,g=o.return;g!==null;){if(oA(g)){c=g;break}g=g.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var E=c.stateNode,S=Uy(o);kp(o,S,E);break;case 5:var k=c.stateNode;c.flags&32&&(wi(k,""),c.flags&=-33);var Y=Uy(o);kp(o,Y,k);break;case 3:case 4:var te=c.stateNode.containerInfo,pe=Uy(o);By(o,pe,te);break;default:throw Error(i(161))}}catch(Ce){mn(o,o.return,Ce)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function pA(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;pA(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ra(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)lA(o,u.alternate,u),u=u.sibling}function Au(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:ia(4,u,u.return),Au(u);break;case 1:Vs(u,u.return);var c=u.stateNode;typeof c.componentWillUnmount=="function"&&rA(u,u.return,c),Au(u);break;case 27:Qf(u.stateNode);case 26:case 5:Vs(u,u.return),Au(u);break;case 22:u.memoizedState===null&&Au(u);break;case 30:Au(u);break;default:Au(u)}o=o.sibling}}function sa(o,u,c){for(c=c&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,E=o,S=u,k=S.flags;switch(S.tag){case 0:case 11:case 15:sa(E,S,c),Ff(4,S);break;case 1:if(sa(E,S,c),g=S,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(pe){mn(g,g.return,pe)}if(g=S,E=g.updateQueue,E!==null){var Y=g.stateNode;try{var te=E.shared.hiddenCallbacks;if(te!==null)for(E.shared.hiddenCallbacks=null,E=0;E<te.length;E++)qS(te[E],Y)}catch(pe){mn(g,g.return,pe)}}c&&k&64&&iA(S),Hf(S,S.return);break;case 27:aA(S);case 26:case 5:sa(E,S,c),c&&g===null&&k&4&&sA(S),Hf(S,S.return);break;case 12:sa(E,S,c);break;case 13:sa(E,S,c),c&&k&4&&dA(E,S);break;case 22:S.memoizedState===null&&sa(E,S,c),Hf(S,S.return);break;case 30:break;default:sa(E,S,c)}u=u.sibling}}function Hy(o,u){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&If(c))}function zy(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&If(o))}function Fs(o,u,c,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)mA(o,u,c,g),u=u.sibling}function mA(o,u,c,g){var E=u.flags;switch(u.tag){case 0:case 11:case 15:Fs(o,u,c,g),E&2048&&Ff(9,u);break;case 1:Fs(o,u,c,g);break;case 3:Fs(o,u,c,g),E&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&If(o)));break;case 12:if(E&2048){Fs(o,u,c,g),o=u.stateNode;try{var S=u.memoizedProps,k=S.id,Y=S.onPostCommit;typeof Y=="function"&&Y(k,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(te){mn(u,u.return,te)}}else Fs(o,u,c,g);break;case 13:Fs(o,u,c,g);break;case 23:break;case 22:S=u.stateNode,k=u.alternate,u.memoizedState!==null?S._visibility&2?Fs(o,u,c,g):zf(o,u):S._visibility&2?Fs(o,u,c,g):(S._visibility|=2,Nl(o,u,c,g,(u.subtreeFlags&10256)!==0)),E&2048&&Hy(k,u);break;case 24:Fs(o,u,c,g),E&2048&&zy(u.alternate,u);break;default:Fs(o,u,c,g)}}function Nl(o,u,c,g,E){for(E=E&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=o,k=u,Y=c,te=g,pe=k.flags;switch(k.tag){case 0:case 11:case 15:Nl(S,k,Y,te,E),Ff(8,k);break;case 23:break;case 22:var Ce=k.stateNode;k.memoizedState!==null?Ce._visibility&2?Nl(S,k,Y,te,E):zf(S,k):(Ce._visibility|=2,Nl(S,k,Y,te,E)),E&&pe&2048&&Hy(k.alternate,k);break;case 24:Nl(S,k,Y,te,E),E&&pe&2048&&zy(k.alternate,k);break;default:Nl(S,k,Y,te,E)}u=u.sibling}}function zf(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var c=o,g=u,E=g.flags;switch(g.tag){case 22:zf(c,g),E&2048&&Hy(g.alternate,g);break;case 24:zf(c,g),E&2048&&zy(g.alternate,g);break;default:zf(c,g)}u=u.sibling}}var qf=8192;function Dl(o){if(o.subtreeFlags&qf)for(o=o.child;o!==null;)gA(o),o=o.sibling}function gA(o){switch(o.tag){case 26:Dl(o),o.flags&qf&&o.memoizedState!==null&&f6(gs,o.memoizedState,o.memoizedProps);break;case 5:Dl(o);break;case 3:case 4:var u=gs;gs=Yp(o.stateNode.containerInfo),Dl(o),gs=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=qf,qf=16777216,Dl(o),qf=u):Dl(o));break;default:Dl(o)}}function yA(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Gf(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var g=u[c];Ei=g,EA(g,o)}yA(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)_A(o),o=o.sibling}function _A(o){switch(o.tag){case 0:case 11:case 15:Gf(o),o.flags&2048&&ia(9,o,o.return);break;case 3:Gf(o);break;case 12:Gf(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Pp(o)):Gf(o);break;default:Gf(o)}}function Pp(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var g=u[c];Ei=g,EA(g,o)}yA(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:ia(8,u,u.return),Pp(u);break;case 22:c=u.stateNode,c._visibility&2&&(c._visibility&=-3,Pp(u));break;default:Pp(u)}o=o.sibling}}function EA(o,u){for(;Ei!==null;){var c=Ei;switch(c.tag){case 0:case 11:case 15:ia(8,c,u);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:If(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Ei=g;else e:for(c=o;Ei!==null;){g=Ei;var E=g.sibling,S=g.return;if(cA(g),g===c){Ei=null;break e}if(E!==null){E.return=S,Ei=E;break e}Ei=S}}}var w3={getCacheForType:function(o){var u=Bi(ui),c=u.data.get(o);return c===void 0&&(c=o(),u.data.set(o,c)),c}},x3=typeof WeakMap=="function"?WeakMap:Map,on=0,_n=null,wt=null,Bt=0,an=0,xr=null,oa=!1,Ml=!1,qy=!1,Io=0,Bn=0,aa=0,bu=0,Gy=0,Zr=0,kl=0,$f=null,hr=null,$y=!1,Yy=0,Lp=1/0,Op=null,ua=null,Di=0,la=null,Pl=null,Ll=0,Ky=0,Wy=null,TA=null,Yf=0,Xy=null;function Rr(){if((on&2)!==0&&Bt!==0)return Bt&-Bt;if($.T!==null){var o=Sl;return o!==0?o:n_()}return Qi()}function vA(){Zr===0&&(Zr=(Bt&536870912)===0||Kt?fs():536870912);var o=Jr.current;return o!==null&&(o.flags|=32),Zr}function Nr(o,u,c){(o===_n&&(an===2||an===9)||o.cancelPendingCommit!==null)&&(Ol(o,0),ca(o,Bt,Zr,!1)),Xi(o,c),((on&2)===0||o!==_n)&&(o===_n&&((on&2)===0&&(bu|=c),Bn===4&&ca(o,Bt,Zr,!1)),Hs(o))}function SA(o,u,c){if((on&6)!==0)throw Error(i(327));var g=!c&&(u&124)===0&&(u&o.expiredLanes)===0||pn(o,u),E=g?D3(o,u):Zy(o,u,!0),S=g;do{if(E===0){Ml&&!g&&ca(o,u,0,!1);break}else{if(c=o.current.alternate,S&&!R3(c)){E=Zy(o,u,!1),S=!1;continue}if(E===2){if(S=u,o.errorRecoveryDisabledLanes&S)var k=0;else k=o.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){u=k;e:{var Y=o;E=$f;var te=Y.current.memoizedState.isDehydrated;if(te&&(Ol(Y,k).flags|=256),k=Zy(Y,k,!1),k!==2){if(qy&&!te){Y.errorRecoveryDisabledLanes|=S,bu|=S,E=4;break e}S=hr,hr=E,S!==null&&(hr===null?hr=S:hr.push.apply(hr,S))}E=k}if(S=!1,E!==2)continue}}if(E===1){Ol(o,0),ca(o,u,0,!0);break}e:{switch(g=o,S=E,S){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:ca(g,u,Zr,!oa);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(E=Yy+300-tt(),10<E)){if(ca(g,u,Zr,!oa),Tt(g,0,!0)!==0)break e;g.timeoutHandle=JA(CA.bind(null,g,c,hr,Op,$y,u,Zr,bu,kl,oa,S,2,-0,0),E);break e}CA(g,c,hr,Op,$y,u,Zr,bu,kl,oa,S,0,-0,0)}}break}while(!0);Hs(o)}function CA(o,u,c,g,E,S,k,Y,te,pe,Ce,Ie,me,ge){if(o.timeoutHandle=-1,Ie=u.subtreeFlags,(Ie&8192||(Ie&16785408)===16785408)&&(jf={stylesheets:null,count:0,unsuspend:c6},gA(u),Ie=d6(),Ie!==null)){o.cancelPendingCommit=Ie(NA.bind(null,o,u,S,c,g,E,k,Y,te,Ce,1,me,ge)),ca(o,S,k,!pe);return}NA(o,u,S,c,g,E,k,Y,te)}function R3(o){for(var u=o;;){var c=u.tag;if((c===0||c===11||c===15)&&u.flags&16384&&(c=u.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var E=c[g],S=E.getSnapshot;E=E.value;try{if(!Ar(S(),E))return!1}catch{return!1}}if(c=u.child,u.subtreeFlags&16384&&c!==null)c.return=u,u=c;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ca(o,u,c,g){u&=~Gy,u&=~bu,o.suspendedLanes|=u,o.pingedLanes&=~u,g&&(o.warmLanes|=u),g=o.expirationTimes;for(var E=u;0<E;){var S=31-Qe(E),k=1<<S;g[S]=-1,E&=~k}c!==0&&lr(o,c,u)}function Up(){return(on&6)===0?(Kf(0),!1):!0}function Qy(){if(wt!==null){if(an===0)var o=wt.return;else o=wt,_o=Eu=null,hy(o),xl=null,Uf=0,o=wt;for(;o!==null;)nA(o.alternate,o),o=o.return;wt=null}}function Ol(o,u){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,K3(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),Qy(),_n=o,wt=c=mo(o.current,null),Bt=u,an=0,xr=null,oa=!1,Ml=pn(o,u),qy=!1,kl=Zr=Gy=bu=aa=Bn=0,hr=$f=null,$y=!1,(u&8)!==0&&(u|=u&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=u;0<g;){var E=31-Qe(g),S=1<<E;u|=o[E],g&=~S}return Io=u,sp(),c}function AA(o,u){vt=null,$.H=Ap,u===xf||u===pp?(u=HS(),an=3):u===BS?(u=HS(),an=4):an=u===zC?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,xr=u,wt===null&&(Bn=1,Rp(o,Kr(u,o.current)))}function bA(){var o=$.H;return $.H=Ap,o===null?Ap:o}function IA(){var o=$.A;return $.A=w3,o}function Jy(){Bn=4,oa||(Bt&4194048)!==Bt&&Jr.current!==null||(Ml=!0),(aa&134217727)===0&&(bu&134217727)===0||_n===null||ca(_n,Bt,Zr,!1)}function Zy(o,u,c){var g=on;on|=2;var E=bA(),S=IA();(_n!==o||Bt!==u)&&(Op=null,Ol(o,u)),u=!1;var k=Bn;e:do try{if(an!==0&&wt!==null){var Y=wt,te=xr;switch(an){case 8:Qy(),k=6;break e;case 3:case 2:case 9:case 6:Jr.current===null&&(u=!0);var pe=an;if(an=0,xr=null,Ul(o,Y,te,pe),c&&Ml){k=0;break e}break;default:pe=an,an=0,xr=null,Ul(o,Y,te,pe)}}N3(),k=Bn;break}catch(Ce){AA(o,Ce)}while(!0);return u&&o.shellSuspendCounter++,_o=Eu=null,on=g,$.H=E,$.A=S,wt===null&&(_n=null,Bt=0,sp()),k}function N3(){for(;wt!==null;)wA(wt)}function D3(o,u){var c=on;on|=2;var g=bA(),E=IA();_n!==o||Bt!==u?(Op=null,Lp=tt()+500,Ol(o,u)):Ml=pn(o,u);e:do try{if(an!==0&&wt!==null){u=wt;var S=xr;t:switch(an){case 1:an=0,xr=null,Ul(o,u,S,1);break;case 2:case 9:if(VS(S)){an=0,xr=null,xA(u);break}u=function(){an!==2&&an!==9||_n!==o||(an=7),Hs(o)},S.then(u,u);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:VS(S)?(an=0,xr=null,xA(u)):(an=0,xr=null,Ul(o,u,S,7));break;case 5:var k=null;switch(wt.tag){case 26:k=wt.memoizedState;case 5:case 27:var Y=wt;if(!k||lb(k)){an=0,xr=null;var te=Y.sibling;if(te!==null)wt=te;else{var pe=Y.return;pe!==null?(wt=pe,Bp(pe)):wt=null}break t}}an=0,xr=null,Ul(o,u,S,5);break;case 6:an=0,xr=null,Ul(o,u,S,6);break;case 8:Qy(),Bn=6;break e;default:throw Error(i(462))}}M3();break}catch(Ce){AA(o,Ce)}while(!0);return _o=Eu=null,$.H=g,$.A=E,on=c,wt!==null?0:(_n=null,Bt=0,sp(),Bn)}function M3(){for(;wt!==null&&!je();)wA(wt)}function wA(o){var u=eA(o.alternate,o,Io);o.memoizedProps=o.pendingProps,u===null?Bp(o):wt=u}function xA(o){var u=o,c=u.alternate;switch(u.tag){case 15:case 0:u=WC(c,u,u.pendingProps,u.type,void 0,Bt);break;case 11:u=WC(c,u,u.pendingProps,u.type.render,u.ref,Bt);break;case 5:hy(u);default:nA(c,u),u=wt=RS(u,Io),u=eA(c,u,Io)}o.memoizedProps=o.pendingProps,u===null?Bp(o):wt=u}function Ul(o,u,c,g){_o=Eu=null,hy(u),xl=null,Uf=0;var E=u.return;try{if(v3(o,E,u,c,Bt)){Bn=1,Rp(o,Kr(c,o.current)),wt=null;return}}catch(S){if(E!==null)throw wt=E,S;Bn=1,Rp(o,Kr(c,o.current)),wt=null;return}u.flags&32768?(Kt||g===1?o=!0:Ml||(Bt&536870912)!==0?o=!1:(oa=o=!0,(g===2||g===9||g===3||g===6)&&(g=Jr.current,g!==null&&g.tag===13&&(g.flags|=16384))),RA(u,o)):Bp(u)}function Bp(o){var u=o;do{if((u.flags&32768)!==0){RA(u,oa);return}o=u.return;var c=C3(u.alternate,u,Io);if(c!==null){wt=c;return}if(u=u.sibling,u!==null){wt=u;return}wt=u=o}while(u!==null);Bn===0&&(Bn=5)}function RA(o,u){do{var c=A3(o.alternate,o);if(c!==null){c.flags&=32767,wt=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!u&&(o=o.sibling,o!==null)){wt=o;return}wt=o=c}while(o!==null);Bn=6,wt=null}function NA(o,u,c,g,E,S,k,Y,te){o.cancelPendingCommit=null;do Vp();while(Di!==0);if((on&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(S=u.lanes|u.childLanes,S|=z0,Ui(o,c,S,k,Y,te),o===_n&&(wt=_n=null,Bt=0),Pl=u,la=o,Ll=c,Ky=S,Wy=E,TA=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,O3(Hn,function(){return LA(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=$.T,$.T=null,E=j.p,j.p=2,k=on,on|=4;try{b3(o,u,c)}finally{on=k,j.p=E,$.T=g}}Di=1,DA(),MA(),kA()}}function DA(){if(Di===1){Di=0;var o=la,u=Pl,c=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var g=j.p;j.p=2;var E=on;on|=4;try{hA(u,o);var S=c_,k=ES(o.containerInfo),Y=S.focusedElem,te=S.selectionRange;if(k!==Y&&Y&&Y.ownerDocument&&_S(Y.ownerDocument.documentElement,Y)){if(te!==null&&U0(Y)){var pe=te.start,Ce=te.end;if(Ce===void 0&&(Ce=pe),"selectionStart"in Y)Y.selectionStart=pe,Y.selectionEnd=Math.min(Ce,Y.value.length);else{var Ie=Y.ownerDocument||document,me=Ie&&Ie.defaultView||window;if(me.getSelection){var ge=me.getSelection(),ut=Y.textContent.length,rt=Math.min(te.start,ut),hn=te.end===void 0?rt:Math.min(te.end,ut);!ge.extend&&rt>hn&&(k=hn,hn=rt,rt=k);var ce=yS(Y,rt),ae=yS(Y,hn);if(ce&&ae&&(ge.rangeCount!==1||ge.anchorNode!==ce.node||ge.anchorOffset!==ce.offset||ge.focusNode!==ae.node||ge.focusOffset!==ae.offset)){var de=Ie.createRange();de.setStart(ce.node,ce.offset),ge.removeAllRanges(),rt>hn?(ge.addRange(de),ge.extend(ae.node,ae.offset)):(de.setEnd(ae.node,ae.offset),ge.addRange(de))}}}}for(Ie=[],ge=Y;ge=ge.parentNode;)ge.nodeType===1&&Ie.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Ie.length;Y++){var Ae=Ie[Y];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}Jp=!!l_,c_=l_=null}finally{on=E,j.p=g,$.T=c}}o.current=u,Di=2}}function MA(){if(Di===2){Di=0;var o=la,u=Pl,c=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var g=j.p;j.p=2;var E=on;on|=4;try{lA(o,u.alternate,u)}finally{on=E,j.p=g,$.T=c}}Di=3}}function kA(){if(Di===4||Di===3){Di=0,Cn();var o=la,u=Pl,c=Ll,g=TA;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Di=5:(Di=0,Pl=la=null,PA(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(ua=null),ds(c),u=u.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ue,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=$.T,E=j.p,j.p=2,$.T=null;try{for(var S=o.onRecoverableError,k=0;k<g.length;k++){var Y=g[k];S(Y.value,{componentStack:Y.stack})}}finally{$.T=u,j.p=E}}(Ll&3)!==0&&Vp(),Hs(o),E=o.pendingLanes,(c&4194090)!==0&&(E&42)!==0?o===Xy?Yf++:(Yf=0,Xy=o):Yf=0,Kf(0)}}function PA(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,If(u)))}function Vp(o){return DA(),MA(),kA(),LA()}function LA(){if(Di!==5)return!1;var o=la,u=Ky;Ky=0;var c=ds(Ll),g=$.T,E=j.p;try{j.p=32>c?32:c,$.T=null,c=Wy,Wy=null;var S=la,k=Ll;if(Di=0,Pl=la=null,Ll=0,(on&6)!==0)throw Error(i(331));var Y=on;if(on|=4,_A(S.current),mA(S,S.current,k,c),on=Y,Kf(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ue,S)}catch{}return!0}finally{j.p=E,$.T=g,PA(o,u)}}function OA(o,u,c){u=Kr(c,u),u=wy(o.stateNode,u,2),o=jo(o,u,2),o!==null&&(Xi(o,2),Hs(o))}function mn(o,u,c){if(o.tag===3)OA(o,o,c);else for(;u!==null;){if(u.tag===3){OA(u,o,c);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(ua===null||!ua.has(g))){o=Kr(c,o),c=FC(2),g=jo(u,c,2),g!==null&&(HC(c,g,u,o),Xi(g,2),Hs(g));break}}u=u.return}}function jy(o,u,c){var g=o.pingCache;if(g===null){g=o.pingCache=new x3;var E=new Set;g.set(u,E)}else E=g.get(u),E===void 0&&(E=new Set,g.set(u,E));E.has(c)||(qy=!0,E.add(c),o=k3.bind(null,o,u,c),u.then(o,o))}function k3(o,u,c){var g=o.pingCache;g!==null&&g.delete(u),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,_n===o&&(Bt&c)===c&&(Bn===4||Bn===3&&(Bt&62914560)===Bt&&300>tt()-Yy?(on&2)===0&&Ol(o,0):Gy|=c,kl===Bt&&(kl=0)),Hs(o)}function UA(o,u){u===0&&(u=Oi()),o=_l(o,u),o!==null&&(Xi(o,u),Hs(o))}function P3(o){var u=o.memoizedState,c=0;u!==null&&(c=u.retryLane),UA(o,c)}function L3(o,u){var c=0;switch(o.tag){case 13:var g=o.stateNode,E=o.memoizedState;E!==null&&(c=E.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(u),UA(o,c)}function O3(o,u){return zt(o,u)}var Fp=null,Bl=null,e_=!1,Hp=!1,t_=!1,Iu=0;function Hs(o){o!==Bl&&o.next===null&&(Bl===null?Fp=Bl=o:Bl=Bl.next=o),Hp=!0,e_||(e_=!0,B3())}function Kf(o,u){if(!t_&&Hp){t_=!0;do for(var c=!1,g=Fp;g!==null;){if(o!==0){var E=g.pendingLanes;if(E===0)var S=0;else{var k=g.suspendedLanes,Y=g.pingedLanes;S=(1<<31-Qe(42|o)+1)-1,S&=E&~(k&~Y),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,HA(g,S))}else S=Bt,S=Tt(g,g===_n?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||pn(g,S)||(c=!0,HA(g,S));g=g.next}while(c);t_=!1}}function U3(){BA()}function BA(){Hp=e_=!1;var o=0;Iu!==0&&(Y3()&&(o=Iu),Iu=0);for(var u=tt(),c=null,g=Fp;g!==null;){var E=g.next,S=VA(g,u);S===0?(g.next=null,c===null?Fp=E:c.next=E,E===null&&(Bl=c)):(c=g,(o!==0||(S&3)!==0)&&(Hp=!0)),g=E}Kf(o)}function VA(o,u){for(var c=o.suspendedLanes,g=o.pingedLanes,E=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var k=31-Qe(S),Y=1<<k,te=E[k];te===-1?((Y&c)===0||(Y&g)!==0)&&(E[k]=ln(Y,u)):te<=u&&(o.expiredLanes|=Y),S&=~Y}if(u=_n,c=Bt,c=Tt(o,o===u?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,c===0||o===u&&(an===2||an===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&qt(g),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||pn(o,c)){if(u=c&-c,u===o.callbackPriority)return u;switch(g!==null&&qt(g),ds(c)){case 2:case 8:c=Fn;break;case 32:c=Hn;break;case 268435456:c=zn;break;default:c=Hn}return g=FA.bind(null,o),c=zt(c,g),o.callbackPriority=u,o.callbackNode=c,u}return g!==null&&g!==null&&qt(g),o.callbackPriority=2,o.callbackNode=null,2}function FA(o,u){if(Di!==0&&Di!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(Vp()&&o.callbackNode!==c)return null;var g=Bt;return g=Tt(o,o===_n?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(SA(o,g,u),VA(o,tt()),o.callbackNode!=null&&o.callbackNode===c?FA.bind(null,o):null)}function HA(o,u){if(Vp())return null;SA(o,u,!0)}function B3(){W3(function(){(on&6)!==0?zt(gn,U3):BA()})}function n_(){return Iu===0&&(Iu=fs()),Iu}function zA(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:uo(""+o)}function qA(o,u){var c=u.ownerDocument.createElement("input");return c.name=u.name,c.value=u.value,o.id&&c.setAttribute("form",o.id),u.parentNode.insertBefore(c,u),o=new FormData(o),c.parentNode.removeChild(c),o}function V3(o,u,c,g,E){if(u==="submit"&&c&&c.stateNode===E){var S=zA((E[xn]||null).action),k=g.submitter;k&&(u=(u=k[xn]||null)?zA(u.formAction):k.getAttribute("formAction"),u!==null&&(S=u,k=null));var Y=new al("action","action",null,g,E);o.push({event:Y,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Iu!==0){var te=k?qA(E,k):new FormData(E);Sy(c,{pending:!0,data:te,method:E.method,action:S},null,te)}}else typeof S=="function"&&(Y.preventDefault(),te=k?qA(E,k):new FormData(E),Sy(c,{pending:!0,data:te,method:E.method,action:S},S,te))},currentTarget:E}]})}}for(var i_=0;i_<H0.length;i_++){var r_=H0[i_],F3=r_.toLowerCase(),H3=r_[0].toUpperCase()+r_.slice(1);ms(F3,"on"+H3)}ms(SS,"onAnimationEnd"),ms(CS,"onAnimationIteration"),ms(AS,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(r3,"onTransitionRun"),ms(s3,"onTransitionStart"),ms(o3,"onTransitionCancel"),ms(bS,"onTransitionEnd"),It("onMouseEnter",["mouseout","mouseover"]),It("onMouseLeave",["mouseout","mouseover"]),It("onPointerEnter",["pointerout","pointerover"]),It("onPointerLeave",["pointerout","pointerover"]),Fe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wf));function GA(o,u){u=(u&4)!==0;for(var c=0;c<o.length;c++){var g=o[c],E=g.event;g=g.listeners;e:{var S=void 0;if(u)for(var k=g.length-1;0<=k;k--){var Y=g[k],te=Y.instance,pe=Y.currentTarget;if(Y=Y.listener,te!==S&&E.isPropagationStopped())break e;S=Y,E.currentTarget=pe;try{S(E)}catch(Ce){xp(Ce)}E.currentTarget=null,S=te}else for(k=0;k<g.length;k++){if(Y=g[k],te=Y.instance,pe=Y.currentTarget,Y=Y.listener,te!==S&&E.isPropagationStopped())break e;S=Y,E.currentTarget=pe;try{S(E)}catch(Ce){xp(Ce)}E.currentTarget=null,S=te}}}}function xt(o,u){var c=u[ws];c===void 0&&(c=u[ws]=new Set);var g=o+"__bubble";c.has(g)||($A(u,o,2,!1),c.add(g))}function s_(o,u,c){var g=0;u&&(g|=4),$A(c,o,g,u)}var zp="_reactListening"+Math.random().toString(36).slice(2);function o_(o){if(!o[zp]){o[zp]=!0,_e.forEach(function(c){c!=="selectionchange"&&(z3.has(c)||s_(c,!1,o),s_(c,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[zp]||(u[zp]=!0,s_("selectionchange",!1,u))}}function $A(o,u,c,g){switch(mb(u)){case 2:var E=m6;break;case 8:E=g6;break;default:E=T_}c=E.bind(null,u,c,o),E=void 0,!$r||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(E=!0),g?E!==void 0?o.addEventListener(u,c,{capture:!0,passive:E}):o.addEventListener(u,c,!0):E!==void 0?o.addEventListener(u,c,{passive:E}):o.addEventListener(u,c,!1)}function a_(o,u,c,g,E){var S=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var k=g.tag;if(k===3||k===4){var Y=g.stateNode.containerInfo;if(Y===E)break;if(k===4)for(k=g.return;k!==null;){var te=k.tag;if((te===3||te===4)&&k.stateNode.containerInfo===E)return;k=k.return}for(;Y!==null;){if(k=Zi(Y),k===null)return;if(te=k.tag,te===5||te===6||te===26||te===27){g=S=k;continue e}Y=Y.parentNode}}g=g.return}Gh(function(){var pe=S,Ce=xi(c),Ie=[];e:{var me=IS.get(o);if(me!==void 0){var ge=al,ut=o;switch(o){case"keypress":if(Ms(c)===0)break e;case"keydown":case"keyup":ge=hl;break;case"focusin":ut="focus",ge=cl;break;case"focusout":ut="blur",ge=cl;break;case"beforeblur":case"afterblur":ge=cl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Yr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=k0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Zh;break;case SS:case CS:case AS:ge=fl;break;case bS:ge=ep;break;case"scroll":case"scrollend":ge=$h;break;case"wheel":ge=pl;break;case"copy":case"cut":case"paste":ge=dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=_f;break;case"toggle":case"beforetoggle":ge=np}var rt=(u&4)!==0,hn=!rt&&(o==="scroll"||o==="scrollend"),ce=rt?me!==null?me+"Capture":null:me;rt=[];for(var ae=pe,de;ae!==null;){var Ae=ae;if(de=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||de===null||ce===null||(Ae=su(ae,ce),Ae!=null&&rt.push(Xf(ae,Ae,de))),hn)break;ae=ae.return}0<rt.length&&(me=new ge(me,ut,null,c,Ce),Ie.push({event:me,listeners:rt}))}}if((u&7)===0){e:{if(me=o==="mouseover"||o==="pointerover",ge=o==="mouseout"||o==="pointerout",me&&c!==cr&&(ut=c.relatedTarget||c.fromElement)&&(Zi(ut)||ut[Ln]))break e;if((ge||me)&&(me=Ce.window===Ce?Ce:(me=Ce.ownerDocument)?me.defaultView||me.parentWindow:window,ge?(ut=c.relatedTarget||c.toElement,ge=pe,ut=ut?Zi(ut):null,ut!==null&&(hn=s(ut),rt=ut.tag,ut!==hn||rt!==5&&rt!==27&&rt!==6)&&(ut=null)):(ge=null,ut=pe),ge!==ut)){if(rt=Yr,Ae="onMouseLeave",ce="onMouseEnter",ae="mouse",(o==="pointerout"||o==="pointerover")&&(rt=_f,Ae="onPointerLeave",ce="onPointerEnter",ae="pointer"),hn=ge==null?me:ji(ge),de=ut==null?me:ji(ut),me=new rt(Ae,ae+"leave",ge,c,Ce),me.target=hn,me.relatedTarget=de,Ae=null,Zi(Ce)===pe&&(rt=new rt(ce,ae+"enter",ut,c,Ce),rt.target=de,rt.relatedTarget=hn,Ae=rt),hn=Ae,ge&&ut)t:{for(rt=ge,ce=ut,ae=0,de=rt;de;de=Vl(de))ae++;for(de=0,Ae=ce;Ae;Ae=Vl(Ae))de++;for(;0<ae-de;)rt=Vl(rt),ae--;for(;0<de-ae;)ce=Vl(ce),de--;for(;ae--;){if(rt===ce||ce!==null&&rt===ce.alternate)break t;rt=Vl(rt),ce=Vl(ce)}rt=null}else rt=null;ge!==null&&YA(Ie,me,ge,rt,!1),ut!==null&&hn!==null&&YA(Ie,hn,ut,rt,!0)}}e:{if(me=pe?ji(pe):window,ge=me.nodeName&&me.nodeName.toLowerCase(),ge==="select"||ge==="input"&&me.type==="file")var Ke=fS;else if(ai(me))if(dS)Ke=t3;else{Ke=jO;var Ct=ZO}else ge=me.nodeName,!ge||ge.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?pe&&ao(pe.elementType)&&(Ke=fS):Ke=e3;if(Ke&&(Ke=Ke(o,pe))){po(Ie,Ke,c,Ce);break e}Ct&&Ct(o,me,pe),o==="focusout"&&pe&&me.type==="number"&&pe.memoizedProps.value!=null&&Ii(me,"number",me.value)}switch(Ct=pe?ji(pe):window,o){case"focusin":(ai(Ct)||Ct.contentEditable==="true")&&(ml=Ct,B0=pe,vf=null);break;case"focusout":vf=B0=ml=null;break;case"mousedown":V0=!0;break;case"contextmenu":case"mouseup":case"dragend":V0=!1,TS(Ie,c,Ce);break;case"selectionchange":if(i3)break;case"keydown":case"keyup":TS(Ie,c,Ce)}var Ze;if(Ls)e:{switch(o){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Ot?Ee(o,c)&&(st="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(st="onCompositionStart");st&&(x&&c.locale!=="ko"&&(Ot||st!=="onCompositionStart"?st==="onCompositionEnd"&&Ot&&(Ze=hf()):(Ds=Ce,Xo="value"in Ds?Ds.value:Ds.textContent,Ot=!0)),Ct=qp(pe,st),0<Ct.length&&(st=new gf(st,o,null,c,Ce),Ie.push({event:st,listeners:Ct}),Ze?st.data=Ze:(Ze=Be(c),Ze!==null&&(st.data=Ze)))),(Ze=A?oi(o,c):Ut(o,c))&&(st=qp(pe,"onBeforeInput"),0<st.length&&(Ct=new gf("onBeforeInput","beforeinput",null,c,Ce),Ie.push({event:Ct,listeners:st}),Ct.data=Ze)),V3(Ie,o,pe,c,Ce)}GA(Ie,u)})}function Xf(o,u,c){return{instance:o,listener:u,currentTarget:c}}function qp(o,u){for(var c=u+"Capture",g=[];o!==null;){var E=o,S=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||S===null||(E=su(o,c),E!=null&&g.unshift(Xf(o,E,S)),E=su(o,u),E!=null&&g.push(Xf(o,E,S))),o.tag===3)return g;o=o.return}return[]}function Vl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function YA(o,u,c,g,E){for(var S=u._reactName,k=[];c!==null&&c!==g;){var Y=c,te=Y.alternate,pe=Y.stateNode;if(Y=Y.tag,te!==null&&te===g)break;Y!==5&&Y!==26&&Y!==27||pe===null||(te=pe,E?(pe=su(c,S),pe!=null&&k.unshift(Xf(c,pe,te))):E||(pe=su(c,S),pe!=null&&k.push(Xf(c,pe,te)))),c=c.return}k.length!==0&&o.push({event:u,listeners:k})}var q3=/\r\n?/g,G3=/\u0000|\uFFFD/g;function KA(o){return(typeof o=="string"?o:""+o).replace(q3,`
`).replace(G3,"")}function WA(o,u){return u=KA(u),KA(o)===u}function Gp(){}function dn(o,u,c,g,E,S){switch(c){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||wi(o,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&wi(o,""+g);break;case"className":Gt(o,"class",g);break;case"tabIndex":Gt(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Gt(o,c,g);break;case"style":Rs(o,g,S);break;case"data":if(u!=="object"){Gt(o,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||c!=="href")){o.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(c);break}g=uo(""+g),o.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(u!=="input"&&dn(o,u,"name",E.name,E,null),dn(o,u,"formEncType",E.formEncType,E,null),dn(o,u,"formMethod",E.formMethod,E,null),dn(o,u,"formTarget",E.formTarget,E,null)):(dn(o,u,"encType",E.encType,E,null),dn(o,u,"method",E.method,E,null),dn(o,u,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(c);break}g=uo(""+g),o.setAttribute(c,g);break;case"onClick":g!=null&&(o.onclick=Gp);break;case"onScroll":g!=null&&xt("scroll",o);break;case"onScrollEnd":g!=null&&xt("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=c}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}c=uo(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(c,""+g):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":g===!0?o.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(c,g):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(c,g):o.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(c):o.setAttribute(c,g);break;case"popover":xt("beforetoggle",o),xt("toggle",o),Jt(o,"popover",g);break;case"xlinkActuate":Zt(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Zt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Zt(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Zt(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Zt(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Zt(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Zt(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Zt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Zt(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Jt(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ko.get(c)||c,Jt(o,c,g))}}function u_(o,u,c,g,E,S){switch(c){case"style":Rs(o,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=c}}break;case"children":typeof g=="string"?wi(o,g):(typeof g=="number"||typeof g=="bigint")&&wi(o,""+g);break;case"onScroll":g!=null&&xt("scroll",o);break;case"onScrollEnd":g!=null&&xt("scrollend",o);break;case"onClick":g!=null&&(o.onclick=Gp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ke.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),u=c.slice(2,E?c.length-7:void 0),S=o[xn]||null,S=S!=null?S[c]:null,typeof S=="function"&&o.removeEventListener(u,S,E),typeof g=="function")){typeof S!="function"&&S!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(u,g,E);break e}c in o?o[c]=g:g===!0?o.setAttribute(c,""):Jt(o,c,g)}}}function Mi(o,u,c){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",o),xt("load",o);var g=!1,E=!1,S;for(S in c)if(c.hasOwnProperty(S)){var k=c[S];if(k!=null)switch(S){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:dn(o,u,S,k,c,null)}}E&&dn(o,u,"srcSet",c.srcSet,c,null),g&&dn(o,u,"src",c.src,c,null);return;case"input":xt("invalid",o);var Y=S=k=E=null,te=null,pe=null;for(g in c)if(c.hasOwnProperty(g)){var Ce=c[g];if(Ce!=null)switch(g){case"name":E=Ce;break;case"type":k=Ce;break;case"checked":te=Ce;break;case"defaultChecked":pe=Ce;break;case"value":S=Ce;break;case"defaultValue":Y=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,u));break;default:dn(o,u,g,Ce,c,null)}}bi(o,S,Y,te,pe,k,E,!1),Lt(o);return;case"select":xt("invalid",o),g=k=S=null;for(E in c)if(c.hasOwnProperty(E)&&(Y=c[E],Y!=null))switch(E){case"value":S=Y;break;case"defaultValue":k=Y;break;case"multiple":g=Y;default:dn(o,u,E,Y,c,null)}u=S,c=k,o.multiple=!!g,u!=null?nr(o,!!g,u,!1):c!=null&&nr(o,!!g,c,!0);return;case"textarea":xt("invalid",o),S=E=g=null;for(k in c)if(c.hasOwnProperty(k)&&(Y=c[k],Y!=null))switch(k){case"value":g=Y;break;case"defaultValue":E=Y;break;case"children":S=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(91));break;default:dn(o,u,k,Y,c,null)}hs(o,g,E,S),Lt(o);return;case"option":for(te in c)if(c.hasOwnProperty(te)&&(g=c[te],g!=null))switch(te){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:dn(o,u,te,g,c,null)}return;case"dialog":xt("beforetoggle",o),xt("toggle",o),xt("cancel",o),xt("close",o);break;case"iframe":case"object":xt("load",o);break;case"video":case"audio":for(g=0;g<Wf.length;g++)xt(Wf[g],o);break;case"image":xt("error",o),xt("load",o);break;case"details":xt("toggle",o);break;case"embed":case"source":case"link":xt("error",o),xt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in c)if(c.hasOwnProperty(pe)&&(g=c[pe],g!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:dn(o,u,pe,g,c,null)}return;default:if(ao(u)){for(Ce in c)c.hasOwnProperty(Ce)&&(g=c[Ce],g!==void 0&&u_(o,u,Ce,g,c,void 0));return}}for(Y in c)c.hasOwnProperty(Y)&&(g=c[Y],g!=null&&dn(o,u,Y,g,c,null))}function $3(o,u,c,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,S=null,k=null,Y=null,te=null,pe=null,Ce=null;for(ge in c){var Ie=c[ge];if(c.hasOwnProperty(ge)&&Ie!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":te=Ie;default:g.hasOwnProperty(ge)||dn(o,u,ge,null,g,Ie)}}for(var me in g){var ge=g[me];if(Ie=c[me],g.hasOwnProperty(me)&&(ge!=null||Ie!=null))switch(me){case"type":S=ge;break;case"name":E=ge;break;case"checked":pe=ge;break;case"defaultChecked":Ce=ge;break;case"value":k=ge;break;case"defaultValue":Y=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,u));break;default:ge!==Ie&&dn(o,u,me,ge,g,Ie)}}yn(o,k,Y,te,pe,Ce,S,E);return;case"select":ge=k=Y=me=null;for(S in c)if(te=c[S],c.hasOwnProperty(S)&&te!=null)switch(S){case"value":break;case"multiple":ge=te;default:g.hasOwnProperty(S)||dn(o,u,S,null,g,te)}for(E in g)if(S=g[E],te=c[E],g.hasOwnProperty(E)&&(S!=null||te!=null))switch(E){case"value":me=S;break;case"defaultValue":Y=S;break;case"multiple":k=S;default:S!==te&&dn(o,u,E,S,g,te)}u=Y,c=k,g=ge,me!=null?nr(o,!!c,me,!1):!!g!=!!c&&(u!=null?nr(o,!!c,u,!0):nr(o,!!c,c?[]:"",!1));return;case"textarea":ge=me=null;for(Y in c)if(E=c[Y],c.hasOwnProperty(Y)&&E!=null&&!g.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:dn(o,u,Y,null,g,E)}for(k in g)if(E=g[k],S=c[k],g.hasOwnProperty(k)&&(E!=null||S!=null))switch(k){case"value":me=E;break;case"defaultValue":ge=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==S&&dn(o,u,k,E,g,S)}Ft(o,me,ge);return;case"option":for(var ut in c)if(me=c[ut],c.hasOwnProperty(ut)&&me!=null&&!g.hasOwnProperty(ut))switch(ut){case"selected":o.selected=!1;break;default:dn(o,u,ut,null,g,me)}for(te in g)if(me=g[te],ge=c[te],g.hasOwnProperty(te)&&me!==ge&&(me!=null||ge!=null))switch(te){case"selected":o.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:dn(o,u,te,me,g,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var rt in c)me=c[rt],c.hasOwnProperty(rt)&&me!=null&&!g.hasOwnProperty(rt)&&dn(o,u,rt,null,g,me);for(pe in g)if(me=g[pe],ge=c[pe],g.hasOwnProperty(pe)&&me!==ge&&(me!=null||ge!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,u));break;default:dn(o,u,pe,me,g,ge)}return;default:if(ao(u)){for(var hn in c)me=c[hn],c.hasOwnProperty(hn)&&me!==void 0&&!g.hasOwnProperty(hn)&&u_(o,u,hn,void 0,g,me);for(Ce in g)me=g[Ce],ge=c[Ce],!g.hasOwnProperty(Ce)||me===ge||me===void 0&&ge===void 0||u_(o,u,Ce,me,g,ge);return}}for(var ce in c)me=c[ce],c.hasOwnProperty(ce)&&me!=null&&!g.hasOwnProperty(ce)&&dn(o,u,ce,null,g,me);for(Ie in g)me=g[Ie],ge=c[Ie],!g.hasOwnProperty(Ie)||me===ge||me==null&&ge==null||dn(o,u,Ie,me,g,ge)}var l_=null,c_=null;function $p(o){return o.nodeType===9?o:o.ownerDocument}function XA(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function QA(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function f_(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var d_=null;function Y3(){var o=window.event;return o&&o.type==="popstate"?o===d_?!1:(d_=o,!0):(d_=null,!1)}var JA=typeof setTimeout=="function"?setTimeout:void 0,K3=typeof clearTimeout=="function"?clearTimeout:void 0,ZA=typeof Promise=="function"?Promise:void 0,W3=typeof queueMicrotask=="function"?queueMicrotask:typeof ZA<"u"?function(o){return ZA.resolve(null).then(o).catch(X3)}:JA;function X3(o){setTimeout(function(){throw o})}function fa(o){return o==="head"}function jA(o,u){var c=u,g=0,E=0;do{var S=c.nextSibling;if(o.removeChild(c),S&&S.nodeType===8)if(c=S.data,c==="/$"){if(0<g&&8>g){c=g;var k=o.ownerDocument;if(c&1&&Qf(k.documentElement),c&2&&Qf(k.body),c&4)for(c=k.head,Qf(c),k=c.firstChild;k;){var Y=k.nextSibling,te=k.nodeName;k[Fr]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&k.rel.toLowerCase()==="stylesheet"||c.removeChild(k),k=Y}}if(E===0){o.removeChild(S),rd(u);return}E--}else c==="$"||c==="$?"||c==="$!"?E++:g=c.charCodeAt(0)-48;else g=0;c=S}while(c);rd(u)}function h_(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var c=u;switch(u=u.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":h_(c),Cr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function Q3(o,u,c,g){for(;o.nodeType===1;){var E=c;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Fr])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var S=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=ys(o.nextSibling),o===null)break}return null}function J3(o,u,c){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=ys(o.nextSibling),o===null))return null;return o}function p_(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function Z3(o,u){var c=o.ownerDocument;if(o.data!=="$?"||c.readyState==="complete")u();else{var g=function(){u(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function ys(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}var m_=null;function eb(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(u===0)return o;u--}else c==="/$"&&u++}o=o.previousSibling}return null}function tb(o,u,c){switch(u=$p(c),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Qf(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Cr(o)}var jr=new Map,nb=new Set;function Yp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var wo=j.d;j.d={f:j3,r:e6,D:t6,C:n6,L:i6,m:r6,X:o6,S:s6,M:a6};function j3(){var o=wo.f(),u=Up();return o||u}function e6(o){var u=hi(o);u!==null&&u.tag===5&&u.type==="form"?SC(u):wo.r(o)}var Fl=typeof document>"u"?null:document;function ib(o,u,c){var g=Fl;if(g&&typeof u=="string"&&u){var E=Rn(u);E='link[rel="'+o+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),nb.has(E)||(nb.add(E),o={rel:o,crossOrigin:c,href:u},g.querySelector(E)===null&&(u=g.createElement("link"),Mi(u,"link",o),re(u),g.head.appendChild(u)))}}function t6(o){wo.D(o),ib("dns-prefetch",o,null)}function n6(o,u){wo.C(o,u),ib("preconnect",o,u)}function i6(o,u,c){wo.L(o,u,c);var g=Fl;if(g&&o&&u){var E='link[rel="preload"][as="'+Rn(u)+'"]';u==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+Rn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+Rn(c.imageSizes)+'"]')):E+='[href="'+Rn(o)+'"]';var S=E;switch(u){case"style":S=Hl(o);break;case"script":S=zl(o)}jr.has(S)||(o=p({rel:"preload",href:u==="image"&&c&&c.imageSrcSet?void 0:o,as:u},c),jr.set(S,o),g.querySelector(E)!==null||u==="style"&&g.querySelector(Jf(S))||u==="script"&&g.querySelector(Zf(S))||(u=g.createElement("link"),Mi(u,"link",o),re(u),g.head.appendChild(u)))}}function r6(o,u){wo.m(o,u);var c=Fl;if(c&&o){var g=u&&typeof u.as=="string"?u.as:"script",E='link[rel="modulepreload"][as="'+Rn(g)+'"][href="'+Rn(o)+'"]',S=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=zl(o)}if(!jr.has(S)&&(o=p({rel:"modulepreload",href:o},u),jr.set(S,o),c.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Zf(S)))return}g=c.createElement("link"),Mi(g,"link",o),re(g),c.head.appendChild(g)}}}function s6(o,u,c){wo.S(o,u,c);var g=Fl;if(g&&o){var E=si(g).hoistableStyles,S=Hl(o);u=u||"default";var k=E.get(S);if(!k){var Y={loading:0,preload:null};if(k=g.querySelector(Jf(S)))Y.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":u},c),(c=jr.get(S))&&g_(o,c);var te=k=g.createElement("link");re(te),Mi(te,"link",o),te._p=new Promise(function(pe,Ce){te.onload=pe,te.onerror=Ce}),te.addEventListener("load",function(){Y.loading|=1}),te.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Kp(k,u,g)}k={type:"stylesheet",instance:k,count:1,state:Y},E.set(S,k)}}}function o6(o,u){wo.X(o,u);var c=Fl;if(c&&o){var g=si(c).hoistableScripts,E=zl(o),S=g.get(E);S||(S=c.querySelector(Zf(E)),S||(o=p({src:o,async:!0},u),(u=jr.get(E))&&y_(o,u),S=c.createElement("script"),re(S),Mi(S,"link",o),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(E,S))}}function a6(o,u){wo.M(o,u);var c=Fl;if(c&&o){var g=si(c).hoistableScripts,E=zl(o),S=g.get(E);S||(S=c.querySelector(Zf(E)),S||(o=p({src:o,async:!0,type:"module"},u),(u=jr.get(E))&&y_(o,u),S=c.createElement("script"),re(S),Mi(S,"link",o),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(E,S))}}function rb(o,u,c,g){var E=(E=Re.current)?Yp(E):null;if(!E)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(u=Hl(c.href),c=si(E).hoistableStyles,g=c.get(u),g||(g={type:"style",instance:null,count:0,state:null},c.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Hl(c.href);var S=si(E).hoistableStyles,k=S.get(o);if(k||(E=E.ownerDocument||E,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,k),(S=E.querySelector(Jf(o)))&&!S._p&&(k.instance=S,k.state.loading=5),jr.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},jr.set(o,c),S||u6(E,o,c,k.state))),u&&g===null)throw Error(i(528,""));return k}if(u&&g!==null)throw Error(i(529,""));return null;case"script":return u=c.async,c=c.src,typeof c=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=zl(c),c=si(E).hoistableScripts,g=c.get(u),g||(g={type:"script",instance:null,count:0,state:null},c.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Hl(o){return'href="'+Rn(o)+'"'}function Jf(o){return'link[rel="stylesheet"]['+o+"]"}function sb(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function u6(o,u,c,g){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=o.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),Mi(u,"link",c),re(u),o.head.appendChild(u))}function zl(o){return'[src="'+Rn(o)+'"]'}function Zf(o){return"script[async]"+o}function ob(o,u,c){if(u.count++,u.instance===null)switch(u.type){case"style":var g=o.querySelector('style[data-href~="'+Rn(c.href)+'"]');if(g)return u.instance=g,re(g),g;var E=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),re(g),Mi(g,"style",E),Kp(g,c.precedence,o),u.instance=g;case"stylesheet":E=Hl(c.href);var S=o.querySelector(Jf(E));if(S)return u.state.loading|=4,u.instance=S,re(S),S;g=sb(c),(E=jr.get(E))&&g_(g,E),S=(o.ownerDocument||o).createElement("link"),re(S);var k=S;return k._p=new Promise(function(Y,te){k.onload=Y,k.onerror=te}),Mi(S,"link",g),u.state.loading|=4,Kp(S,c.precedence,o),u.instance=S;case"script":return S=zl(c.src),(E=o.querySelector(Zf(S)))?(u.instance=E,re(E),E):(g=c,(E=jr.get(S))&&(g=p({},c),y_(g,E)),o=o.ownerDocument||o,E=o.createElement("script"),re(E),Mi(E,"link",g),o.head.appendChild(E),u.instance=E);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Kp(g,c.precedence,o));return u.instance}function Kp(o,u,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,S=E,k=0;k<g.length;k++){var Y=g[k];if(Y.dataset.precedence===u)S=Y;else if(S!==E)break}S?S.parentNode.insertBefore(o,S.nextSibling):(u=c.nodeType===9?c.head:c,u.insertBefore(o,u.firstChild))}function g_(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function y_(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Wp=null;function ab(o,u,c){if(Wp===null){var g=new Map,E=Wp=new Map;E.set(c,g)}else E=Wp,g=E.get(c),g||(g=new Map,E.set(c,g));if(g.has(o))return g;for(g.set(o,null),c=c.getElementsByTagName(o),E=0;E<c.length;E++){var S=c[E];if(!(S[Fr]||S[Xt]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var k=S.getAttribute(u)||"";k=o+k;var Y=g.get(k);Y?Y.push(S):g.set(k,[S])}}return g}function ub(o,u,c){o=o.ownerDocument||o,o.head.insertBefore(c,u==="title"?o.querySelector("head > title"):null)}function l6(o,u,c){if(c===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function lb(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var jf=null;function c6(){}function f6(o,u,c){if(jf===null)throw Error(i(475));var g=jf;if(u.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var E=Hl(c.href),S=o.querySelector(Jf(E));if(S){o=S._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(g.count++,g=Xp.bind(g),o.then(g,g)),u.state.loading|=4,u.instance=S,re(S);return}S=o.ownerDocument||o,c=sb(c),(E=jr.get(E))&&g_(c,E),S=S.createElement("link"),re(S);var k=S;k._p=new Promise(function(Y,te){k.onload=Y,k.onerror=te}),Mi(S,"link",c),u.instance=S}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(g.count++,u=Xp.bind(g),o.addEventListener("load",u),o.addEventListener("error",u))}}function d6(){if(jf===null)throw Error(i(475));var o=jf;return o.stylesheets&&o.count===0&&__(o,o.stylesheets),0<o.count?function(u){var c=setTimeout(function(){if(o.stylesheets&&__(o,o.stylesheets),o.unsuspend){var g=o.unsuspend;o.unsuspend=null,g()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(c)}}:null}function Xp(){if(this.count--,this.count===0){if(this.stylesheets)__(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Qp=null;function __(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Qp=new Map,u.forEach(h6,o),Qp=null,Xp.call(o))}function h6(o,u){if(!(u.state.loading&4)){var c=Qp.get(o);if(c)var g=c.get(null);else{c=new Map,Qp.set(o,c);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<E.length;S++){var k=E[S];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),g=k)}g&&c.set(null,g)}E=u.instance,k=E.getAttribute("data-precedence"),S=c.get(k)||g,S===g&&c.set(null,E),c.set(k,E),this.count++,g=Xp.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),S?S.parentNode.insertBefore(E,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),u.state.loading|=4}}var ed={$$typeof:G,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function p6(o,u,c,g,E,S,k,Y){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.hiddenUpdates=ri(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=S,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function cb(o,u,c,g,E,S,k,Y,te,pe,Ce,Ie){return o=new p6(o,u,c,k,Y,te,pe,Ie),u=1,S===!0&&(u|=24),S=br(3,null,null,u),o.current=S,S.stateNode=o,u=j0(),u.refCount++,o.pooledCache=u,u.refCount++,S.memoizedState={element:g,isDehydrated:c,cache:u},iy(S),o}function fb(o){return o?(o=El,o):El}function db(o,u,c,g,E,S){E=fb(E),g.context===null?g.context=E:g.pendingContext=E,g=Zo(u),g.payload={element:c},S=S===void 0?null:S,S!==null&&(g.callback=S),c=jo(o,g,u),c!==null&&(Nr(c,o,u),Nf(c,o,u))}function hb(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<u?c:u}}function E_(o,u){hb(o,u),(o=o.alternate)&&hb(o,u)}function pb(o){if(o.tag===13){var u=_l(o,67108864);u!==null&&Nr(u,o,67108864),E_(o,67108864)}}var Jp=!0;function m6(o,u,c,g){var E=$.T;$.T=null;var S=j.p;try{j.p=2,T_(o,u,c,g)}finally{j.p=S,$.T=E}}function g6(o,u,c,g){var E=$.T;$.T=null;var S=j.p;try{j.p=8,T_(o,u,c,g)}finally{j.p=S,$.T=E}}function T_(o,u,c,g){if(Jp){var E=v_(g);if(E===null)a_(o,u,g,Zp,c),gb(o,g);else if(_6(E,o,u,c,g))g.stopPropagation();else if(gb(o,g),u&4&&-1<y6.indexOf(o)){for(;E!==null;){var S=hi(E);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var k=Pt(S.pendingLanes);if(k!==0){var Y=S;for(Y.pendingLanes|=2,Y.entangledLanes|=2;k;){var te=1<<31-Qe(k);Y.entanglements[1]|=te,k&=~te}Hs(S),(on&6)===0&&(Lp=tt()+500,Kf(0))}}break;case 13:Y=_l(S,2),Y!==null&&Nr(Y,S,2),Up(),E_(S,2)}if(S=v_(g),S===null&&a_(o,u,g,Zp,c),S===E)break;E=S}E!==null&&g.stopPropagation()}else a_(o,u,g,null,c)}}function v_(o){return o=xi(o),S_(o)}var Zp=null;function S_(o){if(Zp=null,o=Zi(o),o!==null){var u=s(o);if(u===null)o=null;else{var c=u.tag;if(c===13){if(o=a(u),o!==null)return o;o=null}else if(c===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Zp=o,null}function mb(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case gn:return 2;case Fn:return 8;case Hn:case Wn:return 32;case zn:return 268435456;default:return 32}default:return 32}}var C_=!1,da=null,ha=null,pa=null,td=new Map,nd=new Map,ma=[],y6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gb(o,u){switch(o){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":td.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(u.pointerId)}}function id(o,u,c,g,E,S){return o===null||o.nativeEvent!==S?(o={blockedOn:u,domEventName:c,eventSystemFlags:g,nativeEvent:S,targetContainers:[E]},u!==null&&(u=hi(u),u!==null&&pb(u)),o):(o.eventSystemFlags|=g,u=o.targetContainers,E!==null&&u.indexOf(E)===-1&&u.push(E),o)}function _6(o,u,c,g,E){switch(u){case"focusin":return da=id(da,o,u,c,g,E),!0;case"dragenter":return ha=id(ha,o,u,c,g,E),!0;case"mouseover":return pa=id(pa,o,u,c,g,E),!0;case"pointerover":var S=E.pointerId;return td.set(S,id(td.get(S)||null,o,u,c,g,E)),!0;case"gotpointercapture":return S=E.pointerId,nd.set(S,id(nd.get(S)||null,o,u,c,g,E)),!0}return!1}function yb(o){var u=Zi(o.target);if(u!==null){var c=s(u);if(c!==null){if(u=c.tag,u===13){if(u=a(c),u!==null){o.blockedOn=u,Sr(o.priority,function(){if(c.tag===13){var g=Rr();g=vr(g);var E=_l(c,g);E!==null&&Nr(E,c,g),E_(c,g)}});return}}else if(u===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function jp(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var c=v_(o.nativeEvent);if(c===null){c=o.nativeEvent;var g=new c.constructor(c.type,c);cr=g,c.target.dispatchEvent(g),cr=null}else return u=hi(c),u!==null&&pb(u),o.blockedOn=c,!1;u.shift()}return!0}function _b(o,u,c){jp(o)&&c.delete(u)}function E6(){C_=!1,da!==null&&jp(da)&&(da=null),ha!==null&&jp(ha)&&(ha=null),pa!==null&&jp(pa)&&(pa=null),td.forEach(_b),nd.forEach(_b)}function em(o,u){o.blockedOn===u&&(o.blockedOn=null,C_||(C_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,E6)))}var tm=null;function Eb(o){tm!==o&&(tm=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tm===o&&(tm=null);for(var u=0;u<o.length;u+=3){var c=o[u],g=o[u+1],E=o[u+2];if(typeof g!="function"){if(S_(g||c)===null)continue;break}var S=hi(c);S!==null&&(o.splice(u,3),u-=3,Sy(S,{pending:!0,data:E,method:c.method,action:g},g,E))}}))}function rd(o){function u(te){return em(te,o)}da!==null&&em(da,o),ha!==null&&em(ha,o),pa!==null&&em(pa,o),td.forEach(u),nd.forEach(u);for(var c=0;c<ma.length;c++){var g=ma[c];g.blockedOn===o&&(g.blockedOn=null)}for(;0<ma.length&&(c=ma[0],c.blockedOn===null);)yb(c),c.blockedOn===null&&ma.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var E=c[g],S=c[g+1],k=E[xn]||null;if(typeof S=="function")k||Eb(c);else if(k){var Y=null;if(S&&S.hasAttribute("formAction")){if(E=S,k=S[xn]||null)Y=k.formAction;else if(S_(E)!==null)continue}else Y=k.action;typeof Y=="function"?c[g+1]=Y:(c.splice(g,3),g-=3),Eb(c)}}}function A_(o){this._internalRoot=o}nm.prototype.render=A_.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var c=u.current,g=Rr();db(c,g,o,u,null,null)},nm.prototype.unmount=A_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;db(o.current,2,null,o,null,null),Up(),u[Ln]=null}};function nm(o){this._internalRoot=o}nm.prototype.unstable_scheduleHydration=function(o){if(o){var u=Qi();o={blockedOn:null,target:o,priority:u};for(var c=0;c<ma.length&&u!==0&&u<ma[c].priority;c++);ma.splice(c,0,o),c===0&&yb(o)}};var Tb=e.version;if(Tb!=="19.1.0")throw Error(i(527,Tb,"19.1.0"));j.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(u),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var T6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&&im.supportsFiber)try{ue=im.inject(T6),Se=im}catch{}}return od.createRoot=function(o,u){if(!r(o))throw Error(i(299));var c=!1,g="",E=OC,S=UC,k=BC,Y=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(Y=u.unstable_transitionCallbacks)),u=cb(o,1,!1,null,null,c,g,E,S,k,Y,null),o[Ln]=u.current,o_(o),new A_(u)},od.hydrateRoot=function(o,u,c){if(!r(o))throw Error(i(299));var g=!1,E="",S=OC,k=UC,Y=BC,te=null,pe=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(Y=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(te=c.unstable_transitionCallbacks),c.formState!==void 0&&(pe=c.formState)),u=cb(o,1,!0,u,c??null,g,E,S,k,Y,te,pe),u.context=fb(null),c=u.current,g=Rr(),g=vr(g),E=Zo(g),E.callback=null,jo(c,E,g),c=g,u.current.lanes=c,Xi(u,c),Hs(u),o[Ln]=u.current,o_(o),new nm(u)},od.version="19.1.0",od}var Nb;function R6(){if(Nb)return w_.exports;Nb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),w_.exports=x6(),w_.exports}var N6=R6();function ur(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=ur(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var D_={exports:{}},M_={},k_={exports:{}},P_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function D6(){if(Db)return P_;Db=1;var t=Eh();function e(y,T){return y===T&&(y!==0||1/y===1/T)||y!==y&&T!==T}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function l(y,T){var v=T(),b=i({inst:{value:v,getSnapshot:T}}),w=b[0].inst,R=b[1];return s(function(){w.value=v,w.getSnapshot=T,f(w)&&R({inst:w})},[y,v,T]),r(function(){return f(w)&&R({inst:w}),y(function(){f(w)&&R({inst:w})})},[y]),a(v),v}function f(y){var T=y.getSnapshot;y=y.value;try{var v=T();return!n(y,v)}catch{return!0}}function d(y,T){return T()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return P_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,P_}var Mb;function M6(){return Mb||(Mb=1,k_.exports=D6()),k_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function k6(){if(kb)return M_;kb=1;var t=Eh(),e=M6();function n(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,l=t.useMemo,f=t.useDebugValue;return M_.useSyncExternalStoreWithSelector=function(d,p,y,T,v){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=l(function(){function N(K){if(!V){if(V=!0,G=K,K=T(K),v!==void 0&&w.hasValue){var M=w.value;if(v(M,K))return F=M}return F=K}if(M=F,i(G,K))return M;var P=T(K);return v!==void 0&&v(M,P)?(G=K,M):(G=K,F=P)}var V=!1,G,F,J=y===void 0?null:y;return[function(){return N(p())},J===null?void 0:function(){return N(J())}]},[p,y,T,v]);var R=r(d,b[0],b[1]);return a(function(){w.hasValue=!0,w.value=R},[R]),f(R),R},M_}var Pb;function P6(){return Pb||(Pb=1,D_.exports=k6()),D_.exports}var L6=P6();const O6=Zu(L6),U6={},Lb=t=>{let e;const n=new Set,i=(p,y)=>{const T=typeof p=="function"?p(e):p;if(!Object.is(T,e)){const v=e;e=y??(typeof T!="object"||T===null)?T:Object.assign({},e,T),n.forEach(b=>b(e,v))}},r=()=>e,f={setState:i,getState:r,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(U6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(i,r,f);return f},B6=t=>t?Lb(t):Lb,{useDebugValue:V6}=Te,{useSyncExternalStoreWithSelector:F6}=O6,H6=t=>t;function _2(t,e=H6,n){const i=F6(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return V6(i),i}const Ob=(t,e)=>{const n=B6(t),i=(r,s=e)=>_2(n,r,s);return Object.assign(i,n),i},z6=(t,e)=>t?Ob(t,e):Ob;function $i(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,r]of t)if(!Object.is(r,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var q6={value:()=>{}};function zg(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Nm(n)}function Nm(t){this._=t}function G6(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Nm.prototype=zg.prototype={constructor:Nm,on:function(t,e){var n=this._,i=G6(t+"",n),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(t=i[s]).type)&&(r=$6(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(r=(t=i[s]).type)n[r]=Ub(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ub(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nm(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function $6(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Ub(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=q6,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var UE="http://www.w3.org/1999/xhtml";const Bb={svg:"http://www.w3.org/2000/svg",xhtml:UE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qg(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Bb.hasOwnProperty(e)?{space:Bb[e],local:t}:t}function Y6(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===UE&&e.documentElement.namespaceURI===UE?e.createElement(t):e.createElementNS(n,t)}}function K6(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function E2(t){var e=qg(t);return(e.local?K6:Y6)(e)}function W6(){}function pv(t){return t==null?W6:function(){return this.querySelector(t)}}function X6(t){typeof t!="function"&&(t=pv(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=new Array(a),f,d,p=0;p<a;++p)(f=s[p])&&(d=t.call(f,f.__data__,p,s))&&("__data__"in f&&(d.__data__=f.__data__),l[p]=d);return new Br(i,this._parents)}function Q6(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function J6(){return[]}function T2(t){return t==null?J6:function(){return this.querySelectorAll(t)}}function Z6(t){return function(){return Q6(t.apply(this,arguments))}}function j6(t){typeof t=="function"?t=Z6(t):t=T2(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a=e[s],l=a.length,f,d=0;d<l;++d)(f=a[d])&&(i.push(t.call(f,f.__data__,d,a)),r.push(f));return new Br(i,r)}function v2(t){return function(){return this.matches(t)}}function S2(t){return function(e){return e.matches(t)}}var e4=Array.prototype.find;function t4(t){return function(){return e4.call(this.children,t)}}function n4(){return this.firstElementChild}function i4(t){return this.select(t==null?n4:t4(typeof t=="function"?t:S2(t)))}var r4=Array.prototype.filter;function s4(){return Array.from(this.children)}function o4(t){return function(){return r4.call(this.children,t)}}function a4(t){return this.selectAll(t==null?s4:o4(typeof t=="function"?t:S2(t)))}function u4(t){typeof t!="function"&&(t=v2(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=[],f,d=0;d<a;++d)(f=s[d])&&t.call(f,f.__data__,d,s)&&l.push(f);return new Br(i,this._parents)}function C2(t){return new Array(t.length)}function l4(){return new Br(this._enter||this._groups.map(C2),this._parents)}function Zm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Zm.prototype={constructor:Zm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function c4(t){return function(){return t}}function f4(t,e,n,i,r,s){for(var a=0,l,f=e.length,d=s.length;a<d;++a)(l=e[a])?(l.__data__=s[a],i[a]=l):n[a]=new Zm(t,s[a]);for(;a<f;++a)(l=e[a])&&(r[a]=l)}function d4(t,e,n,i,r,s,a){var l,f,d=new Map,p=e.length,y=s.length,T=new Array(p),v;for(l=0;l<p;++l)(f=e[l])&&(T[l]=v=a.call(f,f.__data__,l,e)+"",d.has(v)?r[l]=f:d.set(v,f));for(l=0;l<y;++l)v=a.call(t,s[l],l,s)+"",(f=d.get(v))?(i[l]=f,f.__data__=s[l],d.delete(v)):n[l]=new Zm(t,s[l]);for(l=0;l<p;++l)(f=e[l])&&d.get(T[l])===f&&(r[l]=f)}function h4(t){return t.__data__}function p4(t,e){if(!arguments.length)return Array.from(this,h4);var n=e?d4:f4,i=this._parents,r=this._groups;typeof t!="function"&&(t=c4(t));for(var s=r.length,a=new Array(s),l=new Array(s),f=new Array(s),d=0;d<s;++d){var p=i[d],y=r[d],T=y.length,v=m4(t.call(p,p&&p.__data__,d,i)),b=v.length,w=l[d]=new Array(b),R=a[d]=new Array(b),N=f[d]=new Array(T);n(p,y,w,R,N,v,e);for(var V=0,G=0,F,J;V<b;++V)if(F=w[V]){for(V>=G&&(G=V+1);!(J=R[G])&&++G<b;);F._next=J||null}}return a=new Br(a,i),a._enter=l,a._exit=f,a}function m4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function g4(){return new Br(this._exit||this._groups.map(C2),this._parents)}function y4(t,e,n){var i=this.enter(),r=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function _4(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),l=new Array(r),f=0;f<a;++f)for(var d=n[f],p=i[f],y=d.length,T=l[f]=new Array(y),v,b=0;b<y;++b)(v=d[b]||p[b])&&(T[b]=v);for(;f<r;++f)l[f]=n[f];return new Br(l,this._parents)}function E4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function T4(t){t||(t=v4);function e(y,T){return y&&T?t(y.__data__,T.__data__):!y-!T}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a=n[s],l=a.length,f=r[s]=new Array(l),d,p=0;p<l;++p)(d=a[p])&&(f[p]=d);f.sort(e)}return new Br(r,this._parents).order()}function v4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function S4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function C4(){return Array.from(this)}function A4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function b4(){let t=0;for(const e of this)++t;return t}function I4(){return!this.node()}function w4(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],s=0,a=r.length,l;s<a;++s)(l=r[s])&&t.call(l,l.__data__,s,r);return this}function x4(t){return function(){this.removeAttribute(t)}}function R4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function N4(t,e){return function(){this.setAttribute(t,e)}}function D4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function M4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function k4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function P4(t,e){var n=qg(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?R4:x4:typeof e=="function"?n.local?k4:M4:n.local?D4:N4)(n,e))}function A2(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function L4(t){return function(){this.style.removeProperty(t)}}function O4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function U4(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function B4(t,e,n){return arguments.length>1?this.each((e==null?L4:typeof e=="function"?U4:O4)(t,e,n??"")):Ic(this.node(),t)}function Ic(t,e){return t.style.getPropertyValue(e)||A2(t).getComputedStyle(t,null).getPropertyValue(e)}function V4(t){return function(){delete this[t]}}function F4(t,e){return function(){this[t]=e}}function H4(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function z4(t,e){return arguments.length>1?this.each((e==null?V4:typeof e=="function"?H4:F4)(t,e)):this.node()[t]}function b2(t){return t.trim().split(/^|\s+/)}function mv(t){return t.classList||new I2(t)}function I2(t){this._node=t,this._names=b2(t.getAttribute("class")||"")}I2.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function w2(t,e){for(var n=mv(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function x2(t,e){for(var n=mv(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function q4(t){return function(){w2(this,t)}}function G4(t){return function(){x2(this,t)}}function $4(t,e){return function(){(e.apply(this,arguments)?w2:x2)(this,t)}}function Y4(t,e){var n=b2(t+"");if(arguments.length<2){for(var i=mv(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?$4:e?q4:G4)(n,e))}function K4(){this.textContent=""}function W4(t){return function(){this.textContent=t}}function X4(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Q4(t){return arguments.length?this.each(t==null?K4:(typeof t=="function"?X4:W4)(t)):this.node().textContent}function J4(){this.innerHTML=""}function Z4(t){return function(){this.innerHTML=t}}function j4(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function eU(t){return arguments.length?this.each(t==null?J4:(typeof t=="function"?j4:Z4)(t)):this.node().innerHTML}function tU(){this.nextSibling&&this.parentNode.appendChild(this)}function nU(){return this.each(tU)}function iU(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rU(){return this.each(iU)}function sU(t){var e=typeof t=="function"?t:E2(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function oU(){return null}function aU(t,e){var n=typeof t=="function"?t:E2(t),i=e==null?oU:typeof e=="function"?e:pv(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function uU(){var t=this.parentNode;t&&t.removeChild(this)}function lU(){return this.each(uU)}function cU(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function fU(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dU(t){return this.select(t?fU:cU)}function hU(t){return arguments.length?this.property("__data__",t):this.node().__data__}function pU(t){return function(e){t.call(this,e,this.__data__)}}function mU(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function gU(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function yU(t,e,n){return function(){var i=this.__on,r,s=pU(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},i?i.push(r):this.__on=[r]}}function _U(t,e,n){var i=mU(t+""),r,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,d=l.length,p;f<d;++f)for(r=0,p=l[f];r<s;++r)if((a=i[r]).type===p.type&&a.name===p.name)return p.value}return}for(l=e?yU:gU,r=0;r<s;++r)this.each(l(i[r],e,n));return this}function R2(t,e,n){var i=A2(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function EU(t,e){return function(){return R2(this,t,e)}}function TU(t,e){return function(){return R2(this,t,e.apply(this,arguments))}}function vU(t,e){return this.each((typeof e=="function"?TU:EU)(t,e))}function*SU(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var N2=[null];function Br(t,e){this._groups=t,this._parents=e}function Th(){return new Br([[document.documentElement]],N2)}function CU(){return this}Br.prototype=Th.prototype={constructor:Br,select:X6,selectAll:j6,selectChild:i4,selectChildren:a4,filter:u4,data:p4,enter:l4,exit:g4,join:y4,merge:_4,selection:CU,order:E4,sort:T4,call:S4,nodes:C4,node:A4,size:b4,empty:I4,each:w4,attr:P4,style:B4,property:z4,classed:Y4,text:Q4,html:eU,raise:nU,lower:rU,append:sU,insert:aU,remove:lU,clone:dU,datum:hU,on:_U,dispatch:vU,[Symbol.iterator]:SU};function Es(t){return typeof t=="string"?new Br([[document.querySelector(t)]],[document.documentElement]):new Br([[t]],N2)}function AU(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qs(t,e){if(t=AU(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const bU={passive:!1},Qd={capture:!0,passive:!1};function L_(t){t.stopImmediatePropagation()}function dc(t){t.preventDefault(),t.stopImmediatePropagation()}function D2(t){var e=t.document.documentElement,n=Es(t).on("dragstart.drag",dc,Qd);"onselectstart"in e?n.on("selectstart.drag",dc,Qd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function M2(t,e){var n=t.document.documentElement,i=Es(t).on("dragstart.drag",null);e&&(i.on("click.drag",dc,Qd),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const rm=t=>()=>t;function BE(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:s,x:a,y:l,dx:f,dy:d,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:p}})}BE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function IU(t){return!t.ctrlKey&&!t.button}function wU(){return this.parentNode}function xU(t,e){return e??{x:t.x,y:t.y}}function RU(){return navigator.maxTouchPoints||"ontouchstart"in this}function NU(){var t=IU,e=wU,n=xU,i=RU,r={},s=zg("start","drag","end"),a=0,l,f,d,p,y=0;function T(F){F.on("mousedown.drag",v).filter(i).on("touchstart.drag",R).on("touchmove.drag",N,bU).on("touchend.drag touchcancel.drag",V).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(F,J){if(!(p||!t.call(this,F,J))){var K=G(this,e.call(this,F,J),F,J,"mouse");K&&(Es(F.view).on("mousemove.drag",b,Qd).on("mouseup.drag",w,Qd),D2(F.view),L_(F),d=!1,l=F.clientX,f=F.clientY,K("start",F))}}function b(F){if(dc(F),!d){var J=F.clientX-l,K=F.clientY-f;d=J*J+K*K>y}r.mouse("drag",F)}function w(F){Es(F.view).on("mousemove.drag mouseup.drag",null),M2(F.view,d),dc(F),r.mouse("end",F)}function R(F,J){if(t.call(this,F,J)){var K=F.changedTouches,M=e.call(this,F,J),P=K.length,L,O;for(L=0;L<P;++L)(O=G(this,M,F,J,K[L].identifier,K[L]))&&(L_(F),O("start",F,K[L]))}}function N(F){var J=F.changedTouches,K=J.length,M,P;for(M=0;M<K;++M)(P=r[J[M].identifier])&&(dc(F),P("drag",F,J[M]))}function V(F){var J=F.changedTouches,K=J.length,M,P;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),M=0;M<K;++M)(P=r[J[M].identifier])&&(L_(F),P("end",F,J[M]))}function G(F,J,K,M,P,L){var O=s.copy(),B=qs(L||K,J),z,D,U;if((U=n.call(F,new BE("beforestart",{sourceEvent:K,target:T,identifier:P,active:a,x:B[0],y:B[1],dx:0,dy:0,dispatch:O}),M))!=null)return z=U.x-B[0]||0,D=U.y-B[1]||0,function Q($,j,se){var oe=B,I;switch($){case"start":r[P]=Q,I=a++;break;case"end":delete r[P],--a;case"drag":B=qs(se||j,J),I=a;break}O.call($,F,new BE($,{sourceEvent:j,subject:U,target:T,identifier:P,active:I,x:B[0]+z,y:B[1]+D,dx:B[0]-oe[0],dy:B[1]-oe[1],dispatch:O}),M)}}return T.filter=function(F){return arguments.length?(t=typeof F=="function"?F:rm(!!F),T):t},T.container=function(F){return arguments.length?(e=typeof F=="function"?F:rm(F),T):e},T.subject=function(F){return arguments.length?(n=typeof F=="function"?F:rm(F),T):n},T.touchable=function(F){return arguments.length?(i=typeof F=="function"?F:rm(!!F),T):i},T.on=function(){var F=s.on.apply(s,arguments);return F===s?T:F},T.clickDistance=function(F){return arguments.length?(y=(F=+F)*F,T):Math.sqrt(y)},T}function gv(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function k2(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function vh(){}var Jd=.7,jm=1/Jd,hc="\\s*([+-]?\\d+)\\s*",Zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DU=/^#([0-9a-f]{3,8})$/,MU=new RegExp(`^rgb\\(${hc},${hc},${hc}\\)$`),kU=new RegExp(`^rgb\\(${Xs},${Xs},${Xs}\\)$`),PU=new RegExp(`^rgba\\(${hc},${hc},${hc},${Zd}\\)$`),LU=new RegExp(`^rgba\\(${Xs},${Xs},${Xs},${Zd}\\)$`),OU=new RegExp(`^hsl\\(${Zd},${Xs},${Xs}\\)$`),UU=new RegExp(`^hsla\\(${Zd},${Xs},${Xs},${Zd}\\)$`),Vb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gv(vh,jd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fb,formatHex:Fb,formatHex8:BU,formatHsl:VU,formatRgb:Hb,toString:Hb});function Fb(){return this.rgb().formatHex()}function BU(){return this.rgb().formatHex8()}function VU(){return P2(this).formatHsl()}function Hb(){return this.rgb().formatRgb()}function jd(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=DU.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?zb(e):n===3?new _r(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?sm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?sm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=MU.exec(t))?new _r(e[1],e[2],e[3],1):(e=kU.exec(t))?new _r(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=PU.exec(t))?sm(e[1],e[2],e[3],e[4]):(e=LU.exec(t))?sm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=OU.exec(t))?$b(e[1],e[2]/100,e[3]/100,1):(e=UU.exec(t))?$b(e[1],e[2]/100,e[3]/100,e[4]):Vb.hasOwnProperty(t)?zb(Vb[t]):t==="transparent"?new _r(NaN,NaN,NaN,0):null}function zb(t){return new _r(t>>16&255,t>>8&255,t&255,1)}function sm(t,e,n,i){return i<=0&&(t=e=n=NaN),new _r(t,e,n,i)}function FU(t){return t instanceof vh||(t=jd(t)),t?(t=t.rgb(),new _r(t.r,t.g,t.b,t.opacity)):new _r}function VE(t,e,n,i){return arguments.length===1?FU(t):new _r(t,e,n,i??1)}function _r(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}gv(_r,VE,k2(vh,{brighter(t){return t=t==null?jm:Math.pow(jm,t),new _r(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new _r(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _r(Uu(this.r),Uu(this.g),Uu(this.b),eg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qb,formatHex:qb,formatHex8:HU,formatRgb:Gb,toString:Gb}));function qb(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}`}function HU(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}${ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gb(){const t=eg(this.opacity);return`${t===1?"rgb(":"rgba("}${Uu(this.r)}, ${Uu(this.g)}, ${Uu(this.b)}${t===1?")":`, ${t})`}`}function eg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Uu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ku(t){return t=Uu(t),(t<16?"0":"")+t.toString(16)}function $b(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ts(t,e,n,i)}function P2(t){if(t instanceof Ts)return new Ts(t.h,t.s,t.l,t.opacity);if(t instanceof vh||(t=jd(t)),!t)return new Ts;if(t instanceof Ts)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,l=s-r,f=(s+r)/2;return l?(e===s?a=(n-i)/l+(n<i)*6:n===s?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?s+r:2-s-r,a*=60):l=f>0&&f<1?0:a,new Ts(a,l,f,t.opacity)}function zU(t,e,n,i){return arguments.length===1?P2(t):new Ts(t,e,n,i??1)}function Ts(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}gv(Ts,zU,k2(vh,{brighter(t){return t=t==null?jm:Math.pow(jm,t),new Ts(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jd:Math.pow(Jd,t),new Ts(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new _r(O_(t>=240?t-240:t+120,r,i),O_(t,r,i),O_(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ts(Yb(this.h),om(this.s),om(this.l),eg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=eg(this.opacity);return`${t===1?"hsl(":"hsla("}${Yb(this.h)}, ${om(this.s)*100}%, ${om(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Yb(t){return t=(t||0)%360,t<0?t+360:t}function om(t){return Math.max(0,Math.min(1,t||0))}function O_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const L2=t=>()=>t;function qU(t,e){return function(n){return t+n*e}}function GU(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function $U(t){return(t=+t)==1?O2:function(e,n){return n-e?GU(e,n,t):L2(isNaN(e)?n:e)}}function O2(t,e){var n=e-t;return n?qU(t,n):L2(isNaN(t)?e:t)}const Kb=function t(e){var n=$U(e);function i(r,s){var a=n((r=VE(r)).r,(s=VE(s)).r),l=n(r.g,s.g),f=n(r.b,s.b),d=O2(r.opacity,s.opacity);return function(p){return r.r=a(p),r.g=l(p),r.b=f(p),r.opacity=d(p),r+""}}return i.gamma=t,i}(1);function Sa(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var FE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,U_=new RegExp(FE.source,"g");function YU(t){return function(){return t}}function KU(t){return function(e){return t(e)+""}}function WU(t,e){var n=FE.lastIndex=U_.lastIndex=0,i,r,s,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=FE.exec(t))&&(r=U_.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:Sa(i,r)})),n=U_.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?f[0]?KU(f[0].x):YU(e):(e=f.length,function(d){for(var p=0,y;p<e;++p)l[(y=f[p]).i]=y.x(d);return l.join("")})}var Wb=180/Math.PI,HE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U2(t,e,n,i,r,s){var a,l,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),t*i<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*Wb,skewX:Math.atan(f)*Wb,scaleX:a,scaleY:l}}var am;function XU(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?HE:U2(e.a,e.b,e.c,e.d,e.e,e.f)}function QU(t){return t==null||(am||(am=document.createElementNS("http://www.w3.org/2000/svg","g")),am.setAttribute("transform",t),!(t=am.transform.baseVal.consolidate()))?HE:(t=t.matrix,U2(t.a,t.b,t.c,t.d,t.e,t.f))}function B2(t,e,n,i){function r(d){return d.length?d.pop()+" ":""}function s(d,p,y,T,v,b){if(d!==y||p!==T){var w=v.push("translate(",null,e,null,n);b.push({i:w-4,x:Sa(d,y)},{i:w-2,x:Sa(p,T)})}else(y||T)&&v.push("translate("+y+e+T+n)}function a(d,p,y,T){d!==p?(d-p>180?p+=360:p-d>180&&(d+=360),T.push({i:y.push(r(y)+"rotate(",null,i)-2,x:Sa(d,p)})):p&&y.push(r(y)+"rotate("+p+i)}function l(d,p,y,T){d!==p?T.push({i:y.push(r(y)+"skewX(",null,i)-2,x:Sa(d,p)}):p&&y.push(r(y)+"skewX("+p+i)}function f(d,p,y,T,v,b){if(d!==y||p!==T){var w=v.push(r(v)+"scale(",null,",",null,")");b.push({i:w-4,x:Sa(d,y)},{i:w-2,x:Sa(p,T)})}else(y!==1||T!==1)&&v.push(r(v)+"scale("+y+","+T+")")}return function(d,p){var y=[],T=[];return d=t(d),p=t(p),s(d.translateX,d.translateY,p.translateX,p.translateY,y,T),a(d.rotate,p.rotate,y,T),l(d.skewX,p.skewX,y,T),f(d.scaleX,d.scaleY,p.scaleX,p.scaleY,y,T),d=p=null,function(v){for(var b=-1,w=T.length,R;++b<w;)y[(R=T[b]).i]=R.x(v);return y.join("")}}}var JU=B2(XU,"px, ","px)","deg)"),ZU=B2(QU,", ",")",")"),jU=1e-12;function Xb(t){return((t=Math.exp(t))+1/t)/2}function e5(t){return((t=Math.exp(t))-1/t)/2}function t5(t){return((t=Math.exp(2*t))-1)/(t+1)}const n5=function t(e,n,i){function r(s,a){var l=s[0],f=s[1],d=s[2],p=a[0],y=a[1],T=a[2],v=p-l,b=y-f,w=v*v+b*b,R,N;if(w<jU)N=Math.log(T/d)/e,R=function(M){return[l+M*v,f+M*b,d*Math.exp(e*M*N)]};else{var V=Math.sqrt(w),G=(T*T-d*d+i*w)/(2*d*n*V),F=(T*T-d*d-i*w)/(2*T*n*V),J=Math.log(Math.sqrt(G*G+1)-G),K=Math.log(Math.sqrt(F*F+1)-F);N=(K-J)/e,R=function(M){var P=M*N,L=Xb(J),O=d/(n*V)*(L*t5(e*P+J)-e5(J));return[l+O*v,f+O*b,d*L/Xb(e*P+J)]}}return R.duration=N*1e3*e/Math.SQRT2,R}return r.rho=function(s){var a=Math.max(.001,+s),l=a*a,f=l*l;return t(a,l,f)},r}(Math.SQRT2,2,4);var wc=0,vd=0,ad=0,V2=1e3,tg,Sd,ng=0,Fu=0,Gg=0,eh=typeof performance=="object"&&performance.now?performance:Date,F2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function yv(){return Fu||(F2(i5),Fu=eh.now()+Gg)}function i5(){Fu=0}function ig(){this._call=this._time=this._next=null}ig.prototype=H2.prototype={constructor:ig,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?yv():+n)+(e==null?0:+e),!this._next&&Sd!==this&&(Sd?Sd._next=this:tg=this,Sd=this),this._call=t,this._time=n,zE()},stop:function(){this._call&&(this._call=null,this._time=1/0,zE())}};function H2(t,e,n){var i=new ig;return i.restart(t,e,n),i}function r5(){yv(),++wc;for(var t=tg,e;t;)(e=Fu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--wc}function Qb(){Fu=(ng=eh.now())+Gg,wc=vd=0;try{r5()}finally{wc=0,o5(),Fu=0}}function s5(){var t=eh.now(),e=t-ng;e>V2&&(Gg-=e,ng=t)}function o5(){for(var t,e=tg,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:tg=n);Sd=t,zE(i)}function zE(t){if(!wc){vd&&(vd=clearTimeout(vd));var e=t-Fu;e>24?(t<1/0&&(vd=setTimeout(Qb,t-eh.now()-Gg)),ad&&(ad=clearInterval(ad))):(ad||(ng=eh.now(),ad=setInterval(s5,V2)),wc=1,F2(Qb))}}function Jb(t,e,n){var i=new ig;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var a5=zg("start","end","cancel","interrupt"),u5=[],z2=0,Zb=1,qE=2,Dm=3,jb=4,GE=5,Mm=6;function $g(t,e,n,i,r,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;l5(t,n,{name:e,index:i,group:r,on:a5,tween:u5,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:z2})}function _v(t,e){var n=bs(t,e);if(n.state>z2)throw new Error("too late; already scheduled");return n}function ro(t,e){var n=bs(t,e);if(n.state>Dm)throw new Error("too late; already running");return n}function bs(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function l5(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=H2(s,0,n.time);function s(d){n.state=Zb,n.timer.restart(a,n.delay,n.time),n.delay<=d&&a(d-n.delay)}function a(d){var p,y,T,v;if(n.state!==Zb)return f();for(p in i)if(v=i[p],v.name===n.name){if(v.state===Dm)return Jb(a);v.state===jb?(v.state=Mm,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete i[p]):+p<e&&(v.state=Mm,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete i[p])}if(Jb(function(){n.state===Dm&&(n.state=jb,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=qE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===qE){for(n.state=Dm,r=new Array(T=n.tween.length),p=0,y=-1;p<T;++p)(v=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(r[++y]=v);r.length=y+1}}function l(d){for(var p=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(f),n.state=GE,1),y=-1,T=r.length;++y<T;)r[y].call(t,p);n.state===GE&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Mm,n.timer.stop(),delete i[e];for(var d in i)return;delete t.__transition}}function km(t,e){var n=t.__transition,i,r,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){s=!1;continue}r=i.state>qE&&i.state<GE,i.state=Mm,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function c5(t){return this.each(function(){km(this,t)})}function f5(t,e){var n,i;return function(){var r=ro(this,t),s=r.tween;if(s!==n){i=n=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function d5(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=ro(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},f=0,d=r.length;f<d;++f)if(r[f].name===e){r[f]=l;break}f===d&&r.push(l)}s.tween=r}}function h5(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=bs(this.node(),n).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?f5:d5)(n,t,e))}function Ev(t,e,n){var i=t._id;return t.each(function(){var r=ro(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return bs(r,i).value[e]}}function q2(t,e){var n;return(typeof e=="number"?Sa:e instanceof jd?Kb:(n=jd(e))?(e=n,Kb):WU)(t,e)}function p5(t){return function(){this.removeAttribute(t)}}function m5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function g5(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttribute(t);return a===r?null:a===i?s:s=e(i=a,n)}}function y5(t,e,n){var i,r=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?s:s=e(i=a,n)}}function _5(t,e,n){var i,r,s;return function(){var a,l=n(this),f;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=l+"",a===f?null:a===i&&f===r?s:(r=f,s=e(i=a,l)))}}function E5(t,e,n){var i,r,s;return function(){var a,l=n(this),f;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=l+"",a===f?null:a===i&&f===r?s:(r=f,s=e(i=a,l)))}}function T5(t,e){var n=qg(t),i=n==="transform"?ZU:q2;return this.attrTween(t,typeof e=="function"?(n.local?E5:_5)(n,i,Ev(this,"attr."+t,e)):e==null?(n.local?m5:p5)(n):(n.local?y5:g5)(n,i,e))}function v5(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function S5(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function C5(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&S5(t,s)),n}return r._value=e,r}function A5(t,e){var n,i;function r(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&v5(t,s)),n}return r._value=e,r}function b5(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=qg(t);return this.tween(n,(i.local?C5:A5)(i,e))}function I5(t,e){return function(){_v(this,t).delay=+e.apply(this,arguments)}}function w5(t,e){return e=+e,function(){_v(this,t).delay=e}}function x5(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?I5:w5)(e,t)):bs(this.node(),e).delay}function R5(t,e){return function(){ro(this,t).duration=+e.apply(this,arguments)}}function N5(t,e){return e=+e,function(){ro(this,t).duration=e}}function D5(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?R5:N5)(e,t)):bs(this.node(),e).duration}function M5(t,e){if(typeof e!="function")throw new Error;return function(){ro(this,t).ease=e}}function k5(t){var e=this._id;return arguments.length?this.each(M5(e,t)):bs(this.node(),e).ease}function P5(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ro(this,t).ease=n}}function L5(t){if(typeof t!="function")throw new Error;return this.each(P5(this._id,t))}function O5(t){typeof t!="function"&&(t=v2(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s=e[r],a=s.length,l=i[r]=[],f,d=0;d<a;++d)(f=s[d])&&t.call(f,f.__data__,d,s)&&l.push(f);return new Lo(i,this._parents,this._name,this._id)}function U5(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),l=0;l<s;++l)for(var f=e[l],d=n[l],p=f.length,y=a[l]=new Array(p),T,v=0;v<p;++v)(T=f[v]||d[v])&&(y[v]=T);for(;l<i;++l)a[l]=e[l];return new Lo(a,this._parents,this._name,this._id)}function B5(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function V5(t,e,n){var i,r,s=B5(e)?_v:ro;return function(){var a=s(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function F5(t,e){var n=this._id;return arguments.length<2?bs(this.node(),n).on.on(t):this.each(V5(n,t,e))}function H5(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function z5(){return this.on("end.remove",H5(this._id))}function q5(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pv(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var l=i[a],f=l.length,d=s[a]=new Array(f),p,y,T=0;T<f;++T)(p=l[T])&&(y=t.call(p,p.__data__,T,l))&&("__data__"in p&&(y.__data__=p.__data__),d[T]=y,$g(d[T],e,n,T,d,bs(p,n)));return new Lo(s,this._parents,e,n)}function G5(t){var e=this._name,n=this._id;typeof t!="function"&&(t=T2(t));for(var i=this._groups,r=i.length,s=[],a=[],l=0;l<r;++l)for(var f=i[l],d=f.length,p,y=0;y<d;++y)if(p=f[y]){for(var T=t.call(p,p.__data__,y,f),v,b=bs(p,n),w=0,R=T.length;w<R;++w)(v=T[w])&&$g(v,e,n,w,T,b);s.push(T),a.push(p)}return new Lo(s,a,e,n)}var $5=Th.prototype.constructor;function Y5(){return new $5(this._groups,this._parents)}function K5(t,e){var n,i,r;return function(){var s=Ic(this,t),a=(this.style.removeProperty(t),Ic(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}function G2(t){return function(){this.style.removeProperty(t)}}function W5(t,e,n){var i,r=n+"",s;return function(){var a=Ic(this,t);return a===r?null:a===i?s:s=e(i=a,n)}}function X5(t,e,n){var i,r,s;return function(){var a=Ic(this,t),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(t),Ic(this,t))),a===f?null:a===i&&f===r?s:(r=f,s=e(i=a,l))}}function Q5(t,e){var n,i,r,s="style."+e,a="end."+s,l;return function(){var f=ro(this,t),d=f.on,p=f.value[s]==null?l||(l=G2(e)):void 0;(d!==n||r!==p)&&(i=(n=d).copy()).on(a,r=p),f.on=i}}function J5(t,e,n){var i=(t+="")=="transform"?JU:q2;return e==null?this.styleTween(t,K5(t,i)).on("end.style."+t,G2(t)):typeof e=="function"?this.styleTween(t,X5(t,i,Ev(this,"style."+t,e))).each(Q5(this._id,t)):this.styleTween(t,W5(t,i,e),n).on("end.style."+t,null)}function Z5(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function j5(t,e,n){var i,r;function s(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Z5(t,a,n)),i}return s._value=e,s}function e9(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,j5(t,e,n??""))}function t9(t){return function(){this.textContent=t}}function n9(t){return function(){var e=t(this);this.textContent=e??""}}function i9(t){return this.tween("text",typeof t=="function"?n9(Ev(this,"text",t)):t9(t==null?"":t+""))}function r9(t){return function(e){this.textContent=t.call(this,e)}}function s9(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&r9(r)),e}return i._value=t,i}function o9(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,s9(t))}function a9(){for(var t=this._name,e=this._id,n=$2(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],l=a.length,f,d=0;d<l;++d)if(f=a[d]){var p=bs(f,e);$g(f,t,n,d,a,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Lo(i,this._parents,t,n)}function u9(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var l={value:a},f={value:function(){--r===0&&s()}};n.each(function(){var d=ro(this,i),p=d.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),d.on=e}),r===0&&s()})}var l9=0;function Lo(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function $2(){return++l9}var xo=Th.prototype;Lo.prototype={constructor:Lo,select:q5,selectAll:G5,selectChild:xo.selectChild,selectChildren:xo.selectChildren,filter:O5,merge:U5,selection:Y5,transition:a9,call:xo.call,nodes:xo.nodes,node:xo.node,size:xo.size,empty:xo.empty,each:xo.each,on:F5,attr:T5,attrTween:b5,style:J5,styleTween:e9,text:i9,textTween:o9,remove:z5,tween:h5,delay:x5,duration:D5,ease:k5,easeVarying:L5,end:u9,[Symbol.iterator]:xo[Symbol.iterator]};function c9(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var f9={time:null,delay:0,duration:250,ease:c9};function d9(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function h9(t){var e,n;t instanceof Lo?(e=t._id,t=t._name):(e=$2(),(n=f9).time=yv(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],l=a.length,f,d=0;d<l;++d)(f=a[d])&&$g(f,t,e,d,a,n||d9(f,e));return new Lo(i,this._parents,t,e)}Th.prototype.interrupt=c5;Th.prototype.transition=h9;const um=t=>()=>t;function p9(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function No(t,e,n){this.k=t,this.x=e,this.y=n}No.prototype={constructor:No,scale:function(t){return t===1?this:new No(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new No(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pa=new No(1,0,0);No.prototype;function B_(t){t.stopImmediatePropagation()}function ud(t){t.preventDefault(),t.stopImmediatePropagation()}function m9(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function g9(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function eI(){return this.__zoom||Pa}function y9(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function _9(){return navigator.maxTouchPoints||"ontouchstart"in this}function E9(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function T9(){var t=m9,e=g9,n=E9,i=y9,r=_9,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,f=n5,d=zg("start","zoom","end"),p,y,T,v=500,b=150,w=0,R=10;function N(U){U.property("__zoom",eI).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",O).filter(r).on("touchstart.zoom",B).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(U,Q,$,j){var se=U.selection?U.selection():U;se.property("__zoom",eI),U!==se?J(U,Q,$,j):se.interrupt().each(function(){K(this,arguments).event(j).start().zoom(null,typeof Q=="function"?Q.apply(this,arguments):Q).end()})},N.scaleBy=function(U,Q,$,j){N.scaleTo(U,function(){var se=this.__zoom.k,oe=typeof Q=="function"?Q.apply(this,arguments):Q;return se*oe},$,j)},N.scaleTo=function(U,Q,$,j){N.transform(U,function(){var se=e.apply(this,arguments),oe=this.__zoom,I=$==null?F(se):typeof $=="function"?$.apply(this,arguments):$,ne=oe.invert(I),le=typeof Q=="function"?Q.apply(this,arguments):Q;return n(G(V(oe,le),I,ne),se,a)},$,j)},N.translateBy=function(U,Q,$,j){N.transform(U,function(){return n(this.__zoom.translate(typeof Q=="function"?Q.apply(this,arguments):Q,typeof $=="function"?$.apply(this,arguments):$),e.apply(this,arguments),a)},null,j)},N.translateTo=function(U,Q,$,j,se){N.transform(U,function(){var oe=e.apply(this,arguments),I=this.__zoom,ne=j==null?F(oe):typeof j=="function"?j.apply(this,arguments):j;return n(Pa.translate(ne[0],ne[1]).scale(I.k).translate(typeof Q=="function"?-Q.apply(this,arguments):-Q,typeof $=="function"?-$.apply(this,arguments):-$),oe,a)},j,se)};function V(U,Q){return Q=Math.max(s[0],Math.min(s[1],Q)),Q===U.k?U:new No(Q,U.x,U.y)}function G(U,Q,$){var j=Q[0]-$[0]*U.k,se=Q[1]-$[1]*U.k;return j===U.x&&se===U.y?U:new No(U.k,j,se)}function F(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function J(U,Q,$,j){U.on("start.zoom",function(){K(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){K(this,arguments).event(j).end()}).tween("zoom",function(){var se=this,oe=arguments,I=K(se,oe).event(j),ne=e.apply(se,oe),le=$==null?F(ne):typeof $=="function"?$.apply(se,oe):$,H=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),ye=se.__zoom,Ne=typeof Q=="function"?Q.apply(se,oe):Q,Re=f(ye.invert(le).concat(H/ye.k),Ne.invert(le).concat(H/Ne.k));return function($e){if($e===1)$e=Ne;else{var be=Re($e),Ue=H/be[2];$e=new No(Ue,le[0]-be[0]*Ue,le[1]-be[1]*Ue)}I.zoom(null,$e)}})}function K(U,Q,$){return!$&&U.__zooming||new M(U,Q)}function M(U,Q){this.that=U,this.args=Q,this.active=0,this.sourceEvent=null,this.extent=e.apply(U,Q),this.taps=0}M.prototype={event:function(U){return U&&(this.sourceEvent=U),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,Q){return this.mouse&&U!=="mouse"&&(this.mouse[1]=Q.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=Q.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=Q.invert(this.touch1[0])),this.that.__zoom=Q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){var Q=Es(this.that).datum();d.call(U,this.that,new p9(U,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:d}),Q)}};function P(U,...Q){if(!t.apply(this,arguments))return;var $=K(this,Q).event(U),j=this.__zoom,se=Math.max(s[0],Math.min(s[1],j.k*Math.pow(2,i.apply(this,arguments)))),oe=qs(U);if($.wheel)($.mouse[0][0]!==oe[0]||$.mouse[0][1]!==oe[1])&&($.mouse[1]=j.invert($.mouse[0]=oe)),clearTimeout($.wheel);else{if(j.k===se)return;$.mouse=[oe,j.invert(oe)],km(this),$.start()}ud(U),$.wheel=setTimeout(I,b),$.zoom("mouse",n(G(V(j,se),$.mouse[0],$.mouse[1]),$.extent,a));function I(){$.wheel=null,$.end()}}function L(U,...Q){if(T||!t.apply(this,arguments))return;var $=U.currentTarget,j=K(this,Q,!0).event(U),se=Es(U.view).on("mousemove.zoom",le,!0).on("mouseup.zoom",H,!0),oe=qs(U,$),I=U.clientX,ne=U.clientY;D2(U.view),B_(U),j.mouse=[oe,this.__zoom.invert(oe)],km(this),j.start();function le(ye){if(ud(ye),!j.moved){var Ne=ye.clientX-I,Re=ye.clientY-ne;j.moved=Ne*Ne+Re*Re>w}j.event(ye).zoom("mouse",n(G(j.that.__zoom,j.mouse[0]=qs(ye,$),j.mouse[1]),j.extent,a))}function H(ye){se.on("mousemove.zoom mouseup.zoom",null),M2(ye.view,j.moved),ud(ye),j.event(ye).end()}}function O(U,...Q){if(t.apply(this,arguments)){var $=this.__zoom,j=qs(U.changedTouches?U.changedTouches[0]:U,this),se=$.invert(j),oe=$.k*(U.shiftKey?.5:2),I=n(G(V($,oe),j,se),e.apply(this,Q),a);ud(U),l>0?Es(this).transition().duration(l).call(J,I,j,U):Es(this).call(N.transform,I,j,U)}}function B(U,...Q){if(t.apply(this,arguments)){var $=U.touches,j=$.length,se=K(this,Q,U.changedTouches.length===j).event(U),oe,I,ne,le;for(B_(U),I=0;I<j;++I)ne=$[I],le=qs(ne,this),le=[le,this.__zoom.invert(le),ne.identifier],se.touch0?!se.touch1&&se.touch0[2]!==le[2]&&(se.touch1=le,se.taps=0):(se.touch0=le,oe=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),oe&&(se.taps<2&&(y=le[0],p=setTimeout(function(){p=null},v)),km(this),se.start())}}function z(U,...Q){if(this.__zooming){var $=K(this,Q).event(U),j=U.changedTouches,se=j.length,oe,I,ne,le;for(ud(U),oe=0;oe<se;++oe)I=j[oe],ne=qs(I,this),$.touch0&&$.touch0[2]===I.identifier?$.touch0[0]=ne:$.touch1&&$.touch1[2]===I.identifier&&($.touch1[0]=ne);if(I=$.that.__zoom,$.touch1){var H=$.touch0[0],ye=$.touch0[1],Ne=$.touch1[0],Re=$.touch1[1],$e=($e=Ne[0]-H[0])*$e+($e=Ne[1]-H[1])*$e,be=(be=Re[0]-ye[0])*be+(be=Re[1]-ye[1])*be;I=V(I,Math.sqrt($e/be)),ne=[(H[0]+Ne[0])/2,(H[1]+Ne[1])/2],le=[(ye[0]+Re[0])/2,(ye[1]+Re[1])/2]}else if($.touch0)ne=$.touch0[0],le=$.touch0[1];else return;$.zoom("touch",n(G(I,ne,le),$.extent,a))}}function D(U,...Q){if(this.__zooming){var $=K(this,Q).event(U),j=U.changedTouches,se=j.length,oe,I;for(B_(U),T&&clearTimeout(T),T=setTimeout(function(){T=null},v),oe=0;oe<se;++oe)I=j[oe],$.touch0&&$.touch0[2]===I.identifier?delete $.touch0:$.touch1&&$.touch1[2]===I.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(I=qs(I,this),Math.hypot(y[0]-I[0],y[1]-I[1])<R)){var ne=Es(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return N.wheelDelta=function(U){return arguments.length?(i=typeof U=="function"?U:um(+U),N):i},N.filter=function(U){return arguments.length?(t=typeof U=="function"?U:um(!!U),N):t},N.touchable=function(U){return arguments.length?(r=typeof U=="function"?U:um(!!U),N):r},N.extent=function(U){return arguments.length?(e=typeof U=="function"?U:um([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),N):e},N.scaleExtent=function(U){return arguments.length?(s[0]=+U[0],s[1]=+U[1],N):[s[0],s[1]]},N.translateExtent=function(U){return arguments.length?(a[0][0]=+U[0][0],a[1][0]=+U[1][0],a[0][1]=+U[0][1],a[1][1]=+U[1][1],N):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},N.constrain=function(U){return arguments.length?(n=U,N):n},N.duration=function(U){return arguments.length?(l=+U,N):l},N.interpolate=function(U){return arguments.length?(f=U,N):f},N.on=function(){var U=d.on.apply(d,arguments);return U===d?N:U},N.clickDistance=function(U){return arguments.length?(w=(U=+U)*U,N):Math.sqrt(w)},N.tapDistance=function(U){return arguments.length?(R=+U,N):R},N}var v9=y2();const ac=Zu(v9),Yg=q.createContext(null),S9=Yg.Provider,Oo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Y2=Oo.error001();function kn(t,e){const n=q.useContext(Yg);if(n===null)throw new Error(Y2);return _2(n,t,e)}const Ai=()=>{const t=q.useContext(Yg);if(t===null)throw new Error(Y2);return q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},C9=t=>t.userSelectionActive?"none":"all";function K2({position:t,children:e,className:n,style:i,...r}){const s=kn(C9),a=`${t}`.split("-");return Te.createElement("div",{className:ur(["react-flow__panel",n,...a]),style:{...i,pointerEvents:s},...r},e)}function A9({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:Te.createElement(K2,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},Te.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const b9=({x:t,y:e,label:n,labelStyle:i={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:a=[2,4],labelBgBorderRadius:l=2,children:f,className:d,...p})=>{const y=q.useRef(null),[T,v]=q.useState({x:0,y:0,width:0,height:0}),b=ur(["react-flow__edge-textwrapper",d]);return q.useEffect(()=>{if(y.current){const w=y.current.getBBox();v({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),typeof n>"u"||!n?null:Te.createElement("g",{transform:`translate(${t-T.width/2} ${e-T.height/2})`,className:b,visibility:T.width?"visible":"hidden",...p},r&&Te.createElement("rect",{width:T.width+2*a[0],x:-a[0],y:-a[1],height:T.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),Te.createElement("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:y,style:i},n),f)};var I9=q.memo(b9);const Tv=t=>({width:t.offsetWidth,height:t.offsetHeight}),xc=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),vv=(t={x:0,y:0},e)=>({x:xc(t.x,e[0][0],e[1][0]),y:xc(t.y,e[0][1],e[1][1])}),tI=(t,e,n)=>t<e?xc(Math.abs(t-e),1,50)/50:t>n?-xc(Math.abs(t-n),1,50)/50:0,W2=(t,e)=>{const n=tI(t.x,35,e.width-35)*20,i=tI(t.y,35,e.height-35)*20;return[n,i]},X2=t=>t.getRootNode?.()||window?.document,w9=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Sv=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),x9=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),nI=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),$E=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},R9=t=>os(t.width)&&os(t.height)&&os(t.x)&&os(t.y),os=t=>!isNaN(t)&&isFinite(t),Vn=Symbol.for("internals"),Q2=["Enter"," ","Escape"],N9=(t,e)=>{},D9=t=>"nativeEvent"in t;function YE(t){const n=(D9(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const J2=t=>"clientX"in t,La=(t,e)=>{const n=J2(t),i=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:r-(e?.top??0)}},rg=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Sh=({id:t,path:e,labelX:n,labelY:i,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:v=20})=>Te.createElement(Te.Fragment,null,Te.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:T}),v&&Te.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:v,className:"react-flow__edge-interaction"}),r&&os(n)&&os(i)?Te.createElement(I9,{x:n,y:i,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d}):null);Sh.displayName="BaseEdge";function ld(t,e,n){return n===void 0?n:i=>{const r=e().edges.find(s=>s.id===t);r&&n(i,{...r})}}function Z2({sourceX:t,sourceY:e,targetX:n,targetY:i}){const r=Math.abs(n-t)/2,s=n<t?n+r:n-r,a=Math.abs(i-e)/2,l=i<e?i+a:i-a;return[s,l,r,a]}function j2({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:a,targetControlY:l}){const f=t*.125+r*.375+a*.375+n*.125,d=e*.125+s*.375+l*.375+i*.125,p=Math.abs(f-t),y=Math.abs(d-e);return[f,d,p,y]}var qa;(function(t){t.Strict="strict",t.Loose="loose"})(qa||(qa={}));var Pu;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Pu||(Pu={}));var th;(function(t){t.Partial="partial",t.Full="full"})(th||(th={}));var Ia;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ia||(Ia={}));var nh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(nh||(nh={}));var Ye;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ye||(Ye={}));function iI({pos:t,x1:e,y1:n,x2:i,y2:r}){return t===Ye.Left||t===Ye.Right?[.5*(e+i),n]:[e,.5*(n+r)]}function eD({sourceX:t,sourceY:e,sourcePosition:n=Ye.Bottom,targetX:i,targetY:r,targetPosition:s=Ye.Top}){const[a,l]=iI({pos:n,x1:t,y1:e,x2:i,y2:r}),[f,d]=iI({pos:s,x1:i,y1:r,x2:t,y2:e}),[p,y,T,v]=j2({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:f,targetControlY:d});return[`M${t},${e} C${a},${l} ${f},${d} ${i},${r}`,p,y,T,v]}const Cv=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:r=Ye.Bottom,targetPosition:s=Ye.Top,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:v,markerStart:b,interactionWidth:w})=>{const[R,N,V]=eD({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:i,targetPosition:s});return Te.createElement(Sh,{path:R,labelX:N,labelY:V,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:v,markerStart:b,interactionWidth:w})});Cv.displayName="SimpleBezierEdge";const rI={[Ye.Left]:{x:-1,y:0},[Ye.Right]:{x:1,y:0},[Ye.Top]:{x:0,y:-1},[Ye.Bottom]:{x:0,y:1}},M9=({source:t,sourcePosition:e=Ye.Bottom,target:n})=>e===Ye.Left||e===Ye.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},sI=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function k9({source:t,sourcePosition:e=Ye.Bottom,target:n,targetPosition:i=Ye.Top,center:r,offset:s}){const a=rI[e],l=rI[i],f={x:t.x+a.x*s,y:t.y+a.y*s},d={x:n.x+l.x*s,y:n.y+l.y*s},p=M9({source:f,sourcePosition:e,target:d}),y=p.x!==0?"x":"y",T=p[y];let v=[],b,w;const R={x:0,y:0},N={x:0,y:0},[V,G,F,J]=Z2({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(a[y]*l[y]===-1){b=r.x??V,w=r.y??G;const M=[{x:b,y:f.y},{x:b,y:d.y}],P=[{x:f.x,y:w},{x:d.x,y:w}];a[y]===T?v=y==="x"?M:P:v=y==="x"?P:M}else{const M=[{x:f.x,y:d.y}],P=[{x:d.x,y:f.y}];if(y==="x"?v=a.x===T?P:M:v=a.y===T?M:P,e===i){const D=Math.abs(t[y]-n[y]);if(D<=s){const U=Math.min(s-1,s-D);a[y]===T?R[y]=(f[y]>t[y]?-1:1)*U:N[y]=(d[y]>n[y]?-1:1)*U}}if(e!==i){const D=y==="x"?"y":"x",U=a[y]===l[D],Q=f[D]>d[D],$=f[D]<d[D];(a[y]===1&&(!U&&Q||U&&$)||a[y]!==1&&(!U&&$||U&&Q))&&(v=y==="x"?M:P)}const L={x:f.x+R.x,y:f.y+R.y},O={x:d.x+N.x,y:d.y+N.y},B=Math.max(Math.abs(L.x-v[0].x),Math.abs(O.x-v[0].x)),z=Math.max(Math.abs(L.y-v[0].y),Math.abs(O.y-v[0].y));B>=z?(b=(L.x+O.x)/2,w=v[0].y):(b=v[0].x,w=(L.y+O.y)/2)}return[[t,{x:f.x+R.x,y:f.y+R.y},...v,{x:d.x+N.x,y:d.y+N.y},n],b,w,F,J]}function P9(t,e,n,i){const r=Math.min(sI(t,e)/2,sI(e,n)/2,i),{x:s,y:a}=e;if(t.x===s&&s===n.x||t.y===a&&a===n.y)return`L${s} ${a}`;if(t.y===a){const d=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${s+r*d},${a}Q ${s},${a} ${s},${a+r*p}`}const l=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${s},${a+r*f}Q ${s},${a} ${s+r*l},${a}`}function KE({sourceX:t,sourceY:e,sourcePosition:n=Ye.Bottom,targetX:i,targetY:r,targetPosition:s=Ye.Top,borderRadius:a=5,centerX:l,centerY:f,offset:d=20}){const[p,y,T,v,b]=k9({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:r},targetPosition:s,center:{x:l,y:f},offset:d});return[p.reduce((R,N,V)=>{let G="";return V>0&&V<p.length-1?G=P9(p[V-1],N,p[V+1],a):G=`${V===0?"M":"L"}${N.x} ${N.y}`,R+=G,R},""),y,T,v,b]}const Kg=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:p,sourcePosition:y=Ye.Bottom,targetPosition:T=Ye.Top,markerEnd:v,markerStart:b,pathOptions:w,interactionWidth:R})=>{const[N,V,G]=KE({sourceX:t,sourceY:e,sourcePosition:y,targetX:n,targetY:i,targetPosition:T,borderRadius:w?.borderRadius,offset:w?.offset});return Te.createElement(Sh,{path:N,labelX:V,labelY:G,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:v,markerStart:b,interactionWidth:R})});Kg.displayName="SmoothStepEdge";const Av=q.memo(t=>Te.createElement(Kg,{...t,pathOptions:q.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Av.displayName="StepEdge";function L9({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[r,s,a,l]=Z2({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,r,s,a,l]}const bv=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:v})=>{const[b,w,R]=L9({sourceX:t,sourceY:e,targetX:n,targetY:i});return Te.createElement(Sh,{path:b,labelX:w,labelY:R,label:r,labelStyle:s,labelShowBg:a,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:d,style:p,markerEnd:y,markerStart:T,interactionWidth:v})});bv.displayName="StraightEdge";function lm(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function oI({pos:t,x1:e,y1:n,x2:i,y2:r,c:s}){switch(t){case Ye.Left:return[e-lm(e-i,s),n];case Ye.Right:return[e+lm(i-e,s),n];case Ye.Top:return[e,n-lm(n-r,s)];case Ye.Bottom:return[e,n+lm(r-n,s)]}}function tD({sourceX:t,sourceY:e,sourcePosition:n=Ye.Bottom,targetX:i,targetY:r,targetPosition:s=Ye.Top,curvature:a=.25}){const[l,f]=oI({pos:n,x1:t,y1:e,x2:i,y2:r,c:a}),[d,p]=oI({pos:s,x1:i,y1:r,x2:t,y2:e,c:a}),[y,T,v,b]=j2({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:l,sourceControlY:f,targetControlX:d,targetControlY:p});return[`M${t},${e} C${l},${f} ${d},${p} ${i},${r}`,y,T,v,b]}const sg=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:r=Ye.Bottom,targetPosition:s=Ye.Top,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:v,markerStart:b,pathOptions:w,interactionWidth:R})=>{const[N,V,G]=tD({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:i,targetPosition:s,curvature:w?.curvature});return Te.createElement(Sh,{path:N,labelX:V,labelY:G,label:a,labelStyle:l,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:y,style:T,markerEnd:v,markerStart:b,interactionWidth:R})});sg.displayName="BezierEdge";const Iv=q.createContext(null),O9=Iv.Provider;Iv.Consumer;const U9=()=>q.useContext(Iv),B9=t=>"id"in t&&"source"in t&&"target"in t,V9=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${n}${i||""}`,WE=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,F9=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),H9=(t,e)=>{if(!t.source||!t.target)return e;let n;return B9(t)?n={...t}:n={...t,id:V9(t)},F9(n,e)?e:e.concat(n)},XE=({x:t,y:e},[n,i,r],s,[a,l])=>{const f={x:(t-n)/r,y:(e-i)/r};return s?{x:a*Math.round(f.x/a),y:l*Math.round(f.y/l)}:f},nD=({x:t,y:e},[n,i,r])=>({x:t*r+n,y:e*r+i}),pc=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],i=(t.height??0)*e[1],r={x:t.position.x-n,y:t.position.y-i};return{...r,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:r}},wv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,r)=>{const{x:s,y:a}=pc(r,e).positionAbsolute;return w9(i,Sv({x:s,y:a,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return x9(n)},iD=(t,e,[n,i,r]=[0,0,1],s=!1,a=!1,l=[0,0])=>{const f={x:(e.x-n)/r,y:(e.y-i)/r,width:e.width/r,height:e.height/r},d=[];return t.forEach(p=>{const{width:y,height:T,selectable:v=!0,hidden:b=!1}=p;if(a&&!v||b)return!1;const{positionAbsolute:w}=pc(p,l),R={x:w.x,y:w.y,width:y||0,height:T||0},N=$E(f,R),V=typeof y>"u"||typeof T>"u"||y===null||T===null,G=s&&N>0,F=(y||0)*(T||0);(V||G||N>=F||p.dragging)&&d.push(p)}),d},rD=(t,e)=>{const n=t.map(i=>i.id);return e.filter(i=>n.includes(i.source)||n.includes(i.target))},sD=(t,e,n,i,r,s=.1)=>{const a=e/(t.width*(1+s)),l=n/(t.height*(1+s)),f=Math.min(a,l),d=xc(f,i,r),p=t.x+t.width/2,y=t.y+t.height/2,T=e/2-p*d,v=n/2-y*d;return{x:T,y:v,zoom:d}},xu=(t,e=0)=>t.transition().duration(e);function aI(t,e,n,i){return(e[n]||[]).reduce((r,s)=>(`${t.id}-${s.id}-${n}`!==i&&r.push({id:s.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+s.x+s.width/2,y:(t.positionAbsolute?.y??0)+s.y+s.height/2}),r),[])}function z9(t,e,n,i,r,s){const{x:a,y:l}=La(t),d=e.elementsFromPoint(a,l).find(b=>b.classList.contains("react-flow__handle"));if(d){const b=d.getAttribute("data-nodeid");if(b){const w=xv(void 0,d),R=d.getAttribute("data-handleid"),N=s({nodeId:b,id:R,type:w});if(N){const V=r.find(G=>G.nodeId===b&&G.type===w&&G.id===R);return{handle:{id:R,type:w,nodeId:b,x:V?.x||n.x,y:V?.y||n.y},validHandleResult:N}}}}let p=[],y=1/0;if(r.forEach(b=>{const w=Math.sqrt((b.x-n.x)**2+(b.y-n.y)**2);if(w<=i){const R=s(b);w<=y&&(w<y?p=[{handle:b,validHandleResult:R}]:w===y&&p.push({handle:b,validHandleResult:R}),y=w)}}),!p.length)return{handle:null,validHandleResult:oD()};if(p.length===1)return p[0];const T=p.some(({validHandleResult:b})=>b.isValid),v=p.some(({handle:b})=>b.type==="target");return p.find(({handle:b,validHandleResult:w})=>v?b.type==="target":T?w.isValid:!0)||p[0]}const q9={source:null,target:null,sourceHandle:null,targetHandle:null},oD=()=>({handleDomNode:null,isValid:!1,connection:q9,endHandle:null});function aD(t,e,n,i,r,s,a){const l=r==="target",f=a.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),d={...oD(),handleDomNode:f};if(f){const p=xv(void 0,f),y=f.getAttribute("data-nodeid"),T=f.getAttribute("data-handleid"),v=f.classList.contains("connectable"),b=f.classList.contains("connectableend"),w={source:l?y:n,sourceHandle:l?T:i,target:l?n:y,targetHandle:l?i:T};d.connection=w,v&&b&&(e===qa.Strict?l&&p==="source"||!l&&p==="target":y!==n||T!==i)&&(d.endHandle={nodeId:y,handleId:T,type:p},d.isValid=s(w))}return d}function G9({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((r,s)=>{if(s[Vn]){const{handleBounds:a}=s[Vn];let l=[],f=[];a&&(l=aI(s,a,"source",`${e}-${n}-${i}`),f=aI(s,a,"target",`${e}-${n}-${i}`)),r.push(...l,...f)}return r},[])}function xv(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function V_(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function $9(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function uD({event:t,handleId:e,nodeId:n,onConnect:i,isTarget:r,getState:s,setState:a,isValidConnection:l,edgeUpdaterType:f,onReconnectEnd:d}){const p=X2(t.target),{connectionMode:y,domNode:T,autoPanOnConnect:v,connectionRadius:b,onConnectStart:w,panBy:R,getNodes:N,cancelConnection:V}=s();let G=0,F;const{x:J,y:K}=La(t),M=p?.elementFromPoint(J,K),P=xv(f,M),L=T?.getBoundingClientRect();if(!L||!P)return;let O,B=La(t,L),z=!1,D=null,U=!1,Q=null;const $=G9({nodes:N(),nodeId:n,handleId:e,handleType:P}),j=()=>{if(!v)return;const[I,ne]=W2(B,L);R({x:I,y:ne}),G=requestAnimationFrame(j)};a({connectionPosition:B,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:P,connectionStartHandle:{nodeId:n,handleId:e,type:P},connectionEndHandle:null}),w?.(t,{nodeId:n,handleId:e,handleType:P});function se(I){const{transform:ne}=s();B=La(I,L);const{handle:le,validHandleResult:H}=z9(I,p,XE(B,ne,!1,[1,1]),b,$,ye=>aD(ye,y,n,e,r?"target":"source",l,p));if(F=le,z||(j(),z=!0),Q=H.handleDomNode,D=H.connection,U=H.isValid,a({connectionPosition:F&&U?nD({x:F.x,y:F.y},ne):B,connectionStatus:$9(!!F,U),connectionEndHandle:H.endHandle}),!F&&!U&&!Q)return V_(O);D.source!==D.target&&Q&&(V_(O),O=Q,Q.classList.add("connecting","react-flow__handle-connecting"),Q.classList.toggle("valid",U),Q.classList.toggle("react-flow__handle-valid",U))}function oe(I){(F||Q)&&D&&U&&i?.(D),s().onConnectEnd?.(I),f&&d?.(I),V_(O),V(),cancelAnimationFrame(G),z=!1,U=!1,D=null,Q=null,p.removeEventListener("mousemove",se),p.removeEventListener("mouseup",oe),p.removeEventListener("touchmove",se),p.removeEventListener("touchend",oe)}p.addEventListener("mousemove",se),p.addEventListener("mouseup",oe),p.addEventListener("touchmove",se),p.addEventListener("touchend",oe)}const uI=()=>!0,Y9=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),K9=(t,e,n)=>i=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:a}=i;return{connecting:r?.nodeId===t&&r?.handleId===e&&r?.type===n||s?.nodeId===t&&s?.handleId===e&&s?.type===n,clickConnecting:a?.nodeId===t&&a?.handleId===e&&a?.type===n}},lD=q.forwardRef(({type:t="source",position:e=Ye.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:a,onConnect:l,children:f,className:d,onMouseDown:p,onTouchStart:y,...T},v)=>{const b=a||null,w=t==="target",R=Ai(),N=U9(),{connectOnClick:V,noPanClassName:G}=kn(Y9,$i),{connecting:F,clickConnecting:J}=kn(K9(N,b,t),$i);N||R.getState().onError?.("010",Oo.error010());const K=L=>{const{defaultEdgeOptions:O,onConnect:B,hasDefaultEdges:z}=R.getState(),D={...O,...L};if(z){const{edges:U,setEdges:Q}=R.getState();Q(H9(D,U))}B?.(D),l?.(D)},M=L=>{if(!N)return;const O=J2(L);r&&(O&&L.button===0||!O)&&uD({event:L,handleId:b,nodeId:N,onConnect:K,isTarget:w,getState:R.getState,setState:R.setState,isValidConnection:n||R.getState().isValidConnection||uI}),O?p?.(L):y?.(L)},P=L=>{const{onClickConnectStart:O,onClickConnectEnd:B,connectionClickStartHandle:z,connectionMode:D,isValidConnection:U}=R.getState();if(!N||!z&&!r)return;if(!z){O?.(L,{nodeId:N,handleId:b,handleType:t}),R.setState({connectionClickStartHandle:{nodeId:N,type:t,handleId:b}});return}const Q=X2(L.target),$=n||U||uI,{connection:j,isValid:se}=aD({nodeId:N,id:b,type:t},D,z.nodeId,z.handleId||null,z.type,$,Q);se&&K(j),B?.(L),R.setState({connectionClickStartHandle:null})};return Te.createElement("div",{"data-handleid":b,"data-nodeid":N,"data-handlepos":e,"data-id":`${N}-${b}-${t}`,className:ur(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",G,d,{source:!w,target:w,connectable:i,connectablestart:r,connectableend:s,connecting:J,connectionindicator:i&&(r&&!F||s&&F)}]),onMouseDown:M,onTouchStart:M,onClick:V?P:void 0,ref:v,...T},f)});lD.displayName="Handle";var Hi=q.memo(lD);const cD=({data:t,isConnectable:e,targetPosition:n=Ye.Top,sourcePosition:i=Ye.Bottom})=>Te.createElement(Te.Fragment,null,Te.createElement(Hi,{type:"target",position:n,isConnectable:e}),t?.label,Te.createElement(Hi,{type:"source",position:i,isConnectable:e}));cD.displayName="DefaultNode";var QE=q.memo(cD);const fD=({data:t,isConnectable:e,sourcePosition:n=Ye.Bottom})=>Te.createElement(Te.Fragment,null,t?.label,Te.createElement(Hi,{type:"source",position:n,isConnectable:e}));fD.displayName="InputNode";var dD=q.memo(fD);const hD=({data:t,isConnectable:e,targetPosition:n=Ye.Top})=>Te.createElement(Te.Fragment,null,Te.createElement(Hi,{type:"target",position:n,isConnectable:e}),t?.label);hD.displayName="OutputNode";var pD=q.memo(hD);const Rv=()=>null;Rv.displayName="GroupNode";const W9=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),cm=t=>t.id;function X9(t,e){return $i(t.selectedNodes.map(cm),e.selectedNodes.map(cm))&&$i(t.selectedEdges.map(cm),e.selectedEdges.map(cm))}const mD=q.memo(({onSelectionChange:t})=>{const e=Ai(),{selectedNodes:n,selectedEdges:i}=kn(W9,X9);return q.useEffect(()=>{const r={nodes:n,edges:i};t?.(r),e.getState().onSelectionChange.forEach(s=>s(r))},[n,i,t]),null});mD.displayName="SelectionListener";const Q9=t=>!!t.onSelectionChange;function J9({onSelectionChange:t}){const e=kn(Q9);return t||e?Te.createElement(mD,{onSelectionChange:t}):null}const Z9=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function ql(t,e){q.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function At(t,e,n){q.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const j9=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:r,onConnectStart:s,onConnectEnd:a,onClickConnectStart:l,onClickConnectEnd:f,nodesDraggable:d,nodesConnectable:p,nodesFocusable:y,edgesFocusable:T,edgesUpdatable:v,elevateNodesOnSelect:b,minZoom:w,maxZoom:R,nodeExtent:N,onNodesChange:V,onEdgesChange:G,elementsSelectable:F,connectionMode:J,snapGrid:K,snapToGrid:M,translateExtent:P,connectOnClick:L,defaultEdgeOptions:O,fitView:B,fitViewOptions:z,onNodesDelete:D,onEdgesDelete:U,onNodeDrag:Q,onNodeDragStart:$,onNodeDragStop:j,onSelectionDrag:se,onSelectionDragStart:oe,onSelectionDragStop:I,noPanClassName:ne,nodeOrigin:le,rfId:H,autoPanOnConnect:ye,autoPanOnNodeDrag:Ne,onError:Re,connectionRadius:$e,isValidConnection:be,nodeDragThreshold:Ue})=>{const{setNodes:Ve,setEdges:it,setDefaultNodesAndEdges:Ht,setMinZoom:zt,setMaxZoom:qt,setTranslateExtent:je,setNodeExtent:Cn,reset:tt}=kn(Z9,$i),Xe=Ai();return q.useEffect(()=>{const gn=i?.map(Fn=>({...Fn,...O}));return Ht(n,gn),()=>{tt()}},[]),At("defaultEdgeOptions",O,Xe.setState),At("connectionMode",J,Xe.setState),At("onConnect",r,Xe.setState),At("onConnectStart",s,Xe.setState),At("onConnectEnd",a,Xe.setState),At("onClickConnectStart",l,Xe.setState),At("onClickConnectEnd",f,Xe.setState),At("nodesDraggable",d,Xe.setState),At("nodesConnectable",p,Xe.setState),At("nodesFocusable",y,Xe.setState),At("edgesFocusable",T,Xe.setState),At("edgesUpdatable",v,Xe.setState),At("elementsSelectable",F,Xe.setState),At("elevateNodesOnSelect",b,Xe.setState),At("snapToGrid",M,Xe.setState),At("snapGrid",K,Xe.setState),At("onNodesChange",V,Xe.setState),At("onEdgesChange",G,Xe.setState),At("connectOnClick",L,Xe.setState),At("fitViewOnInit",B,Xe.setState),At("fitViewOnInitOptions",z,Xe.setState),At("onNodesDelete",D,Xe.setState),At("onEdgesDelete",U,Xe.setState),At("onNodeDrag",Q,Xe.setState),At("onNodeDragStart",$,Xe.setState),At("onNodeDragStop",j,Xe.setState),At("onSelectionDrag",se,Xe.setState),At("onSelectionDragStart",oe,Xe.setState),At("onSelectionDragStop",I,Xe.setState),At("noPanClassName",ne,Xe.setState),At("nodeOrigin",le,Xe.setState),At("rfId",H,Xe.setState),At("autoPanOnConnect",ye,Xe.setState),At("autoPanOnNodeDrag",Ne,Xe.setState),At("onError",Re,Xe.setState),At("connectionRadius",$e,Xe.setState),At("isValidConnection",be,Xe.setState),At("nodeDragThreshold",Ue,Xe.setState),ql(t,Ve),ql(e,it),ql(w,zt),ql(R,qt),ql(P,je),ql(N,Cn),null},lI={display:"none"},eB={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},gD="react-flow__node-desc",yD="react-flow__edge-desc",tB="react-flow__aria-live",nB=t=>t.ariaLiveMessage;function iB({rfId:t}){const e=kn(nB);return Te.createElement("div",{id:`${tB}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:eB},e)}function rB({rfId:t,disableKeyboardA11y:e}){return Te.createElement(Te.Fragment,null,Te.createElement("div",{id:`${gD}-${t}`,style:lI},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),Te.createElement("div",{id:`${yD}-${t}`,style:lI},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&Te.createElement(iB,{rfId:t}))}var ih=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,i]=q.useState(!1),r=q.useRef(!1),s=q.useRef(new Set([])),[a,l]=q.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),p=d.reduce((y,T)=>y.concat(...T),[]);return[d,p]}return[[],[]]},[t]);return q.useEffect(()=>{const f=typeof document<"u"?document:null,d=e?.target||f;if(t!==null){const p=v=>{if(r.current=v.ctrlKey||v.metaKey||v.shiftKey,(!r.current||r.current&&!e.actInsideInputWithModifier)&&YE(v))return!1;const w=fI(v.code,l);s.current.add(v[w]),cI(a,s.current,!1)&&(v.preventDefault(),i(!0))},y=v=>{if((!r.current||r.current&&!e.actInsideInputWithModifier)&&YE(v))return!1;const w=fI(v.code,l);cI(a,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(v[w]),v.key==="Meta"&&s.current.clear(),r.current=!1},T=()=>{s.current.clear(),i(!1)};return d?.addEventListener("keydown",p),d?.addEventListener("keyup",y),window.addEventListener("blur",T),()=>{d?.removeEventListener("keydown",p),d?.removeEventListener("keyup",y),window.removeEventListener("blur",T)}}},[t,i]),n};function cI(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(r=>e.has(r)))}function fI(t,e){return e.includes(t)?"code":"key"}function _D(t,e,n,i){const r=t.parentNode||t.parentId;if(!r)return n;const s=e.get(r),a=pc(s,i);return _D(s,e,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(s[Vn]?.z??0)>(n.z??0)?s[Vn]?.z??0:n.z??0},i)}function ED(t,e,n){t.forEach(i=>{const r=i.parentNode||i.parentId;if(r&&!t.has(r))throw new Error(`Parent node ${r} not found`);if(r||n?.[i.id]){const{x:s,y:a,z:l}=_D(i,t,{...i.position,z:i[Vn]?.z??0},e);i.positionAbsolute={x:s,y:a},i[Vn].z=l,n?.[i.id]&&(i[Vn].isParent=!0)}})}function F_(t,e,n,i){const r=new Map,s={},a=i?1e3:0;return t.forEach(l=>{const f=(os(l.zIndex)?l.zIndex:0)+(l.selected?a:0),d=e.get(l.id),p={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},y=l.parentNode||l.parentId;y&&(s[y]=!0);const T=d?.type&&d?.type!==l.type;Object.defineProperty(p,Vn,{enumerable:!1,value:{handleBounds:T?void 0:d?.[Vn]?.handleBounds,z:f}}),r.set(l.id,p)}),ED(r,n,s),r}function TD(t,e={}){const{getNodes:n,width:i,height:r,minZoom:s,maxZoom:a,d3Zoom:l,d3Selection:f,fitViewOnInitDone:d,fitViewOnInit:p,nodeOrigin:y}=t(),T=e.initial&&!d&&p;if(l&&f&&(T||!e.initial)){const b=n().filter(R=>{const N=e.includeHiddenNodes?R.width&&R.height:!R.hidden;return e.nodes?.length?N&&e.nodes.some(V=>V.id===R.id):N}),w=b.every(R=>R.width&&R.height);if(b.length>0&&w){const R=wv(b,y),{x:N,y:V,zoom:G}=sD(R,i,r,e.minZoom??s,e.maxZoom??a,e.padding??.1),F=Pa.translate(N,V).scale(G);return typeof e.duration=="number"&&e.duration>0?l.transform(xu(f,e.duration),F):l.transform(f,F),!0}}return!1}function sB(t,e){return t.forEach(n=>{const i=e.get(n.id);i&&e.set(i.id,{...i,[Vn]:i[Vn],selected:n.selected})}),new Map(e)}function oB(t,e){return e.map(n=>{const i=t.find(r=>r.id===n.id);return i&&(n.selected=i.selected),n})}function fm({changedNodes:t,changedEdges:e,get:n,set:i}){const{nodeInternals:r,edges:s,onNodesChange:a,onEdgesChange:l,hasDefaultNodes:f,hasDefaultEdges:d}=n();t?.length&&(f&&i({nodeInternals:sB(t,r)}),a?.(t)),e?.length&&(d&&i({edges:oB(e,s)}),l?.(e))}const Gl=()=>{},aB={zoomIn:Gl,zoomOut:Gl,zoomTo:Gl,getZoom:()=>1,setViewport:Gl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Gl,fitBounds:Gl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},uB=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),lB=()=>{const t=Ai(),{d3Zoom:e,d3Selection:n}=kn(uB,$i);return q.useMemo(()=>n&&e?{zoomIn:r=>e.scaleBy(xu(n,r?.duration),1.2),zoomOut:r=>e.scaleBy(xu(n,r?.duration),1/1.2),zoomTo:(r,s)=>e.scaleTo(xu(n,s?.duration),r),getZoom:()=>t.getState().transform[2],setViewport:(r,s)=>{const[a,l,f]=t.getState().transform,d=Pa.translate(r.x??a,r.y??l).scale(r.zoom??f);e.transform(xu(n,s?.duration),d)},getViewport:()=>{const[r,s,a]=t.getState().transform;return{x:r,y:s,zoom:a}},fitView:r=>TD(t.getState,r),setCenter:(r,s,a)=>{const{width:l,height:f,maxZoom:d}=t.getState(),p=typeof a?.zoom<"u"?a.zoom:d,y=l/2-r*p,T=f/2-s*p,v=Pa.translate(y,T).scale(p);e.transform(xu(n,a?.duration),v)},fitBounds:(r,s)=>{const{width:a,height:l,minZoom:f,maxZoom:d}=t.getState(),{x:p,y,zoom:T}=sD(r,a,l,f,d,s?.padding??.1),v=Pa.translate(p,y).scale(T);e.transform(xu(n,s?.duration),v)},project:r=>{const{transform:s,snapToGrid:a,snapGrid:l}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),XE(r,s,a,l)},screenToFlowPosition:r=>{const{transform:s,snapToGrid:a,snapGrid:l,domNode:f}=t.getState();if(!f)return r;const{x:d,y:p}=f.getBoundingClientRect(),y={x:r.x-d,y:r.y-p};return XE(y,s,a,l)},flowToScreenPosition:r=>{const{transform:s,domNode:a}=t.getState();if(!a)return r;const{x:l,y:f}=a.getBoundingClientRect(),d=nD(r,s);return{x:d.x+l,y:d.y+f}},viewportInitialized:!0}:aB,[e,n])};function Ch(){const t=lB(),e=Ai(),n=q.useCallback(()=>e.getState().getNodes().map(w=>({...w})),[]),i=q.useCallback(w=>e.getState().nodeInternals.get(w),[]),r=q.useCallback(()=>{const{edges:w=[]}=e.getState();return w.map(R=>({...R}))},[]),s=q.useCallback(w=>{const{edges:R=[]}=e.getState();return R.find(N=>N.id===w)},[]),a=q.useCallback(w=>{const{getNodes:R,setNodes:N,hasDefaultNodes:V,onNodesChange:G}=e.getState(),F=R(),J=typeof w=="function"?w(F):w;if(V)N(J);else if(G){const K=J.length===0?F.map(M=>({type:"remove",id:M.id})):J.map(M=>({item:M,type:"reset"}));G(K)}},[]),l=q.useCallback(w=>{const{edges:R=[],setEdges:N,hasDefaultEdges:V,onEdgesChange:G}=e.getState(),F=typeof w=="function"?w(R):w;if(V)N(F);else if(G){const J=F.length===0?R.map(K=>({type:"remove",id:K.id})):F.map(K=>({item:K,type:"reset"}));G(J)}},[]),f=q.useCallback(w=>{const R=Array.isArray(w)?w:[w],{getNodes:N,setNodes:V,hasDefaultNodes:G,onNodesChange:F}=e.getState();if(G){const K=[...N(),...R];V(K)}else if(F){const J=R.map(K=>({item:K,type:"add"}));F(J)}},[]),d=q.useCallback(w=>{const R=Array.isArray(w)?w:[w],{edges:N=[],setEdges:V,hasDefaultEdges:G,onEdgesChange:F}=e.getState();if(G)V([...N,...R]);else if(F){const J=R.map(K=>({item:K,type:"add"}));F(J)}},[]),p=q.useCallback(()=>{const{getNodes:w,edges:R=[],transform:N}=e.getState(),[V,G,F]=N;return{nodes:w().map(J=>({...J})),edges:R.map(J=>({...J})),viewport:{x:V,y:G,zoom:F}}},[]),y=q.useCallback(({nodes:w,edges:R})=>{const{nodeInternals:N,getNodes:V,edges:G,hasDefaultNodes:F,hasDefaultEdges:J,onNodesDelete:K,onEdgesDelete:M,onNodesChange:P,onEdgesChange:L}=e.getState(),O=(w||[]).map(Q=>Q.id),B=(R||[]).map(Q=>Q.id),z=V().reduce((Q,$)=>{const j=$.parentNode||$.parentId,se=!O.includes($.id)&&j&&Q.find(I=>I.id===j);return(typeof $.deletable=="boolean"?$.deletable:!0)&&(O.includes($.id)||se)&&Q.push($),Q},[]),D=G.filter(Q=>typeof Q.deletable=="boolean"?Q.deletable:!0),U=D.filter(Q=>B.includes(Q.id));if(z||U){const Q=rD(z,D),$=[...U,...Q],j=$.reduce((se,oe)=>(se.includes(oe.id)||se.push(oe.id),se),[]);if((J||F)&&(J&&e.setState({edges:G.filter(se=>!j.includes(se.id))}),F&&(z.forEach(se=>{N.delete(se.id)}),e.setState({nodeInternals:new Map(N)}))),j.length>0&&(M?.($),L&&L(j.map(se=>({id:se,type:"remove"})))),z.length>0&&(K?.(z),P)){const se=z.map(oe=>({id:oe.id,type:"remove"}));P(se)}}},[]),T=q.useCallback(w=>{const R=R9(w),N=R?null:e.getState().nodeInternals.get(w.id);return!R&&!N?[null,null,R]:[R?w:nI(N),N,R]},[]),v=q.useCallback((w,R=!0,N)=>{const[V,G,F]=T(w);return V?(N||e.getState().getNodes()).filter(J=>{if(!F&&(J.id===G.id||!J.positionAbsolute))return!1;const K=nI(J),M=$E(K,V);return R&&M>0||M>=V.width*V.height}):[]},[]),b=q.useCallback((w,R,N=!0)=>{const[V]=T(w);if(!V)return!1;const G=$E(V,R);return N&&G>0||G>=V.width*V.height},[]);return q.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:r,getEdge:s,setNodes:a,setEdges:l,addNodes:f,addEdges:d,toObject:p,deleteElements:y,getIntersectingNodes:v,isNodeIntersecting:b}),[t,n,i,r,s,a,l,f,d,p,y,v,b])}const cB={actInsideInputWithModifier:!1};var fB=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Ai(),{deleteElements:i}=Ch(),r=ih(t,cB),s=ih(e);q.useEffect(()=>{if(r){const{edges:a,getNodes:l}=n.getState(),f=l().filter(p=>p.selected),d=a.filter(p=>p.selected);i({nodes:f,edges:d}),n.setState({nodesSelectionActive:!1})}},[r]),q.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function dB(t){const e=Ai();q.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const r=Tv(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Oo.error004()),e.setState({width:r.width||500,height:r.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const Nv={position:"absolute",width:"100%",height:"100%",top:0,left:0},hB=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,dm=t=>({x:t.x,y:t.y,zoom:t.k}),$l=(t,e)=>t.target.closest(`.${e}`),dI=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),hI=t=>{const e=t.ctrlKey&&rg()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},pB=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),mB=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:a=!1,panOnScrollSpeed:l=.5,panOnScrollMode:f=Pu.Free,zoomOnDoubleClick:d=!0,elementsSelectable:p,panOnDrag:y=!0,defaultViewport:T,translateExtent:v,minZoom:b,maxZoom:w,zoomActivationKeyCode:R,preventScrolling:N=!0,children:V,noWheelClassName:G,noPanClassName:F})=>{const J=q.useRef(),K=Ai(),M=q.useRef(!1),P=q.useRef(!1),L=q.useRef(null),O=q.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:z,d3ZoomHandler:D,userSelectionActive:U}=kn(pB,$i),Q=ih(R),$=q.useRef(0),j=q.useRef(!1),se=q.useRef();return dB(L),q.useEffect(()=>{if(L.current){const oe=L.current.getBoundingClientRect(),I=T9().scaleExtent([b,w]).translateExtent(v),ne=Es(L.current).call(I),le=Pa.translate(T.x,T.y).scale(xc(T.zoom,b,w)),H=[[0,0],[oe.width,oe.height]],ye=I.constrain()(le,H,v);I.transform(ne,ye),I.wheelDelta(hI),K.setState({d3Zoom:I,d3Selection:ne,d3ZoomHandler:ne.on("wheel.zoom"),transform:[ye.x,ye.y,ye.k],domNode:L.current.closest(".react-flow")})}},[]),q.useEffect(()=>{z&&B&&(a&&!Q&&!U?z.on("wheel.zoom",oe=>{if($l(oe,G))return!1;oe.preventDefault(),oe.stopImmediatePropagation();const I=z.property("__zoom").k||1;if(oe.ctrlKey&&s){const be=qs(oe),Ue=hI(oe),Ve=I*Math.pow(2,Ue);B.scaleTo(z,Ve,be,oe);return}const ne=oe.deltaMode===1?20:1;let le=f===Pu.Vertical?0:oe.deltaX*ne,H=f===Pu.Horizontal?0:oe.deltaY*ne;!rg()&&oe.shiftKey&&f!==Pu.Vertical&&(le=oe.deltaY*ne,H=0),B.translateBy(z,-(le/I)*l,-(H/I)*l,{internal:!0});const ye=dm(z.property("__zoom")),{onViewportChangeStart:Ne,onViewportChange:Re,onViewportChangeEnd:$e}=K.getState();clearTimeout(se.current),j.current||(j.current=!0,e?.(oe,ye),Ne?.(ye)),j.current&&(t?.(oe,ye),Re?.(ye),se.current=setTimeout(()=>{n?.(oe,ye),$e?.(ye),j.current=!1},150))},{passive:!1}):typeof D<"u"&&z.on("wheel.zoom",function(oe,I){if(!N&&oe.type==="wheel"&&!oe.ctrlKey||$l(oe,G))return null;oe.preventDefault(),D.call(this,oe,I)},{passive:!1}))},[U,a,f,z,B,D,Q,s,N,G,e,t,n]),q.useEffect(()=>{B&&B.on("start",oe=>{if(!oe.sourceEvent||oe.sourceEvent.internal)return null;$.current=oe.sourceEvent?.button;const{onViewportChangeStart:I}=K.getState(),ne=dm(oe.transform);M.current=!0,O.current=ne,oe.sourceEvent?.type==="mousedown"&&K.setState({paneDragging:!0}),I?.(ne),e?.(oe.sourceEvent,ne)})},[B,e]),q.useEffect(()=>{B&&(U&&!M.current?B.on("zoom",null):U||B.on("zoom",oe=>{const{onViewportChange:I}=K.getState();if(K.setState({transform:[oe.transform.x,oe.transform.y,oe.transform.k]}),P.current=!!(i&&dI(y,$.current??0)),(t||I)&&!oe.sourceEvent?.internal){const ne=dm(oe.transform);I?.(ne),t?.(oe.sourceEvent,ne)}}))},[U,B,t,y,i]),q.useEffect(()=>{B&&B.on("end",oe=>{if(!oe.sourceEvent||oe.sourceEvent.internal)return null;const{onViewportChangeEnd:I}=K.getState();if(M.current=!1,K.setState({paneDragging:!1}),i&&dI(y,$.current??0)&&!P.current&&i(oe.sourceEvent),P.current=!1,(n||I)&&hB(O.current,oe.transform)){const ne=dm(oe.transform);O.current=ne,clearTimeout(J.current),J.current=setTimeout(()=>{I?.(ne),n?.(oe.sourceEvent,ne)},a?150:0)}})},[B,a,y,n,i]),q.useEffect(()=>{B&&B.filter(oe=>{const I=Q||r,ne=s&&oe.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&oe.button===1&&oe.type==="mousedown"&&($l(oe,"react-flow__node")||$l(oe,"react-flow__edge")))return!0;if(!y&&!I&&!a&&!d&&!s||U||!d&&oe.type==="dblclick"||$l(oe,G)&&oe.type==="wheel"||$l(oe,F)&&(oe.type!=="wheel"||a&&oe.type==="wheel"&&!Q)||!s&&oe.ctrlKey&&oe.type==="wheel"||!I&&!a&&!ne&&oe.type==="wheel"||!y&&(oe.type==="mousedown"||oe.type==="touchstart")||Array.isArray(y)&&!y.includes(oe.button)&&oe.type==="mousedown")return!1;const le=Array.isArray(y)&&y.includes(oe.button)||!oe.button||oe.button<=1;return(!oe.ctrlKey||oe.type==="wheel")&&le})},[U,B,r,s,a,d,y,p,Q]),Te.createElement("div",{className:"react-flow__renderer",ref:L,style:Nv},V)},gB=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function yB(){const{userSelectionActive:t,userSelectionRect:e}=kn(gB,$i);return t&&e?Te.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function pI(t,e){const n=e.parentNode||e.parentId,i=t.find(r=>r.id===n);if(i){const r=e.position.x+e.width-i.width,s=e.position.y+e.height-i.height;if(r>0||s>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,r>0&&(i.style.width+=r),s>0&&(i.style.height+=s),e.position.x<0){const a=Math.abs(e.position.x);i.position.x=i.position.x-a,i.style.width+=a,e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);i.position.y=i.position.y-a,i.style.height+=a,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function vD(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,r)=>{const s=t.filter(l=>l.id===r.id);if(s.length===0)return i.push(r),i;const a={...r};for(const l of s)if(l)switch(l.type){case"select":{a.selected=l.selected;break}case"position":{typeof l.position<"u"&&(a.position=l.position),typeof l.positionAbsolute<"u"&&(a.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&pI(i,a);break}case"dimensions":{typeof l.dimensions<"u"&&(a.width=l.dimensions.width,a.height=l.dimensions.height),typeof l.updateStyle<"u"&&(a.style={...a.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(a.resizing=l.resizing),a.expandParent&&pI(i,a);break}case"remove":return i}return i.push(a),i},n)}function SD(t,e){return vD(t,e)}function _B(t,e){return vD(t,e)}const Ca=(t,e)=>({id:t,type:"select",selected:e});function uc(t,e){return t.reduce((n,i)=>{const r=e.includes(i.id);return!i.selected&&r?(i.selected=!0,n.push(Ca(i.id,!0))):i.selected&&!r&&(i.selected=!1,n.push(Ca(i.id,!1))),n},[])}const H_=(t,e)=>n=>{n.target===e.current&&t?.(n)},EB=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),CD=q.memo(({isSelecting:t,selectionMode:e=th.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:a,onPaneScroll:l,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:p,children:y})=>{const T=q.useRef(null),v=Ai(),b=q.useRef(0),w=q.useRef(0),R=q.useRef(),{userSelectionActive:N,elementsSelectable:V,dragging:G}=kn(EB,$i),F=()=>{v.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,w.current=0},J=D=>{s?.(D),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},K=D=>{if(Array.isArray(n)&&n?.includes(2)){D.preventDefault();return}a?.(D)},M=l?D=>l(D):void 0,P=D=>{const{resetSelectedElements:U,domNode:Q}=v.getState();if(R.current=Q?.getBoundingClientRect(),!V||!t||D.button!==0||D.target!==T.current||!R.current)return;const{x:$,y:j}=La(D,R.current);U(),v.setState({userSelectionRect:{width:0,height:0,startX:$,startY:j,x:$,y:j}}),i?.(D)},L=D=>{const{userSelectionRect:U,nodeInternals:Q,edges:$,transform:j,onNodesChange:se,onEdgesChange:oe,nodeOrigin:I,getNodes:ne}=v.getState();if(!t||!R.current||!U)return;v.setState({userSelectionActive:!0,nodesSelectionActive:!1});const le=La(D,R.current),H=U.startX??0,ye=U.startY??0,Ne={...U,x:le.x<H?le.x:H,y:le.y<ye?le.y:ye,width:Math.abs(le.x-H),height:Math.abs(le.y-ye)},Re=ne(),$e=iD(Q,Ne,j,e===th.Partial,!0,I),be=rD($e,$).map(Ve=>Ve.id),Ue=$e.map(Ve=>Ve.id);if(b.current!==Ue.length){b.current=Ue.length;const Ve=uc(Re,Ue);Ve.length&&se?.(Ve)}if(w.current!==be.length){w.current=be.length;const Ve=uc($,be);Ve.length&&oe?.(Ve)}v.setState({userSelectionRect:Ne})},O=D=>{if(D.button!==0)return;const{userSelectionRect:U}=v.getState();!N&&U&&D.target===T.current&&J?.(D),v.setState({nodesSelectionActive:b.current>0}),F(),r?.(D)},B=D=>{N&&(v.setState({nodesSelectionActive:b.current>0}),r?.(D)),F()},z=V&&(t||N);return Te.createElement("div",{className:ur(["react-flow__pane",{dragging:G,selection:t}]),onClick:z?void 0:H_(J,T),onContextMenu:H_(K,T),onWheel:H_(M,T),onMouseEnter:z?void 0:f,onMouseDown:z?P:void 0,onMouseMove:z?L:d,onMouseUp:z?O:void 0,onMouseLeave:z?B:p,ref:T,style:Nv},y,Te.createElement(yB,null))});CD.displayName="Pane";function AD(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const i=e.get(n);return i?i.selected?!0:AD(i,e):!1}function mI(t,e,n){let i=t;do{if(i?.matches(e))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function TB(t,e,n,i){return Array.from(t.values()).filter(r=>(r.selected||r.id===i)&&(!r.parentNode||r.parentId||!AD(r,t))&&(r.draggable||e&&typeof r.draggable>"u")).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(r.positionAbsolute?.x??0),y:n.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}))}function vB(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function bD(t,e,n,i,r=[0,0],s){const a=vB(t,t.extent||i);let l=a;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const y=n.get(f),{x:T,y:v}=pc(y,r).positionAbsolute;l=y&&os(T)&&os(v)&&os(y.width)&&os(y.height)?[[T+t.width*r[0],v+t.height*r[1]],[T+y.width-t.width+t.width*r[0],v+y.height-t.height+t.height*r[1]]]:l}else s?.("005",Oo.error005()),l=a;else if(t.extent&&f&&t.extent!=="parent"){const y=n.get(f),{x:T,y:v}=pc(y,r).positionAbsolute;l=[[t.extent[0][0]+T,t.extent[0][1]+v],[t.extent[1][0]+T,t.extent[1][1]+v]]}let d={x:0,y:0};if(f){const y=n.get(f);d=pc(y,r).positionAbsolute}const p=l&&l!=="parent"?vv(e,l):e;return{position:{x:p.x-d.x,y:p.y-d.y},positionAbsolute:p}}function z_({nodeId:t,dragItems:e,nodeInternals:n}){const i=e.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[t?i.find(r=>r.id===t):i[0],i]}const gI=(t,e,n,i)=>{const r=e.querySelectorAll(t);if(!r||!r.length)return null;const s=Array.from(r),a=e.getBoundingClientRect(),l={x:a.width*i[0],y:a.height*i[1]};return s.map(f=>{const d=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(d.left-a.left-l.x)/n,y:(d.top-a.top-l.y)/n,...Tv(f)}})};function cd(t,e,n){return n===void 0?n:i=>{const r=e().nodeInternals.get(t);r&&n(i,{...r})}}function JE({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:a,nodeInternals:l,onError:f}=e.getState(),d=l.get(t);if(!d){f?.("012",Oo.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&a)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):r([t])}function SB(){const t=Ai();return q.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:r,snapToGrid:s}=t.getState(),a=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,f={x:(a-i[0])/i[2],y:(l-i[1])/i[2]};return{xSnapped:s?r[0]*Math.round(f.x/r[0]):f.x,ySnapped:s?r[1]*Math.round(f.y/r[1]):f.y,...f}},[])}function q_(t){return(e,n,i)=>t?.(e,i)}function ID({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:r,isSelectable:s,selectNodesOnDrag:a}){const l=Ai(),[f,d]=q.useState(!1),p=q.useRef([]),y=q.useRef({x:null,y:null}),T=q.useRef(0),v=q.useRef(null),b=q.useRef({x:0,y:0}),w=q.useRef(null),R=q.useRef(!1),N=q.useRef(!1),V=q.useRef(!1),G=SB();return q.useEffect(()=>{if(t?.current){const F=Es(t.current),J=({x:P,y:L})=>{const{nodeInternals:O,onNodeDrag:B,onSelectionDrag:z,updateNodePositions:D,nodeExtent:U,snapGrid:Q,snapToGrid:$,nodeOrigin:j,onError:se}=l.getState();y.current={x:P,y:L};let oe=!1,I={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&U){const le=wv(p.current,j);I=Sv(le)}if(p.current=p.current.map(le=>{const H={x:P-le.distance.x,y:L-le.distance.y};$&&(H.x=Q[0]*Math.round(H.x/Q[0]),H.y=Q[1]*Math.round(H.y/Q[1]));const ye=[[U[0][0],U[0][1]],[U[1][0],U[1][1]]];p.current.length>1&&U&&!le.extent&&(ye[0][0]=le.positionAbsolute.x-I.x+U[0][0],ye[1][0]=le.positionAbsolute.x+(le.width??0)-I.x2+U[1][0],ye[0][1]=le.positionAbsolute.y-I.y+U[0][1],ye[1][1]=le.positionAbsolute.y+(le.height??0)-I.y2+U[1][1]);const Ne=bD(le,H,O,ye,j,se);return oe=oe||le.position.x!==Ne.position.x||le.position.y!==Ne.position.y,le.position=Ne.position,le.positionAbsolute=Ne.positionAbsolute,le}),!oe)return;D(p.current,!0,!0),d(!0);const ne=r?B:q_(z);if(ne&&w.current){const[le,H]=z_({nodeId:r,dragItems:p.current,nodeInternals:O});ne(w.current,le,H)}},K=()=>{if(!v.current)return;const[P,L]=W2(b.current,v.current);if(P!==0||L!==0){const{transform:O,panBy:B}=l.getState();y.current.x=(y.current.x??0)-P/O[2],y.current.y=(y.current.y??0)-L/O[2],B({x:P,y:L})&&J(y.current)}T.current=requestAnimationFrame(K)},M=P=>{const{nodeInternals:L,multiSelectionActive:O,nodesDraggable:B,unselectNodesAndEdges:z,onNodeDragStart:D,onSelectionDragStart:U}=l.getState();N.current=!0;const Q=r?D:q_(U);(!a||!s)&&!O&&r&&(L.get(r)?.selected||z()),r&&s&&a&&JE({id:r,store:l,nodeRef:t});const $=G(P);if(y.current=$,p.current=TB(L,B,$,r),Q&&p.current){const[j,se]=z_({nodeId:r,dragItems:p.current,nodeInternals:L});Q(P.sourceEvent,j,se)}};if(e)F.on(".drag",null);else{const P=NU().on("start",L=>{const{domNode:O,nodeDragThreshold:B}=l.getState();B===0&&M(L),V.current=!1;const z=G(L);y.current=z,v.current=O?.getBoundingClientRect()||null,b.current=La(L.sourceEvent,v.current)}).on("drag",L=>{const O=G(L),{autoPanOnNodeDrag:B,nodeDragThreshold:z}=l.getState();if(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1&&(V.current=!0),!V.current){if(!R.current&&N.current&&B&&(R.current=!0,K()),!N.current){const D=O.xSnapped-(y?.current?.x??0),U=O.ySnapped-(y?.current?.y??0);Math.sqrt(D*D+U*U)>z&&M(L)}(y.current.x!==O.xSnapped||y.current.y!==O.ySnapped)&&p.current&&N.current&&(w.current=L.sourceEvent,b.current=La(L.sourceEvent,v.current),J(O))}}).on("end",L=>{if(!(!N.current||V.current)&&(d(!1),R.current=!1,N.current=!1,cancelAnimationFrame(T.current),p.current)){const{updateNodePositions:O,nodeInternals:B,onNodeDragStop:z,onSelectionDragStop:D}=l.getState(),U=r?z:q_(D);if(O(p.current,!1,!1),U){const[Q,$]=z_({nodeId:r,dragItems:p.current,nodeInternals:B});U(L.sourceEvent,Q,$)}}}).filter(L=>{const O=L.target;return!L.button&&(!n||!mI(O,`.${n}`,t))&&(!i||mI(O,i,t))});return F.call(P),()=>{F.on(".drag",null)}}}},[t,e,n,i,s,l,r,a,G]),f}function wD(){const t=Ai();return q.useCallback(n=>{const{nodeInternals:i,nodeExtent:r,updateNodePositions:s,getNodes:a,snapToGrid:l,snapGrid:f,onError:d,nodesDraggable:p}=t.getState(),y=a().filter(V=>V.selected&&(V.draggable||p&&typeof V.draggable>"u")),T=l?f[0]:5,v=l?f[1]:5,b=n.isShiftPressed?4:1,w=n.x*T*b,R=n.y*v*b,N=y.map(V=>{if(V.positionAbsolute){const G={x:V.positionAbsolute.x+w,y:V.positionAbsolute.y+R};l&&(G.x=f[0]*Math.round(G.x/f[0]),G.y=f[1]*Math.round(G.y/f[1]));const{positionAbsolute:F,position:J}=bD(V,G,i,r,void 0,d);V.position=J,V.positionAbsolute=F}return V});s(N,!0,!1)},[])}const mc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var fd=t=>{const e=({id:n,type:i,data:r,xPos:s,yPos:a,xPosOrigin:l,yPosOrigin:f,selected:d,onClick:p,onMouseEnter:y,onMouseMove:T,onMouseLeave:v,onContextMenu:b,onDoubleClick:w,style:R,className:N,isDraggable:V,isSelectable:G,isConnectable:F,isFocusable:J,selectNodesOnDrag:K,sourcePosition:M,targetPosition:P,hidden:L,resizeObserver:O,dragHandle:B,zIndex:z,isParent:D,noDragClassName:U,noPanClassName:Q,initialized:$,disableKeyboardA11y:j,ariaLabel:se,rfId:oe,hasHandleBounds:I})=>{const ne=Ai(),le=q.useRef(null),H=q.useRef(null),ye=q.useRef(M),Ne=q.useRef(P),Re=q.useRef(i),$e=G||V||p||y||T||v,be=wD(),Ue=cd(n,ne.getState,y),Ve=cd(n,ne.getState,T),it=cd(n,ne.getState,v),Ht=cd(n,ne.getState,b),zt=cd(n,ne.getState,w),qt=tt=>{const{nodeDragThreshold:Xe}=ne.getState();if(G&&(!K||!V||Xe>0)&&JE({id:n,store:ne,nodeRef:le}),p){const gn=ne.getState().nodeInternals.get(n);gn&&p(tt,{...gn})}},je=tt=>{if(!YE(tt)&&!j)if(Q2.includes(tt.key)&&G){const Xe=tt.key==="Escape";JE({id:n,store:ne,unselect:Xe,nodeRef:le})}else V&&d&&Object.prototype.hasOwnProperty.call(mc,tt.key)&&(ne.setState({ariaLiveMessage:`Moved selected node ${tt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~a}`}),be({x:mc[tt.key].x,y:mc[tt.key].y,isShiftPressed:tt.shiftKey}))};q.useEffect(()=>()=>{H.current&&(O?.unobserve(H.current),H.current=null)},[]),q.useEffect(()=>{if(le.current&&!L){const tt=le.current;(!$||!I||H.current!==tt)&&(H.current&&O?.unobserve(H.current),O?.observe(tt),H.current=tt)}},[L,$,I]),q.useEffect(()=>{const tt=Re.current!==i,Xe=ye.current!==M,gn=Ne.current!==P;le.current&&(tt||Xe||gn)&&(tt&&(Re.current=i),Xe&&(ye.current=M),gn&&(Ne.current=P),ne.getState().updateNodeDimensions([{id:n,nodeElement:le.current,forceUpdate:!0}]))},[n,i,M,P]);const Cn=ID({nodeRef:le,disabled:L||!V,noDragClassName:U,handleSelector:B,nodeId:n,isSelectable:G,selectNodesOnDrag:K});return L?null:Te.createElement("div",{className:ur(["react-flow__node",`react-flow__node-${i}`,{[Q]:V},N,{selected:d,selectable:G,parent:D,dragging:Cn}]),ref:le,style:{zIndex:z,transform:`translate(${l}px,${f}px)`,pointerEvents:$e?"all":"none",visibility:$?"visible":"hidden",...R},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ue,onMouseMove:Ve,onMouseLeave:it,onContextMenu:Ht,onClick:qt,onDoubleClick:zt,onKeyDown:J?je:void 0,tabIndex:J?0:void 0,role:J?"button":void 0,"aria-describedby":j?void 0:`${gD}-${oe}`,"aria-label":se},Te.createElement(O9,{value:n},Te.createElement(t,{id:n,data:r,type:i,xPos:s,yPos:a,selected:d,isConnectable:F,sourcePosition:M,targetPosition:P,dragging:Cn,dragHandle:B,zIndex:z})))};return e.displayName="NodeWrapper",q.memo(e)};const CB=t=>{const e=t.getNodes().filter(n=>n.selected);return{...wv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function AB({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=Ai(),{width:r,height:s,x:a,y:l,transformString:f,userSelectionActive:d}=kn(CB,$i),p=wD(),y=q.useRef(null);if(q.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),ID({nodeRef:y}),d||!r||!s)return null;const T=t?b=>{const w=i.getState().getNodes().filter(R=>R.selected);t(b,w)}:void 0,v=b=>{Object.prototype.hasOwnProperty.call(mc,b.key)&&p({x:mc[b.key].x,y:mc[b.key].y,isShiftPressed:b.shiftKey})};return Te.createElement("div",{className:ur(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},Te.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:T,tabIndex:n?void 0:-1,onKeyDown:n?void 0:v,style:{width:r,height:s,top:l,left:a}}))}var bB=q.memo(AB);const IB=t=>t.nodesSelectionActive,xD=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:a,deleteKeyCode:l,onMove:f,onMoveStart:d,onMoveEnd:p,selectionKeyCode:y,selectionOnDrag:T,selectionMode:v,onSelectionStart:b,onSelectionEnd:w,multiSelectionKeyCode:R,panActivationKeyCode:N,zoomActivationKeyCode:V,elementsSelectable:G,zoomOnScroll:F,zoomOnPinch:J,panOnScroll:K,panOnScrollSpeed:M,panOnScrollMode:P,zoomOnDoubleClick:L,panOnDrag:O,defaultViewport:B,translateExtent:z,minZoom:D,maxZoom:U,preventScrolling:Q,onSelectionContextMenu:$,noWheelClassName:j,noPanClassName:se,disableKeyboardA11y:oe})=>{const I=kn(IB),ne=ih(y),le=ih(N),H=le||O,ye=le||K,Ne=ne||T&&H!==!0;return fB({deleteKeyCode:l,multiSelectionKeyCode:R}),Te.createElement(mB,{onMove:f,onMoveStart:d,onMoveEnd:p,onPaneContextMenu:s,elementsSelectable:G,zoomOnScroll:F,zoomOnPinch:J,panOnScroll:ye,panOnScrollSpeed:M,panOnScrollMode:P,zoomOnDoubleClick:L,panOnDrag:!ne&&H,defaultViewport:B,translateExtent:z,minZoom:D,maxZoom:U,zoomActivationKeyCode:V,preventScrolling:Q,noWheelClassName:j,noPanClassName:se},Te.createElement(CD,{onSelectionStart:b,onSelectionEnd:w,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:H,isSelecting:!!Ne,selectionMode:v},t,I&&Te.createElement(bB,{onSelectionContextMenu:$,noPanClassName:se,disableKeyboardA11y:oe})))};xD.displayName="FlowRenderer";var wB=q.memo(xD);function xB(t){return kn(q.useCallback(n=>t?iD(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function RB(t){const e={input:fd(t.input||dD),default:fd(t.default||QE),output:fd(t.output||pD),group:fd(t.group||Rv)},n={},i=Object.keys(t).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=fd(t[s]||QE),r),n);return{...e,...i}}const NB=({x:t,y:e,width:n,height:i,origin:r})=>!n||!i?{x:t,y:e}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:e}:{x:t-n*r[0],y:e-i*r[1]},DB=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),RD=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,updateNodeDimensions:s,onError:a}=kn(DB,$i),l=xB(t.onlyRenderVisibleElements),f=q.useRef(),d=q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(y=>{const T=y.map(v=>({id:v.target.getAttribute("data-id"),nodeElement:v.target,forceUpdate:!0}));s(T)});return f.current=p,p},[]);return q.useEffect(()=>()=>{f?.current?.disconnect()},[]),Te.createElement("div",{className:"react-flow__nodes",style:Nv},l.map(p=>{let y=p.type||"default";t.nodeTypes[y]||(a?.("003",Oo.error003(y)),y="default");const T=t.nodeTypes[y]||t.nodeTypes.default,v=!!(p.draggable||e&&typeof p.draggable>"u"),b=!!(p.selectable||r&&typeof p.selectable>"u"),w=!!(p.connectable||n&&typeof p.connectable>"u"),R=!!(p.focusable||i&&typeof p.focusable>"u"),N=t.nodeExtent?vv(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,V=N?.x??0,G=N?.y??0,F=NB({x:V,y:G,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return Te.createElement(T,{key:p.id,id:p.id,className:p.className,style:p.style,type:y,data:p.data,sourcePosition:p.sourcePosition||Ye.Bottom,targetPosition:p.targetPosition||Ye.Top,hidden:p.hidden,xPos:V,yPos:G,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:v,isSelectable:b,isConnectable:w,isFocusable:R,resizeObserver:d,dragHandle:p.dragHandle,zIndex:p[Vn]?.z??0,isParent:!!p[Vn]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[Vn]?.handleBounds})}))};RD.displayName="NodeRenderer";var MB=q.memo(RD);const kB=(t,e,n)=>n===Ye.Left?t-e:n===Ye.Right?t+e:t,PB=(t,e,n)=>n===Ye.Top?t-e:n===Ye.Bottom?t+e:t,yI="react-flow__edgeupdater",_I=({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:a,type:l})=>Te.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:a,className:ur([yI,`${yI}-${l}`]),cx:kB(e,i,t),cy:PB(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),LB=()=>!0;var Yl=t=>{const e=({id:n,className:i,type:r,data:s,onClick:a,onEdgeDoubleClick:l,selected:f,animated:d,label:p,labelStyle:y,labelShowBg:T,labelBgStyle:v,labelBgPadding:b,labelBgBorderRadius:w,style:R,source:N,target:V,sourceX:G,sourceY:F,targetX:J,targetY:K,sourcePosition:M,targetPosition:P,elementsSelectable:L,hidden:O,sourceHandleId:B,targetHandleId:z,onContextMenu:D,onMouseEnter:U,onMouseMove:Q,onMouseLeave:$,reconnectRadius:j,onReconnect:se,onReconnectStart:oe,onReconnectEnd:I,markerEnd:ne,markerStart:le,rfId:H,ariaLabel:ye,isFocusable:Ne,isReconnectable:Re,pathOptions:$e,interactionWidth:be,disableKeyboardA11y:Ue})=>{const Ve=q.useRef(null),[it,Ht]=q.useState(!1),[zt,qt]=q.useState(!1),je=Ai(),Cn=q.useMemo(()=>`url('#${WE(le,H)}')`,[le,H]),tt=q.useMemo(()=>`url('#${WE(ne,H)}')`,[ne,H]);if(O)return null;const Xe=kt=>{const{edges:tn,addSelectedEdges:nn,unselectNodesAndEdges:rn,multiSelectionActive:Pt}=je.getState(),Tt=tn.find(pn=>pn.id===n);Tt&&(L&&(je.setState({nodesSelectionActive:!1}),Tt.selected&&Pt?(rn({nodes:[],edges:[Tt]}),Ve.current?.blur()):nn([n])),a&&a(kt,Tt))},gn=ld(n,je.getState,l),Fn=ld(n,je.getState,D),Hn=ld(n,je.getState,U),Wn=ld(n,je.getState,Q),zn=ld(n,je.getState,$),wn=(kt,tn)=>{if(kt.button!==0)return;const{edges:nn,isValidConnection:rn}=je.getState(),Pt=tn?V:N,Tt=(tn?z:B)||null,pn=tn?"target":"source",ln=rn||LB,fs=tn,Oi=nn.find(Ui=>Ui.id===n);qt(!0),oe?.(kt,Oi,pn);const ri=Ui=>{qt(!1),I?.(Ui,Oi,pn)};uD({event:kt,handleId:Tt,nodeId:Pt,onConnect:Ui=>se?.(Oi,Ui),isTarget:fs,getState:je.getState,setState:je.setState,isValidConnection:ln,edgeUpdaterType:pn,onReconnectEnd:ri})},ii=kt=>wn(kt,!0),ue=kt=>wn(kt,!1),Se=()=>Ht(!0),ze=()=>Ht(!1),Qe=!L&&!a,_t=kt=>{if(!Ue&&Q2.includes(kt.key)&&L){const{unselectNodesAndEdges:tn,addSelectedEdges:nn,edges:rn}=je.getState();kt.key==="Escape"?(Ve.current?.blur(),tn({edges:[rn.find(Tt=>Tt.id===n)]})):nn([n])}};return Te.createElement("g",{className:ur(["react-flow__edge",`react-flow__edge-${r}`,i,{selected:f,animated:d,inactive:Qe,updating:it}]),onClick:Xe,onDoubleClick:gn,onContextMenu:Fn,onMouseEnter:Hn,onMouseMove:Wn,onMouseLeave:zn,onKeyDown:Ne?_t:void 0,tabIndex:Ne?0:void 0,role:Ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ye===null?void 0:ye||`Edge from ${N} to ${V}`,"aria-describedby":Ne?`${yD}-${H}`:void 0,ref:Ve},!zt&&Te.createElement(t,{id:n,source:N,target:V,selected:f,animated:d,label:p,labelStyle:y,labelShowBg:T,labelBgStyle:v,labelBgPadding:b,labelBgBorderRadius:w,data:s,style:R,sourceX:G,sourceY:F,targetX:J,targetY:K,sourcePosition:M,targetPosition:P,sourceHandleId:B,targetHandleId:z,markerStart:Cn,markerEnd:tt,pathOptions:$e,interactionWidth:be}),Re&&Te.createElement(Te.Fragment,null,(Re==="source"||Re===!0)&&Te.createElement(_I,{position:M,centerX:G,centerY:F,radius:j,onMouseDown:ii,onMouseEnter:Se,onMouseOut:ze,type:"source"}),(Re==="target"||Re===!0)&&Te.createElement(_I,{position:P,centerX:J,centerY:K,radius:j,onMouseDown:ue,onMouseEnter:Se,onMouseOut:ze,type:"target"})))};return e.displayName="EdgeWrapper",q.memo(e)};function OB(t){const e={default:Yl(t.default||sg),straight:Yl(t.bezier||bv),step:Yl(t.step||Av),smoothstep:Yl(t.step||Kg),simplebezier:Yl(t.simplebezier||Cv)},n={},i=Object.keys(t).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=Yl(t[s]||sg),r),n);return{...e,...i}}function EI(t,e,n=null){const i=(n?.x||0)+e.x,r=(n?.y||0)+e.y,s=n?.width||e.width,a=n?.height||e.height;switch(t){case Ye.Top:return{x:i+s/2,y:r};case Ye.Right:return{x:i+s,y:r+a/2};case Ye.Bottom:return{x:i+s/2,y:r+a};case Ye.Left:return{x:i,y:r+a/2}}}function TI(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const UB=(t,e,n,i,r,s)=>{const a=EI(n,t,e),l=EI(s,i,r);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}};function BB({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:i,targetWidth:r,targetHeight:s,width:a,height:l,transform:f}){const d={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+r),y2:Math.max(t.y+i,e.y+s)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const p=Sv({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:a/f[2],height:l/f[2]}),y=Math.max(0,Math.min(p.x2,d.x2)-Math.max(p.x,d.x)),T=Math.max(0,Math.min(p.y2,d.y2)-Math.max(p.y,d.y));return Math.ceil(y*T)>0}function vI(t){const e=t?.[Vn]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const VB=[{level:0,isMaxLevel:!0,edges:[]}];function FB(t,e,n=!1){let i=-1;const r=t.reduce((a,l)=>{const f=os(l.zIndex);let d=f?l.zIndex:0;if(n){const p=e.get(l.target),y=e.get(l.source),T=l.selected||p?.selected||y?.selected,v=Math.max(y?.[Vn]?.z||0,p?.[Vn]?.z||0,1e3);d=(f?l.zIndex:0)+(T?v:0)}return a[d]?a[d].push(l):a[d]=[l],i=d>i?d:i,a},{}),s=Object.entries(r).map(([a,l])=>{const f=+a;return{edges:l,level:f,isMaxLevel:f===i}});return s.length===0?VB:s}function HB(t,e,n){const i=kn(q.useCallback(r=>t?r.edges.filter(s=>{const a=e.get(s.source),l=e.get(s.target);return a?.width&&a?.height&&l?.width&&l?.height&&BB({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[t,e]));return FB(i,e,n)}const zB=({color:t="none",strokeWidth:e=1})=>Te.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),qB=({color:t="none",strokeWidth:e=1})=>Te.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),SI={[nh.Arrow]:zB,[nh.ArrowClosed]:qB};function GB(t){const e=Ai();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(SI,t)?SI[t]:(e.getState().onError?.("009",Oo.error009(t)),null),[t])}const $B=({id:t,type:e,color:n,width:i=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{const f=GB(e);return f?Te.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},Te.createElement(f,{color:n,strokeWidth:a})):null},YB=({defaultColor:t,rfId:e})=>n=>{const i=[];return n.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const l=WE(a,e);i.includes(l)||(r.push({id:l,color:a.color||t,...a}),i.push(l))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},ND=({defaultColor:t,rfId:e})=>{const n=kn(q.useCallback(YB({defaultColor:t,rfId:e}),[t,e]),(i,r)=>!(i.length!==r.length||i.some((s,a)=>s.id!==r[a].id)));return Te.createElement("defs",null,n.map(i=>Te.createElement($B,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};ND.displayName="MarkerDefinitions";var KB=q.memo(ND);const WB=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),DD=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:i,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:f,onEdgeMouseLeave:d,onEdgeClick:p,onEdgeDoubleClick:y,onReconnect:T,onReconnectStart:v,onReconnectEnd:b,reconnectRadius:w,children:R,disableKeyboardA11y:N})=>{const{edgesFocusable:V,edgesUpdatable:G,elementsSelectable:F,width:J,height:K,connectionMode:M,nodeInternals:P,onError:L}=kn(WB,$i),O=HB(e,P,n);return J?Te.createElement(Te.Fragment,null,O.map(({level:B,edges:z,isMaxLevel:D})=>Te.createElement("svg",{key:B,style:{zIndex:B},width:J,height:K,className:"react-flow__edges react-flow__container"},D&&Te.createElement(KB,{defaultColor:t,rfId:i}),Te.createElement("g",null,z.map(U=>{const[Q,$,j]=vI(P.get(U.source)),[se,oe,I]=vI(P.get(U.target));if(!j||!I)return null;let ne=U.type||"default";r[ne]||(L?.("011",Oo.error011(ne)),ne="default");const le=r[ne]||r.default,H=M===qa.Strict?oe.target:(oe.target??[]).concat(oe.source??[]),ye=TI($.source,U.sourceHandle),Ne=TI(H,U.targetHandle),Re=ye?.position||Ye.Bottom,$e=Ne?.position||Ye.Top,be=!!(U.focusable||V&&typeof U.focusable>"u"),Ue=U.reconnectable||U.updatable,Ve=typeof T<"u"&&(Ue||G&&typeof Ue>"u");if(!ye||!Ne)return L?.("008",Oo.error008(ye,U)),null;const{sourceX:it,sourceY:Ht,targetX:zt,targetY:qt}=UB(Q,ye,Re,se,Ne,$e);return Te.createElement(le,{key:U.id,id:U.id,className:ur([U.className,s]),type:ne,data:U.data,selected:!!U.selected,animated:!!U.animated,hidden:!!U.hidden,label:U.label,labelStyle:U.labelStyle,labelShowBg:U.labelShowBg,labelBgStyle:U.labelBgStyle,labelBgPadding:U.labelBgPadding,labelBgBorderRadius:U.labelBgBorderRadius,style:U.style,source:U.source,target:U.target,sourceHandleId:U.sourceHandle,targetHandleId:U.targetHandle,markerEnd:U.markerEnd,markerStart:U.markerStart,sourceX:it,sourceY:Ht,targetX:zt,targetY:qt,sourcePosition:Re,targetPosition:$e,elementsSelectable:F,onContextMenu:a,onMouseEnter:l,onMouseMove:f,onMouseLeave:d,onClick:p,onEdgeDoubleClick:y,onReconnect:T,onReconnectStart:v,onReconnectEnd:b,reconnectRadius:w,rfId:i,ariaLabel:U.ariaLabel,isFocusable:be,isReconnectable:Ve,pathOptions:"pathOptions"in U?U.pathOptions:void 0,interactionWidth:U.interactionWidth,disableKeyboardA11y:N})})))),R):null};DD.displayName="EdgeRenderer";var XB=q.memo(DD);const QB=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function JB({children:t}){const e=kn(QB);return Te.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function ZB(t){const e=Ch(),n=q.useRef(!1);q.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const jB={[Ye.Left]:Ye.Right,[Ye.Right]:Ye.Left,[Ye.Top]:Ye.Bottom,[Ye.Bottom]:Ye.Top},MD=({nodeId:t,handleType:e,style:n,type:i=Ia.Bezier,CustomComponent:r,connectionStatus:s})=>{const{fromNode:a,handleId:l,toX:f,toY:d,connectionMode:p}=kn(q.useCallback(K=>({fromNode:K.nodeInternals.get(t),handleId:K.connectionHandleId,toX:(K.connectionPosition.x-K.transform[0])/K.transform[2],toY:(K.connectionPosition.y-K.transform[1])/K.transform[2],connectionMode:K.connectionMode}),[t]),$i),y=a?.[Vn]?.handleBounds;let T=y?.[e];if(p===qa.Loose&&(T=T||y?.[e==="source"?"target":"source"]),!a||!T)return null;const v=l?T.find(K=>K.id===l):T[0],b=v?v.x+v.width/2:(a.width??0)/2,w=v?v.y+v.height/2:a.height??0,R=(a.positionAbsolute?.x??0)+b,N=(a.positionAbsolute?.y??0)+w,V=v?.position,G=V?jB[V]:null;if(!V||!G)return null;if(r)return Te.createElement(r,{connectionLineType:i,connectionLineStyle:n,fromNode:a,fromHandle:v,fromX:R,fromY:N,toX:f,toY:d,fromPosition:V,toPosition:G,connectionStatus:s});let F="";const J={sourceX:R,sourceY:N,sourcePosition:V,targetX:f,targetY:d,targetPosition:G};return i===Ia.Bezier?[F]=tD(J):i===Ia.Step?[F]=KE({...J,borderRadius:0}):i===Ia.SmoothStep?[F]=KE(J):i===Ia.SimpleBezier?[F]=eD(J):F=`M${R},${N} ${f},${d}`,Te.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:n})};MD.displayName="ConnectionLine";const eV=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function tV({containerStyle:t,style:e,type:n,component:i}){const{nodeId:r,handleType:s,nodesConnectable:a,width:l,height:f,connectionStatus:d}=kn(eV,$i);return!(r&&s&&l&&a)?null:Te.createElement("svg",{style:t,width:l,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},Te.createElement("g",{className:ur(["react-flow__connection",d])},Te.createElement(MD,{nodeId:r,handleType:s,style:e,type:n,CustomComponent:i,connectionStatus:d})))}function CI(t,e){return q.useRef(null),Ai(),q.useMemo(()=>e(t),[t])}const kD=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:i,onMoveEnd:r,onInit:s,onNodeClick:a,onEdgeClick:l,onNodeDoubleClick:f,onEdgeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:T,onNodeContextMenu:v,onSelectionContextMenu:b,onSelectionStart:w,onSelectionEnd:R,connectionLineType:N,connectionLineStyle:V,connectionLineComponent:G,connectionLineContainerStyle:F,selectionKeyCode:J,selectionOnDrag:K,selectionMode:M,multiSelectionKeyCode:P,panActivationKeyCode:L,zoomActivationKeyCode:O,deleteKeyCode:B,onlyRenderVisibleElements:z,elementsSelectable:D,selectNodesOnDrag:U,defaultViewport:Q,translateExtent:$,minZoom:j,maxZoom:se,preventScrolling:oe,defaultMarkerColor:I,zoomOnScroll:ne,zoomOnPinch:le,panOnScroll:H,panOnScrollSpeed:ye,panOnScrollMode:Ne,zoomOnDoubleClick:Re,panOnDrag:$e,onPaneClick:be,onPaneMouseEnter:Ue,onPaneMouseMove:Ve,onPaneMouseLeave:it,onPaneScroll:Ht,onPaneContextMenu:zt,onEdgeContextMenu:qt,onEdgeMouseEnter:je,onEdgeMouseMove:Cn,onEdgeMouseLeave:tt,onReconnect:Xe,onReconnectStart:gn,onReconnectEnd:Fn,reconnectRadius:Hn,noDragClassName:Wn,noWheelClassName:zn,noPanClassName:wn,elevateEdgesOnSelect:ii,disableKeyboardA11y:ue,nodeOrigin:Se,nodeExtent:ze,rfId:Qe})=>{const _t=CI(t,RB),kt=CI(e,OB);return ZB(s),Te.createElement(wB,{onPaneClick:be,onPaneMouseEnter:Ue,onPaneMouseMove:Ve,onPaneMouseLeave:it,onPaneContextMenu:zt,onPaneScroll:Ht,deleteKeyCode:B,selectionKeyCode:J,selectionOnDrag:K,selectionMode:M,onSelectionStart:w,onSelectionEnd:R,multiSelectionKeyCode:P,panActivationKeyCode:L,zoomActivationKeyCode:O,elementsSelectable:D,onMove:n,onMoveStart:i,onMoveEnd:r,zoomOnScroll:ne,zoomOnPinch:le,zoomOnDoubleClick:Re,panOnScroll:H,panOnScrollSpeed:ye,panOnScrollMode:Ne,panOnDrag:$e,defaultViewport:Q,translateExtent:$,minZoom:j,maxZoom:se,onSelectionContextMenu:b,preventScrolling:oe,noDragClassName:Wn,noWheelClassName:zn,noPanClassName:wn,disableKeyboardA11y:ue},Te.createElement(JB,null,Te.createElement(XB,{edgeTypes:kt,onEdgeClick:l,onEdgeDoubleClick:d,onlyRenderVisibleElements:z,onEdgeContextMenu:qt,onEdgeMouseEnter:je,onEdgeMouseMove:Cn,onEdgeMouseLeave:tt,onReconnect:Xe,onReconnectStart:gn,onReconnectEnd:Fn,reconnectRadius:Hn,defaultMarkerColor:I,noPanClassName:wn,elevateEdgesOnSelect:!!ii,disableKeyboardA11y:ue,rfId:Qe},Te.createElement(tV,{style:V,type:N,component:G,containerStyle:F})),Te.createElement("div",{className:"react-flow__edgelabel-renderer"}),Te.createElement(MB,{nodeTypes:_t,onNodeClick:a,onNodeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:T,onNodeContextMenu:v,selectNodesOnDrag:U,onlyRenderVisibleElements:z,noPanClassName:wn,noDragClassName:Wn,disableKeyboardA11y:ue,nodeOrigin:Se,nodeExtent:ze,rfId:Qe})))};kD.displayName="GraphView";var nV=q.memo(kD);const ZE=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ya={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ZE,nodeExtent:ZE,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:qa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:N9,isValidConnection:void 0},iV=()=>z6((t,e)=>({...ya,setNodes:n=>{const{nodeInternals:i,nodeOrigin:r,elevateNodesOnSelect:s}=e();t({nodeInternals:F_(n,i,r,s)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=e();t({edges:n.map(r=>({...i,...r}))})},setDefaultNodesAndEdges:(n,i)=>{const r=typeof n<"u",s=typeof i<"u",a=r?F_(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:a,edges:s?i:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:a,fitViewOnInitOptions:l,domNode:f,nodeOrigin:d}=e(),p=f?.querySelector(".react-flow__viewport");if(!p)return;const y=window.getComputedStyle(p),{m22:T}=new window.DOMMatrixReadOnly(y.transform),v=n.reduce((w,R)=>{const N=r.get(R.id);if(N?.hidden)r.set(N.id,{...N,[Vn]:{...N[Vn],handleBounds:void 0}});else if(N){const V=Tv(R.nodeElement);!!(V.width&&V.height&&(N.width!==V.width||N.height!==V.height||R.forceUpdate))&&(r.set(N.id,{...N,[Vn]:{...N[Vn],handleBounds:{source:gI(".source",R.nodeElement,T,d),target:gI(".target",R.nodeElement,T,d)}},...V}),w.push({id:N.id,type:"dimensions",dimensions:V}))}return w},[]);ED(r,d);const b=a||s&&!a&&TD(e,{initial:!0,...l});t({nodeInternals:new Map(r),fitViewOnInitDone:b}),v?.length>0&&i?.(v)},updateNodePositions:(n,i=!0,r=!1)=>{const{triggerNodeChanges:s}=e(),a=n.map(l=>{const f={id:l.id,type:"position",dragging:r};return i&&(f.positionAbsolute=l.positionAbsolute,f.position=l.position),f});s(a)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:a,getNodes:l,elevateNodesOnSelect:f}=e();if(n?.length){if(s){const d=SD(n,l()),p=F_(d,r,a,f);t({nodeInternals:p})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:r,getNodes:s}=e();let a,l=null;i?a=n.map(f=>Ca(f,!0)):(a=uc(s(),n),l=uc(r,[])),fm({changedNodes:a,changedEdges:l,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:r,getNodes:s}=e();let a,l=null;i?a=n.map(f=>Ca(f,!0)):(a=uc(r,n),l=uc(s(),[])),fm({changedNodes:l,changedEdges:a,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:r,getNodes:s}=e(),a=n||s(),l=i||r,f=a.map(p=>(p.selected=!1,Ca(p.id,!1))),d=l.map(p=>Ca(p.id,!1));fm({changedNodes:f,changedEdges:d,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:r}=e();i?.scaleExtent([n,r]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:r}=e();i?.scaleExtent([r,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=e(),s=i().filter(l=>l.selected).map(l=>Ca(l.id,!1)),a=n.filter(l=>l.selected).map(l=>Ca(l.id,!1));fm({changedNodes:s,changedEdges:a,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=e();i.forEach(r=>{r.positionAbsolute=vv(r.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:r,height:s,d3Zoom:a,d3Selection:l,translateExtent:f}=e();if(!a||!l||!n.x&&!n.y)return!1;const d=Pa.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),p=[[0,0],[r,s]],y=a?.constrain()(d,p,f);return a.transform(l,y),i[0]!==y.x||i[1]!==y.y||i[2]!==y.k},cancelConnection:()=>t({connectionNodeId:ya.connectionNodeId,connectionHandleId:ya.connectionHandleId,connectionHandleType:ya.connectionHandleType,connectionStatus:ya.connectionStatus,connectionStartHandle:ya.connectionStartHandle,connectionEndHandle:ya.connectionEndHandle}),reset:()=>t({...ya})}),Object.is),PD=({children:t})=>{const e=q.useRef(null);return e.current||(e.current=iV()),Te.createElement(S9,{value:e.current},t)};PD.displayName="ReactFlowProvider";const LD=({children:t})=>q.useContext(Yg)?Te.createElement(Te.Fragment,null,t):Te.createElement(PD,null,t);LD.displayName="ReactFlowWrapper";const rV={input:dD,default:QE,output:pD,group:Rv},sV={default:sg,straight:bv,step:Av,smoothstep:Kg,simplebezier:Cv},oV=[0,0],aV=[15,15],uV={x:0,y:0,zoom:1},lV={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},OD=q.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:r,nodeTypes:s=rV,edgeTypes:a=sV,onNodeClick:l,onEdgeClick:f,onInit:d,onMove:p,onMoveStart:y,onMoveEnd:T,onConnect:v,onConnectStart:b,onConnectEnd:w,onClickConnectStart:R,onClickConnectEnd:N,onNodeMouseEnter:V,onNodeMouseMove:G,onNodeMouseLeave:F,onNodeContextMenu:J,onNodeDoubleClick:K,onNodeDragStart:M,onNodeDrag:P,onNodeDragStop:L,onNodesDelete:O,onEdgesDelete:B,onSelectionChange:z,onSelectionDragStart:D,onSelectionDrag:U,onSelectionDragStop:Q,onSelectionContextMenu:$,onSelectionStart:j,onSelectionEnd:se,connectionMode:oe=qa.Strict,connectionLineType:I=Ia.Bezier,connectionLineStyle:ne,connectionLineComponent:le,connectionLineContainerStyle:H,deleteKeyCode:ye="Backspace",selectionKeyCode:Ne="Shift",selectionOnDrag:Re=!1,selectionMode:$e=th.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:Ue=rg()?"Meta":"Control",zoomActivationKeyCode:Ve=rg()?"Meta":"Control",snapToGrid:it=!1,snapGrid:Ht=aV,onlyRenderVisibleElements:zt=!1,selectNodesOnDrag:qt=!0,nodesDraggable:je,nodesConnectable:Cn,nodesFocusable:tt,nodeOrigin:Xe=oV,edgesFocusable:gn,edgesUpdatable:Fn,elementsSelectable:Hn,defaultViewport:Wn=uV,minZoom:zn=.5,maxZoom:wn=2,translateExtent:ii=ZE,preventScrolling:ue=!0,nodeExtent:Se,defaultMarkerColor:ze="#b1b1b7",zoomOnScroll:Qe=!0,zoomOnPinch:_t=!0,panOnScroll:kt=!1,panOnScrollSpeed:tn=.5,panOnScrollMode:nn=Pu.Free,zoomOnDoubleClick:rn=!0,panOnDrag:Pt=!0,onPaneClick:Tt,onPaneMouseEnter:pn,onPaneMouseMove:ln,onPaneMouseLeave:fs,onPaneScroll:Oi,onPaneContextMenu:ri,children:Xi,onEdgeContextMenu:Ui,onEdgeDoubleClick:lr,onEdgeMouseEnter:oo,onEdgeMouseMove:vr,onEdgeMouseLeave:ds,onEdgeUpdate:Qi,onEdgeUpdateStart:Sr,onEdgeUpdateEnd:cn,onReconnect:Xt,onReconnectStart:xn,onReconnectEnd:Ln,reconnectRadius:ws=10,edgeUpdaterRadius:nu=10,onNodesChange:Ji,onEdgesChange:xs,noDragClassName:Fr="nodrag",noWheelClassName:Cr="nowheel",noPanClassName:Zi="nopan",fitView:hi=!1,fitViewOptions:ji,connectOnClick:si=!0,attributionPosition:re,proOptions:_e,defaultEdgeOptions:ke,elevateNodesOnSelect:Fe=!0,elevateEdgesOnSelect:It=!1,disableKeyboardA11y:ht=!1,autoPanOnConnect:sn=!0,autoPanOnNodeDrag:Qt=!0,connectionRadius:pi=20,isValidConnection:Jt,onError:Gt,style:Zt,id:Xn,nodeDragThreshold:On,...qn},er)=>{const tr=Xn||"1";return Te.createElement("div",{...qn,style:{...Zt,...lV},ref:er,className:ur(["react-flow",r]),"data-testid":"rf__wrapper",id:Xn},Te.createElement(LD,null,Te.createElement(nV,{onInit:d,onMove:p,onMoveStart:y,onMoveEnd:T,onNodeClick:l,onEdgeClick:f,onNodeMouseEnter:V,onNodeMouseMove:G,onNodeMouseLeave:F,onNodeContextMenu:J,onNodeDoubleClick:K,nodeTypes:s,edgeTypes:a,connectionLineType:I,connectionLineStyle:ne,connectionLineComponent:le,connectionLineContainerStyle:H,selectionKeyCode:Ne,selectionOnDrag:Re,selectionMode:$e,deleteKeyCode:ye,multiSelectionKeyCode:Ue,panActivationKeyCode:be,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:zt,selectNodesOnDrag:qt,defaultViewport:Wn,translateExtent:ii,minZoom:zn,maxZoom:wn,preventScrolling:ue,zoomOnScroll:Qe,zoomOnPinch:_t,zoomOnDoubleClick:rn,panOnScroll:kt,panOnScrollSpeed:tn,panOnScrollMode:nn,panOnDrag:Pt,onPaneClick:Tt,onPaneMouseEnter:pn,onPaneMouseMove:ln,onPaneMouseLeave:fs,onPaneScroll:Oi,onPaneContextMenu:ri,onSelectionContextMenu:$,onSelectionStart:j,onSelectionEnd:se,onEdgeContextMenu:Ui,onEdgeDoubleClick:lr,onEdgeMouseEnter:oo,onEdgeMouseMove:vr,onEdgeMouseLeave:ds,onReconnect:Xt??Qi,onReconnectStart:xn??Sr,onReconnectEnd:Ln??cn,reconnectRadius:ws??nu,defaultMarkerColor:ze,noDragClassName:Fr,noWheelClassName:Cr,noPanClassName:Zi,elevateEdgesOnSelect:It,rfId:tr,disableKeyboardA11y:ht,nodeOrigin:Xe,nodeExtent:Se}),Te.createElement(j9,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:v,onConnectStart:b,onConnectEnd:w,onClickConnectStart:R,onClickConnectEnd:N,nodesDraggable:je,nodesConnectable:Cn,nodesFocusable:tt,edgesFocusable:gn,edgesUpdatable:Fn,elementsSelectable:Hn,elevateNodesOnSelect:Fe,minZoom:zn,maxZoom:wn,nodeExtent:Se,onNodesChange:Ji,onEdgesChange:xs,snapToGrid:it,snapGrid:Ht,connectionMode:oe,translateExtent:ii,connectOnClick:si,defaultEdgeOptions:ke,fitView:hi,fitViewOptions:ji,onNodesDelete:O,onEdgesDelete:B,onNodeDragStart:M,onNodeDrag:P,onNodeDragStop:L,onSelectionDrag:U,onSelectionDragStart:D,onSelectionDragStop:Q,noPanClassName:Zi,nodeOrigin:Xe,rfId:tr,autoPanOnConnect:sn,autoPanOnNodeDrag:Qt,onError:Gt,connectionRadius:pi,isValidConnection:Jt,nodeDragThreshold:On}),Te.createElement(J9,{onSelectionChange:z}),Xi,Te.createElement(A9,{proOptions:_e,position:re}),Te.createElement(rB,{rfId:tr,disableKeyboardA11y:ht})))});OD.displayName="ReactFlow";function UD(t){return e=>{const[n,i]=q.useState(e),r=q.useCallback(s=>i(a=>t(s,a)),[]);return[n,i,r]}}const cV=UD(SD),fV=UD(_B);function dV(){return Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Te.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function hV(){return Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Te.createElement("path",{d:"M0 0h32v4.2H0z"}))}function pV(){return Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Te.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function mV(){return Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function gV(){return Te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Cd=({children:t,className:e,...n})=>Te.createElement("button",{type:"button",className:ur(["react-flow__controls-button",e]),...n},t);Cd.displayName="ControlButton";const yV=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),BD=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:a,onFitView:l,onInteractiveChange:f,className:d,children:p,position:y="bottom-left"})=>{const T=Ai(),[v,b]=q.useState(!1),{isInteractive:w,minZoomReached:R,maxZoomReached:N}=kn(yV,$i),{zoomIn:V,zoomOut:G,fitView:F}=Ch();if(q.useEffect(()=>{b(!0)},[]),!v)return null;const J=()=>{V(),s?.()},K=()=>{G(),a?.()},M=()=>{F(r),l?.()},P=()=>{T.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),f?.(!w)};return Te.createElement(K2,{className:ur(["react-flow__controls",d]),position:y,style:t,"data-testid":"rf__controls"},e&&Te.createElement(Te.Fragment,null,Te.createElement(Cd,{onClick:J,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:N},Te.createElement(dV,null)),Te.createElement(Cd,{onClick:K,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:R},Te.createElement(hV,null))),n&&Te.createElement(Cd,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view"},Te.createElement(pV,null)),i&&Te.createElement(Cd,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity"},w?Te.createElement(gV,null):Te.createElement(mV,null)),p)};BD.displayName="Controls";var _V=q.memo(BD),as;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(as||(as={}));function EV({color:t,dimensions:e,lineWidth:n}){return Te.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function TV({color:t,radius:e}){return Te.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const vV={[as.Dots]:"#91919a",[as.Lines]:"#eee",[as.Cross]:"#e2e2e2"},SV={[as.Dots]:1,[as.Lines]:1,[as.Cross]:6},CV=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function VD({id:t,variant:e=as.Dots,gap:n=20,size:i,lineWidth:r=1,offset:s=2,color:a,style:l,className:f}){const d=q.useRef(null),{transform:p,patternId:y}=kn(CV,$i),T=a||vV[e],v=i||SV[e],b=e===as.Dots,w=e===as.Cross,R=Array.isArray(n)?n:[n,n],N=[R[0]*p[2]||1,R[1]*p[2]||1],V=v*p[2],G=w?[V,V]:N,F=b?[V/s,V/s]:[G[0]/s,G[1]/s];return Te.createElement("svg",{className:ur(["react-flow__background",f]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},Te.createElement("pattern",{id:y+t,x:p[0]%N[0],y:p[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},b?Te.createElement(TV,{color:T,radius:V/s}):Te.createElement(EV,{dimensions:G,color:T,lineWidth:r})),Te.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}VD.displayName="Background";var AV=q.memo(VD);function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kd.apply(null,arguments)}var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AI,bI={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/var G_,II,wI,bV=(AI||(AI=1,G_=bI,function(){var t={}.hasOwnProperty;function e(){for(var n=[],i=0;i<arguments.length;i++){var r=arguments[i];if(r){var s=typeof r;if(s==="string"||s==="number")n.push(r);else if(Array.isArray(r)){if(r.length){var a=e.apply(null,r);a&&n.push(a)}}else if(s==="object")if(r.toString===Object.prototype.toString)for(var l in r)t.call(r,l)&&r[l]&&n.push(l);else n.push(r.toString())}}return n.join(" ")}G_.exports?(e.default=e,G_.exports=e):window.classNames=e}()),bI.exports),jE=Ah(bV),xI,_s=Ah(function(){if(wI)return II;wI=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,r=parseInt,s=Object.prototype.toString;function a(f){var d=typeof f;return!!f&&(d=="object"||d=="function")}function l(f){if(typeof f=="number")return f;if(function(y){return typeof y=="symbol"||function(T){return!!T&&typeof T=="object"}(y)&&s.call(y)=="[object Symbol]"}(f))return NaN;if(a(f)){var d=typeof f.valueOf=="function"?f.valueOf():f;f=a(d)?d+"":d}if(typeof f!="string")return f===0?f:+f;f=f.replace(t,"");var p=n.test(f);return p||i.test(f)?r(f.slice(2),p?2:8):e.test(f)?NaN:+f}return II=function(f,d,p){return p===void 0&&(p=d,d=void 0),p!==void 0&&(p=(p=l(p))==p?p:0),d!==void 0&&(d=(d=l(d))==d?d:0),function(y,T,v){return y==y&&(v!==void 0&&(y=y<=v?y:v),T!==void 0&&(y=y>=T?y:T)),y}(l(f),d,p)}}()),$_={exports:{}},IV=(xI||(xI=1,function(t,e){var n="__lodash_hash_undefined__",i=9007199254740991,r="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",f="[object Error]",d="[object Function]",p="[object Map]",y="[object Number]",T="[object Object]",v="[object Promise]",b="[object RegExp]",w="[object Set]",R="[object String]",N="[object Symbol]",V="[object WeakMap]",G="[object ArrayBuffer]",F="[object DataView]",J=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M[r]=M[s]=M[G]=M[a]=M[F]=M[l]=M[f]=M[d]=M[p]=M[y]=M[T]=M[b]=M[w]=M[R]=M[V]=!1;var P=typeof Da=="object"&&Da&&Da.Object===Object&&Da,L=typeof self=="object"&&self&&self.Object===Object&&self,O=P||L||Function("return this")(),B=e&&!e.nodeType&&e,z=B&&t&&!t.nodeType&&t,D=z&&z.exports===B,U=D&&P.process,Q=function(){try{return U&&U.binding&&U.binding("util")}catch{}}(),$=Q&&Q.isTypedArray;function j(re,_e){for(var ke=-1,Fe=re==null?0:re.length;++ke<Fe;)if(_e(re[ke],ke,re))return!0;return!1}function se(re){var _e=-1,ke=Array(re.size);return re.forEach(function(Fe,It){ke[++_e]=[It,Fe]}),ke}function oe(re){var _e=-1,ke=Array(re.size);return re.forEach(function(Fe){ke[++_e]=Fe}),ke}var I,ne,le,H=Array.prototype,ye=Function.prototype,Ne=Object.prototype,Re=O["__core-js_shared__"],$e=ye.toString,be=Ne.hasOwnProperty,Ue=(I=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",Ve=Ne.toString,it=RegExp("^"+$e.call(be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=D?O.Buffer:void 0,zt=O.Symbol,qt=O.Uint8Array,je=Ne.propertyIsEnumerable,Cn=H.splice,tt=zt?zt.toStringTag:void 0,Xe=Object.getOwnPropertySymbols,gn=Ht?Ht.isBuffer:void 0,Fn=(ne=Object.keys,le=Object,function(re){return ne(le(re))}),Hn=Sr(O,"DataView"),Wn=Sr(O,"Map"),zn=Sr(O,"Promise"),wn=Sr(O,"Set"),ii=Sr(O,"WeakMap"),ue=Sr(Object,"create"),Se=Ln(Hn),ze=Ln(Wn),Qe=Ln(zn),_t=Ln(wn),kt=Ln(ii),tn=zt?zt.prototype:void 0,nn=tn?tn.valueOf:void 0;function rn(re){var _e=-1,ke=re==null?0:re.length;for(this.clear();++_e<ke;){var Fe=re[_e];this.set(Fe[0],Fe[1])}}function Pt(re){var _e=-1,ke=re==null?0:re.length;for(this.clear();++_e<ke;){var Fe=re[_e];this.set(Fe[0],Fe[1])}}function Tt(re){var _e=-1,ke=re==null?0:re.length;for(this.clear();++_e<ke;){var Fe=re[_e];this.set(Fe[0],Fe[1])}}function pn(re){var _e=-1,ke=re==null?0:re.length;for(this.__data__=new Tt;++_e<ke;)this.add(re[_e])}function ln(re){var _e=this.__data__=new Pt(re);this.size=_e.size}function fs(re,_e){var ke=Ji(re),Fe=!ke&&nu(re),It=!ke&&!Fe&&xs(re),ht=!ke&&!Fe&&!It&&ji(re),sn=ke||Fe||It||ht,Qt=sn?function(Gt,Zt){for(var Xn=-1,On=Array(Gt);++Xn<Gt;)On[Xn]=Zt(Xn);return On}(re.length,String):[],pi=Qt.length;for(var Jt in re)!be.call(re,Jt)||sn&&(Jt=="length"||It&&(Jt=="offset"||Jt=="parent")||ht&&(Jt=="buffer"||Jt=="byteLength"||Jt=="byteOffset")||xn(Jt,pi))||Qt.push(Jt);return Qt}function Oi(re,_e){for(var ke=re.length;ke--;)if(ws(re[ke][0],_e))return ke;return-1}function ri(re){return re==null?re===void 0?"[object Undefined]":"[object Null]":tt&&tt in Object(re)?function(_e){var ke=be.call(_e,tt),Fe=_e[tt];try{_e[tt]=void 0;var It=!0}catch{}var ht=Ve.call(_e);return It&&(ke?_e[tt]=Fe:delete _e[tt]),ht}(re):function(_e){return Ve.call(_e)}(re)}function Xi(re){return hi(re)&&ri(re)==r}function Ui(re,_e,ke,Fe,It){return re===_e||(re==null||_e==null||!hi(re)&&!hi(_e)?re!=re&&_e!=_e:function(ht,sn,Qt,pi,Jt,Gt){var Zt=Ji(ht),Xn=Ji(sn),On=Zt?s:Xt(ht),qn=Xn?s:Xt(sn),er=(On=On==r?T:On)==T,tr=(qn=qn==r?T:qn)==T,Hr=On==qn;if(Hr&&xs(ht)){if(!xs(sn))return!1;Zt=!0,er=!1}if(Hr&&!er)return Gt||(Gt=new ln),Zt||ji(ht)?vr(ht,sn,Qt,pi,Jt,Gt):function(Lt,Dt,qr,Gr,Rn,yn,bi){switch(qr){case F:if(Lt.byteLength!=Dt.byteLength||Lt.byteOffset!=Dt.byteOffset)return!1;Lt=Lt.buffer,Dt=Dt.buffer;case G:return!(Lt.byteLength!=Dt.byteLength||!yn(new qt(Lt),new qt(Dt)));case a:case l:case y:return ws(+Lt,+Dt);case f:return Lt.name==Dt.name&&Lt.message==Dt.message;case b:case R:return Lt==Dt+"";case p:var Ii=se;case w:var nr=1&Gr;if(Ii||(Ii=oe),Lt.size!=Dt.size&&!nr)return!1;var Ft=bi.get(Lt);if(Ft)return Ft==Dt;Gr|=2,bi.set(Lt,Dt);var hs=vr(Ii(Lt),Ii(Dt),Gr,Rn,yn,bi);return bi.delete(Lt),hs;case N:if(nn)return nn.call(Lt)==nn.call(Dt)}return!1}(ht,sn,On,Qt,pi,Jt,Gt);if(!(1&Qt)){var zr=er&&be.call(ht,"__wrapped__"),mi=tr&&be.call(sn,"__wrapped__");if(zr||mi){var iu=zr?ht.value():ht,ff=mi?sn.value():sn;return Gt||(Gt=new ln),Jt(iu,ff,Qt,pi,Gt)}}return!!Hr&&(Gt||(Gt=new ln),function(Lt,Dt,qr,Gr,Rn,yn){var bi=1&qr,Ii=ds(Lt),nr=Ii.length,Ft=ds(Dt),hs=Ft.length;if(nr!=hs&&!bi)return!1;for(var wi=nr;wi--;){var ir=Ii[wi];if(!(bi?ir in Dt:be.call(Dt,ir)))return!1}var ru=yn.get(Lt);if(ru&&yn.get(Dt))return ru==Dt;var Rs=!0;yn.set(Lt,Dt),yn.set(Dt,Lt);for(var ao=bi;++wi<nr;){var Ko=Lt[ir=Ii[wi]],Wo=Dt[ir];if(Gr)var uo=bi?Gr(Wo,Ko,ir,Dt,Lt,yn):Gr(Ko,Wo,ir,Lt,Dt,yn);if(!(uo===void 0?Ko===Wo||Rn(Ko,Wo,qr,Gr,yn):uo)){Rs=!1;break}ao||(ao=ir=="constructor")}if(Rs&&!ao){var cr=Lt.constructor,xi=Dt.constructor;cr==xi||!("constructor"in Lt)||!("constructor"in Dt)||typeof cr=="function"&&cr instanceof cr&&typeof xi=="function"&&xi instanceof xi||(Rs=!1)}return yn.delete(Lt),yn.delete(Dt),Rs}(ht,sn,Qt,pi,Jt,Gt))}(re,_e,ke,Fe,Ui,It))}function lr(re){return!(!Zi(re)||function(_e){return!!Ue&&Ue in _e}(re))&&(Fr(re)?it:J).test(Ln(re))}function oo(re){if(ke=(_e=re)&&_e.constructor,Fe=typeof ke=="function"&&ke.prototype||Ne,_e!==Fe)return Fn(re);var _e,ke,Fe,It=[];for(var ht in Object(re))be.call(re,ht)&&ht!="constructor"&&It.push(ht);return It}function vr(re,_e,ke,Fe,It,ht){var sn=1&ke,Qt=re.length,pi=_e.length;if(Qt!=pi&&!(sn&&pi>Qt))return!1;var Jt=ht.get(re);if(Jt&&ht.get(_e))return Jt==_e;var Gt=-1,Zt=!0,Xn=2&ke?new pn:void 0;for(ht.set(re,_e),ht.set(_e,re);++Gt<Qt;){var On=re[Gt],qn=_e[Gt];if(Fe)var er=sn?Fe(qn,On,Gt,_e,re,ht):Fe(On,qn,Gt,re,_e,ht);if(er!==void 0){if(er)continue;Zt=!1;break}if(Xn){if(!j(_e,function(tr,Hr){if(zr=Hr,!Xn.has(zr)&&(On===tr||It(On,tr,ke,Fe,ht)))return Xn.push(Hr);var zr})){Zt=!1;break}}else if(On!==qn&&!It(On,qn,ke,Fe,ht)){Zt=!1;break}}return ht.delete(re),ht.delete(_e),Zt}function ds(re){return function(_e,ke,Fe){var It=ke(_e);return Ji(_e)?It:function(ht,sn){for(var Qt=-1,pi=sn.length,Jt=ht.length;++Qt<pi;)ht[Jt+Qt]=sn[Qt];return ht}(It,Fe(_e))}(re,si,cn)}function Qi(re,_e){var ke,Fe,It=re.__data__;return((Fe=typeof(ke=_e))=="string"||Fe=="number"||Fe=="symbol"||Fe=="boolean"?ke!=="__proto__":ke===null)?It[typeof _e=="string"?"string":"hash"]:It.map}function Sr(re,_e){var ke=function(Fe,It){return Fe?.[It]}(re,_e);return lr(ke)?ke:void 0}rn.prototype.clear=function(){this.__data__=ue?ue(null):{},this.size=0},rn.prototype.delete=function(re){var _e=this.has(re)&&delete this.__data__[re];return this.size-=_e?1:0,_e},rn.prototype.get=function(re){var _e=this.__data__;if(ue){var ke=_e[re];return ke===n?void 0:ke}return be.call(_e,re)?_e[re]:void 0},rn.prototype.has=function(re){var _e=this.__data__;return ue?_e[re]!==void 0:be.call(_e,re)},rn.prototype.set=function(re,_e){var ke=this.__data__;return this.size+=this.has(re)?0:1,ke[re]=ue&&_e===void 0?n:_e,this},Pt.prototype.clear=function(){this.__data__=[],this.size=0},Pt.prototype.delete=function(re){var _e=this.__data__,ke=Oi(_e,re);return!(ke<0||(ke==_e.length-1?_e.pop():Cn.call(_e,ke,1),--this.size,0))},Pt.prototype.get=function(re){var _e=this.__data__,ke=Oi(_e,re);return ke<0?void 0:_e[ke][1]},Pt.prototype.has=function(re){return Oi(this.__data__,re)>-1},Pt.prototype.set=function(re,_e){var ke=this.__data__,Fe=Oi(ke,re);return Fe<0?(++this.size,ke.push([re,_e])):ke[Fe][1]=_e,this},Tt.prototype.clear=function(){this.size=0,this.__data__={hash:new rn,map:new(Wn||Pt),string:new rn}},Tt.prototype.delete=function(re){var _e=Qi(this,re).delete(re);return this.size-=_e?1:0,_e},Tt.prototype.get=function(re){return Qi(this,re).get(re)},Tt.prototype.has=function(re){return Qi(this,re).has(re)},Tt.prototype.set=function(re,_e){var ke=Qi(this,re),Fe=ke.size;return ke.set(re,_e),this.size+=ke.size==Fe?0:1,this},pn.prototype.add=pn.prototype.push=function(re){return this.__data__.set(re,n),this},pn.prototype.has=function(re){return this.__data__.has(re)},ln.prototype.clear=function(){this.__data__=new Pt,this.size=0},ln.prototype.delete=function(re){var _e=this.__data__,ke=_e.delete(re);return this.size=_e.size,ke},ln.prototype.get=function(re){return this.__data__.get(re)},ln.prototype.has=function(re){return this.__data__.has(re)},ln.prototype.set=function(re,_e){var ke=this.__data__;if(ke instanceof Pt){var Fe=ke.__data__;if(!Wn||Fe.length<199)return Fe.push([re,_e]),this.size=++ke.size,this;ke=this.__data__=new Tt(Fe)}return ke.set(re,_e),this.size=ke.size,this};var cn=Xe?function(re){return re==null?[]:(re=Object(re),function(_e,ke){for(var Fe=-1,It=_e==null?0:_e.length,ht=0,sn=[];++Fe<It;){var Qt=_e[Fe];ke(Qt,Fe,_e)&&(sn[ht++]=Qt)}return sn}(Xe(re),function(_e){return je.call(re,_e)}))}:function(){return[]},Xt=ri;function xn(re,_e){return!!(_e=_e??i)&&(typeof re=="number"||K.test(re))&&re>-1&&re%1==0&&re<_e}function Ln(re){if(re!=null){try{return $e.call(re)}catch{}try{return re+""}catch{}}return""}function ws(re,_e){return re===_e||re!=re&&_e!=_e}(Hn&&Xt(new Hn(new ArrayBuffer(1)))!=F||Wn&&Xt(new Wn)!=p||zn&&Xt(zn.resolve())!=v||wn&&Xt(new wn)!=w||ii&&Xt(new ii)!=V)&&(Xt=function(re){var _e=ri(re),ke=_e==T?re.constructor:void 0,Fe=ke?Ln(ke):"";if(Fe)switch(Fe){case Se:return F;case ze:return p;case Qe:return v;case _t:return w;case kt:return V}return _e});var nu=Xi(function(){return arguments}())?Xi:function(re){return hi(re)&&be.call(re,"callee")&&!je.call(re,"callee")},Ji=Array.isArray,xs=gn||function(){return!1};function Fr(re){if(!Zi(re))return!1;var _e=ri(re);return _e==d||_e=="[object GeneratorFunction]"||_e=="[object AsyncFunction]"||_e=="[object Proxy]"}function Cr(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=i}function Zi(re){var _e=typeof re;return re!=null&&(_e=="object"||_e=="function")}function hi(re){return re!=null&&typeof re=="object"}var ji=$?function(re){return function(_e){return re(_e)}}($):function(re){return hi(re)&&Cr(re.length)&&!!M[ri(re)]};function si(re){return(_e=re)!=null&&Cr(_e.length)&&!Fr(_e)?fs(re):oo(re);var _e}t.exports=function(re,_e){return Ui(re,_e)}}($_,$_.exports)),$_.exports),wV=Ah(IV);function RI(t,e,n){return t[e]?t[e][0]?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}function xV(t){t===void 0&&(t={});var e=t.onResize,n=q.useRef(void 0);n.current=e;var i=t.round||Math.round,r=q.useRef(),s=q.useState({width:void 0,height:void 0}),a=s[0],l=s[1],f=q.useRef(!1);q.useEffect(function(){return f.current=!1,function(){f.current=!0}},[]);var d=q.useRef({width:void 0,height:void 0}),p=function(y,T){var v=q.useRef(null),b=q.useRef(null);b.current=T;var w=q.useRef(null);q.useEffect(function(){R()});var R=q.useCallback(function(){var N=w.current,V=b.current,G=N||(V?V instanceof Element?V:V.current:null);v.current&&v.current.element===G&&v.current.subscriber===y||(v.current&&v.current.cleanup&&v.current.cleanup(),v.current={element:G,subscriber:y,cleanup:G?y(G):void 0})},[y]);return q.useEffect(function(){return function(){v.current&&v.current.cleanup&&(v.current.cleanup(),v.current=null)}},[]),q.useCallback(function(N){w.current=N,R()},[R])}(q.useCallback(function(y){return r.current&&r.current.box===t.box&&r.current.round===i||(r.current={box:t.box,round:i,instance:new ResizeObserver(function(T){var v=T[0],b=t.box==="border-box"?"borderBoxSize":t.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",w=RI(v,b,"inlineSize"),R=RI(v,b,"blockSize"),N=w?i(w):void 0,V=R?i(R):void 0;if(d.current.width!==N||d.current.height!==V){var G={width:N,height:V};d.current.width=N,d.current.height=V,n.current?n.current(G):f.current||l(G)}})}),r.current.instance.observe(y,{box:t.box}),function(){r.current&&r.current.instance.unobserve(y)}},[t.box,i]),t.ref);return q.useMemo(function(){return{ref:p,width:a.width,height:a.height}},[p,a.width,a.height])}var RV="allotment-module_splitView__L-yRc",NV="allotment-module_sashContainer__fzwJF",DV="allotment-module_splitViewContainer__rQnVa",FD="allotment-module_splitViewView__MGZ6O",MV="allotment-module_vertical__WSwwa",kV="allotment-module_horizontal__7doS8",PV="allotment-module_separatorBorder__x-rDS";let dd,HD=!1,zD=!1;typeof navigator=="object"&&(dd=navigator.userAgent,zD=dd.indexOf("Macintosh")>=0,HD=(dd.indexOf("Macintosh")>=0||dd.indexOf("iPad")>=0||dd.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const qD=HD,LV=zD,NI=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?q.useLayoutEffect:q.useEffect;let OV=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(e){this._size=e}};function hm(t,e){const n=t.length,i=n-e.length;return i>=0&&t.slice(i,n)===e}var DI,MI={exports:{}},kI,PI,UV=(DI||(DI=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(f,d,p){this.fn=f,this.context=d,this.once=p||!1}function s(f,d,p,y,T){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new r(p,y||f,T),b=n?n+d:d;return f._events[b]?f._events[b].fn?f._events[b]=[f._events[b],v]:f._events[b].push(v):(f._events[b]=v,f._eventsCount++),f}function a(f,d){--f._eventsCount==0?f._events=new i:delete f._events[d]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),l.prototype.eventNames=function(){var f,d,p=[];if(this._eventsCount===0)return p;for(d in f=this._events)e.call(f,d)&&p.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(f)):p},l.prototype.listeners=function(f){var d=n?n+f:f,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,T=p.length,v=new Array(T);y<T;y++)v[y]=p[y].fn;return v},l.prototype.listenerCount=function(f){var d=n?n+f:f,p=this._events[d];return p?p.fn?1:p.length:0},l.prototype.emit=function(f,d,p,y,T,v){var b=n?n+f:f;if(!this._events[b])return!1;var w,R,N=this._events[b],V=arguments.length;if(N.fn){switch(N.once&&this.removeListener(f,N.fn,void 0,!0),V){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,d),!0;case 3:return N.fn.call(N.context,d,p),!0;case 4:return N.fn.call(N.context,d,p,y),!0;case 5:return N.fn.call(N.context,d,p,y,T),!0;case 6:return N.fn.call(N.context,d,p,y,T,v),!0}for(R=1,w=new Array(V-1);R<V;R++)w[R-1]=arguments[R];N.fn.apply(N.context,w)}else{var G,F=N.length;for(R=0;R<F;R++)switch(N[R].once&&this.removeListener(f,N[R].fn,void 0,!0),V){case 1:N[R].fn.call(N[R].context);break;case 2:N[R].fn.call(N[R].context,d);break;case 3:N[R].fn.call(N[R].context,d,p);break;case 4:N[R].fn.call(N[R].context,d,p,y);break;default:if(!w)for(G=1,w=new Array(V-1);G<V;G++)w[G-1]=arguments[G];N[R].fn.apply(N[R].context,w)}}return!0},l.prototype.on=function(f,d,p){return s(this,f,d,p,!1)},l.prototype.once=function(f,d,p){return s(this,f,d,p,!0)},l.prototype.removeListener=function(f,d,p,y){var T=n?n+f:f;if(!this._events[T])return this;if(!d)return a(this,T),this;var v=this._events[T];if(v.fn)v.fn!==d||y&&!v.once||p&&v.context!==p||a(this,T);else{for(var b=0,w=[],R=v.length;b<R;b++)(v[b].fn!==d||y&&!v[b].once||p&&v[b].context!==p)&&w.push(v[b]);w.length?this._events[T]=w.length===1?w[0]:w:a(this,T)}return this},l.prototype.removeAllListeners=function(f){var d;return f?(d=n?n+f:f,this._events[d]&&a(this,d)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(MI)),MI.exports),Dv=Ah(UV);function LI(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.unshift(e))}function Y_(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.push(e))}function es(t,e,n=1){const i=Math.max(0,Math.ceil((e-t)/n)),r=new Array(i);let s=-1;for(;++s<i;)r[s]=t+s*n;return r}var BV=Ah(function(){if(PI)return kI;PI=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,r=parseInt,s=typeof Da=="object"&&Da&&Da.Object===Object&&Da,a=typeof self=="object"&&self&&self.Object===Object&&self,l=s||a||Function("return this")(),f=Object.prototype.toString,d=Math.max,p=Math.min,y=function(){return l.Date.now()};function T(b){var w=typeof b;return!!b&&(w=="object"||w=="function")}function v(b){if(typeof b=="number")return b;if(function(N){return typeof N=="symbol"||function(V){return!!V&&typeof V=="object"}(N)&&f.call(N)=="[object Symbol]"}(b))return NaN;if(T(b)){var w=typeof b.valueOf=="function"?b.valueOf():b;b=T(w)?w+"":w}if(typeof b!="string")return b===0?b:+b;b=b.replace(t,"");var R=n.test(b);return R||i.test(b)?r(b.slice(2),R?2:8):e.test(b)?NaN:+b}return kI=function(b,w,R){var N,V,G,F,J,K,M=0,P=!1,L=!1,O=!0;if(typeof b!="function")throw new TypeError("Expected a function");function B($){var j=N,se=V;return N=V=void 0,M=$,F=b.apply(se,j)}function z($){var j=$-K;return K===void 0||j>=w||j<0||L&&$-M>=G}function D(){var $=y();if(z($))return U($);J=setTimeout(D,function(j){var se=w-(j-K);return L?p(se,G-(j-M)):se}($))}function U($){return J=void 0,O&&N?B($):(N=V=void 0,F)}function Q(){var $=y(),j=z($);if(N=arguments,V=this,K=$,j){if(J===void 0)return function(se){return M=se,J=setTimeout(D,w),P?B(se):F}(K);if(L)return J=setTimeout(D,w),B(K)}return J===void 0&&(J=setTimeout(D,w)),F}return w=v(w)||0,T(R)&&(P=!!R.leading,G=(L="maxWait"in R)?d(v(R.maxWait)||0,w):G,O="trailing"in R?!!R.trailing:O),Q.cancel=function(){J!==void 0&&clearTimeout(J),M=0,N=K=V=J=void 0},Q.flush=function(){return J===void 0?F:U(y())},Q}}()),VV="sash-module_sash__K-9lB",FV="sash-module_disabled__Hm-wx",HV="sash-module_mac__Jf6OJ",OI="sash-module_vertical__pB-rs",zV="sash-module_minimum__-UKxp",qV="sash-module_maximum__TCWxD",UI="sash-module_horizontal__kFbiw",K_="sash-module_hover__80W6I",W_="sash-module_active__bJspD";let ns=function(t){return t.Vertical="VERTICAL",t.Horizontal="HORIZONTAL",t}({}),kr=function(t){return t.Disabled="DISABLED",t.Minimum="MINIMUM",t.Maximum="MAXIMUM",t.Enabled="ENABLED",t}({}),GD=qD?20:8;const $D=new Dv;class BI extends Dv{get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle(FV,e===kr.Disabled),this.el.classList.toggle("sash-disabled",e===kr.Disabled),this.el.classList.toggle(zV,e===kr.Minimum),this.el.classList.toggle("sash-minimum",e===kr.Minimum),this.el.classList.toggle(qV,e===kr.Maximum),this.el.classList.toggle("sash-maximum",e===kr.Maximum),this._state=e,this.emit("enablementChange",e))}constructor(e,n,i){var r;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=BV(s=>s.classList.add("sash-hover",K_),this.hoverDelay),this._state=kr.Enabled,this.onPointerStart=s=>{const a=s.pageX,l=s.pageY,f={startX:a,currentX:a,startY:l,currentY:l};this.el.classList.add("sash-active",W_),this.emit("start",f),this.el.setPointerCapture(s.pointerId);const d=y=>{y.preventDefault();const T={startX:a,currentX:y.pageX,startY:l,currentY:y.pageY};this.emit("change",T)},p=y=>{y.preventDefault(),this.el.classList.remove("sash-active",W_),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(y.pointerId),window.removeEventListener("pointermove",d),window.removeEventListener("pointerup",p)};window.addEventListener("pointermove",d),window.addEventListener("pointerup",p)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(W_)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",K_)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",K_)},this.el=document.createElement("div"),this.el.classList.add("sash",VV),this.el.dataset.testid="sash",e.append(this.el),LV&&this.el.classList.add("sash-mac",HV),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof i.size=="number"?(this.size=i.size,i.orientation===ns.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=GD,$D.on("onDidChangeGlobalSize",s=>{this.size=s,this.layout()})),this.layoutProvider=n,this.orientation=(r=i.orientation)!=null?r:ns.Vertical,this.orientation===ns.Horizontal?(this.el.classList.add("sash-horizontal",UI),this.el.classList.remove("sash-vertical",OI)):(this.el.classList.remove("sash-horizontal",UI),this.el.classList.add("sash-vertical",OI)),this.layout()}layout(){if(this.orientation===ns.Vertical){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let og;var X_;(X_=og||(og={})).Distribute={type:"distribute"},X_.Split=function(t){return{type:"split",index:t}},X_.Invisible=function(t){return{type:"invisible",cachedVisibleSize:t}};let ts=function(t){return t.Normal="NORMAL",t.Low="LOW",t.High="HIGH",t}({});class YD{constructor(e,n,i){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=e,this.view=n,this.container.classList.add("split-view-view",FD),this.container.dataset.testid="split-view-view",typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,n){e!==this.visible&&(e?(this.size=_s(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e){this.layoutContainer(e),this.view.layout(this.size,e)}}class GV extends YD{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}class $V extends YD{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class YV extends Dv{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,n={},i,r,s){var a,l;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=f=>{this.emit("sashchange",f),this.saveProportions();for(const d of this.viewItems)d.enabled=!0},this.orientation=(a=n.orientation)!=null?a:ns.Vertical,this.proportionalLayout=(l=n.proportionalLayout)!=null?l:!0,this.getSashOrthogonalSize=n.getSashOrthogonalSize,i&&(this.onDidChange=i),r&&(this.onDidDragStart=r),s&&(this.onDidDragEnd=s),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",NV),e.prepend(this.sashContainer),n.descriptor){this.size=n.descriptor.size;for(const[f,d]of n.descriptor.views.entries()){const p=d.size,y=d.container,T=d.view;this.addView(y,T,p,f,!0)}this.contentSize=this.viewItems.reduce((f,d)=>f+d.size,0),this.saveProportions()}}addView(e,n,i,r=this.viewItems.length,s){let a;a=typeof i=="number"?i:i.type==="split"?this.getViewSize(i.index)/2:i.type==="invisible"?{cachedVisibleSize:i.cachedVisibleSize}:n.minimumSize;const l=this.orientation===ns.Vertical?new $V(e,n,a):new GV(e,n,a);if(this.viewItems.splice(r,0,l),this.viewItems.length>1){const f=this.orientation===ns.Vertical?new BI(this.sashContainer,{getHorizontalSashTop:y=>this.getSashPosition(y),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:ns.Horizontal}):new BI(this.sashContainer,{getVerticalSashLeft:y=>this.getSashPosition(y),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:ns.Vertical}),d=this.orientation===ns.Vertical?y=>({sash:f,start:y.startY,current:y.currentY}):y=>({sash:f,start:y.startX,current:y.currentX});f.on("start",y=>{var T;this.emit("sashDragStart"),this.onSashStart(d(y));const v=this.viewItems.map(b=>b.size);(T=this.onDidDragStart)==null||T.call(this,v)}),f.on("change",y=>this.onSashChange(d(y))),f.on("end",()=>{var y;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(v=>v.sash===f));const T=this.viewItems.map(v=>v.size);(y=this.onDidDragEnd)==null||y.call(this,T)}),f.on("reset",()=>{const y=this.sashItems.findIndex(R=>R.sash===f),T=es(y,-1,-1),v=es(y+1,this.viewItems.length),b=this.findFirstSnapIndex(T),w=this.findFirstSnapIndex(v);(typeof b!="number"||this.viewItems[b].visible)&&(typeof w!="number"||this.viewItems[w].visible)&&this.emit("sashreset",y)});const p={sash:f};this.sashItems.splice(r-1,0,p)}s||this.relayout(),s||typeof i=="number"||i.type!=="distribute"||this.distributeViewSizes()}removeView(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");const i=this.viewItems.splice(e,1)[0].view;if(this.viewItems.length>=1){const r=Math.max(e-1,0);this.sashItems.splice(r,1)[0].sash.dispose()}return this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),i}moveView(e,n,i){const r=this.getViewCachedVisibleSize(n),s=r===void 0?this.getViewSize(n):og.Invisible(r),a=this.removeView(n);this.addView(e,a,s,i)}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e=this.size){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.proportions)for(let i=0;i<this.viewItems.length;i++){const r=this.viewItems[i];r.size=_s(Math.round(this.proportions[i]*e),r.minimumSize,r.maximumSize)}else{const i=es(0,this.viewItems.length),r=i.filter(a=>this.viewItems[a].priority===ts.Low),s=i.filter(a=>this.viewItems[a].priority===ts.High);this.resize(this.viewItems.length-1,e-n,void 0,r,s)}this.distributeEmptySpace(),this.layoutViews()}resizeView(e,n){if(e<0||e>=this.viewItems.length)return;const i=es(0,this.viewItems.length).filter(l=>l!==e),r=[...i.filter(l=>this.viewItems[l].priority===ts.Low),e],s=i.filter(l=>this.viewItems[l].priority===ts.High),a=this.viewItems[e];n=Math.round(n),n=_s(n,a.minimumSize,Math.min(a.maximumSize,this.size)),a.size=n,this.relayout(r,s)}resizeViews(e){for(let n=0;n<e.length;n++){const i=this.viewItems[n];let r=e[n];r=Math.round(r),r=_s(r,i.minimumSize,Math.min(i.maximumSize,this.size)),i.size=r}this.contentSize=this.viewItems.reduce((n,i)=>n+i.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(n),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const e=[];let n=0;for(const l of this.viewItems)l.maximumSize-l.minimumSize>0&&(e.push(l),n+=l.size);const i=Math.floor(n/e.length);for(const l of e)l.size=_s(i,l.minimumSize,l.maximumSize);const r=es(0,this.viewItems.length),s=r.filter(l=>this.viewItems[l].priority===ts.Low),a=r.filter(l=>this.viewItems[l].priority===ts.High);this.relayout(s,a)}dispose(){this.sashItems.forEach(e=>e.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(e,n){const i=this.viewItems.reduce((r,s)=>r+s.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:e,start:n}){const i=this.sashItems.findIndex(r=>r.sash===e);(r=>{const s=this.viewItems.map(V=>V.size);let a,l,f=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;const p=es(i,-1,-1),y=es(i+1,this.viewItems.length),T=p.reduce((V,G)=>V+(this.viewItems[G].minimumSize-s[G]),0),v=p.reduce((V,G)=>V+(this.viewItems[G].viewMaximumSize-s[G]),0),b=y.length===0?Number.POSITIVE_INFINITY:y.reduce((V,G)=>V+(s[G]-this.viewItems[G].minimumSize),0),w=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((V,G)=>V+(s[G]-this.viewItems[G].viewMaximumSize),0);f=Math.max(T,w),d=Math.min(b,v);const R=this.findFirstSnapIndex(p),N=this.findFirstSnapIndex(y);if(typeof R=="number"){const V=this.viewItems[R],G=Math.floor(V.viewMinimumSize/2);a={index:R,limitDelta:V.visible?f-G:f+G,size:V.size}}if(typeof N=="number"){const V=this.viewItems[N],G=Math.floor(V.viewMinimumSize/2);l={index:N,limitDelta:V.visible?d+G:d-G,size:V.size}}this.sashDragState={start:r,current:r,index:i,sizes:s,minDelta:f,maxDelta:d,snapBefore:a,snapAfter:l}})(n)}onSashChange({current:e}){const{index:n,start:i,sizes:r,minDelta:s,maxDelta:a,snapBefore:l,snapAfter:f}=this.sashDragState;this.sashDragState.current=e;const d=e-i;this.resize(n,d,r,void 0,void 0,s,a,l,f),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(e){let n=0;for(let i=0;i<this.sashItems.length;i++)if(n+=this.viewItems[i].size,this.sashItems[i].sash===e)return n;return 0}resize(e,n,i=this.viewItems.map(p=>p.size),r,s,a=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,f,d){if(e<0||e>=this.viewItems.length)return 0;const p=es(e,-1,-1),y=es(e+1,this.viewItems.length);if(s)for(const M of s)LI(p,M),LI(y,M);if(r)for(const M of r)Y_(p,M),Y_(y,M);const T=p.map(M=>this.viewItems[M]),v=p.map(M=>i[M]),b=y.map(M=>this.viewItems[M]),w=y.map(M=>i[M]),R=p.reduce((M,P)=>M+(this.viewItems[P].minimumSize-i[P]),0),N=p.reduce((M,P)=>M+(this.viewItems[P].maximumSize-i[P]),0),V=y.length===0?Number.POSITIVE_INFINITY:y.reduce((M,P)=>M+(i[P]-this.viewItems[P].minimumSize),0),G=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((M,P)=>M+(i[P]-this.viewItems[P].maximumSize),0),F=Math.max(R,G,a),J=Math.min(V,N,l);let K=!1;if(f){const M=this.viewItems[f.index],P=n>=f.limitDelta;K=P!==M.visible,M.setVisible(P,f.size)}if(!K&&d){const M=this.viewItems[d.index],P=n<d.limitDelta;K=P!==M.visible,M.setVisible(P,d.size)}if(K)return this.resize(e,n,i,r,s,a,l);for(let M=0,P=n=_s(n,F,J);M<T.length;M++){const L=T[M],O=_s(v[M]+P,L.minimumSize,L.maximumSize);P-=O-v[M],L.size=O}for(let M=0,P=n;M<b.length;M++){const L=b[M],O=_s(w[M]-P,L.minimumSize,L.maximumSize);P+=O-w[M],L.size=O}return n}distributeEmptySpace(e){const n=this.viewItems.reduce((d,p)=>d+p.size,0);let i=this.size-n;const r=es(0,this.viewItems.length),s=[],a=r.filter(d=>this.viewItems[d].priority===ts.Low),l=r.filter(d=>this.viewItems[d].priority===ts.Normal),f=r.filter(d=>this.viewItems[d].priority===ts.High);s.push(...f,...l,...a),typeof e=="number"&&Y_(s,e);for(let d=0;i!==0&&d<s.length;d++){const p=this.viewItems[s[d]],y=_s(p.size+i,p.minimumSize,p.maximumSize);i-=y-p.size,p.size=y}}layoutViews(){var e;this.contentSize=this.viewItems.reduce((i,r)=>i+r.size,0);let n=0;for(const i of this.viewItems)i.layout(n),n+=i.size;(e=this.onDidChange)!=null&&e.call(this,this.viewItems.map(i=>i.size)),this.sashItems.forEach(i=>i.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}updateSashEnablement(){let e=!1;const n=this.viewItems.map(f=>e=f.size-f.minimumSize>0||e);e=!1;const i=this.viewItems.map(f=>e=f.maximumSize-f.size>0||e),r=[...this.viewItems].reverse();e=!1;const s=r.map(f=>e=f.size-f.minimumSize>0||e).reverse();e=!1;const a=r.map(f=>e=f.maximumSize-f.size>0||e).reverse();let l=0;for(let f=0;f<this.sashItems.length;f++){const{sash:d}=this.sashItems[f];l+=this.viewItems[f].size;const p=!(n[f]&&a[f+1]),y=!(i[f]&&s[f+1]);if(p&&y){const T=es(f,-1,-1),v=es(f+1,this.viewItems.length),b=this.findFirstSnapIndex(T),w=this.findFirstSnapIndex(v),R=typeof b=="number"&&!this.viewItems[b].visible,N=typeof w=="number"&&!this.viewItems[w].visible;R&&s[f]&&(l>0||this.startSnappingEnabled)?d.state=kr.Minimum:N&&n[f]&&(l<this.contentSize||this.endSnappingEnabled)?d.state=kr.Maximum:d.state=kr.Disabled}else d.state=p&&!y?kr.Minimum:!p&&y?kr.Maximum:kr.Enabled}}findFirstSnapIndex(e){for(const n of e){const i=this.viewItems[n];if(i.visible&&i.snap)return n}for(const n of e){const i=this.viewItems[n];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return n}}}class Kl{constructor(e){this.size=void 0,this.size=e}getPreferredSize(){return this.size}}class VI{constructor(e,n){this.proportion=void 0,this.layoutService=void 0,this.proportion=e,this.layoutService=n}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class pm{getPreferredSize(){}}class FI{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(e){if(typeof e=="number")this.layoutStrategy=new Kl(e);else if(typeof e=="string"){const n=e.trim();if(hm(n,"%")){const i=Number(n.slice(0,-1))/100;this.layoutStrategy=new VI(i,this.layoutService)}else if(hm(n,"px")){const i=Number(n.slice(0,-2))/100;this.layoutStrategy=new Kl(i)}else if(typeof Number.parseFloat(n)=="number"){const i=Number.parseFloat(n);this.layoutStrategy=new Kl(i)}else this.layoutStrategy=new pm}else this.layoutStrategy=new pm}constructor(e,n){var i;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=e,this.element=n.element,this.minimumSize=typeof n.minimumSize=="number"?n.minimumSize:30,this.maximumSize=typeof n.maximumSize=="number"?n.maximumSize:Number.POSITIVE_INFINITY,typeof n.preferredSize=="number")this.layoutStrategy=new Kl(n.preferredSize);else if(typeof n.preferredSize=="string"){const r=n.preferredSize.trim();if(hm(r,"%")){const s=Number(r.slice(0,-1))/100;this.layoutStrategy=new VI(s,this.layoutService)}else if(hm(r,"px")){const s=Number(r.slice(0,-2));this.layoutStrategy=new Kl(s)}else if(typeof Number.parseFloat(r)=="number"){const s=Number.parseFloat(r);this.layoutStrategy=new Kl(s)}else this.layoutStrategy=new pm}else this.layoutStrategy=new pm;this.priority=(i=n.priority)!=null?i:ts.Normal,this.snap=typeof n.snap=="boolean"&&n.snap}layout(e){}}function HI(t){return t.minSize!==void 0||t.maxSize!==void 0||t.preferredSize!==void 0||t.priority!==void 0||t.visible!==void 0}const Mv=q.forwardRef(({className:t,children:e},n)=>Te.createElement("div",{ref:n,className:jE("split-view-view",FD,t)},e));Mv.displayName="Allotment.Pane";const KD=q.forwardRef(({children:t,className:e,id:n,maxSize:i=1/0,minSize:r=30,proportionalLayout:s=!0,separator:a=!0,sizes:l,defaultSizes:f=l,snap:d=!1,vertical:p=!1,onChange:y,onReset:T,onVisibleChange:v,onDragStart:b,onDragEnd:w},R)=>{const N=q.useRef(null),V=q.useRef([]),G=q.useRef(new Map),F=q.useRef(null),J=q.useRef(new Map),K=q.useRef(new OV),M=q.useRef([]),[P,L]=q.useState(!1),O=q.useMemo(()=>Te.Children.toArray(t).filter(Te.isValidElement),[t]),B=q.useCallback(z=>{var D,U;const Q=(D=M.current)==null?void 0:D[z];return typeof Q?.preferredSize=="number"&&((U=F.current)!=null&&U.resizeView(z,Math.round(Q.preferredSize)),!0)},[]);return q.useImperativeHandle(R,()=>({reset:()=>{if(T)T();else{var z;(z=F.current)==null||z.distributeViewSizes();for(let D=0;D<M.current.length;D++)B(D)}},resize:z=>{var D;(D=F.current)==null||D.resizeViews(z)}})),NI(()=>{let z=!0;f&&J.current.size!==f.length&&(z=!1,console.warn(`Expected ${f.length} children based on defaultSizes but found ${J.current.size}`)),z&&f&&(V.current=O.map(Q=>Q.key));const D=kd({orientation:p?ns.Vertical:ns.Horizontal,proportionalLayout:s},z&&f&&{descriptor:{size:f.reduce((Q,$)=>Q+$,0),views:f.map((Q,$)=>{var j,se,oe,I;const ne=G.current.get(V.current[$]),le=new FI(K.current,kd({element:document.createElement("div"),minimumSize:(j=ne?.minSize)!=null?j:r,maximumSize:(se=ne?.maxSize)!=null?se:i,priority:(oe=ne?.priority)!=null?oe:ts.Normal},ne?.preferredSize&&{preferredSize:ne?.preferredSize},{snap:(I=ne?.snap)!=null?I:d}));return M.current.push(le),{container:[...J.current.values()][$],size:Q,view:le}})}});F.current=new YV(N.current,D,y,b,w),F.current.on("sashDragStart",()=>{var Q;(Q=N.current)==null||Q.classList.add("split-view-sash-dragging")}),F.current.on("sashDragEnd",()=>{var Q;(Q=N.current)==null||Q.classList.remove("split-view-sash-dragging")}),F.current.on("sashchange",Q=>{if(v&&F.current){const $=O.map(j=>j.key);for(let j=0;j<$.length;j++){const se=G.current.get($[j]);se?.visible!==void 0&&se.visible!==F.current.isViewVisible(j)&&v(j,F.current.isViewVisible(j))}}}),F.current.on("sashreset",Q=>{if(T)T();else{var $;if(B(Q)||B(Q+1))return;($=F.current)==null||$.distributeViewSizes()}});const U=F.current;return()=>{U.dispose()}},[]),NI(()=>{if(P){const H=O.map(be=>be.key),ye=[...V.current],Ne=H.filter(be=>!V.current.includes(be)),Re=H.filter(be=>V.current.includes(be)),$e=V.current.map(be=>!H.includes(be));for(let be=$e.length-1;be>=0;be--){var z;$e[be]&&((z=F.current)!=null&&z.removeView(be),ye.splice(be,1),M.current.splice(be,1))}for(const be of Ne){var D,U,Q,$,j;const Ue=G.current.get(be),Ve=new FI(K.current,kd({element:document.createElement("div"),minimumSize:(D=Ue?.minSize)!=null?D:r,maximumSize:(U=Ue?.maxSize)!=null?U:i,priority:(Q=Ue?.priority)!=null?Q:ts.Normal},Ue?.preferredSize&&{preferredSize:Ue?.preferredSize},{snap:($=Ue?.snap)!=null?$:d}));(j=F.current)!=null&&j.addView(J.current.get(be),Ve,og.Distribute,H.findIndex(it=>it===be)),ye.splice(H.findIndex(it=>it===be),0,be),M.current.splice(H.findIndex(it=>it===be),0,Ve)}for(;!wV(H,ye);)for(const[be,Ue]of H.entries()){const Ve=ye.findIndex(it=>it===Ue);if(Ve!==be){var se;(se=F.current)==null||se.moveView(J.current.get(Ue),Ve,be);const it=ye[Ve];ye.splice(Ve,1),ye.splice(be,0,it);break}}for(const be of Ne){var oe;const Ue=H.findIndex(it=>it===be),Ve=M.current[Ue].preferredSize;Ve!==void 0&&((oe=F.current)==null||oe.resizeView(Ue,Ve))}for(const be of[...Ne,...Re]){var I,ne;const Ue=G.current.get(be),Ve=H.findIndex(it=>it===be);Ue&&HI(Ue)&&Ue.visible!==void 0&&((I=F.current)==null?void 0:I.isViewVisible(Ve))!==Ue.visible&&((ne=F.current)==null||ne.setViewVisible(Ve,Ue.visible))}for(const be of Re){const Ue=G.current.get(be),Ve=H.findIndex(it=>it===be);if(Ue&&HI(Ue)){var le;Ue.preferredSize!==void 0&&M.current[Ve].preferredSize!==Ue.preferredSize&&(M.current[Ve].preferredSize=Ue.preferredSize);let it=!1;Ue.minSize!==void 0&&M.current[Ve].minimumSize!==Ue.minSize&&(M.current[Ve].minimumSize=Ue.minSize,it=!0),Ue.maxSize!==void 0&&M.current[Ve].maximumSize!==Ue.maxSize&&(M.current[Ve].maximumSize=Ue.maxSize,it=!0),it&&((le=F.current)==null||le.layout())}}(Ne.length>0||$e.length>0)&&(V.current=H)}},[O,P,i,r,d]),q.useEffect(()=>{F.current&&(F.current.onDidChange=y)},[y]),q.useEffect(()=>{F.current&&(F.current.onDidDragStart=b)},[b]),q.useEffect(()=>{F.current&&(F.current.onDidDragEnd=w)},[w]),xV({ref:N,onResize:({width:z,height:D})=>{var U;z&&D&&((U=F.current)!=null&&U.layout(p?D:z),K.current.setSize(p?D:z),L(!0))}}),q.useEffect(()=>{qD&&KV(20)},[]),Te.createElement("div",{ref:N,className:jE("split-view",p?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":a},RV,p?MV:kV,{[PV]:a},e),id:n},Te.createElement("div",{className:jE("split-view-container",DV)},Te.Children.toArray(t).map(z=>{if(!Te.isValidElement(z))return null;const D=z.key;return z.type.displayName==="Allotment.Pane"?(G.current.set(D,z.props),Te.cloneElement(z,{key:D,ref:U=>{const Q=z.ref;Q&&(Q.current=U),U?J.current.set(D,U):J.current.delete(D)}})):Te.createElement(Mv,{key:D,ref:U=>{U?J.current.set(D,U):J.current.delete(D)}},z)})))});function KV(t){const e=_s(t,4,20),n=_s(t,1,8);document.documentElement.style.setProperty("--sash-size",e+"px"),document.documentElement.style.setProperty("--sash-hover-size",n+"px"),function(i){GD=i,$D.emit("onDidChangeGlobalSize",i)}(e)}KD.displayName="Allotment";var Q_=Object.assign(KD,{Pane:Mv});const WV=()=>{};var zI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},XV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],f=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},XD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,f=r+2<t.length,d=f?t[r+2]:0,p=s>>2,y=(s&3)<<4|l>>4;let T=(l&15)<<2|d>>6,v=d&63;f||(v=64,a||(T=64)),i.push(n[p],n[y],n[T],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||d==null||y==null)throw new QV;const T=s<<2|l>>4;if(i.push(T),d!==64){const v=l<<4&240|d>>2;if(i.push(v),y!==64){const b=d<<6&192|y;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JV=function(t){const e=WD(t);return XD.encodeByteArray(e,!0)},ag=function(t){return JV(t).replace(/\./g,"")},QD=function(t){try{return XD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=()=>ZV().__FIREBASE_DEFAULTS__,e8=()=>{if(typeof process>"u"||typeof zI>"u")return;const t=zI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},t8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QD(t[1]);return e&&JSON.parse(e)},Wg=()=>{try{return WV()||jV()||e8()||t8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JD=t=>{var e,n;return(n=(e=Wg())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},n8=t=>{const e=JD(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ZD=()=>{var t;return(t=Wg())===null||t===void 0?void 0:t.config},jD=t=>{var e;return(e=Wg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){return t.endsWith(".cloudworkstations.dev")}async function eM(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ag(JSON.stringify(n)),ag(JSON.stringify(a)),""].join(".")}const Pd={};function s8(){const t={prod:[],emulator:[]};for(const e of Object.keys(Pd))Pd[e]?t.emulator.push(e):t.prod.push(e);return t}function o8(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let qI=!1;function tM(t,e){if(typeof window>"u"||typeof document>"u"||!Gc(window.location.host)||Pd[t]===e||Pd[t]||qI)return;Pd[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",s=s8().prod.length>0;function a(){const T=document.getElementById(i);T&&T.remove()}function l(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,v){T.setAttribute("width","24"),T.setAttribute("id",v),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function d(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{qI=!0,a()},T}function p(T,v){T.setAttribute("id",v),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function y(){const T=o8(i),v=n("text"),b=document.getElementById(v)||document.createElement("span"),w=n("learnmore"),R=document.getElementById(w)||document.createElement("a"),N=n("preprendIcon"),V=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;l(G),p(R,w);const F=d();f(V,N),G.append(V,b,R,F),document.body.appendChild(G)}s?(b.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yi())}function u8(){var t;const e=(t=Wg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function f8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d8(){const t=Yi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function h8(){return!u8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function p8(){try{return typeof indexedDB=="object"}catch{return!1}}function m8(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8="FirebaseError";class qo extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=g8,Object.setPrototypeOf(this,qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bh.prototype.create)}}class bh{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?y8(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new qo(r,l,i)}}function y8(t,e){return t.replace(_8,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const _8=/\{\$([^}]+)}/g;function E8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hu(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(GI(s)&&GI(a)){if(!Hu(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function GI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ad(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function bd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function T8(t,e){const n=new v8(t,e);return n.subscribe.bind(n)}class v8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");S8(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=J_),r.error===void 0&&(r.error=J_),r.complete===void 0&&(r.complete=J_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function J_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){return t&&t._delegate?t._delegate:t}class zu{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C8=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new i8;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b8(e))try{this.getOrInitializeService({instanceIdentifier:Ru})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Ru){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ru){return this.instances.has(e)}getOptions(e=Ru){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:A8(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ru){return this.component?this.component.multipleInstances?e:Ru:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function A8(t){return t===Ru?void 0:t}function b8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new C8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const w8={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},x8=Rt.INFO,R8={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},N8=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=R8[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kv{constructor(e){this.name=e,this._logLevel=x8,this._logHandler=N8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?w8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const D8=(t,e)=>e.some(n=>t instanceof n);let $I,YI;function M8(){return $I||($I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k8(){return YI||(YI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nM=new WeakMap,eT=new WeakMap,iM=new WeakMap,Z_=new WeakMap,Pv=new WeakMap;function P8(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Oa(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&nM.set(n,t)}).catch(()=>{}),Pv.set(e,t),e}function L8(t){if(eT.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});eT.set(t,e)}let tT={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O8(t){tT=t(tT)}function U8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(j_(this),e,...n);return iM.set(i,e.sort?e.sort():[e]),Oa(i)}:k8().includes(t)?function(...e){return t.apply(j_(this),e),Oa(nM.get(this))}:function(...e){return Oa(t.apply(j_(this),e))}}function B8(t){return typeof t=="function"?U8(t):(t instanceof IDBTransaction&&L8(t),D8(t,M8())?new Proxy(t,tT):t)}function Oa(t){if(t instanceof IDBRequest)return P8(t);if(Z_.has(t))return Z_.get(t);const e=B8(t);return e!==t&&(Z_.set(t,e),Pv.set(e,t)),e}const j_=t=>Pv.get(t);function V8(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=Oa(a);return i&&a.addEventListener("upgradeneeded",f=>{i(Oa(a.result),f.oldVersion,f.newVersion,Oa(a.transaction),f)}),n&&a.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),l.then(f=>{s&&f.addEventListener("close",()=>s()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const F8=["get","getKey","getAll","getAllKeys","count"],H8=["put","add","delete","clear"],eE=new Map;function KI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eE.get(e))return eE.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=H8.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||F8.includes(n)))return;const s=async function(a,...l){const f=this.transaction(a,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&f.done]))[0]};return eE.set(e,s),s}O8(t=>({...t,get:(e,n,i)=>KI(e,n)||t.get(e,n,i),has:(e,n)=>!!KI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q8(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function q8(t){const e=t.getComponent();return e?.type==="VERSION"}const nT="@firebase/app",WI="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new kv("@firebase/app"),G8="@firebase/app-compat",$8="@firebase/analytics-compat",Y8="@firebase/analytics",K8="@firebase/app-check-compat",W8="@firebase/app-check",X8="@firebase/auth",Q8="@firebase/auth-compat",J8="@firebase/database",Z8="@firebase/data-connect",j8="@firebase/database-compat",eF="@firebase/functions",tF="@firebase/functions-compat",nF="@firebase/installations",iF="@firebase/installations-compat",rF="@firebase/messaging",sF="@firebase/messaging-compat",oF="@firebase/performance",aF="@firebase/performance-compat",uF="@firebase/remote-config",lF="@firebase/remote-config-compat",cF="@firebase/storage",fF="@firebase/storage-compat",dF="@firebase/firestore",hF="@firebase/ai",pF="@firebase/firestore-compat",mF="firebase",gF="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="[DEFAULT]",yF={[nT]:"fire-core",[G8]:"fire-core-compat",[Y8]:"fire-analytics",[$8]:"fire-analytics-compat",[W8]:"fire-app-check",[K8]:"fire-app-check-compat",[X8]:"fire-auth",[Q8]:"fire-auth-compat",[J8]:"fire-rtdb",[Z8]:"fire-data-connect",[j8]:"fire-rtdb-compat",[eF]:"fire-fn",[tF]:"fire-fn-compat",[nF]:"fire-iid",[iF]:"fire-iid-compat",[rF]:"fire-fcm",[sF]:"fire-fcm-compat",[oF]:"fire-perf",[aF]:"fire-perf-compat",[uF]:"fire-rc",[lF]:"fire-rc-compat",[cF]:"fire-gcs",[fF]:"fire-gcs-compat",[dF]:"fire-fst",[pF]:"fire-fst-compat",[hF]:"fire-vertex","fire-js":"fire-js",[mF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=new Map,_F=new Map,rT=new Map;function XI(t,e){try{t.container.addComponent(e)}catch(n){Uo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rc(t){const e=t.name;if(rT.has(e))return Uo.debug(`There were multiple attempts to register component ${e}.`),!1;rT.set(e,t);for(const n of ug.values())XI(n,t);for(const n of _F.values())XI(n,t);return!0}function Lv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ss(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ua=new bh("app","Firebase",EF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ua.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=gF;function rM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:iT,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Ua.create("bad-app-name",{appName:String(r)});if(n||(n=ZD()),!n)throw Ua.create("no-options");const s=ug.get(r);if(s){if(Hu(n,s.options)&&Hu(i,s.config))return s;throw Ua.create("duplicate-app",{appName:r})}const a=new I8(r);for(const f of rT.values())a.addComponent(f);const l=new TF(n,i,a);return ug.set(r,l),l}function sM(t=iT){const e=ug.get(t);if(!e&&t===iT&&ZD())return rM();if(!e)throw Ua.create("no-app",{appName:t});return e}function Ba(t,e,n){var i;let r=(i=yF[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Uo.warn(l.join(" "));return}Rc(new zu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF="firebase-heartbeat-database",SF=1,rh="firebase-heartbeat-store";let tE=null;function oM(){return tE||(tE=V8(vF,SF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ua.create("idb-open",{originalErrorMessage:t.message})})),tE}async function CF(t){try{const n=(await oM()).transaction(rh),i=await n.objectStore(rh).get(aM(t));return await n.done,i}catch(e){if(e instanceof qo)Uo.warn(e.message);else{const n=Ua.create("idb-get",{originalErrorMessage:e?.message});Uo.warn(n.message)}}}async function QI(t,e){try{const i=(await oM()).transaction(rh,"readwrite");await i.objectStore(rh).put(e,aM(t)),await i.done}catch(n){if(n instanceof qo)Uo.warn(n.message);else{const i=Ua.create("idb-set",{originalErrorMessage:n?.message});Uo.warn(i.message)}}}function aM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=1024,bF=30;class IF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xF(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=JI();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>bF){const a=RF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Uo.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=JI(),{heartbeatsToSend:i,unsentEntries:r}=wF(this._heartbeatsCache.heartbeats),s=ag(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Uo.warn(n),""}}}function JI(){return new Date().toISOString().substring(0,10)}function wF(t,e=AF){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),ZI(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ZI(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return p8()?m8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CF(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return QI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return QI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ZI(t){return ag(JSON.stringify({version:2,heartbeats:t})).length}function RF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t){Rc(new zu("platform-logger",e=>new z8(e),"PRIVATE")),Rc(new zu("heartbeat",e=>new IF(e),"PRIVATE")),Ba(nT,WI,t),Ba(nT,WI,"esm2017"),Ba("fire-js","")}NF("");var DF="firebase",MF="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ba(DF,MF,"app");var jI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Va,uM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function L(){}L.prototype=P.prototype,M.D=P.prototype,M.prototype=new L,M.prototype.constructor=M,M.C=function(O,B,z){for(var D=Array(arguments.length-2),U=2;U<arguments.length;U++)D[U-2]=arguments[U];return P.prototype[B].apply(O,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,P,L){L||(L=0);var O=Array(16);if(typeof P=="string")for(var B=0;16>B;++B)O[B]=P.charCodeAt(L++)|P.charCodeAt(L++)<<8|P.charCodeAt(L++)<<16|P.charCodeAt(L++)<<24;else for(B=0;16>B;++B)O[B]=P[L++]|P[L++]<<8|P[L++]<<16|P[L++]<<24;P=M.g[0],L=M.g[1],B=M.g[2];var z=M.g[3],D=P+(z^L&(B^z))+O[0]+3614090360&4294967295;P=L+(D<<7&4294967295|D>>>25),D=z+(B^P&(L^B))+O[1]+3905402710&4294967295,z=P+(D<<12&4294967295|D>>>20),D=B+(L^z&(P^L))+O[2]+606105819&4294967295,B=z+(D<<17&4294967295|D>>>15),D=L+(P^B&(z^P))+O[3]+3250441966&4294967295,L=B+(D<<22&4294967295|D>>>10),D=P+(z^L&(B^z))+O[4]+4118548399&4294967295,P=L+(D<<7&4294967295|D>>>25),D=z+(B^P&(L^B))+O[5]+1200080426&4294967295,z=P+(D<<12&4294967295|D>>>20),D=B+(L^z&(P^L))+O[6]+2821735955&4294967295,B=z+(D<<17&4294967295|D>>>15),D=L+(P^B&(z^P))+O[7]+4249261313&4294967295,L=B+(D<<22&4294967295|D>>>10),D=P+(z^L&(B^z))+O[8]+1770035416&4294967295,P=L+(D<<7&4294967295|D>>>25),D=z+(B^P&(L^B))+O[9]+2336552879&4294967295,z=P+(D<<12&4294967295|D>>>20),D=B+(L^z&(P^L))+O[10]+4294925233&4294967295,B=z+(D<<17&4294967295|D>>>15),D=L+(P^B&(z^P))+O[11]+2304563134&4294967295,L=B+(D<<22&4294967295|D>>>10),D=P+(z^L&(B^z))+O[12]+1804603682&4294967295,P=L+(D<<7&4294967295|D>>>25),D=z+(B^P&(L^B))+O[13]+4254626195&4294967295,z=P+(D<<12&4294967295|D>>>20),D=B+(L^z&(P^L))+O[14]+2792965006&4294967295,B=z+(D<<17&4294967295|D>>>15),D=L+(P^B&(z^P))+O[15]+1236535329&4294967295,L=B+(D<<22&4294967295|D>>>10),D=P+(B^z&(L^B))+O[1]+4129170786&4294967295,P=L+(D<<5&4294967295|D>>>27),D=z+(L^B&(P^L))+O[6]+3225465664&4294967295,z=P+(D<<9&4294967295|D>>>23),D=B+(P^L&(z^P))+O[11]+643717713&4294967295,B=z+(D<<14&4294967295|D>>>18),D=L+(z^P&(B^z))+O[0]+3921069994&4294967295,L=B+(D<<20&4294967295|D>>>12),D=P+(B^z&(L^B))+O[5]+3593408605&4294967295,P=L+(D<<5&4294967295|D>>>27),D=z+(L^B&(P^L))+O[10]+38016083&4294967295,z=P+(D<<9&4294967295|D>>>23),D=B+(P^L&(z^P))+O[15]+3634488961&4294967295,B=z+(D<<14&4294967295|D>>>18),D=L+(z^P&(B^z))+O[4]+3889429448&4294967295,L=B+(D<<20&4294967295|D>>>12),D=P+(B^z&(L^B))+O[9]+568446438&4294967295,P=L+(D<<5&4294967295|D>>>27),D=z+(L^B&(P^L))+O[14]+3275163606&4294967295,z=P+(D<<9&4294967295|D>>>23),D=B+(P^L&(z^P))+O[3]+4107603335&4294967295,B=z+(D<<14&4294967295|D>>>18),D=L+(z^P&(B^z))+O[8]+1163531501&4294967295,L=B+(D<<20&4294967295|D>>>12),D=P+(B^z&(L^B))+O[13]+2850285829&4294967295,P=L+(D<<5&4294967295|D>>>27),D=z+(L^B&(P^L))+O[2]+4243563512&4294967295,z=P+(D<<9&4294967295|D>>>23),D=B+(P^L&(z^P))+O[7]+1735328473&4294967295,B=z+(D<<14&4294967295|D>>>18),D=L+(z^P&(B^z))+O[12]+2368359562&4294967295,L=B+(D<<20&4294967295|D>>>12),D=P+(L^B^z)+O[5]+4294588738&4294967295,P=L+(D<<4&4294967295|D>>>28),D=z+(P^L^B)+O[8]+2272392833&4294967295,z=P+(D<<11&4294967295|D>>>21),D=B+(z^P^L)+O[11]+1839030562&4294967295,B=z+(D<<16&4294967295|D>>>16),D=L+(B^z^P)+O[14]+4259657740&4294967295,L=B+(D<<23&4294967295|D>>>9),D=P+(L^B^z)+O[1]+2763975236&4294967295,P=L+(D<<4&4294967295|D>>>28),D=z+(P^L^B)+O[4]+1272893353&4294967295,z=P+(D<<11&4294967295|D>>>21),D=B+(z^P^L)+O[7]+4139469664&4294967295,B=z+(D<<16&4294967295|D>>>16),D=L+(B^z^P)+O[10]+3200236656&4294967295,L=B+(D<<23&4294967295|D>>>9),D=P+(L^B^z)+O[13]+681279174&4294967295,P=L+(D<<4&4294967295|D>>>28),D=z+(P^L^B)+O[0]+3936430074&4294967295,z=P+(D<<11&4294967295|D>>>21),D=B+(z^P^L)+O[3]+3572445317&4294967295,B=z+(D<<16&4294967295|D>>>16),D=L+(B^z^P)+O[6]+76029189&4294967295,L=B+(D<<23&4294967295|D>>>9),D=P+(L^B^z)+O[9]+3654602809&4294967295,P=L+(D<<4&4294967295|D>>>28),D=z+(P^L^B)+O[12]+3873151461&4294967295,z=P+(D<<11&4294967295|D>>>21),D=B+(z^P^L)+O[15]+530742520&4294967295,B=z+(D<<16&4294967295|D>>>16),D=L+(B^z^P)+O[2]+3299628645&4294967295,L=B+(D<<23&4294967295|D>>>9),D=P+(B^(L|~z))+O[0]+4096336452&4294967295,P=L+(D<<6&4294967295|D>>>26),D=z+(L^(P|~B))+O[7]+1126891415&4294967295,z=P+(D<<10&4294967295|D>>>22),D=B+(P^(z|~L))+O[14]+2878612391&4294967295,B=z+(D<<15&4294967295|D>>>17),D=L+(z^(B|~P))+O[5]+4237533241&4294967295,L=B+(D<<21&4294967295|D>>>11),D=P+(B^(L|~z))+O[12]+1700485571&4294967295,P=L+(D<<6&4294967295|D>>>26),D=z+(L^(P|~B))+O[3]+2399980690&4294967295,z=P+(D<<10&4294967295|D>>>22),D=B+(P^(z|~L))+O[10]+4293915773&4294967295,B=z+(D<<15&4294967295|D>>>17),D=L+(z^(B|~P))+O[1]+2240044497&4294967295,L=B+(D<<21&4294967295|D>>>11),D=P+(B^(L|~z))+O[8]+1873313359&4294967295,P=L+(D<<6&4294967295|D>>>26),D=z+(L^(P|~B))+O[15]+4264355552&4294967295,z=P+(D<<10&4294967295|D>>>22),D=B+(P^(z|~L))+O[6]+2734768916&4294967295,B=z+(D<<15&4294967295|D>>>17),D=L+(z^(B|~P))+O[13]+1309151649&4294967295,L=B+(D<<21&4294967295|D>>>11),D=P+(B^(L|~z))+O[4]+4149444226&4294967295,P=L+(D<<6&4294967295|D>>>26),D=z+(L^(P|~B))+O[11]+3174756917&4294967295,z=P+(D<<10&4294967295|D>>>22),D=B+(P^(z|~L))+O[2]+718787259&4294967295,B=z+(D<<15&4294967295|D>>>17),D=L+(z^(B|~P))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(B+(D<<21&4294967295|D>>>11))&4294967295,M.g[2]=M.g[2]+B&4294967295,M.g[3]=M.g[3]+z&4294967295}i.prototype.u=function(M,P){P===void 0&&(P=M.length);for(var L=P-this.blockSize,O=this.B,B=this.h,z=0;z<P;){if(B==0)for(;z<=L;)r(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<P;)if(O[B++]=M.charCodeAt(z++),B==this.blockSize){r(this,O),B=0;break}}else for(;z<P;)if(O[B++]=M[z++],B==this.blockSize){r(this,O),B=0;break}}this.h=B,this.o+=P},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;var L=8*this.o;for(P=M.length-8;P<M.length;++P)M[P]=L&255,L/=256;for(this.u(M),M=Array(16),P=L=0;4>P;++P)for(var O=0;32>O;O+=8)M[L++]=this.g[P]>>>O&255;return M};function s(M,P){var L=l;return Object.prototype.hasOwnProperty.call(L,M)?L[M]:L[M]=P(M)}function a(M,P){this.h=P;for(var L=[],O=!0,B=M.length-1;0<=B;B--){var z=M[B]|0;O&&z==P||(L[B]=z,O=!1)}this.g=L}var l={};function f(M){return-128<=M&&128>M?s(M,function(P){return new a([P|0],0>P?-1:0)}):new a([M|0],0>M?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return y;if(0>M)return R(d(-M));for(var P=[],L=1,O=0;M>=L;O++)P[O]=M/L|0,L*=4294967296;return new a(P,0)}function p(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return R(p(M.substring(1),P));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=d(Math.pow(P,8)),O=y,B=0;B<M.length;B+=8){var z=Math.min(8,M.length-B),D=parseInt(M.substring(B,B+z),P);8>z?(z=d(Math.pow(P,z)),O=O.j(z).add(d(D))):(O=O.j(L),O=O.add(d(D)))}return O}var y=f(0),T=f(1),v=f(16777216);t=a.prototype,t.m=function(){if(w(this))return-R(this).m();for(var M=0,P=1,L=0;L<this.g.length;L++){var O=this.i(L);M+=(0<=O?O:4294967296+O)*P,P*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(b(this))return"0";if(w(this))return"-"+R(this).toString(M);for(var P=d(Math.pow(M,6)),L=this,O="";;){var B=F(L,P).g;L=N(L,B.j(P));var z=((0<L.g.length?L.g[0]:L.h)>>>0).toString(M);if(L=B,b(L))return z+O;for(;6>z.length;)z="0"+z;O=z+O}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function b(M){if(M.h!=0)return!1;for(var P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function w(M){return M.h==-1}t.l=function(M){return M=N(this,M),w(M)?-1:b(M)?0:1};function R(M){for(var P=M.g.length,L=[],O=0;O<P;O++)L[O]=~M.g[O];return new a(L,~M.h).add(T)}t.abs=function(){return w(this)?R(this):this},t.add=function(M){for(var P=Math.max(this.g.length,M.g.length),L=[],O=0,B=0;B<=P;B++){var z=O+(this.i(B)&65535)+(M.i(B)&65535),D=(z>>>16)+(this.i(B)>>>16)+(M.i(B)>>>16);O=D>>>16,z&=65535,D&=65535,L[B]=D<<16|z}return new a(L,L[L.length-1]&-2147483648?-1:0)};function N(M,P){return M.add(R(P))}t.j=function(M){if(b(this)||b(M))return y;if(w(this))return w(M)?R(this).j(R(M)):R(R(this).j(M));if(w(M))return R(this.j(R(M)));if(0>this.l(v)&&0>M.l(v))return d(this.m()*M.m());for(var P=this.g.length+M.g.length,L=[],O=0;O<2*P;O++)L[O]=0;for(O=0;O<this.g.length;O++)for(var B=0;B<M.g.length;B++){var z=this.i(O)>>>16,D=this.i(O)&65535,U=M.i(B)>>>16,Q=M.i(B)&65535;L[2*O+2*B]+=D*Q,V(L,2*O+2*B),L[2*O+2*B+1]+=z*Q,V(L,2*O+2*B+1),L[2*O+2*B+1]+=D*U,V(L,2*O+2*B+1),L[2*O+2*B+2]+=z*U,V(L,2*O+2*B+2)}for(O=0;O<P;O++)L[O]=L[2*O+1]<<16|L[2*O];for(O=P;O<2*P;O++)L[O]=0;return new a(L,0)};function V(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function G(M,P){this.g=M,this.h=P}function F(M,P){if(b(P))throw Error("division by zero");if(b(M))return new G(y,y);if(w(M))return P=F(R(M),P),new G(R(P.g),R(P.h));if(w(P))return P=F(M,R(P)),new G(R(P.g),P.h);if(30<M.g.length){if(w(M)||w(P))throw Error("slowDivide_ only works with positive integers.");for(var L=T,O=P;0>=O.l(M);)L=J(L),O=J(O);var B=K(L,1),z=K(O,1);for(O=K(O,2),L=K(L,2);!b(O);){var D=z.add(O);0>=D.l(M)&&(B=B.add(L),z=D),O=K(O,1),L=K(L,1)}return P=N(M,B.j(P)),new G(B,P)}for(B=y;0<=M.l(P);){for(L=Math.max(1,Math.floor(M.m()/P.m())),O=Math.ceil(Math.log(L)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),z=d(L),D=z.j(P);w(D)||0<D.l(M);)L-=O,z=d(L),D=z.j(P);b(z)&&(z=T),B=B.add(z),M=N(M,D)}return new G(B,M)}t.A=function(M){return F(this,M).h},t.and=function(M){for(var P=Math.max(this.g.length,M.g.length),L=[],O=0;O<P;O++)L[O]=this.i(O)&M.i(O);return new a(L,this.h&M.h)},t.or=function(M){for(var P=Math.max(this.g.length,M.g.length),L=[],O=0;O<P;O++)L[O]=this.i(O)|M.i(O);return new a(L,this.h|M.h)},t.xor=function(M){for(var P=Math.max(this.g.length,M.g.length),L=[],O=0;O<P;O++)L[O]=this.i(O)^M.i(O);return new a(L,this.h^M.h)};function J(M){for(var P=M.g.length+1,L=[],O=0;O<P;O++)L[O]=M.i(O)<<1|M.i(O-1)>>>31;return new a(L,M.h)}function K(M,P){var L=P>>5;P%=32;for(var O=M.g.length-L,B=[],z=0;z<O;z++)B[z]=0<P?M.i(z+L)>>>P|M.i(z+L+1)<<32-P:M.i(z+L);return new a(B,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,uM=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Va=a}).apply(typeof jI<"u"?jI:typeof self<"u"?self:typeof window<"u"?window:{});var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lM,Id,cM,Pm,sT,fM,dM,hM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,A,x){return _==Array.prototype||_==Object.prototype||(_[A]=x.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof mm=="object"&&mm];for(var A=0;A<_.length;++A){var x=_[A];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(_,A){if(A)e:{var x=i;_=_.split(".");for(var W=0;W<_.length-1;W++){var fe=_[W];if(!(fe in x))break e;x=x[fe]}_=_[_.length-1],W=x[_],A=A(W),A!=W&&A!=null&&e(x,_,{configurable:!0,writable:!0,value:A})}}function s(_,A){_ instanceof String&&(_+="");var x=0,W=!1,fe={next:function(){if(!W&&x<_.length){var Ee=x++;return{value:A(Ee,_[Ee]),done:!1}}return W=!0,{done:!0,value:void 0}}};return fe[Symbol.iterator]=function(){return fe},fe}r("Array.prototype.values",function(_){return _||function(){return s(this,function(A,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function f(_){var A=typeof _;return A=A!="object"?A:_?Array.isArray(_)?"array":A:"null",A=="array"||A=="object"&&typeof _.length=="number"}function d(_){var A=typeof _;return A=="object"&&_!=null||A=="function"}function p(_,A,x){return _.call.apply(_.bind,arguments)}function y(_,A,x){if(!_)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(fe,W),_.apply(A,fe)}}return function(){return _.apply(A,arguments)}}function T(_,A,x){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,T.apply(null,arguments)}function v(_,A){var x=Array.prototype.slice.call(arguments,1);return function(){var W=x.slice();return W.push.apply(W,arguments),_.apply(this,W)}}function b(_,A){function x(){}x.prototype=A.prototype,_.aa=A.prototype,_.prototype=new x,_.prototype.constructor=_,_.Qb=function(W,fe,Ee){for(var Be=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Be[Ot-2]=arguments[Ot];return A.prototype[fe].apply(W,Be)}}function w(_){const A=_.length;if(0<A){const x=Array(A);for(let W=0;W<A;W++)x[W]=_[W];return x}return[]}function R(_,A){for(let x=1;x<arguments.length;x++){const W=arguments[x];if(f(W)){const fe=_.length||0,Ee=W.length||0;_.length=fe+Ee;for(let Be=0;Be<Ee;Be++)_[fe+Be]=W[Be]}else _.push(W)}}class N{constructor(A,x){this.i=A,this.j=x,this.h=0,this.g=null}get(){let A;return 0<this.h?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function V(_){return/^[\s\xa0]*$/.test(_)}function G(){var _=l.navigator;return _&&(_=_.userAgent)?_:""}function F(_){return F[" "](_),_}F[" "]=function(){};var J=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function K(_,A,x){for(const W in _)A.call(x,_[W],W,_)}function M(_,A){for(const x in _)A.call(void 0,_[x],x,_)}function P(_){const A={};for(const x in _)A[x]=_[x];return A}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(_,A){let x,W;for(let fe=1;fe<arguments.length;fe++){W=arguments[fe];for(x in W)_[x]=W[x];for(let Ee=0;Ee<L.length;Ee++)x=L[Ee],Object.prototype.hasOwnProperty.call(W,x)&&(_[x]=W[x])}}function B(_){var A=1;_=_.split(":");const x=[];for(;0<A&&_.length;)x.push(_.shift()),A--;return _.length&&x.push(_.join(":")),x}function z(_){l.setTimeout(()=>{throw _},0)}function D(){var _=oe;let A=null;return _.g&&(A=_.g,_.g=_.g.next,_.g||(_.h=null),A.next=null),A}class U{constructor(){this.h=this.g=null}add(A,x){const W=Q.get();W.set(A,x),this.h?this.h.next=W:this.g=W,this.h=W}}var Q=new N(()=>new $,_=>_.reset());class ${constructor(){this.next=this.g=this.h=null}set(A,x){this.h=A,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let j,se=!1,oe=new U,I=()=>{const _=l.Promise.resolve(void 0);j=()=>{_.then(ne)}};var ne=()=>{for(var _;_=D();){try{_.h.call(_.g)}catch(x){z(x)}var A=Q;A.j(_),100>A.h&&(A.h++,_.next=A.g,A.g=_)}se=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(_,A){this.type=_,this.g=this.target=A,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var _=!1,A=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const x=()=>{};l.addEventListener("test",x,A),l.removeEventListener("test",x,A)}catch{}return _}();function Ne(_,A){if(H.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var x=this.type=_.type,W=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=A,A=_.relatedTarget){if(J){e:{try{F(A.nodeName);var fe=!0;break e}catch{}fe=!1}fe||(A=null)}}else x=="mouseover"?A=_.fromElement:x=="mouseout"&&(A=_.toElement);this.relatedTarget=A,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:Re[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&Ne.aa.h.call(this)}}b(Ne,H);var Re={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),be=0;function Ue(_,A,x,W,fe){this.listener=_,this.proxy=null,this.src=A,this.type=x,this.capture=!!W,this.ha=fe,this.key=++be,this.da=this.fa=!1}function Ve(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function it(_){this.src=_,this.g={},this.h=0}it.prototype.add=function(_,A,x,W,fe){var Ee=_.toString();_=this.g[Ee],_||(_=this.g[Ee]=[],this.h++);var Be=zt(_,A,W,fe);return-1<Be?(A=_[Be],x||(A.fa=!1)):(A=new Ue(A,this.src,Ee,!!W,fe),A.fa=x,_.push(A)),A};function Ht(_,A){var x=A.type;if(x in _.g){var W=_.g[x],fe=Array.prototype.indexOf.call(W,A,void 0),Ee;(Ee=0<=fe)&&Array.prototype.splice.call(W,fe,1),Ee&&(Ve(A),_.g[x].length==0&&(delete _.g[x],_.h--))}}function zt(_,A,x,W){for(var fe=0;fe<_.length;++fe){var Ee=_[fe];if(!Ee.da&&Ee.listener==A&&Ee.capture==!!x&&Ee.ha==W)return fe}return-1}var qt="closure_lm_"+(1e6*Math.random()|0),je={};function Cn(_,A,x,W,fe){if(Array.isArray(A)){for(var Ee=0;Ee<A.length;Ee++)Cn(_,A[Ee],x,W,fe);return null}return x=ii(x),_&&_[$e]?_.K(A,x,d(W)?!!W.capture:!1,fe):tt(_,A,x,!1,W,fe)}function tt(_,A,x,W,fe,Ee){if(!A)throw Error("Invalid event type");var Be=d(fe)?!!fe.capture:!!fe,Ot=zn(_);if(Ot||(_[qt]=Ot=new it(_)),x=Ot.add(A,x,W,Be,Ee),x.proxy)return x;if(W=Xe(),x.proxy=W,W.src=_,W.listener=x,_.addEventListener)ye||(fe=Be),fe===void 0&&(fe=!1),_.addEventListener(A.toString(),W,fe);else if(_.attachEvent)_.attachEvent(Hn(A.toString()),W);else if(_.addListener&&_.removeListener)_.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Xe(){function _(x){return A.call(_.src,_.listener,x)}const A=Wn;return _}function gn(_,A,x,W,fe){if(Array.isArray(A))for(var Ee=0;Ee<A.length;Ee++)gn(_,A[Ee],x,W,fe);else W=d(W)?!!W.capture:!!W,x=ii(x),_&&_[$e]?(_=_.i,A=String(A).toString(),A in _.g&&(Ee=_.g[A],x=zt(Ee,x,W,fe),-1<x&&(Ve(Ee[x]),Array.prototype.splice.call(Ee,x,1),Ee.length==0&&(delete _.g[A],_.h--)))):_&&(_=zn(_))&&(A=_.g[A.toString()],_=-1,A&&(_=zt(A,x,W,fe)),(x=-1<_?A[_]:null)&&Fn(x))}function Fn(_){if(typeof _!="number"&&_&&!_.da){var A=_.src;if(A&&A[$e])Ht(A.i,_);else{var x=_.type,W=_.proxy;A.removeEventListener?A.removeEventListener(x,W,_.capture):A.detachEvent?A.detachEvent(Hn(x),W):A.addListener&&A.removeListener&&A.removeListener(W),(x=zn(A))?(Ht(x,_),x.h==0&&(x.src=null,A[qt]=null)):Ve(_)}}}function Hn(_){return _ in je?je[_]:je[_]="on"+_}function Wn(_,A){if(_.da)_=!0;else{A=new Ne(A,this);var x=_.listener,W=_.ha||_.src;_.fa&&Fn(_),_=x.call(W,A)}return _}function zn(_){return _=_[qt],_ instanceof it?_:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ii(_){return typeof _=="function"?_:(_[wn]||(_[wn]=function(A){return _.handleEvent(A)}),_[wn])}function ue(){le.call(this),this.i=new it(this),this.M=this,this.F=null}b(ue,le),ue.prototype[$e]=!0,ue.prototype.removeEventListener=function(_,A,x,W){gn(this,_,A,x,W)};function Se(_,A){var x,W=_.F;if(W)for(x=[];W;W=W.F)x.push(W);if(_=_.M,W=A.type||A,typeof A=="string")A=new H(A,_);else if(A instanceof H)A.target=A.target||_;else{var fe=A;A=new H(W,_),O(A,fe)}if(fe=!0,x)for(var Ee=x.length-1;0<=Ee;Ee--){var Be=A.g=x[Ee];fe=ze(Be,W,!0,A)&&fe}if(Be=A.g=_,fe=ze(Be,W,!0,A)&&fe,fe=ze(Be,W,!1,A)&&fe,x)for(Ee=0;Ee<x.length;Ee++)Be=A.g=x[Ee],fe=ze(Be,W,!1,A)&&fe}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var _=this.i,A;for(A in _.g){for(var x=_.g[A],W=0;W<x.length;W++)Ve(x[W]);delete _.g[A],_.h--}}this.F=null},ue.prototype.K=function(_,A,x,W){return this.i.add(String(_),A,!1,x,W)},ue.prototype.L=function(_,A,x,W){return this.i.add(String(_),A,!0,x,W)};function ze(_,A,x,W){if(A=_.i.g[String(A)],!A)return!0;A=A.concat();for(var fe=!0,Ee=0;Ee<A.length;++Ee){var Be=A[Ee];if(Be&&!Be.da&&Be.capture==x){var Ot=Be.listener,oi=Be.ha||Be.src;Be.fa&&Ht(_.i,Be),fe=Ot.call(oi,W)!==!1&&fe}}return fe&&!W.defaultPrevented}function Qe(_,A,x){if(typeof _=="function")x&&(_=T(_,x));else if(_&&typeof _.handleEvent=="function")_=T(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(A)?-1:l.setTimeout(_,A||0)}function _t(_){_.g=Qe(()=>{_.g=null,_.i&&(_.i=!1,_t(_))},_.l);const A=_.h;_.h=null,_.m.apply(null,A)}class kt extends le{constructor(A,x){super(),this.m=A,this.l=x,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tn(_){le.call(this),this.h=_,this.g={}}b(tn,le);var nn=[];function rn(_){K(_.g,function(A,x){this.g.hasOwnProperty(x)&&Fn(A)},_),_.g={}}tn.prototype.N=function(){tn.aa.N.call(this),rn(this)},tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pt=l.JSON.stringify,Tt=l.JSON.parse,pn=class{stringify(_){return l.JSON.stringify(_,void 0)}parse(_){return l.JSON.parse(_,void 0)}};function ln(){}ln.prototype.h=null;function fs(_){return _.h||(_.h=_.i())}function Oi(){}var ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){H.call(this,"d")}b(Xi,H);function Ui(){H.call(this,"c")}b(Ui,H);var lr={},oo=null;function vr(){return oo=oo||new ue}lr.La="serverreachability";function ds(_){H.call(this,lr.La,_)}b(ds,H);function Qi(_){const A=vr();Se(A,new ds(A))}lr.STAT_EVENT="statevent";function Sr(_,A){H.call(this,lr.STAT_EVENT,_),this.stat=A}b(Sr,H);function cn(_){const A=vr();Se(A,new Sr(A,_))}lr.Ma="timingevent";function Xt(_,A){H.call(this,lr.Ma,_),this.size=A}b(Xt,H);function xn(_,A){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){_()},A)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function ws(_,A,x,W,fe,Ee){_.info(function(){if(_.g)if(Ee)for(var Be="",Ot=Ee.split("&"),oi=0;oi<Ot.length;oi++){var Ut=Ot[oi].split("=");if(1<Ut.length){var yi=Ut[0];Ut=Ut[1];var ai=yi.split("_");Be=2<=ai.length&&ai[1]=="type"?Be+(yi+"="+Ut+"&"):Be+(yi+"=redacted&")}}else Be=null;else Be=Ee;return"XMLHTTP REQ ("+W+") [attempt "+fe+"]: "+A+`
`+x+`
`+Be})}function nu(_,A,x,W,fe,Ee,Be){_.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+fe+"]: "+A+`
`+x+`
`+Ee+" "+Be})}function Ji(_,A,x,W){_.info(function(){return"XMLHTTP TEXT ("+A+"): "+Fr(_,x)+(W?" "+W:"")})}function xs(_,A){_.info(function(){return"TIMEOUT: "+A})}Ln.prototype.info=function(){};function Fr(_,A){if(!_.g)return A;if(!A)return null;try{var x=JSON.parse(A);if(x){for(_=0;_<x.length;_++)if(Array.isArray(x[_])){var W=x[_];if(!(2>W.length)){var fe=W[1];if(Array.isArray(fe)&&!(1>fe.length)){var Ee=fe[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(var Be=1;Be<fe.length;Be++)fe[Be]=""}}}}return Pt(x)}catch{return A}}var Cr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hi;function ji(){}b(ji,ln),ji.prototype.g=function(){return new XMLHttpRequest},ji.prototype.i=function(){return{}},hi=new ji;function si(_,A,x,W){this.j=_,this.i=A,this.l=x,this.R=W||1,this.U=new tn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new re}function re(){this.i=null,this.g="",this.h=!1}var _e={},ke={};function Fe(_,A,x){_.L=1,_.v=hs(yn(A)),_.m=x,_.P=!0,It(_,null)}function It(_,A){_.F=Date.now(),Qt(_),_.A=yn(_.v);var x=_.A,W=_.R;Array.isArray(W)||(W=[String(W)]),df(x.i,"t",W),_.C=0,x=_.j.J,_.h=new re,_.g=ep(_.j,x?A:null,!_.m),0<_.O&&(_.M=new kt(T(_.Y,_,_.g),_.O)),A=_.U,x=_.g,W=_.ca;var fe="readystatechange";Array.isArray(fe)||(fe&&(nn[0]=fe.toString()),fe=nn);for(var Ee=0;Ee<fe.length;Ee++){var Be=Cn(x,fe[Ee],W||A.handleEvent,!1,A.h||A);if(!Be)break;A.g[Be.key]=Be}A=_.H?P(_.H):{},_.m?(_.u||(_.u="POST"),A["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,A)):(_.u="GET",_.g.ea(_.A,_.u,null,A)),Qi(),ws(_.i,_.u,_.A,_.l,_.R,_.m)}si.prototype.ca=function(_){_=_.target;const A=this.M;A&&Yr(_)==3?A.j():this.Y(_)},si.prototype.Y=function(_){try{if(_==this.g)e:{const ai=Yr(this.g);var A=this.g.Ba();const po=this.g.Z();if(!(3>ai)&&(ai!=3||this.g&&(this.h.h||this.g.oa()||Yh(this.g)))){this.J||ai!=4||A==7||(A==8||0>=po?Qi(3):Qi(2)),Jt(this);var x=this.g.Z();this.X=x;t:if(ht(this)){var W=Yh(this.g);_="";var fe=W.length,Ee=Yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Gt(this);var Be="";break t}this.h.i=new l.TextDecoder}for(A=0;A<fe;A++)this.h.h=!0,_+=this.h.i.decode(W[A],{stream:!(Ee&&A==fe-1)});W.length=0,this.h.g+=_,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=x==200,nu(this.i,this.u,this.A,this.l,this.R,ai,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Ot,oi=this.g;if((Ot=oi.g?oi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Ot)){var Ut=Ot;break t}}Ut=null}if(x=Ut)Ji(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xn(this,x);else{this.o=!1,this.s=3,cn(12),Zt(this),Gt(this);break e}}if(this.P){x=!0;let Ri;for(;!this.J&&this.C<Be.length;)if(Ri=sn(this,Be),Ri==ke){ai==4&&(this.s=4,cn(14),x=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(Ri==_e){this.s=4,cn(15),Ji(this.i,this.l,Be,"[Invalid Chunk]"),x=!1;break}else Ji(this.i,this.l,Ri,null),Xn(this,Ri);if(ht(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ai!=4||Be.length!=0||this.h.h||(this.s=1,cn(16),x=!1),this.o=this.o&&x,!x)Ji(this.i,this.l,Be,"[Invalid Chunked Response]"),Zt(this),Gt(this);else if(0<Be.length&&!this.W){this.W=!0;var yi=this.j;yi.g==this&&yi.ba&&!yi.M&&(yi.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),fu(yi),yi.M=!0,cn(11))}}else Ji(this.i,this.l,Be,null),Xn(this,Be);ai==4&&Zt(this),this.o&&!this.J&&(ai==4?Jh(this.j,this):(this.o=!1,Qt(this)))}else k0(this.g),x==400&&0<Be.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),Zt(this),Gt(this)}}}catch{}finally{}};function ht(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function sn(_,A){var x=_.C,W=A.indexOf(`
`,x);return W==-1?ke:(x=Number(A.substring(x,W)),isNaN(x)?_e:(W+=1,W+x>A.length?ke:(A=A.slice(W,W+x),_.C=W+x,A)))}si.prototype.cancel=function(){this.J=!0,Zt(this)};function Qt(_){_.S=Date.now()+_.I,pi(_,_.I)}function pi(_,A){if(_.B!=null)throw Error("WatchDog timer not null");_.B=xn(T(_.ba,_),A)}function Jt(_){_.B&&(l.clearTimeout(_.B),_.B=null)}si.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(xs(this.i,this.A),this.L!=2&&(Qi(),cn(17)),Zt(this),this.s=2,Gt(this)):pi(this,this.S-_)};function Gt(_){_.j.G==0||_.J||Jh(_.j,_)}function Zt(_){Jt(_);var A=_.M;A&&typeof A.ma=="function"&&A.ma(),_.M=null,rn(_.U),_.g&&(A=_.g,_.g=null,A.abort(),A.ma())}function Xn(_,A){try{var x=_.j;if(x.G!=0&&(x.g==_||Hr(x.h,_))){if(!_.K&&Hr(x.h,_)&&x.G==3){try{var W=x.Da.g.parse(A)}catch{W=null}if(Array.isArray(W)&&W.length==3){var fe=W;if(fe[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<_.F)hl(x),fl(x);else break e;yf(x),cn(18)}}else x.za=fe[1],0<x.za-x.T&&37500>fe[2]&&x.F&&x.v==0&&!x.C&&(x.C=xn(T(x.Za,x),6e3));if(1>=tr(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else ho(x,11)}else if((_.K||x.g==_)&&hl(x),!V(A))for(fe=x.Da.g.parse(A),A=0;A<fe.length;A++){let Ut=fe[A];if(x.T=Ut[0],Ut=Ut[1],x.G==2)if(Ut[0]=="c"){x.K=Ut[1],x.ia=Ut[2];const yi=Ut[3];yi!=null&&(x.la=yi,x.j.info("VER="+x.la));const ai=Ut[4];ai!=null&&(x.Aa=ai,x.j.info("SVER="+x.Aa));const po=Ut[5];po!=null&&typeof po=="number"&&0<po&&(W=1.5*po,x.L=W,x.j.info("backChannelRequestTimeoutMs_="+W)),W=x;const Ri=_.g;if(Ri){const Os=Ri.g?Ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Os){var Ee=W.h;Ee.g||Os.indexOf("spdy")==-1&&Os.indexOf("quic")==-1&&Os.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(zr(Ee,Ee.h),Ee.h=null))}if(W.D){const Ef=Ri.g?Ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Ef&&(W.ya=Ef,Ft(W.I,W.D,Ef))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-_.F,x.j.info("Handshake RTT: "+x.R+"ms")),W=x;var Be=_;if(W.qa=jh(W,W.J?W.ia:null,W.W),Be.K){mi(W.h,Be);var Ot=Be,oi=W.L;oi&&(Ot.I=oi),Ot.B&&(Jt(Ot),Qt(Ot)),W.g=Be}else Xh(W);0<x.i.length&&dl(x)}else Ut[0]!="stop"&&Ut[0]!="close"||ho(x,7);else x.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?ho(x,7):mf(x):Ut[0]!="noop"&&x.l&&x.l.ta(Ut),x.v=0)}}Qi(4)}catch{}}var On=class{constructor(_,A){this.g=_,this.map=A}};function qn(_){this.l=_||10,l.PerformanceNavigationTiming?(_=l.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function er(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function tr(_){return _.h?1:_.g?_.g.size:0}function Hr(_,A){return _.h?_.h==A:_.g?_.g.has(A):!1}function zr(_,A){_.g?_.g.add(A):_.h=A}function mi(_,A){_.h&&_.h==A?_.h=null:_.g&&_.g.has(A)&&_.g.delete(A)}qn.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function iu(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let A=_.i;for(const x of _.g.values())A=A.concat(x.D);return A}return w(_.i)}function ff(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(f(_)){for(var A=[],x=_.length,W=0;W<x;W++)A.push(_[W]);return A}A=[],x=0;for(W in _)A[x++]=_[W];return A}function Lt(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(f(_)||typeof _=="string"){var A=[];_=_.length;for(var x=0;x<_;x++)A.push(x);return A}A=[],x=0;for(const W in _)A[x++]=W;return A}}}function Dt(_,A){if(_.forEach&&typeof _.forEach=="function")_.forEach(A,void 0);else if(f(_)||typeof _=="string")Array.prototype.forEach.call(_,A,void 0);else for(var x=Lt(_),W=ff(_),fe=W.length,Ee=0;Ee<fe;Ee++)A.call(void 0,W[Ee],x&&x[Ee],_)}var qr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gr(_,A){if(_){_=_.split("&");for(var x=0;x<_.length;x++){var W=_[x].indexOf("="),fe=null;if(0<=W){var Ee=_[x].substring(0,W);fe=_[x].substring(W+1)}else Ee=_[x];A(Ee,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function Rn(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof Rn){this.h=_.h,bi(this,_.j),this.o=_.o,this.g=_.g,Ii(this,_.s),this.l=_.l;var A=_.i,x=new cr;x.i=A.i,A.g&&(x.g=new Map(A.g),x.h=A.h),nr(this,x),this.m=_.m}else _&&(A=String(_).match(qr))?(this.h=!1,bi(this,A[1]||"",!0),this.o=wi(A[2]||""),this.g=wi(A[3]||"",!0),Ii(this,A[4]),this.l=wi(A[5]||"",!0),nr(this,A[6]||"",!0),this.m=wi(A[7]||"")):(this.h=!1,this.i=new cr(null,this.h))}Rn.prototype.toString=function(){var _=[],A=this.j;A&&_.push(ir(A,Rs,!0),":");var x=this.g;return(x||A=="file")&&(_.push("//"),(A=this.o)&&_.push(ir(A,Rs,!0),"@"),_.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&_.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&_.push("/"),_.push(ir(x,x.charAt(0)=="/"?Ko:ao,!0))),(x=this.i.toString())&&_.push("?",x),(x=this.m)&&_.push("#",ir(x,uo)),_.join("")};function yn(_){return new Rn(_)}function bi(_,A,x){_.j=x?wi(A,!0):A,_.j&&(_.j=_.j.replace(/:$/,""))}function Ii(_,A){if(A){if(A=Number(A),isNaN(A)||0>A)throw Error("Bad port number "+A);_.s=A}else _.s=null}function nr(_,A,x){A instanceof cr?(_.i=A,Gh(_.i,_.h)):(x||(A=ir(A,Wo)),_.i=new cr(A,_.h))}function Ft(_,A,x){_.i.set(A,x)}function hs(_){return Ft(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function wi(_,A){return _?A?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function ir(_,A,x){return typeof _=="string"?(_=encodeURI(_).replace(A,ru),x&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function ru(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Rs=/[#\/\?@]/g,ao=/[#\?:]/g,Ko=/[#\?]/g,Wo=/[#\?@]/g,uo=/#/g;function cr(_,A){this.h=this.g=null,this.i=_||null,this.j=!!A}function xi(_){_.g||(_.g=new Map,_.h=0,_.i&&Gr(_.i,function(A,x){_.add(decodeURIComponent(A.replace(/\+/g," ")),x)}))}t=cr.prototype,t.add=function(_,A){xi(this),this.i=null,_=Ns(this,_);var x=this.g.get(_);return x||this.g.set(_,x=[]),x.push(A),this.h+=1,this};function lo(_,A){xi(_),A=Ns(_,A),_.g.has(A)&&(_.i=null,_.h-=_.g.get(A).length,_.g.delete(A))}function co(_,A){return xi(_),A=Ns(_,A),_.g.has(A)}t.forEach=function(_,A){xi(this),this.g.forEach(function(x,W){x.forEach(function(fe){_.call(A,fe,W,this)},this)},this)},t.na=function(){xi(this);const _=Array.from(this.g.values()),A=Array.from(this.g.keys()),x=[];for(let W=0;W<A.length;W++){const fe=_[W];for(let Ee=0;Ee<fe.length;Ee++)x.push(A[W])}return x},t.V=function(_){xi(this);let A=[];if(typeof _=="string")co(this,_)&&(A=A.concat(this.g.get(Ns(this,_))));else{_=Array.from(this.g.values());for(let x=0;x<_.length;x++)A=A.concat(_[x])}return A},t.set=function(_,A){return xi(this),this.i=null,_=Ns(this,_),co(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[A]),this.h+=1,this},t.get=function(_,A){return _?(_=this.V(_),0<_.length?String(_[0]):A):A};function df(_,A,x){lo(_,A),0<x.length&&(_.i=null,_.g.set(Ns(_,A),w(x)),_.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],A=Array.from(this.g.keys());for(var x=0;x<A.length;x++){var W=A[x];const Ee=encodeURIComponent(String(W)),Be=this.V(W);for(W=0;W<Be.length;W++){var fe=Ee;Be[W]!==""&&(fe+="="+encodeURIComponent(String(Be[W]))),_.push(fe)}}return this.i=_.join("&")};function Ns(_,A){return A=String(A),_.j&&(A=A.toLowerCase()),A}function Gh(_,A){A&&!_.j&&(xi(_),_.i=null,_.g.forEach(function(x,W){var fe=W.toLowerCase();W!=fe&&(lo(this,W),df(this,fe,x))},_)),_.j=A}function su(_,A){const x=new Ln;if(l.Image){const W=new Image;W.onload=v($r,x,"TestLoadImage: loaded",!0,A,W),W.onerror=v($r,x,"TestLoadImage: error",!1,A,W),W.onabort=v($r,x,"TestLoadImage: abort",!1,A,W),W.ontimeout=v($r,x,"TestLoadImage: timeout",!1,A,W),l.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=_}else A(!1)}function ps(_,A){const x=new Ln,W=new AbortController,fe=setTimeout(()=>{W.abort(),$r(x,"TestPingServer: timeout",!1,A)},1e4);fetch(_,{signal:W.signal}).then(Ee=>{clearTimeout(fe),Ee.ok?$r(x,"TestPingServer: ok",!0,A):$r(x,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(fe),$r(x,"TestPingServer: error",!1,A)})}function $r(_,A,x,W,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),W(x)}catch{}}function ou(){this.g=new pn}function Ds(_,A,x){const W=x||"";try{Dt(_,function(fe,Ee){let Be=fe;d(fe)&&(Be=Pt(fe)),A.push(W+Ee+"="+encodeURIComponent(Be))})}catch(fe){throw A.push(W+"type="+encodeURIComponent("_badmap")),fe}}function Xo(_){this.l=_.Ub||null,this.j=_.eb||!1}b(Xo,ln),Xo.prototype.g=function(){return new fo(this.l,this.j)},Xo.prototype.i=function(_){return function(){return _}}({});function fo(_,A){ue.call(this),this.D=_,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(fo,ue),t=fo.prototype,t.open=function(_,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=A,this.readyState=1,ks(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const A={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(A.body=_),(this.D||l).fetch(new Request(this.A,A)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hf(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function hf(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var A=_.value?_.value:new Uint8Array(0);(A=this.v.decode(A,{stream:!_.done}))&&(this.response=this.responseText+=A)}_.done?Ms(this):ks(this),this.readyState==3&&hf(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,Ms(this))},t.Qa=function(_){this.g&&(this.response=_,Ms(this))},t.ga=function(){this.g&&Ms(this)};function Ms(_){_.readyState=4,_.l=null,_.j=null,_.v=null,ks(_)}t.setRequestHeader=function(_,A){this.u.append(_,A)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],A=this.h.entries();for(var x=A.next();!x.done;)x=x.value,_.push(x[0]+": "+x[1]),x=A.next();return _.join(`\r
`)};function ks(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function pf(_){let A="";return K(_,function(x,W){A+=W,A+=":",A+=x,A+=`\r
`}),A}function gi(_,A,x){e:{for(W in x){var W=!1;break e}W=!0}W||(x=pf(x),typeof _=="string"?x!=null&&encodeURIComponent(String(x)):Ft(_,A,x))}function jt(_){ue.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(jt,ue);var al=/^https?$/i,au=["POST","PUT"];t=jt.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,A,x,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);A=A?A.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hi.g(),this.v=this.o?fs(this.o):fs(hi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(A,String(_),!0),this.B=!1}catch(Ee){$h(this,Ee);return}if(_=x||"",x=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var fe in W)x.set(fe,W[fe]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Ee of W.keys())x.set(Ee,W.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(x.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),fe=l.FormData&&_ instanceof l.FormData,!(0<=Array.prototype.indexOf.call(au,A,void 0))||W||fe||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Be]of x)this.g.setRequestHeader(Ee,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uu(this),this.u=!0,this.g.send(_),this.u=!1}catch(Ee){$h(this,Ee)}};function $h(_,A){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=A,_.m=5,ul(_),Ps(_)}function ul(_){_.A||(_.A=!0,Se(_,"complete"),Se(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Se(this,"complete"),Se(this,"abort"),Ps(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ps(this,!0)),jt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ll(this):this.bb())},t.bb=function(){ll(this)};function ll(_){if(_.h&&typeof a<"u"&&(!_.v[1]||Yr(_)!=4||_.Z()!=2)){if(_.u&&Yr(_)==4)Qe(_.Ea,0,_);else if(Se(_,"readystatechange"),Yr(_)==4){_.h=!1;try{const Be=_.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var x;if(!(x=A)){var W;if(W=Be===0){var fe=String(_.D).match(qr)[1]||null;!fe&&l.self&&l.self.location&&(fe=l.self.location.protocol.slice(0,-1)),W=!al.test(fe?fe.toLowerCase():"")}x=W}if(x)Se(_,"complete"),Se(_,"success");else{_.m=6;try{var Ee=2<Yr(_)?_.g.statusText:""}catch{Ee=""}_.l=Ee+" ["+_.Z()+"]",ul(_)}}finally{Ps(_)}}}}function Ps(_,A){if(_.g){uu(_);const x=_.g,W=_.v[0]?()=>{}:null;_.g=null,_.v=null,A||Se(_,"ready");try{x.onreadystatechange=W}catch{}}}function uu(_){_.I&&(l.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function Yr(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<Yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var A=this.g.responseText;return _&&A.indexOf(_)==0&&(A=A.substring(_.length)),Tt(A)}};function Yh(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function k0(_){const A={};_=(_.g&&2<=Yr(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<_.length;W++){if(V(_[W]))continue;var x=B(_[W]);const fe=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Ee=A[fe]||[];A[fe]=Ee,Ee.push(x)}M(A,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lu(_,A,x){return x&&x.internalChannelParams&&x.internalChannelParams[_]||A}function cl(_){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lu("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lu("baseRetryDelayMs",5e3,_),this.cb=lu("retryDelaySeedMs",1e4,_),this.Wa=lu("forwardChannelMaxRetries",2,_),this.wa=lu("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new qn(_&&_.concurrentRequestLimit),this.Da=new ou,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cl.prototype,t.la=8,t.G=1,t.connect=function(_,A,x,W){cn(0),this.W=_,this.H=A||{},x&&W!==void 0&&(this.H.OSID=x,this.H.OAID=W),this.F=this.X,this.I=jh(this,null,this.W),dl(this)};function mf(_){if(Kh(_),_.G==3){var A=_.U++,x=yn(_.I);if(Ft(x,"SID",_.K),Ft(x,"RID",A),Ft(x,"TYPE","terminate"),cu(_,x),A=new si(_,_.j,A),A.L=2,A.v=hs(yn(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(A.v.toString(),"")}catch{}!x&&l.Image&&(new Image().src=A.v,x=!0),x||(A.g=ep(A.j,null),A.g.ea(A.v)),A.F=Date.now(),Qt(A)}Zh(_)}function fl(_){_.g&&(fu(_),_.g.cancel(),_.g=null)}function Kh(_){fl(_),_.u&&(l.clearTimeout(_.u),_.u=null),hl(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&l.clearTimeout(_.s),_.s=null)}function dl(_){if(!er(_.h)&&!_.s){_.s=!0;var A=_.Ga;j||I(),se||(j(),se=!0),oe.add(A,_),_.B=0}}function P0(_,A){return tr(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=A.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=xn(T(_.Ga,_,A),_f(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const fe=new si(this,this.j,_);let Ee=this.o;if(this.S&&(Ee?(Ee=P(Ee),O(Ee,this.S)):Ee=this.S),this.m!==null||this.O||(fe.H=Ee,Ee=null),this.P)e:{for(var A=0,x=0;x<this.i.length;x++){t:{var W=this.i[x];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(A+=W,4096<A){A=x;break e}if(A===4096||x===this.i.length-1){A=x+1;break e}}A=1e3}else A=1e3;A=Wh(this,fe,A),x=yn(this.I),Ft(x,"RID",_),Ft(x,"CVER",22),this.D&&Ft(x,"X-HTTP-Session-Id",this.D),cu(this,x),Ee&&(this.O?A="headers="+encodeURIComponent(String(pf(Ee)))+"&"+A:this.m&&gi(x,this.m,Ee)),zr(this.h,fe),this.Ua&&Ft(x,"TYPE","init"),this.P?(Ft(x,"$req",A),Ft(x,"SID","null"),fe.T=!0,Fe(fe,x,null)):Fe(fe,x,A),this.G=2}}else this.G==3&&(_?gf(this,_):this.i.length==0||er(this.h)||gf(this))};function gf(_,A){var x;A?x=A.l:x=_.U++;const W=yn(_.I);Ft(W,"SID",_.K),Ft(W,"RID",x),Ft(W,"AID",_.T),cu(_,W),_.m&&_.o&&gi(W,_.m,_.o),x=new si(_,_.j,x,_.B+1),_.m===null&&(x.H=_.o),A&&(_.i=A.D.concat(_.i)),A=Wh(_,x,1e3),x.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),zr(_.h,x),Fe(x,W,A)}function cu(_,A){_.H&&K(_.H,function(x,W){Ft(A,W,x)}),_.l&&Dt({},function(x,W){Ft(A,W,x)})}function Wh(_,A,x){x=Math.min(_.i.length,x);var W=_.l?T(_.l.Na,_.l,_):null;e:{var fe=_.i;let Ee=-1;for(;;){const Be=["count="+x];Ee==-1?0<x?(Ee=fe[0].g,Be.push("ofs="+Ee)):Ee=0:Be.push("ofs="+Ee);let Ot=!0;for(let oi=0;oi<x;oi++){let Ut=fe[oi].g;const yi=fe[oi].map;if(Ut-=Ee,0>Ut)Ee=Math.max(0,fe[oi].g-100),Ot=!1;else try{Ds(yi,Be,"req"+Ut+"_")}catch{W&&W(yi)}}if(Ot){W=Be.join("&");break e}}}return _=_.i.splice(0,x),A.D=_,W}function Xh(_){if(!_.g&&!_.u){_.Y=1;var A=_.Fa;j||I(),se||(j(),se=!0),oe.add(A,_),_.v=0}}function yf(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=xn(T(_.Fa,_),_f(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Qh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=xn(T(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),fl(this),Qh(this))};function fu(_){_.A!=null&&(l.clearTimeout(_.A),_.A=null)}function Qh(_){_.g=new si(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var A=yn(_.qa);Ft(A,"RID","rpc"),Ft(A,"SID",_.K),Ft(A,"AID",_.T),Ft(A,"CI",_.F?"0":"1"),!_.F&&_.ja&&Ft(A,"TO",_.ja),Ft(A,"TYPE","xmlhttp"),cu(_,A),_.m&&_.o&&gi(A,_.m,_.o),_.L&&(_.g.I=_.L);var x=_.g;_=_.ia,x.L=1,x.v=hs(yn(A)),x.m=null,x.P=!0,It(x,_)}t.Za=function(){this.C!=null&&(this.C=null,fl(this),yf(this),cn(19))};function hl(_){_.C!=null&&(l.clearTimeout(_.C),_.C=null)}function Jh(_,A){var x=null;if(_.g==A){hl(_),fu(_),_.g=null;var W=2}else if(Hr(_.h,A))x=A.D,mi(_.h,A),W=1;else return;if(_.G!=0){if(A.o)if(W==1){x=A.m?A.m.length:0,A=Date.now()-A.F;var fe=_.B;W=vr(),Se(W,new Xt(W,x)),dl(_)}else Xh(_);else if(fe=A.s,fe==3||fe==0&&0<A.X||!(W==1&&P0(_,A)||W==2&&yf(_)))switch(x&&0<x.length&&(A=_.h,A.i=A.i.concat(x)),fe){case 1:ho(_,5);break;case 4:ho(_,10);break;case 3:ho(_,6);break;default:ho(_,2)}}}function _f(_,A){let x=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(x*=2),x*A}function ho(_,A){if(_.j.info("Error code "+A),A==2){var x=T(_.fb,_),W=_.Xa;const fe=!W;W=new Rn(W||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bi(W,"https"),hs(W),fe?su(W.toString(),x):ps(W.toString(),x)}else cn(2);_.G=0,_.l&&_.l.sa(A),Zh(_),Kh(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function Zh(_){if(_.G=0,_.ka=[],_.l){const A=iu(_.h);(A.length!=0||_.i.length!=0)&&(R(_.ka,A),R(_.ka,_.i),_.h.i.length=0,w(_.i),_.i.length=0),_.l.ra()}}function jh(_,A,x){var W=x instanceof Rn?yn(x):new Rn(x);if(W.g!="")A&&(W.g=A+"."+W.g),Ii(W,W.s);else{var fe=l.location;W=fe.protocol,A=A?A+"."+fe.hostname:fe.hostname,fe=+fe.port;var Ee=new Rn(null);W&&bi(Ee,W),A&&(Ee.g=A),fe&&Ii(Ee,fe),x&&(Ee.l=x),W=Ee}return x=_.D,A=_.ya,x&&A&&Ft(W,x,A),Ft(W,"VER",_.la),cu(_,W),W}function ep(_,A,x){if(A&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return A=_.Ca&&!_.pa?new jt(new Xo({eb:x})):new jt(_.pa),A.Ha(_.J),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tp(){}t=tp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pl(){}pl.prototype.g=function(_,A){return new rr(_,A)};function rr(_,A){ue.call(this),this.g=new cl(A),this.l=_,this.h=A&&A.messageUrlParams||null,_=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(_?_["X-WebChannel-Content-Type"]=A.messageContentType:_={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.va&&(_?_["X-WebChannel-Client-Profile"]=A.va:_={"X-WebChannel-Client-Profile":A.va}),this.g.S=_,(_=A&&A.Sb)&&!V(_)&&(this.g.m=_),this.v=A&&A.supportsCrossDomainXhr||!1,this.u=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!V(A)&&(this.g.D=A,_=this.h,_!==null&&A in _&&(_=this.h,A in _&&delete _[A])),this.j=new Ls(this)}b(rr,ue),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){mf(this.g)},rr.prototype.o=function(_){var A=this.g;if(typeof _=="string"){var x={};x.__data__=_,_=x}else this.u&&(x={},x.__data__=Pt(_),_=x);A.i.push(new On(A.Ya++,_)),A.G==3&&dl(A)},rr.prototype.N=function(){this.g.l=null,delete this.j,mf(this.g),delete this.g,rr.aa.N.call(this)};function np(_){Xi.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var A=_.__sm__;if(A){e:{for(const x in A){_=x;break e}_=void 0}(this.i=_)&&(_=this.i,A=A!==null&&_ in A?A[_]:void 0),this.data=A}else this.data=_}b(np,Xi);function ip(){Ui.call(this),this.status=1}b(ip,Ui);function Ls(_){this.g=_}b(Ls,tp),Ls.prototype.ua=function(){Se(this.g,"a")},Ls.prototype.ta=function(_){Se(this.g,new np(_))},Ls.prototype.sa=function(_){Se(this.g,new ip)},Ls.prototype.ra=function(){Se(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,hM=function(){return new pl},dM=function(){return vr()},fM=lr,sT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,Pm=Cr,Zi.COMPLETE="complete",cM=Zi,Oi.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",ue.prototype.listen=ue.prototype.K,Id=Oi,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,lM=jt}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});const ew="@firebase/firestore",tw="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid"),zi.MOCK_USER=new zi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new kv("@firebase/firestore");function nc(){return qu.logLevel}function qe(t,...e){if(qu.logLevel<=Rt.DEBUG){const n=e.map(Ov);qu.debug(`Firestore (${Yc}): ${t}`,...n)}}function Bo(t,...e){if(qu.logLevel<=Rt.ERROR){const n=e.map(Ov);qu.error(`Firestore (${Yc}): ${t}`,...n)}}function Nc(t,...e){if(qu.logLevel<=Rt.WARN){const n=e.map(Ov);qu.warn(`Firestore (${Yc}): ${t}`,...n)}}function Ov(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,pM(t,i,n)}function pM(t,e,n){let i=`FIRESTORE (${Yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Bo(i),new Error(i)}function en(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||pM(e,r,i)}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends qo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zi.UNAUTHENTICATED))}shutdown(){}}class PF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LF{constructor(e){this.t=e,this.currentUser=zi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){en(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let s=new Fa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fa,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const f=s;e.enqueueRetryable(async()=>{await f.promise,await r(this.currentUser)})},l=f=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(f=>l(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?l(f):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fa)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(en(typeof i.accessToken=="string",31837,{l:i}),new mM(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return en(e===null||typeof e=="string",2055,{h:e}),new zi(e)}}class OF{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=zi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UF{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new OF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ss(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){en(this.o===void 0,3512);const i=s=>{s.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(en(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=VF(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function St(t,e){return t<e?-1:t>e?1:0}function oT(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return St(i,r);{const s=gM(),a=FF(s.encode(iw(t,n)),s.encode(iw(e,n)));return a!==0?a:St(i,r)}}n+=i>65535?2:1}return St(t.length,e.length)}function iw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function FF(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return St(t[n],e[n]);return St(t.length,e.length)}function Dc(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=-62135596800,sw=1e6;class In{static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*sw);return new In(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rw)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sw}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-rw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new In(0,0))}static max(){return new ft(new In(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__name__";class Gs{constructor(e,n,i){n===void 0?n=0:n>e.length&&at(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&at(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Gs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gs?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Gs.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return St(e.length,n.length)}static compareSegments(e,n){const i=Gs.isNumericId(e),r=Gs.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Gs.extractNumericId(e).compare(Gs.extractNumericId(n)):oT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Va.fromString(e.substring(4,e.length-2))}}class bn extends Gs{construct(e,n,i){return new bn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ge(we.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new bn(n)}static emptyPath(){return new bn([])}}const HF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pi extends Gs{construct(e,n,i){return new Pi(e,n,i)}static isValidIdentifier(e){return HF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ow}static keyField(){return new Pi([ow])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Ge(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Ge(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ge(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new Ge(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pi(n)}static emptyPath(){return new Pi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(bn.fromString(e))}static fromName(e){return new nt(bn.fromString(e).popFirst(5))}static empty(){return new nt(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new bn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=-1;function zF(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ft.fromTimestamp(i===1e9?new In(n+1,0):new In(n,i));return new Ga(r,nt.empty(),e)}function qF(t){return new Ga(t.readTime,t.key,sh)}class Ga{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ga(ft.min(),nt.empty(),sh)}static max(){return new Ga(ft.max(),nt.empty(),sh)}}function GF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=nt.comparator(t.documentKey,e.documentKey),n!==0?n:St(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==$F)throw t;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.reject(n)}static resolve(e){return new xe((n,i)=>{n(e)})}static reject(e){return new xe((n,i)=>{i(e)})}static waitFor(e){return new xe((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},f=>i(f))}),a=!0,s===r&&n()})}static or(e){let n=xe.resolve(!1);for(const i of e)n=n.next(r=>r?xe.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new xe((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let f=0;f<s;f++){const d=f;n(e[d]).next(p=>{a[d]=p,++l,l===s&&i(a)},p=>r(p))}})}static doWhile(e,n){return new xe((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function KF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Xg.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=-1;function Qg(t){return t==null}function lg(t){return t===0&&1/t==-1/0}function WF(t){return typeof t=="number"&&Number.isInteger(t)&&!lg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="";function XF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=aw(e)),e=QF(t.get(n),e);return aw(e)}function QF(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case _M:n+="";break;default:n+=s}}return n}function aw(t){return t+_M+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ja(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){this.comparator=e,this.root=n||ki.EMPTY}insert(e,n){return new Pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gm(this.root,e,this.comparator,!0)}}class gm{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??ki.RED,this.left=r??ki.EMPTY,this.right=s??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new ki(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ki.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1;ki.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new ki(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lw(this.data.getIterator())}getIteratorFrom(e){return new lw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ci(this.comparator);return n.data=e,n}}class lw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.fields=e,e.sort(Pi.comparator)}static empty(){return new Pr([])}unionWith(e){let n=new ci(Pi.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dc(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TM("Invalid base64 string: "+s):s}}(e);return new Li(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new Li(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Li.EMPTY_BYTE_STRING=new Li("");const JF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $a(t){if(en(!!t,39018),typeof t=="string"){let e=0;const n=JF.exec(t);if(en(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Yn(t.seconds),nanos:Yn(t.nanos)}}function Yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ya(t){return typeof t=="string"?Li.fromBase64String(t):Li.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="server_timestamp",SM="__type__",CM="__previous_value__",AM="__local_write_time__";function Bv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[SM])===null||n===void 0?void 0:n.stringValue)===vM}function Jg(t){const e=t.mapValue.fields[CM];return Bv(e)?Jg(e):e}function oh(t){const e=$a(t.mapValue.fields[AM].timestampValue);return new In(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e,n,i,r,s,a,l,f,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const cg="(default)";class ah{constructor(e,n){this.projectId=e,this.database=n||cg}static empty(){return new ah("","")}get isDefaultDatabase(){return this.database===cg}isEqual(e){return e instanceof ah&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="__type__",jF="__max__",ym={mapValue:{}},IM="__vector__",fg="value";function Ka(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bv(t)?4:tH(t)?9007199254740991:eH(t)?10:11:at(28295,{value:t})}function to(t,e){if(t===e)return!0;const n=Ka(t);if(n!==Ka(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oh(t).isEqual(oh(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=$a(r.timestampValue),l=$a(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Ya(r.bytesValue).isEqual(Ya(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Yn(r.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Yn(r.integerValue)===Yn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Yn(r.doubleValue),l=Yn(s.doubleValue);return a===l?lg(a)===lg(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Dc(t.arrayValue.values||[],e.arrayValue.values||[],to);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(uw(a)!==uw(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(l[f]===void 0||!to(a[f],l[f])))return!1;return!0}(t,e);default:return at(52216,{left:t})}}function uh(t,e){return(t.values||[]).find(n=>to(n,e))!==void 0}function Mc(t,e){if(t===e)return 0;const n=Ka(t),i=Ka(e);if(n!==i)return St(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return St(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Yn(s.integerValue||s.doubleValue),f=Yn(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(t,e);case 3:return cw(t.timestampValue,e.timestampValue);case 4:return cw(oh(t),oh(e));case 5:return oT(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Ya(s),f=Ya(a);return l.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),f=a.split("/");for(let d=0;d<l.length&&d<f.length;d++){const p=St(l[d],f[d]);if(p!==0)return p}return St(l.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=St(Yn(s.latitude),Yn(a.latitude));return l!==0?l:St(Yn(s.longitude),Yn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fw(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,f,d,p;const y=s.fields||{},T=a.fields||{},v=(l=y[fg])===null||l===void 0?void 0:l.arrayValue,b=(f=T[fg])===null||f===void 0?void 0:f.arrayValue,w=St(((d=v?.values)===null||d===void 0?void 0:d.length)||0,((p=b?.values)===null||p===void 0?void 0:p.length)||0);return w!==0?w:fw(v,b)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===ym.mapValue&&a===ym.mapValue)return 0;if(s===ym.mapValue)return 1;if(a===ym.mapValue)return-1;const l=s.fields||{},f=Object.keys(l),d=a.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let y=0;y<f.length&&y<p.length;++y){const T=oT(f[y],p[y]);if(T!==0)return T;const v=Mc(l[f[y]],d[p[y]]);if(v!==0)return v}return St(f.length,p.length)}(t.mapValue,e.mapValue);default:throw at(23264,{Pe:n})}}function cw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return St(t,e);const n=$a(t),i=$a(e),r=St(n.seconds,i.seconds);return r!==0?r:St(n.nanos,i.nanos)}function fw(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Mc(n[r],i[r]);if(s)return s}return St(n.length,i.length)}function kc(t){return aT(t)}function aT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=$a(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ya(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return nt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=aT(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${aT(n.fields[a])}`;return r+"}"}(t.mapValue):at(61005,{value:t})}function Lm(t){switch(Ka(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jg(t);return e?16+Lm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ya(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Lm(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Ja(i.fields,(s,a)=>{r+=s.length+Lm(a)}),r}(t.mapValue);default:throw at(13486,{value:t})}}function dw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uT(t){return!!t&&"integerValue"in t}function Vv(t){return!!t&&"arrayValue"in t}function hw(t){return!!t&&"nullValue"in t}function pw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Om(t){return!!t&&"mapValue"in t}function eH(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bM])===null||n===void 0?void 0:n.stringValue)===IM}function Ld(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ja(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ld(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ld(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Om(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ld(n)}setAll(e){let n=Pi.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const f=this.getFieldsMap(n);this.applyChanges(f,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=Ld(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Om(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return to(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Om(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ja(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new yr(Ld(this.value))}}function wM(t){const e=[];return Ja(t.fields,(n,i)=>{const r=new Pi([n]);if(Om(i)){const s=wM(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new qi(e,0,ft.min(),ft.min(),ft.min(),yr.empty(),0)}static newFoundDocument(e,n,i,r){return new qi(e,1,n,ft.min(),i,r,0)}static newNoDocument(e,n){return new qi(e,2,n,ft.min(),ft.min(),yr.empty(),0)}static newUnknownDocument(e,n){return new qi(e,3,n,ft.min(),ft.min(),yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.position=e,this.inclusive=n}}function mw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=nt.comparator(nt.fromName(a.referenceValue),n.key):i=Mc(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function gw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!to(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n="asc"){this.field=e,this.dir=n}}function nH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{}class ni extends xM{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new rH(e,n,i):n==="array-contains"?new aH(e,i):n==="in"?new uH(e,i):n==="not-in"?new lH(e,i):n==="array-contains-any"?new cH(e,i):new ni(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new sH(e,i):new oH(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mc(n,this.value)):n!==null&&Ka(this.value)===Ka(n)&&this.matchesComparison(Mc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ss extends xM{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Ss(e,n)}matches(e){return RM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function RM(t){return t.op==="and"}function NM(t){return iH(t)&&RM(t)}function iH(t){for(const e of t.filters)if(e instanceof Ss)return!1;return!0}function lT(t){if(t instanceof ni)return t.field.canonicalString()+t.op.toString()+kc(t.value);if(NM(t))return t.filters.map(e=>lT(e)).join(",");{const e=t.filters.map(n=>lT(n)).join(",");return`${t.op}(${e})`}}function DM(t,e){return t instanceof ni?function(i,r){return r instanceof ni&&i.op===r.op&&i.field.isEqual(r.field)&&to(i.value,r.value)}(t,e):t instanceof Ss?function(i,r){return r instanceof Ss&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&DM(a,r.filters[l]),!0):!1}(t,e):void at(19439)}function MM(t){return t instanceof ni?function(n){return`${n.field.canonicalString()} ${n.op} ${kc(n.value)}`}(t):t instanceof Ss?function(n){return n.op.toString()+" {"+n.getFilters().map(MM).join(" ,")+"}"}(t):"Filter"}class rH extends ni{constructor(e,n,i){super(e,n,i),this.key=nt.fromName(i.referenceValue)}matches(e){const n=nt.comparator(e.key,this.key);return this.matchesComparison(n)}}class sH extends ni{constructor(e,n){super(e,"in",n),this.keys=kM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oH extends ni{constructor(e,n){super(e,"not-in",n),this.keys=kM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>nt.fromName(i.referenceValue))}class aH extends ni{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vv(n)&&uh(n.arrayValue,this.value)}}class uH extends ni{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uh(this.value.arrayValue,n)}}class lH extends ni{constructor(e,n){super(e,"not-in",n)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uh(this.value.arrayValue,n)}}class cH extends ni{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>uh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.Ie=null}}function yw(t,e=null,n=[],i=[],r=null,s=null,a=null){return new fH(t,e,n,i,r,s,a)}function Fv(t){const e=pt(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>lT(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Qg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>kc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>kc(i)).join(",")),e.Ie=n}return e.Ie}function Hv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gw(t.startAt,e.startAt)&&gw(t.endAt,e.endAt)}function cT(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function dH(t,e,n,i,r,s,a,l){return new Xc(t,e,n,i,r,s,a,l)}function PM(t){return new Xc(t)}function _w(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function LM(t){return t.collectionGroup!==null}function Od(t){const e=pt(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ci(Pi.comparator);return a.filters.forEach(f=>{f.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new lh(s,i))}),n.has(Pi.keyField().canonicalString())||e.Ee.push(new lh(Pi.keyField(),i))}return e.Ee}function Qs(t){const e=pt(t);return e.de||(e.de=hH(e,Od(t))),e.de}function hH(t,e){if(t.limitType==="F")return yw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new lh(r.field,s)});const n=t.endAt?new dg(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new dg(t.startAt.position,t.startAt.inclusive):null;return yw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function fT(t,e){const n=t.filters.concat([e]);return new Xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dT(t,e,n){return new Xc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zg(t,e){return Hv(Qs(t),Qs(e))&&t.limitType===e.limitType}function OM(t){return`${Fv(Qs(t))}|lt:${t.limitType}`}function ic(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>MM(r)).join(", ")}]`),Qg(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>kc(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>kc(r)).join(",")),`Target(${i})`}(Qs(t))}; limitType=${t.limitType})`}function jg(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):nt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Od(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,f){const d=mw(a,l,f);return a.inclusive?d<=0:d<0}(i.startAt,Od(i),r)||i.endAt&&!function(a,l,f){const d=mw(a,l,f);return a.inclusive?d>=0:d>0}(i.endAt,Od(i),r))}(t,e)}function pH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UM(t){return(e,n)=>{let i=!1;for(const r of Od(t)){const s=mH(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function mH(t,e,n){const i=t.field.isKeyField()?nt.comparator(e.key,n.key):function(s,a,l){const f=a.data.field(s),d=l.data.field(s);return f!==null&&d!==null?Mc(f,d):at(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return at(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ja(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return EM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=new Pn(nt.comparator);function Vo(){return gH}const BM=new Pn(nt.comparator);function wd(...t){let e=BM;for(const n of t)e=e.insert(n.key,n);return e}function VM(t){let e=BM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Lu(){return Ud()}function FM(){return Ud()}function Ud(){return new ju(t=>t.toString(),(t,e)=>t.isEqual(e))}const yH=new Pn(nt.comparator),_H=new ci(nt.comparator);function Nt(...t){let e=_H;for(const n of t)e=e.add(n);return e}const EH=new ci(St);function TH(){return EH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lg(e)?"-0":e}}function HM(t){return{integerValue:""+t}}function vH(t,e){return WF(e)?HM(e):zv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this._=void 0}}function SH(t,e,n){return t instanceof hg?function(r,s){const a={fields:{[SM]:{stringValue:vM},[AM]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Bv(s)&&(s=Jg(s)),s&&(a.fields[CM]=s),{mapValue:a}}(n,e):t instanceof ch?qM(t,e):t instanceof fh?GM(t,e):function(r,s){const a=zM(r,s),l=Ew(a)+Ew(r.Re);return uT(a)&&uT(r.Re)?HM(l):zv(r.serializer,l)}(t,e)}function CH(t,e,n){return t instanceof ch?qM(t,e):t instanceof fh?GM(t,e):n}function zM(t,e){return t instanceof pg?function(i){return uT(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class hg extends e0{}class ch extends e0{constructor(e){super(),this.elements=e}}function qM(t,e){const n=$M(e);for(const i of t.elements)n.some(r=>to(r,i))||n.push(i);return{arrayValue:{values:n}}}class fh extends e0{constructor(e){super(),this.elements=e}}function GM(t,e){let n=$M(e);for(const i of t.elements)n=n.filter(r=>!to(r,i));return{arrayValue:{values:n}}}class pg extends e0{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Ew(t){return Yn(t.integerValue||t.doubleValue)}function $M(t){return Vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function AH(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ch&&r instanceof ch||i instanceof fh&&r instanceof fh?Dc(i.elements,r.elements,to):i instanceof pg&&r instanceof pg?to(i.Re,r.Re):i instanceof hg&&r instanceof hg}(t.transform,e.transform)}class bH{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class t0{}function YM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new n0(t.key,Or.none()):new wh(t.key,t.data,Or.none());{const n=t.data,i=yr.empty();let r=new ci(Pi.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Za(t.key,i,new Pr(r.toArray()),Or.none())}}function IH(t,e,n){t instanceof wh?function(r,s,a){const l=r.value.clone(),f=vw(r.fieldTransforms,s,a.transformResults);l.setAll(f),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Za?function(r,s,a){if(!Um(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=vw(r.fieldTransforms,s,a.transformResults),f=s.data;f.setAll(KM(r)),f.setAll(l),s.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Bd(t,e,n,i){return t instanceof wh?function(s,a,l,f){if(!Um(s.precondition,a))return l;const d=s.value.clone(),p=Sw(s.fieldTransforms,f,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Za?function(s,a,l,f){if(!Um(s.precondition,a))return l;const d=Sw(s.fieldTransforms,f,a),p=a.data;return p.setAll(KM(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(s,a,l){return Um(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function wH(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=zM(i.transform,r||null);s!=null&&(n===null&&(n=yr.empty()),n.set(i.field,s))}return n||null}function Tw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Dc(i,r,(s,a)=>AH(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wh extends t0{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Za extends t0{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function vw(t,e,n){const i=new Map;en(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,CH(a,l,n[r]))}return i}function Sw(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,SH(s,a,e))}return i}class n0 extends t0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xH extends t0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&IH(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Bd(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Bd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=FM();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const f=YM(a,l);f!==null&&i.set(r.key,f),a.isValidDocument()||a.convertToNoDocument(ft.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Nt())}isEqual(e){return this.batchId===e.batchId&&Dc(this.mutations,e.mutations,(n,i)=>Tw(n,i))&&Dc(this.baseMutations,e.baseMutations,(n,i)=>Tw(n,i))}}class qv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){en(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let r=function(){return yH}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new qv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,Vt;function MH(t){switch(t){case we.OK:return at(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return at(15467,{code:t})}}function WM(t){if(t===void 0)return Bo("GRPC error has no .code"),we.UNKNOWN;switch(t){case Zn.OK:return we.OK;case Zn.CANCELLED:return we.CANCELLED;case Zn.UNKNOWN:return we.UNKNOWN;case Zn.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Zn.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Zn.INTERNAL:return we.INTERNAL;case Zn.UNAVAILABLE:return we.UNAVAILABLE;case Zn.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Zn.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Zn.NOT_FOUND:return we.NOT_FOUND;case Zn.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Zn.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Zn.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Zn.ABORTED:return we.ABORTED;case Zn.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Zn.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Zn.DATA_LOSS:return we.DATA_LOSS;default:return at(39323,{code:t})}}(Vt=Zn||(Zn={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=new Va([4294967295,4294967295],0);function Cw(t){const e=gM().encode(t),n=new uM;return n.update(e),new Uint8Array(n.digest())}function Aw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Va([n,i],0),new Va([r,s],0)]}class Gv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new xd(`Invalid padding: ${n}`);if(i<0)throw new xd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xd(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new xd(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Va.fromNumber(this.pe)}we(e,n,i){let r=e.add(n.multiply(Va.fromNumber(i)));return r.compare(kH)===1&&(r=new Va([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Cw(e),[i,r]=Aw(n);for(let s=0;s<this.hashCount;s++){const a=this.we(i,r,s);if(!this.be(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Gv(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.pe===0)return;const n=Cw(e),[i,r]=Aw(n);for(let s=0;s<this.hashCount;s++){const a=this.we(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,xh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new i0(ft.min(),r,new Pn(St),Vo(),Nt())}}class xh{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new xh(i,n,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,i,r){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=r}}class XM{constructor(e,n){this.targetId=e,this.Ce=n}}class QM{constructor(e,n,i=Li.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class bw{constructor(){this.Fe=0,this.Me=Iw(),this.xe=Li.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Nt(),n=Nt(),i=Nt();return this.Me.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:at(38017,{changeType:s})}}),new xh(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=Iw()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,en(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class PH{constructor(e){this.ze=e,this.je=new Map,this.He=Vo(),this.Je=_m(),this.Ye=_m(),this.Ze=new Pn(St)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:at(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,i=e.Ce.count,r=this._t(n);if(r){const s=r.target;if(cT(s))if(i===0){const a=new nt(s.path);this.tt(n,a,qi.newNoDocument(a,ft.min()))}else en(i===1,20013,{expectedCount:i});else{const a=this.ut(n);if(a!==i){const l=this.ct(e),f=l?this.lt(l,e,a):1;if(f!==0){this.st(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=Ya(i).toUint8Array()}catch(f){if(f instanceof TM)return Nc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{l=new Gv(a,r,s)}catch(f){return Nc(f instanceof xd?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return l.pe===0?null:l}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,s,null),r++)}),r}It(e){const n=new Map;this.je.forEach((s,a)=>{const l=this._t(a);if(l){if(s.current&&cT(l.target)){const f=new nt(l.target.path);this.Et(f).has(a)||this.dt(a,f)||this.tt(a,f,qi.newNoDocument(f,e))}s.Le&&(n.set(a,s.qe()),s.Qe())}});let i=Nt();this.Ye.forEach((s,a)=>{let l=!0;a.forEachWhile(f=>{const d=this._t(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const r=new i0(e,n,this.Ze,this.He,i);return this.He=Vo(),this.Je=_m(),this.Ye=_m(),this.Ze=new Pn(St),r}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new bw,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ci(St),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ci(St),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||qe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new bw),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function _m(){return new Pn(nt.comparator)}function Iw(){return new Pn(nt.comparator)}const LH={asc:"ASCENDING",desc:"DESCENDING"},OH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UH={and:"AND",or:"OR"};class BH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hT(t,e){return t.useProto3Json||Qg(e)?e:{value:e}}function mg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VH(t,e){return mg(t,e.toTimestamp())}function Js(t){return en(!!t,49232),ft.fromTimestamp(function(n){const i=$a(n);return new In(i.seconds,i.nanos)}(t))}function $v(t,e){return pT(t,e).canonicalString()}function pT(t,e){const n=function(r){return new bn(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZM(t){const e=bn.fromString(t);return en(ik(e),10190,{key:e.toString()}),e}function mT(t,e){return $v(t.databaseId,e.path)}function nE(t,e){const n=ZM(e);if(n.get(1)!==t.databaseId.projectId)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new nt(ek(n))}function jM(t,e){return $v(t.databaseId,e)}function FH(t){const e=ZM(t);return e.length===4?bn.emptyPath():ek(e)}function gT(t){return new bn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ek(t){return en(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ww(t,e,n){return{name:mT(t,e),fields:n.value.mapValue.fields}}function HH(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:at(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(en(p===void 0||typeof p=="string",58123),Li.fromBase64String(p||"")):(en(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Li.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?we.UNKNOWN:WM(d.code);return new Ge(p,d.message||"")}(a);n=new QM(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=nE(t,i.document.name),s=Js(i.document.updateTime),a=i.document.createTime?Js(i.document.createTime):ft.min(),l=new yr({mapValue:{fields:i.document.fields}}),f=qi.newFoundDocument(r,s,a,l),d=i.targetIds||[],p=i.removedTargetIds||[];n=new Bm(d,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=nE(t,i.document),s=i.readTime?Js(i.readTime):ft.min(),a=qi.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Bm([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=nE(t,i.document),s=i.removedTargetIds||[];n=new Bm([],s,r,null)}else{if(!("filter"in e))return at(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new DH(r,s),l=i.targetId;n=new XM(l,a)}}return n}function zH(t,e){let n;if(e instanceof wh)n={update:ww(t,e.key,e.value)};else if(e instanceof n0)n={delete:mT(t,e.key)};else if(e instanceof Za)n={update:ww(t,e.key,e.data),updateMask:JH(e.fieldMask)};else{if(!(e instanceof xH))return at(16599,{ft:e.type});n={verify:mT(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof hg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ch)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pg)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw at(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:VH(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:at(27497)}(t,e.precondition)),n}function qH(t,e){return t&&t.length>0?(en(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?Js(r.updateTime):Js(s);return a.isEqual(ft.min())&&(a=Js(s)),new bH(a,r.transformResults||[])}(n,e))):[]}function GH(t,e){return{documents:[jM(t,e.path)]}}function $H(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=jM(t,r);const s=function(d){if(d.length!==0)return nk(Ss.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(p=>function(T){return{field:rc(T.field),direction:WH(T.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=hT(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:r}}function YH(t){let e=FH(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){en(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(y){const T=tk(y);return T instanceof Ss&&NM(T)?T.getFilters():[T]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(T=>function(b){return new lh(sc(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(T))}(n.orderBy));let l=null;n.limit&&(l=function(y){let T;return T=typeof y=="object"?y.value:y,Qg(T)?null:T}(n.limit));let f=null;n.startAt&&(f=function(y){const T=!!y.before,v=y.values||[];return new dg(v,T)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const T=!y.before,v=y.values||[];return new dg(v,T)}(n.endAt)),dH(e,r,a,s,l,"F",f,d)}function KH(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=sc(n.unaryFilter.field);return ni.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=sc(n.unaryFilter.field);return ni.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sc(n.unaryFilter.field);return ni.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=sc(n.unaryFilter.field);return ni.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}}(t):t.fieldFilter!==void 0?function(n){return ni.create(sc(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ss.create(n.compositeFilter.filters.map(i=>tk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return at(1026)}}(n.compositeFilter.op))}(t):at(30097,{filter:t})}function WH(t){return LH[t]}function XH(t){return OH[t]}function QH(t){return UH[t]}function rc(t){return{fieldPath:t.canonicalString()}}function sc(t){return Pi.fromServerFormat(t.fieldPath)}function nk(t){return t instanceof ni?function(n){if(n.op==="=="){if(pw(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NAN"}};if(hw(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(pw(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NOT_NAN"}};if(hw(n.value))return{unaryFilter:{field:rc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rc(n.field),op:XH(n.op),value:n.value}}}(t):t instanceof Ss?function(n){const i=n.getFilters().map(r=>nk(r));return i.length===1?i[0]:{compositeFilter:{op:QH(n.op),filters:i}}}(t):at(54877,{filter:t})}function JH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ik(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,i,r,s=ft.min(),a=ft.min(),l=Li.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=f}withSequenceNumber(e){return new Ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e){this.wt=e}}function jH(t){const e=YH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(){this.Cn=new t7}addToCollectionParentIndex(e,n){return this.Cn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(Ga.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(Ga.min())}updateCollectionGroup(e,n,i){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class t7{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ci(bn.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ci(bn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rk=41943040;class gr{static withCacheSize(e){return new gr(e,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(rk,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Pc(0)}static lr(){return new Pc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="LruGarbageCollector",n7=1048576;function Nw([t,e],[n,i]){const r=St(t,n);return r===0?St(e,i):r}class i7{constructor(e){this.Er=e,this.buffer=new ci(Nw),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Nw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class r7{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){qe(Rw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wc(n)?qe(Rw,"Ignoring IndexedDB error during garbage collection: ",n):await Kc(n)}await this.mr(3e5)})}}class s7{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(Xg.le);const i=new i7(n);return this.gr.forEachTarget(e,r=>i.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>i.Rr(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(xw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xw):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,r,s,a,l,f,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,a=Date.now(),this.nthSequenceNumber(e,r))).next(y=>(i=y,l=Date.now(),this.removeTargets(e,i,n))).next(y=>(s=y,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(d=Date.now(),nc()<=Rt.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(f-l)+`ms
	Removed ${y} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:y})))}}function o7(t,e){return new s7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(){this.changes=new ju(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?xe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Bd(i.mutation,r,Pr.empty(),In.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Nt()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Nt()){const r=Lu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=wd();return s.forEach((l,f)=>{a=a.insert(l,f.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Lu();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Nt()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=Vo();const a=Ud(),l=function(){return Ud()}();return n.forEach((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Za)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),Bd(p.mutation,d,p.mutation.getFieldMask(),In.now())):a.set(d.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var y;return l.set(d,new u7(p,(y=a.get(d))!==null&&y!==void 0?y:null))}),l))}recalculateAndSaveOverlays(e,n){const i=Ud();let r=new Pn((a,l)=>a-l),s=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(f=>{const d=n.get(f);if(d===null)return;let p=i.get(f)||Pr.empty();p=l.applyToLocalView(d,p),i.set(f,p);const y=(r.get(l.batchId)||Nt()).add(f);r=r.insert(l.batchId,y)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const f=l.getNext(),d=f.key,p=f.value,y=FM();p.forEach(T=>{if(!s.has(T)){const v=YM(n.get(T),i.get(T));v!==null&&y.set(T,v),s=s.add(T)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,y))}return xe.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):xe.resolve(Lu());let l=sh,f=s;return a.next(d=>xe.forEach(d,(p,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),s.get(p)?xe.resolve():this.remoteDocumentCache.getEntry(e,p).next(T=>{f=f.insert(p,T)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,f,d,Nt())).next(p=>({batchId:l,changes:VM(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new nt(n)).next(i=>{let r=wd();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=wd();return this.indexManager.getCollectionParents(e,s).next(l=>xe.forEach(l,f=>{const d=function(y,T){return new Xc(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,f.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(p=>{p.forEach((y,T)=>{a=a.insert(y,T)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((f,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,qi.newInvalidDocument(p)))});let l=wd();return a.forEach((f,d)=>{const p=s.get(f);p!==void 0&&Bd(p.mutation,d,Pr.empty(),In.now()),jg(n,d)&&(l=l.insert(f,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return xe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Js(r.createTime)}}(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:jH(r.bundledQuery),readTime:Js(r.readTime)}}(n)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(){this.overlays=new Pn(nt.comparator),this.Qr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Lu();return xe.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),xe.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(i)),xe.resolve()}getOverlaysForCollection(e,n,i){const r=Lu(),s=n.length+1,a=new nt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const f=l.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return xe.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Pn((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=s.get(d.largestBatchId);p===null&&(p=Lu(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Lu(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=r)););return xe.resolve(l)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Qr.get(r.largestBatchId).delete(i.key);this.Qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new NH(n,i));let s=this.Qr.get(n);s===void 0&&(s=Nt(),this.Qr.set(n,s)),this.Qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(){this.sessionToken=Li.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.$r=new ci(Si.Ur),this.Kr=new ci(Si.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new Si(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new Si(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new nt(new bn([])),i=new Si(n,e),r=new Si(n,e+1),s=[];return this.Kr.forEachInRange([i,r],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new nt(new bn([])),i=new Si(n,e),r=new Si(n,e+1);let s=Nt();return this.Kr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Si(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Si{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return nt.comparator(e.key,n.key)||St(e.Zr,n.Zr)}static Wr(e,n){return St(e.Zr,n.Zr)||nt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ci(Si.Ur)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new RH(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Xr=this.Xr.add(new Si(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return xe.resolve(a)}lookupMutationBatch(e,n){return xe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ti(i),s=r<0?0:r;return xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?Uv:this.nr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Si(n,0),r=new Si(n,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([i,r],a=>{const l=this.ei(a.Zr);s.push(l)}),xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ci(St);return n.forEach(r=>{const s=new Si(r,0),a=new Si(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],l=>{i=i.add(l.Zr)})}),xe.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;nt.isDocumentKey(s)||(s=s.child(""));const a=new Si(new nt(s),0);let l=new ci(St);return this.Xr.forEachWhile(f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(l=l.add(f.Zr)),!0)},a),xe.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(i=>{const r=this.ei(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){en(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return xe.forEach(n.mutations,r=>{const s=new Si(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new Si(n,0),r=this.Xr.firstAfterOrEqual(i);return xe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e){this.ii=e,this.docs=function(){return new Pn(nt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return xe.resolve(i?i.document.mutableCopy():qi.newInvalidDocument(n))}getEntries(e,n){let i=Vo();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():qi.newInvalidDocument(r))}),xe.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Vo();const a=n.path,l=new nt(a.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||GF(qF(p),i)<=0||(r.has(p.key)||jg(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return xe.resolve(s)}getAllFromCollectionGroup(e,n,i,r){at(9500)}si(e,n){return xe.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new m7(this)}getSize(e){return xe.resolve(this.size)}}class m7 extends a7{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(i)}),xe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.persistence=e,this.oi=new ju(n=>Fv(n),Hv),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this._i=0,this.ai=new Yv,this.targetCount=0,this.ui=Pc.cr()}forEachTarget(e,n){return this.oi.forEach((i,r)=>n(r)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),xe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Pc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.Tr(n),xe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),xe.waitFor(s).next(()=>r)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return xe.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),xe.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),xe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return xe.resolve(i)}containsKey(e,n){return xe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n){this.ci={},this.overlays={},this.li=new Xg(0),this.hi=!1,this.hi=!0,this.Pi=new d7,this.referenceDelegate=e(this),this.Ti=new g7(this),this.indexManager=new e7,this.remoteDocumentCache=function(r){return new p7(r)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new ZH(n),this.Ei=new c7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new h7(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){qe("MemoryPersistence","Starting transaction:",e);const r=new y7(this.li.next());return this.referenceDelegate.di(),i(r).next(s=>this.referenceDelegate.Ai(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ri(e,n){return xe.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class y7 extends YF{constructor(e){super(),this.currentSequenceNumber=e}}class Kv{constructor(e){this.persistence=e,this.Vi=new Yv,this.mi=null}static fi(e){return new Kv(e)}get gi(){if(this.mi)return this.mi;throw at(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),xe.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.gi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.gi,i=>{const r=nt.fromPath(i);return this.pi(e,r).next(s=>{s||n.removeEntry(r,ft.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return xe.or([()=>xe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class gg{constructor(e,n){this.persistence=e,this.yi=new ju(i=>XF(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=o7(this,n)}static fi(e,n){return new gg(e,n)}di(){}Ai(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return xe.forEach(this.yi,(i,r)=>this.Dr(e,i,r).next(s=>s?xe.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,a=>this.Dr(e,a,n).next(l=>{l||(i++,s.removeEntry(a,ft.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Lm(e.data.value)),n}Dr(e,n,i){return xe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return xe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.ds=i,this.As=r}static Rs(e,n){let i=Nt(),r=Nt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Wv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return h8()?8:KF(Yi())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ws(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.bs(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new _7;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.fs)return this.Ds(e,n,a,l.size)})}).next(()=>s.result)}Ds(e,n,i,r){return i.documentReadCount<this.gs?(nc()<=Rt.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",ic(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),xe.resolve()):(nc()<=Rt.DEBUG&&qe("QueryEngine","Query:",ic(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ps*r?(nc()<=Rt.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",ic(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qs(n))):xe.resolve())}ws(e,n){if(_w(n))return xe.resolve(null);let i=Qs(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=dT(n,null,"F"),i=Qs(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=Nt(...s);return this.ys.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(f=>{const d=this.vs(n,l);return this.Cs(n,d,a,f.readTime)?this.ws(e,dT(n,null,"F")):this.Fs(e,d,n,f)}))})))}bs(e,n,i,r){return _w(n)||r.isEqual(ft.min())?xe.resolve(null):this.ys.getDocuments(e,i).next(s=>{const a=this.vs(n,s);return this.Cs(n,a,i,r)?xe.resolve(null):(nc()<=Rt.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ic(n)),this.Fs(e,a,n,zF(r,sh)).next(l=>l))})}vs(e,n){let i=new ci(UM(e));return n.forEach((r,s)=>{jg(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return nc()<=Rt.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",ic(n)),this.ys.getDocumentsMatchingQuery(e,n,Ga.min(),i)}Fs(e,n,i,r){return this.ys.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="LocalStore",T7=3e8;class v7{constructor(e,n,i,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new Pn(St),this.Os=new ju(s=>Fv(s),Hv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new l7(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function S7(t,e,n,i){return new v7(t,e,n,i)}async function ok(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let f=Nt();for(const d of r){a.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of s){l.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(i,f).next(d=>({ks:d,removedBatchIds:a,addedBatchIds:l}))})})}function C7(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,f,d,p){const y=d.batch,T=y.keys();let v=xe.resolve();return T.forEach(b=>{v=v.next(()=>p.getEntry(f,b)).next(w=>{const R=d.docVersions.get(b);en(R!==null,48541),w.version.compareTo(R)<0&&(y.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),p.addEntry(w)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(f,y))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let f=Nt();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(f=f.add(l.batch.mutations[d].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function ak(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function A7(t,e){const n=pt(t),i=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const l=[];e.targetChanges.forEach((p,y)=>{const T=r.get(y);if(!T)return;l.push(n.Ti.removeMatchingKeys(s,p.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(s,p.addedDocuments,y)));let v=T.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?v=v.withResumeToken(Li.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,i)),r=r.insert(y,v),function(w,R,N){return w.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=T7?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(T,v,p)&&l.push(n.Ti.updateTargetData(s,v))});let f=Vo(),d=Nt();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(b7(s,a,e.documentUpdates).next(p=>{f=p.qs,d=p.Qs})),!i.isEqual(ft.min())){const p=n.Ti.getLastRemoteSnapshotVersion(s).next(y=>n.Ti.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(p)}return xe.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,f,d)).next(()=>f)}).then(s=>(n.xs=r,s))}function b7(t,e,n){let i=Nt(),r=Nt();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Vo();return n.forEach((l,f)=>{const d=s.get(l);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),f.isNoDocument()&&f.version.isEqual(ft.min())?(e.removeEntry(l,f.readTime),a=a.insert(l,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),a=a.insert(l,f)):qe(Xv,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",f.version)}),{qs:a,Qs:r}})}function I7(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Uv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function w7(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ti.getTargetData(i,e).next(s=>s?(r=s,xe.resolve(r)):n.Ti.allocateTargetId(i).next(a=>(r=new Ma(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.xs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function yT(t,e,n){const i=pt(t),r=i.xs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Wc(a))throw a;qe(Xv,`Failed to update sequence numbers for target ${e}: ${a}`)}i.xs=i.xs.remove(e),i.Os.delete(r.target)}function Dw(t,e,n){const i=pt(t);let r=ft.min(),s=Nt();return i.persistence.runTransaction("Execute query","readwrite",a=>function(f,d,p){const y=pt(f),T=y.Os.get(p);return T!==void 0?xe.resolve(y.xs.get(T)):y.Ti.getTargetData(d,p)}(i,a,Qs(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(a,l.targetId).next(f=>{s=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(a,e,n?r:ft.min(),n?s:Nt())).next(l=>(x7(i,pH(e),l),{documents:l,$s:s})))}function x7(t,e,n){let i=t.Ns.get(e)||ft.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Ns.set(e,i)}class Mw{constructor(){this.activeTargetIds=TH()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R7{constructor(){this.xo=new Mw,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Mw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="ConnectivityMonitor";class Pw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){qe(kw,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){qe(kw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em=null;function _T(){return Em===null?Em=function(){return 268435456+Math.round(2147483648*Math.random())}():Em++,"0x"+Em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="RestConnection",D7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class M7{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${r}`,this.Go=this.databaseId.database===cg?`project_id=${i}`:`project_id=${i}&database_id=${r}`}zo(e,n,i,r,s){const a=_T(),l=this.jo(e,n.toUriEncodedString());qe(iE,`Sending RPC '${e}' ${a}:`,l,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,r,s);const{host:d}=new URL(l),p=Gc(d);return this.Jo(e,l,f,i,p).then(y=>(qe(iE,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Nc(iE,`RPC '${e}' ${a} failed with error: `,y,"url: ",l,"request:",i),y})}Yo(e,n,i,r,s,a){return this.zo(e,n,i,r,s)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}jo(e,n){const i=D7[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="WebChannelConnection";class P7 extends M7{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=_T();return new Promise((l,f)=>{const d=new lM;d.setWithCredentials(!0),d.listenOnce(cM.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pm.NO_ERROR:const y=d.getResponseJson();qe(Fi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case Pm.TIMEOUT:qe(Fi,`RPC '${e}' ${a} timed out`),f(new Ge(we.DEADLINE_EXCEEDED,"Request time out"));break;case Pm.HTTP_ERROR:const T=d.getStatus();if(qe(Fi,`RPC '${e}' ${a} failed with status:`,T,"response text:",d.getResponseText()),T>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v?.error;if(b&&b.status&&b.message){const w=function(N){const V=N.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(V)>=0?V:we.UNKNOWN}(b.status);f(new Ge(w,b.message))}else f(new Ge(we.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new Ge(we.UNAVAILABLE,"Connection failed."));break;default:at(9055,{h_:e,streamId:a,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{qe(Fi,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(r);qe(Fi,`RPC '${e}' ${a} sending request:`,r),d.send(n,"POST",p,i,15)})}I_(e,n,i){const r=_T(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hM(),l=dM(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const p=s.join("");qe(Fi,`Creating RPC '${e}' stream ${r}: ${p}`,f);const y=a.createWebChannel(p,f);this.E_(y);let T=!1,v=!1;const b=new k7({Zo:R=>{v?qe(Fi,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(T||(qe(Fi,`Opening RPC '${e}' stream ${r} transport.`),y.open(),T=!0),qe(Fi,`RPC '${e}' stream ${r} sending:`,R),y.send(R))},Xo:()=>y.close()}),w=(R,N,V)=>{R.listen(N,G=>{try{V(G)}catch(F){setTimeout(()=>{throw F},0)}})};return w(y,Id.EventType.OPEN,()=>{v||(qe(Fi,`RPC '${e}' stream ${r} transport opened.`),b.__())}),w(y,Id.EventType.CLOSE,()=>{v||(v=!0,qe(Fi,`RPC '${e}' stream ${r} transport closed`),b.u_(),this.d_(y))}),w(y,Id.EventType.ERROR,R=>{v||(v=!0,Nc(Fi,`RPC '${e}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),b.u_(new Ge(we.UNAVAILABLE,"The operation could not be completed")))}),w(y,Id.EventType.MESSAGE,R=>{var N;if(!v){const V=R.data[0];en(!!V,16349);const G=V,F=G?.error||((N=G[0])===null||N===void 0?void 0:N.error);if(F){qe(Fi,`RPC '${e}' stream ${r} received error:`,F);const J=F.status;let K=function(L){const O=Zn[L];if(O!==void 0)return WM(O)}(J),M=F.message;K===void 0&&(K=we.INTERNAL,M="Unknown error status: "+J+" with message "+F.message),v=!0,b.u_(new Ge(K,M)),y.close()}else qe(Fi,`RPC '${e}' stream ${r} received:`,V),b.c_(V)}}),w(l,fM.STAT_EVENT,R=>{R.stat===sT.PROXY?qe(Fi,`RPC '${e}' stream ${r} detected buffering proxy`):R.stat===sT.NOPROXY&&qe(Fi,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function rE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){return new BH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,i=1e3,r=1.5,s=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),r=Math.max(0,n-i);r>0&&qe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="PersistentStream";class lk{constructor(e,n,i,r,s,a,l,f){this.xi=e,this.S_=i,this.D_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new uk(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===we.RESOURCE_EXHAUSTED?(Bo(n.toString()),Bo("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.v_===n&&this.z_(i,r)},i=>{e(()=>{const r=new Ge(we.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(r)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{i(()=>this.j_(r))}),this.stream.onMessage(r=>{i(()=>++this.M_==1?this.J_(r):this.onNext(r))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return qe(Lw,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(qe(Lw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class L7 extends lk{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=HH(this.serializer,e),i=function(s){if(!("targetChange"in s))return ft.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ft.min():a.readTime?Js(a.readTime):ft.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=gT(this.serializer),n.addTarget=function(s,a){let l;const f=a.target;if(l=cT(f)?{documents:GH(s,f)}:{query:$H(s,f).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=JM(s,a.resumeToken);const d=hT(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ft.min())>0){l.readTime=mg(s,a.snapshotVersion.toTimestamp());const d=hT(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const i=KH(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=gT(this.serializer),n.removeTarget=e,this.Q_(n)}}class O7 extends lk{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return en(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,en(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){en(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=qH(e.writeResults,e.commitTime),i=Js(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=gT(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>zH(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{}class B7 extends U7{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(e,pT(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ge(we.UNKNOWN,s.toString())})}Yo(e,n,i,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(e,pT(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ge(we.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class V7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Bo(n),this.ua=!1):qe("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="RemoteStore";class F7{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(a=>{i.enqueueAndForget(async()=>{el(this)&&(qe(Gu,"Restarting streams for network reachability change."),await async function(f){const d=pt(f);d.da.add(4),await Rh(d),d.Va.set("Unknown"),d.da.delete(4),await s0(d)}(this))})}),this.Va=new V7(i,r)}}async function s0(t){if(el(t))for(const e of t.Aa)await e(!0)}async function Rh(t){for(const e of t.Aa)await e(!1)}function ck(t,e){const n=pt(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),jv(n)?Zv(n):Qc(n).N_()&&Jv(n,e))}function Qv(t,e){const n=pt(t),i=Qc(n);n.Ea.delete(e),i.N_()&&fk(n,e),n.Ea.size===0&&(i.N_()?i.k_():el(n)&&n.Va.set("Unknown"))}function Jv(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qc(t).Z_(e)}function fk(t,e){t.ma.Ke(e),Qc(t).X_(e)}function Zv(t){t.ma=new PH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Qc(t).start(),t.Va.ca()}function jv(t){return el(t)&&!Qc(t).O_()&&t.Ea.size>0}function el(t){return pt(t).da.size===0}function dk(t){t.ma=void 0}async function H7(t){t.Va.set("Online")}async function z7(t){t.Ea.forEach((e,n)=>{Jv(t,e)})}async function q7(t,e){dk(t),jv(t)?(t.Va.Pa(e),Zv(t)):t.Va.set("Unknown")}async function G7(t,e,n){if(t.Va.set("Online"),e instanceof QM&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.Ea.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.Ea.delete(l),r.ma.removeTarget(l))}(t,e)}catch(i){qe(Gu,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yg(t,i)}else if(e instanceof Bm?t.ma.Xe(e):e instanceof XM?t.ma.ot(e):t.ma.nt(e),!n.isEqual(ft.min()))try{const i=await ak(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.ma.It(a);return l.targetChanges.forEach((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=s.Ea.get(d);p&&s.Ea.set(d,p.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach((f,d)=>{const p=s.Ea.get(f);if(!p)return;s.Ea.set(f,p.withResumeToken(Li.EMPTY_BYTE_STRING,p.snapshotVersion)),fk(s,f);const y=new Ma(p.target,f,d,p.sequenceNumber);Jv(s,y)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){qe(Gu,"Failed to raise snapshot:",i),await yg(t,i)}}async function yg(t,e,n){if(!Wc(e))throw e;t.da.add(1),await Rh(t),t.Va.set("Offline"),n||(n=()=>ak(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{qe(Gu,"Retrying IndexedDB access"),await n(),t.da.delete(1),await s0(t)})}function hk(t,e){return e().catch(n=>yg(t,n,e))}async function o0(t){const e=pt(t),n=Wa(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Uv;for(;$7(e);)try{const r=await I7(e.localStore,i);if(r===null){e.Ia.length===0&&n.k_();break}i=r.batchId,Y7(e,r)}catch(r){await yg(e,r)}pk(e)&&mk(e)}function $7(t){return el(t)&&t.Ia.length<10}function Y7(t,e){t.Ia.push(e);const n=Wa(t);n.N_()&&n.ea&&n.ta(e.mutations)}function pk(t){return el(t)&&!Wa(t).O_()&&t.Ia.length>0}function mk(t){Wa(t).start()}async function K7(t){Wa(t).ia()}async function W7(t){const e=Wa(t);for(const n of t.Ia)e.ta(n.mutations)}async function X7(t,e,n){const i=t.Ia.shift(),r=qv.from(i,e,n);await hk(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await o0(t)}async function Q7(t,e){e&&Wa(t).ea&&await async function(i,r){if(function(a){return MH(a)&&a!==we.ABORTED}(r.code)){const s=i.Ia.shift();Wa(i).L_(),await hk(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await o0(i)}}(t,e),pk(t)&&mk(t)}async function Ow(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),qe(Gu,"RemoteStore received new credentials");const i=el(n);n.da.add(3),await Rh(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await s0(n)}async function J7(t,e){const n=pt(t);e?(n.da.delete(2),await s0(n)):e||(n.da.add(2),await Rh(n),n.Va.set("Unknown"))}function Qc(t){return t.fa||(t.fa=function(n,i,r){const s=pt(n);return s.oa(),new L7(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{e_:H7.bind(null,t),n_:z7.bind(null,t),i_:q7.bind(null,t),Y_:G7.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),jv(t)?Zv(t):t.Va.set("Unknown")):(await t.fa.stop(),dk(t))})),t.fa}function Wa(t){return t.ga||(t.ga=function(n,i,r){const s=pt(n);return s.oa(),new O7(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:K7.bind(null,t),i_:Q7.bind(null,t),na:W7.bind(null,t),ra:X7.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await o0(t)):(await t.ga.stop(),t.Ia.length>0&&(qe(Gu,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new e1(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t1(t,e){if(Bo("AsyncQueue",`${e}: ${t}`),Wc(t))return new Ge(we.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{static emptySet(e){return new gc(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||nt.comparator(n.key,i.key):(n,i)=>nt.comparator(n.key,i.key),this.keyedMap=wd(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new gc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.pa=new Pn(nt.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):at(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Lc{constructor(e,n,i,r,s,a,l,f,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Lc(e,n,gc.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class j7{constructor(){this.queries=Bw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=pt(n),s=r.queries;r.queries=Bw(),s.forEach((a,l)=>{for(const f of l.Sa)f.onError(i)})})(this,new Ge(we.ABORTED,"Firestore shutting down"))}}function Bw(){return new ju(t=>OM(t),Zg)}async function ez(t,e){const n=pt(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.Da()&&e.va()&&(i=2):(s=new Z7,i=e.va()?0:1);try{switch(i){case 0:s.ba=await n.onListen(r,!0);break;case 1:s.ba=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=t1(a,`Initialization of query '${ic(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.Sa.push(e),e.Fa(n.onlineState),s.ba&&e.Ma(s.ba)&&n1(n)}async function tz(t,e){const n=pt(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.va()?0:1:!s.Da()&&e.va()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function nz(t,e){const n=pt(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Ma(r)&&(i=!0);a.ba=r}}i&&n1(n)}function iz(t,e,n){const i=pt(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function n1(t){t.Ca.forEach(e=>{e.next()})}var ET,Vw;(Vw=ET||(ET={})).xa="default",Vw.Cache="cache";class rz{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Lc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ET.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.key=e}}class yk{constructor(e){this.key=e}}class sz{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Nt(),this.mutatedKeys=Nt(),this.Za=UM(e),this.Xa=new gc(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new Uw,r=n?n.Xa:this.Xa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,y)=>{const T=r.get(p),v=jg(this.query,y)?y:null,b=!!T&&this.mutatedKeys.has(T.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let R=!1;T&&v?T.data.isEqual(v.data)?b!==w&&(i.track({type:3,doc:v}),R=!0):this.ru(T,v)||(i.track({type:2,doc:v}),R=!0,(f&&this.Za(v,f)>0||d&&this.Za(v,d)<0)&&(l=!0)):!T&&v?(i.track({type:0,doc:v}),R=!0):T&&!v&&(i.track({type:1,doc:T}),R=!0,(f||d)&&(l=!0)),R&&(v?(a=a.add(v),s=w?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{Xa:a,nu:i,Cs:l,mutatedKeys:s}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const a=e.nu.wa();a.sort((p,y)=>function(v,b){const w=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Vt:R})}};return w(v)-w(b)}(p.type,y.type)||this.Za(p.doc,y.doc)),this.iu(i),r=r!=null&&r;const l=n&&!r?this.su():[],f=this.Ya.size===0&&this.current&&!r?1:0,d=f!==this.Ja;return this.Ja=f,a.length!==0||d?{snapshot:new Lc(this.query,e.Xa,s,a,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Uw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Nt(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new yk(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new gk(i))}),n}au(e){this.Ha=e.$s,this.Ya=Nt();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Lc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const i1="SyncEngine";class oz{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class az{constructor(e){this.key=e,this.cu=!1}}class uz{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new ju(l=>OM(l),Zg),this.Pu=new Map,this.Tu=new Set,this.Iu=new Pn(nt.comparator),this.Eu=new Map,this.du=new Yv,this.Au={},this.Ru=new Map,this.Vu=Pc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function lz(t,e,n=!0){const i=Ck(t);let r;const s=i.hu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.uu()):r=await _k(i,e,n,!0),r}async function cz(t,e){const n=Ck(t);await _k(n,e,!0,!1)}async function _k(t,e,n,i){const r=await w7(t.localStore,Qs(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await fz(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&ck(t.remoteStore,r),l}async function fz(t,e,n,i,r){t.fu=(y,T,v)=>async function(w,R,N,V){let G=R.view.tu(N);G.Cs&&(G=await Dw(w.localStore,R.query,!1).then(({documents:M})=>R.view.tu(M,G)));const F=V&&V.targetChanges.get(R.targetId),J=V&&V.targetMismatches.get(R.targetId)!=null,K=R.view.applyChanges(G,w.isPrimaryClient,F,J);return Hw(w,R.targetId,K.ou),K.snapshot}(t,y,T,v);const s=await Dw(t.localStore,e,!0),a=new sz(e,s.$s),l=a.tu(s.documents),f=xh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(l,t.isPrimaryClient,f);Hw(t,n,d.ou);const p=new oz(e,n,a);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function dz(t,e,n){const i=pt(t),r=i.hu.get(e),s=i.Pu.get(r.targetId);if(s.length>1)return i.Pu.set(r.targetId,s.filter(a=>!Zg(a,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await yT(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Qv(i.remoteStore,r.targetId),TT(i,r.targetId)}).catch(Kc)):(TT(i,r.targetId),await yT(i.localStore,r.targetId,!0))}async function hz(t,e){const n=pt(t),i=n.hu.get(e),r=n.Pu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Qv(n.remoteStore,i.targetId))}async function pz(t,e,n){const i=vz(t);try{const r=await function(a,l){const f=pt(a),d=In.now(),p=l.reduce((v,b)=>v.add(b.key),Nt());let y,T;return f.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Vo(),w=Nt();return f.Bs.getEntries(v,p).next(R=>{b=R,b.forEach((N,V)=>{V.isValidDocument()||(w=w.add(N))})}).next(()=>f.localDocuments.getOverlayedDocuments(v,b)).next(R=>{y=R;const N=[];for(const V of l){const G=wH(V,y.get(V.key).overlayedDocument);G!=null&&N.push(new Za(V.key,G,wM(G.value.mapValue),Or.exists(!0)))}return f.mutationQueue.addMutationBatch(v,d,N,l)}).next(R=>{T=R;const N=R.applyToLocalDocumentSet(y,w);return f.documentOverlayCache.saveOverlays(v,R.batchId,N)})}).then(()=>({batchId:T.batchId,changes:VM(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,f){let d=a.Au[a.currentUser.toKey()];d||(d=new Pn(St)),d=d.insert(l,f),a.Au[a.currentUser.toKey()]=d}(i,r.batchId,n),await Nh(i,r.changes),await o0(i.remoteStore)}catch(r){const s=t1(r,"Failed to persist write");n.reject(s)}}async function Ek(t,e){const n=pt(t);try{const i=await A7(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Eu.get(s);a&&(en(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.cu=!0:r.modifiedDocuments.size>0?en(a.cu,14607):r.removedDocuments.size>0&&(en(a.cu,42227),a.cu=!1))}),await Nh(n,i,e)}catch(i){await Kc(i)}}function Fw(t,e,n){const i=pt(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.hu.forEach((s,a)=>{const l=a.view.Fa(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const f=pt(a);f.onlineState=l;let d=!1;f.queries.forEach((p,y)=>{for(const T of y.Sa)T.Fa(l)&&(d=!0)}),d&&n1(f)}(i.eventManager,e),r.length&&i.lu.Y_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function mz(t,e,n){const i=pt(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),s=r&&r.key;if(s){let a=new Pn(nt.comparator);a=a.insert(s,qi.newNoDocument(s,ft.min()));const l=Nt().add(s),f=new i0(ft.min(),new Map,new Pn(St),a,l);await Ek(i,f),i.Iu=i.Iu.remove(s),i.Eu.delete(e),r1(i)}else await yT(i.localStore,e,!1).then(()=>TT(i,e,n)).catch(Kc)}async function gz(t,e){const n=pt(t),i=e.batch.batchId;try{const r=await C7(n.localStore,e);vk(n,i,null),Tk(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nh(n,r)}catch(r){await Kc(r)}}async function yz(t,e,n){const i=pt(t);try{const r=await function(a,l){const f=pt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return f.mutationQueue.lookupMutationBatch(d,l).next(y=>(en(y!==null,37113),p=y.keys(),f.mutationQueue.removeMutationBatch(d,y))).next(()=>f.mutationQueue.performConsistencyCheck(d)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>f.localDocuments.getDocuments(d,p))})}(i.localStore,e);vk(i,e,n),Tk(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Nh(i,r)}catch(r){await Kc(r)}}function Tk(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function vk(t,e,n){const i=pt(t);let r=i.Au[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Au[i.currentUser.toKey()]=r}}function TT(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||Sk(t,i)})}function Sk(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Qv(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),r1(t))}function Hw(t,e,n){for(const i of n)i instanceof gk?(t.du.addReference(i.key,e),_z(t,i)):i instanceof yk?(qe(i1,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||Sk(t,i.key)):at(19791,{pu:i})}function _z(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(qe(i1,"New document in limbo: "+n),t.Tu.add(i),r1(t))}function r1(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new nt(bn.fromString(e)),i=t.Vu.next();t.Eu.set(i,new az(n)),t.Iu=t.Iu.insert(n,i),ck(t.remoteStore,new Ma(Qs(PM(n.path)),i,"TargetPurposeLimboResolution",Xg.le))}}async function Nh(t,e,n){const i=pt(t),r=[],s=[],a=[];i.hu.isEmpty()||(i.hu.forEach((l,f)=>{a.push(i.fu(f,e,n).then(d=>{var p;if((d||n)&&i.isPrimaryClient){const y=d?!d.fromCache:(p=n?.targetChanges.get(f.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(d){r.push(d);const y=Wv.Rs(f.targetId,d);s.push(y)}}))}),await Promise.all(a),i.lu.Y_(r),await async function(f,d){const p=pt(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>xe.forEach(d,T=>xe.forEach(T.ds,v=>p.persistence.referenceDelegate.addReference(y,T.targetId,v)).next(()=>xe.forEach(T.As,v=>p.persistence.referenceDelegate.removeReference(y,T.targetId,v)))))}catch(y){if(!Wc(y))throw y;qe(Xv,"Failed to update sequence numbers: "+y)}for(const y of d){const T=y.targetId;if(!y.fromCache){const v=p.xs.get(T),b=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(b);p.xs=p.xs.insert(T,w)}}}(i.localStore,s))}async function Ez(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){qe(i1,"User change. New user:",e.toKey());const i=await ok(n.localStore,e);n.currentUser=e,function(s,a){s.Ru.forEach(l=>{l.forEach(f=>{f.reject(new Ge(we.CANCELLED,a))})}),s.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nh(n,i.ks)}}function Tz(t,e){const n=pt(t),i=n.Eu.get(e);if(i&&i.cu)return Nt().add(i.key);{let r=Nt();const s=n.Pu.get(e);if(!s)return r;for(const a of s){const l=n.hu.get(a);r=r.unionWith(l.view.eu)}return r}}function Ck(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ek.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mz.bind(null,e),e.lu.Y_=nz.bind(null,e.eventManager),e.lu.gu=iz.bind(null,e.eventManager),e}function vz(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yz.bind(null,e),e}class _g{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=r0(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return S7(this.persistence,new E7,e.initialUser,this.serializer)}Su(e){return new sk(Kv.fi,this.serializer)}bu(e){return new R7}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_g.provider={build:()=>new _g};class Sz extends _g{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){en(this.persistence.referenceDelegate instanceof gg,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new r7(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new sk(i=>gg.fi(i,n),this.serializer)}}class vT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ez.bind(null,this.syncEngine),await J7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new j7}()}createDatastore(e){const n=r0(e.databaseInfo.databaseId),i=function(s){return new P7(s)}(e.databaseInfo);return function(s,a,l,f){return new B7(s,a,l,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new F7(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Fw(this.syncEngine,n,0),function(){return Pw.C()?new Pw:new N7}())}createSyncEngine(e,n){return function(r,s,a,l,f,d,p){const y=new uz(r,s,a,l,f,d);return p&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=pt(r);qe(Gu,"RemoteStore shutting down."),s.da.add(5),await Rh(s),s.Ra.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vT.provider={build:()=>new vT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Bo("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="FirestoreClient";class Az{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=zi.UNAUTHENTICATED,this.clientId=yM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{qe(Xa,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(qe(Xa,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=t1(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function sE(t,e){t.asyncQueue.verifyOperationInProgress(),qe(Xa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await ok(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bz(t);qe(Xa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Ow(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Ow(e.remoteStore,r)),t._onlineComponents=e}async function bz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){qe(Xa,"Using user provided OfflineComponentProvider");try{await sE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===we.FAILED_PRECONDITION||r.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Nc("Error using user provided cache. Falling back to memory cache: "+n),await sE(t,new _g)}}else qe(Xa,"Using default OfflineComponentProvider"),await sE(t,new Sz(void 0));return t._offlineComponents}async function Ak(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(qe(Xa,"Using user provided OnlineComponentProvider"),await zw(t,t._uninitializedComponentsProvider._online)):(qe(Xa,"Using default OnlineComponentProvider"),await zw(t,new vT))),t._onlineComponents}function Iz(t){return Ak(t).then(e=>e.syncEngine)}async function wz(t){const e=await Ak(t),n=e.eventManager;return n.onListen=lz.bind(null,e.syncEngine),n.onUnlisten=dz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hz.bind(null,e.syncEngine),n}function xz(t,e,n={}){const i=new Fa;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,f,d){const p=new Cz({next:T=>{p.xu(),a.enqueueAndForget(()=>tz(s,y)),T.fromCache&&f.source==="server"?d.reject(new Ge(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(T)},error:T=>d.reject(T)}),y=new rz(l,p,{includeMetadataChanges:!0,Qa:!0});return ez(s,y)}(await wz(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t,e,n){if(!n)throw new Ge(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rz(t,e,n,i){if(e===!0&&i===!0)throw new Ge(we.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gw(t){if(!nt.isDocumentKey(t))throw new Ge(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $w(t){if(nt.isDocumentKey(t))throw new Ge(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function a0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":at(12329,{type:typeof t})}function $u(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ge(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=a0(t);throw new Ge(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="firestore.googleapis.com",Yw=!0;class Kw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wk,this.ssl=Yw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Yw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n7)throw new Ge(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ge(we.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u0{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new kF;switch(i.type){case"firstParty":return new UF(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ge(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=qw.get(n);i&&(qe("ComponentProvider","Removing Datastore"),qw.delete(n),i.terminate())}(this),Promise.resolve()}}function Nz(t,e,n,i={}){var r;t=$u(t,u0);const s=Gc(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;s&&(eM(`https://${f}`),tM("Firestore",!0)),a.host!==wk&&a.host!==f&&Nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:f,ssl:s,emulatorOptions:i});if(!Hu(d,l)&&(t._setSettings(d),i.mockUserToken)){let p,y;if(typeof i.mockUserToken=="string")p=i.mockUserToken,y=zi.MOCK_USER;else{p=r8(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ge(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new zi(T)}t._authCredentials=new PF(new mM(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new tl(this.firestore,e,this._query)}}class Ur{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ur(this.firestore,e,this._key)}}class Ha extends tl{constructor(e,n,i){super(e,n,PM(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ur(this.firestore,null,new nt(e))}withConverter(e){return new Ha(this.firestore,e,this._path)}}function s1(t,e,...n){if(t=fi(t),Ik("collection","path",e),t instanceof u0){const i=bn.fromString(e,...n);return $w(i),new Ha(t,null,i)}{if(!(t instanceof Ur||t instanceof Ha))throw new Ge(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bn.fromString(e,...n));return $w(i),new Ha(t.firestore,null,i)}}function Jc(t,e,...n){if(t=fi(t),arguments.length===1&&(e=yM.newId()),Ik("doc","path",e),t instanceof u0){const i=bn.fromString(e,...n);return Gw(i),new Ur(t,null,new nt(i))}{if(!(t instanceof Ur||t instanceof Ha))throw new Ge(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bn.fromString(e,...n));return Gw(i),new Ur(t.firestore,t instanceof Ha?t.converter:null,new nt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="AsyncQueue";class Xw{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new uk(this,"async_queue_retry"),this.rc=()=>{const i=rE();i&&qe(Ww,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=rE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=rE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Fa;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Wc(e))throw e;qe(Ww,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,Bo("INTERNAL UNHANDLED ERROR: ",Qw(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const r=e1.createAndSchedule(this,e,n,i,s=>this.uc(s));return this.Zu.push(r),r}oc(){this.Xu&&at(47125,{cc:Qw(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Qw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Dh extends u0{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Xw,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xw(e),this._firestoreClient=void 0,await e}}}function Dz(t,e){const n=typeof t=="object"?t:sM(),i=typeof t=="string"?t:cg,r=Lv(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=n8("firestore");s&&Nz(r,...s)}return r}function o1(t){if(t._terminated)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Mz(t),t._firestoreClient}function Mz(t){var e,n,i;const r=t._freezeSettings(),s=function(l,f,d,p){return new ZF(l,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,bk(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Az(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const f=l?._online.build();return{_offline:l?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oc(Li.fromBase64String(e))}catch(n){throw new Ge(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Oc(Li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ge(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ge(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ge(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=/^__.*__$/;class Pz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Za(e,this.data,this.fieldMask,n,this.fieldTransforms):new wh(e,this.data,n,this.fieldTransforms)}}class xk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Za(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Rk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ic:t})}}class c1{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new c1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:i,Rc:!1});return r.Vc(e),r}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.dc({path:i,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Eg(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Rk(this.Ic)&&kz.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Lz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||r0(e)}bc(e,n,i,r=!1){return new c1({Ic:e,methodName:n,wc:i,path:Pi.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f1(t){const e=t._freezeSettings(),n=r0(t._databaseId);return new Lz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nk(t,e,n,i,r,s={}){const a=t.bc(s.merge||s.mergeFields?2:0,e,n,r);d1("Data must be an object, but it was:",a,i);const l=Dk(i,a);let f,d;if(s.merge)f=new Pr(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const y of s.mergeFields){const T=ST(e,y,n);if(!a.contains(T))throw new Ge(we.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);kk(p,T)||p.push(T)}f=new Pr(p),d=a.fieldTransforms.filter(y=>f.covers(y.field))}else f=null,d=a.fieldTransforms;return new Pz(new yr(l),f,d)}class c0 extends a1{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof c0}}function Oz(t,e,n,i){const r=t.bc(1,e,n);d1("Data must be an object, but it was:",r,i);const s=[],a=yr.empty();Ja(i,(f,d)=>{const p=h1(e,f,n);d=fi(d);const y=r.mc(p);if(d instanceof c0)s.push(p);else{const T=Mh(d,y);T!=null&&(s.push(p),a.set(p,T))}});const l=new Pr(s);return new xk(a,l,r.fieldTransforms)}function Uz(t,e,n,i,r,s){const a=t.bc(1,e,n),l=[ST(e,i,n)],f=[r];if(s.length%2!=0)throw new Ge(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<s.length;T+=2)l.push(ST(e,s[T])),f.push(s[T+1]);const d=[],p=yr.empty();for(let T=l.length-1;T>=0;--T)if(!kk(d,l[T])){const v=l[T];let b=f[T];b=fi(b);const w=a.mc(v);if(b instanceof c0)d.push(v);else{const R=Mh(b,w);R!=null&&(d.push(v),p.set(v,R))}}const y=new Pr(d);return new xk(p,y,a.fieldTransforms)}function Bz(t,e,n,i=!1){return Mh(n,t.bc(i?4:3,e))}function Mh(t,e){if(Mk(t=fi(t)))return d1("Unsupported field value:",e,t),Dk(t,e);if(t instanceof a1)return function(i,r){if(!Rk(r.Ic))throw r.gc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.gc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let f=Mh(l,r.fc(a));f==null&&(f={nullValue:"NULL_VALUE"}),s.push(f),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=fi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vH(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=In.fromDate(i);return{timestampValue:mg(r.serializer,s)}}if(i instanceof In){const s=new In(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mg(r.serializer,s)}}if(i instanceof u1)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oc)return{bytesValue:JM(r.serializer,i._byteString)};if(i instanceof Ur){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$v(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof l1)return function(a,l){return{mapValue:{fields:{[bM]:{stringValue:IM},[fg]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return zv(l.serializer,d)})}}}}}}(i,r);throw r.gc(`Unsupported field value: ${a0(i)}`)}(t,e)}function Dk(t,e){const n={};return EM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ja(t,(i,r)=>{const s=Mh(r,e.Ac(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Mk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof In||t instanceof u1||t instanceof Oc||t instanceof Ur||t instanceof a1||t instanceof l1)}function d1(t,e,n){if(!Mk(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=a0(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function ST(t,e,n){if((e=fi(e))instanceof l0)return e._internalPath;if(typeof e=="string")return h1(t,e);throw Eg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Vz=new RegExp("[~\\*/\\[\\]]");function h1(t,e,n){if(e.search(Vz)>=0)throw Eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new l0(...e.split("."))._internalPath}catch{throw Eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eg(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(s||a)&&(f+=" (found",s&&(f+=` in field ${i}`),a&&(f+=` in document ${r}`),f+=")"),new Ge(we.INVALID_ARGUMENT,l+t+f)}function kk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(f0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Fz extends Pk{data(){return super.data()}}function f0(t,e){return typeof e=="string"?h1(t,e):e instanceof l0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ge(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p1{}class Lk extends p1{}function zz(t,e,...n){let i=[];e instanceof p1&&i.push(e),i=i.concat(n),function(s){const a=s.filter(f=>f instanceof m1).length,l=s.filter(f=>f instanceof d0).length;if(a>1||a>0&&l>0)throw new Ge(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class d0 extends Lk{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new d0(e,n,i)}_apply(e){const n=this._parse(e);return Ok(e._query,n),new tl(e.firestore,e.converter,fT(e._query,n))}_parse(e){const n=f1(e.firestore);return function(s,a,l,f,d,p,y){let T;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ge(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Zw(y,p);const b=[];for(const w of y)b.push(Jw(f,s,w));T={arrayValue:{values:b}}}else T=Jw(f,s,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Zw(y,p),T=Bz(l,a,y,p==="in"||p==="not-in");return ni.create(d,p,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qz(t,e,n){const i=e,r=f0("where",t);return d0._create(r,i,n)}class m1 extends p1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new m1(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ss.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const f of l)Ok(a,f),a=fT(a,f)}(e._query,n),new tl(e.firestore,e.converter,fT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class g1 extends Lk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new g1(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new Ge(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Ge(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lh(s,a)}(e._query,this._field,this._direction);return new tl(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Xc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Gz(t,e="asc"){const n=e,i=f0("orderBy",t);return g1._create(i,n)}function Jw(t,e,n){if(typeof(n=fi(n))=="string"){if(n==="")throw new Ge(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LM(e)&&n.indexOf("/")!==-1)throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(bn.fromString(n));if(!nt.isDocumentKey(i))throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dw(t,new nt(i))}if(n instanceof Ur)return dw(t,n._key);throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${a0(n)}.`)}function Zw(t,e){if(!Array.isArray(t)||t.length===0)throw new Ge(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ok(t,e){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ge(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ge(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $z{convertValue(e,n="none"){switch(Ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ja(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[fg].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Yn(a.doubleValue));return new l1(s)}convertGeoPoint(e){return new u1(Yn(e.latitude),Yn(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Jg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const n=$a(e);return new In(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=bn.fromString(e);en(ik(i),9688,{name:e});const r=new ah(i.get(1),i.get(3)),s=new nt(i.popFirst(5));return r.isEqual(n)||Bo(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yz extends Pk{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(f0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Vm extends Yz{data(e={}){return super.data(e)}}class Kz{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Tm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Vm(this._firestore,this._userDataWriter,i.key,i,new Tm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ge(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const f=new Vm(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:f,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const f=new Vm(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:Wz(l.type),doc:f,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:t})}}class Xz extends $z{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ur(this.firestore,null,n)}}function y1(t){t=$u(t,tl);const e=$u(t.firestore,Dh),n=o1(e),i=new Xz(e);return Hz(t._query),xz(n,t._query).then(r=>new Kz(e,i,t,r))}function _1(t,e,n){t=$u(t,Ur);const i=$u(t.firestore,Dh),r=Uk(t.converter,e,n);return E1(i,[Nk(f1(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Or.none())])}function Qz(t){return E1($u(t.firestore,Dh),[new n0(t._key,Or.none())])}function E1(t,e){return function(i,r){const s=new Fa;return i.asyncQueue.enqueueAndForget(async()=>pz(await Iz(i),r,s)),s.promise}(o1(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=f1(e)}set(e,n,i){this._verifyNotCommitted();const r=oE(e,this._firestore),s=Uk(r.converter,n,i),a=Nk(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Or.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=oE(e,this._firestore);let a;return a=typeof(n=fi(n))=="string"||n instanceof l0?Uz(this._dataReader,"WriteBatch.update",s._key,n,i,r):Oz(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=oE(e,this._firestore);return this._mutations=this._mutations.concat(new n0(n._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oE(t,e){if((t=fi(t)).firestore!==e)throw new Ge(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return o1(t=$u(t,Dh)),new Jz(t,e=>E1(t,e))}(function(e,n=!0){(function(r){Yc=r})($c),Rc(new zu("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new Dh(new LF(i.getProvider("auth-internal")),new BF(a,i.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ge(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ah(d.options.projectId,p)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ba(ew,tw,e),Ba(ew,tw,"esm2017")})();function T1(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Vk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zz=Vk,Fk=new bh("auth","Firebase",Vk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new kv("@firebase/auth");function jz(t,...e){Tg.logLevel<=Rt.WARN&&Tg.warn(`Auth (${$c}): ${t}`,...e)}function Fm(t,...e){Tg.logLevel<=Rt.ERROR&&Tg.error(`Auth (${$c}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,...e){throw v1(t,...e)}function Zs(t,...e){return v1(t,...e)}function Hk(t,e,n){const i=Object.assign(Object.assign({},Zz()),{[e]:n});return new bh("auth","Firebase",i).create(e,{appName:t.name})}function ko(t){return Hk(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v1(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Fk.create(t,...e)}function ot(t,e,...n){if(!t)throw v1(e,...n)}function Do(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fm(e),new Error(e)}function Fo(t,e){t||Do(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eq(){return jw()==="http:"||jw()==="https:"}function jw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eq()||c8()||"connection"in navigator)?navigator.onLine:!0}function nq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fo(n>e,"Short delay should be less than long delay!"),this.isMobile=a8()||f8()}get(){return tq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e){Fo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Do("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Do("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Do("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sq=new kh(3e4,6e4);function ja(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function eu(t,e,n,i,r={}){return qk(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=Ih(Object.assign({key:t.config.apiKey},a)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:f},s);return l8()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Gc(t.emulatorConfig.host)&&(d.credentials="include"),zk.fetch()(await Gk(t,t.config.apiHost,n,l),d)})}async function qk(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},iq),e);try{const r=new aq(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw vm(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[f,d]=l.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw vm(t,"credential-already-in-use",a);if(f==="EMAIL_EXISTS")throw vm(t,"email-already-in-use",a);if(f==="USER_DISABLED")throw vm(t,"user-disabled",a);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Hk(t,p,d);Cs(t,p)}}catch(r){if(r instanceof qo)throw r;Cs(t,"network-request-failed",{message:String(r)})}}async function Ph(t,e,n,i,r={}){const s=await eu(t,e,n,i,r);return"mfaPendingCredential"in s&&Cs(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Gk(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?S1(t.config,r):`${t.config.apiScheme}://${r}`;return rq.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function oq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aq{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Zs(this.auth,"network-request-failed")),sq.get())})}}function vm(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Zs(t,e,i);return r.customData._tokenResponse=n,r}function ex(t){return t!==void 0&&t.enterprise!==void 0}class uq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lq(t,e){return eu(t,"GET","/v2/recaptchaConfig",ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cq(t,e){return eu(t,"POST","/v1/accounts:delete",e)}async function vg(t,e){return eu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fq(t,e=!1){const n=fi(t),i=await n.getIdToken(e),r=C1(i);ot(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:Vd(aE(r.auth_time)),issuedAtTime:Vd(aE(r.iat)),expirationTime:Vd(aE(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function aE(t){return Number(t)*1e3}function C1(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Fm("JWT malformed, contained fewer than 3 sections"),null;try{const r=QD(n);return r?JSON.parse(r):(Fm("Failed to decode base64 JWT payload"),null)}catch(r){return Fm("Caught error parsing JWT payload as JSON",r?.toString()),null}}function tx(t){const e=C1(t);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof qo&&dq(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function dq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vd(this.lastLoginAt),this.creationTime=Vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sg(t){var e;const n=t.auth,i=await t.getIdToken(),r=await dh(t,vg(n,{idToken:i}));ot(r?.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$k(s.providerUserInfo):[],l=mq(t.providerData,a),f=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!l?.length,p=f?d:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new AT(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function pq(t){const e=fi(t);await Sg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mq(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $k(t){return t.map(e=>{var{providerId:n}=e,i=T1(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gq(t,e){const n=await qk(t,{},async()=>{const i=Ih({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await Gk(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:l,body:i};return t.emulatorConfig&&Gc(t.emulatorConfig.host)&&(f.credentials="include"),zk.fetch()(a,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yq(t,e){return eu(t,"POST","/v2/accounts:revokeToken",ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const n=tx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await gq(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new yc;return i&&(ot(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ot(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(ot(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yc,this.toJSON())}_performRefresh(){return Do("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,e){ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vs{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=T1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new AT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await dh(this,this.stsTokenManager.getToken(this.auth,e));return ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fq(this,e)}reload(){return pq(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Sg(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ss(this.auth.app))return Promise.reject(ko(this.auth));const e=await this.getIdToken();return await dh(this,cq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,l,f,d,p;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(a=n.photoURL)!==null&&a!==void 0?a:void 0,w=(l=n.tenantId)!==null&&l!==void 0?l:void 0,R=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,N=(d=n.createdAt)!==null&&d!==void 0?d:void 0,V=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:G,emailVerified:F,isAnonymous:J,providerData:K,stsTokenManager:M}=n;ot(G&&M,e,"internal-error");const P=yc.fromJSON(this.name,M);ot(typeof G=="string",e,"internal-error"),_a(y,e.name),_a(T,e.name),ot(typeof F=="boolean",e,"internal-error"),ot(typeof J=="boolean",e,"internal-error"),_a(v,e.name),_a(b,e.name),_a(w,e.name),_a(R,e.name),_a(N,e.name),_a(V,e.name);const L=new vs({uid:G,auth:e,email:T,emailVerified:F,displayName:y,isAnonymous:J,photoURL:b,phoneNumber:v,tenantId:w,stsTokenManager:P,createdAt:N,lastLoginAt:V});return K&&Array.isArray(K)&&(L.providerData=K.map(O=>Object.assign({},O))),R&&(L._redirectEventId=R),L}static async _fromIdTokenResponse(e,n,i=!1){const r=new yc;r.updateFromServerResponse(n);const s=new vs({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Sg(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];ot(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?$k(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,l=new yc;l.updateFromIdToken(i);const f=new vs({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new AT(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;function Mo(t){Fo(t instanceof Function,"Expected a class definition");let e=nx.get(t);return e?(Fo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Yk.type="NONE";const ix=Yk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e,n){return`firebase:${t}:${e}:${n}`}class _c{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Hm(this.userKey,r.apiKey,s),this.fullPersistenceKey=Hm("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vg(this.auth,{idToken:e}).catch(()=>{});return n?vs._fromGetAccountInfoResponse(this.auth,n,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new _c(Mo(ix),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||Mo(ix);const a=Hm(i,e.config.apiKey,e.name);let l=null;for(const d of n)try{const p=await d._get(a);if(p){let y;if(typeof p=="string"){const T=await vg(e,{idToken:p}).catch(()=>{});if(!T)break;y=await vs._fromGetAccountInfoResponse(e,T,p)}else y=vs._fromJSON(e,p);d!==s&&(l=y),s=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!f.length?new _c(s,e,i):(s=f[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new _c(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zk(e))return"Blackberry";if(jk(e))return"Webos";if(Wk(e))return"Safari";if((e.includes("chrome/")||Xk(e))&&!e.includes("edge/"))return"Chrome";if(Jk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function Kk(t=Yi()){return/firefox\//i.test(t)}function Wk(t=Yi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xk(t=Yi()){return/crios\//i.test(t)}function Qk(t=Yi()){return/iemobile/i.test(t)}function Jk(t=Yi()){return/android/i.test(t)}function Zk(t=Yi()){return/blackberry/i.test(t)}function jk(t=Yi()){return/webos/i.test(t)}function A1(t=Yi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _q(t=Yi()){var e;return A1(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Eq(){return d8()&&document.documentMode===10}function eP(t=Yi()){return A1(t)||Jk(t)||jk(t)||Zk(t)||/windows phone/i.test(t)||Qk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t,e=[]){let n;switch(t){case"Browser":n=rx(Yi());break;case"Worker":n=`${rx(Yi())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$c}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const f=e(s);a(f)}catch(f){l(f)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vq(t,e={}){return eu(t,"GET","/v2/passwordPolicy",ja(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=6;class Cq{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:Sq,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,l;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(r=f.containsLowercaseLetter)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsUppercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsNumericCharacter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sx(this),this.idTokenSubscription=new sx(this),this.beforeStateQueue=new Tq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mo(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await _c.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vg(this,{idToken:e}),i=await vs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ss(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r?._redirectEventId,f=await this.tryRedirectSignIn(e);(!a||a===l)&&f?.user&&(r=f.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ss(this.app))return Promise.reject(ko(this));const n=e?fi(e):null;return n&&ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ss(this.app)?Promise.reject(ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ss(this.app)?Promise.reject(ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vq(this),n=new Cq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bh("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await yq(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mo(e)||this._popupRedirectResolver;ot(n,this,"argument-error"),this.redirectPersistenceManager=await _c.create(this,[Mo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,r);return()=>{a=!0,f()}}else{const f=e.addObserver(n);return()=>{a=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&jz(`Error while retrieving App Check token: ${n.error}`),n?.token}}function nl(t){return fi(t)}class sx{constructor(e){this.auth=e,this.observer=null,this.addObserver=T8(n=>this.observer=n)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bq(t){h0=t}function nP(t){return h0.loadJS(t)}function Iq(){return h0.recaptchaEnterpriseScript}function wq(){return h0.gapiScript}function xq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Rq{constructor(){this.enterprise=new Nq}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Nq{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Dq="recaptcha-enterprise",iP="NO_RECAPTCHA";class Mq{constructor(e){this.type=Dq,this.auth=nl(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{lq(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new uq(f);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(f=>{l(f)})})}function r(s,a,l){const f=window.grecaptcha;ex(f)?f.enterprise.ready(()=>{f.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(iP)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Rq().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&ex(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let f=Iq();f.length!==0&&(f+=l),nP(f).then(()=>{r(l,s,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function ox(t,e,n,i=!1,r=!1){const s=new Mq(t);let a;if(r)a=iP;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const f=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const f=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function bT(t,e,n,i,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ox(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ox(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(t,e){const n=Lv(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Hu(s,e??{}))return r;Cs(r,"already-initialized")}return n.initialize({options:e})}function Pq(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Mo);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function Lq(t,e,n){const i=nl(t);ot(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=rP(e),{host:a,port:l}=Oq(e),f=l===null?"":`:${l}`,d={url:`${s}//${a}${f}/`},p=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ot(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ot(Hu(d,i.config.emulator)&&Hu(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Gc(a)?(eM(`${s}//${a}${f}`),tM("Auth",!0)):Uq()}function rP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Oq(t){const e=rP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:ax(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:ax(a)}}}function ax(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Uq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Do("not implemented")}_getIdTokenResponse(e){return Do("not implemented")}_linkToIdToken(e,n){return Do("not implemented")}_getReauthenticationResolver(e){return Do("not implemented")}}async function Bq(t,e){return eu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vq(t,e){return Ph(t,"POST","/v1/accounts:signInWithPassword",ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fq(t,e){return Ph(t,"POST","/v1/accounts:signInWithEmailLink",ja(t,e))}async function Hq(t,e){return Ph(t,"POST","/v1/accounts:signInWithEmailLink",ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends b1{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new hh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new hh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bT(e,n,"signInWithPassword",Vq);case"emailLink":return Fq(e,{email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bT(e,i,"signUpPassword",Bq);case"emailLink":return Hq(e,{idToken:n,email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t,e){return Ph(t,"POST","/v1/accounts:signInWithIdp",ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq="http://localhost";class Yu extends b1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=T1(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Yu(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ec(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ec(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ec(e,n)}buildRequest(){const e={requestUri:zq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ih(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gq(t){const e=Ad(bd(t)).link,n=e?Ad(bd(e)).deep_link_id:null,i=Ad(bd(t)).deep_link_id;return(i?Ad(bd(i)).link:null)||i||n||e||t}class I1{constructor(e){var n,i,r,s,a,l;const f=Ad(bd(e)),d=(n=f.apiKey)!==null&&n!==void 0?n:null,p=(i=f.oobCode)!==null&&i!==void 0?i:null,y=qq((r=f.mode)!==null&&r!==void 0?r:null);ot(d&&p&&y,"argument-error"),this.apiKey=d,this.operation=y,this.code=p,this.continueUrl=(s=f.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=f.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=f.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Gq(e);try{return new I1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.providerId=Zc.PROVIDER_ID}static credential(e,n){return hh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=I1.parseLink(n);return ot(i,"argument-error"),hh._fromEmailAndCode(e,i.code,i.tenantId)}}Zc.PROVIDER_ID="password";Zc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends sP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Lh{constructor(){super("facebook.com")}static credential(e){return Yu._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wa.credential(e.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Lh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yu._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return xa.credential(n,i)}catch{return null}}}xa.GOOGLE_SIGN_IN_METHOD="google.com";xa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends Lh{constructor(){super("github.com")}static credential(e){return Yu._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ra.credential(e.oauthAccessToken)}catch{return null}}}Ra.GITHUB_SIGN_IN_METHOD="github.com";Ra.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Lh{constructor(){super("twitter.com")}static credential(e,n){return Yu._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Na.credential(n,i)}catch{return null}}}Na.TWITTER_SIGN_IN_METHOD="twitter.com";Na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $q(t,e){return Ph(t,"POST","/v1/accounts:signUp",ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await vs._fromIdTokenResponse(e,i,r),a=ux(i);return new Ku({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=ux(i);return new Ku({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function ux(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends qo{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Cg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Cg(e,n,i,r)}}function oP(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cg._fromErrorAndOperation(t,s,e,i):s})}async function Yq(t,e,n=!1){const i=await dh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ku._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq(t,e,n=!1){const{auth:i}=t;if(ss(i.app))return Promise.reject(ko(i));const r="reauthenticate";try{const s=await dh(t,oP(i,r,e,t),n);ot(s.idToken,i,"internal-error");const a=C1(s.idToken);ot(a,i,"internal-error");const{sub:l}=a;return ot(t.uid===l,i,"user-mismatch"),Ku._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Cs(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e,n=!1){if(ss(t.app))return Promise.reject(ko(t));const i="signIn",r=await oP(t,i,e),s=await Ku._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Wq(t,e){return aP(nl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t){const e=nl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Xq(t,e,n){if(ss(t.app))return Promise.reject(ko(t));const i=nl(t),a=await bT(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$q).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&uP(t),f}),l=await Ku._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function Qq(t,e,n){return ss(t.app)?Promise.reject(ko(t)):Wq(fi(t),Zc.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&uP(t),i})}function Jq(t,e,n,i){return fi(t).onIdTokenChanged(e,n,i)}function Zq(t,e,n){return fi(t).beforeAuthStateChanged(e,n)}function jq(t,e,n,i){return fi(t).onAuthStateChanged(e,n,i)}function eG(t){return fi(t).signOut()}const Ag="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ag,"1"),this.storage.removeItem(Ag),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tG=1e3,nG=10;class cP extends lP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,f)=>{this.notifyListeners(a,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Eq()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,nG):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},tG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cP.type="LOCAL";const iG=cP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP extends lP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fP.type="SESSION";const dP=fP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new p0(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async d=>d(n.origin,s)),f=await rG(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,f)=>{const d=w1("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(y){const T=y;if(T.data.eventId===d)switch(T.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(T.data.response);break;default:clearTimeout(p),clearTimeout(s),f(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}function oG(t){js().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(){return typeof js().WorkerGlobalScope<"u"&&typeof js().importScripts=="function"}async function aG(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uG(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lG(){return hP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="firebaseLocalStorageDb",cG=1,bg="firebaseLocalStorage",mP="fbase_key";class Oh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function m0(t,e){return t.transaction([bg],e?"readwrite":"readonly").objectStore(bg)}function fG(){const t=indexedDB.deleteDatabase(pP);return new Oh(t).toPromise()}function IT(){const t=indexedDB.open(pP,cG);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(bg,{keyPath:mP})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(bg)?e(i):(i.close(),await fG(),e(await IT()))})})}async function lx(t,e,n){const i=m0(t,!0).put({[mP]:e,value:n});return new Oh(i).toPromise()}async function dG(t,e){const n=m0(t,!1).get(e),i=await new Oh(n).toPromise();return i===void 0?null:i.value}function cx(t,e){const n=m0(t,!0).delete(e);return new Oh(n).toPromise()}const hG=800,pG=3;class gP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await IT(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>pG)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p0._getInstance(lG()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aG(),!this.activeServiceWorker)return;this.sender=new sG(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uG()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await IT();return await lx(e,Ag,"1"),await cx(e,Ag),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>lx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>dG(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=m0(r,!1).getAll();return new Oh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gP.type="LOCAL";const mG=gP;new kh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(t,e){return e?Mo(e):(ot(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends b1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ec(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ec(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ec(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yG(t){return aP(t.auth,new x1(t),t.bypassAuthState)}function _G(t){const{auth:e,user:n}=t;return ot(n,e,"internal-error"),Kq(n,new x1(t),t.bypassAuthState)}async function EG(t){const{auth:e,user:n}=t;return ot(n,e,"internal-error"),Yq(n,new x1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yG;case"linkViaPopup":case"linkViaRedirect":return EG;case"reauthViaPopup":case"reauthViaRedirect":return _G;default:Cs(this.auth,"internal-error")}}resolve(e){Fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TG=new kh(2e3,1e4);class lc extends yP{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,lc.currentPopupAction&&lc.currentPopupAction.cancel(),lc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){Fo(this.filter.length===1,"Popup operations only handle one event");const e=w1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TG.get())};e()}}lc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG="pendingRedirect",zm=new Map;class SG extends yP{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=zm.get(this.auth._key());if(!e){try{const i=await CG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}zm.set(this.auth._key(),e)}return this.bypassAuthState||zm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CG(t,e){const n=IG(e),i=bG(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function AG(t,e){zm.set(t._key(),e)}function bG(t){return Mo(t._redirectPersistence)}function IG(t){return Hm(vG,t.config.apiKey,t.name)}async function wG(t,e,n=!1){if(ss(t.app))return Promise.reject(ko(t));const i=nl(t),r=gG(i,e),a=await new SG(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xG=10*60*1e3;class RG{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!_P(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Zs(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xG&&this.cachedEventUids.clear(),this.cachedEventUids.has(fx(e))}saveEventToCache(e){this.cachedEventUids.add(fx(e)),this.lastProcessedEventTime=Date.now()}}function fx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _P({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function NG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _P(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DG(t,e={}){return eu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kG=/^https?/;async function PG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DG(t);for(const n of e)try{if(LG(n))return}catch{}Cs(t,"unauthorized-domain")}function LG(t){const e=CT(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!kG.test(n))return!1;if(MG.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OG=new kh(3e4,6e4);function dx(){const t=js().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UG(t){return new Promise((e,n)=>{var i,r,s;function a(){dx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dx(),n(Zs(t,"network-request-failed"))},timeout:OG.get()})}if(!((r=(i=js().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=js().gapi)===null||s===void 0)&&s.load)a();else{const l=xq("iframefcb");return js()[l]=()=>{gapi.load?a():n(Zs(t,"network-request-failed"))},nP(`${wq()}?onload=${l}`).catch(f=>n(f))}}).catch(e=>{throw qm=null,e})}let qm=null;function BG(t){return qm=qm||UG(t),qm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=new kh(5e3,15e3),FG="__/auth/iframe",HG="emulator/auth/iframe",zG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GG(t){const e=t.config;ot(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?S1(e,HG):`https://${t.config.authDomain}/${FG}`,i={apiKey:e.apiKey,appName:t.name,v:$c},r=qG.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ih(i).slice(1)}`}async function $G(t){const e=await BG(t),n=js().gapi;return ot(n,t,"internal-error"),e.open({where:document.body,url:GG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zG,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Zs(t,"network-request-failed"),l=js().setTimeout(()=>{s(a)},VG.get());function f(){js().clearTimeout(l),r(i)}i.ping(f).then(f,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KG=500,WG=600,XG="_blank",QG="http://localhost";class hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JG(t,e,n,i=KG,r=WG){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const f=Object.assign(Object.assign({},YG),{width:i.toString(),height:r.toString(),top:s,left:a}),d=Yi().toLowerCase();n&&(l=Xk(d)?XG:n),Kk(d)&&(e=e||QG,f.scrollbars="yes");const p=Object.entries(f).reduce((T,[v,b])=>`${T}${v}=${b},`,"");if(_q(d)&&l!=="_self")return ZG(e||"",l),new hx(null);const y=window.open(e||"",l,p);ot(y,t,"popup-blocked");try{y.focus()}catch{}return new hx(y)}function ZG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG="__/auth/handler",e$="emulator/auth/handler",t$=encodeURIComponent("fac");async function px(t,e,n,i,r,s){ot(t.config.authDomain,t,"auth-domain-config-required"),ot(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:$c,eventId:r};if(e instanceof sP){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",E8(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))a[p]=y}if(e instanceof Lh){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const f=await t._getAppCheckToken(),d=f?`#${t$}=${encodeURIComponent(f)}`:"";return`${n$(t)}?${Ih(l).slice(1)}${d}`}function n$({config:t}){return t.emulator?S1(t,e$):`https://${t.authDomain}/${jG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="webStorageSupport";class i${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dP,this._completeRedirectFn=wG,this._overrideRedirectResult=AG}async _openPopup(e,n,i,r){var s;Fo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await px(e,n,i,CT(),r);return JG(e,a,w1())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await px(e,n,i,CT(),r);return oG(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Fo(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await $G(e),i=new RG(e);return n.register("authEvent",r=>(ot(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(uE,{type:uE},r=>{var s;const a=(s=r?.[0])===null||s===void 0?void 0:s[uE];a!==void 0&&n(!!a),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eP()||Wk()||A1()}}const r$=i$;var mx="@firebase/auth",gx="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a$(t){Rc(new zu("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;ot(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tP(t)},d=new Aq(i,r,s,f);return Pq(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Rc(new zu("auth-internal",e=>{const n=nl(e.getProvider("auth").getImmediate());return(i=>new s$(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ba(mx,gx,o$(t)),Ba(mx,gx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=5*60,l$=jD("authIdTokenMaxAge")||u$;let yx=null;const c$=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>l$)return;const r=n?.token;yx!==r&&(yx=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function f$(t=sM()){const e=Lv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kq(t,{popupRedirectResolver:r$,persistence:[mG,iG,dP]}),i=jD("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=c$(s.toString());Zq(n,a,()=>a(n.currentUser)),Jq(n,l=>a(l))}}const r=JD("auth");return r&&Lq(n,`http://${r}`),n}function d$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bq({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Zs("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",d$().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a$("Browser");const h$={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},EP=rM(h$),As=Dz(EP),Ig=f$(EP),Vr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},or={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function p$(){const[t,e]=q.useState(""),[n,i]=q.useState(""),[r,s]=q.useState(!1),[a,l]=q.useState(!1),[f,d]=q.useState(""),p=async T=>{T.preventDefault(),l(!0),d("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(or.INVALID_EMAIL);if(n.length<6)throw new Error(or.WEAK_PASSWORD);const b=await Xq(Ig,t,n);console.log("User created successfully:",b.user.uid)}catch(v){console.error("Sign up error:",v);let b="Failed to create account";v.code==="auth/email-already-in-use"?b=or.EMAIL_IN_USE:v.code==="auth/invalid-email"?b=or.INVALID_EMAIL:v.code==="auth/weak-password"?b=or.WEAK_PASSWORD:v.code==="auth/operation-not-allowed"?b="Email/password accounts are not enabled. Please contact support.":v.message&&(b=v.message),d(b)}finally{l(!1)}},y=async T=>{T.preventDefault(),l(!0),d("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(or.INVALID_EMAIL);const b=await Qq(Ig,t,n);console.log("User signed in successfully:",b.user.uid)}catch(v){console.error("Sign in error:",v);let b="Failed to sign in";v.code==="auth/user-not-found"?b=or.USER_NOT_FOUND:v.code==="auth/wrong-password"?b=or.WRONG_PASSWORD:v.code==="auth/invalid-email"?b=or.INVALID_EMAIL:v.code==="auth/user-disabled"?b="This account has been disabled. Please contact support.":v.code==="auth/too-many-requests"?b=or.TOO_MANY_REQUESTS:v.message&&(b=v.message),d(b)}finally{l(!1)}};return ie.jsx("div",{className:"auth-window-container",children:ie.jsxs("div",{className:"auth-window",children:[ie.jsxs("div",{className:"auth-window-header",children:[ie.jsx("h2",{className:"auth-window-title",children:r?"Create Account":"Welcome Back"}),ie.jsx("p",{className:"auth-window-subtitle",children:r?"Join the platform to start building your boards":"Sign in to access your boards and continue your work"})]}),ie.jsxs("form",{onSubmit:r?p:y,className:"auth-form",children:[ie.jsx("div",{className:"auth-input-group",children:ie.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:T=>e(T.target.value),required:!0,className:"auth-input"})}),ie.jsx("div",{className:"auth-input-group",children:ie.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:T=>i(T.target.value),required:!0,className:"auth-input"})}),ie.jsx("button",{type:"submit",disabled:a,className:`auth-submit-btn ${a?"loading":""}`,children:a?ie.jsx("div",{className:"loading-spinner"}):r?"Create Account":"Sign In"}),f&&ie.jsx("div",{className:"auth-error",children:f})]}),ie.jsxs("div",{className:"auth-switch",children:[ie.jsx("span",{className:"auth-switch-text",children:r?"Already have an account?":"Don't have an account?"}),ie.jsx("button",{type:"button",onClick:()=>s(!r),className:"auth-switch-btn",children:r?"Sign In":"Sign Up"})]})]})})}var lE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var _x;function m$(){return _x||(_x=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(s=r(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var l in s)e.call(s,l)&&s[l]&&(a=r(a,l));return a}function r(s,a){return a?s?s+" "+a:s+a:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(lE)),lE.exports}var g$=m$();const Sn=Zu(g$),jc=!!(typeof window<"u"&&window.document&&window.document.createElement);var wT=!1,xT=!1;try{var cE={get passive(){return wT=!0},get once(){return xT=wT=!0}};jc&&(window.addEventListener("test",cE,cE),window.removeEventListener("test",cE,!0))}catch{}function TP(t,e,n,i){if(i&&typeof i!="boolean"&&!xT){var r=i.once,s=i.capture,a=n;!xT&&r&&(a=n.__once||function l(f){this.removeEventListener(e,l,s),n.call(this,f)},n.__once=a),t.addEventListener(e,a,wT?i:s)}t.addEventListener(e,n,i)}function g0(t){return t&&t.ownerDocument||document}function RT(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}var Sm;function Ex(t){if((!Sm&&Sm!==0||t)&&jc){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Sm=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Sm}function y$(){return q.useState(null)}function _$(t){const e=q.useRef(t);return q.useEffect(()=>{e.current=t},[t]),e}function NT(t){const e=_$(t);return q.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Tx=t=>!t||typeof t=="function"?t:e=>{t.current=e};function E$(t,e){const n=Tx(t),i=Tx(e);return r=>{n&&n(r),i&&i(r)}}function vP(t,e){return q.useMemo(()=>E$(t,e),[t,e])}function T$(t){const e=q.useRef(t);return e.current=t,e}function v$(t){const e=T$(t);q.useEffect(()=>()=>e.current(),[])}function S$(t){var e=g0(t);return e&&e.defaultView||window}function C$(t,e){return S$(t).getComputedStyle(t,e)}var A$=/([A-Z])/g;function b$(t){return t.replace(A$,"-$1").toLowerCase()}var I$=/^ms-/;function Cm(t){return b$(t).replace(I$,"-ms-")}var w$=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function x$(t){return!!(t&&w$.test(t))}function Bu(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(Cm(e))||C$(t).getPropertyValue(Cm(e));Object.keys(e).forEach(function(r){var s=e[r];!s&&s!==0?t.style.removeProperty(Cm(r)):x$(r)?i+=r+"("+s+") ":n+=Cm(r)+": "+s+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}function wg(t,e,n,i){return TP(t,e,n,i),function(){RT(t,e,n,i)}}function R$(t,e,n,i){if(i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function N$(t){var e=Bu(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function D$(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||R$(t,"transitionend",!0)},e+n),s=wg(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function SP(t,e,n,i){n==null&&(n=N$(t)||0);var r=D$(t,n,i),s=wg(t,"transitionend",e);return function(){r(),s()}}function fE(t){t===void 0&&(t=g0());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function vx(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function M$(){const t=q.useRef(!0),e=q.useRef(()=>t.current);return q.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function k$(t){const e=q.useRef(t);return e.current=t,e}function P$(t){const e=k$(t);q.useEffect(()=>()=>e.current(),[])}function L$(t){const e=q.useRef(null);return q.useEffect(()=>{e.current=t}),e.current}function O$(t){const e=q.useRef(t);return q.useEffect(()=>{e.current=t},[t]),e}function Du(t){const e=O$(t);return q.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const U$="data-rr-ui-";function B$(t){return`${U$}${t}`}function V$(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const Sx=B$("modal-open");class R1{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return V$(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(Bu(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Sx,""),Bu(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(Sx),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const CP=q.createContext(jc?window:void 0);CP.Provider;function N1(){return q.useContext(CP)}const dE=(t,e)=>jc?t==null?(e||g0()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function F$(t,e){const n=N1(),[i,r]=q.useState(()=>dE(t,n?.document));if(!i){const s=dE(t);s&&r(s)}return q.useEffect(()=>{},[e,i]),q.useEffect(()=>{const s=dE(t);s!==i&&r(s)},[t,i]),i}const Cx=t=>!t||typeof t=="function"?t:e=>{t.current=e};function H$(t,e){const n=Cx(t),i=Cx(e);return r=>{n&&n(r),i&&i(r)}}function D1(t,e){return q.useMemo(()=>H$(t,e),[t,e])}const z$=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",q$=typeof document<"u",Ax=q$||z$?q.useLayoutEffect:q.useEffect;function G$(t){return t.code==="Escape"||t.keyCode===27}function $$(){const t=q.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function y0(t){if(!t||typeof t=="function")return null;const{major:e}=$$();return e>=19?t.props.ref:t.ref}function Y$({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:r}){const s=q.useRef(null),a=q.useRef(e),l=Du(n);q.useEffect(()=>{e?a.current=!0:l(s.current)},[e,l]);const f=D1(s,y0(t)),d=q.cloneElement(t,{ref:f});return e?d:r||!a.current&&i?null:d}const K$=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function W$(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function X$(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:r,onExiting:s,onExited:a,addEndListener:l,children:f}=t,d=W$(t,K$);const p=q.useRef(null),y=D1(p,y0(f)),T=F=>J=>{F&&p.current&&F(p.current,J)},v=q.useCallback(T(e),[e]),b=q.useCallback(T(n),[n]),w=q.useCallback(T(i),[i]),R=q.useCallback(T(r),[r]),N=q.useCallback(T(s),[s]),V=q.useCallback(T(a),[a]),G=q.useCallback(T(l),[l]);return Object.assign({},d,{nodeRef:p},e&&{onEnter:v},n&&{onEntering:b},i&&{onEntered:w},r&&{onExit:R},s&&{onExiting:N},a&&{onExited:V},l&&{addEndListener:G},{children:typeof f=="function"?(F,J)=>f(F,Object.assign({},J,{ref:y})):q.cloneElement(f,{ref:y})})}const Q$=["component"];function J$(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const Z$=q.forwardRef((t,e)=>{let{component:n}=t,i=J$(t,Q$);const r=X$(i);return ie.jsx(n,Object.assign({ref:e},r))});function j$({in:t,onTransition:e}){const n=q.useRef(null),i=q.useRef(!0),r=Du(e);return Ax(()=>{if(!n.current)return;let s=!1;return r({in:t,element:n.current,initial:i.current,isStale:()=>s}),()=>{s=!0}},[t,r]),Ax(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function eY({children:t,in:e,onExited:n,onEntered:i,transition:r}){const[s,a]=q.useState(!e);e&&s&&a(!1);const l=j$({in:!!e,onTransition:d=>{const p=()=>{d.isStale()||(d.in?i?.(d.element,d.initial):(a(!0),n?.(d.element)))};Promise.resolve(r(d)).then(p,y=>{throw d.in||a(!0),y})}}),f=D1(l,y0(t));return s&&!e?null:q.cloneElement(t,{ref:f})}function bx(t,e,n){return t?ie.jsx(Z$,Object.assign({},n,{component:t})):e?ie.jsx(eY,Object.assign({},n,{transition:e})):ie.jsx(Y$,Object.assign({},n))}const tY=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function nY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}let hE;function iY(t){return hE||(hE=new R1({ownerDocument:t?.document})),hE}function rY(t){const e=N1(),n=t||iY(e),i=q.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:q.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:q.useCallback(r=>{i.current.backdrop=r},[])})}const AP=q.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:r,style:s,children:a,backdrop:l=!0,keyboard:f=!0,onBackdropClick:d,onEscapeKeyDown:p,transition:y,runTransition:T,backdropTransition:v,runBackdropTransition:b,autoFocus:w=!0,enforceFocus:R=!0,restoreFocus:N=!0,restoreFocusOptions:V,renderDialog:G,renderBackdrop:F=je=>ie.jsx("div",Object.assign({},je)),manager:J,container:K,onShow:M,onHide:P=()=>{},onExit:L,onExited:O,onExiting:B,onEnter:z,onEntering:D,onEntered:U}=t,Q=nY(t,tY);const $=N1(),j=F$(K),se=rY(J),oe=M$(),I=L$(n),[ne,le]=q.useState(!n),H=q.useRef(null);q.useImperativeHandle(e,()=>se,[se]),jc&&!I&&n&&(H.current=fE($?.document)),n&&ne&&le(!1);const ye=Du(()=>{if(se.add(),Ve.current=wg(document,"keydown",be),Ue.current=wg(document,"focus",()=>setTimeout(Re),!0),M&&M(),w){var je,Cn;const tt=fE((je=(Cn=se.dialog)==null?void 0:Cn.ownerDocument)!=null?je:$?.document);se.dialog&&tt&&!vx(se.dialog,tt)&&(H.current=tt,se.dialog.focus())}}),Ne=Du(()=>{if(se.remove(),Ve.current==null||Ve.current(),Ue.current==null||Ue.current(),N){var je;(je=H.current)==null||je.focus==null||je.focus(V),H.current=null}});q.useEffect(()=>{!n||!j||ye()},[n,j,ye]),q.useEffect(()=>{ne&&Ne()},[ne,Ne]),P$(()=>{Ne()});const Re=Du(()=>{if(!R||!oe()||!se.isTopModal())return;const je=fE($?.document);se.dialog&&je&&!vx(se.dialog,je)&&se.dialog.focus()}),$e=Du(je=>{je.target===je.currentTarget&&(d?.(je),l===!0&&P())}),be=Du(je=>{f&&G$(je)&&se.isTopModal()&&(p?.(je),je.defaultPrevented||P())}),Ue=q.useRef(),Ve=q.useRef(),it=(...je)=>{le(!0),O?.(...je)};if(!j)return null;const Ht=Object.assign({role:i,ref:se.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},Q,{style:s,className:r,tabIndex:-1});let zt=G?G(Ht):ie.jsx("div",Object.assign({},Ht,{children:q.cloneElement(a,{role:"document"})}));zt=bx(y,T,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:L,onExiting:B,onExited:it,onEnter:z,onEntering:D,onEntered:U,children:zt});let qt=null;return l&&(qt=F({ref:se.setBackdropRef,onClick:$e}),qt=bx(v,b,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:qt})),ie.jsx(ie.Fragment,{children:ac.createPortal(ie.jsxs(ie.Fragment,{children:[qt,zt]}),j)})});AP.displayName="Modal";const sY=Object.assign(AP,{Manager:R1});function oY(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function aY(t,e){t.classList?t.classList.add(e):oY(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}var uY=Function.prototype.bind.call(Function.prototype.call,[].slice);function Wl(t,e){return uY(t.querySelectorAll(e))}function Ix(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function lY(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Ix(t.className,e):t.setAttribute("class",Ix(t.className&&t.className.baseVal||"",e))}const Xl={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class cY extends R1{adjustAndStore(e,n,i){const r=n.style[e];n.dataset[e]=r,Bu(n,{[e]:`${parseFloat(Bu(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],Bu(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(aY(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Wl(n,Xl.FIXED_CONTENT).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth)),Wl(n,Xl.STICKY_CONTENT).forEach(s=>this.adjustAndStore(r,s,-e.scrollBarWidth)),Wl(n,Xl.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();lY(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Wl(n,Xl.FIXED_CONTENT).forEach(s=>this.restore(i,s)),Wl(n,Xl.STICKY_CONTENT).forEach(s=>this.restore(r,s)),Wl(n,Xl.NAVBAR_TOGGLER).forEach(s=>this.restore(r,s))}}let pE;function fY(t){return pE||(pE=new cY(t)),pE}function dY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function DT(t,e){return DT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},DT(t,e)}function hY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,DT(t,e)}var mE={exports:{}},gE,wx;function pY(){if(wx)return gE;wx=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gE=t,gE}var yE,xx;function mY(){if(xx)return yE;xx=1;var t=pY();function e(){}function n(){}return n.resetWarningCache=e,yE=function(){function i(a,l,f,d,p,y){if(y!==t){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},yE}var Rx;function gY(){return Rx||(Rx=1,mE.exports=mY()()),mE.exports}var yY=gY();const Po=Zu(yY),Nx={disabled:!1},bP=Te.createContext(null);var _Y=function(e){return e.scrollTop},Rd="unmounted",Nu="exited",Aa="entering",Mu="entered",MT="exiting",Go=function(t){hY(e,t);function e(i,r){var s;s=t.call(this,i,r)||this;var a=r,l=a&&!a.isMounting?i.enter:i.appear,f;return s.appearStatus=null,i.in?l?(f=Nu,s.appearStatus=Aa):f=Mu:i.unmountOnExit||i.mountOnEnter?f=Rd:f=Nu,s.state={status:f},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===Rd?{status:Nu}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==Aa&&a!==Mu&&(s=Aa):(a===Aa||a===Mu)&&(s=MT)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,a,l;return s=a=l=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,l=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:l}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===Aa){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:ac.findDOMNode(this);a&&_Y(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Nu&&this.setState({status:Rd})},n.performEnter=function(r){var s=this,a=this.props.enter,l=this.context?this.context.isMounting:r,f=this.props.nodeRef?[l]:[ac.findDOMNode(this),l],d=f[0],p=f[1],y=this.getTimeouts(),T=l?y.appear:y.enter;if(!r&&!a||Nx.disabled){this.safeSetState({status:Mu},function(){s.props.onEntered(d)});return}this.props.onEnter(d,p),this.safeSetState({status:Aa},function(){s.props.onEntering(d,p),s.onTransitionEnd(T,function(){s.safeSetState({status:Mu},function(){s.props.onEntered(d,p)})})})},n.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),l=this.props.nodeRef?void 0:ac.findDOMNode(this);if(!s||Nx.disabled){this.safeSetState({status:Nu},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:MT},function(){r.props.onExiting(l),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:Nu},function(){r.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(l){a&&(a=!1,s.nextCallback=null,r(l))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:ac.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!a||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],d=f[0],p=f[1];this.props.addEndListener(d,p)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Rd)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var l=dY(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Te.createElement(bP.Provider,{value:null},typeof a=="function"?a(r,l):Te.cloneElement(Te.Children.only(a),l))},e}(Te.Component);Go.contextType=bP;Go.propTypes={};function Ql(){}Go.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ql,onEntering:Ql,onEntered:Ql,onExit:Ql,onExiting:Ql,onExited:Ql};Go.UNMOUNTED=Rd;Go.EXITED=Nu;Go.ENTERING=Aa;Go.ENTERED=Mu;Go.EXITING=MT;function Dx(t,e){const n=Bu(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function EY(t,e){const n=Dx(t,"transitionDuration"),i=Dx(t,"transitionDelay"),r=SP(t,s=>{s.target===t&&(r(),e(s))},n+i)}function TY(t){t.offsetHeight}function vY(t){return t&&"setState"in t?ac.findDOMNode(t):t??null}const IP=Te.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:s,addEndListener:a,children:l,childRef:f,...d},p)=>{const y=q.useRef(null),T=vP(y,f),v=K=>{T(vY(K))},b=K=>M=>{K&&y.current&&K(y.current,M)},w=q.useCallback(b(t),[t]),R=q.useCallback(b(e),[e]),N=q.useCallback(b(n),[n]),V=q.useCallback(b(i),[i]),G=q.useCallback(b(r),[r]),F=q.useCallback(b(s),[s]),J=q.useCallback(b(a),[a]);return ie.jsx(Go,{ref:p,...d,onEnter:w,onEntered:N,onEntering:R,onExit:V,onExited:F,onExiting:G,addEndListener:J,nodeRef:y,children:typeof l=="function"?(K,M)=>l(K,{...M,ref:v}):Te.cloneElement(l,{ref:v})})});IP.displayName="TransitionWrapper";const SY={[Aa]:"show",[Mu]:"show"},M1=q.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...r},s)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},l=q.useCallback((f,d)=>{TY(f),i?.(f,d)},[i]);return ie.jsx(IP,{ref:s,addEndListener:EY,...a,onEnter:l,childRef:y0(e),children:(f,d)=>q.cloneElement(e,{...d,className:Sn("fade",t,e.props.className,SY[f],n[f])})})});M1.displayName="Fade";const CY=["xxl","xl","lg","md","sm","xs"],AY="xs",Uh=q.createContext({prefixes:{},breakpoints:CY,minBreakpoint:AY}),{Consumer:Qce,Provider:Jce}=Uh;function di(t,e){const{prefixes:n}=q.useContext(Uh);return t||n[e]||e}function bY(){const{breakpoints:t}=q.useContext(Uh);return t}function IY(){const{minBreakpoint:t}=q.useContext(Uh);return t}function wY(){const{dir:t}=q.useContext(Uh);return t==="rtl"}const wP=q.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=di(e,"modal-body"),ie.jsx(n,{ref:r,className:Sn(t,e),...i})));wP.displayName="ModalBody";const xP=q.createContext({onHide(){}}),k1=q.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:i,size:r,fullscreen:s,children:a,scrollable:l,...f},d)=>{t=di(t,"modal");const p=`${t}-dialog`,y=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return ie.jsx("div",{...f,ref:d,className:Sn(p,e,r&&`${t}-${r}`,i&&`${p}-centered`,l&&`${p}-scrollable`,s&&y),children:ie.jsx("div",{className:Sn(`${t}-content`,n),children:a})})});k1.displayName="ModalDialog";const RP=q.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=di(e,"modal-footer"),ie.jsx(n,{ref:r,className:Sn(t,e),...i})));RP.displayName="ModalFooter";const xY={"aria-label":Po.string,onClick:Po.func,variant:Po.oneOf(["white"])},P1=q.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},r)=>ie.jsx("button",{ref:r,type:"button",className:Sn("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));P1.displayName="CloseButton";P1.propTypes=xY;const NP=q.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:r,...s},a)=>{const l=q.useContext(xP),f=NT(()=>{l?.onHide(),i?.()});return ie.jsxs("div",{ref:a,...s,children:[r,n&&ie.jsx(P1,{"aria-label":t,variant:e,onClick:f})]})});NP.displayName="AbstractModalHeader";const DP=q.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...r},s)=>(t=di(t,"modal-header"),ie.jsx(NP,{ref:s,...r,className:Sn(e,t),closeLabel:n,closeButton:i})));DP.displayName="ModalHeader";const RY=t=>q.forwardRef((e,n)=>ie.jsx("div",{...e,ref:n,className:Sn(e.className,t)})),NY=RY("h4"),MP=q.forwardRef(({className:t,bsPrefix:e,as:n=NY,...i},r)=>(e=di(e,"modal-title"),ie.jsx(n,{ref:r,className:Sn(t,e),...i})));MP.displayName="ModalTitle";function DY(t){return ie.jsx(M1,{...t,timeout:null})}function MY(t){return ie.jsx(M1,{...t,timeout:null})}const kP=q.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:i,contentClassName:r,children:s,dialogAs:a=k1,"data-bs-theme":l,"aria-labelledby":f,"aria-describedby":d,"aria-label":p,show:y=!1,animation:T=!0,backdrop:v=!0,keyboard:b=!0,onEscapeKeyDown:w,onShow:R,onHide:N,container:V,autoFocus:G=!0,enforceFocus:F=!0,restoreFocus:J=!0,restoreFocusOptions:K,onEntered:M,onExit:P,onExiting:L,onEnter:O,onEntering:B,onExited:z,backdropClassName:D,manager:U,...Q},$)=>{const[j,se]=q.useState({}),[oe,I]=q.useState(!1),ne=q.useRef(!1),le=q.useRef(!1),H=q.useRef(null),[ye,Ne]=y$(),Re=vP($,Ne),$e=NT(N),be=wY();t=di(t,"modal");const Ue=q.useMemo(()=>({onHide:$e}),[$e]);function Ve(){return U||fY({isRTL:be})}function it(ue){if(!jc)return;const Se=Ve().getScrollbarWidth()>0,ze=ue.scrollHeight>g0(ue).documentElement.clientHeight;se({paddingRight:Se&&!ze?Ex():void 0,paddingLeft:!Se&&ze?Ex():void 0})}const Ht=NT(()=>{ye&&it(ye.dialog)});v$(()=>{RT(window,"resize",Ht),H.current==null||H.current()});const zt=()=>{ne.current=!0},qt=ue=>{ne.current&&ye&&ue.target===ye.dialog&&(le.current=!0),ne.current=!1},je=()=>{I(!0),H.current=SP(ye.dialog,()=>{I(!1)})},Cn=ue=>{ue.target===ue.currentTarget&&je()},tt=ue=>{if(v==="static"){Cn(ue);return}if(le.current||ue.target!==ue.currentTarget){le.current=!1;return}N?.()},Xe=ue=>{b?w?.(ue):(ue.preventDefault(),v==="static"&&je())},gn=(ue,Se)=>{ue&&it(ue),O?.(ue,Se)},Fn=ue=>{H.current==null||H.current(),P?.(ue)},Hn=(ue,Se)=>{B?.(ue,Se),TP(window,"resize",Ht)},Wn=ue=>{ue&&(ue.style.display=""),z?.(ue),RT(window,"resize",Ht)},zn=q.useCallback(ue=>ie.jsx("div",{...ue,className:Sn(`${t}-backdrop`,D,!T&&"show")}),[T,D,t]),wn={...n,...j};wn.display="block";const ii=ue=>ie.jsx("div",{role:"dialog",...ue,style:wn,className:Sn(e,t,oe&&`${t}-static`,!T&&"show"),onClick:v?tt:void 0,onMouseUp:qt,"data-bs-theme":l,"aria-label":p,"aria-labelledby":f,"aria-describedby":d,children:ie.jsx(a,{...Q,onMouseDown:zt,className:i,contentClassName:r,children:s})});return ie.jsx(xP.Provider,{value:Ue,children:ie.jsx(sY,{show:y,ref:Re,backdrop:v,container:V,keyboard:!0,autoFocus:G,enforceFocus:F,restoreFocus:J,restoreFocusOptions:K,onEscapeKeyDown:Xe,onShow:R,onHide:N,onEnter:gn,onEntering:Hn,onEntered:M,onExit:Fn,onExiting:L,onExited:Wn,manager:Ve(),transition:T?DY:void 0,backdropTransition:T?MY:void 0,renderBackdrop:zn,renderDialog:ii})})});kP.displayName="Modal";const hd=Object.assign(kP,{Body:wP,Header:DP,Title:MP,Footer:RP,Dialog:k1,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),kY=["as","disabled"];function PY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function LY(t){return!t||t.trim()==="#"}function PP({tagName:t,disabled:e,href:n,target:i,rel:r,role:s,onClick:a,tabIndex:l=0,type:f}){t||(n!=null||i!=null||r!=null?t="a":t="button");const d={tagName:t};if(t==="button")return[{type:f||"button",disabled:e},d];const p=T=>{if((e||t==="a"&&LY(n))&&T.preventDefault(),e){T.stopPropagation();return}a?.(T)},y=T=>{T.key===" "&&(T.preventDefault(),p(T))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:l,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:p,onKeyDown:y},d]}const OY=q.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=PY(t,kY);const[s,{tagName:a}]=PP(Object.assign({tagName:n,disabled:i},r));return ie.jsx(a,Object.assign({},r,s,{ref:e}))});OY.displayName="Button";const kT=q.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:r=!1,disabled:s=!1,className:a,...l},f)=>{const d=di(e,"btn"),[p,{tagName:y}]=PP({tagName:t,disabled:s,...l}),T=y;return ie.jsx(T,{...p,...l,ref:f,disabled:s,className:Sn(a,d,r&&"active",n&&`${d}-${n}`,i&&`${d}-${i}`,l.href&&s&&"disabled")})});kT.displayName="Button";const UY={type:Po.string,tooltip:Po.bool,as:Po.elementType},_0=q.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:i=!1,...r},s)=>ie.jsx(t,{...r,ref:s,className:Sn(e,`${n}-${i?"tooltip":"feedback"}`)}));_0.displayName="Feedback";_0.propTypes=UY;const Ho=q.createContext({}),L1=q.forwardRef(({id:t,bsPrefix:e,className:n,type:i="checkbox",isValid:r=!1,isInvalid:s=!1,as:a="input",...l},f)=>{const{controlId:d}=q.useContext(Ho);return e=di(e,"form-check-input"),ie.jsx(a,{...l,ref:f,type:i,id:t||d,className:Sn(n,e,r&&"is-valid",s&&"is-invalid")})});L1.displayName="FormCheckInput";const xg=q.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...i},r)=>{const{controlId:s}=q.useContext(Ho);return t=di(t,"form-check-label"),ie.jsx("label",{...i,ref:r,htmlFor:n||s,className:Sn(e,t)})});xg.displayName="FormCheckLabel";function BY(t,e){return q.Children.toArray(t).some(n=>q.isValidElement(n)&&n.type===e)}const LP=q.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:s=!1,isValid:a=!1,isInvalid:l=!1,feedbackTooltip:f=!1,feedback:d,feedbackType:p,className:y,style:T,title:v="",type:b="checkbox",label:w,children:R,as:N="input",...V},G)=>{e=di(e,"form-check"),n=di(n,"form-switch");const{controlId:F}=q.useContext(Ho),J=q.useMemo(()=>({controlId:t||F}),[F,t]),K=!R&&w!=null&&w!==!1||BY(R,xg),M=ie.jsx(L1,{...V,type:b==="switch"?"checkbox":b,ref:G,isValid:a,isInvalid:l,disabled:s,as:N});return ie.jsx(Ho.Provider,{value:J,children:ie.jsx("div",{style:T,className:Sn(y,K&&e,i&&`${e}-inline`,r&&`${e}-reverse`,b==="switch"&&n),children:R||ie.jsxs(ie.Fragment,{children:[M,K&&ie.jsx(xg,{title:v,children:w}),d&&ie.jsx(_0,{type:p,tooltip:f,children:d})]})})})});LP.displayName="FormCheck";const Rg=Object.assign(LP,{Input:L1,Label:xg}),OP=q.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:i,id:r,className:s,isValid:a=!1,isInvalid:l=!1,plaintext:f,readOnly:d,as:p="input",...y},T)=>{const{controlId:v}=q.useContext(Ho);return t=di(t,"form-control"),ie.jsx(p,{...y,type:e,size:i,ref:T,readOnly:d,id:r||v,className:Sn(s,f?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,a&&"is-valid",l&&"is-invalid")})});OP.displayName="FormControl";const VY=Object.assign(OP,{Feedback:_0}),UP=q.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=di(e,"form-floating"),ie.jsx(n,{ref:r,className:Sn(t,e),...i})));UP.displayName="FormFloating";const O1=q.forwardRef(({controlId:t,as:e="div",...n},i)=>{const r=q.useMemo(()=>({controlId:t}),[t]);return ie.jsx(Ho.Provider,{value:r,children:ie.jsx(e,{...n,ref:i})})});O1.displayName="FormGroup";function FY({as:t,bsPrefix:e,className:n,...i}){e=di(e,"col");const r=bY(),s=IY(),a=[],l=[];return r.forEach(f=>{const d=i[f];delete i[f];let p,y,T;typeof d=="object"&&d!=null?{span:p,offset:y,order:T}=d:p=d;const v=f!==s?`-${f}`:"";p&&a.push(p===!0?`${e}${v}`:`${e}${v}-${p}`),T!=null&&l.push(`order${v}-${T}`),y!=null&&l.push(`offset${v}-${y}`)}),[{...i,className:Sn(n,...a,...l)},{as:t,bsPrefix:e,spans:a}]}const BP=q.forwardRef((t,e)=>{const[{className:n,...i},{as:r="div",bsPrefix:s,spans:a}]=FY(t);return ie.jsx(r,{...i,ref:e,className:Sn(n,!a.length&&s)})});BP.displayName="Col";const VP=q.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:s,...a},l)=>{const{controlId:f}=q.useContext(Ho);e=di(e,"form-label");let d="col-form-label";typeof n=="string"&&(d=`${d} ${d}-${n}`);const p=Sn(r,e,i&&"visually-hidden",n&&d);return s=s||f,n?ie.jsx(BP,{ref:l,as:"label",className:p,htmlFor:s,...a}):ie.jsx(t,{ref:l,className:p,htmlFor:s,...a})});VP.displayName="FormLabel";const FP=q.forwardRef(({bsPrefix:t,className:e,id:n,...i},r)=>{const{controlId:s}=q.useContext(Ho);return t=di(t,"form-range"),ie.jsx("input",{...i,type:"range",ref:r,className:Sn(e,t),id:n||s})});FP.displayName="FormRange";const HP=q.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:i,isValid:r=!1,isInvalid:s=!1,id:a,...l},f)=>{const{controlId:d}=q.useContext(Ho);return t=di(t,"form-select"),ie.jsx("select",{...l,size:n,ref:f,className:Sn(i,t,e&&`${t}-${e}`,r&&"is-valid",s&&"is-invalid"),id:a||d})});HP.displayName="FormSelect";const zP=q.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:i,...r},s)=>(t=di(t,"form-text"),ie.jsx(n,{...r,ref:s,className:Sn(e,t,i&&"text-muted")})));zP.displayName="FormText";const qP=q.forwardRef((t,e)=>ie.jsx(Rg,{...t,ref:e,type:"switch"}));qP.displayName="Switch";const HY=Object.assign(qP,{Input:Rg.Input,Label:Rg.Label}),GP=q.forwardRef(({bsPrefix:t,className:e,children:n,controlId:i,label:r,...s},a)=>(t=di(t,"form-floating"),ie.jsxs(O1,{ref:a,className:Sn(e,t),controlId:i,...s,children:[n,ie.jsx("label",{htmlFor:i,children:r})]})));GP.displayName="FloatingLabel";const zY={_ref:Po.any,validated:Po.bool,as:Po.elementType},U1=q.forwardRef(({className:t,validated:e,as:n="form",...i},r)=>ie.jsx(n,{...i,ref:r,className:Sn(t,e&&"was-validated")}));U1.displayName="Form";U1.propTypes=zY;const Jl=Object.assign(U1,{Group:O1,Control:VY,Floating:UP,Check:Rg,Switch:HY,Label:VP,Text:zP,Range:FP,Select:HP,FloatingLabel:GP});function qY({show:t,onHide:e,onConfirm:n,isCreating:i=!1}){const[r,s]=q.useState(""),[a,l]=q.useState(!0),f=q.useCallback(T=>{const v=T.target.value;s(v),l(v.trim().length>0&&v.trim().length<=50)},[]),d=q.useCallback(T=>{T.preventDefault();const v=r.trim();v.length>0&&v.length<=50&&(n(v),s(""),l(!0))},[r,n]),p=q.useCallback(()=>{s(""),l(!0),e()},[e]),y=q.useCallback(T=>{T.key==="Enter"&&d(T)},[d]);return ie.jsxs(hd,{show:t,onHide:p,centered:!0,backdrop:"static",keyboard:!1,className:"board-name-modal",style:{zIndex:2001},children:[ie.jsx(hd.Header,{closeButton:!0,children:ie.jsx(hd.Title,{children:"Create New Board"})}),ie.jsxs(Jl,{onSubmit:d,children:[ie.jsx(hd.Body,{children:ie.jsxs(Jl.Group,{children:[ie.jsx(Jl.Label,{children:"Board Name"}),ie.jsx(Jl.Control,{type:"text",value:r,onChange:f,onKeyDown:y,placeholder:"Enter board name...",isInvalid:!a,maxLength:50,autoFocus:!0}),ie.jsx(Jl.Control.Feedback,{type:"invalid",className:"text-muted",children:"Board name must be between 1 and 50 characters long."}),ie.jsxs(Jl.Text,{className:r.length===50?"text-danger":"text-muted",children:[r.length,"/50 characters"]})]})}),ie.jsxs(hd.Footer,{children:[ie.jsx(kT,{variant:"secondary",onClick:p,disabled:i,children:"Cancel"}),ie.jsx(kT,{variant:"primary",type:"submit",disabled:!a||r.trim().length===0||i,children:i?"Creating...":"Create Board"})]})]})]})}function Mx(t){const e=[],n=String(t||"");let i=n.indexOf(","),r=0,s=!1;for(;!s;){i===-1&&(i=n.length,s=!0);const a=n.slice(r,i).trim();(a||!s)&&e.push(a),r=i+1,i=n.indexOf(",",r)}return e}function $P(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const GY=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$Y=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,YY={};function kx(t,e){return(YY.jsx?$Y:GY).test(t)}const KY=/[ \t\n\f\r]/g;function WY(t){return typeof t=="object"?t.type==="text"?Px(t.value):!1:Px(t)}function Px(t){return t.replace(KY,"")===""}let Bh=class{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}};Bh.prototype.normal={};Bh.prototype.property={};Bh.prototype.space=void 0;function YP(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new Bh(n,i,e)}function ph(t){return t.toLowerCase()}let Tr=class{constructor(e,n){this.attribute=n,this.property=e}};Tr.prototype.attribute="";Tr.prototype.booleanish=!1;Tr.prototype.boolean=!1;Tr.prototype.commaOrSpaceSeparated=!1;Tr.prototype.commaSeparated=!1;Tr.prototype.defined=!1;Tr.prototype.mustUseProperty=!1;Tr.prototype.number=!1;Tr.prototype.overloadedBoolean=!1;Tr.prototype.property="";Tr.prototype.spaceSeparated=!1;Tr.prototype.space=void 0;let XY=0;const yt=il(),jn=il(),PT=il(),Pe=il(),En=il(),Tc=il(),Dr=il();function il(){return 2**++XY}const LT=Object.freeze(Object.defineProperty({__proto__:null,boolean:yt,booleanish:jn,commaOrSpaceSeparated:Dr,commaSeparated:Tc,number:Pe,overloadedBoolean:PT,spaceSeparated:En},Symbol.toStringTag,{value:"Module"})),_E=Object.keys(LT);let B1=class extends Tr{constructor(e,n,i,r){let s=-1;if(super(e,n),Lx(this,"space",r),typeof i=="number")for(;++s<_E.length;){const a=_E[s];Lx(this,_E[s],(i&LT[a])===LT[a])}}};B1.prototype.defined=!0;function Lx(t,e,n){n&&(t[e]=n)}function ef(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new B1(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[ph(i)]=i,n[ph(s.attribute)]=i}return new Bh(e,n,t.space)}const KP=ef({properties:{ariaActiveDescendant:null,ariaAtomic:jn,ariaAutoComplete:null,ariaBusy:jn,ariaChecked:jn,ariaColCount:Pe,ariaColIndex:Pe,ariaColSpan:Pe,ariaControls:En,ariaCurrent:null,ariaDescribedBy:En,ariaDetails:null,ariaDisabled:jn,ariaDropEffect:En,ariaErrorMessage:null,ariaExpanded:jn,ariaFlowTo:En,ariaGrabbed:jn,ariaHasPopup:null,ariaHidden:jn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:En,ariaLevel:Pe,ariaLive:null,ariaModal:jn,ariaMultiLine:jn,ariaMultiSelectable:jn,ariaOrientation:null,ariaOwns:En,ariaPlaceholder:null,ariaPosInSet:Pe,ariaPressed:jn,ariaReadOnly:jn,ariaRelevant:null,ariaRequired:jn,ariaRoleDescription:En,ariaRowCount:Pe,ariaRowIndex:Pe,ariaRowSpan:Pe,ariaSelected:jn,ariaSetSize:Pe,ariaSort:null,ariaValueMax:Pe,ariaValueMin:Pe,ariaValueNow:Pe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function WP(t,e){return e in t?t[e]:e}function XP(t,e){return WP(t,e.toLowerCase())}const QY=ef({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Tc,acceptCharset:En,accessKey:En,action:null,allow:null,allowFullScreen:yt,allowPaymentRequest:yt,allowUserMedia:yt,alt:null,as:null,async:yt,autoCapitalize:null,autoComplete:En,autoFocus:yt,autoPlay:yt,blocking:En,capture:null,charSet:null,checked:yt,cite:null,className:En,cols:Pe,colSpan:null,content:null,contentEditable:jn,controls:yt,controlsList:En,coords:Pe|Tc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yt,defer:yt,dir:null,dirName:null,disabled:yt,download:PT,draggable:jn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yt,formTarget:null,headers:En,height:Pe,hidden:PT,high:Pe,href:null,hrefLang:null,htmlFor:En,httpEquiv:En,id:null,imageSizes:null,imageSrcSet:null,inert:yt,inputMode:null,integrity:null,is:null,isMap:yt,itemId:null,itemProp:En,itemRef:En,itemScope:yt,itemType:En,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yt,low:Pe,manifest:null,max:null,maxLength:Pe,media:null,method:null,min:null,minLength:Pe,multiple:yt,muted:yt,name:null,nonce:null,noModule:yt,noValidate:yt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yt,optimum:Pe,pattern:null,ping:En,placeholder:null,playsInline:yt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yt,referrerPolicy:null,rel:En,required:yt,reversed:yt,rows:Pe,rowSpan:Pe,sandbox:En,scope:null,scoped:yt,seamless:yt,selected:yt,shadowRootClonable:yt,shadowRootDelegatesFocus:yt,shadowRootMode:null,shape:null,size:Pe,sizes:null,slot:null,span:Pe,spellCheck:jn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Pe,step:null,style:null,tabIndex:Pe,target:null,title:null,translate:null,type:null,typeMustMatch:yt,useMap:null,value:jn,width:Pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:En,axis:null,background:null,bgColor:null,border:Pe,borderColor:null,bottomMargin:Pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yt,declare:yt,event:null,face:null,frame:null,frameBorder:null,hSpace:Pe,leftMargin:Pe,link:null,longDesc:null,lowSrc:null,marginHeight:Pe,marginWidth:Pe,noResize:yt,noHref:yt,noShade:yt,noWrap:yt,object:null,profile:null,prompt:null,rev:null,rightMargin:Pe,rules:null,scheme:null,scrolling:jn,standby:null,summary:null,text:null,topMargin:Pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yt,disableRemotePlayback:yt,prefix:null,property:null,results:Pe,security:null,unselectable:null},space:"html",transform:XP}),JY=ef({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Dr,accentHeight:Pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Pe,amplitude:Pe,arabicForm:null,ascent:Pe,attributeName:null,attributeType:null,azimuth:Pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Pe,by:null,calcMode:null,capHeight:Pe,className:En,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Pe,diffuseConstant:Pe,direction:null,display:null,dur:null,divisor:Pe,dominantBaseline:null,download:yt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Pe,enableBackground:null,end:null,event:null,exponent:Pe,externalResourcesRequired:null,fill:null,fillOpacity:Pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Tc,g2:Tc,glyphName:Tc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Pe,horizOriginX:Pe,horizOriginY:Pe,id:null,ideographic:Pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Pe,k:Pe,k1:Pe,k2:Pe,k3:Pe,k4:Pe,kernelMatrix:Dr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Pe,overlineThickness:Pe,paintOrder:null,panose1:null,path:null,pathLength:Pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:En,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Pe,pointsAtY:Pe,pointsAtZ:Pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Dr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Dr,rev:Dr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Dr,requiredFeatures:Dr,requiredFonts:Dr,requiredFormats:Dr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Pe,specularExponent:Pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Pe,strikethroughThickness:Pe,string:null,stroke:null,strokeDashArray:Dr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Pe,strokeOpacity:Pe,strokeWidth:null,style:null,surfaceScale:Pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Dr,tabIndex:Pe,tableValues:null,target:null,targetX:Pe,targetY:Pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Dr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Pe,underlineThickness:Pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Pe,values:null,vAlphabetic:Pe,vMathematical:Pe,vectorEffect:null,vHanging:Pe,vIdeographic:Pe,version:null,vertAdvY:Pe,vertOriginX:Pe,vertOriginY:Pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:WP}),QP=ef({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),JP=ef({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:XP}),ZP=ef({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),ZY={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},jY=/[A-Z]/g,Ox=/-[a-z]/g,eK=/^data[-\w.:]+$/i;function V1(t,e){const n=ph(e);let i=e,r=Tr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&eK.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Ox,nK);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Ox.test(s)){let a=s.replace(jY,tK);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=B1}return new r(i,e)}function tK(t){return"-"+t.toLowerCase()}function nK(t){return t.charAt(1).toUpperCase()}const E0=YP([KP,QY,QP,JP,ZP],"html"),tf=YP([KP,JY,QP,JP,ZP],"svg");function Ux(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function jP(t){return t.join(" ").trim()}var Zl={},EE,Bx;function iK(){if(Bx)return EE;Bx=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,f=`
`,d="/",p="*",y="",T="comment",v="declaration";EE=function(w,R){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];R=R||{};var N=1,V=1;function G(D){var U=D.match(e);U&&(N+=U.length);var Q=D.lastIndexOf(f);V=~Q?D.length-Q:V+D.length}function F(){var D={line:N,column:V};return function(U){return U.position=new J(D),P(),U}}function J(D){this.start=D,this.end={line:N,column:V},this.source=R.source}J.prototype.content=w;function K(D){var U=new Error(R.source+":"+N+":"+V+": "+D);if(U.reason=D,U.filename=R.source,U.line=N,U.column=V,U.source=w,!R.silent)throw U}function M(D){var U=D.exec(w);if(U){var Q=U[0];return G(Q),w=w.slice(Q.length),U}}function P(){M(n)}function L(D){var U;for(D=D||[];U=O();)U!==!1&&D.push(U);return D}function O(){var D=F();if(!(d!=w.charAt(0)||p!=w.charAt(1))){for(var U=2;y!=w.charAt(U)&&(p!=w.charAt(U)||d!=w.charAt(U+1));)++U;if(U+=2,y===w.charAt(U-1))return K("End of comment missing");var Q=w.slice(2,U-2);return V+=2,G(Q),w=w.slice(U),V+=2,D({type:T,comment:Q})}}function B(){var D=F(),U=M(i);if(U){if(O(),!M(r))return K("property missing ':'");var Q=M(s),$=D({type:v,property:b(U[0].replace(t,y)),value:Q?b(Q[0].replace(t,y)):y});return M(a),$}}function z(){var D=[];L(D);for(var U;U=B();)U!==!1&&(D.push(U),L(D));return D}return P(),z()};function b(w){return w?w.replace(l,y):y}return EE}var Vx;function rK(){if(Vx)return Zl;Vx=1;var t=Zl&&Zl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.default=n;var e=t(iK());function n(i,r){var s=null;if(!i||typeof i!="string")return s;var a=(0,e.default)(i),l=typeof r=="function";return a.forEach(function(f){if(f.type==="declaration"){var d=f.property,p=f.value;l?r(d,p,f):p&&(s=s||{},s[d]=p)}}),s}return Zl}var pd={},Fx;function sK(){if(Fx)return pd;Fx=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(d){return!d||n.test(d)||t.test(d)},a=function(d,p){return p.toUpperCase()},l=function(d,p){return"".concat(p,"-")},f=function(d,p){return p===void 0&&(p={}),s(d)?d:(d=d.toLowerCase(),p.reactCompat?d=d.replace(r,l):d=d.replace(i,l),d.replace(e,a))};return pd.camelCase=f,pd}var md,Hx;function oK(){if(Hx)return md;Hx=1;var t=md&&md.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(rK()),n=sK();function i(r,s){var a={};return!r||typeof r!="string"||(0,e.default)(r,function(l,f){l&&f&&(a[(0,n.camelCase)(l,s)]=f)}),a}return i.default=i,md=i,md}var aK=oK();const uK=Zu(aK),T0=eL("end"),so=eL("start");function eL(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function lK(t){const e=so(t),n=T0(t);if(e&&n)return{start:e,end:n}}function Fd(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?zx(t.position):"start"in t||"end"in t?zx(t):"line"in t||"column"in t?OT(t):""}function OT(t){return qx(t&&t.line)+":"+qx(t&&t.column)}function zx(t){return OT(t&&t.start)+"-"+OT(t&&t.end)}function qx(t){return t&&typeof t=="number"?t:1}class Ki extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const f=i.indexOf(":");f===-1?s.ruleId=i:(s.source=i.slice(0,f),s.ruleId=i.slice(f+1))}if(!s.place&&s.ancestors&&s.ancestors){const f=s.ancestors[s.ancestors.length-1];f&&(s.place=f.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=l?l.line:void 0,this.name=Fd(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ki.prototype.file="";Ki.prototype.name="";Ki.prototype.reason="";Ki.prototype.message="";Ki.prototype.stack="";Ki.prototype.column=void 0;Ki.prototype.line=void 0;Ki.prototype.ancestors=void 0;Ki.prototype.cause=void 0;Ki.prototype.fatal=void 0;Ki.prototype.place=void 0;Ki.prototype.ruleId=void 0;Ki.prototype.source=void 0;const F1={}.hasOwnProperty,cK=new Map,fK=/[A-Z]/g,dK=new Set(["table","tbody","thead","tfoot","tr"]),hK=new Set(["td","th"]),tL="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function pK(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=SK(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=vK(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?tf:E0,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=nL(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function nL(t,e,n){if(e.type==="element")return mK(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return gK(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return _K(t,e,n);if(e.type==="mdxjsEsm")return yK(t,e);if(e.type==="root")return EK(t,e,n);if(e.type==="text")return TK(t,e)}function mK(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=tf,t.schema=r),t.ancestors.push(e);const s=rL(t,e.tagName,!1),a=CK(t,e);let l=z1(t,e);return dK.has(e.tagName)&&(l=l.filter(function(f){return typeof f=="string"?!WY(f):!0})),iL(t,a,s,e),H1(a,l),t.ancestors.pop(),t.schema=i,t.create(e,s,a,n)}function gK(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}mh(t,e.position)}function yK(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);mh(t,e.position)}function _K(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=tf,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:rL(t,e.name,!0),a=AK(t,e),l=z1(t,e);return iL(t,a,s,e),H1(a,l),t.ancestors.pop(),t.schema=i,t.create(e,s,a,n)}function EK(t,e,n){const i={};return H1(i,z1(t,e)),t.create(e,t.Fragment,i,n)}function TK(t,e){return e.value}function iL(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function H1(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function vK(t,e,n){return i;function i(r,s,a,l){const d=Array.isArray(a.children)?n:e;return l?d(s,a,l):d(s,a)}}function SK(t,e){return n;function n(i,r,s,a){const l=Array.isArray(s.children),f=so(i);return e(r,s,a,l,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function CK(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&F1.call(e.properties,r)){const s=bK(t,r,e.properties[r]);if(s){const[a,l]=s;t.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&hK.has(e.tagName)?i=l:n[a]=l}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function AK(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const a=s.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else mh(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const l=i.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else mh(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function z1(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:cK;for(;++i<e.children.length;){const s=e.children[i];let a;if(t.passKeys){const f=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(f){const d=r.get(f)||0;a=f+"-"+d,r.set(f,d+1)}}const l=nL(t,s,a);l!==void 0&&n.push(l)}return n}function bK(t,e,n){const i=V1(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?$P(n):jP(n)),i.property==="style"){let r=typeof n=="object"?n:IK(t,String(n));return t.stylePropertyNameCase==="css"&&(r=wK(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?ZY[i.property]||i.property:i.attribute,n]}}function IK(t,e){try{return uK(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new Ki("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=tL+"#cannot-parse-style-attribute",r}}function rL(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,a;for(;++s<r.length;){const l=kx(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}i=a}else i=kx(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return F1.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);mh(t)}function mh(t,e){const n=new Ki("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=tL+"#cannot-handle-mdx-estrees-without-createevaluater",n}function wK(t){const e={};let n;for(n in t)F1.call(t,n)&&(e[xK(n)]=t[n]);return e}function xK(t){let e=t.replace(fK,RK);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function RK(t){return"-"+t.toLowerCase()}const TE={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},NK={};function DK(t,e){const n=NK,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sL(t,i,r)}function sL(t,e,n){if(MK(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Gx(t.children,e,n)}return Array.isArray(t)?Gx(t,e,n):""}function Gx(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=sL(t[r],e,n);return i.join("")}function MK(t){return!!(t&&typeof t=="object")}const $x=document.createElement("i");function q1(t){const e="&"+t+";";$x.innerHTML=e;const n=$x.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function no(t,e,n,i){const r=t.length;let s=0,a;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)a=Array.from(i),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<i.length;)a=i.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function is(t,e){return t.length>0?(no(t,t.length,0,e),t):e}const Yx={}.hasOwnProperty;function kK(t){const e={};let n=-1;for(;++n<t.length;)PK(e,t[n]);return e}function PK(t,e){let n;for(n in e){const r=(Yx.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let a;if(s)for(a in s){Yx.call(r,a)||(r[a]=[]);const l=s[a];LK(r[a],Array.isArray(l)?l:l?[l]:[])}}}function LK(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);no(t,0,0,i)}function oL(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function vc(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ys=tu(/[A-Za-z]/),Lr=tu(/[\dA-Za-z]/),OK=tu(/[#-'*+\--9=?A-Z^-~]/);function UT(t){return t!==null&&(t<32||t===127)}const BT=tu(/\d/),UK=tu(/[\dA-Fa-f]/),BK=tu(/[!-/:-@[-`{-~]/);function lt(t){return t!==null&&t<-2}function Er(t){return t!==null&&(t<0||t===32)}function Wt(t){return t===-2||t===-1||t===32}const VK=tu(new RegExp("\\p{P}|\\p{S}","u")),FK=tu(/\s/);function tu(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function nf(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let a="";if(s===37&&Lr(t.charCodeAt(n+1))&&Lr(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(a=String.fromCharCode(s,l),r=1):a=""}else a=String.fromCharCode(s);a&&(e.push(t.slice(i,n),encodeURIComponent(a)),i=n+r+1,a=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function vn(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(f){return Wt(f)?(t.enter(n),l(f)):e(f)}function l(f){return Wt(f)&&s++<r?(t.consume(f),l):(t.exit(n),e(f))}}const HK={tokenize:zK};function zK(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),vn(t,e,"linePrefix")}function r(l){return t.enter("paragraph"),s(l)}function s(l){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return lt(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),a)}}const qK={tokenize:GK},Kx={tokenize:$K};function GK(t){const e=this,n=[];let i=0,r,s,a;return l;function l(G){if(i<n.length){const F=n[i];return e.containerState=F[1],t.attempt(F[0].continuation,f,d)(G)}return d(G)}function f(G){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&V();const F=e.events.length;let J=F,K;for(;J--;)if(e.events[J][0]==="exit"&&e.events[J][1].type==="chunkFlow"){K=e.events[J][1].end;break}N(i);let M=F;for(;M<e.events.length;)e.events[M][1].end={...K},M++;return no(e.events,J+1,0,e.events.slice(F)),e.events.length=M,d(G)}return l(G)}function d(G){if(i===n.length){if(!r)return T(G);if(r.currentConstruct&&r.currentConstruct.concrete)return b(G);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Kx,p,y)(G)}function p(G){return r&&V(),N(i),T(G)}function y(G){return e.parser.lazy[e.now().line]=i!==n.length,a=e.now().offset,b(G)}function T(G){return e.containerState={},t.attempt(Kx,v,b)(G)}function v(G){return i++,n.push([e.currentConstruct,e.containerState]),T(G)}function b(G){if(G===null){r&&V(),N(0),t.consume(G);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),w(G)}function w(G){if(G===null){R(t.exit("chunkFlow"),!0),N(0),t.consume(G);return}return lt(G)?(t.consume(G),R(t.exit("chunkFlow")),i=0,e.interrupt=void 0,l):(t.consume(G),w)}function R(G,F){const J=e.sliceStream(G);if(F&&J.push(null),G.previous=s,s&&(s.next=G),s=G,r.defineSkip(G.start),r.write(J),e.parser.lazy[G.start.line]){let K=r.events.length;for(;K--;)if(r.events[K][1].start.offset<a&&(!r.events[K][1].end||r.events[K][1].end.offset>a))return;const M=e.events.length;let P=M,L,O;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(L){O=e.events[P][1].end;break}L=!0}for(N(i),K=M;K<e.events.length;)e.events[K][1].end={...O},K++;no(e.events,P+1,0,e.events.slice(M)),e.events.length=K}}function N(G){let F=n.length;for(;F-- >G;){const J=n[F];e.containerState=J[1],J[0].exit.call(e,t)}n.length=G}function V(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function $K(t,e,n){return vn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Wx(t){if(t===null||Er(t)||FK(t))return 1;if(VK(t))return 2}function G1(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const VT={name:"attention",resolveAll:YK,tokenize:KK};function YK(t,e){let n=-1,i,r,s,a,l,f,d,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[i][1].end},T={...t[n][1].start};Xx(y,-f),Xx(T,f),a={type:f>1?"strongSequence":"emphasisSequence",start:y,end:{...t[i][1].end}},l={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:T},s={type:f>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:f>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[i][1].end={...a.start},t[n][1].start={...l.end},d=[],t[i][1].end.offset-t[i][1].start.offset&&(d=is(d,[["enter",t[i][1],e],["exit",t[i][1],e]])),d=is(d,[["enter",r,e],["enter",a,e],["exit",a,e],["enter",s,e]]),d=is(d,G1(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),d=is(d,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,d=is(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):p=0,no(t,i-1,n-i+3,d),n=i+d.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function KK(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Wx(i);let s;return a;function a(f){return s=f,t.enter("attentionSequence"),l(f)}function l(f){if(f===s)return t.consume(f),l;const d=t.exit("attentionSequence"),p=Wx(f),y=!p||p===2&&r||n.includes(f),T=!r||r===2&&p||n.includes(i);return d._open=!!(s===42?y:y&&(r||!T)),d._close=!!(s===42?T:T&&(p||!y)),e(f)}}function Xx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const WK={name:"autolink",tokenize:XK};function XK(t,e,n){let i=0;return r;function r(v){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(v){return Ys(v)?(t.consume(v),a):v===64?n(v):d(v)}function a(v){return v===43||v===45||v===46||Lr(v)?(i=1,l(v)):d(v)}function l(v){return v===58?(t.consume(v),i=0,f):(v===43||v===45||v===46||Lr(v))&&i++<32?(t.consume(v),l):(i=0,d(v))}function f(v){return v===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):v===null||v===32||v===60||UT(v)?n(v):(t.consume(v),f)}function d(v){return v===64?(t.consume(v),p):OK(v)?(t.consume(v),d):n(v)}function p(v){return Lr(v)?y(v):n(v)}function y(v){return v===46?(t.consume(v),i=0,p):v===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):T(v)}function T(v){if((v===45||Lr(v))&&i++<63){const b=v===45?T:y;return t.consume(v),b}return n(v)}}const v0={partial:!0,tokenize:QK};function QK(t,e,n){return i;function i(s){return Wt(s)?vn(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||lt(s)?e(s):n(s)}}const aL={continuation:{tokenize:ZK},exit:jK,name:"blockQuote",tokenize:JK};function JK(t,e,n){const i=this;return r;function r(a){if(a===62){const l=i.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Wt(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function ZK(t,e,n){const i=this;return r;function r(a){return Wt(a)?vn(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(aL,e,n)(a)}}function jK(t){t.exit("blockQuote")}const uL={name:"characterEscape",tokenize:eW};function eW(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return BK(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const lL={name:"characterReference",tokenize:tW};function tW(t,e,n){const i=this;let r=0,s,a;return l;function l(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),f}function f(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),s=31,a=Lr,p(y))}function d(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=UK,p):(t.enter("characterReferenceValue"),s=7,a=BT,p(y))}function p(y){if(y===59&&r){const T=t.exit("characterReferenceValue");return a===Lr&&!q1(i.sliceSerialize(T))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(y)&&r++<s?(t.consume(y),p):n(y)}}const Qx={partial:!0,tokenize:iW},Jx={concrete:!0,name:"codeFenced",tokenize:nW};function nW(t,e,n){const i=this,r={partial:!0,tokenize:J};let s=0,a=0,l;return f;function f(K){return d(K)}function d(K){const M=i.events[i.events.length-1];return s=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,l=K,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p(K)}function p(K){return K===l?(a++,t.consume(K),p):a<3?n(K):(t.exit("codeFencedFenceSequence"),Wt(K)?vn(t,y,"whitespace")(K):y(K))}function y(K){return K===null||lt(K)?(t.exit("codeFencedFence"),i.interrupt?e(K):t.check(Qx,w,F)(K)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),T(K))}function T(K){return K===null||lt(K)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y(K)):Wt(K)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),vn(t,v,"whitespace")(K)):K===96&&K===l?n(K):(t.consume(K),T)}function v(K){return K===null||lt(K)?y(K):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),b(K))}function b(K){return K===null||lt(K)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y(K)):K===96&&K===l?n(K):(t.consume(K),b)}function w(K){return t.attempt(r,F,R)(K)}function R(K){return t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),N}function N(K){return s>0&&Wt(K)?vn(t,V,"linePrefix",s+1)(K):V(K)}function V(K){return K===null||lt(K)?t.check(Qx,w,F)(K):(t.enter("codeFlowValue"),G(K))}function G(K){return K===null||lt(K)?(t.exit("codeFlowValue"),V(K)):(t.consume(K),G)}function F(K){return t.exit("codeFenced"),e(K)}function J(K,M,P){let L=0;return O;function O(Q){return K.enter("lineEnding"),K.consume(Q),K.exit("lineEnding"),B}function B(Q){return K.enter("codeFencedFence"),Wt(Q)?vn(K,z,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):z(Q)}function z(Q){return Q===l?(K.enter("codeFencedFenceSequence"),D(Q)):P(Q)}function D(Q){return Q===l?(L++,K.consume(Q),D):L>=a?(K.exit("codeFencedFenceSequence"),Wt(Q)?vn(K,U,"whitespace")(Q):U(Q)):P(Q)}function U(Q){return Q===null||lt(Q)?(K.exit("codeFencedFence"),M(Q)):P(Q)}}}function iW(t,e,n){const i=this;return r;function r(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}const vE={name:"codeIndented",tokenize:sW},rW={partial:!0,tokenize:oW};function sW(t,e,n){const i=this;return r;function r(d){return t.enter("codeIndented"),vn(t,s,"linePrefix",5)(d)}function s(d){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?a(d):n(d)}function a(d){return d===null?f(d):lt(d)?t.attempt(rW,a,f)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||lt(d)?(t.exit("codeFlowValue"),a(d)):(t.consume(d),l)}function f(d){return t.exit("codeIndented"),e(d)}}function oW(t,e,n){const i=this;return r;function r(a){return i.parser.lazy[i.now().line]?n(a):lt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),r):vn(t,s,"linePrefix",5)(a)}function s(a){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):lt(a)?r(a):n(a)}}const aW={name:"codeText",previous:lW,resolve:uW,tokenize:cW};function uW(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function lW(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cW(t,e,n){let i=0,r,s;return a;function a(y){return t.enter("codeText"),t.enter("codeTextSequence"),l(y)}function l(y){return y===96?(t.consume(y),i++,l):(t.exit("codeTextSequence"),f(y))}function f(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),f):y===96?(s=t.enter("codeTextSequence"),r=0,p(y)):lt(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),f):(t.enter("codeTextData"),d(y))}function d(y){return y===null||y===32||y===96||lt(y)?(t.exit("codeTextData"),f(y)):(t.consume(y),d)}function p(y){return y===96?(t.consume(y),r++,p):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(s.type="codeTextData",d(y))}}class fW{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&gd(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),gd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),gd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);gd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);gd(this.left,n.reverse())}}}function gd(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function cL(t){const e={};let n=-1,i,r,s,a,l,f,d;const p=new fW(t);for(;++n<p.length;){for(;n in e;)n=e[n];if(i=p.get(n),n&&i[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(f=i[1]._tokenizer.events,s=0,s<f.length&&f[s][1].type==="lineEndingBlank"&&(s+=2),s<f.length&&f[s][1].type==="content"))for(;++s<f.length&&f[s][1].type!=="content";)f[s][1].type==="chunkText"&&(f[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,dW(p,n)),n=e[n],d=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(a=p.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(p.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(i[1].end={...p.get(r)[1].start},l=p.slice(r,n),l.unshift(i),p.splice(r,n-r+1,l))}}return no(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!d}function dW(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let a=n._tokenizer;a||(a=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,f=[],d={};let p,y,T=-1,v=n,b=0,w=0;const R=[w];for(;v;){for(;t.get(++r)[1]!==v;);s.push(r),v._tokenizer||(p=i.sliceStream(v),v.next||p.push(null),y&&a.defineSkip(v.start),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(p),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),y=v,v=v.next}for(v=n;++T<l.length;)l[T][0]==="exit"&&l[T-1][0]==="enter"&&l[T][1].type===l[T-1][1].type&&l[T][1].start.line!==l[T][1].end.line&&(w=T+1,R.push(w),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(a.events=[],v?(v._tokenizer=void 0,v.previous=void 0):R.pop(),T=R.length;T--;){const N=l.slice(R[T],R[T+1]),V=s.pop();f.push([V,V+N.length-1]),t.splice(V,2,N)}for(f.reverse(),T=-1;++T<f.length;)d[b+f[T][0]]=b+f[T][1],b+=f[T][1]-f[T][0]-1;return d}const hW={resolve:mW,tokenize:gW},pW={partial:!0,tokenize:yW};function mW(t){return cL(t),t}function gW(t,e){let n;return i;function i(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?s(l):lt(l)?t.check(pW,a,s)(l):(t.consume(l),r)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function yW(t,e,n){const i=this;return r;function r(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),vn(t,s,"linePrefix")}function s(a){if(a===null||lt(a))return n(a);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(i.parser.constructs.flow,n,e)(a)}}function fL(t,e,n,i,r,s,a,l,f){const d=f||Number.POSITIVE_INFINITY;let p=0;return y;function y(N){return N===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(N),t.exit(s),T):N===null||N===32||N===41||UT(N)?n(N):(t.enter(i),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),w(N))}function T(N){return N===62?(t.enter(s),t.consume(N),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),v(N))}function v(N){return N===62?(t.exit("chunkString"),t.exit(l),T(N)):N===null||N===60||lt(N)?n(N):(t.consume(N),N===92?b:v)}function b(N){return N===60||N===62||N===92?(t.consume(N),v):v(N)}function w(N){return!p&&(N===null||N===41||Er(N))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(i),e(N)):p<d&&N===40?(t.consume(N),p++,w):N===41?(t.consume(N),p--,w):N===null||N===32||N===40||UT(N)?n(N):(t.consume(N),N===92?R:w)}function R(N){return N===40||N===41||N===92?(t.consume(N),w):w(N)}}function dL(t,e,n,i,r,s){const a=this;let l=0,f;return d;function d(v){return t.enter(i),t.enter(r),t.consume(v),t.exit(r),t.enter(s),p}function p(v){return l>999||v===null||v===91||v===93&&!f||v===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(v):v===93?(t.exit(s),t.enter(r),t.consume(v),t.exit(r),t.exit(i),e):lt(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),y(v))}function y(v){return v===null||v===91||v===93||lt(v)||l++>999?(t.exit("chunkString"),p(v)):(t.consume(v),f||(f=!Wt(v)),v===92?T:y)}function T(v){return v===91||v===92||v===93?(t.consume(v),l++,y):y(v)}}function hL(t,e,n,i,r,s){let a;return l;function l(T){return T===34||T===39||T===40?(t.enter(i),t.enter(r),t.consume(T),t.exit(r),a=T===40?41:T,f):n(T)}function f(T){return T===a?(t.enter(r),t.consume(T),t.exit(r),t.exit(i),e):(t.enter(s),d(T))}function d(T){return T===a?(t.exit(s),f(a)):T===null?n(T):lt(T)?(t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),vn(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===a||T===null||lt(T)?(t.exit("chunkString"),d(T)):(t.consume(T),T===92?y:p)}function y(T){return T===a||T===92?(t.consume(T),p):p(T)}}function Hd(t,e){let n;return i;function i(r){return lt(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):Wt(r)?vn(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const _W={name:"definition",tokenize:TW},EW={partial:!0,tokenize:vW};function TW(t,e,n){const i=this;let r;return s;function s(v){return t.enter("definition"),a(v)}function a(v){return dL.call(i,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function l(v){return r=vc(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),f):n(v)}function f(v){return Er(v)?Hd(t,d)(v):d(v)}function d(v){return fL(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function p(v){return t.attempt(EW,y,y)(v)}function y(v){return Wt(v)?vn(t,T,"whitespace")(v):T(v)}function T(v){return v===null||lt(v)?(t.exit("definition"),i.parser.defined.push(r),e(v)):n(v)}}function vW(t,e,n){return i;function i(l){return Er(l)?Hd(t,r)(l):n(l)}function r(l){return hL(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Wt(l)?vn(t,a,"whitespace")(l):a(l)}function a(l){return l===null||lt(l)?e(l):n(l)}}const SW={name:"hardBreakEscape",tokenize:CW};function CW(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return lt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const AW={name:"headingAtx",resolve:bW,tokenize:IW};function bW(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},no(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function IW(t,e,n){let i=0;return r;function r(p){return t.enter("atxHeading"),s(p)}function s(p){return t.enter("atxHeadingSequence"),a(p)}function a(p){return p===35&&i++<6?(t.consume(p),a):p===null||Er(p)?(t.exit("atxHeadingSequence"),l(p)):n(p)}function l(p){return p===35?(t.enter("atxHeadingSequence"),f(p)):p===null||lt(p)?(t.exit("atxHeading"),e(p)):Wt(p)?vn(t,l,"whitespace")(p):(t.enter("atxHeadingText"),d(p))}function f(p){return p===35?(t.consume(p),f):(t.exit("atxHeadingSequence"),l(p))}function d(p){return p===null||p===35||Er(p)?(t.exit("atxHeadingText"),l(p)):(t.consume(p),d)}}const wW=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Zx=["pre","script","style","textarea"],xW={concrete:!0,name:"htmlFlow",resolveTo:DW,tokenize:MW},RW={partial:!0,tokenize:PW},NW={partial:!0,tokenize:kW};function DW(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function MW(t,e,n){const i=this;let r,s,a,l,f;return d;function d(H){return p(H)}function p(H){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(H),y}function y(H){return H===33?(t.consume(H),T):H===47?(t.consume(H),s=!0,w):H===63?(t.consume(H),r=3,i.interrupt?e:I):Ys(H)?(t.consume(H),a=String.fromCharCode(H),R):n(H)}function T(H){return H===45?(t.consume(H),r=2,v):H===91?(t.consume(H),r=5,l=0,b):Ys(H)?(t.consume(H),r=4,i.interrupt?e:I):n(H)}function v(H){return H===45?(t.consume(H),i.interrupt?e:I):n(H)}function b(H){const ye="CDATA[";return H===ye.charCodeAt(l++)?(t.consume(H),l===ye.length?i.interrupt?e:z:b):n(H)}function w(H){return Ys(H)?(t.consume(H),a=String.fromCharCode(H),R):n(H)}function R(H){if(H===null||H===47||H===62||Er(H)){const ye=H===47,Ne=a.toLowerCase();return!ye&&!s&&Zx.includes(Ne)?(r=1,i.interrupt?e(H):z(H)):wW.includes(a.toLowerCase())?(r=6,ye?(t.consume(H),N):i.interrupt?e(H):z(H)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(H):s?V(H):G(H))}return H===45||Lr(H)?(t.consume(H),a+=String.fromCharCode(H),R):n(H)}function N(H){return H===62?(t.consume(H),i.interrupt?e:z):n(H)}function V(H){return Wt(H)?(t.consume(H),V):O(H)}function G(H){return H===47?(t.consume(H),O):H===58||H===95||Ys(H)?(t.consume(H),F):Wt(H)?(t.consume(H),G):O(H)}function F(H){return H===45||H===46||H===58||H===95||Lr(H)?(t.consume(H),F):J(H)}function J(H){return H===61?(t.consume(H),K):Wt(H)?(t.consume(H),J):G(H)}function K(H){return H===null||H===60||H===61||H===62||H===96?n(H):H===34||H===39?(t.consume(H),f=H,M):Wt(H)?(t.consume(H),K):P(H)}function M(H){return H===f?(t.consume(H),f=null,L):H===null||lt(H)?n(H):(t.consume(H),M)}function P(H){return H===null||H===34||H===39||H===47||H===60||H===61||H===62||H===96||Er(H)?J(H):(t.consume(H),P)}function L(H){return H===47||H===62||Wt(H)?G(H):n(H)}function O(H){return H===62?(t.consume(H),B):n(H)}function B(H){return H===null||lt(H)?z(H):Wt(H)?(t.consume(H),B):n(H)}function z(H){return H===45&&r===2?(t.consume(H),$):H===60&&r===1?(t.consume(H),j):H===62&&r===4?(t.consume(H),ne):H===63&&r===3?(t.consume(H),I):H===93&&r===5?(t.consume(H),oe):lt(H)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(RW,le,D)(H)):H===null||lt(H)?(t.exit("htmlFlowData"),D(H)):(t.consume(H),z)}function D(H){return t.check(NW,U,le)(H)}function U(H){return t.enter("lineEnding"),t.consume(H),t.exit("lineEnding"),Q}function Q(H){return H===null||lt(H)?D(H):(t.enter("htmlFlowData"),z(H))}function $(H){return H===45?(t.consume(H),I):z(H)}function j(H){return H===47?(t.consume(H),a="",se):z(H)}function se(H){if(H===62){const ye=a.toLowerCase();return Zx.includes(ye)?(t.consume(H),ne):z(H)}return Ys(H)&&a.length<8?(t.consume(H),a+=String.fromCharCode(H),se):z(H)}function oe(H){return H===93?(t.consume(H),I):z(H)}function I(H){return H===62?(t.consume(H),ne):H===45&&r===2?(t.consume(H),I):z(H)}function ne(H){return H===null||lt(H)?(t.exit("htmlFlowData"),le(H)):(t.consume(H),ne)}function le(H){return t.exit("htmlFlow"),e(H)}}function kW(t,e,n){const i=this;return r;function r(a){return lt(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return i.parser.lazy[i.now().line]?n(a):e(a)}}function PW(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(v0,e,n)}}const LW={name:"htmlText",tokenize:OW};function OW(t,e,n){const i=this;let r,s,a;return l;function l(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),f}function f(I){return I===33?(t.consume(I),d):I===47?(t.consume(I),J):I===63?(t.consume(I),G):Ys(I)?(t.consume(I),P):n(I)}function d(I){return I===45?(t.consume(I),p):I===91?(t.consume(I),s=0,b):Ys(I)?(t.consume(I),V):n(I)}function p(I){return I===45?(t.consume(I),v):n(I)}function y(I){return I===null?n(I):I===45?(t.consume(I),T):lt(I)?(a=y,j(I)):(t.consume(I),y)}function T(I){return I===45?(t.consume(I),v):y(I)}function v(I){return I===62?$(I):I===45?T(I):y(I)}function b(I){const ne="CDATA[";return I===ne.charCodeAt(s++)?(t.consume(I),s===ne.length?w:b):n(I)}function w(I){return I===null?n(I):I===93?(t.consume(I),R):lt(I)?(a=w,j(I)):(t.consume(I),w)}function R(I){return I===93?(t.consume(I),N):w(I)}function N(I){return I===62?$(I):I===93?(t.consume(I),N):w(I)}function V(I){return I===null||I===62?$(I):lt(I)?(a=V,j(I)):(t.consume(I),V)}function G(I){return I===null?n(I):I===63?(t.consume(I),F):lt(I)?(a=G,j(I)):(t.consume(I),G)}function F(I){return I===62?$(I):G(I)}function J(I){return Ys(I)?(t.consume(I),K):n(I)}function K(I){return I===45||Lr(I)?(t.consume(I),K):M(I)}function M(I){return lt(I)?(a=M,j(I)):Wt(I)?(t.consume(I),M):$(I)}function P(I){return I===45||Lr(I)?(t.consume(I),P):I===47||I===62||Er(I)?L(I):n(I)}function L(I){return I===47?(t.consume(I),$):I===58||I===95||Ys(I)?(t.consume(I),O):lt(I)?(a=L,j(I)):Wt(I)?(t.consume(I),L):$(I)}function O(I){return I===45||I===46||I===58||I===95||Lr(I)?(t.consume(I),O):B(I)}function B(I){return I===61?(t.consume(I),z):lt(I)?(a=B,j(I)):Wt(I)?(t.consume(I),B):L(I)}function z(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),r=I,D):lt(I)?(a=z,j(I)):Wt(I)?(t.consume(I),z):(t.consume(I),U)}function D(I){return I===r?(t.consume(I),r=void 0,Q):I===null?n(I):lt(I)?(a=D,j(I)):(t.consume(I),D)}function U(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||Er(I)?L(I):(t.consume(I),U)}function Q(I){return I===47||I===62||Er(I)?L(I):n(I)}function $(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function j(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),se}function se(I){return Wt(I)?vn(t,oe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):oe(I)}function oe(I){return t.enter("htmlTextData"),a(I)}}const $1={name:"labelEnd",resolveAll:FW,resolveTo:HW,tokenize:zW},UW={tokenize:qW},BW={tokenize:GW},VW={tokenize:$W};function FW(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&no(t,0,t.length,n),t}function HW(t,e){let n=t.length,i=0,r,s,a,l;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(a=n);const f={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},p={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",f,e],["enter",d,e]],l=is(l,t.slice(s+1,s+i+3)),l=is(l,[["enter",p,e]]),l=is(l,G1(e.parser.constructs.insideSpan.null,t.slice(s+i+4,a-3),e)),l=is(l,[["exit",p,e],t[a-2],t[a-1],["exit",d,e]]),l=is(l,t.slice(a+1)),l=is(l,[["exit",f,e]]),no(t,s,t.length,l),t}function zW(t,e,n){const i=this;let r=i.events.length,s,a;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return l;function l(T){return s?s._inactive?y(T):(a=i.parser.defined.includes(vc(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(T),t.exit("labelMarker"),t.exit("labelEnd"),f):n(T)}function f(T){return T===40?t.attempt(UW,p,a?p:y)(T):T===91?t.attempt(BW,p,a?d:y)(T):a?p(T):y(T)}function d(T){return t.attempt(VW,p,y)(T)}function p(T){return e(T)}function y(T){return s._balanced=!0,n(T)}}function qW(t,e,n){return i;function i(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),r}function r(y){return Er(y)?Hd(t,s)(y):s(y)}function s(y){return y===41?p(y):fL(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function a(y){return Er(y)?Hd(t,f)(y):p(y)}function l(y){return n(y)}function f(y){return y===34||y===39||y===40?hL(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):p(y)}function d(y){return Er(y)?Hd(t,p)(y):p(y)}function p(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function GW(t,e,n){const i=this;return r;function r(l){return dL.call(i,t,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(vc(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}function $W(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const YW={name:"labelStartImage",resolveAll:$1.resolveAll,tokenize:KW};function KW(t,e,n){const i=this;return r;function r(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):e(l)}}const WW={name:"labelStartLink",resolveAll:$1.resolveAll,tokenize:XW};function XW(t,e,n){const i=this;return r;function r(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):e(a)}}const SE={name:"lineEnding",tokenize:QW};function QW(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),vn(t,e,"linePrefix")}}const Gm={name:"thematicBreak",tokenize:JW};function JW(t,e,n){let i=0,r;return s;function s(d){return t.enter("thematicBreak"),a(d)}function a(d){return r=d,l(d)}function l(d){return d===r?(t.enter("thematicBreakSequence"),f(d)):i>=3&&(d===null||lt(d))?(t.exit("thematicBreak"),e(d)):n(d)}function f(d){return d===r?(t.consume(d),i++,f):(t.exit("thematicBreakSequence"),Wt(d)?vn(t,l,"whitespace")(d):l(d))}}const mr={continuation:{tokenize:tX},exit:iX,name:"list",tokenize:eX},ZW={partial:!0,tokenize:rX},jW={partial:!0,tokenize:nX};function eX(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return l;function l(v){const b=i.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!i.containerState.marker||v===i.containerState.marker:BT(v)){if(i.containerState.type||(i.containerState.type=b,t.enter(b,{_container:!0})),b==="listUnordered")return t.enter("listItemPrefix"),v===42||v===45?t.check(Gm,n,d)(v):d(v);if(!i.interrupt||v===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(v)}return n(v)}function f(v){return BT(v)&&++a<10?(t.consume(v),f):(!i.interrupt||a<2)&&(i.containerState.marker?v===i.containerState.marker:v===41||v===46)?(t.exit("listItemValue"),d(v)):n(v)}function d(v){return t.enter("listItemMarker"),t.consume(v),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||v,t.check(v0,i.interrupt?n:p,t.attempt(ZW,T,y))}function p(v){return i.containerState.initialBlankLine=!0,s++,T(v)}function y(v){return Wt(v)?(t.enter("listItemPrefixWhitespace"),t.consume(v),t.exit("listItemPrefixWhitespace"),T):n(v)}function T(v){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(v)}}function tX(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(v0,r,s);function r(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,vn(t,e,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!Wt(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(jW,e,a)(l))}function a(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,vn(t,t.attempt(mr,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function nX(t,e,n){const i=this;return vn(t,r,"listItemIndent",i.containerState.size+1);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?e(s):n(s)}}function iX(t){t.exit(this.containerState.type)}function rX(t,e,n){const i=this;return vn(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const a=i.events[i.events.length-1];return!Wt(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const jx={name:"setextUnderline",resolveTo:sX,tokenize:oX};function sX(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",a,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=a,t.push(["exit",a,e]),t}function oX(t,e,n){const i=this;let r;return s;function s(d){let p=i.events.length,y;for(;p--;)if(i.events[p][1].type!=="lineEnding"&&i.events[p][1].type!=="linePrefix"&&i.events[p][1].type!=="content"){y=i.events[p][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||y)?(t.enter("setextHeadingLine"),r=d,a(d)):n(d)}function a(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===r?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),Wt(d)?vn(t,f,"lineSuffix")(d):f(d))}function f(d){return d===null||lt(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const aX={tokenize:uX};function uX(t){const e=this,n=t.attempt(v0,i,t.attempt(this.parser.constructs.flowInitial,r,vn(t,t.attempt(this.parser.constructs.flow,r,t.attempt(hW,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const lX={resolveAll:mL()},cX=pL("string"),fX=pL("text");function pL(t){return{resolveAll:mL(t==="text"?dX:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,a,l);return a;function a(p){return d(p)?s(p):l(p)}function l(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),f}function f(p){return d(p)?(n.exit("data"),s(p)):(n.consume(p),f)}function d(p){if(p===null)return!0;const y=r[p];let T=-1;if(y)for(;++T<y.length;){const v=y[T];if(!v.previous||v.previous.call(i,i.previous))return!0}return!1}}}function mL(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function dX(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,a=-1,l=0,f;for(;s--;){const d=r[s];if(typeof d=="string"){for(a=d.length;d.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(d===-2)f=!0,l++;else if(d!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||f||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:i.start._bufferIndex+a,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...d.start},i.start.offset===i.end.offset?Object.assign(i,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const hX={42:mr,43:mr,45:mr,48:mr,49:mr,50:mr,51:mr,52:mr,53:mr,54:mr,55:mr,56:mr,57:mr,62:aL},pX={91:_W},mX={[-2]:vE,[-1]:vE,32:vE},gX={35:AW,42:Gm,45:[jx,Gm],60:xW,61:jx,95:Gm,96:Jx,126:Jx},yX={38:lL,92:uL},_X={[-5]:SE,[-4]:SE,[-3]:SE,33:YW,38:lL,42:VT,60:[WK,LW],91:WW,92:[SW,uL],93:$1,95:VT,96:aW},EX={null:[VT,lX]},TX={null:[42,95]},vX={null:[]},SX=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:TX,contentInitial:pX,disable:vX,document:hX,flow:gX,flowInitial:mX,insideSpan:EX,string:yX,text:_X},Symbol.toStringTag,{value:"Module"}));function CX(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let a=[],l=[];const f={attempt:M(J),check:M(K),consume:V,enter:G,exit:F,interrupt:M(K,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:b,parser:t,previous:null,sliceSerialize:T,sliceStream:v,write:y};let p=e.tokenize.call(d,f);return e.resolveAll&&s.push(e),d;function y(B){return a=is(a,B),R(),a[a.length-1]!==null?[]:(P(e,0),d.events=G1(s,d.events,d),d.events)}function T(B,z){return bX(v(B),z)}function v(B){return AX(a,B)}function b(){const{_bufferIndex:B,_index:z,line:D,column:U,offset:Q}=i;return{_bufferIndex:B,_index:z,line:D,column:U,offset:Q}}function w(B){r[B.line]=B.column,O()}function R(){let B;for(;i._index<a.length;){const z=a[i._index];if(typeof z=="string")for(B=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===B&&i._bufferIndex<z.length;)N(z.charCodeAt(i._bufferIndex));else N(z)}}function N(B){p=p(B)}function V(B){lt(B)?(i.line++,i.column=1,i.offset+=B===-3?2:1,O()):B!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),d.previous=B}function G(B,z){const D=z||{};return D.type=B,D.start=b(),d.events.push(["enter",D,d]),l.push(D),D}function F(B){const z=l.pop();return z.end=b(),d.events.push(["exit",z,d]),z}function J(B,z){P(B,z.from)}function K(B,z){z.restore()}function M(B,z){return D;function D(U,Q,$){let j,se,oe,I;return Array.isArray(U)?le(U):"tokenize"in U?le([U]):ne(U);function ne(Re){return $e;function $e(be){const Ue=be!==null&&Re[be],Ve=be!==null&&Re.null,it=[...Array.isArray(Ue)?Ue:Ue?[Ue]:[],...Array.isArray(Ve)?Ve:Ve?[Ve]:[]];return le(it)(be)}}function le(Re){return j=Re,se=0,Re.length===0?$:H(Re[se])}function H(Re){return $e;function $e(be){return I=L(),oe=Re,Re.partial||(d.currentConstruct=Re),Re.name&&d.parser.constructs.disable.null.includes(Re.name)?Ne():Re.tokenize.call(z?Object.assign(Object.create(d),z):d,f,ye,Ne)(be)}}function ye(Re){return B(oe,I),Q}function Ne(Re){return I.restore(),++se<j.length?H(j[se]):$}}}function P(B,z){B.resolveAll&&!s.includes(B)&&s.push(B),B.resolve&&no(d.events,z,d.events.length-z,B.resolve(d.events.slice(z),d)),B.resolveTo&&(d.events=B.resolveTo(d.events,d))}function L(){const B=b(),z=d.previous,D=d.currentConstruct,U=d.events.length,Q=Array.from(l);return{from:U,restore:$};function $(){i=B,d.previous=z,d.currentConstruct=D,d.events.length=U,l=Q,O()}}function O(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function AX(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let a;if(n===r)a=[t[n].slice(i,s)];else{if(a=t.slice(n,r),i>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(i):a.shift()}s>0&&a.push(t[r].slice(0,s))}return a}function bX(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&r)continue;a=" ";break}default:a=String.fromCharCode(s)}r=s===-2,i.push(a)}return i.join("")}function IX(t){const i={constructs:kK([SX,...(t||{}).extensions||[]]),content:r(HK),defined:[],document:r(qK),flow:r(aX),lazy:{},string:r(cX),text:r(fX)};return i;function r(s){return a;function a(l){return CX(i,s,l)}}}function wX(t){for(;!cL(t););return t}const eR=/[\0\t\n\r]/g;function xX(){let t=1,e="",n=!0,i;return r;function r(s,a,l){const f=[];let d,p,y,T,v;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),y=0,e="",n&&(s.charCodeAt(0)===65279&&y++,n=void 0);y<s.length;){if(eR.lastIndex=y,d=eR.exec(s),T=d&&d.index!==void 0?d.index:s.length,v=s.charCodeAt(T),!d){e=s.slice(y);break}if(v===10&&y===T&&i)f.push(-3),i=void 0;else switch(i&&(f.push(-5),i=void 0),y<T&&(f.push(s.slice(y,T)),t+=T-y),v){case 0:{f.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,f.push(-2);t++<p;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:i=!0,t=1}y=T+1}return l&&(i&&f.push(-5),e&&f.push(e),f.push(null)),f}}const RX=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function NX(t){return t.replace(RX,DX)}function DX(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return oL(n.slice(s?2:1),s?16:10)}return q1(n)||t}const gL={}.hasOwnProperty;function MX(t,e,n){return typeof e!="string"&&(n=e,e=void 0),kX(n)(wX(IX(n).document().write(xX()(t,e,!0))))}function kX(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(gn),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(je),blockQuote:s(Ve),characterEscape:L,characterReference:L,codeFenced:s(it),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(it,a),codeText:s(Ht,a),codeTextData:L,data:L,codeFlowValue:L,definition:s(zt),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(qt),hardBreakEscape:s(Cn),hardBreakTrailing:s(Cn),htmlFlow:s(tt,a),htmlFlowData:L,htmlText:s(tt,a),htmlTextData:L,image:s(Xe),label:a,link:s(gn),listItem:s(Hn),listItemValue:T,listOrdered:s(Fn,y),listUnordered:s(Fn),paragraph:s(Wn),reference:H,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(je),strong:s(zn),thematicBreak:s(ii)},exit:{atxHeading:f(),atxHeadingSequence:J,autolink:f(),autolinkEmail:Ue,autolinkProtocol:be,blockQuote:f(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:Ne,characterReferenceMarkerNumeric:Ne,characterReferenceValue:Re,characterReference:$e,codeFenced:f(R),codeFencedFence:w,codeFencedFenceInfo:v,codeFencedFenceMeta:b,codeFlowValue:O,codeIndented:f(N),codeText:f(Q),codeTextData:O,data:O,definition:f(),definitionDestinationString:F,definitionLabelString:V,definitionTitleString:G,emphasis:f(),hardBreakEscape:f(z),hardBreakTrailing:f(z),htmlFlow:f(D),htmlFlowData:O,htmlText:f(U),htmlTextData:O,image:f(j),label:oe,labelText:se,lineEnding:B,link:f($),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ye,resourceDestinationString:I,resourceTitleString:ne,resource:le,setextHeading:f(P),setextHeadingLineSequence:M,setextHeadingText:K,strong:f(),thematicBreak:f()}};yL(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(ue){let Se={type:"root",children:[]};const ze={stack:[Se],tokenStack:[],config:e,enter:l,exit:d,buffer:a,resume:p,data:n},Qe=[];let _t=-1;for(;++_t<ue.length;)if(ue[_t][1].type==="listOrdered"||ue[_t][1].type==="listUnordered")if(ue[_t][0]==="enter")Qe.push(_t);else{const kt=Qe.pop();_t=r(ue,kt,_t)}for(_t=-1;++_t<ue.length;){const kt=e[ue[_t][0]];gL.call(kt,ue[_t][1].type)&&kt[ue[_t][1].type].call(Object.assign({sliceSerialize:ue[_t][2].sliceSerialize},ze),ue[_t][1])}if(ze.tokenStack.length>0){const kt=ze.tokenStack[ze.tokenStack.length-1];(kt[1]||tR).call(ze,void 0,kt[0])}for(Se.position={start:Ea(ue.length>0?ue[0][1].start:{line:1,column:1,offset:0}),end:Ea(ue.length>0?ue[ue.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<e.transforms.length;)Se=e.transforms[_t](Se)||Se;return Se}function r(ue,Se,ze){let Qe=Se-1,_t=-1,kt=!1,tn,nn,rn,Pt;for(;++Qe<=ze;){const Tt=ue[Qe];switch(Tt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Tt[0]==="enter"?_t++:_t--,Pt=void 0;break}case"lineEndingBlank":{Tt[0]==="enter"&&(tn&&!Pt&&!_t&&!rn&&(rn=Qe),Pt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pt=void 0}if(!_t&&Tt[0]==="enter"&&Tt[1].type==="listItemPrefix"||_t===-1&&Tt[0]==="exit"&&(Tt[1].type==="listUnordered"||Tt[1].type==="listOrdered")){if(tn){let pn=Qe;for(nn=void 0;pn--;){const ln=ue[pn];if(ln[1].type==="lineEnding"||ln[1].type==="lineEndingBlank"){if(ln[0]==="exit")continue;nn&&(ue[nn][1].type="lineEndingBlank",kt=!0),ln[1].type="lineEnding",nn=pn}else if(!(ln[1].type==="linePrefix"||ln[1].type==="blockQuotePrefix"||ln[1].type==="blockQuotePrefixWhitespace"||ln[1].type==="blockQuoteMarker"||ln[1].type==="listItemIndent"))break}rn&&(!nn||rn<nn)&&(tn._spread=!0),tn.end=Object.assign({},nn?ue[nn][1].start:Tt[1].end),ue.splice(nn||Qe,0,["exit",tn,Tt[2]]),Qe++,ze++}if(Tt[1].type==="listItemPrefix"){const pn={type:"listItem",_spread:!1,start:Object.assign({},Tt[1].start),end:void 0};tn=pn,ue.splice(Qe,0,["enter",pn,Tt[2]]),Qe++,ze++,rn=void 0,Pt=!0}}}return ue[Se][1]._spread=kt,ze}function s(ue,Se){return ze;function ze(Qe){l.call(this,ue(Qe),Qe),Se&&Se.call(this,Qe)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(ue,Se,ze){this.stack[this.stack.length-1].children.push(ue),this.stack.push(ue),this.tokenStack.push([Se,ze||void 0]),ue.position={start:Ea(Se.start),end:void 0}}function f(ue){return Se;function Se(ze){ue&&ue.call(this,ze),d.call(this,ze)}}function d(ue,Se){const ze=this.stack.pop(),Qe=this.tokenStack.pop();if(Qe)Qe[0].type!==ue.type&&(Se?Se.call(this,ue,Qe[0]):(Qe[1]||tR).call(this,ue,Qe[0]));else throw new Error("Cannot close `"+ue.type+"` ("+Fd({start:ue.start,end:ue.end})+"): its not open");ze.position.end=Ea(ue.end)}function p(){return DK(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function T(ue){if(this.data.expectingFirstListItemValue){const Se=this.stack[this.stack.length-2];Se.start=Number.parseInt(this.sliceSerialize(ue),10),this.data.expectingFirstListItemValue=void 0}}function v(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.lang=ue}function b(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.meta=ue}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ue.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function N(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ue.replace(/(\r?\n|\r)$/g,"")}function V(ue){const Se=this.resume(),ze=this.stack[this.stack.length-1];ze.label=Se,ze.identifier=vc(this.sliceSerialize(ue)).toLowerCase()}function G(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ue}function F(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ue}function J(ue){const Se=this.stack[this.stack.length-1];if(!Se.depth){const ze=this.sliceSerialize(ue).length;Se.depth=ze}}function K(){this.data.setextHeadingSlurpLineEnding=!0}function M(ue){const Se=this.stack[this.stack.length-1];Se.depth=this.sliceSerialize(ue).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function L(ue){const ze=this.stack[this.stack.length-1].children;let Qe=ze[ze.length-1];(!Qe||Qe.type!=="text")&&(Qe=wn(),Qe.position={start:Ea(ue.start),end:void 0},ze.push(Qe)),this.stack.push(Qe)}function O(ue){const Se=this.stack.pop();Se.value+=this.sliceSerialize(ue),Se.position.end=Ea(ue.end)}function B(ue){const Se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ze=Se.children[Se.children.length-1];ze.position.end=Ea(ue.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Se.type)&&(L.call(this,ue),O.call(this,ue))}function z(){this.data.atHardBreak=!0}function D(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ue}function U(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ue}function Q(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ue}function $(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const Se=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=Se,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function j(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const Se=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=Se,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function se(ue){const Se=this.sliceSerialize(ue),ze=this.stack[this.stack.length-2];ze.label=NX(Se),ze.identifier=vc(Se).toLowerCase()}function oe(){const ue=this.stack[this.stack.length-1],Se=this.resume(),ze=this.stack[this.stack.length-1];if(this.data.inReference=!0,ze.type==="link"){const Qe=ue.children;ze.children=Qe}else ze.alt=Se}function I(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ue}function ne(){const ue=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ue}function le(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function ye(ue){const Se=this.resume(),ze=this.stack[this.stack.length-1];ze.label=Se,ze.identifier=vc(this.sliceSerialize(ue)).toLowerCase(),this.data.referenceType="full"}function Ne(ue){this.data.characterReferenceType=ue.type}function Re(ue){const Se=this.sliceSerialize(ue),ze=this.data.characterReferenceType;let Qe;ze?(Qe=oL(Se,ze==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Qe=q1(Se);const _t=this.stack[this.stack.length-1];_t.value+=Qe}function $e(ue){const Se=this.stack.pop();Se.position.end=Ea(ue.end)}function be(ue){O.call(this,ue);const Se=this.stack[this.stack.length-1];Se.url=this.sliceSerialize(ue)}function Ue(ue){O.call(this,ue);const Se=this.stack[this.stack.length-1];Se.url="mailto:"+this.sliceSerialize(ue)}function Ve(){return{type:"blockquote",children:[]}}function it(){return{type:"code",lang:null,meta:null,value:""}}function Ht(){return{type:"inlineCode",value:""}}function zt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function qt(){return{type:"emphasis",children:[]}}function je(){return{type:"heading",depth:0,children:[]}}function Cn(){return{type:"break"}}function tt(){return{type:"html",value:""}}function Xe(){return{type:"image",title:null,url:"",alt:null}}function gn(){return{type:"link",title:null,url:"",children:[]}}function Fn(ue){return{type:"list",ordered:ue.type==="listOrdered",start:null,spread:ue._spread,children:[]}}function Hn(ue){return{type:"listItem",spread:ue._spread,checked:null,children:[]}}function Wn(){return{type:"paragraph",children:[]}}function zn(){return{type:"strong",children:[]}}function wn(){return{type:"text",value:""}}function ii(){return{type:"thematicBreak"}}}function Ea(t){return{line:t.line,column:t.column,offset:t.offset}}function yL(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?yL(t,i):PX(t,i)}}function PX(t,e){let n;for(n in e)if(gL.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function tR(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Fd({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Fd({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Fd({start:e.start,end:e.end})+") is still open")}function LX(t){const e=this;e.parser=n;function n(i){return MX(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function OX(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function UX(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function BX(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function VX(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function FX(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function HX(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=nf(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let a,l=t.footnoteCounts.get(i);l===void 0?(l=0,t.footnoteOrder.push(i),a=t.footnoteOrder.length):a=s+1,l+=1,t.footnoteCounts.set(i,l);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,f);const d={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,d),t.applyData(e,d)}function zX(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function qX(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function _L(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=i:r.push({type:"text",value:i}),r}function GX(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return _L(t,e);const r={src:nf(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function $X(t,e){const n={src:nf(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function YX(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function KX(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return _L(t,e);const r={href:nf(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function WX(t,e){const n={href:nf(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function XX(t,e,n){const i=t.all(e),r=n?QX(n):EL(e),s={},a=[];if(typeof e.checked=="boolean"){const p=i[0];let y;p&&p.type==="element"&&p.tagName==="p"?y=p:(y={type:"element",tagName:"p",properties:{},children:[]},i.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const p=i[l];(r||l!==0||p.type!=="element"||p.tagName!=="p")&&a.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!r?a.push(...p.children):a.push(p)}const f=i[i.length-1];f&&(r||f.type!=="element"||f.tagName!=="p")&&a.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:s,children:a};return t.patch(e,d),t.applyData(e,d)}function QX(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=EL(n[i])}return e}function EL(t){const e=t.spread;return e??t.children.length>1}function JX(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const a=i[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function ZX(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jX(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function eQ(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function tQ(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],a),r.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=so(e.children[1]),f=T0(e.children[e.children.length-1]);l&&f&&(a.position={start:l,end:f}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function nQ(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:e.children.length;let f=-1;const d=[];for(;++f<l;){const y=e.children[f],T={},v=a?a[f]:void 0;v&&(T.align=v);let b={type:"element",tagName:s,properties:T,children:[]};y&&(b.children=t.all(y),t.patch(y,b),b=t.applyData(y,b)),d.push(b)}const p={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,p),t.applyData(e,p)}function iQ(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const nR=9,iR=32;function rQ(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(rR(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(rR(e.slice(r),r>0,!1)),s.join("")}function rR(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===nR||s===iR;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===nR||s===iR;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function sQ(t,e){const n={type:"text",value:rQ(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function oQ(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const aQ={blockquote:OX,break:UX,code:BX,delete:VX,emphasis:FX,footnoteReference:HX,heading:zX,html:qX,imageReference:GX,image:$X,inlineCode:YX,linkReference:KX,link:WX,listItem:XX,list:JX,paragraph:ZX,root:jX,strong:eQ,table:tQ,tableCell:iQ,tableRow:nQ,text:sQ,thematicBreak:oQ,toml:Am,yaml:Am,definition:Am,footnoteDefinition:Am};function Am(){}const TL=-1,S0=0,zd=1,Ng=2,Y1=3,K1=4,W1=5,X1=6,vL=7,SL=8,sR=typeof self=="object"?self:globalThis,uQ=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,a]=e[r];switch(s){case S0:case TL:return n(a,r);case zd:{const l=n([],r);for(const f of a)l.push(i(f));return l}case Ng:{const l=n({},r);for(const[f,d]of a)l[i(f)]=i(d);return l}case Y1:return n(new Date(a),r);case K1:{const{source:l,flags:f}=a;return n(new RegExp(l,f),r)}case W1:{const l=n(new Map,r);for(const[f,d]of a)l.set(i(f),i(d));return l}case X1:{const l=n(new Set,r);for(const f of a)l.add(i(f));return l}case vL:{const{name:l,message:f}=a;return n(new sR[l](f),r)}case SL:return n(BigInt(a),r);case"BigInt":return n(Object(BigInt(a)),r);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new sR[s](a),r)};return i},oR=t=>uQ(new Map,t)(0),jl="",{toString:lQ}={},{keys:cQ}=Object,yd=t=>{const e=typeof t;if(e!=="object"||!t)return[S0,e];const n=lQ.call(t).slice(8,-1);switch(n){case"Array":return[zd,jl];case"Object":return[Ng,jl];case"Date":return[Y1,jl];case"RegExp":return[K1,jl];case"Map":return[W1,jl];case"Set":return[X1,jl];case"DataView":return[zd,n]}return n.includes("Array")?[zd,n]:n.includes("Error")?[vL,n]:[Ng,n]},bm=([t,e])=>t===S0&&(e==="function"||e==="symbol"),fQ=(t,e,n,i)=>{const r=(a,l)=>{const f=i.push(a)-1;return n.set(l,f),f},s=a=>{if(n.has(a))return n.get(a);let[l,f]=yd(a);switch(l){case S0:{let p=a;switch(f){case"bigint":l=SL,p=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);p=null;break;case"undefined":return r([TL],a)}return r([l,p],a)}case zd:{if(f){let T=a;return f==="DataView"?T=new Uint8Array(a.buffer):f==="ArrayBuffer"&&(T=new Uint8Array(a)),r([f,[...T]],a)}const p=[],y=r([l,p],a);for(const T of a)p.push(s(T));return y}case Ng:{if(f)switch(f){case"BigInt":return r([f,a.toString()],a);case"Boolean":case"Number":case"String":return r([f,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const p=[],y=r([l,p],a);for(const T of cQ(a))(t||!bm(yd(a[T])))&&p.push([s(T),s(a[T])]);return y}case Y1:return r([l,a.toISOString()],a);case K1:{const{source:p,flags:y}=a;return r([l,{source:p,flags:y}],a)}case W1:{const p=[],y=r([l,p],a);for(const[T,v]of a)(t||!(bm(yd(T))||bm(yd(v))))&&p.push([s(T),s(v)]);return y}case X1:{const p=[],y=r([l,p],a);for(const T of a)(t||!bm(yd(T)))&&p.push(s(T));return y}}const{message:d}=a;return r([l,{name:f,message:d}],a)};return s},aR=(t,{json:e,lossy:n}={})=>{const i=[];return fQ(!(e||n),!!e,new Map,i)(t),i},Uc=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?oR(aR(t,e)):structuredClone(t):(t,e)=>oR(aR(t,e));function dQ(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function hQ(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function pQ(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||dQ,i=t.options.footnoteBackLabel||hQ,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let f=-1;for(;++f<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[f]);if(!d)continue;const p=t.all(d),y=String(d.identifier).toUpperCase(),T=nf(y.toLowerCase());let v=0;const b=[],w=t.footnoteCounts.get(y);for(;w!==void 0&&++v<=w;){b.length>0&&b.push({type:"text",value:" "});let V=typeof n=="string"?n:n(f,v);typeof V=="string"&&(V={type:"text",value:V}),b.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+T+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(f,v),className:["data-footnote-backref"]},children:Array.isArray(V)?V:[V]})}const R=p[p.length-1];if(R&&R.type==="element"&&R.tagName==="p"){const V=R.children[R.children.length-1];V&&V.type==="text"?V.value+=" ":R.children.push({type:"text",value:" "}),R.children.push(...b)}else p.push(...b);const N={type:"element",tagName:"li",properties:{id:e+"fn-"+T},children:t.wrap(p,!0)};t.patch(d,N),l.push(N)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Uc(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const CL=function(t){if(t==null)return _Q;if(typeof t=="function")return C0(t);if(typeof t=="object")return Array.isArray(t)?mQ(t):gQ(t);if(typeof t=="string")return yQ(t);throw new Error("Expected function, string, or object as test")};function mQ(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=CL(t[n]);return C0(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function gQ(t){const e=t;return C0(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function yQ(t){return C0(e);function e(n){return n&&n.type===t}}function C0(t){return e;function e(n,i,r){return!!(EQ(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function _Q(){return!0}function EQ(t){return t!==null&&typeof t=="object"&&"type"in t}const AL=[],TQ=!0,uR=!1,vQ="skip";function SQ(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=CL(r),a=i?-1:1;l(t,void 0,[])();function l(f,d,p){const y=f&&typeof f=="object"?f:{};if(typeof y.type=="string"){const v=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(T,"name",{value:"node ("+(f.type+(v?"<"+v+">":""))+")"})}return T;function T(){let v=AL,b,w,R;if((!e||s(f,d,p[p.length-1]||void 0))&&(v=CQ(n(f,p)),v[0]===uR))return v;if("children"in f&&f.children){const N=f;if(N.children&&v[0]!==vQ)for(w=(i?N.children.length:-1)+a,R=p.concat(N);w>-1&&w<N.children.length;){const V=N.children[w];if(b=l(V,w,R)(),b[0]===uR)return b;w=typeof b[1]=="number"?b[1]:w+a}}return v}}}function CQ(t){return Array.isArray(t)?t:typeof t=="number"?[TQ,t]:t==null?AL:[t]}function Q1(t,e,n,i){let r,s,a;typeof e=="function"&&typeof n!="function"?(s=void 0,a=e,r=n):(s=e,a=n,r=i),SQ(t,s,l,r);function l(f,d){const p=d[d.length-1],y=p?p.children.indexOf(f):void 0;return a(f,y,p)}}const FT={}.hasOwnProperty,AQ={};function bQ(t,e){const n=e||AQ,i=new Map,r=new Map,s=new Map,a={...aQ,...n.handlers},l={all:d,applyData:wQ,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:a,one:f,options:n,patch:IQ,wrap:RQ};return Q1(t,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const y=p.type==="definition"?i:r,T=String(p.identifier).toUpperCase();y.has(T)||y.set(T,p)}}),l;function f(p,y){const T=p.type,v=l.handlers[T];if(FT.call(l.handlers,T)&&v)return v(l,p,y);if(l.options.passThrough&&l.options.passThrough.includes(T)){if("children"in p){const{children:w,...R}=p,N=Uc(R);return N.children=l.all(p),N}return Uc(p)}return(l.options.unknownHandler||xQ)(l,p,y)}function d(p){const y=[];if("children"in p){const T=p.children;let v=-1;for(;++v<T.length;){const b=l.one(T[v],p);if(b){if(v&&T[v-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=lR(b.value)),!Array.isArray(b)&&b.type==="element")){const w=b.children[0];w&&w.type==="text"&&(w.value=lR(w.value))}Array.isArray(b)?y.push(...b):y.push(b)}}}return y}}function IQ(t,e){t.position&&(e.position=lK(t))}function wQ(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const a="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Uc(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function xQ(t,e){const n=e.data||{},i="value"in e&&!(FT.call(n,"hProperties")||FT.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function RQ(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function lR(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function cR(t,e){const n=bQ(t,e),i=n.one(t,void 0),r=pQ(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function NQ(t,e){return t&&"run"in t?async function(n,i){const r=cR(n,{file:i,...e});await t.run(r,i)}:function(n,i){return cR(n,{file:i,...t||e})}}function fR(t){if(t)throw t}var CE,dR;function DQ(){if(dR)return CE;dR=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},s=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var p=t.call(d,"constructor"),y=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!p&&!y)return!1;var T;for(T in d);return typeof T>"u"||t.call(d,T)},a=function(d,p){n&&p.name==="__proto__"?n(d,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):d[p.name]=p.newValue},l=function(d,p){if(p==="__proto__")if(t.call(d,p)){if(i)return i(d,p).value}else return;return d[p]};return CE=function f(){var d,p,y,T,v,b,w=arguments[0],R=1,N=arguments.length,V=!1;for(typeof w=="boolean"&&(V=w,w=arguments[1]||{},R=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});R<N;++R)if(d=arguments[R],d!=null)for(p in d)y=l(w,p),T=l(d,p),w!==T&&(V&&T&&(s(T)||(v=r(T)))?(v?(v=!1,b=y&&r(y)?y:[]):b=y&&s(y)?y:{},a(w,{name:p,newValue:f(V,b,T)})):typeof T<"u"&&a(w,{name:p,newValue:T}));return w},CE}var MQ=DQ();const AE=Zu(MQ);function HT(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function kQ(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...r);function l(f,...d){const p=t[++s];let y=-1;if(f){a(f);return}for(;++y<r.length;)(d[y]===null||d[y]===void 0)&&(d[y]=r[y]);r=d,p?PQ(p,l)(...d):a(null,...d)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function PQ(t,e){let n;return i;function i(...a){const l=t.length>a.length;let f;l&&a.push(r);try{f=t.apply(this,a)}catch(d){const p=d;if(l&&n)throw p;return r(p)}l||(f&&f.then&&typeof f.then=="function"?f.then(s,r):f instanceof Error?r(f):s(f))}function r(a,...l){n||(n=!0,e(a,...l))}function s(a){r(null,a)}}const zs={basename:LQ,dirname:OQ,extname:UQ,join:BQ,sep:"/"};function LQ(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Vh(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let a=-1,l=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else a<0&&(s=!0,a=r+1),l>-1&&(t.codePointAt(r)===e.codePointAt(l--)?l<0&&(i=r):(l=-1,i=a));return n===i?i=a:i<0&&(i=t.length),t.slice(n,i)}function OQ(t){if(Vh(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function UQ(t){Vh(t);let e=t.length,n=-1,i=0,r=-1,s=0,a;for(;e--;){const l=t.codePointAt(e);if(l===47){if(a){i=e+1;break}continue}n<0&&(a=!0,n=e+1),l===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function BQ(...t){let e=-1,n;for(;++e<t.length;)Vh(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":VQ(n)}function VQ(t){Vh(t);const e=t.codePointAt(0)===47;let n=FQ(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function FQ(t,e){let n="",i=0,r=-1,s=0,a=-1,l,f;for(;++a<=t.length;){if(a<t.length)l=t.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",i=0):(n=n.slice(0,f),i=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(n.length>0){n="",i=0,r=a,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,a):n=t.slice(r+1,a),i=a-r-1;r=a,s=0}else l===46&&s>-1?s++:s=-1}return n}function Vh(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const HQ={cwd:zQ};function zQ(){return"/"}function zT(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function qQ(t){if(typeof t=="string")t=new URL(t);else if(!zT(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return GQ(t)}function GQ(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const bE=["history","path","basename","stem","extname","dirname"];class bL{constructor(e){let n;e?zT(e)?n={path:e}:typeof e=="string"||$Q(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":HQ.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<bE.length;){const s=bE[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)bE.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?zs.basename(this.path):void 0}set basename(e){wE(e,"basename"),IE(e,"basename"),this.path=zs.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?zs.dirname(this.path):void 0}set dirname(e){hR(this.basename,"dirname"),this.path=zs.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?zs.extname(this.path):void 0}set extname(e){if(IE(e,"extname"),hR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zs.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){zT(e)&&(e=qQ(e)),wE(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?zs.basename(this.path,this.extname):void 0}set stem(e){wE(e,"stem"),IE(e,"stem"),this.path=zs.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new Ki(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function IE(t,e){if(t&&t.includes(zs.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+zs.sep+"`")}function wE(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function hR(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function $Q(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const YQ=function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},KQ={}.hasOwnProperty;class J1 extends YQ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=kQ()}copy(){const e=new J1;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(AE(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(NE("data",this.frozen),this.namespace[e]=n,this):KQ.call(this.namespace,e)&&this.namespace[e]||void 0:e?(NE("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Im(e),i=this.parser||this.Parser;return xE("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),xE("process",this.parser||this.Parser),RE("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,a){const l=Im(e),f=i.parse(l);i.run(f,l,function(p,y,T){if(p||!y||!T)return d(p);const v=y,b=i.stringify(v,T);QQ(b)?T.value=b:T.result=b,d(p,T)});function d(p,y){p||!y?a(p):s?s(y):n(void 0,y)}}}processSync(e){let n=!1,i;return this.freeze(),xE("processSync",this.parser||this.Parser),RE("processSync",this.compiler||this.Compiler),this.process(e,r),mR("processSync","process",n),i;function r(s,a){n=!0,fR(s),i=a}}run(e,n,i){pR(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(a,l){const f=Im(n);r.run(e,f,d);function d(p,y,T){const v=y||e;p?l(p):a?a(v):i(void 0,v,T)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),mR("runSync","run",i),r;function s(a,l){fR(a),r=l,i=!0}}stringify(e,n){this.freeze();const i=Im(n),r=this.compiler||this.Compiler;return RE("stringify",r),pR(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(NE("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(d){if(typeof d=="function")f(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[p,...y]=d;f(p,y)}else a(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function a(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(r.settings=AE(!0,r.settings,d.settings))}function l(d){let p=-1;if(d!=null)if(Array.isArray(d))for(;++p<d.length;){const y=d[p];s(y)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function f(d,p){let y=-1,T=-1;for(;++y<i.length;)if(i[y][0]===d){T=y;break}if(T===-1)i.push([d,...p]);else if(p.length>0){let[v,...b]=p;const w=i[T][1];HT(w)&&HT(v)&&(v=AE(!0,w,v)),i[T]=[d,v,...b]}}}}const WQ=new J1().freeze();function xE(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function RE(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function NE(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pR(t){if(!HT(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function mR(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Im(t){return XQ(t)?t:new bL(t)}function XQ(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function QQ(t){return typeof t=="string"||JQ(t)}function JQ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const ZQ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gR=[],yR={allowDangerousHtml:!0},jQ=/^(https?|ircs?|mailto|xmpp)$/i,eJ=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function tJ(t){const e=nJ(t),n=iJ(t);return rJ(e.runSync(e.parse(n),n),t)}function nJ(t){const e=t.rehypePlugins||gR,n=t.remarkPlugins||gR,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...yR}:yR;return WQ().use(LX).use(n).use(NQ,i).use(e)}function iJ(t){const e=t.children||"",n=new bL;return typeof e=="string"&&(n.value=e),n}function rJ(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,a=e.skipHtml,l=e.unwrapDisallowed,f=e.urlTransform||sJ;for(const p of eJ)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+ZQ+p.id,void 0);return Q1(t,d),pK(t,{Fragment:ie.Fragment,components:r,ignoreInvalidStyle:!0,jsx:ie.jsx,jsxs:ie.jsxs,passKeys:!0,passNode:!0});function d(p,y,T){if(p.type==="raw"&&T&&typeof y=="number")return a?T.children.splice(y,1):T.children[y]={type:"text",value:p.value},y;if(p.type==="element"){let v;for(v in TE)if(Object.hasOwn(TE,v)&&Object.hasOwn(p.properties,v)){const b=p.properties[v],w=TE[v];(w===null||w.includes(p.tagName))&&(p.properties[v]=f(String(b||""),v,p))}}if(p.type==="element"){let v=n?!n.includes(p.tagName):s?s.includes(p.tagName):!1;if(!v&&i&&typeof y=="number"&&(v=!i(p,y,T)),v&&T&&typeof y=="number")return l&&p.children?T.children.splice(y,1,...p.children):T.children.splice(y,1),y}}}function sJ(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||jQ.test(t.slice(0,e))?t:""}const _R=/[#.]/g;function oJ(t,e){const n=t||"",i={};let r=0,s,a;for(;r<n.length;){_R.lastIndex=r;const l=_R.exec(n),f=n.slice(r,l?l.index:n.length);f&&(s?s==="#"?i.id=f:Array.isArray(i.className)?i.className.push(f):i.className=[f]:a=f,r+=f.length),l&&(s=l[0],r++)}return{type:"element",tagName:a||e||"div",properties:i,children:[]}}function IL(t,e,n){const i=n?cJ(n):void 0;function r(s,a,...l){let f;if(s==null){f={type:"root",children:[]};const d=a;l.unshift(d)}else{f=oJ(s,e);const d=f.tagName.toLowerCase(),p=i?i.get(d):void 0;if(f.tagName=p||d,aJ(a))l.unshift(a);else for(const[y,T]of Object.entries(a))uJ(t,f.properties,y,T)}for(const d of l)qT(f.children,d);return f.type==="element"&&f.tagName==="template"&&(f.content={type:"root",children:f.children},f.children=[]),f}return r}function aJ(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const i of n){const r=e[i];if(r&&typeof r=="object"){if(!Array.isArray(r))return!0;const s=r;for(const a of s)if(typeof a!="number"&&typeof a!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function uJ(t,e,n,i){const r=V1(t,n);let s;if(i!=null){if(typeof i=="number"){if(Number.isNaN(i))return;s=i}else typeof i=="boolean"?s=i:typeof i=="string"?r.spaceSeparated?s=Ux(i):r.commaSeparated?s=Mx(i):r.commaOrSpaceSeparated?s=Ux(Mx(i).join(" ")):s=ER(r,r.property,i):Array.isArray(i)?s=[...i]:s=r.property==="style"?lJ(i):String(i);if(Array.isArray(s)){const a=[];for(const l of s)a.push(ER(r,r.property,l));s=a}r.property==="className"&&Array.isArray(e.className)&&(s=e.className.concat(s)),e[r.property]=s}}function qT(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)qT(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?qT(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function ER(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||ph(n)===ph(e)))return!0}return n}function lJ(t){const e=[];for(const[n,i]of Object.entries(t))e.push([n,i].join(": "));return e.join("; ")}function cJ(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const fJ=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],dJ=IL(E0,"div"),hJ=IL(tf,"g",fJ);function pJ(t){const e=String(t),n=[];return{toOffset:r,toPoint:i};function i(s){if(typeof s=="number"&&s>-1&&s<=e.length){let a=0;for(;;){let l=n[a];if(l===void 0){const f=TR(e,n[a-1]);l=f===-1?e.length+1:f+1,n[a]=l}if(l>s)return{line:a+1,column:s-(a>0?n[a-1]:0)+1,offset:s};a++}}}function r(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const l=n[n.length-1],f=TR(e,l),d=f===-1?e.length+1:f+1;if(l===d)break;n.push(d)}const a=(s.line>1?n[s.line-2]:0)+s.column-1;if(a<n[s.line-1])return a}}}function TR(t,e){const n=t.indexOf("\r",e),i=t.indexOf(`
`,e);return i===-1?n:n===-1||n+1===i?i:n<i?n:i}const Ou={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wL={}.hasOwnProperty,mJ=Object.prototype;function gJ(t,e){const n=e||{};return Z1({file:n.file||void 0,location:!1,schema:n.space==="svg"?tf:E0,verbose:n.verbose||!1},t)}function Z1(t,e){let n;switch(e.nodeName){case"#comment":{const i=e;return n={type:"comment",value:i.data},$m(t,i,n),n}case"#document":case"#document-fragment":{const i=e,r="mode"in i?i.mode==="quirks"||i.mode==="limited-quirks":!1;if(n={type:"root",children:xL(t,e.childNodes),data:{quirksMode:r}},t.file&&t.location){const s=String(t.file),a=pJ(s),l=a.toPoint(0),f=a.toPoint(s.length);n.position={start:l,end:f}}return n}case"#documentType":{const i=e;return n={type:"doctype"},$m(t,i,n),n}case"#text":{const i=e;return n={type:"text",value:i.value},$m(t,i,n),n}default:return n=yJ(t,e),n}}function xL(t,e){let n=-1;const i=[];for(;++n<e.length;){const r=Z1(t,e[n]);i.push(r)}return i}function yJ(t,e){const n=t.schema;t.schema=e.namespaceURI===Ou.svg?tf:E0;let i=-1;const r={};for(;++i<e.attrs.length;){const l=e.attrs[i],f=(l.prefix?l.prefix+":":"")+l.name;wL.call(mJ,f)||(r[f]=l.value)}const a=(t.schema.space==="svg"?hJ:dJ)(e.tagName,r,xL(t,e.childNodes));if($m(t,e,a),a.tagName==="template"){const l=e,f=l.sourceCodeLocation,d=f&&f.startTag&&cc(f.startTag),p=f&&f.endTag&&cc(f.endTag),y=Z1(t,l.content);d&&p&&t.file&&(y.position={start:d.end,end:p.start}),a.content=y}return t.schema=n,a}function $m(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const i=_J(t,n,e.sourceCodeLocation);i&&(t.location=!0,n.position=i)}}function _J(t,e,n){const i=cc(n);if(e.type==="element"){const r=e.children[e.children.length-1];if(i&&!n.endTag&&r&&r.position&&r.position.end&&(i.end=Object.assign({},r.position.end)),t.verbose){const s={};let a;if(n.attrs)for(a in n.attrs)wL.call(n.attrs,a)&&(s[V1(t.schema,a).property]=cc(n.attrs[a]));n.startTag;const l=cc(n.startTag),f=n.endTag?cc(n.endTag):void 0,d={opening:l};f&&(d.closing=f),d.properties=s,e.data={position:d}}}return i}function cc(t){const e=vR({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=vR({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function vR(t){return t.line&&t.column?t:void 0}class Fh{constructor(e,n,i){this.property=e,this.normal=n,i&&(this.space=i)}}Fh.prototype.property={};Fh.prototype.normal={};Fh.prototype.space=null;function RL(t,e){const n={},i={};let r=-1;for(;++r<t.length;)Object.assign(n,t[r].property),Object.assign(i,t[r].normal);return new Fh(n,i,e)}function GT(t){return t.toLowerCase()}class ls{constructor(e,n){this.property=e,this.attribute=n}}ls.prototype.space=null;ls.prototype.boolean=!1;ls.prototype.booleanish=!1;ls.prototype.overloadedBoolean=!1;ls.prototype.number=!1;ls.prototype.commaSeparated=!1;ls.prototype.spaceSeparated=!1;ls.prototype.commaOrSpaceSeparated=!1;ls.prototype.mustUseProperty=!1;ls.prototype.defined=!1;let EJ=0;const mt=rl(),ei=rl(),NL=rl(),Le=rl(),Tn=rl(),Sc=rl(),Mr=rl();function rl(){return 2**++EJ}const $T=Object.freeze(Object.defineProperty({__proto__:null,boolean:mt,booleanish:ei,commaOrSpaceSeparated:Mr,commaSeparated:Sc,number:Le,overloadedBoolean:NL,spaceSeparated:Tn},Symbol.toStringTag,{value:"Module"})),DE=Object.keys($T);class j1 extends ls{constructor(e,n,i,r){let s=-1;if(super(e,n),SR(this,"space",r),typeof i=="number")for(;++s<DE.length;){const a=DE[s];SR(this,DE[s],(i&$T[a])===$T[a])}}}j1.prototype.defined=!0;function SR(t,e,n){n&&(t[e]=n)}const TJ={}.hasOwnProperty;function rf(t){const e={},n={};let i;for(i in t.properties)if(TJ.call(t.properties,i)){const r=t.properties[i],s=new j1(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[GT(i)]=i,n[GT(s.attribute)]=i}return new Fh(e,n,t.space)}const DL=rf({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),ML=rf({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function kL(t,e){return e in t?t[e]:e}function PL(t,e){return kL(t,e.toLowerCase())}const LL=rf({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:PL,properties:{xmlns:null,xmlnsXLink:null}}),OL=rf({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ei,ariaAutoComplete:null,ariaBusy:ei,ariaChecked:ei,ariaColCount:Le,ariaColIndex:Le,ariaColSpan:Le,ariaControls:Tn,ariaCurrent:null,ariaDescribedBy:Tn,ariaDetails:null,ariaDisabled:ei,ariaDropEffect:Tn,ariaErrorMessage:null,ariaExpanded:ei,ariaFlowTo:Tn,ariaGrabbed:ei,ariaHasPopup:null,ariaHidden:ei,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Tn,ariaLevel:Le,ariaLive:null,ariaModal:ei,ariaMultiLine:ei,ariaMultiSelectable:ei,ariaOrientation:null,ariaOwns:Tn,ariaPlaceholder:null,ariaPosInSet:Le,ariaPressed:ei,ariaReadOnly:ei,ariaRelevant:null,ariaRequired:ei,ariaRoleDescription:Tn,ariaRowCount:Le,ariaRowIndex:Le,ariaRowSpan:Le,ariaSelected:ei,ariaSetSize:Le,ariaSort:null,ariaValueMax:Le,ariaValueMin:Le,ariaValueNow:Le,ariaValueText:null,role:null}}),vJ=rf({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:PL,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Sc,acceptCharset:Tn,accessKey:Tn,action:null,allow:null,allowFullScreen:mt,allowPaymentRequest:mt,allowUserMedia:mt,alt:null,as:null,async:mt,autoCapitalize:null,autoComplete:Tn,autoFocus:mt,autoPlay:mt,blocking:Tn,capture:null,charSet:null,checked:mt,cite:null,className:Tn,cols:Le,colSpan:null,content:null,contentEditable:ei,controls:mt,controlsList:Tn,coords:Le|Sc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mt,defer:mt,dir:null,dirName:null,disabled:mt,download:NL,draggable:ei,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mt,formTarget:null,headers:Tn,height:Le,hidden:mt,high:Le,href:null,hrefLang:null,htmlFor:Tn,httpEquiv:Tn,id:null,imageSizes:null,imageSrcSet:null,inert:mt,inputMode:null,integrity:null,is:null,isMap:mt,itemId:null,itemProp:Tn,itemRef:Tn,itemScope:mt,itemType:Tn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mt,low:Le,manifest:null,max:null,maxLength:Le,media:null,method:null,min:null,minLength:Le,multiple:mt,muted:mt,name:null,nonce:null,noModule:mt,noValidate:mt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mt,optimum:Le,pattern:null,ping:Tn,placeholder:null,playsInline:mt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mt,referrerPolicy:null,rel:Tn,required:mt,reversed:mt,rows:Le,rowSpan:Le,sandbox:Tn,scope:null,scoped:mt,seamless:mt,selected:mt,shadowRootClonable:mt,shadowRootDelegatesFocus:mt,shadowRootMode:null,shape:null,size:Le,sizes:null,slot:null,span:Le,spellCheck:ei,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Le,step:null,style:null,tabIndex:Le,target:null,title:null,translate:null,type:null,typeMustMatch:mt,useMap:null,value:ei,width:Le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Tn,axis:null,background:null,bgColor:null,border:Le,borderColor:null,bottomMargin:Le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mt,declare:mt,event:null,face:null,frame:null,frameBorder:null,hSpace:Le,leftMargin:Le,link:null,longDesc:null,lowSrc:null,marginHeight:Le,marginWidth:Le,noResize:mt,noHref:mt,noShade:mt,noWrap:mt,object:null,profile:null,prompt:null,rev:null,rightMargin:Le,rules:null,scheme:null,scrolling:ei,standby:null,summary:null,text:null,topMargin:Le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mt,disableRemotePlayback:mt,prefix:null,property:null,results:Le,security:null,unselectable:null}}),SJ=rf({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:kL,properties:{about:Mr,accentHeight:Le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Le,amplitude:Le,arabicForm:null,ascent:Le,attributeName:null,attributeType:null,azimuth:Le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Le,by:null,calcMode:null,capHeight:Le,className:Tn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Le,diffuseConstant:Le,direction:null,display:null,dur:null,divisor:Le,dominantBaseline:null,download:mt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Le,enableBackground:null,end:null,event:null,exponent:Le,externalResourcesRequired:null,fill:null,fillOpacity:Le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Sc,g2:Sc,glyphName:Sc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Le,horizOriginX:Le,horizOriginY:Le,id:null,ideographic:Le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Le,k:Le,k1:Le,k2:Le,k3:Le,k4:Le,kernelMatrix:Mr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Le,overlineThickness:Le,paintOrder:null,panose1:null,path:null,pathLength:Le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Tn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Le,pointsAtY:Le,pointsAtZ:Le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Mr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Mr,rev:Mr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Mr,requiredFeatures:Mr,requiredFonts:Mr,requiredFormats:Mr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Le,specularExponent:Le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Le,strikethroughThickness:Le,string:null,stroke:null,strokeDashArray:Mr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Le,strokeOpacity:Le,strokeWidth:null,style:null,surfaceScale:Le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Mr,tabIndex:Le,tableValues:null,target:null,targetX:Le,targetY:Le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Mr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Le,underlineThickness:Le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Le,values:null,vAlphabetic:Le,vMathematical:Le,vectorEffect:null,vHanging:Le,vIdeographic:Le,version:null,vertAdvY:Le,vertOriginX:Le,vertOriginY:Le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),CJ=/^data[-\w.:]+$/i,CR=/-[a-z]/g,AJ=/[A-Z]/g;function bJ(t,e){const n=GT(e);let i=e,r=ls;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&CJ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(CR,wJ);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!CR.test(s)){let a=s.replace(AJ,IJ);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=j1}return new r(i,e)}function IJ(t){return"-"+t.toLowerCase()}function wJ(t){return t.charAt(1).toUpperCase()}const xJ=RL([ML,DL,LL,OL,vJ],"html"),UL=RL([ML,DL,LL,OL,SJ],"svg"),AR={}.hasOwnProperty;function BL(t,e){const n=e||{};function i(r,...s){let a=i.invalid;const l=i.handlers;if(r&&AR.call(r,t)){const f=String(r[t]);a=AR.call(l,f)?l[f]:i.unknown}if(a)return a.call(this,r,...s)}return i.handlers=n.handlers||{},i.invalid=n.invalid,i.unknown=n.unknown,i}const RJ={},NJ={}.hasOwnProperty,VL=BL("type",{handlers:{root:MJ,element:UJ,text:LJ,comment:OJ,doctype:PJ}});function DJ(t,e){const i=(e||RJ).space;return VL(t,i==="svg"?UL:xJ)}function MJ(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=eS(t.children,n,e),sf(t,n),n}function kJ(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=eS(t.children,n,e),sf(t,n),n}function PJ(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return sf(t,e),e}function LJ(t){const e={nodeName:"#text",value:t.value,parentNode:null};return sf(t,e),e}function OJ(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return sf(t,e),e}function UJ(t,e){const n=e;let i=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=UL);const r=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&NJ.call(t.properties,s)){const f=BJ(i,s,t.properties[s]);f&&r.push(f)}}const a=i.space,l={nodeName:t.tagName,tagName:t.tagName,attrs:r,namespaceURI:Ou[a],childNodes:[],parentNode:null};return l.childNodes=eS(t.children,l,i),sf(t,l),t.tagName==="template"&&t.content&&(l.content=kJ(t.content,i)),l}function BJ(t,e,n){const i=bJ(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&i.boolean)return;Array.isArray(n)&&(n=i.commaSeparated?$P(n):jP(n));const r={name:i.attribute,value:n===!0?"":String(n)};if(i.space&&i.space!=="html"&&i.space!=="svg"){const s=r.name.indexOf(":");s<0?r.prefix="":(r.name=r.name.slice(s+1),r.prefix=i.attribute.slice(0,s)),r.namespace=Ou[i.space]}return r}function eS(t,e,n){let i=-1;const r=[];if(t)for(;++i<t.length;){const s=VL(t[i],n);s.parentNode=e,r.push(s)}return r}function sf(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const VJ=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],FJ=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Dn="";var X;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(X||(X={}));const pr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function FL(t){return t>=55296&&t<=57343}function HJ(t){return t>=56320&&t<=57343}function zJ(t,e){return(t-55296)*1024+9216+e}function HL(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function zL(t){return t>=64976&&t<=65007||FJ.has(t)}var ve;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ve||(ve={}));const qJ=65536;class GJ{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=qJ,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:i,col:r,offset:s}=this,a=r+n,l=s+n;return{code:e,startLine:i,endLine:i,startCol:a,endCol:a,startOffset:l,endOffset:l}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(HJ(n))return this.pos++,this._addGap(),zJ(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(ve.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let i=0;i<e.length;i++)if((this.html.charCodeAt(this.pos+i)|32)!==e.charCodeAt(i))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const i=this.html.charCodeAt(n);return i===X.CARRIAGE_RETURN?X.LINE_FEED:i}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let e=this.html.charCodeAt(this.pos);return e===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):e===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,FL(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===X.LINE_FEED||e===X.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){HL(e)?this._err(ve.controlCharacterInInputStream):zL(e)&&this._err(ve.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var bt;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(bt||(bt={}));function qL(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const $J=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),YJ=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function KJ(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=YJ.get(t))!==null&&e!==void 0?e:t}var Ci;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Ci||(Ci={}));const WJ=32;var ka;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(ka||(ka={}));function YT(t){return t>=Ci.ZERO&&t<=Ci.NINE}function XJ(t){return t>=Ci.UPPER_A&&t<=Ci.UPPER_F||t>=Ci.LOWER_A&&t<=Ci.LOWER_F}function QJ(t){return t>=Ci.UPPER_A&&t<=Ci.UPPER_Z||t>=Ci.LOWER_A&&t<=Ci.LOWER_Z||YT(t)}function JJ(t){return t===Ci.EQUALS||QJ(t)}var vi;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(vi||(vi={}));var Ro;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Ro||(Ro={}));class ZJ{constructor(e,n,i){this.decodeTree=e,this.emitCodePoint=n,this.errors=i,this.state=vi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ro.Strict}startEntity(e){this.decodeMode=e,this.state=vi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case vi.EntityStart:return e.charCodeAt(n)===Ci.NUM?(this.state=vi.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=vi.NamedEntity,this.stateNamedEntity(e,n));case vi.NumericStart:return this.stateNumericStart(e,n);case vi.NumericDecimal:return this.stateNumericDecimal(e,n);case vi.NumericHex:return this.stateNumericHex(e,n);case vi.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|WJ)===Ci.LOWER_X?(this.state=vi.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=vi.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,i,r){if(n!==i){const s=i-n;this.result=this.result*Math.pow(r,s)+Number.parseInt(e.substr(n,s),r),this.consumed+=s}}stateNumericHex(e,n){const i=n;for(;n<e.length;){const r=e.charCodeAt(n);if(YT(r)||XJ(r))n+=1;else return this.addToNumericResult(e,i,n,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,i,n,16),-1}stateNumericDecimal(e,n){const i=n;for(;n<e.length;){const r=e.charCodeAt(n);if(YT(r))n+=1;else return this.addToNumericResult(e,i,n,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,i,n,10),-1}emitNumericEntity(e,n){var i;if(this.consumed<=n)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Ci.SEMI)this.consumed+=1;else if(this.decodeMode===Ro.Strict)return 0;return this.emitCodePoint(KJ(this.result),this.consumed),this.errors&&(e!==Ci.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:i}=this;let r=i[this.treeIndex],s=(r&ka.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const a=e.charCodeAt(n);if(this.treeIndex=jJ(i,r,this.treeIndex+Math.max(1,s),a),this.treeIndex<0)return this.result===0||this.decodeMode===Ro.Attribute&&(s===0||JJ(a))?0:this.emitNotTerminatedNamedEntity();if(r=i[this.treeIndex],s=(r&ka.VALUE_LENGTH)>>14,s!==0){if(a===Ci.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ro.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:i}=this,r=(i[n]&ka.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,i){const{decodeTree:r}=this;return this.emitCodePoint(n===1?r[e]&~ka.VALUE_LENGTH:r[e+1],i),n===3&&this.emitCodePoint(r[e+2],i),i}end(){var e;switch(this.state){case vi.NamedEntity:return this.result!==0&&(this.decodeMode!==Ro.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case vi.NumericDecimal:return this.emitNumericEntity(0,2);case vi.NumericHex:return this.emitNumericEntity(0,3);case vi.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case vi.EntityStart:return 0}}}function jJ(t,e,n,i){const r=(e&ka.BRANCH_LENGTH)>>7,s=e&ka.JUMP_TABLE;if(r===0)return s!==0&&i===s?n:-1;if(s){const f=i-s;return f<0||f>=r?-1:t[n+f]-1}let a=n,l=a+r-1;for(;a<=l;){const f=a+l>>>1,d=t[f];if(d<i)a=f+1;else if(d>i)l=f-1;else return t[f+r]}return-1}var De;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(De||(De={}));var Vu;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Vu||(Vu={}));var rs;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(rs||(rs={}));var he;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(he||(he={}));var C;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(C||(C={}));const eZ=new Map([[he.A,C.A],[he.ADDRESS,C.ADDRESS],[he.ANNOTATION_XML,C.ANNOTATION_XML],[he.APPLET,C.APPLET],[he.AREA,C.AREA],[he.ARTICLE,C.ARTICLE],[he.ASIDE,C.ASIDE],[he.B,C.B],[he.BASE,C.BASE],[he.BASEFONT,C.BASEFONT],[he.BGSOUND,C.BGSOUND],[he.BIG,C.BIG],[he.BLOCKQUOTE,C.BLOCKQUOTE],[he.BODY,C.BODY],[he.BR,C.BR],[he.BUTTON,C.BUTTON],[he.CAPTION,C.CAPTION],[he.CENTER,C.CENTER],[he.CODE,C.CODE],[he.COL,C.COL],[he.COLGROUP,C.COLGROUP],[he.DD,C.DD],[he.DESC,C.DESC],[he.DETAILS,C.DETAILS],[he.DIALOG,C.DIALOG],[he.DIR,C.DIR],[he.DIV,C.DIV],[he.DL,C.DL],[he.DT,C.DT],[he.EM,C.EM],[he.EMBED,C.EMBED],[he.FIELDSET,C.FIELDSET],[he.FIGCAPTION,C.FIGCAPTION],[he.FIGURE,C.FIGURE],[he.FONT,C.FONT],[he.FOOTER,C.FOOTER],[he.FOREIGN_OBJECT,C.FOREIGN_OBJECT],[he.FORM,C.FORM],[he.FRAME,C.FRAME],[he.FRAMESET,C.FRAMESET],[he.H1,C.H1],[he.H2,C.H2],[he.H3,C.H3],[he.H4,C.H4],[he.H5,C.H5],[he.H6,C.H6],[he.HEAD,C.HEAD],[he.HEADER,C.HEADER],[he.HGROUP,C.HGROUP],[he.HR,C.HR],[he.HTML,C.HTML],[he.I,C.I],[he.IMG,C.IMG],[he.IMAGE,C.IMAGE],[he.INPUT,C.INPUT],[he.IFRAME,C.IFRAME],[he.KEYGEN,C.KEYGEN],[he.LABEL,C.LABEL],[he.LI,C.LI],[he.LINK,C.LINK],[he.LISTING,C.LISTING],[he.MAIN,C.MAIN],[he.MALIGNMARK,C.MALIGNMARK],[he.MARQUEE,C.MARQUEE],[he.MATH,C.MATH],[he.MENU,C.MENU],[he.META,C.META],[he.MGLYPH,C.MGLYPH],[he.MI,C.MI],[he.MO,C.MO],[he.MN,C.MN],[he.MS,C.MS],[he.MTEXT,C.MTEXT],[he.NAV,C.NAV],[he.NOBR,C.NOBR],[he.NOFRAMES,C.NOFRAMES],[he.NOEMBED,C.NOEMBED],[he.NOSCRIPT,C.NOSCRIPT],[he.OBJECT,C.OBJECT],[he.OL,C.OL],[he.OPTGROUP,C.OPTGROUP],[he.OPTION,C.OPTION],[he.P,C.P],[he.PARAM,C.PARAM],[he.PLAINTEXT,C.PLAINTEXT],[he.PRE,C.PRE],[he.RB,C.RB],[he.RP,C.RP],[he.RT,C.RT],[he.RTC,C.RTC],[he.RUBY,C.RUBY],[he.S,C.S],[he.SCRIPT,C.SCRIPT],[he.SEARCH,C.SEARCH],[he.SECTION,C.SECTION],[he.SELECT,C.SELECT],[he.SOURCE,C.SOURCE],[he.SMALL,C.SMALL],[he.SPAN,C.SPAN],[he.STRIKE,C.STRIKE],[he.STRONG,C.STRONG],[he.STYLE,C.STYLE],[he.SUB,C.SUB],[he.SUMMARY,C.SUMMARY],[he.SUP,C.SUP],[he.TABLE,C.TABLE],[he.TBODY,C.TBODY],[he.TEMPLATE,C.TEMPLATE],[he.TEXTAREA,C.TEXTAREA],[he.TFOOT,C.TFOOT],[he.TD,C.TD],[he.TH,C.TH],[he.THEAD,C.THEAD],[he.TITLE,C.TITLE],[he.TR,C.TR],[he.TRACK,C.TRACK],[he.TT,C.TT],[he.U,C.U],[he.UL,C.UL],[he.SVG,C.SVG],[he.VAR,C.VAR],[he.WBR,C.WBR],[he.XMP,C.XMP]]);function of(t){var e;return(e=eZ.get(t))!==null&&e!==void 0?e:C.UNKNOWN}const Me=C,tZ={[De.HTML]:new Set([Me.ADDRESS,Me.APPLET,Me.AREA,Me.ARTICLE,Me.ASIDE,Me.BASE,Me.BASEFONT,Me.BGSOUND,Me.BLOCKQUOTE,Me.BODY,Me.BR,Me.BUTTON,Me.CAPTION,Me.CENTER,Me.COL,Me.COLGROUP,Me.DD,Me.DETAILS,Me.DIR,Me.DIV,Me.DL,Me.DT,Me.EMBED,Me.FIELDSET,Me.FIGCAPTION,Me.FIGURE,Me.FOOTER,Me.FORM,Me.FRAME,Me.FRAMESET,Me.H1,Me.H2,Me.H3,Me.H4,Me.H5,Me.H6,Me.HEAD,Me.HEADER,Me.HGROUP,Me.HR,Me.HTML,Me.IFRAME,Me.IMG,Me.INPUT,Me.LI,Me.LINK,Me.LISTING,Me.MAIN,Me.MARQUEE,Me.MENU,Me.META,Me.NAV,Me.NOEMBED,Me.NOFRAMES,Me.NOSCRIPT,Me.OBJECT,Me.OL,Me.P,Me.PARAM,Me.PLAINTEXT,Me.PRE,Me.SCRIPT,Me.SECTION,Me.SELECT,Me.SOURCE,Me.STYLE,Me.SUMMARY,Me.TABLE,Me.TBODY,Me.TD,Me.TEMPLATE,Me.TEXTAREA,Me.TFOOT,Me.TH,Me.THEAD,Me.TITLE,Me.TR,Me.TRACK,Me.UL,Me.WBR,Me.XMP]),[De.MATHML]:new Set([Me.MI,Me.MO,Me.MN,Me.MS,Me.MTEXT,Me.ANNOTATION_XML]),[De.SVG]:new Set([Me.TITLE,Me.FOREIGN_OBJECT,Me.DESC]),[De.XLINK]:new Set,[De.XML]:new Set,[De.XMLNS]:new Set},KT=new Set([Me.H1,Me.H2,Me.H3,Me.H4,Me.H5,Me.H6]);he.STYLE,he.SCRIPT,he.XMP,he.IFRAME,he.NOEMBED,he.NOFRAMES,he.PLAINTEXT;var Z;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(Z||(Z={}));const Kn={DATA:Z.DATA,RCDATA:Z.RCDATA,RAWTEXT:Z.RAWTEXT,SCRIPT_DATA:Z.SCRIPT_DATA,PLAINTEXT:Z.PLAINTEXT,CDATA_SECTION:Z.CDATA_SECTION};function nZ(t){return t>=X.DIGIT_0&&t<=X.DIGIT_9}function Nd(t){return t>=X.LATIN_CAPITAL_A&&t<=X.LATIN_CAPITAL_Z}function iZ(t){return t>=X.LATIN_SMALL_A&&t<=X.LATIN_SMALL_Z}function Ta(t){return iZ(t)||Nd(t)}function bR(t){return Ta(t)||nZ(t)}function wm(t){return t+32}function GL(t){return t===X.SPACE||t===X.LINE_FEED||t===X.TABULATION||t===X.FORM_FEED}function IR(t){return GL(t)||t===X.SOLIDUS||t===X.GREATER_THAN_SIGN}function rZ(t){return t===X.NULL?ve.nullCharacterReference:t>1114111?ve.characterReferenceOutsideUnicodeRange:FL(t)?ve.surrogateCharacterReference:zL(t)?ve.noncharacterCharacterReference:HL(t)||t===X.CARRIAGE_RETURN?ve.controlCharacterReference:null}class sZ{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Z.DATA,this.returnState=Z.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new GJ(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new ZJ($J,(i,r)=>{this.preprocessor.pos=this.entityStartPos+r-1,this._flushCodePointConsumedAsCharacterReference(i)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ve.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:i=>{this._err(ve.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+i)},validateNumericCharacterReference:i=>{const r=rZ(i);r&&this._err(r,1)}}:void 0)}_err(e,n=0){var i,r;(r=(i=this.handler).onParseError)===null||r===void 0||r.call(i,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,i){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||i?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:bt.START_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:bt.END_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:bt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:bt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const i=this.currentToken;if(qL(i,this.currentAttr.name)===null){if(i.attrs.push(this.currentAttr),i.location&&this.currentLocation){const r=(e=(n=i.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);r[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ve.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=of(e.tagName),e.type===bt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(ve.endTagWithAttributes),e.selfClosing&&this._err(ve.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case bt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case bt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case bt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:bt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=GL(e)?bt.WHITESPACE_CHARACTER:e===X.NULL?bt.NULL_CHARACTER:bt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(bt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=Z.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ro.Attribute:Ro.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Z.DATA:{this._stateData(e);break}case Z.RCDATA:{this._stateRcdata(e);break}case Z.RAWTEXT:{this._stateRawtext(e);break}case Z.SCRIPT_DATA:{this._stateScriptData(e);break}case Z.PLAINTEXT:{this._statePlaintext(e);break}case Z.TAG_OPEN:{this._stateTagOpen(e);break}case Z.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case Z.TAG_NAME:{this._stateTagName(e);break}case Z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case Z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case Z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case Z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case Z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case Z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case Z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case Z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case Z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case Z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case Z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case Z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case Z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case Z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case Z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case Z.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case Z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case Z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case Z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case Z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case Z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case Z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case Z.BOGUS_COMMENT:{this._stateBogusComment(e);break}case Z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case Z.COMMENT_START:{this._stateCommentStart(e);break}case Z.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case Z.COMMENT:{this._stateComment(e);break}case Z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case Z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case Z.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case Z.COMMENT_END:{this._stateCommentEnd(e);break}case Z.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case Z.DOCTYPE:{this._stateDoctype(e);break}case Z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case Z.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case Z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case Z.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case Z.CDATA_SECTION:{this._stateCdataSection(e);break}case Z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case Z.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case Z.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case Z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case X.LESS_THAN_SIGN:{this.state=Z.TAG_OPEN;break}case X.AMPERSAND:{this._startCharacterReference();break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this._emitCodePoint(e);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case X.AMPERSAND:{this._startCharacterReference();break}case X.LESS_THAN_SIGN:{this.state=Z.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(Dn);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case X.LESS_THAN_SIGN:{this.state=Z.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(Dn);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(Dn);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case X.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(Dn);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Ta(e))this._createStartTagToken(),this.state=Z.TAG_NAME,this._stateTagName(e);else switch(e){case X.EXCLAMATION_MARK:{this.state=Z.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=Z.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(ve.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(e);break}case X.EOF:{this._err(ve.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ve.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Z.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Ta(e))this._createEndTagToken(),this.state=Z.TAG_NAME,this._stateTagName(e);else switch(e){case X.GREATER_THAN_SIGN:{this._err(ve.missingEndTagName),this.state=Z.DATA;break}case X.EOF:{this._err(ve.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ve.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.tagName+=Dn;break}case X.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Nd(e)?wm(e):e)}}_stateRcdataLessThanSign(e){e===X.SOLIDUS?this.state=Z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Ta(e)?(this.state=Z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Z.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Z.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===X.SOLIDUS?this.state=Z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Ta(e)?(this.state=Z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case X.SOLIDUS:{this.state=Z.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=Z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Z.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Ta(e)?(this.state=Z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(Dn);break}case X.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Dn);break}case X.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Dn);break}case X.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===X.SOLIDUS?this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ta(e)?(this._emitChars("<"),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Ta(e)?(this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(pr.SCRIPT,!1)&&IR(this.preprocessor.peek(pr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<pr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this._emitChars(Dn);break}case X.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Dn);break}case X.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Dn);break}case X.EOF:{this._err(ve.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===X.SOLIDUS?(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(pr.SCRIPT,!1)&&IR(this.preprocessor.peek(pr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<pr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case X.EQUALS_SIGN:{this._err(ve.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(ve.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.name+=Dn;break}default:this.currentAttr.name+=String.fromCodePoint(Nd(e)?wm(e):e)}}_stateAfterAttributeName(e){switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ve.missingAttributeValue),this.state=Z.DATA,this.emitCurrentTagToken();break}default:this.state=Z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case X.QUOTATION_MARK:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this._startCharacterReference();break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.value+=Dn;break}case X.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case X.APOSTROPHE:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this._startCharacterReference();break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.value+=Dn;break}case X.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this._startCharacterReference();break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ve.unexpectedNullCharacter),this.currentAttr.value+=Dn;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(ve.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case X.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this._err(ve.missingWhitespaceBetweenAttributes),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ve.eofInTag),this._emitEOFToken();break}default:this._err(ve.unexpectedSolidusInTag),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.data+=Dn;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(pr.DASH_DASH,!0)?(this._createCommentToken(pr.DASH_DASH.length+1),this.state=Z.COMMENT_START):this._consumeSequenceIfMatch(pr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(pr.DOCTYPE.length+1),this.state=Z.DOCTYPE):this._consumeSequenceIfMatch(pr.CDATA_START,!0)?this.inForeignNode?this.state=Z.CDATA_SECTION:(this._err(ve.cdataInHtmlContent),this._createCommentToken(pr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ve.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ve.abruptClosingOfEmptyComment),this.state=Z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(ve.abruptClosingOfEmptyComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=Z.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.data+=Dn;break}case X.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case X.EXCLAMATION_MARK:{n.data+="!",this.state=Z.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Z.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Z.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==X.GREATER_THAN_SIGN&&e!==X.EOF&&this._err(ve.nestedComment),this.state=Z.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=Z.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Z.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case X.HYPHEN_MINUS:{n.data+="--!",this.state=Z.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ve.incorrectlyClosedComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ve.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Z.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case X.EOF:{this._err(ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingWhitespaceBeforeDoctypeName),this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Nd(e))this._createDoctypeToken(String.fromCharCode(wm(e))),this.state=Z.DOCTYPE_NAME;else switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(ve.unexpectedNullCharacter),this._createDoctypeToken(Dn),this.state=Z.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(ve.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(ve.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Z.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.name+=Dn;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Nd(e)?wm(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(pr.PUBLIC,!1)?this.state=Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(pr.SYSTEM,!1)?this.state=Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ve.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ve.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ve.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.publicId+=Dn;break}case X.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.publicId+=Dn;break}case X.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ve.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ve.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ve.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.systemId+=Dn;break}case X.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ve.unexpectedNullCharacter),n.systemId+=Dn;break}case X.GREATER_THAN_SIGN:{this._err(ve.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(ve.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ve.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.NULL:{this._err(ve.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case X.RIGHT_SQUARE_BRACKET:{this.state=Z.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(ve.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===X.RIGHT_SQUARE_BRACKET?this.state=Z.CDATA_SECTION_END:(this._emitChars("]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case X.GREATER_THAN_SIGN:{this.state=Z.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&bR(this.preprocessor.peek(1))?Z.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){bR(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===X.SEMICOLON&&this._err(ve.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const $L=new Set([C.DD,C.DT,C.LI,C.OPTGROUP,C.OPTION,C.P,C.RB,C.RP,C.RT,C.RTC]),wR=new Set([...$L,C.CAPTION,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]),Dg=new Set([C.APPLET,C.CAPTION,C.HTML,C.MARQUEE,C.OBJECT,C.TABLE,C.TD,C.TEMPLATE,C.TH]),oZ=new Set([...Dg,C.OL,C.UL]),aZ=new Set([...Dg,C.BUTTON]),xR=new Set([C.ANNOTATION_XML,C.MI,C.MN,C.MO,C.MS,C.MTEXT]),RR=new Set([C.DESC,C.FOREIGN_OBJECT,C.TITLE]),uZ=new Set([C.TR,C.TEMPLATE,C.HTML]),lZ=new Set([C.TBODY,C.TFOOT,C.THEAD,C.TEMPLATE,C.HTML]),cZ=new Set([C.TABLE,C.TEMPLATE,C.HTML]),fZ=new Set([C.TD,C.TH]);class dZ{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,i){this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=C.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===C.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===De.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const i=this._indexOf(e);this.items[i]=n,i===this.stackTop&&(this.current=n)}insertAfter(e,n,i){const r=this._indexOf(e)+1;this.items.splice(r,0,n),this.tagIDs.splice(r,0,i),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==De.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const i=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(i,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(KT,De.HTML)}popUntilTableCellPopped(){this.popUntilPopped(fZ,De.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let i=this.stackTop;i>=0;i--)if(e.has(this.tagIDs[i])&&this.treeAdapter.getNamespaceURI(this.items[i])===n)return i;return-1}clearBackTo(e,n){const i=this._indexOfTagNames(e,n);this.shortenToLength(i+1)}clearBackToTableContext(){this.clearBackTo(cZ,De.HTML)}clearBackToTableBodyContext(){this.clearBackTo(lZ,De.HTML)}clearBackToTableRowContext(){this.clearBackTo(uZ,De.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===C.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===C.HTML}hasInDynamicScope(e,n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i];switch(this.treeAdapter.getNamespaceURI(this.items[i])){case De.HTML:{if(r===e)return!0;if(n.has(r))return!1;break}case De.SVG:{if(RR.has(r))return!1;break}case De.MATHML:{if(xR.has(r))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,Dg)}hasInListItemScope(e){return this.hasInDynamicScope(e,oZ)}hasInButtonScope(e){return this.hasInDynamicScope(e,aZ)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case De.HTML:{if(KT.has(n))return!0;if(Dg.has(n))return!1;break}case De.SVG:{if(RR.has(n))return!1;break}case De.MATHML:{if(xR.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===De.HTML)switch(this.tagIDs[n]){case e:return!0;case C.TABLE:case C.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===De.HTML)switch(this.tagIDs[e]){case C.TBODY:case C.THEAD:case C.TFOOT:return!0;case C.TABLE:case C.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===De.HTML)switch(this.tagIDs[n]){case e:return!0;case C.OPTION:case C.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&$L.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&wR.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&wR.has(this.currentTagId);)this.pop()}}const ME=3;var $s;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})($s||($s={}));const NR={type:$s.Marker};class hZ{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const i=[],r=n.length,s=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let l=0;l<this.entries.length;l++){const f=this.entries[l];if(f.type===$s.Marker)break;const{element:d}=f;if(this.treeAdapter.getTagName(d)===s&&this.treeAdapter.getNamespaceURI(d)===a){const p=this.treeAdapter.getAttrList(d);p.length===r&&i.push({idx:l,attrs:p})}}return i}_ensureNoahArkCondition(e){if(this.entries.length<ME)return;const n=this.treeAdapter.getAttrList(e),i=this._getNoahArkConditionCandidates(e,n);if(i.length<ME)return;const r=new Map(n.map(a=>[a.name,a.value]));let s=0;for(let a=0;a<i.length;a++){const l=i[a];l.attrs.every(f=>r.get(f.name)===f.value)&&(s+=1,s>=ME&&this.entries.splice(l.idx,1))}}insertMarker(){this.entries.unshift(NR)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:$s.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const i=this.entries.indexOf(this.bookmark);this.entries.splice(i,0,{type:$s.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(NR);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(i=>i.type===$s.Marker||this.treeAdapter.getTagName(i.element)===e);return n&&n.type===$s.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===$s.Element&&n.element===e)}}const va={createDocument(){return{nodeName:"#document",mode:rs.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const i=t.childNodes.indexOf(n);t.childNodes.splice(i,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,i){const r=t.childNodes.find(s=>s.nodeName==="#documentType");if(r)r.name=e,r.publicId=n,r.systemId=i;else{const s={nodeName:"#documentType",name:e,publicId:n,systemId:i,parentNode:null};va.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(va.isTextNode(n)){n.value+=e;return}}va.appendChild(t,va.createTextNode(e))},insertTextBefore(t,e,n){const i=t.childNodes[t.childNodes.indexOf(n)-1];i&&va.isTextNode(i)?i.value+=e:va.insertBefore(t,va.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(i=>i.name));for(let i=0;i<e.length;i++)n.has(e[i].name)||t.attrs.push(e[i])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},YL="html",pZ="about:legacy-compat",mZ="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",KL=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],gZ=[...KL,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],yZ=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),WL=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],_Z=[...WL,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function DR(t,e){return e.some(n=>t.startsWith(n))}function EZ(t){return t.name===YL&&t.publicId===null&&(t.systemId===null||t.systemId===pZ)}function TZ(t){if(t.name!==YL)return rs.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===mZ)return rs.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),yZ.has(n))return rs.QUIRKS;let i=e===null?gZ:KL;if(DR(n,i))return rs.QUIRKS;if(i=e===null?WL:_Z,DR(n,i))return rs.LIMITED_QUIRKS}return rs.NO_QUIRKS}const MR={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},vZ="definitionurl",SZ="definitionURL",CZ=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),AZ=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:De.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:De.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:De.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:De.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:De.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:De.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:De.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:De.XML}],["xml:space",{prefix:"xml",name:"space",namespace:De.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:De.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:De.XMLNS}]]),bZ=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),IZ=new Set([C.B,C.BIG,C.BLOCKQUOTE,C.BODY,C.BR,C.CENTER,C.CODE,C.DD,C.DIV,C.DL,C.DT,C.EM,C.EMBED,C.H1,C.H2,C.H3,C.H4,C.H5,C.H6,C.HEAD,C.HR,C.I,C.IMG,C.LI,C.LISTING,C.MENU,C.META,C.NOBR,C.OL,C.P,C.PRE,C.RUBY,C.S,C.SMALL,C.SPAN,C.STRONG,C.STRIKE,C.SUB,C.SUP,C.TABLE,C.TT,C.U,C.UL,C.VAR]);function wZ(t){const e=t.tagID;return e===C.FONT&&t.attrs.some(({name:i})=>i===Vu.COLOR||i===Vu.SIZE||i===Vu.FACE)||IZ.has(e)}function XL(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===vZ){t.attrs[e].name=SZ;break}}function QL(t){for(let e=0;e<t.attrs.length;e++){const n=CZ.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function tS(t){for(let e=0;e<t.attrs.length;e++){const n=AZ.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function xZ(t){const e=bZ.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=of(t.tagName))}function RZ(t,e){return e===De.MATHML&&(t===C.MI||t===C.MO||t===C.MN||t===C.MS||t===C.MTEXT)}function NZ(t,e,n){if(e===De.MATHML&&t===C.ANNOTATION_XML){for(let i=0;i<n.length;i++)if(n[i].name===Vu.ENCODING){const r=n[i].value.toLowerCase();return r===MR.TEXT_HTML||r===MR.APPLICATION_XML}}return e===De.SVG&&(t===C.FOREIGN_OBJECT||t===C.DESC||t===C.TITLE)}function DZ(t,e,n,i){return(!i||i===De.HTML)&&NZ(t,e,n)||(!i||i===De.MATHML)&&RZ(t,e)}const MZ="hidden",kZ=8,PZ=3;var ee;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ee||(ee={}));const LZ={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},JL=new Set([C.TABLE,C.TBODY,C.TFOOT,C.THEAD,C.TR]),kR={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:va,onParseError:null};class PR{constructor(e,n,i=null,r=null){this.fragmentContext=i,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=ee.INITIAL,this.originalInsertionMode=ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...kR,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new sZ(this.options,this),this.activeFormattingElements=new hZ(this.treeAdapter),this.fragmentContextID=i?of(this.treeAdapter.getTagName(i)):C.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new dZ(this.document,this.treeAdapter,this)}static parse(e,n){const i=new this(n);return i.tokenizer.write(e,!0),i.document}static getFragmentParser(e,n){const i={...kR,...n};e??(e=i.treeAdapter.createElement(he.TEMPLATE,De.HTML,[]));const r=i.treeAdapter.createElement("documentmock",De.HTML,[]),s=new this(i,r,e);return s.fragmentContextID===C.TEMPLATE&&s.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,i){var r;if(!this.onParseError)return;const s=(r=e.location)!==null&&r!==void 0?r:LZ,a={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:i?s.startLine:s.endLine,endCol:i?s.startCol:s.endCol,endOffset:i?s.startOffset:s.endOffset};this.onParseError(a)}onItemPush(e,n,i){var r,s;(s=(r=this.treeAdapter).onItemPush)===null||s===void 0||s.call(r,e),i&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var i,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(r=(i=this.treeAdapter).onItemPop)===null||r===void 0||r.call(i,e,this.openElements.current),n){let s,a;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,a=this.fragmentContextID):{current:s,currentTagId:a}=this.openElements,this._setContextModes(s,a)}}_setContextModes(e,n){const i=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===De.HTML;this.currentNotInHTML=!i,this.tokenizer.inForeignNode=!i&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,De.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ee.TEXT}switchToPlaintextParsing(){this.insertionMode=ee.TEXT,this.originalInsertionMode=ee.IN_BODY,this.tokenizer.state=Kn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===he.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==De.HTML))switch(this.fragmentContextID){case C.TITLE:case C.TEXTAREA:{this.tokenizer.state=Kn.RCDATA;break}case C.STYLE:case C.XMP:case C.IFRAME:case C.NOEMBED:case C.NOFRAMES:case C.NOSCRIPT:{this.tokenizer.state=Kn.RAWTEXT;break}case C.SCRIPT:{this.tokenizer.state=Kn.SCRIPT_DATA;break}case C.PLAINTEXT:{this.tokenizer.state=Kn.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",i=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,i,r),e.location){const a=this.treeAdapter.getChildNodes(this.document).find(l=>this.treeAdapter.isDocumentTypeNode(l));a&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const i=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,i)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const i=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(i??this.document,e)}}_appendElement(e,n){const i=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(i,e.location)}_insertElement(e,n){const i=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(i,e.location),this.openElements.push(i,e.tagID)}_insertFakeElement(e,n){const i=this.treeAdapter.createElement(e,De.HTML,[]);this._attachElementToTree(i,null),this.openElements.push(i,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,De.HTML,e.attrs),i=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,i),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(he.HTML,De.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,C.HTML)}_appendCommentNode(e,n){const i=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,i),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,e.location)}_insertCharacters(e){let n,i;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:i}=this._findFosterParentingLocation(),i?this.treeAdapter.insertTextBefore(n,e.chars,i):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(n),s=i?r.lastIndexOf(i):r.length,a=r[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:f,endCol:d,endOffset:p}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:f,endCol:d,endOffset:p})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,n){for(let i=this.treeAdapter.getFirstChild(e);i;i=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(i),this.treeAdapter.appendChild(n,i)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const i=n.location,r=this.treeAdapter.getTagName(e),s=n.type===bt.END_TAG&&r===n.tagName?{endTag:{...i},endLine:i.endLine,endCol:i.endCol,endOffset:i.endOffset}:{endLine:i.startLine,endCol:i.startCol,endOffset:i.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,i;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,i=this.fragmentContextID):{current:n,currentTagId:i}=this.openElements,e.tagID===C.SVG&&this.treeAdapter.getTagName(n)===he.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===De.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===C.MGLYPH||e.tagID===C.MALIGNMARK)&&i!==void 0&&!this._isIntegrationPoint(i,n,De.HTML)}_processToken(e){switch(e.type){case bt.CHARACTER:{this.onCharacter(e);break}case bt.NULL_CHARACTER:{this.onNullCharacter(e);break}case bt.COMMENT:{this.onComment(e);break}case bt.DOCTYPE:{this.onDoctype(e);break}case bt.START_TAG:{this._processStartTag(e);break}case bt.END_TAG:{this.onEndTag(e);break}case bt.EOF:{this.onEof(e);break}case bt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,i){const r=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return DZ(e,r,s,i)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(r=>r.type===$s.Marker||this.openElements.contains(r.element)),i=n===-1?e-1:n-1;for(let r=i;r>=0;r--){const s=this.activeFormattingElements.entries[r];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(C.P),this.openElements.popUntilTagNamePopped(C.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case C.TR:{this.insertionMode=ee.IN_ROW;return}case C.TBODY:case C.THEAD:case C.TFOOT:{this.insertionMode=ee.IN_TABLE_BODY;return}case C.CAPTION:{this.insertionMode=ee.IN_CAPTION;return}case C.COLGROUP:{this.insertionMode=ee.IN_COLUMN_GROUP;return}case C.TABLE:{this.insertionMode=ee.IN_TABLE;return}case C.BODY:{this.insertionMode=ee.IN_BODY;return}case C.FRAMESET:{this.insertionMode=ee.IN_FRAMESET;return}case C.SELECT:{this._resetInsertionModeForSelect(e);return}case C.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case C.HTML:{this.insertionMode=this.headElement?ee.AFTER_HEAD:ee.BEFORE_HEAD;return}case C.TD:case C.TH:{if(e>0){this.insertionMode=ee.IN_CELL;return}break}case C.HEAD:{if(e>0){this.insertionMode=ee.IN_HEAD;return}break}}this.insertionMode=ee.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const i=this.openElements.tagIDs[n];if(i===C.TEMPLATE)break;if(i===C.TABLE){this.insertionMode=ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=ee.IN_SELECT}_isElementCausesFosterParenting(e){return JL.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case C.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===De.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case C.TABLE:{const i=this.treeAdapter.getParentNode(n);return i?{parent:i,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const i=this.treeAdapter.getNamespaceURI(e);return tZ[i].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){fee(this,e);return}switch(this.insertionMode){case ee.INITIAL:{_d(this,e);break}case ee.BEFORE_HTML:{qd(this,e);break}case ee.BEFORE_HEAD:{Gd(this,e);break}case ee.IN_HEAD:{$d(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{Yd(this,e);break}case ee.AFTER_HEAD:{Kd(this,e);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:{jL(this,e);break}case ee.TEXT:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{kE(this,e);break}case ee.IN_TABLE_TEXT:{sO(this,e);break}case ee.IN_COLUMN_GROUP:{Mg(this,e);break}case ee.AFTER_BODY:{kg(this,e);break}case ee.AFTER_AFTER_BODY:{Ym(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){cee(this,e);return}switch(this.insertionMode){case ee.INITIAL:{_d(this,e);break}case ee.BEFORE_HTML:{qd(this,e);break}case ee.BEFORE_HEAD:{Gd(this,e);break}case ee.IN_HEAD:{$d(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{Yd(this,e);break}case ee.AFTER_HEAD:{Kd(this,e);break}case ee.TEXT:{this._insertCharacters(e);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{kE(this,e);break}case ee.IN_COLUMN_GROUP:{Mg(this,e);break}case ee.AFTER_BODY:{kg(this,e);break}case ee.AFTER_AFTER_BODY:{Ym(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){WT(this,e);return}switch(this.insertionMode){case ee.INITIAL:case ee.BEFORE_HTML:case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_TEMPLATE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{WT(this,e);break}case ee.IN_TABLE_TEXT:{Ed(this,e);break}case ee.AFTER_BODY:{zZ(this,e);break}case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{qZ(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ee.INITIAL:{GZ(this,e);break}case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:{this._err(e,ve.misplacedDoctype);break}case ee.IN_TABLE_TEXT:{Ed(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,ve.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?dee(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ee.INITIAL:{_d(this,e);break}case ee.BEFORE_HTML:{$Z(this,e);break}case ee.BEFORE_HEAD:{KZ(this,e);break}case ee.IN_HEAD:{Is(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{QZ(this,e);break}case ee.AFTER_HEAD:{ZZ(this,e);break}case ee.IN_BODY:{Wi(this,e);break}case ee.IN_TABLE:{Bc(this,e);break}case ee.IN_TABLE_TEXT:{Ed(this,e);break}case ee.IN_CAPTION:{Wj(this,e);break}case ee.IN_COLUMN_GROUP:{rS(this,e);break}case ee.IN_TABLE_BODY:{I0(this,e);break}case ee.IN_ROW:{w0(this,e);break}case ee.IN_CELL:{Jj(this,e);break}case ee.IN_SELECT:{uO(this,e);break}case ee.IN_SELECT_IN_TABLE:{jj(this,e);break}case ee.IN_TEMPLATE:{tee(this,e);break}case ee.AFTER_BODY:{iee(this,e);break}case ee.IN_FRAMESET:{ree(this,e);break}case ee.AFTER_FRAMESET:{oee(this,e);break}case ee.AFTER_AFTER_BODY:{uee(this,e);break}case ee.AFTER_AFTER_FRAMESET:{lee(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?hee(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ee.INITIAL:{_d(this,e);break}case ee.BEFORE_HTML:{YZ(this,e);break}case ee.BEFORE_HEAD:{WZ(this,e);break}case ee.IN_HEAD:{XZ(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{JZ(this,e);break}case ee.AFTER_HEAD:{jZ(this,e);break}case ee.IN_BODY:{b0(this,e);break}case ee.TEXT:{Bj(this,e);break}case ee.IN_TABLE:{gh(this,e);break}case ee.IN_TABLE_TEXT:{Ed(this,e);break}case ee.IN_CAPTION:{Xj(this,e);break}case ee.IN_COLUMN_GROUP:{Qj(this,e);break}case ee.IN_TABLE_BODY:{XT(this,e);break}case ee.IN_ROW:{aO(this,e);break}case ee.IN_CELL:{Zj(this,e);break}case ee.IN_SELECT:{lO(this,e);break}case ee.IN_SELECT_IN_TABLE:{eee(this,e);break}case ee.IN_TEMPLATE:{nee(this,e);break}case ee.AFTER_BODY:{fO(this,e);break}case ee.IN_FRAMESET:{see(this,e);break}case ee.AFTER_FRAMESET:{aee(this,e);break}case ee.AFTER_AFTER_BODY:{Ym(this,e);break}}}onEof(e){switch(this.insertionMode){case ee.INITIAL:{_d(this,e);break}case ee.BEFORE_HTML:{qd(this,e);break}case ee.BEFORE_HEAD:{Gd(this,e);break}case ee.IN_HEAD:{$d(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{Yd(this,e);break}case ee.AFTER_HEAD:{Kd(this,e);break}case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{iO(this,e);break}case ee.TEXT:{Vj(this,e);break}case ee.IN_TABLE_TEXT:{Ed(this,e);break}case ee.IN_TEMPLATE:{cO(this,e);break}case ee.AFTER_BODY:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{iS(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===X.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.TEXT:case ee.IN_COLUMN_GROUP:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{this._insertCharacters(e);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:case ee.AFTER_BODY:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{ZL(this,e);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{kE(this,e);break}case ee.IN_TABLE_TEXT:{rO(this,e);break}}}}function OZ(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):nO(t,e),n}function UZ(t,e){let n=null,i=t.openElements.stackTop;for(;i>=0;i--){const r=t.openElements.items[i];if(r===e.element)break;t._isSpecialElement(r,t.openElements.tagIDs[i])&&(n=r)}return n||(t.openElements.shortenToLength(Math.max(i,0)),t.activeFormattingElements.removeEntry(e)),n}function BZ(t,e,n){let i=e,r=t.openElements.getCommonAncestor(e);for(let s=0,a=r;a!==n;s++,a=r){r=t.openElements.getCommonAncestor(a);const l=t.activeFormattingElements.getElementEntry(a),f=l&&s>=PZ;!l||f?(f&&t.activeFormattingElements.removeEntry(l),t.openElements.remove(a)):(a=VZ(t,l),i===e&&(t.activeFormattingElements.bookmark=l),t.treeAdapter.detachNode(i),t.treeAdapter.appendChild(a,i),i=a)}return i}function VZ(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),i=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,i),e.element=i,i}function FZ(t,e,n){const i=t.treeAdapter.getTagName(e),r=of(i);if(t._isElementCausesFosterParenting(r))t._fosterParentElement(n);else{const s=t.treeAdapter.getNamespaceURI(e);r===C.TEMPLATE&&s===De.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function HZ(t,e,n){const i=t.treeAdapter.getNamespaceURI(n.element),{token:r}=n,s=t.treeAdapter.createElement(r.tagName,i,r.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,r),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,s,r.tagID)}function nS(t,e){for(let n=0;n<kZ;n++){const i=OZ(t,e);if(!i)break;const r=UZ(t,i);if(!r)break;t.activeFormattingElements.bookmark=i;const s=BZ(t,r,i.element),a=t.openElements.getCommonAncestor(i.element);t.treeAdapter.detachNode(s),a&&FZ(t,a,s),HZ(t,r,i)}}function WT(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function zZ(t,e){t._appendCommentNode(e,t.openElements.items[0])}function qZ(t,e){t._appendCommentNode(e,t.document)}function iS(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let i=t.openElements.stackTop;i>=n;i--)t._setEndLocation(t.openElements.items[i],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const i=t.openElements.items[0],r=t.treeAdapter.getNodeSourceCodeLocation(i);if(r&&!r.endTag&&(t._setEndLocation(i,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],a=t.treeAdapter.getNodeSourceCodeLocation(s);a&&!a.endTag&&t._setEndLocation(s,e)}}}}function GZ(t,e){t._setDocumentType(e);const n=e.forceQuirks?rs.QUIRKS:TZ(e);EZ(e)||t._err(e,ve.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=ee.BEFORE_HTML}function _d(t,e){t._err(e,ve.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,rs.QUIRKS),t.insertionMode=ee.BEFORE_HTML,t._processToken(e)}function $Z(t,e){e.tagID===C.HTML?(t._insertElement(e,De.HTML),t.insertionMode=ee.BEFORE_HEAD):qd(t,e)}function YZ(t,e){const n=e.tagID;(n===C.HTML||n===C.HEAD||n===C.BODY||n===C.BR)&&qd(t,e)}function qd(t,e){t._insertFakeRootElement(),t.insertionMode=ee.BEFORE_HEAD,t._processToken(e)}function KZ(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.HEAD:{t._insertElement(e,De.HTML),t.headElement=t.openElements.current,t.insertionMode=ee.IN_HEAD;break}default:Gd(t,e)}}function WZ(t,e){const n=e.tagID;n===C.HEAD||n===C.BODY||n===C.HTML||n===C.BR?Gd(t,e):t._err(e,ve.endTagWithoutMatchingOpenElement)}function Gd(t,e){t._insertFakeElement(he.HEAD,C.HEAD),t.headElement=t.openElements.current,t.insertionMode=ee.IN_HEAD,t._processToken(e)}function Is(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:{t._appendElement(e,De.HTML),e.ackSelfClosing=!0;break}case C.TITLE:{t._switchToTextParsing(e,Kn.RCDATA);break}case C.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Kn.RAWTEXT):(t._insertElement(e,De.HTML),t.insertionMode=ee.IN_HEAD_NO_SCRIPT);break}case C.NOFRAMES:case C.STYLE:{t._switchToTextParsing(e,Kn.RAWTEXT);break}case C.SCRIPT:{t._switchToTextParsing(e,Kn.SCRIPT_DATA);break}case C.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=ee.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE);break}case C.HEAD:{t._err(e,ve.misplacedStartTagForHeadElement);break}default:$d(t,e)}}function XZ(t,e){switch(e.tagID){case C.HEAD:{t.openElements.pop(),t.insertionMode=ee.AFTER_HEAD;break}case C.BODY:case C.BR:case C.HTML:{$d(t,e);break}case C.TEMPLATE:{sl(t,e);break}default:t._err(e,ve.endTagWithoutMatchingOpenElement)}}function sl(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==C.TEMPLATE&&t._err(e,ve.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(C.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,ve.endTagWithoutMatchingOpenElement)}function $d(t,e){t.openElements.pop(),t.insertionMode=ee.AFTER_HEAD,t._processToken(e)}function QZ(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.BASEFONT:case C.BGSOUND:case C.HEAD:case C.LINK:case C.META:case C.NOFRAMES:case C.STYLE:{Is(t,e);break}case C.NOSCRIPT:{t._err(e,ve.nestedNoscriptInHead);break}default:Yd(t,e)}}function JZ(t,e){switch(e.tagID){case C.NOSCRIPT:{t.openElements.pop(),t.insertionMode=ee.IN_HEAD;break}case C.BR:{Yd(t,e);break}default:t._err(e,ve.endTagWithoutMatchingOpenElement)}}function Yd(t,e){const n=e.type===bt.EOF?ve.openElementsLeftAfterEof:ve.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=ee.IN_HEAD,t._processToken(e)}function ZZ(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.BODY:{t._insertElement(e,De.HTML),t.framesetOk=!1,t.insertionMode=ee.IN_BODY;break}case C.FRAMESET:{t._insertElement(e,De.HTML),t.insertionMode=ee.IN_FRAMESET;break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{t._err(e,ve.abandonedHeadElementChild),t.openElements.push(t.headElement,C.HEAD),Is(t,e),t.openElements.remove(t.headElement);break}case C.HEAD:{t._err(e,ve.misplacedStartTagForHeadElement);break}default:Kd(t,e)}}function jZ(t,e){switch(e.tagID){case C.BODY:case C.HTML:case C.BR:{Kd(t,e);break}case C.TEMPLATE:{sl(t,e);break}default:t._err(e,ve.endTagWithoutMatchingOpenElement)}}function Kd(t,e){t._insertFakeElement(he.BODY,C.BODY),t.insertionMode=ee.IN_BODY,A0(t,e)}function A0(t,e){switch(e.type){case bt.CHARACTER:{jL(t,e);break}case bt.WHITESPACE_CHARACTER:{ZL(t,e);break}case bt.COMMENT:{WT(t,e);break}case bt.START_TAG:{Wi(t,e);break}case bt.END_TAG:{b0(t,e);break}case bt.EOF:{iO(t,e);break}}}function ZL(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function jL(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function ej(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function tj(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function nj(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,De.HTML),t.insertionMode=ee.IN_FRAMESET)}function ij(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,De.HTML)}function rj(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&KT.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,De.HTML)}function sj(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,De.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function oj(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,De.HTML),n||(t.formElement=t.openElements.current))}function aj(t,e){t.framesetOk=!1;const n=e.tagID;for(let i=t.openElements.stackTop;i>=0;i--){const r=t.openElements.tagIDs[i];if(n===C.LI&&r===C.LI||(n===C.DD||n===C.DT)&&(r===C.DD||r===C.DT)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r);break}if(r!==C.ADDRESS&&r!==C.DIV&&r!==C.P&&t._isSpecialElement(t.openElements.items[i],r))break}t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,De.HTML)}function uj(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,De.HTML),t.tokenizer.state=Kn.PLAINTEXT}function lj(t,e){t.openElements.hasInScope(C.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,De.HTML),t.framesetOk=!1}function cj(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(he.A);n&&(nS(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,De.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function fj(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,De.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function dj(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(C.NOBR)&&(nS(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,De.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function hj(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,De.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function pj(t,e){t.treeAdapter.getDocumentMode(t.document)!==rs.QUIRKS&&t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,De.HTML),t.framesetOk=!1,t.insertionMode=ee.IN_TABLE}function eO(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,De.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function tO(t){const e=qL(t,Vu.TYPE);return e!=null&&e.toLowerCase()===MZ}function mj(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,De.HTML),tO(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function gj(t,e){t._appendElement(e,De.HTML),e.ackSelfClosing=!0}function yj(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._appendElement(e,De.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function _j(t,e){e.tagName=he.IMG,e.tagID=C.IMG,eO(t,e)}function Ej(t,e){t._insertElement(e,De.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Kn.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=ee.TEXT}function Tj(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Kn.RAWTEXT)}function vj(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Kn.RAWTEXT)}function LR(t,e){t._switchToTextParsing(e,Kn.RAWTEXT)}function Sj(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,De.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===ee.IN_TABLE||t.insertionMode===ee.IN_CAPTION||t.insertionMode===ee.IN_TABLE_BODY||t.insertionMode===ee.IN_ROW||t.insertionMode===ee.IN_CELL?ee.IN_SELECT_IN_TABLE:ee.IN_SELECT}function Cj(t,e){t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,De.HTML)}function Aj(t,e){t.openElements.hasInScope(C.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,De.HTML)}function bj(t,e){t.openElements.hasInScope(C.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(C.RTC),t._insertElement(e,De.HTML)}function Ij(t,e){t._reconstructActiveFormattingElements(),XL(e),tS(e),e.selfClosing?t._appendElement(e,De.MATHML):t._insertElement(e,De.MATHML),e.ackSelfClosing=!0}function wj(t,e){t._reconstructActiveFormattingElements(),QL(e),tS(e),e.selfClosing?t._appendElement(e,De.SVG):t._insertElement(e,De.SVG),e.ackSelfClosing=!0}function OR(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,De.HTML)}function Wi(t,e){switch(e.tagID){case C.I:case C.S:case C.B:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.SMALL:case C.STRIKE:case C.STRONG:{fj(t,e);break}case C.A:{cj(t,e);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{rj(t,e);break}case C.P:case C.DL:case C.OL:case C.UL:case C.DIV:case C.DIR:case C.NAV:case C.MAIN:case C.MENU:case C.ASIDE:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.DETAILS:case C.ADDRESS:case C.ARTICLE:case C.SEARCH:case C.SECTION:case C.SUMMARY:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{ij(t,e);break}case C.LI:case C.DD:case C.DT:{aj(t,e);break}case C.BR:case C.IMG:case C.WBR:case C.AREA:case C.EMBED:case C.KEYGEN:{eO(t,e);break}case C.HR:{yj(t,e);break}case C.RB:case C.RTC:{Aj(t,e);break}case C.RT:case C.RP:{bj(t,e);break}case C.PRE:case C.LISTING:{sj(t,e);break}case C.XMP:{Tj(t,e);break}case C.SVG:{wj(t,e);break}case C.HTML:{ej(t,e);break}case C.BASE:case C.LINK:case C.META:case C.STYLE:case C.TITLE:case C.SCRIPT:case C.BGSOUND:case C.BASEFONT:case C.TEMPLATE:{Is(t,e);break}case C.BODY:{tj(t,e);break}case C.FORM:{oj(t,e);break}case C.NOBR:{dj(t,e);break}case C.MATH:{Ij(t,e);break}case C.TABLE:{pj(t,e);break}case C.INPUT:{mj(t,e);break}case C.PARAM:case C.TRACK:case C.SOURCE:{gj(t,e);break}case C.IMAGE:{_j(t,e);break}case C.BUTTON:{lj(t,e);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{hj(t,e);break}case C.IFRAME:{vj(t,e);break}case C.SELECT:{Sj(t,e);break}case C.OPTION:case C.OPTGROUP:{Cj(t,e);break}case C.NOEMBED:case C.NOFRAMES:{LR(t,e);break}case C.FRAMESET:{nj(t,e);break}case C.TEXTAREA:{Ej(t,e);break}case C.NOSCRIPT:{t.options.scriptingEnabled?LR(t,e):OR(t,e);break}case C.PLAINTEXT:{uj(t,e);break}case C.COL:case C.TH:case C.TD:case C.TR:case C.HEAD:case C.FRAME:case C.TBODY:case C.TFOOT:case C.THEAD:case C.CAPTION:case C.COLGROUP:break;default:OR(t,e)}}function xj(t,e){if(t.openElements.hasInScope(C.BODY)&&(t.insertionMode=ee.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function Rj(t,e){t.openElements.hasInScope(C.BODY)&&(t.insertionMode=ee.AFTER_BODY,fO(t,e))}function Nj(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function Dj(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(C.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(C.FORM):n&&t.openElements.remove(n))}function Mj(t){t.openElements.hasInButtonScope(C.P)||t._insertFakeElement(he.P,C.P),t._closePElement()}function kj(t){t.openElements.hasInListItemScope(C.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(C.LI),t.openElements.popUntilTagNamePopped(C.LI))}function Pj(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function Lj(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function Oj(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function Uj(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(he.BR,C.BR),t.openElements.pop(),t.framesetOk=!1}function nO(t,e){const n=e.tagName,i=e.tagID;for(let r=t.openElements.stackTop;r>0;r--){const s=t.openElements.items[r],a=t.openElements.tagIDs[r];if(i===a&&(i!==C.UNKNOWN||t.treeAdapter.getTagName(s)===n)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.stackTop>=r&&t.openElements.shortenToLength(r);break}if(t._isSpecialElement(s,a))break}}function b0(t,e){switch(e.tagID){case C.A:case C.B:case C.I:case C.S:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.NOBR:case C.SMALL:case C.STRIKE:case C.STRONG:{nS(t,e);break}case C.P:{Mj(t);break}case C.DL:case C.UL:case C.OL:case C.DIR:case C.DIV:case C.NAV:case C.PRE:case C.MAIN:case C.MENU:case C.ASIDE:case C.BUTTON:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.ADDRESS:case C.ARTICLE:case C.DETAILS:case C.SEARCH:case C.SECTION:case C.SUMMARY:case C.LISTING:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{Nj(t,e);break}case C.LI:{kj(t);break}case C.DD:case C.DT:{Pj(t,e);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{Lj(t);break}case C.BR:{Uj(t);break}case C.BODY:{xj(t,e);break}case C.HTML:{Rj(t,e);break}case C.FORM:{Dj(t);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{Oj(t,e);break}case C.TEMPLATE:{sl(t,e);break}default:nO(t,e)}}function iO(t,e){t.tmplInsertionModeStack.length>0?cO(t,e):iS(t,e)}function Bj(t,e){var n;e.tagID===C.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function Vj(t,e){t._err(e,ve.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function kE(t,e){if(t.openElements.currentTagId!==void 0&&JL.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=ee.IN_TABLE_TEXT,e.type){case bt.CHARACTER:{sO(t,e);break}case bt.WHITESPACE_CHARACTER:{rO(t,e);break}}else Hh(t,e)}function Fj(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,De.HTML),t.insertionMode=ee.IN_CAPTION}function Hj(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,De.HTML),t.insertionMode=ee.IN_COLUMN_GROUP}function zj(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(he.COLGROUP,C.COLGROUP),t.insertionMode=ee.IN_COLUMN_GROUP,rS(t,e)}function qj(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,De.HTML),t.insertionMode=ee.IN_TABLE_BODY}function Gj(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(he.TBODY,C.TBODY),t.insertionMode=ee.IN_TABLE_BODY,I0(t,e)}function $j(t,e){t.openElements.hasInTableScope(C.TABLE)&&(t.openElements.popUntilTagNamePopped(C.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function Yj(t,e){tO(e)?t._appendElement(e,De.HTML):Hh(t,e),e.ackSelfClosing=!0}function Kj(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,De.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function Bc(t,e){switch(e.tagID){case C.TD:case C.TH:case C.TR:{Gj(t,e);break}case C.STYLE:case C.SCRIPT:case C.TEMPLATE:{Is(t,e);break}case C.COL:{zj(t,e);break}case C.FORM:{Kj(t,e);break}case C.TABLE:{$j(t,e);break}case C.TBODY:case C.TFOOT:case C.THEAD:{qj(t,e);break}case C.INPUT:{Yj(t,e);break}case C.CAPTION:{Fj(t,e);break}case C.COLGROUP:{Hj(t,e);break}default:Hh(t,e)}}function gh(t,e){switch(e.tagID){case C.TABLE:{t.openElements.hasInTableScope(C.TABLE)&&(t.openElements.popUntilTagNamePopped(C.TABLE),t._resetInsertionMode());break}case C.TEMPLATE:{sl(t,e);break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:Hh(t,e)}}function Hh(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,A0(t,e),t.fosterParentingEnabled=n}function rO(t,e){t.pendingCharacterTokens.push(e)}function sO(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function Ed(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Hh(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const oO=new Set([C.CAPTION,C.COL,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]);function Wj(t,e){const n=e.tagID;oO.has(n)?t.openElements.hasInTableScope(C.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ee.IN_TABLE,Bc(t,e)):Wi(t,e)}function Xj(t,e){const n=e.tagID;switch(n){case C.CAPTION:case C.TABLE:{t.openElements.hasInTableScope(C.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ee.IN_TABLE,n===C.TABLE&&gh(t,e));break}case C.BODY:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:b0(t,e)}}function rS(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.COL:{t._appendElement(e,De.HTML),e.ackSelfClosing=!0;break}case C.TEMPLATE:{Is(t,e);break}default:Mg(t,e)}}function Qj(t,e){switch(e.tagID){case C.COLGROUP:{t.openElements.currentTagId===C.COLGROUP&&(t.openElements.pop(),t.insertionMode=ee.IN_TABLE);break}case C.TEMPLATE:{sl(t,e);break}case C.COL:break;default:Mg(t,e)}}function Mg(t,e){t.openElements.currentTagId===C.COLGROUP&&(t.openElements.pop(),t.insertionMode=ee.IN_TABLE,t._processToken(e))}function I0(t,e){switch(e.tagID){case C.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,De.HTML),t.insertionMode=ee.IN_ROW;break}case C.TH:case C.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(he.TR,C.TR),t.insertionMode=ee.IN_ROW,w0(t,e);break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE,Bc(t,e));break}default:Bc(t,e)}}function XT(t,e){const n=e.tagID;switch(e.tagID){case C.TBODY:case C.TFOOT:case C.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE);break}case C.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE,gh(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:case C.TR:break;default:gh(t,e)}}function w0(t,e){switch(e.tagID){case C.TH:case C.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,De.HTML),t.insertionMode=ee.IN_CELL,t.activeFormattingElements.insertMarker();break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY,I0(t,e));break}default:Bc(t,e)}}function aO(t,e){switch(e.tagID){case C.TR:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY);break}case C.TABLE:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY,XT(t,e));break}case C.TBODY:case C.TFOOT:case C.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(C.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY,XT(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:break;default:gh(t,e)}}function Jj(t,e){const n=e.tagID;oO.has(n)?(t.openElements.hasInTableScope(C.TD)||t.openElements.hasInTableScope(C.TH))&&(t._closeTableCell(),w0(t,e)):Wi(t,e)}function Zj(t,e){const n=e.tagID;switch(n){case C.TD:case C.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ee.IN_ROW);break}case C.TABLE:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),aO(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:break;default:b0(t,e)}}function uO(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.OPTION:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t._insertElement(e,De.HTML);break}case C.OPTGROUP:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop(),t._insertElement(e,De.HTML);break}case C.HR:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop(),t._appendElement(e,De.HTML),e.ackSelfClosing=!0;break}case C.INPUT:case C.KEYGEN:case C.TEXTAREA:case C.SELECT:{t.openElements.hasInSelectScope(C.SELECT)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),e.tagID!==C.SELECT&&t._processStartTag(e));break}case C.SCRIPT:case C.TEMPLATE:{Is(t,e);break}}}function lO(t,e){switch(e.tagID){case C.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===C.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===C.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop();break}case C.OPTION:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop();break}case C.SELECT:{t.openElements.hasInSelectScope(C.SELECT)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode());break}case C.TEMPLATE:{sl(t,e);break}}}function jj(t,e){const n=e.tagID;n===C.CAPTION||n===C.TABLE||n===C.TBODY||n===C.TFOOT||n===C.THEAD||n===C.TR||n===C.TD||n===C.TH?(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),t._processStartTag(e)):uO(t,e)}function eee(t,e){const n=e.tagID;n===C.CAPTION||n===C.TABLE||n===C.TBODY||n===C.TFOOT||n===C.THEAD||n===C.TR||n===C.TD||n===C.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),t.onEndTag(e)):lO(t,e)}function tee(t,e){switch(e.tagID){case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{Is(t,e);break}case C.CAPTION:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{t.tmplInsertionModeStack[0]=ee.IN_TABLE,t.insertionMode=ee.IN_TABLE,Bc(t,e);break}case C.COL:{t.tmplInsertionModeStack[0]=ee.IN_COLUMN_GROUP,t.insertionMode=ee.IN_COLUMN_GROUP,rS(t,e);break}case C.TR:{t.tmplInsertionModeStack[0]=ee.IN_TABLE_BODY,t.insertionMode=ee.IN_TABLE_BODY,I0(t,e);break}case C.TD:case C.TH:{t.tmplInsertionModeStack[0]=ee.IN_ROW,t.insertionMode=ee.IN_ROW,w0(t,e);break}default:t.tmplInsertionModeStack[0]=ee.IN_BODY,t.insertionMode=ee.IN_BODY,Wi(t,e)}}function nee(t,e){e.tagID===C.TEMPLATE&&sl(t,e)}function cO(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(C.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):iS(t,e)}function iee(t,e){e.tagID===C.HTML?Wi(t,e):kg(t,e)}function fO(t,e){var n;if(e.tagID===C.HTML){if(t.fragmentContext||(t.insertionMode=ee.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===C.HTML){t._setEndLocation(t.openElements.items[0],e);const i=t.openElements.items[1];i&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(i))===null||n===void 0)&&n.endTag)&&t._setEndLocation(i,e)}}else kg(t,e)}function kg(t,e){t.insertionMode=ee.IN_BODY,A0(t,e)}function ree(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.FRAMESET:{t._insertElement(e,De.HTML);break}case C.FRAME:{t._appendElement(e,De.HTML),e.ackSelfClosing=!0;break}case C.NOFRAMES:{Is(t,e);break}}}function see(t,e){e.tagID===C.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==C.FRAMESET&&(t.insertionMode=ee.AFTER_FRAMESET))}function oee(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.NOFRAMES:{Is(t,e);break}}}function aee(t,e){e.tagID===C.HTML&&(t.insertionMode=ee.AFTER_AFTER_FRAMESET)}function uee(t,e){e.tagID===C.HTML?Wi(t,e):Ym(t,e)}function Ym(t,e){t.insertionMode=ee.IN_BODY,A0(t,e)}function lee(t,e){switch(e.tagID){case C.HTML:{Wi(t,e);break}case C.NOFRAMES:{Is(t,e);break}}}function cee(t,e){e.chars=Dn,t._insertCharacters(e)}function fee(t,e){t._insertCharacters(e),t.framesetOk=!1}function dO(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==De.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function dee(t,e){if(wZ(e))dO(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),i=t.treeAdapter.getNamespaceURI(n);i===De.MATHML?XL(e):i===De.SVG&&(xZ(e),QL(e)),tS(e),e.selfClosing?t._appendElement(e,i):t._insertElement(e,i),e.ackSelfClosing=!0}}function hee(t,e){if(e.tagID===C.P||e.tagID===C.BR){dO(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const i=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(i)===De.HTML){t._endTagOutsideForeignContent(e);break}const r=t.treeAdapter.getTagName(i);if(r.toLowerCase()===e.tagName){e.tagName=r,t.openElements.shortenToLength(n);break}}}he.AREA,he.BASE,he.BASEFONT,he.BGSOUND,he.BR,he.COL,he.EMBED,he.FRAME,he.HR,he.IMG,he.INPUT,he.KEYGEN,he.LINK,he.META,he.PARAM,he.SOURCE,he.TRACK,he.WBR;const pee=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,mee=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),UR={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function hO(t,e){const n=bee(t),i=BL("type",{handlers:{root:gee,element:yee,text:_ee,comment:mO,doctype:Eee,raw:vee},unknown:See}),r={parser:n?new PR(UR):PR.getFragmentParser(void 0,UR),handle(l){i(l,r)},stitches:!1,options:e||{}};i(t,r),af(r,so());const s=n?r.parser.document:r.parser.getFragment(),a=gJ(s,{file:r.options.file});return r.stitches&&Q1(a,"comment",function(l,f,d){const p=l;if(p.value.stitch&&d&&f!==void 0){const y=d.children;return y[f]=p.value.stitch,f}}),a.type==="root"&&a.children.length===1&&a.children[0].type===t.type?a.children[0]:a}function pO(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function gee(t,e){pO(t.children,e)}function yee(t,e){Cee(t,e),pO(t.children,e),Aee(t,e)}function _ee(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:bt.CHARACTER,chars:t.value,location:zh(t)};af(e,so(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Eee(t,e){const n={type:bt.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:zh(t)};af(e,so(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Tee(t,e){e.stitches=!0;const n=Iee(t);if("children"in t&&"children"in n){const i=hO({type:"root",children:t.children},e.options);n.children=i.children}mO({type:"comment",value:{stitch:n}},e)}function mO(t,e){const n=t.value,i={type:bt.COMMENT,data:n,location:zh(t)};af(e,so(t)),e.parser.currentToken=i,e.parser._processToken(e.parser.currentToken)}function vee(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,gO(e,so(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(pee,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function See(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))Tee(n,e);else{let i="";throw mee.has(n.type)&&(i=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+i)}}function af(t,e){gO(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Kn.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function gO(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function Cee(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Kn.PLAINTEXT)return;af(e,so(t));const i=e.parser.openElements.current;let r="namespaceURI"in i?i.namespaceURI:Ou.html;r===Ou.html&&n==="svg"&&(r=Ou.svg);const s=DJ({...t,children:[]},{space:r===Ou.svg?"svg":"html"}),a={type:bt.START_TAG,tagName:n,tagID:of(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:zh(t)};e.parser.currentToken=a,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function Aee(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&VJ.includes(n)||e.parser.tokenizer.state===Kn.PLAINTEXT)return;af(e,T0(t));const i={type:bt.END_TAG,tagName:n,tagID:of(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:zh(t)};e.parser.currentToken=i,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Kn.RCDATA||e.parser.tokenizer.state===Kn.RAWTEXT||e.parser.tokenizer.state===Kn.SCRIPT_DATA)&&(e.parser.tokenizer.state=Kn.DATA)}function bee(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function zh(t){const e=so(t)||{line:void 0,column:void 0,offset:void 0},n=T0(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Iee(t){return"children"in t?Uc({...t,children:[]}):Uc(t)}function wee(t){return function(e,n){return hO(e,{...t,file:n})}}function xee({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:r,onSignOut:s,isLoading:a,isCollapsed:l=!1,onToggleSidebar:f,mode:d="boards",onModeChange:p,explanation:y}){const[T,v]=q.useState(!1),[b,w]=q.useState(!1),R=async F=>{try{v(!0),await i(F),w(!1)}catch(J){console.error("Error in sidebar create board:",J)}finally{v(!1)}},N=()=>{w(!0)},V=()=>{w(!1)},G=(F,J)=>{F.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&r(J)};return ie.jsxs(ie.Fragment,{children:[ie.jsxs("div",{className:"sidebar split-pane-sidebar",children:[ie.jsx("div",{className:"sidebar-header",children:ie.jsxs("div",{className:"sidebar-mode-switch",children:[ie.jsx("button",{className:`mode-switch-btn ${d==="boards"?"active":""}`,onClick:()=>p&&p("boards"),children:" Boards"}),ie.jsx("button",{className:`mode-switch-btn ${d==="explanation"?"active":""}`,onClick:()=>p&&p("explanation"),children:" Explanation"})]})}),ie.jsx("div",{className:"sidebar-content",children:d==="boards"?ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"boards-section-header",children:ie.jsx("button",{onClick:N,disabled:a||T,className:"new-board-btn",children:T?"Creating...":"+ New Board"})}),ie.jsx("ul",{children:t?.map(F=>ie.jsxs("li",{onClick:()=>!a&&n(F.id),className:e?.id===F.id?"active":"",children:[ie.jsx("span",{className:"board-name",children:F.name}),ie.jsxs("div",{className:"board-actions",children:[F.isOpen&&ie.jsx("span",{className:"open-indicator",children:""}),t.length>1&&ie.jsx("button",{className:"delete-btn",onClick:J=>G(J,F.id),title:"Delete board",children:""})]})]},F.id))}),a&&ie.jsx("div",{className:"loading-indicator",children:"Loading boards..."}),ie.jsx("div",{className:"sidebar-footer",children:ie.jsx("button",{onClick:s,children:"Sign Out"})})]}):ie.jsx("div",{className:"explanation-content",children:y?ie.jsxs(ie.Fragment,{children:[ie.jsx("div",{className:"explanation-header",children:ie.jsx("h3",{children:y.title})}),ie.jsx("div",{className:"explanation-text",children:ie.jsx(tJ,{rehypePlugins:[wee],children:y.text})})]}):ie.jsx("div",{className:"explanation-placeholder",children:ie.jsx("p",{children:"Click on a node's explanation button () to view its detailed information here."})})})})]}),ie.jsx(qY,{show:b,onHide:V,onConfirm:R,isCreating:T})]})}function Ree({name:t,onSetName:e,user:n,isSaving:i,sidebarCollapsed:r=!1}){const[s,a]=q.useState(!1),[l,f]=q.useState(t||"");q.useEffect(()=>{f(t||"")},[t]);const d=y=>{y.key==="Enter"&&(e(l),a(!1))},p=()=>{a(!0),f(t||"")};return ie.jsx(ie.Fragment,{children:ie.jsx("div",{className:`name ${r?"sidebar-collapsed":""}`,children:ie.jsx("div",{className:"app-container",children:ie.jsxs("header",{className:"app-header",children:[ie.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[ie.jsx("h1",{children:"Launch Flow"}),ie.jsx("span",{style:{color:"#64748b",fontSize:"13px"},children:""}),s?ie.jsx("input",{type:"text",value:l,onChange:y=>f(y.target.value),onKeyDown:d,onBlur:()=>{e(l),a(!1)},style:{background:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",padding:"4px 8px",color:"#f1f5f9",fontSize:"14px",minWidth:"120px"},autoFocus:!0}):ie.jsx("button",{onClick:p,style:{background:"none",border:"none",color:"#94a3b8",fontSize:"14px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.15s ease"},onMouseEnter:y=>{y.currentTarget.style.background="rgba(255, 255, 255, 0.05)",y.currentTarget.style.color="#f1f5f9"},onMouseLeave:y=>{y.currentTarget.style.background="none",y.currentTarget.style.color="#94a3b8"},children:t||"Untitled Board"})]}),ie.jsxs("div",{className:"user-info",children:[ie.jsx("p",{children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),i&&ie.jsx("span",{className:"save-indicator",children:" Saving"})]})]})})})})}const Nee=({notification:t,onRemove:e})=>{const n=i=>{switch(i){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}};return ie.jsxs("div",{className:`notification notification-${t.type}`,children:[ie.jsxs("div",{className:"notification-content",children:[ie.jsx("span",{className:"notification-icon",children:n(t.type)}),ie.jsx("span",{className:"notification-message",children:t.message})]}),ie.jsx("button",{className:"notification-close",onClick:()=>e(t.id),children:""})]})},Dee=({notifications:t,onRemove:e})=>t.length===0?null:ie.jsx("div",{className:"notifications-container",children:t.map(n=>ie.jsx(Nee,{notification:n,onRemove:e},n.id))});var Yt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const a of r)s[a]=a;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(l=>typeof r[r[l]]!="number"),a={};for(const l of s)a[l]=r[l];return t.objectValues(a)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&s.push(a);return s},t.find=(r,s)=>{for(const a of r)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Yt||(Yt={}));var BR;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(BR||(BR={}));const We=Yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ba=t=>{switch(typeof t){case"undefined":return We.undefined;case"string":return We.string;case"number":return Number.isNaN(t)?We.nan:We.number;case"boolean":return We.boolean;case"function":return We.function;case"bigint":return We.bigint;case"symbol":return We.symbol;case"object":return Array.isArray(t)?We.array:t===null?We.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?We.promise:typeof Map<"u"&&t instanceof Map?We.map:typeof Set<"u"&&t instanceof Set?We.set:typeof Date<"u"&&t instanceof Date?We.date:We.object;default:return We.unknown}},Oe=Yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class zo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(r);else if(a.code==="invalid_return_type")r(a.returnTypeError);else if(a.code==="invalid_arguments")r(a.argumentsError);else if(a.path.length===0)i._errors.push(n(a));else{let l=i,f=0;for(;f<a.path.length;){const d=a.path[f];f===a.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(a))):l[d]=l[d]||{_errors:[]},l=l[d],f++}}};return r(this),i}static assert(e){if(!(e instanceof zo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}zo.create=t=>new zo(t);const QT=(t,e)=>{let n;switch(t.code){case Oe.invalid_type:t.received===We.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Yt.jsonStringifyReplacer)}`;break;case Oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Yt.joinValues(t.keys,", ")}`;break;case Oe.invalid_union:n="Invalid input";break;case Oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Yt.joinValues(t.options)}`;break;case Oe.invalid_enum_value:n=`Invalid enum value. Expected ${Yt.joinValues(t.options)}, received '${t.received}'`;break;case Oe.invalid_arguments:n="Invalid function arguments";break;case Oe.invalid_return_type:n="Invalid function return type";break;case Oe.invalid_date:n="Invalid date";break;case Oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Yt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Oe.custom:n="Invalid input";break;case Oe.invalid_intersection_types:n="Intersection results could not be merged";break;case Oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,Yt.assertNever(t)}return{message:n}};let Mee=QT;function kee(){return Mee}const Pee=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],a={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let l="";const f=i.filter(d=>!!d).slice().reverse();for(const d of f)l=d(a,{data:e,defaultError:l}).message;return{...r,path:s,message:l}};function He(t,e){const n=kee(),i=Pee({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===QT?void 0:QT].filter(r=>!!r)});t.common.issues.push(i)}class ar{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return dt;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,a=await r.value;i.push({key:s,value:a})}return ar.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:a}=r;if(s.status==="aborted"||a.status==="aborted")return dt;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||r.alwaysSet)&&(i[s.value]=a.value)}return{status:e.value,value:i}}}const dt=Object.freeze({status:"aborted"}),Dd=t=>({status:"dirty",value:t}),cs=t=>({status:"valid",value:t}),VR=t=>t.status==="aborted",FR=t=>t.status==="dirty",Vc=t=>t.status==="valid",Pg=t=>typeof Promise<"u"&&t instanceof Promise;var Je;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Je||(Je={}));class io{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const HR=(t,e)=>{if(Vc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new zo(t.common.issues);return this._error=n,this._error}}};function Et(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(a,l)=>{const{message:f}=t;return a.code==="invalid_enum_value"?{message:f??l.defaultError}:typeof l.data>"u"?{message:f??i??l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:f??n??l.defaultError}},description:r}}class Mt{get description(){return this._def.description}_getType(e){return ba(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ar,ctx:{common:e.parent.common,data:e.data,parsedType:ba(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Pg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ba(e)},r=this._parseSync({data:e,path:i.path,parent:i});return HR(i,r)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ba(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Vc(i)?{value:i.value}:{issues:n.common.issues}}catch(i){i?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Vc(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ba(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(Pg(r)?r:Promise.resolve(r));return HR(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const a=e(r),l=()=>s.addIssue({code:Oe.custom,...i(r)});return typeof Promise<"u"&&a instanceof Promise?a.then(f=>f?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new zc({schema:this,typeName:ct.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return za.create(this,this._def)}nullable(){return qc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eo.create(this)}promise(){return Vg.create(this,this._def)}or(e){return Og.create([this,e],this._def)}and(e){return Ug.create(this,e,this._def)}transform(e){return new zc({...Et(this._def),schema:this,typeName:ct.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ev({...Et(this._def),innerType:this,defaultValue:n,typeName:ct.ZodDefault})}brand(){return new ite({typeName:ct.ZodBranded,type:this,...Et(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new tv({...Et(this._def),innerType:this,catchValue:n,typeName:ct.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return sS.create(this,e)}readonly(){return nv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Lee=/^c[^\s-]{8,}$/i,Oee=/^[0-9a-z]+$/,Uee=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Bee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vee=/^[a-z0-9_-]{21}$/i,Fee=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Hee=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zee=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qee="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let PE;const Gee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$ee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Yee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Wee=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xee=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,yO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qee=new RegExp(`^${yO}$`);function _O(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Jee(t){return new RegExp(`^${_O(t)}$`)}function Zee(t){let e=`${yO}T${_O(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function jee(t,e){return!!((e==="v4"||!e)&&Gee.test(t)||(e==="v6"||!e)&&Yee.test(t))}function ete(t,e){if(!Fee.test(t))return!1;try{const[n]=t.split("."),i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function tte(t,e){return!!((e==="v4"||!e)&&$ee.test(t)||(e==="v6"||!e)&&Kee.test(t))}class Ks extends Mt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==We.string){const s=this._getOrReturnCtx(e);return He(s,{code:Oe.invalid_type,expected:We.string,received:s.parsedType}),dt}const i=new ar;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,l=e.data.length<s.value;(a||l)&&(r=this._getOrReturnCtx(e,r),a?He(r,{code:Oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&He(r,{code:Oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")zee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"email",code:Oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")PE||(PE=new RegExp(qee,"u")),PE.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"emoji",code:Oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")Bee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"uuid",code:Oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")Vee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"nanoid",code:Oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")Lee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"cuid",code:Oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")Oee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"cuid2",code:Oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")Uee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"ulid",code:Oe.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),He(r,{validation:"url",code:Oe.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"regex",code:Oe.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?Zee(s).test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?Qee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?Jee(s).test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?Hee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"duration",code:Oe.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?jee(e.data,s.version)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"ip",code:Oe.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?ete(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"jwt",code:Oe.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?tte(e.data,s.version)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"cidr",code:Oe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?Wee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"base64",code:Oe.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?Xee.test(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{validation:"base64url",code:Oe.invalid_string,message:s.message}),i.dirty()):Yt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:Oe.invalid_string,...Je.errToObj(i)})}_addCheck(e){return new Ks({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Je.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Je.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Je.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Je.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Je.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Je.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Je.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Je.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Je.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Je.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Je.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Je.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Je.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Je.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Je.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Je.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Je.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Je.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Je.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Je.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Je.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Je.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Je.errToObj(n)})}nonempty(e){return this.min(1,Je.errToObj(e))}trim(){return new Ks({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ks({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ks({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ks.create=t=>new Ks({checks:[],typeName:ct.ZodString,coerce:t?.coerce??!1,...Et(t)});function nte(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),a=Number.parseInt(e.toFixed(r).replace(".",""));return s%a/10**r}class Wu extends Mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==We.number){const s=this._getOrReturnCtx(e);return He(s,{code:Oe.invalid_type,expected:We.number,received:s.parsedType}),dt}let i;const r=new ar;for(const s of this._def.checks)s.kind==="int"?Yt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?nte(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.not_finite,message:s.message}),r.dirty()):Yt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Je.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Je.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Je.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Je.toString(n))}setLimit(e,n,i,r){return new Wu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Je.toString(r)}]})}_addCheck(e){return new Wu({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Je.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Je.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Je.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Je.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Je.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Je.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Yt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Wu.create=t=>new Wu({checks:[],typeName:ct.ZodNumber,coerce:t?.coerce||!1,...Et(t)});class Xu extends Mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==We.bigint)return this._getInvalidInput(e);let i;const r=new ar;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),He(i,{code:Oe.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Yt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return He(n,{code:Oe.invalid_type,expected:We.bigint,received:n.parsedType}),dt}gte(e,n){return this.setLimit("min",e,!0,Je.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Je.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Je.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Je.toString(n))}setLimit(e,n,i,r){return new Xu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Je.toString(r)}]})}_addCheck(e){return new Xu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Je.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Je.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Xu.create=t=>new Xu({checks:[],typeName:ct.ZodBigInt,coerce:t?.coerce??!1,...Et(t)});class Lg extends Mt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==We.boolean){const i=this._getOrReturnCtx(e);return He(i,{code:Oe.invalid_type,expected:We.boolean,received:i.parsedType}),dt}return cs(e.data)}}Lg.create=t=>new Lg({typeName:ct.ZodBoolean,coerce:t?.coerce||!1,...Et(t)});class Fc extends Mt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==We.date){const s=this._getOrReturnCtx(e);return He(s,{code:Oe.invalid_type,expected:We.date,received:s.parsedType}),dt}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return He(s,{code:Oe.invalid_date}),dt}const i=new ar;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),He(r,{code:Oe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Yt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Fc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Je.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Je.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Fc.create=t=>new Fc({checks:[],coerce:t?.coerce||!1,typeName:ct.ZodDate,...Et(t)});class zR extends Mt{_parse(e){if(this._getType(e)!==We.symbol){const i=this._getOrReturnCtx(e);return He(i,{code:Oe.invalid_type,expected:We.symbol,received:i.parsedType}),dt}return cs(e.data)}}zR.create=t=>new zR({typeName:ct.ZodSymbol,...Et(t)});class qR extends Mt{_parse(e){if(this._getType(e)!==We.undefined){const i=this._getOrReturnCtx(e);return He(i,{code:Oe.invalid_type,expected:We.undefined,received:i.parsedType}),dt}return cs(e.data)}}qR.create=t=>new qR({typeName:ct.ZodUndefined,...Et(t)});class GR extends Mt{_parse(e){if(this._getType(e)!==We.null){const i=this._getOrReturnCtx(e);return He(i,{code:Oe.invalid_type,expected:We.null,received:i.parsedType}),dt}return cs(e.data)}}GR.create=t=>new GR({typeName:ct.ZodNull,...Et(t)});class $R extends Mt{constructor(){super(...arguments),this._any=!0}_parse(e){return cs(e.data)}}$R.create=t=>new $R({typeName:ct.ZodAny,...Et(t)});class JT extends Mt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return cs(e.data)}}JT.create=t=>new JT({typeName:ct.ZodUnknown,...Et(t)});class Qa extends Mt{_parse(e){const n=this._getOrReturnCtx(e);return He(n,{code:Oe.invalid_type,expected:We.never,received:n.parsedType}),dt}}Qa.create=t=>new Qa({typeName:ct.ZodNever,...Et(t)});class YR extends Mt{_parse(e){if(this._getType(e)!==We.undefined){const i=this._getOrReturnCtx(e);return He(i,{code:Oe.invalid_type,expected:We.void,received:i.parsedType}),dt}return cs(e.data)}}YR.create=t=>new YR({typeName:ct.ZodVoid,...Et(t)});class eo extends Mt{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==We.array)return He(n,{code:Oe.invalid_type,expected:We.array,received:n.parsedType}),dt;if(r.exactLength!==null){const a=n.data.length>r.exactLength.value,l=n.data.length<r.exactLength.value;(a||l)&&(He(n,{code:a?Oe.too_big:Oe.too_small,minimum:l?r.exactLength.value:void 0,maximum:a?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(He(n,{code:Oe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(He(n,{code:Oe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>r.type._parseAsync(new io(n,a,n.path,l)))).then(a=>ar.mergeArray(i,a));const s=[...n.data].map((a,l)=>r.type._parseSync(new io(n,a,n.path,l)));return ar.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new eo({...this._def,minLength:{value:e,message:Je.toString(n)}})}max(e,n){return new eo({...this._def,maxLength:{value:e,message:Je.toString(n)}})}length(e,n){return new eo({...this._def,exactLength:{value:e,message:Je.toString(n)}})}nonempty(e){return this.min(1,e)}}eo.create=(t,e)=>new eo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ct.ZodArray,...Et(e)});function oc(t){if(t instanceof ti){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=za.create(oc(i))}return new ti({...t._def,shape:()=>e})}else return t instanceof eo?new eo({...t._def,type:oc(t.element)}):t instanceof za?za.create(oc(t.unwrap())):t instanceof qc?qc.create(oc(t.unwrap())):t instanceof Qu?Qu.create(t.items.map(e=>oc(e))):t}class ti extends Mt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Yt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==We.object){const d=this._getOrReturnCtx(e);return He(d,{code:Oe.invalid_type,expected:We.object,received:d.parsedType}),dt}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Qa&&this._def.unknownKeys==="strip"))for(const d in r.data)a.includes(d)||l.push(d);const f=[];for(const d of a){const p=s[d],y=r.data[d];f.push({key:{status:"valid",value:d},value:p._parse(new io(r,y,r.path,d)),alwaysSet:d in r.data})}if(this._def.catchall instanceof Qa){const d=this._def.unknownKeys;if(d==="passthrough")for(const p of l)f.push({key:{status:"valid",value:p},value:{status:"valid",value:r.data[p]}});else if(d==="strict")l.length>0&&(He(r,{code:Oe.unrecognized_keys,keys:l}),i.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const p of l){const y=r.data[p];f.push({key:{status:"valid",value:p},value:d._parse(new io(r,y,r.path,p)),alwaysSet:p in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const d=[];for(const p of f){const y=await p.key,T=await p.value;d.push({key:y,value:T,alwaysSet:p.alwaysSet})}return d}).then(d=>ar.mergeObjectSync(i,d)):ar.mergeObjectSync(i,f)}get shape(){return this._def.shape()}strict(e){return Je.errToObj,new ti({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{const r=this._def.errorMap?.(n,i).message??i.defaultError;return n.code==="unrecognized_keys"?{message:Je.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new ti({...this._def,unknownKeys:"strip"})}passthrough(){return new ti({...this._def,unknownKeys:"passthrough"})}extend(e){return new ti({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ti({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ct.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ti({...this._def,catchall:e})}pick(e){const n={};for(const i of Yt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new ti({...this._def,shape:()=>n})}omit(e){const n={};for(const i of Yt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new ti({...this._def,shape:()=>n})}deepPartial(){return oc(this)}partial(e){const n={};for(const i of Yt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new ti({...this._def,shape:()=>n})}required(e){const n={};for(const i of Yt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof za;)s=s._def.innerType;n[i]=s}return new ti({...this._def,shape:()=>n})}keyof(){return EO(Yt.objectKeys(this.shape))}}ti.create=(t,e)=>new ti({shape:()=>t,unknownKeys:"strip",catchall:Qa.create(),typeName:ct.ZodObject,...Et(e)});ti.strictCreate=(t,e)=>new ti({shape:()=>t,unknownKeys:"strict",catchall:Qa.create(),typeName:ct.ZodObject,...Et(e)});ti.lazycreate=(t,e)=>new ti({shape:t,unknownKeys:"strip",catchall:Qa.create(),typeName:ct.ZodObject,...Et(e)});class Og extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const a=s.map(l=>new zo(l.ctx.common.issues));return He(n,{code:Oe.invalid_union,unionErrors:a}),dt}if(n.common.async)return Promise.all(i.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(r);{let s;const a=[];for(const f of i){const d={...n,common:{...n.common,issues:[]},parent:null},p=f._parseSync({data:n.data,path:n.path,parent:d});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:d}),d.common.issues.length&&a.push(d.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=a.map(f=>new zo(f));return He(n,{code:Oe.invalid_union,unionErrors:l}),dt}}get options(){return this._def.options}}Og.create=(t,e)=>new Og({options:t,typeName:ct.ZodUnion,...Et(e)});function ZT(t,e){const n=ba(t),i=ba(e);if(t===e)return{valid:!0,data:t};if(n===We.object&&i===We.object){const r=Yt.objectKeys(e),s=Yt.objectKeys(t).filter(l=>r.indexOf(l)!==-1),a={...t,...e};for(const l of s){const f=ZT(t[l],e[l]);if(!f.valid)return{valid:!1};a[l]=f.data}return{valid:!0,data:a}}else if(n===We.array&&i===We.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const a=t[s],l=e[s],f=ZT(a,l);if(!f.valid)return{valid:!1};r.push(f.data)}return{valid:!0,data:r}}else return n===We.date&&i===We.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ug extends Mt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,a)=>{if(VR(s)||VR(a))return dt;const l=ZT(s.value,a.value);return l.valid?((FR(s)||FR(a))&&n.dirty(),{status:n.value,value:l.data}):(He(i,{code:Oe.invalid_intersection_types}),dt)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,a])=>r(s,a)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Ug.create=(t,e,n)=>new Ug({left:t,right:e,typeName:ct.ZodIntersection,...Et(n)});class Qu extends Mt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==We.array)return He(i,{code:Oe.invalid_type,expected:We.array,received:i.parsedType}),dt;if(i.data.length<this._def.items.length)return He(i,{code:Oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),dt;!this._def.rest&&i.data.length>this._def.items.length&&(He(i,{code:Oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((a,l)=>{const f=this._def.items[l]||this._def.rest;return f?f._parse(new io(i,a,i.path,l)):null}).filter(a=>!!a);return i.common.async?Promise.all(s).then(a=>ar.mergeArray(n,a)):ar.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Qu({...this._def,rest:e})}}Qu.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qu({items:t,typeName:ct.ZodTuple,rest:null,...Et(e)})};class Bg extends Mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==We.object)return He(i,{code:Oe.invalid_type,expected:We.object,received:i.parsedType}),dt;const r=[],s=this._def.keyType,a=this._def.valueType;for(const l in i.data)r.push({key:s._parse(new io(i,l,i.path,l)),value:a._parse(new io(i,i.data[l],i.path,l)),alwaysSet:l in i.data});return i.common.async?ar.mergeObjectAsync(n,r):ar.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Mt?new Bg({keyType:e,valueType:n,typeName:ct.ZodRecord,...Et(i)}):new Bg({keyType:Ks.create(),valueType:e,typeName:ct.ZodRecord,...Et(n)})}}class KR extends Mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==We.map)return He(i,{code:Oe.invalid_type,expected:We.map,received:i.parsedType}),dt;const r=this._def.keyType,s=this._def.valueType,a=[...i.data.entries()].map(([l,f],d)=>({key:r._parse(new io(i,l,i.path,[d,"key"])),value:s._parse(new io(i,f,i.path,[d,"value"]))}));if(i.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const f of a){const d=await f.key,p=await f.value;if(d.status==="aborted"||p.status==="aborted")return dt;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(d.value,p.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const f of a){const d=f.key,p=f.value;if(d.status==="aborted"||p.status==="aborted")return dt;(d.status==="dirty"||p.status==="dirty")&&n.dirty(),l.set(d.value,p.value)}return{status:n.value,value:l}}}}KR.create=(t,e,n)=>new KR({valueType:e,keyType:t,typeName:ct.ZodMap,...Et(n)});class yh extends Mt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==We.set)return He(i,{code:Oe.invalid_type,expected:We.set,received:i.parsedType}),dt;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(He(i,{code:Oe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(He(i,{code:Oe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function a(f){const d=new Set;for(const p of f){if(p.status==="aborted")return dt;p.status==="dirty"&&n.dirty(),d.add(p.value)}return{status:n.value,value:d}}const l=[...i.data.values()].map((f,d)=>s._parse(new io(i,f,i.path,d)));return i.common.async?Promise.all(l).then(f=>a(f)):a(l)}min(e,n){return new yh({...this._def,minSize:{value:e,message:Je.toString(n)}})}max(e,n){return new yh({...this._def,maxSize:{value:e,message:Je.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}yh.create=(t,e)=>new yh({valueType:t,minSize:null,maxSize:null,typeName:ct.ZodSet,...Et(e)});class jT extends Mt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}jT.create=(t,e)=>new jT({getter:t,typeName:ct.ZodLazy,...Et(e)});class WR extends Mt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return He(n,{received:n.data,code:Oe.invalid_literal,expected:this._def.value}),dt}return{status:"valid",value:e.data}}get value(){return this._def.value}}WR.create=(t,e)=>new WR({value:t,typeName:ct.ZodLiteral,...Et(e)});function EO(t,e){return new Hc({values:t,typeName:ct.ZodEnum,...Et(e)})}class Hc extends Mt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return He(n,{expected:Yt.joinValues(i),received:n.parsedType,code:Oe.invalid_type}),dt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return He(n,{received:n.data,code:Oe.invalid_enum_value,options:i}),dt}return cs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Hc.create(e,{...this._def,...n})}exclude(e,n=this._def){return Hc.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Hc.create=EO;class XR extends Mt{_parse(e){const n=Yt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==We.string&&i.parsedType!==We.number){const r=Yt.objectValues(n);return He(i,{expected:Yt.joinValues(r),received:i.parsedType,code:Oe.invalid_type}),dt}if(this._cache||(this._cache=new Set(Yt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Yt.objectValues(n);return He(i,{received:i.data,code:Oe.invalid_enum_value,options:r}),dt}return cs(e.data)}get enum(){return this._def.values}}XR.create=(t,e)=>new XR({values:t,typeName:ct.ZodNativeEnum,...Et(e)});class Vg extends Mt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==We.promise&&n.common.async===!1)return He(n,{code:Oe.invalid_type,expected:We.promise,received:n.parsedType}),dt;const i=n.parsedType===We.promise?n.data:Promise.resolve(n.data);return cs(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Vg.create=(t,e)=>new Vg({type:t,typeName:ct.ZodPromise,...Et(e)});class zc extends Mt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:a=>{He(i,a),a.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const a=r.transform(i.data,s);if(i.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return dt;const f=await this._def.schema._parseAsync({data:l,path:i.path,parent:i});return f.status==="aborted"?dt:f.status==="dirty"||n.value==="dirty"?Dd(f.value):f});{if(n.value==="aborted")return dt;const l=this._def.schema._parseSync({data:a,path:i.path,parent:i});return l.status==="aborted"?dt:l.status==="dirty"||n.value==="dirty"?Dd(l.value):l}}if(r.type==="refinement"){const a=l=>{const f=r.refinement(l,s);if(i.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?dt:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>l.status==="aborted"?dt:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(r.type==="transform")if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Vc(a))return dt;const l=r.transform(a.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>Vc(a)?Promise.resolve(r.transform(a.value,s)).then(l=>({status:n.value,value:l})):dt);Yt.assertNever(r)}}zc.create=(t,e,n)=>new zc({schema:t,typeName:ct.ZodEffects,effect:e,...Et(n)});zc.createWithPreprocess=(t,e,n)=>new zc({schema:e,effect:{type:"preprocess",transform:t},typeName:ct.ZodEffects,...Et(n)});class za extends Mt{_parse(e){return this._getType(e)===We.undefined?cs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}za.create=(t,e)=>new za({innerType:t,typeName:ct.ZodOptional,...Et(e)});class qc extends Mt{_parse(e){return this._getType(e)===We.null?cs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}qc.create=(t,e)=>new qc({innerType:t,typeName:ct.ZodNullable,...Et(e)});class ev extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===We.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ev.create=(t,e)=>new ev({innerType:t,typeName:ct.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Et(e)});class tv extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Pg(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zo(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new zo(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}tv.create=(t,e)=>new tv({innerType:t,typeName:ct.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Et(e)});class QR extends Mt{_parse(e){if(this._getType(e)!==We.nan){const i=this._getOrReturnCtx(e);return He(i,{code:Oe.invalid_type,expected:We.nan,received:i.parsedType}),dt}return{status:"valid",value:e.data}}}QR.create=t=>new QR({typeName:ct.ZodNaN,...Et(t)});class ite extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class sS extends Mt{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?dt:s.status==="dirty"?(n.dirty(),Dd(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?dt:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new sS({in:e,out:n,typeName:ct.ZodPipeline})}}class nv extends Mt{_parse(e){const n=this._def.innerType._parse(e),i=r=>(Vc(r)&&(r.value=Object.freeze(r.value)),r);return Pg(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}nv.create=(t,e)=>new nv({innerType:t,typeName:ct.ZodReadonly,...Et(e)});var ct;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ct||(ct={}));const wu=Ks.create,JR=Wu.create;Xu.create;const rte=Lg.create;Fc.create;const ZR=JT.create;Qa.create;const Md=eo.create,ste=ti.create,ote=Og.create;Ug.create;Qu.create;const ate=Bg.create,ute=jT.create,lte=Hc.create;Vg.create;za.create;qc.create;const ec={string:t=>Ks.create({...t,coerce:!0}),number:t=>Wu.create({...t,coerce:!0}),boolean:t=>Lg.create({...t,coerce:!0}),bigint:t=>Xu.create({...t,coerce:!0}),date:t=>Fc.create({...t,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let cte,fte;function dte(){return{geminiUrl:cte,vertexUrl:fte}}function hte(t,e,n){var i,r,s;if(!(!((i=t.httpOptions)===null||i===void 0)&&i.baseUrl)){const a=dte();return t.vertexai?(r=a.vertexUrl)!==null&&r!==void 0?r:e:(s=a.geminiUrl)!==null&&s!==void 0?s:n}return t.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ol{}function et(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,n){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[l])){const f=t[l];if(Array.isArray(n))for(let d=0;d<f.length;d++){const p=f[d];m(p,e.slice(s+1),n[d])}else for(const d of f)m(d,e.slice(s+1),n)}return}else if(a.endsWith("[0]")){const l=a.slice(0,-3);l in t||(t[l]=[{}]);const f=t[l];m(f[0],e.slice(s+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else t[i]=n}function h(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in t){const s=t[r];return Array.isArray(s)?s.map(a=>h(a,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jR||(jR={}));var eN;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(eN||(eN={}));var Ws;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ws||(Ws={}));var tN;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(tN||(tN={}));var nN;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(nN||(nN={}));var iN;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(iN||(iN={}));var rN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(rN||(rN={}));var sN;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(sN||(sN={}));var oN;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(oN||(oN={}));var aN;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(aN||(aN={}));var uN;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(uN||(uN={}));var lN;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(lN||(lN={}));var cN;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cN||(cN={}));var Fg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Fg||(Fg={}));var fN;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(fN||(fN={}));var iv;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(iv||(iv={}));var dN;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dN||(dN={}));var hN;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(hN||(hN={}));var pN;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(pN||(pN={}));var mN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(mN||(mN={}));var gN;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(gN||(gN={}));var yN;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(yN||(yN={}));var _N;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_N||(_N={}));var EN;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(EN||(EN={}));var TN;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi"})(TN||(TN={}));var vN;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(vN||(vN={}));var SN;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(SN||(SN={}));var CN;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(CN||(CN={}));var AN;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(AN||(AN={}));var bN;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(bN||(bN={}));var IN;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(IN||(IN={}));var wN;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(wN||(wN={}));var xN;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(xN||(xN={}));var RN;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(RN||(RN={}));var NN;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(NN||(NN={}));var DN;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(DN||(DN={}));var MN;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(MN||(MN={}));var kN;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(kN||(kN={}));var PN;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(PN||(PN={}));var fc;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(fc||(fc={}));class rv{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Td{get text(){var e,n,i,r,s,a,l,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const y=[];for(const T of(f=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&f!==void 0?f:[]){for(const[v,b]of Object.entries(T))v!=="text"&&v!=="thought"&&(b!==null||b!==void 0)&&y.push(v);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,d+=T.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,n,i,r,s,a,l,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const y of(f=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&f!==void 0?f:[]){for(const[T,v]of Object.entries(y))T!=="inlineData"&&(v!==null||v!==void 0)&&p.push(T);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,s,a,l,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||f===void 0?void 0:f.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,r,s,a,l,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(f=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||f===void 0?void 0:f.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if(p?.length!==0)return(d=p?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,s,a,l,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(f=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||f===void 0?void 0:f.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if(p?.length!==0)return(d=p?.[0])===null||d===void 0?void 0:d.output}}class LN{}class ON{}class pte{}class mte{}class UN{}class BN{}class VN{}class gte{}class FN{}class HN{}class zN{}class yte{}class _te{}class Ete{}class qN{}class Tte{get text(){var e,n,i;let r="",s=!1;const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(l))f!=="text"&&f!=="thought"&&d!==null&&a.push(f);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,r+=l.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,f]of Object.entries(a))l!=="inlineData"&&f!==null&&s.push(l);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class vte{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function un(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function TO(t,e){const n=un(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function vO(t){return Array.isArray(t)?t.map(e=>Hg(e)):[Hg(t)]}function Hg(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Ste(t){const e=Hg(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Cte(t){const e=Hg(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function GN(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function SO(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>GN(e)):[GN(t)]}function sv(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function $N(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function YN(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gi(t){if(t==null)throw new Error("ContentUnion is required");return sv(t)?t:{role:"user",parts:SO(t)}}function CO(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Gi(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Gi(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Gi(n)):[Gi(e)]}function us(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if($N(t)||YN(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gi(t)]}const e=[],n=[],i=sv(t[0]);for(const r of t){const s=sv(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if($N(r)||YN(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:SO(n)}),e}const Ate=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),KN=lte(["string","number","integer","object","array","boolean","null"]),bte=ote([KN,Md(KN)]);function Ite(t=!0){const e=ute(()=>{const n=ste({type:bte.optional(),format:wu().optional(),title:wu().optional(),description:wu().optional(),default:ZR().optional(),items:e.optional(),minItems:ec.string().optional(),maxItems:ec.string().optional(),enum:Md(ZR()).optional(),properties:ate(wu(),e).optional(),required:Md(wu()).optional(),minProperties:ec.string().optional(),maxProperties:ec.string().optional(),propertyOrdering:Md(wu()).optional(),minimum:JR().optional(),maximum:JR().optional(),minLength:ec.string().optional(),maxLength:ec.string().optional(),pattern:wu().optional(),anyOf:Md(e).optional(),additionalProperties:rte().optional()});return t?n.strict():n});return e}function wte(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ws).includes(n[0].toUpperCase())?n[0].toUpperCase():Ws.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ws).includes(i.toUpperCase())?i.toUpperCase():Ws.TYPE_UNSPECIFIED})}}function Cc(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&wte(t.type,e);for(const[a,l]of Object.entries(t))if(l!=null)if(a=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ws).includes(l.toUpperCase())?l.toUpperCase():Ws.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Cc(l);else if(i.includes(a)){const f=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}f.push(Cc(d))}e[a]=f}else if(r.includes(a)){const f={};for(const[d,p]of Object.entries(l))f[d]=Cc(p);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=l}return e}function _h(t){if(Object.keys(t).includes("$schema")){delete t.$schema;const e=Ite().parse(t);return Cc(e)}else return Cc(t)}function oS(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function aS(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function uf(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(e.parameters=_h(e.parameters)),e.response&&(e.response=_h(e.response));return t}function lf(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function xte(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function $o(t,e){if(typeof e!="string")throw new Error("name must be a string");return xte(t,e,"cachedContents")}function AO(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Yo(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Rte(t){return t!=null&&typeof t=="object"&&"name"in t}function Nte(t){return t!=null&&typeof t=="object"&&"video"in t}function Dte(t){return t!=null&&typeof t=="object"&&"uri"in t}function bO(t){var e;let n;if(Rte(t)&&(n=t.name),!(Dte(t)&&(n=t.uri,n===void 0))&&!(Nte(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function IO(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function wO(t){for(const e of["models","tunedModels","publisherModels"])if(Mte(t,e))return t[e];return[]}function Mte(t,e){return t!==null&&typeof t=="object"&&e in t}function kte(t,e={}){const n=t,i={name:n.name,description:n.description,parameters:Cc(x0(n.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Pte(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const a=kte(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Lte(t){const e=[];for(const n of t)e.push(x0(n));return e}function Ote(t){const e={};for(const[n,i]of Object.entries(t)){const r=i;e[n]=x0(r)}return e}function x0(t){const e=new Set(["items"]),n=new Set(["anyOf"]),i=new Set(["properties"]),r={};for(const[s,a]of Object.entries(t))if(e.has(s))r[s]=x0(a);else if(n.has(s))r[s]=Lte(a);else if(i.has(s))r[s]=Ote(a);else if(s==="type"){const l=a.toUpperCase();r[s]=Object.values(Ws).includes(l)?l:Ws.TYPE_UNSPECIFIED}else Ate.has(s)&&(r[s]=a);return r}function xO(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Ute(t){const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function R0(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function RO(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bte(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function Vte(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Fte(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Hte(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Bte(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],Vte(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],Fte(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function NO(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Hte(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function zte(t){const e={},n=h(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const i=h(t,["default"]);i!=null&&m(e,["default"],i);const r=h(t,["description"]);r!=null&&m(e,["description"],r);const s=h(t,["enum"]);s!=null&&m(e,["enum"],s);const a=h(t,["example"]);a!=null&&m(e,["example"],a);const l=h(t,["format"]);l!=null&&m(e,["format"],l);const f=h(t,["items"]);f!=null&&m(e,["items"],f);const d=h(t,["maxItems"]);d!=null&&m(e,["maxItems"],d);const p=h(t,["maxLength"]);p!=null&&m(e,["maxLength"],p);const y=h(t,["maxProperties"]);y!=null&&m(e,["maxProperties"],y);const T=h(t,["maximum"]);T!=null&&m(e,["maximum"],T);const v=h(t,["minItems"]);v!=null&&m(e,["minItems"],v);const b=h(t,["minLength"]);b!=null&&m(e,["minLength"],b);const w=h(t,["minProperties"]);w!=null&&m(e,["minProperties"],w);const R=h(t,["minimum"]);R!=null&&m(e,["minimum"],R);const N=h(t,["nullable"]);N!=null&&m(e,["nullable"],N);const V=h(t,["pattern"]);V!=null&&m(e,["pattern"],V);const G=h(t,["properties"]);G!=null&&m(e,["properties"],G);const F=h(t,["propertyOrdering"]);F!=null&&m(e,["propertyOrdering"],F);const J=h(t,["required"]);J!=null&&m(e,["required"],J);const K=h(t,["title"]);K!=null&&m(e,["title"],K);const M=h(t,["type"]);return M!=null&&m(e,["type"],M),e}function qte(t){const e={};if(h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=h(t,["category"]);n!=null&&m(e,["category"],n);const i=h(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function Gte(t){const e={},n=h(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=h(t,["description"]);i!=null&&m(e,["description"],i);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=h(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=h(t,["response"]);l!=null&&m(e,["response"],l);const f=h(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function $te(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function Yte(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],$te(n)),e}function Kte(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function Wte(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Kte(n)),e}function Xte(){return{}}function Qte(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>Gte(f))),m(e,["functionDeclarations"],l)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],Yte(i));const r=h(t,["googleSearchRetrieval"]);if(r!=null&&m(e,["googleSearchRetrieval"],Wte(r)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&m(e,["urlContext"],Xte());const a=h(t,["codeExecution"]);return a!=null&&m(e,["codeExecution"],a),e}function Jte(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function Zte(t){const e={},n=h(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function jte(t){const e={},n=h(t,["latLng"]);n!=null&&m(e,["latLng"],Zte(n));const i=h(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function ene(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Jte(n));const i=h(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],jte(i)),e}function tne(t){const e={},n=h(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function DO(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],tne(n)),e}function nne(t){const e={},n=h(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=h(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],DO(i)),e}function ine(t){const e={},n=h(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>nne(r))),m(e,["speakerVoiceConfigs"],i)}return e}function rne(t){const e={},n=h(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],DO(n));const i=h(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],ine(i));const r=h(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function sne(t){const e={},n=h(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const i=h(t,["thinkingBudget"]);return i!=null&&m(e,["thinkingBudget"],i),e}function one(t,e,n){const i={},r=h(e,["systemInstruction"]);n!==void 0&&r!=null&&m(n,["systemInstruction"],NO(Gi(r)));const s=h(e,["temperature"]);s!=null&&m(i,["temperature"],s);const a=h(e,["topP"]);a!=null&&m(i,["topP"],a);const l=h(e,["topK"]);l!=null&&m(i,["topK"],l);const f=h(e,["candidateCount"]);f!=null&&m(i,["candidateCount"],f);const d=h(e,["maxOutputTokens"]);d!=null&&m(i,["maxOutputTokens"],d);const p=h(e,["stopSequences"]);p!=null&&m(i,["stopSequences"],p);const y=h(e,["responseLogprobs"]);y!=null&&m(i,["responseLogprobs"],y);const T=h(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const v=h(e,["presencePenalty"]);v!=null&&m(i,["presencePenalty"],v);const b=h(e,["frequencyPenalty"]);b!=null&&m(i,["frequencyPenalty"],b);const w=h(e,["seed"]);w!=null&&m(i,["seed"],w);const R=h(e,["responseMimeType"]);R!=null&&m(i,["responseMimeType"],R);const N=h(e,["responseSchema"]);N!=null&&m(i,["responseSchema"],zte(_h(N)));const V=h(e,["responseJsonSchema"]);if(V!=null&&m(i,["responseJsonSchema"],V),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=h(e,["safetySettings"]);if(n!==void 0&&G!=null){let B=G;Array.isArray(B)&&(B=B.map(z=>qte(z))),m(n,["safetySettings"],B)}const F=h(e,["tools"]);if(n!==void 0&&F!=null){let B=lf(F);Array.isArray(B)&&(B=B.map(z=>Qte(uf(z)))),m(n,["tools"],B)}const J=h(e,["toolConfig"]);if(n!==void 0&&J!=null&&m(n,["toolConfig"],ene(J)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=h(e,["cachedContent"]);n!==void 0&&K!=null&&m(n,["cachedContent"],$o(t,K));const M=h(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const P=h(e,["mediaResolution"]);P!=null&&m(i,["mediaResolution"],P);const L=h(e,["speechConfig"]);if(L!=null&&m(i,["speechConfig"],rne(oS(L))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);return O!=null&&m(i,["thinkingConfig"],sne(O)),i}function ane(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["request","model"],un(t,i));const r=h(e,["contents"]);if(r!=null){let a=us(r);Array.isArray(a)&&(a=a.map(l=>NO(l))),m(n,["request","contents"],a)}const s=h(e,["config"]);return s!=null&&m(n,["request","generationConfig"],one(t,s,n)),n}function une(t,e){const n={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=h(e,["fileName"]);i!=null&&m(n,["fileName"],i);const r=h(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>ane(t,a))),m(n,["requests","requests"],s)}return n}function lne(t,e){const n={},i=h(t,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function cne(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["src"]);r!=null&&m(n,["batch","inputConfig"],une(t,xO(t,r)));const s=h(e,["config"]);return s!=null&&m(n,["config"],lne(s,n)),n}function fne(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],R0(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function dne(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],R0(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function hne(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=h(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function pne(t){const e={},n=h(t,["config"]);return n!=null&&m(e,["config"],hne(n,e)),e}function mne(t){const e={},n=h(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const i=h(t,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const r=h(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function gne(t){const e={},n=h(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const i=h(t,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const r=h(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function yne(t,e){const n={},i=h(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=h(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],gne(Ute(r))),n}function _ne(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["model"],un(t,i));const r=h(e,["src"]);r!=null&&m(n,["inputConfig"],mne(xO(t,r)));const s=h(e,["config"]);return s!=null&&m(n,["config"],yne(s,n)),n}function Ene(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],R0(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function Tne(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],R0(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function vne(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=h(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const s=h(t,["filter"]);return e!==void 0&&s!=null&&m(e,["_query","filter"],s),n}function Sne(t){const e={},n=h(t,["config"]);return n!=null&&m(e,["config"],vne(n,e)),e}function Cne(){return{}}function Ane(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function bne(t){const e={},n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ine(t){const e={},n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wne(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Ane(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],bne(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],Ine(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function xne(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>wne(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function Rne(t){const e={},n=h(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function Nne(t){const e={},n=h(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=h(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function Dne(t){const e={},n=h(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Nne(r))),m(e,["urlMetadata"],i)}return e}function Mne(t){const e={},n=h(t,["content"]);n!=null&&m(e,["content"],xne(n));const i=h(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],Rne(i));const r=h(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const s=h(t,["finishReason"]);s!=null&&m(e,["finishReason"],s);const a=h(t,["urlContextMetadata"]);a!=null&&m(e,["urlContextMetadata"],Dne(a));const l=h(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const f=h(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const d=h(t,["index"]);d!=null&&m(e,["index"],d);const p=h(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const y=h(t,["safetyRatings"]);return y!=null&&m(e,["safetyRatings"],y),e}function kne(t){const e={},n=h(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Mne(l))),m(e,["candidates"],a)}const i=h(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const r=h(t,["promptFeedback"]);r!=null&&m(e,["promptFeedback"],r);const s=h(t,["usageMetadata"]);return s!=null&&m(e,["usageMetadata"],s),e}function Pne(t){const e={},n=h(t,["response"]);return n!=null&&m(e,["response"],kne(n)),h(t,["error"])!=null&&m(e,["error"],Cne()),e}function Lne(t){const e={},n=h(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const i=h(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Pne(s))),m(e,["inlinedResponses"],r)}return e}function ov(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["metadata","state"]);r!=null&&m(e,["state"],RO(r));const s=h(t,["metadata","createTime"]);s!=null&&m(e,["createTime"],s);const a=h(t,["metadata","endTime"]);a!=null&&m(e,["endTime"],a);const l=h(t,["metadata","updateTime"]);l!=null&&m(e,["updateTime"],l);const f=h(t,["metadata","model"]);f!=null&&m(e,["model"],f);const d=h(t,["metadata","output"]);return d!=null&&m(e,["dest"],Lne(d)),e}function One(t){const e={},n=h(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=h(t,["operations"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>ov(s))),m(e,["batchJobs"],r)}return e}function Une(t){const e={},n=h(t,["details"]);n!=null&&m(e,["details"],n);const i=h(t,["code"]);i!=null&&m(e,["code"],i);const r=h(t,["message"]);return r!=null&&m(e,["message"],r),e}function Bne(t){const e={},n=h(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const i=h(t,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const r=h(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function Vne(t){const e={},n=h(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const i=h(t,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const r=h(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function av(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["state"]);r!=null&&m(e,["state"],RO(r));const s=h(t,["error"]);s!=null&&m(e,["error"],Une(s));const a=h(t,["createTime"]);a!=null&&m(e,["createTime"],a);const l=h(t,["startTime"]);l!=null&&m(e,["startTime"],l);const f=h(t,["endTime"]);f!=null&&m(e,["endTime"],f);const d=h(t,["updateTime"]);d!=null&&m(e,["updateTime"],d);const p=h(t,["model"]);p!=null&&m(e,["model"],p);const y=h(t,["inputConfig"]);y!=null&&m(e,["src"],Bne(y));const T=h(t,["outputConfig"]);return T!=null&&m(e,["dest"],Vne(T)),e}function Fne(t){const e={},n=h(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=h(t,["batchPredictionJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>av(s))),m(e,["batchJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ju;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ju||(Ju={}));class qh{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};i?typeof i=="object"?a=Object.assign({},i):a=i:a={config:{}},a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hne extends ol{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new qh(Ju.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}async createInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=_ne(this.apiClient,e);return l=et("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>av(p))}else{const d=cne(this.apiClient,e);return l=et("{model}:batchGenerateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>ov(p))}}async get(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Ene(this.apiClient,e);return l=et("batchPredictionJobs/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>av(p))}else{const d=fne(this.apiClient,e);return l=et("batches/{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>ov(p))}}async cancel(e){var n,i,r,s;let a="",l={};if(this.apiClient.isVertexAI()){const f=Tne(this.apiClient,e);a=et("batchPredictionJobs/{name}:cancel",f._url),l=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=dne(this.apiClient,e);a=et("batches/{name}:cancel",f._url),l=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Sne(e);return l=et("batchPredictionJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Fne(p),T=new qN;return Object.assign(T,y),T})}else{const d=pne(e);return l=et("batches",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=One(p),T=new qN;return Object.assign(T,y),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zne(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function qne(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Gne(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function $ne(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],zne(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],qne(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],Gne(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function WN(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>$ne(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function Yne(t){const e={},n=h(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=h(t,["description"]);i!=null&&m(e,["description"],i);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=h(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=h(t,["response"]);l!=null&&m(e,["response"],l);const f=h(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function Kne(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function Wne(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],Kne(n)),e}function Xne(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function Qne(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Xne(n)),e}function Jne(){return{}}function Zne(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>Yne(f))),m(e,["functionDeclarations"],l)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],Wne(i));const r=h(t,["googleSearchRetrieval"]);if(r!=null&&m(e,["googleSearchRetrieval"],Qne(r)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&m(e,["urlContext"],Jne());const a=h(t,["codeExecution"]);return a!=null&&m(e,["codeExecution"],a),e}function jne(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function eie(t){const e={},n=h(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function tie(t){const e={},n=h(t,["latLng"]);n!=null&&m(e,["latLng"],eie(n));const i=h(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function nie(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],jne(n));const i=h(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],tie(i)),e}function iie(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=h(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=h(t,["contents"]);if(e!==void 0&&a!=null){let p=us(a);Array.isArray(p)&&(p=p.map(y=>WN(y))),m(e,["contents"],p)}const l=h(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],WN(Gi(l)));const f=h(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(y=>Zne(y))),m(e,["tools"],p)}const d=h(t,["toolConfig"]);if(e!==void 0&&d!=null&&m(e,["toolConfig"],nie(d)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function rie(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["model"],TO(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],iie(r,n)),n}function sie(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],$o(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function oie(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],$o(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function aie(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=h(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),n}function uie(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],$o(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],aie(r,n)),n}function lie(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function cie(t){const e={},n=h(t,["config"]);return n!=null&&m(e,["config"],lie(n,e)),e}function fie(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function die(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["data"]);i!=null&&m(e,["data"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function hie(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function pie(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],fie(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],die(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],hie(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function XN(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>pie(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function mie(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const i=h(t,["name"]);i!=null&&m(e,["name"],i);const r=h(t,["parameters"]);r!=null&&m(e,["parameters"],r);const s=h(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const a=h(t,["response"]);a!=null&&m(e,["response"],a);const l=h(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function gie(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function yie(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],gie(n)),e}function _ie(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function Eie(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],_ie(n)),e}function Tie(){return{}}function vie(t){const e={},n=h(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function Sie(t){const e={},n=h(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],vie(n));const i=h(t,["authType"]);i!=null&&m(e,["authType"],i);const r=h(t,["googleServiceAccountConfig"]);r!=null&&m(e,["googleServiceAccountConfig"],r);const s=h(t,["httpBasicAuthConfig"]);s!=null&&m(e,["httpBasicAuthConfig"],s);const a=h(t,["oauthConfig"]);a!=null&&m(e,["oauthConfig"],a);const l=h(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function Cie(t){const e={},n=h(t,["authConfig"]);return n!=null&&m(e,["authConfig"],Sie(n)),e}function Aie(){return{}}function bie(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>mie(y))),m(e,["functionDeclarations"],p)}const i=h(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const r=h(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],yie(r));const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],Eie(s)),h(t,["enterpriseWebSearch"])!=null&&m(e,["enterpriseWebSearch"],Tie());const l=h(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],Cie(l)),h(t,["urlContext"])!=null&&m(e,["urlContext"],Aie());const d=h(t,["codeExecution"]);return d!=null&&m(e,["codeExecution"],d),e}function Iie(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function wie(t){const e={},n=h(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function xie(t){const e={},n=h(t,["latLng"]);n!=null&&m(e,["latLng"],wie(n));const i=h(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function Rie(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Iie(n));const i=h(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],xie(i)),e}function Nie(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=h(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const s=h(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=h(t,["contents"]);if(e!==void 0&&a!=null){let y=us(a);Array.isArray(y)&&(y=y.map(T=>XN(T))),m(e,["contents"],y)}const l=h(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],XN(Gi(l)));const f=h(t,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(T=>bie(T))),m(e,["tools"],y)}const d=h(t,["toolConfig"]);e!==void 0&&d!=null&&m(e,["toolConfig"],Rie(d));const p=h(t,["kmsKeyName"]);return e!==void 0&&p!=null&&m(e,["encryption_spec","kmsKeyName"],p),n}function Die(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["model"],TO(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],Nie(r,n)),n}function Mie(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],$o(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function kie(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],$o(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function Pie(t,e){const n={},i=h(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=h(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),n}function Lie(t,e){const n={},i=h(e,["name"]);i!=null&&m(n,["_url","name"],$o(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],Pie(r,n)),n}function Oie(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function Uie(t){const e={},n=h(t,["config"]);return n!=null&&m(e,["config"],Oie(n,e)),e}function Km(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["model"]);r!=null&&m(e,["model"],r);const s=h(t,["createTime"]);s!=null&&m(e,["createTime"],s);const a=h(t,["updateTime"]);a!=null&&m(e,["updateTime"],a);const l=h(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const f=h(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function Bie(){return{}}function Vie(t){const e={},n=h(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=h(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Km(s))),m(e,["cachedContents"],r)}return e}function Wm(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["model"]);r!=null&&m(e,["model"],r);const s=h(t,["createTime"]);s!=null&&m(e,["createTime"],s);const a=h(t,["updateTime"]);a!=null&&m(e,["updateTime"],a);const l=h(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const f=h(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function Fie(){return{}}function Hie(t){const e={},n=h(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=h(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Wm(s))),m(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zie extends ol{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qh(Ju.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Die(this.apiClient,e);return l=et("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>Wm(p))}else{const d=rie(this.apiClient,e);return l=et("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Km(p))}}async get(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Mie(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>Wm(p))}else{const d=sie(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Km(p))}}async delete(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=kie(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(()=>{const p=Fie(),y=new HN;return Object.assign(y,p),y})}else{const d=oie(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(()=>{const p=Bie(),y=new HN;return Object.assign(y,p),y})}}async update(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Lie(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>Wm(p))}else{const d=uie(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Km(p))}}async listInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Uie(e);return l=et("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Hie(p),T=new zN;return Object.assign(T,y),T})}else{const d=cie(e);return l=et("cachedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Vie(p),T=new zN;return Object.assign(T,y),T})}}}function QN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function An(t){return this instanceof An?(this.v=t,this):new An(t)}function Ac(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(v){return function(b){return Promise.resolve(b).then(v,y)}}function l(v,b){i[v]&&(r[v]=function(w){return new Promise(function(R,N){s.push([v,w,R,N])>1||f(v,w)})},b&&(r[v]=b(r[v])))}function f(v,b){try{d(i[v](b))}catch(w){T(s[0][3],w)}}function d(v){v.value instanceof An?Promise.resolve(v.value.v).then(p,y):T(s[0][2],v)}function p(v){f("next",v)}function y(v){f("throw",v)}function T(v,b){v(b),s.shift(),s.length&&f(s[0][0],s[0][1])}}function Wd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof QN=="function"?QN(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(l,f){a=t[s](a),r(l,f,a.done,a.value)})}}function r(s,a,l,f){Promise.resolve(f).then(function(d){s({value:d,done:l})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qie(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:MO(n)}function MO(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Gie(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function JN(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!MO(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class $ie{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Yie(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Yie{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),Gie(s)}async sendMessage(e){var n;await this.sendPromise;const i=Gi(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,l;const f=await r,d=(a=(s=f.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,p=f.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let T=[];p!=null&&(T=(l=p.slice(y))!==null&&l!==void 0?l:[]);const v=d?[d]:[];this.recordHistory(i,v,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Gi(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?JN(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return Ac(this,arguments,function*(){var a,l,f,d;const p=[];try{for(var y=!0,T=Wd(e),v;v=yield An(T.next()),a=v.done,!a;y=!0){d=v.value,y=!1;const b=d;if(qie(b)){const w=(r=(i=b.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;w!==void 0&&p.push(w)}yield yield An(b)}}catch(b){l={error:b}}finally{try{!y&&!a&&(f=T.return)&&(yield An(f.call(T)))}finally{if(l)throw l.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...JN(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N0 extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,N0.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kie(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function Wie(t){const e={},n=h(t,["config"]);return n!=null&&m(e,["config"],Kie(n,e)),e}function Xie(t){const e={},n=h(t,["details"]);n!=null&&m(e,["details"],n);const i=h(t,["message"]);i!=null&&m(e,["message"],i);const r=h(t,["code"]);return r!=null&&m(e,["code"],r),e}function Qie(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["mimeType"]);r!=null&&m(e,["mimeType"],r);const s=h(t,["sizeBytes"]);s!=null&&m(e,["sizeBytes"],s);const a=h(t,["createTime"]);a!=null&&m(e,["createTime"],a);const l=h(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const f=h(t,["updateTime"]);f!=null&&m(e,["updateTime"],f);const d=h(t,["sha256Hash"]);d!=null&&m(e,["sha256Hash"],d);const p=h(t,["uri"]);p!=null&&m(e,["uri"],p);const y=h(t,["downloadUri"]);y!=null&&m(e,["downloadUri"],y);const T=h(t,["state"]);T!=null&&m(e,["state"],T);const v=h(t,["source"]);v!=null&&m(e,["source"],v);const b=h(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const w=h(t,["error"]);return w!=null&&m(e,["error"],Xie(w)),e}function Jie(t){const e={},n=h(t,["file"]);n!=null&&m(e,["file"],Qie(n));const i=h(t,["config"]);return i!=null&&m(e,["config"],i),e}function Zie(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","file"],bO(n));const i=h(t,["config"]);return i!=null&&m(e,["config"],i),e}function jie(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","file"],bO(n));const i=h(t,["config"]);return i!=null&&m(e,["config"],i),e}function ere(t){const e={},n=h(t,["details"]);n!=null&&m(e,["details"],n);const i=h(t,["message"]);i!=null&&m(e,["message"],i);const r=h(t,["code"]);return r!=null&&m(e,["code"],r),e}function uv(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["mimeType"]);r!=null&&m(e,["mimeType"],r);const s=h(t,["sizeBytes"]);s!=null&&m(e,["sizeBytes"],s);const a=h(t,["createTime"]);a!=null&&m(e,["createTime"],a);const l=h(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const f=h(t,["updateTime"]);f!=null&&m(e,["updateTime"],f);const d=h(t,["sha256Hash"]);d!=null&&m(e,["sha256Hash"],d);const p=h(t,["uri"]);p!=null&&m(e,["uri"],p);const y=h(t,["downloadUri"]);y!=null&&m(e,["downloadUri"],y);const T=h(t,["state"]);T!=null&&m(e,["state"],T);const v=h(t,["source"]);v!=null&&m(e,["source"],v);const b=h(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const w=h(t,["error"]);return w!=null&&m(e,["error"],ere(w)),e}function tre(t){const e={},n=h(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=h(t,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>uv(s))),m(e,["files"],r)}return e}function nre(){return{}}function ire(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rre extends ol{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new qh(Ju.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>uv(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Wie(e);return s=et("files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=tre(f),p=new yte;return Object.assign(p,d),p})}}async createInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Jie(e);return s=et("upload/v1beta/files",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(()=>{const f=nre(),d=new _te;return Object.assign(d,f),d})}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Zie(e);return s=et("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>uv(f))}}async delete(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=jie(e);return s=et("files/{file}",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(()=>{const f=ire(),d=new Ete;return Object.assign(d,f),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sre(t){const e={},n=h(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function ore(t){const e={},n=h(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function kO(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],sre(n)),e}function are(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],ore(n)),e}function ure(t){const e={},n=h(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=h(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],kO(i)),e}function lre(t){const e={},n=h(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ure(r))),m(e,["speakerVoiceConfigs"],i)}return e}function cre(t){const e={},n=h(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],kO(n));const i=h(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],lre(i));const r=h(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function fre(t){const e={},n=h(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],are(n)),h(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=h(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function dre(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function hre(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function pre(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function mre(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["data"]);i!=null&&m(e,["data"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function gre(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function yre(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function _re(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],dre(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],pre(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],gre(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function Ere(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],hre(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],mre(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],yre(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function Tre(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>_re(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function vre(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ere(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function Sre(t){const e={},n=h(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=h(t,["description"]);i!=null&&m(e,["description"],i);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=h(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=h(t,["response"]);l!=null&&m(e,["response"],l);const f=h(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function Cre(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const i=h(t,["name"]);i!=null&&m(e,["name"],i);const r=h(t,["parameters"]);r!=null&&m(e,["parameters"],r);const s=h(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const a=h(t,["response"]);a!=null&&m(e,["response"],a);const l=h(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function Are(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function bre(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function Ire(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],Are(n)),e}function wre(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],bre(n)),e}function xre(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function Rre(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function Nre(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],xre(n)),e}function Dre(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Rre(n)),e}function Mre(){return{}}function kre(t){const e={},n=h(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function Pre(t){const e={},n=h(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],kre(n));const i=h(t,["authType"]);i!=null&&m(e,["authType"],i);const r=h(t,["googleServiceAccountConfig"]);r!=null&&m(e,["googleServiceAccountConfig"],r);const s=h(t,["httpBasicAuthConfig"]);s!=null&&m(e,["httpBasicAuthConfig"],s);const a=h(t,["oauthConfig"]);a!=null&&m(e,["oauthConfig"],a);const l=h(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function Lre(t){const e={},n=h(t,["authConfig"]);return n!=null&&m(e,["authConfig"],Pre(n)),e}function Ore(){return{}}function Ure(){return{}}function Bre(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>Sre(f))),m(e,["functionDeclarations"],l)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],Ire(i));const r=h(t,["googleSearchRetrieval"]);if(r!=null&&m(e,["googleSearchRetrieval"],Nre(r)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&m(e,["urlContext"],Ore());const a=h(t,["codeExecution"]);return a!=null&&m(e,["codeExecution"],a),e}function Vre(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>Cre(y))),m(e,["functionDeclarations"],p)}const i=h(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const r=h(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],wre(r));const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],Dre(s)),h(t,["enterpriseWebSearch"])!=null&&m(e,["enterpriseWebSearch"],Mre());const l=h(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],Lre(l)),h(t,["urlContext"])!=null&&m(e,["urlContext"],Ure());const d=h(t,["codeExecution"]);return d!=null&&m(e,["codeExecution"],d),e}function Fre(t){const e={},n=h(t,["handle"]);if(n!=null&&m(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Hre(t){const e={},n=h(t,["handle"]);n!=null&&m(e,["handle"],n);const i=h(t,["transparent"]);return i!=null&&m(e,["transparent"],i),e}function ZN(){return{}}function jN(){return{}}function zre(t){const e={},n=h(t,["disabled"]);n!=null&&m(e,["disabled"],n);const i=h(t,["startOfSpeechSensitivity"]);i!=null&&m(e,["startOfSpeechSensitivity"],i);const r=h(t,["endOfSpeechSensitivity"]);r!=null&&m(e,["endOfSpeechSensitivity"],r);const s=h(t,["prefixPaddingMs"]);s!=null&&m(e,["prefixPaddingMs"],s);const a=h(t,["silenceDurationMs"]);return a!=null&&m(e,["silenceDurationMs"],a),e}function qre(t){const e={},n=h(t,["disabled"]);n!=null&&m(e,["disabled"],n);const i=h(t,["startOfSpeechSensitivity"]);i!=null&&m(e,["startOfSpeechSensitivity"],i);const r=h(t,["endOfSpeechSensitivity"]);r!=null&&m(e,["endOfSpeechSensitivity"],r);const s=h(t,["prefixPaddingMs"]);s!=null&&m(e,["prefixPaddingMs"],s);const a=h(t,["silenceDurationMs"]);return a!=null&&m(e,["silenceDurationMs"],a),e}function Gre(t){const e={},n=h(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],zre(n));const i=h(t,["activityHandling"]);i!=null&&m(e,["activityHandling"],i);const r=h(t,["turnCoverage"]);return r!=null&&m(e,["turnCoverage"],r),e}function $re(t){const e={},n=h(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],qre(n));const i=h(t,["activityHandling"]);i!=null&&m(e,["activityHandling"],i);const r=h(t,["turnCoverage"]);return r!=null&&m(e,["turnCoverage"],r),e}function Yre(t){const e={},n=h(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function Kre(t){const e={},n=h(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function Wre(t){const e={},n=h(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const i=h(t,["slidingWindow"]);return i!=null&&m(e,["slidingWindow"],Yre(i)),e}function Xre(t){const e={},n=h(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const i=h(t,["slidingWindow"]);return i!=null&&m(e,["slidingWindow"],Kre(i)),e}function Qre(t){const e={},n=h(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function Jre(t){const e={},n=h(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function Zre(t,e){const n={},i=h(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=h(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const s=h(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const a=h(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const l=h(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const d=h(t,["mediaResolution"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","mediaResolution"],d);const p=h(t,["seed"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","seed"],p);const y=h(t,["speechConfig"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","speechConfig"],cre(aS(y)));const T=h(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const v=h(t,["systemInstruction"]);e!==void 0&&v!=null&&m(e,["setup","systemInstruction"],Tre(Gi(v)));const b=h(t,["tools"]);if(e!==void 0&&b!=null){let J=lf(b);Array.isArray(J)&&(J=J.map(K=>Bre(uf(K)))),m(e,["setup","tools"],J)}const w=h(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Fre(w));const R=h(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],ZN());const N=h(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&m(e,["setup","outputAudioTranscription"],ZN());const V=h(t,["realtimeInputConfig"]);e!==void 0&&V!=null&&m(e,["setup","realtimeInputConfig"],Gre(V));const G=h(t,["contextWindowCompression"]);e!==void 0&&G!=null&&m(e,["setup","contextWindowCompression"],Wre(G));const F=h(t,["proactivity"]);return e!==void 0&&F!=null&&m(e,["setup","proactivity"],Qre(F)),n}function jre(t,e){const n={},i=h(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=h(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const s=h(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const a=h(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const l=h(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const d=h(t,["mediaResolution"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","mediaResolution"],d);const p=h(t,["seed"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","seed"],p);const y=h(t,["speechConfig"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","speechConfig"],fre(aS(y)));const T=h(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const v=h(t,["systemInstruction"]);e!==void 0&&v!=null&&m(e,["setup","systemInstruction"],vre(Gi(v)));const b=h(t,["tools"]);if(e!==void 0&&b!=null){let J=lf(b);Array.isArray(J)&&(J=J.map(K=>Vre(uf(K)))),m(e,["setup","tools"],J)}const w=h(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Hre(w));const R=h(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],jN());const N=h(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&m(e,["setup","outputAudioTranscription"],jN());const V=h(t,["realtimeInputConfig"]);e!==void 0&&V!=null&&m(e,["setup","realtimeInputConfig"],$re(V));const G=h(t,["contextWindowCompression"]);e!==void 0&&G!=null&&m(e,["setup","contextWindowCompression"],Xre(G));const F=h(t,["proactivity"]);return e!==void 0&&F!=null&&m(e,["setup","proactivity"],Jre(F)),n}function ese(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["setup","model"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],Zre(r,n)),n}function tse(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["setup","model"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],jre(r,n)),n}function nse(){return{}}function ise(){return{}}function rse(){return{}}function sse(){return{}}function ose(t){const e={},n=h(t,["media"]);n!=null&&m(e,["mediaChunks"],vO(n));const i=h(t,["audio"]);i!=null&&m(e,["audio"],Cte(i));const r=h(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const s=h(t,["video"]);s!=null&&m(e,["video"],Ste(s));const a=h(t,["text"]);return a!=null&&m(e,["text"],a),h(t,["activityStart"])!=null&&m(e,["activityStart"],nse()),h(t,["activityEnd"])!=null&&m(e,["activityEnd"],rse()),e}function ase(t){const e={},n=h(t,["media"]);if(n!=null&&m(e,["mediaChunks"],vO(n)),h(t,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=h(t,["audioStreamEnd"]);if(i!=null&&m(e,["audioStreamEnd"],i),h(t,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(h(t,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return h(t,["activityStart"])!=null&&m(e,["activityStart"],ise()),h(t,["activityEnd"])!=null&&m(e,["activityEnd"],sse()),e}function PO(t){const e={},n=h(t,["text"]);n!=null&&m(e,["text"],n);const i=h(t,["weight"]);return i!=null&&m(e,["weight"],i),e}function use(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>PO(r))),m(e,["weightedPrompts"],i)}return e}function LO(t){const e={},n=h(t,["temperature"]);n!=null&&m(e,["temperature"],n);const i=h(t,["topK"]);i!=null&&m(e,["topK"],i);const r=h(t,["seed"]);r!=null&&m(e,["seed"],r);const s=h(t,["guidance"]);s!=null&&m(e,["guidance"],s);const a=h(t,["bpm"]);a!=null&&m(e,["bpm"],a);const l=h(t,["density"]);l!=null&&m(e,["density"],l);const f=h(t,["brightness"]);f!=null&&m(e,["brightness"],f);const d=h(t,["scale"]);d!=null&&m(e,["scale"],d);const p=h(t,["muteBass"]);p!=null&&m(e,["muteBass"],p);const y=h(t,["muteDrums"]);y!=null&&m(e,["muteDrums"],y);const T=h(t,["onlyBassAndDrums"]);return T!=null&&m(e,["onlyBassAndDrums"],T),e}function lse(t){const e={},n=h(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],LO(n)),e}function OO(t){const e={},n=h(t,["model"]);return n!=null&&m(e,["model"],n),e}function UO(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>PO(r))),m(e,["weightedPrompts"],i)}return e}function lv(t){const e={},n=h(t,["setup"]);n!=null&&m(e,["setup"],OO(n));const i=h(t,["clientContent"]);i!=null&&m(e,["clientContent"],UO(i));const r=h(t,["musicGenerationConfig"]);r!=null&&m(e,["musicGenerationConfig"],LO(r));const s=h(t,["playbackControl"]);return s!=null&&m(e,["playbackControl"],s),e}function cse(){return{}}function fse(){return{}}function dse(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function hse(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function pse(t){const e={},n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function mse(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["data"]);i!=null&&m(e,["data"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function gse(t){const e={},n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function yse(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function _se(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],dse(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],pse(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],gse(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function Ese(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],hse(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],mse(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],yse(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function Tse(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>_se(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function vse(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ese(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function e2(t){const e={},n=h(t,["text"]);n!=null&&m(e,["text"],n);const i=h(t,["finished"]);return i!=null&&m(e,["finished"],i),e}function t2(t){const e={},n=h(t,["text"]);n!=null&&m(e,["text"],n);const i=h(t,["finished"]);return i!=null&&m(e,["finished"],i),e}function Sse(t){const e={},n=h(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=h(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function Cse(t){const e={},n=h(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Sse(r))),m(e,["urlMetadata"],i)}return e}function Ase(t){const e={},n=h(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Tse(n));const i=h(t,["turnComplete"]);i!=null&&m(e,["turnComplete"],i);const r=h(t,["interrupted"]);r!=null&&m(e,["interrupted"],r);const s=h(t,["groundingMetadata"]);s!=null&&m(e,["groundingMetadata"],s);const a=h(t,["generationComplete"]);a!=null&&m(e,["generationComplete"],a);const l=h(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],e2(l));const f=h(t,["outputTranscription"]);f!=null&&m(e,["outputTranscription"],e2(f));const d=h(t,["urlContextMetadata"]);return d!=null&&m(e,["urlContextMetadata"],Cse(d)),e}function bse(t){const e={},n=h(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],vse(n));const i=h(t,["turnComplete"]);i!=null&&m(e,["turnComplete"],i);const r=h(t,["interrupted"]);r!=null&&m(e,["interrupted"],r);const s=h(t,["groundingMetadata"]);s!=null&&m(e,["groundingMetadata"],s);const a=h(t,["generationComplete"]);a!=null&&m(e,["generationComplete"],a);const l=h(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],t2(l));const f=h(t,["outputTranscription"]);return f!=null&&m(e,["outputTranscription"],t2(f)),e}function Ise(t){const e={},n=h(t,["id"]);n!=null&&m(e,["id"],n);const i=h(t,["args"]);i!=null&&m(e,["args"],i);const r=h(t,["name"]);return r!=null&&m(e,["name"],r),e}function wse(t){const e={},n=h(t,["args"]);n!=null&&m(e,["args"],n);const i=h(t,["name"]);return i!=null&&m(e,["name"],i),e}function xse(t){const e={},n=h(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Ise(r))),m(e,["functionCalls"],i)}return e}function Rse(t){const e={},n=h(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>wse(r))),m(e,["functionCalls"],i)}return e}function Nse(t){const e={},n=h(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function Dse(t){const e={},n=h(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function xm(t){const e={},n=h(t,["modality"]);n!=null&&m(e,["modality"],n);const i=h(t,["tokenCount"]);return i!=null&&m(e,["tokenCount"],i),e}function Rm(t){const e={},n=h(t,["modality"]);n!=null&&m(e,["modality"],n);const i=h(t,["tokenCount"]);return i!=null&&m(e,["tokenCount"],i),e}function Mse(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const i=h(t,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const r=h(t,["responseTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const s=h(t,["toolUsePromptTokenCount"]);s!=null&&m(e,["toolUsePromptTokenCount"],s);const a=h(t,["thoughtsTokenCount"]);a!=null&&m(e,["thoughtsTokenCount"],a);const l=h(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const f=h(t,["promptTokensDetails"]);if(f!=null){let T=f;Array.isArray(T)&&(T=T.map(v=>xm(v))),m(e,["promptTokensDetails"],T)}const d=h(t,["cacheTokensDetails"]);if(d!=null){let T=d;Array.isArray(T)&&(T=T.map(v=>xm(v))),m(e,["cacheTokensDetails"],T)}const p=h(t,["responseTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(v=>xm(v))),m(e,["responseTokensDetails"],T)}const y=h(t,["toolUsePromptTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(v=>xm(v))),m(e,["toolUsePromptTokensDetails"],T)}return e}function kse(t){const e={},n=h(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const i=h(t,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const r=h(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const s=h(t,["toolUsePromptTokenCount"]);s!=null&&m(e,["toolUsePromptTokenCount"],s);const a=h(t,["thoughtsTokenCount"]);a!=null&&m(e,["thoughtsTokenCount"],a);const l=h(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const f=h(t,["promptTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(b=>Rm(b))),m(e,["promptTokensDetails"],v)}const d=h(t,["cacheTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(b=>Rm(b))),m(e,["cacheTokensDetails"],v)}const p=h(t,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(b=>Rm(b))),m(e,["responseTokensDetails"],v)}const y=h(t,["toolUsePromptTokensDetails"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(b=>Rm(b))),m(e,["toolUsePromptTokensDetails"],v)}const T=h(t,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function Pse(t){const e={},n=h(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function Lse(t){const e={},n=h(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function Ose(t){const e={},n=h(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const i=h(t,["resumable"]);i!=null&&m(e,["resumable"],i);const r=h(t,["lastConsumedClientMessageIndex"]);return r!=null&&m(e,["lastConsumedClientMessageIndex"],r),e}function Use(t){const e={},n=h(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const i=h(t,["resumable"]);i!=null&&m(e,["resumable"],i);const r=h(t,["lastConsumedClientMessageIndex"]);return r!=null&&m(e,["lastConsumedClientMessageIndex"],r),e}function Bse(t){const e={};h(t,["setupComplete"])!=null&&m(e,["setupComplete"],cse());const i=h(t,["serverContent"]);i!=null&&m(e,["serverContent"],Ase(i));const r=h(t,["toolCall"]);r!=null&&m(e,["toolCall"],xse(r));const s=h(t,["toolCallCancellation"]);s!=null&&m(e,["toolCallCancellation"],Nse(s));const a=h(t,["usageMetadata"]);a!=null&&m(e,["usageMetadata"],Mse(a));const l=h(t,["goAway"]);l!=null&&m(e,["goAway"],Pse(l));const f=h(t,["sessionResumptionUpdate"]);return f!=null&&m(e,["sessionResumptionUpdate"],Ose(f)),e}function Vse(t){const e={};h(t,["setupComplete"])!=null&&m(e,["setupComplete"],fse());const i=h(t,["serverContent"]);i!=null&&m(e,["serverContent"],bse(i));const r=h(t,["toolCall"]);r!=null&&m(e,["toolCall"],Rse(r));const s=h(t,["toolCallCancellation"]);s!=null&&m(e,["toolCallCancellation"],Dse(s));const a=h(t,["usageMetadata"]);a!=null&&m(e,["usageMetadata"],kse(a));const l=h(t,["goAway"]);l!=null&&m(e,["goAway"],Lse(l));const f=h(t,["sessionResumptionUpdate"]);return f!=null&&m(e,["sessionResumptionUpdate"],Use(f)),e}function Fse(){return{}}function Hse(t){const e={},n=h(t,["text"]);n!=null&&m(e,["text"],n);const i=h(t,["weight"]);return i!=null&&m(e,["weight"],i),e}function zse(t){const e={},n=h(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Hse(r))),m(e,["weightedPrompts"],i)}return e}function qse(t){const e={},n=h(t,["temperature"]);n!=null&&m(e,["temperature"],n);const i=h(t,["topK"]);i!=null&&m(e,["topK"],i);const r=h(t,["seed"]);r!=null&&m(e,["seed"],r);const s=h(t,["guidance"]);s!=null&&m(e,["guidance"],s);const a=h(t,["bpm"]);a!=null&&m(e,["bpm"],a);const l=h(t,["density"]);l!=null&&m(e,["density"],l);const f=h(t,["brightness"]);f!=null&&m(e,["brightness"],f);const d=h(t,["scale"]);d!=null&&m(e,["scale"],d);const p=h(t,["muteBass"]);p!=null&&m(e,["muteBass"],p);const y=h(t,["muteDrums"]);y!=null&&m(e,["muteDrums"],y);const T=h(t,["onlyBassAndDrums"]);return T!=null&&m(e,["onlyBassAndDrums"],T),e}function Gse(t){const e={},n=h(t,["clientContent"]);n!=null&&m(e,["clientContent"],zse(n));const i=h(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],qse(i)),e}function $se(t){const e={},n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const r=h(t,["sourceMetadata"]);return r!=null&&m(e,["sourceMetadata"],Gse(r)),e}function Yse(t){const e={},n=h(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>$se(r))),m(e,["audioChunks"],i)}return e}function Kse(t){const e={},n=h(t,["text"]);n!=null&&m(e,["text"],n);const i=h(t,["filteredReason"]);return i!=null&&m(e,["filteredReason"],i),e}function Wse(t){const e={};h(t,["setupComplete"])!=null&&m(e,["setupComplete"],Fse());const i=h(t,["serverContent"]);i!=null&&m(e,["serverContent"],Yse(i));const r=h(t,["filteredPrompt"]);return r!=null&&m(e,["filteredPrompt"],Kse(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xse(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function Qse(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Jse(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Zse(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Xse(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],Qse(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],Jse(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function D0(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Zse(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function jse(t){const e={},n=h(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const i=h(t,["default"]);i!=null&&m(e,["default"],i);const r=h(t,["description"]);r!=null&&m(e,["description"],r);const s=h(t,["enum"]);s!=null&&m(e,["enum"],s);const a=h(t,["example"]);a!=null&&m(e,["example"],a);const l=h(t,["format"]);l!=null&&m(e,["format"],l);const f=h(t,["items"]);f!=null&&m(e,["items"],f);const d=h(t,["maxItems"]);d!=null&&m(e,["maxItems"],d);const p=h(t,["maxLength"]);p!=null&&m(e,["maxLength"],p);const y=h(t,["maxProperties"]);y!=null&&m(e,["maxProperties"],y);const T=h(t,["maximum"]);T!=null&&m(e,["maximum"],T);const v=h(t,["minItems"]);v!=null&&m(e,["minItems"],v);const b=h(t,["minLength"]);b!=null&&m(e,["minLength"],b);const w=h(t,["minProperties"]);w!=null&&m(e,["minProperties"],w);const R=h(t,["minimum"]);R!=null&&m(e,["minimum"],R);const N=h(t,["nullable"]);N!=null&&m(e,["nullable"],N);const V=h(t,["pattern"]);V!=null&&m(e,["pattern"],V);const G=h(t,["properties"]);G!=null&&m(e,["properties"],G);const F=h(t,["propertyOrdering"]);F!=null&&m(e,["propertyOrdering"],F);const J=h(t,["required"]);J!=null&&m(e,["required"],J);const K=h(t,["title"]);K!=null&&m(e,["title"],K);const M=h(t,["type"]);return M!=null&&m(e,["type"],M),e}function eoe(t){const e={};if(h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=h(t,["category"]);n!=null&&m(e,["category"],n);const i=h(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function toe(t){const e={},n=h(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=h(t,["description"]);i!=null&&m(e,["description"],i);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=h(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=h(t,["response"]);l!=null&&m(e,["response"],l);const f=h(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function noe(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function ioe(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],noe(n)),e}function roe(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function soe(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],roe(n)),e}function ooe(){return{}}function aoe(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>toe(f))),m(e,["functionDeclarations"],l)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],ioe(i));const r=h(t,["googleSearchRetrieval"]);if(r!=null&&m(e,["googleSearchRetrieval"],soe(r)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&m(e,["urlContext"],ooe());const a=h(t,["codeExecution"]);return a!=null&&m(e,["codeExecution"],a),e}function uoe(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function loe(t){const e={},n=h(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function coe(t){const e={},n=h(t,["latLng"]);n!=null&&m(e,["latLng"],loe(n));const i=h(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function foe(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],uoe(n));const i=h(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],coe(i)),e}function doe(t){const e={},n=h(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function BO(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],doe(n)),e}function hoe(t){const e={},n=h(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=h(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],BO(i)),e}function poe(t){const e={},n=h(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>hoe(r))),m(e,["speakerVoiceConfigs"],i)}return e}function moe(t){const e={},n=h(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],BO(n));const i=h(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],poe(i));const r=h(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function goe(t){const e={},n=h(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const i=h(t,["thinkingBudget"]);return i!=null&&m(e,["thinkingBudget"],i),e}function yoe(t,e,n){const i={},r=h(e,["systemInstruction"]);n!==void 0&&r!=null&&m(n,["systemInstruction"],D0(Gi(r)));const s=h(e,["temperature"]);s!=null&&m(i,["temperature"],s);const a=h(e,["topP"]);a!=null&&m(i,["topP"],a);const l=h(e,["topK"]);l!=null&&m(i,["topK"],l);const f=h(e,["candidateCount"]);f!=null&&m(i,["candidateCount"],f);const d=h(e,["maxOutputTokens"]);d!=null&&m(i,["maxOutputTokens"],d);const p=h(e,["stopSequences"]);p!=null&&m(i,["stopSequences"],p);const y=h(e,["responseLogprobs"]);y!=null&&m(i,["responseLogprobs"],y);const T=h(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const v=h(e,["presencePenalty"]);v!=null&&m(i,["presencePenalty"],v);const b=h(e,["frequencyPenalty"]);b!=null&&m(i,["frequencyPenalty"],b);const w=h(e,["seed"]);w!=null&&m(i,["seed"],w);const R=h(e,["responseMimeType"]);R!=null&&m(i,["responseMimeType"],R);const N=h(e,["responseSchema"]);N!=null&&m(i,["responseSchema"],jse(_h(N)));const V=h(e,["responseJsonSchema"]);if(V!=null&&m(i,["responseJsonSchema"],V),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=h(e,["safetySettings"]);if(n!==void 0&&G!=null){let B=G;Array.isArray(B)&&(B=B.map(z=>eoe(z))),m(n,["safetySettings"],B)}const F=h(e,["tools"]);if(n!==void 0&&F!=null){let B=lf(F);Array.isArray(B)&&(B=B.map(z=>aoe(uf(z)))),m(n,["tools"],B)}const J=h(e,["toolConfig"]);if(n!==void 0&&J!=null&&m(n,["toolConfig"],foe(J)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=h(e,["cachedContent"]);n!==void 0&&K!=null&&m(n,["cachedContent"],$o(t,K));const M=h(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const P=h(e,["mediaResolution"]);P!=null&&m(i,["mediaResolution"],P);const L=h(e,["speechConfig"]);if(L!=null&&m(i,["speechConfig"],moe(oS(L))),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=h(e,["thinkingConfig"]);return O!=null&&m(i,["thinkingConfig"],goe(O)),i}function n2(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["contents"]);if(r!=null){let a=us(r);Array.isArray(a)&&(a=a.map(l=>D0(l))),m(n,["contents"],a)}const s=h(e,["config"]);return s!=null&&m(n,["generationConfig"],yoe(t,s,n)),n}function _oe(t,e){const n={},i=h(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const r=h(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const s=h(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&m(e,["requests[]","outputDimensionality"],s),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Eoe(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["contents"]);r!=null&&m(n,["requests[]","content"],CO(t,r));const s=h(e,["config"]);s!=null&&m(n,["config"],_oe(s,n));const a=h(e,["model"]);return a!==void 0&&m(n,["requests[]","model"],un(t,a)),n}function Toe(t,e){const n={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=h(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const r=h(t,["aspectRatio"]);e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r);const s=h(t,["guidanceScale"]);if(e!==void 0&&s!=null&&m(e,["parameters","guidanceScale"],s),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=h(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const l=h(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const f=h(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&m(e,["parameters","includeSafetyAttributes"],f);const d=h(t,["includeRaiReason"]);e!==void 0&&d!=null&&m(e,["parameters","includeRaiReason"],d);const p=h(t,["language"]);e!==void 0&&p!=null&&m(e,["parameters","language"],p);const y=h(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const T=h(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function voe(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=h(e,["config"]);return s!=null&&m(n,["config"],Toe(s,n)),n}function Soe(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","name"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function Coe(t,e,n){const i={},r=h(e,["pageSize"]);n!==void 0&&r!=null&&m(n,["_query","pageSize"],r);const s=h(e,["pageToken"]);n!==void 0&&s!=null&&m(n,["_query","pageToken"],s);const a=h(e,["filter"]);n!==void 0&&a!=null&&m(n,["_query","filter"],a);const l=h(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],IO(t,l)),i}function Aoe(t,e){const n={},i=h(e,["config"]);return i!=null&&m(n,["config"],Coe(t,i,n)),n}function boe(t,e){const n={},i=h(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=h(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const s=h(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&m(e,["defaultCheckpointId"],s),n}function Ioe(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","name"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],boe(r,n)),n}function woe(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","name"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function xoe(t){const e={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Roe(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["contents"]);if(r!=null){let a=us(r);Array.isArray(a)&&(a=a.map(l=>D0(l))),m(n,["contents"],a)}const s=h(e,["config"]);return s!=null&&m(n,["config"],xoe(s)),n}function Noe(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],Yo(n));const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Doe(t,e){const n={},i=h(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=h(t,["durationSeconds"]);if(e!==void 0&&r!=null&&m(e,["parameters","durationSeconds"],r),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=h(t,["aspectRatio"]);if(e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s),h(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=h(t,["personGeneration"]);if(e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=h(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const f=h(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&m(e,["parameters","enhancePrompt"],f),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(h(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Moe(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=h(e,["image"]);if(s!=null&&m(n,["instances[0]","image"],Noe(s)),h(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=h(e,["config"]);return a!=null&&m(n,["config"],Doe(a,n)),n}function koe(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function Poe(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["data"]);i!=null&&m(e,["data"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Loe(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Ooe(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],koe(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],Poe(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],Loe(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function cf(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ooe(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function Uoe(t){const e={},n=h(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const i=h(t,["default"]);i!=null&&m(e,["default"],i);const r=h(t,["description"]);r!=null&&m(e,["description"],r);const s=h(t,["enum"]);s!=null&&m(e,["enum"],s);const a=h(t,["example"]);a!=null&&m(e,["example"],a);const l=h(t,["format"]);l!=null&&m(e,["format"],l);const f=h(t,["items"]);f!=null&&m(e,["items"],f);const d=h(t,["maxItems"]);d!=null&&m(e,["maxItems"],d);const p=h(t,["maxLength"]);p!=null&&m(e,["maxLength"],p);const y=h(t,["maxProperties"]);y!=null&&m(e,["maxProperties"],y);const T=h(t,["maximum"]);T!=null&&m(e,["maximum"],T);const v=h(t,["minItems"]);v!=null&&m(e,["minItems"],v);const b=h(t,["minLength"]);b!=null&&m(e,["minLength"],b);const w=h(t,["minProperties"]);w!=null&&m(e,["minProperties"],w);const R=h(t,["minimum"]);R!=null&&m(e,["minimum"],R);const N=h(t,["nullable"]);N!=null&&m(e,["nullable"],N);const V=h(t,["pattern"]);V!=null&&m(e,["pattern"],V);const G=h(t,["properties"]);G!=null&&m(e,["properties"],G);const F=h(t,["propertyOrdering"]);F!=null&&m(e,["propertyOrdering"],F);const J=h(t,["required"]);J!=null&&m(e,["required"],J);const K=h(t,["title"]);K!=null&&m(e,["title"],K);const M=h(t,["type"]);return M!=null&&m(e,["type"],M),e}function Boe(t){const e={},n=h(t,["featureSelectionPreference"]);return n!=null&&m(e,["featureSelectionPreference"],n),e}function Voe(t){const e={},n=h(t,["method"]);n!=null&&m(e,["method"],n);const i=h(t,["category"]);i!=null&&m(e,["category"],i);const r=h(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function Foe(t){const e={};if(h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=h(t,["description"]);n!=null&&m(e,["description"],n);const i=h(t,["name"]);i!=null&&m(e,["name"],i);const r=h(t,["parameters"]);r!=null&&m(e,["parameters"],r);const s=h(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const a=h(t,["response"]);a!=null&&m(e,["response"],a);const l=h(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function Hoe(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function zoe(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],Hoe(n)),e}function qoe(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function Goe(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],qoe(n)),e}function $oe(){return{}}function Yoe(t){const e={},n=h(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function Koe(t){const e={},n=h(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],Yoe(n));const i=h(t,["authType"]);i!=null&&m(e,["authType"],i);const r=h(t,["googleServiceAccountConfig"]);r!=null&&m(e,["googleServiceAccountConfig"],r);const s=h(t,["httpBasicAuthConfig"]);s!=null&&m(e,["httpBasicAuthConfig"],s);const a=h(t,["oauthConfig"]);a!=null&&m(e,["oauthConfig"],a);const l=h(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function Woe(t){const e={},n=h(t,["authConfig"]);return n!=null&&m(e,["authConfig"],Koe(n)),e}function Xoe(){return{}}function VO(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>Foe(y))),m(e,["functionDeclarations"],p)}const i=h(t,["retrieval"]);i!=null&&m(e,["retrieval"],i);const r=h(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],zoe(r));const s=h(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],Goe(s)),h(t,["enterpriseWebSearch"])!=null&&m(e,["enterpriseWebSearch"],$oe());const l=h(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],Woe(l)),h(t,["urlContext"])!=null&&m(e,["urlContext"],Xoe());const d=h(t,["codeExecution"]);return d!=null&&m(e,["codeExecution"],d),e}function Qoe(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["allowedFunctionNames"]);return i!=null&&m(e,["allowedFunctionNames"],i),e}function Joe(t){const e={},n=h(t,["latitude"]);n!=null&&m(e,["latitude"],n);const i=h(t,["longitude"]);return i!=null&&m(e,["longitude"],i),e}function Zoe(t){const e={},n=h(t,["latLng"]);n!=null&&m(e,["latLng"],Joe(n));const i=h(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function joe(t){const e={},n=h(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Qoe(n));const i=h(t,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],Zoe(i)),e}function eae(t){const e={},n=h(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function tae(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],eae(n)),e}function nae(t){const e={},n=h(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],tae(n)),h(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=h(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function iae(t){const e={},n=h(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const i=h(t,["thinkingBudget"]);return i!=null&&m(e,["thinkingBudget"],i),e}function rae(t,e,n){const i={},r=h(e,["systemInstruction"]);n!==void 0&&r!=null&&m(n,["systemInstruction"],cf(Gi(r)));const s=h(e,["temperature"]);s!=null&&m(i,["temperature"],s);const a=h(e,["topP"]);a!=null&&m(i,["topP"],a);const l=h(e,["topK"]);l!=null&&m(i,["topK"],l);const f=h(e,["candidateCount"]);f!=null&&m(i,["candidateCount"],f);const d=h(e,["maxOutputTokens"]);d!=null&&m(i,["maxOutputTokens"],d);const p=h(e,["stopSequences"]);p!=null&&m(i,["stopSequences"],p);const y=h(e,["responseLogprobs"]);y!=null&&m(i,["responseLogprobs"],y);const T=h(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const v=h(e,["presencePenalty"]);v!=null&&m(i,["presencePenalty"],v);const b=h(e,["frequencyPenalty"]);b!=null&&m(i,["frequencyPenalty"],b);const w=h(e,["seed"]);w!=null&&m(i,["seed"],w);const R=h(e,["responseMimeType"]);R!=null&&m(i,["responseMimeType"],R);const N=h(e,["responseSchema"]);N!=null&&m(i,["responseSchema"],Uoe(_h(N)));const V=h(e,["responseJsonSchema"]);V!=null&&m(i,["responseJsonSchema"],V);const G=h(e,["routingConfig"]);G!=null&&m(i,["routingConfig"],G);const F=h(e,["modelSelectionConfig"]);F!=null&&m(i,["modelConfig"],Boe(F));const J=h(e,["safetySettings"]);if(n!==void 0&&J!=null){let Q=J;Array.isArray(Q)&&(Q=Q.map($=>Voe($))),m(n,["safetySettings"],Q)}const K=h(e,["tools"]);if(n!==void 0&&K!=null){let Q=lf(K);Array.isArray(Q)&&(Q=Q.map($=>VO(uf($)))),m(n,["tools"],Q)}const M=h(e,["toolConfig"]);n!==void 0&&M!=null&&m(n,["toolConfig"],joe(M));const P=h(e,["labels"]);n!==void 0&&P!=null&&m(n,["labels"],P);const L=h(e,["cachedContent"]);n!==void 0&&L!=null&&m(n,["cachedContent"],$o(t,L));const O=h(e,["responseModalities"]);O!=null&&m(i,["responseModalities"],O);const B=h(e,["mediaResolution"]);B!=null&&m(i,["mediaResolution"],B);const z=h(e,["speechConfig"]);z!=null&&m(i,["speechConfig"],nae(oS(z)));const D=h(e,["audioTimestamp"]);D!=null&&m(i,["audioTimestamp"],D);const U=h(e,["thinkingConfig"]);return U!=null&&m(i,["thinkingConfig"],iae(U)),i}function i2(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["contents"]);if(r!=null){let a=us(r);Array.isArray(a)&&(a=a.map(l=>cf(l))),m(n,["contents"],a)}const s=h(e,["config"]);return s!=null&&m(n,["generationConfig"],rae(t,s,n)),n}function sae(t,e){const n={},i=h(t,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const r=h(t,["title"]);e!==void 0&&r!=null&&m(e,["instances[]","title"],r);const s=h(t,["outputDimensionality"]);e!==void 0&&s!=null&&m(e,["parameters","outputDimensionality"],s);const a=h(t,["mimeType"]);e!==void 0&&a!=null&&m(e,["instances[]","mimeType"],a);const l=h(t,["autoTruncate"]);return e!==void 0&&l!=null&&m(e,["parameters","autoTruncate"],l),n}function oae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["contents"]);r!=null&&m(n,["instances[]","content"],CO(t,r));const s=h(e,["config"]);return s!=null&&m(n,["config"],sae(s,n)),n}function aae(t,e){const n={},i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const r=h(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const s=h(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=h(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const l=h(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const f=h(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const d=h(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=h(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const y=h(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&m(e,["parameters","includeSafetyAttributes"],y);const T=h(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const v=h(t,["language"]);e!==void 0&&v!=null&&m(e,["parameters","language"],v);const b=h(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const w=h(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&m(e,["parameters","outputOptions","compressionQuality"],w);const R=h(t,["addWatermark"]);e!==void 0&&R!=null&&m(e,["parameters","addWatermark"],R);const N=h(t,["enhancePrompt"]);return e!==void 0&&N!=null&&m(e,["parameters","enhancePrompt"],N),n}function uae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=h(e,["config"]);return s!=null&&m(n,["config"],aae(s,n)),n}function M0(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=h(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Yo(i));const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function lae(t){const e={},n=h(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const i=h(t,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const r=h(t,["maskDilation"]);return r!=null&&m(e,["dilation"],r),e}function cae(t){const e={},n=h(t,["controlType"]);n!=null&&m(e,["controlType"],n);const i=h(t,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function fae(t){const e={},n=h(t,["styleDescription"]);return n!=null&&m(e,["styleDescription"],n),e}function dae(t){const e={},n=h(t,["subjectType"]);n!=null&&m(e,["subjectType"],n);const i=h(t,["subjectDescription"]);return i!=null&&m(e,["subjectDescription"],i),e}function hae(t){const e={},n=h(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],M0(n));const i=h(t,["referenceId"]);i!=null&&m(e,["referenceId"],i);const r=h(t,["referenceType"]);r!=null&&m(e,["referenceType"],r);const s=h(t,["maskImageConfig"]);s!=null&&m(e,["maskImageConfig"],lae(s));const a=h(t,["controlImageConfig"]);a!=null&&m(e,["controlImageConfig"],cae(a));const l=h(t,["styleImageConfig"]);l!=null&&m(e,["styleImageConfig"],fae(l));const f=h(t,["subjectImageConfig"]);return f!=null&&m(e,["subjectImageConfig"],dae(f)),e}function pae(t,e){const n={},i=h(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const r=h(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const s=h(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=h(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const l=h(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const f=h(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const d=h(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=h(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const y=h(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&m(e,["parameters","includeSafetyAttributes"],y);const T=h(t,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const v=h(t,["language"]);e!==void 0&&v!=null&&m(e,["parameters","language"],v);const b=h(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const w=h(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&m(e,["parameters","outputOptions","compressionQuality"],w);const R=h(t,["editMode"]);e!==void 0&&R!=null&&m(e,["parameters","editMode"],R);const N=h(t,["baseSteps"]);return e!==void 0&&N!=null&&m(e,["parameters","editConfig","baseSteps"],N),n}function mae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=h(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(f=>hae(f))),m(n,["instances[0]","referenceImages"],l)}const a=h(e,["config"]);return a!=null&&m(n,["config"],pae(a,n)),n}function gae(t,e){const n={},i=h(t,["includeRaiReason"]);e!==void 0&&i!=null&&m(e,["parameters","includeRaiReason"],i);const r=h(t,["outputMimeType"]);e!==void 0&&r!=null&&m(e,["parameters","outputOptions","mimeType"],r);const s=h(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","compressionQuality"],s);const a=h(t,["enhanceInputImage"]);e!==void 0&&a!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],a);const l=h(t,["imagePreservationFactor"]);e!==void 0&&l!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],l);const f=h(t,["numberOfImages"]);e!==void 0&&f!=null&&m(e,["parameters","sampleCount"],f);const d=h(t,["mode"]);return e!==void 0&&d!=null&&m(e,["parameters","mode"],d),n}function yae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["image"]);r!=null&&m(n,["instances[0]","image"],M0(r));const s=h(e,["upscaleFactor"]);s!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],s);const a=h(e,["config"]);return a!=null&&m(n,["config"],gae(a,n)),n}function _ae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","name"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function Eae(t,e,n){const i={},r=h(e,["pageSize"]);n!==void 0&&r!=null&&m(n,["_query","pageSize"],r);const s=h(e,["pageToken"]);n!==void 0&&s!=null&&m(n,["_query","pageToken"],s);const a=h(e,["filter"]);n!==void 0&&a!=null&&m(n,["_query","filter"],a);const l=h(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],IO(t,l)),i}function Tae(t,e){const n={},i=h(e,["config"]);return i!=null&&m(n,["config"],Eae(t,i,n)),n}function vae(t,e){const n={},i=h(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=h(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const s=h(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&m(e,["defaultCheckpointId"],s),n}function Sae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],vae(r,n)),n}function Cae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","name"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],r),n}function Aae(t,e){const n={},i=h(t,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],cf(Gi(i)));const r=h(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>VO(l))),m(e,["tools"],a)}const s=h(t,["generationConfig"]);return e!==void 0&&s!=null&&m(e,["generationConfig"],s),n}function bae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["contents"]);if(r!=null){let a=us(r);Array.isArray(a)&&(a=a.map(l=>cf(l))),m(n,["contents"],a)}const s=h(e,["config"]);return s!=null&&m(n,["config"],Aae(s,n)),n}function Iae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["contents"]);if(r!=null){let a=us(r);Array.isArray(a)&&(a=a.map(l=>cf(l))),m(n,["contents"],a)}const s=h(e,["config"]);return s!=null&&m(n,["config"],s),n}function wae(t){const e={},n=h(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const i=h(t,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Yo(i));const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function xae(t,e){const n={},i=h(t,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const s=h(t,["fps"]);e!==void 0&&s!=null&&m(e,["parameters","fps"],s);const a=h(t,["durationSeconds"]);e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a);const l=h(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const f=h(t,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const d=h(t,["resolution"]);e!==void 0&&d!=null&&m(e,["parameters","resolution"],d);const p=h(t,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const y=h(t,["pubsubTopic"]);e!==void 0&&y!=null&&m(e,["parameters","pubsubTopic"],y);const T=h(t,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const v=h(t,["enhancePrompt"]);e!==void 0&&v!=null&&m(e,["parameters","enhancePrompt"],v);const b=h(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const w=h(t,["lastFrame"]);e!==void 0&&w!=null&&m(e,["instances[0]","lastFrame"],M0(w));const R=h(t,["compressionQuality"]);return e!==void 0&&R!=null&&m(e,["parameters","compressionQuality"],R),n}function Rae(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["_url","model"],un(t,i));const r=h(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=h(e,["image"]);s!=null&&m(n,["instances[0]","image"],M0(s));const a=h(e,["video"]);a!=null&&m(n,["instances[0]","video"],wae(a));const l=h(e,["config"]);return l!=null&&m(n,["config"],xae(l,n)),n}function Nae(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function Dae(t){const e={},n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Mae(t){const e={},n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function kae(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Nae(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],Dae(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],Mae(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function Pae(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>kae(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function Lae(t){const e={},n=h(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function Oae(t){const e={},n=h(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=h(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function Uae(t){const e={},n=h(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Oae(r))),m(e,["urlMetadata"],i)}return e}function Bae(t){const e={},n=h(t,["content"]);n!=null&&m(e,["content"],Pae(n));const i=h(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],Lae(i));const r=h(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const s=h(t,["finishReason"]);s!=null&&m(e,["finishReason"],s);const a=h(t,["urlContextMetadata"]);a!=null&&m(e,["urlContextMetadata"],Uae(a));const l=h(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const f=h(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const d=h(t,["index"]);d!=null&&m(e,["index"],d);const p=h(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const y=h(t,["safetyRatings"]);return y!=null&&m(e,["safetyRatings"],y),e}function r2(t){const e={},n=h(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(l=>Bae(l))),m(e,["candidates"],a)}const i=h(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const r=h(t,["promptFeedback"]);r!=null&&m(e,["promptFeedback"],r);const s=h(t,["usageMetadata"]);return s!=null&&m(e,["usageMetadata"],s),e}function Vae(t){const e={},n=h(t,["values"]);return n!=null&&m(e,["values"],n),e}function Fae(){return{}}function Hae(t){const e={},n=h(t,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Vae(s))),m(e,["embeddings"],r)}return h(t,["metadata"])!=null&&m(e,["metadata"],Fae()),e}function zae(t){const e={},n=h(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],Yo(n));const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function FO(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=h(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const r=h(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function qae(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["image"],zae(n));const i=h(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const r=h(t,["_self"]);return r!=null&&m(e,["safetyAttributes"],FO(r)),e}function Gae(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>qae(s))),m(e,["generatedImages"],r)}const i=h(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],FO(i)),e}function $ae(t){const e={},n=h(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=h(t,["createTime"]);i!=null&&m(e,["createTime"],i);const r=h(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function cv(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["description"]);r!=null&&m(e,["description"],r);const s=h(t,["version"]);s!=null&&m(e,["version"],s);const a=h(t,["_self"]);a!=null&&m(e,["tunedModelInfo"],$ae(a));const l=h(t,["inputTokenLimit"]);l!=null&&m(e,["inputTokenLimit"],l);const f=h(t,["outputTokenLimit"]);f!=null&&m(e,["outputTokenLimit"],f);const d=h(t,["supportedGenerationMethods"]);return d!=null&&m(e,["supportedActions"],d),e}function Yae(t,e){const n={},i=h(e,["nextPageToken"]);i!=null&&m(n,["nextPageToken"],i);const r=h(e,["_self"]);if(r!=null){let s=wO(r);Array.isArray(s)&&(s=s.map(a=>cv(a))),m(n,["models"],s)}return n}function Kae(){return{}}function Wae(t){const e={},n=h(t,["totalTokens"]);n!=null&&m(e,["totalTokens"],n);const i=h(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function Xae(t){const e={},n=h(t,["video","uri"]);n!=null&&m(e,["uri"],n);const i=h(t,["video","encodedVideo"]);i!=null&&m(e,["videoBytes"],Yo(i));const r=h(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function Qae(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],Xae(n)),e}function Jae(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Qae(a))),m(e,["generatedVideos"],s)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=h(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function Zae(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=h(t,["done"]);r!=null&&m(e,["done"],r);const s=h(t,["error"]);s!=null&&m(e,["error"],s);const a=h(t,["response","generateVideoResponse"]);return a!=null&&m(e,["response"],Jae(a)),e}function jae(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function eue(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["data"]);i!=null&&m(e,["data"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function tue(t){const e={},n=h(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=h(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function nue(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],jae(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],eue(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],tue(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function iue(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>nue(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function rue(t){const e={},n=h(t,["citations"]);return n!=null&&m(e,["citations"],n),e}function sue(t){const e={},n=h(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const i=h(t,["urlRetrievalStatus"]);return i!=null&&m(e,["urlRetrievalStatus"],i),e}function oue(t){const e={},n=h(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>sue(r))),m(e,["urlMetadata"],i)}return e}function aue(t){const e={},n=h(t,["content"]);n!=null&&m(e,["content"],iue(n));const i=h(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],rue(i));const r=h(t,["finishMessage"]);r!=null&&m(e,["finishMessage"],r);const s=h(t,["finishReason"]);s!=null&&m(e,["finishReason"],s);const a=h(t,["urlContextMetadata"]);a!=null&&m(e,["urlContextMetadata"],oue(a));const l=h(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const f=h(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const d=h(t,["index"]);d!=null&&m(e,["index"],d);const p=h(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const y=h(t,["safetyRatings"]);return y!=null&&m(e,["safetyRatings"],y),e}function s2(t){const e={},n=h(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>aue(d))),m(e,["candidates"],f)}const i=h(t,["createTime"]);i!=null&&m(e,["createTime"],i);const r=h(t,["responseId"]);r!=null&&m(e,["responseId"],r);const s=h(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const a=h(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const l=h(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function uue(t){const e={},n=h(t,["truncated"]);n!=null&&m(e,["truncated"],n);const i=h(t,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function lue(t){const e={},n=h(t,["values"]);n!=null&&m(e,["values"],n);const i=h(t,["statistics"]);return i!=null&&m(e,["statistics"],uue(i)),e}function cue(t){const e={},n=h(t,["billableCharacterCount"]);return n!=null&&m(e,["billableCharacterCount"],n),e}function fue(t){const e={},n=h(t,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>lue(s))),m(e,["embeddings"],r)}const i=h(t,["metadata"]);return i!=null&&m(e,["metadata"],cue(i)),e}function due(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=h(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Yo(i));const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function HO(t){const e={},n=h(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=h(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const r=h(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function uS(t){const e={},n=h(t,["_self"]);n!=null&&m(e,["image"],due(n));const i=h(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const r=h(t,["_self"]);r!=null&&m(e,["safetyAttributes"],HO(r));const s=h(t,["prompt"]);return s!=null&&m(e,["enhancedPrompt"],s),e}function hue(t){const e={},n=h(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>uS(s))),m(e,["generatedImages"],r)}const i=h(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],HO(i)),e}function pue(t){const e={},n=h(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>uS(r))),m(e,["generatedImages"],i)}return e}function mue(t){const e={},n=h(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>uS(r))),m(e,["generatedImages"],i)}return e}function gue(t){const e={},n=h(t,["endpoint"]);n!=null&&m(e,["name"],n);const i=h(t,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function yue(t){const e={},n=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const i=h(t,["createTime"]);i!=null&&m(e,["createTime"],i);const r=h(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function _ue(t){const e={},n=h(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const i=h(t,["epoch"]);i!=null&&m(e,["epoch"],i);const r=h(t,["step"]);return r!=null&&m(e,["step"],r),e}function fv(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=h(t,["description"]);r!=null&&m(e,["description"],r);const s=h(t,["versionId"]);s!=null&&m(e,["version"],s);const a=h(t,["deployedModels"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(T=>gue(T))),m(e,["endpoints"],y)}const l=h(t,["labels"]);l!=null&&m(e,["labels"],l);const f=h(t,["_self"]);f!=null&&m(e,["tunedModelInfo"],yue(f));const d=h(t,["defaultCheckpointId"]);d!=null&&m(e,["defaultCheckpointId"],d);const p=h(t,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(T=>_ue(T))),m(e,["checkpoints"],y)}return e}function Eue(t,e){const n={},i=h(e,["nextPageToken"]);i!=null&&m(n,["nextPageToken"],i);const r=h(e,["_self"]);if(r!=null){let s=wO(r);Array.isArray(s)&&(s=s.map(a=>fv(a))),m(n,["models"],s)}return n}function Tue(){return{}}function vue(t){const e={},n=h(t,["totalTokens"]);return n!=null&&m(e,["totalTokens"],n),e}function Sue(t){const e={},n=h(t,["tokensInfo"]);return n!=null&&m(e,["tokensInfo"],n),e}function Cue(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=h(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Yo(i));const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Aue(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],Cue(n)),e}function bue(t){const e={},n=h(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Aue(a))),m(e,["generatedVideos"],s)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=h(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function Iue(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=h(t,["done"]);r!=null&&m(e,["done"],r);const s=h(t,["error"]);s!=null&&m(e,["error"],s);const a=h(t,["response"]);return a!=null&&m(e,["response"],bue(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wue="Content-Type",xue="X-Server-Timeout",Rue="User-Agent",dv="x-goog-api-client",Nue="1.7.0",Due=`google-genai-sdk/${Nue}`,Mue="v1beta1",kue="v1beta",o2=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Pue{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Mue,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:kue,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,l]of Object.entries(e.queryParams))r.searchParams.append(a,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const r=new AbortController,s=r.signal;n.timeout&&n?.timeout>0&&setTimeout(()=>r.abort(),n.timeout),i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=s}return n&&n.extraBody!==null&&Lue(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await a2(r),new rv(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await a2(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Ac(this,arguments,function*(){const r=(n=e?.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:l,value:f}=yield An(r.read());if(l){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(f);try{const y=JSON.parse(d);if("error"in y){const T=JSON.parse(JSON.stringify(y.error)),v=T.status,b=T.code,w=`got status: ${v}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new N0({message:w,status:b})}}catch(y){if(y.name==="ApiError")throw y}a+=d;let p=a.match(o2);for(;p;){const y=p[1];try{const T=new Response(y,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield An(new rv(T)),a=a.slice(p[0].length),p=a.match(o2)}catch(T){throw new Error(`exception parsing stream chunk ${y}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Due+" "+this.clientOptions.userAgentExtra;return e[Rue]=n,e[dv]=n,e[wue]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))n.append(i,r);e.timeout&&e.timeout>0&&n.append(xue,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);r.sizeBytes=String(a.size);const l=(i=n?.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const f=await this.fetchUploadUrl(r,n);return s.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let r={};n?.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},a=await this.request({path:et("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:r});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(i=a?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function a2(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new N0({message:r,status:n}):new Error(r)}}function Lue(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,a){const l=Object.assign({},s);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const d=a[f],p=l[f];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?l[f]=i(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),l[f]=d)}return l}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oue="mcp_used/unknown";function zO(t){for(const e of t)if(lS(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function qO(t){var e;const n=(e=t[dv])!==null&&e!==void 0?e:"";t[dv]=(n+` ${Oue}`).trimStart()}function Uue(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>lS(r)))!==null&&i!==void 0?i:!1}function Bue(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!lS(r)))!==null&&i!==void 0?i:!1}function lS(t){return t!==null&&typeof t=="object"&&t instanceof cS}function Vue(t,e=100){return Ac(this,arguments,function*(){let i,r=0;for(;r<e;){const s=yield An(t.listTools({cursor:i}));for(const a of s.tools)yield yield An(a),r++;if(!s.nextCursor)break;i=s.nextCursor}})}class cS{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new cS(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const p of this.mcpClients)try{for(var l=!0,f=(n=void 0,Wd(Vue(p))),d;d=await f.next(),e=d.done,!e;l=!0){r=d.value,l=!1;const y=r;a.push(y);const T=y.name;if(s[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);s[T]=p}}catch(y){n={error:y}}finally{try{!l&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Pte(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Fue(t,e,n){const i=new vte;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const s=Wse(r);Object.assign(i,s),e(i)}class Hue{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=Gue(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const p=new Promise(G=>{d=G}),y=e.callbacks,T=function(){d({})},v=this.apiClient,b={onopen:T,onmessage:G=>{Fue(v,y.onmessage,G)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(G){},onclose:(i=y?.onclose)!==null&&i!==void 0?i:function(G){}},w=this.webSocketFactory.create(f,que(a),b);w.connect(),await p;const R=un(this.apiClient,e.model),N=OO({model:R}),V=lv({setup:N});return w.send(JSON.stringify(V)),new zue(w,this.apiClient)}}class zue{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=use(e),i=UO(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=lse(e),i=lv(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=lv({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fc.PLAY)}pause(){this.sendPlaybackControl(fc.PAUSE)}stop(){this.sendPlaybackControl(fc.STOP)}resetContext(){this.sendPlaybackControl(fc.RESET_CONTEXT)}close(){this.conn.close()}}function que(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Gue(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $ue="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Yue(t,e,n){const i=new Tte;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const a=Vse(s);Object.assign(i,a)}else{const a=Bse(s);Object.assign(i,a)}e(i)}class Kue{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Hue(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,a,l;const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const y=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&zO(e.config.tools)&&qO(y);const T=Jue(y);if(this.apiClient.isVertexAI())p=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T);else{const L=this.apiClient.getApiKey();let O="BidiGenerateContent",B="key";L?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),O="BidiGenerateContentConstrained",B="access_token"),p=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${O}?${B}=${L}`}let v=()=>{};const b=new Promise(L=>{v=L}),w=e.callbacks,R=function(){var L;(L=w?.onopen)===null||L===void 0||L.call(w),v({})},N=this.apiClient,V={onopen:R,onmessage:L=>{Yue(N,w.onmessage,L)},onerror:(n=w?.onerror)!==null&&n!==void 0?n:function(L){},onclose:(i=w?.onclose)!==null&&i!==void 0?i:function(L){}},G=this.webSocketFactory.create(p,Que(T),V);G.connect(),await b;let F=un(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&F.startsWith("publishers/")){const L=this.apiClient.getProject(),O=this.apiClient.getLocation();F=`projects/${L}/locations/${O}/`+F}let J={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Fg.AUDIO]}:e.config.responseModalities=[Fg.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const K=(l=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[],M=[];for(const L of K)if(this.isCallableTool(L)){const O=L;M.push(await O.tool())}else M.push(L);M.length>0&&(e.config.tools=M);const P={model:F,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=tse(this.apiClient,P):J=ese(this.apiClient,P),delete J.config,G.send(JSON.stringify(J)),new Xue(G,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Wue={turnComplete:!0};class Xue{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=us(n.turns),e.isVertexAI()?i=i.map(r=>cf(r)):i=i.map(r=>D0(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error($ue)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Wue),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ase(e)}:n={realtimeInput:ose(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Que(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Jue(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u2=10;function l2(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t?.tools)!==null&&n!==void 0?n:[])if(Xm(a)){r=!0;break}if(!r)return!0;const s=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Xm(t){return"callTool"in t&&typeof t.callTool=="function"}function c2(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zue extends ol{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,a,l;const f=await this.processParamsForMcpUsage(n);if(!Uue(n)||l2(n.config))return await this.generateContentInternal(f);if(Bue(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,p;const y=us(f.contents),T=(s=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:u2;let v=0;for(;v<T&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const b=d.candidates[0].content,w=[];for(const R of(l=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[])if(Xm(R)){const V=await R.callTool(d.functionCalls);w.push(...V)}v++,p={role:"user",parts:w},f.contents=us(f.contents),f.contents.push(b),f.contents.push(p),c2(f.config)&&(y.push(b),y.push(p))}return c2(f.config)&&(d.automaticFunctionCallingHistory=y),d},this.generateContentStream=async n=>{if(l2(n.config)){const i=await this.processParamsForMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const a=[];if(i?.generatedImages)for(const f of i.generatedImages)f&&f?.safetyAttributes&&((r=f?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=f?.safetyAttributes:a.push(f);let l;return s?l={generatedImages:a,positivePromptSafetyAttributes:s}:l={generatedImages:a},l}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new qh(Ju.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const a=await Promise.all(s.map(async f=>Xm(f)?await f.tool():f)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(l.config.tools=a,e.config&&e.config.tools&&zO(e.config.tools)){const f=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),qO(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Xm(a)){const l=a,f=await l.tool();for(const d of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,l)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:u2;let a=!1,l=0;const f=await this.initAfcToolsMap(e);return function(d,p,y){var T,v;return Ac(this,arguments,function*(){for(var b,w,R,N;l<s;){a&&(l++,a=!1);const J=yield An(d.processParamsForMcpUsage(y)),K=yield An(d.generateContentStreamInternal(J)),M=[],P=[];try{for(var V=!0,G=(w=void 0,Wd(K)),F;F=yield An(G.next()),b=F.done,!b;V=!0){N=F.value,V=!1;const L=N;if(yield yield An(L),L.candidates&&(!((T=L.candidates[0])===null||T===void 0)&&T.content)){P.push(L.candidates[0].content);for(const O of(v=L.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<s&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(O.functionCall.name)){const B=yield An(p.get(O.functionCall.name).callTool([O.functionCall]));M.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(L){w={error:L}}finally{try{!V&&!b&&(R=G.return)&&(yield An(R.call(G)))}finally{if(w)throw w.error}}if(M.length>0){a=!0;const L=new Td;L.candidates=[{content:{role:"user",parts:M}}],yield yield An(L);const O=[];O.push(...P),O.push({role:"user",parts:M});const B=us(y.contents).concat(O);y.contents=B}else break}})}(this,f,e)}async generateContentInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=i2(this.apiClient,e);return l=et("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=s2(p),T=new Td;return Object.assign(T,y),T})}else{const d=n2(this.apiClient,e);return l=et("{model}:generateContent",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=r2(p),T=new Td;return Object.assign(T,y),T})}}async generateContentStreamInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=i2(this.apiClient,e);return l=et("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(y){return Ac(this,arguments,function*(){var T,v,b,w;try{for(var R=!0,N=Wd(y),V;V=yield An(N.next()),T=V.done,!T;R=!0){w=V.value,R=!1;const F=s2(yield An(w.json())),J=new Td;Object.assign(J,F),yield yield An(J)}}catch(G){v={error:G}}finally{try{!R&&!T&&(b=N.return)&&(yield An(b.call(N)))}finally{if(v)throw v.error}}})})}else{const d=n2(this.apiClient,e);return l=et("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(y){return Ac(this,arguments,function*(){var T,v,b,w;try{for(var R=!0,N=Wd(y),V;V=yield An(N.next()),T=V.done,!T;R=!0){w=V.value,R=!1;const F=r2(yield An(w.json())),J=new Td;Object.assign(J,F),yield yield An(J)}}catch(G){v={error:G}}finally{try{!R&&!T&&(b=N.return)&&(yield An(b.call(N)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=oae(this.apiClient,e);return l=et("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=fue(p),T=new LN;return Object.assign(T,y),T})}else{const d=Eoe(this.apiClient,e);return l=et("{model}:batchEmbedContents",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Hae(p),T=new LN;return Object.assign(T,y),T})}}async generateImagesInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=uae(this.apiClient,e);return l=et("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=hue(p),T=new ON;return Object.assign(T,y),T})}else{const d=voe(this.apiClient,e);return l=et("{model}:predict",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Gae(p),T=new ON;return Object.assign(T,y),T})}}async editImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=mae(this.apiClient,e);return s=et("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=pue(f),p=new pte;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=yae(this.apiClient,e);return s=et("{model}:predict",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=mue(f),p=new mte;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=_ae(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>fv(p))}else{const d=Soe(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>cv(p))}}async listInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Tae(this.apiClient,e);return l=et("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Eue(this.apiClient,p),T=new UN;return Object.assign(T,y),T})}else{const d=Aoe(this.apiClient,e);return l=et("{models_url}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Yae(this.apiClient,p),T=new UN;return Object.assign(T,y),T})}}async update(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Sae(this.apiClient,e);return l=et("{model}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>fv(p))}else{const d=Ioe(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>cv(p))}}async delete(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Cae(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(()=>{const p=Tue(),y=new BN;return Object.assign(y,p),y})}else{const d=woe(this.apiClient,e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(()=>{const p=Kae(),y=new BN;return Object.assign(y,p),y})}}async countTokens(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=bae(this.apiClient,e);return l=et("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=vue(p),T=new VN;return Object.assign(T,y),T})}else{const d=Roe(this.apiClient,e);return l=et("{model}:countTokens",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=Wae(p),T=new VN;return Object.assign(T,y),T})}}async computeTokens(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=Iae(this.apiClient,e);return s=et("{model}:computeTokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=Sue(f),p=new gte;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Rae(this.apiClient,e);return l=et("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>Iue(p))}else{const d=Moe(this.apiClient,e);return l=et("{model}:predictLongRunning",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>Zae(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jue(t){const e={},n=h(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const i=h(t,["config"]);return i!=null&&m(e,["config"],i),e}function ele(t){const e={},n=h(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const i=h(t,["config"]);return i!=null&&m(e,["config"],i),e}function tle(t){const e={},n=h(t,["operationName"]);n!=null&&m(e,["operationName"],n);const i=h(t,["resourceName"]);i!=null&&m(e,["_url","resourceName"],i);const r=h(t,["config"]);return r!=null&&m(e,["config"],r),e}function nle(t){const e={},n=h(t,["video","uri"]);n!=null&&m(e,["uri"],n);const i=h(t,["video","encodedVideo"]);i!=null&&m(e,["videoBytes"],Yo(i));const r=h(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function ile(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],nle(n)),e}function rle(t){const e={},n=h(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>ile(a))),m(e,["generatedVideos"],s)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=h(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function sle(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=h(t,["done"]);r!=null&&m(e,["done"],r);const s=h(t,["error"]);s!=null&&m(e,["error"],s);const a=h(t,["response","generateVideoResponse"]);return a!=null&&m(e,["response"],rle(a)),e}function ole(t){const e={},n=h(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=h(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Yo(i));const r=h(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function ale(t){const e={},n=h(t,["_self"]);return n!=null&&m(e,["video"],ole(n)),e}function ule(t){const e={},n=h(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>ale(a))),m(e,["generatedVideos"],s)}const i=h(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=h(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function f2(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=h(t,["done"]);r!=null&&m(e,["done"],r);const s=h(t,["error"]);s!=null&&m(e,["error"],s);const a=h(t,["response"]);return a!=null&&m(e,["response"],ule(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lle extends ol{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;return i&&"httpOptions"in i&&(s=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:n.name,config:i})}async getVideosOperationInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=ele(e);return l=et("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>f2(p))}else{const d=jue(e);return l=et("{operationName}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>sle(p))}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=tle(e);return s=et("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f2(f))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cle(t){const e={},n=h(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function GO(t){const e={},n=h(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],cle(n)),e}function fle(t){const e={},n=h(t,["speaker"]);n!=null&&m(e,["speaker"],n);const i=h(t,["voiceConfig"]);return i!=null&&m(e,["voiceConfig"],GO(i)),e}function dle(t){const e={},n=h(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>fle(r))),m(e,["speakerVoiceConfigs"],i)}return e}function hle(t){const e={},n=h(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],GO(n));const i=h(t,["multiSpeakerVoiceConfig"]);i!=null&&m(e,["multiSpeakerVoiceConfig"],dle(i));const r=h(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function ple(t){const e={},n=h(t,["fps"]);n!=null&&m(e,["fps"],n);const i=h(t,["endOffset"]);i!=null&&m(e,["endOffset"],i);const r=h(t,["startOffset"]);return r!=null&&m(e,["startOffset"],r),e}function mle(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["data"]);n!=null&&m(e,["data"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function gle(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=h(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=h(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function yle(t){const e={},n=h(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],ple(n));const i=h(t,["thought"]);i!=null&&m(e,["thought"],i);const r=h(t,["inlineData"]);r!=null&&m(e,["inlineData"],mle(r));const s=h(t,["fileData"]);s!=null&&m(e,["fileData"],gle(s));const a=h(t,["thoughtSignature"]);a!=null&&m(e,["thoughtSignature"],a);const l=h(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const f=h(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const d=h(t,["functionCall"]);d!=null&&m(e,["functionCall"],d);const p=h(t,["functionResponse"]);p!=null&&m(e,["functionResponse"],p);const y=h(t,["text"]);return y!=null&&m(e,["text"],y),e}function _le(t){const e={},n=h(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>yle(s))),m(e,["parts"],r)}const i=h(t,["role"]);return i!=null&&m(e,["role"],i),e}function Ele(t){const e={},n=h(t,["behavior"]);n!=null&&m(e,["behavior"],n);const i=h(t,["description"]);i!=null&&m(e,["description"],i);const r=h(t,["name"]);r!=null&&m(e,["name"],r);const s=h(t,["parameters"]);s!=null&&m(e,["parameters"],s);const a=h(t,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=h(t,["response"]);l!=null&&m(e,["response"],l);const f=h(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function Tle(t){const e={},n=h(t,["startTime"]);n!=null&&m(e,["startTime"],n);const i=h(t,["endTime"]);return i!=null&&m(e,["endTime"],i),e}function vle(t){const e={},n=h(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],Tle(n)),e}function Sle(t){const e={},n=h(t,["mode"]);n!=null&&m(e,["mode"],n);const i=h(t,["dynamicThreshold"]);return i!=null&&m(e,["dynamicThreshold"],i),e}function Cle(t){const e={},n=h(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Sle(n)),e}function Ale(){return{}}function ble(t){const e={},n=h(t,["functionDeclarations"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(f=>Ele(f))),m(e,["functionDeclarations"],l)}if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=h(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],vle(i));const r=h(t,["googleSearchRetrieval"]);if(r!=null&&m(e,["googleSearchRetrieval"],Cle(r)),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(h(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");h(t,["urlContext"])!=null&&m(e,["urlContext"],Ale());const a=h(t,["codeExecution"]);return a!=null&&m(e,["codeExecution"],a),e}function Ile(t){const e={},n=h(t,["handle"]);if(n!=null&&m(e,["handle"],n),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function d2(){return{}}function wle(t){const e={},n=h(t,["disabled"]);n!=null&&m(e,["disabled"],n);const i=h(t,["startOfSpeechSensitivity"]);i!=null&&m(e,["startOfSpeechSensitivity"],i);const r=h(t,["endOfSpeechSensitivity"]);r!=null&&m(e,["endOfSpeechSensitivity"],r);const s=h(t,["prefixPaddingMs"]);s!=null&&m(e,["prefixPaddingMs"],s);const a=h(t,["silenceDurationMs"]);return a!=null&&m(e,["silenceDurationMs"],a),e}function xle(t){const e={},n=h(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],wle(n));const i=h(t,["activityHandling"]);i!=null&&m(e,["activityHandling"],i);const r=h(t,["turnCoverage"]);return r!=null&&m(e,["turnCoverage"],r),e}function Rle(t){const e={},n=h(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function Nle(t){const e={},n=h(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const i=h(t,["slidingWindow"]);return i!=null&&m(e,["slidingWindow"],Rle(i)),e}function Dle(t){const e={},n=h(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function Mle(t,e){const n={},i=h(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=h(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const s=h(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const a=h(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const l=h(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const f=h(t,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const d=h(t,["mediaResolution"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","mediaResolution"],d);const p=h(t,["seed"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","seed"],p);const y=h(t,["speechConfig"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","speechConfig"],hle(aS(y)));const T=h(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],T);const v=h(t,["systemInstruction"]);e!==void 0&&v!=null&&m(e,["setup","systemInstruction"],_le(Gi(v)));const b=h(t,["tools"]);if(e!==void 0&&b!=null){let J=lf(b);Array.isArray(J)&&(J=J.map(K=>ble(uf(K)))),m(e,["setup","tools"],J)}const w=h(t,["sessionResumption"]);e!==void 0&&w!=null&&m(e,["setup","sessionResumption"],Ile(w));const R=h(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&m(e,["setup","inputAudioTranscription"],d2());const N=h(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&m(e,["setup","outputAudioTranscription"],d2());const V=h(t,["realtimeInputConfig"]);e!==void 0&&V!=null&&m(e,["setup","realtimeInputConfig"],xle(V));const G=h(t,["contextWindowCompression"]);e!==void 0&&G!=null&&m(e,["setup","contextWindowCompression"],Nle(G));const F=h(t,["proactivity"]);return e!==void 0&&F!=null&&m(e,["setup","proactivity"],Dle(F)),n}function kle(t,e){const n={},i=h(e,["model"]);i!=null&&m(n,["setup","model"],un(t,i));const r=h(e,["config"]);return r!=null&&m(n,["config"],Mle(r,n)),n}function Ple(t,e,n){const i={},r=h(e,["expireTime"]);n!==void 0&&r!=null&&m(n,["expireTime"],r);const s=h(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&m(n,["newSessionExpireTime"],s);const a=h(e,["uses"]);n!==void 0&&a!=null&&m(n,["uses"],a);const l=h(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&m(n,["bidiGenerateContentSetup"],kle(t,l));const f=h(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&m(n,["fieldMask"],f),i}function Lle(t,e){const n={},i=h(e,["config"]);return i!=null&&m(n,["config"],Ple(t,i,n)),n}function Ole(t){const e={},n=h(t,["name"]);return n!=null&&m(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ule(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function Ble(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=Ule(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const f=[];s&&f.push(s),l.length>0&&f.push(...l),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Vle extends ol{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=Lle(this.apiClient,e);s=et("auth_tokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query;const f=Ble(l,e.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>Ole(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fle(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=h(t,["config"]);return i!=null&&m(e,["config"],i),e}function Hle(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=h(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const s=h(t,["filter"]);return e!==void 0&&s!=null&&m(e,["_query","filter"],s),n}function zle(t){const e={},n=h(t,["config"]);return n!=null&&m(e,["config"],Hle(n,e)),e}function qle(t){const e={},n=h(t,["textInput"]);n!=null&&m(e,["textInput"],n);const i=h(t,["output"]);return i!=null&&m(e,["output"],i),e}function Gle(t){const e={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=h(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>qle(r))),m(e,["examples","examples"],i)}return e}function $le(t,e){const n={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=h(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&m(e,["displayName"],i),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=h(t,["epochCount"]);e!==void 0&&r!=null&&m(e,["tuningTask","hyperparameters","epochCount"],r);const s=h(t,["learningRateMultiplier"]);if(s!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=h(t,["batchSize"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","batchSize"],a);const l=h(t,["learningRate"]);return e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","learningRate"],l),n}function Yle(t){const e={},n=h(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=h(t,["trainingDataset"]);i!=null&&m(e,["tuningTask","trainingData"],Gle(i));const r=h(t,["config"]);return r!=null&&m(e,["config"],$le(r,e)),e}function Kle(t){const e={},n=h(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=h(t,["config"]);return i!=null&&m(e,["config"],i),e}function Wle(t,e){const n={},i=h(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=h(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const s=h(t,["filter"]);return e!==void 0&&s!=null&&m(e,["_query","filter"],s),n}function Xle(t){const e={},n=h(t,["config"]);return n!=null&&m(e,["config"],Wle(n,e)),e}function Qle(t,e){const n={},i=h(t,["gcsUri"]);if(e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Jle(t){const e={},n=h(t,["gcsUri"]);return n!=null&&m(e,["validationDatasetUri"],n),e}function Zle(t,e){const n={},i=h(t,["validationDataset"]);e!==void 0&&i!=null&&m(e,["supervisedTuningSpec"],Jle(i));const r=h(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&m(e,["tunedModelDisplayName"],r);const s=h(t,["description"]);e!==void 0&&s!=null&&m(e,["description"],s);const a=h(t,["epochCount"]);e!==void 0&&a!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const l=h(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const f=h(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=h(t,["adapterSize"]);if(e!==void 0&&d!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),h(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(h(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function jle(t){const e={},n=h(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=h(t,["trainingDataset"]);i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],Qle(i,e));const r=h(t,["config"]);return r!=null&&m(e,["config"],Zle(r,e)),e}function ece(t){const e={},n=h(t,["name"]);n!=null&&m(e,["model"],n);const i=h(t,["name"]);return i!=null&&m(e,["endpoint"],i),e}function $O(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["state"]);i!=null&&m(e,["state"],AO(i));const r=h(t,["createTime"]);r!=null&&m(e,["createTime"],r);const s=h(t,["tuningTask","startTime"]);s!=null&&m(e,["startTime"],s);const a=h(t,["tuningTask","completeTime"]);a!=null&&m(e,["endTime"],a);const l=h(t,["updateTime"]);l!=null&&m(e,["updateTime"],l);const f=h(t,["description"]);f!=null&&m(e,["description"],f);const d=h(t,["baseModel"]);d!=null&&m(e,["baseModel"],d);const p=h(t,["_self"]);p!=null&&m(e,["tunedModel"],ece(p));const y=h(t,["distillationSpec"]);y!=null&&m(e,["distillationSpec"],y);const T=h(t,["experiment"]);T!=null&&m(e,["experiment"],T);const v=h(t,["labels"]);v!=null&&m(e,["labels"],v);const b=h(t,["pipelineJob"]);b!=null&&m(e,["pipelineJob"],b);const w=h(t,["serviceAccount"]);w!=null&&m(e,["serviceAccount"],w);const R=h(t,["tunedModelDisplayName"]);return R!=null&&m(e,["tunedModelDisplayName"],R),e}function tce(t){const e={},n=h(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=h(t,["tunedModels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>$O(s))),m(e,["tuningJobs"],r)}return e}function nce(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=h(t,["done"]);r!=null&&m(e,["done"],r);const s=h(t,["error"]);return s!=null&&m(e,["error"],s),e}function ice(t){const e={},n=h(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const i=h(t,["epoch"]);i!=null&&m(e,["epoch"],i);const r=h(t,["step"]);r!=null&&m(e,["step"],r);const s=h(t,["endpoint"]);return s!=null&&m(e,["endpoint"],s),e}function rce(t){const e={},n=h(t,["model"]);n!=null&&m(e,["model"],n);const i=h(t,["endpoint"]);i!=null&&m(e,["endpoint"],i);const r=h(t,["checkpoints"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>ice(a))),m(e,["checkpoints"],s)}return e}function hv(t){const e={},n=h(t,["name"]);n!=null&&m(e,["name"],n);const i=h(t,["state"]);i!=null&&m(e,["state"],AO(i));const r=h(t,["createTime"]);r!=null&&m(e,["createTime"],r);const s=h(t,["startTime"]);s!=null&&m(e,["startTime"],s);const a=h(t,["endTime"]);a!=null&&m(e,["endTime"],a);const l=h(t,["updateTime"]);l!=null&&m(e,["updateTime"],l);const f=h(t,["error"]);f!=null&&m(e,["error"],f);const d=h(t,["description"]);d!=null&&m(e,["description"],d);const p=h(t,["baseModel"]);p!=null&&m(e,["baseModel"],p);const y=h(t,["tunedModel"]);y!=null&&m(e,["tunedModel"],rce(y));const T=h(t,["supervisedTuningSpec"]);T!=null&&m(e,["supervisedTuningSpec"],T);const v=h(t,["tuningDataStats"]);v!=null&&m(e,["tuningDataStats"],v);const b=h(t,["encryptionSpec"]);b!=null&&m(e,["encryptionSpec"],b);const w=h(t,["partnerModelTuningSpec"]);w!=null&&m(e,["partnerModelTuningSpec"],w);const R=h(t,["distillationSpec"]);R!=null&&m(e,["distillationSpec"],R);const N=h(t,["experiment"]);N!=null&&m(e,["experiment"],N);const V=h(t,["labels"]);V!=null&&m(e,["labels"],V);const G=h(t,["pipelineJob"]);G!=null&&m(e,["pipelineJob"],G);const F=h(t,["serviceAccount"]);F!=null&&m(e,["serviceAccount"],F);const J=h(t,["tunedModelDisplayName"]);return J!=null&&m(e,["tunedModelDisplayName"],J),e}function sce(t){const e={},n=h(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=h(t,["tuningJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>hv(s))),m(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oce extends ol{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new qh(Ju.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const i=await this.tuneMldevInternal(n);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:iv.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Kle(e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>hv(p))}else{const d=Fle(e);return l=et("{name}",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>$O(p))}}async listInternal(e){var n,i,r,s;let a,l="",f={};if(this.apiClient.isVertexAI()){const d=Xle(e);return l=et("tuningJobs",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const y=sce(p),T=new FN;return Object.assign(T,y),T})}else{const d=zle(e);return l=et("tunedModels",d._url),f=d._query,delete d.config,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>{const y=tce(p),T=new FN;return Object.assign(T,y),T})}}async tuneInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=jle(e);return s=et("tuningJobs",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>hv(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Yle(e);return s=et("tunedModels",l._url),a=l._query,delete l.config,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>nce(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ace{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uce=1024*1024*8,lce=3,cce=1e3,fce=2,LE="x-goog-upload-status";async function dce(t,e,n){var i,r,s;let a=0,l=0,f=new rv(new Response),d="upload";for(a=t.size;l<a;){const y=Math.min(uce,a-l),T=t.slice(l,l+y);l+y>=a&&(d+=", finalize");let v=0,b=cce;for(;v<lce&&(f=await n.request({path:"",body:T,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(l),"Content-Length":String(y)}}}),!(!((i=f?.headers)===null||i===void 0)&&i[LE]));)v++,await pce(b),b=b*fce;if(l+=y,((r=f?.headers)===null||r===void 0?void 0:r[LE])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const p=await f?.json();if(((s=f?.headers)===null||s===void 0?void 0:s[LE])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return p.file}async function hce(t){return{size:t.size,type:t.type}}function pce(t){return new Promise(e=>setTimeout(e,t))}class mce{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dce(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hce(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gce{create(e,n,i){return new yce(e,n,i)}}class yce{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h2="x-goog-api-key";class _ce{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(h2)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(h2,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ece="gl-node/";class Tce{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=hte(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new _ce(this.apiKey);this.apiClient=new Pue({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Ece+"web",uploader:new mce,downloader:new ace}),this.models=new Zue(this.apiClient),this.live=new Kue(this.apiClient,r,new gce),this.batches=new Hne(this.apiClient),this.chats=new $ie(this.models,this.apiClient),this.caches=new zie(this.apiClient),this.files=new rre(this.apiClient),this.operations=new lle(this.apiClient),this.authTokens=new Vle(this.apiClient),this.tunings=new oce(this.apiClient)}}const vce=async()=>{try{await eG(Ig),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},Sce=new Tce({}),OE=async t=>{try{return{response:(await Sce.models.generateContent({model:"gemini-2.5-pro",contents:t})).text}}catch(e){throw console.error("Fetch error:",e),e}},Cce=async(t,e)=>{try{const n=`You are an expert educator and technical writer. Your task is to teach the following concept to a beginner, using clear, concise, and engaging explanations.

        Context: ${e}

        Instructions:
        - Highlight EVERY important concept or term using [square-braces], e.g., [algorithm], [variable].
        - Use simple language and break down complex ideas.
        - Provide at least one practical example or analogy.
        - Emphasize key points using markdown formatting (bold, italics, headings, lists, tables, etc.).
        - Organize the explanation with headings, lists, and tables where appropriate.
        - Use only markdown formatting for all content (including tables, lists, images, and code blocks).
        - You may embed relevant images or YouTube videos using markdown or iframes.
        - Do NOT include introductions, conclusions, or meta-commentary.
        - Start immediately with the explanation content.
        - Do NOT include any text outside the explanation.

        Concept to explain: `,i=`Summarize in exactly 40 words or less.

        CRITICAL:
        - Preserve ALL [square-braces] concepts exactly
        - Every key concept MUST use [square-braces]
        - NO introductory phrases like "Here is..." or "Summary:"
        - NO bullet points or formatting except [square-braces]
        - Start immediately with summary content
        - ONLY the summary text

        Text to summarize: `,r="You are an expert educator. You answer only in json: {[concept1], [concept2]...}. Suggest 3 topics(each not more than 5 words, each topic is encased in [square-braces]) that are a good next step at learning the following concept:",s=await OE(n+t),a=await OE(i+s.response);let f=(await OE(r+a.response)).response??"";f=f.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let d=[];try{let p=JSON.parse(f);d=Array.isArray(p.topics)?p.topics:Object.values(p)}catch{const y=f.match(/"(.*?)"/g);y&&(d=y.map(T=>T.replace(/"/g,"")))}return{firstResponse:{response:s.response?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/```/g,"").replace(/```/g,"").replace(/markdown/g,"")},secondResponse:{response:a.response?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:d}}}catch(n){throw console.error("Error in askAITwice:",n),n}},Ace=()=>{const[t,e]=q.useState(null);return q.useEffect(()=>{const i=jq(Ig,r=>{e(r),r?console.log("User signed in:",r.uid):console.log("No user signed in")});return()=>i()},[]),{user:t,signOut:async()=>{try{await vce(),e(null)}catch(i){console.error("Error in sign out:",i)}}}},YO=t=>!!(t&&t.uid),Xd=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],bc=[],bce=async t=>{if(!YO({uid:t}))throw new Error(or.AUTH_REQUIRED);try{const e=s1(As,Vr.BOARDS),n=zz(e,qz("userId","==",t),Gz("createdAt","desc")),i=await y1(n);if(i.empty){const s={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:In.now(),isOpen:!0};return await _1(Jc(As,Vr.BOARDS,s.id),s),console.log("Created default board:",s),[s]}const r=i.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched all boards:",r),r}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:In.now(),isOpen:!0,isFallback:!0}]}throw new Error(or.LOAD_FAILED)}},p2=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),Xd;try{const e=s1(As,Vr.BOARDS,t,Vr.NODES),n=await y1(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),Xd;const i=n.docs.map(r=>{const s=r.data(),a={...s.data,tokenColors:s.data?.tokenColors||{},previousNode:s.data?.previousNode||null};return{id:r.id,type:s.type,position:s.position,data:a,draggable:s.draggable,style:s.style}});return console.log("Fetched nodes from board:",i),i}catch(e){return console.error("Fetch nodes error:",e),Xd}},m2=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),bc;try{const e=s1(As,Vr.BOARDS,t,Vr.EDGES),n=await y1(e);if(n.empty)return console.log("No edges found for board, using initial edges"),bc;const i=n.docs.map(r=>({id:r.id,...r.data()}));return console.log("Fetched edges from board:",i),i}catch(e){return console.error("Fetch edges error:",e),bc}},Ice=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=Bk(As);e.forEach(i=>{const r=Jc(As,Vr.BOARDS,t,Vr.NODES,i.id),s={type:i.type,data:i.data,position:i.position,updatedAt:In.now()};i.draggable!=null&&(s.draggable=i.draggable),i.style!=null&&(s.style=i.style),n.set(r,s)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(or.SAVE_FAILED)}},wce=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=Bk(As);e.forEach(i=>{const r=Jc(As,Vr.BOARDS,t,Vr.EDGES,i.id),s={source:i.source,target:i.target,updatedAt:In.now()};i.sourceHandle!=null&&(s.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(s.targetHandle=i.targetHandle),i.style!=null&&(s.style=i.style),i.markerEnd!=null&&(s.markerEnd=i.markerEnd),n.set(r,s)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(or.SAVE_FAILED)}},xce=async(t,e,n)=>{if(!YO({uid:t}))throw new Error(or.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:In.now(),isOpen:!1};return console.log("Creating board:",i),await _1(Jc(As,Vr.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},Rce=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await Qz(Jc(As,Vr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},tc=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:In.now()};await _1(Jc(As,Vr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},Nce=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},Dce=t=>Array.isArray(t)?t.map(Nce):[],Mce=(t,e={})=>{const[n,i,r]=cV([]),[s,a,l]=fV([]),[f,d]=q.useState(!0),[p,y]=q.useState(!1),[T,v]=q.useState(!1),[b,w]=q.useState([]),[R,N]=q.useState(null),V=q.useRef(null),{showSuccess:G,showError:F,showInfo:J}=e,K=D=>{const U=D.find(Q=>Q.isOpen===!0);if(U)return U;if(D.length>0){const Q={...D[0],isOpen:!0};return tc(Q.id,Q).catch(console.error),Q}return null};q.useEffect(()=>{(async()=>{if(t)try{d(!0);const U=await bce(t.uid);w(U);const Q=U.some(oe=>oe.isFallback);Q&&F&&F("Database index missing. Please create the required Firestore index. Check console for details.");const $=K(U);if(!$){console.error("No board found for user"),F&&F("No boards found. Creating a default board..."),i(Xd),a(bc);return}N($);const[j,se]=await Promise.all([p2($.id),m2($.id)]);i(j),a(se),J&&!Q&&J("Board loaded successfully!")}catch(U){console.error("Error loading initial data:",U),F&&F("Failed to load board data. Using default board."),i(Xd),a(bc)}finally{d(!1)}})()},[t,i,a]);const M=q.useCallback(async(D,U,Q)=>{V.current&&clearTimeout(V.current);const $=setTimeout(async()=>{try{v(!0);const j=[];U&&U.length>0&&j.push(Ice(D,U)),Q&&Q.length>0&&j.push(wce(D,Q)),j.length>0&&(await Promise.all(j),console.log("Auto-save completed successfully"))}catch(j){console.error("Auto-save failed:",j),F&&F("Failed to save changes automatically")}finally{v(!1),V.current=null}},1e3);V.current=$},[F]);q.useEffect(()=>(!f&&R&&!p&&!R.isFallback&&M(R.id,n,s),()=>{V.current&&clearTimeout(V.current)}),[n,s,f,R,p]);const P=q.useCallback(async D=>{try{if(R?.id===D)return;if(R?.isFallback||b.find(Q=>Q.id===D)?.isFallback){F&&F("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(y(!0),R&&!R.isFallback){const Q={...R,isOpen:!1};await tc(R.id,Q),w($=>$.map(j=>j.id===R.id?Q:j))}const U=b.find(Q=>Q.id===D);if(U){const Q={...U,isOpen:!0};await tc(D,Q),N(Q),w(oe=>oe.map(I=>I.id===D?Q:I));const[$,j]=await Promise.all([p2(D),m2(D)]),se=Dce($);i(se),a(j),G&&G(`Switched to "${Q.name}"`)}else console.error("Board not found:",D),F&&F("Board not found")}catch(U){console.error("Error switching board:",U),F&&F("Failed to switch board. Please try again.")}finally{y(!1)}},[R,b,i,a,G,F]),L=q.useCallback(async D=>{try{if(!t)return F&&F("You must be logged in to create a board"),null;J&&J("Creating new board...");const U=await xce(t.uid,D||null,b);if(U){if(R&&!R.isFallback){const $={...R,isOpen:!1};tc(R.id,$).catch(console.error)}const Q={...U,isOpen:!0};return w($=>{const j=$.map(se=>se.id===R?.id?{...se,isOpen:!1}:se);return[Q,...j]}),N(Q),tc(U.id,Q).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:D||"New Board"},position:{x:250,y:25},draggable:!1}]),a(bc),G&&G(`Board "${U.name}" created and opened!`),Q}else return F&&F("Failed to create board. Please try again."),null}catch(U){return F&&F(`Failed to create board: ${U.message}`),null}},[t,b,R,G,F,J,i,a]),O=q.useCallback(async D=>{try{if(b.length<=1){F&&F("Cannot delete the last board!");return}if(!b.find(Q=>Q.id===D)){console.error("Board not found for deletion"),F&&F("Board not found");return}if(J&&J("Deleting board..."),R?.id===D){const Q=b.find($=>$.id!==D);Q&&await P(Q.id)}await Rce(D),w(Q=>Q.filter($=>$.id!==D)),G&&G("Board deleted successfully!")}catch(U){console.error("Error deleting board:",U),F&&F("Failed to delete board. Please try again.")}},[b,R,P,G,F,J]),B=q.useCallback(async D=>{if(R&&R.name!==D){const U={...R,name:D};N(U),w(Q=>Q.map($=>$.id===R.id?U:$));try{await tc(R.id,U),console.log("Board name updated successfully")}catch(Q){console.error("Error updating board name:",Q)}}},[R]),z=q.useCallback(()=>{V.current&&(clearTimeout(V.current),V.current=null),w([]),N(null),i([]),a([]),d(!0),y(!1),v(!1)},[i,a,V]);return{nodes:n,edges:s,allBoards:b,currentBoard:R,isLoading:f,isSwitchingBoard:p,isSaving:T,onNodesChange:r,onEdgesChange:l,setNodes:i,switchToBoard:P,createNewBoard:L,deleteBoard:O,updateBoardName:B,clearBoardState:z}},kce=({allBoards:t,currentBoard:e,createNewBoard:n,switchToBoard:i})=>{q.useEffect(()=>{const r=s=>{if((s.ctrlKey||s.metaKey)&&s.key==="n"&&(s.preventDefault(),n()),(s.ctrlKey||s.metaKey)&&s.key>="1"&&s.key<="9"){s.preventDefault();const a=parseInt(s.key)-1;t[a]&&t[a].id!==e?.id&&i(t[a].id)}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[t,e,n,i])},Pce=()=>{const[t,e]=q.useState([]),n=q.useCallback(d=>{const p=Date.now().toString(),y={id:p,timestamp:new Date,...d};return e(T=>[...T,y]),d.autoRemove!==!1&&setTimeout(()=>{i(p)},d.duration||5e3),p},[]),i=q.useCallback(d=>{e(p=>p.filter(y=>y.id!==d))},[]),r=q.useCallback(()=>{e([])},[]),s=q.useCallback((d,p={})=>n({type:"success",message:d,...p}),[n]),a=q.useCallback((d,p={})=>n({type:"error",message:d,duration:7e3,...p}),[n]),l=q.useCallback((d,p={})=>n({type:"info",message:d,...p}),[n]),f=q.useCallback((d,p={})=>n({type:"warning",message:d,duration:6e3,...p}),[n]);return{notifications:t,addNotification:n,removeNotification:i,clearAllNotifications:r,showSuccess:s,showError:a,showInfo:l,showWarning:f}},KO=t=>{const e=[],n=t.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(s=>s.trim()!=="").forEach(s=>{e.push({word:s.trim()})});else{const r=n[i].trim();r.split(/\s+/).filter(a=>a.trim()!=="").forEach(a=>{e.push({word:a.trim(),myConcept:r})})}return e},g2=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},Qm=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return(e*299+n*587+i*114)/1e3>=128?"#000000":"#ffffff"},Jm=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const i=parseInt(n,16),r=255,s=e,a=i>>16,l=i>>8&255,f=i&255,d=Math.round((r-a)*s)+a,p=Math.round((r-l)*s)+l,y=Math.round((r-f)*s)+f;return`#${(16777216+d*65536+p*256+y).toString(16).slice(1)}`},Lce=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16),s=30,a=Math.min(255,Math.max(0,n+(Math.random()-.5)*s*2)),l=Math.min(255,Math.max(0,i+(Math.random()-.5)*s*2)),f=Math.min(255,Math.max(0,r+(Math.random()-.5)*s*2));return`#${Math.round(a).toString(16).padStart(2,"0")}${Math.round(l).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},Oce=(t,e)=>{const r=[0,45,90,135,180,225,270,315];for(const a of r){const l=a*Math.PI/180,f=t.x+Math.cos(l)*200,d=t.y+Math.sin(l)*200;if(!e.some(y=>Math.sqrt(Math.pow(y.position.x-f,2)+Math.pow(y.position.y-d,2))<150))return{x:f,y:d}}const s=Math.random()*2*Math.PI;return{x:t.x+Math.cos(s)*(200+Math.random()*100),y:t.y+Math.sin(s)*(200+Math.random()*100)}},Uce=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Bce=(t,e)=>`edge_${t}_${e}`,Vce=(t,e,n,i,r,s,a)=>({id:Uce(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:i,full_text:n,suggestions:[],myColor:r,tokenColors:{},previousNode:a}}),Fce=(t,e,n,i)=>({id:Bce(t,e),source:t,target:e,sourceHandle:i,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:nh.ArrowClosed,color:n}}),WO=q.createContext(null),Hce=({children:t,nodes:e,onNodesChange:n,onEdgesChange:i,setNodes:r,showExplanation:s})=>{const a=q.useCallback((l,f,d,p,y,T,v)=>{const b=e.find(K=>K.id===f);if(!b)return null;const w=b.data.tokenColors||{},R=l.myConcept||l.word;if(w[R])return console.log(`Token "${R}" is already colored, ignoring click`),null;let N;p==="staticEditable"?N=g2():N=y?Lce(y):g2();const V={...w};l.myConcept?V[l.myConcept]=N:V[l.word]=N,r(K=>K.map(M=>M.id===f?{...M,data:{...M.data,tokenColors:V}}:M));const G=Oce(d,e),F=Vce(G,"Loading...","Loading...","Loading...",N,p,f);F.data.isLoading=!0;const J=Fce(f,F.id,N,v);return n([{type:"add",item:F}]),i([{type:"add",item:J}]),Cce(l.word,T||"").then(K=>{const M=K.firstResponse?.response||l.word,P=K.secondResponse?.response||l.word,L=K.thirdResponse?.response||{};r(O=>O.map(B=>B.id===F.id?{...B,data:{...B.data,label:P,title:l.word,summary:P,full_text:M,suggestions:L,isLoading:!1}}:B))}).catch(()=>{r(K=>K.map(M=>M.id===F.id?{...M,data:{...M.data,label:l.word,title:l.word,summary:l.word,full_text:l.word,suggestions:[],isLoading:!1}}:M))}),N},[e,n,i,r]);return ie.jsx(WO.Provider,{value:{handleTokenClick:a,setNodes:r,showExplanation:s},children:t})},XO=()=>{const t=q.useContext(WO);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},QO=({size:t="medium",color:e="#4f86f7"})=>ie.jsx("div",{className:`loading-spinner ${t}`,children:ie.jsx("div",{className:"spinner-ring",style:{borderTopColor:e}})});function zce({data:t,id:e}){const[n,i]=q.useState(!1),[r,s]=q.useState(t.summary||t.label||"Static Node"),[a,l]=q.useState(!1),{handleTokenClick:f,showExplanation:d}=XO(),{getNode:p,setViewport:y}=Ch();q.useEffect(()=>{n||s(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const T=q.useMemo(()=>KO(r),[r]),v=q.useCallback((P,L)=>{L.stopPropagation(),console.log("Static Token clicked:",P),f(P,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",P.suggestionId)},[e,f,t.myColor]),b=q.useCallback(P=>{P.stopPropagation(),i(!0)},[]),w=q.useCallback(()=>{i(!1)},[]),R=q.useCallback(P=>{P.stopPropagation()},[]),N=q.useCallback(P=>{P.stopPropagation(),P.key==="Enter"&&w(),P.key==="Escape"&&(s(t.summary||t.label||"Static Node"),i(!1))},[w,t.summary,t.label]),V=q.useCallback(P=>{P.stopPropagation(),l(!a)},[a]),G=q.useCallback(P=>{P.stopPropagation(),d&&d(r,t.full_text||"No detailed information available.")},[d,r,t.full_text]),F=q.useCallback(P=>{if(P.stopPropagation(),t.previousNode){const L=p(t.previousNode);if(L){const{x:O,y:B}=L.position;y({x:-O+200,y:-B+100,zoom:1},{duration:500})}}},[t.previousNode,p,y]),J=q.useMemo(()=>{const P=t.tokenColors||{};return T.map((L,O)=>{const B=L.myConcept||L.word,z=P[B],D=!z;return ie.jsxs("span",{className:`word-token ${D?"":"disabled"} ${L.myConcept?"concept-highlight":""}`,style:{backgroundColor:z||"transparent",color:z?t.myColor||"#ffffff":"inherit",border:z?`1px solid ${z}`:""},onClick:U=>D?v(L,U):U.stopPropagation(),children:[L.word,O<T.length-1?" ":""]},O)})},[T,v,t.tokenColors,t.myColor]),K=q.useMemo(()=>ie.jsxs("div",{className:"node-buttons",children:[t.previousNode&&ie.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:F,title:"Go to previous node",children:""}),T.length>5&&ie.jsx("button",{className:"node-expand-btn",onClick:V,title:a?"Show less":"Show more",children:a?"":"+"}),ie.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:G,title:"Show full text",children:""})]}),[T.length,V,a,G,t.previousNode,F]),M=q.useMemo(()=>t.isLoading?ie.jsxs("div",{className:"node-loading-content",children:[ie.jsx(QO,{size:"small",color:t.myColor||"#4f86f7"}),ie.jsx("span",{className:"loading-text",children:"Loading concept..."})]}):n?ie.jsx("input",{type:"text",value:r,onChange:P=>s(P.target.value),onBlur:w,onKeyDown:N,onClick:R,className:"node-input nodrag",autoFocus:!0}):ie.jsxs("div",{className:"node-layout",children:[ie.jsx("div",{className:"node-header",children:ie.jsx("div",{className:"node-title",children:t.title||"Node"})}),ie.jsxs("div",{className:"node-main-content",children:[ie.jsx("div",{className:"node-summary-section",children:ie.jsxs("div",{className:"node-summary-text",onClick:b,children:[J,T.length>5&&!a&&ie.jsx("span",{className:"token-truncation",children:"..."})]})}),ie.jsx("div",{className:"node-suggestions-list",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((P,L)=>{const B=(t.tokenColors||{})[P],z=!B;return ie.jsxs("span",{className:`word-token ${z?"":"disabled"}`,style:{backgroundColor:B||"transparent",color:B?t.myColor||"#ffffff":"inherit",border:B?`1px solid ${B}`:""},onClick:D=>z?v({word:P,myConcept:P,suggestionId:t.label+P+L},D):D.stopPropagation(),children:[P,L<t.suggestions.length-1?" ":"",ie.jsx(Hi,{type:"source",position:Ye.Right,id:t.label+P+L})]},L)}):ie.jsx("div",{className:"node-suggestions-empty",children:"No suggestions"})})]}),K]}),[n,r,a,T.length,b,w,N,R,J,K]);return ie.jsxs("div",{className:"static-editable-node nodrag",style:{backgroundColor:t.myColor,color:t.myColor?Qm(t.myColor):"",border:t.myColor?`2px solid ${Jm(t.myColor,20)}`:""},children:[ie.jsx("div",{className:"node-content",children:M}),ie.jsx(Hi,{type:"source",position:Ye.Bottom,id:"bottom-source"}),ie.jsx(Hi,{type:"target",position:Ye.Bottom,id:"bottom-target"})]})}function qce({data:t,id:e}){const[n,i]=q.useState(!1),[r,s]=q.useState(t.summary||t.label||"Draggable Node"),[a,l]=q.useState(t.expanded||!1),{getNodes:f,getNode:d,setViewport:p}=Ch(),{handleTokenClick:y,showExplanation:T}=XO();q.useEffect(()=>{n||s(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const v=q.useMemo(()=>KO(r),[r]),b=q.useMemo(()=>a||v.length<=5?v:v.slice(0,5),[v,a]),w=q.useCallback(()=>!0,[]),R=q.useCallback((O,B)=>{B.stopPropagation();const D=f().find(Q=>Q.id===e);return D?y(O,e,D.position,D.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},[e,f,y,t.myColor]),N=q.useCallback(O=>{O.stopPropagation(),i(!0)},[]),V=q.useCallback(()=>{i(!1)},[]),G=q.useCallback(O=>{O.stopPropagation()},[]),F=q.useCallback(O=>{O.stopPropagation(),O.key==="Enter"&&V(),O.key==="Escape"&&(s(t.summary||t.label||"Draggable Node"),i(!1))},[V,t.summary,t.label]),J=q.useCallback(O=>{O.stopPropagation(),l(!a),!a&&t.onExpand&&t.onExpand()},[a,t.onExpand]),K=q.useCallback(O=>{O.stopPropagation(),T&&T(r,t.full_text||"No detailed information available.")},[T,r,t.full_text]),M=q.useCallback(O=>{if(O.stopPropagation(),t.previousNode){const B=d(t.previousNode);if(B){const{x:z,y:D}=B.position;p({x:-z+200,y:-D+100,zoom:1},{duration:500})}}},[t.previousNode,d,p]),P=q.useMemo(()=>{const O={};return b.forEach(B=>{const z=B.myConcept||B.word;O[z]||(O[z]=[]),O[z].push(B)}),O},[b]),L=q.useMemo(()=>t.isLoading?ie.jsxs("div",{className:"node-loading-content",children:[ie.jsx(QO,{size:"small",color:t.myColor||"#4f86f7"}),ie.jsx("span",{className:"loading-text",children:"Loading concept..."})]}):n?ie.jsx("input",{type:"text",value:r,onChange:O=>s(O.target.value),onBlur:V,onKeyDown:F,onClick:G,className:"node-input nodrag",autoFocus:!0}):ie.jsxs("div",{className:"node-layout",children:[ie.jsx("div",{className:"node-header",children:ie.jsx("div",{className:"node-title",children:t.title||"Node"})}),ie.jsxs("div",{className:"node-main-content",children:[ie.jsx("div",{className:"node-summary-section",children:ie.jsxs("div",{className:"node-summary-text",onClick:N,children:[b.map((O,B)=>{const z=t.tokenColors||{},D=O.myConcept||O.word,U=z[D],Q=w()&&!U;return ie.jsxs("span",{className:`word-token ${Q?"":"disabled"} ${O.myConcept?"concept-highlight":""}`,style:{backgroundColor:U||"transparent",color:U?Qm(U):"inherit",border:U?`1px solid ${Jm(U,20)}`:""},onClick:$=>Q?R(O,$):$.stopPropagation(),children:[O.word,B<b.length-1?" ":""]},B)}),v.length>5&&!a&&ie.jsx("span",{className:"token-truncation",children:"..."})]})}),ie.jsxs("div",{className:"node-suggestions-section",children:[ie.jsx("div",{className:"node-suggestions-header",children:"Suggest"}),ie.jsx("div",{className:"node-suggestions-list",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((O,B)=>{const D=(t.tokenColors||{})[O],U=w()&&!D;return ie.jsxs("span",{className:`word-token ${U?"":"disabled"}`,style:{backgroundColor:D||"transparent",color:D?Qm(D):"inherit",border:D?`1px solid ${Jm(D,20)}`:""},onClick:Q=>U?R({word:O,myConcept:O,suggestionId:t.label+O+B},Q):Q.stopPropagation(),children:[O,B<t.suggestions.length-1?" ":"",ie.jsx(Hi,{type:"source",position:Ye.Right,id:t.label+O+B})]},B)}):ie.jsx("div",{className:"node-suggestions-empty",children:"No suggestions"})})]})]}),ie.jsxs("div",{className:"node-buttons",children:[t.previousNode&&ie.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:M,title:"Go to previous node",children:""}),v.length>5&&ie.jsx("button",{className:"node-expand-btn",onClick:J,title:a?"Show less":"Show more",children:a?"":"+"}),ie.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:K,title:"Show full text",children:""})]})]}),[n,r,b,v,a,P,N,V,F,G,J,K,R,w,t.previousNode,M,t.tokenColors,t.myColor,t.isLoading]);return ie.jsxs("div",{className:"draggable-editable-node",style:{background:t.myColor,color:t.myColor?Qm(t.myColor):"",border:t.myColor?`2px solid ${Jm(t.myColor,20)}`:""},children:[ie.jsx("div",{className:"node-content",children:L}),ie.jsx(Hi,{type:"source",position:Ye.Bottom,id:"bottom-source"}),ie.jsx(Hi,{type:"target",position:Ye.Bottom,id:"bottom-target"}),ie.jsx(Hi,{type:"source",position:Ye.Top,id:"top-source"}),ie.jsx(Hi,{type:"target",position:Ye.Top,id:"top-target"}),ie.jsx(Hi,{type:"source",position:Ye.Left,id:"left-source"}),ie.jsx(Hi,{type:"target",position:Ye.Left,id:"left-target"}),ie.jsx(Hi,{type:"source",position:Ye.Right,id:"right-source"}),ie.jsx(Hi,{type:"target",position:Ye.Right,id:"right-target"})]})}const Gce={staticEditable:zce,draggableEditable:qce};function $ce(){const[t,e]=q.useState("boards"),[n,i]=q.useState(null),{user:r,signOut:s}=Ace(),{notifications:a,removeNotification:l,showSuccess:f,showError:d,showInfo:p}=Pce(),{nodes:y,edges:T,allBoards:v,currentBoard:b,isSwitchingBoard:w,isSaving:R,onNodesChange:N,onEdgesChange:V,setNodes:G,switchToBoard:F,createNewBoard:J,deleteBoard:K,updateBoardName:M,clearBoardState:P}=Mce(r,{showSuccess:f,showError:d,showInfo:p});kce({allBoards:v,currentBoard:b,createNewBoard:J,switchToBoard:F});const L=async()=>{await s(),P()},O=q.useCallback((D,U)=>{i({title:D,text:U}),e("explanation")},[]),B=q.useCallback(D=>{e(D)},[]),z=q.useCallback(D=>{const U={id:`e${D.source}-${D.target}`,source:D.source,target:D.target,sourceHandle:D.sourceHandle,targetHandle:D.targetHandle};V([{type:"add",item:U}])},[V]);return r?ie.jsxs("div",{className:"app-layout",style:{height:"100vh",width:"100vw"},children:[ie.jsx(Dee,{notifications:a,onRemove:l}),ie.jsx("div",{style:{height:"100%"},children:ie.jsxs(Q_,{defaultSizes:[420,1e3],children:[ie.jsx(Q_.Pane,{minSize:240,maxSize:860,children:ie.jsx(xee,{allBoards:v,currentBoard:b,onSwitchBoard:F,onCreateBoard:async D=>{await J(D)},onDeleteBoard:K,onSignOut:L,isLoading:w,isCollapsed:!1,onToggleSidebar:()=>{},mode:t,onModeChange:B,explanation:n})}),ie.jsx(Q_.Pane,{children:ie.jsxs("div",{className:"main-content-pane",style:{height:"100%"},children:[ie.jsx(Ree,{name:b?.name||"Loading...",onSetName:M,user:r,isSaving:R,sidebarCollapsed:!1}),ie.jsx("div",{className:"reactflow-container",style:{height:"calc(100% - 56px)"},children:ie.jsx(Hce,{nodes:y,onNodesChange:N,onEdgesChange:V,setNodes:G,showExplanation:O,children:ie.jsxs(OD,{nodes:y,edges:T,onNodesChange:N,onEdgesChange:V,onConnect:z,nodeTypes:Gce,connectionMode:qa.Loose,fitView:!0,children:[ie.jsx(_V,{}),ie.jsx(AV,{variant:as.Cross,gap:30,size:10,lineWidth:.5,color:"#616161"})]})})})]})})]})})]}):ie.jsx(p$,{})}function Yce(){return ie.jsx($ce,{})}const JO=document.getElementById("root");if(!JO)throw new Error("Failed to find the root element");N6.createRoot(JO).render(ie.jsx(q.StrictMode,{children:ie.jsx(Yce,{})}));
