function kC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Cx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dm={exports:{}},Fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w;function DC(){if(_w)return Fc;_w=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Fc.Fragment=e,Fc.jsx=n,Fc.jsxs=n,Fc}var bw;function MC(){return bw||(bw=1,dm.exports=DC()),dm.exports}var S=MC(),hm={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function OC(){if(ww)return Ue;ww=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=v&&A[v]||A["@@iterator"],typeof A=="function"?A:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,M={};function N(A,W,Z){this.props=A,this.context=W,this.refs=M,this.updater=Z||E}N.prototype.isReactComponent={},N.prototype.setState=function(A,W){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,W,"setState")},N.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function V(){}V.prototype=N.prototype;function B(A,W,Z){this.props=A,this.context=W,this.refs=M,this.updater=Z||E}var $=B.prototype=new V;$.constructor=B,T($,N.prototype),$.isPureReactComponent=!0;var j=Array.isArray,ne={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function O(A,W,Z,Q,ee,le){return Z=le.ref,{$$typeof:t,type:A,key:W,ref:Z!==void 0?Z:null,props:le}}function R(A,W){return O(A.type,W,void 0,void 0,void 0,A.props)}function C(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function z(A){var W={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Z){return W[Z]})}var U=/\/+/g;function H(A,W){return typeof A=="object"&&A!==null&&A.key!=null?z(""+A.key):W.toString(36)}function I(){}function P(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(I,I):(A.status="pending",A.then(function(W){A.status==="pending"&&(A.status="fulfilled",A.value=W)},function(W){A.status==="pending"&&(A.status="rejected",A.reason=W)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function K(A,W,Z,Q,ee){var le=typeof A;(le==="undefined"||le==="boolean")&&(A=null);var ue=!1;if(A===null)ue=!0;else switch(le){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(A.$$typeof){case t:case e:ue=!0;break;case y:return ue=A._init,K(ue(A._payload),W,Z,Q,ee)}}if(ue)return ee=ee(A),ue=Q===""?"."+H(A,0):Q,j(ee)?(Z="",ue!=null&&(Z=ue.replace(U,"$&/")+"/"),K(ee,W,Z,"",function(Ae){return Ae})):ee!=null&&(C(ee)&&(ee=R(ee,Z+(ee.key==null||A&&A.key===ee.key?"":(""+ee.key).replace(U,"$&/")+"/")+ue)),W.push(ee)),1;ue=0;var fe=Q===""?".":Q+":";if(j(A))for(var _e=0;_e<A.length;_e++)Q=A[_e],le=fe+H(Q,_e),ue+=K(Q,W,Z,le,ee);else if(_e=b(A),typeof _e=="function")for(A=_e.call(A),_e=0;!(Q=A.next()).done;)Q=Q.value,le=fe+H(Q,_e++),ue+=K(Q,W,Z,le,ee);else if(le==="object"){if(typeof A.then=="function")return K(P(A),W,Z,Q,ee);throw W=String(A),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ue}function D(A,W,Z){if(A==null)return A;var Q=[],ee=0;return K(A,Q,"","",function(le){return W.call(Z,le,ee++)}),Q}function q(A){if(A._status===-1){var W=A._result;W=W(),W.then(function(Z){(A._status===0||A._status===-1)&&(A._status=1,A._result=Z)},function(Z){(A._status===0||A._status===-1)&&(A._status=2,A._result=Z)}),A._status===-1&&(A._status=0,A._result=W)}if(A._status===1)return A._result.default;throw A._result}var F=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function Y(){}return Ue.Children={map:D,forEach:function(A,W,Z){D(A,function(){W.apply(this,arguments)},Z)},count:function(A){var W=0;return D(A,function(){W++}),W},toArray:function(A){return D(A,function(W){return W})||[]},only:function(A){if(!C(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Ue.Component=N,Ue.Fragment=n,Ue.Profiler=a,Ue.PureComponent=B,Ue.StrictMode=i,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ne,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(A){return ne.H.useMemoCache(A)}},Ue.cache=function(A){return function(){return A.apply(null,arguments)}},Ue.cloneElement=function(A,W,Z){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var Q=T({},A.props),ee=A.key,le=void 0;if(W!=null)for(ue in W.ref!==void 0&&(le=void 0),W.key!==void 0&&(ee=""+W.key),W)!te.call(W,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&W.ref===void 0||(Q[ue]=W[ue]);var ue=arguments.length-2;if(ue===1)Q.children=Z;else if(1<ue){for(var fe=Array(ue),_e=0;_e<ue;_e++)fe[_e]=arguments[_e+2];Q.children=fe}return O(A.type,ee,void 0,void 0,le,Q)},Ue.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:l,_context:A},A},Ue.createElement=function(A,W,Z){var Q,ee={},le=null;if(W!=null)for(Q in W.key!==void 0&&(le=""+W.key),W)te.call(W,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ee[Q]=W[Q]);var ue=arguments.length-2;if(ue===1)ee.children=Z;else if(1<ue){for(var fe=Array(ue),_e=0;_e<ue;_e++)fe[_e]=arguments[_e+2];ee.children=fe}if(A&&A.defaultProps)for(Q in ue=A.defaultProps,ue)ee[Q]===void 0&&(ee[Q]=ue[Q]);return O(A,le,void 0,void 0,null,ee)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(A){return{$$typeof:d,render:A}},Ue.isValidElement=C,Ue.lazy=function(A){return{$$typeof:y,_payload:{_status:-1,_result:A},_init:q}},Ue.memo=function(A,W){return{$$typeof:p,type:A,compare:W===void 0?null:W}},Ue.startTransition=function(A){var W=ne.T,Z={};ne.T=Z;try{var Q=A(),ee=ne.S;ee!==null&&ee(Z,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Y,F)}catch(le){F(le)}finally{ne.T=W}},Ue.unstable_useCacheRefresh=function(){return ne.H.useCacheRefresh()},Ue.use=function(A){return ne.H.use(A)},Ue.useActionState=function(A,W,Z){return ne.H.useActionState(A,W,Z)},Ue.useCallback=function(A,W){return ne.H.useCallback(A,W)},Ue.useContext=function(A){return ne.H.useContext(A)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(A,W){return ne.H.useDeferredValue(A,W)},Ue.useEffect=function(A,W,Z){var Q=ne.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(A,W)},Ue.useId=function(){return ne.H.useId()},Ue.useImperativeHandle=function(A,W,Z){return ne.H.useImperativeHandle(A,W,Z)},Ue.useInsertionEffect=function(A,W){return ne.H.useInsertionEffect(A,W)},Ue.useLayoutEffect=function(A,W){return ne.H.useLayoutEffect(A,W)},Ue.useMemo=function(A,W){return ne.H.useMemo(A,W)},Ue.useOptimistic=function(A,W){return ne.H.useOptimistic(A,W)},Ue.useReducer=function(A,W,Z){return ne.H.useReducer(A,W,Z)},Ue.useRef=function(A){return ne.H.useRef(A)},Ue.useState=function(A){return ne.H.useState(A)},Ue.useSyncExternalStore=function(A,W,Z){return ne.H.useSyncExternalStore(A,W,Z)},Ue.useTransition=function(){return ne.H.useTransition()},Ue.version="19.1.0",Ue}var Ew;function zu(){return Ew||(Ew=1,hm.exports=OC()),hm.exports}var G=zu();const he=Cx(G),PC=kC({__proto__:null,default:he},[G]);var fm={exports:{}},Gc={},gm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function VC(){return xw||(xw=1,function(t){function e(D,q){var F=D.length;D.push(q);e:for(;0<F;){var Y=F-1>>>1,A=D[Y];if(0<a(A,q))D[Y]=q,D[F]=A,F=Y;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var q=D[0],F=D.pop();if(F!==q){D[0]=F;e:for(var Y=0,A=D.length,W=A>>>1;Y<W;){var Z=2*(Y+1)-1,Q=D[Z],ee=Z+1,le=D[ee];if(0>a(Q,F))ee<A&&0>a(le,Q)?(D[Y]=le,D[ee]=F,Y=ee):(D[Y]=Q,D[Z]=F,Y=Z);else if(ee<A&&0>a(le,F))D[Y]=le,D[ee]=F,Y=ee;else break e}}return q}function a(D,q){var F=D.sortIndex-q.sortIndex;return F!==0?F:D.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],p=[],y=1,v=null,b=3,E=!1,T=!1,M=!1,N=!1,V=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function j(D){for(var q=n(p);q!==null;){if(q.callback===null)i(p);else if(q.startTime<=D)i(p),q.sortIndex=q.expirationTime,e(f,q);else break;q=n(p)}}function ne(D){if(M=!1,j(D),!T)if(n(f)!==null)T=!0,te||(te=!0,H());else{var q=n(p);q!==null&&K(ne,q.startTime-D)}}var te=!1,O=-1,R=5,C=-1;function z(){return N?!0:!(t.unstable_now()-C<R)}function U(){if(N=!1,te){var D=t.unstable_now();C=D;var q=!0;try{e:{T=!1,M&&(M=!1,B(O),O=-1),E=!0;var F=b;try{t:{for(j(D),v=n(f);v!==null&&!(v.expirationTime>D&&z());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,b=v.priorityLevel;var A=Y(v.expirationTime<=D);if(D=t.unstable_now(),typeof A=="function"){v.callback=A,j(D),q=!0;break t}v===n(f)&&i(f),j(D)}else i(f);v=n(f)}if(v!==null)q=!0;else{var W=n(p);W!==null&&K(ne,W.startTime-D),q=!1}}break e}finally{v=null,b=F,E=!1}q=void 0}}finally{q?H():te=!1}}}var H;if(typeof $=="function")H=function(){$(U)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,P=I.port2;I.port1.onmessage=U,H=function(){P.postMessage(null)}}else H=function(){V(U,0)};function K(D,q){O=V(function(){D(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(D){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var F=b;b=q;try{return D()}finally{b=F}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(D,q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var F=b;b=D;try{return q()}finally{b=F}},t.unstable_scheduleCallback=function(D,q,F){var Y=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,D){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=F+A,D={id:y++,callback:q,priorityLevel:D,startTime:F,expirationTime:A,sortIndex:-1},F>Y?(D.sortIndex=F,e(p,D),n(f)===null&&D===n(p)&&(M?(B(O),O=-1):M=!0,K(ne,F-Y))):(D.sortIndex=A,e(f,D),T||E||(T=!0,te||(te=!0,H()))),D},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(D){var q=b;return function(){var F=b;b=q;try{return D.apply(this,arguments)}finally{b=F}}}}(pm)),pm}var Sw;function LC(){return Sw||(Sw=1,gm.exports=VC()),gm.exports}var mm={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function zC(){if(Tw)return bn;Tw=1;var t=zu();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:p,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,y)},bn.flushSync=function(f){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=y,i.d.f()}},bn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:E}):y==="script"&&i.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},bn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(f,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bn.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,p){return f(p)},bn.useFormState=function(f,p,y){return c.H.useFormState(f,p,y)},bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},bn.version="19.1.0",bn}var Aw;function Nx(){if(Aw)return mm.exports;Aw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mm.exports=zC(),mm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function UC(){if(Rw)return Gc;Rw=1;var t=LC(),e=zu(),n=Nx();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var g=o.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===o)return d(g),r;if(m===u)return d(g),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=m;else{for(var x=!1,k=g.child;k;){if(k===o){x=!0,o=g,u=m;break}if(k===u){x=!0,u=g,o=m;break}k=k.sibling}if(!x){for(k=m.child;k;){if(k===o){x=!0,o=m,u=g;break}if(k===u){x=!0,u=m,o=g;break}k=k.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),$=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var I=Symbol.for("react.client.reference");function P(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===I?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case T:return"Fragment";case N:return"Profiler";case M:return"StrictMode";case ne:return"Suspense";case te:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case E:return"Portal";case $:return(r.displayName||"Context")+".Provider";case B:return(r._context.displayName||"Context")+".Consumer";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return s=r.displayName||null,s!==null?s:P(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return P(r(s))}catch{}}return null}var K=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Y=[],A=-1;function W(r){return{current:r}}function Z(r){0>A||(r.current=Y[A],Y[A]=null,A--)}function Q(r,s){A++,Y[A]=r.current,r.current=s}var ee=W(null),le=W(null),ue=W(null),fe=W(null);function _e(r,s){switch(Q(ue,s),Q(le,r),Q(ee,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Yb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Yb(s),r=Kb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Z(ee),Q(ee,r)}function Ae(){Z(ee),Z(le),Z(ue)}function Re(r){r.memoizedState!==null&&Q(fe,r);var s=ee.current,o=Kb(s,r.type);s!==o&&(Q(le,r),Q(ee,o))}function rt(r){le.current===r&&(Z(ee),Z(le)),fe.current===r&&(Z(fe),jc._currentValue=F)}var it=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,$e=t.unstable_cancelCallback,Be=t.unstable_shouldYield,Ze=t.unstable_requestPaint,ze=t.unstable_now,we=t.unstable_getCurrentPriorityLevel,Rt=t.unstable_ImmediatePriority,vn=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,Fn=t.unstable_LowPriority,An=t.unstable_IdlePriority,Rn=t.log,Nr=t.unstable_setDisableYieldValue,ot=null,Ye=null;function zt(r){if(typeof Rn=="function"&&Nr(r),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ot,r)}catch{}}var Et=Math.clz32?Math.clz32:Jt,Gr=Math.log,Ut=Math.LN2;function Jt(r){return r>>>=0,r===0?32:31-(Gr(r)/Ut|0)|0}var Cn=256,Nn=4194304;function en(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cn(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var g=0,m=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var k=u&134217727;return k!==0?(u=k&~m,u!==0?g=en(u):(x&=k,x!==0?g=en(x):o||(o=k&~r,o!==0&&(g=en(o))))):(k=u&~m,k!==0?g=en(k):x!==0?g=en(x):o||(o=u&~r,o!==0&&(g=en(o)))),g===0?0:s!==0&&s!==g&&(s&m)===0&&(m=g&-g,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:g}function In(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Si(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(){var r=Cn;return Cn<<=1,(Cn&4194048)===0&&(Cn=256),r}function Ir(){var r=Nn;return Nn<<=1,(Nn&62914560)===0&&(Nn=4194304),r}function Gn(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ur(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Yn(r,s,o,u,g,m){var x=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var k=r.entanglements,X=r.expirationTimes,ae=r.hiddenUpdates;for(o=x&~o;0<o;){var ge=31-Et(o),me=1<<ge;k[ge]=0,X[ge]=-1;var oe=ae[ge];if(oe!==null)for(ae[ge]=null,ge=0;ge<oe.length;ge++){var ce=oe[ge];ce!==null&&(ce.lane&=-536870913)}o&=~me}u!==0&&dr(r,u,0),m!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=m&~(x&~s))}function dr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Et(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function ca(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Et(o),g=1<<u;g&s|r[u]&s&&(r[u]|=s),o&=~g}}function Yr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function as(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Kr(){var r=q.p;return r!==0?r:(r=window.event,r===void 0?32:fw(r.type))}function uo(r,s){var o=q.p;try{return q.p=r,s()}finally{q.p=o}}var yt=Math.random().toString(36).slice(2),Ot="__reactFiber$"+yt,Ct="__reactProps$"+yt,Ln="__reactContainer$"+yt,ua="__reactEvents$"+yt,Gl="__reactListeners$"+yt,Xr="__reactHandles$"+yt,ho="__reactResources$"+yt,Ai="__reactMarker$"+yt;function Qr(r){delete r[Ot],delete r[Ct],delete r[ua],delete r[Gl],delete r[Xr]}function hr(r){var s=r[Ot];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ln]||o[Ot]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Zb(r);r!==null;){if(o=r[Ot])return o;r=Zb(r)}return s}r=o,o=r.parentNode}return null}function fr(r){if(r=r[Ot]||r[Ln]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function gr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function un(r){var s=r[ho];return s||(s=r[ho]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(r){r[Ai]=!0}var da=new Set,os={};function Kn(r,s){kr(r,s),kr(r+"Capture",s)}function kr(r,s){for(os[r]=s,r=0;r<s.length;r++)da.add(s[r])}var ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fo={},Ri={};function go(r){return it.call(Ri,r)?!0:it.call(fo,r)?!1:ha.test(r)?Ri[r]=!0:(fo[r]=!0,!1)}function Wr(r,s,o){if(go(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function pr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Zr,po;function Dr(r){if(Zr===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Zr=s&&s[1]||"",po=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zr+r+po}var ls=!1;function Jr(r,s){if(!r||ls)return"";ls=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ce){var oe=ce}Reflect.construct(r,[],me)}else{try{me.call()}catch(ce){oe=ce}r.call(me.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(me=r())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),x=m[0],k=m[1];if(x&&k){var X=x.split(`
`),ae=k.split(`
`);for(g=u=0;u<X.length&&!X[u].includes("DetermineComponentFrameRoot");)u++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(u===X.length||g===ae.length)for(u=X.length-1,g=ae.length-1;1<=u&&0<=g&&X[u]!==ae[g];)g--;for(;1<=u&&0<=g;u--,g--)if(X[u]!==ae[g]){if(u!==1||g!==1)do if(u--,g--,0>g||X[u]!==ae[g]){var ge=`
`+X[u].replace(" at new "," at ");return r.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",r.displayName)),ge}while(1<=u&&0<=g);break}}}finally{ls=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Dr(o):""}function Yl(r){switch(r.tag){case 26:case 27:case 5:return Dr(r.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 15:return Jr(r.type,!1);case 11:return Jr(r.type.render,!1);case 1:return Jr(r.type,!0);case 31:return Dr("Activity");default:return""}}function mo(r){try{var s="";do s+=Yl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Kl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function pg(r){var s=Kl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(x){u=""+x,m.call(this,x)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function yo(r){r._valueTracker||(r._valueTracker=pg(r))}function Xl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Kl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function fa(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var mg=/[\n"\\]/g;function jt(r){return r.replace(mg,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xn(r,s,o,u,g,m,x,k){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+kn(s)):r.value!==""+kn(s)&&(r.value=""+kn(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?cs(r,x,kn(s)):o!=null?cs(r,x,kn(o)):u!=null&&r.removeAttribute("value"),g==null&&m!=null&&(r.defaultChecked=!!m),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.name=""+kn(k):r.removeAttribute("name")}function ga(r,s,o,u,g,m,x,k){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+kn(o):"",s=s!=null?""+kn(s):o,k||s===r.value||(r.value=s),r.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=k?r.checked:!!u,r.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x)}function cs(r,s,o){s==="number"&&fa(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ci(r,s,o,u){if(r=r.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=s.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&u&&(r[o].defaultSelected=!0)}else{for(o=""+kn(o),s=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function ht(r,s,o){if(s!=null&&(s=""+kn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+kn(o):""}function pa(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(K(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=kn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function mr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var ma=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ed(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||ma.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Ql(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&o[g]!==u&&ed(r,g,u)}else for(var m in s)s.hasOwnProperty(m)&&ed(r,m,s[m])}function Wl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(r){return vg.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ni=null;function yr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ii=null,ki=null;function Zl(r){var s=fr(r);if(s&&(r=s.stateNode)){var o=r[Ct]||null;e:switch(r=s.stateNode,s.type){case"input":if(Xn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var g=u[Ct]||null;if(!g)throw Error(i(90));Xn(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Xl(u)}break e;case"textarea":ht(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ci(r,!!o.multiple,s,!1)}}}var ei=!1;function td(r,s,o){if(ei)return r(s,o);ei=!0;try{var u=r(s);return u}finally{if(ei=!1,(Ii!==null||ki!==null)&&(Kd(),Ii&&(s=Ii,r=ki,ki=Ii=null,Zl(s),r)))for(s=0;s<r.length;s++)Zl(r[s])}}function ya(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Ct]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Mr)try{var va={};Object.defineProperty(va,"passive",{get:function(){vr=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{vr=!1}var ti=null,us=null,Di=null;function Jl(){if(Di)return Di;var r,s=us,o=s.length,u,g="value"in ti?ti.value:ti.textContent,m=g.length;for(r=0;r<o&&s[r]===g[r];r++);var x=o-r;for(u=1;u<=x&&s[o-u]===g[m-u];u++);return Di=g.slice(r,1<u?1-u:void 0)}function ni(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ri(){return!0}function ec(){return!1}function tn(r){function s(o,u,g,m,x){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(o=r[k],this[k]=o?o(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ri:ec,this.isPropagationStopped=ec,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),s}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=tn(lt),_a=y({},lt,{view:0,detail:0}),nd=tn(_a),bo,wo,ii,ba=y({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ii&&(ii&&r.type==="mousemove"?(bo=r.screenX-ii.screenX,wo=r.screenY-ii.screenY):wo=bo=0,ii=r),bo)},movementY:function(r){return"movementY"in r?r.movementY:wo}}),_r=tn(ba),rd=y({},ba,{dataTransfer:0}),_g=tn(rd),wa=y({},_a,{relatedTarget:0}),Eo=tn(wa),tc=y({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),xo=tn(tc),id=y({},lt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),So=tn(id),bg=y({},lt,{data:0}),nc=tn(bg),Ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ad={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ad[r])?!!s[r]:!1}function xa(){return rc}var od=y({},_a,{key:function(r){if(r.key){var s=Ea[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?sd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xa,charCode:function(r){return r.type==="keypress"?ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),To=tn(od),ld=y({},ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=tn(ld),Mi=y({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xa}),cd=tn(Mi),ud=y({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),dd=tn(ud),hd=y({},ba,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ao=tn(hd),Dn=y({},lt,{newState:0,oldState:0}),fd=tn(Dn),gd=[9,13,27,32],si=Mr&&"CompositionEvent"in window,h=null;Mr&&"documentMode"in document&&(h=document.documentMode);var _=Mr&&"TextEvent"in window&&!h,w=Mr&&(!si||h&&8<h&&11>=h),L=" ",ie=!1;function de(r,s){switch(r){case"keyup":return gd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Je=!1;function Kt(r,s){switch(r){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(ie=!0,L);case"textInput":return r=s.data,r===L&&ie?null:r;default:return null}}function et(r,s){if(Je)return r==="compositionend"||!si&&de(r,s)?(r=Jl(),Di=us=ti=null,Je=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w&&s.locale!=="ko"?null:s.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!nn[r.type]:s==="textarea"}function Oi(r,s,o,u){Ii?ki?ki.push(u):ki=[u]:Ii=u,s=eh(s,"onChange"),0<s.length&&(o=new _o("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var dn=null,ai=null;function sc(r){Hb(r,0)}function pd(r){var s=gr(r);if(Xl(s))return r}function cv(r,s){if(r==="change")return s}var uv=!1;if(Mr){var wg;if(Mr){var Eg="oninput"in document;if(!Eg){var dv=document.createElement("div");dv.setAttribute("oninput","return;"),Eg=typeof dv.oninput=="function"}wg=Eg}else wg=!1;uv=wg&&(!document.documentMode||9<document.documentMode)}function hv(){dn&&(dn.detachEvent("onpropertychange",fv),ai=dn=null)}function fv(r){if(r.propertyName==="value"&&pd(ai)){var s=[];Oi(s,ai,r,yr(r)),td(sc,s)}}function oR(r,s,o){r==="focusin"?(hv(),dn=s,ai=o,dn.attachEvent("onpropertychange",fv)):r==="focusout"&&hv()}function lR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pd(ai)}function cR(r,s){if(r==="click")return pd(s)}function uR(r,s){if(r==="input"||r==="change")return pd(s)}function dR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qn=typeof Object.is=="function"?Object.is:dR;function ac(r,s){if(Qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!it.call(s,g)||!Qn(r[g],s[g]))return!1}return!0}function gv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function pv(r,s){var o=gv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=gv(o)}}function mv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?mv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function yv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=fa(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=fa(r.document)}return s}function xg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var hR=Mr&&"documentMode"in document&&11>=document.documentMode,Ro=null,Sg=null,oc=null,Tg=!1;function vv(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Tg||Ro==null||Ro!==fa(u)||(u=Ro,"selectionStart"in u&&xg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),oc&&ac(oc,u)||(oc=u,u=eh(Sg,"onSelect"),0<u.length&&(s=new _o("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Ro)))}function Sa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Co={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Ag={},_v={};Mr&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Ta(r){if(Ag[r])return Ag[r];if(!Co[r])return r;var s=Co[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in _v)return Ag[r]=s[o];return r}var bv=Ta("animationend"),wv=Ta("animationiteration"),Ev=Ta("animationstart"),fR=Ta("transitionrun"),gR=Ta("transitionstart"),pR=Ta("transitioncancel"),xv=Ta("transitionend"),Sv=new Map,Rg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rg.push("scrollEnd");function Or(r,s){Sv.set(r,s),Kn(s,[r])}var Tv=new WeakMap;function br(r,s){if(typeof r=="object"&&r!==null){var o=Tv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:mo(s)},Tv.set(r,s),s)}return{value:r,source:s,stack:mo(s)}}var wr=[],No=0,Cg=0;function md(){for(var r=No,s=Cg=No=0;s<r;){var o=wr[s];wr[s++]=null;var u=wr[s];wr[s++]=null;var g=wr[s];wr[s++]=null;var m=wr[s];if(wr[s++]=null,u!==null&&g!==null){var x=u.pending;x===null?g.next=g:(g.next=x.next,x.next=g),u.pending=g}m!==0&&Av(o,g,m)}}function yd(r,s,o,u){wr[No++]=r,wr[No++]=s,wr[No++]=o,wr[No++]=u,Cg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Ng(r,s,o,u){return yd(r,s,o,u),vd(r)}function Io(r,s){return yd(r,null,null,s),vd(r)}function Av(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var g=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(g=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,g&&s!==null&&(g=31-Et(o),r=m.hiddenUpdates,u=r[g],u===null?r[g]=[s]:u.push(s),s.lane=o|536870912),m):null}function vd(r){if(50<Dc)throw Dc=0,Pp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ko={};function mR(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,o,u){return new mR(r,s,o,u)}function Ig(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Pi(r,s){var o=r.alternate;return o===null?(o=Wn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Rv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function _d(r,s,o,u,g,m){var x=0;if(u=r,typeof r=="function")Ig(r)&&(x=1);else if(typeof r=="string")x=vC(r,o,ee.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=Wn(31,o,s,g),r.elementType=C,r.lanes=m,r;case T:return Aa(o.children,g,m,s);case M:x=8,g|=24;break;case N:return r=Wn(12,o,s,g|2),r.elementType=N,r.lanes=m,r;case ne:return r=Wn(13,o,s,g),r.elementType=ne,r.lanes=m,r;case te:return r=Wn(19,o,s,g),r.elementType=te,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:case $:x=10;break e;case B:x=9;break e;case j:x=11;break e;case O:x=14;break e;case R:x=16,u=null;break e}x=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Wn(x,o,s,g),s.elementType=r,s.type=u,s.lanes=m,s}function Aa(r,s,o,u){return r=Wn(7,r,u,s),r.lanes=o,r}function kg(r,s,o){return r=Wn(6,r,null,s),r.lanes=o,r}function Dg(r,s,o){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Do=[],Mo=0,bd=null,wd=0,Er=[],xr=0,Ra=null,Vi=1,Li="";function Ca(r,s){Do[Mo++]=wd,Do[Mo++]=bd,bd=r,wd=s}function Cv(r,s,o){Er[xr++]=Vi,Er[xr++]=Li,Er[xr++]=Ra,Ra=r;var u=Vi;r=Li;var g=32-Et(u)-1;u&=~(1<<g),o+=1;var m=32-Et(s)+g;if(30<m){var x=g-g%5;m=(u&(1<<x)-1).toString(32),u>>=x,g-=x,Vi=1<<32-Et(s)+g|o<<g|u,Li=m+r}else Vi=1<<m|o<<g|u,Li=r}function Mg(r){r.return!==null&&(Ca(r,1),Cv(r,1,0))}function Og(r){for(;r===bd;)bd=Do[--Mo],Do[Mo]=null,wd=Do[--Mo],Do[Mo]=null;for(;r===Ra;)Ra=Er[--xr],Er[xr]=null,Li=Er[--xr],Er[xr]=null,Vi=Er[--xr],Er[xr]=null}var Mn=null,Nt=null,at=!1,Na=null,oi=!1,Pg=Error(i(519));function Ia(r){var s=Error(i(418,""));throw uc(br(s,r)),Pg}function Nv(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Ot]=r,s[Ct]=u,o){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(o=0;o<Oc.length;o++)Xe(Oc[o],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),ga(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),yo(s);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),pa(s,u.value,u.defaultValue,u.children),yo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Gb(s.textContent,o)?(u.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),u.onScroll!=null&&Xe("scroll",s),u.onScrollEnd!=null&&Xe("scrollend",s),u.onClick!=null&&(s.onclick=th),s=!0):s=!1,s||Ia(r)}function Iv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:Mn=Mn.return}}function lc(r){if(r!==Mn)return!1;if(!at)return Iv(r),at=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Wp(r.type,r.memoizedProps)),o=!o),o&&Nt&&Ia(r),Iv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Nt=Vr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Nt=null}}else s===27?(s=Nt,As(r.type)?(r=tm,tm=null,Nt=r):Nt=s):Nt=Mn?Vr(r.stateNode.nextSibling):null;return!0}function cc(){Nt=Mn=null,at=!1}function kv(){var r=Na;return r!==null&&(jn===null?jn=r:jn.push.apply(jn,r),Na=null),r}function uc(r){Na===null?Na=[r]:Na.push(r)}var Vg=W(null),ka=null,zi=null;function ds(r,s,o){Q(Vg,s._currentValue),s._currentValue=o}function Ui(r){r._currentValue=Vg.current,Z(Vg)}function Lg(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function zg(r,s,o,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var m=g.dependencies;if(m!==null){var x=g.child;m=m.firstContext;e:for(;m!==null;){var k=m;m=g;for(var X=0;X<s.length;X++)if(k.context===s[X]){m.lanes|=o,k=m.alternate,k!==null&&(k.lanes|=o),Lg(m.return,o,r),u||(x=null);break e}m=k.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Lg(x,o,r),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===r){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function dc(r,s,o,u){r=null;for(var g=s,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var k=g.type;Qn(g.pendingProps.value,x.value)||(r!==null?r.push(k):r=[k])}}else if(g===fe.current){if(x=g.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(jc):r=[jc])}g=g.return}r!==null&&zg(s,r,o,u),s.flags|=262144}function Ed(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Da(r){ka=r,zi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _n(r){return Dv(ka,r)}function xd(r,s){return ka===null&&Da(r),Dv(r,s)}function Dv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},zi===null){if(r===null)throw Error(i(308));zi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else zi=zi.next=s;return o}var yR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},vR=t.unstable_scheduleCallback,_R=t.unstable_NormalPriority,Qt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ug(){return{controller:new yR,data:new Map,refCount:0}}function hc(r){r.refCount--,r.refCount===0&&vR(_R,function(){r.controller.abort()})}var fc=null,jg=0,Oo=0,Po=null;function bR(r,s){if(fc===null){var o=fc=[];jg=0,Oo=Hp(),Po={status:"pending",value:void 0,then:function(u){o.push(u)}}}return jg++,s.then(Mv,Mv),s}function Mv(){if(--jg===0&&fc!==null){Po!==null&&(Po.status="fulfilled");var r=fc;fc=null,Oo=0,Po=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function wR(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Ov=D.S;D.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&bR(r,s),Ov!==null&&Ov(r,s)};var Ma=W(null);function Bg(){var r=Ma.current;return r!==null?r:vt.pooledCache}function Sd(r,s){s===null?Q(Ma,Ma.current):Q(Ma,s.pool)}function Pv(){var r=Bg();return r===null?null:{parent:Qt._currentValue,pool:r}}var gc=Error(i(460)),Vv=Error(i(474)),Td=Error(i(542)),Hg={then:function(){}};function Lv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Ad(){}function zv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Ad,Ad),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,jv(r),r;default:if(typeof s.status=="string")s.then(Ad,Ad);else{if(r=vt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,jv(r),r}throw pc=s,gc}}var pc=null;function Uv(){if(pc===null)throw Error(i(459));var r=pc;return pc=null,r}function jv(r){if(r===gc||r===Td)throw Error(i(483))}var hs=!1;function qg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $g(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function gs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ut&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=vd(r),Av(r,null,o),s}return yd(r,u,s,o),vd(r)}function mc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ca(r,o)}}function Fg(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?g=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?g=m=s:m=m.next=s}else g=m=s;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Gg=!1;function yc(){if(Gg){var r=Po;if(r!==null)throw r}}function vc(r,s,o,u){Gg=!1;var g=r.updateQueue;hs=!1;var m=g.firstBaseUpdate,x=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var X=k,ae=X.next;X.next=null,x===null?m=ae:x.next=ae,x=X;var ge=r.alternate;ge!==null&&(ge=ge.updateQueue,k=ge.lastBaseUpdate,k!==x&&(k===null?ge.firstBaseUpdate=ae:k.next=ae,ge.lastBaseUpdate=X))}if(m!==null){var me=g.baseState;x=0,ge=ae=X=null,k=m;do{var oe=k.lane&-536870913,ce=oe!==k.lane;if(ce?(tt&oe)===oe:(u&oe)===oe){oe!==0&&oe===Oo&&(Gg=!0),ge!==null&&(ge=ge.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Oe=r,Ie=k;oe=s;var pt=o;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){me=Oe.call(pt,me,oe);break e}me=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,oe=typeof Oe=="function"?Oe.call(pt,me,oe):Oe,oe==null)break e;me=y({},me,oe);break e;case 2:hs=!0}}oe=k.callback,oe!==null&&(r.flags|=64,ce&&(r.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ge===null?(ae=ge=ce,X=me):ge=ge.next=ce,x|=oe;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;ce=k,k=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);ge===null&&(X=me),g.baseState=X,g.firstBaseUpdate=ae,g.lastBaseUpdate=ge,m===null&&(g.shared.lanes=0),Es|=x,r.lanes=x,r.memoizedState=me}}function Bv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Hv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Bv(o[r],s)}var Vo=W(null),Rd=W(0);function qv(r,s){r=Gi,Q(Rd,r),Q(Vo,s),Gi=r|s.baseLanes}function Yg(){Q(Rd,Gi),Q(Vo,Vo.current)}function Kg(){Gi=Rd.current,Z(Vo),Z(Rd)}var ps=0,He=null,ft=null,Bt=null,Cd=!1,Lo=!1,Oa=!1,Nd=0,_c=0,zo=null,ER=0;function Pt(){throw Error(i(321))}function Xg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Qn(r[o],s[o]))return!1;return!0}function Qg(r,s,o,u,g,m){return ps=m,He=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=r===null||r.memoizedState===null?A_:R_,Oa=!1,m=o(u,g),Oa=!1,Lo&&(m=Fv(s,o,u,g)),$v(r),m}function $v(r){D.H=Pd;var s=ft!==null&&ft.next!==null;if(ps=0,Bt=ft=He=null,Cd=!1,_c=0,zo=null,s)throw Error(i(300));r===null||rn||(r=r.dependencies,r!==null&&Ed(r)&&(rn=!0))}function Fv(r,s,o,u){He=r;var g=0;do{if(Lo&&(zo=null),_c=0,Lo=!1,25<=g)throw Error(i(301));if(g+=1,Bt=ft=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=NR,m=s(o,u)}while(Lo);return m}function xR(){var r=D.H,s=r.useState()[0];return s=typeof s.then=="function"?bc(s):s,r=r.useState()[0],(ft!==null?ft.memoizedState:null)!==r&&(He.flags|=1024),s}function Wg(){var r=Nd!==0;return Nd=0,r}function Zg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Jg(r){if(Cd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cd=!1}ps=0,Bt=ft=He=null,Lo=!1,_c=Nd=0,zo=null}function zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?He.memoizedState=Bt=r:Bt=Bt.next=r,Bt}function Ht(){if(ft===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=ft.next;var s=Bt===null?He.memoizedState:Bt.next;if(s!==null)Bt=s,ft=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));ft=r,r={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Bt===null?He.memoizedState=Bt=r:Bt=Bt.next=r}return Bt}function ep(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bc(r){var s=_c;return _c+=1,zo===null&&(zo=[]),r=zv(zo,r,s),s=He,(Bt===null?s.memoizedState:Bt.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?A_:R_),r}function Id(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bc(r);if(r.$$typeof===$)return _n(r)}throw Error(i(438,String(r)))}function tp(r){var s=null,o=He.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ep(),He.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=z;return s.index++,o}function ji(r,s){return typeof s=="function"?s(r):s}function kd(r){var s=Ht();return np(s,ft,r)}function np(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=r.baseQueue,m=u.pending;if(m!==null){if(g!==null){var x=g.next;g.next=m.next,m.next=x}s.baseQueue=g=m,u.pending=null}if(m=r.baseState,g===null)r.memoizedState=m;else{s=g.next;var k=x=null,X=null,ae=s,ge=!1;do{var me=ae.lane&-536870913;if(me!==ae.lane?(tt&me)===me:(ps&me)===me){var oe=ae.revertLane;if(oe===0)X!==null&&(X=X.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),me===Oo&&(ge=!0);else if((ps&oe)===oe){ae=ae.next,oe===Oo&&(ge=!0);continue}else me={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(k=X=me,x=m):X=X.next=me,He.lanes|=oe,Es|=oe;me=ae.action,Oa&&o(m,me),m=ae.hasEagerState?ae.eagerState:o(m,me)}else oe={lane:me,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(k=X=oe,x=m):X=X.next=oe,He.lanes|=me,Es|=me;ae=ae.next}while(ae!==null&&ae!==s);if(X===null?x=m:X.next=k,!Qn(m,r.memoizedState)&&(rn=!0,ge&&(o=Po,o!==null)))throw o;r.memoizedState=m,r.baseState=x,r.baseQueue=X,u.lastRenderedState=m}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function rp(r){var s=Ht(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,g=o.pending,m=s.memoizedState;if(g!==null){o.pending=null;var x=g=g.next;do m=r(m,x.action),x=x.next;while(x!==g);Qn(m,s.memoizedState)||(rn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Gv(r,s,o){var u=He,g=Ht(),m=at;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var x=!Qn((ft||g).memoizedState,o);x&&(g.memoizedState=o,rn=!0),g=g.queue;var k=Xv.bind(null,u,g,r);if(wc(2048,8,k,[r]),g.getSnapshot!==s||x||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,Uo(9,Dd(),Kv.bind(null,u,g,o,s),null),vt===null)throw Error(i(349));m||(ps&124)!==0||Yv(u,s,o)}return o}function Yv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=He.updateQueue,s===null?(s=ep(),He.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Kv(r,s,o,u){s.value=o,s.getSnapshot=u,Qv(s)&&Wv(r)}function Xv(r,s,o){return o(function(){Qv(s)&&Wv(r)})}function Qv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Qn(r,o)}catch{return!0}}function Wv(r){var s=Io(r,2);s!==null&&nr(s,r,2)}function ip(r){var s=zn();if(typeof r=="function"){var o=r;if(r=o(),Oa){zt(!0);try{o()}finally{zt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:r},s}function Zv(r,s,o,u){return r.baseState=o,np(r,ft,typeof u=="function"?u:ji)}function SR(r,s,o,u,g){if(Od(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};D.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,Jv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function Jv(r,s){var o=s.action,u=s.payload,g=r.state;if(s.isTransition){var m=D.T,x={};D.T=x;try{var k=o(g,u),X=D.S;X!==null&&X(x,k),e_(r,s,k)}catch(ae){sp(r,s,ae)}finally{D.T=m}}else try{m=o(g,u),e_(r,s,m)}catch(ae){sp(r,s,ae)}}function e_(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){t_(r,s,u)},function(u){return sp(r,s,u)}):t_(r,s,o)}function t_(r,s,o){s.status="fulfilled",s.value=o,n_(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Jv(r,o)))}function sp(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,n_(s),s=s.next;while(s!==u)}r.action=null}function n_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function r_(r,s){return s}function i_(r,s){if(at){var o=vt.formState;if(o!==null){e:{var u=He;if(at){if(Nt){t:{for(var g=Nt,m=oi;g.nodeType!==8;){if(!m){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Nt=Vr(g.nextSibling),u=g.data==="F!";break e}}Ia(u)}u=!1}u&&(s=o[0])}}return o=zn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:s},o.queue=u,o=x_.bind(null,He,u),u.dispatch=o,u=ip(!1),m=up.bind(null,He,!1,u.queue),u=zn(),g={state:s,dispatch:null,action:r,pending:null},u.queue=g,o=SR.bind(null,He,g,m,o),g.dispatch=o,u.memoizedState=r,[s,o,!1]}function s_(r){var s=Ht();return a_(s,ft,r)}function a_(r,s,o){if(s=np(r,s,r_)[0],r=kd(ji)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=bc(s)}catch(x){throw x===gc?Td:x}else u=s;s=Ht();var g=s.queue,m=g.dispatch;return o!==s.memoizedState&&(He.flags|=2048,Uo(9,Dd(),TR.bind(null,g,o),null)),[u,m,r]}function TR(r,s){r.action=s}function o_(r){var s=Ht(),o=ft;if(o!==null)return a_(s,o,r);Ht(),s=s.memoizedState,o=Ht();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Uo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=He.updateQueue,s===null&&(s=ep(),He.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Dd(){return{destroy:void 0,resource:void 0}}function l_(){return Ht().memoizedState}function Md(r,s,o,u){var g=zn();u=u===void 0?null:u,He.flags|=r,g.memoizedState=Uo(1|s,Dd(),o,u)}function wc(r,s,o,u){var g=Ht();u=u===void 0?null:u;var m=g.memoizedState.inst;ft!==null&&u!==null&&Xg(u,ft.memoizedState.deps)?g.memoizedState=Uo(s,m,o,u):(He.flags|=r,g.memoizedState=Uo(1|s,m,o,u))}function c_(r,s){Md(8390656,8,r,s)}function u_(r,s){wc(2048,8,r,s)}function d_(r,s){return wc(4,2,r,s)}function h_(r,s){return wc(4,4,r,s)}function f_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function g_(r,s,o){o=o!=null?o.concat([r]):null,wc(4,4,f_.bind(null,s,r),o)}function ap(){}function p_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Xg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function m_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Xg(s,u[1]))return u[0];if(u=r(),Oa){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u}function op(r,s,o){return o===void 0||(ps&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=_b(),He.lanes|=r,Es|=r,o)}function y_(r,s,o,u){return Qn(o,s)?o:Vo.current!==null?(r=op(r,o,u),Qn(r,s)||(rn=!0),r):(ps&42)===0?(rn=!0,r.memoizedState=o):(r=_b(),He.lanes|=r,Es|=r,s)}function v_(r,s,o,u,g){var m=q.p;q.p=m!==0&&8>m?m:8;var x=D.T,k={};D.T=k,up(r,!1,s,o);try{var X=g(),ae=D.S;if(ae!==null&&ae(k,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var ge=wR(X,u);Ec(r,s,ge,tr(r))}else Ec(r,s,u,tr(r))}catch(me){Ec(r,s,{then:function(){},status:"rejected",reason:me},tr())}finally{q.p=m,D.T=x}}function AR(){}function lp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var g=__(r).queue;v_(r,g,s,F,o===null?AR:function(){return b_(r),o(u)})}function __(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:F},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function b_(r){var s=__(r).next.queue;Ec(r,s,{},tr())}function cp(){return _n(jc)}function w_(){return Ht().memoizedState}function E_(){return Ht().memoizedState}function RR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=tr();r=fs(o);var u=gs(s,r,o);u!==null&&(nr(u,s,o),mc(u,s,o)),s={cache:Ug()},r.payload=s;return}s=s.return}}function CR(r,s,o){var u=tr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Od(r)?S_(s,o):(o=Ng(r,s,o,u),o!==null&&(nr(o,r,u),T_(o,s,u)))}function x_(r,s,o){var u=tr();Ec(r,s,o,u)}function Ec(r,s,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Od(r))S_(s,g);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var x=s.lastRenderedState,k=m(x,o);if(g.hasEagerState=!0,g.eagerState=k,Qn(k,x))return yd(r,s,g,0),vt===null&&md(),!1}catch{}finally{}if(o=Ng(r,s,g,u),o!==null)return nr(o,r,u),T_(o,s,u),!0}return!1}function up(r,s,o,u){if(u={lane:2,revertLane:Hp(),action:u,hasEagerState:!1,eagerState:null,next:null},Od(r)){if(s)throw Error(i(479))}else s=Ng(r,o,u,2),s!==null&&nr(s,r,2)}function Od(r){var s=r.alternate;return r===He||s!==null&&s===He}function S_(r,s){Lo=Cd=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function T_(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,ca(r,o)}}var Pd={readContext:_n,use:Id,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},A_={readContext:_n,use:Id,useCallback:function(r,s){return zn().memoizedState=[r,s===void 0?null:s],r},useContext:_n,useEffect:c_,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Md(4194308,4,f_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Md(4194308,4,r,s)},useInsertionEffect:function(r,s){Md(4,2,r,s)},useMemo:function(r,s){var o=zn();s=s===void 0?null:s;var u=r();if(Oa){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=zn();if(o!==void 0){var g=o(s);if(Oa){zt(!0);try{o(s)}finally{zt(!1)}}}else g=s;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=CR.bind(null,He,r),[u.memoizedState,r]},useRef:function(r){var s=zn();return r={current:r},s.memoizedState=r},useState:function(r){r=ip(r);var s=r.queue,o=x_.bind(null,He,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:ap,useDeferredValue:function(r,s){var o=zn();return op(o,r,s)},useTransition:function(){var r=ip(!1);return r=v_.bind(null,He,r.queue,!0,!1),zn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=He,g=zn();if(at){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),vt===null)throw Error(i(349));(tt&124)!==0||Yv(u,s,o)}g.memoizedState=o;var m={value:o,getSnapshot:s};return g.queue=m,c_(Xv.bind(null,u,m,r),[r]),u.flags|=2048,Uo(9,Dd(),Kv.bind(null,u,m,o,s),null),o},useId:function(){var r=zn(),s=vt.identifierPrefix;if(at){var o=Li,u=Vi;o=(u&~(1<<32-Et(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Nd++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=ER++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:cp,useFormState:i_,useActionState:i_,useOptimistic:function(r){var s=zn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=up.bind(null,He,!0,o),o.dispatch=s,[r,s]},useMemoCache:tp,useCacheRefresh:function(){return zn().memoizedState=RR.bind(null,He)}},R_={readContext:_n,use:Id,useCallback:p_,useContext:_n,useEffect:u_,useImperativeHandle:g_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:m_,useReducer:kd,useRef:l_,useState:function(){return kd(ji)},useDebugValue:ap,useDeferredValue:function(r,s){var o=Ht();return y_(o,ft.memoizedState,r,s)},useTransition:function(){var r=kd(ji)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:bc(r),s]},useSyncExternalStore:Gv,useId:w_,useHostTransitionStatus:cp,useFormState:s_,useActionState:s_,useOptimistic:function(r,s){var o=Ht();return Zv(o,ft,r,s)},useMemoCache:tp,useCacheRefresh:E_},NR={readContext:_n,use:Id,useCallback:p_,useContext:_n,useEffect:u_,useImperativeHandle:g_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:m_,useReducer:rp,useRef:l_,useState:function(){return rp(ji)},useDebugValue:ap,useDeferredValue:function(r,s){var o=Ht();return ft===null?op(o,r,s):y_(o,ft.memoizedState,r,s)},useTransition:function(){var r=rp(ji)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:bc(r),s]},useSyncExternalStore:Gv,useId:w_,useHostTransitionStatus:cp,useFormState:o_,useActionState:o_,useOptimistic:function(r,s){var o=Ht();return ft!==null?Zv(o,ft,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:tp,useCacheRefresh:E_},jo=null,xc=0;function Vd(r){var s=xc;return xc+=1,jo===null&&(jo=[]),zv(jo,r,s)}function Sc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Ld(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function C_(r){var s=r._init;return s(r._payload)}function N_(r){function s(re,J){if(r){var se=re.deletions;se===null?(re.deletions=[J],re.flags|=16):se.push(J)}}function o(re,J){if(!r)return null;for(;J!==null;)s(re,J),J=J.sibling;return null}function u(re){for(var J=new Map;re!==null;)re.key!==null?J.set(re.key,re):J.set(re.index,re),re=re.sibling;return J}function g(re,J){return re=Pi(re,J),re.index=0,re.sibling=null,re}function m(re,J,se){return re.index=se,r?(se=re.alternate,se!==null?(se=se.index,se<J?(re.flags|=67108866,J):se):(re.flags|=67108866,J)):(re.flags|=1048576,J)}function x(re){return r&&re.alternate===null&&(re.flags|=67108866),re}function k(re,J,se,pe){return J===null||J.tag!==6?(J=kg(se,re.mode,pe),J.return=re,J):(J=g(J,se),J.return=re,J)}function X(re,J,se,pe){var Te=se.type;return Te===T?ge(re,J,se.props.children,pe,se.key):J!==null&&(J.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&C_(Te)===J.type)?(J=g(J,se.props),Sc(J,se),J.return=re,J):(J=_d(se.type,se.key,se.props,null,re.mode,pe),Sc(J,se),J.return=re,J)}function ae(re,J,se,pe){return J===null||J.tag!==4||J.stateNode.containerInfo!==se.containerInfo||J.stateNode.implementation!==se.implementation?(J=Dg(se,re.mode,pe),J.return=re,J):(J=g(J,se.children||[]),J.return=re,J)}function ge(re,J,se,pe,Te){return J===null||J.tag!==7?(J=Aa(se,re.mode,pe,Te),J.return=re,J):(J=g(J,se),J.return=re,J)}function me(re,J,se){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=kg(""+J,re.mode,se),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return se=_d(J.type,J.key,J.props,null,re.mode,se),Sc(se,J),se.return=re,se;case E:return J=Dg(J,re.mode,se),J.return=re,J;case R:var pe=J._init;return J=pe(J._payload),me(re,J,se)}if(K(J)||H(J))return J=Aa(J,re.mode,se,null),J.return=re,J;if(typeof J.then=="function")return me(re,Vd(J),se);if(J.$$typeof===$)return me(re,xd(re,J),se);Ld(re,J)}return null}function oe(re,J,se,pe){var Te=J!==null?J.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Te!==null?null:k(re,J,""+se,pe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return se.key===Te?X(re,J,se,pe):null;case E:return se.key===Te?ae(re,J,se,pe):null;case R:return Te=se._init,se=Te(se._payload),oe(re,J,se,pe)}if(K(se)||H(se))return Te!==null?null:ge(re,J,se,pe,null);if(typeof se.then=="function")return oe(re,J,Vd(se),pe);if(se.$$typeof===$)return oe(re,J,xd(re,se),pe);Ld(re,se)}return null}function ce(re,J,se,pe,Te){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return re=re.get(se)||null,k(J,re,""+pe,Te);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case b:return re=re.get(pe.key===null?se:pe.key)||null,X(J,re,pe,Te);case E:return re=re.get(pe.key===null?se:pe.key)||null,ae(J,re,pe,Te);case R:var Fe=pe._init;return pe=Fe(pe._payload),ce(re,J,se,pe,Te)}if(K(pe)||H(pe))return re=re.get(se)||null,ge(J,re,pe,Te,null);if(typeof pe.then=="function")return ce(re,J,se,Vd(pe),Te);if(pe.$$typeof===$)return ce(re,J,se,xd(J,pe),Te);Ld(J,pe)}return null}function Oe(re,J,se,pe){for(var Te=null,Fe=null,Ce=J,ke=J=0,an=null;Ce!==null&&ke<se.length;ke++){Ce.index>ke?(an=Ce,Ce=null):an=Ce.sibling;var st=oe(re,Ce,se[ke],pe);if(st===null){Ce===null&&(Ce=an);break}r&&Ce&&st.alternate===null&&s(re,Ce),J=m(st,J,ke),Fe===null?Te=st:Fe.sibling=st,Fe=st,Ce=an}if(ke===se.length)return o(re,Ce),at&&Ca(re,ke),Te;if(Ce===null){for(;ke<se.length;ke++)Ce=me(re,se[ke],pe),Ce!==null&&(J=m(Ce,J,ke),Fe===null?Te=Ce:Fe.sibling=Ce,Fe=Ce);return at&&Ca(re,ke),Te}for(Ce=u(Ce);ke<se.length;ke++)an=ce(Ce,re,ke,se[ke],pe),an!==null&&(r&&an.alternate!==null&&Ce.delete(an.key===null?ke:an.key),J=m(an,J,ke),Fe===null?Te=an:Fe.sibling=an,Fe=an);return r&&Ce.forEach(function(ks){return s(re,ks)}),at&&Ca(re,ke),Te}function Ie(re,J,se,pe){if(se==null)throw Error(i(151));for(var Te=null,Fe=null,Ce=J,ke=J=0,an=null,st=se.next();Ce!==null&&!st.done;ke++,st=se.next()){Ce.index>ke?(an=Ce,Ce=null):an=Ce.sibling;var ks=oe(re,Ce,st.value,pe);if(ks===null){Ce===null&&(Ce=an);break}r&&Ce&&ks.alternate===null&&s(re,Ce),J=m(ks,J,ke),Fe===null?Te=ks:Fe.sibling=ks,Fe=ks,Ce=an}if(st.done)return o(re,Ce),at&&Ca(re,ke),Te;if(Ce===null){for(;!st.done;ke++,st=se.next())st=me(re,st.value,pe),st!==null&&(J=m(st,J,ke),Fe===null?Te=st:Fe.sibling=st,Fe=st);return at&&Ca(re,ke),Te}for(Ce=u(Ce);!st.done;ke++,st=se.next())st=ce(Ce,re,ke,st.value,pe),st!==null&&(r&&st.alternate!==null&&Ce.delete(st.key===null?ke:st.key),J=m(st,J,ke),Fe===null?Te=st:Fe.sibling=st,Fe=st);return r&&Ce.forEach(function(IC){return s(re,IC)}),at&&Ca(re,ke),Te}function pt(re,J,se,pe){if(typeof se=="object"&&se!==null&&se.type===T&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case b:e:{for(var Te=se.key;J!==null;){if(J.key===Te){if(Te=se.type,Te===T){if(J.tag===7){o(re,J.sibling),pe=g(J,se.props.children),pe.return=re,re=pe;break e}}else if(J.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&C_(Te)===J.type){o(re,J.sibling),pe=g(J,se.props),Sc(pe,se),pe.return=re,re=pe;break e}o(re,J);break}else s(re,J);J=J.sibling}se.type===T?(pe=Aa(se.props.children,re.mode,pe,se.key),pe.return=re,re=pe):(pe=_d(se.type,se.key,se.props,null,re.mode,pe),Sc(pe,se),pe.return=re,re=pe)}return x(re);case E:e:{for(Te=se.key;J!==null;){if(J.key===Te)if(J.tag===4&&J.stateNode.containerInfo===se.containerInfo&&J.stateNode.implementation===se.implementation){o(re,J.sibling),pe=g(J,se.children||[]),pe.return=re,re=pe;break e}else{o(re,J);break}else s(re,J);J=J.sibling}pe=Dg(se,re.mode,pe),pe.return=re,re=pe}return x(re);case R:return Te=se._init,se=Te(se._payload),pt(re,J,se,pe)}if(K(se))return Oe(re,J,se,pe);if(H(se)){if(Te=H(se),typeof Te!="function")throw Error(i(150));return se=Te.call(se),Ie(re,J,se,pe)}if(typeof se.then=="function")return pt(re,J,Vd(se),pe);if(se.$$typeof===$)return pt(re,J,xd(re,se),pe);Ld(re,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,J!==null&&J.tag===6?(o(re,J.sibling),pe=g(J,se),pe.return=re,re=pe):(o(re,J),pe=kg(se,re.mode,pe),pe.return=re,re=pe),x(re)):o(re,J)}return function(re,J,se,pe){try{xc=0;var Te=pt(re,J,se,pe);return jo=null,Te}catch(Ce){if(Ce===gc||Ce===Td)throw Ce;var Fe=Wn(29,Ce,null,re.mode);return Fe.lanes=pe,Fe.return=re,Fe}finally{}}}var Bo=N_(!0),I_=N_(!1),Sr=W(null),li=null;function ms(r){var s=r.alternate;Q(Wt,Wt.current&1),Q(Sr,r),li===null&&(s===null||Vo.current!==null||s.memoizedState!==null)&&(li=r)}function k_(r){if(r.tag===22){if(Q(Wt,Wt.current),Q(Sr,r),li===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(li=r)}}else ys()}function ys(){Q(Wt,Wt.current),Q(Sr,Sr.current)}function Bi(r){Z(Sr),li===r&&(li=null),Z(Wt)}var Wt=W(0);function zd(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||em(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function dp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var hp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=tr(),g=fs(u);g.payload=s,o!=null&&(g.callback=o),s=gs(r,g,u),s!==null&&(nr(s,r,u),mc(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=tr(),g=fs(u);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=gs(r,g,u),s!==null&&(nr(s,r,u),mc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=tr(),u=fs(o);u.tag=2,s!=null&&(u.callback=s),s=gs(r,u,o),s!==null&&(nr(s,r,o),mc(s,r,o))}};function D_(r,s,o,u,g,m,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,x):s.prototype&&s.prototype.isPureReactComponent?!ac(o,u)||!ac(g,m):!0}function M_(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&hp.enqueueReplaceState(s,s.state,null)}function Pa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var Ud=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function O_(r){Ud(r)}function P_(r){console.error(r)}function V_(r){Ud(r)}function jd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function L_(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function fp(r,s,o){return o=fs(o),o.tag=3,o.payload={element:null},o.callback=function(){jd(r,s)},o}function z_(r){return r=fs(r),r.tag=3,r}function U_(r,s,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;r.payload=function(){return g(m)},r.callback=function(){L_(s,o,u)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){L_(s,o,u),typeof g!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})})}function IR(r,s,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&dc(s,o,g,!0),o=Sr.current,o!==null){switch(o.tag){case 13:return li===null?Lp():o.alternate===null&&It===0&&(It=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===Hg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Up(r,u,g)),!1;case 22:return o.flags|=65536,u===Hg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Up(r,u,g)),!1}throw Error(i(435,o.tag))}return Up(r,u,g),Lp(),!1}if(at)return s=Sr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Pg&&(r=Error(i(422),{cause:u}),uc(br(r,o)))):(u!==Pg&&(s=Error(i(423),{cause:u}),uc(br(s,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=br(u,o),g=fp(r.stateNode,u,g),Fg(r,g),It!==4&&(It=2)),!1;var m=Error(i(520),{cause:u});if(m=br(m,o),kc===null?kc=[m]:kc.push(m),It!==4&&(It=2),s===null)return!0;u=br(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=fp(o.stateNode,u,r),Fg(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(xs===null||!xs.has(m))))return o.flags|=65536,g&=-g,o.lanes|=g,g=z_(g),U_(g,r,o,u),Fg(o,g),!1}o=o.return}while(o!==null);return!1}var j_=Error(i(461)),rn=!1;function hn(r,s,o,u){s.child=r===null?I_(s,null,o,u):Bo(s,r.child,o,u)}function B_(r,s,o,u,g){o=o.render;var m=s.ref;if("ref"in u){var x={};for(var k in u)k!=="ref"&&(x[k]=u[k])}else x=u;return Da(s),u=Qg(r,s,o,x,m,g),k=Wg(),r!==null&&!rn?(Zg(r,s,g),Hi(r,s,g)):(at&&k&&Mg(s),s.flags|=1,hn(r,s,u,g),s.child)}function H_(r,s,o,u,g){if(r===null){var m=o.type;return typeof m=="function"&&!Ig(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,q_(r,s,m,u,g)):(r=_d(o.type,null,u,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!wp(r,g)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:ac,o(x,u)&&r.ref===s.ref)return Hi(r,s,g)}return s.flags|=1,r=Pi(m,u),r.ref=s.ref,r.return=s,s.child=r}function q_(r,s,o,u,g){if(r!==null){var m=r.memoizedProps;if(ac(m,u)&&r.ref===s.ref)if(rn=!1,s.pendingProps=u=m,wp(r,g))(r.flags&131072)!==0&&(rn=!0);else return s.lanes=r.lanes,Hi(r,s,g)}return gp(r,s,o,u,g)}function $_(r,s,o){var u=s.pendingProps,g=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(g=s.child=r.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return F_(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Sd(s,m!==null?m.cachePool:null),m!==null?qv(s,m):Yg(),k_(s);else return s.lanes=s.childLanes=536870912,F_(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(Sd(s,m.cachePool),qv(s,m),ys(),s.memoizedState=null):(r!==null&&Sd(s,null),Yg(),ys());return hn(r,s,g,o),s.child}function F_(r,s,o,u){var g=Bg();return g=g===null?null:{parent:Qt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Sd(s,null),Yg(),k_(s),r!==null&&dc(r,s,u,!0),null}function Bd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function gp(r,s,o,u,g){return Da(s),o=Qg(r,s,o,u,void 0,g),u=Wg(),r!==null&&!rn?(Zg(r,s,g),Hi(r,s,g)):(at&&u&&Mg(s),s.flags|=1,hn(r,s,o,g),s.child)}function G_(r,s,o,u,g,m){return Da(s),s.updateQueue=null,o=Fv(s,u,o,g),$v(r),u=Wg(),r!==null&&!rn?(Zg(r,s,m),Hi(r,s,m)):(at&&u&&Mg(s),s.flags|=1,hn(r,s,o,m),s.child)}function Y_(r,s,o,u,g){if(Da(s),s.stateNode===null){var m=ko,x=o.contextType;typeof x=="object"&&x!==null&&(m=_n(x)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hp,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},qg(s),x=o.contextType,m.context=typeof x=="object"&&x!==null?_n(x):ko,m.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(dp(s,o,x,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&hp.enqueueReplaceState(m,m.state,null),vc(s,u,m,g),yc(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var k=s.memoizedProps,X=Pa(o,k);m.props=X;var ae=m.context,ge=o.contextType;x=ko,typeof ge=="object"&&ge!==null&&(x=_n(ge));var me=o.getDerivedStateFromProps;ge=typeof me=="function"||typeof m.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,ge||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(k||ae!==x)&&M_(s,m,u,x),hs=!1;var oe=s.memoizedState;m.state=oe,vc(s,u,m,g),yc(),ae=s.memoizedState,k||oe!==ae||hs?(typeof me=="function"&&(dp(s,o,me,u),ae=s.memoizedState),(X=hs||D_(s,o,X,u,oe,ae,x))?(ge||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ae),m.props=u,m.state=ae,m.context=x,u=X):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,$g(r,s),x=s.memoizedProps,ge=Pa(o,x),m.props=ge,me=s.pendingProps,oe=m.context,ae=o.contextType,X=ko,typeof ae=="object"&&ae!==null&&(X=_n(ae)),k=o.getDerivedStateFromProps,(ae=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==me||oe!==X)&&M_(s,m,u,X),hs=!1,oe=s.memoizedState,m.state=oe,vc(s,u,m,g),yc();var ce=s.memoizedState;x!==me||oe!==ce||hs||r!==null&&r.dependencies!==null&&Ed(r.dependencies)?(typeof k=="function"&&(dp(s,o,k,u),ce=s.memoizedState),(ge=hs||D_(s,o,ge,u,oe,ce,X)||r!==null&&r.dependencies!==null&&Ed(r.dependencies))?(ae||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ce,X),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ce,X)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ce),m.props=u,m.state=ce,m.context=X,u=ge):(typeof m.componentDidUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,Bd(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=Bo(s,r.child,null,g),s.child=Bo(s,null,o,g)):hn(r,s,o,g),s.memoizedState=m.state,r=s.child):r=Hi(r,s,g),r}function K_(r,s,o,u){return cc(),s.flags|=256,hn(r,s,o,u),s.child}var pp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mp(r){return{baseLanes:r,cachePool:Pv()}}function yp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Tr),r}function X_(r,s,o){var u=s.pendingProps,g=!1,m=(s.flags&128)!==0,x;if((x=m)||(x=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),x&&(g=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(at){if(g?ms(s):ys(),at){var k=Nt,X;if(X=k){e:{for(X=k,k=oi;X.nodeType!==8;){if(!k){k=null;break e}if(X=Vr(X.nextSibling),X===null){k=null;break e}}k=X}k!==null?(s.memoizedState={dehydrated:k,treeContext:Ra!==null?{id:Vi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},X=Wn(18,null,null,0),X.stateNode=k,X.return=s,s.child=X,Mn=s,Nt=null,X=!0):X=!1}X||Ia(s)}if(k=s.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return em(k)?s.lanes=32:s.lanes=536870912,null;Bi(s)}return k=u.children,u=u.fallback,g?(ys(),g=s.mode,k=Hd({mode:"hidden",children:k},g),u=Aa(u,g,o,null),k.return=s,u.return=s,k.sibling=u,s.child=k,g=s.child,g.memoizedState=mp(o),g.childLanes=yp(r,x,o),s.memoizedState=pp,u):(ms(s),vp(s,k))}if(X=r.memoizedState,X!==null&&(k=X.dehydrated,k!==null)){if(m)s.flags&256?(ms(s),s.flags&=-257,s=_p(r,s,o)):s.memoizedState!==null?(ys(),s.child=r.child,s.flags|=128,s=null):(ys(),g=u.fallback,k=s.mode,u=Hd({mode:"visible",children:u.children},k),g=Aa(g,k,o,null),g.flags|=2,u.return=s,g.return=s,u.sibling=g,s.child=u,Bo(s,r.child,null,o),u=s.child,u.memoizedState=mp(o),u.childLanes=yp(r,x,o),s.memoizedState=pp,s=g);else if(ms(s),em(k)){if(x=k.nextSibling&&k.nextSibling.dataset,x)var ae=x.dgst;x=ae,u=Error(i(419)),u.stack="",u.digest=x,uc({value:u,source:null,stack:null}),s=_p(r,s,o)}else if(rn||dc(r,s,o,!1),x=(o&r.childLanes)!==0,rn||x){if(x=vt,x!==null&&(u=o&-o,u=(u&42)!==0?1:Yr(u),u=(u&(x.suspendedLanes|o))!==0?0:u,u!==0&&u!==X.retryLane))throw X.retryLane=u,Io(r,u),nr(x,r,u),j_;k.data==="$?"||Lp(),s=_p(r,s,o)}else k.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=X.treeContext,Nt=Vr(k.nextSibling),Mn=s,at=!0,Na=null,oi=!1,r!==null&&(Er[xr++]=Vi,Er[xr++]=Li,Er[xr++]=Ra,Vi=r.id,Li=r.overflow,Ra=s),s=vp(s,u.children),s.flags|=4096);return s}return g?(ys(),g=u.fallback,k=s.mode,X=r.child,ae=X.sibling,u=Pi(X,{mode:"hidden",children:u.children}),u.subtreeFlags=X.subtreeFlags&65011712,ae!==null?g=Pi(ae,g):(g=Aa(g,k,o,null),g.flags|=2),g.return=s,u.return=s,u.sibling=g,s.child=u,u=g,g=s.child,k=r.child.memoizedState,k===null?k=mp(o):(X=k.cachePool,X!==null?(ae=Qt._currentValue,X=X.parent!==ae?{parent:ae,pool:ae}:X):X=Pv(),k={baseLanes:k.baseLanes|o,cachePool:X}),g.memoizedState=k,g.childLanes=yp(r,x,o),s.memoizedState=pp,u):(ms(s),o=r.child,r=o.sibling,o=Pi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=o,s.memoizedState=null,o)}function vp(r,s){return s=Hd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Hd(r,s){return r=Wn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function _p(r,s,o){return Bo(s,r.child,null,o),r=vp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Q_(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Lg(r.return,s,o)}function bp(r,s,o,u,g){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=g)}function W_(r,s,o){var u=s.pendingProps,g=u.revealOrder,m=u.tail;if(hn(r,s,u.children,o),u=Wt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Q_(r,o,s);else if(r.tag===19)Q_(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(Q(Wt,u),g){case"forwards":for(o=s.child,g=null;o!==null;)r=o.alternate,r!==null&&zd(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),bp(s,!1,g,o,m);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&zd(r)===null){s.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}bp(s,!0,o,null,m);break;case"together":bp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(dc(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Pi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Pi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function wp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Ed(r)))}function kR(r,s,o){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),ds(s,Qt,r.memoizedState.cache),cc();break;case 27:case 5:Re(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:ds(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ms(s),s.flags|=128,null):(o&s.child.childLanes)!==0?X_(r,s,o):(ms(s),r=Hi(r,s,o),r!==null?r.sibling:null);ms(s);break;case 19:var g=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(dc(r,s,o,!1),u=(o&s.childLanes)!==0),g){if(u)return W_(r,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Q(Wt,Wt.current),u)break;return null;case 22:case 23:return s.lanes=0,$_(r,s,o);case 24:ds(s,Qt,r.memoizedState.cache)}return Hi(r,s,o)}function Z_(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)rn=!0;else{if(!wp(r,o)&&(s.flags&128)===0)return rn=!1,kR(r,s,o);rn=(r.flags&131072)!==0}else rn=!1,at&&(s.flags&1048576)!==0&&Cv(s,wd,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,g=u._init;if(u=g(u._payload),s.type=u,typeof u=="function")Ig(u)?(r=Pa(u,r),s.tag=1,s=Y_(null,s,u,r,o)):(s.tag=0,s=gp(null,s,u,r,o));else{if(u!=null){if(g=u.$$typeof,g===j){s.tag=11,s=B_(null,s,u,r,o);break e}else if(g===O){s.tag=14,s=H_(null,s,u,r,o);break e}}throw s=P(u)||u,Error(i(306,s,""))}}return s;case 0:return gp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,g=Pa(u,s.pendingProps),Y_(r,s,u,g,o);case 3:e:{if(_e(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;g=m.element,$g(r,s),vc(s,u,null,o);var x=s.memoizedState;if(u=x.cache,ds(s,Qt,u),u!==m.cache&&zg(s,[Qt],o,!0),yc(),u=x.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=K_(r,s,u,o);break e}else if(u!==g){g=br(Error(i(424)),s),uc(g),s=K_(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=Vr(r.firstChild),Mn=s,at=!0,Na=null,oi=!0,o=I_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(cc(),u===g){s=Hi(r,s,o);break e}hn(r,s,u,o)}s=s.child}return s;case 26:return Bd(r,s),r===null?(o=nw(s.type,null,s.pendingProps,null))?s.memoizedState=o:at||(o=s.type,r=s.pendingProps,u=nh(ue.current).createElement(o),u[Ot]=s,u[Ct]=r,gn(u,o,r),xt(u),s.stateNode=u):s.memoizedState=nw(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Re(s),r===null&&at&&(u=s.stateNode=Jb(s.type,s.pendingProps,ue.current),Mn=s,oi=!0,g=Nt,As(s.type)?(tm=g,Nt=Vr(u.firstChild)):Nt=g),hn(r,s,s.pendingProps.children,o),Bd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&at&&((g=u=Nt)&&(u=sC(u,s.type,s.pendingProps,oi),u!==null?(s.stateNode=u,Mn=s,Nt=Vr(u.firstChild),oi=!1,g=!0):g=!1),g||Ia(s)),Re(s),g=s.type,m=s.pendingProps,x=r!==null?r.memoizedProps:null,u=m.children,Wp(g,m)?u=null:x!==null&&Wp(g,x)&&(s.flags|=32),s.memoizedState!==null&&(g=Qg(r,s,xR,null,null,o),jc._currentValue=g),Bd(r,s),hn(r,s,u,o),s.child;case 6:return r===null&&at&&((r=o=Nt)&&(o=aC(o,s.pendingProps,oi),o!==null?(s.stateNode=o,Mn=s,Nt=null,r=!0):r=!1),r||Ia(s)),null;case 13:return X_(r,s,o);case 4:return _e(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Bo(s,null,u,o):hn(r,s,u,o),s.child;case 11:return B_(r,s,s.type,s.pendingProps,o);case 7:return hn(r,s,s.pendingProps,o),s.child;case 8:return hn(r,s,s.pendingProps.children,o),s.child;case 12:return hn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ds(s,s.type,u.value),hn(r,s,u.children,o),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Da(s),g=_n(g),u=u(g),s.flags|=1,hn(r,s,u,o),s.child;case 14:return H_(r,s,s.type,s.pendingProps,o);case 15:return q_(r,s,s.type,s.pendingProps,o);case 19:return W_(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Hd(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Pi(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return $_(r,s,o);case 24:return Da(s),u=_n(Qt),r===null?(g=Bg(),g===null&&(g=vt,m=Ug(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=o),g=m),s.memoizedState={parent:u,cache:g},qg(s),ds(s,Qt,g)):((r.lanes&o)!==0&&($g(r,s),vc(s,null,null,o),yc()),g=r.memoizedState,m=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ds(s,Qt,u)):(u=m.cache,ds(s,Qt,u),u!==g.cache&&zg(s,[Qt],o,!0))),hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function qi(r){r.flags|=4}function J_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!ow(s)){if(s=Sr.current,s!==null&&((tt&4194048)===tt?li!==null:(tt&62914560)!==tt&&(tt&536870912)===0||s!==li))throw pc=Hg,Vv;r.flags|=8192}}function qd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ir():536870912,r.lanes|=s,Fo|=s)}function Tc(r,s){if(!at)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function St(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function DR(r,s,o){var u=s.pendingProps;switch(Og(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(s),null;case 1:return St(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ui(Qt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(lc(s)?qi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kv())),St(s),null;case 26:return o=s.memoizedState,r===null?(qi(s),o!==null?(St(s),J_(s,o)):(St(s),s.flags&=-16777217)):o?o!==r.memoizedState?(qi(s),St(s),J_(s,o)):(St(s),s.flags&=-16777217):(r.memoizedProps!==u&&qi(s),St(s),s.flags&=-16777217),null;case 27:rt(s),o=ue.current;var g=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&qi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return St(s),null}r=ee.current,lc(s)?Nv(s):(r=Jb(g,u,o),s.stateNode=r,qi(s))}return St(s),null;case 5:if(rt(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&qi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return St(s),null}if(r=ee.current,lc(s))Nv(s);else{switch(g=nh(ue.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}r[Ot]=s,r[Ct]=u;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=r;e:switch(gn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&qi(s)}}return St(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&qi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=ue.current,lc(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,g=Mn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[Ot]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Gb(r.nodeValue,o)),r||Ia(s)}else r=nh(r).createTextNode(u),r[Ot]=s,s.stateNode=r}return St(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=lc(s),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ot]=s}else cc(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;St(s),g=!1}else g=kv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Bi(s),s):(Bi(s),null)}if(Bi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),qd(s,s.updateQueue),St(s),null;case 4:return Ae(),r===null&&Gp(s.stateNode.containerInfo),St(s),null;case 10:return Ui(s.type),St(s),null;case 19:if(Z(Wt),g=s.memoizedState,g===null)return St(s),null;if(u=(s.flags&128)!==0,m=g.rendering,m===null)if(u)Tc(g,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=zd(r),m!==null){for(s.flags|=128,Tc(g,!1),r=m.updateQueue,s.updateQueue=r,qd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Rv(o,r),o=o.sibling;return Q(Wt,Wt.current&1|2),s.child}r=r.sibling}g.tail!==null&&ze()>Gd&&(s.flags|=128,u=!0,Tc(g,!1),s.lanes=4194304)}else{if(!u)if(r=zd(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,qd(s,r),Tc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!at)return St(s),null}else 2*ze()-g.renderingStartTime>Gd&&o!==536870912&&(s.flags|=128,u=!0,Tc(g,!1),s.lanes=4194304);g.isBackwards?(m.sibling=s.child,s.child=m):(r=g.last,r!==null?r.sibling=m:s.child=m,g.last=m)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ze(),s.sibling=null,r=Wt.current,Q(Wt,u?r&1|2:r&1),s):(St(s),null);case 22:case 23:return Bi(s),Kg(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(St(s),s.subtreeFlags&6&&(s.flags|=8192)):St(s),o=s.updateQueue,o!==null&&qd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&Z(Ma),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ui(Qt),St(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function MR(r,s){switch(Og(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Ui(Qt),Ae(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return rt(s),null;case 13:if(Bi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));cc()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Z(Wt),null;case 4:return Ae(),null;case 10:return Ui(s.type),null;case 22:case 23:return Bi(s),Kg(),r!==null&&Z(Ma),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Ui(Qt),null;case 25:return null;default:return null}}function eb(r,s){switch(Og(s),s.tag){case 3:Ui(Qt),Ae();break;case 26:case 27:case 5:rt(s);break;case 4:Ae();break;case 13:Bi(s);break;case 19:Z(Wt);break;case 10:Ui(s.type);break;case 22:case 23:Bi(s),Kg(),r!==null&&Z(Ma);break;case 24:Ui(Qt)}}function Ac(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&r)===r){u=void 0;var m=o.create,x=o.inst;u=m(),x.destroy=u}o=o.next}while(o!==g)}}catch(k){mt(s,s.return,k)}}function vs(r,s,o){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&r)===r){var x=u.inst,k=x.destroy;if(k!==void 0){x.destroy=void 0,g=s;var X=o,ae=k;try{ae()}catch(ge){mt(g,X,ge)}}}u=u.next}while(u!==m)}}catch(ge){mt(s,s.return,ge)}}function tb(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Hv(s,o)}catch(u){mt(r,r.return,u)}}}function nb(r,s,o){o.props=Pa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){mt(r,s,u)}}function Rc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(g){mt(r,s,g)}}function ci(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){mt(r,s,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){mt(r,s,g)}else o.current=null}function rb(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){mt(r,r.return,g)}}function Ep(r,s,o){try{var u=r.stateNode;eC(u,r.type,o,s),u[Ct]=s}catch(g){mt(r,r.return,g)}}function ib(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&As(r.type)||r.tag===4}function xp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ib(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&As(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Sp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=th));else if(u!==4&&(u===27&&As(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Sp(r,s,o),r=r.sibling;r!==null;)Sp(r,s,o),r=r.sibling}function $d(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&As(r.type)&&(o=r.stateNode),r=r.child,r!==null))for($d(r,s,o),r=r.sibling;r!==null;)$d(r,s,o),r=r.sibling}function sb(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);gn(s,u,o),s[Ot]=r,s[Ct]=o}catch(m){mt(r,r.return,m)}}var $i=!1,Vt=!1,Tp=!1,ab=typeof WeakSet=="function"?WeakSet:Set,sn=null;function OR(r,s){if(r=r.containerInfo,Xp=lh,r=yv(r),xg(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,k=-1,X=-1,ae=0,ge=0,me=r,oe=null;t:for(;;){for(var ce;me!==o||g!==0&&me.nodeType!==3||(k=x+g),me!==m||u!==0&&me.nodeType!==3||(X=x+u),me.nodeType===3&&(x+=me.nodeValue.length),(ce=me.firstChild)!==null;)oe=me,me=ce;for(;;){if(me===r)break t;if(oe===o&&++ae===g&&(k=x),oe===m&&++ge===u&&(X=x),(ce=me.nextSibling)!==null)break;me=oe,oe=me.parentNode}me=ce}o=k===-1||X===-1?null:{start:k,end:X}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qp={focusedElem:r,selectionRange:o},lh=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,g=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Oe=Pa(o.type,g,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Oe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){mt(o,o.return,Ie)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Jp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Jp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function ob(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:_s(r,o),u&4&&Ac(5,o);break;case 1:if(_s(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(x){mt(o,o.return,x)}else{var g=Pa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(g,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){mt(o,o.return,x)}}u&64&&tb(o),u&512&&Rc(o,o.return);break;case 3:if(_s(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Hv(r,s)}catch(x){mt(o,o.return,x)}}break;case 27:s===null&&u&4&&sb(o);case 26:case 5:_s(r,o),s===null&&u&4&&rb(o),u&512&&Rc(o,o.return);break;case 12:_s(r,o);break;case 13:_s(r,o),u&4&&ub(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=qR.bind(null,o),oC(r,o))));break;case 22:if(u=o.memoizedState!==null||$i,!u){s=s!==null&&s.memoizedState!==null||Vt,g=$i;var m=Vt;$i=u,(Vt=s)&&!m?bs(r,o,(o.subtreeFlags&8772)!==0):_s(r,o),$i=g,Vt=m}break;case 30:break;default:_s(r,o)}}function lb(r){var s=r.alternate;s!==null&&(r.alternate=null,lb(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Qr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var wt=null,Un=!1;function Fi(r,s,o){for(o=o.child;o!==null;)cb(r,s,o),o=o.sibling}function cb(r,s,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ot,o)}catch{}switch(o.tag){case 26:Vt||ci(o,s),Fi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Vt||ci(o,s);var u=wt,g=Un;As(o.type)&&(wt=o.stateNode,Un=!1),Fi(r,s,o),Vc(o.stateNode),wt=u,Un=g;break;case 5:Vt||ci(o,s);case 6:if(u=wt,g=Un,wt=null,Fi(r,s,o),wt=u,Un=g,wt!==null)if(Un)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(o.stateNode)}catch(m){mt(o,s,m)}else try{wt.removeChild(o.stateNode)}catch(m){mt(o,s,m)}break;case 18:wt!==null&&(Un?(r=wt,Wb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),$c(r)):Wb(wt,o.stateNode));break;case 4:u=wt,g=Un,wt=o.stateNode.containerInfo,Un=!0,Fi(r,s,o),wt=u,Un=g;break;case 0:case 11:case 14:case 15:Vt||vs(2,o,s),Vt||vs(4,o,s),Fi(r,s,o);break;case 1:Vt||(ci(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&nb(o,s,u)),Fi(r,s,o);break;case 21:Fi(r,s,o);break;case 22:Vt=(u=Vt)||o.memoizedState!==null,Fi(r,s,o),Vt=u;break;default:Fi(r,s,o)}}function ub(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$c(r)}catch(o){mt(s,s.return,o)}}function PR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new ab),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new ab),s;default:throw Error(i(435,r.tag))}}function Ap(r,s){var o=PR(r);s.forEach(function(u){var g=$R.bind(null,r,u);o.has(u)||(o.add(u),u.then(g,g))})}function Zn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],m=r,x=s,k=x;e:for(;k!==null;){switch(k.tag){case 27:if(As(k.type)){wt=k.stateNode,Un=!1;break e}break;case 5:wt=k.stateNode,Un=!1;break e;case 3:case 4:wt=k.stateNode.containerInfo,Un=!0;break e}k=k.return}if(wt===null)throw Error(i(160));cb(m,x,g),wt=null,Un=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)db(s,r),s=s.sibling}var Pr=null;function db(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Zn(s,r),Jn(r),u&4&&(vs(3,r,r.return),Ac(3,r),vs(5,r,r.return));break;case 1:Zn(s,r),Jn(r),u&512&&(Vt||o===null||ci(o,o.return)),u&64&&$i&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Pr;if(Zn(s,r),Jn(r),u&512&&(Vt||o===null||ci(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Ai]||m[Ot]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),gn(m,u,o),m[Ot]=r,xt(m),u=m;break e;case"link":var x=sw("link","href",g).get(u+(o.href||""));if(x){for(var k=0;k<x.length;k++)if(m=x[k],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(k,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;case"meta":if(x=sw("meta","content",g).get(u+(o.content||""))){for(k=0;k<x.length;k++)if(m=x[k],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(k,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;default:throw Error(i(468,u))}m[Ot]=r,xt(m),u=m}r.stateNode=u}else aw(g,r.type,r.stateNode);else r.stateNode=iw(g,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?aw(g,r.type,r.stateNode):iw(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Ep(r,r.memoizedProps,o.memoizedProps)}break;case 27:Zn(s,r),Jn(r),u&512&&(Vt||o===null||ci(o,o.return)),o!==null&&u&4&&Ep(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Zn(s,r),Jn(r),u&512&&(Vt||o===null||ci(o,o.return)),r.flags&32){g=r.stateNode;try{mr(g,"")}catch(ce){mt(r,r.return,ce)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,Ep(r,g,o!==null?o.memoizedProps:g)),u&1024&&(Tp=!0);break;case 6:if(Zn(s,r),Jn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(ce){mt(r,r.return,ce)}}break;case 3:if(sh=null,g=Pr,Pr=rh(s.containerInfo),Zn(s,r),Pr=g,Jn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{$c(s.containerInfo)}catch(ce){mt(r,r.return,ce)}Tp&&(Tp=!1,hb(r));break;case 4:u=Pr,Pr=rh(r.stateNode.containerInfo),Zn(s,r),Jn(r),Pr=u;break;case 12:Zn(s,r),Jn(r);break;case 13:Zn(s,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Dp=ze()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ap(r,u)));break;case 22:g=r.memoizedState!==null;var X=o!==null&&o.memoizedState!==null,ae=$i,ge=Vt;if($i=ae||g,Vt=ge||X,Zn(s,r),Vt=ge,$i=ae,Jn(r),u&8192)e:for(s=r.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||X||$i||Vt||Va(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){X=o=s;try{if(m=X.stateNode,g)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{k=X.stateNode;var me=X.memoizedProps.style,oe=me!=null&&me.hasOwnProperty("display")?me.display:null;k.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ce){mt(X,X.return,ce)}}}else if(s.tag===6){if(o===null){X=s;try{X.stateNode.nodeValue=g?"":X.memoizedProps}catch(ce){mt(X,X.return,ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ap(r,o))));break;case 19:Zn(s,r),Jn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ap(r,u)));break;case 30:break;case 21:break;default:Zn(s,r),Jn(r)}}function Jn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(ib(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,m=xp(r);$d(r,m,g);break;case 5:var x=o.stateNode;o.flags&32&&(mr(x,""),o.flags&=-33);var k=xp(r);$d(r,k,x);break;case 3:case 4:var X=o.stateNode.containerInfo,ae=xp(r);Sp(r,ae,X);break;default:throw Error(i(161))}}catch(ge){mt(r,r.return,ge)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function hb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;hb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function _s(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ob(r,s.alternate,s),s=s.sibling}function Va(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:vs(4,s,s.return),Va(s);break;case 1:ci(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&nb(s,s.return,o),Va(s);break;case 27:Vc(s.stateNode);case 26:case 5:ci(s,s.return),Va(s);break;case 22:s.memoizedState===null&&Va(s);break;case 30:Va(s);break;default:Va(s)}r=r.sibling}}function bs(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=r,m=s,x=m.flags;switch(m.tag){case 0:case 11:case 15:bs(g,m,o),Ac(4,m);break;case 1:if(bs(g,m,o),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){mt(u,u.return,ae)}if(u=m,g=u.updateQueue,g!==null){var k=u.stateNode;try{var X=g.shared.hiddenCallbacks;if(X!==null)for(g.shared.hiddenCallbacks=null,g=0;g<X.length;g++)Bv(X[g],k)}catch(ae){mt(u,u.return,ae)}}o&&x&64&&tb(m),Rc(m,m.return);break;case 27:sb(m);case 26:case 5:bs(g,m,o),o&&u===null&&x&4&&rb(m),Rc(m,m.return);break;case 12:bs(g,m,o);break;case 13:bs(g,m,o),o&&x&4&&ub(g,m);break;case 22:m.memoizedState===null&&bs(g,m,o),Rc(m,m.return);break;case 30:break;default:bs(g,m,o)}s=s.sibling}}function Rp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&hc(o))}function Cp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&hc(r))}function ui(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fb(r,s,o,u),s=s.sibling}function fb(r,s,o,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ui(r,s,o,u),g&2048&&Ac(9,s);break;case 1:ui(r,s,o,u);break;case 3:ui(r,s,o,u),g&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&hc(r)));break;case 12:if(g&2048){ui(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,x=m.id,k=m.onPostCommit;typeof k=="function"&&k(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(X){mt(s,s.return,X)}}else ui(r,s,o,u);break;case 13:ui(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,x=s.alternate,s.memoizedState!==null?m._visibility&2?ui(r,s,o,u):Cc(r,s):m._visibility&2?ui(r,s,o,u):(m._visibility|=2,Ho(r,s,o,u,(s.subtreeFlags&10256)!==0)),g&2048&&Rp(x,s);break;case 24:ui(r,s,o,u),g&2048&&Cp(s.alternate,s);break;default:ui(r,s,o,u)}}function Ho(r,s,o,u,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,x=s,k=o,X=u,ae=x.flags;switch(x.tag){case 0:case 11:case 15:Ho(m,x,k,X,g),Ac(8,x);break;case 23:break;case 22:var ge=x.stateNode;x.memoizedState!==null?ge._visibility&2?Ho(m,x,k,X,g):Cc(m,x):(ge._visibility|=2,Ho(m,x,k,X,g)),g&&ae&2048&&Rp(x.alternate,x);break;case 24:Ho(m,x,k,X,g),g&&ae&2048&&Cp(x.alternate,x);break;default:Ho(m,x,k,X,g)}s=s.sibling}}function Cc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,g=u.flags;switch(u.tag){case 22:Cc(o,u),g&2048&&Rp(u.alternate,u);break;case 24:Cc(o,u),g&2048&&Cp(u.alternate,u);break;default:Cc(o,u)}s=s.sibling}}var Nc=8192;function qo(r){if(r.subtreeFlags&Nc)for(r=r.child;r!==null;)gb(r),r=r.sibling}function gb(r){switch(r.tag){case 26:qo(r),r.flags&Nc&&r.memoizedState!==null&&bC(Pr,r.memoizedState,r.memoizedProps);break;case 5:qo(r);break;case 3:case 4:var s=Pr;Pr=rh(r.stateNode.containerInfo),qo(r),Pr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Nc,Nc=16777216,qo(r),Nc=s):qo(r));break;default:qo(r)}}function pb(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Ic(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,yb(u,r)}pb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)mb(r),r=r.sibling}function mb(r){switch(r.tag){case 0:case 11:case 15:Ic(r),r.flags&2048&&vs(9,r,r.return);break;case 3:Ic(r);break;case 12:Ic(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Fd(r)):Ic(r);break;default:Ic(r)}}function Fd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,yb(u,r)}pb(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:vs(8,s,s.return),Fd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Fd(s));break;default:Fd(s)}r=r.sibling}}function yb(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:vs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=r;sn!==null;){u=sn;var g=u.sibling,m=u.return;if(lb(u),u===o){sn=null;break e}if(g!==null){g.return=m,sn=g;break e}sn=m}}}var VR={getCacheForType:function(r){var s=_n(Qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},LR=typeof WeakMap=="function"?WeakMap:Map,ut=0,vt=null,Ke=null,tt=0,dt=0,er=null,ws=!1,$o=!1,Np=!1,Gi=0,It=0,Es=0,La=0,Ip=0,Tr=0,Fo=0,kc=null,jn=null,kp=!1,Dp=0,Gd=1/0,Yd=null,xs=null,fn=0,Ss=null,Go=null,Yo=0,Mp=0,Op=null,vb=null,Dc=0,Pp=null;function tr(){if((ut&2)!==0&&tt!==0)return tt&-tt;if(D.T!==null){var r=Oo;return r!==0?r:Hp()}return Kr()}function _b(){Tr===0&&(Tr=(tt&536870912)===0||at?Ti():536870912);var r=Sr.current;return r!==null&&(r.flags|=32),Tr}function nr(r,s,o){(r===vt&&(dt===2||dt===9)||r.cancelPendingCommit!==null)&&(Ko(r,0),Ts(r,tt,Tr,!1)),ur(r,o),((ut&2)===0||r!==vt)&&(r===vt&&((ut&2)===0&&(La|=o),It===4&&Ts(r,tt,Tr,!1)),di(r))}function bb(r,s,o){if((ut&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||In(r,s),g=u?jR(r,s):zp(r,s,!0),m=u;do{if(g===0){$o&&!u&&Ts(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!zR(o)){g=zp(r,s,!1),m=!1;continue}if(g===2){if(m=s,r.errorRecoveryDisabledLanes&m)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var k=r;g=kc;var X=k.current.memoizedState.isDehydrated;if(X&&(Ko(k,x).flags|=256),x=zp(k,x,!1),x!==2){if(Np&&!X){k.errorRecoveryDisabledLanes|=m,La|=m,g=4;break e}m=jn,jn=g,m!==null&&(jn===null?jn=m:jn.push.apply(jn,m))}g=x}if(m=!1,g!==2)continue}}if(g===1){Ko(r,0),Ts(r,s,0,!0);break}e:{switch(u=r,m=g,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ts(u,s,Tr,!ws);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Dp+300-ze(),10<g)){if(Ts(u,s,Tr,!ws),cn(u,0,!0)!==0)break e;u.timeoutHandle=Xb(wb.bind(null,u,o,jn,Yd,kp,s,Tr,La,Fo,ws,m,2,-0,0),g);break e}wb(u,o,jn,Yd,kp,s,Tr,La,Fo,ws,m,0,-0,0)}}break}while(!0);di(r)}function wb(r,s,o,u,g,m,x,k,X,ae,ge,me,oe,ce){if(r.timeoutHandle=-1,me=s.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Uc={stylesheets:null,count:0,unsuspend:_C},gb(s),me=wC(),me!==null)){r.cancelPendingCommit=me(Cb.bind(null,r,s,m,o,u,g,x,k,X,ge,1,oe,ce)),Ts(r,m,x,!ae);return}Cb(r,s,m,o,u,g,x,k,X)}function zR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],m=g.getSnapshot;g=g.value;try{if(!Qn(m(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ts(r,s,o,u){s&=~Ip,s&=~La,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var g=s;0<g;){var m=31-Et(g),x=1<<m;u[m]=-1,g&=~x}o!==0&&dr(r,o,s)}function Kd(){return(ut&6)===0?(Mc(0),!1):!0}function Vp(){if(Ke!==null){if(dt===0)var r=Ke.return;else r=Ke,zi=ka=null,Jg(r),jo=null,xc=0,r=Ke;for(;r!==null;)eb(r.alternate,r),r=r.return;Ke=null}}function Ko(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,nC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Vp(),vt=r,Ke=o=Pi(r.current,null),tt=s,dt=0,er=null,ws=!1,$o=In(r,s),Np=!1,Fo=Tr=Ip=La=Es=It=0,jn=kc=null,kp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var g=31-Et(u),m=1<<g;s|=r[g],u&=~m}return Gi=s,md(),o}function Eb(r,s){He=null,D.H=Pd,s===gc||s===Td?(s=Uv(),dt=3):s===Vv?(s=Uv(),dt=4):dt=s===j_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,er=s,Ke===null&&(It=1,jd(r,br(s,r.current)))}function xb(){var r=D.H;return D.H=Pd,r===null?Pd:r}function Sb(){var r=D.A;return D.A=VR,r}function Lp(){It=4,ws||(tt&4194048)!==tt&&Sr.current!==null||($o=!0),(Es&134217727)===0&&(La&134217727)===0||vt===null||Ts(vt,tt,Tr,!1)}function zp(r,s,o){var u=ut;ut|=2;var g=xb(),m=Sb();(vt!==r||tt!==s)&&(Yd=null,Ko(r,s)),s=!1;var x=It;e:do try{if(dt!==0&&Ke!==null){var k=Ke,X=er;switch(dt){case 8:Vp(),x=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(s=!0);var ae=dt;if(dt=0,er=null,Xo(r,k,X,ae),o&&$o){x=0;break e}break;default:ae=dt,dt=0,er=null,Xo(r,k,X,ae)}}UR(),x=It;break}catch(ge){Eb(r,ge)}while(!0);return s&&r.shellSuspendCounter++,zi=ka=null,ut=u,D.H=g,D.A=m,Ke===null&&(vt=null,tt=0,md()),x}function UR(){for(;Ke!==null;)Tb(Ke)}function jR(r,s){var o=ut;ut|=2;var u=xb(),g=Sb();vt!==r||tt!==s?(Yd=null,Gd=ze()+500,Ko(r,s)):$o=In(r,s);e:do try{if(dt!==0&&Ke!==null){s=Ke;var m=er;t:switch(dt){case 1:dt=0,er=null,Xo(r,s,m,1);break;case 2:case 9:if(Lv(m)){dt=0,er=null,Ab(s);break}s=function(){dt!==2&&dt!==9||vt!==r||(dt=7),di(r)},m.then(s,s);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Lv(m)?(dt=0,er=null,Ab(s)):(dt=0,er=null,Xo(r,s,m,7));break;case 5:var x=null;switch(Ke.tag){case 26:x=Ke.memoizedState;case 5:case 27:var k=Ke;if(!x||ow(x)){dt=0,er=null;var X=k.sibling;if(X!==null)Ke=X;else{var ae=k.return;ae!==null?(Ke=ae,Xd(ae)):Ke=null}break t}}dt=0,er=null,Xo(r,s,m,5);break;case 6:dt=0,er=null,Xo(r,s,m,6);break;case 8:Vp(),It=6;break e;default:throw Error(i(462))}}BR();break}catch(ge){Eb(r,ge)}while(!0);return zi=ka=null,D.H=u,D.A=g,ut=o,Ke!==null?0:(vt=null,tt=0,md(),It)}function BR(){for(;Ke!==null&&!Be();)Tb(Ke)}function Tb(r){var s=Z_(r.alternate,r,Gi);r.memoizedProps=r.pendingProps,s===null?Xd(r):Ke=s}function Ab(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=G_(o,s,s.pendingProps,s.type,void 0,tt);break;case 11:s=G_(o,s,s.pendingProps,s.type.render,s.ref,tt);break;case 5:Jg(s);default:eb(o,s),s=Ke=Rv(s,Gi),s=Z_(o,s,Gi)}r.memoizedProps=r.pendingProps,s===null?Xd(r):Ke=s}function Xo(r,s,o,u){zi=ka=null,Jg(s),jo=null,xc=0;var g=s.return;try{if(IR(r,g,s,o,tt)){It=1,jd(r,br(o,r.current)),Ke=null;return}}catch(m){if(g!==null)throw Ke=g,m;It=1,jd(r,br(o,r.current)),Ke=null;return}s.flags&32768?(at||u===1?r=!0:$o||(tt&536870912)!==0?r=!1:(ws=r=!0,(u===2||u===9||u===3||u===6)&&(u=Sr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Rb(s,r)):Xd(s)}function Xd(r){var s=r;do{if((s.flags&32768)!==0){Rb(s,ws);return}r=s.return;var o=DR(s.alternate,s,Gi);if(o!==null){Ke=o;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=r}while(s!==null);It===0&&(It=5)}function Rb(r,s){do{var o=MR(r.alternate,r);if(o!==null){o.flags&=32767,Ke=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ke=r;return}Ke=r=o}while(r!==null);It=6,Ke=null}function Cb(r,s,o,u,g,m,x,k,X){r.cancelPendingCommit=null;do Qd();while(fn!==0);if((ut&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Cg,Yn(r,o,m,x,k,X),r===vt&&(Ke=vt=null,tt=0),Go=s,Ss=r,Yo=o,Mp=m,Op=g,vb=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,FR(Gt,function(){return Mb(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,g=q.p,q.p=2,x=ut,ut|=4;try{OR(r,s,o)}finally{ut=x,q.p=g,D.T=u}}fn=1,Nb(),Ib(),kb()}}function Nb(){if(fn===1){fn=0;var r=Ss,s=Go,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var u=q.p;q.p=2;var g=ut;ut|=4;try{db(s,r);var m=Qp,x=yv(r.containerInfo),k=m.focusedElem,X=m.selectionRange;if(x!==k&&k&&k.ownerDocument&&mv(k.ownerDocument.documentElement,k)){if(X!==null&&xg(k)){var ae=X.start,ge=X.end;if(ge===void 0&&(ge=ae),"selectionStart"in k)k.selectionStart=ae,k.selectionEnd=Math.min(ge,k.value.length);else{var me=k.ownerDocument||document,oe=me&&me.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),Oe=k.textContent.length,Ie=Math.min(X.start,Oe),pt=X.end===void 0?Ie:Math.min(X.end,Oe);!ce.extend&&Ie>pt&&(x=pt,pt=Ie,Ie=x);var re=pv(k,Ie),J=pv(k,pt);if(re&&J&&(ce.rangeCount!==1||ce.anchorNode!==re.node||ce.anchorOffset!==re.offset||ce.focusNode!==J.node||ce.focusOffset!==J.offset)){var se=me.createRange();se.setStart(re.node,re.offset),ce.removeAllRanges(),Ie>pt?(ce.addRange(se),ce.extend(J.node,J.offset)):(se.setEnd(J.node,J.offset),ce.addRange(se))}}}}for(me=[],ce=k;ce=ce.parentNode;)ce.nodeType===1&&me.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<me.length;k++){var pe=me[k];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}lh=!!Xp,Qp=Xp=null}finally{ut=g,q.p=u,D.T=o}}r.current=s,fn=2}}function Ib(){if(fn===2){fn=0;var r=Ss,s=Go,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var u=q.p;q.p=2;var g=ut;ut|=4;try{ob(r,s.alternate,s)}finally{ut=g,q.p=u,D.T=o}}fn=3}}function kb(){if(fn===4||fn===3){fn=0,Ze();var r=Ss,s=Go,o=Yo,u=vb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,Go=Ss=null,Db(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(xs=null),as(o),s=s.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ot,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=D.T,g=q.p,q.p=2,D.T=null;try{for(var m=r.onRecoverableError,x=0;x<u.length;x++){var k=u[x];m(k.value,{componentStack:k.stack})}}finally{D.T=s,q.p=g}}(Yo&3)!==0&&Qd(),di(r),g=r.pendingLanes,(o&4194090)!==0&&(g&42)!==0?r===Pp?Dc++:(Dc=0,Pp=r):Dc=0,Mc(0)}}function Db(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,hc(s)))}function Qd(r){return Nb(),Ib(),kb(),Mb()}function Mb(){if(fn!==5)return!1;var r=Ss,s=Mp;Mp=0;var o=as(Yo),u=D.T,g=q.p;try{q.p=32>o?32:o,D.T=null,o=Op,Op=null;var m=Ss,x=Yo;if(fn=0,Go=Ss=null,Yo=0,(ut&6)!==0)throw Error(i(331));var k=ut;if(ut|=4,mb(m.current),fb(m,m.current,x,o),ut=k,Mc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ot,m)}catch{}return!0}finally{q.p=g,D.T=u,Db(r,s)}}function Ob(r,s,o){s=br(o,s),s=fp(r.stateNode,s,2),r=gs(r,s,2),r!==null&&(ur(r,2),di(r))}function mt(r,s,o){if(r.tag===3)Ob(r,r,o);else for(;s!==null;){if(s.tag===3){Ob(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(xs===null||!xs.has(u))){r=br(o,r),o=z_(2),u=gs(s,o,2),u!==null&&(U_(o,u,s,r),ur(u,2),di(u));break}}s=s.return}}function Up(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new LR;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(o)||(Np=!0,g.add(o),r=HR.bind(null,r,s,o),s.then(r,r))}function HR(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,vt===r&&(tt&o)===o&&(It===4||It===3&&(tt&62914560)===tt&&300>ze()-Dp?(ut&2)===0&&Ko(r,0):Ip|=o,Fo===tt&&(Fo=0)),di(r)}function Pb(r,s){s===0&&(s=Ir()),r=Io(r,s),r!==null&&(ur(r,s),di(r))}function qR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Pb(r,o)}function $R(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Pb(r,o)}function FR(r,s){return Le(r,s)}var Wd=null,Qo=null,jp=!1,Zd=!1,Bp=!1,za=0;function di(r){r!==Qo&&r.next===null&&(Qo===null?Wd=Qo=r:Qo=Qo.next=r),Zd=!0,jp||(jp=!0,YR())}function Mc(r,s){if(!Bp&&Zd){Bp=!0;do for(var o=!1,u=Wd;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var x=u.suspendedLanes,k=u.pingedLanes;m=(1<<31-Et(42|r)+1)-1,m&=g&~(x&~k),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Ub(u,m))}else m=tt,m=cn(u,u===vt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||In(u,m)||(o=!0,Ub(u,m));u=u.next}while(o);Bp=!1}}function GR(){Vb()}function Vb(){Zd=jp=!1;var r=0;za!==0&&(tC()&&(r=za),za=0);for(var s=ze(),o=null,u=Wd;u!==null;){var g=u.next,m=Lb(u,s);m===0?(u.next=null,o===null?Wd=g:o.next=g,g===null&&(Qo=o)):(o=u,(r!==0||(m&3)!==0)&&(Zd=!0)),u=g}Mc(r)}function Lb(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var x=31-Et(m),k=1<<x,X=g[x];X===-1?((k&o)===0||(k&u)!==0)&&(g[x]=Si(k,s)):X<=s&&(r.expiredLanes|=k),m&=~k}if(s=vt,o=tt,o=cn(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(dt===2||dt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&$e(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||In(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&$e(u),as(o)){case 2:case 8:o=vn;break;case 32:o=Gt;break;case 268435456:o=An;break;default:o=Gt}return u=zb.bind(null,r),o=Le(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&$e(u),r.callbackPriority=2,r.callbackNode=null,2}function zb(r,s){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Qd()&&r.callbackNode!==o)return null;var u=tt;return u=cn(r,r===vt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(bb(r,u,s),Lb(r,ze()),r.callbackNode!=null&&r.callbackNode===o?zb.bind(null,r):null)}function Ub(r,s){if(Qd())return null;bb(r,s,!0)}function YR(){rC(function(){(ut&6)!==0?Le(Rt,GR):Vb()})}function Hp(){return za===0&&(za=Ti()),za}function jb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:vo(""+r)}function Bb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function KR(r,s,o,u,g){if(s==="submit"&&o&&o.stateNode===g){var m=jb((g[Ct]||null).action),x=u.submitter;x&&(s=(s=x[Ct]||null)?jb(s.formAction):x.getAttribute("formAction"),s!==null&&(m=s,x=null));var k=new _o("action","action",null,u,g);r.push({event:k,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(za!==0){var X=x?Bb(g,x):new FormData(g);lp(o,{pending:!0,data:X,method:g.method,action:m},null,X)}}else typeof m=="function"&&(k.preventDefault(),X=x?Bb(g,x):new FormData(g),lp(o,{pending:!0,data:X,method:g.method,action:m},m,X))},currentTarget:g}]})}}for(var qp=0;qp<Rg.length;qp++){var $p=Rg[qp],XR=$p.toLowerCase(),QR=$p[0].toUpperCase()+$p.slice(1);Or(XR,"on"+QR)}Or(bv,"onAnimationEnd"),Or(wv,"onAnimationIteration"),Or(Ev,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(fR,"onTransitionRun"),Or(gR,"onTransitionStart"),Or(pR,"onTransitionCancel"),Or(xv,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oc));function Hb(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],g=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var x=u.length-1;0<=x;x--){var k=u[x],X=k.instance,ae=k.currentTarget;if(k=k.listener,X!==m&&g.isPropagationStopped())break e;m=k,g.currentTarget=ae;try{m(g)}catch(ge){Ud(ge)}g.currentTarget=null,m=X}else for(x=0;x<u.length;x++){if(k=u[x],X=k.instance,ae=k.currentTarget,k=k.listener,X!==m&&g.isPropagationStopped())break e;m=k,g.currentTarget=ae;try{m(g)}catch(ge){Ud(ge)}g.currentTarget=null,m=X}}}}function Xe(r,s){var o=s[ua];o===void 0&&(o=s[ua]=new Set);var u=r+"__bubble";o.has(u)||(qb(s,r,2,!1),o.add(u))}function Fp(r,s,o){var u=0;s&&(u|=4),qb(o,r,u,s)}var Jd="_reactListening"+Math.random().toString(36).slice(2);function Gp(r){if(!r[Jd]){r[Jd]=!0,da.forEach(function(o){o!=="selectionchange"&&(WR.has(o)||Fp(o,!1,r),Fp(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Jd]||(s[Jd]=!0,Fp("selectionchange",!1,s))}}function qb(r,s,o,u){switch(fw(s)){case 2:var g=SC;break;case 8:g=TC;break;default:g=am}o=g.bind(null,s,o,r),g=void 0,!vr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(s,o,{capture:!0,passive:g}):r.addEventListener(s,o,!0):g!==void 0?r.addEventListener(s,o,{passive:g}):r.addEventListener(s,o,!1)}function Yp(r,s,o,u,g){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var k=u.stateNode.containerInfo;if(k===g)break;if(x===4)for(x=u.return;x!==null;){var X=x.tag;if((X===3||X===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;k!==null;){if(x=hr(k),x===null)return;if(X=x.tag,X===5||X===6||X===26||X===27){u=m=x;continue e}k=k.parentNode}}u=u.return}td(function(){var ae=m,ge=yr(o),me=[];e:{var oe=Sv.get(r);if(oe!==void 0){var ce=_o,Oe=r;switch(r){case"keypress":if(ni(o)===0)break e;case"keydown":case"keyup":ce=To;break;case"focusin":Oe="focus",ce=Eo;break;case"focusout":Oe="blur",ce=Eo;break;case"beforeblur":case"afterblur":ce=Eo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=_r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=_g;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=cd;break;case bv:case wv:case Ev:ce=xo;break;case xv:ce=dd;break;case"scroll":case"scrollend":ce=nd;break;case"wheel":ce=Ao;break;case"copy":case"cut":case"paste":ce=So;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=ic;break;case"toggle":case"beforetoggle":ce=fd}var Ie=(s&4)!==0,pt=!Ie&&(r==="scroll"||r==="scrollend"),re=Ie?oe!==null?oe+"Capture":null:oe;Ie=[];for(var J=ae,se;J!==null;){var pe=J;if(se=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||se===null||re===null||(pe=ya(J,re),pe!=null&&Ie.push(Pc(J,pe,se))),pt)break;J=J.return}0<Ie.length&&(oe=new ce(oe,Oe,null,o,ge),me.push({event:oe,listeners:Ie}))}}if((s&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",ce=r==="mouseout"||r==="pointerout",oe&&o!==Ni&&(Oe=o.relatedTarget||o.fromElement)&&(hr(Oe)||Oe[Ln]))break e;if((ce||oe)&&(oe=ge.window===ge?ge:(oe=ge.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(Oe=o.relatedTarget||o.toElement,ce=ae,Oe=Oe?hr(Oe):null,Oe!==null&&(pt=l(Oe),Ie=Oe.tag,Oe!==pt||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(ce=null,Oe=ae),ce!==Oe)){if(Ie=_r,pe="onMouseLeave",re="onMouseEnter",J="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=ic,pe="onPointerLeave",re="onPointerEnter",J="pointer"),pt=ce==null?oe:gr(ce),se=Oe==null?oe:gr(Oe),oe=new Ie(pe,J+"leave",ce,o,ge),oe.target=pt,oe.relatedTarget=se,pe=null,hr(ge)===ae&&(Ie=new Ie(re,J+"enter",Oe,o,ge),Ie.target=se,Ie.relatedTarget=pt,pe=Ie),pt=pe,ce&&Oe)t:{for(Ie=ce,re=Oe,J=0,se=Ie;se;se=Wo(se))J++;for(se=0,pe=re;pe;pe=Wo(pe))se++;for(;0<J-se;)Ie=Wo(Ie),J--;for(;0<se-J;)re=Wo(re),se--;for(;J--;){if(Ie===re||re!==null&&Ie===re.alternate)break t;Ie=Wo(Ie),re=Wo(re)}Ie=null}else Ie=null;ce!==null&&$b(me,oe,ce,Ie,!1),Oe!==null&&pt!==null&&$b(me,pt,Oe,Ie,!0)}}e:{if(oe=ae?gr(ae):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Te=cv;else if(Xt(oe))if(uv)Te=uR;else{Te=lR;var Fe=oR}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Wl(ae.elementType)&&(Te=cv):Te=cR;if(Te&&(Te=Te(r,ae))){Oi(me,Te,o,ge);break e}Fe&&Fe(r,oe,ae),r==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&cs(oe,"number",oe.value)}switch(Fe=ae?gr(ae):window,r){case"focusin":(Xt(Fe)||Fe.contentEditable==="true")&&(Ro=Fe,Sg=ae,oc=null);break;case"focusout":oc=Sg=Ro=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,vv(me,o,ge);break;case"selectionchange":if(hR)break;case"keydown":case"keyup":vv(me,o,ge)}var Ce;if(si)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Je?de(r,o)&&(ke="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(w&&o.locale!=="ko"&&(Je||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Je&&(Ce=Jl()):(ti=ge,us="value"in ti?ti.value:ti.textContent,Je=!0)),Fe=eh(ae,ke),0<Fe.length&&(ke=new nc(ke,r,null,o,ge),me.push({event:ke,listeners:Fe}),Ce?ke.data=Ce:(Ce=be(o),Ce!==null&&(ke.data=Ce)))),(Ce=_?Kt(r,o):et(r,o))&&(ke=eh(ae,"onBeforeInput"),0<ke.length&&(Fe=new nc("onBeforeInput","beforeinput",null,o,ge),me.push({event:Fe,listeners:ke}),Fe.data=Ce)),KR(me,r,ae,o,ge)}Hb(me,s)})}function Pc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function eh(r,s){for(var o=s+"Capture",u=[];r!==null;){var g=r,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=ya(r,o),g!=null&&u.unshift(Pc(r,g,m)),g=ya(r,s),g!=null&&u.push(Pc(r,g,m))),r.tag===3)return u;r=r.return}return[]}function Wo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $b(r,s,o,u,g){for(var m=s._reactName,x=[];o!==null&&o!==u;){var k=o,X=k.alternate,ae=k.stateNode;if(k=k.tag,X!==null&&X===u)break;k!==5&&k!==26&&k!==27||ae===null||(X=ae,g?(ae=ya(o,m),ae!=null&&x.unshift(Pc(o,ae,X))):g||(ae=ya(o,m),ae!=null&&x.push(Pc(o,ae,X)))),o=o.return}x.length!==0&&r.push({event:s,listeners:x})}var ZR=/\r\n?/g,JR=/\u0000|\uFFFD/g;function Fb(r){return(typeof r=="string"?r:""+r).replace(ZR,`
`).replace(JR,"")}function Gb(r,s){return s=Fb(s),Fb(r)===s}function th(){}function gt(r,s,o,u,g,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||mr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&mr(r,""+u);break;case"className":pr(r,"class",u);break;case"tabIndex":pr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(r,o,u);break;case"style":Ql(r,u,m);break;case"data":if(s!=="object"){pr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=vo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&gt(r,s,"name",g.name,g,null),gt(r,s,"formEncType",g.formEncType,g,null),gt(r,s,"formMethod",g.formMethod,g,null),gt(r,s,"formTarget",g.formTarget,g,null)):(gt(r,s,"encType",g.encType,g,null),gt(r,s,"method",g.method,g,null),gt(r,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=vo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=th);break;case"onScroll":u!=null&&Xe("scroll",r);break;case"onScrollEnd":u!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=vo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),Wr(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Wr(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=yg.get(o)||o,Wr(r,o,u))}}function Kp(r,s,o,u,g,m){switch(o){case"style":Ql(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?mr(r,u):(typeof u=="number"||typeof u=="bigint")&&mr(r,""+u);break;case"onScroll":u!=null&&Xe("scroll",r);break;case"onScrollEnd":u!=null&&Xe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=th);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!os.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),m=r[Ct]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,g);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Wr(r,o,u)}}}function gn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var u=!1,g=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:gt(r,s,m,x,o,null)}}g&&gt(r,s,"srcSet",o.srcSet,o,null),u&&gt(r,s,"src",o.src,o,null);return;case"input":Xe("invalid",r);var k=m=x=g=null,X=null,ae=null;for(u in o)if(o.hasOwnProperty(u)){var ge=o[u];if(ge!=null)switch(u){case"name":g=ge;break;case"type":x=ge;break;case"checked":X=ge;break;case"defaultChecked":ae=ge;break;case"value":m=ge;break;case"defaultValue":k=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,s));break;default:gt(r,s,u,ge,o,null)}}ga(r,m,k,X,ae,x,g,!1),yo(r);return;case"select":Xe("invalid",r),u=x=m=null;for(g in o)if(o.hasOwnProperty(g)&&(k=o[g],k!=null))switch(g){case"value":m=k;break;case"defaultValue":x=k;break;case"multiple":u=k;default:gt(r,s,g,k,o,null)}s=m,o=x,r.multiple=!!u,s!=null?Ci(r,!!u,s,!1):o!=null&&Ci(r,!!u,o,!0);return;case"textarea":Xe("invalid",r),m=g=u=null;for(x in o)if(o.hasOwnProperty(x)&&(k=o[x],k!=null))switch(x){case"value":u=k;break;case"defaultValue":g=k;break;case"children":m=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:gt(r,s,x,k,o,null)}pa(r,u,g,m),yo(r);return;case"option":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:gt(r,s,X,u,o,null)}return;case"dialog":Xe("beforetoggle",r),Xe("toggle",r),Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(u=0;u<Oc.length;u++)Xe(Oc[u],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(u=o[ae],u!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:gt(r,s,ae,u,o,null)}return;default:if(Wl(s)){for(ge in o)o.hasOwnProperty(ge)&&(u=o[ge],u!==void 0&&Kp(r,s,ge,u,o,void 0));return}}for(k in o)o.hasOwnProperty(k)&&(u=o[k],u!=null&&gt(r,s,k,u,o,null))}function eC(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,x=null,k=null,X=null,ae=null,ge=null;for(ce in o){var me=o[ce];if(o.hasOwnProperty(ce)&&me!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":X=me;default:u.hasOwnProperty(ce)||gt(r,s,ce,null,u,me)}}for(var oe in u){var ce=u[oe];if(me=o[oe],u.hasOwnProperty(oe)&&(ce!=null||me!=null))switch(oe){case"type":m=ce;break;case"name":g=ce;break;case"checked":ae=ce;break;case"defaultChecked":ge=ce;break;case"value":x=ce;break;case"defaultValue":k=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,s));break;default:ce!==me&&gt(r,s,oe,ce,u,me)}}Xn(r,x,k,X,ae,ge,m,g);return;case"select":ce=x=k=oe=null;for(m in o)if(X=o[m],o.hasOwnProperty(m)&&X!=null)switch(m){case"value":break;case"multiple":ce=X;default:u.hasOwnProperty(m)||gt(r,s,m,null,u,X)}for(g in u)if(m=u[g],X=o[g],u.hasOwnProperty(g)&&(m!=null||X!=null))switch(g){case"value":oe=m;break;case"defaultValue":k=m;break;case"multiple":x=m;default:m!==X&&gt(r,s,g,m,u,X)}s=k,o=x,u=ce,oe!=null?Ci(r,!!o,oe,!1):!!u!=!!o&&(s!=null?Ci(r,!!o,s,!0):Ci(r,!!o,o?[]:"",!1));return;case"textarea":ce=oe=null;for(k in o)if(g=o[k],o.hasOwnProperty(k)&&g!=null&&!u.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:gt(r,s,k,null,u,g)}for(x in u)if(g=u[x],m=o[x],u.hasOwnProperty(x)&&(g!=null||m!=null))switch(x){case"value":oe=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==m&&gt(r,s,x,g,u,m)}ht(r,oe,ce);return;case"option":for(var Oe in o)if(oe=o[Oe],o.hasOwnProperty(Oe)&&oe!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":r.selected=!1;break;default:gt(r,s,Oe,null,u,oe)}for(X in u)if(oe=u[X],ce=o[X],u.hasOwnProperty(X)&&oe!==ce&&(oe!=null||ce!=null))switch(X){case"selected":r.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:gt(r,s,X,oe,u,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)oe=o[Ie],o.hasOwnProperty(Ie)&&oe!=null&&!u.hasOwnProperty(Ie)&&gt(r,s,Ie,null,u,oe);for(ae in u)if(oe=u[ae],ce=o[ae],u.hasOwnProperty(ae)&&oe!==ce&&(oe!=null||ce!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:gt(r,s,ae,oe,u,ce)}return;default:if(Wl(s)){for(var pt in o)oe=o[pt],o.hasOwnProperty(pt)&&oe!==void 0&&!u.hasOwnProperty(pt)&&Kp(r,s,pt,void 0,u,oe);for(ge in u)oe=u[ge],ce=o[ge],!u.hasOwnProperty(ge)||oe===ce||oe===void 0&&ce===void 0||Kp(r,s,ge,oe,u,ce);return}}for(var re in o)oe=o[re],o.hasOwnProperty(re)&&oe!=null&&!u.hasOwnProperty(re)&&gt(r,s,re,null,u,oe);for(me in u)oe=u[me],ce=o[me],!u.hasOwnProperty(me)||oe===ce||oe==null&&ce==null||gt(r,s,me,oe,u,ce)}var Xp=null,Qp=null;function nh(r){return r.nodeType===9?r:r.ownerDocument}function Yb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Wp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zp=null;function tC(){var r=window.event;return r&&r.type==="popstate"?r===Zp?!1:(Zp=r,!0):(Zp=null,!1)}var Xb=typeof setTimeout=="function"?setTimeout:void 0,nC=typeof clearTimeout=="function"?clearTimeout:void 0,Qb=typeof Promise=="function"?Promise:void 0,rC=typeof queueMicrotask=="function"?queueMicrotask:typeof Qb<"u"?function(r){return Qb.resolve(null).then(r).catch(iC)}:Xb;function iC(r){setTimeout(function(){throw r})}function As(r){return r==="head"}function Wb(r,s){var o=s,u=0,g=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var x=r.ownerDocument;if(o&1&&Vc(x.documentElement),o&2&&Vc(x.body),o&4)for(o=x.head,Vc(o),x=o.firstChild;x;){var k=x.nextSibling,X=x.nodeName;x[Ai]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=k}}if(g===0){r.removeChild(m),$c(s);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);$c(s)}function Jp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Jp(o),Qr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function sC(r,s,o,u){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ai])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function aC(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Vr(r.nextSibling),r===null))return null;return r}function em(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function oC(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var tm=null;function Zb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Jb(r,s,o){switch(s=nh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Vc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Qr(r)}var Ar=new Map,ew=new Set;function rh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Yi=q.d;q.d={f:lC,r:cC,D:uC,C:dC,L:hC,m:fC,X:pC,S:gC,M:mC};function lC(){var r=Yi.f(),s=Kd();return r||s}function cC(r){var s=fr(r);s!==null&&s.tag===5&&s.type==="form"?b_(s):Yi.r(r)}var Zo=typeof document>"u"?null:document;function tw(r,s,o){var u=Zo;if(u&&typeof s=="string"&&s){var g=jt(s);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),ew.has(g)||(ew.add(g),r={rel:r,crossOrigin:o,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),gn(s,"link",r),xt(s),u.head.appendChild(s)))}}function uC(r){Yi.D(r),tw("dns-prefetch",r,null)}function dC(r,s){Yi.C(r,s),tw("preconnect",r,s)}function hC(r,s,o){Yi.L(r,s,o);var u=Zo;if(u&&r&&s){var g='link[rel="preload"][as="'+jt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+jt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+jt(o.imageSizes)+'"]')):g+='[href="'+jt(r)+'"]';var m=g;switch(s){case"style":m=Jo(r);break;case"script":m=el(r)}Ar.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Ar.set(m,r),u.querySelector(g)!==null||s==="style"&&u.querySelector(Lc(m))||s==="script"&&u.querySelector(zc(m))||(s=u.createElement("link"),gn(s,"link",r),xt(s),u.head.appendChild(s)))}}function fC(r,s){Yi.m(r,s);var o=Zo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+jt(u)+'"][href="'+jt(r)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=el(r)}if(!Ar.has(m)&&(r=y({rel:"modulepreload",href:r},s),Ar.set(m,r),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zc(m)))return}u=o.createElement("link"),gn(u,"link",r),xt(u),o.head.appendChild(u)}}}function gC(r,s,o){Yi.S(r,s,o);var u=Zo;if(u&&r){var g=un(u).hoistableStyles,m=Jo(r);s=s||"default";var x=g.get(m);if(!x){var k={loading:0,preload:null};if(x=u.querySelector(Lc(m)))k.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Ar.get(m))&&nm(r,o);var X=x=u.createElement("link");xt(X),gn(X,"link",r),X._p=new Promise(function(ae,ge){X.onload=ae,X.onerror=ge}),X.addEventListener("load",function(){k.loading|=1}),X.addEventListener("error",function(){k.loading|=2}),k.loading|=4,ih(x,s,u)}x={type:"stylesheet",instance:x,count:1,state:k},g.set(m,x)}}}function pC(r,s){Yi.X(r,s);var o=Zo;if(o&&r){var u=un(o).hoistableScripts,g=el(r),m=u.get(g);m||(m=o.querySelector(zc(g)),m||(r=y({src:r,async:!0},s),(s=Ar.get(g))&&rm(r,s),m=o.createElement("script"),xt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function mC(r,s){Yi.M(r,s);var o=Zo;if(o&&r){var u=un(o).hoistableScripts,g=el(r),m=u.get(g);m||(m=o.querySelector(zc(g)),m||(r=y({src:r,async:!0,type:"module"},s),(s=Ar.get(g))&&rm(r,s),m=o.createElement("script"),xt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function nw(r,s,o,u){var g=(g=ue.current)?rh(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Jo(o.href),o=un(g).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Jo(o.href);var m=un(g).hoistableStyles,x=m.get(r);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,x),(m=g.querySelector(Lc(r)))&&!m._p&&(x.instance=m,x.state.loading=5),Ar.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ar.set(r,o),m||yC(g,r,o,x.state))),s&&u===null)throw Error(i(528,""));return x}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=el(o),o=un(g).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Jo(r){return'href="'+jt(r)+'"'}function Lc(r){return'link[rel="stylesheet"]['+r+"]"}function rw(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function yC(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),gn(s,"link",o),xt(s),r.head.appendChild(s))}function el(r){return'[src="'+jt(r)+'"]'}function zc(r){return"script[async]"+r}function iw(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+jt(o.href)+'"]');if(u)return s.instance=u,xt(u),u;var g=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),xt(u),gn(u,"style",g),ih(u,o.precedence,r),s.instance=u;case"stylesheet":g=Jo(o.href);var m=r.querySelector(Lc(g));if(m)return s.state.loading|=4,s.instance=m,xt(m),m;u=rw(o),(g=Ar.get(g))&&nm(u,g),m=(r.ownerDocument||r).createElement("link"),xt(m);var x=m;return x._p=new Promise(function(k,X){x.onload=k,x.onerror=X}),gn(m,"link",u),s.state.loading|=4,ih(m,o.precedence,r),s.instance=m;case"script":return m=el(o.src),(g=r.querySelector(zc(m)))?(s.instance=g,xt(g),g):(u=o,(g=Ar.get(m))&&(u=y({},o),rm(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),xt(g),gn(g,"link",u),r.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ih(u,o.precedence,r));return s.instance}function ih(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,x=0;x<u.length;x++){var k=u[x];if(k.dataset.precedence===s)m=k;else if(m!==g)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function nm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function rm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var sh=null;function sw(r,s,o){if(sh===null){var u=new Map,g=sh=new Map;g.set(o,u)}else g=sh,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var m=o[g];if(!(m[Ai]||m[Ot]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(s)||"";x=r+x;var k=u.get(x);k?k.push(m):u.set(x,[m])}}return u}function aw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function vC(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ow(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Uc=null;function _C(){}function bC(r,s,o){if(Uc===null)throw Error(i(475));var u=Uc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Jo(o.href),m=r.querySelector(Lc(g));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=ah.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,xt(m);return}m=r.ownerDocument||r,o=rw(o),(g=Ar.get(g))&&nm(o,g),m=m.createElement("link"),xt(m);var x=m;x._p=new Promise(function(k,X){x.onload=k,x.onerror=X}),gn(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=ah.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function wC(){if(Uc===null)throw Error(i(475));var r=Uc;return r.stylesheets&&r.count===0&&im(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&im(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function ah(){if(this.count--,this.count===0){if(this.stylesheets)im(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var oh=null;function im(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,oh=new Map,s.forEach(EC,r),oh=null,ah.call(r))}function EC(r,s){if(!(s.state.loading&4)){var o=oh.get(r);if(o)var u=o.get(null);else{o=new Map,oh.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var x=g[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),u=x)}u&&o.set(null,u)}g=s.instance,x=g.getAttribute("data-precedence"),m=o.get(x)||u,m===u&&o.set(null,g),o.set(x,g),this.count++,u=ah.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),s.state.loading|=4}}var jc={$$typeof:$,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function xC(r,s,o,u,g,m,x,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function lw(r,s,o,u,g,m,x,k,X,ae,ge,me){return r=new xC(r,s,o,x,k,X,ae,me),s=1,m===!0&&(s|=24),m=Wn(3,null,null,s),r.current=m,m.stateNode=r,s=Ug(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},qg(m),r}function cw(r){return r?(r=ko,r):ko}function uw(r,s,o,u,g,m){g=cw(g),u.context===null?u.context=g:u.pendingContext=g,u=fs(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=gs(r,u,s),o!==null&&(nr(o,r,s),mc(o,r,s))}function dw(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function sm(r,s){dw(r,s),(r=r.alternate)&&dw(r,s)}function hw(r){if(r.tag===13){var s=Io(r,67108864);s!==null&&nr(s,r,67108864),sm(r,67108864)}}var lh=!0;function SC(r,s,o,u){var g=D.T;D.T=null;var m=q.p;try{q.p=2,am(r,s,o,u)}finally{q.p=m,D.T=g}}function TC(r,s,o,u){var g=D.T;D.T=null;var m=q.p;try{q.p=8,am(r,s,o,u)}finally{q.p=m,D.T=g}}function am(r,s,o,u){if(lh){var g=om(u);if(g===null)Yp(r,s,u,ch,o),gw(r,u);else if(RC(g,r,s,o,u))u.stopPropagation();else if(gw(r,u),s&4&&-1<AC.indexOf(r)){for(;g!==null;){var m=fr(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=en(m.pendingLanes);if(x!==0){var k=m;for(k.pendingLanes|=2,k.entangledLanes|=2;x;){var X=1<<31-Et(x);k.entanglements[1]|=X,x&=~X}di(m),(ut&6)===0&&(Gd=ze()+500,Mc(0))}}break;case 13:k=Io(m,2),k!==null&&nr(k,m,2),Kd(),sm(m,2)}if(m=om(u),m===null&&Yp(r,s,u,ch,o),m===g)break;g=m}g!==null&&u.stopPropagation()}else Yp(r,s,u,null,o)}}function om(r){return r=yr(r),lm(r)}var ch=null;function lm(r){if(ch=null,r=hr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return ch=r,null}function fw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Rt:return 2;case vn:return 8;case Gt:case Fn:return 32;case An:return 268435456;default:return 32}default:return 32}}var cm=!1,Rs=null,Cs=null,Ns=null,Bc=new Map,Hc=new Map,Is=[],AC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gw(r,s){switch(r){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Bc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hc.delete(s.pointerId)}}function qc(r,s,o,u,g,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},s!==null&&(s=fr(s),s!==null&&hw(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function RC(r,s,o,u,g){switch(s){case"focusin":return Rs=qc(Rs,r,s,o,u,g),!0;case"dragenter":return Cs=qc(Cs,r,s,o,u,g),!0;case"mouseover":return Ns=qc(Ns,r,s,o,u,g),!0;case"pointerover":var m=g.pointerId;return Bc.set(m,qc(Bc.get(m)||null,r,s,o,u,g)),!0;case"gotpointercapture":return m=g.pointerId,Hc.set(m,qc(Hc.get(m)||null,r,s,o,u,g)),!0}return!1}function pw(r){var s=hr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,uo(r.priority,function(){if(o.tag===13){var u=tr();u=Yr(u);var g=Io(o,u);g!==null&&nr(g,o,u),sm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function uh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=om(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Ni=u,o.target.dispatchEvent(u),Ni=null}else return s=fr(o),s!==null&&hw(s),r.blockedOn=o,!1;s.shift()}return!0}function mw(r,s,o){uh(r)&&o.delete(s)}function CC(){cm=!1,Rs!==null&&uh(Rs)&&(Rs=null),Cs!==null&&uh(Cs)&&(Cs=null),Ns!==null&&uh(Ns)&&(Ns=null),Bc.forEach(mw),Hc.forEach(mw)}function dh(r,s){r.blockedOn===s&&(r.blockedOn=null,cm||(cm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,CC)))}var hh=null;function yw(r){hh!==r&&(hh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hh===r&&(hh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],g=r[s+2];if(typeof u!="function"){if(lm(u||o)===null)continue;break}var m=fr(o);m!==null&&(r.splice(s,3),s-=3,lp(m,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function $c(r){function s(X){return dh(X,r)}Rs!==null&&dh(Rs,r),Cs!==null&&dh(Cs,r),Ns!==null&&dh(Ns,r),Bc.forEach(s),Hc.forEach(s);for(var o=0;o<Is.length;o++){var u=Is[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Is.length&&(o=Is[0],o.blockedOn===null);)pw(o),o.blockedOn===null&&Is.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],m=o[u+1],x=g[Ct]||null;if(typeof m=="function")x||yw(o);else if(x){var k=null;if(m&&m.hasAttribute("formAction")){if(g=m,x=m[Ct]||null)k=x.formAction;else if(lm(g)!==null)continue}else k=x.action;typeof k=="function"?o[u+1]=k:(o.splice(u,3),u-=3),yw(o)}}}function um(r){this._internalRoot=r}fh.prototype.render=um.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=tr();uw(o,u,r,s,null,null)},fh.prototype.unmount=um.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;uw(r.current,2,null,r,null,null),Kd(),s[Ln]=null}};function fh(r){this._internalRoot=r}fh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Kr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Is.length&&s!==0&&s<Is[o].priority;o++);Is.splice(o,0,r),o===0&&pw(r)}};var vw=e.version;if(vw!=="19.1.0")throw Error(i(527,vw,"19.1.0"));q.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var NC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{ot=gh.inject(NC),Ye=gh}catch{}}return Gc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",g=O_,m=P_,x=V_,k=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(k=s.unstable_transitionCallbacks)),s=lw(r,1,!1,null,null,o,u,g,m,x,k,null),r[Ln]=s.current,Gp(r),new um(s)},Gc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,g="",m=O_,x=P_,k=V_,X=null,ae=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(X=o.unstable_transitionCallbacks),o.formState!==void 0&&(ae=o.formState)),s=lw(r,1,!0,s,o??null,u,g,m,x,k,X,ae),s.context=cw(null),o=s.current,u=tr(),u=Yr(u),g=fs(u),g.callback=null,gs(o,g,u),o=u,s.current.lanes=o,ur(s,o),di(s),r[Ln]=s.current,Gp(r),new fh(s)},Gc.version="19.1.0",Gc}var Cw;function jC(){if(Cw)return fm.exports;Cw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fm.exports=UC(),fm.exports}var BC=jC();function Vn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Vn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var ym={exports:{}},vm={},_m={exports:{}},bm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function HC(){if(Nw)return bm;Nw=1;var t=zu();function e(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(v,b){var E=b(),T=i({inst:{value:E,getSnapshot:b}}),M=T[0].inst,N=T[1];return l(function(){M.value=E,M.getSnapshot=b,f(M)&&N({inst:M})},[v,E,b]),a(function(){return f(M)&&N({inst:M}),v(function(){f(M)&&N({inst:M})})},[v]),c(E),E}function f(v){var b=v.getSnapshot;v=v.value;try{var E=b();return!n(v,E)}catch{return!0}}function p(v,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return bm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,bm}var Iw;function qC(){return Iw||(Iw=1,_m.exports=HC()),_m.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw;function $C(){if(kw)return vm;kw=1;var t=zu(),e=qC();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return vm.useSyncExternalStoreWithSelector=function(p,y,v,b,E){var T=l(null);if(T.current===null){var M={hasValue:!1,value:null};T.current=M}else M=T.current;T=d(function(){function V(te){if(!B){if(B=!0,$=te,te=b(te),E!==void 0&&M.hasValue){var O=M.value;if(E(O,te))return j=O}return j=te}if(O=j,i($,te))return O;var R=b(te);return E!==void 0&&E(O,R)?($=te,O):($=te,j=R)}var B=!1,$,j,ne=v===void 0?null:v;return[function(){return V(y())},ne===null?void 0:function(){return V(ne())}]},[y,v,b,E]);var N=a(p,T[0],T[1]);return c(function(){M.hasValue=!0,M.value=N},[N]),f(N),N},vm}var Dw;function FC(){return Dw||(Dw=1,ym.exports=$C()),ym.exports}var GC=FC();const YC=Cx(GC),KC={},Mw=t=>{let e;const n=new Set,i=(y,v)=>{const b=typeof y=="function"?y(e):y;if(!Object.is(b,e)){const E=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(T=>T(e,E))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>p,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(KC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(i,a,f);return f},XC=t=>t?Mw(t):Mw,{useDebugValue:QC}=he,{useSyncExternalStoreWithSelector:WC}=YC,ZC=t=>t;function Ix(t,e=ZC,n){const i=WC(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return QC(i),i}const Ow=(t,e)=>{const n=XC(t),i=(a,l=e)=>Ix(n,a,l);return Object.assign(i,n),i},JC=(t,e)=>t?Ow(t,e):Ow;function Sn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,a]of t)if(!Object.is(a,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var eN={value:()=>{}};function Pf(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Lh(n)}function Lh(t){this._=t}function tN(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Lh.prototype=Pf.prototype={constructor:Lh,on:function(t,e){var n=this._,i=tN(t+"",n),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(t=i[l]).type)&&(a=nN(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=i[l]).type)n[a]=Pw(n[a],t.name,e);else if(e==null)for(a in n)n[a]=Pw(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Lh(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,a=l.length;i<a;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,l=i.length;a<l;++a)i[a].value.apply(e,n)}};function nN(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function Pw(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=eN,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Km="http://www.w3.org/1999/xhtml";const Vw={svg:"http://www.w3.org/2000/svg",xhtml:Km,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Vw.hasOwnProperty(e)?{space:Vw[e],local:t}:t}function rN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Km&&e.documentElement.namespaceURI===Km?e.createElement(t):e.createElementNS(n,t)}}function iN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kx(t){var e=Vf(t);return(e.local?iN:rN)(e)}function sN(){}function B0(t){return t==null?sN:function(){return this.querySelector(t)}}function aN(t){typeof t!="function"&&(t=B0(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=new Array(c),f,p,y=0;y<c;++y)(f=l[y])&&(p=t.call(f,f.__data__,y,l))&&("__data__"in f&&(p.__data__=f.__data__),d[y]=p);return new lr(i,this._parents)}function oN(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function lN(){return[]}function Dx(t){return t==null?lN:function(){return this.querySelectorAll(t)}}function cN(t){return function(){return oN(t.apply(this,arguments))}}function uN(t){typeof t=="function"?t=cN(t):t=Dx(t);for(var e=this._groups,n=e.length,i=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&(i.push(t.call(f,f.__data__,p,c)),a.push(f));return new lr(i,a)}function Mx(t){return function(){return this.matches(t)}}function Ox(t){return function(e){return e.matches(t)}}var dN=Array.prototype.find;function hN(t){return function(){return dN.call(this.children,t)}}function fN(){return this.firstElementChild}function gN(t){return this.select(t==null?fN:hN(typeof t=="function"?t:Ox(t)))}var pN=Array.prototype.filter;function mN(){return Array.from(this.children)}function yN(t){return function(){return pN.call(this.children,t)}}function vN(t){return this.selectAll(t==null?mN:yN(typeof t=="function"?t:Ox(t)))}function _N(t){typeof t!="function"&&(t=Mx(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new lr(i,this._parents)}function Px(t){return new Array(t.length)}function bN(){return new lr(this._enter||this._groups.map(Px),this._parents)}function ef(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ef.prototype={constructor:ef,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function wN(t){return function(){return t}}function EN(t,e,n,i,a,l){for(var c=0,d,f=e.length,p=l.length;c<p;++c)(d=e[c])?(d.__data__=l[c],i[c]=d):n[c]=new ef(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function xN(t,e,n,i,a,l,c){var d,f,p=new Map,y=e.length,v=l.length,b=new Array(y),E;for(d=0;d<y;++d)(f=e[d])&&(b[d]=E=c.call(f,f.__data__,d,e)+"",p.has(E)?a[d]=f:p.set(E,f));for(d=0;d<v;++d)E=c.call(t,l[d],d,l)+"",(f=p.get(E))?(i[d]=f,f.__data__=l[d],p.delete(E)):n[d]=new ef(t,l[d]);for(d=0;d<y;++d)(f=e[d])&&p.get(b[d])===f&&(a[d]=f)}function SN(t){return t.__data__}function TN(t,e){if(!arguments.length)return Array.from(this,SN);var n=e?xN:EN,i=this._parents,a=this._groups;typeof t!="function"&&(t=wN(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),p=0;p<l;++p){var y=i[p],v=a[p],b=v.length,E=AN(t.call(y,y&&y.__data__,p,i)),T=E.length,M=d[p]=new Array(T),N=c[p]=new Array(T),V=f[p]=new Array(b);n(y,v,M,N,V,E,e);for(var B=0,$=0,j,ne;B<T;++B)if(j=M[B]){for(B>=$&&($=B+1);!(ne=N[$])&&++$<T;);j._next=ne||null}}return c=new lr(c,i),c._enter=d,c._exit=f,c}function AN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function RN(){return new lr(this._exit||this._groups.map(Px),this._parents)}function CN(t,e,n){var i=this.enter(),a=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function NN(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,a=n.length,l=i.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var p=n[f],y=i[f],v=p.length,b=d[f]=new Array(v),E,T=0;T<v;++T)(E=p[T]||y[T])&&(b[T]=E);for(;f<a;++f)d[f]=n[f];return new lr(d,this._parents)}function IN(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function kN(t){t||(t=DN);function e(v,b){return v&&b?t(v.__data__,b.__data__):!v-!b}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),p,y=0;y<d;++y)(p=c[y])&&(f[y]=p);f.sort(e)}return new lr(a,this._parents).order()}function DN(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function MN(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ON(){return Array.from(this)}function PN(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function VN(){let t=0;for(const e of this)++t;return t}function LN(){return!this.node()}function zN(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function UN(t){return function(){this.removeAttribute(t)}}function jN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function BN(t,e){return function(){this.setAttribute(t,e)}}function HN(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qN(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function $N(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function FN(t,e){var n=Vf(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?jN:UN:typeof e=="function"?n.local?$N:qN:n.local?HN:BN)(n,e))}function Vx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function GN(t){return function(){this.style.removeProperty(t)}}function YN(t,e,n){return function(){this.style.setProperty(t,e,n)}}function KN(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function XN(t,e,n){return arguments.length>1?this.each((e==null?GN:typeof e=="function"?KN:YN)(t,e,n??"")):Rl(this.node(),t)}function Rl(t,e){return t.style.getPropertyValue(e)||Vx(t).getComputedStyle(t,null).getPropertyValue(e)}function QN(t){return function(){delete this[t]}}function WN(t,e){return function(){this[t]=e}}function ZN(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function JN(t,e){return arguments.length>1?this.each((e==null?QN:typeof e=="function"?ZN:WN)(t,e)):this.node()[t]}function Lx(t){return t.trim().split(/^|\s+/)}function H0(t){return t.classList||new zx(t)}function zx(t){this._node=t,this._names=Lx(t.getAttribute("class")||"")}zx.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ux(t,e){for(var n=H0(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function jx(t,e){for(var n=H0(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function eI(t){return function(){Ux(this,t)}}function tI(t){return function(){jx(this,t)}}function nI(t,e){return function(){(e.apply(this,arguments)?Ux:jx)(this,t)}}function rI(t,e){var n=Lx(t+"");if(arguments.length<2){for(var i=H0(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?nI:e?eI:tI)(n,e))}function iI(){this.textContent=""}function sI(t){return function(){this.textContent=t}}function aI(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function oI(t){return arguments.length?this.each(t==null?iI:(typeof t=="function"?aI:sI)(t)):this.node().textContent}function lI(){this.innerHTML=""}function cI(t){return function(){this.innerHTML=t}}function uI(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function dI(t){return arguments.length?this.each(t==null?lI:(typeof t=="function"?uI:cI)(t)):this.node().innerHTML}function hI(){this.nextSibling&&this.parentNode.appendChild(this)}function fI(){return this.each(hI)}function gI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pI(){return this.each(gI)}function mI(t){var e=typeof t=="function"?t:kx(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function yI(){return null}function vI(t,e){var n=typeof t=="function"?t:kx(t),i=e==null?yI:typeof e=="function"?e:B0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function _I(){var t=this.parentNode;t&&t.removeChild(this)}function bI(){return this.each(_I)}function wI(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function EI(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xI(t){return this.select(t?EI:wI)}function SI(t){return arguments.length?this.property("__data__",t):this.node().__data__}function TI(t){return function(e){t.call(this,e,this.__data__)}}function AI(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function RI(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function CI(t,e,n){return function(){var i=this.__on,a,l=TI(e);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(a):this.__on=[a]}}function NI(t,e,n){var i=AI(t+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,p=d.length,y;f<p;++f)for(a=0,y=d[f];a<l;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=e?CI:RI,a=0;a<l;++a)this.each(d(i[a],e,n));return this}function Bx(t,e,n){var i=Vx(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function II(t,e){return function(){return Bx(this,t,e)}}function kI(t,e){return function(){return Bx(this,t,e.apply(this,arguments))}}function DI(t,e){return this.each((typeof e=="function"?kI:II)(t,e))}function*MI(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var Hx=[null];function lr(t,e){this._groups=t,this._parents=e}function Uu(){return new lr([[document.documentElement]],Hx)}function OI(){return this}lr.prototype=Uu.prototype={constructor:lr,select:aN,selectAll:uN,selectChild:gN,selectChildren:vN,filter:_N,data:TN,enter:bN,exit:RN,join:CN,merge:NN,selection:OI,order:IN,sort:kN,call:MN,nodes:ON,node:PN,size:VN,empty:LN,each:zN,attr:FN,style:XN,property:JN,classed:rI,text:oI,html:dI,raise:fI,lower:pI,append:mI,insert:vI,remove:bI,clone:xI,datum:SI,on:NI,dispatch:DI,[Symbol.iterator]:MI};function zr(t){return typeof t=="string"?new lr([[document.querySelector(t)]],[document.documentElement]):new lr([[t]],Hx)}function PI(t){let e;for(;e=t.sourceEvent;)t=e;return t}function fi(t,e){if(t=PI(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const VI={passive:!1},_u={capture:!0,passive:!1};function wm(t){t.stopImmediatePropagation()}function yl(t){t.preventDefault(),t.stopImmediatePropagation()}function qx(t){var e=t.document.documentElement,n=zr(t).on("dragstart.drag",yl,_u);"onselectstart"in e?n.on("selectstart.drag",yl,_u):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function $x(t,e){var n=t.document.documentElement,i=zr(t).on("dragstart.drag",null);e&&(i.on("click.drag",yl,_u),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ph=t=>()=>t;function Xm(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:l,x:c,y:d,dx:f,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Xm.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function LI(t){return!t.ctrlKey&&!t.button}function zI(){return this.parentNode}function UI(t,e){return e??{x:t.x,y:t.y}}function jI(){return navigator.maxTouchPoints||"ontouchstart"in this}function BI(){var t=LI,e=zI,n=UI,i=jI,a={},l=Pf("start","drag","end"),c=0,d,f,p,y,v=0;function b(j){j.on("mousedown.drag",E).filter(i).on("touchstart.drag",N).on("touchmove.drag",V,VI).on("touchend.drag touchcancel.drag",B).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(j,ne){if(!(y||!t.call(this,j,ne))){var te=$(this,e.call(this,j,ne),j,ne,"mouse");te&&(zr(j.view).on("mousemove.drag",T,_u).on("mouseup.drag",M,_u),qx(j.view),wm(j),p=!1,d=j.clientX,f=j.clientY,te("start",j))}}function T(j){if(yl(j),!p){var ne=j.clientX-d,te=j.clientY-f;p=ne*ne+te*te>v}a.mouse("drag",j)}function M(j){zr(j.view).on("mousemove.drag mouseup.drag",null),$x(j.view,p),yl(j),a.mouse("end",j)}function N(j,ne){if(t.call(this,j,ne)){var te=j.changedTouches,O=e.call(this,j,ne),R=te.length,C,z;for(C=0;C<R;++C)(z=$(this,O,j,ne,te[C].identifier,te[C]))&&(wm(j),z("start",j,te[C]))}}function V(j){var ne=j.changedTouches,te=ne.length,O,R;for(O=0;O<te;++O)(R=a[ne[O].identifier])&&(yl(j),R("drag",j,ne[O]))}function B(j){var ne=j.changedTouches,te=ne.length,O,R;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),O=0;O<te;++O)(R=a[ne[O].identifier])&&(wm(j),R("end",j,ne[O]))}function $(j,ne,te,O,R,C){var z=l.copy(),U=fi(C||te,ne),H,I,P;if((P=n.call(j,new Xm("beforestart",{sourceEvent:te,target:b,identifier:R,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:z}),O))!=null)return H=P.x-U[0]||0,I=P.y-U[1]||0,function K(D,q,F){var Y=U,A;switch(D){case"start":a[R]=K,A=c++;break;case"end":delete a[R],--c;case"drag":U=fi(F||q,ne),A=c;break}z.call(D,j,new Xm(D,{sourceEvent:q,subject:P,target:b,identifier:R,active:A,x:U[0]+H,y:U[1]+I,dx:U[0]-Y[0],dy:U[1]-Y[1],dispatch:z}),O)}}return b.filter=function(j){return arguments.length?(t=typeof j=="function"?j:ph(!!j),b):t},b.container=function(j){return arguments.length?(e=typeof j=="function"?j:ph(j),b):e},b.subject=function(j){return arguments.length?(n=typeof j=="function"?j:ph(j),b):n},b.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:ph(!!j),b):i},b.on=function(){var j=l.on.apply(l,arguments);return j===l?b:j},b.clickDistance=function(j){return arguments.length?(v=(j=+j)*j,b):Math.sqrt(v)},b}function q0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Fx(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ju(){}var bu=.7,tf=1/bu,vl="\\s*([+-]?\\d+)\\s*",wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HI=/^#([0-9a-f]{3,8})$/,qI=new RegExp(`^rgb\\(${vl},${vl},${vl}\\)$`),$I=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),FI=new RegExp(`^rgba\\(${vl},${vl},${vl},${wu}\\)$`),GI=new RegExp(`^rgba\\(${pi},${pi},${pi},${wu}\\)$`),YI=new RegExp(`^hsl\\(${wu},${pi},${pi}\\)$`),KI=new RegExp(`^hsla\\(${wu},${pi},${pi},${wu}\\)$`),Lw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q0(ju,Eu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zw,formatHex:zw,formatHex8:XI,formatHsl:QI,formatRgb:Uw,toString:Uw});function zw(){return this.rgb().formatHex()}function XI(){return this.rgb().formatHex8()}function QI(){return Gx(this).formatHsl()}function Uw(){return this.rgb().formatRgb()}function Eu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=HI.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?jw(e):n===3?new qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?mh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?mh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qI.exec(t))?new qn(e[1],e[2],e[3],1):(e=$I.exec(t))?new qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=FI.exec(t))?mh(e[1],e[2],e[3],e[4]):(e=GI.exec(t))?mh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YI.exec(t))?qw(e[1],e[2]/100,e[3]/100,1):(e=KI.exec(t))?qw(e[1],e[2]/100,e[3]/100,e[4]):Lw.hasOwnProperty(t)?jw(Lw[t]):t==="transparent"?new qn(NaN,NaN,NaN,0):null}function jw(t){return new qn(t>>16&255,t>>8&255,t&255,1)}function mh(t,e,n,i){return i<=0&&(t=e=n=NaN),new qn(t,e,n,i)}function WI(t){return t instanceof ju||(t=Eu(t)),t?(t=t.rgb(),new qn(t.r,t.g,t.b,t.opacity)):new qn}function Qm(t,e,n,i){return arguments.length===1?WI(t):new qn(t,e,n,i??1)}function qn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}q0(qn,Qm,Fx(ju,{brighter(t){return t=t==null?tf:Math.pow(tf,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bu:Math.pow(bu,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qn(Ya(this.r),Ya(this.g),Ya(this.b),nf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bw,formatHex:Bw,formatHex8:ZI,formatRgb:Hw,toString:Hw}));function Bw(){return`#${$a(this.r)}${$a(this.g)}${$a(this.b)}`}function ZI(){return`#${$a(this.r)}${$a(this.g)}${$a(this.b)}${$a((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hw(){const t=nf(this.opacity);return`${t===1?"rgb(":"rgba("}${Ya(this.r)}, ${Ya(this.g)}, ${Ya(this.b)}${t===1?")":`, ${t})`}`}function nf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ya(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $a(t){return t=Ya(t),(t<16?"0":"")+t.toString(16)}function qw(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ur(t,e,n,i)}function Gx(t){if(t instanceof Ur)return new Ur(t.h,t.s,t.l,t.opacity);if(t instanceof ju||(t=Eu(t)),!t)return new Ur;if(t instanceof Ur)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),l=Math.max(e,n,i),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-i)/d+(n<i)*6:n===l?c=(i-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new Ur(c,d,f,t.opacity)}function JI(t,e,n,i){return arguments.length===1?Gx(t):new Ur(t,e,n,i??1)}function Ur(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}q0(Ur,JI,Fx(ju,{brighter(t){return t=t==null?tf:Math.pow(tf,t),new Ur(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bu:Math.pow(bu,t),new Ur(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new qn(Em(t>=240?t-240:t+120,a,i),Em(t,a,i),Em(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Ur($w(this.h),yh(this.s),yh(this.l),nf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=nf(this.opacity);return`${t===1?"hsl(":"hsla("}${$w(this.h)}, ${yh(this.s)*100}%, ${yh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $w(t){return t=(t||0)%360,t<0?t+360:t}function yh(t){return Math.max(0,Math.min(1,t||0))}function Em(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Yx=t=>()=>t;function ek(t,e){return function(n){return t+n*e}}function tk(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function nk(t){return(t=+t)==1?Kx:function(e,n){return n-e?tk(e,n,t):Yx(isNaN(e)?n:e)}}function Kx(t,e){var n=e-t;return n?ek(t,n):Yx(isNaN(t)?e:t)}const Fw=function t(e){var n=nk(e);function i(a,l){var c=n((a=Qm(a)).r,(l=Qm(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),p=Kx(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=f(y),a.opacity=p(y),a+""}}return i.gamma=t,i}(1);function Os(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Wm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xm=new RegExp(Wm.source,"g");function rk(t){return function(){return t}}function ik(t){return function(e){return t(e)+""}}function sk(t,e){var n=Wm.lastIndex=xm.lastIndex=0,i,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(i=Wm.exec(t))&&(a=xm.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:Os(i,a)})),n=xm.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?ik(f[0].x):rk(e):(e=f.length,function(p){for(var y=0,v;y<e;++y)d[(v=f[y]).i]=v.x(p);return d.join("")})}var Gw=180/Math.PI,Zm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xx(t,e,n,i,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*Gw,skewX:Math.atan(f)*Gw,scaleX:c,scaleY:d}}var vh;function ak(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zm:Xx(e.a,e.b,e.c,e.d,e.e,e.f)}function ok(t){return t==null||(vh||(vh=document.createElementNS("http://www.w3.org/2000/svg","g")),vh.setAttribute("transform",t),!(t=vh.transform.baseVal.consolidate()))?Zm:(t=t.matrix,Xx(t.a,t.b,t.c,t.d,t.e,t.f))}function Qx(t,e,n,i){function a(p){return p.length?p.pop()+" ":""}function l(p,y,v,b,E,T){if(p!==v||y!==b){var M=E.push("translate(",null,e,null,n);T.push({i:M-4,x:Os(p,v)},{i:M-2,x:Os(y,b)})}else(v||b)&&E.push("translate("+v+e+b+n)}function c(p,y,v,b){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),b.push({i:v.push(a(v)+"rotate(",null,i)-2,x:Os(p,y)})):y&&v.push(a(v)+"rotate("+y+i)}function d(p,y,v,b){p!==y?b.push({i:v.push(a(v)+"skewX(",null,i)-2,x:Os(p,y)}):y&&v.push(a(v)+"skewX("+y+i)}function f(p,y,v,b,E,T){if(p!==v||y!==b){var M=E.push(a(E)+"scale(",null,",",null,")");T.push({i:M-4,x:Os(p,v)},{i:M-2,x:Os(y,b)})}else(v!==1||b!==1)&&E.push(a(E)+"scale("+v+","+b+")")}return function(p,y){var v=[],b=[];return p=t(p),y=t(y),l(p.translateX,p.translateY,y.translateX,y.translateY,v,b),c(p.rotate,y.rotate,v,b),d(p.skewX,y.skewX,v,b),f(p.scaleX,p.scaleY,y.scaleX,y.scaleY,v,b),p=y=null,function(E){for(var T=-1,M=b.length,N;++T<M;)v[(N=b[T]).i]=N.x(E);return v.join("")}}}var lk=Qx(ak,"px, ","px)","deg)"),ck=Qx(ok,", ",")",")"),uk=1e-12;function Yw(t){return((t=Math.exp(t))+1/t)/2}function dk(t){return((t=Math.exp(t))-1/t)/2}function hk(t){return((t=Math.exp(2*t))-1)/(t+1)}const fk=function t(e,n,i){function a(l,c){var d=l[0],f=l[1],p=l[2],y=c[0],v=c[1],b=c[2],E=y-d,T=v-f,M=E*E+T*T,N,V;if(M<uk)V=Math.log(b/p)/e,N=function(O){return[d+O*E,f+O*T,p*Math.exp(e*O*V)]};else{var B=Math.sqrt(M),$=(b*b-p*p+i*M)/(2*p*n*B),j=(b*b-p*p-i*M)/(2*b*n*B),ne=Math.log(Math.sqrt($*$+1)-$),te=Math.log(Math.sqrt(j*j+1)-j);V=(te-ne)/e,N=function(O){var R=O*V,C=Yw(ne),z=p/(n*B)*(C*hk(e*R+ne)-dk(ne));return[d+z*E,f+z*T,p*C/Yw(e*R+ne)]}}return N.duration=V*1e3*e/Math.SQRT2,N}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a}(Math.SQRT2,2,4);var Cl=0,nu=0,Yc=0,Wx=1e3,rf,ru,sf=0,Xa=0,Lf=0,xu=typeof performance=="object"&&performance.now?performance:Date,Zx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $0(){return Xa||(Zx(gk),Xa=xu.now()+Lf)}function gk(){Xa=0}function af(){this._call=this._time=this._next=null}af.prototype=Jx.prototype={constructor:af,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$0():+n)+(e==null?0:+e),!this._next&&ru!==this&&(ru?ru._next=this:rf=this,ru=this),this._call=t,this._time=n,Jm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jm())}};function Jx(t,e,n){var i=new af;return i.restart(t,e,n),i}function pk(){$0(),++Cl;for(var t=rf,e;t;)(e=Xa-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Cl}function Kw(){Xa=(sf=xu.now())+Lf,Cl=nu=0;try{pk()}finally{Cl=0,yk(),Xa=0}}function mk(){var t=xu.now(),e=t-sf;e>Wx&&(Lf-=e,sf=t)}function yk(){for(var t,e=rf,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:rf=n);ru=t,Jm(i)}function Jm(t){if(!Cl){nu&&(nu=clearTimeout(nu));var e=t-Xa;e>24?(t<1/0&&(nu=setTimeout(Kw,t-xu.now()-Lf)),Yc&&(Yc=clearInterval(Yc))):(Yc||(sf=xu.now(),Yc=setInterval(mk,Wx)),Cl=1,Zx(Kw))}}function Xw(t,e,n){var i=new af;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,n),i}var vk=Pf("start","end","cancel","interrupt"),_k=[],eS=0,Qw=1,e0=2,zh=3,Ww=4,t0=5,Uh=6;function zf(t,e,n,i,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;bk(t,n,{name:e,index:i,group:a,on:vk,tween:_k,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:eS})}function F0(t,e){var n=Fr(t,e);if(n.state>eS)throw new Error("too late; already scheduled");return n}function Ei(t,e){var n=Fr(t,e);if(n.state>zh)throw new Error("too late; already running");return n}function Fr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function bk(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=Jx(l,0,n.time);function l(p){n.state=Qw,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var y,v,b,E;if(n.state!==Qw)return f();for(y in i)if(E=i[y],E.name===n.name){if(E.state===zh)return Xw(c);E.state===Ww?(E.state=Uh,E.timer.stop(),E.on.call("interrupt",t,t.__data__,E.index,E.group),delete i[y]):+y<e&&(E.state=Uh,E.timer.stop(),E.on.call("cancel",t,t.__data__,E.index,E.group),delete i[y])}if(Xw(function(){n.state===zh&&(n.state=Ww,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=e0,n.on.call("start",t,t.__data__,n.index,n.group),n.state===e0){for(n.state=zh,a=new Array(b=n.tween.length),y=0,v=-1;y<b;++y)(E=n.tween[y].value.call(t,t.__data__,n.index,n.group))&&(a[++v]=E);a.length=v+1}}function d(p){for(var y=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(f),n.state=t0,1),v=-1,b=a.length;++v<b;)a[v].call(t,y);n.state===t0&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Uh,n.timer.stop(),delete i[e];for(var p in i)return;delete t.__transition}}function jh(t,e){var n=t.__transition,i,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((i=n[c]).name!==e){l=!1;continue}a=i.state>e0&&i.state<t0,i.state=Uh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[c]}l&&delete t.__transition}}function wk(t){return this.each(function(){jh(this,t)})}function Ek(t,e){var n,i;return function(){var a=Ei(this,t),l=a.tween;if(l!==n){i=n=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===e){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function xk(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=Ei(this,t),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:e,value:n},f=0,p=a.length;f<p;++f)if(a[f].name===e){a[f]=d;break}f===p&&a.push(d)}l.tween=a}}function Sk(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Fr(this.node(),n).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===t)return c.value;return null}return this.each((e==null?Ek:xk)(n,t,e))}function G0(t,e,n){var i=t._id;return t.each(function(){var a=Ei(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return Fr(a,i).value[e]}}function tS(t,e){var n;return(typeof e=="number"?Os:e instanceof Eu?Fw:(n=Eu(e))?(e=n,Fw):sk)(t,e)}function Tk(t){return function(){this.removeAttribute(t)}}function Ak(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rk(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===i?l:l=e(i=c,n)}}function Ck(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===i?l:l=e(i=c,n)}}function Nk(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function Ik(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function kk(t,e){var n=Vf(t),i=n==="transform"?ck:tS;return this.attrTween(t,typeof e=="function"?(n.local?Ik:Nk)(n,i,G0(this,"attr."+t,e)):e==null?(n.local?Ak:Tk)(n):(n.local?Ck:Rk)(n,i,e))}function Dk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Mk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ok(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&Mk(t,l)),n}return a._value=e,a}function Pk(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&Dk(t,l)),n}return a._value=e,a}function Vk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Vf(t);return this.tween(n,(i.local?Ok:Pk)(i,e))}function Lk(t,e){return function(){F0(this,t).delay=+e.apply(this,arguments)}}function zk(t,e){return e=+e,function(){F0(this,t).delay=e}}function Uk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Lk:zk)(e,t)):Fr(this.node(),e).delay}function jk(t,e){return function(){Ei(this,t).duration=+e.apply(this,arguments)}}function Bk(t,e){return e=+e,function(){Ei(this,t).duration=e}}function Hk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?jk:Bk)(e,t)):Fr(this.node(),e).duration}function qk(t,e){if(typeof e!="function")throw new Error;return function(){Ei(this,t).ease=e}}function $k(t){var e=this._id;return arguments.length?this.each(qk(e,t)):Fr(this.node(),e).ease}function Fk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ei(this,t).ease=n}}function Gk(t){if(typeof t!="function")throw new Error;return this.each(Fk(this._id,t))}function Yk(t){typeof t!="function"&&(t=Mx(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new es(i,this._parents,this._name,this._id)}function Kk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var f=e[d],p=n[d],y=f.length,v=c[d]=new Array(y),b,E=0;E<y;++E)(b=f[E]||p[E])&&(v[E]=b);for(;d<i;++d)c[d]=e[d];return new es(c,this._parents,this._name,this._id)}function Xk(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Qk(t,e,n){var i,a,l=Xk(e)?F0:Ei;return function(){var c=l(this,t),d=c.on;d!==i&&(a=(i=d).copy()).on(e,n),c.on=a}}function Wk(t,e){var n=this._id;return arguments.length<2?Fr(this.node(),n).on.on(t):this.each(Qk(n,t,e))}function Zk(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Jk(){return this.on("end.remove",Zk(this._id))}function e4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=B0(t));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],f=d.length,p=l[c]=new Array(f),y,v,b=0;b<f;++b)(y=d[b])&&(v=t.call(y,y.__data__,b,d))&&("__data__"in y&&(v.__data__=y.__data__),p[b]=v,zf(p[b],e,n,b,p,Fr(y,n)));return new es(l,this._parents,e,n)}function t4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Dx(t));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var f=i[d],p=f.length,y,v=0;v<p;++v)if(y=f[v]){for(var b=t.call(y,y.__data__,v,f),E,T=Fr(y,n),M=0,N=b.length;M<N;++M)(E=b[M])&&zf(E,e,n,M,b,T);l.push(b),c.push(y)}return new es(l,c,e,n)}var n4=Uu.prototype.constructor;function r4(){return new n4(this._groups,this._parents)}function i4(t,e){var n,i,a;return function(){var l=Rl(this,t),c=(this.style.removeProperty(t),Rl(this,t));return l===c?null:l===n&&c===i?a:a=e(n=l,i=c)}}function nS(t){return function(){this.style.removeProperty(t)}}function s4(t,e,n){var i,a=n+"",l;return function(){var c=Rl(this,t);return c===a?null:c===i?l:l=e(i=c,n)}}function a4(t,e,n){var i,a,l;return function(){var c=Rl(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),Rl(this,t))),c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d))}}function o4(t,e){var n,i,a,l="style."+e,c="end."+l,d;return function(){var f=Ei(this,t),p=f.on,y=f.value[l]==null?d||(d=nS(e)):void 0;(p!==n||a!==y)&&(i=(n=p).copy()).on(c,a=y),f.on=i}}function l4(t,e,n){var i=(t+="")=="transform"?lk:tS;return e==null?this.styleTween(t,i4(t,i)).on("end.style."+t,nS(t)):typeof e=="function"?this.styleTween(t,a4(t,i,G0(this,"style."+t,e))).each(o4(this._id,t)):this.styleTween(t,s4(t,i,e),n).on("end.style."+t,null)}function c4(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function u4(t,e,n){var i,a;function l(){var c=e.apply(this,arguments);return c!==a&&(i=(a=c)&&c4(t,c,n)),i}return l._value=e,l}function d4(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,u4(t,e,n??""))}function h4(t){return function(){this.textContent=t}}function f4(t){return function(){var e=t(this);this.textContent=e??""}}function g4(t){return this.tween("text",typeof t=="function"?f4(G0(this,"text",t)):h4(t==null?"":t+""))}function p4(t){return function(e){this.textContent=t.call(this,e)}}function m4(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&p4(a)),e}return i._value=t,i}function y4(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,m4(t))}function v4(){for(var t=this._name,e=this._id,n=rS(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)if(f=c[p]){var y=Fr(f,e);zf(f,t,n,p,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new es(i,this._parents,t,n)}function _4(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var p=Ei(this,i),y=p.on;y!==t&&(e=(t=y).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),p.on=e}),a===0&&l()})}var b4=0;function es(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function rS(){return++b4}var Ki=Uu.prototype;es.prototype={constructor:es,select:e4,selectAll:t4,selectChild:Ki.selectChild,selectChildren:Ki.selectChildren,filter:Yk,merge:Kk,selection:r4,transition:v4,call:Ki.call,nodes:Ki.nodes,node:Ki.node,size:Ki.size,empty:Ki.empty,each:Ki.each,on:Wk,attr:kk,attrTween:Vk,style:l4,styleTween:d4,text:g4,textTween:y4,remove:Jk,tween:Sk,delay:Uk,duration:Hk,ease:$k,easeVarying:Gk,end:_4,[Symbol.iterator]:Ki[Symbol.iterator]};function w4(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var E4={time:null,delay:0,duration:250,ease:w4};function x4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function S4(t){var e,n;t instanceof es?(e=t._id,t=t._name):(e=rS(),(n=E4).time=$0(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&zf(f,t,e,p,c,n||x4(f,e));return new es(i,this._parents,t,e)}Uu.prototype.interrupt=wk;Uu.prototype.transition=S4;const _h=t=>()=>t;function T4(t,{sourceEvent:e,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Qi(t,e,n){this.k=t,this.x=e,this.y=n}Qi.prototype={constructor:Qi,scale:function(t){return t===1?this:new Qi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Qi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $s=new Qi(1,0,0);Qi.prototype;function Sm(t){t.stopImmediatePropagation()}function Kc(t){t.preventDefault(),t.stopImmediatePropagation()}function A4(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function R4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Zw(){return this.__zoom||$s}function C4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function N4(){return navigator.maxTouchPoints||"ontouchstart"in this}function I4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function k4(){var t=A4,e=R4,n=I4,i=C4,a=N4,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=fk,p=Pf("start","zoom","end"),y,v,b,E=500,T=150,M=0,N=10;function V(P){P.property("__zoom",Zw).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",z).filter(a).on("touchstart.zoom",U).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}V.transform=function(P,K,D,q){var F=P.selection?P.selection():P;F.property("__zoom",Zw),P!==F?ne(P,K,D,q):F.interrupt().each(function(){te(this,arguments).event(q).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},V.scaleBy=function(P,K,D,q){V.scaleTo(P,function(){var F=this.__zoom.k,Y=typeof K=="function"?K.apply(this,arguments):K;return F*Y},D,q)},V.scaleTo=function(P,K,D,q){V.transform(P,function(){var F=e.apply(this,arguments),Y=this.__zoom,A=D==null?j(F):typeof D=="function"?D.apply(this,arguments):D,W=Y.invert(A),Z=typeof K=="function"?K.apply(this,arguments):K;return n($(B(Y,Z),A,W),F,c)},D,q)},V.translateBy=function(P,K,D,q){V.transform(P,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof D=="function"?D.apply(this,arguments):D),e.apply(this,arguments),c)},null,q)},V.translateTo=function(P,K,D,q,F){V.transform(P,function(){var Y=e.apply(this,arguments),A=this.__zoom,W=q==null?j(Y):typeof q=="function"?q.apply(this,arguments):q;return n($s.translate(W[0],W[1]).scale(A.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof D=="function"?-D.apply(this,arguments):-D),Y,c)},q,F)};function B(P,K){return K=Math.max(l[0],Math.min(l[1],K)),K===P.k?P:new Qi(K,P.x,P.y)}function $(P,K,D){var q=K[0]-D[0]*P.k,F=K[1]-D[1]*P.k;return q===P.x&&F===P.y?P:new Qi(P.k,q,F)}function j(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function ne(P,K,D,q){P.on("start.zoom",function(){te(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){te(this,arguments).event(q).end()}).tween("zoom",function(){var F=this,Y=arguments,A=te(F,Y).event(q),W=e.apply(F,Y),Z=D==null?j(W):typeof D=="function"?D.apply(F,Y):D,Q=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),ee=F.__zoom,le=typeof K=="function"?K.apply(F,Y):K,ue=f(ee.invert(Z).concat(Q/ee.k),le.invert(Z).concat(Q/le.k));return function(fe){if(fe===1)fe=le;else{var _e=ue(fe),Ae=Q/_e[2];fe=new Qi(Ae,Z[0]-_e[0]*Ae,Z[1]-_e[1]*Ae)}A.zoom(null,fe)}})}function te(P,K,D){return!D&&P.__zooming||new O(P,K)}function O(P,K){this.that=P,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,K),this.taps=0}O.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,K){return this.mouse&&P!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var K=zr(this.that).datum();p.call(P,this.that,new T4(P,{sourceEvent:this.sourceEvent,target:V,transform:this.that.__zoom,dispatch:p}),K)}};function R(P,...K){if(!t.apply(this,arguments))return;var D=te(this,K).event(P),q=this.__zoom,F=Math.max(l[0],Math.min(l[1],q.k*Math.pow(2,i.apply(this,arguments)))),Y=fi(P);if(D.wheel)(D.mouse[0][0]!==Y[0]||D.mouse[0][1]!==Y[1])&&(D.mouse[1]=q.invert(D.mouse[0]=Y)),clearTimeout(D.wheel);else{if(q.k===F)return;D.mouse=[Y,q.invert(Y)],jh(this),D.start()}Kc(P),D.wheel=setTimeout(A,T),D.zoom("mouse",n($(B(q,F),D.mouse[0],D.mouse[1]),D.extent,c));function A(){D.wheel=null,D.end()}}function C(P,...K){if(b||!t.apply(this,arguments))return;var D=P.currentTarget,q=te(this,K,!0).event(P),F=zr(P.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",Q,!0),Y=fi(P,D),A=P.clientX,W=P.clientY;qx(P.view),Sm(P),q.mouse=[Y,this.__zoom.invert(Y)],jh(this),q.start();function Z(ee){if(Kc(ee),!q.moved){var le=ee.clientX-A,ue=ee.clientY-W;q.moved=le*le+ue*ue>M}q.event(ee).zoom("mouse",n($(q.that.__zoom,q.mouse[0]=fi(ee,D),q.mouse[1]),q.extent,c))}function Q(ee){F.on("mousemove.zoom mouseup.zoom",null),$x(ee.view,q.moved),Kc(ee),q.event(ee).end()}}function z(P,...K){if(t.apply(this,arguments)){var D=this.__zoom,q=fi(P.changedTouches?P.changedTouches[0]:P,this),F=D.invert(q),Y=D.k*(P.shiftKey?.5:2),A=n($(B(D,Y),q,F),e.apply(this,K),c);Kc(P),d>0?zr(this).transition().duration(d).call(ne,A,q,P):zr(this).call(V.transform,A,q,P)}}function U(P,...K){if(t.apply(this,arguments)){var D=P.touches,q=D.length,F=te(this,K,P.changedTouches.length===q).event(P),Y,A,W,Z;for(Sm(P),A=0;A<q;++A)W=D[A],Z=fi(W,this),Z=[Z,this.__zoom.invert(Z),W.identifier],F.touch0?!F.touch1&&F.touch0[2]!==Z[2]&&(F.touch1=Z,F.taps=0):(F.touch0=Z,Y=!0,F.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(F.taps<2&&(v=Z[0],y=setTimeout(function(){y=null},E)),jh(this),F.start())}}function H(P,...K){if(this.__zooming){var D=te(this,K).event(P),q=P.changedTouches,F=q.length,Y,A,W,Z;for(Kc(P),Y=0;Y<F;++Y)A=q[Y],W=fi(A,this),D.touch0&&D.touch0[2]===A.identifier?D.touch0[0]=W:D.touch1&&D.touch1[2]===A.identifier&&(D.touch1[0]=W);if(A=D.that.__zoom,D.touch1){var Q=D.touch0[0],ee=D.touch0[1],le=D.touch1[0],ue=D.touch1[1],fe=(fe=le[0]-Q[0])*fe+(fe=le[1]-Q[1])*fe,_e=(_e=ue[0]-ee[0])*_e+(_e=ue[1]-ee[1])*_e;A=B(A,Math.sqrt(fe/_e)),W=[(Q[0]+le[0])/2,(Q[1]+le[1])/2],Z=[(ee[0]+ue[0])/2,(ee[1]+ue[1])/2]}else if(D.touch0)W=D.touch0[0],Z=D.touch0[1];else return;D.zoom("touch",n($(A,W,Z),D.extent,c))}}function I(P,...K){if(this.__zooming){var D=te(this,K).event(P),q=P.changedTouches,F=q.length,Y,A;for(Sm(P),b&&clearTimeout(b),b=setTimeout(function(){b=null},E),Y=0;Y<F;++Y)A=q[Y],D.touch0&&D.touch0[2]===A.identifier?delete D.touch0:D.touch1&&D.touch1[2]===A.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(A=fi(A,this),Math.hypot(v[0]-A[0],v[1]-A[1])<N)){var W=zr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return V.wheelDelta=function(P){return arguments.length?(i=typeof P=="function"?P:_h(+P),V):i},V.filter=function(P){return arguments.length?(t=typeof P=="function"?P:_h(!!P),V):t},V.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:_h(!!P),V):a},V.extent=function(P){return arguments.length?(e=typeof P=="function"?P:_h([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),V):e},V.scaleExtent=function(P){return arguments.length?(l[0]=+P[0],l[1]=+P[1],V):[l[0],l[1]]},V.translateExtent=function(P){return arguments.length?(c[0][0]=+P[0][0],c[1][0]=+P[1][0],c[0][1]=+P[0][1],c[1][1]=+P[1][1],V):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},V.constrain=function(P){return arguments.length?(n=P,V):n},V.duration=function(P){return arguments.length?(d=+P,V):d},V.interpolate=function(P){return arguments.length?(f=P,V):f},V.on=function(){var P=p.on.apply(p,arguments);return P===p?V:P},V.clickDistance=function(P){return arguments.length?(M=(P=+P)*P,V):Math.sqrt(M)},V.tapDistance=function(P){return arguments.length?(N=+P,V):N},V}var iS=Nx();const Uf=G.createContext(null),D4=Uf.Provider,ts={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},sS=ts.error001();function Tt(t,e){const n=G.useContext(Uf);if(n===null)throw new Error(sS);return Ix(n,t,e)}const ln=()=>{const t=G.useContext(Uf);if(t===null)throw new Error(sS);return G.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},M4=t=>t.userSelectionActive?"none":"all";function aS({position:t,children:e,className:n,style:i,...a}){const l=Tt(M4),c=`${t}`.split("-");return he.createElement("div",{className:Vn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:l},...a},e)}function O4({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:he.createElement(aS,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},he.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const P4=({x:t,y:e,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:p,...y})=>{const v=G.useRef(null),[b,E]=G.useState({x:0,y:0,width:0,height:0}),T=Vn(["react-flow__edge-textwrapper",p]);return G.useEffect(()=>{if(v.current){const M=v.current.getBBox();E({x:M.x,y:M.y,width:M.width,height:M.height})}},[n]),typeof n>"u"||!n?null:he.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:T,visibility:b.width?"visible":"hidden",...y},a&&he.createElement("rect",{width:b.width+2*c[0],x:-c[0],y:-c[1],height:b.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),he.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:v,style:i},n),f)};var V4=G.memo(P4);const Y0=t=>({width:t.offsetWidth,height:t.offsetHeight}),Nl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),K0=(t={x:0,y:0},e)=>({x:Nl(t.x,e[0][0],e[1][0]),y:Nl(t.y,e[0][1],e[1][1])}),Jw=(t,e,n)=>t<e?Nl(Math.abs(t-e),1,50)/50:t>n?-Nl(Math.abs(t-n),1,50)/50:0,oS=(t,e)=>{const n=Jw(t.x,35,e.width-35)*20,i=Jw(t.y,35,e.height-35)*20;return[n,i]},lS=t=>t.getRootNode?.()||window?.document,L4=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),X0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),z4=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),eE=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),n0=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},U4=t=>Rr(t.width)&&Rr(t.height)&&Rr(t.x)&&Rr(t.y),Rr=t=>!isNaN(t)&&isFinite(t),Dt=Symbol.for("internals"),cS=["Enter"," ","Escape"],j4=(t,e)=>{},B4=t=>"nativeEvent"in t;function r0(t){const n=(B4(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const uS=t=>"clientX"in t,Fs=(t,e)=>{const n=uS(t),i=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:a-(e?.top??0)}},of=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Bu=({id:t,path:e,labelX:n,labelY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:b,interactionWidth:E=20})=>he.createElement(he.Fragment,null,he.createElement("path",{id:t,style:y,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:b}),E&&he.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:E,className:"react-flow__edge-interaction"}),a&&Rr(n)&&Rr(i)?he.createElement(V4,{x:n,y:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p}):null);Bu.displayName="BaseEdge";function Xc(t,e,n){return n===void 0?n:i=>{const a=e().edges.find(l=>l.id===t);a&&n(i,{...a})}}function dS({sourceX:t,sourceY:e,targetX:n,targetY:i}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(i-e)/2,d=i<e?i+c:i-c;return[l,d,a,c]}function hS({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,p=e*.125+l*.375+d*.375+i*.125,y=Math.abs(f-t),v=Math.abs(p-e);return[f,p,y,v]}var Ws;(function(t){t.Strict="strict",t.Loose="loose"})(Ws||(Ws={}));var Fa;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Fa||(Fa={}));var Su;(function(t){t.Partial="partial",t.Full="full"})(Su||(Su={}));var Vs;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Vs||(Vs={}));var Qa;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Qa||(Qa={}));var Se;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Se||(Se={}));function tE({pos:t,x1:e,y1:n,x2:i,y2:a}){return t===Se.Left||t===Se.Right?[.5*(e+i),n]:[e,.5*(n+a)]}function fS({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top}){const[c,d]=tE({pos:n,x1:t,y1:e,x2:i,y2:a}),[f,p]=tE({pos:l,x1:i,y1:a,x2:t,y2:e}),[y,v,b,E]=hS({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${e} C${c},${d} ${f},${p} ${i},${a}`,y,v,b,E]}const Q0=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:E,markerStart:T,interactionWidth:M})=>{const[N,V,B]=fS({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l});return he.createElement(Bu,{path:N,labelX:V,labelY:B,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:E,markerStart:T,interactionWidth:M})});Q0.displayName="SimpleBezierEdge";const nE={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},H4=({source:t,sourcePosition:e=Se.Bottom,target:n})=>e===Se.Left||e===Se.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},rE=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function q4({source:t,sourcePosition:e=Se.Bottom,target:n,targetPosition:i=Se.Top,center:a,offset:l}){const c=nE[e],d=nE[i],f={x:t.x+c.x*l,y:t.y+c.y*l},p={x:n.x+d.x*l,y:n.y+d.y*l},y=H4({source:f,sourcePosition:e,target:p}),v=y.x!==0?"x":"y",b=y[v];let E=[],T,M;const N={x:0,y:0},V={x:0,y:0},[B,$,j,ne]=dS({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){T=a.x??B,M=a.y??$;const O=[{x:T,y:f.y},{x:T,y:p.y}],R=[{x:f.x,y:M},{x:p.x,y:M}];c[v]===b?E=v==="x"?O:R:E=v==="x"?R:O}else{const O=[{x:f.x,y:p.y}],R=[{x:p.x,y:f.y}];if(v==="x"?E=c.x===b?R:O:E=c.y===b?O:R,e===i){const I=Math.abs(t[v]-n[v]);if(I<=l){const P=Math.min(l-1,l-I);c[v]===b?N[v]=(f[v]>t[v]?-1:1)*P:V[v]=(p[v]>n[v]?-1:1)*P}}if(e!==i){const I=v==="x"?"y":"x",P=c[v]===d[I],K=f[I]>p[I],D=f[I]<p[I];(c[v]===1&&(!P&&K||P&&D)||c[v]!==1&&(!P&&D||P&&K))&&(E=v==="x"?O:R)}const C={x:f.x+N.x,y:f.y+N.y},z={x:p.x+V.x,y:p.y+V.y},U=Math.max(Math.abs(C.x-E[0].x),Math.abs(z.x-E[0].x)),H=Math.max(Math.abs(C.y-E[0].y),Math.abs(z.y-E[0].y));U>=H?(T=(C.x+z.x)/2,M=E[0].y):(T=E[0].x,M=(C.y+z.y)/2)}return[[t,{x:f.x+N.x,y:f.y+N.y},...E,{x:p.x+V.x,y:p.y+V.y},n],T,M,j,ne]}function $4(t,e,n,i){const a=Math.min(rE(t,e)/2,rE(e,n)/2,i),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const p=t.x<n.x?-1:1,y=t.y<n.y?1:-1;return`L ${l+a*p},${c}Q ${l},${c} ${l},${c+a*y}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function i0({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,borderRadius:c=5,centerX:d,centerY:f,offset:p=20}){const[y,v,b,E,T]=q4({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:a},targetPosition:l,center:{x:d,y:f},offset:p});return[y.reduce((N,V,B)=>{let $="";return B>0&&B<y.length-1?$=$4(y[B-1],V,y[B+1],c):$=`${B===0?"M":"L"}${V.x} ${V.y}`,N+=$,N},""),v,b,E,T]}const jf=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,sourcePosition:v=Se.Bottom,targetPosition:b=Se.Top,markerEnd:E,markerStart:T,pathOptions:M,interactionWidth:N})=>{const[V,B,$]=i0({sourceX:t,sourceY:e,sourcePosition:v,targetX:n,targetY:i,targetPosition:b,borderRadius:M?.borderRadius,offset:M?.offset});return he.createElement(Bu,{path:V,labelX:B,labelY:$,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:E,markerStart:T,interactionWidth:N})});jf.displayName="SmoothStepEdge";const W0=G.memo(t=>he.createElement(jf,{...t,pathOptions:G.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));W0.displayName="StepEdge";function F4({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[a,l,c,d]=dS({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,a,l,c,d]}const Z0=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:b,interactionWidth:E})=>{const[T,M,N]=F4({sourceX:t,sourceY:e,targetX:n,targetY:i});return he.createElement(Bu,{path:T,labelX:M,labelY:N,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:b,interactionWidth:E})});Z0.displayName="StraightEdge";function bh(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function iE({pos:t,x1:e,y1:n,x2:i,y2:a,c:l}){switch(t){case Se.Left:return[e-bh(e-i,l),n];case Se.Right:return[e+bh(i-e,l),n];case Se.Top:return[e,n-bh(n-a,l)];case Se.Bottom:return[e,n+bh(a-n,l)]}}function gS({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,curvature:c=.25}){const[d,f]=iE({pos:n,x1:t,y1:e,x2:i,y2:a,c}),[p,y]=iE({pos:l,x1:i,y1:a,x2:t,y2:e,c}),[v,b,E,T]=hS({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:p,targetControlY:y});return[`M${t},${e} C${d},${f} ${p},${y} ${i},${a}`,v,b,E,T]}const lf=G.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:E,markerStart:T,pathOptions:M,interactionWidth:N})=>{const[V,B,$]=gS({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l,curvature:M?.curvature});return he.createElement(Bu,{path:V,labelX:B,labelY:$,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:E,markerStart:T,interactionWidth:N})});lf.displayName="BezierEdge";const J0=G.createContext(null),G4=J0.Provider;J0.Consumer;const Y4=()=>G.useContext(J0),K4=t=>"id"in t&&"source"in t&&"target"in t,X4=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${n}${i||""}`,s0=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,Q4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),W4=(t,e)=>{if(!t.source||!t.target)return e;let n;return K4(t)?n={...t}:n={...t,id:X4(t)},Q4(n,e)?e:e.concat(n)},a0=({x:t,y:e},[n,i,a],l,[c,d])=>{const f={x:(t-n)/a,y:(e-i)/a};return l?{x:c*Math.round(f.x/c),y:d*Math.round(f.y/d)}:f},pS=({x:t,y:e},[n,i,a])=>({x:t*a+n,y:e*a+i}),_l=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],i=(t.height??0)*e[1],a={x:t.position.x-n,y:t.position.y-i};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:a}},ey=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,a)=>{const{x:l,y:c}=_l(a,e).positionAbsolute;return L4(i,X0({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return z4(n)},mS=(t,e,[n,i,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const f={x:(e.x-n)/a,y:(e.y-i)/a,width:e.width/a,height:e.height/a},p=[];return t.forEach(y=>{const{width:v,height:b,selectable:E=!0,hidden:T=!1}=y;if(c&&!E||T)return!1;const{positionAbsolute:M}=_l(y,d),N={x:M.x,y:M.y,width:v||0,height:b||0},V=n0(f,N),B=typeof v>"u"||typeof b>"u"||v===null||b===null,$=l&&V>0,j=(v||0)*(b||0);(B||$||V>=j||y.dragging)&&p.push(y)}),p},yS=(t,e)=>{const n=t.map(i=>i.id);return e.filter(i=>n.includes(i.source)||n.includes(i.target))},vS=(t,e,n,i,a,l=.1)=>{const c=e/(t.width*(1+l)),d=n/(t.height*(1+l)),f=Math.min(c,d),p=Nl(f,i,a),y=t.x+t.width/2,v=t.y+t.height/2,b=e/2-y*p,E=n/2-v*p;return{x:b,y:E,zoom:p}},Ba=(t,e=0)=>t.transition().duration(e);function sE(t,e,n,i){return(e[n]||[]).reduce((a,l)=>(`${t.id}-${l.id}-${n}`!==i&&a.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function Z4(t,e,n,i,a,l){const{x:c,y:d}=Fs(t),p=e.elementsFromPoint(c,d).find(T=>T.classList.contains("react-flow__handle"));if(p){const T=p.getAttribute("data-nodeid");if(T){const M=ty(void 0,p),N=p.getAttribute("data-handleid"),V=l({nodeId:T,id:N,type:M});if(V){const B=a.find($=>$.nodeId===T&&$.type===M&&$.id===N);return{handle:{id:N,type:M,nodeId:T,x:B?.x||n.x,y:B?.y||n.y},validHandleResult:V}}}}let y=[],v=1/0;if(a.forEach(T=>{const M=Math.sqrt((T.x-n.x)**2+(T.y-n.y)**2);if(M<=i){const N=l(T);M<=v&&(M<v?y=[{handle:T,validHandleResult:N}]:M===v&&y.push({handle:T,validHandleResult:N}),v=M)}}),!y.length)return{handle:null,validHandleResult:_S()};if(y.length===1)return y[0];const b=y.some(({validHandleResult:T})=>T.isValid),E=y.some(({handle:T})=>T.type==="target");return y.find(({handle:T,validHandleResult:M})=>E?T.type==="target":b?M.isValid:!0)||y[0]}const J4={source:null,target:null,sourceHandle:null,targetHandle:null},_S=()=>({handleDomNode:null,isValid:!1,connection:J4,endHandle:null});function bS(t,e,n,i,a,l,c){const d=a==="target",f=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),p={..._S(),handleDomNode:f};if(f){const y=ty(void 0,f),v=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),E=f.classList.contains("connectable"),T=f.classList.contains("connectableend"),M={source:d?v:n,sourceHandle:d?b:i,target:d?n:v,targetHandle:d?i:b};p.connection=M,E&&T&&(e===Ws.Strict?d&&y==="source"||!d&&y==="target":v!==n||b!==i)&&(p.endHandle={nodeId:v,handleId:b,type:y},p.isValid=l(M))}return p}function eD({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((a,l)=>{if(l[Dt]){const{handleBounds:c}=l[Dt];let d=[],f=[];c&&(d=sE(l,c,"source",`${e}-${n}-${i}`),f=sE(l,c,"target",`${e}-${n}-${i}`)),a.push(...d,...f)}return a},[])}function ty(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Tm(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function tD(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function wS({event:t,handleId:e,nodeId:n,onConnect:i,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:f,onReconnectEnd:p}){const y=lS(t.target),{connectionMode:v,domNode:b,autoPanOnConnect:E,connectionRadius:T,onConnectStart:M,panBy:N,getNodes:V,cancelConnection:B}=l();let $=0,j;const{x:ne,y:te}=Fs(t),O=y?.elementFromPoint(ne,te),R=ty(f,O),C=b?.getBoundingClientRect();if(!C||!R)return;let z,U=Fs(t,C),H=!1,I=null,P=!1,K=null;const D=eD({nodes:V(),nodeId:n,handleId:e,handleType:R}),q=()=>{if(!E)return;const[A,W]=oS(U,C);N({x:A,y:W}),$=requestAnimationFrame(q)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:R,connectionStartHandle:{nodeId:n,handleId:e,type:R},connectionEndHandle:null}),M?.(t,{nodeId:n,handleId:e,handleType:R});function F(A){const{transform:W}=l();U=Fs(A,C);const{handle:Z,validHandleResult:Q}=Z4(A,y,a0(U,W,!1,[1,1]),T,D,ee=>bS(ee,v,n,e,a?"target":"source",d,y));if(j=Z,H||(q(),H=!0),K=Q.handleDomNode,I=Q.connection,P=Q.isValid,c({connectionPosition:j&&P?pS({x:j.x,y:j.y},W):U,connectionStatus:tD(!!j,P),connectionEndHandle:Q.endHandle}),!j&&!P&&!K)return Tm(z);I.source!==I.target&&K&&(Tm(z),z=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",P),K.classList.toggle("react-flow__handle-valid",P))}function Y(A){(j||K)&&I&&P&&i?.(I),l().onConnectEnd?.(A),f&&p?.(A),Tm(z),B(),cancelAnimationFrame($),H=!1,P=!1,I=null,K=null,y.removeEventListener("mousemove",F),y.removeEventListener("mouseup",Y),y.removeEventListener("touchmove",F),y.removeEventListener("touchend",Y)}y.addEventListener("mousemove",F),y.addEventListener("mouseup",Y),y.addEventListener("touchmove",F),y.addEventListener("touchend",Y)}const aE=()=>!0,nD=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),rD=(t,e,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=i;return{connecting:a?.nodeId===t&&a?.handleId===e&&a?.type===n||l?.nodeId===t&&l?.handleId===e&&l?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},ES=G.forwardRef(({type:t="source",position:e=Se.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:p,onMouseDown:y,onTouchStart:v,...b},E)=>{const T=c||null,M=t==="target",N=ln(),V=Y4(),{connectOnClick:B,noPanClassName:$}=Tt(nD,Sn),{connecting:j,clickConnecting:ne}=Tt(rD(V,T,t),Sn);V||N.getState().onError?.("010",ts.error010());const te=C=>{const{defaultEdgeOptions:z,onConnect:U,hasDefaultEdges:H}=N.getState(),I={...z,...C};if(H){const{edges:P,setEdges:K}=N.getState();K(W4(I,P))}U?.(I),d?.(I)},O=C=>{if(!V)return;const z=uS(C);a&&(z&&C.button===0||!z)&&wS({event:C,handleId:T,nodeId:V,onConnect:te,isTarget:M,getState:N.getState,setState:N.setState,isValidConnection:n||N.getState().isValidConnection||aE}),z?y?.(C):v?.(C)},R=C=>{const{onClickConnectStart:z,onClickConnectEnd:U,connectionClickStartHandle:H,connectionMode:I,isValidConnection:P}=N.getState();if(!V||!H&&!a)return;if(!H){z?.(C,{nodeId:V,handleId:T,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:V,type:t,handleId:T}});return}const K=lS(C.target),D=n||P||aE,{connection:q,isValid:F}=bS({nodeId:V,id:T,type:t},I,H.nodeId,H.handleId||null,H.type,D,K);F&&te(q),U?.(C),N.setState({connectionClickStartHandle:null})};return he.createElement("div",{"data-handleid":T,"data-nodeid":V,"data-handlepos":e,"data-id":`${V}-${T}-${t}`,className:Vn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",$,p,{source:!M,target:M,connectable:i,connectablestart:a,connectableend:l,connecting:ne,connectionindicator:i&&(a&&!j||l&&j)}]),onMouseDown:O,onTouchStart:O,onClick:B?R:void 0,ref:E,...b},f)});ES.displayName="Handle";var Pn=G.memo(ES);const xS=({data:t,isConnectable:e,targetPosition:n=Se.Top,sourcePosition:i=Se.Bottom})=>he.createElement(he.Fragment,null,he.createElement(Pn,{type:"target",position:n,isConnectable:e}),t?.label,he.createElement(Pn,{type:"source",position:i,isConnectable:e}));xS.displayName="DefaultNode";var o0=G.memo(xS);const SS=({data:t,isConnectable:e,sourcePosition:n=Se.Bottom})=>he.createElement(he.Fragment,null,t?.label,he.createElement(Pn,{type:"source",position:n,isConnectable:e}));SS.displayName="InputNode";var TS=G.memo(SS);const AS=({data:t,isConnectable:e,targetPosition:n=Se.Top})=>he.createElement(he.Fragment,null,he.createElement(Pn,{type:"target",position:n,isConnectable:e}),t?.label);AS.displayName="OutputNode";var RS=G.memo(AS);const ny=()=>null;ny.displayName="GroupNode";const iD=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),wh=t=>t.id;function sD(t,e){return Sn(t.selectedNodes.map(wh),e.selectedNodes.map(wh))&&Sn(t.selectedEdges.map(wh),e.selectedEdges.map(wh))}const CS=G.memo(({onSelectionChange:t})=>{const e=ln(),{selectedNodes:n,selectedEdges:i}=Tt(iD,sD);return G.useEffect(()=>{const a={nodes:n,edges:i};t?.(a),e.getState().onSelectionChange.forEach(l=>l(a))},[n,i,t]),null});CS.displayName="SelectionListener";const aD=t=>!!t.onSelectionChange;function oD({onSelectionChange:t}){const e=Tt(aD);return t||e?he.createElement(CS,{onSelectionChange:t}):null}const lD=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function tl(t,e){G.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ge(t,e,n){G.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const cD=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:f,nodesDraggable:p,nodesConnectable:y,nodesFocusable:v,edgesFocusable:b,edgesUpdatable:E,elevateNodesOnSelect:T,minZoom:M,maxZoom:N,nodeExtent:V,onNodesChange:B,onEdgesChange:$,elementsSelectable:j,connectionMode:ne,snapGrid:te,snapToGrid:O,translateExtent:R,connectOnClick:C,defaultEdgeOptions:z,fitView:U,fitViewOptions:H,onNodesDelete:I,onEdgesDelete:P,onNodeDrag:K,onNodeDragStart:D,onNodeDragStop:q,onSelectionDrag:F,onSelectionDragStart:Y,onSelectionDragStop:A,noPanClassName:W,nodeOrigin:Z,rfId:Q,autoPanOnConnect:ee,autoPanOnNodeDrag:le,onError:ue,connectionRadius:fe,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Re,setEdges:rt,setDefaultNodesAndEdges:it,setMinZoom:Le,setMaxZoom:$e,setTranslateExtent:Be,setNodeExtent:Ze,reset:ze}=Tt(lD,Sn),we=ln();return G.useEffect(()=>{const Rt=i?.map(vn=>({...vn,...z}));return it(n,Rt),()=>{ze()}},[]),Ge("defaultEdgeOptions",z,we.setState),Ge("connectionMode",ne,we.setState),Ge("onConnect",a,we.setState),Ge("onConnectStart",l,we.setState),Ge("onConnectEnd",c,we.setState),Ge("onClickConnectStart",d,we.setState),Ge("onClickConnectEnd",f,we.setState),Ge("nodesDraggable",p,we.setState),Ge("nodesConnectable",y,we.setState),Ge("nodesFocusable",v,we.setState),Ge("edgesFocusable",b,we.setState),Ge("edgesUpdatable",E,we.setState),Ge("elementsSelectable",j,we.setState),Ge("elevateNodesOnSelect",T,we.setState),Ge("snapToGrid",O,we.setState),Ge("snapGrid",te,we.setState),Ge("onNodesChange",B,we.setState),Ge("onEdgesChange",$,we.setState),Ge("connectOnClick",C,we.setState),Ge("fitViewOnInit",U,we.setState),Ge("fitViewOnInitOptions",H,we.setState),Ge("onNodesDelete",I,we.setState),Ge("onEdgesDelete",P,we.setState),Ge("onNodeDrag",K,we.setState),Ge("onNodeDragStart",D,we.setState),Ge("onNodeDragStop",q,we.setState),Ge("onSelectionDrag",F,we.setState),Ge("onSelectionDragStart",Y,we.setState),Ge("onSelectionDragStop",A,we.setState),Ge("noPanClassName",W,we.setState),Ge("nodeOrigin",Z,we.setState),Ge("rfId",Q,we.setState),Ge("autoPanOnConnect",ee,we.setState),Ge("autoPanOnNodeDrag",le,we.setState),Ge("onError",ue,we.setState),Ge("connectionRadius",fe,we.setState),Ge("isValidConnection",_e,we.setState),Ge("nodeDragThreshold",Ae,we.setState),tl(t,Re),tl(e,rt),tl(M,Le),tl(N,$e),tl(R,Be),tl(V,Ze),null},oE={display:"none"},uD={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},NS="react-flow__node-desc",IS="react-flow__edge-desc",dD="react-flow__aria-live",hD=t=>t.ariaLiveMessage;function fD({rfId:t}){const e=Tt(hD);return he.createElement("div",{id:`${dD}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:uD},e)}function gD({rfId:t,disableKeyboardA11y:e}){return he.createElement(he.Fragment,null,he.createElement("div",{id:`${NS}-${t}`,style:oE},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),he.createElement("div",{id:`${IS}-${t}`,style:oE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&he.createElement(fD,{rfId:t}))}var Tu=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,i]=G.useState(!1),a=G.useRef(!1),l=G.useRef(new Set([])),[c,d]=G.useMemo(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=p.reduce((v,b)=>v.concat(...b),[]);return[p,y]}return[[],[]]},[t]);return G.useEffect(()=>{const f=typeof document<"u"?document:null,p=e?.target||f;if(t!==null){const y=E=>{if(a.current=E.ctrlKey||E.metaKey||E.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&r0(E))return!1;const M=cE(E.code,d);l.current.add(E[M]),lE(c,l.current,!1)&&(E.preventDefault(),i(!0))},v=E=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&r0(E))return!1;const M=cE(E.code,d);lE(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(E[M]),E.key==="Meta"&&l.current.clear(),a.current=!1},b=()=>{l.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",v),window.addEventListener("blur",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",v),window.removeEventListener("blur",b)}}},[t,i]),n};function lE(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(a=>e.has(a)))}function cE(t,e){return e.includes(t)?"code":"key"}function kS(t,e,n,i){const a=t.parentNode||t.parentId;if(!a)return n;const l=e.get(a),c=_l(l,i);return kS(l,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Dt]?.z??0)>(n.z??0)?l[Dt]?.z??0:n.z??0},i)}function DS(t,e,n){t.forEach(i=>{const a=i.parentNode||i.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[i.id]){const{x:l,y:c,z:d}=kS(i,t,{...i.position,z:i[Dt]?.z??0},e);i.positionAbsolute={x:l,y:c},i[Dt].z=d,n?.[i.id]&&(i[Dt].isParent=!0)}})}function Am(t,e,n,i){const a=new Map,l={},c=i?1e3:0;return t.forEach(d=>{const f=(Rr(d.zIndex)?d.zIndex:0)+(d.selected?c:0),p=e.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const b=p?.type&&p?.type!==d.type;Object.defineProperty(y,Dt,{enumerable:!1,value:{handleBounds:b?void 0:p?.[Dt]?.handleBounds,z:f}}),a.set(d.id,y)}),DS(a,n,l),a}function MS(t,e={}){const{getNodes:n,width:i,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:f,fitViewOnInitDone:p,fitViewOnInit:y,nodeOrigin:v}=t(),b=e.initial&&!p&&y;if(d&&f&&(b||!e.initial)){const T=n().filter(N=>{const V=e.includeHiddenNodes?N.width&&N.height:!N.hidden;return e.nodes?.length?V&&e.nodes.some(B=>B.id===N.id):V}),M=T.every(N=>N.width&&N.height);if(T.length>0&&M){const N=ey(T,v),{x:V,y:B,zoom:$}=vS(N,i,a,e.minZoom??l,e.maxZoom??c,e.padding??.1),j=$s.translate(V,B).scale($);return typeof e.duration=="number"&&e.duration>0?d.transform(Ba(f,e.duration),j):d.transform(f,j),!0}}return!1}function pD(t,e){return t.forEach(n=>{const i=e.get(n.id);i&&e.set(i.id,{...i,[Dt]:i[Dt],selected:n.selected})}),new Map(e)}function mD(t,e){return e.map(n=>{const i=t.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function Eh({changedNodes:t,changedEdges:e,get:n,set:i}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:f,hasDefaultEdges:p}=n();t?.length&&(f&&i({nodeInternals:pD(t,a)}),c?.(t)),e?.length&&(p&&i({edges:mD(e,l)}),d?.(e))}const nl=()=>{},yD={zoomIn:nl,zoomOut:nl,zoomTo:nl,getZoom:()=>1,setViewport:nl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:nl,fitBounds:nl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},vD=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),_D=()=>{const t=ln(),{d3Zoom:e,d3Selection:n}=Tt(vD,Sn);return G.useMemo(()=>n&&e?{zoomIn:a=>e.scaleBy(Ba(n,a?.duration),1.2),zoomOut:a=>e.scaleBy(Ba(n,a?.duration),1/1.2),zoomTo:(a,l)=>e.scaleTo(Ba(n,l?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,l)=>{const[c,d,f]=t.getState().transform,p=$s.translate(a.x??c,a.y??d).scale(a.zoom??f);e.transform(Ba(n,l?.duration),p)},getViewport:()=>{const[a,l,c]=t.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>MS(t.getState,a),setCenter:(a,l,c)=>{const{width:d,height:f,maxZoom:p}=t.getState(),y=typeof c?.zoom<"u"?c.zoom:p,v=d/2-a*y,b=f/2-l*y,E=$s.translate(v,b).scale(y);e.transform(Ba(n,c?.duration),E)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:f,maxZoom:p}=t.getState(),{x:y,y:v,zoom:b}=vS(a,c,d,f,p,l?.padding??.1),E=$s.translate(y,v).scale(b);e.transform(Ba(n,l?.duration),E)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),a0(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:f}=t.getState();if(!f)return a;const{x:p,y}=f.getBoundingClientRect(),v={x:a.x-p,y:a.y-y};return a0(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=t.getState();if(!c)return a;const{x:d,y:f}=c.getBoundingClientRect(),p=pS(a,l);return{x:p.x+d,y:p.y+f}},viewportInitialized:!0}:yD,[e,n])};function Bf(){const t=_D(),e=ln(),n=G.useCallback(()=>e.getState().getNodes().map(M=>({...M})),[]),i=G.useCallback(M=>e.getState().nodeInternals.get(M),[]),a=G.useCallback(()=>{const{edges:M=[]}=e.getState();return M.map(N=>({...N}))},[]),l=G.useCallback(M=>{const{edges:N=[]}=e.getState();return N.find(V=>V.id===M)},[]),c=G.useCallback(M=>{const{getNodes:N,setNodes:V,hasDefaultNodes:B,onNodesChange:$}=e.getState(),j=N(),ne=typeof M=="function"?M(j):M;if(B)V(ne);else if($){const te=ne.length===0?j.map(O=>({type:"remove",id:O.id})):ne.map(O=>({item:O,type:"reset"}));$(te)}},[]),d=G.useCallback(M=>{const{edges:N=[],setEdges:V,hasDefaultEdges:B,onEdgesChange:$}=e.getState(),j=typeof M=="function"?M(N):M;if(B)V(j);else if($){const ne=j.length===0?N.map(te=>({type:"remove",id:te.id})):j.map(te=>({item:te,type:"reset"}));$(ne)}},[]),f=G.useCallback(M=>{const N=Array.isArray(M)?M:[M],{getNodes:V,setNodes:B,hasDefaultNodes:$,onNodesChange:j}=e.getState();if($){const te=[...V(),...N];B(te)}else if(j){const ne=N.map(te=>({item:te,type:"add"}));j(ne)}},[]),p=G.useCallback(M=>{const N=Array.isArray(M)?M:[M],{edges:V=[],setEdges:B,hasDefaultEdges:$,onEdgesChange:j}=e.getState();if($)B([...V,...N]);else if(j){const ne=N.map(te=>({item:te,type:"add"}));j(ne)}},[]),y=G.useCallback(()=>{const{getNodes:M,edges:N=[],transform:V}=e.getState(),[B,$,j]=V;return{nodes:M().map(ne=>({...ne})),edges:N.map(ne=>({...ne})),viewport:{x:B,y:$,zoom:j}}},[]),v=G.useCallback(({nodes:M,edges:N})=>{const{nodeInternals:V,getNodes:B,edges:$,hasDefaultNodes:j,hasDefaultEdges:ne,onNodesDelete:te,onEdgesDelete:O,onNodesChange:R,onEdgesChange:C}=e.getState(),z=(M||[]).map(K=>K.id),U=(N||[]).map(K=>K.id),H=B().reduce((K,D)=>{const q=D.parentNode||D.parentId,F=!z.includes(D.id)&&q&&K.find(A=>A.id===q);return(typeof D.deletable=="boolean"?D.deletable:!0)&&(z.includes(D.id)||F)&&K.push(D),K},[]),I=$.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),P=I.filter(K=>U.includes(K.id));if(H||P){const K=yS(H,I),D=[...P,...K],q=D.reduce((F,Y)=>(F.includes(Y.id)||F.push(Y.id),F),[]);if((ne||j)&&(ne&&e.setState({edges:$.filter(F=>!q.includes(F.id))}),j&&(H.forEach(F=>{V.delete(F.id)}),e.setState({nodeInternals:new Map(V)}))),q.length>0&&(O?.(D),C&&C(q.map(F=>({id:F,type:"remove"})))),H.length>0&&(te?.(H),R)){const F=H.map(Y=>({id:Y.id,type:"remove"}));R(F)}}},[]),b=G.useCallback(M=>{const N=U4(M),V=N?null:e.getState().nodeInternals.get(M.id);return!N&&!V?[null,null,N]:[N?M:eE(V),V,N]},[]),E=G.useCallback((M,N=!0,V)=>{const[B,$,j]=b(M);return B?(V||e.getState().getNodes()).filter(ne=>{if(!j&&(ne.id===$.id||!ne.positionAbsolute))return!1;const te=eE(ne),O=n0(te,B);return N&&O>0||O>=B.width*B.height}):[]},[]),T=G.useCallback((M,N,V=!0)=>{const[B]=b(M);if(!B)return!1;const $=n0(B,N);return V&&$>0||$>=B.width*B.height},[]);return G.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:f,addEdges:p,toObject:y,deleteElements:v,getIntersectingNodes:E,isNodeIntersecting:T}),[t,n,i,a,l,c,d,f,p,y,v,E,T])}const bD={actInsideInputWithModifier:!1};var wD=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ln(),{deleteElements:i}=Bf(),a=Tu(t,bD),l=Tu(e);G.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),f=d().filter(y=>y.selected),p=c.filter(y=>y.selected);i({nodes:f,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),G.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function ED(t){const e=ln();G.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const a=Y0(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",ts.error004()),e.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const ry={position:"absolute",width:"100%",height:"100%",top:0,left:0},xD=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,xh=t=>({x:t.x,y:t.y,zoom:t.k}),rl=(t,e)=>t.target.closest(`.${e}`),uE=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),dE=t=>{const e=t.ctrlKey&&of()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},SD=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),TD=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:f=Fa.Free,zoomOnDoubleClick:p=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:b,translateExtent:E,minZoom:T,maxZoom:M,zoomActivationKeyCode:N,preventScrolling:V=!0,children:B,noWheelClassName:$,noPanClassName:j})=>{const ne=G.useRef(),te=ln(),O=G.useRef(!1),R=G.useRef(!1),C=G.useRef(null),z=G.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:H,d3ZoomHandler:I,userSelectionActive:P}=Tt(SD,Sn),K=Tu(N),D=G.useRef(0),q=G.useRef(!1),F=G.useRef();return ED(C),G.useEffect(()=>{if(C.current){const Y=C.current.getBoundingClientRect(),A=k4().scaleExtent([T,M]).translateExtent(E),W=zr(C.current).call(A),Z=$s.translate(b.x,b.y).scale(Nl(b.zoom,T,M)),Q=[[0,0],[Y.width,Y.height]],ee=A.constrain()(Z,Q,E);A.transform(W,ee),A.wheelDelta(dE),te.setState({d3Zoom:A,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[ee.x,ee.y,ee.k],domNode:C.current.closest(".react-flow")})}},[]),G.useEffect(()=>{H&&U&&(c&&!K&&!P?H.on("wheel.zoom",Y=>{if(rl(Y,$))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const A=H.property("__zoom").k||1;if(Y.ctrlKey&&l){const _e=fi(Y),Ae=dE(Y),Re=A*Math.pow(2,Ae);U.scaleTo(H,Re,_e,Y);return}const W=Y.deltaMode===1?20:1;let Z=f===Fa.Vertical?0:Y.deltaX*W,Q=f===Fa.Horizontal?0:Y.deltaY*W;!of()&&Y.shiftKey&&f!==Fa.Vertical&&(Z=Y.deltaY*W,Q=0),U.translateBy(H,-(Z/A)*d,-(Q/A)*d,{internal:!0});const ee=xh(H.property("__zoom")),{onViewportChangeStart:le,onViewportChange:ue,onViewportChangeEnd:fe}=te.getState();clearTimeout(F.current),q.current||(q.current=!0,e?.(Y,ee),le?.(ee)),q.current&&(t?.(Y,ee),ue?.(ee),F.current=setTimeout(()=>{n?.(Y,ee),fe?.(ee),q.current=!1},150))},{passive:!1}):typeof I<"u"&&H.on("wheel.zoom",function(Y,A){if(!V&&Y.type==="wheel"&&!Y.ctrlKey||rl(Y,$))return null;Y.preventDefault(),I.call(this,Y,A)},{passive:!1}))},[P,c,f,H,U,I,K,l,V,$,e,t,n]),G.useEffect(()=>{U&&U.on("start",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;D.current=Y.sourceEvent?.button;const{onViewportChangeStart:A}=te.getState(),W=xh(Y.transform);O.current=!0,z.current=W,Y.sourceEvent?.type==="mousedown"&&te.setState({paneDragging:!0}),A?.(W),e?.(Y.sourceEvent,W)})},[U,e]),G.useEffect(()=>{U&&(P&&!O.current?U.on("zoom",null):P||U.on("zoom",Y=>{const{onViewportChange:A}=te.getState();if(te.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),R.current=!!(i&&uE(v,D.current??0)),(t||A)&&!Y.sourceEvent?.internal){const W=xh(Y.transform);A?.(W),t?.(Y.sourceEvent,W)}}))},[P,U,t,v,i]),G.useEffect(()=>{U&&U.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:A}=te.getState();if(O.current=!1,te.setState({paneDragging:!1}),i&&uE(v,D.current??0)&&!R.current&&i(Y.sourceEvent),R.current=!1,(n||A)&&xD(z.current,Y.transform)){const W=xh(Y.transform);z.current=W,clearTimeout(ne.current),ne.current=setTimeout(()=>{A?.(W),n?.(Y.sourceEvent,W)},c?150:0)}})},[U,c,v,n,i]),G.useEffect(()=>{U&&U.filter(Y=>{const A=K||a,W=l&&Y.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(rl(Y,"react-flow__node")||rl(Y,"react-flow__edge")))return!0;if(!v&&!A&&!c&&!p&&!l||P||!p&&Y.type==="dblclick"||rl(Y,$)&&Y.type==="wheel"||rl(Y,j)&&(Y.type!=="wheel"||c&&Y.type==="wheel"&&!K)||!l&&Y.ctrlKey&&Y.type==="wheel"||!A&&!c&&!W&&Y.type==="wheel"||!v&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(v)&&!v.includes(Y.button)&&Y.type==="mousedown")return!1;const Z=Array.isArray(v)&&v.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&Z})},[P,U,a,l,c,p,v,y,K]),he.createElement("div",{className:"react-flow__renderer",ref:C,style:ry},B)},AD=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function RD(){const{userSelectionActive:t,userSelectionRect:e}=Tt(AD,Sn);return t&&e?he.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function hE(t,e){const n=e.parentNode||e.parentId,i=t.find(a=>a.id===n);if(i){const a=e.position.x+e.width-i.width,l=e.position.y+e.height-i.height;if(a>0||l>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),l>0&&(i.style.height+=l),e.position.x<0){const c=Math.abs(e.position.x);i.position.x=i.position.x-c,i.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);i.position.y=i.position.y-c,i.style.height+=c,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function OS(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,a)=>{const l=t.filter(d=>d.id===a.id);if(l.length===0)return i.push(a),i;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&hE(i,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&hE(i,c);break}case"remove":return i}return i.push(c),i},n)}function PS(t,e){return OS(t,e)}function CD(t,e){return OS(t,e)}const Ps=(t,e)=>({id:t,type:"select",selected:e});function gl(t,e){return t.reduce((n,i)=>{const a=e.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Ps(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Ps(i.id,!1))),n},[])}const Rm=(t,e)=>n=>{n.target===e.current&&t?.(n)},ND=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),VS=G.memo(({isSelecting:t,selectionMode:e=Su.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:y,children:v})=>{const b=G.useRef(null),E=ln(),T=G.useRef(0),M=G.useRef(0),N=G.useRef(),{userSelectionActive:V,elementsSelectable:B,dragging:$}=Tt(ND,Sn),j=()=>{E.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,M.current=0},ne=I=>{l?.(I),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},te=I=>{if(Array.isArray(n)&&n?.includes(2)){I.preventDefault();return}c?.(I)},O=d?I=>d(I):void 0,R=I=>{const{resetSelectedElements:P,domNode:K}=E.getState();if(N.current=K?.getBoundingClientRect(),!B||!t||I.button!==0||I.target!==b.current||!N.current)return;const{x:D,y:q}=Fs(I,N.current);P(),E.setState({userSelectionRect:{width:0,height:0,startX:D,startY:q,x:D,y:q}}),i?.(I)},C=I=>{const{userSelectionRect:P,nodeInternals:K,edges:D,transform:q,onNodesChange:F,onEdgesChange:Y,nodeOrigin:A,getNodes:W}=E.getState();if(!t||!N.current||!P)return;E.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Z=Fs(I,N.current),Q=P.startX??0,ee=P.startY??0,le={...P,x:Z.x<Q?Z.x:Q,y:Z.y<ee?Z.y:ee,width:Math.abs(Z.x-Q),height:Math.abs(Z.y-ee)},ue=W(),fe=mS(K,le,q,e===Su.Partial,!0,A),_e=yS(fe,D).map(Re=>Re.id),Ae=fe.map(Re=>Re.id);if(T.current!==Ae.length){T.current=Ae.length;const Re=gl(ue,Ae);Re.length&&F?.(Re)}if(M.current!==_e.length){M.current=_e.length;const Re=gl(D,_e);Re.length&&Y?.(Re)}E.setState({userSelectionRect:le})},z=I=>{if(I.button!==0)return;const{userSelectionRect:P}=E.getState();!V&&P&&I.target===b.current&&ne?.(I),E.setState({nodesSelectionActive:T.current>0}),j(),a?.(I)},U=I=>{V&&(E.setState({nodesSelectionActive:T.current>0}),a?.(I)),j()},H=B&&(t||V);return he.createElement("div",{className:Vn(["react-flow__pane",{dragging:$,selection:t}]),onClick:H?void 0:Rm(ne,b),onContextMenu:Rm(te,b),onWheel:Rm(O,b),onMouseEnter:H?void 0:f,onMouseDown:H?R:void 0,onMouseMove:H?C:p,onMouseUp:H?z:void 0,onMouseLeave:H?U:y,ref:b,style:ry},v,he.createElement(RD,null))});VS.displayName="Pane";function LS(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const i=e.get(n);return i?i.selected?!0:LS(i,e):!1}function fE(t,e,n){let i=t;do{if(i?.matches(e))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function ID(t,e,n,i){return Array.from(t.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!LS(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function kD(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function zS(t,e,n,i,a=[0,0],l){const c=kD(t,t.extent||i);let d=c;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const v=n.get(f),{x:b,y:E}=_l(v,a).positionAbsolute;d=v&&Rr(b)&&Rr(E)&&Rr(v.width)&&Rr(v.height)?[[b+t.width*a[0],E+t.height*a[1]],[b+v.width-t.width+t.width*a[0],E+v.height-t.height+t.height*a[1]]]:d}else l?.("005",ts.error005()),d=c;else if(t.extent&&f&&t.extent!=="parent"){const v=n.get(f),{x:b,y:E}=_l(v,a).positionAbsolute;d=[[t.extent[0][0]+b,t.extent[0][1]+E],[t.extent[1][0]+b,t.extent[1][1]+E]]}let p={x:0,y:0};if(f){const v=n.get(f);p=_l(v,a).positionAbsolute}const y=d&&d!=="parent"?K0(e,d):e;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function Cm({nodeId:t,dragItems:e,nodeInternals:n}){const i=e.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?i.find(a=>a.id===t):i[0],i]}const gE=(t,e,n,i)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const l=Array.from(a),c=e.getBoundingClientRect(),d={x:c.width*i[0],y:c.height*i[1]};return l.map(f=>{const p=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(p.left-c.left-d.x)/n,y:(p.top-c.top-d.y)/n,...Y0(f)}})};function Qc(t,e,n){return n===void 0?n:i=>{const a=e().nodeInternals.get(t);a&&n(i,{...a})}}function l0({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:f}=e.getState(),p=d.get(t);if(!p){f?.("012",ts.error012(t));return}e.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):a([t])}function DD(){const t=ln();return G.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:l}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,f={x:(c-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:l?a[0]*Math.round(f.x/a[0]):f.x,ySnapped:l?a[1]*Math.round(f.y/a[1]):f.y,...f}},[])}function Nm(t){return(e,n,i)=>t?.(e,i)}function US({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=ln(),[f,p]=G.useState(!1),y=G.useRef([]),v=G.useRef({x:null,y:null}),b=G.useRef(0),E=G.useRef(null),T=G.useRef({x:0,y:0}),M=G.useRef(null),N=G.useRef(!1),V=G.useRef(!1),B=G.useRef(!1),$=DD();return G.useEffect(()=>{if(t?.current){const j=zr(t.current),ne=({x:R,y:C})=>{const{nodeInternals:z,onNodeDrag:U,onSelectionDrag:H,updateNodePositions:I,nodeExtent:P,snapGrid:K,snapToGrid:D,nodeOrigin:q,onError:F}=d.getState();v.current={x:R,y:C};let Y=!1,A={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&P){const Z=ey(y.current,q);A=X0(Z)}if(y.current=y.current.map(Z=>{const Q={x:R-Z.distance.x,y:C-Z.distance.y};D&&(Q.x=K[0]*Math.round(Q.x/K[0]),Q.y=K[1]*Math.round(Q.y/K[1]));const ee=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];y.current.length>1&&P&&!Z.extent&&(ee[0][0]=Z.positionAbsolute.x-A.x+P[0][0],ee[1][0]=Z.positionAbsolute.x+(Z.width??0)-A.x2+P[1][0],ee[0][1]=Z.positionAbsolute.y-A.y+P[0][1],ee[1][1]=Z.positionAbsolute.y+(Z.height??0)-A.y2+P[1][1]);const le=zS(Z,Q,z,ee,q,F);return Y=Y||Z.position.x!==le.position.x||Z.position.y!==le.position.y,Z.position=le.position,Z.positionAbsolute=le.positionAbsolute,Z}),!Y)return;I(y.current,!0,!0),p(!0);const W=a?U:Nm(H);if(W&&M.current){const[Z,Q]=Cm({nodeId:a,dragItems:y.current,nodeInternals:z});W(M.current,Z,Q)}},te=()=>{if(!E.current)return;const[R,C]=oS(T.current,E.current);if(R!==0||C!==0){const{transform:z,panBy:U}=d.getState();v.current.x=(v.current.x??0)-R/z[2],v.current.y=(v.current.y??0)-C/z[2],U({x:R,y:C})&&ne(v.current)}b.current=requestAnimationFrame(te)},O=R=>{const{nodeInternals:C,multiSelectionActive:z,nodesDraggable:U,unselectNodesAndEdges:H,onNodeDragStart:I,onSelectionDragStart:P}=d.getState();V.current=!0;const K=a?I:Nm(P);(!c||!l)&&!z&&a&&(C.get(a)?.selected||H()),a&&l&&c&&l0({id:a,store:d,nodeRef:t});const D=$(R);if(v.current=D,y.current=ID(C,U,D,a),K&&y.current){const[q,F]=Cm({nodeId:a,dragItems:y.current,nodeInternals:C});K(R.sourceEvent,q,F)}};if(e)j.on(".drag",null);else{const R=BI().on("start",C=>{const{domNode:z,nodeDragThreshold:U}=d.getState();U===0&&O(C),B.current=!1;const H=$(C);v.current=H,E.current=z?.getBoundingClientRect()||null,T.current=Fs(C.sourceEvent,E.current)}).on("drag",C=>{const z=$(C),{autoPanOnNodeDrag:U,nodeDragThreshold:H}=d.getState();if(C.sourceEvent.type==="touchmove"&&C.sourceEvent.touches.length>1&&(B.current=!0),!B.current){if(!N.current&&V.current&&U&&(N.current=!0,te()),!V.current){const I=z.xSnapped-(v?.current?.x??0),P=z.ySnapped-(v?.current?.y??0);Math.sqrt(I*I+P*P)>H&&O(C)}(v.current.x!==z.xSnapped||v.current.y!==z.ySnapped)&&y.current&&V.current&&(M.current=C.sourceEvent,T.current=Fs(C.sourceEvent,E.current),ne(z))}}).on("end",C=>{if(!(!V.current||B.current)&&(p(!1),N.current=!1,V.current=!1,cancelAnimationFrame(b.current),y.current)){const{updateNodePositions:z,nodeInternals:U,onNodeDragStop:H,onSelectionDragStop:I}=d.getState(),P=a?H:Nm(I);if(z(y.current,!1,!1),P){const[K,D]=Cm({nodeId:a,dragItems:y.current,nodeInternals:U});P(C.sourceEvent,K,D)}}}).filter(C=>{const z=C.target;return!C.button&&(!n||!fE(z,`.${n}`,t))&&(!i||fE(z,i,t))});return j.call(R),()=>{j.on(".drag",null)}}}},[t,e,n,i,l,d,a,c,$]),f}function jS(){const t=ln();return G.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:f,onError:p,nodesDraggable:y}=t.getState(),v=c().filter(B=>B.selected&&(B.draggable||y&&typeof B.draggable>"u")),b=d?f[0]:5,E=d?f[1]:5,T=n.isShiftPressed?4:1,M=n.x*b*T,N=n.y*E*T,V=v.map(B=>{if(B.positionAbsolute){const $={x:B.positionAbsolute.x+M,y:B.positionAbsolute.y+N};d&&($.x=f[0]*Math.round($.x/f[0]),$.y=f[1]*Math.round($.y/f[1]));const{positionAbsolute:j,position:ne}=zS(B,$,i,a,void 0,p);B.position=ne,B.positionAbsolute=j}return B});l(V,!0,!1)},[])}const bl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Wc=t=>{const e=({id:n,type:i,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:f,selected:p,onClick:y,onMouseEnter:v,onMouseMove:b,onMouseLeave:E,onContextMenu:T,onDoubleClick:M,style:N,className:V,isDraggable:B,isSelectable:$,isConnectable:j,isFocusable:ne,selectNodesOnDrag:te,sourcePosition:O,targetPosition:R,hidden:C,resizeObserver:z,dragHandle:U,zIndex:H,isParent:I,noDragClassName:P,noPanClassName:K,initialized:D,disableKeyboardA11y:q,ariaLabel:F,rfId:Y,hasHandleBounds:A})=>{const W=ln(),Z=G.useRef(null),Q=G.useRef(null),ee=G.useRef(O),le=G.useRef(R),ue=G.useRef(i),fe=$||B||y||v||b||E,_e=jS(),Ae=Qc(n,W.getState,v),Re=Qc(n,W.getState,b),rt=Qc(n,W.getState,E),it=Qc(n,W.getState,T),Le=Qc(n,W.getState,M),$e=ze=>{const{nodeDragThreshold:we}=W.getState();if($&&(!te||!B||we>0)&&l0({id:n,store:W,nodeRef:Z}),y){const Rt=W.getState().nodeInternals.get(n);Rt&&y(ze,{...Rt})}},Be=ze=>{if(!r0(ze)&&!q)if(cS.includes(ze.key)&&$){const we=ze.key==="Escape";l0({id:n,store:W,unselect:we,nodeRef:Z})}else B&&p&&Object.prototype.hasOwnProperty.call(bl,ze.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),_e({x:bl[ze.key].x,y:bl[ze.key].y,isShiftPressed:ze.shiftKey}))};G.useEffect(()=>()=>{Q.current&&(z?.unobserve(Q.current),Q.current=null)},[]),G.useEffect(()=>{if(Z.current&&!C){const ze=Z.current;(!D||!A||Q.current!==ze)&&(Q.current&&z?.unobserve(Q.current),z?.observe(ze),Q.current=ze)}},[C,D,A]),G.useEffect(()=>{const ze=ue.current!==i,we=ee.current!==O,Rt=le.current!==R;Z.current&&(ze||we||Rt)&&(ze&&(ue.current=i),we&&(ee.current=O),Rt&&(le.current=R),W.getState().updateNodeDimensions([{id:n,nodeElement:Z.current,forceUpdate:!0}]))},[n,i,O,R]);const Ze=US({nodeRef:Z,disabled:C||!B,noDragClassName:P,handleSelector:U,nodeId:n,isSelectable:$,selectNodesOnDrag:te});return C?null:he.createElement("div",{className:Vn(["react-flow__node",`react-flow__node-${i}`,{[K]:B},V,{selected:p,selectable:$,parent:I,dragging:Ze}]),ref:Z,style:{zIndex:H,transform:`translate(${d}px,${f}px)`,pointerEvents:fe?"all":"none",visibility:D?"visible":"hidden",...N},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Re,onMouseLeave:rt,onContextMenu:it,onClick:$e,onDoubleClick:Le,onKeyDown:ne?Be:void 0,tabIndex:ne?0:void 0,role:ne?"button":void 0,"aria-describedby":q?void 0:`${NS}-${Y}`,"aria-label":F},he.createElement(G4,{value:n},he.createElement(t,{id:n,data:a,type:i,xPos:l,yPos:c,selected:p,isConnectable:j,sourcePosition:O,targetPosition:R,dragging:Ze,dragHandle:U,zIndex:H})))};return e.displayName="NodeWrapper",G.memo(e)};const MD=t=>{const e=t.getNodes().filter(n=>n.selected);return{...ey(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function OD({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ln(),{width:a,height:l,x:c,y:d,transformString:f,userSelectionActive:p}=Tt(MD,Sn),y=jS(),v=G.useRef(null);if(G.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),US({nodeRef:v}),p||!a||!l)return null;const b=t?T=>{const M=i.getState().getNodes().filter(N=>N.selected);t(T,M)}:void 0,E=T=>{Object.prototype.hasOwnProperty.call(bl,T.key)&&y({x:bl[T.key].x,y:bl[T.key].y,isShiftPressed:T.shiftKey})};return he.createElement("div",{className:Vn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},he.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:E,style:{width:a,height:l,top:d,left:c}}))}var PD=G.memo(OD);const VD=t=>t.nodesSelectionActive,BS=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:f,onMoveStart:p,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:b,selectionMode:E,onSelectionStart:T,onSelectionEnd:M,multiSelectionKeyCode:N,panActivationKeyCode:V,zoomActivationKeyCode:B,elementsSelectable:$,zoomOnScroll:j,zoomOnPinch:ne,panOnScroll:te,panOnScrollSpeed:O,panOnScrollMode:R,zoomOnDoubleClick:C,panOnDrag:z,defaultViewport:U,translateExtent:H,minZoom:I,maxZoom:P,preventScrolling:K,onSelectionContextMenu:D,noWheelClassName:q,noPanClassName:F,disableKeyboardA11y:Y})=>{const A=Tt(VD),W=Tu(v),Z=Tu(V),Q=Z||z,ee=Z||te,le=W||b&&Q!==!0;return wD({deleteKeyCode:d,multiSelectionKeyCode:N}),he.createElement(TD,{onMove:f,onMoveStart:p,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:$,zoomOnScroll:j,zoomOnPinch:ne,panOnScroll:ee,panOnScrollSpeed:O,panOnScrollMode:R,zoomOnDoubleClick:C,panOnDrag:!W&&Q,defaultViewport:U,translateExtent:H,minZoom:I,maxZoom:P,zoomActivationKeyCode:B,preventScrolling:K,noWheelClassName:q,noPanClassName:F},he.createElement(VS,{onSelectionStart:T,onSelectionEnd:M,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:Q,isSelecting:!!le,selectionMode:E},t,A&&he.createElement(PD,{onSelectionContextMenu:D,noPanClassName:F,disableKeyboardA11y:Y})))};BS.displayName="FlowRenderer";var LD=G.memo(BS);function zD(t){return Tt(G.useCallback(n=>t?mS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function UD(t){const e={input:Wc(t.input||TS),default:Wc(t.default||o0),output:Wc(t.output||RS),group:Wc(t.group||ny)},n={},i=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Wc(t[l]||o0),a),n);return{...e,...i}}const jD=({x:t,y:e,width:n,height:i,origin:a})=>!n||!i?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-n*a[0],y:e-i*a[1]},BD=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),HS=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:l,onError:c}=Tt(BD,Sn),d=zD(t.onlyRenderVisibleElements),f=G.useRef(),p=G.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const b=v.map(E=>({id:E.target.getAttribute("data-id"),nodeElement:E.target,forceUpdate:!0}));l(b)});return f.current=y,y},[]);return G.useEffect(()=>()=>{f?.current?.disconnect()},[]),he.createElement("div",{className:"react-flow__nodes",style:ry},d.map(y=>{let v=y.type||"default";t.nodeTypes[v]||(c?.("003",ts.error003(v)),v="default");const b=t.nodeTypes[v]||t.nodeTypes.default,E=!!(y.draggable||e&&typeof y.draggable>"u"),T=!!(y.selectable||a&&typeof y.selectable>"u"),M=!!(y.connectable||n&&typeof y.connectable>"u"),N=!!(y.focusable||i&&typeof y.focusable>"u"),V=t.nodeExtent?K0(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,B=V?.x??0,$=V?.y??0,j=jD({x:B,y:$,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return he.createElement(b,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||Se.Bottom,targetPosition:y.targetPosition||Se.Top,hidden:y.hidden,xPos:B,yPos:$,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:E,isSelectable:T,isConnectable:M,isFocusable:N,resizeObserver:p,dragHandle:y.dragHandle,zIndex:y[Dt]?.z??0,isParent:!!y[Dt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Dt]?.handleBounds})}))};HS.displayName="NodeRenderer";var HD=G.memo(HS);const qD=(t,e,n)=>n===Se.Left?t-e:n===Se.Right?t+e:t,$D=(t,e,n)=>n===Se.Top?t-e:n===Se.Bottom?t+e:t,pE="react-flow__edgeupdater",mE=({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>he.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Vn([pE,`${pE}-${d}`]),cx:qD(e,i,t),cy:$D(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),FD=()=>!0;var il=t=>{const e=({id:n,className:i,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:f,animated:p,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:M,style:N,source:V,target:B,sourceX:$,sourceY:j,targetX:ne,targetY:te,sourcePosition:O,targetPosition:R,elementsSelectable:C,hidden:z,sourceHandleId:U,targetHandleId:H,onContextMenu:I,onMouseEnter:P,onMouseMove:K,onMouseLeave:D,reconnectRadius:q,onReconnect:F,onReconnectStart:Y,onReconnectEnd:A,markerEnd:W,markerStart:Z,rfId:Q,ariaLabel:ee,isFocusable:le,isReconnectable:ue,pathOptions:fe,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Re=G.useRef(null),[rt,it]=G.useState(!1),[Le,$e]=G.useState(!1),Be=ln(),Ze=G.useMemo(()=>`url('#${s0(Z,Q)}')`,[Z,Q]),ze=G.useMemo(()=>`url('#${s0(W,Q)}')`,[W,Q]);if(z)return null;const we=Ut=>{const{edges:Jt,addSelectedEdges:Cn,unselectNodesAndEdges:Nn,multiSelectionActive:en}=Be.getState(),cn=Jt.find(In=>In.id===n);cn&&(C&&(Be.setState({nodesSelectionActive:!1}),cn.selected&&en?(Nn({nodes:[],edges:[cn]}),Re.current?.blur()):Cn([n])),c&&c(Ut,cn))},Rt=Xc(n,Be.getState,d),vn=Xc(n,Be.getState,I),Gt=Xc(n,Be.getState,P),Fn=Xc(n,Be.getState,K),An=Xc(n,Be.getState,D),Rn=(Ut,Jt)=>{if(Ut.button!==0)return;const{edges:Cn,isValidConnection:Nn}=Be.getState(),en=Jt?B:V,cn=(Jt?H:U)||null,In=Jt?"target":"source",Si=Nn||FD,Ti=Jt,Ir=Cn.find(Yn=>Yn.id===n);$e(!0),Y?.(Ut,Ir,In);const Gn=Yn=>{$e(!1),A?.(Yn,Ir,In)};wS({event:Ut,handleId:cn,nodeId:en,onConnect:Yn=>F?.(Ir,Yn),isTarget:Ti,getState:Be.getState,setState:Be.setState,isValidConnection:Si,edgeUpdaterType:In,onReconnectEnd:Gn})},Nr=Ut=>Rn(Ut,!0),ot=Ut=>Rn(Ut,!1),Ye=()=>it(!0),zt=()=>it(!1),Et=!C&&!c,Gr=Ut=>{if(!Ae&&cS.includes(Ut.key)&&C){const{unselectNodesAndEdges:Jt,addSelectedEdges:Cn,edges:Nn}=Be.getState();Ut.key==="Escape"?(Re.current?.blur(),Jt({edges:[Nn.find(cn=>cn.id===n)]})):Cn([n])}};return he.createElement("g",{className:Vn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:f,animated:p,inactive:Et,updating:rt}]),onClick:we,onDoubleClick:Rt,onContextMenu:vn,onMouseEnter:Gt,onMouseMove:Fn,onMouseLeave:An,onKeyDown:le?Gr:void 0,tabIndex:le?0:void 0,role:le?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ee===null?void 0:ee||`Edge from ${V} to ${B}`,"aria-describedby":le?`${IS}-${Q}`:void 0,ref:Re},!Le&&he.createElement(t,{id:n,source:V,target:B,selected:f,animated:p,label:y,labelStyle:v,labelShowBg:b,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:M,data:l,style:N,sourceX:$,sourceY:j,targetX:ne,targetY:te,sourcePosition:O,targetPosition:R,sourceHandleId:U,targetHandleId:H,markerStart:Ze,markerEnd:ze,pathOptions:fe,interactionWidth:_e}),ue&&he.createElement(he.Fragment,null,(ue==="source"||ue===!0)&&he.createElement(mE,{position:O,centerX:$,centerY:j,radius:q,onMouseDown:Nr,onMouseEnter:Ye,onMouseOut:zt,type:"source"}),(ue==="target"||ue===!0)&&he.createElement(mE,{position:R,centerX:ne,centerY:te,radius:q,onMouseDown:ot,onMouseEnter:Ye,onMouseOut:zt,type:"target"})))};return e.displayName="EdgeWrapper",G.memo(e)};function GD(t){const e={default:il(t.default||lf),straight:il(t.bezier||Z0),step:il(t.step||W0),smoothstep:il(t.step||jf),simplebezier:il(t.simplebezier||Q0)},n={},i=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=il(t[l]||lf),a),n);return{...e,...i}}function yE(t,e,n=null){const i=(n?.x||0)+e.x,a=(n?.y||0)+e.y,l=n?.width||e.width,c=n?.height||e.height;switch(t){case Se.Top:return{x:i+l/2,y:a};case Se.Right:return{x:i+l,y:a+c/2};case Se.Bottom:return{x:i+l/2,y:a+c};case Se.Left:return{x:i,y:a+c/2}}}function vE(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const YD=(t,e,n,i,a,l)=>{const c=yE(n,t,e),d=yE(l,i,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function KD({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:l,width:c,height:d,transform:f}){const p={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+a),y2:Math.max(t.y+i,e.y+l)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const y=X0({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:c/f[2],height:d/f[2]}),v=Math.max(0,Math.min(y.x2,p.x2)-Math.max(y.x,p.x)),b=Math.max(0,Math.min(y.y2,p.y2)-Math.max(y.y,p.y));return Math.ceil(v*b)>0}function _E(t){const e=t?.[Dt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const XD=[{level:0,isMaxLevel:!0,edges:[]}];function QD(t,e,n=!1){let i=-1;const a=t.reduce((c,d)=>{const f=Rr(d.zIndex);let p=f?d.zIndex:0;if(n){const y=e.get(d.target),v=e.get(d.source),b=d.selected||y?.selected||v?.selected,E=Math.max(v?.[Dt]?.z||0,y?.[Dt]?.z||0,1e3);p=(f?d.zIndex:0)+(b?E:0)}return c[p]?c[p].push(d):c[p]=[d],i=p>i?p:i,c},{}),l=Object.entries(a).map(([c,d])=>{const f=+c;return{edges:d,level:f,isMaxLevel:f===i}});return l.length===0?XD:l}function WD(t,e,n){const i=Tt(G.useCallback(a=>t?a.edges.filter(l=>{const c=e.get(l.source),d=e.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&KD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return QD(i,e,n)}const ZD=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),JD=({color:t="none",strokeWidth:e=1})=>he.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),bE={[Qa.Arrow]:ZD,[Qa.ArrowClosed]:JD};function e3(t){const e=ln();return G.useMemo(()=>Object.prototype.hasOwnProperty.call(bE,t)?bE[t]:(e.getState().onError?.("009",ts.error009(t)),null),[t])}const t3=({id:t,type:e,color:n,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=e3(e);return f?he.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},he.createElement(f,{color:n,strokeWidth:c})):null},n3=({defaultColor:t,rfId:e})=>n=>{const i=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=s0(c,e);i.includes(d)||(a.push({id:d,color:c.color||t,...c}),i.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},qS=({defaultColor:t,rfId:e})=>{const n=Tt(G.useCallback(n3({defaultColor:t,rfId:e}),[t,e]),(i,a)=>!(i.length!==a.length||i.some((l,c)=>l.id!==a[c].id)));return he.createElement("defs",null,n.map(i=>he.createElement(t3,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};qS.displayName="MarkerDefinitions";var r3=G.memo(qS);const i3=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),$S=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:E,onReconnectEnd:T,reconnectRadius:M,children:N,disableKeyboardA11y:V})=>{const{edgesFocusable:B,edgesUpdatable:$,elementsSelectable:j,width:ne,height:te,connectionMode:O,nodeInternals:R,onError:C}=Tt(i3,Sn),z=WD(e,R,n);return ne?he.createElement(he.Fragment,null,z.map(({level:U,edges:H,isMaxLevel:I})=>he.createElement("svg",{key:U,style:{zIndex:U},width:ne,height:te,className:"react-flow__edges react-flow__container"},I&&he.createElement(r3,{defaultColor:t,rfId:i}),he.createElement("g",null,H.map(P=>{const[K,D,q]=_E(R.get(P.source)),[F,Y,A]=_E(R.get(P.target));if(!q||!A)return null;let W=P.type||"default";a[W]||(C?.("011",ts.error011(W)),W="default");const Z=a[W]||a.default,Q=O===Ws.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),ee=vE(D.source,P.sourceHandle),le=vE(Q,P.targetHandle),ue=ee?.position||Se.Bottom,fe=le?.position||Se.Top,_e=!!(P.focusable||B&&typeof P.focusable>"u"),Ae=P.reconnectable||P.updatable,Re=typeof b<"u"&&(Ae||$&&typeof Ae>"u");if(!ee||!le)return C?.("008",ts.error008(ee,P)),null;const{sourceX:rt,sourceY:it,targetX:Le,targetY:$e}=YD(K,ee,ue,F,le,fe);return he.createElement(Z,{key:P.id,id:P.id,className:Vn([P.className,l]),type:W,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:rt,sourceY:it,targetX:Le,targetY:$e,sourcePosition:ue,targetPosition:fe,elementsSelectable:j,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:p,onClick:y,onEdgeDoubleClick:v,onReconnect:b,onReconnectStart:E,onReconnectEnd:T,reconnectRadius:M,rfId:i,ariaLabel:P.ariaLabel,isFocusable:_e,isReconnectable:Re,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:V})})))),N):null};$S.displayName="EdgeRenderer";var s3=G.memo($S);const a3=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function o3({children:t}){const e=Tt(a3);return he.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function l3(t){const e=Bf(),n=G.useRef(!1);G.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const c3={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top},FS=({nodeId:t,handleType:e,style:n,type:i=Vs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:f,toY:p,connectionMode:y}=Tt(G.useCallback(te=>({fromNode:te.nodeInternals.get(t),handleId:te.connectionHandleId,toX:(te.connectionPosition.x-te.transform[0])/te.transform[2],toY:(te.connectionPosition.y-te.transform[1])/te.transform[2],connectionMode:te.connectionMode}),[t]),Sn),v=c?.[Dt]?.handleBounds;let b=v?.[e];if(y===Ws.Loose&&(b=b||v?.[e==="source"?"target":"source"]),!c||!b)return null;const E=d?b.find(te=>te.id===d):b[0],T=E?E.x+E.width/2:(c.width??0)/2,M=E?E.y+E.height/2:c.height??0,N=(c.positionAbsolute?.x??0)+T,V=(c.positionAbsolute?.y??0)+M,B=E?.position,$=B?c3[B]:null;if(!B||!$)return null;if(a)return he.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:E,fromX:N,fromY:V,toX:f,toY:p,fromPosition:B,toPosition:$,connectionStatus:l});let j="";const ne={sourceX:N,sourceY:V,sourcePosition:B,targetX:f,targetY:p,targetPosition:$};return i===Vs.Bezier?[j]=gS(ne):i===Vs.Step?[j]=i0({...ne,borderRadius:0}):i===Vs.SmoothStep?[j]=i0(ne):i===Vs.SimpleBezier?[j]=fS(ne):j=`M${N},${V} ${f},${p}`,he.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};FS.displayName="ConnectionLine";const u3=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function d3({containerStyle:t,style:e,type:n,component:i}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:f,connectionStatus:p}=Tt(u3,Sn);return!(a&&l&&d&&c)?null:he.createElement("svg",{style:t,width:d,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},he.createElement("g",{className:Vn(["react-flow__connection",p])},he.createElement(FS,{nodeId:a,handleType:l,style:e,type:n,CustomComponent:i,connectionStatus:p})))}function wE(t,e){return G.useRef(null),ln(),G.useMemo(()=>e(t),[t])}const GS=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:f,onEdgeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:E,onSelectionContextMenu:T,onSelectionStart:M,onSelectionEnd:N,connectionLineType:V,connectionLineStyle:B,connectionLineComponent:$,connectionLineContainerStyle:j,selectionKeyCode:ne,selectionOnDrag:te,selectionMode:O,multiSelectionKeyCode:R,panActivationKeyCode:C,zoomActivationKeyCode:z,deleteKeyCode:U,onlyRenderVisibleElements:H,elementsSelectable:I,selectNodesOnDrag:P,defaultViewport:K,translateExtent:D,minZoom:q,maxZoom:F,preventScrolling:Y,defaultMarkerColor:A,zoomOnScroll:W,zoomOnPinch:Z,panOnScroll:Q,panOnScrollSpeed:ee,panOnScrollMode:le,zoomOnDoubleClick:ue,panOnDrag:fe,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Re,onPaneMouseLeave:rt,onPaneScroll:it,onPaneContextMenu:Le,onEdgeContextMenu:$e,onEdgeMouseEnter:Be,onEdgeMouseMove:Ze,onEdgeMouseLeave:ze,onReconnect:we,onReconnectStart:Rt,onReconnectEnd:vn,reconnectRadius:Gt,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,elevateEdgesOnSelect:Nr,disableKeyboardA11y:ot,nodeOrigin:Ye,nodeExtent:zt,rfId:Et})=>{const Gr=wE(t,UD),Ut=wE(e,GD);return l3(l),he.createElement(LD,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Re,onPaneMouseLeave:rt,onPaneContextMenu:Le,onPaneScroll:it,deleteKeyCode:U,selectionKeyCode:ne,selectionOnDrag:te,selectionMode:O,onSelectionStart:M,onSelectionEnd:N,multiSelectionKeyCode:R,panActivationKeyCode:C,zoomActivationKeyCode:z,elementsSelectable:I,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:W,zoomOnPinch:Z,zoomOnDoubleClick:ue,panOnScroll:Q,panOnScrollSpeed:ee,panOnScrollMode:le,panOnDrag:fe,defaultViewport:K,translateExtent:D,minZoom:q,maxZoom:F,onSelectionContextMenu:T,preventScrolling:Y,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,disableKeyboardA11y:ot},he.createElement(o3,null,he.createElement(s3,{edgeTypes:Ut,onEdgeClick:d,onEdgeDoubleClick:p,onlyRenderVisibleElements:H,onEdgeContextMenu:$e,onEdgeMouseEnter:Be,onEdgeMouseMove:Ze,onEdgeMouseLeave:ze,onReconnect:we,onReconnectStart:Rt,onReconnectEnd:vn,reconnectRadius:Gt,defaultMarkerColor:A,noPanClassName:Rn,elevateEdgesOnSelect:!!Nr,disableKeyboardA11y:ot,rfId:Et},he.createElement(d3,{style:B,type:V,component:$,containerStyle:j})),he.createElement("div",{className:"react-flow__edgelabel-renderer"}),he.createElement(HD,{nodeTypes:Gr,onNodeClick:c,onNodeDoubleClick:f,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:b,onNodeContextMenu:E,selectNodesOnDrag:P,onlyRenderVisibleElements:H,noPanClassName:Rn,noDragClassName:Fn,disableKeyboardA11y:ot,nodeOrigin:Ye,nodeExtent:zt,rfId:Et})))};GS.displayName="GraphView";var h3=G.memo(GS);const c0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ds={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:c0,nodeExtent:c0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ws.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:j4,isValidConnection:void 0},f3=()=>JC((t,e)=>({...Ds,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:l}=e();t({nodeInternals:Am(n,i,a,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=e();t({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",l=typeof i<"u",c=a?Am(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:l?i:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:f,nodeOrigin:p}=e(),y=f?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:b}=new window.DOMMatrixReadOnly(v.transform),E=n.reduce((M,N)=>{const V=a.get(N.id);if(V?.hidden)a.set(V.id,{...V,[Dt]:{...V[Dt],handleBounds:void 0}});else if(V){const B=Y0(N.nodeElement);!!(B.width&&B.height&&(V.width!==B.width||V.height!==B.height||N.forceUpdate))&&(a.set(V.id,{...V,[Dt]:{...V[Dt],handleBounds:{source:gE(".source",N.nodeElement,b,p),target:gE(".target",N.nodeElement,b,p)}},...B}),M.push({id:V.id,type:"dimensions",dimensions:B}))}return M},[]);DS(a,p);const T=c||l&&!c&&MS(e,{initial:!0,...d});t({nodeInternals:new Map(a),fitViewOnInitDone:T}),E?.length>0&&i?.(E)},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:l}=e(),c=n.map(d=>{const f={id:d.id,type:"position",dragging:a};return i&&(f.positionAbsolute=d.positionAbsolute,f.position=d.position),f});l(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:f}=e();if(n?.length){if(l){const p=PS(n,d()),y=Am(p,a,c,f);t({nodeInternals:y})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Ps(f,!0)):(c=gl(l(),n),d=gl(a,[])),Eh({changedNodes:c,changedEdges:d,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Ps(f,!0)):(c=gl(a,n),d=gl(l(),[])),Eh({changedNodes:d,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:l}=e(),c=n||l(),d=i||a,f=c.map(y=>(y.selected=!1,Ps(y.id,!1))),p=d.map(y=>Ps(y.id,!1));Eh({changedNodes:f,changedEdges:p,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=e();i?.scaleExtent([n,a]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=e();i?.scaleExtent([a,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=e(),l=i().filter(d=>d.selected).map(d=>Ps(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Ps(d.id,!1));Eh({changedNodes:l,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=e();i.forEach(a=>{a.positionAbsolute=K0(a.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:f}=e();if(!c||!d||!n.x&&!n.y)return!1;const p=$s.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),y=[[0,0],[a,l]],v=c?.constrain()(p,y,f);return c.transform(d,v),i[0]!==v.x||i[1]!==v.y||i[2]!==v.k},cancelConnection:()=>t({connectionNodeId:Ds.connectionNodeId,connectionHandleId:Ds.connectionHandleId,connectionHandleType:Ds.connectionHandleType,connectionStatus:Ds.connectionStatus,connectionStartHandle:Ds.connectionStartHandle,connectionEndHandle:Ds.connectionEndHandle}),reset:()=>t({...Ds})}),Object.is),YS=({children:t})=>{const e=G.useRef(null);return e.current||(e.current=f3()),he.createElement(D4,{value:e.current},t)};YS.displayName="ReactFlowProvider";const KS=({children:t})=>G.useContext(Uf)?he.createElement(he.Fragment,null,t):he.createElement(YS,null,t);KS.displayName="ReactFlowWrapper";const g3={input:TS,default:o0,output:RS,group:ny},p3={default:lf,straight:Z0,step:W0,smoothstep:jf,simplebezier:Q0},m3=[0,0],y3=[15,15],v3={x:0,y:0,zoom:1},_3={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},XS=G.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:l=g3,edgeTypes:c=p3,onNodeClick:d,onEdgeClick:f,onInit:p,onMove:y,onMoveStart:v,onMoveEnd:b,onConnect:E,onConnectStart:T,onConnectEnd:M,onClickConnectStart:N,onClickConnectEnd:V,onNodeMouseEnter:B,onNodeMouseMove:$,onNodeMouseLeave:j,onNodeContextMenu:ne,onNodeDoubleClick:te,onNodeDragStart:O,onNodeDrag:R,onNodeDragStop:C,onNodesDelete:z,onEdgesDelete:U,onSelectionChange:H,onSelectionDragStart:I,onSelectionDrag:P,onSelectionDragStop:K,onSelectionContextMenu:D,onSelectionStart:q,onSelectionEnd:F,connectionMode:Y=Ws.Strict,connectionLineType:A=Vs.Bezier,connectionLineStyle:W,connectionLineComponent:Z,connectionLineContainerStyle:Q,deleteKeyCode:ee="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:ue=!1,selectionMode:fe=Su.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=of()?"Meta":"Control",zoomActivationKeyCode:Re=of()?"Meta":"Control",snapToGrid:rt=!1,snapGrid:it=y3,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:$e=!0,nodesDraggable:Be,nodesConnectable:Ze,nodesFocusable:ze,nodeOrigin:we=m3,edgesFocusable:Rt,edgesUpdatable:vn,elementsSelectable:Gt,defaultViewport:Fn=v3,minZoom:An=.5,maxZoom:Rn=2,translateExtent:Nr=c0,preventScrolling:ot=!0,nodeExtent:Ye,defaultMarkerColor:zt="#b1b1b7",zoomOnScroll:Et=!0,zoomOnPinch:Gr=!0,panOnScroll:Ut=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Cn=Fa.Free,zoomOnDoubleClick:Nn=!0,panOnDrag:en=!0,onPaneClick:cn,onPaneMouseEnter:In,onPaneMouseMove:Si,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,children:ur,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:ca,onEdgeMouseMove:Yr,onEdgeMouseLeave:as,onEdgeUpdate:Kr,onEdgeUpdateStart:uo,onEdgeUpdateEnd:yt,onReconnect:Ot,onReconnectStart:Ct,onReconnectEnd:Ln,reconnectRadius:ua=10,edgeUpdaterRadius:Gl=10,onNodesChange:Xr,onEdgesChange:ho,noDragClassName:Ai="nodrag",noWheelClassName:Qr="nowheel",noPanClassName:hr="nopan",fitView:fr=!1,fitViewOptions:gr,connectOnClick:un=!0,attributionPosition:xt,proOptions:da,defaultEdgeOptions:os,elevateNodesOnSelect:Kn=!0,elevateEdgesOnSelect:kr=!1,disableKeyboardA11y:ha=!1,autoPanOnConnect:fo=!0,autoPanOnNodeDrag:Ri=!0,connectionRadius:go=20,isValidConnection:Wr,onError:pr,style:Yt,id:Zr,nodeDragThreshold:po,...Dr},ls)=>{const Jr=Zr||"1";return he.createElement("div",{...Dr,style:{...Yt,..._3},ref:ls,className:Vn(["react-flow",a]),"data-testid":"rf__wrapper",id:Zr},he.createElement(KS,null,he.createElement(h3,{onInit:p,onMove:y,onMoveStart:v,onMoveEnd:b,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:B,onNodeMouseMove:$,onNodeMouseLeave:j,onNodeContextMenu:ne,onNodeDoubleClick:te,nodeTypes:l,edgeTypes:c,connectionLineType:A,connectionLineStyle:W,connectionLineComponent:Z,connectionLineContainerStyle:Q,selectionKeyCode:le,selectionOnDrag:ue,selectionMode:fe,deleteKeyCode:ee,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Re,onlyRenderVisibleElements:Le,selectNodesOnDrag:$e,defaultViewport:Fn,translateExtent:Nr,minZoom:An,maxZoom:Rn,preventScrolling:ot,zoomOnScroll:Et,zoomOnPinch:Gr,zoomOnDoubleClick:Nn,panOnScroll:Ut,panOnScrollSpeed:Jt,panOnScrollMode:Cn,panOnDrag:en,onPaneClick:cn,onPaneMouseEnter:In,onPaneMouseMove:Si,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,onSelectionContextMenu:D,onSelectionStart:q,onSelectionEnd:F,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:ca,onEdgeMouseMove:Yr,onEdgeMouseLeave:as,onReconnect:Ot??Kr,onReconnectStart:Ct??uo,onReconnectEnd:Ln??yt,reconnectRadius:ua??Gl,defaultMarkerColor:zt,noDragClassName:Ai,noWheelClassName:Qr,noPanClassName:hr,elevateEdgesOnSelect:kr,rfId:Jr,disableKeyboardA11y:ha,nodeOrigin:we,nodeExtent:Ye}),he.createElement(cD,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:E,onConnectStart:T,onConnectEnd:M,onClickConnectStart:N,onClickConnectEnd:V,nodesDraggable:Be,nodesConnectable:Ze,nodesFocusable:ze,edgesFocusable:Rt,edgesUpdatable:vn,elementsSelectable:Gt,elevateNodesOnSelect:Kn,minZoom:An,maxZoom:Rn,nodeExtent:Ye,onNodesChange:Xr,onEdgesChange:ho,snapToGrid:rt,snapGrid:it,connectionMode:Y,translateExtent:Nr,connectOnClick:un,defaultEdgeOptions:os,fitView:fr,fitViewOptions:gr,onNodesDelete:z,onEdgesDelete:U,onNodeDragStart:O,onNodeDrag:R,onNodeDragStop:C,onSelectionDrag:P,onSelectionDragStart:I,onSelectionDragStop:K,noPanClassName:hr,nodeOrigin:we,rfId:Jr,autoPanOnConnect:fo,autoPanOnNodeDrag:Ri,onError:pr,connectionRadius:go,isValidConnection:Wr,nodeDragThreshold:po}),he.createElement(oD,{onSelectionChange:H}),ur,he.createElement(O4,{proOptions:da,position:xt}),he.createElement(gD,{rfId:Jr,disableKeyboardA11y:ha})))});XS.displayName="ReactFlow";function QS(t){return e=>{const[n,i]=G.useState(e),a=G.useCallback(l=>i(c=>t(l,c)),[]);return[n,i,a]}}const b3=QS(PS),w3=QS(CD);function E3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},he.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function x3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},he.createElement("path",{d:"M0 0h32v4.2H0z"}))}function S3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},he.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function T3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function A3(){return he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},he.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const iu=({children:t,className:e,...n})=>he.createElement("button",{type:"button",className:Vn(["react-flow__controls-button",e]),...n},t);iu.displayName="ControlButton";const R3=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),WS=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:p,children:y,position:v="bottom-left"})=>{const b=ln(),[E,T]=G.useState(!1),{isInteractive:M,minZoomReached:N,maxZoomReached:V}=Tt(R3,Sn),{zoomIn:B,zoomOut:$,fitView:j}=Bf();if(G.useEffect(()=>{T(!0)},[]),!E)return null;const ne=()=>{B(),l?.()},te=()=>{$(),c?.()},O=()=>{j(a),d?.()},R=()=>{b.setState({nodesDraggable:!M,nodesConnectable:!M,elementsSelectable:!M}),f?.(!M)};return he.createElement(aS,{className:Vn(["react-flow__controls",p]),position:v,style:t,"data-testid":"rf__controls"},e&&he.createElement(he.Fragment,null,he.createElement(iu,{onClick:ne,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:V},he.createElement(E3,null)),he.createElement(iu,{onClick:te,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:N},he.createElement(x3,null))),n&&he.createElement(iu,{className:"react-flow__controls-fitview",onClick:O,title:"fit view","aria-label":"fit view"},he.createElement(S3,null)),i&&he.createElement(iu,{className:"react-flow__controls-interactive",onClick:R,title:"toggle interactivity","aria-label":"toggle interactivity"},M?he.createElement(A3,null):he.createElement(T3,null)),y)};WS.displayName="Controls";var C3=G.memo(WS),Cr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Cr||(Cr={}));function N3({color:t,dimensions:e,lineWidth:n}){return he.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function I3({color:t,radius:e}){return he.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const k3={[Cr.Dots]:"#91919a",[Cr.Lines]:"#eee",[Cr.Cross]:"#e2e2e2"},D3={[Cr.Dots]:1,[Cr.Lines]:1,[Cr.Cross]:6},M3=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function ZS({id:t,variant:e=Cr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=2,color:c,style:d,className:f}){const p=G.useRef(null),{transform:y,patternId:v}=Tt(M3,Sn),b=c||k3[e],E=i||D3[e],T=e===Cr.Dots,M=e===Cr.Cross,N=Array.isArray(n)?n:[n,n],V=[N[0]*y[2]||1,N[1]*y[2]||1],B=E*y[2],$=M?[B,B]:V,j=T?[B/l,B/l]:[$[0]/l,$[1]/l];return he.createElement("svg",{className:Vn(["react-flow__background",f]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},he.createElement("pattern",{id:v+t,x:y[0]%V[0],y:y[1]%V[1],width:V[0],height:V[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},T?he.createElement(I3,{color:b,radius:B/l}):he.createElement(N3,{dimensions:$,color:b,lineWidth:a})),he.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+t})`}))}ZS.displayName="Background";var O3=G.memo(ZS),$t=function(){return $t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$t.apply(this,arguments)},EE={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},xE={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Sh={width:"20px",height:"20px",position:"absolute",zIndex:1},P3={top:$t($t({},EE),{top:"-5px"}),right:$t($t({},xE),{left:void 0,right:"-5px"}),bottom:$t($t({},EE),{top:void 0,bottom:"-5px"}),left:$t($t({},xE),{left:"-5px"}),topRight:$t($t({},Sh),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:$t($t({},Sh),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:$t($t({},Sh),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:$t($t({},Sh),{left:"-10px",top:"-10px",cursor:"nw-resize"})},V3=G.memo(function(t){var e=t.onResizeStart,n=t.direction,i=t.children,a=t.replaceStyles,l=t.className,c=G.useCallback(function(p){e(p,n)},[e,n]),d=G.useCallback(function(p){e(p,n)},[e,n]),f=G.useMemo(function(){return $t($t({position:"absolute",userSelect:"none"},P3[n]),a??{})},[a,n]);return S.jsx("div",{className:l||void 0,style:f,onMouseDown:c,onTouchStart:d,children:i})}),L3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),hi=function(){return hi=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},hi.apply(this,arguments)},z3={width:"auto",height:"auto"},Th=function(t,e,n){return Math.max(Math.min(t,n),e)},SE=function(t,e,n){var i=Math.round(t/e);return i*e+n*(i-1)},sl=function(t,e){return new RegExp(t,"i").test(e)},Ah=function(t){return!!(t.touches&&t.touches.length)},U3=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},TE=function(t,e,n){n===void 0&&(n=0);var i=e.reduce(function(l,c,d){return Math.abs(c-t)<Math.abs(e[l]-t)?d:l},0),a=Math.abs(e[i]-t);return n===0||a<n?e[i]:t},Im=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},Rh=function(t,e,n,i){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var a=Number(t.replace("%",""))/100;return e*a}if(t.endsWith("vw")){var a=Number(t.replace("vw",""))/100;return n*a}if(t.endsWith("vh")){var a=Number(t.replace("vh",""))/100;return i*a}}return t},j3=function(t,e,n,i,a,l,c){return i=Rh(i,t.width,e,n),a=Rh(a,t.height,e,n),l=Rh(l,t.width,e,n),c=Rh(c,t.height,e,n),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof c>"u"?void 0:Number(c)}},B3=function(t){return Array.isArray(t)?t:[t,t]},H3=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],AE="__resizable_base__",q3=function(t){L3(e,t);function e(n){var i,a,l,c,d=t.call(this,n)||this;return d.ratio=1,d.resizable=null,d.parentLeft=0,d.parentTop=0,d.resizableLeft=0,d.resizableRight=0,d.resizableTop=0,d.resizableBottom=0,d.targetLeft=0,d.targetTop=0,d.delta={width:0,height:0},d.appendBase=function(){if(!d.resizable||!d.window)return null;var f=d.parentNode;if(!f)return null;var p=d.window.document.createElement("div");return p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.transform="scale(0, 0)",p.style.left="0",p.style.flex="0 0 100%",p.classList?p.classList.add(AE):p.className+=AE,f.appendChild(p),p},d.removeBase=function(f){var p=d.parentNode;p&&p.removeChild(f)},d.state={isResizing:!1,width:(a=(i=d.propsSize)===null||i===void 0?void 0:i.width)!==null&&a!==void 0?a:"auto",height:(c=(l=d.propsSize)===null||l===void 0?void 0:l.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},d.onResizeStart=d.onResizeStart.bind(d),d.onMouseMove=d.onMouseMove.bind(d),d.onMouseUp=d.onMouseUp.bind(d),d}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||z3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,i=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,l=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:l,this.resizable.style.position=c}return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,i=this.props.size,a=function(d){var f;if(typeof n.state[d]>"u"||n.state[d]==="auto")return"auto";if(n.propsSize&&n.propsSize[d]&&(!((f=n.propsSize[d])===null||f===void 0)&&f.toString().endsWith("%"))){if(n.state[d].toString().endsWith("%"))return n.state[d].toString();var p=n.getParentSize(),y=Number(n.state[d].toString().replace("px","")),v=y/p[d]*100;return"".concat(v,"%")}return Im(n.state[d])},l=i&&typeof i.width<"u"&&!this.state.isResizing?Im(i.width):a("width"),c=i&&typeof i.height<"u"&&!this.state.isResizing?Im(i.height):a("height");return{width:l,height:c}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var i=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var l={width:n.offsetWidth,height:n.offsetHeight};return i&&(this.parentNode.style.flexWrap=a),this.removeBase(n),l},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,i){var a=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===n&&(typeof a>"u"||a==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,i){var a=this.props.boundsByDirection,l=this.state.direction,c=a&&sl("left",l),d=a&&sl("top",l),f,p;if(this.props.bounds==="parent"){var y=this.parentNode;y&&(f=c?this.resizableRight-this.parentLeft:y.offsetWidth+(this.parentLeft-this.resizableLeft),p=d?this.resizableBottom-this.parentTop:y.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=d?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=d?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(n=n&&n<f?n:f),p&&Number.isFinite(p)&&(i=i&&i<p?i:p),{maxWidth:n,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(n,i){var a=this.props.scale||1,l=B3(this.props.resizeRatio||1),c=l[0],d=l[1],f=this.state,p=f.direction,y=f.original,v=this.props,b=v.lockAspectRatio,E=v.lockAspectRatioExtraHeight,T=v.lockAspectRatioExtraWidth,M=y.width,N=y.height,V=E||0,B=T||0;return sl("right",p)&&(M=y.width+(n-y.x)*c/a,b&&(N=(M-B)/this.ratio+V)),sl("left",p)&&(M=y.width-(n-y.x)*c/a,b&&(N=(M-B)/this.ratio+V)),sl("bottom",p)&&(N=y.height+(i-y.y)*d/a,b&&(M=(N-V)*this.ratio+B)),sl("top",p)&&(N=y.height-(i-y.y)*d/a,b&&(M=(N-V)*this.ratio+B)),{newWidth:M,newHeight:N}},e.prototype.calculateNewSizeFromAspectRatio=function(n,i,a,l){var c=this.props,d=c.lockAspectRatio,f=c.lockAspectRatioExtraHeight,p=c.lockAspectRatioExtraWidth,y=typeof l.width>"u"?10:l.width,v=typeof a.width>"u"||a.width<0?n:a.width,b=typeof l.height>"u"?10:l.height,E=typeof a.height>"u"||a.height<0?i:a.height,T=f||0,M=p||0;if(d){var N=(b-T)*this.ratio+M,V=(E-T)*this.ratio+M,B=(y-M)/this.ratio+T,$=(v-M)/this.ratio+T,j=Math.max(y,N),ne=Math.min(v,V),te=Math.max(b,B),O=Math.min(E,$);n=Th(n,j,ne),i=Th(i,te,O)}else n=Th(n,y,v),i=Th(i,b,E);return{newWidth:n,newHeight:i}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var a=i.getBoundingClientRect();this.parentLeft=a.left*n,this.parentTop=a.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var l=this.props.bounds.getBoundingClientRect();this.targetLeft=l.left*n,this.targetTop=l.top*n}if(this.resizable){var c=this.resizable.getBoundingClientRect(),d=c.left,f=c.top,p=c.right,y=c.bottom;this.resizableLeft=d*n,this.resizableRight=p*n,this.resizableTop=f*n,this.resizableBottom=y*n}},e.prototype.onResizeStart=function(n,i){if(!(!this.resizable||!this.window)){var a=0,l=0;if(n.nativeEvent&&U3(n.nativeEvent)?(a=n.nativeEvent.clientX,l=n.nativeEvent.clientY):n.nativeEvent&&Ah(n.nativeEvent)&&(a=n.nativeEvent.touches[0].clientX,l=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(n,i,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var d,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var p=this.parentNode;if(p){var y=this.window.getComputedStyle(p).flexDirection;this.flexDir=y.startsWith("row")?"row":"column",d=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var v={original:{x:a,y:l,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:hi(hi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:i,flexBasis:d};this.setState(v)}},e.prototype.onMouseMove=function(n){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Ah(n))try{n.preventDefault(),n.stopPropagation()}catch{}var a=this.props,l=a.maxWidth,c=a.maxHeight,d=a.minWidth,f=a.minHeight,p=Ah(n)?n.touches[0].clientX:n.clientX,y=Ah(n)?n.touches[0].clientY:n.clientY,v=this.state,b=v.direction,E=v.original,T=v.width,M=v.height,N=this.getParentSize(),V=j3(N,this.window.innerWidth,this.window.innerHeight,l,c,d,f);l=V.maxWidth,c=V.maxHeight,d=V.minWidth,f=V.minHeight;var B=this.calculateNewSizeFromDirection(p,y),$=B.newHeight,j=B.newWidth,ne=this.calculateNewMaxFromBoundary(l,c);this.props.snap&&this.props.snap.x&&(j=TE(j,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&($=TE($,this.props.snap.y,this.props.snapGap));var te=this.calculateNewSizeFromAspectRatio(j,$,{width:ne.maxWidth,height:ne.maxHeight},{width:d,height:f});if(j=te.newWidth,$=te.newHeight,this.props.grid){var O=SE(j,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),R=SE($,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,z=C===0||Math.abs(O-j)<=C?O:j,U=C===0||Math.abs(R-$)<=C?R:$;j=z,$=U}var H={width:j-E.width,height:$-E.height};if(this.delta=H,T&&typeof T=="string"){if(T.endsWith("%")){var I=j/N.width*100;j="".concat(I,"%")}else if(T.endsWith("vw")){var P=j/this.window.innerWidth*100;j="".concat(P,"vw")}else if(T.endsWith("vh")){var K=j/this.window.innerHeight*100;j="".concat(K,"vh")}}if(M&&typeof M=="string"){if(M.endsWith("%")){var I=$/N.height*100;$="".concat(I,"%")}else if(M.endsWith("vw")){var P=$/this.window.innerWidth*100;$="".concat(P,"vw")}else if(M.endsWith("vh")){var K=$/this.window.innerHeight*100;$="".concat(K,"vh")}}var D={width:this.createSizeForCssProperty(j,"width"),height:this.createSizeForCssProperty($,"height")};this.flexDir==="row"?D.flexBasis=D.width:this.flexDir==="column"&&(D.flexBasis=D.height);var q=this.state.width!==D.width,F=this.state.height!==D.height,Y=this.state.flexBasis!==D.flexBasis,A=q||F||Y;A&&iS.flushSync(function(){i.setState(D)}),this.props.onResize&&A&&this.props.onResize(n,b,this.resizable,H)}},e.prototype.onMouseUp=function(n){var i,a,l=this.state,c=l.isResizing,d=l.direction;l.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,d,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:hi(hi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var i,a;this.setState({width:(i=n.width)!==null&&i!==void 0?i:"auto",height:(a=n.height)!==null&&a!==void 0?a:"auto"})},e.prototype.renderResizer=function(){var n=this,i=this.props,a=i.enable,l=i.handleStyles,c=i.handleClasses,d=i.handleWrapperStyle,f=i.handleWrapperClass,p=i.handleComponent;if(!a)return null;var y=Object.keys(a).map(function(v){return a[v]!==!1?S.jsx(V3,{direction:v,onResizeStart:n.onResizeStart,replaceStyles:l&&l[v],className:c&&c[v],children:p&&p[v]?p[v]:null},v):null});return S.jsx("div",{className:f,style:d,children:y})},e.prototype.render=function(){var n=this,i=Object.keys(this.props).reduce(function(c,d){return H3.indexOf(d)!==-1||(c[d]=n.props[d]),c},{}),a=hi(hi(hi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var l=this.props.as||"div";return S.jsxs(l,hi({style:a,className:this.props.className},i,{ref:function(c){c&&(n.resizable=c)},children:[this.state.isResizing&&S.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(G.PureComponent);const Hf=G.createContext(null);Hf.displayName="PanelGroupContext";const kt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},iy=10,Ka=G.useLayoutEffect,RE=PC.useId,$3=typeof RE=="function"?RE:()=>null;let F3=0;function sy(t=null){const e=$3(),n=G.useRef(t||e||null);return n.current===null&&(n.current=""+F3++),t??n.current}function JS({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:a,forwardedRef:l,id:c,maxSize:d,minSize:f,onCollapse:p,onExpand:y,onResize:v,order:b,style:E,tagName:T="div",...M}){const N=G.useContext(Hf);if(N===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:V,expandPanel:B,getPanelSize:$,getPanelStyle:j,groupId:ne,isPanelCollapsed:te,reevaluatePanelConstraints:O,registerPanel:R,resizePanel:C,unregisterPanel:z}=N,U=sy(c),H=G.useRef({callbacks:{onCollapse:p,onExpand:y,onResize:v},constraints:{collapsedSize:n,collapsible:i,defaultSize:a,maxSize:d,minSize:f},id:U,idIsFromProps:c!==void 0,order:b});G.useRef({didLogMissingDefaultSizeWarning:!1}),Ka(()=>{const{callbacks:P,constraints:K}=H.current,D={...K};H.current.id=U,H.current.idIsFromProps=c!==void 0,H.current.order=b,P.onCollapse=p,P.onExpand=y,P.onResize=v,K.collapsedSize=n,K.collapsible=i,K.defaultSize=a,K.maxSize=d,K.minSize=f,(D.collapsedSize!==K.collapsedSize||D.collapsible!==K.collapsible||D.maxSize!==K.maxSize||D.minSize!==K.minSize)&&O(H.current,D)}),Ka(()=>{const P=H.current;return R(P),()=>{z(P)}},[b,U,R,z]),G.useImperativeHandle(l,()=>({collapse:()=>{V(H.current)},expand:P=>{B(H.current,P)},getId(){return U},getSize(){return $(H.current)},isCollapsed(){return te(H.current)},isExpanded(){return!te(H.current)},resize:P=>{C(H.current,P)}}),[V,B,$,te,U,C]);const I=j(H.current,a);return G.createElement(T,{...M,children:t,className:e,id:U,style:{...I,...E},[kt.groupId]:ne,[kt.panel]:"",[kt.panelCollapsible]:i||void 0,[kt.panelId]:U,[kt.panelSize]:parseFloat(""+I.flexGrow).toFixed(1)})}const u0=G.forwardRef((t,e)=>G.createElement(JS,{...t,forwardedRef:e}));JS.displayName="Panel";u0.displayName="forwardRef(Panel)";let d0=null,Bh=-1,Ls=null;function G3(t,e){if(e){const n=(e&iT)!==0,i=(e&sT)!==0,a=(e&aT)!==0,l=(e&oT)!==0;if(n)return a?"se-resize":l?"ne-resize":"e-resize";if(i)return a?"sw-resize":l?"nw-resize":"w-resize";if(a)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Y3(){Ls!==null&&(document.head.removeChild(Ls),d0=null,Ls=null,Bh=-1)}function km(t,e){var n,i;const a=G3(t,e);if(d0!==a){if(d0=a,Ls===null&&(Ls=document.createElement("style"),document.head.appendChild(Ls)),Bh>=0){var l;(l=Ls.sheet)===null||l===void 0||l.removeRule(Bh)}Bh=(n=(i=Ls.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function eT(t){return t.type==="keydown"}function tT(t){return t.type.startsWith("pointer")}function nT(t){return t.type.startsWith("mouse")}function qf(t){if(tT(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(nT(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function K3(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function X3(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Q3(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:IE(t),b:IE(e)};let i;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),i=t;je(i,"Stacking order can only be calculated for elements with a common ancestor");const a={a:NE(CE(n.a)),b:NE(CE(n.b))};if(a.a===a.b){const l=i.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let d=l.length;for(;d--;){const f=l[d];if(f===c.a)return 1;if(f===c.b)return-1}}return Math.sign(a.a-a.b)}const W3=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Z3(t){var e;const n=getComputedStyle((e=rT(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function J3(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Z3(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||W3.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function CE(t){let e=t.length;for(;e--;){const n=t[e];if(je(n,"Missing node"),J3(n))return n}return null}function NE(t){return t&&Number(getComputedStyle(t).zIndex)||0}function IE(t){const e=[];for(;t;)e.push(t),t=rT(t);return e}function rT(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const iT=1,sT=2,aT=4,oT=8,eM=K3()==="coarse";let Br=[],wl=!1,zs=new Map,$f=new Map;const Au=new Set;function tM(t,e,n,i,a){var l;const{ownerDocument:c}=e,d={direction:n,element:e,hitAreaMargins:i,setResizeHandlerState:a},f=(l=zs.get(c))!==null&&l!==void 0?l:0;return zs.set(c,f+1),Au.add(d),cf(),function(){var y;$f.delete(t),Au.delete(d);const v=(y=zs.get(c))!==null&&y!==void 0?y:1;if(zs.set(c,v-1),cf(),v===1&&zs.delete(c),Br.includes(d)){const b=Br.indexOf(d);b>=0&&Br.splice(b,1),oy(),a("up",!0,null)}}}function nM(t){const{target:e}=t,{x:n,y:i}=qf(t);wl=!0,ay({target:e,x:n,y:i}),cf(),Br.length>0&&(uf("down",t),t.preventDefault(),lT(e)||t.stopImmediatePropagation())}function Dm(t){const{x:e,y:n}=qf(t);if(wl&&t.buttons===0&&(wl=!1,uf("up",t)),!wl){const{target:i}=t;ay({target:i,x:e,y:n})}uf("move",t),oy(),Br.length>0&&t.preventDefault()}function Mm(t){const{target:e}=t,{x:n,y:i}=qf(t);$f.clear(),wl=!1,Br.length>0&&(t.preventDefault(),lT(e)||t.stopImmediatePropagation()),uf("up",t),ay({target:e,x:n,y:i}),oy(),cf()}function lT(t){let e=t;for(;e;){if(e.hasAttribute(kt.resizeHandle))return!0;e=e.parentElement}return!1}function ay({target:t,x:e,y:n}){Br.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),Au.forEach(a=>{const{element:l,hitAreaMargins:c}=a,d=l.getBoundingClientRect(),{bottom:f,left:p,right:y,top:v}=d,b=eM?c.coarse:c.fine;if(e>=p-b&&e<=y+b&&n>=v-b&&n<=f+b){if(i!==null&&document.contains(i)&&l!==i&&!l.contains(i)&&!i.contains(l)&&Q3(i,l)>0){let T=i,M=!1;for(;T&&!T.contains(l);){if(X3(T.getBoundingClientRect(),d)){M=!0;break}T=T.parentElement}if(M)return}Br.push(a)}})}function Om(t,e){$f.set(t,e)}function oy(){let t=!1,e=!1;Br.forEach(i=>{const{direction:a}=i;a==="horizontal"?t=!0:e=!0});let n=0;$f.forEach(i=>{n|=i}),t&&e?km("intersection",n):t?km("horizontal",n):e?km("vertical",n):Y3()}let Pm;function cf(){var t;(t=Pm)===null||t===void 0||t.abort(),Pm=new AbortController;const e={capture:!0,signal:Pm.signal};Au.size&&(wl?(Br.length>0&&zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("contextmenu",Mm,e),a.addEventListener("pointerleave",Dm,e),a.addEventListener("pointermove",Dm,e))}),zs.forEach((n,i)=>{const{body:a}=i;a.addEventListener("pointerup",Mm,e),a.addEventListener("pointercancel",Mm,e)})):zs.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("pointerdown",nM,e),a.addEventListener("pointermove",Dm,e))}))}function uf(t,e){Au.forEach(n=>{const{setResizeHandlerState:i}=n,a=Br.includes(n);i(t,a,e)})}function rM(){const[t,e]=G.useState(0);return G.useCallback(()=>e(n=>n+1),[])}function je(t,e){if(!t)throw console.error(e),Error(e)}function Wa(t,e,n=iy){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Xi(t,e,n=iy){return Wa(t,e,n)===0}function rr(t,e,n){return Wa(t,e,n)===0}function iM(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const a=t[i],l=e[i];if(!rr(a,l,n))return!1}return!0}function pl({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];je(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:l,maxSize:c=100,minSize:d=0}=i;if(Wa(n,d)<0)if(l){const f=(a+d)/2;Wa(n,f)<0?n=a:n=d}else n=d;return n=Math.min(c,n),n=parseFloat(n.toFixed(iy)),n}function su({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:a,trigger:l}){if(rr(t,0))return e;const c=[...e],[d,f]=i;je(d!=null,"Invalid first pivot index"),je(f!=null,"Invalid second pivot index");let p=0;if(l==="keyboard"){{const v=t<0?f:d,b=n[v];je(b,`Panel constraints not found for index ${v}`);const{collapsedSize:E=0,collapsible:T,minSize:M=0}=b;if(T){const N=e[v];if(je(N!=null,`Previous layout not found for panel index ${v}`),rr(N,E)){const V=M-N;Wa(V,Math.abs(t))>0&&(t=t<0?0-V:V)}}}{const v=t<0?d:f,b=n[v];je(b,`No panel constraints found for index ${v}`);const{collapsedSize:E=0,collapsible:T,minSize:M=0}=b;if(T){const N=e[v];if(je(N!=null,`Previous layout not found for panel index ${v}`),rr(N,M)){const V=N-E;Wa(V,Math.abs(t))>0&&(t=t<0?0-V:V)}}}}{const v=t<0?1:-1;let b=t<0?f:d,E=0;for(;;){const M=e[b];je(M!=null,`Previous layout not found for panel index ${b}`);const V=pl({panelConstraints:n,panelIndex:b,size:100})-M;if(E+=V,b+=v,b<0||b>=n.length)break}const T=Math.min(Math.abs(t),Math.abs(E));t=t<0?0-T:T}{let b=t<0?d:f;for(;b>=0&&b<n.length;){const E=Math.abs(t)-Math.abs(p),T=e[b];je(T!=null,`Previous layout not found for panel index ${b}`);const M=T-E,N=pl({panelConstraints:n,panelIndex:b,size:M});if(!rr(T,N)&&(p+=T-N,c[b]=N,p.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(iM(a,c))return a;{const v=t<0?f:d,b=e[v];je(b!=null,`Previous layout not found for panel index ${v}`);const E=b+p,T=pl({panelConstraints:n,panelIndex:v,size:E});if(c[v]=T,!rr(T,E)){let M=E-T,V=t<0?f:d;for(;V>=0&&V<n.length;){const B=c[V];je(B!=null,`Previous layout not found for panel index ${V}`);const $=B+M,j=pl({panelConstraints:n,panelIndex:V,size:$});if(rr(B,j)||(M-=j-B,c[V]=j),rr(M,0))break;t>0?V--:V++}}}const y=c.reduce((v,b)=>b+v,0);return rr(y,100)?c:a}function sM({layout:t,panelsArray:e,pivotIndices:n}){let i=0,a=100,l=0,c=0;const d=n[0];je(d!=null,"No pivot index found"),e.forEach((v,b)=>{const{constraints:E}=v,{maxSize:T=100,minSize:M=0}=E;b===d?(i=M,a=T):(l+=M,c+=T)});const f=Math.min(a,100-l),p=Math.max(i,100-c),y=t[d];return{valueMax:f,valueMin:p,valueNow:y}}function Ru(t,e=document){return Array.from(e.querySelectorAll(`[${kt.resizeHandleId}][data-panel-group-id="${t}"]`))}function cT(t,e,n=document){const a=Ru(t,n).findIndex(l=>l.getAttribute(kt.resizeHandleId)===e);return a??null}function uT(t,e,n){const i=cT(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function aM(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function dT(t,e=document){if(aM(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Ff(t,e=document){const n=e.querySelector(`[${kt.resizeHandleId}="${t}"]`);return n||null}function oM(t,e,n,i=document){var a,l,c,d;const f=Ff(e,i),p=Ru(t,i),y=f?p.indexOf(f):-1,v=(a=(l=n[y])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null,b=(c=(d=n[y+1])===null||d===void 0?void 0:d.id)!==null&&c!==void 0?c:null;return[v,b]}function lM({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:a,panelGroupElement:l,setLayout:c}){G.useRef({didWarnAboutMissingResizeHandle:!1}),Ka(()=>{if(!l)return;const d=Ru(n,l);for(let f=0;f<a.length-1;f++){const{valueMax:p,valueMin:y,valueNow:v}=sM({layout:i,panelsArray:a,pivotIndices:[f,f+1]}),b=d[f];if(b!=null){const E=a[f];je(E,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",E.id),b.setAttribute("aria-valuemax",""+Math.round(p)),b.setAttribute("aria-valuemin",""+Math.round(y)),b.setAttribute("aria-valuenow",v!=null?""+Math.round(v):"")}}return()=>{d.forEach((f,p)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,i,a,l]),G.useEffect(()=>{if(!l)return;const d=e.current;je(d,"Eager values not found");const{panelDataArray:f}=d,p=dT(n,l);je(p!=null,`No group found for id "${n}"`);const y=Ru(n,l);je(y,`No resize handles found for group id "${n}"`);const v=y.map(b=>{const E=b.getAttribute(kt.resizeHandleId);je(E,"Resize handle element has no handle id attribute");const[T,M]=oM(n,E,f,l);if(T==null||M==null)return()=>{};const N=V=>{if(!V.defaultPrevented)switch(V.key){case"Enter":{V.preventDefault();const B=f.findIndex($=>$.id===T);if(B>=0){const $=f[B];je($,`No panel data found for index ${B}`);const j=i[B],{collapsedSize:ne=0,collapsible:te,minSize:O=0}=$.constraints;if(j!=null&&te){const R=su({delta:rr(j,ne)?O-ne:ne-j,initialLayout:i,panelConstraints:f.map(C=>C.constraints),pivotIndices:uT(n,E,l),prevLayout:i,trigger:"keyboard"});i!==R&&c(R)}}break}}};return b.addEventListener("keydown",N),()=>{b.removeEventListener("keydown",N)}});return()=>{v.forEach(b=>b())}},[l,t,e,n,i,a,c])}function kE(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function hT(t,e){const n=t==="horizontal",{x:i,y:a}=qf(e);return n?i:a}function cM(t,e,n,i,a){const l=n==="horizontal",c=Ff(e,a);je(c,`No resize handle element found for id "${e}"`);const d=c.getAttribute(kt.groupId);je(d,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=i;const p=hT(n,t),y=dT(d,a);je(y,`No group element found for id "${d}"`);const v=y.getBoundingClientRect(),b=l?v.width:v.height;return(p-f)/b*100}function uM(t,e,n,i,a,l){if(eT(t)){const c=n==="horizontal";let d=0;t.shiftKey?d=100:a!=null?d=a:d=10;let f=0;switch(t.key){case"ArrowDown":f=c?0:d;break;case"ArrowLeft":f=c?-d:0;break;case"ArrowRight":f=c?d:0;break;case"ArrowUp":f=c?0:-d;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return i==null?0:cM(t,e,n,i,l)}function dM({panelDataArray:t}){const e=Array(t.length),n=t.map(l=>l.constraints);let i=0,a=100;for(let l=0;l<t.length;l++){const c=n[l];je(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;d!=null&&(i++,e[l]=d,a-=d)}for(let l=0;l<t.length;l++){const c=n[l];je(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;if(d!=null)continue;const f=t.length-i,p=a/f;i++,e[l]=p,a-=p}return e}function al(t,e,n){e.forEach((i,a)=>{const l=t[a];je(l,`Panel data not found for index ${a}`);const{callbacks:c,constraints:d,id:f}=l,{collapsedSize:p=0,collapsible:y}=d,v=n[f];if(v==null||i!==v){n[f]=i;const{onCollapse:b,onExpand:E,onResize:T}=c;T&&T(i,v),y&&(b||E)&&(E&&(v==null||Xi(v,p))&&!Xi(i,p)&&E(),b&&(v==null||!Xi(v,p))&&Xi(i,p)&&b())}})}function Ch(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function hM({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:a,precision:l=3}){const c=n[a];let d;return c==null?d=t!=null?t.toPrecision(l):"1":i.length===1?d="1":d=c.toPrecision(l),{flexBasis:0,flexGrow:d,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function fM(t,e=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...a)},e)}}function DE(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function fT(t){return`react-resizable-panels:${t}`}function gT(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:a,order:l}=e;return a?i:l?`${l}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function pT(t,e){try{const n=fT(t),i=e.getItem(n);if(i){const a=JSON.parse(i);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function gM(t,e,n){var i,a;const l=(i=pT(t,n))!==null&&i!==void 0?i:{},c=gT(e);return(a=l[c])!==null&&a!==void 0?a:null}function pM(t,e,n,i,a){var l;const c=fT(t),d=gT(e),f=(l=pT(t,a))!==null&&l!==void 0?l:{};f[d]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{a.setItem(c,JSON.stringify(f))}catch(p){console.error(p)}}function ME({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((l,c)=>l+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!rr(i,100)&&n.length>0)for(let l=0;l<e.length;l++){const c=n[l];je(c!=null,`No layout data found for index ${l}`);const d=100/i*c;n[l]=d}let a=0;for(let l=0;l<e.length;l++){const c=n[l];je(c!=null,`No layout data found for index ${l}`);const d=pl({panelConstraints:e,panelIndex:l,size:c});c!=d&&(a+=c-d,n[l]=d)}if(!rr(a,0))for(let l=0;l<e.length;l++){const c=n[l];je(c!=null,`No layout data found for index ${l}`);const d=c+a,f=pl({panelConstraints:e,panelIndex:l,size:d});if(c!==f&&(a-=f-c,n[l]=f,rr(a,0)))break}return n}const mM=100,au={getItem:t=>(DE(au),au.getItem(t)),setItem:(t,e)=>{DE(au),au.setItem(t,e)}},OE={};function mT({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:a,id:l=null,onLayout:c=null,keyboardResizeBy:d=null,storage:f=au,style:p,tagName:y="div",...v}){const b=sy(l),E=G.useRef(null),[T,M]=G.useState(null),[N,V]=G.useState([]),B=rM(),$=G.useRef({}),j=G.useRef(new Map),ne=G.useRef(0),te=G.useRef({autoSaveId:t,direction:i,dragState:T,id:b,keyboardResizeBy:d,onLayout:c,storage:f}),O=G.useRef({layout:N,panelDataArray:[],panelDataArrayChanged:!1});G.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),G.useImperativeHandle(a,()=>({getId:()=>te.current.id,getLayout:()=>{const{layout:Q}=O.current;return Q},setLayout:Q=>{const{onLayout:ee}=te.current,{layout:le,panelDataArray:ue}=O.current,fe=ME({layout:Q,panelConstraints:ue.map(_e=>_e.constraints)});kE(le,fe)||(V(fe),O.current.layout=fe,ee&&ee(fe),al(ue,fe,$.current))}}),[]),Ka(()=>{te.current.autoSaveId=t,te.current.direction=i,te.current.dragState=T,te.current.id=b,te.current.onLayout=c,te.current.storage=f}),lM({committedValuesRef:te,eagerValuesRef:O,groupId:b,layout:N,panelDataArray:O.current.panelDataArray,setLayout:V,panelGroupElement:E.current}),G.useEffect(()=>{const{panelDataArray:Q}=O.current;if(t){if(N.length===0||N.length!==Q.length)return;let ee=OE[t];ee==null&&(ee=fM(pM,mM),OE[t]=ee);const le=[...Q],ue=new Map(j.current);ee(t,le,ue,N,f)}},[t,N,f]),G.useEffect(()=>{});const R=G.useCallback(Q=>{const{onLayout:ee}=te.current,{layout:le,panelDataArray:ue}=O.current;if(Q.constraints.collapsible){const fe=ue.map(rt=>rt.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Re}=Ua(ue,Q,le);if(je(Ae!=null,`Panel size not found for panel "${Q.id}"`),!Xi(Ae,_e)){j.current.set(Q.id,Ae);const it=cl(ue,Q)===ue.length-1?Ae-_e:_e-Ae,Le=su({delta:it,initialLayout:le,panelConstraints:fe,pivotIndices:Re,prevLayout:le,trigger:"imperative-api"});Ch(le,Le)||(V(Le),O.current.layout=Le,ee&&ee(Le),al(ue,Le,$.current))}}},[]),C=G.useCallback((Q,ee)=>{const{onLayout:le}=te.current,{layout:ue,panelDataArray:fe}=O.current;if(Q.constraints.collapsible){const _e=fe.map($e=>$e.constraints),{collapsedSize:Ae=0,panelSize:Re=0,minSize:rt=0,pivotIndices:it}=Ua(fe,Q,ue),Le=ee??rt;if(Xi(Re,Ae)){const $e=j.current.get(Q.id),Be=$e!=null&&$e>=Le?$e:Le,ze=cl(fe,Q)===fe.length-1?Re-Be:Be-Re,we=su({delta:ze,initialLayout:ue,panelConstraints:_e,pivotIndices:it,prevLayout:ue,trigger:"imperative-api"});Ch(ue,we)||(V(we),O.current.layout=we,le&&le(we),al(fe,we,$.current))}}},[]),z=G.useCallback(Q=>{const{layout:ee,panelDataArray:le}=O.current,{panelSize:ue}=Ua(le,Q,ee);return je(ue!=null,`Panel size not found for panel "${Q.id}"`),ue},[]),U=G.useCallback((Q,ee)=>{const{panelDataArray:le}=O.current,ue=cl(le,Q);return hM({defaultSize:ee,dragState:T,layout:N,panelData:le,panelIndex:ue})},[T,N]),H=G.useCallback(Q=>{const{layout:ee,panelDataArray:le}=O.current,{collapsedSize:ue=0,collapsible:fe,panelSize:_e}=Ua(le,Q,ee);return je(_e!=null,`Panel size not found for panel "${Q.id}"`),fe===!0&&Xi(_e,ue)},[]),I=G.useCallback(Q=>{const{layout:ee,panelDataArray:le}=O.current,{collapsedSize:ue=0,collapsible:fe,panelSize:_e}=Ua(le,Q,ee);return je(_e!=null,`Panel size not found for panel "${Q.id}"`),!fe||Wa(_e,ue)>0},[]),P=G.useCallback(Q=>{const{panelDataArray:ee}=O.current;ee.push(Q),ee.sort((le,ue)=>{const fe=le.order,_e=ue.order;return fe==null&&_e==null?0:fe==null?-1:_e==null?1:fe-_e}),O.current.panelDataArrayChanged=!0,B()},[B]);Ka(()=>{if(O.current.panelDataArrayChanged){O.current.panelDataArrayChanged=!1;const{autoSaveId:Q,onLayout:ee,storage:le}=te.current,{layout:ue,panelDataArray:fe}=O.current;let _e=null;if(Q){const Re=gM(Q,fe,le);Re&&(j.current=new Map(Object.entries(Re.expandToSizes)),_e=Re.layout)}_e==null&&(_e=dM({panelDataArray:fe}));const Ae=ME({layout:_e,panelConstraints:fe.map(Re=>Re.constraints)});kE(ue,Ae)||(V(Ae),O.current.layout=Ae,ee&&ee(Ae),al(fe,Ae,$.current))}}),Ka(()=>{const Q=O.current;return()=>{Q.layout=[]}},[]);const K=G.useCallback(Q=>{let ee=!1;const le=E.current;return le&&window.getComputedStyle(le,null).getPropertyValue("direction")==="rtl"&&(ee=!0),function(fe){fe.preventDefault();const _e=E.current;if(!_e)return()=>null;const{direction:Ae,dragState:Re,id:rt,keyboardResizeBy:it,onLayout:Le}=te.current,{layout:$e,panelDataArray:Be}=O.current,{initialLayout:Ze}=Re??{},ze=uT(rt,Q,_e);let we=uM(fe,Q,Ae,Re,it,_e);const Rt=Ae==="horizontal";Rt&&ee&&(we=-we);const vn=Be.map(An=>An.constraints),Gt=su({delta:we,initialLayout:Ze??$e,panelConstraints:vn,pivotIndices:ze,prevLayout:$e,trigger:eT(fe)?"keyboard":"mouse-or-touch"}),Fn=!Ch($e,Gt);(tT(fe)||nT(fe))&&ne.current!=we&&(ne.current=we,!Fn&&we!==0?Rt?Om(Q,we<0?iT:sT):Om(Q,we<0?aT:oT):Om(Q,0)),Fn&&(V(Gt),O.current.layout=Gt,Le&&Le(Gt),al(Be,Gt,$.current))}},[]),D=G.useCallback((Q,ee)=>{const{onLayout:le}=te.current,{layout:ue,panelDataArray:fe}=O.current,_e=fe.map($e=>$e.constraints),{panelSize:Ae,pivotIndices:Re}=Ua(fe,Q,ue);je(Ae!=null,`Panel size not found for panel "${Q.id}"`);const it=cl(fe,Q)===fe.length-1?Ae-ee:ee-Ae,Le=su({delta:it,initialLayout:ue,panelConstraints:_e,pivotIndices:Re,prevLayout:ue,trigger:"imperative-api"});Ch(ue,Le)||(V(Le),O.current.layout=Le,le&&le(Le),al(fe,Le,$.current))},[]),q=G.useCallback((Q,ee)=>{const{layout:le,panelDataArray:ue}=O.current,{collapsedSize:fe=0,collapsible:_e}=ee,{collapsedSize:Ae=0,collapsible:Re,maxSize:rt=100,minSize:it=0}=Q.constraints,{panelSize:Le}=Ua(ue,Q,le);Le!=null&&(_e&&Re&&Xi(Le,fe)?Xi(fe,Ae)||D(Q,Ae):Le<it?D(Q,it):Le>rt&&D(Q,rt))},[D]),F=G.useCallback((Q,ee)=>{const{direction:le}=te.current,{layout:ue}=O.current;if(!E.current)return;const fe=Ff(Q,E.current);je(fe,`Drag handle element not found for id "${Q}"`);const _e=hT(le,ee);M({dragHandleId:Q,dragHandleRect:fe.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:ue})},[]),Y=G.useCallback(()=>{M(null)},[]),A=G.useCallback(Q=>{const{panelDataArray:ee}=O.current,le=cl(ee,Q);le>=0&&(ee.splice(le,1),delete $.current[Q.id],O.current.panelDataArrayChanged=!0,B())},[B]),W=G.useMemo(()=>({collapsePanel:R,direction:i,dragState:T,expandPanel:C,getPanelSize:z,getPanelStyle:U,groupId:b,isPanelCollapsed:H,isPanelExpanded:I,reevaluatePanelConstraints:q,registerPanel:P,registerResizeHandle:K,resizePanel:D,startDragging:F,stopDragging:Y,unregisterPanel:A,panelGroupElement:E.current}),[R,T,i,C,z,U,b,H,I,q,P,K,D,F,Y,A]),Z={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return G.createElement(Hf.Provider,{value:W},G.createElement(y,{...v,children:e,className:n,id:l,ref:E,style:{...Z,...p},[kt.group]:"",[kt.groupDirection]:i,[kt.groupId]:b}))}const yT=G.forwardRef((t,e)=>G.createElement(mT,{...t,forwardedRef:e}));mT.displayName="PanelGroup";yT.displayName="forwardRef(PanelGroup)";function cl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Ua(t,e,n){const i=cl(t,e),l=i===t.length-1?[i-1,i]:[i,i+1],c=n[i];return{...e.constraints,panelSize:c,pivotIndices:l}}function yM({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){G.useEffect(()=>{if(t||n==null||i==null)return;const a=Ff(e,i);if(a==null)return;const l=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const d=a.getAttribute(kt.groupId);je(d,`No group element found for id "${d}"`);const f=Ru(d,i),p=cT(d,e,i);je(p!==null,`No resize element found for id "${e}"`);const y=c.shiftKey?p>0?p-1:f.length-1:p+1<f.length?p+1:0;f[y].focus();break}}};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[i,t,e,n])}function vT({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:i,id:a,onBlur:l,onClick:c,onDragging:d,onFocus:f,onPointerDown:p,onPointerUp:y,style:v={},tabIndex:b=0,tagName:E="div",...T}){var M,N;const V=G.useRef(null),B=G.useRef({onClick:c,onDragging:d,onPointerDown:p,onPointerUp:y});G.useEffect(()=>{B.current.onClick=c,B.current.onDragging=d,B.current.onPointerDown=p,B.current.onPointerUp=y});const $=G.useContext(Hf);if($===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:ne,registerResizeHandle:te,startDragging:O,stopDragging:R,panelGroupElement:C}=$,z=sy(a),[U,H]=G.useState("inactive"),[I,P]=G.useState(!1),[K,D]=G.useState(null),q=G.useRef({state:U});Ka(()=>{q.current.state=U}),G.useEffect(()=>{if(n)D(null);else{const W=te(z);D(()=>W)}},[n,z,te]);const F=(M=i?.coarse)!==null&&M!==void 0?M:15,Y=(N=i?.fine)!==null&&N!==void 0?N:5;G.useEffect(()=>{if(n||K==null)return;const W=V.current;je(W,"Element ref not attached");let Z=!1;return tM(z,W,j,{coarse:F,fine:Y},(ee,le,ue)=>{if(!le){H("inactive");return}switch(ee){case"down":{H("drag"),Z=!1,je(ue,'Expected event to be defined for "down" action'),O(z,ue);const{onDragging:fe,onPointerDown:_e}=B.current;fe?.(!0),_e?.();break}case"move":{const{state:fe}=q.current;Z=!0,fe!=="drag"&&H("hover"),je(ue,'Expected event to be defined for "move" action'),K(ue);break}case"up":{H("hover"),R();const{onClick:fe,onDragging:_e,onPointerUp:Ae}=B.current;_e?.(!1),Ae?.(),Z||fe?.();break}}})},[F,j,n,Y,te,z,K,O,R]),yM({disabled:n,handleId:z,resizeHandler:K,panelGroupElement:C});const A={touchAction:"none",userSelect:"none"};return G.createElement(E,{...T,children:t,className:e,id:a,onBlur:()=>{P(!1),l?.()},onFocus:()=>{P(!0),f?.()},ref:V,role:"separator",style:{...A,...v},tabIndex:b,[kt.groupDirection]:j,[kt.groupId]:ne,[kt.resizeHandle]:"",[kt.resizeHandleActive]:U==="drag"?"pointer":I?"keyboard":void 0,[kt.resizeHandleEnabled]:!n,[kt.resizeHandleId]:z,[kt.resizeHandleState]:U})}vT.displayName="PanelResizeHandle";const _T=t=>{const e=[],n=t.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim()})});else{const a=n[i].trim();a.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:a})})}return e},PE=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},vM=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return(e*299+n*587+i*114)/1e3>=128?"#000000":"#ffffff"},Hh=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.slice(1):t,i=parseInt(n.slice(0,2),16),a=parseInt(n.slice(2,4),16),l=parseInt(n.slice(4,6),16);const c=f=>Math.max(0,Math.min(255,f)),d=1-e;return i=c(Math.round(i*d)),a=c(Math.round(a*d)),l=c(Math.round(l*d)),`#${[i,a,l].map(f=>f.toString(16).padStart(2,"0")).join("")}`},_M=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,i+(Math.random()-.5)*l*2)),f=Math.min(255,Math.max(0,a+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},bM=t=>{const i=(Math.random()-.5)*150*2;return{x:t.x+i,y:t.y+200}},wM=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,EM=(t,e)=>`edge_${t}_${e}`,xM=(t,e,n,i,a,l,c)=>({id:wM(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:i,full_text:n,suggestions:[],myColor:a,tokenColors:{},previousNode:c}}),SM=(t,e,n,i)=>({id:EM(t,e),source:t,target:e,sourceHandle:i,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Qa.ArrowClosed,color:n}}),TM=()=>{};var VE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},AM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],d=t[n++],f=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},wT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,d=c?t[a+1]:0,f=a+2<t.length,p=f?t[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,E=p&63;f||(E=64,c||(b=64)),i.push(n[y],n[v],n[b],n[E])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const v=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||d==null||p==null||v==null)throw new RM;const b=l<<2|d>>4;if(i.push(b),p!==64){const E=d<<4&240|p>>2;if(i.push(E),v!==64){const T=p<<6&192|v;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CM=function(t){const e=bT(t);return wT.encodeByteArray(e,!0)},df=function(t){return CM(t).replace(/\./g,"")},ET=function(t){try{return wT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=()=>NM().__FIREBASE_DEFAULTS__,kM=()=>{if(typeof process>"u"||typeof VE>"u")return;const t=VE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ET(t[1]);return e&&JSON.parse(e)},Gf=()=>{try{return TM()||IM()||kM()||DM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xT=t=>{var e,n;return(n=(e=Gf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ST=t=>{const e=xT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},TT=()=>{var t;return(t=Gf())===null||t===void 0?void 0:t.config},AT=t=>{var e;return(e=Gf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){return t.endsWith(".cloudworkstations.dev")}async function ly(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[df(JSON.stringify(n)),df(JSON.stringify(c)),""].join(".")}const hu={};function PM(){const t={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?t.emulator.push(e):t.prod.push(e);return t}function VM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let LE=!1;function cy(t,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||hu[t]===e||hu[t]||LE)return;hu[t]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=PM().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,E){b.setAttribute("width","24"),b.setAttribute("id",E),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{LE=!0,c()},b}function y(b,E){b.setAttribute("id",E),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=VM(i),E=n("text"),T=document.getElementById(E)||document.createElement("span"),M=n("learnmore"),N=document.getElementById(M)||document.createElement("a"),V=n("preprendIcon"),B=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const $=b.element;d($),y(N,M);const j=p();f(B,V),$.append(B,T,N,j),document.body.appendChild($)}l?(T.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function zM(){var t;const e=(t=Gf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HM(){const t=Tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qM(){return!zM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $M(){try{return typeof indexedDB=="object"}catch{return!1}}function FM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="FirebaseError";class xi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=GM,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hu.prototype.create)}}class Hu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?YM(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new xi(a,d,i)}}function YM(t,e){return t.replace(KM,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const KM=/\{\$([^}]+)}/g;function XM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Za(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],c=e[a];if(zE(l)&&zE(c)){if(!Za(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function zE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ou(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function lu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QM(t,e){const n=new WM(t,e);return n.subscribe.bind(n)}class WM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");ZM(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=Vm),a.error===void 0&&(a.error=Vm),a.complete===void 0&&(a.complete=Vm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new MM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tO(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:eO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eO(t){return t===Ha?void 0:t}function tO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const rO={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},iO=Qe.INFO,sO={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},aO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=sO[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uy{constructor(e){this.name=e,this._logLevel=iO,this._logHandler=aO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const oO=(t,e)=>e.some(n=>t instanceof n);let UE,jE;function lO(){return UE||(UE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cO(){return jE||(jE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RT=new WeakMap,h0=new WeakMap,CT=new WeakMap,Lm=new WeakMap,dy=new WeakMap;function uO(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Gs(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&RT.set(n,t)}).catch(()=>{}),dy.set(e,t),e}function dO(t){if(h0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});h0.set(t,e)}let f0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return h0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hO(t){f0=t(f0)}function fO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(zm(this),e,...n);return CT.set(i,e.sort?e.sort():[e]),Gs(i)}:cO().includes(t)?function(...e){return t.apply(zm(this),e),Gs(RT.get(this))}:function(...e){return Gs(t.apply(zm(this),e))}}function gO(t){return typeof t=="function"?fO(t):(t instanceof IDBTransaction&&dO(t),oO(t,lO())?new Proxy(t,f0):t)}function Gs(t){if(t instanceof IDBRequest)return uO(t);if(Lm.has(t))return Lm.get(t);const e=gO(t);return e!==t&&(Lm.set(t,e),dy.set(e,t)),e}const zm=t=>dy.get(t);function pO(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),d=Gs(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Gs(c.result),f.oldVersion,f.newVersion,Gs(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const mO=["get","getKey","getAll","getAllKeys","count"],yO=["put","add","delete","clear"],Um=new Map;function BE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Um.get(e))return Um.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=yO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||mO.includes(n)))return;const l=async function(c,...d){const f=this.transaction(c,a?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),a&&f.done]))[0]};return Um.set(e,l),l}hO(t=>({...t,get:(e,n,i)=>BE(e,n)||t.get(e,n,i),has:(e,n)=>!!BE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_O(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function _O(t){const e=t.getComponent();return e?.type==="VERSION"}const g0="@firebase/app",HE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new uy("@firebase/app"),bO="@firebase/app-compat",wO="@firebase/analytics-compat",EO="@firebase/analytics",xO="@firebase/app-check-compat",SO="@firebase/app-check",TO="@firebase/auth",AO="@firebase/auth-compat",RO="@firebase/database",CO="@firebase/data-connect",NO="@firebase/database-compat",IO="@firebase/functions",kO="@firebase/functions-compat",DO="@firebase/installations",MO="@firebase/installations-compat",OO="@firebase/messaging",PO="@firebase/messaging-compat",VO="@firebase/performance",LO="@firebase/performance-compat",zO="@firebase/remote-config",UO="@firebase/remote-config-compat",jO="@firebase/storage",BO="@firebase/storage-compat",HO="@firebase/firestore",qO="@firebase/ai",$O="@firebase/firestore-compat",FO="firebase",GO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="[DEFAULT]",YO={[g0]:"fire-core",[bO]:"fire-core-compat",[EO]:"fire-analytics",[wO]:"fire-analytics-compat",[SO]:"fire-app-check",[xO]:"fire-app-check-compat",[TO]:"fire-auth",[AO]:"fire-auth-compat",[RO]:"fire-rtdb",[CO]:"fire-data-connect",[NO]:"fire-rtdb-compat",[IO]:"fire-fn",[kO]:"fire-fn-compat",[DO]:"fire-iid",[MO]:"fire-iid-compat",[OO]:"fire-fcm",[PO]:"fire-fcm-compat",[VO]:"fire-perf",[LO]:"fire-perf-compat",[zO]:"fire-rc",[UO]:"fire-rc-compat",[jO]:"fire-gcs",[BO]:"fire-gcs-compat",[HO]:"fire-fst",[$O]:"fire-fst-compat",[qO]:"fire-vertex","fire-js":"fire-js",[FO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Map,KO=new Map,m0=new Map;function qE(t,e){try{t.container.addComponent(e)}catch(n){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ja(t){const e=t.name;if(m0.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;m0.set(e,t);for(const n of hf.values())qE(n,t);for(const n of KO.values())qE(n,t);return!0}function Yf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new Hu("app","Firebase",XO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=GO;function NT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:p0,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Ys.create("bad-app-name",{appName:String(a)});if(n||(n=TT()),!n)throw Ys.create("no-options");const l=hf.get(a);if(l){if(Za(n,l.options)&&Za(i,l.config))return l;throw Ys.create("duplicate-app",{appName:a})}const c=new nO(a);for(const f of m0.values())c.addComponent(f);const d=new QO(n,i,c);return hf.set(a,d),d}function hy(t=p0){const e=hf.get(t);if(!e&&t===p0&&TT())return NT();if(!e)throw Ys.create("no-app",{appName:t});return e}function mi(t,e,n){var i;let a=(i=YO[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(d.join(" "));return}Ja(new Zs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="firebase-heartbeat-database",ZO=1,Cu="firebase-heartbeat-store";let jm=null;function IT(){return jm||(jm=pO(WO,ZO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ys.create("idb-open",{originalErrorMessage:t.message})})),jm}async function JO(t){try{const n=(await IT()).transaction(Cu),i=await n.objectStore(Cu).get(kT(t));return await n.done,i}catch(e){if(e instanceof xi)ns.warn(e.message);else{const n=Ys.create("idb-get",{originalErrorMessage:e?.message});ns.warn(n.message)}}}async function $E(t,e){try{const i=(await IT()).transaction(Cu,"readwrite");await i.objectStore(Cu).put(e,kT(t)),await i.done}catch(n){if(n instanceof xi)ns.warn(n.message);else{const i=Ys.create("idb-set",{originalErrorMessage:n?.message});ns.warn(i.message)}}}function kT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=1024,t6=30;class n6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new i6(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=FE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>t6){const c=s6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ns.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=FE(),{heartbeatsToSend:i,unsentEntries:a}=r6(this._heartbeatsCache.heartbeats),l=df(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ns.warn(n),""}}}function FE(){return new Date().toISOString().substring(0,10)}function r6(t,e=e6){const n=[];let i=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),GE(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),GE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class i6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $M()?FM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return $E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return $E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function GE(t){return df(JSON.stringify({version:2,heartbeats:t})).length}function s6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(t){Ja(new Zs("platform-logger",e=>new vO(e),"PRIVATE")),Ja(new Zs("heartbeat",e=>new n6(e),"PRIVATE")),mi(g0,HE,t),mi(g0,HE,"esm2017"),mi("fire-js","")}a6("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="type.googleapis.com/google.protobuf.Int64Value",l6="type.googleapis.com/google.protobuf.UInt64Value";function DT(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function ff(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ff(e));if(typeof t=="function"||typeof t=="object")return DT(t,e=>ff(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Il(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case o6:case l6:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Il(e)):typeof t=="function"||typeof t=="object"?DT(t,e=>Il(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends xi{constructor(e,n,i){super(`${fy}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function c6(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function gf(t,e){let n=c6(t),i=n,a;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!YE[c])return new $n("internal","internal");n=YE[c],i=c}const d=l.message;typeof d=="string"&&(i=d),a=l.details,a!==void 0&&(a=Il(a))}}catch{}return n==="ok"?null:new $n(n,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="us-central1",d6=/^data: (.*?)(?:\n|$)/;function h6(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class f6{constructor(e,n,i,a,l=y0,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new u6(e,n,i,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=y0}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function g6(t,e,n){const i=so(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(ly(t.emulatorOrigin),cy("Functions",!0))}function p6(t,e,n){const i=a=>y6(t,e,a,{});return i.stream=(a,l)=>_6(t,e,a,l),i}async function m6(t,e,n,i){n["Content-Type"]="application/json";let a;try{a=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function MT(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function y6(t,e,n,i){const a=t._url(e);return v6(t,a,n,i)}async function v6(t,e,n,i){n=ff(n);const a={data:n},l=await MT(t,i),c=i.timeout||7e4,d=h6(c),f=await Promise.race([m6(e,a,l,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new $n("cancelled","Firebase Functions instance was deleted.");const p=gf(f.status,f.json);if(p)throw p;if(!f.json)throw new $n("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new $n("internal","Response is missing data field.");return{data:Il(y)}}function _6(t,e,n,i){const a=t._url(e);return b6(t,a,n,i||{})}async function b6(t,e,n,i){var a;n=ff(n);const l={data:n},c=await MT(t,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(E){if(E instanceof Error&&E.name==="AbortError"){const M=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}const T=gf(0,null);return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}let f,p;const y=new Promise((E,T)=>{f=E,p=T});(a=i?.signal)===null||a===void 0||a.addEventListener("abort",()=>{const E=new $n("cancelled","Request was cancelled.");p(E)});const v=d.body.getReader(),b=w6(v,f,p,i?.signal);return{stream:{[Symbol.asyncIterator](){const E=b.getReader();return{async next(){const{value:T,done:M}=await E.read();return{value:T,done:M}},async return(){return await E.cancel(),{done:!0,value:void 0}}}}},data:y}}function w6(t,e,n,i){const a=(c,d)=>{const f=c.match(d6);if(!f)return;const p=f[1];try{const y=JSON.parse(p);if("result"in y){e(Il(y.result));return}if("message"in y){d.enqueue(Il(y.message));return}if("error"in y){const v=gf(0,y);d.error(v),n(v);return}}catch(y){if(y instanceof $n){d.error(y),n(y);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return f();async function f(){if(i?.aborted){const p=new $n("cancelled","Request was cancelled");return c.error(p),n(p),Promise.resolve()}try{const{value:p,done:y}=await t.read();if(y){d.trim()&&a(d.trim(),c),c.close();return}if(i?.aborted){const b=new $n("cancelled","Request was cancelled");c.error(b),n(b),await t.cancel();return}d+=l.decode(p,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const b of v)b.trim()&&a(b.trim(),c);return f()}catch(p){const y=p instanceof $n?p:gf(0,null);c.error(y),n(y)}}},cancel(){return t.cancel()}})}const KE="@firebase/functions",XE="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="auth-internal",x6="app-check-internal",S6="messaging-internal";function T6(t){const e=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(E6),c=n.getProvider(S6),d=n.getProvider(x6);return new f6(a,l,c,d,i)};Ja(new Zs(fy,e,"PUBLIC").setMultipleInstances(!0)),mi(KE,XE,t),mi(KE,XE,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t=hy(),e=y0){const i=Yf(Mt(t),fy).getImmediate({identifier:e}),a=ST("functions");return a&&OT(i,...a),i}function OT(t,e,n){g6(Mt(t),e,n)}function PT(t,e,n){return p6(Mt(t),e)}T6();var R6="firebase",C6="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(R6,C6,"app");var QE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,VT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,R){function C(){}C.prototype=R.prototype,O.D=R.prototype,O.prototype=new C,O.prototype.constructor=O,O.C=function(z,U,H){for(var I=Array(arguments.length-2),P=2;P<arguments.length;P++)I[P-2]=arguments[P];return R.prototype[U].apply(z,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,R,C){C||(C=0);var z=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)z[U]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(U=0;16>U;++U)z[U]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=O.g[0],C=O.g[1],U=O.g[2];var H=O.g[3],I=R+(H^C&(U^H))+z[0]+3614090360&4294967295;R=C+(I<<7&4294967295|I>>>25),I=H+(U^R&(C^U))+z[1]+3905402710&4294967295,H=R+(I<<12&4294967295|I>>>20),I=U+(C^H&(R^C))+z[2]+606105819&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(R^U&(H^R))+z[3]+3250441966&4294967295,C=U+(I<<22&4294967295|I>>>10),I=R+(H^C&(U^H))+z[4]+4118548399&4294967295,R=C+(I<<7&4294967295|I>>>25),I=H+(U^R&(C^U))+z[5]+1200080426&4294967295,H=R+(I<<12&4294967295|I>>>20),I=U+(C^H&(R^C))+z[6]+2821735955&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(R^U&(H^R))+z[7]+4249261313&4294967295,C=U+(I<<22&4294967295|I>>>10),I=R+(H^C&(U^H))+z[8]+1770035416&4294967295,R=C+(I<<7&4294967295|I>>>25),I=H+(U^R&(C^U))+z[9]+2336552879&4294967295,H=R+(I<<12&4294967295|I>>>20),I=U+(C^H&(R^C))+z[10]+4294925233&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(R^U&(H^R))+z[11]+2304563134&4294967295,C=U+(I<<22&4294967295|I>>>10),I=R+(H^C&(U^H))+z[12]+1804603682&4294967295,R=C+(I<<7&4294967295|I>>>25),I=H+(U^R&(C^U))+z[13]+4254626195&4294967295,H=R+(I<<12&4294967295|I>>>20),I=U+(C^H&(R^C))+z[14]+2792965006&4294967295,U=H+(I<<17&4294967295|I>>>15),I=C+(R^U&(H^R))+z[15]+1236535329&4294967295,C=U+(I<<22&4294967295|I>>>10),I=R+(U^H&(C^U))+z[1]+4129170786&4294967295,R=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(R^C))+z[6]+3225465664&4294967295,H=R+(I<<9&4294967295|I>>>23),I=U+(R^C&(H^R))+z[11]+643717713&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^R&(U^H))+z[0]+3921069994&4294967295,C=U+(I<<20&4294967295|I>>>12),I=R+(U^H&(C^U))+z[5]+3593408605&4294967295,R=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(R^C))+z[10]+38016083&4294967295,H=R+(I<<9&4294967295|I>>>23),I=U+(R^C&(H^R))+z[15]+3634488961&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^R&(U^H))+z[4]+3889429448&4294967295,C=U+(I<<20&4294967295|I>>>12),I=R+(U^H&(C^U))+z[9]+568446438&4294967295,R=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(R^C))+z[14]+3275163606&4294967295,H=R+(I<<9&4294967295|I>>>23),I=U+(R^C&(H^R))+z[3]+4107603335&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^R&(U^H))+z[8]+1163531501&4294967295,C=U+(I<<20&4294967295|I>>>12),I=R+(U^H&(C^U))+z[13]+2850285829&4294967295,R=C+(I<<5&4294967295|I>>>27),I=H+(C^U&(R^C))+z[2]+4243563512&4294967295,H=R+(I<<9&4294967295|I>>>23),I=U+(R^C&(H^R))+z[7]+1735328473&4294967295,U=H+(I<<14&4294967295|I>>>18),I=C+(H^R&(U^H))+z[12]+2368359562&4294967295,C=U+(I<<20&4294967295|I>>>12),I=R+(C^U^H)+z[5]+4294588738&4294967295,R=C+(I<<4&4294967295|I>>>28),I=H+(R^C^U)+z[8]+2272392833&4294967295,H=R+(I<<11&4294967295|I>>>21),I=U+(H^R^C)+z[11]+1839030562&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^R)+z[14]+4259657740&4294967295,C=U+(I<<23&4294967295|I>>>9),I=R+(C^U^H)+z[1]+2763975236&4294967295,R=C+(I<<4&4294967295|I>>>28),I=H+(R^C^U)+z[4]+1272893353&4294967295,H=R+(I<<11&4294967295|I>>>21),I=U+(H^R^C)+z[7]+4139469664&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^R)+z[10]+3200236656&4294967295,C=U+(I<<23&4294967295|I>>>9),I=R+(C^U^H)+z[13]+681279174&4294967295,R=C+(I<<4&4294967295|I>>>28),I=H+(R^C^U)+z[0]+3936430074&4294967295,H=R+(I<<11&4294967295|I>>>21),I=U+(H^R^C)+z[3]+3572445317&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^R)+z[6]+76029189&4294967295,C=U+(I<<23&4294967295|I>>>9),I=R+(C^U^H)+z[9]+3654602809&4294967295,R=C+(I<<4&4294967295|I>>>28),I=H+(R^C^U)+z[12]+3873151461&4294967295,H=R+(I<<11&4294967295|I>>>21),I=U+(H^R^C)+z[15]+530742520&4294967295,U=H+(I<<16&4294967295|I>>>16),I=C+(U^H^R)+z[2]+3299628645&4294967295,C=U+(I<<23&4294967295|I>>>9),I=R+(U^(C|~H))+z[0]+4096336452&4294967295,R=C+(I<<6&4294967295|I>>>26),I=H+(C^(R|~U))+z[7]+1126891415&4294967295,H=R+(I<<10&4294967295|I>>>22),I=U+(R^(H|~C))+z[14]+2878612391&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~R))+z[5]+4237533241&4294967295,C=U+(I<<21&4294967295|I>>>11),I=R+(U^(C|~H))+z[12]+1700485571&4294967295,R=C+(I<<6&4294967295|I>>>26),I=H+(C^(R|~U))+z[3]+2399980690&4294967295,H=R+(I<<10&4294967295|I>>>22),I=U+(R^(H|~C))+z[10]+4293915773&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~R))+z[1]+2240044497&4294967295,C=U+(I<<21&4294967295|I>>>11),I=R+(U^(C|~H))+z[8]+1873313359&4294967295,R=C+(I<<6&4294967295|I>>>26),I=H+(C^(R|~U))+z[15]+4264355552&4294967295,H=R+(I<<10&4294967295|I>>>22),I=U+(R^(H|~C))+z[6]+2734768916&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~R))+z[13]+1309151649&4294967295,C=U+(I<<21&4294967295|I>>>11),I=R+(U^(C|~H))+z[4]+4149444226&4294967295,R=C+(I<<6&4294967295|I>>>26),I=H+(C^(R|~U))+z[11]+3174756917&4294967295,H=R+(I<<10&4294967295|I>>>22),I=U+(R^(H|~C))+z[2]+718787259&4294967295,U=H+(I<<15&4294967295|I>>>17),I=C+(H^(U|~R))+z[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(U+(I<<21&4294967295|I>>>11))&4294967295,O.g[2]=O.g[2]+U&4294967295,O.g[3]=O.g[3]+H&4294967295}i.prototype.u=function(O,R){R===void 0&&(R=O.length);for(var C=R-this.blockSize,z=this.B,U=this.h,H=0;H<R;){if(U==0)for(;H<=C;)a(this,O,H),H+=this.blockSize;if(typeof O=="string"){for(;H<R;)if(z[U++]=O.charCodeAt(H++),U==this.blockSize){a(this,z),U=0;break}}else for(;H<R;)if(z[U++]=O[H++],U==this.blockSize){a(this,z),U=0;break}}this.h=U,this.o+=R},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;var C=8*this.o;for(R=O.length-8;R<O.length;++R)O[R]=C&255,C/=256;for(this.u(O),O=Array(16),R=C=0;4>R;++R)for(var z=0;32>z;z+=8)O[C++]=this.g[R]>>>z&255;return O};function l(O,R){var C=d;return Object.prototype.hasOwnProperty.call(C,O)?C[O]:C[O]=R(O)}function c(O,R){this.h=R;for(var C=[],z=!0,U=O.length-1;0<=U;U--){var H=O[U]|0;z&&H==R||(C[U]=H,z=!1)}this.g=C}var d={};function f(O){return-128<=O&&128>O?l(O,function(R){return new c([R|0],0>R?-1:0)}):new c([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return N(p(-O));for(var R=[],C=1,z=0;O>=C;z++)R[z]=O/C|0,C*=4294967296;return new c(R,0)}function y(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return N(y(O.substring(1),R));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=p(Math.pow(R,8)),z=v,U=0;U<O.length;U+=8){var H=Math.min(8,O.length-U),I=parseInt(O.substring(U,U+H),R);8>H?(H=p(Math.pow(R,H)),z=z.j(H).add(p(I))):(z=z.j(C),z=z.add(p(I)))}return z}var v=f(0),b=f(1),E=f(16777216);t=c.prototype,t.m=function(){if(M(this))return-N(this).m();for(var O=0,R=1,C=0;C<this.g.length;C++){var z=this.i(C);O+=(0<=z?z:4294967296+z)*R,R*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(T(this))return"0";if(M(this))return"-"+N(this).toString(O);for(var R=p(Math.pow(O,6)),C=this,z="";;){var U=j(C,R).g;C=V(C,U.j(R));var H=((0<C.g.length?C.g[0]:C.h)>>>0).toString(O);if(C=U,T(C))return H+z;for(;6>H.length;)H="0"+H;z=H+z}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function T(O){if(O.h!=0)return!1;for(var R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function M(O){return O.h==-1}t.l=function(O){return O=V(this,O),M(O)?-1:T(O)?0:1};function N(O){for(var R=O.g.length,C=[],z=0;z<R;z++)C[z]=~O.g[z];return new c(C,~O.h).add(b)}t.abs=function(){return M(this)?N(this):this},t.add=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],z=0,U=0;U<=R;U++){var H=z+(this.i(U)&65535)+(O.i(U)&65535),I=(H>>>16)+(this.i(U)>>>16)+(O.i(U)>>>16);z=I>>>16,H&=65535,I&=65535,C[U]=I<<16|H}return new c(C,C[C.length-1]&-2147483648?-1:0)};function V(O,R){return O.add(N(R))}t.j=function(O){if(T(this)||T(O))return v;if(M(this))return M(O)?N(this).j(N(O)):N(N(this).j(O));if(M(O))return N(this.j(N(O)));if(0>this.l(E)&&0>O.l(E))return p(this.m()*O.m());for(var R=this.g.length+O.g.length,C=[],z=0;z<2*R;z++)C[z]=0;for(z=0;z<this.g.length;z++)for(var U=0;U<O.g.length;U++){var H=this.i(z)>>>16,I=this.i(z)&65535,P=O.i(U)>>>16,K=O.i(U)&65535;C[2*z+2*U]+=I*K,B(C,2*z+2*U),C[2*z+2*U+1]+=H*K,B(C,2*z+2*U+1),C[2*z+2*U+1]+=I*P,B(C,2*z+2*U+1),C[2*z+2*U+2]+=H*P,B(C,2*z+2*U+2)}for(z=0;z<R;z++)C[z]=C[2*z+1]<<16|C[2*z];for(z=R;z<2*R;z++)C[z]=0;return new c(C,0)};function B(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function $(O,R){this.g=O,this.h=R}function j(O,R){if(T(R))throw Error("division by zero");if(T(O))return new $(v,v);if(M(O))return R=j(N(O),R),new $(N(R.g),N(R.h));if(M(R))return R=j(O,N(R)),new $(N(R.g),R.h);if(30<O.g.length){if(M(O)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var C=b,z=R;0>=z.l(O);)C=ne(C),z=ne(z);var U=te(C,1),H=te(z,1);for(z=te(z,2),C=te(C,2);!T(z);){var I=H.add(z);0>=I.l(O)&&(U=U.add(C),H=I),z=te(z,1),C=te(C,1)}return R=V(O,U.j(R)),new $(U,R)}for(U=v;0<=O.l(R);){for(C=Math.max(1,Math.floor(O.m()/R.m())),z=Math.ceil(Math.log(C)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),H=p(C),I=H.j(R);M(I)||0<I.l(O);)C-=z,H=p(C),I=H.j(R);T(H)&&(H=b),U=U.add(H),O=V(O,I)}return new $(U,O)}t.A=function(O){return j(this,O).h},t.and=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],z=0;z<R;z++)C[z]=this.i(z)&O.i(z);return new c(C,this.h&O.h)},t.or=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],z=0;z<R;z++)C[z]=this.i(z)|O.i(z);return new c(C,this.h|O.h)},t.xor=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],z=0;z<R;z++)C[z]=this.i(z)^O.i(z);return new c(C,this.h^O.h)};function ne(O){for(var R=O.g.length+1,C=[],z=0;z<R;z++)C[z]=O.i(z)<<1|O.i(z-1)>>>31;return new c(C,O.h)}function te(O,R){var C=R>>5;R%=32;for(var z=O.g.length-C,U=[],H=0;H<z;H++)U[H]=0<R?O.i(H+C)>>>R|O.i(H+C+1)<<32-R:O.i(H+C);return new c(U,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,VT=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Ks=c}).apply(typeof QE<"u"?QE:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LT,cu,zT,qh,v0,UT,jT,BT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,w){return h==Array.prototype||h==Object.prototype||(h[_]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function a(h,_){if(_)e:{var w=i;h=h.split(".");for(var L=0;L<h.length-1;L++){var ie=h[L];if(!(ie in w))break e;w=w[ie]}h=h[h.length-1],L=w[h],_=_(L),_!=L&&_!=null&&e(w,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var w=0,L=!1,ie={next:function(){if(!L&&w<h.length){var de=w++;return{value:_(de,h[de]),done:!1}}return L=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,w){return h.call.apply(h.bind,arguments)}function v(h,_,w){if(!h)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,L),h.apply(_,ie)}}return function(){return h.apply(_,arguments)}}function b(h,_,w){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function E(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var L=w.slice();return L.push.apply(L,arguments),h.apply(this,L)}}function T(h,_){function w(){}w.prototype=_.prototype,h.aa=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(L,ie,de){for(var be=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)be[Je-2]=arguments[Je];return _.prototype[ie].apply(L,be)}}function M(h){const _=h.length;if(0<_){const w=Array(_);for(let L=0;L<_;L++)w[L]=h[L];return w}return[]}function N(h,_){for(let w=1;w<arguments.length;w++){const L=arguments[w];if(f(L)){const ie=h.length||0,de=L.length||0;h.length=ie+de;for(let be=0;be<de;be++)h[ie+be]=L[be]}else h.push(L)}}class V{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function B(h){return/^[\s\xa0]*$/.test(h)}function $(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var ne=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function te(h,_,w){for(const L in h)_.call(w,h[L],L,h)}function O(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function R(h){const _={};for(const w in h)_[w]=h[w];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(h,_){let w,L;for(let ie=1;ie<arguments.length;ie++){L=arguments[ie];for(w in L)h[w]=L[w];for(let de=0;de<C.length;de++)w=C[de],Object.prototype.hasOwnProperty.call(L,w)&&(h[w]=L[w])}}function U(h){var _=1;h=h.split(":");const w=[];for(;0<_&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function H(h){d.setTimeout(()=>{throw h},0)}function I(){var h=Y;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class P{constructor(){this.h=this.g=null}add(_,w){const L=K.get();L.set(_,w),this.h?this.h.next=L:this.g=L,this.h=L}}var K=new V(()=>new D,h=>h.reset());class D{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,F=!1,Y=new P,A=()=>{const h=d.Promise.resolve(void 0);q=()=>{h.then(W)}};var W=()=>{for(var h;h=I();){try{h.h.call(h.g)}catch(w){H(w)}var _=K;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}F=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,_),d.removeEventListener("test",w,_)}catch{}return h}();function le(h,_){if(Q.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,L=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ne){e:{try{j(_.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(_=null)}}else w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement);this.relatedTarget=_,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ue[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&le.aa.h.call(this)}}T(le,Q);var ue={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(h,_,w,L,ie){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!L,this.ha=ie,this.key=++_e,this.da=this.fa=!1}function Re(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function rt(h){this.src=h,this.g={},this.h=0}rt.prototype.add=function(h,_,w,L,ie){var de=h.toString();h=this.g[de],h||(h=this.g[de]=[],this.h++);var be=Le(h,_,L,ie);return-1<be?(_=h[be],w||(_.fa=!1)):(_=new Ae(_,this.src,de,!!L,ie),_.fa=w,h.push(_)),_};function it(h,_){var w=_.type;if(w in h.g){var L=h.g[w],ie=Array.prototype.indexOf.call(L,_,void 0),de;(de=0<=ie)&&Array.prototype.splice.call(L,ie,1),de&&(Re(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Le(h,_,w,L){for(var ie=0;ie<h.length;++ie){var de=h[ie];if(!de.da&&de.listener==_&&de.capture==!!w&&de.ha==L)return ie}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),Be={};function Ze(h,_,w,L,ie){if(Array.isArray(_)){for(var de=0;de<_.length;de++)Ze(h,_[de],w,L,ie);return null}return w=Nr(w),h&&h[fe]?h.K(_,w,p(L)?!!L.capture:!1,ie):ze(h,_,w,!1,L,ie)}function ze(h,_,w,L,ie,de){if(!_)throw Error("Invalid event type");var be=p(ie)?!!ie.capture:!!ie,Je=An(h);if(Je||(h[$e]=Je=new rt(h)),w=Je.add(_,w,L,be,de),w.proxy)return w;if(L=we(),w.proxy=L,L.src=h,L.listener=w,h.addEventListener)ee||(ie=be),ie===void 0&&(ie=!1),h.addEventListener(_.toString(),L,ie);else if(h.attachEvent)h.attachEvent(Gt(_.toString()),L);else if(h.addListener&&h.removeListener)h.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return w}function we(){function h(w){return _.call(h.src,h.listener,w)}const _=Fn;return h}function Rt(h,_,w,L,ie){if(Array.isArray(_))for(var de=0;de<_.length;de++)Rt(h,_[de],w,L,ie);else L=p(L)?!!L.capture:!!L,w=Nr(w),h&&h[fe]?(h=h.i,_=String(_).toString(),_ in h.g&&(de=h.g[_],w=Le(de,w,L,ie),-1<w&&(Re(de[w]),Array.prototype.splice.call(de,w,1),de.length==0&&(delete h.g[_],h.h--)))):h&&(h=An(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Le(_,w,L,ie)),(w=-1<h?_[h]:null)&&vn(w))}function vn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[fe])it(_.i,h);else{var w=h.type,L=h.proxy;_.removeEventListener?_.removeEventListener(w,L,h.capture):_.detachEvent?_.detachEvent(Gt(w),L):_.addListener&&_.removeListener&&_.removeListener(L),(w=An(_))?(it(w,h),w.h==0&&(w.src=null,_[$e]=null)):Re(h)}}}function Gt(h){return h in Be?Be[h]:Be[h]="on"+h}function Fn(h,_){if(h.da)h=!0;else{_=new le(_,this);var w=h.listener,L=h.ha||h.src;h.fa&&vn(h),h=w.call(L,_)}return h}function An(h){return h=h[$e],h instanceof rt?h:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(h){return typeof h=="function"?h:(h[Rn]||(h[Rn]=function(_){return h.handleEvent(_)}),h[Rn])}function ot(){Z.call(this),this.i=new rt(this),this.M=this,this.F=null}T(ot,Z),ot.prototype[fe]=!0,ot.prototype.removeEventListener=function(h,_,w,L){Rt(this,h,_,w,L)};function Ye(h,_){var w,L=h.F;if(L)for(w=[];L;L=L.F)w.push(L);if(h=h.M,L=_.type||_,typeof _=="string")_=new Q(_,h);else if(_ instanceof Q)_.target=_.target||h;else{var ie=_;_=new Q(L,h),z(_,ie)}if(ie=!0,w)for(var de=w.length-1;0<=de;de--){var be=_.g=w[de];ie=zt(be,L,!0,_)&&ie}if(be=_.g=h,ie=zt(be,L,!0,_)&&ie,ie=zt(be,L,!1,_)&&ie,w)for(de=0;de<w.length;de++)be=_.g=w[de],ie=zt(be,L,!1,_)&&ie}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var w=h.g[_],L=0;L<w.length;L++)Re(w[L]);delete h.g[_],h.h--}}this.F=null},ot.prototype.K=function(h,_,w,L){return this.i.add(String(h),_,!1,w,L)},ot.prototype.L=function(h,_,w,L){return this.i.add(String(h),_,!0,w,L)};function zt(h,_,w,L){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var ie=!0,de=0;de<_.length;++de){var be=_[de];if(be&&!be.da&&be.capture==w){var Je=be.listener,Kt=be.ha||be.src;be.fa&&it(h.i,be),ie=Je.call(Kt,L)!==!1&&ie}}return ie&&!L.defaultPrevented}function Et(h,_,w){if(typeof h=="function")w&&(h=b(h,w));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Gr(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,Gr(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ut extends Z{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Gr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(h){Z.call(this),this.h=h,this.g={}}T(Jt,Z);var Cn=[];function Nn(h){te(h.g,function(_,w){this.g.hasOwnProperty(w)&&vn(_)},h),h.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Nn(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=d.JSON.stringify,cn=d.JSON.parse,In=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Si(){}Si.prototype.h=null;function Ti(h){return h.h||(h.h=h.i())}function Ir(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){Q.call(this,"d")}T(ur,Q);function Yn(){Q.call(this,"c")}T(Yn,Q);var dr={},ca=null;function Yr(){return ca=ca||new ot}dr.La="serverreachability";function as(h){Q.call(this,dr.La,h)}T(as,Q);function Kr(h){const _=Yr();Ye(_,new as(_))}dr.STAT_EVENT="statevent";function uo(h,_){Q.call(this,dr.STAT_EVENT,h),this.stat=_}T(uo,Q);function yt(h){const _=Yr();Ye(_,new uo(_,h))}dr.Ma="timingevent";function Ot(h,_){Q.call(this,dr.Ma,h),this.size=_}T(Ot,Q);function Ct(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function ua(h,_,w,L,ie,de){h.info(function(){if(h.g)if(de)for(var be="",Je=de.split("&"),Kt=0;Kt<Je.length;Kt++){var et=Je[Kt].split("=");if(1<et.length){var nn=et[0];et=et[1];var Xt=nn.split("_");be=2<=Xt.length&&Xt[1]=="type"?be+(nn+"="+et+"&"):be+(nn+"=redacted&")}}else be=null;else be=de;return"XMLHTTP REQ ("+L+") [attempt "+ie+"]: "+_+`
`+w+`
`+be})}function Gl(h,_,w,L,ie,de,be){h.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+ie+"]: "+_+`
`+w+`
`+de+" "+be})}function Xr(h,_,w,L){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ai(h,w)+(L?" "+L:"")})}function ho(h,_){h.info(function(){return"TIMEOUT: "+_})}Ln.prototype.info=function(){};function Ai(h,_){if(!h.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var L=w[h];if(!(2>L.length)){var ie=L[1];if(Array.isArray(ie)&&!(1>ie.length)){var de=ie[0];if(de!="noop"&&de!="stop"&&de!="close")for(var be=1;be<ie.length;be++)ie[be]=""}}}}return en(w)}catch{return _}}var Qr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function gr(){}T(gr,Si),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},fr=new gr;function un(h,_,w,L){this.j=h,this.i=_,this.l=w,this.R=L||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var da={},os={};function Kn(h,_,w){h.L=1,h.v=pa(Xn(_)),h.m=w,h.P=!0,kr(h,null)}function kr(h,_){h.F=Date.now(),Ri(h),h.A=Xn(h.v);var w=h.A,L=h.R;Array.isArray(L)||(L=[String(L)]),Zl(w.i,"t",L),h.C=0,w=h.j.J,h.h=new xt,h.g=dd(h.j,w?_:null,!h.m),0<h.O&&(h.M=new Ut(b(h.Y,h,h.g),h.O)),_=h.U,w=h.g,L=h.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(Cn[0]=ie.toString()),ie=Cn);for(var de=0;de<ie.length;de++){var be=Ze(w,ie[de],L||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Kr(),ua(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const _=this.M;_&&_r(h)==3?_.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Xt=_r(this.g);var _=this.g.Ba();const Oi=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||rd(this.g)))){this.J||Xt!=4||_==7||(_==8||0>=Oi?Kr(3):Kr(2)),Wr(this);var w=this.g.Z();this.X=w;t:if(ha(this)){var L=rd(this.g);h="";var ie=L.length,de=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),pr(this);var be="";break t}this.h.i=new d.TextDecoder}for(_=0;_<ie;_++)this.h.h=!0,h+=this.h.i.decode(L[_],{stream:!(de&&_==ie-1)});L.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=w==200,Gl(this.i,this.u,this.A,this.l,this.R,Xt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Kt=this.g;if((Je=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Je)){var et=Je;break t}}et=null}if(w=et)Xr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zr(this,w);else{this.o=!1,this.s=3,yt(12),Yt(this),pr(this);break e}}if(this.P){w=!0;let dn;for(;!this.J&&this.C<be.length;)if(dn=fo(this,be),dn==os){Xt==4&&(this.s=4,yt(14),w=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==da){this.s=4,yt(15),Xr(this.i,this.l,be,"[Invalid Chunk]"),w=!1;break}else Xr(this.i,this.l,dn,null),Zr(this,dn);if(ha(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||be.length!=0||this.h.h||(this.s=1,yt(16),w=!1),this.o=this.o&&w,!w)Xr(this.i,this.l,be,"[Invalid Chunked Response]"),Yt(this),pr(this);else if(0<be.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),xa(nn),nn.M=!0,yt(11))}}else Xr(this.i,this.l,be,null),Zr(this,be);Xt==4&&Yt(this),this.o&&!this.J&&(Xt==4?ld(this.j,this):(this.o=!1,Ri(this)))}else _g(this.g),w==400&&0<be.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Yt(this),pr(this)}}}catch{}finally{}};function ha(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function fo(h,_){var w=h.C,L=_.indexOf(`
`,w);return L==-1?os:(w=Number(_.substring(w,L)),isNaN(w)?da:(L+=1,L+w>_.length?os:(_=_.slice(L,L+w),h.C=L+w,_)))}un.prototype.cancel=function(){this.J=!0,Yt(this)};function Ri(h){h.S=Date.now()+h.I,go(h,h.I)}function go(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ct(b(h.ba,h),_)}function Wr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ho(this.i,this.A),this.L!=2&&(Kr(),yt(17)),Yt(this),this.s=2,pr(this)):go(this,this.S-h)};function pr(h){h.j.G==0||h.J||ld(h.j,h)}function Yt(h){Wr(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Nn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Zr(h,_){try{var w=h.j;if(w.G!=0&&(w.g==h||Yl(w.h,h))){if(!h.K&&Yl(w.h,h)&&w.G==3){try{var L=w.Da.g.parse(_)}catch{L=null}if(Array.isArray(L)&&L.length==3){var ie=L;if(ie[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)To(w),xo(w);else break e;rc(w),yt(18)}}else w.za=ie[1],0<w.za-w.T&&37500>ie[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ct(b(w.Za,w),6e3));if(1>=Jr(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Mi(w,11)}else if((h.K||w.g==h)&&To(w),!B(_))for(ie=w.Da.g.parse(_),_=0;_<ie.length;_++){let et=ie[_];if(w.T=et[0],et=et[1],w.G==2)if(et[0]=="c"){w.K=et[1],w.ia=et[2];const nn=et[3];nn!=null&&(w.la=nn,w.j.info("VER="+w.la));const Xt=et[4];Xt!=null&&(w.Aa=Xt,w.j.info("SVER="+w.Aa));const Oi=et[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(L=1.5*Oi,w.L=L,w.j.info("backChannelRequestTimeoutMs_="+L)),L=w;const dn=h.g;if(dn){const ai=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ai){var de=L.h;de.g||ai.indexOf("spdy")==-1&&ai.indexOf("quic")==-1&&ai.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(mo(de,de.h),de.h=null))}if(L.D){const sc=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(L.ya=sc,ht(L.I,L.D,sc))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),L=w;var be=h;if(L.qa=ud(L,L.J?L.ia:null,L.W),be.K){kn(L.h,be);var Je=be,Kt=L.L;Kt&&(Je.I=Kt),Je.B&&(Wr(Je),Ri(Je)),L.g=be}else ad(L);0<w.i.length&&So(w)}else et[0]!="stop"&&et[0]!="close"||Mi(w,7);else w.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Mi(w,7):tc(w):et[0]!="noop"&&w.l&&w.l.ta(et),w.v=0)}}Kr(4)}catch{}}var po=class{constructor(h,_){this.g=h,this.map=_}};function Dr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ls(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Jr(h){return h.h?1:h.g?h.g.size:0}function Yl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function mo(h,_){h.g?h.g.add(_):h.h=_}function kn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Dr.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Kl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.D);return _}return M(h.i)}function pg(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var _=[],w=h.length,L=0;L<w;L++)_.push(h[L]);return _}_=[],w=0;for(L in h)_[w++]=h[L];return _}function yo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var _=[];h=h.length;for(var w=0;w<h;w++)_.push(w);return _}_=[],w=0;for(const L in h)_[w++]=L;return _}}}function Xl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var w=yo(h),L=pg(h),ie=L.length,de=0;de<ie;de++)_.call(void 0,L[de],w&&w[de],h)}var fa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mg(h,_){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var L=h[w].indexOf("="),ie=null;if(0<=L){var de=h[w].substring(0,L);ie=h[w].substring(L+1)}else de=h[w];_(de,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function jt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof jt){this.h=h.h,ga(this,h.j),this.o=h.o,this.g=h.g,cs(this,h.s),this.l=h.l;var _=h.i,w=new Ni;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),Ci(this,w),this.m=h.m}else h&&(_=String(h).match(fa))?(this.h=!1,ga(this,_[1]||"",!0),this.o=mr(_[2]||""),this.g=mr(_[3]||"",!0),cs(this,_[4]),this.l=mr(_[5]||"",!0),Ci(this,_[6]||"",!0),this.m=mr(_[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}jt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(ma(_,Ql,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ma(_,Ql,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(ma(w,w.charAt(0)=="/"?yg:Wl,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",ma(w,vo)),h.join("")};function Xn(h){return new jt(h)}function ga(h,_,w){h.j=w?mr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function cs(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Ci(h,_,w){_ instanceof Ni?(h.i=_,td(h.i,h.h)):(w||(_=ma(_,vg)),h.i=new Ni(_,h.h))}function ht(h,_,w){h.i.set(_,w)}function pa(h){return ht(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function mr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ma(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,ed),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ed(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ql=/[#\/\?@]/g,Wl=/[#\?:]/g,yg=/[#\?]/g,vg=/[#\?@]/g,vo=/#/g;function Ni(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&mg(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}t=Ni.prototype,t.add=function(h,_){yr(this),this.i=null,h=ei(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function Ii(h,_){yr(h),_=ei(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ki(h,_){return yr(h),_=ei(h,_),h.g.has(_)}t.forEach=function(h,_){yr(this),this.g.forEach(function(w,L){w.forEach(function(ie){h.call(_,ie,L,this)},this)},this)},t.na=function(){yr(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let L=0;L<_.length;L++){const ie=h[L];for(let de=0;de<ie.length;de++)w.push(_[L])}return w},t.V=function(h){yr(this);let _=[];if(typeof h=="string")ki(this,h)&&(_=_.concat(this.g.get(ei(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)_=_.concat(h[w])}return _},t.set=function(h,_){return yr(this),this.i=null,h=ei(this,h),ki(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Zl(h,_,w){Ii(h,_),0<w.length&&(h.i=null,h.g.set(ei(h,_),M(w)),h.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var L=_[w];const de=encodeURIComponent(String(L)),be=this.V(L);for(L=0;L<be.length;L++){var ie=de;be[L]!==""&&(ie+="="+encodeURIComponent(String(be[L]))),h.push(ie)}}return this.i=h.join("&")};function ei(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function td(h,_){_&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(w,L){var ie=L.toLowerCase();L!=ie&&(Ii(this,L),Zl(this,ie,w))},h)),h.j=_}function ya(h,_){const w=new Ln;if(d.Image){const L=new Image;L.onload=E(vr,w,"TestLoadImage: loaded",!0,_,L),L.onerror=E(vr,w,"TestLoadImage: error",!1,_,L),L.onabort=E(vr,w,"TestLoadImage: abort",!1,_,L),L.ontimeout=E(vr,w,"TestLoadImage: timeout",!1,_,L),d.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=h}else _(!1)}function Mr(h,_){const w=new Ln,L=new AbortController,ie=setTimeout(()=>{L.abort(),vr(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:L.signal}).then(de=>{clearTimeout(ie),de.ok?vr(w,"TestPingServer: ok",!0,_):vr(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ie),vr(w,"TestPingServer: error",!1,_)})}function vr(h,_,w,L,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),L(w)}catch{}}function va(){this.g=new In}function ti(h,_,w){const L=w||"";try{Xl(h,function(ie,de){let be=ie;p(ie)&&(be=en(ie)),_.push(L+de+"="+encodeURIComponent(be))})}catch(ie){throw _.push(L+"type="+encodeURIComponent("_badmap")),ie}}function us(h){this.l=h.Ub||null,this.j=h.eb||!1}T(us,Si),us.prototype.g=function(){return new Di(this.l,this.j)},us.prototype.i=function(h){return function(){return h}}({});function Di(h,_){ot.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Di,ot),t=Di.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ri(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ni(this):ri(this),this.readyState==3&&Jl(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ni(this))},t.Qa=function(h){this.g&&(this.response=h,ni(this))},t.ga=function(){this.g&&ni(this)};function ni(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ri(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function ri(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ec(h){let _="";return te(h,function(w,L){_+=L,_+=":",_+=w,_+=`\r
`}),_}function tn(h,_,w){e:{for(L in w){var L=!1;break e}L=!0}L||(w=ec(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):ht(h,_,w))}function lt(h){ot.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(lt,ot);var _o=/^https?$/i,_a=["POST","PUT"];t=lt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,w,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Ti(this.o):Ti(fr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(de){nd(this,de);return}if(h=w||"",w=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var ie in L)w.set(ie,L[ie]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const de of L.keys())w.set(de,L.get(de));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(w.keys()).find(de=>de.toLowerCase()=="content-type"),ie=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_a,_,void 0))||L||ie||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,be]of w)this.g.setRequestHeader(de,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ba(this),this.u=!0,this.g.send(h),this.u=!1}catch(de){nd(this,de)}};function nd(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,bo(h),ii(h)}function bo(h){h.A||(h.A=!0,Ye(h,"complete"),Ye(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ye(this,"complete"),Ye(this,"abort"),ii(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wo(this):this.bb())},t.bb=function(){wo(this)};function wo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||_r(h)!=4||h.Z()!=2)){if(h.u&&_r(h)==4)Et(h.Ea,0,h);else if(Ye(h,"readystatechange"),_r(h)==4){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var L;if(L=be===0){var ie=String(h.D).match(fa)[1]||null;!ie&&d.self&&d.self.location&&(ie=d.self.location.protocol.slice(0,-1)),L=!_o.test(ie?ie.toLowerCase():"")}w=L}if(w)Ye(h,"complete"),Ye(h,"success");else{h.m=6;try{var de=2<_r(h)?h.g.statusText:""}catch{de=""}h.l=de+" ["+h.Z()+"]",bo(h)}}finally{ii(h)}}}}function ii(h,_){if(h.g){ba(h);const w=h.g,L=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ye(h,"ready");try{w.onreadystatechange=L}catch{}}}function ba(h){h.I&&(d.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _r(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),cn(_)}};function rd(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function _g(h){const _={};h=(h.g&&2<=_r(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<h.length;L++){if(B(h[L]))continue;var w=U(h[L]);const ie=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const de=_[ie]||[];_[ie]=de,de.push(w)}O(_,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function Eo(h){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,h),this.cb=wa("retryDelaySeedMs",1e4,h),this.Wa=wa("forwardChannelMaxRetries",2,h),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Dr(h&&h.concurrentRequestLimit),this.Da=new va,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Eo.prototype,t.la=8,t.G=1,t.connect=function(h,_,w,L){yt(0),this.W=h,this.H=_||{},w&&L!==void 0&&(this.H.OSID=w,this.H.OAID=L),this.F=this.X,this.I=ud(this,null,this.W),So(this)};function tc(h){if(id(h),h.G==3){var _=h.U++,w=Xn(h.I);if(ht(w,"SID",h.K),ht(w,"RID",_),ht(w,"TYPE","terminate"),Ea(h,w),_=new un(h,h.j,_),_.L=2,_.v=pa(Xn(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&d.Image&&(new Image().src=_.v,w=!0),w||(_.g=dd(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ri(_)}cd(h)}function xo(h){h.g&&(xa(h),h.g.cancel(),h.g=null)}function id(h){xo(h),h.u&&(d.clearTimeout(h.u),h.u=null),To(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function So(h){if(!ls(h.h)&&!h.s){h.s=!0;var _=h.Ga;q||A(),F||(q(),F=!0),Y.add(_,h),h.B=0}}function bg(h,_){return Jr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ct(b(h.Ga,h,_),ic(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ie=new un(this,this.j,h);let de=this.o;if(this.S&&(de?(de=R(de),z(de,this.S)):de=this.S),this.m!==null||this.O||(ie.H=de,de=null),this.P)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var L=this.i[w];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(_+=L,4096<_){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=sd(this,ie,_),w=Xn(this.I),ht(w,"RID",h),ht(w,"CVER",22),this.D&&ht(w,"X-HTTP-Session-Id",this.D),Ea(this,w),de&&(this.O?_="headers="+encodeURIComponent(String(ec(de)))+"&"+_:this.m&&tn(w,this.m,de)),mo(this.h,ie),this.Ua&&ht(w,"TYPE","init"),this.P?(ht(w,"$req",_),ht(w,"SID","null"),ie.T=!0,Kn(ie,w,null)):Kn(ie,w,_),this.G=2}}else this.G==3&&(h?nc(this,h):this.i.length==0||ls(this.h)||nc(this))};function nc(h,_){var w;_?w=_.l:w=h.U++;const L=Xn(h.I);ht(L,"SID",h.K),ht(L,"RID",w),ht(L,"AID",h.T),Ea(h,L),h.m&&h.o&&tn(L,h.m,h.o),w=new un(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),_&&(h.i=_.D.concat(h.i)),_=sd(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),mo(h.h,w),Kn(w,L,_)}function Ea(h,_){h.H&&te(h.H,function(w,L){ht(_,L,w)}),h.l&&Xl({},function(w,L){ht(_,L,w)})}function sd(h,_,w){w=Math.min(h.i.length,w);var L=h.l?b(h.l.Na,h.l,h):null;e:{var ie=h.i;let de=-1;for(;;){const be=["count="+w];de==-1?0<w?(de=ie[0].g,be.push("ofs="+de)):de=0:be.push("ofs="+de);let Je=!0;for(let Kt=0;Kt<w;Kt++){let et=ie[Kt].g;const nn=ie[Kt].map;if(et-=de,0>et)de=Math.max(0,ie[Kt].g-100),Je=!1;else try{ti(nn,be,"req"+et+"_")}catch{L&&L(nn)}}if(Je){L=be.join("&");break e}}}return h=h.i.splice(0,w),_.D=h,L}function ad(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;q||A(),F||(q(),F=!0),Y.add(_,h),h.v=0}}function rc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ct(b(h.Fa,h),ic(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,od(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ct(b(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),xo(this),od(this))};function xa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function od(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Xn(h.qa);ht(_,"RID","rpc"),ht(_,"SID",h.K),ht(_,"AID",h.T),ht(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&ht(_,"TO",h.ja),ht(_,"TYPE","xmlhttp"),Ea(h,_),h.m&&h.o&&tn(_,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=pa(Xn(_)),w.m=null,w.P=!0,kr(w,h)}t.Za=function(){this.C!=null&&(this.C=null,xo(this),rc(this),yt(19))};function To(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ld(h,_){var w=null;if(h.g==_){To(h),xa(h),h.g=null;var L=2}else if(Yl(h.h,_))w=_.D,kn(h.h,_),L=1;else return;if(h.G!=0){if(_.o)if(L==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var ie=h.B;L=Yr(),Ye(L,new Ot(L,w)),So(h)}else ad(h);else if(ie=_.s,ie==3||ie==0&&0<_.X||!(L==1&&bg(h,_)||L==2&&rc(h)))switch(w&&0<w.length&&(_=h.h,_.i=_.i.concat(w)),ie){case 1:Mi(h,5);break;case 4:Mi(h,10);break;case 3:Mi(h,6);break;default:Mi(h,2)}}}function ic(h,_){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*_}function Mi(h,_){if(h.j.info("Error code "+_),_==2){var w=b(h.fb,h),L=h.Xa;const ie=!L;L=new jt(L||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ga(L,"https"),pa(L),ie?ya(L.toString(),w):Mr(L.toString(),w)}else yt(2);h.G=0,h.l&&h.l.sa(_),cd(h),id(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function cd(h){if(h.G=0,h.ka=[],h.l){const _=Kl(h.h);(_.length!=0||h.i.length!=0)&&(N(h.ka,_),N(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function ud(h,_,w){var L=w instanceof jt?Xn(w):new jt(w);if(L.g!="")_&&(L.g=_+"."+L.g),cs(L,L.s);else{var ie=d.location;L=ie.protocol,_=_?_+"."+ie.hostname:ie.hostname,ie=+ie.port;var de=new jt(null);L&&ga(de,L),_&&(de.g=_),ie&&cs(de,ie),w&&(de.l=w),L=de}return w=h.D,_=h.ya,w&&_&&ht(L,w,_),ht(L,"VER",h.la),Ea(h,L),L}function dd(h,_,w){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new lt(new us({eb:w})):new lt(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hd(){}t=hd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ao(){}Ao.prototype.g=function(h,_){return new Dn(h,_)};function Dn(h,_){ot.call(this),this.g=new Eo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!B(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!B(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new si(this)}T(Dn,ot),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){tc(this.g)},Dn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=en(h),h=w);_.i.push(new po(_.Ya++,h)),_.G==3&&So(_)},Dn.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,Dn.aa.N.call(this)};function fd(h){ur.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const w in _){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}T(fd,ur);function gd(){Yn.call(this),this.status=1}T(gd,Yn);function si(h){this.g=h}T(si,hd),si.prototype.ua=function(){Ye(this.g,"a")},si.prototype.ta=function(h){Ye(this.g,new fd(h))},si.prototype.sa=function(h){Ye(this.g,new gd)},si.prototype.ra=function(){Ye(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,BT=function(){return new Ao},jT=function(){return Yr()},UT=dr,v0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qr.NO_ERROR=0,Qr.TIMEOUT=8,Qr.HTTP_ERROR=6,qh=Qr,hr.COMPLETE="complete",zT=hr,Ir.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",ot.prototype.listen=ot.prototype.K,cu=Ir,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,LT=lt}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});const WE="@firebase/firestore",ZE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new uy("@firebase/firestore");function ul(){return eo.logLevel}function Ee(t,...e){if(eo.logLevel<=Qe.DEBUG){const n=e.map(gy);eo.debug(`Firestore (${Ul}): ${t}`,...n)}}function rs(t,...e){if(eo.logLevel<=Qe.ERROR){const n=e.map(gy);eo.error(`Firestore (${Ul}): ${t}`,...n)}}function kl(t,...e){if(eo.logLevel<=Qe.WARN){const n=e.map(gy);eo.warn(`Firestore (${Ul}): ${t}`,...n)}}function gy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,HT(t,i,n)}function HT(t,e,n){let i=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw rs(i),new Error(i)}function ct(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||HT(e,a,i)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class I6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class k6{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let l=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xs,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},d=f=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xs)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new qT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class D6{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class M6{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new D6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const i=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new JE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=P6(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function qe(t,e){return t<e?-1:t>e?1:0}function _0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return qe(i,a);{const l=$T(),c=V6(l.encode(e1(t,n)),l.encode(e1(e,n)));return c!==0?c:qe(i,a)}}n+=i>65535?2:1}return qe(t.length,e.length)}function e1(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function V6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return qe(t[n],e[n]);return qe(t.length,e.length)}function Dl(t,e,n){return t.length===e.length&&t.every((i,a)=>n(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=-62135596800,n1=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*n1);return new bt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<t1)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n1}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-t1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new bt(0,0))}static max(){return new Pe(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="__name__";class gi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=gi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return qe(e.length,n.length)}static compareSegments(e,n){const i=gi.isNumericId(e),a=gi.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?gi.extractNumericId(e).compare(gi.extractNumericId(n)):_0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class _t extends gi{construct(e,n,i){return new _t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(ye.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(a=>a.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const L6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends gi{construct(e,n,i){return new mn(e,n,i)}static isValidIdentifier(e){return L6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r1}static keyField(){return new mn([r1])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new xe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new xe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new xe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(_t.fromString(e))}static fromName(e){return new Ne(_t.fromString(e).popFirst(5))}static empty(){return new Ne(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new _t(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=-1;function z6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new Js(a,Ne.empty(),e)}function U6(t){return new Js(t.readTime,t.key,Nu)}class Js{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Js(Pe.min(),Ne.empty(),Nu)}static max(){return new Js(Pe.max(),Ne.empty(),Nu)}}function j6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==B6)throw t;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.reject(n)}static resolve(e){return new ve((n,i)=>{n(e)})}static reject(e){return new ve((n,i)=>{i(e)})}static waitFor(e){return new ve((n,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},f=>i(f))}),c=!0,l===a&&n()})}static or(e){let n=ve.resolve(!1);for(const i of e)n=n.next(a=>a?ve.resolve(a):i());return n}static forEach(e,n){const i=[];return e.forEach((a,l)=>{i.push(n.call(this,a,l))}),this.waitFor(i)}static mapArray(e,n){return new ve((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const p=f;n(e[p]).next(y=>{c[p]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(e,n){return new ve((i,a)=>{const l=()=>{e()===!0?n().next(()=>{l()},a):i()};l()})}}function q6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Kf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=-1;function Xf(t){return t==null}function pf(t){return t===0&&1/t==-1/0}function $6(t){return typeof t=="number"&&Number.isInteger(t)&&!pf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="";function F6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=i1(e)),e=G6(t.get(n),e);return i1(e)}function G6(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case GT:n+="";break;default:n+=l}}return n}function i1(t){return t+GT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new pn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a1(this.data.getIterator())}getIteratorFrom(e){return new a1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class a1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new sr([])}unionWith(e){let n=new Zt(mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new KT("Invalid base64 string: "+l):l}}(e);return new yn(n)}static fromUint8Array(e){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const Y6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ea(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=Y6.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Lt(t.seconds),nanos:Lt(t.nanos)}}function Lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ta(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="server_timestamp",QT="__type__",WT="__previous_value__",ZT="__local_write_time__";function my(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[QT])===null||n===void 0?void 0:n.stringValue)===XT}function Qf(t){const e=t.mapValue.fields[WT];return my(e)?Qf(e):e}function Iu(t){const e=ea(t.mapValue.fields[ZT].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n,i,a,l,c,d,f,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=y}}const mf="(default)";class ku{constructor(e,n){this.projectId=e,this.database=n||mf}static empty(){return new ku("","")}get isDefaultDatabase(){return this.database===mf}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="__type__",X6="__max__",kh={mapValue:{}},eA="__vector__",yf="value";function na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?my(t)?4:W6(t)?9007199254740991:Q6(t)?10:11:Me(28295,{value:t})}function wi(t,e){if(t===e)return!0;const n=na(t);if(n!==na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Iu(t).isEqual(Iu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ea(a.timestampValue),d=ea(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,l){return ta(a.bytesValue).isEqual(ta(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,l){return Lt(a.geoPointValue.latitude)===Lt(l.geoPointValue.latitude)&&Lt(a.geoPointValue.longitude)===Lt(l.geoPointValue.longitude)}(t,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Lt(a.integerValue)===Lt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Lt(a.doubleValue),d=Lt(l.doubleValue);return c===d?pf(c)===pf(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(s1(c)!==s1(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!wi(c[f],d[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Du(t,e){return(t.values||[]).find(n=>wi(n,e))!==void 0}function Ml(t,e){if(t===e)return 0;const n=na(t),i=na(e);if(n!==i)return qe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Lt(l.integerValue||l.doubleValue),f=Lt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(t,e);case 3:return o1(t.timestampValue,e.timestampValue);case 4:return o1(Iu(t),Iu(e));case 5:return _0(t.stringValue,e.stringValue);case 6:return function(l,c){const d=ta(l),f=ta(c);return d.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),f=c.split("/");for(let p=0;p<d.length&&p<f.length;p++){const y=qe(d[p],f[p]);if(y!==0)return y}return qe(d.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,c){const d=qe(Lt(l.latitude),Lt(c.latitude));return d!==0?d:qe(Lt(l.longitude),Lt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return l1(t.arrayValue,e.arrayValue);case 10:return function(l,c){var d,f,p,y;const v=l.fields||{},b=c.fields||{},E=(d=v[yf])===null||d===void 0?void 0:d.arrayValue,T=(f=b[yf])===null||f===void 0?void 0:f.arrayValue,M=qe(((p=E?.values)===null||p===void 0?void 0:p.length)||0,((y=T?.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:l1(E,T)}(t.mapValue,e.mapValue);case 11:return function(l,c){if(l===kh.mapValue&&c===kh.mapValue)return 0;if(l===kh.mapValue)return 1;if(c===kh.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),p=c.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const b=_0(f[v],y[v]);if(b!==0)return b;const E=Ml(d[f[v]],p[y[v]]);if(E!==0)return E}return qe(f.length,y.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function o1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=ea(t),i=ea(e),a=qe(n.seconds,i.seconds);return a!==0?a:qe(n.nanos,i.nanos)}function l1(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Ml(n[a],i[a]);if(l)return l}return qe(n.length,i.length)}function Ol(t){return b0(t)}function b0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ea(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ta(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=b0(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${b0(n.fields[c])}`;return a+"}"}(t.mapValue):Me(61005,{value:t})}function $h(t){switch(na(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qf(t);return e?16+$h(e):16;case 5:return 2*t.stringValue.length;case 6:return ta(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+$h(l),0)}(t.arrayValue);case 10:case 11:return function(i){let a=0;return sa(i.fields,(l,c)=>{a+=l.length+$h(c)}),a}(t.mapValue);default:throw Me(13486,{value:t})}}function c1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function w0(t){return!!t&&"integerValue"in t}function yy(t){return!!t&&"arrayValue"in t}function u1(t){return!!t&&"nullValue"in t}function d1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fh(t){return!!t&&"mapValue"in t}function Q6(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[JT])===null||n===void 0?void 0:n.stringValue)===eA}function fu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=fu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function W6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===X6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=mn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,a),i={},a=[],n=d.popLast()}c?i[d.lastSegment()]=fu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());Fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Fh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){sa(n,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Hn(fu(this.value))}}function tA(t){const e=[];return sa(t.fields,(n,i)=>{const a=new mn([n]);if(Fh(i)){const l=tA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,i,a,l,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,Pe.min(),Pe.min(),Pe.min(),Hn.empty(),0)}static newFoundDocument(e,n,i,a){return new xn(e,1,n,Pe.min(),i,a,0)}static newNoDocument(e,n){return new xn(e,2,n,Pe.min(),Pe.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Pe.min(),Pe.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.position=e,this.inclusive=n}}function h1(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?i=Ne.comparator(Ne.fromName(c.referenceValue),n.key):i=Ml(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function f1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Z6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{}class Ft extends nA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new e5(e,n,i):n==="array-contains"?new r5(e,i):n==="in"?new i5(e,i):n==="not-in"?new s5(e,i):n==="array-contains-any"?new a5(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new t5(e,i):new n5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ml(n,this.value)):n!==null&&na(this.value)===na(n)&&this.matchesComparison(Ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends nA{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Hr(e,n)}matches(e){return rA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function rA(t){return t.op==="and"}function iA(t){return J6(t)&&rA(t)}function J6(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function E0(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(iA(t))return t.filters.map(e=>E0(e)).join(",");{const e=t.filters.map(n=>E0(n)).join(",");return`${t.op}(${e})`}}function sA(t,e){return t instanceof Ft?function(i,a){return a instanceof Ft&&i.op===a.op&&i.field.isEqual(a.field)&&wi(i.value,a.value)}(t,e):t instanceof Hr?function(i,a){return a instanceof Hr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&sA(c,a.filters[d]),!0):!1}(t,e):void Me(19439)}function aA(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`}(t):t instanceof Hr?function(n){return n.op.toString()+" {"+n.getFilters().map(aA).join(" ,")+"}"}(t):"Filter"}class e5 extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ne.fromName(i.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class t5 extends Ft{constructor(e,n){super(e,"in",n),this.keys=oA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class n5 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=oA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ne.fromName(i.referenceValue))}class r5 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yy(n)&&Du(n.arrayValue,this.value)}}class i5 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}}class s5 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Du(this.value.arrayValue,n)}}class a5 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Du(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function g1(t,e=null,n=[],i=[],a=null,l=null,c=null){return new o5(t,e,n,i,a,l,c)}function vy(t){const e=Ve(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>E0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ol(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ol(i)).join(",")),e.Ie=n}return e.Ie}function _y(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!f1(t.startAt,e.startAt)&&f1(t.endAt,e.endAt)}function x0(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n=null,i=[],a=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function l5(t,e,n,i,a,l,c,d){return new Hl(t,e,n,i,a,l,c,d)}function lA(t){return new Hl(t)}function p1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cA(t){return t.collectionGroup!==null}function gu(t){const e=Ve(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Zt(mn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Mu(l,i))}),n.has(mn.keyField().canonicalString())||e.Ee.push(new Mu(mn.keyField(),i))}return e.Ee}function yi(t){const e=Ve(t);return e.de||(e.de=c5(e,gu(t))),e.de}function c5(t,e){if(t.limitType==="F")return g1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Mu(a.field,l)});const n=t.endAt?new vf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new vf(t.startAt.position,t.startAt.inclusive):null;return g1(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function S0(t,e){const n=t.filters.concat([e]);return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function T0(t,e,n){return new Hl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wf(t,e){return _y(yi(t),yi(e))&&t.limitType===e.limitType}function uA(t){return`${vy(yi(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(a=>aA(a)).join(", ")}]`),Xf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(a=>Ol(a)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(a=>Ol(a)).join(",")),`Target(${i})`}(yi(t))}; limitType=${t.limitType})`}function Zf(t,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ne.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,a){for(const l of gu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!function(c,d,f){const p=h1(c,d,f);return c.inclusive?p<=0:p<0}(i.startAt,gu(i),a)||i.endAt&&!function(c,d,f){const p=h1(c,d,f);return c.inclusive?p>=0:p>0}(i.endAt,gu(i),a))}(t,e)}function u5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dA(t){return(e,n)=>{let i=!1;for(const a of gu(t)){const l=d5(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function d5(t,e,n){const i=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(l,c,d){const f=c.data.field(l),p=d.data.field(l);return f!==null&&p!==null?Ml(f,p):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return YT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=new At(Ne.comparator);function is(){return h5}const hA=new At(Ne.comparator);function uu(...t){let e=hA;for(const n of t)e=e.insert(n.key,n);return e}function fA(t){let e=hA;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ga(){return pu()}function gA(){return pu()}function pu(){return new ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const f5=new At(Ne.comparator),g5=new Zt(Ne.comparator);function We(...t){let e=g5;for(const n of t)e=e.add(n);return e}const p5=new Zt(qe);function m5(){return p5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function pA(t){return{integerValue:""+t}}function y5(t,e){return $6(e)?pA(e):by(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function v5(t,e,n){return t instanceof _f?function(a,l){const c={fields:{[QT]:{stringValue:XT},[ZT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&my(l)&&(l=Qf(l)),l&&(c.fields[WT]=l),{mapValue:c}}(n,e):t instanceof Ou?yA(t,e):t instanceof Pu?vA(t,e):function(a,l){const c=mA(a,l),d=m1(c)+m1(a.Re);return w0(c)&&w0(a.Re)?pA(d):by(a.serializer,d)}(t,e)}function _5(t,e,n){return t instanceof Ou?yA(t,e):t instanceof Pu?vA(t,e):n}function mA(t,e){return t instanceof bf?function(i){return w0(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class _f extends Jf{}class Ou extends Jf{constructor(e){super(),this.elements=e}}function yA(t,e){const n=_A(e);for(const i of t.elements)n.some(a=>wi(a,i))||n.push(i);return{arrayValue:{values:n}}}class Pu extends Jf{constructor(e){super(),this.elements=e}}function vA(t,e){let n=_A(e);for(const i of t.elements)n=n.filter(a=>!wi(a,i));return{arrayValue:{values:n}}}class bf extends Jf{constructor(e,n){super(),this.serializer=e,this.Re=n}}function m1(t){return Lt(t.integerValue||t.doubleValue)}function _A(t){return yy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function b5(t,e){return t.field.isEqual(e.field)&&function(i,a){return i instanceof Ou&&a instanceof Ou||i instanceof Pu&&a instanceof Pu?Dl(i.elements,a.elements,wi):i instanceof bf&&a instanceof bf?wi(i.Re,a.Re):i instanceof _f&&a instanceof _f}(t.transform,e.transform)}class w5{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class eg{}function bA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tg(t.key,ar.none()):new $u(t.key,t.data,ar.none());{const n=t.data,i=Hn.empty();let a=new Zt(mn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new aa(t.key,i,new sr(a.toArray()),ar.none())}}function E5(t,e,n){t instanceof $u?function(a,l,c){const d=a.value.clone(),f=v1(a.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof aa?function(a,l,c){if(!Gh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=v1(a.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(wA(a)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(t,e,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n,i){return t instanceof $u?function(l,c,d,f){if(!Gh(l.precondition,c))return d;const p=l.value.clone(),y=_1(l.fieldTransforms,f,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof aa?function(l,c,d,f){if(!Gh(l.precondition,c))return d;const p=_1(l.fieldTransforms,f,c),y=c.data;return y.setAll(wA(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(l,c,d){return Gh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function x5(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=mA(i.transform,a||null);l!=null&&(n===null&&(n=Hn.empty()),n.set(i.field,l))}return n||null}function y1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Dl(i,a,(l,c)=>b5(l,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $u extends eg{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class aa extends eg{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function wA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function v1(t,e,n){const i=new Map;ct(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,_5(c,d,n[a]))}return i}function _1(t,e,n){const i=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);i.set(a.field,v5(l,c,e))}return i}class tg extends eg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S5 extends eg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&E5(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=mu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=gA();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const f=bA(c,d);f!==null&&i.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,(n,i)=>y1(n,i))&&Dl(this.baseMutations,e.baseMutations,(n,i)=>y1(n,i))}}class wy{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){ct(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return f5}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new wy(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,nt;function C5(t){switch(t){case ye.OK:return Me(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function EA(t){if(t===void 0)return rs("GRPC error has no .code"),ye.UNKNOWN;switch(t){case qt.OK:return ye.OK;case qt.CANCELLED:return ye.CANCELLED;case qt.UNKNOWN:return ye.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ye.INTERNAL;case qt.UNAVAILABLE:return ye.UNAVAILABLE;case qt.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case qt.NOT_FOUND:return ye.NOT_FOUND;case qt.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case qt.ABORTED:return ye.ABORTED;case qt.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case qt.DATA_LOSS:return ye.DATA_LOSS;default:return Me(39323,{code:t})}}(nt=qt||(qt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=new Ks([4294967295,4294967295],0);function b1(t){const e=$T().encode(t),n=new VT;return n.update(e),new Uint8Array(n.digest())}function w1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ks([n,i],0),new Ks([a,l],0)]}class Ey{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new du(`Invalid padding: ${n}`);if(i<0)throw new du(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new du(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ks.fromNumber(this.pe)}we(e,n,i){let a=e.add(n.multiply(Ks.fromNumber(i)));return a.compare(N5)===1&&(a=new Ks([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=b1(e),[i,a]=w1(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ey(l,a,n);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const n=b1(e),[i,a]=w1(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Fu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ng(Pe.min(),a,new At(qe),is(),We())}}class Fu{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Fu(i,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,i,a){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=a}}class xA{constructor(e,n){this.targetId=e,this.Ce=n}}class SA{constructor(e,n,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class E1{constructor(){this.Fe=0,this.Me=x1(),this.xe=yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=We(),n=We(),i=We();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Me(38017,{changeType:l})}}),new Fu(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=x1()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ct(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class I5{constructor(e){this.ze=e,this.je=new Map,this.He=is(),this.Je=Dh(),this.Ye=Dh(),this.Ze=new At(qe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,i=e.Ce.count,a=this._t(n);if(a){const l=a.target;if(x0(l))if(i===0){const c=new Ne(l.path);this.tt(n,c,xn.newNoDocument(c,Pe.min()))}else ct(i===1,20013,{expectedCount:i});else{const c=this.ut(n);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=ta(i).toUint8Array()}catch(f){if(f instanceof KT)return kl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Ey(c,a,l)}catch(f){return kl(f instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(e){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&x0(d.target)){const f=new Ne(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,xn.newNoDocument(f,e))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let i=We();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(f=>{const p=this._t(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new ng(e,n,this.Ze,this.He,i);return this.He=is(),this.Je=Dh(),this.Ye=Dh(),this.Ze=new At(qe),a}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new E1,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(qe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(qe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Ee("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new E1),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Dh(){return new At(Ne.comparator)}function x1(){return new At(Ne.comparator)}const k5={asc:"ASCENDING",desc:"DESCENDING"},D5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M5={and:"AND",or:"OR"};class O5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function A0(t,e){return t.useProto3Json||Xf(e)?e:{value:e}}function wf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P5(t,e){return wf(t,e.toTimestamp())}function vi(t){return ct(!!t,49232),Pe.fromTimestamp(function(n){const i=ea(n);return new bt(i.seconds,i.nanos)}(t))}function xy(t,e){return R0(t,e).canonicalString()}function R0(t,e){const n=function(a){return new _t(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AA(t){const e=_t.fromString(t);return ct(kA(e),10190,{key:e.toString()}),e}function C0(t,e){return xy(t.databaseId,e.path)}function Bm(t,e){const n=AA(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(CA(n))}function RA(t,e){return xy(t.databaseId,e)}function V5(t){const e=AA(t);return e.length===4?_t.emptyPath():CA(e)}function N0(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CA(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function S1(t,e,n){return{name:C0(t,e),fields:n.value.mapValue.fields}}function L5(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(ct(y===void 0||typeof y=="string",58123),yn.fromBase64String(y||"")):(ct(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),yn.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const y=p.code===void 0?ye.UNKNOWN:EA(p.code);return new xe(y,p.message||"")}(c);n=new SA(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Bm(t,i.document.name),l=vi(i.document.updateTime),c=i.document.createTime?vi(i.document.createTime):Pe.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=xn.newFoundDocument(a,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];n=new Yh(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Bm(t,i.document),l=i.readTime?vi(i.readTime):Pe.min(),c=xn.newNoDocument(a,l),d=i.removedTargetIds||[];n=new Yh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Bm(t,i.document),l=i.removedTargetIds||[];n=new Yh([],l,a,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new R5(a,l),d=i.targetId;n=new xA(d,c)}}return n}function z5(t,e){let n;if(e instanceof $u)n={update:S1(t,e.key,e.value)};else if(e instanceof tg)n={delete:C0(t,e.key)};else if(e instanceof aa)n={update:S1(t,e.key,e.data),updateMask:Y5(e.fieldMask)};else{if(!(e instanceof S5))return Me(16599,{ft:e.type});n={verify:C0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof _f)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ou)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Me(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:P5(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)}(t,e.precondition)),n}function U5(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map(n=>function(a,l){let c=a.updateTime?vi(a.updateTime):vi(l);return c.isEqual(Pe.min())&&(c=vi(l)),new w5(c,a.transformResults||[])}(n,e))):[]}function j5(t,e){return{documents:[RA(t,e.path)]}}function B5(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=RA(t,a);const l=function(p){if(p.length!==0)return IA(Hr.create(p,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:hl(b.field),direction:$5(b.dir)}}(y))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=A0(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:a}}function H5(t){let e=V5(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){ct(i===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=function(v){const b=NA(v);return b instanceof Hr&&iA(b)?b.getFilters():[b]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(b=>function(T){return new Mu(fl(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(b))}(n.orderBy));let d=null;n.limit&&(d=function(v){let b;return b=typeof v=="object"?v.value:v,Xf(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(v){const b=!!v.before,E=v.values||[];return new vf(E,b)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const b=!v.before,E=v.values||[];return new vf(E,b)}(n.endAt)),l5(e,a,c,l,d,"F",f,p)}function q5(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function NA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fl(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=fl(n.unaryFilter.field);return Ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fl(n.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=fl(n.unaryFilter.field);return Ft.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(fl(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Hr.create(n.compositeFilter.filters.map(i=>NA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function $5(t){return k5[t]}function F5(t){return D5[t]}function G5(t){return M5[t]}function hl(t){return{fieldPath:t.canonicalString()}}function fl(t){return mn.fromServerFormat(t.fieldPath)}function IA(t){return t instanceof Ft?function(n){if(n.op==="=="){if(d1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(u1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(u1(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:F5(n.op),value:n.value}}}(t):t instanceof Hr?function(n){const i=n.getFilters().map(a=>IA(a));return i.length===1?i[0]:{compositeFilter:{op:G5(n.op),filters:i}}}(t):Me(54877,{filter:t})}function Y5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,i,a,l=Pe.min(),c=Pe.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.wt=e}}function X5(t){const e=H5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?T0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.Cn=new W5}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(Js.min())}updateCollectionGroup(e,n,i){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class W5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Zt(_t.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DA=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(DA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Pl(0)}static lr(){return new Pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="LruGarbageCollector",Z5=1048576;function R1([t,e],[n,i]){const a=qe(t,n);return a===0?qe(e,i):a}class J5{constructor(e){this.Er=e,this.buffer=new Zt(R1),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();R1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eP{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ee(A1,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bl(n)?Ee(A1,"Ignoring IndexedDB error during garbage collection: ",n):await jl(n)}await this.mr(3e5)})}}class tP{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(Kf.le);const i=new J5(n);return this.gr.forEachTarget(e,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(T1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T1):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,a,l,c,d,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,n))).next(v=>(l=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),ul()<=Qe.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function nP(t,e){return new tP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.changes=new ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ve.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(i!==null&&mu(i.mutation,a,sr.empty(),bt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,We()).next(()=>i))}getLocalViewOfDocuments(e,n,i=We()){const a=Ga();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,i).next(l=>{let c=uu();return l.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=Ga();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,We()))}populateOverlays(e,n,i){const a=[];return i.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,i,a){let l=is();const c=pu(),d=function(){return pu()}();return n.forEach((f,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof aa)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),mu(y.mutation,p,y.mutation.getFieldMask(),bt.now())):c.set(p.key,sr.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((p,y)=>c.set(p,y)),n.forEach((p,y)=>{var v;return d.set(p,new iP(y,(v=c.get(p))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,n){const i=pu();let a=new At((c,d)=>c-d),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let y=i.get(f)||sr.empty();y=d.applyToLocalView(p,y),i.set(f,y);const v=(a.get(d.batchId)||We()).add(f);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,y=f.value,v=gA();y.forEach(b=>{if(!l.has(b)){const E=bA(n.get(b),i.get(b));E!==null&&v.set(b,E),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return ve.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,a){return function(c){return Ne.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):ve.resolve(Ga());let d=Nu,f=l;return c.next(p=>ve.forEach(p,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?ve.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,f,p,We())).next(y=>({batchId:d,changes:fA(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(i=>{let a=uu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let c=uu();return this.indexManager.getCollectionParents(e,l).next(d=>ve.forEach(d,f=>{const p=function(v,b){return new Hl(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(y=>{y.forEach((v,b)=>{c=c.insert(v,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a))).next(c=>{l.forEach((f,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,xn.newInvalidDocument(y)))});let d=uu();return c.forEach((f,p)=>{const y=l.get(f);y!==void 0&&mu(y.mutation,p,sr.empty(),bt.now()),Zf(n,p)&&(d=d.insert(f,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ve.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:vi(a.createTime)}}(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:X5(a.bundledQuery),readTime:vi(a.readTime)}}(n)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.overlays=new At(Ne.comparator),this.Qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ga();return ve.forEach(n,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((a,l)=>{this.St(e,n,l)}),ve.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),ve.resolve()}getOverlaysForCollection(e,n,i){const a=Ga(),l=n.length+1,c=new Ne(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ve.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new At((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=Ga(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=Ga(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return ve.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new A5(n,i));let l=this.Qr.get(n);l===void 0&&(l=We(),this.Qr.set(n,l)),this.Qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.$r=new Zt(on.Ur),this.Kr=new Zt(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new on(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new on(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ne(new _t([])),i=new on(n,e),a=new on(n,e+1),l=[];return this.Kr.forEachInRange([i,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ne(new _t([])),i=new on(n,e),a=new on(n,e+1);let l=We();return this.Kr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const n=new on(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ne.comparator(e.key,n.key)||qe(e.Zr,n.Zr)}static Wr(e,n){return qe(e.Zr,n.Zr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(on.Ur)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new T5(l,n,i,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new on(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,n){return ve.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ti(i),l=a<0?0:a;return ve.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?py:this.nr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new on(n,0),a=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,a],c=>{const d=this.ei(c.Zr);l.push(d)}),ve.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(qe);return n.forEach(a=>{const l=new on(a,0),c=new on(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{i=i.add(d.Zr)})}),ve.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;Ne.isDocumentKey(l)||(l=l.child(""));const c=new on(new Ne(l),0);let d=new Zt(qe);return this.Xr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(f.Zr)),!0)},c),ve.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(i=>{const a=this.ei(i);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){ct(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return ve.forEach(n.mutations,a=>{const l=new on(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new on(n,0),a=this.Xr.firstAfterOrEqual(i);return ve.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.ii=e,this.docs=function(){return new At(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ve.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let i=is();return n.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():xn.newInvalidDocument(a))}),ve.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=is();const c=n.path,d=new Ne(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||j6(U6(y),i)<=0||(a.has(y.key)||Zf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ve.resolve(l)}getAllFromCollectionGroup(e,n,i,a){Me(9500)}si(e,n){return ve.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new dP(this)}getSize(e){return ve.resolve(this.size)}}class dP extends rP{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(i)}),ve.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.persistence=e,this.oi=new ao(n=>vy(n),_y),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this._i=0,this.ai=new Sy,this.targetCount=0,this.ui=Pl.cr()}forEachTarget(e,n){return this.oi.forEach((i,a)=>n(a)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),ve.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Pl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Tr(n),ve.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ve.waitFor(l).next(()=>a)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return ve.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),ve.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ve.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return ve.resolve(i)}containsKey(e,n){return ve.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n){this.ci={},this.overlays={},this.li=new Kf(0),this.hi=!1,this.hi=!0,this.Pi=new lP,this.referenceDelegate=e(this),this.Ti=new hP(this),this.indexManager=new Q5,this.remoteDocumentCache=function(a){return new uP(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new K5(n),this.Ei=new aP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new cP(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){Ee("MemoryPersistence","Starting transaction:",e);const a=new fP(this.li.next());return this.referenceDelegate.di(),i(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,n){return ve.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class fP extends H6{constructor(e){super(),this.currentSequenceNumber=e}}class Ty{constructor(e){this.persistence=e,this.Vi=new Sy,this.mi=null}static fi(e){return new Ty(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),ve.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.gi,i=>{const a=Ne.fromPath(i);return this.pi(e,a).next(l=>{l||n.removeEntry(a,Pe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ve.or([()=>ve.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ef{constructor(e,n){this.persistence=e,this.yi=new ao(i=>F6(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=nP(this,n)}static fi(e,n){return new Ef(e,n)}di(){}Ai(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(a=>i+a))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return ve.forEach(this.yi,(i,a)=>this.Dr(e,i,a).next(l=>l?ve.resolve():n(a)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,n).next(d=>{d||(i++,l.removeEntry(c,Pe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$h(e.data.value)),n}Dr(e,n,i){return ve.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return ve.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.ds=i,this.As=a}static Rs(e,n){let i=We(),a=We();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ay(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return qM()?8:q6(Tn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.ws(e,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(e,n,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new gP;return this.Ss(e,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(e,n,c,d.size)})}).next(()=>l.result)}Ds(e,n,i,a){return i.documentReadCount<this.gs?(ul()<=Qe.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ve.resolve()):(ul()<=Qe.DEBUG&&Ee("QueryEngine","Query:",dl(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(ul()<=Qe.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):ve.resolve())}ws(e,n){if(p1(n))return ve.resolve(null);let i=yi(n);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=T0(n,null,"F"),i=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=We(...l);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.vs(n,d);return this.Cs(n,p,c,f.readTime)?this.ws(e,T0(n,null,"F")):this.Fs(e,p,n,f)}))})))}bs(e,n,i,a){return p1(n)||a.isEqual(Pe.min())?ve.resolve(null):this.ys.getDocuments(e,i).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,i,a)?ve.resolve(null):(ul()<=Qe.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),dl(n)),this.Fs(e,c,n,z6(a,Nu)).next(d=>d))})}vs(e,n){let i=new Zt(dA(e));return n.forEach((a,l)=>{Zf(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,i){return ul()<=Qe.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ys.getDocumentsMatchingQuery(e,n,Js.min(),i)}Fs(e,n,i,a){return this.ys.getDocumentsMatchingQuery(e,i,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LocalStore",mP=3e8;class yP{constructor(e,n,i,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new At(qe),this.Os=new ao(l=>vy(l),_y),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function vP(t,e,n,i){return new yP(t,e,n,i)}async function OA(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let f=We();for(const p of a){c.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(i,f).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:d}))})})}function _P(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,p,y){const v=p.batch,b=v.keys();let E=ve.resolve();return b.forEach(T=>{E=E.next(()=>y.getEntry(f,T)).next(M=>{const N=p.docVersions.get(T);ct(N!==null,48541),M.version.compareTo(N)<0&&(v.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))})}),E.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=We();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,a))})}function PA(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function bP(t,e){const n=Ve(t),i=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];e.targetChanges.forEach((y,v)=>{const b=a.get(v);if(!b)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let E=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(yn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,i)),a=a.insert(v,E),function(M,N,V){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=mP?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(b,E,y)&&d.push(n.Ti.updateTargetData(l,E))});let f=is(),p=We();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(wP(l,c,e.documentUpdates).next(y=>{f=y.qs,p=y.Qs})),!i.isEqual(Pe.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return ve.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,f,p)).next(()=>f)}).then(l=>(n.xs=a,l))}function wP(t,e,n){let i=We(),a=We();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let c=is();return n.forEach((d,f)=>{const p=l.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Ee(Ry,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)}),{qs:c,Qs:a}})}function EP(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=py),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xP(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return n.Ti.getTargetData(i,e).next(l=>l?(a=l,ve.resolve(a)):n.Ti.allocateTargetId(i).next(c=>(a=new qs(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=n.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function I0(t,e,n){const i=Ve(t),a=i.xs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Bl(c))throw c;Ee(Ry,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(a.target)}function C1(t,e,n){const i=Ve(t);let a=Pe.min(),l=We();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,y){const v=Ve(f),b=v.Os.get(y);return b!==void 0?ve.resolve(v.xs.get(b)):v.Ti.getTargetData(p,y)}(i,c,yi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(f=>{l=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,n?a:Pe.min(),n?l:We())).next(d=>(SP(i,u5(e),d),{documents:d,$s:l})))}function SP(t,e,n){let i=t.Ns.get(e)||Pe.min();n.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Ns.set(e,i)}class N1{constructor(){this.activeTargetIds=m5()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TP{constructor(){this.xo=new N1,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new N1,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="ConnectivityMonitor";class k1{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ee(I1,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ee(I1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function k0(){return Mh===null?Mh=function(){return 268435456+Math.round(2147483648*Math.random())}():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="RestConnection",RP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===mf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(e,n,i,a,l){const c=k0(),d=this.jo(e,n.toUriEncodedString());Ee(Hm,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,a,l);const{host:p}=new URL(d),y=so(p);return this.Jo(e,d,f,i,y).then(v=>(Ee(Hm,`Received RPC '${e}' ${c}: `,v),v),v=>{throw kl(Hm,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v})}Yo(e,n,i,a,l,c){return this.zo(e,n,i,a,l)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}jo(e,n){const i=RP[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class IP extends CP{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,l){const c=k0();return new Promise((d,f)=>{const p=new LT;p.setWithCredentials(!0),p.listenOnce(zT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case qh.NO_ERROR:const v=p.getResponseJson();Ee(wn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case qh.TIMEOUT:Ee(wn,`RPC '${e}' ${c} timed out`),f(new xe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const b=p.getStatus();if(Ee(wn,`RPC '${e}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let E=p.getResponseJson();Array.isArray(E)&&(E=E[0]);const T=E?.error;if(T&&T.status&&T.message){const M=function(V){const B=V.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(B)>=0?B:ye.UNKNOWN}(T.status);f(new xe(M,T.message))}else f(new xe(ye.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new xe(ye.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{Ee(wn,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);Ee(wn,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",y,i,15)})}I_(e,n,i){const a=k0(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=BT(),d=jT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const y=l.join("");Ee(wn,`Creating RPC '${e}' stream ${a}: ${y}`,f);const v=c.createWebChannel(y,f);this.E_(v);let b=!1,E=!1;const T=new NP({Zo:N=>{E?Ee(wn,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(b||(Ee(wn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),Ee(wn,`RPC '${e}' stream ${a} sending:`,N),v.send(N))},Xo:()=>v.close()}),M=(N,V,B)=>{N.listen(V,$=>{try{B($)}catch(j){setTimeout(()=>{throw j},0)}})};return M(v,cu.EventType.OPEN,()=>{E||(Ee(wn,`RPC '${e}' stream ${a} transport opened.`),T.__())}),M(v,cu.EventType.CLOSE,()=>{E||(E=!0,Ee(wn,`RPC '${e}' stream ${a} transport closed`),T.u_(),this.d_(v))}),M(v,cu.EventType.ERROR,N=>{E||(E=!0,kl(wn,`RPC '${e}' stream ${a} transport errored. Name:`,N.name,"Message:",N.message),T.u_(new xe(ye.UNAVAILABLE,"The operation could not be completed")))}),M(v,cu.EventType.MESSAGE,N=>{var V;if(!E){const B=N.data[0];ct(!!B,16349);const $=B,j=$?.error||((V=$[0])===null||V===void 0?void 0:V.error);if(j){Ee(wn,`RPC '${e}' stream ${a} received error:`,j);const ne=j.status;let te=function(C){const z=qt[C];if(z!==void 0)return EA(z)}(ne),O=j.message;te===void 0&&(te=ye.INTERNAL,O="Unknown error status: "+ne+" with message "+j.message),E=!0,T.u_(new xe(te,O)),v.close()}else Ee(wn,`RPC '${e}' stream ${a} received:`,B),T.c_(B)}}),M(d,UT.STAT_EVENT,N=>{N.stat===v0.PROXY?Ee(wn,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===v0.NOPROXY&&Ee(wn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{T.a_()},0),T}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){return new O5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,i=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-i);a>0&&Ee("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="PersistentStream";class LA{constructor(e,n,i,a,l,c,d,f){this.xi=e,this.S_=i,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new VA(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(rs(n.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.v_===n&&this.z_(i,a)},i=>{e(()=>{const a=new xe(ye.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(a)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.j_(a))}),this.stream.onMessage(a=>{i(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Ee(D1,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Ee(D1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kP extends LA{constructor(e,n,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=L5(this.serializer,e),i=function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?vi(c.readTime):Pe.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=N0(this.serializer),n.addTarget=function(l,c){let d;const f=c.target;if(d=x0(f)?{documents:j5(l,f)}:{query:B5(l,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=TA(l,c.resumeToken);const p=A0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Pe.min())>0){d.readTime=wf(l,c.snapshotVersion.toTimestamp());const p=A0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=q5(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=N0(this.serializer),n.removeTarget=e,this.Q_(n)}}class DP extends LA{constructor(e,n,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=U5(e.writeResults,e.commitTime),i=vi(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=N0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>z5(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{}class OP extends MP{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,R0(n,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(ye.UNKNOWN,l.toString())})}Yo(e,n,i,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,R0(n,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(ye.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class PP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(rs(n),this.ua=!1):Ee("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="RemoteStore";class VP{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{oo(this)&&(Ee(to,"Restarting streams for network reachability change."),await async function(f){const p=Ve(f);p.da.add(4),await Gu(p),p.Va.set("Unknown"),p.da.delete(4),await ig(p)}(this))})}),this.Va=new PP(i,a)}}async function ig(t){if(oo(t))for(const e of t.Aa)await e(!0)}async function Gu(t){for(const e of t.Aa)await e(!1)}function zA(t,e){const n=Ve(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ky(n)?Iy(n):ql(n).N_()&&Ny(n,e))}function Cy(t,e){const n=Ve(t),i=ql(n);n.Ea.delete(e),i.N_()&&UA(n,e),n.Ea.size===0&&(i.N_()?i.k_():oo(n)&&n.Va.set("Unknown"))}function Ny(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ql(t).Z_(e)}function UA(t,e){t.ma.Ke(e),ql(t).X_(e)}function Iy(t){t.ma=new I5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),ql(t).start(),t.Va.ca()}function ky(t){return oo(t)&&!ql(t).O_()&&t.Ea.size>0}function oo(t){return Ve(t).da.size===0}function jA(t){t.ma=void 0}async function LP(t){t.Va.set("Online")}async function zP(t){t.Ea.forEach((e,n)=>{Ny(t,e)})}async function UP(t,e){jA(t),ky(t)?(t.Va.Pa(e),Iy(t)):t.Va.set("Unknown")}async function jP(t,e,n){if(t.Va.set("Online"),e instanceof SA&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(t,e)}catch(i){Ee(to,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xf(t,i)}else if(e instanceof Yh?t.ma.Xe(e):e instanceof xA?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Pe.min()))try{const i=await PA(t.localStore);n.compareTo(i)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,p)=>{const y=l.Ea.get(f);if(!y)return;l.Ea.set(f,y.withResumeToken(yn.EMPTY_BYTE_STRING,y.snapshotVersion)),UA(l,f);const v=new qs(y.target,f,p,y.sequenceNumber);Ny(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){Ee(to,"Failed to raise snapshot:",i),await xf(t,i)}}async function xf(t,e,n){if(!Bl(e))throw e;t.da.add(1),await Gu(t),t.Va.set("Offline"),n||(n=()=>PA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ee(to,"Retrying IndexedDB access"),await n(),t.da.delete(1),await ig(t)})}function BA(t,e){return e().catch(n=>xf(t,n,e))}async function sg(t){const e=Ve(t),n=ra(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:py;for(;BP(e);)try{const a=await EP(e.localStore,i);if(a===null){e.Ia.length===0&&n.k_();break}i=a.batchId,HP(e,a)}catch(a){await xf(e,a)}HA(e)&&qA(e)}function BP(t){return oo(t)&&t.Ia.length<10}function HP(t,e){t.Ia.push(e);const n=ra(t);n.N_()&&n.ea&&n.ta(e.mutations)}function HA(t){return oo(t)&&!ra(t).O_()&&t.Ia.length>0}function qA(t){ra(t).start()}async function qP(t){ra(t).ia()}async function $P(t){const e=ra(t);for(const n of t.Ia)e.ta(n.mutations)}async function FP(t,e,n){const i=t.Ia.shift(),a=wy.from(i,e,n);await BA(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await sg(t)}async function GP(t,e){e&&ra(t).ea&&await async function(i,a){if(function(c){return C5(c)&&c!==ye.ABORTED}(a.code)){const l=i.Ia.shift();ra(i).L_(),await BA(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await sg(i)}}(t,e),HA(t)&&qA(t)}async function M1(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),Ee(to,"RemoteStore received new credentials");const i=oo(n);n.da.add(3),await Gu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await ig(n)}async function YP(t,e){const n=Ve(t);e?(n.da.delete(2),await ig(n)):e||(n.da.add(2),await Gu(n),n.Va.set("Unknown"))}function ql(t){return t.fa||(t.fa=function(n,i,a){const l=Ve(n);return l.oa(),new kP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:LP.bind(null,t),n_:zP.bind(null,t),i_:UP.bind(null,t),Y_:jP.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),ky(t)?Iy(t):t.Va.set("Unknown")):(await t.fa.stop(),jA(t))})),t.fa}function ra(t){return t.ga||(t.ga=function(n,i,a){const l=Ve(n);return l.oa(),new DP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:qP.bind(null,t),i_:GP.bind(null,t),na:$P.bind(null,t),ra:FP.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await sg(t)):(await t.ga.stop(),t.Ia.length>0&&(Ee(to,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const c=Date.now()+i,d=new Dy(e,n,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(t,e){if(rs("AsyncQueue",`${e}: ${t}`),Bl(t))return new xe(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{static emptySet(e){return new El(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ne.comparator(n.key,i.key):(n,i)=>Ne.comparator(n.key,i.key),this.keyedMap=uu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new El;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.pa=new At(Ne.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Vl{constructor(e,n,i,a,l,c,d,f,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new Vl(e,n,El.emptySet(n),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class XP{constructor(){this.queries=P1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Ve(n),l=a.queries;a.queries=P1(),l.forEach((c,d)=>{for(const f of d.Sa)f.onError(i)})})(this,new xe(ye.ABORTED,"Firestore shutting down"))}}function P1(){return new ao(t=>uA(t),Wf)}async function QP(t,e){const n=Ve(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.Da()&&e.va()&&(i=2):(l=new KP,i=e.va()?0:1);try{switch(i){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=My(c,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,l),l.Sa.push(e),e.Fa(n.onlineState),l.ba&&e.Ma(l.ba)&&Oy(n)}async function WP(t,e){const n=Ve(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.va()?0:1:!l.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function ZP(t,e){const n=Ve(t);let i=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(i=!0);c.ba=a}}i&&Oy(n)}function JP(t,e,n){const i=Ve(t),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);i.queries.delete(e)}function Oy(t){t.Ca.forEach(e=>{e.next()})}var D0,V1;(V1=D0||(D0={})).xa="default",V1.Cache="cache";class eV{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Vl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==D0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.key=e}}class FA{constructor(e){this.key=e}}class tV{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.Za=dA(e),this.Xa=new El(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new O1,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,v)=>{const b=a.get(y),E=Zf(this.query,v)?v:null,T=!!b&&this.mutatedKeys.has(b.key),M=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let N=!1;b&&E?b.data.isEqual(E.data)?T!==M&&(i.track({type:3,doc:E}),N=!0):this.ru(b,E)||(i.track({type:2,doc:E}),N=!0,(f&&this.Za(E,f)>0||p&&this.Za(E,p)<0)&&(d=!0)):!b&&E?(i.track({type:0,doc:E}),N=!0):b&&!E&&(i.track({type:1,doc:b}),N=!0,(f||p)&&(d=!0)),N&&(E?(c=c.add(E),l=M?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:c,nu:i,Cs:d,mutatedKeys:l}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((y,v)=>function(E,T){const M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:N})}};return M(E)-M(T)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(i),a=a!=null&&a;const d=n&&!a?this.su():[],f=this.Ya.size===0&&this.current&&!a?1:0,p=f!==this.Ja;return this.Ja=f,c.length!==0||p?{snapshot:new Vl(this.query,e.Xa,l,c,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new O1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new FA(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new $A(i))}),n}au(e){this.Ha=e.$s,this.Ya=We();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Vl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Py="SyncEngine";class nV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class rV{constructor(e){this.key=e,this.cu=!1}}class iV{constructor(e,n,i,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new ao(d=>uA(d),Wf),this.Pu=new Map,this.Tu=new Set,this.Iu=new At(Ne.comparator),this.Eu=new Map,this.du=new Sy,this.Au={},this.Ru=new Map,this.Vu=Pl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function sV(t,e,n=!0){const i=WA(t);let a;const l=i.hu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await GA(i,e,n,!0),a}async function aV(t,e){const n=WA(t);await GA(n,e,!0,!1)}async function GA(t,e,n,i){const a=await xP(t.localStore,yi(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let d;return i&&(d=await oV(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&zA(t.remoteStore,a),d}async function oV(t,e,n,i,a){t.fu=(v,b,E)=>async function(M,N,V,B){let $=N.view.tu(V);$.Cs&&($=await C1(M.localStore,N.query,!1).then(({documents:O})=>N.view.tu(O,$)));const j=B&&B.targetChanges.get(N.targetId),ne=B&&B.targetMismatches.get(N.targetId)!=null,te=N.view.applyChanges($,M.isPrimaryClient,j,ne);return z1(M,N.targetId,te.ou),te.snapshot}(t,v,b,E);const l=await C1(t.localStore,e,!0),c=new tV(e,l.$s),d=c.tu(l.documents),f=Fu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),p=c.applyChanges(d,t.isPrimaryClient,f);z1(t,n,p.ou);const y=new nV(e,n,c);return t.hu.set(e,y),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),p.snapshot}async function lV(t,e,n){const i=Ve(t),a=i.hu.get(e),l=i.Pu.get(a.targetId);if(l.length>1)return i.Pu.set(a.targetId,l.filter(c=>!Wf(c,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await I0(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),n&&Cy(i.remoteStore,a.targetId),M0(i,a.targetId)}).catch(jl)):(M0(i,a.targetId),await I0(i.localStore,a.targetId,!0))}async function cV(t,e){const n=Ve(t),i=n.hu.get(e),a=n.Pu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Cy(n.remoteStore,i.targetId))}async function uV(t,e,n){const i=yV(t);try{const a=await function(c,d){const f=Ve(c),p=bt.now(),y=d.reduce((E,T)=>E.add(T.key),We());let v,b;return f.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=is(),M=We();return f.Bs.getEntries(E,y).next(N=>{T=N,T.forEach((V,B)=>{B.isValidDocument()||(M=M.add(V))})}).next(()=>f.localDocuments.getOverlayedDocuments(E,T)).next(N=>{v=N;const V=[];for(const B of d){const $=x5(B,v.get(B.key).overlayedDocument);$!=null&&V.push(new aa(B.key,$,tA($.value.mapValue),ar.exists(!0)))}return f.mutationQueue.addMutationBatch(E,p,V,d)}).next(N=>{b=N;const V=N.applyToLocalDocumentSet(v,M);return f.documentOverlayCache.saveOverlays(E,N.batchId,V)})}).then(()=>({batchId:b.batchId,changes:fA(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,f){let p=c.Au[c.currentUser.toKey()];p||(p=new At(qe)),p=p.insert(d,f),c.Au[c.currentUser.toKey()]=p}(i,a.batchId,n),await Yu(i,a.changes),await sg(i.remoteStore)}catch(a){const l=My(a,"Failed to persist write");n.reject(l)}}async function YA(t,e){const n=Ve(t);try{const i=await bP(n.localStore,e);e.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ct(c.cu,14607):a.removedDocuments.size>0&&(ct(c.cu,42227),c.cu=!1))}),await Yu(n,i,e)}catch(i){await jl(i)}}function L1(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.hu.forEach((l,c)=>{const d=c.view.Fa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const f=Ve(c);f.onlineState=d;let p=!1;f.queries.forEach((y,v)=>{for(const b of v.Sa)b.Fa(d)&&(p=!0)}),p&&Oy(f)}(i.eventManager,e),a.length&&i.lu.Y_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dV(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new At(Ne.comparator);c=c.insert(l,xn.newNoDocument(l,Pe.min()));const d=We().add(l),f=new ng(Pe.min(),new Map,new At(qe),c,d);await YA(i,f),i.Iu=i.Iu.remove(l),i.Eu.delete(e),Vy(i)}else await I0(i.localStore,e,!1).then(()=>M0(i,e,n)).catch(jl)}async function hV(t,e){const n=Ve(t),i=e.batch.batchId;try{const a=await _P(n.localStore,e);XA(n,i,null),KA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Yu(n,a)}catch(a){await jl(a)}}async function fV(t,e,n){const i=Ve(t);try{const a=await function(c,d){const f=Ve(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,d).next(v=>(ct(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(i.localStore,e);XA(i,e,n),KA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Yu(i,a)}catch(a){await jl(a)}}function KA(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function XA(t,e,n){const i=Ve(t);let a=i.Au[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.Au[i.currentUser.toKey()]=a}}function M0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||QA(t,i)})}function QA(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(Cy(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Vy(t))}function z1(t,e,n){for(const i of n)i instanceof $A?(t.du.addReference(i.key,e),gV(t,i)):i instanceof FA?(Ee(Py,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||QA(t,i.key)):Me(19791,{pu:i})}function gV(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(Ee(Py,"New document in limbo: "+n),t.Tu.add(i),Vy(t))}function Vy(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ne(_t.fromString(e)),i=t.Vu.next();t.Eu.set(i,new rV(n)),t.Iu=t.Iu.insert(n,i),zA(t.remoteStore,new qs(yi(lA(n.path)),i,"TargetPurposeLimboResolution",Kf.le))}}async function Yu(t,e,n){const i=Ve(t),a=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((d,f)=>{c.push(i.fu(f,e,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=n?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){a.push(p);const v=Ay.Rs(f.targetId,p);l.push(v)}}))}),await Promise.all(c),i.lu.Y_(a),await async function(f,p){const y=Ve(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ve.forEach(p,b=>ve.forEach(b.ds,E=>y.persistence.referenceDelegate.addReference(v,b.targetId,E)).next(()=>ve.forEach(b.As,E=>y.persistence.referenceDelegate.removeReference(v,b.targetId,E)))))}catch(v){if(!Bl(v))throw v;Ee(Ry,"Failed to update sequence numbers: "+v)}for(const v of p){const b=v.targetId;if(!v.fromCache){const E=y.xs.get(b),T=E.snapshotVersion,M=E.withLastLimboFreeSnapshotVersion(T);y.xs=y.xs.insert(b,M)}}}(i.localStore,l))}async function pV(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){Ee(Py,"User change. New user:",e.toKey());const i=await OA(n.localStore,e);n.currentUser=e,function(l,c){l.Ru.forEach(d=>{d.forEach(f=>{f.reject(new xe(ye.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Yu(n,i.ks)}}function mV(t,e){const n=Ve(t),i=n.Eu.get(e);if(i&&i.cu)return We().add(i.key);{let a=We();const l=n.Pu.get(e);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function WA(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dV.bind(null,e),e.lu.Y_=ZP.bind(null,e.eventManager),e.lu.gu=JP.bind(null,e.eventManager),e}function yV(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fV.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return vP(this.persistence,new pP,e.initialUser,this.serializer)}Su(e){return new MA(Ty.fi,this.serializer)}bu(e){return new TP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class vV extends Sf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ct(this.persistence.referenceDelegate instanceof Ef,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eP(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new MA(i=>Ef.fi(i,n),this.serializer)}}class O0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>L1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pV.bind(null,this.syncEngine),await YP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XP}()}createDatastore(e){const n=rg(e.databaseInfo.databaseId),i=function(l){return new IP(l)}(e.databaseInfo);return function(l,c,d,f){return new OP(l,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,a,l,c,d){return new VP(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>L1(this.syncEngine,n,0),function(){return k1.C()?new k1:new AP}())}createSyncEngine(e,n){return function(a,l,c,d,f,p,y){const v=new iV(a,l,c,d,f,p);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const l=Ve(a);Ee(to,"RemoteStore shutting down."),l.da.add(5),await Gu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}O0.provider={build:()=>new O0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class bV{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=En.UNAUTHENTICATED,this.clientId=FT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{Ee(ia,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Ee(ia,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=My(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function $m(t,e){t.asyncQueue.verifyOperationInProgress(),Ee(ia,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async a=>{i.isEqual(a)||(await OA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wV(t);Ee(ia,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>M1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>M1(e.remoteStore,a)),t._onlineComponents=e}async function wV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ee(ia,"Using user provided OfflineComponentProvider");try{await $m(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===ye.FAILED_PRECONDITION||a.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;kl("Error using user provided cache. Falling back to memory cache: "+n),await $m(t,new Sf)}}else Ee(ia,"Using default OfflineComponentProvider"),await $m(t,new vV(void 0));return t._offlineComponents}async function ZA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ee(ia,"Using user provided OnlineComponentProvider"),await U1(t,t._uninitializedComponentsProvider._online)):(Ee(ia,"Using default OnlineComponentProvider"),await U1(t,new O0))),t._onlineComponents}function EV(t){return ZA(t).then(e=>e.syncEngine)}async function xV(t){const e=await ZA(t),n=e.eventManager;return n.onListen=sV.bind(null,e.syncEngine),n.onUnlisten=lV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cV.bind(null,e.syncEngine),n}function SV(t,e,n={}){const i=new Xs;return t.asyncQueue.enqueueAndForget(async()=>function(l,c,d,f,p){const y=new _V({next:b=>{y.xu(),c.enqueueAndForget(()=>WP(l,v)),b.fromCache&&f.source==="server"?p.reject(new xe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new eV(d,y,{includeMetadataChanges:!0,Qa:!0});return QP(l,v)}(await xV(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t,e,n){if(!n)throw new xe(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TV(t,e,n,i){if(e===!0&&i===!0)throw new xe(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function B1(t){if(!Ne.isDocumentKey(t))throw new xe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H1(t){if(Ne.isDocumentKey(t))throw new xe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ag(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function no(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ag(t);throw new xe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="firestore.googleapis.com",q1=!0;class $1{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=t2,this.ssl=q1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:q1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z5)throw new xe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class og{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new N6;switch(i.type){case"firstParty":return new M6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=j1.get(n);i&&(Ee("ComponentProvider","Removing Datastore"),j1.delete(n),i.terminate())}(this),Promise.resolve()}}function AV(t,e,n,i={}){var a;t=no(t,og);const l=so(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;l&&(ly(`https://${f}`),cy("Firestore",!0)),c.host!==t2&&c.host!==f&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:l,emulatorOptions:i});if(!Za(p,d)&&(t._setSettings(p),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=En.MOCK_USER;else{y=OM(i.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new xe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new En(b)}t._authCredentials=new I6(new qT(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new lo(this.firestore,e,this._query)}}class or{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Qs extends lo{constructor(e,n,i){super(e,n,lA(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ne(e))}withConverter(e){return new Qs(this.firestore,e,this._path)}}function Ly(t,e,...n){if(t=Mt(t),e2("collection","path",e),t instanceof og){const i=_t.fromString(e,...n);return H1(i),new Qs(t,null,i)}{if(!(t instanceof or||t instanceof Qs))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_t.fromString(e,...n));return H1(i),new Qs(t.firestore,null,i)}}function $l(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=FT.newId()),e2("doc","path",e),t instanceof og){const i=_t.fromString(e,...n);return B1(i),new or(t,null,new Ne(i))}{if(!(t instanceof or||t instanceof Qs))throw new xe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_t.fromString(e,...n));return B1(i),new or(t.firestore,t instanceof Qs?t.converter:null,new Ne(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="AsyncQueue";class G1{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new VA(this,"async_queue_retry"),this.rc=()=>{const i=qm();i&&Ee(F1,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=qm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=qm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Xs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Bl(e))throw e;Ee(F1,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,rs("INTERNAL UNHANDLED ERROR: ",Y1(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Dy.createAndSchedule(this,e,n,i,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Me(47125,{cc:Y1(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Y1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ku extends og{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new G1,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G1(e),this._firestoreClient=void 0,await e}}}function RV(t,e){const n=typeof t=="object"?t:hy(),i=typeof t=="string"?t:mf,a=Yf(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=ST("firestore");l&&AV(a,...l)}return a}function zy(t){if(t._terminated)throw new xe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CV(t),t._firestoreClient}function CV(t){var e,n,i;const a=t._freezeSettings(),l=function(d,f,p,y){return new K6(d,f,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,JA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new bV(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ll(yn.fromBase64String(e))}catch(n){throw new xe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ll(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=/^__.*__$/;class IV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new $u(e,this.data,n,this.fieldTransforms)}}class n2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function r2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class Hy{constructor(e,n,i,a,l,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Vc(e),a}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Tf(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(r2(this.Ic)&&NV.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class kV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||rg(e)}bc(e,n,i,a=!1){return new Hy({Ic:e,methodName:n,wc:i,path:mn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qy(t){const e=t._freezeSettings(),n=rg(t._databaseId);return new kV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function i2(t,e,n,i,a,l={}){const c=t.bc(l.merge||l.mergeFields?2:0,e,n,a);$y("Data must be an object, but it was:",c,i);const d=s2(i,c);let f,p;if(l.merge)f=new sr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=P0(e,v,n);if(!c.contains(b))throw new xe(ye.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);o2(y,b)||y.push(b)}f=new sr(y),p=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=c.fieldTransforms;return new IV(new Hn(d),f,p)}class cg extends Uy{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cg}}function DV(t,e,n,i){const a=t.bc(1,e,n);$y("Data must be an object, but it was:",a,i);const l=[],c=Hn.empty();sa(i,(f,p)=>{const y=Fy(e,f,n);p=Mt(p);const v=a.mc(y);if(p instanceof cg)l.push(y);else{const b=Xu(p,v);b!=null&&(l.push(y),c.set(y,b))}});const d=new sr(l);return new n2(c,d,a.fieldTransforms)}function MV(t,e,n,i,a,l){const c=t.bc(1,e,n),d=[P0(e,i,n)],f=[a];if(l.length%2!=0)throw new xe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(P0(e,l[b])),f.push(l[b+1]);const p=[],y=Hn.empty();for(let b=d.length-1;b>=0;--b)if(!o2(p,d[b])){const E=d[b];let T=f[b];T=Mt(T);const M=c.mc(E);if(T instanceof cg)p.push(E);else{const N=Xu(T,M);N!=null&&(p.push(E),y.set(E,N))}}const v=new sr(p);return new n2(y,v,c.fieldTransforms)}function OV(t,e,n,i=!1){return Xu(n,t.bc(i?4:3,e))}function Xu(t,e){if(a2(t=Mt(t)))return $y("Unsupported field value:",e,t),s2(t,e);if(t instanceof Uy)return function(i,a){if(!r2(a.Ic))throw a.gc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let f=Xu(d,a.fc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}}(t,e)}return function(i,a){if((i=Mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return y5(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=bt.fromDate(i);return{timestampValue:wf(a.serializer,l)}}if(i instanceof bt){const l=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wf(a.serializer,l)}}if(i instanceof jy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ll)return{bytesValue:TA(a.serializer,i._byteString)};if(i instanceof or){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:xy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof By)return function(c,d){return{mapValue:{fields:{[JT]:{stringValue:eA},[yf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.gc("VectorValues must only contain numeric values.");return by(d.serializer,p)})}}}}}}(i,a);throw a.gc(`Unsupported field value: ${ag(i)}`)}(t,e)}function s2(t,e){const n={};return YT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(i,a)=>{const l=Xu(a,e.Ac(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function a2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof jy||t instanceof Ll||t instanceof or||t instanceof Uy||t instanceof By)}function $y(t,e,n){if(!a2(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const i=ag(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function P0(t,e,n){if((e=Mt(e))instanceof lg)return e._internalPath;if(typeof e=="string")return Fy(t,e);throw Tf("Field path arguments must be of type string or ",t,!1,void 0,n)}const PV=new RegExp("[~\\*/\\[\\]]");function Fy(t,e,n){if(e.search(PV)>=0)throw Tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lg(...e.split("."))._internalPath}catch{throw Tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tf(t,e,n,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${i}`),c&&(f+=` in document ${a}`),f+=")"),new xe(ye.INVALID_ARGUMENT,d+t+f)}function o2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ug("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VV extends l2{data(){return super.data()}}function ug(t,e){return typeof e=="string"?Fy(t,e):e instanceof lg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gy{}class c2 extends Gy{}function zV(t,e,...n){let i=[];e instanceof Gy&&i.push(e),i=i.concat(n),function(l){const c=l.filter(f=>f instanceof Yy).length,d=l.filter(f=>f instanceof dg).length;if(c>1||c>0&&d>0)throw new xe(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)t=a._apply(t);return t}class dg extends c2{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new dg(e,n,i)}_apply(e){const n=this._parse(e);return u2(e._query,n),new lo(e.firestore,e.converter,S0(e._query,n))}_parse(e){const n=qy(e.firestore);return function(l,c,d,f,p,y,v){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){X1(v,y);const T=[];for(const M of v)T.push(K1(f,l,M));b={arrayValue:{values:T}}}else b=K1(f,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||X1(v,y),b=OV(d,c,v,y==="in"||y==="not-in");return Ft.create(p,y,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function UV(t,e,n){const i=e,a=ug("where",t);return dg._create(a,i,n)}class Yy extends Gy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Hr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const f of d)u2(c,f),c=S0(c,f)}(e._query,n),new lo(e.firestore,e.converter,S0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ky extends c2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ky(e,n)}_apply(e){const n=function(a,l,c){if(a.startAt!==null)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(l,c)}(e._query,this._field,this._direction);return new lo(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Hl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function jV(t,e="asc"){const n=e,i=ug("orderBy",t);return Ky._create(i,n)}function K1(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new xe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cA(e)&&n.indexOf("/")!==-1)throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(_t.fromString(n));if(!Ne.isDocumentKey(i))throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return c1(t,new Ne(i))}if(n instanceof or)return c1(t,n._key);throw new xe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ag(n)}.`)}function X1(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function u2(t,e){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BV{convertValue(e,n="none"){switch(na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return sa(e,(a,l)=>{i[a]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,a;const l=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[yf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>Lt(c.doubleValue));return new By(l)}convertGeoPoint(e){return new jy(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Qf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const n=ea(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=_t.fromString(e);ct(kA(i),9688,{name:e});const a=new ku(i.get(1),i.get(3)),l=new Ne(i.popFirst(5));return a.isEqual(n)||rs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HV extends l2{constructor(e,n,i,a,l,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ug("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Kh extends HV{data(e={}){return super.data(e)}}class qV{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Oh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Kh(this._firestore,this._userDataWriter,i.key,i,new Oh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const f=new Kh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Oh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const f=new Kh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Oh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:$V(d.type),doc:f,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $V(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class FV extends BV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ll(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function Xy(t){t=no(t,lo);const e=no(t.firestore,Ku),n=zy(e),i=new FV(e);return LV(t._query),SV(n,t._query).then(a=>new qV(e,i,t,a))}function Qy(t,e,n){t=no(t,or);const i=no(t.firestore,Ku),a=d2(t.converter,e,n);return Wy(i,[i2(qy(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ar.none())])}function GV(t){return Wy(no(t.firestore,Ku),[new tg(t._key,ar.none())])}function Wy(t,e){return function(i,a){const l=new Xs;return i.asyncQueue.enqueueAndForget(async()=>uV(await EV(i),a,l)),l.promise}(zy(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qy(e)}set(e,n,i){this._verifyNotCommitted();const a=Fm(e,this._firestore),l=d2(a.converter,n,i),c=i2(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,ar.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const l=Fm(e,this._firestore);let c;return c=typeof(n=Mt(n))=="string"||n instanceof lg?MV(this._dataReader,"WriteBatch.update",l._key,n,i,a):DV(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new tg(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fm(t,e){if((t=Mt(t)).firestore!==e)throw new xe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){return zy(t=no(t,Ku)),new YV(t,e=>Wy(t,e))}(function(e,n=!0){(function(a){Ul=a})(zl),Ja(new Zs("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ku(new k6(i.getProvider("auth-internal")),new O6(c,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),mi(WE,ZE,e),mi(WE,ZE,"esm2017")})();function Zy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function f2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KV=f2,g2=new Hu("auth","Firebase",f2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new uy("@firebase/auth");function XV(t,...e){Af.logLevel<=Qe.WARN&&Af.warn(`Auth (${zl}): ${t}`,...e)}function Xh(t,...e){Af.logLevel<=Qe.ERROR&&Af.error(`Auth (${zl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,...e){throw Jy(t,...e)}function _i(t,...e){return Jy(t,...e)}function p2(t,e,n){const i=Object.assign(Object.assign({},KV()),{[e]:n});return new Hu("auth","Firebase",i).create(e,{appName:t.name})}function Ji(t){return p2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return g2.create(t,...e)}function De(t,e,...n){if(!t)throw Jy(e,...n)}function Wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xh(e),new Error(e)}function ss(t,e){t||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QV(){return Q1()==="http:"||Q1()==="https:"}function Q1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QV()||jM()||"connection"in navigator)?navigator.onLine:!0}function ZV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ss(n>e,"Short delay should be less than long delay!"),this.isMobile=LM()||BM()}get(){return WV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e){ss(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],t9=new Qu(3e4,6e4);function oa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function la(t,e,n,i,a={}){return y2(t,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=qu(Object.assign({key:t.config.apiKey},c)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},l);return UM()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&so(t.emulatorConfig.host)&&(p.credentials="include"),m2.fetch()(await v2(t,t.config.apiHost,n,d),p)})}async function y2(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},JV),e);try{const a=new r9(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ph(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Ph(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw Ph(t,"user-disabled",c);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw p2(t,y,p);qr(t,y)}}catch(a){if(a instanceof xi)throw a;qr(t,"network-request-failed",{message:String(a)})}}async function Wu(t,e,n,i,a={}){const l=await la(t,e,n,i,a);return"mfaPendingCredential"in l&&qr(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function v2(t,e,n,i){const a=`${e}${n}?${i}`,l=t,c=l.config.emulator?ev(t.config,a):`${t.config.apiScheme}://${a}`;return e9.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function n9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class r9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_i(this.auth,"network-request-failed")),t9.get())})}}function Ph(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=_i(t,e,i);return a.customData._tokenResponse=n,a}function W1(t){return t!==void 0&&t.enterprise!==void 0}class i9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return n9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function s9(t,e){return la(t,"GET","/v2/recaptchaConfig",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a9(t,e){return la(t,"POST","/v1/accounts:delete",e)}async function Rf(t,e){return la(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function o9(t,e=!1){const n=Mt(t),i=await n.getIdToken(e),a=tv(i);De(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:yu(Gm(a.auth_time)),issuedAtTime:yu(Gm(a.iat)),expirationTime:yu(Gm(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Gm(t){return Number(t)*1e3}function tv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Xh("JWT malformed, contained fewer than 3 sections"),null;try{const a=ET(n);return a?JSON.parse(a):(Xh("Failed to decode base64 JWT payload"),null)}catch(a){return Xh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Z1(t){const e=tv(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof xi&&l9(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function l9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(t){var e;const n=t.auth,i=await t.getIdToken(),a=await Vu(t,Rf(n,{idToken:i}));De(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?_2(l.providerUserInfo):[],d=d9(t.providerData,c),f=t.isAnonymous,p=!(t.email&&l.passwordHash)&&!d?.length,y=f?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new L0(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,v)}async function u9(t){const e=Mt(t);await Cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d9(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function _2(t){return t.map(e=>{var{providerId:n}=e,i=Zy(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h9(t,e){const n=await y2(t,{},async()=>{const i=qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await v2(t,a,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return t.emulatorConfig&&so(t.emulatorConfig.host)&&(f.credentials="include"),m2.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f9(t,e){return la(t,"POST","/v2/accounts:revokeToken",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=Z1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await h9(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,c=new xl;return i&&(De(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:n,auth:i,stsTokenManager:a}=e,l=Zy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new L0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Vu(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return o9(this,e)}reload(){return u9(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Cf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await Vu(this,a9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,a,l,c,d,f,p,y;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,b=(a=n.email)!==null&&a!==void 0?a:void 0,E=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,T=(c=n.photoURL)!==null&&c!==void 0?c:void 0,M=(d=n.tenantId)!==null&&d!==void 0?d:void 0,N=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,V=(p=n.createdAt)!==null&&p!==void 0?p:void 0,B=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:$,emailVerified:j,isAnonymous:ne,providerData:te,stsTokenManager:O}=n;De($&&O,e,"internal-error");const R=xl.fromJSON(this.name,O);De(typeof $=="string",e,"internal-error"),Ms(v,e.name),Ms(b,e.name),De(typeof j=="boolean",e,"internal-error"),De(typeof ne=="boolean",e,"internal-error"),Ms(E,e.name),Ms(T,e.name),Ms(M,e.name),Ms(N,e.name),Ms(V,e.name),Ms(B,e.name);const C=new jr({uid:$,auth:e,email:b,emailVerified:j,displayName:v,isAnonymous:ne,photoURL:T,phoneNumber:E,tenantId:M,stsTokenManager:R,createdAt:V,lastLoginAt:B});return te&&Array.isArray(te)&&(C.providerData=te.map(z=>Object.assign({},z))),N&&(C._redirectEventId=N),C}static async _fromIdTokenResponse(e,n,i=!1){const a=new xl;a.updateFromServerResponse(n);const l=new jr({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Cf(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?_2(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new xl;d.updateFromIdToken(i);const f=new jr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new L0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Map;function Zi(t){ss(t instanceof Function,"Expected a class definition");let e=J1.get(t);return e?(ss(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,J1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}b2.type="NONE";const ex=b2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t,e,n){return`firebase:${t}:${e}:${n}`}class Sl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Qh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Qh("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rf(this.auth,{idToken:e}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Sl(Zi(ex),e,i);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Zi(ex);const c=Qh(i,e.config.apiKey,e.name);let d=null;for(const p of n)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const b=await Rf(e,{idToken:y}).catch(()=>{});if(!b)break;v=await jr._fromGetAccountInfoResponse(e,b,y)}else v=jr._fromJSON(e,y);p!==l&&(d=v),l=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Sl(l,e,i):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Sl(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A2(e))return"Blackberry";if(R2(e))return"Webos";if(E2(e))return"Safari";if((e.includes("chrome/")||x2(e))&&!e.includes("edge/"))return"Chrome";if(T2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function w2(t=Tn()){return/firefox\//i.test(t)}function E2(t=Tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x2(t=Tn()){return/crios\//i.test(t)}function S2(t=Tn()){return/iemobile/i.test(t)}function T2(t=Tn()){return/android/i.test(t)}function A2(t=Tn()){return/blackberry/i.test(t)}function R2(t=Tn()){return/webos/i.test(t)}function nv(t=Tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g9(t=Tn()){var e;return nv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p9(){return HM()&&document.documentMode===10}function C2(t=Tn()){return nv(t)||T2(t)||R2(t)||A2(t)||/windows phone/i.test(t)||S2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t,e=[]){let n;switch(t){case"Browser":n=tx(Tn());break;case"Worker":n=`${tx(Tn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y9(t,e={}){return la(t,"GET","/v2/passwordPolicy",oa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=6;class _9{constructor(e){var n,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:v9,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,a,l,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nx(this),this.idTokenSubscription=new nx(this),this.beforeStateQueue=new m9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Sl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rf(this,{idToken:e}),i=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ir(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Ji(this));const n=e?Mt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y9(this),n=new _9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await f9(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await Sl.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,a);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&XV(`Error while retrieving App Check token: ${n.error}`),n?.token}}function co(t){return Mt(t)}class nx{constructor(e){this.auth=e,this.observer=null,this.addObserver=QM(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w9(t){hg=t}function I2(t){return hg.loadJS(t)}function E9(){return hg.recaptchaEnterpriseScript}function x9(){return hg.gapiScript}function S9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class T9{constructor(){this.enterprise=new A9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class A9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const R9="recaptcha-enterprise",k2="NO_RECAPTCHA";class C9{constructor(e){this.type=R9,this.auth=co(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{s9(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new i9(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(f=>{d(f)})})}function a(l,c,d){const f=window.grecaptcha;W1(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(k2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new T9().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!n&&W1(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=E9();f.length!==0&&(f+=d),I2(f).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function rx(t,e,n,i=!1,a=!1){const l=new C9(t);let c;if(a)c=k2;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function z0(t,e,n,i,a){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await rx(t,e,n,n==="getOobCode");return i(t,c)}else return i(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await rx(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(t,e){const n=Yf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Za(l,e??{}))return a;qr(a,"already-initialized")}return n.initialize({options:e})}function I9(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Zi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function k9(t,e,n){const i=co(t);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=D2(e),{host:c,port:d}=D9(e),f=d===null?"":`:${d}`,p={url:`${l}//${c}${f}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Za(p,i.config.emulator)&&Za(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,so(c)?(ly(`${l}//${c}${f}`),cy("Auth",!0)):M9()}function D2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function D9(t){const e=D2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:ix(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:ix(c)}}}function ix(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function M9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}async function O9(t,e){return la(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P9(t,e){return Wu(t,"POST","/v1/accounts:signInWithPassword",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}async function L9(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends rv{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Lu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Lu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return z0(e,n,"signInWithPassword",P9);case"emailLink":return V9(e,{email:this._email,oobCode:this._password});default:qr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return z0(e,i,"signUpPassword",O9);case"emailLink":return L9(e,{idToken:n,email:this._email,oobCode:this._password});default:qr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(t,e){return Wu(t,"POST","/v1/accounts:signInWithIdp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9="http://localhost";class ro extends rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ro(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=n,l=Zy(n,["providerId","signInMethod"]);if(!i||!a)return null;const c=new ro(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Tl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Tl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tl(e,n)}buildRequest(){const e={requestUri:z9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function j9(t){const e=ou(lu(t)).link,n=e?ou(lu(e)).deep_link_id:null,i=ou(lu(t)).deep_link_id;return(i?ou(lu(i)).link:null)||i||n||e||t}class iv{constructor(e){var n,i,a,l,c,d;const f=ou(lu(e)),p=(n=f.apiKey)!==null&&n!==void 0?n:null,y=(i=f.oobCode)!==null&&i!==void 0?i:null,v=U9((a=f.mode)!==null&&a!==void 0?a:null);De(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=j9(e);try{return new iv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.providerId=Fl.PROVIDER_ID}static credential(e,n){return Lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=iv.parseLink(n);return De(i,"argument-error"),Lu._fromEmailAndCode(e,i.code,i.tenantId)}}Fl.PROVIDER_ID="password";Fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends M2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Zu{constructor(){super("facebook.com")}static credential(e){return ro._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ro._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return js.credential(n,i)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Zu{constructor(){super("github.com")}static credential(e){return ro._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Zu{constructor(){super("twitter.com")}static credential(e,n){return ro._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Hs.credential(n,i)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B9(t,e){return Wu(t,"POST","/v1/accounts:signUp",oa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await jr._fromIdTokenResponse(e,i,a),c=sx(i);return new io({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=sx(i);return new io({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function sx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends xi{constructor(e,n,i,a){var l;super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Nf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new Nf(e,n,i,a)}}function O2(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nf._fromErrorAndOperation(t,l,e,i):l})}async function H9(t,e,n=!1){const i=await Vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(t,e,n=!1){const{auth:i}=t;if(ir(i.app))return Promise.reject(Ji(i));const a="reauthenticate";try{const l=await Vu(t,O2(i,a,e,t),n);De(l.idToken,i,"internal-error");const c=tv(l.idToken);De(c,i,"internal-error");const{sub:d}=c;return De(t.uid===d,i,"user-mismatch"),io._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&qr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e,n=!1){if(ir(t.app))return Promise.reject(Ji(t));const i="signIn",a=await O2(t,i,e),l=await io._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function $9(t,e){return P2(co(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t){const e=co(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function F9(t,e,n){if(ir(t.app))return Promise.reject(Ji(t));const i=co(t),c=await z0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B9).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&V2(t),f}),d=await io._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function G9(t,e,n){return ir(t.app)?Promise.reject(Ji(t)):$9(Mt(t),Fl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&V2(t),i})}function Y9(t,e,n,i){return Mt(t).onIdTokenChanged(e,n,i)}function K9(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function X9(t,e,n,i){return Mt(t).onAuthStateChanged(e,n,i)}function Q9(t){return Mt(t).signOut()}const If="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=1e3,Z9=10;class z2 extends L2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);p9()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Z9):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},W9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}z2.type="LOCAL";const J9=z2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2 extends L2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}U2.type="SESSION";const j2=U2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new fg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(n.origin,l)),f=await eL(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const p=sv("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function nL(t){bi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function rL(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sL(){return B2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="firebaseLocalStorageDb",aL=1,kf="firebaseLocalStorage",q2="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gg(t,e){return t.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function oL(){const t=indexedDB.deleteDatabase(H2);return new Ju(t).toPromise()}function U0(){const t=indexedDB.open(H2,aL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(kf,{keyPath:q2})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(kf)?e(i):(i.close(),await oL(),e(await U0()))})})}async function ax(t,e,n){const i=gg(t,!0).put({[q2]:e,value:n});return new Ju(i).toPromise()}async function lL(t,e){const n=gg(t,!1).get(e),i=await new Ju(n).toPromise();return i===void 0?null:i.value}function ox(t,e){const n=gg(t,!0).delete(e);return new Ju(n).toPromise()}const cL=800,uL=3;class $2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await U0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>uL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fg._getInstance(sL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rL(),!this.activeServiceWorker)return;this.sender=new tL(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await U0();return await ax(e,If,"1"),await ox(e,If),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>ax(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>lL(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ox(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=gg(a,!1).getAll();return new Ju(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$2.type="LOCAL";const dL=$2;new Qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){return e?Zi(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fL(t){return P2(t.auth,new av(t),t.bypassAuthState)}function gL(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),q9(n,new av(t),t.bypassAuthState)}async function pL(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),H9(n,new av(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fL;case"linkViaPopup":case"linkViaRedirect":return pL;case"reauthViaPopup":case"reauthViaRedirect":return gL;default:qr(this.auth,"internal-error")}}resolve(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new Qu(2e3,1e4);class ml extends F2{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,ml.currentPopupAction&&ml.currentPopupAction.cancel(),ml.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){ss(this.filter.length===1,"Popup operations only handle one event");const e=sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ml.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mL.get())};e()}}ml.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="pendingRedirect",Wh=new Map;class vL extends F2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const i=await _L(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _L(t,e){const n=EL(e),i=wL(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function bL(t,e){Wh.set(t._key(),e)}function wL(t){return Zi(t._redirectPersistence)}function EL(t){return Qh(yL,t.config.apiKey,t.name)}async function xL(t,e,n=!1){if(ir(t.app))return Promise.reject(Ji(t));const i=co(t),a=hL(i,e),c=await new vL(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=10*60*1e3;class TL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!G2(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(_i(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SL&&this.cachedEventUids.clear(),this.cachedEventUids.has(lx(e))}saveEventToCache(e){this.cachedEventUids.add(lx(e)),this.lastProcessedEventTime=Date.now()}}function lx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function G2({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function AL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e={}){return la(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NL=/^https?/;async function IL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RL(t);for(const n of e)try{if(kL(n))return}catch{}qr(t,"unauthorized-domain")}function kL(t){const e=V0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!NL.test(n))return!1;if(CL.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=new Qu(3e4,6e4);function cx(){const t=bi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ML(t){return new Promise((e,n)=>{var i,a,l;function c(){cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cx(),n(_i(t,"network-request-failed"))},timeout:DL.get()})}if(!((a=(i=bi().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=bi().gapi)===null||l===void 0)&&l.load)c();else{const d=S9("iframefcb");return bi()[d]=()=>{gapi.load?c():n(_i(t,"network-request-failed"))},I2(`${x9()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Zh=null,e})}let Zh=null;function OL(t){return Zh=Zh||ML(t),Zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new Qu(5e3,15e3),VL="__/auth/iframe",LL="emulator/auth/iframe",zL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jL(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ev(e,LL):`https://${t.config.authDomain}/${VL}`,i={apiKey:e.apiKey,appName:t.name,v:zl},a=UL.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${qu(i).slice(1)}`}async function BL(t){const e=await OL(t),n=bi().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:jL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zL,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=_i(t,"network-request-failed"),d=bi().setTimeout(()=>{l(c)},PL.get());function f(){bi().clearTimeout(d),a(i)}i.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qL=500,$L=600,FL="_blank",GL="http://localhost";class ux{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YL(t,e,n,i=qL,a=$L){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},HL),{width:i.toString(),height:a.toString(),top:l,left:c}),p=Tn().toLowerCase();n&&(d=x2(p)?FL:n),w2(p)&&(e=e||GL,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[E,T])=>`${b}${E}=${T},`,"");if(g9(p)&&d!=="_self")return KL(e||"",d),new ux(null);const v=window.open(e||"",d,y);De(v,t,"popup-blocked");try{v.focus()}catch{}return new ux(v)}function KL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL="__/auth/handler",QL="emulator/auth/handler",WL=encodeURIComponent("fac");async function dx(t,e,n,i,a,l){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:zl,eventId:a};if(e instanceof M2){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",XM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof Zu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await t._getAppCheckToken(),p=f?`#${WL}=${encodeURIComponent(f)}`:"";return`${ZL(t)}?${qu(d).slice(1)}${p}`}function ZL({config:t}){return t.emulator?ev(t,QL):`https://${t.authDomain}/${XL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="webStorageSupport";class JL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j2,this._completeRedirectFn=xL,this._overrideRedirectResult=bL}async _openPopup(e,n,i,a){var l;ss((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await dx(e,n,i,V0(),a);return YL(e,c,sv())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await dx(e,n,i,V0(),a);return nL(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(ss(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await BL(e),i=new TL(e);return n.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ym,{type:Ym},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Ym];c!==void 0&&n(!!c),qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return C2()||E2()||nv()}}const ez=JL;var hx="@firebase/auth",fx="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rz(t){Ja(new Zs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N2(t)},p=new b9(i,a,l,f);return I9(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ja(new Zs("auth-internal",e=>{const n=co(e.getProvider("auth").getImmediate());return(i=>new tz(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(hx,fx,nz(t)),mi(hx,fx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=5*60,sz=AT("authIdTokenMaxAge")||iz;let gx=null;const az=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>sz)return;const a=n?.token;gx!==a&&(gx=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function oz(t=hy()){const e=Yf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=N9(t,{popupRedirectResolver:ez,persistence:[dL,J9,j2]}),i=AT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=az(l.toString());K9(n,c,()=>c(n.currentUser)),Y9(n,d=>c(d))}}const a=xT("auth");return a&&k9(n,`http://${a}`),n}function lz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}w9({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=_i("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",lz().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rz("Browser");const cz={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},ov=NT(cz),$r=RV(ov),Df=oz(ov),lv=A6(ov,"us-central1");OT(lv,"localhost",5001);const uz="51259393-3a562db01323edade9561b8f0",dz="LIVDSRZULELA",hz=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong class='font-semibold text-gray-900 dark:text-gray-100'>$1</strong>").replace(/\((.*?)\)\[(.*?)\]/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors duration-200">$1</a>'),fz=async t=>{const e=t.map(async i=>{const a=Object.keys(i)[0],l=i[a];switch(a){case"large_header":return`<h1 class="text-4xl lg:text-5xl font-bold my-8 text-gray-900 dark:text-gray-100 leading-tight border-b-4 border-blue-600 dark:border-blue-400 pb-2 transition-colors duration-200">${l}</h1>`;case"small_header":return`<h2 class="text-2xl lg:text-3xl font-semibold mt-6 mb-3 text-gray-800 dark:text-gray-200 leading-snug transition-colors duration-200">${l}</h2>`;case"ul":return`<ul class="my-4 pl-6 space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(P=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${P}</li>`).join("")}</ul>`;case"ol":return`<ol class="my-4 pl-6 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(P=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${P}</li>`).join("")}</ol>`;case"quiz":const f=l,p=`quiz-set-${Math.random().toString(36).substr(2,9)}`,y=f.map((P,K)=>{const D=`${p}-q${K}`,q=P.answers.map((W,Z)=>{const Q=Object.keys(W)[0],ee=W[Q],le=Z===P.correctAnswer;return`<button class="quiz-answer w-full bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 text-left font-medium text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-60" onclick="${`
                                        const quiz = document.getElementById('${D}');
                                        const hintDiv = document.getElementById('${D}-hint');
                                        const resultDiv = document.getElementById('${D}-result');
                                        const nextBtn = document.getElementById('${D}-next');
                                        const buttons = quiz.querySelectorAll('.quiz-answer');
                                        const selectedButton = this;
                                        
                                        if (${le}) {
                                            // Correct answer
                                            hintDiv.classList.add('hidden');
                                            resultDiv.classList.remove('hidden');
                                            if (nextBtn) nextBtn.classList.remove('hidden');
                                            buttons.forEach(btn => btn.disabled = true);
                                            selectedButton.classList.add('quiz-correct');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                        } else {
                                            // Wrong answer - show hint
                                            hintDiv.textContent = '${ee.replace(/'/g,"\\'")}';
                                            hintDiv.classList.remove('hidden');
                                            selectedButton.classList.add('quiz-incorrect');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                            selectedButton.disabled = true;
                                        }
                                    `}">${Q}</button>`}).join(""),F=`
                                const quiz = document.getElementById('${D}');
                                const hintDiv = document.getElementById('${D}-hint');
                                const resultDiv = document.getElementById('${D}-result');
                                const nextBtn = document.getElementById('${D}-next');
                                const buttons = quiz.querySelectorAll('.quiz-answer');
                                
                                // Reset all states
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                            `,Y=K<f.length-1?`
                                document.getElementById('${p}-q${K}').classList.add('hidden');
                                document.getElementById('${p}-q${K+1}').classList.remove('hidden');
                            `:`
                                document.getElementById('${p}-completion').classList.remove('hidden');
                                document.getElementById('${D}').classList.add('hidden');
                            `,A=K<f.length-1?`<button id="${D}-next" class="hidden bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Y}">Next Question →</button>`:`<button id="${D}-next" class="hidden bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${Y}">Finish Quiz ✓</button>`;return`
                                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-200 ${K===0?"":"hidden"}" id="${D}">
                                    <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-2 text-center">Question ${K+1} of ${f.length}</div>
                                    <div class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6 text-center leading-relaxed">${P.question}</div>
                                    <div class="space-y-3 mb-4">
                                        ${q}
                                    </div>
                                    <div id="${D}-hint" class="hidden bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 text-yellow-800 dark:text-yellow-200 text-sm italic animate-fade-in"></div>
                                    <div id="${D}-result" class="hidden bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-6 text-center">
                                        <p class="text-xl font-bold text-green-800 dark:text-green-200 mb-4">🎉 Excellent! 🎉</p>
                                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                            <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${F}">↻ Try Again</button>
                                            ${A}
                                        </div>
                                    </div>
                                </div>
                            `}).join(""),v=`
                        document.getElementById('${p}-completion').classList.add('hidden');
                        document.getElementById('${p}-q0').classList.remove('hidden');
                        // Reset all questions
                        ${f.map((P,K)=>`
                            const quiz${K} = document.getElementById('${p}-q${K}');
                            if (quiz${K}) {
                                const hintDiv = document.getElementById('${p}-q${K}-hint');
                                const resultDiv = document.getElementById('${p}-q${K}-result');
                                const nextBtn = document.getElementById('${p}-q${K}-next');
                                const buttons = quiz${K}.querySelectorAll('.quiz-answer');
                                
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                                
                                if (${K} > 0) quiz${K}.classList.add('hidden');
                            }
                        `).join("")}
                    `;return`
                        <div class="my-8" id="${p}">
                            ${y}
                            <div id="${p}-completion" class="hidden bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-700 rounded-xl p-8 text-center">
                                <div class="text-4xl mb-4">🎊</div>
                                <h3 class="text-2xl font-bold text-green-800 dark:text-green-200 mb-2">Quiz Completed!</h3>
                                <p class="text-green-700 dark:text-green-300 mb-6">Congratulations! You've successfully completed all ${f.length} questions.</p>
                                <button class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg transform hover:scale-105 transition-all duration-200" onclick="${v}">🔄 Start Over</button>
                            </div>
                        </div>
                    `;case"img":const[b,E]=l;return`<figure class="my-6 text-center">
                    <img src="${await mz(b)}" alt="${E}" 
                         class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                         onerror="this.onerror=null; this.src='https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error'; this.alt='Fallback image (original failed to load)';" />
                    <figcaption class="mt-3 text-sm text-gray-600 dark:text-gray-400">${E}</figcaption>
                    <div class="mt-2 text-xs text-gray-500 dark:text-gray-500 opacity-75">
                        <span class="inline-block mr-2">🔍 ${b}</span>
                        <a href="https://pixabay.com/" target="_blank" class="text-blue-500 dark:text-blue-400 hover:underline">Pixabay</a>
                    </div>
                    </figure>`;case"vid":const[M,N]=l;return`<figure class="my-6 text-center">
                        <div class="relative w-full max-w-4xl mx-auto" style="padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/${await Ez(M)}" 
                                class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                                frameborder="0" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${N}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${M}" • <a href="https://developers.google.com/youtube/v3" target="_blank" class="text-red-600 dark:text-red-400 hover:underline">Powered by YouTube Data API</a></div>
                    </figure>`;case"gif":const[B,$]=l;return`<figure class="my-6 text-center">
                        <img src="${await _z(B)}" alt="${$}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error'; this.alt='Fallback GIF (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${$}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${B}" • <a href="https://tenor.com/" target="_blank" class="text-purple-600 dark:text-purple-400 hover:underline">Powered by Tenor</a></div>
                    </figure>`;case"textblock":return`<div class="my-4 leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">${hz(l)}</div>`;case"codeblock":return`<pre class="my-6 bg-gray-900 dark:bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto border-l-4 border-blue-500 shadow-lg"><code class="font-mono text-sm leading-relaxed">${l}</code></pre>`;case"quote":return`<blockquote class="my-6 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-r-lg relative">
                        <div class="text-blue-600 dark:text-blue-400 text-4xl absolute -top-2 -left-1 font-serif">"</div>
                        <div class="italic text-gray-700 dark:text-gray-300 pl-6">${l}</div>
                    </blockquote>`;case"link":return`<a href="${l}" class="inline-block my-2 px-4 py-2 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-600 hover:text-white dark:hover:bg-blue-500 transition-all duration-200 font-medium" target="_blank">${l}</a>`;case"table":const ne=l,te=ne[0],O=ne.slice(1),R=`<thead><tr>${te.map(P=>`<th class="bg-blue-600 dark:bg-blue-700 text-white px-4 py-3 text-left font-semibold">${P}</th>`).join("")}</tr></thead>`,C=`<tbody>${O.map((P,K)=>`<tr class="${K%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-700"} hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200">${P.map(D=>`<td class="px-4 py-3 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">${D}</td>`).join("")}</tr>`).join("")}</tbody>`;return`<div class="my-6 overflow-x-auto shadow-lg rounded-lg border border-gray-200 dark:border-gray-700">
                        <table class="w-full border-collapse">${R}${C}</table>
                    </div>`;case"purehtml":return`<div class="my-4 p-2 rounded-md bg-gray-50 dark:bg-gray-800 transition-colors duration-200">${l}</div>`;case"sidecontainer":return`<aside class="float-right w-80 max-w-[40%] ml-4 mb-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200 lg:block hidden">
                        ${l}
                    </aside>
                    <div class="lg:hidden my-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">
                        ${l}
                    </div>`;case"diagram":const z=`diagram${Math.random().toString(36).substr(2,9)}`,U=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200" 
                             id="${z}" 
                             data-diagram-code="${U}"
                             data-diagram-id="${z}">
                            <div class="text-gray-600 dark:text-gray-400 italic loading-text">Rendering diagram...</div>
                            <script type="text/javascript">
                                (function() {
                                    function processDiagram() {
                                        const diagramDiv = document.getElementById('${z}');
                                        if (!diagramDiv) {
                                            console.warn('Diagram div not found: ${z}');
                                            return;
                                        }
                                        
                                        const loadingText = diagramDiv.querySelector('.loading-text');
                                        let code = diagramDiv.getAttribute('data-diagram-code');
                                        
                                        if (!code) {
                                            console.error('No diagram code found');
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Error:</strong> No diagram code provided</div>';
                                            return;
                                        }
                                        
                                        // Decode the diagram code
                                        code = code
                                            .replace(/&amp;/g, '&')
                                            .replace(/&lt;/g, '<')
                                            .replace(/&gt;/g, '>')
                                            .replace(/&quot;/g, '"')
                                            .replace(/&#39;/g, "'");
                                        
                                        const id = diagramDiv.getAttribute('data-diagram-id');
                                        
                                        function showError(message) {
                                            console.error('Mermaid diagram error:', message);
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Diagram Error:</strong> ' + message + '</div>';
                                        }
                                        
                                        function initializeMermaid() {
                                            if (window.mermaid) {
                                                try {
                                                    if (!window.mermaidInitialized) {
                                                        window.mermaid.initialize({ 
                                                            startOnLoad: false, 
                                                            theme: 'default', 
                                                            securityLevel: 'loose',
                                                            fontFamily: 'inherit',
                                                            suppressErrorRendering: false
                                                        });
                                                        window.mermaidInitialized = true;
                                                    }
                                                    return true;
                                                } catch (e) {
                                                    showError('Failed to initialize Mermaid: ' + e.message);
                                                    return false;
                                                }
                                            }
                                            return false;
                                        }
                                        
                                        function renderDiagram() {
                                            if (!initializeMermaid()) {
                                                showError('Mermaid library not available');
                                                return;
                                            }
                                            
                                            try {
                                                // Validate the diagram code first
                                                if (!code.trim()) {
                                                    showError('Empty diagram code');
                                                    return;
                                                }
                                                
                                                const svgId = id + '_svg';
                                                
                                                // Use mermaid.render with proper error handling
                                                window.mermaid.render(svgId, code).then(function(result) {
                                                    if (result && result.svg) {
                                                        diagramDiv.innerHTML = result.svg;
                                                    } else {
                                                        showError('Mermaid render returned no SVG');
                                                    }
                                                }).catch(function(error) {
                                                    showError(error.message || 'Unknown render error');
                                                });
                                            } catch (e) {
                                                showError(e.message || 'Unknown execution error');
                                            }
                                        }
                                        
                                        // Load Mermaid if not already loaded
                                        if (!window.mermaid) {
                                            if (loadingText) {
                                                loadingText.textContent = 'Loading Mermaid library...';
                                            }
                                            
                                            const script = document.createElement('script');
                                            script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js';
                                            script.onload = function() {
                                                if (loadingText) {
                                                    loadingText.textContent = 'Rendering diagram...';
                                                }
                                                // Give the library time to fully load
                                                setTimeout(renderDiagram, 500);
                                            };
                                            script.onerror = function() {
                                                showError('Failed to load Mermaid library from CDN');
                                            };
                                            document.head.appendChild(script);
                                        } else {
                                            renderDiagram();
                                        }
                                    }
                                    
                                    // Wait for DOM to be ready and process the diagram
                                    if (document.readyState === 'loading') {
                                        document.addEventListener('DOMContentLoaded', processDiagram);
                                    } else {
                                        // Use a small delay to ensure the DOM element is fully rendered
                                        setTimeout(processDiagram, 50);
                                    }
                                })();
                            <\/script>
                        </div>
                    `;case"note":return`<div class="my-4 flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-blue-600 dark:text-blue-400 text-xl mr-3 flex-shrink-0 mt-0.5">📝</div>
                        <div class="text-blue-800 dark:text-blue-200 leading-relaxed">${l}</div>
                    </div>`;case"warning":return`<div class="my-4 flex items-start p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 dark:border-yellow-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-yellow-600 dark:text-yellow-400 text-xl mr-3 flex-shrink-0 mt-0.5">⚠️</div>
                        <div class="text-yellow-800 dark:text-yellow-200 leading-relaxed">${l}</div>
                    </div>`;case"tip":return`<div class="my-4 flex items-start p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-green-600 dark:text-green-400 text-xl mr-3 flex-shrink-0 mt-0.5">💡</div>
                        <div class="text-green-800 dark:text-green-200 leading-relaxed">${l}</div>
                    </div>`;case"htmlCanvas":const H=`canvas_${Math.random().toString(36).substr(2,9)}_${Date.now()}`;return`
                        <div class="my-6 bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-6 transition-colors duration-200" data-canvas-code="${l.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" data-canvas-id="${H}">
                            <canvas id="${H}" width="400" height="300" class="border border-gray-300 dark:border-gray-600 rounded-lg max-w-full mx-auto block bg-white dark:bg-gray-900"></canvas>
                            <div class="flex flex-wrap gap-2 mt-4 justify-center">
                                <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const code = canvasDiv.getAttribute('data-canvas-code');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        errorDiv.classList.add('hidden');
                                        errorDiv.textContent = '';
                                        
                                        try {
                                            canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                            const canvasFunction = new Function('canvas', 'ctx', code);
                                            canvasFunction(canvasElement, canvasContext);
                                        } catch (error) {
                                            console.error('Canvas error:', error);
                                            errorDiv.textContent = 'Error: ' + error.message;
                                            errorDiv.classList.remove('hidden');
                                        }
                                    }).call(this);
                                ">▶ Run Code</button>
                                <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                        errorDiv.classList.add('hidden');
                                    }).call(this);
                                ">🗑️ Clear</button>
                                <button class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        
                                        if (!document.fullscreenElement) {
                                            canvasElement.requestFullscreen().catch(err => {
                                                console.warn('Fullscreen failed:', err);
                                            });
                                        } else {
                                            document.exitFullscreen();
                                        }
                                    }).call(this);
                                ">⛶ Fullscreen</button>
                            </div>
                            <details class="mt-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors duration-200">
                                <summary class="p-3 font-medium text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200">📝 View Code</summary>
                                <pre class="p-4 bg-gray-900 dark:bg-gray-800 text-gray-100 rounded-b-lg overflow-x-auto"><code class="font-mono text-sm">${l}</code></pre>
                            </details>
                            <div id="${H}Error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200"></div>
                        </div>
                    `;default:return`<div class="my-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 font-mono text-sm">
                        <div class="font-semibold mb-2">Unknown content type:</div>
                        ${JSON.stringify(i)}
                    </div>`}});return(await Promise.all(e)).join(`
`)},gz=uz,pz="https://pixabay.com/api/",Zc=new Map,mz=async t=>{if(Zc.has(t))return Zc.get(t);try{const e=encodeURIComponent(t),n=`${pz}?key=${gz}&q=${e}&image_type=photo&per_page=3&safesearch=true&order=relevant`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.hits&&a.hits.length>0){const l=a.hits[0].webformatURL;return Zc.set(t,l),l}else{const l=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Zc.set(t,l),l}}catch(e){console.error("Error fetching Pixabay image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Zc.set(t,n),n}},yz=dz,vz="https://g.tenor.com/v1/search",Jc=new Map,_z=async t=>{if(Jc.has(t))return Jc.get(t);try{const e=encodeURIComponent("explained "+t),n=`${vz}?key=${yz}&q=${e}&limit=1&media_filter=basic&contentfilter=medium`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.results&&a.results.length>0){const c=a.results[0],d=c.media[0]?.gif?.url||c.media[0]?.mediumgif?.url||c.media[0]?.tinygif?.url;if(d)return Jc.set(t,d),d}const l=`https://via.placeholder.com/300x200/9333ea/ffffff?text=${e}+GIF`;return Jc.set(t,l),l}catch(e){console.error("Error fetching Tenor GIF:",e);const n="https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error";return Jc.set(t,n),n}},bz="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",wz="https://www.googleapis.com/youtube/v3/search",eu=new Map,Ez=async t=>{if(eu.has(t))return eu.get(t);try{const e=encodeURIComponent(t),n=`${wz}?key=${bz}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.items&&a.items.length>0){const c=a.items[0].id.videoId;if(c)return eu.set(t,c),c}const l="dQw4w9WgXcQ";return eu.set(t,l),l}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return eu.set(t,n),n}},xz=fz;class ol extends Error{constructor(e,n){super(`${e} at position ${n}`),this.position=n}}const Y2=32,Sz=10,K2=9,X2=13,Tz=160,Az=8192,Rz=8202,Cz=8239,Nz=8287,Iz=12288;function kz(t){return/^[0-9A-Fa-f]$/.test(t)}function ja(t){return t>="0"&&t<="9"}function Dz(t){return t>=" "}function Vh(t){return`,:[]/{}()
+`.includes(t)}function px(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"}function mx(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"||t>="0"&&t<="9"}const yx=/^(http|https|ftp|mailto|file|data|irc):\/\/$/,vx=/^[A-Za-z0-9-._~:/?#@!$&'()*+;=]$/;function _x(t){return`,[]/{}
+`.includes(t)}function bx(t){return Jh(t)||Mz.test(t)}const Mz=/^[[{\w-]$/;function Oz(t){return t===`
`||t==="\r"||t==="	"||t==="\b"||t==="\f"}function qa(t,e){const n=t.charCodeAt(e);return n===Y2||n===Sz||n===K2||n===X2}function Pz(t,e){const n=t.charCodeAt(e);return n===Y2||n===K2||n===X2}function Vz(t,e){const n=t.charCodeAt(e);return n===Tz||n>=Az&&n<=Rz||n===Cz||n===Nz||n===Iz}function Jh(t){return Q2(t)||j0(t)}function Q2(t){return t==='"'||t==="“"||t==="”"}function wx(t){return t==='"'}function j0(t){return t==="'"||t==="‘"||t==="’"||t==="`"||t==="´"}function Ex(t){return t==="'"}function tu(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=t.lastIndexOf(e);return i!==-1?t.substring(0,i)+(n?"":t.substring(i+1)):t}function Lr(t,e){let n=t.length;if(!qa(t,n-1))return t+e;for(;qa(t,n-1);)n--;return t.substring(0,n)+e+t.substring(n)}function Lz(t,e,n){return t.substring(0,e)+t.substring(e+n)}function zz(t){return/[,\n][ \t\r]*$/.test(t)}const Uz={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},jz={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function Bz(t){let e=0,n="";p(["```","[```","{```"]),l()||P(),p(["```","```]","```}"]);const a=v(",");for(a&&c(),bx(t[e])&&zz(n)?(a||(n=Lr(n,",")),V()):a&&(n=tu(n,","));t[e]==="}"||t[e]==="]";)e++,c();if(e>=t.length)return n;I();function l(){c();const F=M()||N()||B()||j()||ne()||O(!1)||R();return c(),F}function c(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const Y=e;let A=d(F);do A=f(),A&&(A=d(F));while(A);return e>Y}function d(F){const Y=F?qa:Pz;let A="";for(;;)if(Y(t,e))A+=t[e],e++;else if(Vz(t,e))A+=" ",e++;else break;return A.length>0?(n+=A,!0):!1}function f(){if(t[e]==="/"&&t[e+1]==="*"){for(;e<t.length&&!Hz(t,e);)e++;return e+=2,!0}if(t[e]==="/"&&t[e+1]==="/"){for(;e<t.length&&t[e]!==`
`;)e++;return!0}return!1}function p(F){if(y(F)){if(px(t[e]))for(;e<t.length&&mx(t[e]);)e++;return c(),!0}return!1}function y(F){for(const Y of F){const A=e+Y.length;if(t.slice(e,A)===Y)return e=A,!0}return!1}function v(F){return t[e]===F?(n+=t[e],e++,!0):!1}function b(F){return t[e]===F?(e++,!0):!1}function E(){return b("\\")}function T(){return c(),t[e]==="."&&t[e+1]==="."&&t[e+2]==="."?(e+=3,c(),b(","),!0):!1}function M(){if(t[e]==="{"){n+="{",e++,c(),b(",")&&c();let F=!0;for(;e<t.length&&t[e]!=="}";){let Y;if(F?(Y=!0,F=!1):(Y=v(","),Y||(n=Lr(n,",")),c()),T(),!(B()||O(!0))){t[e]==="}"||t[e]==="{"||t[e]==="]"||t[e]==="["||t[e]===void 0?n=tu(n,","):K();break}c();const W=v(":"),Z=e>=t.length;W||(bx(t[e])||Z?n=Lr(n,":"):D()),l()||(W||Z?n+="null":D())}return t[e]==="}"?(n+="}",e++):n=Lr(n,"}"),!0}return!1}function N(){if(t[e]==="["){n+="[",e++,c(),b(",")&&c();let F=!0;for(;e<t.length&&t[e]!=="]";)if(F?F=!1:v(",")||(n=Lr(n,",")),T(),!l()){n=tu(n,",");break}return t[e]==="]"?(n+="]",e++):n=Lr(n,"]"),!0}return!1}function V(){let F=!0,Y=!0;for(;Y;)F?F=!1:v(",")||(n=Lr(n,",")),Y=l();Y||(n=tu(n,",")),n=`[
${n}
]`}function B(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,A=t[e]==="\\";if(A&&(e++,A=!0),Jh(t[e])){const W=wx(t[e])?wx:Ex(t[e])?Ex:j0(t[e])?j0:Q2,Z=e,Q=n.length;let ee='"';for(e++;;){if(e>=t.length){const le=C(e-1);return!F&&Vh(t.charAt(le))?(e=Z,n=n.substring(0,Q),B(!0)):(ee=Lr(ee,'"'),n+=ee,!0)}if(e===Y)return ee=Lr(ee,'"'),n+=ee,!0;if(W(t[e])){const le=e,ue=ee.length;if(ee+='"',e++,n+=ee,c(!1),F||e>=t.length||Vh(t[e])||Jh(t[e])||ja(t[e]))return $(),!0;const fe=C(le-1),_e=t.charAt(fe);if(_e===",")return e=Z,n=n.substring(0,Q),B(!1,fe);if(Vh(_e))return e=Z,n=n.substring(0,Q),B(!0);n=n.substring(0,Q),e=le+1,ee=`${ee.substring(0,ue)}\\${ee.substring(ue)}`}else if(F&&_x(t[e])){if(t[e-1]===":"&&yx.test(t.substring(Z+1,e+2)))for(;e<t.length&&vx.test(t[e]);)ee+=t[e],e++;return ee=Lr(ee,'"'),n+=ee,$(),!0}else if(t[e]==="\\"){const le=t.charAt(e+1);if(jz[le]!==void 0)ee+=t.slice(e,e+2),e+=2;else if(le==="u"){let fe=2;for(;fe<6&&kz(t[e+fe]);)fe++;fe===6?(ee+=t.slice(e,e+6),e+=6):e+fe>=t.length?e=t.length:q()}else ee+=le,e+=2}else{const le=t.charAt(e);le==='"'&&t[e-1]!=="\\"?(ee+=`\\${le}`,e++):Oz(le)?(ee+=Uz[le],e++):(Dz(le)||H(le),ee+=le,e++)}A&&E()}}return!1}function $(){let F=!1;for(c();t[e]==="+";){F=!0,e++,c(),n=tu(n,'"',!0);const Y=n.length;B()?n=Lz(n,Y,1):n=Lr(n,'"')}return F}function j(){const F=e;if(t[e]==="-"){if(e++,z())return U(F),!0;if(!ja(t[e]))return e=F,!1}for(;ja(t[e]);)e++;if(t[e]==="."){if(e++,z())return U(F),!0;if(!ja(t[e]))return e=F,!1;for(;ja(t[e]);)e++}if(t[e]==="e"||t[e]==="E"){if(e++,(t[e]==="-"||t[e]==="+")&&e++,z())return U(F),!0;if(!ja(t[e]))return e=F,!1;for(;ja(t[e]);)e++}if(!z())return e=F,!1;if(e>F){const Y=t.slice(F,e),A=/^0\d/.test(Y);return n+=A?`"${Y}"`:Y,!0}return!1}function ne(){return te("true","true")||te("false","false")||te("null","null")||te("True","true")||te("False","false")||te("None","null")}function te(F,Y){return t.slice(e,e+F.length)===F?(n+=Y,e+=F.length,!0):!1}function O(F){const Y=e;if(px(t[e])){for(;e<t.length&&mx(t[e]);)e++;let A=e;for(;qa(t,A);)A++;if(t[A]==="(")return e=A+1,l(),t[e]===")"&&(e++,t[e]===";"&&e++),!0}for(;e<t.length&&!_x(t[e])&&!Jh(t[e])&&(!F||t[e]!==":");)e++;if(t[e-1]===":"&&yx.test(t.substring(Y,e+2)))for(;e<t.length&&vx.test(t[e]);)e++;if(e>Y){for(;qa(t,e-1)&&e>0;)e--;const A=t.slice(Y,e);return n+=A==="undefined"?"null":JSON.stringify(A),t[e]==='"'&&e++,!0}}function R(){if(t[e]==="/"){const F=e;for(e++;e<t.length&&(t[e]!=="/"||t[e-1]==="\\");)e++;return e++,n+=`"${t.substring(F,e)}"`,!0}}function C(F){let Y=F;for(;Y>0&&qa(t,Y);)Y--;return Y}function z(){return e>=t.length||Vh(t[e])||qa(t,e)}function U(F){n+=`${t.slice(F,e)}0`}function H(F){throw new ol(`Invalid character ${JSON.stringify(F)}`,e)}function I(){throw new ol(`Unexpected character ${JSON.stringify(t[e])}`,e)}function P(){throw new ol("Unexpected end of json string",t.length)}function K(){throw new ol("Object key expected",e)}function D(){throw new ol("Colon expected",e)}function q(){const F=t.slice(e,e+6);throw new ol(`Invalid unicode character "${F}"`,e)}}function Hz(t,e){return t[e]==="*"&&t[e+1]==="/"}const xx=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const i=await PT(lv,"groqChat")({message:e});return console.log("groqChat response:",i.data),i.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},qz=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const i=PT(lv,"groqChat");console.log("Starting streaming request...");const{stream:a,data:l}=await i.stream({message:n});console.log("Stream started, waiting for chunks...");let c="";for await(const f of a)if(console.log("Received chunk:",f),f&&typeof f=="object"&&"type"in f&&"content"in f){const p=f;console.log("Processing chunk:",p),p.type==="chunk"&&p.content&&(c+=p.content,e?.(p.content))}console.log("Waiting for final result...");const d=await l;return console.log("Final result received:",d),d&&typeof d=="object"&&"response"in d?(console.log("Returning final result response"),d.response):(console.log("Returning accumulated response:",c),c)}catch(n){throw console.error("Firebase function streaming error:",n),n}},$z=async(t,e,n)=>{try{const a=`
        Return ONLY a valid JSON array.

        RULES
        • Each object = exactly one tag from SCHEMA; no new tags.
        • Include:
        – Only one of {quiz} with multiple questions
        – At least one of {codeblock or diagram or htmlCanvas or table}
        – At least two of of {img or vid or gif}
        - At least five of of {textblock or ul or ol }
        - ONLY ONE of { tip or note or warning or quote or link}
        • You should educate the user about the concept and then ask the quiz about the material you taught.
        • Use different tags to make the studying experience diverse and engaging
        • Cover, somewhere in the set: definition, deep explanation, worked example, real-world analogy and links at what to look up next.
        • If you have a long explanation, break it into multiple textblocks.
        • Only include tags that genuinely help explain the concept. Don't add tags unnecessarily or just to fill space.
        • Tone: encouraging, professional
        • Make the text of the explanations long and detailed! You need to educate the user
        • You need to have textblocks or lists separating each visual tag, e.g. img, vid, gif, codeblock, diagram, htmlCanvas, table.
        • Make sure to put the concept over the context, not focusing on the context but rather on what actually needs to be explained.

        OUTPUT
        VALID JSON array only — no comments, or extra text. All the braces must be properly closed.

        SCHEMA = ${JSON.stringify([{large_header:"Large Header Text"},{small_header:"Small Header Text"},{ul:["Item one","Item 2","Item 3"]},{quiz:[{question:"What is the capital of France?",answers:[{Berlin:"It's germany!"},{Madrid:"It is spain :("},{Paris:"Correct! It's Paris!"}],correctAnswer:2},{question:"What is the capital of Poland?",answers:[{Berlin:"It's germany!"},{Warshava:"Yahoo! It's Poland!"},{Paris:"No!"}],correctAnswer:1}]},{img:["very short image description(e.g. funny cats)","The image shows a group of cats doing something amusing."]},{vid:["very short video description(e.g. playing footbal)","This video shows a group of people playing football in a park."]},{gif:["very short gif description(e.g. frogs jumping)","This gif shows frogs jumping around in a pond."]},{textblock:"text, **text**, (text)[text.com]"},{ol:["Heyyo","Nice","That's a list"]},{codeblock:"console.log('Hello World');"},{quote:"This is a quote"},{link:"https://example.com"},{table:[["Header1","Header2"],["Row1Col1","Row1Col2"],["Row2Col1","Row2Col2"]]},{diagram:"a mermaid-based diagram: graph TD; A-->B; A-->C; B-->D; C-->D;"},{note:"This is a note."},{warning:"This is a warning note."},{tip:"This is a tip note."},{htmlCanvas:`
    function draw(ctx) {
        // Drawing a simple circle (it is an example)
        ctx.beginPath();
        ctx.arc(50, 50, 30, 0, 2 * Math.PI);
        ctx.fillStyle = 'red';
        ctx.fill();
        ctx.closePath();
    }
    `}])}

        CONTEXT = ${e}
        CONCEPT = ${t}
        `,l=`Provide a brief explanation in 50 words or less.

        CRITICAL:
        - Highlight EVERY key term with [square-braces], e.g., [artificial intelligence], [mammal], [vector product]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with explanation content
        - ONLY the explanation text

        Topic to explain: `,c=`You are an expert educator. Respond ONLY with a valid JSON array in the following format: ["concept1", "concept2", "concept3"]. 

        Instructions:
        - Suggest exactly 3-5 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON array.
        - Only output the JSON array as specified.

        Concept: `,d=xx(a),f=xx(c+t);let p="";const y=qz(l+t,$=>{p+=$,n($)}),[v,b,E]=await Promise.all([d,f,y]);let T=b??"";T=T.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").replace(/\\/g,"&#92;").replace(/\$/g,"&#36;").replace(/\^/g,"&#94;").replace(/_/g,"&#95;").replace(/~/g,"&#126;").replace(/&/g,"&#38;");let M=[];const N=T.match(/"(.*?)"/g);N&&(M=N.map($=>$.replace(/"/g,"")));const V=$=>{try{return JSON.parse($)}catch{try{const j=Bz($);return JSON.parse(j)}catch(j){throw console.error("JSON parsing and repair failed:",j),j}}},B={firstResponse:{response:await xz(V(v.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"")))},secondResponse:{response:E?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:(()=>{try{return V(T)}catch{return M}})()}};return console.log("askAITwice response:",B),B}catch(i){throw console.error("Error in askAITwice:",i),i}},W2=G.createContext(null),Z2=(t,e,n,i,a,l,c,d,f,p,y,v,b,E)=>{console.log(1);const T=a.find(B=>B.id===e);if(!T)return null;console.log(2);const M=T.data.tokenColors||{};if(console.log(3),!v){const B=t.myConcept||t.word;if(M[B])return console.log(`Token "${B}" is already colored, ignoring click`),null}console.log(4);let N;i==="staticEditable"?N=PE():N=f?_M(f):PE();let V=null;if(v)V=b;else{const B={...M};t.myConcept?B[t.myConcept]=N:B[t.word]=N,l(ne=>ne.map(te=>te.id===e?{...te,data:{...te.data,tokenColors:B}}:te));const $=bM(n);V=xM($,t.word,"Loading...","",N,i,e);const j=SM(e,V.id,N,y);c([{type:"add",item:V}]),d([{type:"add",item:j}])}return V&&(V.data.isLoading=!0),v&&(console.log(5),l(B=>B.map($=>$.id===V?.id?{...$,data:{...$.data,label:"Loading...",summary:"",full_text:""}}:$))),$z(t.word,p||"",B=>{l($=>$.map(j=>{if(j.id===V?.id){const ne=j.data.summary||"";return{...j,data:{...j.data,label:ne+B,summary:ne+B}}}return j}))}).then(B=>{const $=B.firstResponse?.response||t.word,j=B.secondResponse?.response||t.word,ne=B.thirdResponse?.response||{};l(te=>te.map(O=>O.id===V?.id?{...O,data:{...O.data,label:j,title:t.word,summary:j,full_text:$,suggestions:ne,isLoading:!1}}:O))}).catch(()=>{l(B=>B.map($=>$.id===V?.id?{...$,data:{...$.data,label:t.word,title:t.word,summary:t.word,full_text:t.word,suggestions:[],isLoading:!1}}:$))}),N},Fz=({children:t,nodes:e,onNodesChange:n,onEdgesChange:i,setNodes:a,showExplanation:l})=>{const c=(d,f,p,y,v,b,E,T,M)=>Z2(d,f,p,y,e,a,n,i,v,b,E,T,M);return S.jsx(W2.Provider,{value:{handleTokenClick:c,setNodes:a,showExplanation:l},children:t})},J2=()=>{const t=G.useContext(W2);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},cr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},On={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function Gz(){const[t,e]=G.useState(""),[n,i]=G.useState(""),[a,l]=G.useState(!1),[c,d]=G.useState(!1),[f,p]=G.useState(""),y=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);if(n.length<6)throw new Error(On.WEAK_PASSWORD);const T=await F9(Df,t,n);console.log("User created successfully:",T.user.uid)}catch(E){let T="Failed to create account";E.code==="auth/email-already-in-use"?T=On.EMAIL_IN_USE:E.code==="auth/invalid-email"?T=On.INVALID_EMAIL:E.code==="auth/weak-password"?T=On.WEAK_PASSWORD:E.code==="auth/operation-not-allowed"?T="Email/password accounts are not enabled. Please contact support.":E.message&&(T=E.message),p(T)}finally{d(!1)}},v=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);const T=await G9(Df,t,n);console.log("User signed in successfully:",T.user.uid)}catch(E){let T="Failed to sign in";E.code==="auth/user-not-found"?T=On.USER_NOT_FOUND:E.code==="auth/wrong-password"?T=On.WRONG_PASSWORD:E.code==="auth/invalid-email"?T=On.INVALID_EMAIL:E.code==="auth/user-disabled"?T="This account has been disabled. Please contact support.":E.code==="auth/too-many-requests"?T=On.TOO_MANY_REQUESTS:E.message&&(T=E.message),p(T)}finally{d(!1)}};return S.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:S.jsxs("div",{className:"max-w-md w-full p-8 bg-gradient-to-br from-indigo-900/95 via-purple-900/95 to-indigo-900/95 rounded-3xl shadow-2xl border-2 border-indigo-700/60 dark:border-purple-700/60 backdrop-blur-sm animate-fade-in hover:shadow-3xl hover:shadow-indigo-500/10 transition-all duration-500",children:[S.jsxs("div",{className:"text-center mb-8 animate-slide-in",children:[S.jsx("div",{className:"inline-block p-4 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-full mb-4 border border-indigo-500/30 animate-pulse-glow",children:S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:S.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),S.jsx("h2",{className:"text-4xl font-bold text-transparent bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text mb-3",children:a?"Join TinkFlow":"Welcome Back"}),S.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm leading-relaxed",children:a?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),S.jsxs("form",{onSubmit:a?y:v,className:"space-y-6",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsxs("label",{htmlFor:"email",className:"text-sm font-semibold text-indigo-300 dark:text-purple-300 flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4 text-indigo-400 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email Address"]}),S.jsx("input",{id:"email",type:"email",value:t,onChange:b=>e(b.target.value),required:!0,"aria-describedby":"email-hint",className:"w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-indigo-600/30 dark:border-purple-600/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400/50 dark:focus:ring-purple-400/50 focus:border-indigo-400/50 dark:focus:border-purple-400/50 text-white placeholder-indigo-400 dark:placeholder-purple-400 transition-all duration-300 backdrop-blur-sm shadow-inner hover:border-indigo-500/80 dark:hover:border-purple-500/80 focus:scale-[1.02] active:scale-[0.98]",placeholder:"Enter your email address"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("label",{htmlFor:"password",className:"text-sm font-semibold text-indigo-300 dark:text-purple-300 flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4 text-indigo-400 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Password"]}),S.jsx("input",{id:"password",type:"password",value:n,onChange:b=>i(b.target.value),required:!0,"aria-describedby":"password-hint",className:"w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-indigo-600/30 dark:border-purple-600/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400/50 dark:focus:ring-purple-400/50 focus:border-indigo-400/50 dark:focus:border-purple-400/50 text-white placeholder-indigo-400 dark:placeholder-purple-400 transition-all duration-300 backdrop-blur-sm shadow-inner hover:border-indigo-500/80 dark:hover:border-purple-500/80 focus:scale-[1.02] active:scale-[0.98]",placeholder:"Enter your password"})]}),f&&S.jsx("div",{className:"bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 rounded-xl p-4 backdrop-blur-sm animate-fade-in",role:"alert","aria-live":"polite",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-6 h-6 bg-red-500/30 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),S.jsx("div",{className:"text-red-300 text-sm leading-relaxed",children:f})]})}),S.jsx("button",{type:"submit",disabled:c,"aria-label":a?"Create new account":"Sign in to your account",className:"w-full py-4 px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 disabled:from-slate-600 disabled:to-slate-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-400/40 disabled:shadow-slate-500/25 disabled:cursor-not-allowed backdrop-blur-sm animate-float active:scale-95",children:c?S.jsxs("div",{className:"flex items-center justify-center gap-3",children:[S.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),S.jsx("span",{children:a?"Creating account...":"Signing in..."})]}):S.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z":"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),S.jsx("span",{children:a?"Create Account":"Sign In"})]})})]}),S.jsxs("div",{className:"mt-8 text-center",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-indigo-600/50 dark:border-purple-600/50"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-gradient-to-r from-indigo-900/95 via-purple-900/95 to-indigo-900/95 text-indigo-400 dark:text-purple-400",children:a?"Already have an account?":"New to TinkFlow?"})})]}),S.jsx("button",{type:"button",onClick:()=>l(!a),"aria-label":a?"Switch to sign in":"Switch to create new account",className:"mt-4 w-full py-3 px-6 bg-[#2a2a2e] dark:bg-[#2a2a2e] hover:bg-indigo-700/90 dark:hover:bg-purple-700/90 text-indigo-300 dark:text-purple-300 hover:text-white font-semibold rounded-xl transition-all duration-300 border border-indigo-600/60 dark:border-purple-600/60 hover:border-indigo-500/80 dark:hover:border-purple-500/80 backdrop-blur-sm transform hover:scale-105 active:scale-95 shadow-lg",children:S.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})}),S.jsx("span",{children:a?"Sign In Instead":"Create New Account"})]})})]})]})})}function Yz({show:t,onHide:e,onConfirm:n,isCreating:i=!1}){const[a,l]=G.useState(""),[c,d]=G.useState(!0),f=b=>{const E=b.target.value;l(E),d(E.trim().length>0&&E.trim().length<=50)},p=b=>{b.preventDefault();const E=a.trim();E.length>0&&E.length<=50&&(n(E),l(""),d(!0))},y=()=>{l(""),d(!0),e()},v=b=>{b.key==="Enter"&&p(b)};return t?S.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:S.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),S.jsx("button",{onClick:y,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:"×"})]}),S.jsxs("form",{onSubmit:p,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),S.jsx("input",{type:"text",value:a,onChange:f,onKeyDown:v,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&S.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),S.jsxs("p",{className:`text-xs mt-1 ${a.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[a.length,"/50 characters"]})]}),S.jsxs("div",{className:"flex gap-3 pt-4",children:[S.jsx("button",{type:"button",onClick:y,disabled:i,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),S.jsx("button",{type:"submit",disabled:!c||a.trim().length===0||i,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:i?"Creating...":"Create Board"})]})]})]})}):null}function Kz({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,f]=G.useState(!1),[p,y]=G.useState(!1),[v,b]=G.useState(null),E=async V=>{try{f(!0),await i(V),y(!1)}catch(B){console.error("Error in sidebar create board:",B)}finally{f(!1)}},T=()=>{y(!0)},M=()=>{y(!1)},N=(V,B)=>{V.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(B)};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:S.jsxs("div",{className:"flex flex-col h-full",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[S.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),S.jsx("button",{onClick:T,disabled:c||d,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||d?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:d?"Creating...":"+ New Board"})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(V=>{const B=e?.id===V.id,$=v===V.id;return S.jsxs("div",{onClick:()=>!c&&n(V.id),onMouseEnter:()=>b(V.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${B?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":$?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!c&&n(V.id)},children:[S.jsx("span",{className:`
                                        ${B?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:V.name}),S.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[V.isOpen&&S.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:"●"}),t.length>1&&S.jsx("button",{onClick:j=>{j.stopPropagation(),N(j,V.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${$?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:"×"})]})]},V.id)})}),c&&S.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),S.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:S.jsx("button",{onClick:l,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),S.jsx(Yz,{show:p,onHide:M,onConfirm:E,isCreating:d})]})}const Xz=G.memo(function({explanation:e,onClose:n,isVisible:i}){const[a,l]=G.useState(!1),[c,d]=G.useState(i);G.useEffect(()=>{i?(d(!0),setTimeout(()=>l(!0),10)):(l(!1),setTimeout(()=>d(!1),300))},[i]);const f=()=>{l(!1),setTimeout(()=>n(),300)};return c?S.jsx("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                                   border border-gray-200/50 dark:border-gray-700/50
                                   fade-in
                                   transition-all duration-300 ease-out
                                   ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                                   before:absolute before:inset-0 before:bg-gradient-to-br 
                                   before:from-white/40 before:to-transparent before:pointer-events-none
                                   dark:before:from-gray-800/40 dark:before:to-transparent
                                   relative overflow-auto
                                   ${a?"transform translate-x-0":"transform translate-x-full"}`,style:{transition:"max-height 0.3s ease",maxHeight:"800px",minHeight:"200px"},children:S.jsxs("div",{className:`w-full h-full flex flex-col top-0 right-0 z-50 transition-all duration-300 ease-out ${a?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0"}`,children:[S.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${a?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[S.jsx("span",{className:"text-blue-500",children:"📄"}),"Explanation"]}),S.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:f,title:"Close explanation","aria-label":"Close explanation sidebar",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),S.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:e?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:S.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:e.title})}),S.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:S.jsx("div",{dangerouslySetInnerHTML:{__html:e.text}})})]}):S.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-6xl mb-6 opacity-60",children:"📄"}),S.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),S.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]})}):null}),eR=G.createContext(void 0),Qz=()=>{const t=G.useContext(eR);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},Wz=({children:t})=>{const[e,n]=G.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});G.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),localStorage.setItem("theme",e)},[e]);const i=()=>{n(a=>a==="light"?"dark":"light")};return S.jsx(eR.Provider,{value:{theme:e,toggleTheme:i},children:t})},tR=()=>{const{theme:t,toggleTheme:e}=Qz();return S.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function Zz({name:t,onSetName:e,user:n,isSaving:i}){const[a,l]=G.useState(!1),[c,d]=G.useState(t||"");G.useEffect(()=>{d(t||"")},[t]);const f=y=>{y.key==="Enter"&&(e(c),l(!1))},p=()=>{l(!0),d(t||"")};return S.jsx(S.Fragment,{children:S.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:S.jsx("div",{className:"max-w-none mx-auto px-4",children:S.jsxs("header",{className:"flex justify-between items-center py-3",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:S.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),S.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),S.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"•"}),a?S.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyDown:f,onBlur:()=>{e(c),l(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):S.jsx("button",{onClick:p,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),S.jsxs("div",{className:"flex items-center gap-3",children:[i&&S.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[S.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),S.jsx("span",{className:"font-medium",children:"Saving..."})]}),S.jsx(tR,{}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:S.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const Jz=({notification:t,onRemove:e})=>{const n=a=>{switch(a){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}},i=a=>{switch(a){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return S.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${i(t.type)}`,children:[" ",S.jsxs("div",{className:"flex items-start gap-3",children:[" ",S.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",S.jsxs("div",{className:"flex-1 min-w-0",children:[" ",S.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",S.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",S.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},e7=({notifications:t,onRemove:e})=>S.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>S.jsxs("div",{className:"pointer-events-auto",children:[" ",S.jsx(Jz,{notification:n,onRemove:e})," "]},n.id))," "]});function t7({onLogin:t}){return S.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",S.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",S.jsxs("div",{className:"flex items-center space-x-3",children:[" ",S.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",S.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",S.jsxs("div",{className:"flex flex-col",children:[" ",S.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",S.jsxs("div",{className:"flex items-center gap-4",children:[" ",S.jsx(tR,{})," ",S.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"relative overflow-hidden",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",S.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",S.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",S.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",S.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",S.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",S.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",S.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",S.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",S.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",S.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",S.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",S.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",S.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",S.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🎓 Academic Learning"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Research paper analysis"})," ",S.jsx("li",{children:"• Concept mapping for exams"})," ",S.jsx("li",{children:"• Cross-disciplinary connections"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","💡 Creative Exploration"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Idea generation workflows"})," ",S.jsx("li",{children:"• Problem-solving frameworks"})," ",S.jsx("li",{children:"• Innovation mapping"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🔬 Technical Deep Dives"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• System architecture learning"})," ",S.jsx("li",{children:"• Technology stack exploration"})," ",S.jsx("li",{children:"• Code concept mapping"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🚀 Professional Development"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Skill gap analysis"})," ",S.jsx("li",{children:"• Career pathway planning"})," ",S.jsx("li",{children:"• Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",S.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",S.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required • Get started in seconds"," "]})," "]})," "]})," "," ",S.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",S.jsxs("div",{className:"col-span-1",children:[" ",S.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",S.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",S.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",S.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",S.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",S.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",S.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","© 2024 TinkFlow. All rights reserved."," "]})," ",S.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}function n7({data:t}){const[e,n]=G.useState(""),i=G.useRef(null);G.useEffect(()=>{const l=requestAnimationFrame(()=>{i.current&&(i.current.focus(),t.onReady?.())});return()=>cancelAnimationFrame(l)},[]);const a=l=>{l.preventDefault();const c=e.trim();c&&t.onSubmit(c)};return S.jsxs("div",{className:"bg-white border border-blue-400 rounded-lg p-3 shadow-md min-w-[180px]",children:[S.jsx("form",{onSubmit:a,children:S.jsx("input",{ref:i,className:"border rounded px-2 py-1 text-sm w-full",placeholder:`Enter ${t.mode}...`,value:e,onChange:l=>n(l.target.value)})}),S.jsx(Pn,{type:"target",position:Se.Top}),S.jsx(Pn,{type:"source",position:Se.Bottom})]})}const r7=async()=>{try{await Q9(Df),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},i7=()=>{const[t,e]=G.useState(null);return G.useEffect(()=>{const i=X9(Df,a=>{e(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>i()},[]),{user:t,signOut:async()=>{try{await r7(),e(null)}catch(i){console.error("Error in sign out:",i)}}}},nR=t=>!!(t&&t.uid),vu=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],Al=[],s7=async t=>{if(!nR({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const e=Ly($r,cr.BOARDS),n=zV(e,UV("userId","==",t),jV("createdAt","desc")),i=await Xy(n);if(i.empty){const l={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:bt.now(),isOpen:!0};return await Qy($l($r,cr.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=i.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:bt.now(),isOpen:!0,isFallback:!0}]}throw new Error(On.LOAD_FAILED)}},Sx=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),vu;try{const e=Ly($r,cr.BOARDS,t,cr.NODES),n=await Xy(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),vu;const i=n.docs.map(a=>{const l=a.data(),c={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:a.id,type:l.type,position:l.position,data:c,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",i),i}catch(e){return console.error("Fetch nodes error:",e),vu}},Tx=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),Al;try{const e=Ly($r,cr.BOARDS,t,cr.EDGES),n=await Xy(e);if(n.empty)return console.log("No edges found for board, using initial edges"),Al;const i=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",i),i}catch(e){return console.error("Fetch edges error:",e),Al}},a7=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=h2($r);e.forEach(i=>{const a=$l($r,cr.BOARDS,t,cr.NODES,i.id),l={type:i.type,data:i.data,position:i.position,updatedAt:bt.now()};i.draggable!=null&&(l.draggable=i.draggable),i.style!=null&&(l.style=i.style),n.set(a,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(On.SAVE_FAILED)}},o7=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=h2($r);e.forEach(i=>{const a=$l($r,cr.BOARDS,t,cr.EDGES,i.id),l={source:i.source,target:i.target,updatedAt:bt.now()};i.sourceHandle!=null&&(l.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(l.targetHandle=i.targetHandle),i.style!=null&&(l.style=i.style),i.markerEnd!=null&&(l.markerEnd=i.markerEnd),n.set(a,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(On.SAVE_FAILED)}},l7=async(t,e,n)=>{if(!nR({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:bt.now(),isOpen:!1};return console.log("Creating board:",i),await Qy($l($r,cr.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},c7=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await GV($l($r,cr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},ll=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:bt.now()};await Qy($l($r,cr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},u7=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},d7=t=>Array.isArray(t)?t.map(u7):[],h7=(t,e={})=>{const[n,i,a]=b3([]),[l,c,d]=w3([]),[f,p]=G.useState(!0),[y,v]=G.useState(!1),[b,E]=G.useState(!1),[T,M]=G.useState([]),[N,V]=G.useState(null),B=G.useRef(null),{showSuccess:$,showError:j,showInfo:ne}=e,te=I=>{const P=I.find(K=>K.isOpen===!0);if(P)return P;if(I.length>0){const K={...I[0],isOpen:!0};return ll(K.id,K).catch(console.error),K}return null};G.useEffect(()=>{(async()=>{if(t)try{p(!0);const P=await s7(t.uid);M(P);const K=P.some(Y=>Y.isFallback);K&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const D=te(P);if(!D){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),i(vu),c(Al);return}V(D);const[q,F]=await Promise.all([Sx(D.id),Tx(D.id)]);i(q),c(F),ne&&!K&&ne("Board loaded successfully!")}catch(P){console.error("Error loading initial data:",P),j&&j("Failed to load board data. Using default board."),i(vu),c(Al)}finally{p(!1)}})()},[t,i,c]);const O=async(I,P,K)=>{B.current&&clearTimeout(B.current);const D=setTimeout(async()=>{try{E(!0);const q=[];P&&P.length>0&&q.push(a7(I,P)),K&&K.length>0&&q.push(o7(I,K)),q.length>0&&(await Promise.all(q),console.log("Auto-save completed successfully"))}catch(q){console.error("Auto-save failed:",q),j&&j("Failed to save changes automatically")}finally{E(!1),B.current=null}},1e3);B.current=D};G.useEffect(()=>(!f&&N&&!y&&!N.isFallback&&O(N.id,n,l),()=>{B.current&&clearTimeout(B.current)}),[n,l,f,N,y]);const R=async I=>{try{if(N?.id===I)return;if(N?.isFallback||T.find(K=>K.id===I)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),N&&!N.isFallback){const K={...N,isOpen:!1};await ll(N.id,K),M(D=>D.map(q=>q.id===N.id?K:q))}const P=T.find(K=>K.id===I);if(P){const K={...P,isOpen:!0};await ll(I,K),V(K),M(Y=>Y.map(A=>A.id===I?K:A));const[D,q]=await Promise.all([Sx(I),Tx(I)]),F=d7(D);i(F),c(q),$&&$(`Switched to "${K.name}"`)}else console.error("Board not found:",I),j&&j("Board not found")}catch(P){console.error("Error switching board:",P),j&&j("Failed to switch board. Please try again.")}finally{v(!1)}};return{nodes:n,edges:l,allBoards:T,currentBoard:N,isLoading:f,isSwitchingBoard:y,isSaving:b,onNodesChange:a,onEdgesChange:d,setNodes:i,setEdges:c,switchToBoard:R,createNewBoard:async I=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;ne&&ne("Creating new board...");const P=await l7(t.uid,I||null,T);if(P){if(N&&!N.isFallback){const D={...N,isOpen:!1};ll(N.id,D).catch(console.error)}const K={...P,isOpen:!0};return M(D=>{const q=D.map(F=>F.id===N?.id?{...F,isOpen:!1}:F);return[K,...q]}),V(K),ll(P.id,K).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:I||"New Board"},position:{x:250,y:25},draggable:!1}]),c(Al),$&&$(`Board "${P.name}" created and opened!`),K}else return j&&j("Failed to create board. Please try again."),null}catch(P){return j&&j(`Failed to create board: ${P.message}`),null}},deleteBoard:async I=>{try{if(T.length<=1){j&&j("Cannot delete the last board!");return}if(!T.find(K=>K.id===I)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(ne&&ne("Deleting board..."),N?.id===I){const K=T.find(D=>D.id!==I);K&&await R(K.id)}await c7(I),M(K=>K.filter(D=>D.id!==I)),$&&$("Board deleted successfully!")}catch(P){console.error("Error deleting board:",P),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async I=>{if(N&&N.name!==I){const P={...N,name:I};V(P),M(K=>K.map(D=>D.id===N.id?P:D));try{await ll(N.id,P),console.log("Board name updated successfully")}catch(K){console.error("Error updating board name:",K)}}},clearBoardState:()=>{B.current&&(clearTimeout(B.current),B.current=null),M([]),V(null),i([]),c([]),p(!0),v(!1),E(!1)}}},f7=()=>{const[t,e]=G.useState([]),n=p=>{e(y=>y.filter(v=>v.id!==p))},i=p=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...p};return e(b=>[...b,v]),p.autoRemove!==!1&&setTimeout(()=>{n(y)},p.duration||5e3),y};return{notifications:t,addNotification:i,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(p,y={})=>i({type:"success",message:p,...y}),showError:(p,y={})=>i({type:"error",message:p,duration:7e3,...y}),showInfo:(p,y={})=>i({type:"info",message:p,...y}),showWarning:(p,y={})=>i({type:"warning",message:p,duration:6e3,...y})}},rR=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return S.jsx("div",{className:"flex items-center justify-center",children:S.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function g7({data:t,id:e,onNodeCallback:n}){const[i,a]=G.useState(t.summary||t.label||"Static Node"),{handleTokenClick:l,showExplanation:c}=J2();G.useEffect(()=>{a(t.summary||t.label||"Static Node")},[t.summary,t.label]);const d=_T(i),f=(E,T)=>{T.stopPropagation(),console.log("Static Token clicked:",E),l(E,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",E.suggestionId)},p=E=>{E.stopPropagation(),c&&c(t.title||"Explanation",t.full_text||"No detailed information available.")},y=(()=>{const E=t.tokenColors||{};return d.map((T,M)=>{const N=T.myConcept||T.word,V=E[N],B=!V;return S.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                              ${B?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"} 
                              ${T.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:V||"transparent",color:V?t.myColor||"#ffffff":"inherit",border:V?`1px solid ${V}`:""},onClick:$=>B?f(T,$):$.stopPropagation(),children:[T.word,M<d.length-1?" ":""]},M)})})(),v=S.jsx("div",{className:"node-buttons",children:S.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:p,title:"Show full text",children:"📄"})}),b=G.useMemo(()=>t.isLoading?S.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[S.jsx(rR,{size:"small",color:t.myColor||"#6366f1"}),S.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[S.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),S.jsx("div",{className:"flex gap-2",children:S.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:p,title:"Show full text",children:"📄"})})]}),S.jsx("div",{className:"flex-1",children:S.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",children:y})}),S.jsxs("div",{className:"mt-2",children:[S.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),S.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((E,T)=>{const N=(t.tokenColors||{})[E],V=!N;return S.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${V?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:N||"transparent",color:N?t.myColor||"#ffffff":"inherit",border:N?`1px solid ${N}`:""},onClick:B=>V?f({word:E,myConcept:E,suggestionId:t.label+E+T},B):B.stopPropagation(),children:[E,T<t.suggestions.length-1?" ":""]},T)}):S.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[i,d.length,y,v]);return S.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:t.myColor,color:t.myColor?vM(t.myColor):"#f8faff",border:t.myColor?`1px solid ${Hh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[S.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:b}),S.jsx(Pn,{type:"source",position:Se.Bottom,id:"bottom-source"}),S.jsx(Pn,{type:"target",position:Se.Bottom,id:"bottom-target"})]})}var iR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ax=he.createContext&&he.createContext(iR),p7=["attr","size","title"];function m7(t,e){if(t==null)return{};var n=y7(t,e),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function y7(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Mf(){return Mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mf.apply(this,arguments)}function Rx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function Of(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rx(Object(n),!0).forEach(function(i){v7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rx(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function v7(t,e,n){return e=_7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _7(t){var e=b7(t,"string");return typeof e=="symbol"?e:e+""}function b7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sR(t){return t&&t.map((e,n)=>he.createElement(e.tag,Of({key:n},e.attr),sR(e.child)))}function w7(t){return e=>he.createElement(E7,Mf({attr:Of({},t.attr)},e),sR(t.child))}function E7(t){var e=n=>{var{attr:i,size:a,title:l}=t,c=m7(t,p7),d=a||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),he.createElement("svg",Mf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,c,{className:f,style:Of(Of({color:t.color||n.color},n.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&he.createElement("title",null,l),t.children)};return Ax!==void 0?he.createElement(Ax.Consumer,null,n=>e(n)):e(iR)}function x7(t){return w7({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"},child:[]},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"},child:[]}]})(t)}function S7(){return S.jsxs(S.Fragment,{children:[S.jsx(Pn,{type:"source",position:Se.Bottom,id:"bottom-source"}),S.jsx(Pn,{style:{transform:"translateY(100%)"},type:"target",position:Se.Top,id:"top-target"}),S.jsx(Pn,{style:{transform:"translateY(100%)"},type:"source",position:Se.Left,id:"left-source"}),S.jsx(Pn,{style:{transform:"translateY(100%)"},type:"target",position:Se.Left,id:"left-target"}),S.jsx(Pn,{style:{transform:"translateY(100%)"},type:"source",position:Se.Right,id:"right-source"}),S.jsx(Pn,{style:{transform:"translateY(100%)"},type:"target",position:Se.Right,id:"right-target"})]})}function T7({data:t,id:e}){const[n,i]=G.useState(t.summary||t.label||"Draggable Node"),{getNodes:a,getNode:l,setViewport:c,screenToFlowPosition:d}=Bf(),{handleTokenClick:f,showExplanation:p}=J2(),[y,v]=G.useState(!1),b=G.useRef(null),[E,T]=G.useState({mode:null,x:0,y:0,isDragging:!1}),M=G.useRef(E);G.useEffect(()=>{M.current=E},[E]);const[N,V]=G.useState(null);function B(){v(!0)}function $(){v(!1)}G.useEffect(()=>{i(t.summary||t.label||"Draggable Node")},[t.summary,t.label]);const j=_T(n),ne=j,te=()=>!0,O=(q,F)=>{F.stopPropagation();const A=a().find(Z=>Z.id===e);if(!A){console.error("Shit went south");return}return f(q,e,A.position,A.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node")},R=q=>{q.stopPropagation(),p&&p(t.title,t.full_text||"No detailed information available.")},C=q=>{if(q.stopPropagation(),t.previousNode){const F=l(t.previousNode);if(F){const{x:Y,y:A}=F.position;c({x:-Y+200,y:-A+100,zoom:1},{duration:500})}}},z=G.useMemo(()=>{const q={};return ne.forEach(F=>{const Y=F.myConcept||F.word;q[Y]||(q[Y]=[]),q[Y].push(F)}),q},[ne]);function U(q){if(!q)return"#000000";const F=(q??"000000").replace(/^#/,""),Y=parseInt(F.substring(0,2),16),A=parseInt(F.substring(2,4),16),W=parseInt(F.substring(4,6),16),[Z,Q,ee]=[Y,A,W].map(ue=>{const fe=ue/255;return fe<=.03928?fe/12.92:Math.pow((fe+.055)/1.055,2.4)});return .2126*Z+.7152*Q+.0722*ee>.179?"#000000":"#ffffff"}const H=G.useMemo(()=>S.jsxs(S.Fragment,{children:[t.isLoading&&S.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[S.jsx(rR,{size:"small",color:t.myColor||"#6366f1"}),S.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[S.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),S.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&S.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:C,title:"Go to previous node",children:"←"}),S.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:R,title:"Show full text",children:"📄"})]})]}),S.jsx("div",{className:"flex-1",children:S.jsx("div",{className:"cursor-text leading-relaxed break-words",children:ne.map((q,F)=>{const Y=t.tokenColors||{},A=q.myConcept||q.word,W=Y[A],Z=!W;return S.jsxs("span",{className:`inline-block px-1 py-0.5 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${Z?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${q.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:W||"transparent",color:U(W||t.myColor),border:W?`1px solid ${Hh(W,20)}`:"",boxShadow:W?`0 0 0 1px ${W}25`:""},onClick:Q=>Z?O(q,Q):Q.stopPropagation(),children:[q.word,F<ne.length-1?" ":""]},F)})})}),S.jsxs("div",{className:"mt-2",children:[S.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),S.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((q,F)=>{const A=(t.tokenColors||{})[q],W=!A;return S.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${W?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:A||"transparent",color:U(A||t.myColor),border:A?`1px solid ${Hh(A,20)}`:""},onClick:Z=>W?O({word:q,myConcept:q,suggestionId:t.label+q+F},Z):Z.stopPropagation(),children:[q,S.jsx(Pn,{type:"source",position:Se.Bottom,id:t.label+q+F})]},F)}):S.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,ne,j,z,R,O,te,t.previousNode,C,t.tokenColors,t.myColor,t.isLoading]),I=(q,F)=>{const A=F.target.getBoundingClientRect();V({x:A.left+A.width/2,y:A.top+A.height/2}),T({mode:q,x:F.clientX,y:F.clientY,isDragging:!0}),document.addEventListener("pointermove",P),document.addEventListener("pointerup",K)},P=q=>{T(F=>F.isDragging?{...F,x:q.clientX,y:q.clientY}:F)},K=()=>{const q=M.current;if(console.log("handleDragEnd",q),q.isDragging&&t.onNodeCallback){const F=d({x:q.x,y:q.y});console.log("Calling onNodeCallback",q.mode,F),t.onNodeCallback(q.mode||void 0,e,F)}T({mode:null,x:0,y:0,isDragging:!1}),V(null),document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",K)},D=()=>{if(!b.current)return{x:0,y:0};const q=b.current.getBoundingClientRect();return{x:q.left+q.width/2,y:q.top+q.height/2}};return S.jsxs("div",{ref:b,className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[600px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?U(t.myColor):"#f0f4f8",border:t.myColor?`2px solid ${Hh(t.myColor,.5)}`:"2px solid rgba(255, 255, 255, 0.12)"},children:[S.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:H}),S.jsx(S7,{}),S.jsx("div",{className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-200 cursor-pointer",onMouseEnter:B,onMouseLeave:$,onClick:q=>q.stopPropagation(),children:S.jsx(x7,{className:"w-20 h-20"})}),S.jsx("div",{className:"input-menu",style:{position:"relative",zIndex:10},children:["explain","answer","argue"].map(q=>S.jsx("div",{style:{cursor:"grab",userSelect:"none",position:"relative",zIndex:11,textAlign:"center"},draggable:!1,onPointerDown:F=>{F.stopPropagation(),F.preventDefault(),F.button===0&&I(q,F.nativeEvent)},children:q.charAt(0).toUpperCase()+q.slice(1)},q))}),E.isDragging&&typeof window<"u"&&iS.createPortal(S.jsxs(S.Fragment,{children:[S.jsx("svg",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",pointerEvents:"none",zIndex:9998},children:S.jsx("line",{x1:N?N.x:D().x,y1:N?N.y:D().y,x2:E.x,y2:E.y,stroke:"#60a5fa",strokeWidth:3,strokeDasharray:"6 4"})}),S.jsx("div",{style:{position:"fixed",left:E.x-40,top:E.y-20,pointerEvents:"none",zIndex:9999},children:S.jsx("div",{style:{background:"#222",color:"#fff",padding:"8px 16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",fontWeight:600},children:E.mode&&E.mode.charAt(0).toUpperCase()+E.mode.slice(1)})})]}),document.body)]})}const A7={staticEditable:g7,draggableEditable:T7},R7={...A7,tempInput:n7},C7=G.memo(function({isVisible:e,explanation:n,onClose:i}){return e?S.jsx(q3,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:S.jsx("div",{className:"relative z-10 overflow-auto h-full",children:S.jsx(Xz,{explanation:n,onClose:i,isVisible:e})})}):null});function N7(){const[t,e]=G.useState(!1),[n,i]=G.useState(!1),[a,l]=G.useState(!1),[c,d]=G.useState(null),f=G.useCallback((Z,Q)=>{d({title:Z,text:Q}),e(!0)},[]),p=G.useCallback(()=>{e(!1)},[]),{user:y,signOut:v}=i7(),{notifications:b,removeNotification:E,showSuccess:T,showError:M,showInfo:N}=f7(),{nodes:V,edges:B,allBoards:$,currentBoard:j,isSwitchingBoard:ne,isSaving:te,onNodesChange:O,onEdgesChange:R,setNodes:C,setEdges:z,switchToBoard:U,createNewBoard:H,deleteBoard:I,updateBoardName:P,clearBoardState:K}=h7(y,{showSuccess:T,showError:M,showInfo:N}),D=async()=>{await v(),K()},q=()=>{i(!0)},F=G.useCallback(Z=>{const Q={id:`e${Z.source}-${Z.target}`,source:Z.source,target:Z.target,sourceHandle:Z.sourceHandle,targetHandle:Z.targetHandle};R([{type:"add",item:Q}])},[R]),Y=G.useCallback((Z,Q,ee,le,ue)=>{if(!ee||!ue){console.warn("handleNodeCallback called without mode or position",ee,ue);return}const fe=`temp-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;C(_e=>[..._e,{id:fe,type:"tempInput",position:ue,data:{mode:ee,parent:le}}]),le&&R([{type:"add",item:{id:`e${le}-${fe}`,source:le,target:fe,style:{stroke:"#FFFFFF",strokeWidth:3},markerEnd:{type:Qa.ArrowClosed,color:"#FFFFFF"}}}])},[C]),A=G.useMemo(()=>V.map(Z=>{let Q={...Z.data};return Q.onNodeCallback=(ee,le,ue)=>Y(Z.id,Z.data,ee,le,ue),Z.type==="tempInput"&&(Q.onSubmit=ee=>{C(Be=>Be.map(Ze=>Ze.id===Z.id?{...Ze,type:"draggableEditable",data:{...Ze.data,label:ee}}:Ze));const le=V.find(Be=>Be.id===Z.data.parent),ue=le?.data?.color,fe=le?.data?.summary;console.log(le);const _e={word:ee},Ae=Z.data.parent,Re={x:Z.position.x,y:Z.position.y},$e=Z2(_e,Ae,Re,"draggableEditable",V,C,O,R,ue,fe,void 0,!0,Z);if(console.log("Color from handleTokenClick:",$e),C(Be=>Be.map(Ze=>Ze.id===Z.id?{...Ze,data:{...Ze.data,myColor:$e}}:Ze)),Z.data.parent){if(!$e)return;z(Be=>Be.map(Ze=>Ze.id===`e${Z.data.parent}-${Z.id}`?{...Ze,style:{...Ze.style||{},stroke:$e,strokeWidth:3},markerEnd:{type:Qa.ArrowClosed,color:$e}}:Ze))}}),{...Z,data:Q}}),[V,Y,C]),W=G.useMemo(()=>S.jsxs(XS,{nodes:A,edges:B,onNodesChange:O,onEdgesChange:R,onConnect:F,nodeTypes:R7,connectionMode:Ws.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[S.jsx(C3,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),S.jsx(O3,{variant:Cr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[A,B,O,R,F]);return y?S.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[S.jsx(e7,{notifications:b,onRemove:E}),S.jsxs("div",{style:{height:"100%",position:"relative"},children:[S.jsxs(yT,{direction:"horizontal",children:[S.jsx(u0,{defaultSize:15,minSize:10,maxSize:30,children:S.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:S.jsx(Kz,{allBoards:$,currentBoard:j,onSwitchBoard:U,onCreateBoard:async Z=>{await H(Z)},onDeleteBoard:I,onSignOut:D,isLoading:ne})})}),S.jsx(vT,{}),S.jsx(u0,{children:S.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[S.jsx(Zz,{name:j?.name||"Loading...",onSetName:P,user:y,isSaving:te}),S.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:S.jsx(Fz,{nodes:V,onNodesChange:O,onEdgesChange:R,setNodes:C,showExplanation:f,children:W})})]})})]}),S.jsx(C7,{isVisible:t,explanation:c,onClose:p})]})]}):n?S.jsx(Gz,{}):S.jsx(t7,{onLogin:q})}function I7(){return S.jsx(Wz,{children:S.jsx(N7,{})})}const aR=document.getElementById("root");if(!aR)throw new Error("Failed to find the root element");BC.createRoot(aR).render(S.jsx(G.StrictMode,{children:S.jsx(I7,{})}));
