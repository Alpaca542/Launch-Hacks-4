(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Aw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sm={exports:{}},mu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function ZR(){if(Gv)return mu;Gv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return mu.Fragment=t,mu.jsx=n,mu.jsxs=n,mu}var $v;function WR(){return $v||($v=1,sm.exports=ZR()),sm.exports}var xt=WR(),am={exports:{}},Ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function JR(){if(Yv)return Ut;Yv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function T(x){return x===null||typeof x!="object"?null:(x=v&&x[v]||x["@@iterator"],typeof x=="function"?x:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,k={};function L(x,G,J){this.props=x,this.context=G,this.refs=k,this.updater=J||S}L.prototype.isReactComponent={},L.prototype.setState=function(x,G){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,G,"setState")},L.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function H(){}H.prototype=L.prototype;function q(x,G,J){this.props=x,this.context=G,this.refs=k,this.updater=J||S}var F=q.prototype=new H;F.constructor=q,O(F,L.prototype),F.isPureReactComponent=!0;var B=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function N(x,G,J,rt,ct,mt){return J=mt.ref,{$$typeof:e,type:x,key:G,ref:J!==void 0?J:null,props:mt}}function A(x,G){return N(x.type,G,void 0,void 0,void 0,x.props)}function R(x){return typeof x=="object"&&x!==null&&x.$$typeof===e}function M(x){var G={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(J){return G[J]})}var V=/\/+/g;function U(x,G){return typeof x=="object"&&x!==null&&x.key!=null?M(""+x.key):G.toString(36)}function C(){}function P(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(C,C):(x.status="pending",x.then(function(G){x.status==="pending"&&(x.status="fulfilled",x.value=G)},function(G){x.status==="pending"&&(x.status="rejected",x.reason=G)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function it(x,G,J,rt,ct){var mt=typeof x;(mt==="undefined"||mt==="boolean")&&(x=null);var pt=!1;if(x===null)pt=!0;else switch(mt){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(x.$$typeof){case e:case t:pt=!0;break;case y:return pt=x._init,it(pt(x._payload),G,J,rt,ct)}}if(pt)return ct=ct(x),pt=rt===""?"."+U(x,0):rt,B(ct)?(J="",pt!=null&&(J=pt.replace(V,"$&/")+"/"),it(ct,G,J,"",function(kt){return kt})):ct!=null&&(R(ct)&&(ct=A(ct,J+(ct.key==null||x&&x.key===ct.key?"":(""+ct.key).replace(V,"$&/")+"/")+pt)),G.push(ct)),1;pt=0;var Rt=rt===""?".":rt+":";if(B(x))for(var bt=0;bt<x.length;bt++)rt=x[bt],mt=Rt+U(rt,bt),pt+=it(rt,G,J,mt,ct);else if(bt=T(x),typeof bt=="function")for(x=bt.call(x),bt=0;!(rt=x.next()).done;)rt=rt.value,mt=Rt+U(rt,bt++),pt+=it(rt,G,J,mt,ct);else if(mt==="object"){if(typeof x.then=="function")return it(P(x),G,J,rt,ct);throw G=String(x),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return pt}function D(x,G,J){if(x==null)return x;var rt=[],ct=0;return it(x,rt,"","",function(mt){return G.call(J,mt,ct++)}),rt}function $(x){if(x._status===-1){var G=x._result;G=G(),G.then(function(J){(x._status===0||x._status===-1)&&(x._status=1,x._result=J)},function(J){(x._status===0||x._status===-1)&&(x._status=2,x._result=J)}),x._status===-1&&(x._status=0,x._result=G)}if(x._status===1)return x._result.default;throw x._result}var at=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function Y(){}return Ut.Children={map:D,forEach:function(x,G,J){D(x,function(){G.apply(this,arguments)},J)},count:function(x){var G=0;return D(x,function(){G++}),G},toArray:function(x){return D(x,function(G){return G})||[]},only:function(x){if(!R(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Ut.Component=L,Ut.Fragment=n,Ut.Profiler=a,Ut.PureComponent=q,Ut.StrictMode=r,Ut.Suspense=g,Ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ut.__COMPILER_RUNTIME={__proto__:null,c:function(x){return Q.H.useMemoCache(x)}},Ut.cache=function(x){return function(){return x.apply(null,arguments)}},Ut.cloneElement=function(x,G,J){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var rt=O({},x.props),ct=x.key,mt=void 0;if(G!=null)for(pt in G.ref!==void 0&&(mt=void 0),G.key!==void 0&&(ct=""+G.key),G)!X.call(G,pt)||pt==="key"||pt==="__self"||pt==="__source"||pt==="ref"&&G.ref===void 0||(rt[pt]=G[pt]);var pt=arguments.length-2;if(pt===1)rt.children=J;else if(1<pt){for(var Rt=Array(pt),bt=0;bt<pt;bt++)Rt[bt]=arguments[bt+2];rt.children=Rt}return N(x.type,ct,void 0,void 0,mt,rt)},Ut.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},Ut.createElement=function(x,G,J){var rt,ct={},mt=null;if(G!=null)for(rt in G.key!==void 0&&(mt=""+G.key),G)X.call(G,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ct[rt]=G[rt]);var pt=arguments.length-2;if(pt===1)ct.children=J;else if(1<pt){for(var Rt=Array(pt),bt=0;bt<pt;bt++)Rt[bt]=arguments[bt+2];ct.children=Rt}if(x&&x.defaultProps)for(rt in pt=x.defaultProps,pt)ct[rt]===void 0&&(ct[rt]=pt[rt]);return N(x,mt,void 0,void 0,null,ct)},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(x){return{$$typeof:d,render:x}},Ut.isValidElement=R,Ut.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:$}},Ut.memo=function(x,G){return{$$typeof:p,type:x,compare:G===void 0?null:G}},Ut.startTransition=function(x){var G=Q.T,J={};Q.T=J;try{var rt=x(),ct=Q.S;ct!==null&&ct(J,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Y,at)}catch(mt){at(mt)}finally{Q.T=G}},Ut.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ut.use=function(x){return Q.H.use(x)},Ut.useActionState=function(x,G,J){return Q.H.useActionState(x,G,J)},Ut.useCallback=function(x,G){return Q.H.useCallback(x,G)},Ut.useContext=function(x){return Q.H.useContext(x)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(x,G){return Q.H.useDeferredValue(x,G)},Ut.useEffect=function(x,G,J){var rt=Q.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(x,G)},Ut.useId=function(){return Q.H.useId()},Ut.useImperativeHandle=function(x,G,J){return Q.H.useImperativeHandle(x,G,J)},Ut.useInsertionEffect=function(x,G){return Q.H.useInsertionEffect(x,G)},Ut.useLayoutEffect=function(x,G){return Q.H.useLayoutEffect(x,G)},Ut.useMemo=function(x,G){return Q.H.useMemo(x,G)},Ut.useOptimistic=function(x,G){return Q.H.useOptimistic(x,G)},Ut.useReducer=function(x,G,J){return Q.H.useReducer(x,G,J)},Ut.useRef=function(x){return Q.H.useRef(x)},Ut.useState=function(x){return Q.H.useState(x)},Ut.useSyncExternalStore=function(x,G,J){return Q.H.useSyncExternalStore(x,G,J)},Ut.useTransition=function(){return Q.H.useTransition()},Ut.version="19.1.0",Ut}var Kv;function tc(){return Kv||(Kv=1,am.exports=JR()),am.exports}var et=tc();const lt=Aw(et);var om={exports:{}},pu={},lm={exports:{}},um={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function tI(){return Xv||(Xv=1,function(e){function t(D,$){var at=D.length;D.push($);t:for(;0<at;){var Y=at-1>>>1,x=D[Y];if(0<a(x,$))D[Y]=$,D[at]=x,at=Y;else break t}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var $=D[0],at=D.pop();if(at!==$){D[0]=at;t:for(var Y=0,x=D.length,G=x>>>1;Y<G;){var J=2*(Y+1)-1,rt=D[J],ct=J+1,mt=D[ct];if(0>a(rt,at))ct<x&&0>a(mt,rt)?(D[Y]=mt,D[ct]=at,Y=ct):(D[Y]=rt,D[J]=at,Y=J);else if(ct<x&&0>a(mt,at))D[Y]=mt,D[ct]=at,Y=ct;else break t}}return $}function a(D,$){var at=D.sortIndex-$.sortIndex;return at!==0?at:D.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],p=[],y=1,v=null,T=3,S=!1,O=!1,k=!1,L=!1,H=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function B(D){for(var $=n(p);$!==null;){if($.callback===null)r(p);else if($.startTime<=D)r(p),$.sortIndex=$.expirationTime,t(g,$);else break;$=n(p)}}function Q(D){if(k=!1,B(D),!O)if(n(g)!==null)O=!0,X||(X=!0,U());else{var $=n(p);$!==null&&it(Q,$.startTime-D)}}var X=!1,N=-1,A=5,R=-1;function M(){return L?!0:!(e.unstable_now()-R<A)}function V(){if(L=!1,X){var D=e.unstable_now();R=D;var $=!0;try{t:{O=!1,k&&(k=!1,q(N),N=-1),S=!0;var at=T;try{e:{for(B(D),v=n(g);v!==null&&!(v.expirationTime>D&&M());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,T=v.priorityLevel;var x=Y(v.expirationTime<=D);if(D=e.unstable_now(),typeof x=="function"){v.callback=x,B(D),$=!0;break e}v===n(g)&&r(g),B(D)}else r(g);v=n(g)}if(v!==null)$=!0;else{var G=n(p);G!==null&&it(Q,G.startTime-D),$=!1}}break t}finally{v=null,T=at,S=!1}$=void 0}}finally{$?U():X=!1}}}var U;if(typeof F=="function")U=function(){F(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,P=C.port2;C.port1.onmessage=V,U=function(){P.postMessage(null)}}else U=function(){H(V,0)};function it(D,$){N=H(function(){D(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_next=function(D){switch(T){case 1:case 2:case 3:var $=3;break;default:$=T}var at=T;T=$;try{return D()}finally{T=at}},e.unstable_requestPaint=function(){L=!0},e.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var at=T;T=D;try{return $()}finally{T=at}},e.unstable_scheduleCallback=function(D,$,at){var Y=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?Y+at:Y):at=Y,D){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=at+x,D={id:y++,callback:$,priorityLevel:D,startTime:at,expirationTime:x,sortIndex:-1},at>Y?(D.sortIndex=at,t(p,D),n(g)===null&&D===n(p)&&(k?(q(N),N=-1):k=!0,it(Q,at-Y))):(D.sortIndex=x,t(g,D),O||S||(O=!0,X||(X=!0,U()))),D},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(D){var $=T;return function(){var at=T;T=$;try{return D.apply(this,arguments)}finally{T=at}}}}(um)),um}var Qv;function eI(){return Qv||(Qv=1,lm.exports=tI()),lm.exports}var cm={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function nI(){if(Zv)return yn;Zv=1;var e=tc();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:p,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(g,p,null,y)},yn.flushSync=function(g){var p=c.T,y=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=y,r.d.f()}},yn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},yn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},yn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:S}):y==="script"&&r.d.X(g,{crossOrigin:v,integrity:T,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},yn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);r.d.L(g,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yn.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=d(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},yn.requestFormReset=function(g){r.d.r(g)},yn.unstable_batchedUpdates=function(g,p){return g(p)},yn.useFormState=function(g,p,y){return c.H.useFormState(g,p,y)},yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var Wv;function Rw(){if(Wv)return cm.exports;Wv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),cm.exports=nI(),cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function iI(){if(Jv)return pu;Jv=1;var e=eI(),t=tc(),n=Rw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),i;if(m===u)return d(f),s;m=m.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=m;else{for(var w=!1,b=f.child;b;){if(b===o){w=!0,o=f,u=m;break}if(b===u){w=!0,u=f,o=m;break}b=b.sibling}if(!w){for(b=m.child;b;){if(b===o){w=!0,o=m,u=f;break}if(b===u){w=!0,u=m,o=f;break}b=b.sibling}if(!w)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),F=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function P(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case L:return"Profiler";case k:return"StrictMode";case Q:return"Suspense";case X:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case F:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case B:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return s=i.displayName||null,s!==null?s:P(i.type)||"Memo";case A:s=i._payload,i=i._init;try{return P(i(s))}catch{}}return null}var it=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},Y=[],x=-1;function G(i){return{current:i}}function J(i){0>x||(i.current=Y[x],Y[x]=null,x--)}function rt(i,s){x++,Y[x]=i.current,i.current=s}var ct=G(null),mt=G(null),pt=G(null),Rt=G(null);function bt(i,s){switch(rt(pt,s),rt(mt,i),rt(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?vv(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=vv(s),i=Ev(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(ct),rt(ct,i)}function kt(){J(ct),J(mt),J(pt)}function Pt(i){i.memoizedState!==null&&rt(Rt,i);var s=ct.current,o=Ev(s,i.type);s!==o&&(rt(mt,i),rt(ct,o))}function ue(i){mt.current===i&&(J(ct),J(mt)),Rt.current===i&&(J(Rt),cu._currentValue=at)}var ce=Object.prototype.hasOwnProperty,ve=e.unstable_scheduleCallback,ye=e.unstable_cancelCallback,he=e.unstable_shouldYield,Ke=e.unstable_requestPaint,Lt=e.unstable_now,Tt=e.unstable_getCurrentPriorityLevel,Ce=e.unstable_ImmediatePriority,mn=e.unstable_UserBlockingPriority,Pn=e.unstable_NormalPriority,Vi=e.unstable_LowPriority,Ln=e.unstable_IdlePriority,wn=e.log,_i=e.unstable_setDisableYieldValue,te=null,Ft=null;function Oe(i){if(typeof wn=="function"&&_i(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(te,i)}catch{}}var Ee=Math.clz32?Math.clz32:Xe,ki=Math.log,Ve=Math.LN2;function Xe(i){return i>>>=0,i===0?32:31-(ki(i)/Ve|0)|0}var Sn=256,bn=4194304;function Qe(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function sn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var b=u&134217727;return b!==0?(u=b&~m,u!==0?f=Qe(u):(w&=b,w!==0?f=Qe(w):o||(o=b&~i,o!==0&&(f=Qe(o))))):(b=u&~m,b!==0?f=Qe(b):w!==0?f=Qe(w):o||(o=u&~i,o!==0&&(f=Qe(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function An(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function ur(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cr(){var i=Sn;return Sn<<=1,(Sn&4194048)===0&&(Sn=256),i}function vi(){var i=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),i}function Un(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Zn(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function zn(i,s,o,u,f,m){var w=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var b=i.entanglements,z=i.expirationTimes,tt=i.hiddenUpdates;for(o=w&~o;0<o;){var ut=31-Ee(o),ft=1<<ut;b[ut]=0,z[ut]=-1;var nt=tt[ut];if(nt!==null)for(tt[ut]=null,ut=0;ut<nt.length;ut++){var st=nt[ut];st!==null&&(st.lane&=-536870913)}o&=~ft}u!==0&&Wn(i,u,0),m!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=m&~(w&~s))}function Wn(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ee(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function $s(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Ee(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Pi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Yr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Li(){var i=$.p;return i!==0?i:(i=window.event,i===void 0?32:zv(i.type))}function qa(i,s){var o=$.p;try{return $.p=i,s()}finally{$.p=o}}var de=Math.random().toString(36).slice(2),xe="__reactFiber$"+de,be="__reactProps$"+de,Nn="__reactContainer$"+de,Ys="__reactEvents$"+de,pl="__reactListeners$"+de,Ui="__reactHandles$"+de,Fa="__reactResources$"+de,hr="__reactMarker$"+de;function zi(i){delete i[xe],delete i[be],delete i[Ys],delete i[pl],delete i[Ui]}function Jn(i){var s=i[xe];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Nn]||o[xe]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=bv(i);i!==null;){if(o=i[xe])return o;i=bv(i)}return s}i=o,o=i.parentNode}return null}function ti(i){if(i=i[xe]||i[Nn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function ei(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function an(i){var s=i[Fa];return s||(s=i[Fa]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Te(i){i[hr]=!0}var Ks=new Set,Kr={};function Bn(i,s){Ei(i,s),Ei(i+"Capture",s)}function Ei(i,s){for(Kr[i]=s,i=0;i<s.length;i++)Ks.add(s[i])}var Xs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ja={},fr={};function Ga(i){return ce.call(fr,i)?!0:ce.call(ja,i)?!1:Xs.test(i)?fr[i]=!0:(ja[i]=!0,!1)}function Bi(i,s,o){if(Ga(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function ni(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Be(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var Hi,$a;function Ti(i){if(Hi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Hi=s&&s[1]||"",$a=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+i+$a}var Xr=!1;function qi(i,s){if(!i||Xr)return"";Xr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(st){var nt=st}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(st){nt=st}i.call(ft.prototype)}}else{try{throw Error()}catch(st){nt=st}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(st){if(st&&nt&&typeof st.stack=="string")return[st.stack,nt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),w=m[0],b=m[1];if(w&&b){var z=w.split(`
`),tt=b.split(`
`);for(f=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;f<tt.length&&!tt[f].includes("DetermineComponentFrameRoot");)f++;if(u===z.length||f===tt.length)for(u=z.length-1,f=tt.length-1;1<=u&&0<=f&&z[u]!==tt[f];)f--;for(;1<=u&&0<=f;u--,f--)if(z[u]!==tt[f]){if(u!==1||f!==1)do if(u--,f--,0>f||z[u]!==tt[f]){var ut=`
`+z[u].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=u&&0<=f);break}}}finally{Xr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ti(o):""}function yl(i){switch(i.tag){case 26:case 27:case 5:return Ti(i.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return qi(i.type,!1);case 11:return qi(i.type.render,!1);case 1:return qi(i.type,!0);case 31:return Ti("Activity");default:return""}}function Ya(i){try{var s="";do s+=yl(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Rn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function _l(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ud(i){var s=_l(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){u=""+w,m.call(this,w)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Ka(i){i._valueTracker||(i._valueTracker=ud(i))}function vl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=_l(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function Qs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var cd=/[\n"\\]/g;function ke(i){return i.replace(cd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Hn(i,s,o,u,f,m,w,b){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Rn(s)):i.value!==""+Rn(s)&&(i.value=""+Rn(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Qr(i,w,Rn(s)):o!=null?Qr(i,w,Rn(o)):u!=null&&i.removeAttribute("value"),f==null&&m!=null&&(i.defaultChecked=!!m),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+Rn(b):i.removeAttribute("name")}function Zs(i,s,o,u,f,m,w,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+Rn(o):"",s=s!=null?""+Rn(s):o,b||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=b?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function Qr(i,s,o){s==="number"&&Qs(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function dr(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Rn(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function se(i,s,o){if(s!=null&&(s=""+Rn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+Rn(o):""}function Ws(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(it(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Rn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function ii(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mc(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Js.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function El(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&mc(i,f,u)}else for(var m in s)s.hasOwnProperty(m)&&mc(i,m,s[m])}function Tl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(i){return fd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var gr=null;function ri(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mr=null,pr=null;function wl(i){var s=ti(i);if(s&&(i=s.stateNode)){var o=i[be]||null;t:switch(i=s.stateNode,s.type){case"input":if(Hn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ke(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[be]||null;if(!f)throw Error(r(90));Hn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&vl(u)}break t;case"textarea":se(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&dr(i,!!o.multiple,s,!1)}}}var Fi=!1;function pc(i,s,o){if(Fi)return i(s,o);Fi=!0;try{var u=i(s);return u}finally{if(Fi=!1,(mr!==null||pr!==null)&&(uh(),mr&&(s=mr,i=pr,pr=mr=null,wl(s),i)))for(s=0;s<i.length;s++)wl(i[s])}}function ta(i,s){var o=i.stateNode;if(o===null)return null;var u=o[be]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),si=!1;if(wi)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){si=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{si=!1}var ji=null,Zr=null,yr=null;function Sl(){if(yr)return yr;var i,s=Zr,o=s.length,u,f="value"in ji?ji.value:ji.textContent,m=f.length;for(i=0;i<o&&s[i]===f[i];i++);var w=o-i;for(u=1;u<=w&&s[o-u]===f[m-u];u++);return yr=f.slice(i,1<u?1-u:void 0)}function Gi(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function bl(){return!1}function Ze(i){function s(o,u,f,m,w){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(o=i[b],this[b]=o?o(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?$i:bl,this.isPropagationStopped=bl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),s}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=Ze(ee),na=y({},ee,{view:0,detail:0}),yc=Ze(na),Za,Wa,Yi,ia=y({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Yi&&(Yi&&i.type==="mousemove"?(Za=i.screenX-Yi.screenX,Wa=i.screenY-Yi.screenY):Wa=Za=0,Yi=i),Za)},movementY:function(i){return"movementY"in i?i.movementY:Wa}}),ai=Ze(ia),_c=y({},ia,{dataTransfer:0}),dd=Ze(_c),ra=y({},na,{relatedTarget:0}),Ja=Ze(ra),Al=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),to=Ze(Al),vc=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),eo=Ze(vc),gd=y({},ee,{data:0}),Rl=Ze(gd),sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Il(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Tc[i])?!!s[i]:!1}function aa(){return Il}var wc=y({},na,{key:function(i){if(i.key){var s=sa[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Gi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ec[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(i){return i.type==="keypress"?Gi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Gi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),no=Ze(wc),Sc=y({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cl=Ze(Sc),_r=y({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),bc=Ze(_r),Ac=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rc=Ze(Ac),Ic=y({},ia,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),io=Ze(Ic),In=y({},ee,{newState:0,oldState:0}),Cc=Ze(In),xc=[9,13,27,32],Ki=wi&&"CompositionEvent"in window,h=null;wi&&"documentMode"in document&&(h=document.documentMode);var _=wi&&"TextEvent"in window&&!h,E=wi&&(!Ki||h&&8<h&&11>=h),I=" ",Z=!1;function ot(i,s){switch(i){case"keyup":return xc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Kt=!1;function He(i,s){switch(i){case"compositionend":return yt(s);case"keypress":return s.which!==32?null:(Z=!0,I);case"textInput":return i=s.data,i===I&&Z?null:i;default:return null}}function Xt(i,s){if(Kt)return i==="compositionend"||!Ki&&ot(i,s)?(i=Sl(),yr=Zr=ji=null,Kt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var We={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!We[i.type]:s==="textarea"}function vr(i,s,o,u){mr?pr?pr.push(u):pr=[u]:mr=u,s=mh(s,"onChange"),0<s.length&&(o=new Qa("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var on=null,Xi=null;function xl(i){gv(i,0)}function Nc(i){var s=ei(i);if(vl(s))return i}function ky(i,s){if(i==="change")return s}var Py=!1;if(wi){var md;if(wi){var pd="oninput"in document;if(!pd){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),pd=typeof Ly.oninput=="function"}md=pd}else md=!1;Py=md&&(!document.documentMode||9<document.documentMode)}function Uy(){on&&(on.detachEvent("onpropertychange",zy),Xi=on=null)}function zy(i){if(i.propertyName==="value"&&Nc(Xi)){var s=[];vr(s,Xi,i,ri(i)),pc(xl,s)}}function IA(i,s,o){i==="focusin"?(Uy(),on=s,Xi=o,on.attachEvent("onpropertychange",zy)):i==="focusout"&&Uy()}function CA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Nc(Xi)}function xA(i,s){if(i==="click")return Nc(s)}function NA(i,s){if(i==="input"||i==="change")return Nc(s)}function DA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var qn=typeof Object.is=="function"?Object.is:DA;function Nl(i,s){if(qn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ce.call(s,f)||!qn(i[f],s[f]))return!1}return!0}function By(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Hy(i,s){var o=By(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=By(o)}}function qy(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?qy(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Fy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Qs(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Qs(i.document)}return s}function yd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var MA=wi&&"documentMode"in document&&11>=document.documentMode,ro=null,_d=null,Dl=null,vd=!1;function jy(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vd||ro==null||ro!==Qs(u)||(u=ro,"selectionStart"in u&&yd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Dl&&Nl(Dl,u)||(Dl=u,u=mh(_d,"onSelect"),0<u.length&&(s=new Qa("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=ro)))}function oa(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var so={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},Ed={},Gy={};wi&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function la(i){if(Ed[i])return Ed[i];if(!so[i])return i;var s=so[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in Gy)return Ed[i]=s[o];return i}var $y=la("animationend"),Yy=la("animationiteration"),Ky=la("animationstart"),OA=la("transitionrun"),VA=la("transitionstart"),kA=la("transitioncancel"),Xy=la("transitionend"),Qy=new Map,Td="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Td.push("scrollEnd");function Si(i,s){Qy.set(i,s),Bn(s,[i])}var Zy=new WeakMap;function oi(i,s){if(typeof i=="object"&&i!==null){var o=Zy.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Ya(s)},Zy.set(i,s),s)}return{value:i,source:s,stack:Ya(s)}}var li=[],ao=0,wd=0;function Dc(){for(var i=ao,s=wd=ao=0;s<i;){var o=li[s];li[s++]=null;var u=li[s];li[s++]=null;var f=li[s];li[s++]=null;var m=li[s];if(li[s++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}m!==0&&Wy(o,f,m)}}function Mc(i,s,o,u){li[ao++]=i,li[ao++]=s,li[ao++]=o,li[ao++]=u,wd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Sd(i,s,o,u){return Mc(i,s,o,u),Oc(i)}function oo(i,s){return Mc(i,null,null,s),Oc(i)}function Wy(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=i.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(f=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,f&&s!==null&&(f=31-Ee(o),i=m.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function Oc(i){if(50<nu)throw nu=0,xg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var lo={};function PA(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(i,s,o,u){return new PA(i,s,o,u)}function bd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Er(i,s){var o=i.alternate;return o===null?(o=Fn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function Jy(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Vc(i,s,o,u,f,m){var w=0;if(u=i,typeof i=="function")bd(i)&&(w=1);else if(typeof i=="string")w=UR(i,o,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case R:return i=Fn(31,o,s,f),i.elementType=R,i.lanes=m,i;case O:return ua(o.children,f,m,s);case k:w=8,f|=24;break;case L:return i=Fn(12,o,s,f|2),i.elementType=L,i.lanes=m,i;case Q:return i=Fn(13,o,s,f),i.elementType=Q,i.lanes=m,i;case X:return i=Fn(19,o,s,f),i.elementType=X,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case H:case F:w=10;break t;case q:w=9;break t;case B:w=11;break t;case N:w=14;break t;case A:w=16,u=null;break t}w=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Fn(w,o,s,f),s.elementType=i,s.type=u,s.lanes=m,s}function ua(i,s,o,u){return i=Fn(7,i,u,s),i.lanes=o,i}function Ad(i,s,o){return i=Fn(6,i,null,s),i.lanes=o,i}function Rd(i,s,o){return s=Fn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var uo=[],co=0,kc=null,Pc=0,ui=[],ci=0,ca=null,Tr=1,wr="";function ha(i,s){uo[co++]=Pc,uo[co++]=kc,kc=i,Pc=s}function t_(i,s,o){ui[ci++]=Tr,ui[ci++]=wr,ui[ci++]=ca,ca=i;var u=Tr;i=wr;var f=32-Ee(u)-1;u&=~(1<<f),o+=1;var m=32-Ee(s)+f;if(30<m){var w=f-f%5;m=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Tr=1<<32-Ee(s)+f|o<<f|u,wr=m+i}else Tr=1<<m|o<<f|u,wr=i}function Id(i){i.return!==null&&(ha(i,1),t_(i,1,0))}function Cd(i){for(;i===kc;)kc=uo[--co],uo[co]=null,Pc=uo[--co],uo[co]=null;for(;i===ca;)ca=ui[--ci],ui[ci]=null,wr=ui[--ci],ui[ci]=null,Tr=ui[--ci],ui[ci]=null}var Cn=null,Ae=null,Jt=!1,fa=null,Qi=!1,xd=Error(r(519));function da(i){var s=Error(r(418,""));throw Vl(oi(s,i)),xd}function e_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[xe]=i,s[be]=u,o){case"dialog":Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":case"embed":Gt("load",s);break;case"video":case"audio":for(o=0;o<ru.length;o++)Gt(ru[o],s);break;case"source":Gt("error",s);break;case"img":case"image":case"link":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"input":Gt("invalid",s),Zs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ka(s);break;case"select":Gt("invalid",s);break;case"textarea":Gt("invalid",s),Ws(s,u.value,u.defaultValue,u.children),Ka(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||_v(s.textContent,o)?(u.popover!=null&&(Gt("beforetoggle",s),Gt("toggle",s)),u.onScroll!=null&&Gt("scroll",s),u.onScrollEnd!=null&&Gt("scrollend",s),u.onClick!=null&&(s.onclick=ph),s=!0):s=!1,s||da(i)}function n_(i){for(Cn=i.return;Cn;)switch(Cn.tag){case 5:case 13:Qi=!1;return;case 27:case 3:Qi=!0;return;default:Cn=Cn.return}}function Ml(i){if(i!==Cn)return!1;if(!Jt)return n_(i),Jt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Gg(i.type,i.memoizedProps)),o=!o),o&&Ae&&da(i),n_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){Ae=Ai(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}Ae=null}}else s===27?(s=Ae,ds(i.type)?(i=Xg,Xg=null,Ae=i):Ae=s):Ae=Cn?Ai(i.stateNode.nextSibling):null;return!0}function Ol(){Ae=Cn=null,Jt=!1}function i_(){var i=fa;return i!==null&&(On===null?On=i:On.push.apply(On,i),fa=null),i}function Vl(i){fa===null?fa=[i]:fa.push(i)}var Nd=G(null),ga=null,Sr=null;function Wr(i,s,o){rt(Nd,s._currentValue),s._currentValue=o}function br(i){i._currentValue=Nd.current,J(Nd)}function Dd(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Md(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var m=f.dependencies;if(m!==null){var w=f.child;m=m.firstContext;t:for(;m!==null;){var b=m;m=f;for(var z=0;z<s.length;z++)if(b.context===s[z]){m.lanes|=o,b=m.alternate,b!==null&&(b.lanes|=o),Dd(m.return,o,i),u||(w=null);break t}m=b.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=o,m=w.alternate,m!==null&&(m.lanes|=o),Dd(w,o,i),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===i){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function kl(i,s,o,u){i=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var b=f.type;qn(f.pendingProps.value,w.value)||(i!==null?i.push(b):i=[b])}}else if(f===Rt.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(cu):i=[cu])}f=f.return}i!==null&&Md(s,i,o,u),s.flags|=262144}function Lc(i){for(i=i.firstContext;i!==null;){if(!qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ma(i){ga=i,Sr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pn(i){return r_(ga,i)}function Uc(i,s){return ga===null&&ma(i),r_(i,s)}function r_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Sr===null){if(i===null)throw Error(r(308));Sr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Sr=Sr.next=s;return o}var LA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},UA=e.unstable_scheduleCallback,zA=e.unstable_NormalPriority,Fe={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Od(){return{controller:new LA,data:new Map,refCount:0}}function Pl(i){i.refCount--,i.refCount===0&&UA(zA,function(){i.controller.abort()})}var Ll=null,Vd=0,ho=0,fo=null;function BA(i,s){if(Ll===null){var o=Ll=[];Vd=0,ho=Pg(),fo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Vd++,s.then(s_,s_),s}function s_(){if(--Vd===0&&Ll!==null){fo!==null&&(fo.status="fulfilled");var i=Ll;Ll=null,ho=0,fo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function HA(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var a_=D.S;D.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&BA(i,s),a_!==null&&a_(i,s)};var pa=G(null);function kd(){var i=pa.current;return i!==null?i:ge.pooledCache}function zc(i,s){s===null?rt(pa,pa.current):rt(pa,s.pool)}function o_(){var i=kd();return i===null?null:{parent:Fe._currentValue,pool:i}}var Ul=Error(r(460)),l_=Error(r(474)),Bc=Error(r(542)),Pd={then:function(){}};function u_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Hc(){}function c_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Hc,Hc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,f_(i),i;default:if(typeof s.status=="string")s.then(Hc,Hc);else{if(i=ge,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,f_(i),i}throw zl=s,Ul}}var zl=null;function h_(){if(zl===null)throw Error(r(459));var i=zl;return zl=null,i}function f_(i){if(i===Ul||i===Bc)throw Error(r(483))}var Jr=!1;function Ld(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ud(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ts(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function es(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ie&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Oc(i),Wy(i,null,o),s}return Mc(i,u,s,o),Oc(i)}function Bl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,$s(i,o)}}function zd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=w:m=m.next=w,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Bd=!1;function Hl(){if(Bd){var i=fo;if(i!==null)throw i}}function ql(i,s,o,u){Bd=!1;var f=i.updateQueue;Jr=!1;var m=f.firstBaseUpdate,w=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var z=b,tt=z.next;z.next=null,w===null?m=tt:w.next=tt,w=z;var ut=i.alternate;ut!==null&&(ut=ut.updateQueue,b=ut.lastBaseUpdate,b!==w&&(b===null?ut.firstBaseUpdate=tt:b.next=tt,ut.lastBaseUpdate=z))}if(m!==null){var ft=f.baseState;w=0,ut=tt=z=null,b=m;do{var nt=b.lane&-536870913,st=nt!==b.lane;if(st?(Qt&nt)===nt:(u&nt)===nt){nt!==0&&nt===ho&&(Bd=!0),ut!==null&&(ut=ut.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var Mt=i,It=b;nt=s;var le=o;switch(It.tag){case 1:if(Mt=It.payload,typeof Mt=="function"){ft=Mt.call(le,ft,nt);break t}ft=Mt;break t;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=It.payload,nt=typeof Mt=="function"?Mt.call(le,ft,nt):Mt,nt==null)break t;ft=y({},ft,nt);break t;case 2:Jr=!0}}nt=b.callback,nt!==null&&(i.flags|=64,st&&(i.flags|=8192),st=f.callbacks,st===null?f.callbacks=[nt]:st.push(nt))}else st={lane:nt,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ut===null?(tt=ut=st,z=ft):ut=ut.next=st,w|=nt;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;st=b,b=st.next,st.next=null,f.lastBaseUpdate=st,f.shared.pending=null}}while(!0);ut===null&&(z=ft),f.baseState=z,f.firstBaseUpdate=tt,f.lastBaseUpdate=ut,m===null&&(f.shared.lanes=0),us|=w,i.lanes=w,i.memoizedState=ft}}function d_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function g_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)d_(o[i],s)}var go=G(null),qc=G(0);function m_(i,s){i=Dr,rt(qc,i),rt(go,s),Dr=i|s.baseLanes}function Hd(){rt(qc,Dr),rt(go,go.current)}function qd(){Dr=qc.current,J(go),J(qc)}var ns=0,zt=null,ae=null,Pe=null,Fc=!1,mo=!1,ya=!1,jc=0,Fl=0,po=null,qA=0;function Ne(){throw Error(r(321))}function Fd(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!qn(i[o],s[o]))return!1;return!0}function jd(i,s,o,u,f,m){return ns=m,zt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=i===null||i.memoizedState===null?W_:J_,ya=!1,m=o(u,f),ya=!1,mo&&(m=y_(s,o,u,f)),p_(i),m}function p_(i){D.H=Qc;var s=ae!==null&&ae.next!==null;if(ns=0,Pe=ae=zt=null,Fc=!1,Fl=0,po=null,s)throw Error(r(300));i===null||Je||(i=i.dependencies,i!==null&&Lc(i)&&(Je=!0))}function y_(i,s,o,u){zt=i;var f=0;do{if(mo&&(po=null),Fl=0,mo=!1,25<=f)throw Error(r(301));if(f+=1,Pe=ae=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}D.H=XA,m=s(o,u)}while(mo);return m}function FA(){var i=D.H,s=i.useState()[0];return s=typeof s.then=="function"?jl(s):s,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(zt.flags|=1024),s}function Gd(){var i=jc!==0;return jc=0,i}function $d(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Yd(i){if(Fc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Fc=!1}ns=0,Pe=ae=zt=null,mo=!1,Fl=jc=0,po=null}function Dn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?zt.memoizedState=Pe=i:Pe=Pe.next=i,Pe}function Le(){if(ae===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var s=Pe===null?zt.memoizedState:Pe.next;if(s!==null)Pe=s,ae=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Pe===null?zt.memoizedState=Pe=i:Pe=Pe.next=i}return Pe}function Kd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(i){var s=Fl;return Fl+=1,po===null&&(po=[]),i=c_(po,i,s),s=zt,(Pe===null?s.memoizedState:Pe.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?W_:J_),i}function Gc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return jl(i);if(i.$$typeof===F)return pn(i)}throw Error(r(438,String(i)))}function Xd(i){var s=null,o=zt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=zt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Kd(),zt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=M;return s.index++,o}function Ar(i,s){return typeof s=="function"?s(i):s}function $c(i){var s=Le();return Qd(s,ae,i)}function Qd(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,m=u.pending;if(m!==null){if(f!==null){var w=f.next;f.next=m.next,m.next=w}s.baseQueue=f=m,u.pending=null}if(m=i.baseState,f===null)i.memoizedState=m;else{s=f.next;var b=w=null,z=null,tt=s,ut=!1;do{var ft=tt.lane&-536870913;if(ft!==tt.lane?(Qt&ft)===ft:(ns&ft)===ft){var nt=tt.revertLane;if(nt===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),ft===ho&&(ut=!0);else if((ns&nt)===nt){tt=tt.next,nt===ho&&(ut=!0);continue}else ft={lane:0,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},z===null?(b=z=ft,w=m):z=z.next=ft,zt.lanes|=nt,us|=nt;ft=tt.action,ya&&o(m,ft),m=tt.hasEagerState?tt.eagerState:o(m,ft)}else nt={lane:ft,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},z===null?(b=z=nt,w=m):z=z.next=nt,zt.lanes|=ft,us|=ft;tt=tt.next}while(tt!==null&&tt!==s);if(z===null?w=m:z.next=b,!qn(m,i.memoizedState)&&(Je=!0,ut&&(o=fo,o!==null)))throw o;i.memoizedState=m,i.baseState=w,i.baseQueue=z,u.lastRenderedState=m}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Zd(i){var s=Le(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do m=i(m,w.action),w=w.next;while(w!==f);qn(m,s.memoizedState)||(Je=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function __(i,s,o){var u=zt,f=Le(),m=Jt;if(m){if(o===void 0)throw Error(r(407));o=o()}else o=s();var w=!qn((ae||f).memoizedState,o);w&&(f.memoizedState=o,Je=!0),f=f.queue;var b=T_.bind(null,u,f,i);if(Gl(2048,8,b,[i]),f.getSnapshot!==s||w||Pe!==null&&Pe.memoizedState.tag&1){if(u.flags|=2048,yo(9,Yc(),E_.bind(null,u,f,o,s),null),ge===null)throw Error(r(349));m||(ns&124)!==0||v_(u,s,o)}return o}function v_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=zt.updateQueue,s===null?(s=Kd(),zt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function E_(i,s,o,u){s.value=o,s.getSnapshot=u,w_(s)&&S_(i)}function T_(i,s,o){return o(function(){w_(s)&&S_(i)})}function w_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!qn(i,o)}catch{return!0}}function S_(i){var s=oo(i,2);s!==null&&Kn(s,i,2)}function Wd(i){var s=Dn();if(typeof i=="function"){var o=i;if(i=o(),ya){Oe(!0);try{o()}finally{Oe(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:i},s}function b_(i,s,o,u){return i.baseState=o,Qd(i,ae,typeof u=="function"?u:Ar)}function jA(i,s,o,u,f){if(Xc(i))throw Error(r(485));if(i=s.action,i!==null){var m={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};D.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,A_(s,m)):(m.next=o.next,s.pending=o.next=m)}}function A_(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var m=D.T,w={};D.T=w;try{var b=o(f,u),z=D.S;z!==null&&z(w,b),R_(i,s,b)}catch(tt){Jd(i,s,tt)}finally{D.T=m}}else try{m=o(f,u),R_(i,s,m)}catch(tt){Jd(i,s,tt)}}function R_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){I_(i,s,u)},function(u){return Jd(i,s,u)}):I_(i,s,o)}function I_(i,s,o){s.status="fulfilled",s.value=o,C_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,A_(i,o)))}function Jd(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,C_(s),s=s.next;while(s!==u)}i.action=null}function C_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function x_(i,s){return s}function N_(i,s){if(Jt){var o=ge.formState;if(o!==null){t:{var u=zt;if(Jt){if(Ae){e:{for(var f=Ae,m=Qi;f.nodeType!==8;){if(!m){f=null;break e}if(f=Ai(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ae=Ai(f.nextSibling),u=f.data==="F!";break t}}da(u)}u=!1}u&&(s=o[0])}}return o=Dn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x_,lastRenderedState:s},o.queue=u,o=X_.bind(null,zt,u),u.dispatch=o,u=Wd(!1),m=rg.bind(null,zt,!1,u.queue),u=Dn(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=jA.bind(null,zt,f,m,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function D_(i){var s=Le();return M_(s,ae,i)}function M_(i,s,o){if(s=Qd(i,s,x_)[0],i=$c(Ar)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=jl(s)}catch(w){throw w===Ul?Bc:w}else u=s;s=Le();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(zt.flags|=2048,yo(9,Yc(),GA.bind(null,f,o),null)),[u,m,i]}function GA(i,s){i.action=s}function O_(i){var s=Le(),o=ae;if(o!==null)return M_(s,o,i);Le(),s=s.memoizedState,o=Le();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function yo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=zt.updateQueue,s===null&&(s=Kd(),zt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Yc(){return{destroy:void 0,resource:void 0}}function V_(){return Le().memoizedState}function Kc(i,s,o,u){var f=Dn();u=u===void 0?null:u,zt.flags|=i,f.memoizedState=yo(1|s,Yc(),o,u)}function Gl(i,s,o,u){var f=Le();u=u===void 0?null:u;var m=f.memoizedState.inst;ae!==null&&u!==null&&Fd(u,ae.memoizedState.deps)?f.memoizedState=yo(s,m,o,u):(zt.flags|=i,f.memoizedState=yo(1|s,m,o,u))}function k_(i,s){Kc(8390656,8,i,s)}function P_(i,s){Gl(2048,8,i,s)}function L_(i,s){return Gl(4,2,i,s)}function U_(i,s){return Gl(4,4,i,s)}function z_(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function B_(i,s,o){o=o!=null?o.concat([i]):null,Gl(4,4,z_.bind(null,s,i),o)}function tg(){}function H_(i,s){var o=Le();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Fd(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function q_(i,s){var o=Le();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Fd(s,u[1]))return u[0];if(u=i(),ya){Oe(!0);try{i()}finally{Oe(!1)}}return o.memoizedState=[u,s],u}function eg(i,s,o){return o===void 0||(ns&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=G0(),zt.lanes|=i,us|=i,o)}function F_(i,s,o,u){return qn(o,s)?o:go.current!==null?(i=eg(i,o,u),qn(i,s)||(Je=!0),i):(ns&42)===0?(Je=!0,i.memoizedState=o):(i=G0(),zt.lanes|=i,us|=i,s)}function j_(i,s,o,u,f){var m=$.p;$.p=m!==0&&8>m?m:8;var w=D.T,b={};D.T=b,rg(i,!1,s,o);try{var z=f(),tt=D.S;if(tt!==null&&tt(b,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ut=HA(z,u);$l(i,s,ut,Yn(i))}else $l(i,s,u,Yn(i))}catch(ft){$l(i,s,{then:function(){},status:"rejected",reason:ft},Yn())}finally{$.p=m,D.T=w}}function $A(){}function ng(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=G_(i).queue;j_(i,f,s,at,o===null?$A:function(){return $_(i),o(u)})}function G_(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:at},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function $_(i){var s=G_(i).next.queue;$l(i,s,{},Yn())}function ig(){return pn(cu)}function Y_(){return Le().memoizedState}function K_(){return Le().memoizedState}function YA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Yn();i=ts(o);var u=es(s,i,o);u!==null&&(Kn(u,s,o),Bl(u,s,o)),s={cache:Od()},i.payload=s;return}s=s.return}}function KA(i,s,o){var u=Yn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Xc(i)?Q_(s,o):(o=Sd(i,s,o,u),o!==null&&(Kn(o,i,u),Z_(o,s,u)))}function X_(i,s,o){var u=Yn();$l(i,s,o,u)}function $l(i,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xc(i))Q_(s,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,b=m(w,o);if(f.hasEagerState=!0,f.eagerState=b,qn(b,w))return Mc(i,s,f,0),ge===null&&Dc(),!1}catch{}finally{}if(o=Sd(i,s,f,u),o!==null)return Kn(o,i,u),Z_(o,s,u),!0}return!1}function rg(i,s,o,u){if(u={lane:2,revertLane:Pg(),action:u,hasEagerState:!1,eagerState:null,next:null},Xc(i)){if(s)throw Error(r(479))}else s=Sd(i,o,u,2),s!==null&&Kn(s,i,2)}function Xc(i){var s=i.alternate;return i===zt||s!==null&&s===zt}function Q_(i,s){mo=Fc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function Z_(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,$s(i,o)}}var Qc={readContext:pn,use:Gc,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useLayoutEffect:Ne,useInsertionEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useSyncExternalStore:Ne,useId:Ne,useHostTransitionStatus:Ne,useFormState:Ne,useActionState:Ne,useOptimistic:Ne,useMemoCache:Ne,useCacheRefresh:Ne},W_={readContext:pn,use:Gc,useCallback:function(i,s){return Dn().memoizedState=[i,s===void 0?null:s],i},useContext:pn,useEffect:k_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,Kc(4194308,4,z_.bind(null,s,i),o)},useLayoutEffect:function(i,s){return Kc(4194308,4,i,s)},useInsertionEffect:function(i,s){Kc(4,2,i,s)},useMemo:function(i,s){var o=Dn();s=s===void 0?null:s;var u=i();if(ya){Oe(!0);try{i()}finally{Oe(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Dn();if(o!==void 0){var f=o(s);if(ya){Oe(!0);try{o(s)}finally{Oe(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=KA.bind(null,zt,i),[u.memoizedState,i]},useRef:function(i){var s=Dn();return i={current:i},s.memoizedState=i},useState:function(i){i=Wd(i);var s=i.queue,o=X_.bind(null,zt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:tg,useDeferredValue:function(i,s){var o=Dn();return eg(o,i,s)},useTransition:function(){var i=Wd(!1);return i=j_.bind(null,zt,i.queue,!0,!1),Dn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=zt,f=Dn();if(Jt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ge===null)throw Error(r(349));(Qt&124)!==0||v_(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,k_(T_.bind(null,u,m,i),[i]),u.flags|=2048,yo(9,Yc(),E_.bind(null,u,m,o,s),null),o},useId:function(){var i=Dn(),s=ge.identifierPrefix;if(Jt){var o=wr,u=Tr;o=(u&~(1<<32-Ee(u)-1)).toString(32)+o,s=""+s+"R"+o,o=jc++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=qA++,s=""+s+"r"+o.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:ig,useFormState:N_,useActionState:N_,useOptimistic:function(i){var s=Dn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=rg.bind(null,zt,!0,o),o.dispatch=s,[i,s]},useMemoCache:Xd,useCacheRefresh:function(){return Dn().memoizedState=YA.bind(null,zt)}},J_={readContext:pn,use:Gc,useCallback:H_,useContext:pn,useEffect:P_,useImperativeHandle:B_,useInsertionEffect:L_,useLayoutEffect:U_,useMemo:q_,useReducer:$c,useRef:V_,useState:function(){return $c(Ar)},useDebugValue:tg,useDeferredValue:function(i,s){var o=Le();return F_(o,ae.memoizedState,i,s)},useTransition:function(){var i=$c(Ar)[0],s=Le().memoizedState;return[typeof i=="boolean"?i:jl(i),s]},useSyncExternalStore:__,useId:Y_,useHostTransitionStatus:ig,useFormState:D_,useActionState:D_,useOptimistic:function(i,s){var o=Le();return b_(o,ae,i,s)},useMemoCache:Xd,useCacheRefresh:K_},XA={readContext:pn,use:Gc,useCallback:H_,useContext:pn,useEffect:P_,useImperativeHandle:B_,useInsertionEffect:L_,useLayoutEffect:U_,useMemo:q_,useReducer:Zd,useRef:V_,useState:function(){return Zd(Ar)},useDebugValue:tg,useDeferredValue:function(i,s){var o=Le();return ae===null?eg(o,i,s):F_(o,ae.memoizedState,i,s)},useTransition:function(){var i=Zd(Ar)[0],s=Le().memoizedState;return[typeof i=="boolean"?i:jl(i),s]},useSyncExternalStore:__,useId:Y_,useHostTransitionStatus:ig,useFormState:O_,useActionState:O_,useOptimistic:function(i,s){var o=Le();return ae!==null?b_(o,ae,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Xd,useCacheRefresh:K_},_o=null,Yl=0;function Zc(i){var s=Yl;return Yl+=1,_o===null&&(_o=[]),c_(_o,i,s)}function Kl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Wc(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function t0(i){var s=i._init;return s(i._payload)}function e0(i){function s(K,j){if(i){var W=K.deletions;W===null?(K.deletions=[j],K.flags|=16):W.push(j)}}function o(K,j){if(!i)return null;for(;j!==null;)s(K,j),j=j.sibling;return null}function u(K){for(var j=new Map;K!==null;)K.key!==null?j.set(K.key,K):j.set(K.index,K),K=K.sibling;return j}function f(K,j){return K=Er(K,j),K.index=0,K.sibling=null,K}function m(K,j,W){return K.index=W,i?(W=K.alternate,W!==null?(W=W.index,W<j?(K.flags|=67108866,j):W):(K.flags|=67108866,j)):(K.flags|=1048576,j)}function w(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function b(K,j,W,ht){return j===null||j.tag!==6?(j=Ad(W,K.mode,ht),j.return=K,j):(j=f(j,W),j.return=K,j)}function z(K,j,W,ht){var vt=W.type;return vt===O?ut(K,j,W.props.children,ht,W.key):j!==null&&(j.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===A&&t0(vt)===j.type)?(j=f(j,W.props),Kl(j,W),j.return=K,j):(j=Vc(W.type,W.key,W.props,null,K.mode,ht),Kl(j,W),j.return=K,j)}function tt(K,j,W,ht){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=Rd(W,K.mode,ht),j.return=K,j):(j=f(j,W.children||[]),j.return=K,j)}function ut(K,j,W,ht,vt){return j===null||j.tag!==7?(j=ua(W,K.mode,ht,vt),j.return=K,j):(j=f(j,W),j.return=K,j)}function ft(K,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Ad(""+j,K.mode,W),j.return=K,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case T:return W=Vc(j.type,j.key,j.props,null,K.mode,W),Kl(W,j),W.return=K,W;case S:return j=Rd(j,K.mode,W),j.return=K,j;case A:var ht=j._init;return j=ht(j._payload),ft(K,j,W)}if(it(j)||U(j))return j=ua(j,K.mode,W,null),j.return=K,j;if(typeof j.then=="function")return ft(K,Zc(j),W);if(j.$$typeof===F)return ft(K,Uc(K,j),W);Wc(K,j)}return null}function nt(K,j,W,ht){var vt=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return vt!==null?null:b(K,j,""+W,ht);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case T:return W.key===vt?z(K,j,W,ht):null;case S:return W.key===vt?tt(K,j,W,ht):null;case A:return vt=W._init,W=vt(W._payload),nt(K,j,W,ht)}if(it(W)||U(W))return vt!==null?null:ut(K,j,W,ht,null);if(typeof W.then=="function")return nt(K,j,Zc(W),ht);if(W.$$typeof===F)return nt(K,j,Uc(K,W),ht);Wc(K,W)}return null}function st(K,j,W,ht,vt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return K=K.get(W)||null,b(j,K,""+ht,vt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case T:return K=K.get(ht.key===null?W:ht.key)||null,z(j,K,ht,vt);case S:return K=K.get(ht.key===null?W:ht.key)||null,tt(j,K,ht,vt);case A:var Ht=ht._init;return ht=Ht(ht._payload),st(K,j,W,ht,vt)}if(it(ht)||U(ht))return K=K.get(W)||null,ut(j,K,ht,vt,null);if(typeof ht.then=="function")return st(K,j,W,Zc(ht),vt);if(ht.$$typeof===F)return st(K,j,W,Uc(j,ht),vt);Wc(j,ht)}return null}function Mt(K,j,W,ht){for(var vt=null,Ht=null,wt=j,Ct=j=0,en=null;wt!==null&&Ct<W.length;Ct++){wt.index>Ct?(en=wt,wt=null):en=wt.sibling;var Wt=nt(K,wt,W[Ct],ht);if(Wt===null){wt===null&&(wt=en);break}i&&wt&&Wt.alternate===null&&s(K,wt),j=m(Wt,j,Ct),Ht===null?vt=Wt:Ht.sibling=Wt,Ht=Wt,wt=en}if(Ct===W.length)return o(K,wt),Jt&&ha(K,Ct),vt;if(wt===null){for(;Ct<W.length;Ct++)wt=ft(K,W[Ct],ht),wt!==null&&(j=m(wt,j,Ct),Ht===null?vt=wt:Ht.sibling=wt,Ht=wt);return Jt&&ha(K,Ct),vt}for(wt=u(wt);Ct<W.length;Ct++)en=st(wt,K,Ct,W[Ct],ht),en!==null&&(i&&en.alternate!==null&&wt.delete(en.key===null?Ct:en.key),j=m(en,j,Ct),Ht===null?vt=en:Ht.sibling=en,Ht=en);return i&&wt.forEach(function(_s){return s(K,_s)}),Jt&&ha(K,Ct),vt}function It(K,j,W,ht){if(W==null)throw Error(r(151));for(var vt=null,Ht=null,wt=j,Ct=j=0,en=null,Wt=W.next();wt!==null&&!Wt.done;Ct++,Wt=W.next()){wt.index>Ct?(en=wt,wt=null):en=wt.sibling;var _s=nt(K,wt,Wt.value,ht);if(_s===null){wt===null&&(wt=en);break}i&&wt&&_s.alternate===null&&s(K,wt),j=m(_s,j,Ct),Ht===null?vt=_s:Ht.sibling=_s,Ht=_s,wt=en}if(Wt.done)return o(K,wt),Jt&&ha(K,Ct),vt;if(wt===null){for(;!Wt.done;Ct++,Wt=W.next())Wt=ft(K,Wt.value,ht),Wt!==null&&(j=m(Wt,j,Ct),Ht===null?vt=Wt:Ht.sibling=Wt,Ht=Wt);return Jt&&ha(K,Ct),vt}for(wt=u(wt);!Wt.done;Ct++,Wt=W.next())Wt=st(wt,K,Ct,Wt.value,ht),Wt!==null&&(i&&Wt.alternate!==null&&wt.delete(Wt.key===null?Ct:Wt.key),j=m(Wt,j,Ct),Ht===null?vt=Wt:Ht.sibling=Wt,Ht=Wt);return i&&wt.forEach(function(QR){return s(K,QR)}),Jt&&ha(K,Ct),vt}function le(K,j,W,ht){if(typeof W=="object"&&W!==null&&W.type===O&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case T:t:{for(var vt=W.key;j!==null;){if(j.key===vt){if(vt=W.type,vt===O){if(j.tag===7){o(K,j.sibling),ht=f(j,W.props.children),ht.return=K,K=ht;break t}}else if(j.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===A&&t0(vt)===j.type){o(K,j.sibling),ht=f(j,W.props),Kl(ht,W),ht.return=K,K=ht;break t}o(K,j);break}else s(K,j);j=j.sibling}W.type===O?(ht=ua(W.props.children,K.mode,ht,W.key),ht.return=K,K=ht):(ht=Vc(W.type,W.key,W.props,null,K.mode,ht),Kl(ht,W),ht.return=K,K=ht)}return w(K);case S:t:{for(vt=W.key;j!==null;){if(j.key===vt)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){o(K,j.sibling),ht=f(j,W.children||[]),ht.return=K,K=ht;break t}else{o(K,j);break}else s(K,j);j=j.sibling}ht=Rd(W,K.mode,ht),ht.return=K,K=ht}return w(K);case A:return vt=W._init,W=vt(W._payload),le(K,j,W,ht)}if(it(W))return Mt(K,j,W,ht);if(U(W)){if(vt=U(W),typeof vt!="function")throw Error(r(150));return W=vt.call(W),It(K,j,W,ht)}if(typeof W.then=="function")return le(K,j,Zc(W),ht);if(W.$$typeof===F)return le(K,j,Uc(K,W),ht);Wc(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(o(K,j.sibling),ht=f(j,W),ht.return=K,K=ht):(o(K,j),ht=Ad(W,K.mode,ht),ht.return=K,K=ht),w(K)):o(K,j)}return function(K,j,W,ht){try{Yl=0;var vt=le(K,j,W,ht);return _o=null,vt}catch(wt){if(wt===Ul||wt===Bc)throw wt;var Ht=Fn(29,wt,null,K.mode);return Ht.lanes=ht,Ht.return=K,Ht}finally{}}}var vo=e0(!0),n0=e0(!1),hi=G(null),Zi=null;function is(i){var s=i.alternate;rt(je,je.current&1),rt(hi,i),Zi===null&&(s===null||go.current!==null||s.memoizedState!==null)&&(Zi=i)}function i0(i){if(i.tag===22){if(rt(je,je.current),rt(hi,i),Zi===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Zi=i)}}else rs()}function rs(){rt(je,je.current),rt(hi,hi.current)}function Rr(i){J(hi),Zi===i&&(Zi=null),J(je)}var je=G(0);function Jc(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Kg(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function sg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var ag={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Yn(),f=ts(u);f.payload=s,o!=null&&(f.callback=o),s=es(i,f,u),s!==null&&(Kn(s,i,u),Bl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Yn(),f=ts(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=es(i,f,u),s!==null&&(Kn(s,i,u),Bl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Yn(),u=ts(o);u.tag=2,s!=null&&(u.callback=s),s=es(i,u,o),s!==null&&(Kn(s,i,o),Bl(s,i,o))}};function r0(i,s,o,u,f,m,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,w):s.prototype&&s.prototype.isPureReactComponent?!Nl(o,u)||!Nl(f,m):!0}function s0(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&ag.enqueueReplaceState(s,s.state,null)}function _a(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var th=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function a0(i){th(i)}function o0(i){console.error(i)}function l0(i){th(i)}function eh(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function u0(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function og(i,s,o){return o=ts(o),o.tag=3,o.payload={element:null},o.callback=function(){eh(i,s)},o}function c0(i){return i=ts(i),i.tag=3,i}function h0(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;i.payload=function(){return f(m)},i.callback=function(){u0(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){u0(s,o,u),typeof f!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function QA(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&kl(s,o,f,!0),o=hi.current,o!==null){switch(o.tag){case 13:return Zi===null?Dg():o.alternate===null&&Re===0&&(Re=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Pd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Og(i,u,f)),!1;case 22:return o.flags|=65536,u===Pd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Og(i,u,f)),!1}throw Error(r(435,o.tag))}return Og(i,u,f),Dg(),!1}if(Jt)return s=hi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==xd&&(i=Error(r(422),{cause:u}),Vl(oi(i,o)))):(u!==xd&&(s=Error(r(423),{cause:u}),Vl(oi(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=oi(u,o),f=og(i.stateNode,u,f),zd(i,f),Re!==4&&(Re=2)),!1;var m=Error(r(520),{cause:u});if(m=oi(m,o),eu===null?eu=[m]:eu.push(m),Re!==4&&(Re=2),s===null)return!0;u=oi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=og(o.stateNode,u,i),zd(o,i),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(cs===null||!cs.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=c0(f),h0(f,i,o,u),zd(o,f),!1}o=o.return}while(o!==null);return!1}var f0=Error(r(461)),Je=!1;function ln(i,s,o,u){s.child=i===null?n0(s,null,o,u):vo(s,i.child,o,u)}function d0(i,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var w={};for(var b in u)b!=="ref"&&(w[b]=u[b])}else w=u;return ma(s),u=jd(i,s,o,w,m,f),b=Gd(),i!==null&&!Je?($d(i,s,f),Ir(i,s,f)):(Jt&&b&&Id(s),s.flags|=1,ln(i,s,u,f),s.child)}function g0(i,s,o,u,f){if(i===null){var m=o.type;return typeof m=="function"&&!bd(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,m0(i,s,m,u,f)):(i=Vc(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(m=i.child,!mg(i,f)){var w=m.memoizedProps;if(o=o.compare,o=o!==null?o:Nl,o(w,u)&&i.ref===s.ref)return Ir(i,s,f)}return s.flags|=1,i=Er(m,u),i.ref=s.ref,i.return=s,s.child=i}function m0(i,s,o,u,f){if(i!==null){var m=i.memoizedProps;if(Nl(m,u)&&i.ref===s.ref)if(Je=!1,s.pendingProps=u=m,mg(i,f))(i.flags&131072)!==0&&(Je=!0);else return s.lanes=i.lanes,Ir(i,s,f)}return lg(i,s,o,u,f)}function p0(i,s,o){var u=s.pendingProps,f=u.children,m=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,i!==null){for(f=s.child=i.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return y0(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&zc(s,m!==null?m.cachePool:null),m!==null?m_(s,m):Hd(),i0(s);else return s.lanes=s.childLanes=536870912,y0(i,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(zc(s,m.cachePool),m_(s,m),rs(),s.memoizedState=null):(i!==null&&zc(s,null),Hd(),rs());return ln(i,s,f,o),s.child}function y0(i,s,o,u){var f=kd();return f=f===null?null:{parent:Fe._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},i!==null&&zc(s,null),Hd(),i0(s),i!==null&&kl(i,s,u,!0),null}function nh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function lg(i,s,o,u,f){return ma(s),o=jd(i,s,o,u,void 0,f),u=Gd(),i!==null&&!Je?($d(i,s,f),Ir(i,s,f)):(Jt&&u&&Id(s),s.flags|=1,ln(i,s,o,f),s.child)}function _0(i,s,o,u,f,m){return ma(s),s.updateQueue=null,o=y_(s,u,o,f),p_(i),u=Gd(),i!==null&&!Je?($d(i,s,m),Ir(i,s,m)):(Jt&&u&&Id(s),s.flags|=1,ln(i,s,o,m),s.child)}function v0(i,s,o,u,f){if(ma(s),s.stateNode===null){var m=lo,w=o.contextType;typeof w=="object"&&w!==null&&(m=pn(w)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ag,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Ld(s),w=o.contextType,m.context=typeof w=="object"&&w!==null?pn(w):lo,m.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(sg(s,o,w,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&ag.enqueueReplaceState(m,m.state,null),ql(s,u,m,f),Hl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){m=s.stateNode;var b=s.memoizedProps,z=_a(o,b);m.props=z;var tt=m.context,ut=o.contextType;w=lo,typeof ut=="object"&&ut!==null&&(w=pn(ut));var ft=o.getDerivedStateFromProps;ut=typeof ft=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,ut||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||tt!==w)&&s0(s,m,u,w),Jr=!1;var nt=s.memoizedState;m.state=nt,ql(s,u,m,f),Hl(),tt=s.memoizedState,b||nt!==tt||Jr?(typeof ft=="function"&&(sg(s,o,ft,u),tt=s.memoizedState),(z=Jr||r0(s,o,z,u,nt,tt,w))?(ut||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=tt),m.props=u,m.state=tt,m.context=w,u=z):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Ud(i,s),w=s.memoizedProps,ut=_a(o,w),m.props=ut,ft=s.pendingProps,nt=m.context,tt=o.contextType,z=lo,typeof tt=="object"&&tt!==null&&(z=pn(tt)),b=o.getDerivedStateFromProps,(tt=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==ft||nt!==z)&&s0(s,m,u,z),Jr=!1,nt=s.memoizedState,m.state=nt,ql(s,u,m,f),Hl();var st=s.memoizedState;w!==ft||nt!==st||Jr||i!==null&&i.dependencies!==null&&Lc(i.dependencies)?(typeof b=="function"&&(sg(s,o,b,u),st=s.memoizedState),(ut=Jr||r0(s,o,ut,u,nt,st,z)||i!==null&&i.dependencies!==null&&Lc(i.dependencies))?(tt||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,st,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,st,z)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===i.memoizedProps&&nt===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&nt===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=st),m.props=u,m.state=st,m.context=z,u=ut):(typeof m.componentDidUpdate!="function"||w===i.memoizedProps&&nt===i.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&nt===i.memoizedState||(s.flags|=1024),u=!1)}return m=u,nh(i,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,i!==null&&u?(s.child=vo(s,i.child,null,f),s.child=vo(s,null,o,f)):ln(i,s,o,f),s.memoizedState=m.state,i=s.child):i=Ir(i,s,f),i}function E0(i,s,o,u){return Ol(),s.flags|=256,ln(i,s,o,u),s.child}var ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cg(i){return{baseLanes:i,cachePool:o_()}}function hg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=fi),i}function T0(i,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,w;if((w=m)||(w=i!==null&&i.memoizedState===null?!1:(je.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(Jt){if(f?is(s):rs(),Jt){var b=Ae,z;if(z=b){t:{for(z=b,b=Qi;z.nodeType!==8;){if(!b){b=null;break t}if(z=Ai(z.nextSibling),z===null){b=null;break t}}b=z}b!==null?(s.memoizedState={dehydrated:b,treeContext:ca!==null?{id:Tr,overflow:wr}:null,retryLane:536870912,hydrationErrors:null},z=Fn(18,null,null,0),z.stateNode=b,z.return=s,s.child=z,Cn=s,Ae=null,z=!0):z=!1}z||da(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Kg(b)?s.lanes=32:s.lanes=536870912,null;Rr(s)}return b=u.children,u=u.fallback,f?(rs(),f=s.mode,b=ih({mode:"hidden",children:b},f),u=ua(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,f=s.child,f.memoizedState=cg(o),f.childLanes=hg(i,w,o),s.memoizedState=ug,u):(is(s),fg(s,b))}if(z=i.memoizedState,z!==null&&(b=z.dehydrated,b!==null)){if(m)s.flags&256?(is(s),s.flags&=-257,s=dg(i,s,o)):s.memoizedState!==null?(rs(),s.child=i.child,s.flags|=128,s=null):(rs(),f=u.fallback,b=s.mode,u=ih({mode:"visible",children:u.children},b),f=ua(f,b,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,vo(s,i.child,null,o),u=s.child,u.memoizedState=cg(o),u.childLanes=hg(i,w,o),s.memoizedState=ug,s=f);else if(is(s),Kg(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var tt=w.dgst;w=tt,u=Error(r(419)),u.stack="",u.digest=w,Vl({value:u,source:null,stack:null}),s=dg(i,s,o)}else if(Je||kl(i,s,o,!1),w=(o&i.childLanes)!==0,Je||w){if(w=ge,w!==null&&(u=o&-o,u=(u&42)!==0?1:Pi(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==z.retryLane))throw z.retryLane=u,oo(i,u),Kn(w,i,u),f0;b.data==="$?"||Dg(),s=dg(i,s,o)}else b.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=z.treeContext,Ae=Ai(b.nextSibling),Cn=s,Jt=!0,fa=null,Qi=!1,i!==null&&(ui[ci++]=Tr,ui[ci++]=wr,ui[ci++]=ca,Tr=i.id,wr=i.overflow,ca=s),s=fg(s,u.children),s.flags|=4096);return s}return f?(rs(),f=u.fallback,b=s.mode,z=i.child,tt=z.sibling,u=Er(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,tt!==null?f=Er(tt,f):(f=ua(f,b,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,b=i.child.memoizedState,b===null?b=cg(o):(z=b.cachePool,z!==null?(tt=Fe._currentValue,z=z.parent!==tt?{parent:tt,pool:tt}:z):z=o_(),b={baseLanes:b.baseLanes|o,cachePool:z}),f.memoizedState=b,f.childLanes=hg(i,w,o),s.memoizedState=ug,u):(is(s),o=i.child,i=o.sibling,o=Er(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=o,s.memoizedState=null,o)}function fg(i,s){return s=ih({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function ih(i,s){return i=Fn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function dg(i,s,o){return vo(s,i.child,null,o),i=fg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function w0(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Dd(i.return,s,o)}function gg(i,s,o,u,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function S0(i,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(ln(i,s,u.children,o),u=je.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&w0(i,o,s);else if(i.tag===19)w0(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(rt(je,u),f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&Jc(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),gg(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&Jc(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}gg(s,!0,o,null,m);break;case"together":gg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ir(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),us|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(kl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Er(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Er(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function mg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Lc(i)))}function ZA(i,s,o){switch(s.tag){case 3:bt(s,s.stateNode.containerInfo),Wr(s,Fe,i.memoizedState.cache),Ol();break;case 27:case 5:Pt(s);break;case 4:bt(s,s.stateNode.containerInfo);break;case 10:Wr(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(is(s),s.flags|=128,null):(o&s.child.childLanes)!==0?T0(i,s,o):(is(s),i=Ir(i,s,o),i!==null?i.sibling:null);is(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(kl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return S0(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(je,je.current),u)break;return null;case 22:case 23:return s.lanes=0,p0(i,s,o);case 24:Wr(s,Fe,i.memoizedState.cache)}return Ir(i,s,o)}function b0(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Je=!0;else{if(!mg(i,o)&&(s.flags&128)===0)return Je=!1,ZA(i,s,o);Je=(i.flags&131072)!==0}else Je=!1,Jt&&(s.flags&1048576)!==0&&t_(s,Pc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")bd(u)?(i=_a(u,i),s.tag=1,s=v0(null,s,u,i,o)):(s.tag=0,s=lg(null,s,u,i,o));else{if(u!=null){if(f=u.$$typeof,f===B){s.tag=11,s=d0(null,s,u,i,o);break t}else if(f===N){s.tag=14,s=g0(null,s,u,i,o);break t}}throw s=P(u)||u,Error(r(306,s,""))}}return s;case 0:return lg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=_a(u,s.pendingProps),v0(i,s,u,f,o);case 3:t:{if(bt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,Ud(i,s),ql(s,u,null,o);var w=s.memoizedState;if(u=w.cache,Wr(s,Fe,u),u!==m.cache&&Md(s,[Fe],o,!0),Hl(),u=w.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=E0(i,s,u,o);break t}else if(u!==f){f=oi(Error(r(424)),s),Vl(f),s=E0(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ae=Ai(i.firstChild),Cn=s,Jt=!0,fa=null,Qi=!0,o=n0(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ol(),u===f){s=Ir(i,s,o);break t}ln(i,s,u,o)}s=s.child}return s;case 26:return nh(i,s),i===null?(o=Cv(s.type,null,s.pendingProps,null))?s.memoizedState=o:Jt||(o=s.type,i=s.pendingProps,u=yh(pt.current).createElement(o),u[xe]=s,u[be]=i,cn(u,o,i),Te(u),s.stateNode=u):s.memoizedState=Cv(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Pt(s),i===null&&Jt&&(u=s.stateNode=Av(s.type,s.pendingProps,pt.current),Cn=s,Qi=!0,f=Ae,ds(s.type)?(Xg=f,Ae=Ai(u.firstChild)):Ae=f),ln(i,s,s.pendingProps.children,o),nh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Jt&&((f=u=Ae)&&(u=AR(u,s.type,s.pendingProps,Qi),u!==null?(s.stateNode=u,Cn=s,Ae=Ai(u.firstChild),Qi=!1,f=!0):f=!1),f||da(s)),Pt(s),f=s.type,m=s.pendingProps,w=i!==null?i.memoizedProps:null,u=m.children,Gg(f,m)?u=null:w!==null&&Gg(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=jd(i,s,FA,null,null,o),cu._currentValue=f),nh(i,s),ln(i,s,u,o),s.child;case 6:return i===null&&Jt&&((i=o=Ae)&&(o=RR(o,s.pendingProps,Qi),o!==null?(s.stateNode=o,Cn=s,Ae=null,i=!0):i=!1),i||da(s)),null;case 13:return T0(i,s,o);case 4:return bt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=vo(s,null,u,o):ln(i,s,u,o),s.child;case 11:return d0(i,s,s.type,s.pendingProps,o);case 7:return ln(i,s,s.pendingProps,o),s.child;case 8:return ln(i,s,s.pendingProps.children,o),s.child;case 12:return ln(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Wr(s,s.type,u.value),ln(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ma(s),f=pn(f),u=u(f),s.flags|=1,ln(i,s,u,o),s.child;case 14:return g0(i,s,s.type,s.pendingProps,o);case 15:return m0(i,s,s.type,s.pendingProps,o);case 19:return S0(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=ih(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Er(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return p0(i,s,o);case 24:return ma(s),u=pn(Fe),i===null?(f=kd(),f===null&&(f=ge,m=Od(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},Ld(s),Wr(s,Fe,f)):((i.lanes&o)!==0&&(Ud(i,s),ql(s,null,null,o),Hl()),f=i.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Wr(s,Fe,u)):(u=m.cache,Wr(s,Fe,u),u!==f.cache&&Md(s,[Fe],o,!0))),ln(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Cr(i){i.flags|=4}function A0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ov(s)){if(s=hi.current,s!==null&&((Qt&4194048)===Qt?Zi!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||s!==Zi))throw zl=Pd,l_;i.flags|=8192}}function rh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?vi():536870912,i.lanes|=s,So|=s)}function Xl(i,s){if(!Jt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function we(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function WA(i,s,o){var u=s.pendingProps;switch(Cd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(s),null;case 1:return we(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),br(Fe),kt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Ml(s)?Cr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,i_())),we(s),null;case 26:return o=s.memoizedState,i===null?(Cr(s),o!==null?(we(s),A0(s,o)):(we(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Cr(s),we(s),A0(s,o)):(we(s),s.flags&=-16777217):(i.memoizedProps!==u&&Cr(s),we(s),s.flags&=-16777217),null;case 27:ue(s),o=pt.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Cr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return we(s),null}i=ct.current,Ml(s)?e_(s):(i=Av(f,u,o),s.stateNode=i,Cr(s))}return we(s),null;case 5:if(ue(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Cr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return we(s),null}if(i=ct.current,Ml(s))e_(s);else{switch(f=yh(pt.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}i[xe]=s,i[be]=u;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;t:switch(cn(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Cr(s)}}return we(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Cr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=pt.current,Ml(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=Cn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[xe]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||_v(i.nodeValue,o)),i||da(s)}else i=yh(i).createTextNode(u),i[xe]=s,s.stateNode=i}return we(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Ml(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[xe]=s}else Ol(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;we(s),f=!1}else f=i_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Rr(s),s):(Rr(s),null)}if(Rr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),rh(s,s.updateQueue),we(s),null;case 4:return kt(),i===null&&Bg(s.stateNode.containerInfo),we(s),null;case 10:return br(s.type),we(s),null;case 19:if(J(je),f=s.memoizedState,f===null)return we(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)Xl(f,!1);else{if(Re!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(m=Jc(i),m!==null){for(s.flags|=128,Xl(f,!1),i=m.updateQueue,s.updateQueue=i,rh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)Jy(o,i),o=o.sibling;return rt(je,je.current&1|2),s.child}i=i.sibling}f.tail!==null&&Lt()>oh&&(s.flags|=128,u=!0,Xl(f,!1),s.lanes=4194304)}else{if(!u)if(i=Jc(m),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,rh(s,i),Xl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Jt)return we(s),null}else 2*Lt()-f.renderingStartTime>oh&&o!==536870912&&(s.flags|=128,u=!0,Xl(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(i=f.last,i!==null?i.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Lt(),s.sibling=null,i=je.current,rt(je,u?i&1|2:i&1),s):(we(s),null);case 22:case 23:return Rr(s),qd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(we(s),s.subtreeFlags&6&&(s.flags|=8192)):we(s),o=s.updateQueue,o!==null&&rh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&J(pa),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),br(Fe),we(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function JA(i,s){switch(Cd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return br(Fe),kt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return ue(s),null;case 13:if(Rr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ol()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return J(je),null;case 4:return kt(),null;case 10:return br(s.type),null;case 22:case 23:return Rr(s),qd(),i!==null&&J(pa),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return br(Fe),null;case 25:return null;default:return null}}function R0(i,s){switch(Cd(s),s.tag){case 3:br(Fe),kt();break;case 26:case 27:case 5:ue(s);break;case 4:kt();break;case 13:Rr(s);break;case 19:J(je);break;case 10:br(s.type);break;case 22:case 23:Rr(s),qd(),i!==null&&J(pa);break;case 24:br(Fe)}}function Ql(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var m=o.create,w=o.inst;u=m(),w.destroy=u}o=o.next}while(o!==f)}}catch(b){fe(s,s.return,b)}}function ss(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&i)===i){var w=u.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,f=s;var z=o,tt=b;try{tt()}catch(ut){fe(f,z,ut)}}}u=u.next}while(u!==m)}}catch(ut){fe(s,s.return,ut)}}function I0(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{g_(s,o)}catch(u){fe(i,i.return,u)}}}function C0(i,s,o){o.props=_a(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){fe(i,s,u)}}function Zl(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){fe(i,s,f)}}function Wi(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){fe(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){fe(i,s,f)}else o.current=null}function x0(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){fe(i,i.return,f)}}function pg(i,s,o){try{var u=i.stateNode;ER(u,i.type,o,s),u[be]=s}catch(f){fe(i,i.return,f)}}function N0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ds(i.type)||i.tag===4}function yg(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||N0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ds(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _g(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=ph));else if(u!==4&&(u===27&&ds(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(_g(i,s,o),i=i.sibling;i!==null;)_g(i,s,o),i=i.sibling}function sh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&ds(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(sh(i,s,o),i=i.sibling;i!==null;)sh(i,s,o),i=i.sibling}function D0(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);cn(s,u,o),s[xe]=i,s[be]=o}catch(m){fe(i,i.return,m)}}var xr=!1,De=!1,vg=!1,M0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function tR(i,s){if(i=i.containerInfo,Fg=Sh,i=Fy(i),yd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var w=0,b=-1,z=-1,tt=0,ut=0,ft=i,nt=null;e:for(;;){for(var st;ft!==o||f!==0&&ft.nodeType!==3||(b=w+f),ft!==m||u!==0&&ft.nodeType!==3||(z=w+u),ft.nodeType===3&&(w+=ft.nodeValue.length),(st=ft.firstChild)!==null;)nt=ft,ft=st;for(;;){if(ft===i)break e;if(nt===o&&++tt===f&&(b=w),nt===m&&++ut===u&&(z=w),(st=ft.nextSibling)!==null)break;ft=nt,nt=ft.parentNode}ft=st}o=b===-1||z===-1?null:{start:b,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(jg={focusedElem:i,selectionRange:o},Sh=!1,tn=s;tn!==null;)if(s=tn,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,tn=i;else for(;tn!==null;){switch(s=tn,m=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Mt=_a(o.type,f,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Mt,m),u.__reactInternalSnapshotBeforeUpdate=i}catch(It){fe(o,o.return,It)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Yg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Yg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,tn=i;break}tn=s.return}}function O0(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:as(i,o),u&4&&Ql(5,o);break;case 1:if(as(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(w){fe(o,o.return,w)}else{var f=_a(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){fe(o,o.return,w)}}u&64&&I0(o),u&512&&Zl(o,o.return);break;case 3:if(as(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{g_(i,s)}catch(w){fe(o,o.return,w)}}break;case 27:s===null&&u&4&&D0(o);case 26:case 5:as(i,o),s===null&&u&4&&x0(o),u&512&&Zl(o,o.return);break;case 12:as(i,o);break;case 13:as(i,o),u&4&&P0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=uR.bind(null,o),IR(i,o))));break;case 22:if(u=o.memoizedState!==null||xr,!u){s=s!==null&&s.memoizedState!==null||De,f=xr;var m=De;xr=u,(De=s)&&!m?os(i,o,(o.subtreeFlags&8772)!==0):as(i,o),xr=f,De=m}break;case 30:break;default:as(i,o)}}function V0(i){var s=i.alternate;s!==null&&(i.alternate=null,V0(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&zi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _e=null,Mn=!1;function Nr(i,s,o){for(o=o.child;o!==null;)k0(i,s,o),o=o.sibling}function k0(i,s,o){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(te,o)}catch{}switch(o.tag){case 26:De||Wi(o,s),Nr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:De||Wi(o,s);var u=_e,f=Mn;ds(o.type)&&(_e=o.stateNode,Mn=!1),Nr(i,s,o),au(o.stateNode),_e=u,Mn=f;break;case 5:De||Wi(o,s);case 6:if(u=_e,f=Mn,_e=null,Nr(i,s,o),_e=u,Mn=f,_e!==null)if(Mn)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(o.stateNode)}catch(m){fe(o,s,m)}else try{_e.removeChild(o.stateNode)}catch(m){fe(o,s,m)}break;case 18:_e!==null&&(Mn?(i=_e,Sv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),gu(i)):Sv(_e,o.stateNode));break;case 4:u=_e,f=Mn,_e=o.stateNode.containerInfo,Mn=!0,Nr(i,s,o),_e=u,Mn=f;break;case 0:case 11:case 14:case 15:De||ss(2,o,s),De||ss(4,o,s),Nr(i,s,o);break;case 1:De||(Wi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&C0(o,s,u)),Nr(i,s,o);break;case 21:Nr(i,s,o);break;case 22:De=(u=De)||o.memoizedState!==null,Nr(i,s,o),De=u;break;default:Nr(i,s,o)}}function P0(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{gu(i)}catch(o){fe(s,s.return,o)}}function eR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new M0),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new M0),s;default:throw Error(r(435,i.tag))}}function Eg(i,s){var o=eR(i);s.forEach(function(u){var f=cR.bind(null,i,u);o.has(u)||(o.add(u),u.then(f,f))})}function jn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=i,w=s,b=w;t:for(;b!==null;){switch(b.tag){case 27:if(ds(b.type)){_e=b.stateNode,Mn=!1;break t}break;case 5:_e=b.stateNode,Mn=!1;break t;case 3:case 4:_e=b.stateNode.containerInfo,Mn=!0;break t}b=b.return}if(_e===null)throw Error(r(160));k0(m,w,f),_e=null,Mn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)L0(s,i),s=s.sibling}var bi=null;function L0(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:jn(s,i),Gn(i),u&4&&(ss(3,i,i.return),Ql(3,i),ss(5,i,i.return));break;case 1:jn(s,i),Gn(i),u&512&&(De||o===null||Wi(o,o.return)),u&64&&xr&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=bi;if(jn(s,i),Gn(i),u&512&&(De||o===null||Wi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[hr]||m[xe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),cn(m,u,o),m[xe]=i,Te(m),u=m;break t;case"link":var w=Dv("link","href",f).get(u+(o.href||""));if(w){for(var b=0;b<w.length;b++)if(m=w[b],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(b,1);break e}}m=f.createElement(u),cn(m,u,o),f.head.appendChild(m);break;case"meta":if(w=Dv("meta","content",f).get(u+(o.content||""))){for(b=0;b<w.length;b++)if(m=w[b],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(b,1);break e}}m=f.createElement(u),cn(m,u,o),f.head.appendChild(m);break;default:throw Error(r(468,u))}m[xe]=i,Te(m),u=m}i.stateNode=u}else Mv(f,i.type,i.stateNode);else i.stateNode=Nv(f,u,i.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Mv(f,i.type,i.stateNode):Nv(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&pg(i,i.memoizedProps,o.memoizedProps)}break;case 27:jn(s,i),Gn(i),u&512&&(De||o===null||Wi(o,o.return)),o!==null&&u&4&&pg(i,i.memoizedProps,o.memoizedProps);break;case 5:if(jn(s,i),Gn(i),u&512&&(De||o===null||Wi(o,o.return)),i.flags&32){f=i.stateNode;try{ii(f,"")}catch(st){fe(i,i.return,st)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,pg(i,f,o!==null?o.memoizedProps:f)),u&1024&&(vg=!0);break;case 6:if(jn(s,i),Gn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(st){fe(i,i.return,st)}}break;case 3:if(Eh=null,f=bi,bi=_h(s.containerInfo),jn(s,i),bi=f,Gn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{gu(s.containerInfo)}catch(st){fe(i,i.return,st)}vg&&(vg=!1,U0(i));break;case 4:u=bi,bi=_h(i.stateNode.containerInfo),jn(s,i),Gn(i),bi=u;break;case 12:jn(s,i),Gn(i);break;case 13:jn(s,i),Gn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Rg=Lt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Eg(i,u)));break;case 22:f=i.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,tt=xr,ut=De;if(xr=tt||f,De=ut||z,jn(s,i),De=ut,xr=tt,Gn(i),u&8192)t:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||z||xr||De||va(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){z=o=s;try{if(m=z.stateNode,f)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=z.stateNode;var ft=z.memoizedProps.style,nt=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;b.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(st){fe(z,z.return,st)}}}else if(s.tag===6){if(o===null){z=s;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(st){fe(z,z.return,st)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Eg(i,o))));break;case 19:jn(s,i),Gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Eg(i,u)));break;case 30:break;case 21:break;default:jn(s,i),Gn(i)}}function Gn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(N0(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,m=yg(i);sh(i,m,f);break;case 5:var w=o.stateNode;o.flags&32&&(ii(w,""),o.flags&=-33);var b=yg(i);sh(i,b,w);break;case 3:case 4:var z=o.stateNode.containerInfo,tt=yg(i);_g(i,tt,z);break;default:throw Error(r(161))}}catch(ut){fe(i,i.return,ut)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function U0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;U0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function as(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)O0(i,s.alternate,s),s=s.sibling}function va(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ss(4,s,s.return),va(s);break;case 1:Wi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&C0(s,s.return,o),va(s);break;case 27:au(s.stateNode);case 26:case 5:Wi(s,s.return),va(s);break;case 22:s.memoizedState===null&&va(s);break;case 30:va(s);break;default:va(s)}i=i.sibling}}function os(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,m=s,w=m.flags;switch(m.tag){case 0:case 11:case 15:os(f,m,o),Ql(4,m);break;case 1:if(os(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(tt){fe(u,u.return,tt)}if(u=m,f=u.updateQueue,f!==null){var b=u.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)d_(z[f],b)}catch(tt){fe(u,u.return,tt)}}o&&w&64&&I0(m),Zl(m,m.return);break;case 27:D0(m);case 26:case 5:os(f,m,o),o&&u===null&&w&4&&x0(m),Zl(m,m.return);break;case 12:os(f,m,o);break;case 13:os(f,m,o),o&&w&4&&P0(f,m);break;case 22:m.memoizedState===null&&os(f,m,o),Zl(m,m.return);break;case 30:break;default:os(f,m,o)}s=s.sibling}}function Tg(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Pl(o))}function wg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Pl(i))}function Ji(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)z0(i,s,o,u),s=s.sibling}function z0(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ji(i,s,o,u),f&2048&&Ql(9,s);break;case 1:Ji(i,s,o,u);break;case 3:Ji(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Pl(i)));break;case 12:if(f&2048){Ji(i,s,o,u),i=s.stateNode;try{var m=s.memoizedProps,w=m.id,b=m.onPostCommit;typeof b=="function"&&b(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){fe(s,s.return,z)}}else Ji(i,s,o,u);break;case 13:Ji(i,s,o,u);break;case 23:break;case 22:m=s.stateNode,w=s.alternate,s.memoizedState!==null?m._visibility&2?Ji(i,s,o,u):Wl(i,s):m._visibility&2?Ji(i,s,o,u):(m._visibility|=2,Eo(i,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Tg(w,s);break;case 24:Ji(i,s,o,u),f&2048&&wg(s.alternate,s);break;default:Ji(i,s,o,u)}}function Eo(i,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=i,w=s,b=o,z=u,tt=w.flags;switch(w.tag){case 0:case 11:case 15:Eo(m,w,b,z,f),Ql(8,w);break;case 23:break;case 22:var ut=w.stateNode;w.memoizedState!==null?ut._visibility&2?Eo(m,w,b,z,f):Wl(m,w):(ut._visibility|=2,Eo(m,w,b,z,f)),f&&tt&2048&&Tg(w.alternate,w);break;case 24:Eo(m,w,b,z,f),f&&tt&2048&&wg(w.alternate,w);break;default:Eo(m,w,b,z,f)}s=s.sibling}}function Wl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:Wl(o,u),f&2048&&Tg(u.alternate,u);break;case 24:Wl(o,u),f&2048&&wg(u.alternate,u);break;default:Wl(o,u)}s=s.sibling}}var Jl=8192;function To(i){if(i.subtreeFlags&Jl)for(i=i.child;i!==null;)B0(i),i=i.sibling}function B0(i){switch(i.tag){case 26:To(i),i.flags&Jl&&i.memoizedState!==null&&BR(bi,i.memoizedState,i.memoizedProps);break;case 5:To(i);break;case 3:case 4:var s=bi;bi=_h(i.stateNode.containerInfo),To(i),bi=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Jl,Jl=16777216,To(i),Jl=s):To(i));break;default:To(i)}}function H0(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function tu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];tn=u,F0(u,i)}H0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)q0(i),i=i.sibling}function q0(i){switch(i.tag){case 0:case 11:case 15:tu(i),i.flags&2048&&ss(9,i,i.return);break;case 3:tu(i);break;case 12:tu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ah(i)):tu(i);break;default:tu(i)}}function ah(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];tn=u,F0(u,i)}H0(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ss(8,s,s.return),ah(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ah(s));break;default:ah(s)}i=i.sibling}}function F0(i,s){for(;tn!==null;){var o=tn;switch(o.tag){case 0:case 11:case 15:ss(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Pl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,tn=u;else t:for(o=i;tn!==null;){u=tn;var f=u.sibling,m=u.return;if(V0(u),u===o){tn=null;break t}if(f!==null){f.return=m,tn=f;break t}tn=m}}}var nR={getCacheForType:function(i){var s=pn(Fe),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},iR=typeof WeakMap=="function"?WeakMap:Map,ie=0,ge=null,jt=null,Qt=0,re=0,$n=null,ls=!1,wo=!1,Sg=!1,Dr=0,Re=0,us=0,Ea=0,bg=0,fi=0,So=0,eu=null,On=null,Ag=!1,Rg=0,oh=1/0,lh=null,cs=null,un=0,hs=null,bo=null,Ao=0,Ig=0,Cg=null,j0=null,nu=0,xg=null;function Yn(){if((ie&2)!==0&&Qt!==0)return Qt&-Qt;if(D.T!==null){var i=ho;return i!==0?i:Pg()}return Li()}function G0(){fi===0&&(fi=(Qt&536870912)===0||Jt?cr():536870912);var i=hi.current;return i!==null&&(i.flags|=32),fi}function Kn(i,s,o){(i===ge&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(Ro(i,0),fs(i,Qt,fi,!1)),Zn(i,o),((ie&2)===0||i!==ge)&&(i===ge&&((ie&2)===0&&(Ea|=o),Re===4&&fs(i,Qt,fi,!1)),tr(i))}function $0(i,s,o){if((ie&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||An(i,s),f=u?aR(i,s):Mg(i,s,!0),m=u;do{if(f===0){wo&&!u&&fs(i,s,0,!1);break}else{if(o=i.current.alternate,m&&!rR(o)){f=Mg(i,s,!1),m=!1;continue}if(f===2){if(m=s,i.errorRecoveryDisabledLanes&m)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var b=i;f=eu;var z=b.current.memoizedState.isDehydrated;if(z&&(Ro(b,w).flags|=256),w=Mg(b,w,!1),w!==2){if(Sg&&!z){b.errorRecoveryDisabledLanes|=m,Ea|=m,f=4;break t}m=On,On=f,m!==null&&(On===null?On=m:On.push.apply(On,m))}f=w}if(m=!1,f!==2)continue}}if(f===1){Ro(i,0),fs(i,s,0,!0);break}t:{switch(u=i,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:fs(u,s,fi,!ls);break t;case 2:On=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Rg+300-Lt(),10<f)){if(fs(u,s,fi,!ls),sn(u,0,!0)!==0)break t;u.timeoutHandle=Tv(Y0.bind(null,u,o,On,lh,Ag,s,fi,Ea,So,ls,m,2,-0,0),f);break t}Y0(u,o,On,lh,Ag,s,fi,Ea,So,ls,m,0,-0,0)}}break}while(!0);tr(i)}function Y0(i,s,o,u,f,m,w,b,z,tt,ut,ft,nt,st){if(i.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(uu={stylesheets:null,count:0,unsuspend:zR},B0(s),ft=HR(),ft!==null)){i.cancelPendingCommit=ft(tv.bind(null,i,s,m,o,u,f,w,b,z,ut,1,nt,st)),fs(i,m,w,!tt);return}tv(i,s,m,o,u,f,w,b,z)}function rR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!qn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function fs(i,s,o,u){s&=~bg,s&=~Ea,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var m=31-Ee(f),w=1<<m;u[m]=-1,f&=~w}o!==0&&Wn(i,o,s)}function uh(){return(ie&6)===0?(iu(0),!1):!0}function Ng(){if(jt!==null){if(re===0)var i=jt.return;else i=jt,Sr=ga=null,Yd(i),_o=null,Yl=0,i=jt;for(;i!==null;)R0(i.alternate,i),i=i.return;jt=null}}function Ro(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,wR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Ng(),ge=i,jt=o=Er(i.current,null),Qt=s,re=0,$n=null,ls=!1,wo=An(i,s),Sg=!1,So=fi=bg=Ea=us=Re=0,On=eu=null,Ag=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Ee(u),m=1<<f;s|=i[f],u&=~m}return Dr=s,Dc(),o}function K0(i,s){zt=null,D.H=Qc,s===Ul||s===Bc?(s=h_(),re=3):s===l_?(s=h_(),re=4):re=s===f0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$n=s,jt===null&&(Re=1,eh(i,oi(s,i.current)))}function X0(){var i=D.H;return D.H=Qc,i===null?Qc:i}function Q0(){var i=D.A;return D.A=nR,i}function Dg(){Re=4,ls||(Qt&4194048)!==Qt&&hi.current!==null||(wo=!0),(us&134217727)===0&&(Ea&134217727)===0||ge===null||fs(ge,Qt,fi,!1)}function Mg(i,s,o){var u=ie;ie|=2;var f=X0(),m=Q0();(ge!==i||Qt!==s)&&(lh=null,Ro(i,s)),s=!1;var w=Re;t:do try{if(re!==0&&jt!==null){var b=jt,z=$n;switch(re){case 8:Ng(),w=6;break t;case 3:case 2:case 9:case 6:hi.current===null&&(s=!0);var tt=re;if(re=0,$n=null,Io(i,b,z,tt),o&&wo){w=0;break t}break;default:tt=re,re=0,$n=null,Io(i,b,z,tt)}}sR(),w=Re;break}catch(ut){K0(i,ut)}while(!0);return s&&i.shellSuspendCounter++,Sr=ga=null,ie=u,D.H=f,D.A=m,jt===null&&(ge=null,Qt=0,Dc()),w}function sR(){for(;jt!==null;)Z0(jt)}function aR(i,s){var o=ie;ie|=2;var u=X0(),f=Q0();ge!==i||Qt!==s?(lh=null,oh=Lt()+500,Ro(i,s)):wo=An(i,s);t:do try{if(re!==0&&jt!==null){s=jt;var m=$n;e:switch(re){case 1:re=0,$n=null,Io(i,s,m,1);break;case 2:case 9:if(u_(m)){re=0,$n=null,W0(s);break}s=function(){re!==2&&re!==9||ge!==i||(re=7),tr(i)},m.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:u_(m)?(re=0,$n=null,W0(s)):(re=0,$n=null,Io(i,s,m,7));break;case 5:var w=null;switch(jt.tag){case 26:w=jt.memoizedState;case 5:case 27:var b=jt;if(!w||Ov(w)){re=0,$n=null;var z=b.sibling;if(z!==null)jt=z;else{var tt=b.return;tt!==null?(jt=tt,ch(tt)):jt=null}break e}}re=0,$n=null,Io(i,s,m,5);break;case 6:re=0,$n=null,Io(i,s,m,6);break;case 8:Ng(),Re=6;break t;default:throw Error(r(462))}}oR();break}catch(ut){K0(i,ut)}while(!0);return Sr=ga=null,D.H=u,D.A=f,ie=o,jt!==null?0:(ge=null,Qt=0,Dc(),Re)}function oR(){for(;jt!==null&&!he();)Z0(jt)}function Z0(i){var s=b0(i.alternate,i,Dr);i.memoizedProps=i.pendingProps,s===null?ch(i):jt=s}function W0(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=_0(o,s,s.pendingProps,s.type,void 0,Qt);break;case 11:s=_0(o,s,s.pendingProps,s.type.render,s.ref,Qt);break;case 5:Yd(s);default:R0(o,s),s=jt=Jy(s,Dr),s=b0(o,s,Dr)}i.memoizedProps=i.pendingProps,s===null?ch(i):jt=s}function Io(i,s,o,u){Sr=ga=null,Yd(s),_o=null,Yl=0;var f=s.return;try{if(QA(i,f,s,o,Qt)){Re=1,eh(i,oi(o,i.current)),jt=null;return}}catch(m){if(f!==null)throw jt=f,m;Re=1,eh(i,oi(o,i.current)),jt=null;return}s.flags&32768?(Jt||u===1?i=!0:wo||(Qt&536870912)!==0?i=!1:(ls=i=!0,(u===2||u===9||u===3||u===6)&&(u=hi.current,u!==null&&u.tag===13&&(u.flags|=16384))),J0(s,i)):ch(s)}function ch(i){var s=i;do{if((s.flags&32768)!==0){J0(s,ls);return}i=s.return;var o=WA(s.alternate,s,Dr);if(o!==null){jt=o;return}if(s=s.sibling,s!==null){jt=s;return}jt=s=i}while(s!==null);Re===0&&(Re=5)}function J0(i,s){do{var o=JA(i.alternate,i);if(o!==null){o.flags&=32767,jt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){jt=i;return}jt=i=o}while(i!==null);Re=6,jt=null}function tv(i,s,o,u,f,m,w,b,z){i.cancelPendingCommit=null;do hh();while(un!==0);if((ie&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=wd,zn(i,o,m,w,b,z),i===ge&&(jt=ge=null,Qt=0),bo=s,hs=i,Ao=o,Ig=m,Cg=f,j0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,hR(Pn,function(){return sv(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=D.T,D.T=null,f=$.p,$.p=2,w=ie,ie|=4;try{tR(i,s,o)}finally{ie=w,$.p=f,D.T=u}}un=1,ev(),nv(),iv()}}function ev(){if(un===1){un=0;var i=hs,s=bo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=D.T,D.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{L0(s,i);var m=jg,w=Fy(i.containerInfo),b=m.focusedElem,z=m.selectionRange;if(w!==b&&b&&b.ownerDocument&&qy(b.ownerDocument.documentElement,b)){if(z!==null&&yd(b)){var tt=z.start,ut=z.end;if(ut===void 0&&(ut=tt),"selectionStart"in b)b.selectionStart=tt,b.selectionEnd=Math.min(ut,b.value.length);else{var ft=b.ownerDocument||document,nt=ft&&ft.defaultView||window;if(nt.getSelection){var st=nt.getSelection(),Mt=b.textContent.length,It=Math.min(z.start,Mt),le=z.end===void 0?It:Math.min(z.end,Mt);!st.extend&&It>le&&(w=le,le=It,It=w);var K=Hy(b,It),j=Hy(b,le);if(K&&j&&(st.rangeCount!==1||st.anchorNode!==K.node||st.anchorOffset!==K.offset||st.focusNode!==j.node||st.focusOffset!==j.offset)){var W=ft.createRange();W.setStart(K.node,K.offset),st.removeAllRanges(),It>le?(st.addRange(W),st.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),st.addRange(W))}}}}for(ft=[],st=b;st=st.parentNode;)st.nodeType===1&&ft.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ft.length;b++){var ht=ft[b];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}Sh=!!Fg,jg=Fg=null}finally{ie=f,$.p=u,D.T=o}}i.current=s,un=2}}function nv(){if(un===2){un=0;var i=hs,s=bo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=D.T,D.T=null;var u=$.p;$.p=2;var f=ie;ie|=4;try{O0(i,s.alternate,s)}finally{ie=f,$.p=u,D.T=o}}un=3}}function iv(){if(un===4||un===3){un=0,Ke();var i=hs,s=bo,o=Ao,u=j0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?un=5:(un=0,bo=hs=null,rv(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(cs=null),Yr(o),s=s.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(te,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=D.T,f=$.p,$.p=2,D.T=null;try{for(var m=i.onRecoverableError,w=0;w<u.length;w++){var b=u[w];m(b.value,{componentStack:b.stack})}}finally{D.T=s,$.p=f}}(Ao&3)!==0&&hh(),tr(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===xg?nu++:(nu=0,xg=i):nu=0,iu(0)}}function rv(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Pl(s)))}function hh(i){return ev(),nv(),iv(),sv()}function sv(){if(un!==5)return!1;var i=hs,s=Ig;Ig=0;var o=Yr(Ao),u=D.T,f=$.p;try{$.p=32>o?32:o,D.T=null,o=Cg,Cg=null;var m=hs,w=Ao;if(un=0,bo=hs=null,Ao=0,(ie&6)!==0)throw Error(r(331));var b=ie;if(ie|=4,q0(m.current),z0(m,m.current,w,o),ie=b,iu(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(te,m)}catch{}return!0}finally{$.p=f,D.T=u,rv(i,s)}}function av(i,s,o){s=oi(o,s),s=og(i.stateNode,s,2),i=es(i,s,2),i!==null&&(Zn(i,2),tr(i))}function fe(i,s,o){if(i.tag===3)av(i,i,o);else for(;s!==null;){if(s.tag===3){av(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(cs===null||!cs.has(u))){i=oi(o,i),o=c0(2),u=es(s,o,2),u!==null&&(h0(o,u,s,i),Zn(u,2),tr(u));break}}s=s.return}}function Og(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new iR;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Sg=!0,f.add(o),i=lR.bind(null,i,s,o),s.then(i,i))}function lR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ge===i&&(Qt&o)===o&&(Re===4||Re===3&&(Qt&62914560)===Qt&&300>Lt()-Rg?(ie&2)===0&&Ro(i,0):bg|=o,So===Qt&&(So=0)),tr(i)}function ov(i,s){s===0&&(s=vi()),i=oo(i,s),i!==null&&(Zn(i,s),tr(i))}function uR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),ov(i,o)}function cR(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),ov(i,o)}function hR(i,s){return ve(i,s)}var fh=null,Co=null,Vg=!1,dh=!1,kg=!1,Ta=0;function tr(i){i!==Co&&i.next===null&&(Co===null?fh=Co=i:Co=Co.next=i),dh=!0,Vg||(Vg=!0,dR())}function iu(i,s){if(!kg&&dh){kg=!0;do for(var o=!1,u=fh;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var w=u.suspendedLanes,b=u.pingedLanes;m=(1<<31-Ee(42|i)+1)-1,m&=f&~(w&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,hv(u,m))}else m=Qt,m=sn(u,u===ge?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||An(u,m)||(o=!0,hv(u,m));u=u.next}while(o);kg=!1}}function fR(){lv()}function lv(){dh=Vg=!1;var i=0;Ta!==0&&(TR()&&(i=Ta),Ta=0);for(var s=Lt(),o=null,u=fh;u!==null;){var f=u.next,m=uv(u,s);m===0?(u.next=null,o===null?fh=f:o.next=f,f===null&&(Co=o)):(o=u,(i!==0||(m&3)!==0)&&(dh=!0)),u=f}iu(i)}function uv(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var w=31-Ee(m),b=1<<w,z=f[w];z===-1?((b&o)===0||(b&u)!==0)&&(f[w]=ur(b,s)):z<=s&&(i.expiredLanes|=b),m&=~b}if(s=ge,o=Qt,o=sn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&ye(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||An(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&ye(u),Yr(o)){case 2:case 8:o=mn;break;case 32:o=Pn;break;case 268435456:o=Ln;break;default:o=Pn}return u=cv.bind(null,i),o=ve(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&ye(u),i.callbackPriority=2,i.callbackNode=null,2}function cv(i,s){if(un!==0&&un!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(hh()&&i.callbackNode!==o)return null;var u=Qt;return u=sn(i,i===ge?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:($0(i,u,s),uv(i,Lt()),i.callbackNode!=null&&i.callbackNode===o?cv.bind(null,i):null)}function hv(i,s){if(hh())return null;$0(i,s,!0)}function dR(){SR(function(){(ie&6)!==0?ve(Ce,fR):lv()})}function Pg(){return Ta===0&&(Ta=cr()),Ta}function fv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Xa(""+i)}function dv(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function gR(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=fv((f[be]||null).action),w=u.submitter;w&&(s=(s=w[be]||null)?fv(s.formAction):w.getAttribute("formAction"),s!==null&&(m=s,w=null));var b=new Qa("action","action",null,u,f);i.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ta!==0){var z=w?dv(f,w):new FormData(f);ng(o,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(b.preventDefault(),z=w?dv(f,w):new FormData(f),ng(o,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var Lg=0;Lg<Td.length;Lg++){var Ug=Td[Lg],mR=Ug.toLowerCase(),pR=Ug[0].toUpperCase()+Ug.slice(1);Si(mR,"on"+pR)}Si($y,"onAnimationEnd"),Si(Yy,"onAnimationIteration"),Si(Ky,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(OA,"onTransitionRun"),Si(VA,"onTransitionStart"),Si(kA,"onTransitionCancel"),Si(Xy,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function gv(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var w=u.length-1;0<=w;w--){var b=u[w],z=b.instance,tt=b.currentTarget;if(b=b.listener,z!==m&&f.isPropagationStopped())break t;m=b,f.currentTarget=tt;try{m(f)}catch(ut){th(ut)}f.currentTarget=null,m=z}else for(w=0;w<u.length;w++){if(b=u[w],z=b.instance,tt=b.currentTarget,b=b.listener,z!==m&&f.isPropagationStopped())break t;m=b,f.currentTarget=tt;try{m(f)}catch(ut){th(ut)}f.currentTarget=null,m=z}}}}function Gt(i,s){var o=s[Ys];o===void 0&&(o=s[Ys]=new Set);var u=i+"__bubble";o.has(u)||(mv(s,i,2,!1),o.add(u))}function zg(i,s,o){var u=0;s&&(u|=4),mv(o,i,u,s)}var gh="_reactListening"+Math.random().toString(36).slice(2);function Bg(i){if(!i[gh]){i[gh]=!0,Ks.forEach(function(o){o!=="selectionchange"&&(yR.has(o)||zg(o,!1,i),zg(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[gh]||(s[gh]=!0,zg("selectionchange",!1,s))}}function mv(i,s,o,u){switch(zv(s)){case 2:var f=jR;break;case 8:f=GR;break;default:f=tm}o=f.bind(null,s,o,i),f=void 0,!si||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Hg(i,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var b=u.stateNode.containerInfo;if(b===f)break;if(w===4)for(w=u.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;b!==null;){if(w=Jn(b),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){u=m=w;continue t}b=b.parentNode}}u=u.return}pc(function(){var tt=m,ut=ri(o),ft=[];t:{var nt=Qy.get(i);if(nt!==void 0){var st=Qa,Mt=i;switch(i){case"keypress":if(Gi(o)===0)break t;case"keydown":case"keyup":st=no;break;case"focusin":Mt="focus",st=Ja;break;case"focusout":Mt="blur",st=Ja;break;case"beforeblur":case"afterblur":st=Ja;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=bc;break;case $y:case Yy:case Ky:st=to;break;case Xy:st=Rc;break;case"scroll":case"scrollend":st=yc;break;case"wheel":st=io;break;case"copy":case"cut":case"paste":st=eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Cl;break;case"toggle":case"beforetoggle":st=Cc}var It=(s&4)!==0,le=!It&&(i==="scroll"||i==="scrollend"),K=It?nt!==null?nt+"Capture":null:nt;It=[];for(var j=tt,W;j!==null;){var ht=j;if(W=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||W===null||K===null||(ht=ta(j,K),ht!=null&&It.push(su(j,ht,W))),le)break;j=j.return}0<It.length&&(nt=new st(nt,Mt,null,o,ut),ft.push({event:nt,listeners:It}))}}if((s&7)===0){t:{if(nt=i==="mouseover"||i==="pointerover",st=i==="mouseout"||i==="pointerout",nt&&o!==gr&&(Mt=o.relatedTarget||o.fromElement)&&(Jn(Mt)||Mt[Nn]))break t;if((st||nt)&&(nt=ut.window===ut?ut:(nt=ut.ownerDocument)?nt.defaultView||nt.parentWindow:window,st?(Mt=o.relatedTarget||o.toElement,st=tt,Mt=Mt?Jn(Mt):null,Mt!==null&&(le=l(Mt),It=Mt.tag,Mt!==le||It!==5&&It!==27&&It!==6)&&(Mt=null)):(st=null,Mt=tt),st!==Mt)){if(It=ai,ht="onMouseLeave",K="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(It=Cl,ht="onPointerLeave",K="onPointerEnter",j="pointer"),le=st==null?nt:ei(st),W=Mt==null?nt:ei(Mt),nt=new It(ht,j+"leave",st,o,ut),nt.target=le,nt.relatedTarget=W,ht=null,Jn(ut)===tt&&(It=new It(K,j+"enter",Mt,o,ut),It.target=W,It.relatedTarget=le,ht=It),le=ht,st&&Mt)e:{for(It=st,K=Mt,j=0,W=It;W;W=xo(W))j++;for(W=0,ht=K;ht;ht=xo(ht))W++;for(;0<j-W;)It=xo(It),j--;for(;0<W-j;)K=xo(K),W--;for(;j--;){if(It===K||K!==null&&It===K.alternate)break e;It=xo(It),K=xo(K)}It=null}else It=null;st!==null&&pv(ft,nt,st,It,!1),Mt!==null&&le!==null&&pv(ft,le,Mt,It,!0)}}t:{if(nt=tt?ei(tt):window,st=nt.nodeName&&nt.nodeName.toLowerCase(),st==="select"||st==="input"&&nt.type==="file")var vt=ky;else if(qe(nt))if(Py)vt=NA;else{vt=CA;var Ht=IA}else st=nt.nodeName,!st||st.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?tt&&Tl(tt.elementType)&&(vt=ky):vt=xA;if(vt&&(vt=vt(i,tt))){vr(ft,vt,o,ut);break t}Ht&&Ht(i,nt,tt),i==="focusout"&&tt&&nt.type==="number"&&tt.memoizedProps.value!=null&&Qr(nt,"number",nt.value)}switch(Ht=tt?ei(tt):window,i){case"focusin":(qe(Ht)||Ht.contentEditable==="true")&&(ro=Ht,_d=tt,Dl=null);break;case"focusout":Dl=_d=ro=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,jy(ft,o,ut);break;case"selectionchange":if(MA)break;case"keydown":case"keyup":jy(ft,o,ut)}var wt;if(Ki)t:{switch(i){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Kt?ot(i,o)&&(Ct="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ct="onCompositionStart");Ct&&(E&&o.locale!=="ko"&&(Kt||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Kt&&(wt=Sl()):(ji=ut,Zr="value"in ji?ji.value:ji.textContent,Kt=!0)),Ht=mh(tt,Ct),0<Ht.length&&(Ct=new Rl(Ct,i,null,o,ut),ft.push({event:Ct,listeners:Ht}),wt?Ct.data=wt:(wt=yt(o),wt!==null&&(Ct.data=wt)))),(wt=_?He(i,o):Xt(i,o))&&(Ct=mh(tt,"onBeforeInput"),0<Ct.length&&(Ht=new Rl("onBeforeInput","beforeinput",null,o,ut),ft.push({event:Ht,listeners:Ct}),Ht.data=wt)),gR(ft,i,tt,o,ut)}gv(ft,s)})}function su(i,s,o){return{instance:i,listener:s,currentTarget:o}}function mh(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ta(i,o),f!=null&&u.unshift(su(i,f,m)),f=ta(i,s),f!=null&&u.push(su(i,f,m))),i.tag===3)return u;i=i.return}return[]}function xo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function pv(i,s,o,u,f){for(var m=s._reactName,w=[];o!==null&&o!==u;){var b=o,z=b.alternate,tt=b.stateNode;if(b=b.tag,z!==null&&z===u)break;b!==5&&b!==26&&b!==27||tt===null||(z=tt,f?(tt=ta(o,m),tt!=null&&w.unshift(su(o,tt,z))):f||(tt=ta(o,m),tt!=null&&w.push(su(o,tt,z)))),o=o.return}w.length!==0&&i.push({event:s,listeners:w})}var _R=/\r\n?/g,vR=/\u0000|\uFFFD/g;function yv(i){return(typeof i=="string"?i:""+i).replace(_R,`
`).replace(vR,"")}function _v(i,s){return s=yv(s),yv(i)===s}function ph(){}function oe(i,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ii(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ii(i,""+u);break;case"className":ni(i,"class",u);break;case"tabIndex":ni(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(i,o,u);break;case"style":El(i,u,m);break;case"data":if(s!=="object"){ni(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Xa(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&oe(i,s,"name",f.name,f,null),oe(i,s,"formEncType",f.formEncType,f,null),oe(i,s,"formMethod",f.formMethod,f,null),oe(i,s,"formTarget",f.formTarget,f,null)):(oe(i,s,"encType",f.encType,f,null),oe(i,s,"method",f.method,f,null),oe(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Xa(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=ph);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Xa(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),Bi(i,"popover",u);break;case"xlinkActuate":Be(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Be(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Be(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Be(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Be(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Be(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Be(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Be(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Be(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Bi(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=hd.get(o)||o,Bi(i,o,u))}}function qg(i,s,o,u,f,m){switch(o){case"style":El(i,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?ii(i,u):(typeof u=="number"||typeof u=="bigint")&&ii(i,""+u);break;case"onScroll":u!=null&&Gt("scroll",i);break;case"onScrollEnd":u!=null&&Gt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ph);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=i[be]||null,m=m!=null?m[o]:null,typeof m=="function"&&i.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Bi(i,o,u)}}}function cn(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var w=o[m];if(w!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,m,w,o,null)}}f&&oe(i,s,"srcSet",o.srcSet,o,null),u&&oe(i,s,"src",o.src,o,null);return;case"input":Gt("invalid",i);var b=m=w=f=null,z=null,tt=null;for(u in o)if(o.hasOwnProperty(u)){var ut=o[u];if(ut!=null)switch(u){case"name":f=ut;break;case"type":w=ut;break;case"checked":z=ut;break;case"defaultChecked":tt=ut;break;case"value":m=ut;break;case"defaultValue":b=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,s));break;default:oe(i,s,u,ut,o,null)}}Zs(i,m,b,z,tt,w,f,!1),Ka(i);return;case"select":Gt("invalid",i),u=w=m=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":w=b;break;case"multiple":u=b;default:oe(i,s,f,b,o,null)}s=m,o=w,i.multiple=!!u,s!=null?dr(i,!!u,s,!1):o!=null&&dr(i,!!u,o,!0);return;case"textarea":Gt("invalid",i),m=f=u=null;for(w in o)if(o.hasOwnProperty(w)&&(b=o[w],b!=null))switch(w){case"value":u=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:oe(i,s,w,b,o,null)}Ws(i,u,f,m),Ka(i);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:oe(i,s,z,u,o,null)}return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(u=0;u<ru.length;u++)Gt(ru[u],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in o)if(o.hasOwnProperty(tt)&&(u=o[tt],u!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,tt,u,o,null)}return;default:if(Tl(s)){for(ut in o)o.hasOwnProperty(ut)&&(u=o[ut],u!==void 0&&qg(i,s,ut,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&oe(i,s,b,u,o,null))}function ER(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,w=null,b=null,z=null,tt=null,ut=null;for(st in o){var ft=o[st];if(o.hasOwnProperty(st)&&ft!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":z=ft;default:u.hasOwnProperty(st)||oe(i,s,st,null,u,ft)}}for(var nt in u){var st=u[nt];if(ft=o[nt],u.hasOwnProperty(nt)&&(st!=null||ft!=null))switch(nt){case"type":m=st;break;case"name":f=st;break;case"checked":tt=st;break;case"defaultChecked":ut=st;break;case"value":w=st;break;case"defaultValue":b=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(r(137,s));break;default:st!==ft&&oe(i,s,nt,st,u,ft)}}Hn(i,w,b,z,tt,ut,m,f);return;case"select":st=w=b=nt=null;for(m in o)if(z=o[m],o.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":st=z;default:u.hasOwnProperty(m)||oe(i,s,m,null,u,z)}for(f in u)if(m=u[f],z=o[f],u.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":nt=m;break;case"defaultValue":b=m;break;case"multiple":w=m;default:m!==z&&oe(i,s,f,m,u,z)}s=b,o=w,u=st,nt!=null?dr(i,!!o,nt,!1):!!u!=!!o&&(s!=null?dr(i,!!o,s,!0):dr(i,!!o,o?[]:"",!1));return;case"textarea":st=nt=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:oe(i,s,b,null,u,f)}for(w in u)if(f=u[w],m=o[w],u.hasOwnProperty(w)&&(f!=null||m!=null))switch(w){case"value":nt=f;break;case"defaultValue":st=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&oe(i,s,w,f,u,m)}se(i,nt,st);return;case"option":for(var Mt in o)if(nt=o[Mt],o.hasOwnProperty(Mt)&&nt!=null&&!u.hasOwnProperty(Mt))switch(Mt){case"selected":i.selected=!1;break;default:oe(i,s,Mt,null,u,nt)}for(z in u)if(nt=u[z],st=o[z],u.hasOwnProperty(z)&&nt!==st&&(nt!=null||st!=null))switch(z){case"selected":i.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:oe(i,s,z,nt,u,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in o)nt=o[It],o.hasOwnProperty(It)&&nt!=null&&!u.hasOwnProperty(It)&&oe(i,s,It,null,u,nt);for(tt in u)if(nt=u[tt],st=o[tt],u.hasOwnProperty(tt)&&nt!==st&&(nt!=null||st!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,s));break;default:oe(i,s,tt,nt,u,st)}return;default:if(Tl(s)){for(var le in o)nt=o[le],o.hasOwnProperty(le)&&nt!==void 0&&!u.hasOwnProperty(le)&&qg(i,s,le,void 0,u,nt);for(ut in u)nt=u[ut],st=o[ut],!u.hasOwnProperty(ut)||nt===st||nt===void 0&&st===void 0||qg(i,s,ut,nt,u,st);return}}for(var K in o)nt=o[K],o.hasOwnProperty(K)&&nt!=null&&!u.hasOwnProperty(K)&&oe(i,s,K,null,u,nt);for(ft in u)nt=u[ft],st=o[ft],!u.hasOwnProperty(ft)||nt===st||nt==null&&st==null||oe(i,s,ft,nt,u,st)}var Fg=null,jg=null;function yh(i){return i.nodeType===9?i:i.ownerDocument}function vv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ev(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Gg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $g=null;function TR(){var i=window.event;return i&&i.type==="popstate"?i===$g?!1:($g=i,!0):($g=null,!1)}var Tv=typeof setTimeout=="function"?setTimeout:void 0,wR=typeof clearTimeout=="function"?clearTimeout:void 0,wv=typeof Promise=="function"?Promise:void 0,SR=typeof queueMicrotask=="function"?queueMicrotask:typeof wv<"u"?function(i){return wv.resolve(null).then(i).catch(bR)}:Tv;function bR(i){setTimeout(function(){throw i})}function ds(i){return i==="head"}function Sv(i,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var w=i.ownerDocument;if(o&1&&au(w.documentElement),o&2&&au(w.body),o&4)for(o=w.head,au(o),w=o.firstChild;w;){var b=w.nextSibling,z=w.nodeName;w[hr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=b}}if(f===0){i.removeChild(m),gu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);gu(s)}function Yg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Yg(o),zi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function AR(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[hr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Ai(i.nextSibling),i===null)break}return null}function RR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ai(i.nextSibling),i===null))return null;return i}function Kg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function IR(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ai(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Xg=null;function bv(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function Av(i,s,o){switch(s=yh(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function au(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);zi(i)}var di=new Map,Rv=new Set;function _h(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Mr=$.d;$.d={f:CR,r:xR,D:NR,C:DR,L:MR,m:OR,X:kR,S:VR,M:PR};function CR(){var i=Mr.f(),s=uh();return i||s}function xR(i){var s=ti(i);s!==null&&s.tag===5&&s.type==="form"?$_(s):Mr.r(i)}var No=typeof document>"u"?null:document;function Iv(i,s,o){var u=No;if(u&&typeof s=="string"&&s){var f=ke(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Rv.has(f)||(Rv.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),cn(s,"link",i),Te(s),u.head.appendChild(s)))}}function NR(i){Mr.D(i),Iv("dns-prefetch",i,null)}function DR(i,s){Mr.C(i,s),Iv("preconnect",i,s)}function MR(i,s,o){Mr.L(i,s,o);var u=No;if(u&&i&&s){var f='link[rel="preload"][as="'+ke(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+ke(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+ke(o.imageSizes)+'"]')):f+='[href="'+ke(i)+'"]';var m=f;switch(s){case"style":m=Do(i);break;case"script":m=Mo(i)}di.has(m)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),di.set(m,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(ou(m))||s==="script"&&u.querySelector(lu(m))||(s=u.createElement("link"),cn(s,"link",i),Te(s),u.head.appendChild(s)))}}function OR(i,s){Mr.m(i,s);var o=No;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+ke(u)+'"][href="'+ke(i)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Mo(i)}if(!di.has(m)&&(i=y({rel:"modulepreload",href:i},s),di.set(m,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(lu(m)))return}u=o.createElement("link"),cn(u,"link",i),Te(u),o.head.appendChild(u)}}}function VR(i,s,o){Mr.S(i,s,o);var u=No;if(u&&i){var f=an(u).hoistableStyles,m=Do(i);s=s||"default";var w=f.get(m);if(!w){var b={loading:0,preload:null};if(w=u.querySelector(ou(m)))b.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=di.get(m))&&Qg(i,o);var z=w=u.createElement("link");Te(z),cn(z,"link",i),z._p=new Promise(function(tt,ut){z.onload=tt,z.onerror=ut}),z.addEventListener("load",function(){b.loading|=1}),z.addEventListener("error",function(){b.loading|=2}),b.loading|=4,vh(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:b},f.set(m,w)}}}function kR(i,s){Mr.X(i,s);var o=No;if(o&&i){var u=an(o).hoistableScripts,f=Mo(i),m=u.get(f);m||(m=o.querySelector(lu(f)),m||(i=y({src:i,async:!0},s),(s=di.get(f))&&Zg(i,s),m=o.createElement("script"),Te(m),cn(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function PR(i,s){Mr.M(i,s);var o=No;if(o&&i){var u=an(o).hoistableScripts,f=Mo(i),m=u.get(f);m||(m=o.querySelector(lu(f)),m||(i=y({src:i,async:!0,type:"module"},s),(s=di.get(f))&&Zg(i,s),m=o.createElement("script"),Te(m),cn(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Cv(i,s,o,u){var f=(f=pt.current)?_h(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Do(o.href),o=an(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Do(o.href);var m=an(f).hoistableStyles,w=m.get(i);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,w),(m=f.querySelector(ou(i)))&&!m._p&&(w.instance=m,w.state.loading=5),di.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},di.set(i,o),m||LR(f,i,o,w.state))),s&&u===null)throw Error(r(528,""));return w}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Mo(o),o=an(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Do(i){return'href="'+ke(i)+'"'}function ou(i){return'link[rel="stylesheet"]['+i+"]"}function xv(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function LR(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),cn(s,"link",o),Te(s),i.head.appendChild(s))}function Mo(i){return'[src="'+ke(i)+'"]'}function lu(i){return"script[async]"+i}function Nv(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+ke(o.href)+'"]');if(u)return s.instance=u,Te(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Te(u),cn(u,"style",f),vh(u,o.precedence,i),s.instance=u;case"stylesheet":f=Do(o.href);var m=i.querySelector(ou(f));if(m)return s.state.loading|=4,s.instance=m,Te(m),m;u=xv(o),(f=di.get(f))&&Qg(u,f),m=(i.ownerDocument||i).createElement("link"),Te(m);var w=m;return w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),cn(m,"link",u),s.state.loading|=4,vh(m,o.precedence,i),s.instance=m;case"script":return m=Mo(o.src),(f=i.querySelector(lu(m)))?(s.instance=f,Te(f),f):(u=o,(f=di.get(m))&&(u=y({},o),Zg(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Te(f),cn(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,vh(u,o.precedence,i));return s.instance}function vh(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,w=0;w<u.length;w++){var b=u[w];if(b.dataset.precedence===s)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(i,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Qg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Zg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Eh=null;function Dv(i,s,o){if(Eh===null){var u=new Map,f=Eh=new Map;f.set(o,u)}else f=Eh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var m=o[f];if(!(m[hr]||m[xe]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(s)||"";w=i+w;var b=u.get(w);b?b.push(m):u.set(w,[m])}}return u}function Mv(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function UR(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ov(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var uu=null;function zR(){}function BR(i,s,o){if(uu===null)throw Error(r(475));var u=uu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Do(o.href),m=i.querySelector(ou(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Th.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=m,Te(m);return}m=i.ownerDocument||i,o=xv(o),(f=di.get(f))&&Qg(o,f),m=m.createElement("link"),Te(m);var w=m;w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),cn(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Th.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function HR(){if(uu===null)throw Error(r(475));var i=uu;return i.stylesheets&&i.count===0&&Wg(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&Wg(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Th(){if(this.count--,this.count===0){if(this.stylesheets)Wg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wh=null;function Wg(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wh=new Map,s.forEach(qR,i),wh=null,Th.call(i))}function qR(i,s){if(!(s.state.loading&4)){var o=wh.get(i);if(o)var u=o.get(null);else{o=new Map,wh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var w=f[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}f=s.instance,w=f.getAttribute("data-precedence"),m=o.get(w)||u,m===u&&o.set(null,f),o.set(w,f),this.count++,u=Th.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var cu={$$typeof:F,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function FR(i,s,o,u,f,m,w,b){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Vv(i,s,o,u,f,m,w,b,z,tt,ut,ft){return i=new FR(i,s,o,w,b,z,tt,ft),s=1,m===!0&&(s|=24),m=Fn(3,null,null,s),i.current=m,m.stateNode=i,s=Od(),s.refCount++,i.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Ld(m),i}function kv(i){return i?(i=lo,i):lo}function Pv(i,s,o,u,f,m){f=kv(f),u.context===null?u.context=f:u.pendingContext=f,u=ts(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=es(i,u,s),o!==null&&(Kn(o,i,s),Bl(o,i,s))}function Lv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function Jg(i,s){Lv(i,s),(i=i.alternate)&&Lv(i,s)}function Uv(i){if(i.tag===13){var s=oo(i,67108864);s!==null&&Kn(s,i,67108864),Jg(i,67108864)}}var Sh=!0;function jR(i,s,o,u){var f=D.T;D.T=null;var m=$.p;try{$.p=2,tm(i,s,o,u)}finally{$.p=m,D.T=f}}function GR(i,s,o,u){var f=D.T;D.T=null;var m=$.p;try{$.p=8,tm(i,s,o,u)}finally{$.p=m,D.T=f}}function tm(i,s,o,u){if(Sh){var f=em(u);if(f===null)Hg(i,s,u,bh,o),Bv(i,u);else if(YR(f,i,s,o,u))u.stopPropagation();else if(Bv(i,u),s&4&&-1<$R.indexOf(i)){for(;f!==null;){var m=ti(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Qe(m.pendingLanes);if(w!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var z=1<<31-Ee(w);b.entanglements[1]|=z,w&=~z}tr(m),(ie&6)===0&&(oh=Lt()+500,iu(0))}}break;case 13:b=oo(m,2),b!==null&&Kn(b,m,2),uh(),Jg(m,2)}if(m=em(u),m===null&&Hg(i,s,u,bh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Hg(i,s,u,null,o)}}function em(i){return i=ri(i),nm(i)}var bh=null;function nm(i){if(bh=null,i=Jn(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return bh=i,null}function zv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tt()){case Ce:return 2;case mn:return 8;case Pn:case Vi:return 32;case Ln:return 268435456;default:return 32}default:return 32}}var im=!1,gs=null,ms=null,ps=null,hu=new Map,fu=new Map,ys=[],$R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(i,s){switch(i){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":hu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(s.pointerId)}}function du(i,s,o,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=ti(s),s!==null&&Uv(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function YR(i,s,o,u,f){switch(s){case"focusin":return gs=du(gs,i,s,o,u,f),!0;case"dragenter":return ms=du(ms,i,s,o,u,f),!0;case"mouseover":return ps=du(ps,i,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return hu.set(m,du(hu.get(m)||null,i,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,fu.set(m,du(fu.get(m)||null,i,s,o,u,f)),!0}return!1}function Hv(i){var s=Jn(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,qa(i.priority,function(){if(o.tag===13){var u=Yn();u=Pi(u);var f=oo(o,u);f!==null&&Kn(f,o,u),Jg(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ah(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=em(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);gr=u,o.target.dispatchEvent(u),gr=null}else return s=ti(o),s!==null&&Uv(s),i.blockedOn=o,!1;s.shift()}return!0}function qv(i,s,o){Ah(i)&&o.delete(s)}function KR(){im=!1,gs!==null&&Ah(gs)&&(gs=null),ms!==null&&Ah(ms)&&(ms=null),ps!==null&&Ah(ps)&&(ps=null),hu.forEach(qv),fu.forEach(qv)}function Rh(i,s){i.blockedOn===s&&(i.blockedOn=null,im||(im=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KR)))}var Ih=null;function Fv(i){Ih!==i&&(Ih=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ih===i&&(Ih=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(nm(u||o)===null)continue;break}var m=ti(o);m!==null&&(i.splice(s,3),s-=3,ng(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function gu(i){function s(z){return Rh(z,i)}gs!==null&&Rh(gs,i),ms!==null&&Rh(ms,i),ps!==null&&Rh(ps,i),hu.forEach(s),fu.forEach(s);for(var o=0;o<ys.length;o++){var u=ys[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<ys.length&&(o=ys[0],o.blockedOn===null);)Hv(o),o.blockedOn===null&&ys.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],w=f[be]||null;if(typeof m=="function")w||Fv(o);else if(w){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,w=m[be]||null)b=w.formAction;else if(nm(f)!==null)continue}else b=w.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),Fv(o)}}}function rm(i){this._internalRoot=i}Ch.prototype.render=rm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Yn();Pv(o,u,i,s,null,null)},Ch.prototype.unmount=rm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Pv(i.current,2,null,i,null,null),uh(),s[Nn]=null}};function Ch(i){this._internalRoot=i}Ch.prototype.unstable_scheduleHydration=function(i){if(i){var s=Li();i={blockedOn:null,target:i,priority:s};for(var o=0;o<ys.length&&s!==0&&s<ys[o].priority;o++);ys.splice(o,0,i),o===0&&Hv(i)}};var jv=t.version;if(jv!=="19.1.0")throw Error(r(527,jv,"19.1.0"));$.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var XR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{te=xh.inject(XR),Ft=xh}catch{}}return pu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=a0,m=o0,w=l0,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Vv(i,1,!1,null,null,o,u,f,m,w,b,null),i[Nn]=s.current,Bg(i),new rm(s)},pu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",m=a0,w=o0,b=l0,z=null,tt=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(tt=o.formState)),s=Vv(i,1,!0,s,o??null,u,f,m,w,b,z,tt),s.context=kv(null),o=s.current,u=Yn(),u=Pi(u),f=ts(u),f.callback=null,es(o,f,u),o=u,s.current.lanes=o,Zn(s,o),tr(s),i[Nn]=s.current,Bg(i),new Ch(s)},pu.version="19.1.0",pu}var tE;function rI(){if(tE)return om.exports;tE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),om.exports=iI(),om.exports}var sI=rI();function gn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=gn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var hm={exports:{}},fm={},dm={exports:{}},gm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function aI(){if(eE)return gm;eE=1;var e=tc();function t(v,T){return v===T&&(v!==0||1/v===1/T)||v!==v&&T!==T}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,T){var S=T(),O=r({inst:{value:S,getSnapshot:T}}),k=O[0].inst,L=O[1];return l(function(){k.value=S,k.getSnapshot=T,g(k)&&L({inst:k})},[v,S,T]),a(function(){return g(k)&&L({inst:k}),v(function(){g(k)&&L({inst:k})})},[v]),c(S),S}function g(v){var T=v.getSnapshot;v=v.value;try{var S=T();return!n(v,S)}catch{return!0}}function p(v,T){return T()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return gm.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,gm}var nE;function oI(){return nE||(nE=1,dm.exports=aI()),dm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function lI(){if(iE)return fm;iE=1;var e=tc(),t=oI();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return fm.useSyncExternalStoreWithSelector=function(p,y,v,T,S){var O=l(null);if(O.current===null){var k={hasValue:!1,value:null};O.current=k}else k=O.current;O=d(function(){function H(X){if(!q){if(q=!0,F=X,X=T(X),S!==void 0&&k.hasValue){var N=k.value;if(S(N,X))return B=N}return B=X}if(N=B,r(F,X))return N;var A=T(X);return S!==void 0&&S(N,A)?(F=X,N):(F=X,B=A)}var q=!1,F,B,Q=v===void 0?null:v;return[function(){return H(y())},Q===null?void 0:function(){return H(Q())}]},[y,v,T,S]);var L=a(p,O[0],O[1]);return c(function(){k.hasValue=!0,k.value=L},[L]),g(L),L},fm}var rE;function uI(){return rE||(rE=1,hm.exports=lI()),hm.exports}var cI=uI();const hI=Aw(cI),fI={},sE=e=>{let t;const n=new Set,r=(y,v)=>{const T=typeof y=="function"?y(t):y;if(!Object.is(T,t)){const S=t;t=v??(typeof T!="object"||T===null)?T:Object.assign({},t,T),n.forEach(O=>O(t,S))}},a=()=>t,g={setState:r,getState:a,getInitialState:()=>p,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(fI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(r,a,g);return g},dI=e=>e?sE(e):sE,{useDebugValue:gI}=lt,{useSyncExternalStoreWithSelector:mI}=hI,pI=e=>e;function Iw(e,t=pI,n){const r=mI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return gI(r),r}const aE=(e,t)=>{const n=dI(e),r=(a,l=t)=>Iw(n,a,l);return Object.assign(r,n),r},yI=(e,t)=>e?aE(e,t):aE;function rn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var _I={value:()=>{}};function Uf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Kh(n)}function Kh(e){this._=e}function vI(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Kh.prototype=Uf.prototype={constructor:Kh,on:function(e,t){var n=this._,r=vI(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=EI(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=oE(n[a],e.name,t);else if(t==null)for(a in n)n[a]=oE(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kh(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function EI(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function oE(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=_I,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Bm="http://www.w3.org/1999/xhtml";const lE={svg:"http://www.w3.org/2000/svg",xhtml:Bm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),lE.hasOwnProperty(t)?{space:lE[t],local:e}:e}function TI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Bm&&t.documentElement.namespaceURI===Bm?t.createElement(e):t.createElementNS(n,e)}}function wI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Cw(e){var t=zf(e);return(t.local?wI:TI)(t)}function SI(){}function Cp(e){return e==null?SI:function(){return this.querySelector(e)}}function bI(e){typeof e!="function"&&(e=Cp(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),g,p,y=0;y<c;++y)(g=l[y])&&(p=e.call(g,g.__data__,y,l))&&("__data__"in g&&(p.__data__=g.__data__),d[y]=p);return new Qn(r,this._parents)}function AI(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function RI(){return[]}function xw(e){return e==null?RI:function(){return this.querySelectorAll(e)}}function II(e){return function(){return AI(e.apply(this,arguments))}}function CI(e){typeof e=="function"?e=II(e):e=xw(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,g,p=0;p<d;++p)(g=c[p])&&(r.push(e.call(g,g.__data__,p,c)),a.push(g));return new Qn(r,a)}function Nw(e){return function(){return this.matches(e)}}function Dw(e){return function(t){return t.matches(e)}}var xI=Array.prototype.find;function NI(e){return function(){return xI.call(this.children,e)}}function DI(){return this.firstElementChild}function MI(e){return this.select(e==null?DI:NI(typeof e=="function"?e:Dw(e)))}var OI=Array.prototype.filter;function VI(){return Array.from(this.children)}function kI(e){return function(){return OI.call(this.children,e)}}function PI(e){return this.selectAll(e==null?VI:kI(typeof e=="function"?e:Dw(e)))}function LI(e){typeof e!="function"&&(e=Nw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,p=0;p<c;++p)(g=l[p])&&e.call(g,g.__data__,p,l)&&d.push(g);return new Qn(r,this._parents)}function Mw(e){return new Array(e.length)}function UI(){return new Qn(this._enter||this._groups.map(Mw),this._parents)}function uf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}uf.prototype={constructor:uf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function zI(e){return function(){return e}}function BI(e,t,n,r,a,l){for(var c=0,d,g=t.length,p=l.length;c<p;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new uf(e,l[c]);for(;c<g;++c)(d=t[c])&&(a[c]=d)}function HI(e,t,n,r,a,l,c){var d,g,p=new Map,y=t.length,v=l.length,T=new Array(y),S;for(d=0;d<y;++d)(g=t[d])&&(T[d]=S=c.call(g,g.__data__,d,t)+"",p.has(S)?a[d]=g:p.set(S,g));for(d=0;d<v;++d)S=c.call(e,l[d],d,l)+"",(g=p.get(S))?(r[d]=g,g.__data__=l[d],p.delete(S)):n[d]=new uf(e,l[d]);for(d=0;d<y;++d)(g=t[d])&&p.get(T[d])===g&&(a[d]=g)}function qI(e){return e.__data__}function FI(e,t){if(!arguments.length)return Array.from(this,qI);var n=t?HI:BI,r=this._parents,a=this._groups;typeof e!="function"&&(e=zI(e));for(var l=a.length,c=new Array(l),d=new Array(l),g=new Array(l),p=0;p<l;++p){var y=r[p],v=a[p],T=v.length,S=jI(e.call(y,y&&y.__data__,p,r)),O=S.length,k=d[p]=new Array(O),L=c[p]=new Array(O),H=g[p]=new Array(T);n(y,v,k,L,H,S,t);for(var q=0,F=0,B,Q;q<O;++q)if(B=k[q]){for(q>=F&&(F=q+1);!(Q=L[F])&&++F<O;);B._next=Q||null}}return c=new Qn(c,r),c._enter=d,c._exit=g,c}function jI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function GI(){return new Qn(this._exit||this._groups.map(Mw),this._parents)}function $I(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function YI(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),g=0;g<c;++g)for(var p=n[g],y=r[g],v=p.length,T=d[g]=new Array(v),S,O=0;O<v;++O)(S=p[O]||y[O])&&(T[O]=S);for(;g<a;++g)d[g]=n[g];return new Qn(d,this._parents)}function KI(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function XI(e){e||(e=QI);function t(v,T){return v&&T?e(v.__data__,T.__data__):!v-!T}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,g=a[l]=new Array(d),p,y=0;y<d;++y)(p=c[y])&&(g[y]=p);g.sort(t)}return new Qn(a,this._parents).order()}function QI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ZI(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function WI(){return Array.from(this)}function JI(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function tC(){let e=0;for(const t of this)++e;return e}function eC(){return!this.node()}function nC(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function iC(e){return function(){this.removeAttribute(e)}}function rC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sC(e,t){return function(){this.setAttribute(e,t)}}function aC(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lC(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function uC(e,t){var n=zf(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rC:iC:typeof t=="function"?n.local?lC:oC:n.local?aC:sC)(n,t))}function Ow(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cC(e){return function(){this.style.removeProperty(e)}}function hC(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fC(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dC(e,t,n){return arguments.length>1?this.each((t==null?cC:typeof t=="function"?fC:hC)(e,t,n??"")):Zo(this.node(),e)}function Zo(e,t){return e.style.getPropertyValue(t)||Ow(e).getComputedStyle(e,null).getPropertyValue(t)}function gC(e){return function(){delete this[e]}}function mC(e,t){return function(){this[e]=t}}function pC(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yC(e,t){return arguments.length>1?this.each((t==null?gC:typeof t=="function"?pC:mC)(e,t)):this.node()[e]}function Vw(e){return e.trim().split(/^|\s+/)}function xp(e){return e.classList||new kw(e)}function kw(e){this._node=e,this._names=Vw(e.getAttribute("class")||"")}kw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Pw(e,t){for(var n=xp(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Lw(e,t){for(var n=xp(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function _C(e){return function(){Pw(this,e)}}function vC(e){return function(){Lw(this,e)}}function EC(e,t){return function(){(t.apply(this,arguments)?Pw:Lw)(this,e)}}function TC(e,t){var n=Vw(e+"");if(arguments.length<2){for(var r=xp(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?EC:t?_C:vC)(n,t))}function wC(){this.textContent=""}function SC(e){return function(){this.textContent=e}}function bC(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function AC(e){return arguments.length?this.each(e==null?wC:(typeof e=="function"?bC:SC)(e)):this.node().textContent}function RC(){this.innerHTML=""}function IC(e){return function(){this.innerHTML=e}}function CC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xC(e){return arguments.length?this.each(e==null?RC:(typeof e=="function"?CC:IC)(e)):this.node().innerHTML}function NC(){this.nextSibling&&this.parentNode.appendChild(this)}function DC(){return this.each(NC)}function MC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function OC(){return this.each(MC)}function VC(e){var t=typeof e=="function"?e:Cw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kC(){return null}function PC(e,t){var n=typeof e=="function"?e:Cw(e),r=t==null?kC:typeof t=="function"?t:Cp(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function LC(){var e=this.parentNode;e&&e.removeChild(this)}function UC(){return this.each(LC)}function zC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function HC(e){return this.select(e?BC:zC)}function qC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function FC(e){return function(t){e.call(this,t,this.__data__)}}function jC(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function GC(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function $C(e,t,n){return function(){var r=this.__on,a,l=FC(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function YC(e,t,n){var r=jC(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,p=d.length,y;g<p;++g)for(a=0,y=d[g];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?$C:GC,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function Uw(e,t,n){var r=Ow(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function KC(e,t){return function(){return Uw(this,e,t)}}function XC(e,t){return function(){return Uw(this,e,t.apply(this,arguments))}}function QC(e,t){return this.each((typeof t=="function"?XC:KC)(e,t))}function*ZC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var zw=[null];function Qn(e,t){this._groups=e,this._parents=t}function ec(){return new Qn([[document.documentElement]],zw)}function WC(){return this}Qn.prototype=ec.prototype={constructor:Qn,select:bI,selectAll:CI,selectChild:MI,selectChildren:PI,filter:LI,data:FI,enter:UI,exit:GI,join:$I,merge:YI,selection:WC,order:KI,sort:XI,call:ZI,nodes:WI,node:JI,size:tC,empty:eC,each:nC,attr:uC,style:dC,property:yC,classed:TC,text:AC,html:xC,raise:DC,lower:OC,append:VC,insert:PC,remove:UC,clone:HC,datum:qC,on:YC,dispatch:QC,[Symbol.iterator]:ZC};function gi(e){return typeof e=="string"?new Qn([[document.querySelector(e)]],[document.documentElement]):new Qn([[e]],zw)}function JC(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ri(e,t){if(e=JC(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const t2={passive:!1},Pu={capture:!0,passive:!1};function mm(e){e.stopImmediatePropagation()}function jo(e){e.preventDefault(),e.stopImmediatePropagation()}function Bw(e){var t=e.document.documentElement,n=gi(e).on("dragstart.drag",jo,Pu);"onselectstart"in t?n.on("selectstart.drag",jo,Pu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hw(e,t){var n=e.document.documentElement,r=gi(e).on("dragstart.drag",null);t&&(r.on("click.drag",jo,Pu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Nh=e=>()=>e;function Hm(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:l,x:c,y:d,dx:g,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Hm.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function e2(e){return!e.ctrlKey&&!e.button}function n2(){return this.parentNode}function i2(e,t){return t??{x:e.x,y:e.y}}function r2(){return navigator.maxTouchPoints||"ontouchstart"in this}function s2(){var e=e2,t=n2,n=i2,r=r2,a={},l=Uf("start","drag","end"),c=0,d,g,p,y,v=0;function T(B){B.on("mousedown.drag",S).filter(r).on("touchstart.drag",L).on("touchmove.drag",H,t2).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(B,Q){if(!(y||!e.call(this,B,Q))){var X=F(this,t.call(this,B,Q),B,Q,"mouse");X&&(gi(B.view).on("mousemove.drag",O,Pu).on("mouseup.drag",k,Pu),Bw(B.view),mm(B),p=!1,d=B.clientX,g=B.clientY,X("start",B))}}function O(B){if(jo(B),!p){var Q=B.clientX-d,X=B.clientY-g;p=Q*Q+X*X>v}a.mouse("drag",B)}function k(B){gi(B.view).on("mousemove.drag mouseup.drag",null),Hw(B.view,p),jo(B),a.mouse("end",B)}function L(B,Q){if(e.call(this,B,Q)){var X=B.changedTouches,N=t.call(this,B,Q),A=X.length,R,M;for(R=0;R<A;++R)(M=F(this,N,B,Q,X[R].identifier,X[R]))&&(mm(B),M("start",B,X[R]))}}function H(B){var Q=B.changedTouches,X=Q.length,N,A;for(N=0;N<X;++N)(A=a[Q[N].identifier])&&(jo(B),A("drag",B,Q[N]))}function q(B){var Q=B.changedTouches,X=Q.length,N,A;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),N=0;N<X;++N)(A=a[Q[N].identifier])&&(mm(B),A("end",B,Q[N]))}function F(B,Q,X,N,A,R){var M=l.copy(),V=Ri(R||X,Q),U,C,P;if((P=n.call(B,new Hm("beforestart",{sourceEvent:X,target:T,identifier:A,active:c,x:V[0],y:V[1],dx:0,dy:0,dispatch:M}),N))!=null)return U=P.x-V[0]||0,C=P.y-V[1]||0,function it(D,$,at){var Y=V,x;switch(D){case"start":a[A]=it,x=c++;break;case"end":delete a[A],--c;case"drag":V=Ri(at||$,Q),x=c;break}M.call(D,B,new Hm(D,{sourceEvent:$,subject:P,target:T,identifier:A,active:x,x:V[0]+U,y:V[1]+C,dx:V[0]-Y[0],dy:V[1]-Y[1],dispatch:M}),N)}}return T.filter=function(B){return arguments.length?(e=typeof B=="function"?B:Nh(!!B),T):e},T.container=function(B){return arguments.length?(t=typeof B=="function"?B:Nh(B),T):t},T.subject=function(B){return arguments.length?(n=typeof B=="function"?B:Nh(B),T):n},T.touchable=function(B){return arguments.length?(r=typeof B=="function"?B:Nh(!!B),T):r},T.on=function(){var B=l.on.apply(l,arguments);return B===l?T:B},T.clickDistance=function(B){return arguments.length?(v=(B=+B)*B,T):Math.sqrt(v)},T}function Np(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qw(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nc(){}var Lu=.7,cf=1/Lu,Go="\\s*([+-]?\\d+)\\s*",Uu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a2=/^#([0-9a-f]{3,8})$/,o2=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),l2=new RegExp(`^rgb\\(${nr},${nr},${nr}\\)$`),u2=new RegExp(`^rgba\\(${Go},${Go},${Go},${Uu}\\)$`),c2=new RegExp(`^rgba\\(${nr},${nr},${nr},${Uu}\\)$`),h2=new RegExp(`^hsl\\(${Uu},${nr},${nr}\\)$`),f2=new RegExp(`^hsla\\(${Uu},${nr},${nr},${Uu}\\)$`),uE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Np(nc,zu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cE,formatHex:cE,formatHex8:d2,formatHsl:g2,formatRgb:hE,toString:hE});function cE(){return this.rgb().formatHex()}function d2(){return this.rgb().formatHex8()}function g2(){return Fw(this).formatHsl()}function hE(){return this.rgb().formatRgb()}function zu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=a2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fE(t):n===3?new kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=o2.exec(e))?new kn(t[1],t[2],t[3],1):(t=l2.exec(e))?new kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=u2.exec(e))?Dh(t[1],t[2],t[3],t[4]):(t=c2.exec(e))?Dh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=h2.exec(e))?mE(t[1],t[2]/100,t[3]/100,1):(t=f2.exec(e))?mE(t[1],t[2]/100,t[3]/100,t[4]):uE.hasOwnProperty(e)?fE(uE[e]):e==="transparent"?new kn(NaN,NaN,NaN,0):null}function fE(e){return new kn(e>>16&255,e>>8&255,e&255,1)}function Dh(e,t,n,r){return r<=0&&(e=t=n=NaN),new kn(e,t,n,r)}function m2(e){return e instanceof nc||(e=zu(e)),e?(e=e.rgb(),new kn(e.r,e.g,e.b,e.opacity)):new kn}function qm(e,t,n,r){return arguments.length===1?m2(e):new kn(e,t,n,r??1)}function kn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Np(kn,qm,qw(nc,{brighter(e){return e=e==null?cf:Math.pow(cf,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lu:Math.pow(Lu,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kn(Ia(this.r),Ia(this.g),Ia(this.b),hf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dE,formatHex:dE,formatHex8:p2,formatRgb:gE,toString:gE}));function dE(){return`#${ba(this.r)}${ba(this.g)}${ba(this.b)}`}function p2(){return`#${ba(this.r)}${ba(this.g)}${ba(this.b)}${ba((isNaN(this.opacity)?1:this.opacity)*255)}`}function gE(){const e=hf(this.opacity);return`${e===1?"rgb(":"rgba("}${Ia(this.r)}, ${Ia(this.g)}, ${Ia(this.b)}${e===1?")":`, ${e})`}`}function hf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ia(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ba(e){return e=Ia(e),(e<16?"0":"")+e.toString(16)}function mE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ii(e,t,n,r)}function Fw(e){if(e instanceof Ii)return new Ii(e.h,e.s,e.l,e.opacity);if(e instanceof nc||(e=zu(e)),!e)return new Ii;if(e instanceof Ii)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,g=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=g<.5?l+a:2-l-a,c*=60):d=g>0&&g<1?0:c,new Ii(c,d,g,e.opacity)}function y2(e,t,n,r){return arguments.length===1?Fw(e):new Ii(e,t,n,r??1)}function Ii(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Np(Ii,y2,qw(nc,{brighter(e){return e=e==null?cf:Math.pow(cf,e),new Ii(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lu:Math.pow(Lu,e),new Ii(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new kn(pm(e>=240?e-240:e+120,a,r),pm(e,a,r),pm(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Ii(pE(this.h),Mh(this.s),Mh(this.l),hf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hf(this.opacity);return`${e===1?"hsl(":"hsla("}${pE(this.h)}, ${Mh(this.s)*100}%, ${Mh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pE(e){return e=(e||0)%360,e<0?e+360:e}function Mh(e){return Math.max(0,Math.min(1,e||0))}function pm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jw=e=>()=>e;function _2(e,t){return function(n){return e+n*t}}function v2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function E2(e){return(e=+e)==1?Gw:function(t,n){return n-t?v2(t,n,e):jw(isNaN(t)?n:t)}}function Gw(e,t){var n=t-e;return n?_2(e,n):jw(isNaN(e)?t:e)}const yE=function e(t){var n=E2(t);function r(a,l){var c=n((a=qm(a)).r,(l=qm(l)).r),d=n(a.g,l.g),g=n(a.b,l.b),p=Gw(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=g(y),a.opacity=p(y),a+""}}return r.gamma=e,r}(1);function ws(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Fm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ym=new RegExp(Fm.source,"g");function T2(e){return function(){return e}}function w2(e){return function(t){return e(t)+""}}function S2(e,t){var n=Fm.lastIndex=ym.lastIndex=0,r,a,l,c=-1,d=[],g=[];for(e=e+"",t=t+"";(r=Fm.exec(e))&&(a=ym.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,g.push({i:c,x:ws(r,a)})),n=ym.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?g[0]?w2(g[0].x):T2(t):(t=g.length,function(p){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(p);return d.join("")})}var _E=180/Math.PI,jm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $w(e,t,n,r,a,l){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*r)&&(n-=e*g,r-=t*g),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,g/=d),e*r<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*_E,skewX:Math.atan(g)*_E,scaleX:c,scaleY:d}}var Oh;function b2(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?jm:$w(t.a,t.b,t.c,t.d,t.e,t.f)}function A2(e){return e==null||(Oh||(Oh=document.createElementNS("http://www.w3.org/2000/svg","g")),Oh.setAttribute("transform",e),!(e=Oh.transform.baseVal.consolidate()))?jm:(e=e.matrix,$w(e.a,e.b,e.c,e.d,e.e,e.f))}function Yw(e,t,n,r){function a(p){return p.length?p.pop()+" ":""}function l(p,y,v,T,S,O){if(p!==v||y!==T){var k=S.push("translate(",null,t,null,n);O.push({i:k-4,x:ws(p,v)},{i:k-2,x:ws(y,T)})}else(v||T)&&S.push("translate("+v+t+T+n)}function c(p,y,v,T){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),T.push({i:v.push(a(v)+"rotate(",null,r)-2,x:ws(p,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(p,y,v,T){p!==y?T.push({i:v.push(a(v)+"skewX(",null,r)-2,x:ws(p,y)}):y&&v.push(a(v)+"skewX("+y+r)}function g(p,y,v,T,S,O){if(p!==v||y!==T){var k=S.push(a(S)+"scale(",null,",",null,")");O.push({i:k-4,x:ws(p,v)},{i:k-2,x:ws(y,T)})}else(v!==1||T!==1)&&S.push(a(S)+"scale("+v+","+T+")")}return function(p,y){var v=[],T=[];return p=e(p),y=e(y),l(p.translateX,p.translateY,y.translateX,y.translateY,v,T),c(p.rotate,y.rotate,v,T),d(p.skewX,y.skewX,v,T),g(p.scaleX,p.scaleY,y.scaleX,y.scaleY,v,T),p=y=null,function(S){for(var O=-1,k=T.length,L;++O<k;)v[(L=T[O]).i]=L.x(S);return v.join("")}}}var R2=Yw(b2,"px, ","px)","deg)"),I2=Yw(A2,", ",")",")"),C2=1e-12;function vE(e){return((e=Math.exp(e))+1/e)/2}function x2(e){return((e=Math.exp(e))-1/e)/2}function N2(e){return((e=Math.exp(2*e))-1)/(e+1)}const D2=function e(t,n,r){function a(l,c){var d=l[0],g=l[1],p=l[2],y=c[0],v=c[1],T=c[2],S=y-d,O=v-g,k=S*S+O*O,L,H;if(k<C2)H=Math.log(T/p)/t,L=function(N){return[d+N*S,g+N*O,p*Math.exp(t*N*H)]};else{var q=Math.sqrt(k),F=(T*T-p*p+r*k)/(2*p*n*q),B=(T*T-p*p-r*k)/(2*T*n*q),Q=Math.log(Math.sqrt(F*F+1)-F),X=Math.log(Math.sqrt(B*B+1)-B);H=(X-Q)/t,L=function(N){var A=N*H,R=vE(Q),M=p/(n*q)*(R*N2(t*A+Q)-x2(Q));return[d+M*S,g+M*O,p*R/vE(t*A+Q)]}}return L.duration=H*1e3*t/Math.SQRT2,L}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,g=d*d;return e(c,d,g)},a}(Math.SQRT2,2,4);var Wo=0,wu=0,yu=0,Kw=1e3,ff,Su,df=0,xa=0,Bf=0,Bu=typeof performance=="object"&&performance.now?performance:Date,Xw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Dp(){return xa||(Xw(M2),xa=Bu.now()+Bf)}function M2(){xa=0}function gf(){this._call=this._time=this._next=null}gf.prototype=Qw.prototype={constructor:gf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Dp():+n)+(t==null?0:+t),!this._next&&Su!==this&&(Su?Su._next=this:ff=this,Su=this),this._call=e,this._time=n,Gm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gm())}};function Qw(e,t,n){var r=new gf;return r.restart(e,t,n),r}function O2(){Dp(),++Wo;for(var e=ff,t;e;)(t=xa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wo}function EE(){xa=(df=Bu.now())+Bf,Wo=wu=0;try{O2()}finally{Wo=0,k2(),xa=0}}function V2(){var e=Bu.now(),t=e-df;t>Kw&&(Bf-=t,df=e)}function k2(){for(var e,t=ff,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ff=n);Su=e,Gm(r)}function Gm(e){if(!Wo){wu&&(wu=clearTimeout(wu));var t=e-xa;t>24?(e<1/0&&(wu=setTimeout(EE,e-Bu.now()-Bf)),yu&&(yu=clearInterval(yu))):(yu||(df=Bu.now(),yu=setInterval(V2,Kw)),Wo=1,Xw(EE))}}function TE(e,t,n){var r=new gf;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var P2=Uf("start","end","cancel","interrupt"),L2=[],Zw=0,wE=1,$m=2,Xh=3,SE=4,Ym=5,Qh=6;function Hf(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;U2(e,n,{name:t,index:r,group:a,on:P2,tween:L2,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Zw})}function Mp(e,t){var n=Oi(e,t);if(n.state>Zw)throw new Error("too late; already scheduled");return n}function lr(e,t){var n=Oi(e,t);if(n.state>Xh)throw new Error("too late; already running");return n}function Oi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function U2(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=Qw(l,0,n.time);function l(p){n.state=wE,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var y,v,T,S;if(n.state!==wE)return g();for(y in r)if(S=r[y],S.name===n.name){if(S.state===Xh)return TE(c);S.state===SE?(S.state=Qh,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete r[y]):+y<t&&(S.state=Qh,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete r[y])}if(TE(function(){n.state===Xh&&(n.state=SE,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=$m,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$m){for(n.state=Xh,a=new Array(T=n.tween.length),y=0,v=-1;y<T;++y)(S=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=S);a.length=v+1}}function d(p){for(var y=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(g),n.state=Ym,1),v=-1,T=a.length;++v<T;)a[v].call(e,y);n.state===Ym&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=Qh,n.timer.stop(),delete r[t];for(var p in r)return;delete e.__transition}}function Zh(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>$m&&r.state<Ym,r.state=Qh,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function z2(e){return this.each(function(){Zh(this,e)})}function B2(e,t){var n,r;return function(){var a=lr(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function H2(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=lr(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},g=0,p=a.length;g<p;++g)if(a[g].name===t){a[g]=d;break}g===p&&a.push(d)}l.tween=a}}function q2(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Oi(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?B2:H2)(n,e,t))}function Op(e,t,n){var r=e._id;return e.each(function(){var a=lr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Oi(a,r).value[t]}}function Ww(e,t){var n;return(typeof t=="number"?ws:t instanceof zu?yE:(n=zu(t))?(t=n,yE):S2)(e,t)}function F2(e){return function(){this.removeAttribute(e)}}function j2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function G2(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function $2(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function Y2(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function K2(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function X2(e,t){var n=zf(e),r=n==="transform"?I2:Ww;return this.attrTween(e,typeof t=="function"?(n.local?K2:Y2)(n,r,Op(this,"attr."+e,t)):t==null?(n.local?j2:F2)(n):(n.local?$2:G2)(n,r,t))}function Q2(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Z2(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function W2(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&Z2(e,l)),n}return a._value=t,a}function J2(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&Q2(e,l)),n}return a._value=t,a}function tx(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=zf(e);return this.tween(n,(r.local?W2:J2)(r,t))}function ex(e,t){return function(){Mp(this,e).delay=+t.apply(this,arguments)}}function nx(e,t){return t=+t,function(){Mp(this,e).delay=t}}function ix(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ex:nx)(t,e)):Oi(this.node(),t).delay}function rx(e,t){return function(){lr(this,e).duration=+t.apply(this,arguments)}}function sx(e,t){return t=+t,function(){lr(this,e).duration=t}}function ax(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rx:sx)(t,e)):Oi(this.node(),t).duration}function ox(e,t){if(typeof t!="function")throw new Error;return function(){lr(this,e).ease=t}}function lx(e){var t=this._id;return arguments.length?this.each(ox(t,e)):Oi(this.node(),t).ease}function ux(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;lr(this,e).ease=n}}function cx(e){if(typeof e!="function")throw new Error;return this.each(ux(this._id,e))}function hx(e){typeof e!="function"&&(e=Nw(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,p=0;p<c;++p)(g=l[p])&&e.call(g,g.__data__,p,l)&&d.push(g);return new Br(r,this._parents,this._name,this._id)}function fx(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var g=t[d],p=n[d],y=g.length,v=c[d]=new Array(y),T,S=0;S<y;++S)(T=g[S]||p[S])&&(v[S]=T);for(;d<r;++d)c[d]=t[d];return new Br(c,this._parents,this._name,this._id)}function dx(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function gx(e,t,n){var r,a,l=dx(t)?Mp:lr;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function mx(e,t){var n=this._id;return arguments.length<2?Oi(this.node(),n).on.on(e):this.each(gx(n,e,t))}function px(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yx(){return this.on("end.remove",px(this._id))}function _x(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cp(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],g=d.length,p=l[c]=new Array(g),y,v,T=0;T<g;++T)(y=d[T])&&(v=e.call(y,y.__data__,T,d))&&("__data__"in y&&(v.__data__=y.__data__),p[T]=v,Hf(p[T],t,n,T,p,Oi(y,n)));return new Br(l,this._parents,t,n)}function vx(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xw(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var g=r[d],p=g.length,y,v=0;v<p;++v)if(y=g[v]){for(var T=e.call(y,y.__data__,v,g),S,O=Oi(y,n),k=0,L=T.length;k<L;++k)(S=T[k])&&Hf(S,t,n,k,T,O);l.push(T),c.push(y)}return new Br(l,c,t,n)}var Ex=ec.prototype.constructor;function Tx(){return new Ex(this._groups,this._parents)}function wx(e,t){var n,r,a;return function(){var l=Zo(this,e),c=(this.style.removeProperty(e),Zo(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function Jw(e){return function(){this.style.removeProperty(e)}}function Sx(e,t,n){var r,a=n+"",l;return function(){var c=Zo(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function bx(e,t,n){var r,a,l;return function(){var c=Zo(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),Zo(this,e))),c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d))}}function Ax(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var g=lr(this,e),p=g.on,y=g.value[l]==null?d||(d=Jw(t)):void 0;(p!==n||a!==y)&&(r=(n=p).copy()).on(c,a=y),g.on=r}}function Rx(e,t,n){var r=(e+="")=="transform"?R2:Ww;return t==null?this.styleTween(e,wx(e,r)).on("end.style."+e,Jw(e)):typeof t=="function"?this.styleTween(e,bx(e,r,Op(this,"style."+e,t))).each(Ax(this._id,e)):this.styleTween(e,Sx(e,r,t),n).on("end.style."+e,null)}function Ix(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Cx(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&Ix(e,c,n)),r}return l._value=t,l}function xx(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Cx(e,t,n??""))}function Nx(e){return function(){this.textContent=e}}function Dx(e){return function(){var t=e(this);this.textContent=t??""}}function Mx(e){return this.tween("text",typeof e=="function"?Dx(Op(this,"text",e)):Nx(e==null?"":e+""))}function Ox(e){return function(t){this.textContent=e.call(this,t)}}function Vx(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Ox(a)),t}return r._value=e,r}function kx(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vx(e))}function Px(){for(var e=this._name,t=this._id,n=tS(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,p=0;p<d;++p)if(g=c[p]){var y=Oi(g,t);Hf(g,e,n,p,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Br(r,this._parents,e,n)}function Lx(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},g={value:function(){--a===0&&l()}};n.each(function(){var p=lr(this,r),y=p.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),p.on=t}),a===0&&l()})}var Ux=0;function Br(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tS(){return++Ux}var Or=ec.prototype;Br.prototype={constructor:Br,select:_x,selectAll:vx,selectChild:Or.selectChild,selectChildren:Or.selectChildren,filter:hx,merge:fx,selection:Tx,transition:Px,call:Or.call,nodes:Or.nodes,node:Or.node,size:Or.size,empty:Or.empty,each:Or.each,on:mx,attr:X2,attrTween:tx,style:Rx,styleTween:xx,text:Mx,textTween:kx,remove:yx,tween:q2,delay:ix,duration:ax,ease:lx,easeVarying:cx,end:Lx,[Symbol.iterator]:Or[Symbol.iterator]};function zx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Bx={time:null,delay:0,duration:250,ease:zx};function Hx(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function qx(e){var t,n;e instanceof Br?(t=e._id,e=e._name):(t=tS(),(n=Bx).time=Dp(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,p=0;p<d;++p)(g=c[p])&&Hf(g,e,t,p,c,n||Hx(g,t));return new Br(r,this._parents,e,t)}ec.prototype.interrupt=z2;ec.prototype.transition=qx;const Vh=e=>()=>e;function Fx(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Vr(e,t,n){this.k=e,this.x=t,this.y=n}Vr.prototype={constructor:Vr,scale:function(e){return e===1?this:new Vr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Vr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lr=new Vr(1,0,0);Vr.prototype;function _m(e){e.stopImmediatePropagation()}function _u(e){e.preventDefault(),e.stopImmediatePropagation()}function jx(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Gx(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function bE(){return this.__zoom||Lr}function $x(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Yx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kx(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function eS(){var e=jx,t=Gx,n=Kx,r=$x,a=Yx,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=D2,p=Uf("start","zoom","end"),y,v,T,S=500,O=150,k=0,L=10;function H(P){P.property("__zoom",bE).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",V).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}H.transform=function(P,it,D,$){var at=P.selection?P.selection():P;at.property("__zoom",bE),P!==at?Q(P,it,D,$):at.interrupt().each(function(){X(this,arguments).event($).start().zoom(null,typeof it=="function"?it.apply(this,arguments):it).end()})},H.scaleBy=function(P,it,D,$){H.scaleTo(P,function(){var at=this.__zoom.k,Y=typeof it=="function"?it.apply(this,arguments):it;return at*Y},D,$)},H.scaleTo=function(P,it,D,$){H.transform(P,function(){var at=t.apply(this,arguments),Y=this.__zoom,x=D==null?B(at):typeof D=="function"?D.apply(this,arguments):D,G=Y.invert(x),J=typeof it=="function"?it.apply(this,arguments):it;return n(F(q(Y,J),x,G),at,c)},D,$)},H.translateBy=function(P,it,D,$){H.transform(P,function(){return n(this.__zoom.translate(typeof it=="function"?it.apply(this,arguments):it,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),c)},null,$)},H.translateTo=function(P,it,D,$,at){H.transform(P,function(){var Y=t.apply(this,arguments),x=this.__zoom,G=$==null?B(Y):typeof $=="function"?$.apply(this,arguments):$;return n(Lr.translate(G[0],G[1]).scale(x.k).translate(typeof it=="function"?-it.apply(this,arguments):-it,typeof D=="function"?-D.apply(this,arguments):-D),Y,c)},$,at)};function q(P,it){return it=Math.max(l[0],Math.min(l[1],it)),it===P.k?P:new Vr(it,P.x,P.y)}function F(P,it,D){var $=it[0]-D[0]*P.k,at=it[1]-D[1]*P.k;return $===P.x&&at===P.y?P:new Vr(P.k,$,at)}function B(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function Q(P,it,D,$){P.on("start.zoom",function(){X(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){X(this,arguments).event($).end()}).tween("zoom",function(){var at=this,Y=arguments,x=X(at,Y).event($),G=t.apply(at,Y),J=D==null?B(G):typeof D=="function"?D.apply(at,Y):D,rt=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),ct=at.__zoom,mt=typeof it=="function"?it.apply(at,Y):it,pt=g(ct.invert(J).concat(rt/ct.k),mt.invert(J).concat(rt/mt.k));return function(Rt){if(Rt===1)Rt=mt;else{var bt=pt(Rt),kt=rt/bt[2];Rt=new Vr(kt,J[0]-bt[0]*kt,J[1]-bt[1]*kt)}x.zoom(null,Rt)}})}function X(P,it,D){return!D&&P.__zooming||new N(P,it)}function N(P,it){this.that=P,this.args=it,this.active=0,this.sourceEvent=null,this.extent=t.apply(P,it),this.taps=0}N.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,it){return this.mouse&&P!=="mouse"&&(this.mouse[1]=it.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=it.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=it.invert(this.touch1[0])),this.that.__zoom=it,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var it=gi(this.that).datum();p.call(P,this.that,new Fx(P,{sourceEvent:this.sourceEvent,target:H,transform:this.that.__zoom,dispatch:p}),it)}};function A(P,...it){if(!e.apply(this,arguments))return;var D=X(this,it).event(P),$=this.__zoom,at=Math.max(l[0],Math.min(l[1],$.k*Math.pow(2,r.apply(this,arguments)))),Y=Ri(P);if(D.wheel)(D.mouse[0][0]!==Y[0]||D.mouse[0][1]!==Y[1])&&(D.mouse[1]=$.invert(D.mouse[0]=Y)),clearTimeout(D.wheel);else{if($.k===at)return;D.mouse=[Y,$.invert(Y)],Zh(this),D.start()}_u(P),D.wheel=setTimeout(x,O),D.zoom("mouse",n(F(q($,at),D.mouse[0],D.mouse[1]),D.extent,c));function x(){D.wheel=null,D.end()}}function R(P,...it){if(T||!e.apply(this,arguments))return;var D=P.currentTarget,$=X(this,it,!0).event(P),at=gi(P.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",rt,!0),Y=Ri(P,D),x=P.clientX,G=P.clientY;Bw(P.view),_m(P),$.mouse=[Y,this.__zoom.invert(Y)],Zh(this),$.start();function J(ct){if(_u(ct),!$.moved){var mt=ct.clientX-x,pt=ct.clientY-G;$.moved=mt*mt+pt*pt>k}$.event(ct).zoom("mouse",n(F($.that.__zoom,$.mouse[0]=Ri(ct,D),$.mouse[1]),$.extent,c))}function rt(ct){at.on("mousemove.zoom mouseup.zoom",null),Hw(ct.view,$.moved),_u(ct),$.event(ct).end()}}function M(P,...it){if(e.apply(this,arguments)){var D=this.__zoom,$=Ri(P.changedTouches?P.changedTouches[0]:P,this),at=D.invert($),Y=D.k*(P.shiftKey?.5:2),x=n(F(q(D,Y),$,at),t.apply(this,it),c);_u(P),d>0?gi(this).transition().duration(d).call(Q,x,$,P):gi(this).call(H.transform,x,$,P)}}function V(P,...it){if(e.apply(this,arguments)){var D=P.touches,$=D.length,at=X(this,it,P.changedTouches.length===$).event(P),Y,x,G,J;for(_m(P),x=0;x<$;++x)G=D[x],J=Ri(G,this),J=[J,this.__zoom.invert(J),G.identifier],at.touch0?!at.touch1&&at.touch0[2]!==J[2]&&(at.touch1=J,at.taps=0):(at.touch0=J,Y=!0,at.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(at.taps<2&&(v=J[0],y=setTimeout(function(){y=null},S)),Zh(this),at.start())}}function U(P,...it){if(this.__zooming){var D=X(this,it).event(P),$=P.changedTouches,at=$.length,Y,x,G,J;for(_u(P),Y=0;Y<at;++Y)x=$[Y],G=Ri(x,this),D.touch0&&D.touch0[2]===x.identifier?D.touch0[0]=G:D.touch1&&D.touch1[2]===x.identifier&&(D.touch1[0]=G);if(x=D.that.__zoom,D.touch1){var rt=D.touch0[0],ct=D.touch0[1],mt=D.touch1[0],pt=D.touch1[1],Rt=(Rt=mt[0]-rt[0])*Rt+(Rt=mt[1]-rt[1])*Rt,bt=(bt=pt[0]-ct[0])*bt+(bt=pt[1]-ct[1])*bt;x=q(x,Math.sqrt(Rt/bt)),G=[(rt[0]+mt[0])/2,(rt[1]+mt[1])/2],J=[(ct[0]+pt[0])/2,(ct[1]+pt[1])/2]}else if(D.touch0)G=D.touch0[0],J=D.touch0[1];else return;D.zoom("touch",n(F(x,G,J),D.extent,c))}}function C(P,...it){if(this.__zooming){var D=X(this,it).event(P),$=P.changedTouches,at=$.length,Y,x;for(_m(P),T&&clearTimeout(T),T=setTimeout(function(){T=null},S),Y=0;Y<at;++Y)x=$[Y],D.touch0&&D.touch0[2]===x.identifier?delete D.touch0:D.touch1&&D.touch1[2]===x.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(x=Ri(x,this),Math.hypot(v[0]-x[0],v[1]-x[1])<L)){var G=gi(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return H.wheelDelta=function(P){return arguments.length?(r=typeof P=="function"?P:Vh(+P),H):r},H.filter=function(P){return arguments.length?(e=typeof P=="function"?P:Vh(!!P),H):e},H.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:Vh(!!P),H):a},H.extent=function(P){return arguments.length?(t=typeof P=="function"?P:Vh([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),H):t},H.scaleExtent=function(P){return arguments.length?(l[0]=+P[0],l[1]=+P[1],H):[l[0],l[1]]},H.translateExtent=function(P){return arguments.length?(c[0][0]=+P[0][0],c[1][0]=+P[1][0],c[0][1]=+P[0][1],c[1][1]=+P[1][1],H):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},H.constrain=function(P){return arguments.length?(n=P,H):n},H.duration=function(P){return arguments.length?(d=+P,H):d},H.interpolate=function(P){return arguments.length?(g=P,H):g},H.on=function(){var P=p.on.apply(p,arguments);return P===p?H:P},H.clickDistance=function(P){return arguments.length?(k=(P=+P)*P,H):Math.sqrt(k)},H.tapDistance=function(P){return arguments.length?(L=+P,H):L},H}Rw();const qf=et.createContext(null),Xx=qf.Provider,Hr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},nS=Hr.error001();function me(e,t){const n=et.useContext(qf);if(n===null)throw new Error(nS);return Iw(n,e,t)}const Ye=()=>{const e=et.useContext(qf);if(e===null)throw new Error(nS);return et.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Qx=e=>e.userSelectionActive?"none":"all";function Vp({position:e,children:t,className:n,style:r,...a}){const l=me(Qx),c=`${e}`.split("-");return lt.createElement("div",{className:gn(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...a},t)}function Zx({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:lt.createElement(Vp,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Wx=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:p,...y})=>{const v=et.useRef(null),[T,S]=et.useState({x:0,y:0,width:0,height:0}),O=gn(["react-flow__edge-textwrapper",p]);return et.useEffect(()=>{if(v.current){const k=v.current.getBBox();S({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),typeof n>"u"||!n?null:lt.createElement("g",{transform:`translate(${e-T.width/2} ${t-T.height/2})`,className:O,visibility:T.width?"visible":"hidden",...y},a&&lt.createElement("rect",{width:T.width+2*c[0],x:-c[0],y:-c[1],height:T.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),lt.createElement("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:v,style:r},n),g)};var Jx=et.memo(Wx);const kp=e=>({width:e.offsetWidth,height:e.offsetHeight}),Jo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Pp=(e={x:0,y:0},t)=>({x:Jo(e.x,t[0][0],t[1][0]),y:Jo(e.y,t[0][1],t[1][1])}),AE=(e,t,n)=>e<t?Jo(Math.abs(e-t),1,50)/50:e>n?-Jo(Math.abs(e-n),1,50)/50:0,iS=(e,t)=>{const n=AE(e.x,35,t.width-35)*20,r=AE(e.y,35,t.height-35)*20;return[n,r]},rS=e=>e.getRootNode?.()||window?.document,sS=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Hu=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),aS=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),RE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),tN=(e,t)=>aS(sS(Hu(e),Hu(t))),Km=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},eN=e=>yi(e.width)&&yi(e.height)&&yi(e.x)&&yi(e.y),yi=e=>!isNaN(e)&&isFinite(e),Ie=Symbol.for("internals"),oS=["Enter"," ","Escape"],nN=(e,t)=>{},iN=e=>"nativeEvent"in e;function Xm(e){const n=(iN(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const lS=e=>"clientX"in e,Ns=(e,t)=>{const n=lS(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},mf=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,ic=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:T,interactionWidth:S=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:T}),S&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),a&&yi(n)&&yi(r)?lt.createElement(Jx,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p}):null);ic.displayName="BaseEdge";function vu(e,t,n){return n===void 0?n:r=>{const a=t().edges.find(l=>l.id===e);a&&n(r,{...a})}}function uS({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function cS({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const g=e*.125+a*.375+c*.375+n*.125,p=t*.125+l*.375+d*.375+r*.125,y=Math.abs(g-e),v=Math.abs(p-t);return[g,p,y,v]}var Ls;(function(e){e.Strict="strict",e.Loose="loose"})(Ls||(Ls={}));var Aa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Aa||(Aa={}));var qu;(function(e){e.Partial="partial",e.Full="full"})(qu||(qu={}));var bs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(bs||(bs={}));var pf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(pf||(pf={}));var St;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(St||(St={}));function IE({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===St.Left||e===St.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function hS({sourceX:e,sourceY:t,sourcePosition:n=St.Bottom,targetX:r,targetY:a,targetPosition:l=St.Top}){const[c,d]=IE({pos:n,x1:e,y1:t,x2:r,y2:a}),[g,p]=IE({pos:l,x1:r,y1:a,x2:e,y2:t}),[y,v,T,S]=cS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:p});return[`M${e},${t} C${c},${d} ${g},${p} ${r},${a}`,y,v,T,S]}const Lp=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=St.Bottom,targetPosition:l=St.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:O,interactionWidth:k})=>{const[L,H,q]=hS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l});return lt.createElement(ic,{path:L,labelX:H,labelY:q,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:O,interactionWidth:k})});Lp.displayName="SimpleBezierEdge";const CE={[St.Left]:{x:-1,y:0},[St.Right]:{x:1,y:0},[St.Top]:{x:0,y:-1},[St.Bottom]:{x:0,y:1}},rN=({source:e,sourcePosition:t=St.Bottom,target:n})=>t===St.Left||t===St.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},xE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function sN({source:e,sourcePosition:t=St.Bottom,target:n,targetPosition:r=St.Top,center:a,offset:l}){const c=CE[t],d=CE[r],g={x:e.x+c.x*l,y:e.y+c.y*l},p={x:n.x+d.x*l,y:n.y+d.y*l},y=rN({source:g,sourcePosition:t,target:p}),v=y.x!==0?"x":"y",T=y[v];let S=[],O,k;const L={x:0,y:0},H={x:0,y:0},[q,F,B,Q]=uS({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){O=a.x??q,k=a.y??F;const N=[{x:O,y:g.y},{x:O,y:p.y}],A=[{x:g.x,y:k},{x:p.x,y:k}];c[v]===T?S=v==="x"?N:A:S=v==="x"?A:N}else{const N=[{x:g.x,y:p.y}],A=[{x:p.x,y:g.y}];if(v==="x"?S=c.x===T?A:N:S=c.y===T?N:A,t===r){const C=Math.abs(e[v]-n[v]);if(C<=l){const P=Math.min(l-1,l-C);c[v]===T?L[v]=(g[v]>e[v]?-1:1)*P:H[v]=(p[v]>n[v]?-1:1)*P}}if(t!==r){const C=v==="x"?"y":"x",P=c[v]===d[C],it=g[C]>p[C],D=g[C]<p[C];(c[v]===1&&(!P&&it||P&&D)||c[v]!==1&&(!P&&D||P&&it))&&(S=v==="x"?N:A)}const R={x:g.x+L.x,y:g.y+L.y},M={x:p.x+H.x,y:p.y+H.y},V=Math.max(Math.abs(R.x-S[0].x),Math.abs(M.x-S[0].x)),U=Math.max(Math.abs(R.y-S[0].y),Math.abs(M.y-S[0].y));V>=U?(O=(R.x+M.x)/2,k=S[0].y):(O=S[0].x,k=(R.y+M.y)/2)}return[[e,{x:g.x+L.x,y:g.y+L.y},...S,{x:p.x+H.x,y:p.y+H.y},n],O,k,B,Q]}function aN(e,t,n,r){const a=Math.min(xE(e,t)/2,xE(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+a*p},${c}Q ${l},${c} ${l},${c+a*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${l},${c+a*g}Q ${l},${c} ${l+a*d},${c}`}function Qm({sourceX:e,sourceY:t,sourcePosition:n=St.Bottom,targetX:r,targetY:a,targetPosition:l=St.Top,borderRadius:c=5,centerX:d,centerY:g,offset:p=20}){const[y,v,T,S,O]=sN({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:l,center:{x:d,y:g},offset:p});return[y.reduce((L,H,q)=>{let F="";return q>0&&q<y.length-1?F=aN(y[q-1],H,y[q+1],c):F=`${q===0?"M":"L"}${H.x} ${H.y}`,L+=F,L},""),v,T,S,O]}const Ff=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,sourcePosition:v=St.Bottom,targetPosition:T=St.Top,markerEnd:S,markerStart:O,pathOptions:k,interactionWidth:L})=>{const[H,q,F]=Qm({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:T,borderRadius:k?.borderRadius,offset:k?.offset});return lt.createElement(ic,{path:H,labelX:q,labelY:F,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:S,markerStart:O,interactionWidth:L})});Ff.displayName="SmoothStepEdge";const Up=et.memo(e=>lt.createElement(Ff,{...e,pathOptions:et.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Up.displayName="StepEdge";function oN({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,l,c,d]=uS({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,l,c,d]}const zp=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:T,interactionWidth:S})=>{const[O,k,L]=oN({sourceX:e,sourceY:t,targetX:n,targetY:r});return lt.createElement(ic,{path:O,labelX:k,labelY:L,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:T,interactionWidth:S})});zp.displayName="StraightEdge";function kh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function NE({pos:e,x1:t,y1:n,x2:r,y2:a,c:l}){switch(e){case St.Left:return[t-kh(t-r,l),n];case St.Right:return[t+kh(r-t,l),n];case St.Top:return[t,n-kh(n-a,l)];case St.Bottom:return[t,n+kh(a-n,l)]}}function fS({sourceX:e,sourceY:t,sourcePosition:n=St.Bottom,targetX:r,targetY:a,targetPosition:l=St.Top,curvature:c=.25}){const[d,g]=NE({pos:n,x1:e,y1:t,x2:r,y2:a,c}),[p,y]=NE({pos:l,x1:r,y1:a,x2:e,y2:t,c}),[v,T,S,O]=cS({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:g,targetControlX:p,targetControlY:y});return[`M${e},${t} C${d},${g} ${p},${y} ${r},${a}`,v,T,S,O]}const yf=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=St.Bottom,targetPosition:l=St.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:O,pathOptions:k,interactionWidth:L})=>{const[H,q,F]=fS({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l,curvature:k?.curvature});return lt.createElement(ic,{path:H,labelX:q,labelY:F,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:T,markerEnd:S,markerStart:O,interactionWidth:L})});yf.displayName="BezierEdge";const Bp=et.createContext(null),lN=Bp.Provider;Bp.Consumer;const uN=()=>et.useContext(Bp),cN=e=>"id"in e&&"source"in e&&"target"in e,hN=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Zm=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,fN=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),dS=(e,t)=>{if(!e.source||!e.target)return t;let n;return cN(e)?n={...e}:n={...e,id:hN(e)},fN(n,t)?t:t.concat(n)},Wm=({x:e,y:t},[n,r,a],l,[c,d])=>{const g={x:(e-n)/a,y:(t-r)/a};return l?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},gS=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),Ca=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},jf=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const{x:l,y:c}=Ca(a,t).positionAbsolute;return sS(r,Hu({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return aS(n)},mS=(e,t,[n,r,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},p=[];return e.forEach(y=>{const{width:v,height:T,selectable:S=!0,hidden:O=!1}=y;if(c&&!S||O)return!1;const{positionAbsolute:k}=Ca(y,d),L={x:k.x,y:k.y,width:v||0,height:T||0},H=Km(g,L),q=typeof v>"u"||typeof T>"u"||v===null||T===null,F=l&&H>0,B=(v||0)*(T||0);(q||F||H>=B||y.dragging)&&p.push(y)}),p},pS=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},yS=(e,t,n,r,a,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),g=Math.min(c,d),p=Jo(g,r,a),y=e.x+e.width/2,v=e.y+e.height/2,T=t/2-y*p,S=n/2-v*p;return{x:T,y:S,zoom:p}},wa=(e,t=0)=>e.transition().duration(t);function DE(e,t,n,r){return(t[n]||[]).reduce((a,l)=>(`${e.id}-${l.id}-${n}`!==r&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function dN(e,t,n,r,a,l){const{x:c,y:d}=Ns(e),p=t.elementsFromPoint(c,d).find(O=>O.classList.contains("react-flow__handle"));if(p){const O=p.getAttribute("data-nodeid");if(O){const k=Hp(void 0,p),L=p.getAttribute("data-handleid"),H=l({nodeId:O,id:L,type:k});if(H){const q=a.find(F=>F.nodeId===O&&F.type===k&&F.id===L);return{handle:{id:L,type:k,nodeId:O,x:q?.x||n.x,y:q?.y||n.y},validHandleResult:H}}}}let y=[],v=1/0;if(a.forEach(O=>{const k=Math.sqrt((O.x-n.x)**2+(O.y-n.y)**2);if(k<=r){const L=l(O);k<=v&&(k<v?y=[{handle:O,validHandleResult:L}]:k===v&&y.push({handle:O,validHandleResult:L}),v=k)}}),!y.length)return{handle:null,validHandleResult:_S()};if(y.length===1)return y[0];const T=y.some(({validHandleResult:O})=>O.isValid),S=y.some(({handle:O})=>O.type==="target");return y.find(({handle:O,validHandleResult:k})=>S?O.type==="target":T?k.isValid:!0)||y[0]}const gN={source:null,target:null,sourceHandle:null,targetHandle:null},_S=()=>({handleDomNode:null,isValid:!1,connection:gN,endHandle:null});function vS(e,t,n,r,a,l,c){const d=a==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),p={..._S(),handleDomNode:g};if(g){const y=Hp(void 0,g),v=g.getAttribute("data-nodeid"),T=g.getAttribute("data-handleid"),S=g.classList.contains("connectable"),O=g.classList.contains("connectableend"),k={source:d?v:n,sourceHandle:d?T:r,target:d?n:v,targetHandle:d?r:T};p.connection=k,S&&O&&(t===Ls.Strict?d&&y==="source"||!d&&y==="target":v!==n||T!==r)&&(p.endHandle={nodeId:v,handleId:T,type:y},p.isValid=l(k))}return p}function mN({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((a,l)=>{if(l[Ie]){const{handleBounds:c}=l[Ie];let d=[],g=[];c&&(d=DE(l,c,"source",`${t}-${n}-${r}`),g=DE(l,c,"target",`${t}-${n}-${r}`)),a.push(...d,...g)}return a},[])}function Hp(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function vm(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function pN(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function ES({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:p}){const y=rS(e.target),{connectionMode:v,domNode:T,autoPanOnConnect:S,connectionRadius:O,onConnectStart:k,panBy:L,getNodes:H,cancelConnection:q}=l();let F=0,B;const{x:Q,y:X}=Ns(e),N=y?.elementFromPoint(Q,X),A=Hp(g,N),R=T?.getBoundingClientRect();if(!R||!A)return;let M,V=Ns(e,R),U=!1,C=null,P=!1,it=null;const D=mN({nodes:H(),nodeId:n,handleId:t,handleType:A}),$=()=>{if(!S)return;const[x,G]=iS(V,R);L({x,y:G}),F=requestAnimationFrame($)};c({connectionPosition:V,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:t,type:A},connectionEndHandle:null}),k?.(e,{nodeId:n,handleId:t,handleType:A});function at(x){const{transform:G}=l();V=Ns(x,R);const{handle:J,validHandleResult:rt}=dN(x,y,Wm(V,G,!1,[1,1]),O,D,ct=>vS(ct,v,n,t,a?"target":"source",d,y));if(B=J,U||($(),U=!0),it=rt.handleDomNode,C=rt.connection,P=rt.isValid,c({connectionPosition:B&&P?gS({x:B.x,y:B.y},G):V,connectionStatus:pN(!!B,P),connectionEndHandle:rt.endHandle}),!B&&!P&&!it)return vm(M);C.source!==C.target&&it&&(vm(M),M=it,it.classList.add("connecting","react-flow__handle-connecting"),it.classList.toggle("valid",P),it.classList.toggle("react-flow__handle-valid",P))}function Y(x){(B||it)&&C&&P&&r?.(C),l().onConnectEnd?.(x),g&&p?.(x),vm(M),q(),cancelAnimationFrame(F),U=!1,P=!1,C=null,it=null,y.removeEventListener("mousemove",at),y.removeEventListener("mouseup",Y),y.removeEventListener("touchmove",at),y.removeEventListener("touchend",Y)}y.addEventListener("mousemove",at),y.addEventListener("mouseup",Y),y.addEventListener("touchmove",at),y.addEventListener("touchend",Y)}const ME=()=>!0,yN=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),_N=(e,t,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},TS=et.forwardRef(({type:e="source",position:t=St.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:g,className:p,onMouseDown:y,onTouchStart:v,...T},S)=>{const O=c||null,k=e==="target",L=Ye(),H=uN(),{connectOnClick:q,noPanClassName:F}=me(yN,rn),{connecting:B,clickConnecting:Q}=me(_N(H,O,e),rn);H||L.getState().onError?.("010",Hr.error010());const X=R=>{const{defaultEdgeOptions:M,onConnect:V,hasDefaultEdges:U}=L.getState(),C={...M,...R};if(U){const{edges:P,setEdges:it}=L.getState();it(dS(C,P))}V?.(C),d?.(C)},N=R=>{if(!H)return;const M=lS(R);a&&(M&&R.button===0||!M)&&ES({event:R,handleId:O,nodeId:H,onConnect:X,isTarget:k,getState:L.getState,setState:L.setState,isValidConnection:n||L.getState().isValidConnection||ME}),M?y?.(R):v?.(R)},A=R=>{const{onClickConnectStart:M,onClickConnectEnd:V,connectionClickStartHandle:U,connectionMode:C,isValidConnection:P}=L.getState();if(!H||!U&&!a)return;if(!U){M?.(R,{nodeId:H,handleId:O,handleType:e}),L.setState({connectionClickStartHandle:{nodeId:H,type:e,handleId:O}});return}const it=rS(R.target),D=n||P||ME,{connection:$,isValid:at}=vS({nodeId:H,id:O,type:e},C,U.nodeId,U.handleId||null,U.type,D,it);at&&X($),V?.(R),L.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":O,"data-nodeid":H,"data-handlepos":t,"data-id":`${H}-${O}-${e}`,className:gn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",F,p,{source:!k,target:k,connectable:r,connectablestart:a,connectableend:l,connecting:Q,connectionindicator:r&&(a&&!B||l&&B)}]),onMouseDown:N,onTouchStart:N,onClick:q?A:void 0,ref:S,...T},g)});TS.displayName="Handle";var Na=et.memo(TS);const wS=({data:e,isConnectable:t,targetPosition:n=St.Top,sourcePosition:r=St.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(Na,{type:"target",position:n,isConnectable:t}),e?.label,lt.createElement(Na,{type:"source",position:r,isConnectable:t}));wS.displayName="DefaultNode";var Jm=et.memo(wS);const SS=({data:e,isConnectable:t,sourcePosition:n=St.Bottom})=>lt.createElement(lt.Fragment,null,e?.label,lt.createElement(Na,{type:"source",position:n,isConnectable:t}));SS.displayName="InputNode";var bS=et.memo(SS);const AS=({data:e,isConnectable:t,targetPosition:n=St.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(Na,{type:"target",position:n,isConnectable:t}),e?.label);AS.displayName="OutputNode";var RS=et.memo(AS);const qp=()=>null;qp.displayName="GroupNode";const vN=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Ph=e=>e.id;function EN(e,t){return rn(e.selectedNodes.map(Ph),t.selectedNodes.map(Ph))&&rn(e.selectedEdges.map(Ph),t.selectedEdges.map(Ph))}const IS=et.memo(({onSelectionChange:e})=>{const t=Ye(),{selectedNodes:n,selectedEdges:r}=me(vN,EN);return et.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(l=>l(a))},[n,r,e]),null});IS.displayName="SelectionListener";const TN=e=>!!e.onSelectionChange;function wN({onSelectionChange:e}){const t=me(TN);return e||t?lt.createElement(IS,{onSelectionChange:e}):null}const SN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Oo(e,t){et.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function qt(e,t,n){et.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const bN=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:p,nodesConnectable:y,nodesFocusable:v,edgesFocusable:T,edgesUpdatable:S,elevateNodesOnSelect:O,minZoom:k,maxZoom:L,nodeExtent:H,onNodesChange:q,onEdgesChange:F,elementsSelectable:B,connectionMode:Q,snapGrid:X,snapToGrid:N,translateExtent:A,connectOnClick:R,defaultEdgeOptions:M,fitView:V,fitViewOptions:U,onNodesDelete:C,onEdgesDelete:P,onNodeDrag:it,onNodeDragStart:D,onNodeDragStop:$,onSelectionDrag:at,onSelectionDragStart:Y,onSelectionDragStop:x,noPanClassName:G,nodeOrigin:J,rfId:rt,autoPanOnConnect:ct,autoPanOnNodeDrag:mt,onError:pt,connectionRadius:Rt,isValidConnection:bt,nodeDragThreshold:kt})=>{const{setNodes:Pt,setEdges:ue,setDefaultNodesAndEdges:ce,setMinZoom:ve,setMaxZoom:ye,setTranslateExtent:he,setNodeExtent:Ke,reset:Lt}=me(SN,rn),Tt=Ye();return et.useEffect(()=>{const Ce=r?.map(mn=>({...mn,...M}));return ce(n,Ce),()=>{Lt()}},[]),qt("defaultEdgeOptions",M,Tt.setState),qt("connectionMode",Q,Tt.setState),qt("onConnect",a,Tt.setState),qt("onConnectStart",l,Tt.setState),qt("onConnectEnd",c,Tt.setState),qt("onClickConnectStart",d,Tt.setState),qt("onClickConnectEnd",g,Tt.setState),qt("nodesDraggable",p,Tt.setState),qt("nodesConnectable",y,Tt.setState),qt("nodesFocusable",v,Tt.setState),qt("edgesFocusable",T,Tt.setState),qt("edgesUpdatable",S,Tt.setState),qt("elementsSelectable",B,Tt.setState),qt("elevateNodesOnSelect",O,Tt.setState),qt("snapToGrid",N,Tt.setState),qt("snapGrid",X,Tt.setState),qt("onNodesChange",q,Tt.setState),qt("onEdgesChange",F,Tt.setState),qt("connectOnClick",R,Tt.setState),qt("fitViewOnInit",V,Tt.setState),qt("fitViewOnInitOptions",U,Tt.setState),qt("onNodesDelete",C,Tt.setState),qt("onEdgesDelete",P,Tt.setState),qt("onNodeDrag",it,Tt.setState),qt("onNodeDragStart",D,Tt.setState),qt("onNodeDragStop",$,Tt.setState),qt("onSelectionDrag",at,Tt.setState),qt("onSelectionDragStart",Y,Tt.setState),qt("onSelectionDragStop",x,Tt.setState),qt("noPanClassName",G,Tt.setState),qt("nodeOrigin",J,Tt.setState),qt("rfId",rt,Tt.setState),qt("autoPanOnConnect",ct,Tt.setState),qt("autoPanOnNodeDrag",mt,Tt.setState),qt("onError",pt,Tt.setState),qt("connectionRadius",Rt,Tt.setState),qt("isValidConnection",bt,Tt.setState),qt("nodeDragThreshold",kt,Tt.setState),Oo(e,Pt),Oo(t,ue),Oo(k,ve),Oo(L,ye),Oo(A,he),Oo(H,Ke),null},OE={display:"none"},AN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},CS="react-flow__node-desc",xS="react-flow__edge-desc",RN="react-flow__aria-live",IN=e=>e.ariaLiveMessage;function CN({rfId:e}){const t=me(IN);return lt.createElement("div",{id:`${RN}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:AN},t)}function xN({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${CS}-${e}`,style:OE},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${xS}-${e}`,style:OE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(CN,{rfId:e}))}var Fu=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=et.useState(!1),a=et.useRef(!1),l=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=p.reduce((v,T)=>v.concat(...T),[]);return[p,y]}return[[],[]]},[e]);return et.useEffect(()=>{const g=typeof document<"u"?document:null,p=t?.target||g;if(e!==null){const y=S=>{if(a.current=S.ctrlKey||S.metaKey||S.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Xm(S))return!1;const k=kE(S.code,d);l.current.add(S[k]),VE(c,l.current,!1)&&(S.preventDefault(),r(!0))},v=S=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Xm(S))return!1;const k=kE(S.code,d);VE(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[k]),S.key==="Meta"&&l.current.clear(),a.current=!1},T=()=>{l.current.clear(),r(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",v),window.addEventListener("blur",T),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",v),window.removeEventListener("blur",T)}}},[e,r]),n};function VE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function kE(e,t){return t.includes(e)?"code":"key"}function NS(e,t,n,r){const a=e.parentNode||e.parentId;if(!a)return n;const l=t.get(a),c=Ca(l,r);return NS(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[Ie]?.z??0)>(n.z??0)?l[Ie]?.z??0:n.z??0},r)}function DS(e,t,n){e.forEach(r=>{const a=r.parentNode||r.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[r.id]){const{x:l,y:c,z:d}=NS(r,e,{...r.position,z:r[Ie]?.z??0},t);r.positionAbsolute={x:l,y:c},r[Ie].z=d,n?.[r.id]&&(r[Ie].isParent=!0)}})}function Em(e,t,n,r){const a=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const g=(yi(d.zIndex)?d.zIndex:0)+(d.selected?c:0),p=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const T=p?.type&&p?.type!==d.type;Object.defineProperty(y,Ie,{enumerable:!1,value:{handleBounds:T?void 0:p?.[Ie]?.handleBounds,z:g}}),a.set(d.id,y)}),DS(a,n,l),a}function MS(e,t={}){const{getNodes:n,width:r,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:p,fitViewOnInit:y,nodeOrigin:v}=e(),T=t.initial&&!p&&y;if(d&&g&&(T||!t.initial)){const O=n().filter(L=>{const H=t.includeHiddenNodes?L.width&&L.height:!L.hidden;return t.nodes?.length?H&&t.nodes.some(q=>q.id===L.id):H}),k=O.every(L=>L.width&&L.height);if(O.length>0&&k){const L=jf(O,v),{x:H,y:q,zoom:F}=yS(L,r,a,t.minZoom??l,t.maxZoom??c,t.padding??.1),B=Lr.translate(H,q).scale(F);return typeof t.duration=="number"&&t.duration>0?d.transform(wa(g,t.duration),B):d.transform(g,B),!0}}return!1}function NN(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ie]:r[Ie],selected:n.selected})}),new Map(t)}function DN(e,t){return t.map(n=>{const r=e.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function Lh({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:p}=n();e?.length&&(g&&r({nodeInternals:NN(e,a)}),c?.(e)),t?.length&&(p&&r({edges:DN(t,l)}),d?.(t))}const Vo=()=>{},MN={zoomIn:Vo,zoomOut:Vo,zoomTo:Vo,getZoom:()=>1,setViewport:Vo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Vo,fitBounds:Vo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ON=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),VN=()=>{const e=Ye(),{d3Zoom:t,d3Selection:n}=me(ON,rn);return et.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(wa(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(wa(n,a?.duration),1/1.2),zoomTo:(a,l)=>t.scaleTo(wa(n,l?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,l)=>{const[c,d,g]=e.getState().transform,p=Lr.translate(a.x??c,a.y??d).scale(a.zoom??g);t.transform(wa(n,l?.duration),p)},getViewport:()=>{const[a,l,c]=e.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>MS(e.getState,a),setCenter:(a,l,c)=>{const{width:d,height:g,maxZoom:p}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:p,v=d/2-a*y,T=g/2-l*y,S=Lr.translate(v,T).scale(y);t.transform(wa(n,c?.duration),S)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:g,maxZoom:p}=e.getState(),{x:y,y:v,zoom:T}=yS(a,c,d,g,p,l?.padding??.1),S=Lr.translate(y,v).scale(T);t.transform(wa(n,l?.duration),S)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Wm(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return a;const{x:p,y}=g.getBoundingClientRect(),v={x:a.x-p,y:a.y-y};return Wm(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=e.getState();if(!c)return a;const{x:d,y:g}=c.getBoundingClientRect(),p=gS(a,l);return{x:p.x+d,y:p.y+g}},viewportInitialized:!0}:MN,[t,n])};function Fp(){const e=VN(),t=Ye(),n=et.useCallback(()=>t.getState().getNodes().map(k=>({...k})),[]),r=et.useCallback(k=>t.getState().nodeInternals.get(k),[]),a=et.useCallback(()=>{const{edges:k=[]}=t.getState();return k.map(L=>({...L}))},[]),l=et.useCallback(k=>{const{edges:L=[]}=t.getState();return L.find(H=>H.id===k)},[]),c=et.useCallback(k=>{const{getNodes:L,setNodes:H,hasDefaultNodes:q,onNodesChange:F}=t.getState(),B=L(),Q=typeof k=="function"?k(B):k;if(q)H(Q);else if(F){const X=Q.length===0?B.map(N=>({type:"remove",id:N.id})):Q.map(N=>({item:N,type:"reset"}));F(X)}},[]),d=et.useCallback(k=>{const{edges:L=[],setEdges:H,hasDefaultEdges:q,onEdgesChange:F}=t.getState(),B=typeof k=="function"?k(L):k;if(q)H(B);else if(F){const Q=B.length===0?L.map(X=>({type:"remove",id:X.id})):B.map(X=>({item:X,type:"reset"}));F(Q)}},[]),g=et.useCallback(k=>{const L=Array.isArray(k)?k:[k],{getNodes:H,setNodes:q,hasDefaultNodes:F,onNodesChange:B}=t.getState();if(F){const X=[...H(),...L];q(X)}else if(B){const Q=L.map(X=>({item:X,type:"add"}));B(Q)}},[]),p=et.useCallback(k=>{const L=Array.isArray(k)?k:[k],{edges:H=[],setEdges:q,hasDefaultEdges:F,onEdgesChange:B}=t.getState();if(F)q([...H,...L]);else if(B){const Q=L.map(X=>({item:X,type:"add"}));B(Q)}},[]),y=et.useCallback(()=>{const{getNodes:k,edges:L=[],transform:H}=t.getState(),[q,F,B]=H;return{nodes:k().map(Q=>({...Q})),edges:L.map(Q=>({...Q})),viewport:{x:q,y:F,zoom:B}}},[]),v=et.useCallback(({nodes:k,edges:L})=>{const{nodeInternals:H,getNodes:q,edges:F,hasDefaultNodes:B,hasDefaultEdges:Q,onNodesDelete:X,onEdgesDelete:N,onNodesChange:A,onEdgesChange:R}=t.getState(),M=(k||[]).map(it=>it.id),V=(L||[]).map(it=>it.id),U=q().reduce((it,D)=>{const $=D.parentNode||D.parentId,at=!M.includes(D.id)&&$&&it.find(x=>x.id===$);return(typeof D.deletable=="boolean"?D.deletable:!0)&&(M.includes(D.id)||at)&&it.push(D),it},[]),C=F.filter(it=>typeof it.deletable=="boolean"?it.deletable:!0),P=C.filter(it=>V.includes(it.id));if(U||P){const it=pS(U,C),D=[...P,...it],$=D.reduce((at,Y)=>(at.includes(Y.id)||at.push(Y.id),at),[]);if((Q||B)&&(Q&&t.setState({edges:F.filter(at=>!$.includes(at.id))}),B&&(U.forEach(at=>{H.delete(at.id)}),t.setState({nodeInternals:new Map(H)}))),$.length>0&&(N?.(D),R&&R($.map(at=>({id:at,type:"remove"})))),U.length>0&&(X?.(U),A)){const at=U.map(Y=>({id:Y.id,type:"remove"}));A(at)}}},[]),T=et.useCallback(k=>{const L=eN(k),H=L?null:t.getState().nodeInternals.get(k.id);return!L&&!H?[null,null,L]:[L?k:RE(H),H,L]},[]),S=et.useCallback((k,L=!0,H)=>{const[q,F,B]=T(k);return q?(H||t.getState().getNodes()).filter(Q=>{if(!B&&(Q.id===F.id||!Q.positionAbsolute))return!1;const X=RE(Q),N=Km(X,q);return L&&N>0||N>=q.width*q.height}):[]},[]),O=et.useCallback((k,L,H=!0)=>{const[q]=T(k);if(!q)return!1;const F=Km(q,L);return H&&F>0||F>=q.width*q.height},[]);return et.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:g,addEdges:p,toObject:y,deleteElements:v,getIntersectingNodes:S,isNodeIntersecting:O}),[e,n,r,a,l,c,d,g,p,y,v,S,O])}const kN={actInsideInputWithModifier:!1};var PN=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ye(),{deleteElements:r}=Fp(),a=Fu(e,kN),l=Fu(t);et.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),p=c.filter(y=>y.selected);r({nodes:g,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function LN(e){const t=Ye();et.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const a=kp(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",Hr.error004()),t.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const jp={position:"absolute",width:"100%",height:"100%",top:0,left:0},UN=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Uh=e=>({x:e.x,y:e.y,zoom:e.k}),ko=(e,t)=>e.target.closest(`.${t}`),PE=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),LE=e=>{const t=e.ctrlKey&&mf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},zN=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),BN=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=Aa.Free,zoomOnDoubleClick:p=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:T,translateExtent:S,minZoom:O,maxZoom:k,zoomActivationKeyCode:L,preventScrolling:H=!0,children:q,noWheelClassName:F,noPanClassName:B})=>{const Q=et.useRef(),X=Ye(),N=et.useRef(!1),A=et.useRef(!1),R=et.useRef(null),M=et.useRef({x:0,y:0,zoom:0}),{d3Zoom:V,d3Selection:U,d3ZoomHandler:C,userSelectionActive:P}=me(zN,rn),it=Fu(L),D=et.useRef(0),$=et.useRef(!1),at=et.useRef();return LN(R),et.useEffect(()=>{if(R.current){const Y=R.current.getBoundingClientRect(),x=eS().scaleExtent([O,k]).translateExtent(S),G=gi(R.current).call(x),J=Lr.translate(T.x,T.y).scale(Jo(T.zoom,O,k)),rt=[[0,0],[Y.width,Y.height]],ct=x.constrain()(J,rt,S);x.transform(G,ct),x.wheelDelta(LE),X.setState({d3Zoom:x,d3Selection:G,d3ZoomHandler:G.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:R.current.closest(".react-flow")})}},[]),et.useEffect(()=>{U&&V&&(c&&!it&&!P?U.on("wheel.zoom",Y=>{if(ko(Y,F))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const x=U.property("__zoom").k||1;if(Y.ctrlKey&&l){const bt=Ri(Y),kt=LE(Y),Pt=x*Math.pow(2,kt);V.scaleTo(U,Pt,bt,Y);return}const G=Y.deltaMode===1?20:1;let J=g===Aa.Vertical?0:Y.deltaX*G,rt=g===Aa.Horizontal?0:Y.deltaY*G;!mf()&&Y.shiftKey&&g!==Aa.Vertical&&(J=Y.deltaY*G,rt=0),V.translateBy(U,-(J/x)*d,-(rt/x)*d,{internal:!0});const ct=Uh(U.property("__zoom")),{onViewportChangeStart:mt,onViewportChange:pt,onViewportChangeEnd:Rt}=X.getState();clearTimeout(at.current),$.current||($.current=!0,t?.(Y,ct),mt?.(ct)),$.current&&(e?.(Y,ct),pt?.(ct),at.current=setTimeout(()=>{n?.(Y,ct),Rt?.(ct),$.current=!1},150))},{passive:!1}):typeof C<"u"&&U.on("wheel.zoom",function(Y,x){if(!H&&Y.type==="wheel"&&!Y.ctrlKey||ko(Y,F))return null;Y.preventDefault(),C.call(this,Y,x)},{passive:!1}))},[P,c,g,U,V,C,it,l,H,F,t,e,n]),et.useEffect(()=>{V&&V.on("start",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;D.current=Y.sourceEvent?.button;const{onViewportChangeStart:x}=X.getState(),G=Uh(Y.transform);N.current=!0,M.current=G,Y.sourceEvent?.type==="mousedown"&&X.setState({paneDragging:!0}),x?.(G),t?.(Y.sourceEvent,G)})},[V,t]),et.useEffect(()=>{V&&(P&&!N.current?V.on("zoom",null):P||V.on("zoom",Y=>{const{onViewportChange:x}=X.getState();if(X.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),A.current=!!(r&&PE(v,D.current??0)),(e||x)&&!Y.sourceEvent?.internal){const G=Uh(Y.transform);x?.(G),e?.(Y.sourceEvent,G)}}))},[P,V,e,v,r]),et.useEffect(()=>{V&&V.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:x}=X.getState();if(N.current=!1,X.setState({paneDragging:!1}),r&&PE(v,D.current??0)&&!A.current&&r(Y.sourceEvent),A.current=!1,(n||x)&&UN(M.current,Y.transform)){const G=Uh(Y.transform);M.current=G,clearTimeout(Q.current),Q.current=setTimeout(()=>{x?.(G),n?.(Y.sourceEvent,G)},c?150:0)}})},[V,c,v,n,r]),et.useEffect(()=>{V&&V.filter(Y=>{const x=it||a,G=l&&Y.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(ko(Y,"react-flow__node")||ko(Y,"react-flow__edge")))return!0;if(!v&&!x&&!c&&!p&&!l||P||!p&&Y.type==="dblclick"||ko(Y,F)&&Y.type==="wheel"||ko(Y,B)&&(Y.type!=="wheel"||c&&Y.type==="wheel"&&!it)||!l&&Y.ctrlKey&&Y.type==="wheel"||!x&&!c&&!G&&Y.type==="wheel"||!v&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(v)&&!v.includes(Y.button)&&Y.type==="mousedown")return!1;const J=Array.isArray(v)&&v.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&J})},[P,V,a,l,c,p,v,y,it]),lt.createElement("div",{className:"react-flow__renderer",ref:R,style:jp},q)},HN=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function qN(){const{userSelectionActive:e,userSelectionRect:t}=me(HN,rn);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function UE(e,t){const n=t.parentNode||t.parentId,r=e.find(a=>a.id===n);if(r){const a=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(a>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function OS(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,a)=>{const l=e.filter(d=>d.id===a.id);if(l.length===0)return r.push(a),r;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&UE(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&UE(r,c);break}case"remove":return r}return r.push(c),r},n)}function VS(e,t){return OS(e,t)}function FN(e,t){return OS(e,t)}const Ss=(e,t)=>({id:e,type:"select",selected:t});function qo(e,t){return e.reduce((n,r)=>{const a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(Ss(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(Ss(r.id,!1))),n},[])}const Tm=(e,t)=>n=>{n.target===t.current&&e?.(n)},jN=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),kS=et.memo(({isSelecting:e,selectionMode:t=qu.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:p,onPaneMouseLeave:y,children:v})=>{const T=et.useRef(null),S=Ye(),O=et.useRef(0),k=et.useRef(0),L=et.useRef(),{userSelectionActive:H,elementsSelectable:q,dragging:F}=me(jN,rn),B=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),O.current=0,k.current=0},Q=C=>{l?.(C),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},X=C=>{if(Array.isArray(n)&&n?.includes(2)){C.preventDefault();return}c?.(C)},N=d?C=>d(C):void 0,A=C=>{const{resetSelectedElements:P,domNode:it}=S.getState();if(L.current=it?.getBoundingClientRect(),!q||!e||C.button!==0||C.target!==T.current||!L.current)return;const{x:D,y:$}=Ns(C,L.current);P(),S.setState({userSelectionRect:{width:0,height:0,startX:D,startY:$,x:D,y:$}}),r?.(C)},R=C=>{const{userSelectionRect:P,nodeInternals:it,edges:D,transform:$,onNodesChange:at,onEdgesChange:Y,nodeOrigin:x,getNodes:G}=S.getState();if(!e||!L.current||!P)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const J=Ns(C,L.current),rt=P.startX??0,ct=P.startY??0,mt={...P,x:J.x<rt?J.x:rt,y:J.y<ct?J.y:ct,width:Math.abs(J.x-rt),height:Math.abs(J.y-ct)},pt=G(),Rt=mS(it,mt,$,t===qu.Partial,!0,x),bt=pS(Rt,D).map(Pt=>Pt.id),kt=Rt.map(Pt=>Pt.id);if(O.current!==kt.length){O.current=kt.length;const Pt=qo(pt,kt);Pt.length&&at?.(Pt)}if(k.current!==bt.length){k.current=bt.length;const Pt=qo(D,bt);Pt.length&&Y?.(Pt)}S.setState({userSelectionRect:mt})},M=C=>{if(C.button!==0)return;const{userSelectionRect:P}=S.getState();!H&&P&&C.target===T.current&&Q?.(C),S.setState({nodesSelectionActive:O.current>0}),B(),a?.(C)},V=C=>{H&&(S.setState({nodesSelectionActive:O.current>0}),a?.(C)),B()},U=q&&(e||H);return lt.createElement("div",{className:gn(["react-flow__pane",{dragging:F,selection:e}]),onClick:U?void 0:Tm(Q,T),onContextMenu:Tm(X,T),onWheel:Tm(N,T),onMouseEnter:U?void 0:g,onMouseDown:U?A:void 0,onMouseMove:U?R:p,onMouseUp:U?M:void 0,onMouseLeave:U?V:y,ref:T,style:jp},v,lt.createElement(qN,null))});kS.displayName="Pane";function PS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:PS(r,t):!1}function zE(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function GN(e,t,n,r){return Array.from(e.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!PS(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function $N(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function LS(e,t,n,r,a=[0,0],l){const c=$N(e,e.extent||r);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:T,y:S}=Ca(v,a).positionAbsolute;d=v&&yi(T)&&yi(S)&&yi(v.width)&&yi(v.height)?[[T+e.width*a[0],S+e.height*a[1]],[T+v.width-e.width+e.width*a[0],S+v.height-e.height+e.height*a[1]]]:d}else l?.("005",Hr.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:T,y:S}=Ca(v,a).positionAbsolute;d=[[e.extent[0][0]+T,e.extent[0][1]+S],[e.extent[1][0]+T,e.extent[1][1]+S]]}let p={x:0,y:0};if(g){const v=n.get(g);p=Ca(v,a).positionAbsolute}const y=d&&d!=="parent"?Pp(t,d):t;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function wm({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?r.find(a=>a.id===e):r[0],r]}const BE=(e,t,n,r)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const l=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(g=>{const p=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(p.left-c.left-d.x)/n,y:(p.top-c.top-d.y)/n,...kp(g)}})};function Eu(e,t,n){return n===void 0?n:r=>{const a=t().nodeInternals.get(e);a&&n(r,{...a})}}function tp({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),p=d.get(e);if(!p){g?.("012",Hr.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function YN(){const e=Ye();return et.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?a[0]*Math.round(g.x/a[0]):g.x,ySnapped:l?a[1]*Math.round(g.y/a[1]):g.y,...g}},[])}function Sm(e){return(t,n,r)=>e?.(t,r)}function US({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=Ye(),[g,p]=et.useState(!1),y=et.useRef([]),v=et.useRef({x:null,y:null}),T=et.useRef(0),S=et.useRef(null),O=et.useRef({x:0,y:0}),k=et.useRef(null),L=et.useRef(!1),H=et.useRef(!1),q=et.useRef(!1),F=YN();return et.useEffect(()=>{if(e?.current){const B=gi(e.current),Q=({x:A,y:R})=>{const{nodeInternals:M,onNodeDrag:V,onSelectionDrag:U,updateNodePositions:C,nodeExtent:P,snapGrid:it,snapToGrid:D,nodeOrigin:$,onError:at}=d.getState();v.current={x:A,y:R};let Y=!1,x={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&P){const J=jf(y.current,$);x=Hu(J)}if(y.current=y.current.map(J=>{const rt={x:A-J.distance.x,y:R-J.distance.y};D&&(rt.x=it[0]*Math.round(rt.x/it[0]),rt.y=it[1]*Math.round(rt.y/it[1]));const ct=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];y.current.length>1&&P&&!J.extent&&(ct[0][0]=J.positionAbsolute.x-x.x+P[0][0],ct[1][0]=J.positionAbsolute.x+(J.width??0)-x.x2+P[1][0],ct[0][1]=J.positionAbsolute.y-x.y+P[0][1],ct[1][1]=J.positionAbsolute.y+(J.height??0)-x.y2+P[1][1]);const mt=LS(J,rt,M,ct,$,at);return Y=Y||J.position.x!==mt.position.x||J.position.y!==mt.position.y,J.position=mt.position,J.positionAbsolute=mt.positionAbsolute,J}),!Y)return;C(y.current,!0,!0),p(!0);const G=a?V:Sm(U);if(G&&k.current){const[J,rt]=wm({nodeId:a,dragItems:y.current,nodeInternals:M});G(k.current,J,rt)}},X=()=>{if(!S.current)return;const[A,R]=iS(O.current,S.current);if(A!==0||R!==0){const{transform:M,panBy:V}=d.getState();v.current.x=(v.current.x??0)-A/M[2],v.current.y=(v.current.y??0)-R/M[2],V({x:A,y:R})&&Q(v.current)}T.current=requestAnimationFrame(X)},N=A=>{const{nodeInternals:R,multiSelectionActive:M,nodesDraggable:V,unselectNodesAndEdges:U,onNodeDragStart:C,onSelectionDragStart:P}=d.getState();H.current=!0;const it=a?C:Sm(P);(!c||!l)&&!M&&a&&(R.get(a)?.selected||U()),a&&l&&c&&tp({id:a,store:d,nodeRef:e});const D=F(A);if(v.current=D,y.current=GN(R,V,D,a),it&&y.current){const[$,at]=wm({nodeId:a,dragItems:y.current,nodeInternals:R});it(A.sourceEvent,$,at)}};if(t)B.on(".drag",null);else{const A=s2().on("start",R=>{const{domNode:M,nodeDragThreshold:V}=d.getState();V===0&&N(R),q.current=!1;const U=F(R);v.current=U,S.current=M?.getBoundingClientRect()||null,O.current=Ns(R.sourceEvent,S.current)}).on("drag",R=>{const M=F(R),{autoPanOnNodeDrag:V,nodeDragThreshold:U}=d.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!L.current&&H.current&&V&&(L.current=!0,X()),!H.current){const C=M.xSnapped-(v?.current?.x??0),P=M.ySnapped-(v?.current?.y??0);Math.sqrt(C*C+P*P)>U&&N(R)}(v.current.x!==M.xSnapped||v.current.y!==M.ySnapped)&&y.current&&H.current&&(k.current=R.sourceEvent,O.current=Ns(R.sourceEvent,S.current),Q(M))}}).on("end",R=>{if(!(!H.current||q.current)&&(p(!1),L.current=!1,H.current=!1,cancelAnimationFrame(T.current),y.current)){const{updateNodePositions:M,nodeInternals:V,onNodeDragStop:U,onSelectionDragStop:C}=d.getState(),P=a?U:Sm(C);if(M(y.current,!1,!1),P){const[it,D]=wm({nodeId:a,dragItems:y.current,nodeInternals:V});P(R.sourceEvent,it,D)}}}).filter(R=>{const M=R.target;return!R.button&&(!n||!zE(M,`.${n}`,e))&&(!r||zE(M,r,e))});return B.call(A),()=>{B.on(".drag",null)}}}},[e,t,n,r,l,d,a,c,F]),g}function zS(){const e=Ye();return et.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:g,onError:p,nodesDraggable:y}=e.getState(),v=c().filter(q=>q.selected&&(q.draggable||y&&typeof q.draggable>"u")),T=d?g[0]:5,S=d?g[1]:5,O=n.isShiftPressed?4:1,k=n.x*T*O,L=n.y*S*O,H=v.map(q=>{if(q.positionAbsolute){const F={x:q.positionAbsolute.x+k,y:q.positionAbsolute.y+L};d&&(F.x=g[0]*Math.round(F.x/g[0]),F.y=g[1]*Math.round(F.y/g[1]));const{positionAbsolute:B,position:Q}=LS(q,F,r,a,void 0,p);q.position=Q,q.positionAbsolute=B}return q});l(H,!0,!1)},[])}const $o={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Tu=e=>{const t=({id:n,type:r,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:p,onClick:y,onMouseEnter:v,onMouseMove:T,onMouseLeave:S,onContextMenu:O,onDoubleClick:k,style:L,className:H,isDraggable:q,isSelectable:F,isConnectable:B,isFocusable:Q,selectNodesOnDrag:X,sourcePosition:N,targetPosition:A,hidden:R,resizeObserver:M,dragHandle:V,zIndex:U,isParent:C,noDragClassName:P,noPanClassName:it,initialized:D,disableKeyboardA11y:$,ariaLabel:at,rfId:Y,hasHandleBounds:x})=>{const G=Ye(),J=et.useRef(null),rt=et.useRef(null),ct=et.useRef(N),mt=et.useRef(A),pt=et.useRef(r),Rt=F||q||y||v||T||S,bt=zS(),kt=Eu(n,G.getState,v),Pt=Eu(n,G.getState,T),ue=Eu(n,G.getState,S),ce=Eu(n,G.getState,O),ve=Eu(n,G.getState,k),ye=Lt=>{const{nodeDragThreshold:Tt}=G.getState();if(F&&(!X||!q||Tt>0)&&tp({id:n,store:G,nodeRef:J}),y){const Ce=G.getState().nodeInternals.get(n);Ce&&y(Lt,{...Ce})}},he=Lt=>{if(!Xm(Lt)&&!$)if(oS.includes(Lt.key)&&F){const Tt=Lt.key==="Escape";tp({id:n,store:G,unselect:Tt,nodeRef:J})}else q&&p&&Object.prototype.hasOwnProperty.call($o,Lt.key)&&(G.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),bt({x:$o[Lt.key].x,y:$o[Lt.key].y,isShiftPressed:Lt.shiftKey}))};et.useEffect(()=>()=>{rt.current&&(M?.unobserve(rt.current),rt.current=null)},[]),et.useEffect(()=>{if(J.current&&!R){const Lt=J.current;(!D||!x||rt.current!==Lt)&&(rt.current&&M?.unobserve(rt.current),M?.observe(Lt),rt.current=Lt)}},[R,D,x]),et.useEffect(()=>{const Lt=pt.current!==r,Tt=ct.current!==N,Ce=mt.current!==A;J.current&&(Lt||Tt||Ce)&&(Lt&&(pt.current=r),Tt&&(ct.current=N),Ce&&(mt.current=A),G.getState().updateNodeDimensions([{id:n,nodeElement:J.current,forceUpdate:!0}]))},[n,r,N,A]);const Ke=US({nodeRef:J,disabled:R||!q,noDragClassName:P,handleSelector:V,nodeId:n,isSelectable:F,selectNodesOnDrag:X});return R?null:lt.createElement("div",{className:gn(["react-flow__node",`react-flow__node-${r}`,{[it]:q},H,{selected:p,selectable:F,parent:C,dragging:Ke}]),ref:J,style:{zIndex:U,transform:`translate(${d}px,${g}px)`,pointerEvents:Rt?"all":"none",visibility:D?"visible":"hidden",...L},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:kt,onMouseMove:Pt,onMouseLeave:ue,onContextMenu:ce,onClick:ye,onDoubleClick:ve,onKeyDown:Q?he:void 0,tabIndex:Q?0:void 0,role:Q?"button":void 0,"aria-describedby":$?void 0:`${CS}-${Y}`,"aria-label":at},lt.createElement(lN,{value:n},lt.createElement(e,{id:n,data:a,type:r,xPos:l,yPos:c,selected:p,isConnectable:B,sourcePosition:N,targetPosition:A,dragging:Ke,dragHandle:V,zIndex:U})))};return t.displayName="NodeWrapper",et.memo(t)};const KN=e=>{const t=e.getNodes().filter(n=>n.selected);return{...jf(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function XN({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ye(),{width:a,height:l,x:c,y:d,transformString:g,userSelectionActive:p}=me(KN,rn),y=zS(),v=et.useRef(null);if(et.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),US({nodeRef:v}),p||!a||!l)return null;const T=e?O=>{const k=r.getState().getNodes().filter(L=>L.selected);e(O,k)}:void 0,S=O=>{Object.prototype.hasOwnProperty.call($o,O.key)&&y({x:$o[O.key].x,y:$o[O.key].y,isShiftPressed:O.shiftKey})};return lt.createElement("div",{className:gn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},lt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:T,tabIndex:n?void 0:-1,onKeyDown:n?void 0:S,style:{width:a,height:l,top:d,left:c}}))}var QN=et.memo(XN);const ZN=e=>e.nodesSelectionActive,BS=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:p,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:T,selectionMode:S,onSelectionStart:O,onSelectionEnd:k,multiSelectionKeyCode:L,panActivationKeyCode:H,zoomActivationKeyCode:q,elementsSelectable:F,zoomOnScroll:B,zoomOnPinch:Q,panOnScroll:X,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:M,defaultViewport:V,translateExtent:U,minZoom:C,maxZoom:P,preventScrolling:it,onSelectionContextMenu:D,noWheelClassName:$,noPanClassName:at,disableKeyboardA11y:Y})=>{const x=me(ZN),G=Fu(v),J=Fu(H),rt=J||M,ct=J||X,mt=G||T&&rt!==!0;return PN({deleteKeyCode:d,multiSelectionKeyCode:L}),lt.createElement(BN,{onMove:g,onMoveStart:p,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:F,zoomOnScroll:B,zoomOnPinch:Q,panOnScroll:ct,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:!G&&rt,defaultViewport:V,translateExtent:U,minZoom:C,maxZoom:P,zoomActivationKeyCode:q,preventScrolling:it,noWheelClassName:$,noPanClassName:at},lt.createElement(kS,{onSelectionStart:O,onSelectionEnd:k,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:rt,isSelecting:!!mt,selectionMode:S},e,x&&lt.createElement(QN,{onSelectionContextMenu:D,noPanClassName:at,disableKeyboardA11y:Y})))};BS.displayName="FlowRenderer";var WN=et.memo(BS);function JN(e){return me(et.useCallback(n=>e?mS(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function tD(e){const t={input:Tu(e.input||bS),default:Tu(e.default||Jm),output:Tu(e.output||RS),group:Tu(e.group||qp)},n={},r=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Tu(e[l]||Jm),a),n);return{...t,...r}}const eD=({x:e,y:t,width:n,height:r,origin:a})=>!n||!r?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]},nD=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),HS=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:l,onError:c}=me(nD,rn),d=JN(e.onlyRenderVisibleElements),g=et.useRef(),p=et.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const T=v.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));l(T)});return g.current=y,y},[]);return et.useEffect(()=>()=>{g?.current?.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:jp},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",Hr.error003(v)),v="default");const T=e.nodeTypes[v]||e.nodeTypes.default,S=!!(y.draggable||t&&typeof y.draggable>"u"),O=!!(y.selectable||a&&typeof y.selectable>"u"),k=!!(y.connectable||n&&typeof y.connectable>"u"),L=!!(y.focusable||r&&typeof y.focusable>"u"),H=e.nodeExtent?Pp(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,q=H?.x??0,F=H?.y??0,B=eD({x:q,y:F,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return lt.createElement(T,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||St.Bottom,targetPosition:y.targetPosition||St.Top,hidden:y.hidden,xPos:q,yPos:F,xPosOrigin:B.x,yPosOrigin:B.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:S,isSelectable:O,isConnectable:k,isFocusable:L,resizeObserver:p,dragHandle:y.dragHandle,zIndex:y[Ie]?.z??0,isParent:!!y[Ie]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[Ie]?.handleBounds})}))};HS.displayName="NodeRenderer";var iD=et.memo(HS);const rD=(e,t,n)=>n===St.Left?e-t:n===St.Right?e+t:e,sD=(e,t,n)=>n===St.Top?e-t:n===St.Bottom?e+t:e,HE="react-flow__edgeupdater",qE=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:gn([HE,`${HE}-${d}`]),cx:rD(t,r,e),cy:sD(n,r,e),r,stroke:"transparent",fill:"transparent"}),aD=()=>!0;var Po=e=>{const t=({id:n,className:r,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:g,animated:p,label:y,labelStyle:v,labelShowBg:T,labelBgStyle:S,labelBgPadding:O,labelBgBorderRadius:k,style:L,source:H,target:q,sourceX:F,sourceY:B,targetX:Q,targetY:X,sourcePosition:N,targetPosition:A,elementsSelectable:R,hidden:M,sourceHandleId:V,targetHandleId:U,onContextMenu:C,onMouseEnter:P,onMouseMove:it,onMouseLeave:D,reconnectRadius:$,onReconnect:at,onReconnectStart:Y,onReconnectEnd:x,markerEnd:G,markerStart:J,rfId:rt,ariaLabel:ct,isFocusable:mt,isReconnectable:pt,pathOptions:Rt,interactionWidth:bt,disableKeyboardA11y:kt})=>{const Pt=et.useRef(null),[ue,ce]=et.useState(!1),[ve,ye]=et.useState(!1),he=Ye(),Ke=et.useMemo(()=>`url('#${Zm(J,rt)}')`,[J,rt]),Lt=et.useMemo(()=>`url('#${Zm(G,rt)}')`,[G,rt]);if(M)return null;const Tt=Ve=>{const{edges:Xe,addSelectedEdges:Sn,unselectNodesAndEdges:bn,multiSelectionActive:Qe}=he.getState(),sn=Xe.find(An=>An.id===n);sn&&(R&&(he.setState({nodesSelectionActive:!1}),sn.selected&&Qe?(bn({nodes:[],edges:[sn]}),Pt.current?.blur()):Sn([n])),c&&c(Ve,sn))},Ce=vu(n,he.getState,d),mn=vu(n,he.getState,C),Pn=vu(n,he.getState,P),Vi=vu(n,he.getState,it),Ln=vu(n,he.getState,D),wn=(Ve,Xe)=>{if(Ve.button!==0)return;const{edges:Sn,isValidConnection:bn}=he.getState(),Qe=Xe?q:H,sn=(Xe?U:V)||null,An=Xe?"target":"source",ur=bn||aD,cr=Xe,vi=Sn.find(zn=>zn.id===n);ye(!0),Y?.(Ve,vi,An);const Un=zn=>{ye(!1),x?.(zn,vi,An)};ES({event:Ve,handleId:sn,nodeId:Qe,onConnect:zn=>at?.(vi,zn),isTarget:cr,getState:he.getState,setState:he.setState,isValidConnection:ur,edgeUpdaterType:An,onReconnectEnd:Un})},_i=Ve=>wn(Ve,!0),te=Ve=>wn(Ve,!1),Ft=()=>ce(!0),Oe=()=>ce(!1),Ee=!R&&!c,ki=Ve=>{if(!kt&&oS.includes(Ve.key)&&R){const{unselectNodesAndEdges:Xe,addSelectedEdges:Sn,edges:bn}=he.getState();Ve.key==="Escape"?(Pt.current?.blur(),Xe({edges:[bn.find(sn=>sn.id===n)]})):Sn([n])}};return lt.createElement("g",{className:gn(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:g,animated:p,inactive:Ee,updating:ue}]),onClick:Tt,onDoubleClick:Ce,onContextMenu:mn,onMouseEnter:Pn,onMouseMove:Vi,onMouseLeave:Ln,onKeyDown:mt?ki:void 0,tabIndex:mt?0:void 0,role:mt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${H} to ${q}`,"aria-describedby":mt?`${xS}-${rt}`:void 0,ref:Pt},!ve&&lt.createElement(e,{id:n,source:H,target:q,selected:g,animated:p,label:y,labelStyle:v,labelShowBg:T,labelBgStyle:S,labelBgPadding:O,labelBgBorderRadius:k,data:l,style:L,sourceX:F,sourceY:B,targetX:Q,targetY:X,sourcePosition:N,targetPosition:A,sourceHandleId:V,targetHandleId:U,markerStart:Ke,markerEnd:Lt,pathOptions:Rt,interactionWidth:bt}),pt&&lt.createElement(lt.Fragment,null,(pt==="source"||pt===!0)&&lt.createElement(qE,{position:N,centerX:F,centerY:B,radius:$,onMouseDown:_i,onMouseEnter:Ft,onMouseOut:Oe,type:"source"}),(pt==="target"||pt===!0)&&lt.createElement(qE,{position:A,centerX:Q,centerY:X,radius:$,onMouseDown:te,onMouseEnter:Ft,onMouseOut:Oe,type:"target"})))};return t.displayName="EdgeWrapper",et.memo(t)};function oD(e){const t={default:Po(e.default||yf),straight:Po(e.bezier||zp),step:Po(e.step||Up),smoothstep:Po(e.step||Ff),simplebezier:Po(e.simplebezier||Lp)},n={},r=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=Po(e[l]||yf),a),n);return{...t,...r}}function FE(e,t,n=null){const r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case St.Top:return{x:r+l/2,y:a};case St.Right:return{x:r+l,y:a+c/2};case St.Bottom:return{x:r+l/2,y:a+c};case St.Left:return{x:r,y:a+c/2}}}function jE(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const lD=(e,t,n,r,a,l)=>{const c=FE(n,e,t),d=FE(l,r,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function uD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:l,width:c,height:d,transform:g}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+l)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const y=Hu({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,p.x2)-Math.max(y.x,p.x)),T=Math.max(0,Math.min(y.y2,p.y2)-Math.max(y.y,p.y));return Math.ceil(v*T)>0}function GE(e){const t=e?.[Ie]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const cD=[{level:0,isMaxLevel:!0,edges:[]}];function hD(e,t,n=!1){let r=-1;const a=e.reduce((c,d)=>{const g=yi(d.zIndex);let p=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),T=d.selected||y?.selected||v?.selected,S=Math.max(v?.[Ie]?.z||0,y?.[Ie]?.z||0,1e3);p=(g?d.zIndex:0)+(T?S:0)}return c[p]?c[p].push(d):c[p]=[d],r=p>r?p:r,c},{}),l=Object.entries(a).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===r}});return l.length===0?cD:l}function fD(e,t,n){const r=me(et.useCallback(a=>e?a.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&uD({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return hD(r,t,n)}const dD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),gD=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),$E={[pf.Arrow]:dD,[pf.ArrowClosed]:gD};function mD(e){const t=Ye();return et.useMemo(()=>Object.prototype.hasOwnProperty.call($E,e)?$E[e]:(t.getState().onError?.("009",Hr.error009(e)),null),[e])}const pD=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=mD(t);return g?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},lt.createElement(g,{color:n,strokeWidth:c})):null},yD=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Zm(c,t);r.includes(d)||(a.push({id:d,color:c.color||e,...c}),r.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},qS=({defaultColor:e,rfId:t})=>{const n=me(et.useCallback(yD({defaultColor:e,rfId:t}),[e,t]),(r,a)=>!(r.length!==a.length||r.some((l,c)=>l.id!==a[c].id)));return lt.createElement("defs",null,n.map(r=>lt.createElement(pD,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};qS.displayName="MarkerDefinitions";var _D=et.memo(qS);const vD=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),FS=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:p,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:T,onReconnectStart:S,onReconnectEnd:O,reconnectRadius:k,children:L,disableKeyboardA11y:H})=>{const{edgesFocusable:q,edgesUpdatable:F,elementsSelectable:B,width:Q,height:X,connectionMode:N,nodeInternals:A,onError:R}=me(vD,rn),M=fD(t,A,n);return Q?lt.createElement(lt.Fragment,null,M.map(({level:V,edges:U,isMaxLevel:C})=>lt.createElement("svg",{key:V,style:{zIndex:V},width:Q,height:X,className:"react-flow__edges react-flow__container"},C&&lt.createElement(_D,{defaultColor:e,rfId:r}),lt.createElement("g",null,U.map(P=>{const[it,D,$]=GE(A.get(P.source)),[at,Y,x]=GE(A.get(P.target));if(!$||!x)return null;let G=P.type||"default";a[G]||(R?.("011",Hr.error011(G)),G="default");const J=a[G]||a.default,rt=N===Ls.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),ct=jE(D.source,P.sourceHandle),mt=jE(rt,P.targetHandle),pt=ct?.position||St.Bottom,Rt=mt?.position||St.Top,bt=!!(P.focusable||q&&typeof P.focusable>"u"),kt=P.reconnectable||P.updatable,Pt=typeof T<"u"&&(kt||F&&typeof kt>"u");if(!ct||!mt)return R?.("008",Hr.error008(ct,P)),null;const{sourceX:ue,sourceY:ce,targetX:ve,targetY:ye}=lD(it,ct,pt,at,mt,Rt);return lt.createElement(J,{key:P.id,id:P.id,className:gn([P.className,l]),type:G,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:ue,sourceY:ce,targetX:ve,targetY:ye,sourcePosition:pt,targetPosition:Rt,elementsSelectable:B,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:p,onClick:y,onEdgeDoubleClick:v,onReconnect:T,onReconnectStart:S,onReconnectEnd:O,reconnectRadius:k,rfId:r,ariaLabel:P.ariaLabel,isFocusable:bt,isReconnectable:Pt,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:H})})))),L):null};FS.displayName="EdgeRenderer";var ED=et.memo(FS);const TD=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function wD({children:e}){const t=me(TD);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function SD(e){const t=Fp(),n=et.useRef(!1);et.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const bD={[St.Left]:St.Right,[St.Right]:St.Left,[St.Top]:St.Bottom,[St.Bottom]:St.Top},jS=({nodeId:e,handleType:t,style:n,type:r=bs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:g,toY:p,connectionMode:y}=me(et.useCallback(X=>({fromNode:X.nodeInternals.get(e),handleId:X.connectionHandleId,toX:(X.connectionPosition.x-X.transform[0])/X.transform[2],toY:(X.connectionPosition.y-X.transform[1])/X.transform[2],connectionMode:X.connectionMode}),[e]),rn),v=c?.[Ie]?.handleBounds;let T=v?.[t];if(y===Ls.Loose&&(T=T||v?.[t==="source"?"target":"source"]),!c||!T)return null;const S=d?T.find(X=>X.id===d):T[0],O=S?S.x+S.width/2:(c.width??0)/2,k=S?S.y+S.height/2:c.height??0,L=(c.positionAbsolute?.x??0)+O,H=(c.positionAbsolute?.y??0)+k,q=S?.position,F=q?bD[q]:null;if(!q||!F)return null;if(a)return lt.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:S,fromX:L,fromY:H,toX:g,toY:p,fromPosition:q,toPosition:F,connectionStatus:l});let B="";const Q={sourceX:L,sourceY:H,sourcePosition:q,targetX:g,targetY:p,targetPosition:F};return r===bs.Bezier?[B]=fS(Q):r===bs.Step?[B]=Qm({...Q,borderRadius:0}):r===bs.SmoothStep?[B]=Qm(Q):r===bs.SimpleBezier?[B]=hS(Q):B=`M${L},${H} ${g},${p}`,lt.createElement("path",{d:B,fill:"none",className:"react-flow__connection-path",style:n})};jS.displayName="ConnectionLine";const AD=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function RD({containerStyle:e,style:t,type:n,component:r}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:g,connectionStatus:p}=me(AD,rn);return!(a&&l&&d&&c)?null:lt.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:gn(["react-flow__connection",p])},lt.createElement(jS,{nodeId:a,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:p})))}function YE(e,t){return et.useRef(null),Ye(),et.useMemo(()=>t(e),[e])}const GS=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:T,onNodeContextMenu:S,onSelectionContextMenu:O,onSelectionStart:k,onSelectionEnd:L,connectionLineType:H,connectionLineStyle:q,connectionLineComponent:F,connectionLineContainerStyle:B,selectionKeyCode:Q,selectionOnDrag:X,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:M,deleteKeyCode:V,onlyRenderVisibleElements:U,elementsSelectable:C,selectNodesOnDrag:P,defaultViewport:it,translateExtent:D,minZoom:$,maxZoom:at,preventScrolling:Y,defaultMarkerColor:x,zoomOnScroll:G,zoomOnPinch:J,panOnScroll:rt,panOnScrollSpeed:ct,panOnScrollMode:mt,zoomOnDoubleClick:pt,panOnDrag:Rt,onPaneClick:bt,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneScroll:ce,onPaneContextMenu:ve,onEdgeContextMenu:ye,onEdgeMouseEnter:he,onEdgeMouseMove:Ke,onEdgeMouseLeave:Lt,onReconnect:Tt,onReconnectStart:Ce,onReconnectEnd:mn,reconnectRadius:Pn,noDragClassName:Vi,noWheelClassName:Ln,noPanClassName:wn,elevateEdgesOnSelect:_i,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Oe,rfId:Ee})=>{const ki=YE(e,tD),Ve=YE(t,oD);return SD(l),lt.createElement(WN,{onPaneClick:bt,onPaneMouseEnter:kt,onPaneMouseMove:Pt,onPaneMouseLeave:ue,onPaneContextMenu:ve,onPaneScroll:ce,deleteKeyCode:V,selectionKeyCode:Q,selectionOnDrag:X,selectionMode:N,onSelectionStart:k,onSelectionEnd:L,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:M,elementsSelectable:C,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:G,zoomOnPinch:J,zoomOnDoubleClick:pt,panOnScroll:rt,panOnScrollSpeed:ct,panOnScrollMode:mt,panOnDrag:Rt,defaultViewport:it,translateExtent:D,minZoom:$,maxZoom:at,onSelectionContextMenu:O,preventScrolling:Y,noDragClassName:Vi,noWheelClassName:Ln,noPanClassName:wn,disableKeyboardA11y:te},lt.createElement(wD,null,lt.createElement(ED,{edgeTypes:Ve,onEdgeClick:d,onEdgeDoubleClick:p,onlyRenderVisibleElements:U,onEdgeContextMenu:ye,onEdgeMouseEnter:he,onEdgeMouseMove:Ke,onEdgeMouseLeave:Lt,onReconnect:Tt,onReconnectStart:Ce,onReconnectEnd:mn,reconnectRadius:Pn,defaultMarkerColor:x,noPanClassName:wn,elevateEdgesOnSelect:!!_i,disableKeyboardA11y:te,rfId:Ee},lt.createElement(RD,{style:q,type:H,component:F,containerStyle:B})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(iD,{nodeTypes:ki,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:T,onNodeContextMenu:S,selectNodesOnDrag:P,onlyRenderVisibleElements:U,noPanClassName:wn,noDragClassName:Vi,disableKeyboardA11y:te,nodeOrigin:Ft,nodeExtent:Oe,rfId:Ee})))};GS.displayName="GraphView";var ID=et.memo(GS);const ep=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ep,nodeExtent:ep,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ls.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:nN,isValidConnection:void 0},CD=()=>yI((e,t)=>({...vs,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:l}=t();e({nodeInternals:Em(n,r,a,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",l=typeof r<"u",c=a?Em(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:p}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:T}=new window.DOMMatrixReadOnly(v.transform),S=n.reduce((k,L)=>{const H=a.get(L.id);if(H?.hidden)a.set(H.id,{...H,[Ie]:{...H[Ie],handleBounds:void 0}});else if(H){const q=kp(L.nodeElement);!!(q.width&&q.height&&(H.width!==q.width||H.height!==q.height||L.forceUpdate))&&(a.set(H.id,{...H,[Ie]:{...H[Ie],handleBounds:{source:BE(".source",L.nodeElement,T,p),target:BE(".target",L.nodeElement,T,p)}},...q}),k.push({id:H.id,type:"dimensions",dimensions:q}))}return k},[]);DS(a,p);const O=c||l&&!c&&MS(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:O}),S?.length>0&&r?.(S)},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:a};return r&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(l){const p=VS(n,d()),y=Em(p,a,c,g);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>Ss(g,!0)):(c=qo(l(),n),d=qo(a,[])),Lh({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>Ss(g,!0)):(c=qo(a,n),d=qo(l(),[])),Lh({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:l}=t(),c=n||l(),d=r||a,g=c.map(y=>(y.selected=!1,Ss(y.id,!1))),p=d.map(y=>Ss(y.id,!1));Lh({changedNodes:g,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>Ss(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Ss(d.id,!1));Lh({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(a=>{a.positionAbsolute=Pp(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const p=Lr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[a,l]],v=c?.constrain()(p,y,g);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:vs.connectionNodeId,connectionHandleId:vs.connectionHandleId,connectionHandleType:vs.connectionHandleType,connectionStatus:vs.connectionStatus,connectionStartHandle:vs.connectionStartHandle,connectionEndHandle:vs.connectionEndHandle}),reset:()=>e({...vs})}),Object.is),$S=({children:e})=>{const t=et.useRef(null);return t.current||(t.current=CD()),lt.createElement(Xx,{value:t.current},e)};$S.displayName="ReactFlowProvider";const YS=({children:e})=>et.useContext(qf)?lt.createElement(lt.Fragment,null,e):lt.createElement($S,null,e);YS.displayName="ReactFlowWrapper";const xD={input:bS,default:Jm,output:RS,group:qp},ND={default:yf,straight:zp,step:Up,smoothstep:Ff,simplebezier:Lp},DD=[0,0],MD=[15,15],OD={x:0,y:0,zoom:1},VD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},KS=et.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:l=xD,edgeTypes:c=ND,onNodeClick:d,onEdgeClick:g,onInit:p,onMove:y,onMoveStart:v,onMoveEnd:T,onConnect:S,onConnectStart:O,onConnectEnd:k,onClickConnectStart:L,onClickConnectEnd:H,onNodeMouseEnter:q,onNodeMouseMove:F,onNodeMouseLeave:B,onNodeContextMenu:Q,onNodeDoubleClick:X,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:R,onNodesDelete:M,onEdgesDelete:V,onSelectionChange:U,onSelectionDragStart:C,onSelectionDrag:P,onSelectionDragStop:it,onSelectionContextMenu:D,onSelectionStart:$,onSelectionEnd:at,connectionMode:Y=Ls.Strict,connectionLineType:x=bs.Bezier,connectionLineStyle:G,connectionLineComponent:J,connectionLineContainerStyle:rt,deleteKeyCode:ct="Backspace",selectionKeyCode:mt="Shift",selectionOnDrag:pt=!1,selectionMode:Rt=qu.Full,panActivationKeyCode:bt="Space",multiSelectionKeyCode:kt=mf()?"Meta":"Control",zoomActivationKeyCode:Pt=mf()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ce=MD,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:ye=!0,nodesDraggable:he,nodesConnectable:Ke,nodesFocusable:Lt,nodeOrigin:Tt=DD,edgesFocusable:Ce,edgesUpdatable:mn,elementsSelectable:Pn,defaultViewport:Vi=OD,minZoom:Ln=.5,maxZoom:wn=2,translateExtent:_i=ep,preventScrolling:te=!0,nodeExtent:Ft,defaultMarkerColor:Oe="#b1b1b7",zoomOnScroll:Ee=!0,zoomOnPinch:ki=!0,panOnScroll:Ve=!1,panOnScrollSpeed:Xe=.5,panOnScrollMode:Sn=Aa.Free,zoomOnDoubleClick:bn=!0,panOnDrag:Qe=!0,onPaneClick:sn,onPaneMouseEnter:An,onPaneMouseMove:ur,onPaneMouseLeave:cr,onPaneScroll:vi,onPaneContextMenu:Un,children:Zn,onEdgeContextMenu:zn,onEdgeDoubleClick:Wn,onEdgeMouseEnter:$s,onEdgeMouseMove:Pi,onEdgeMouseLeave:Yr,onEdgeUpdate:Li,onEdgeUpdateStart:qa,onEdgeUpdateEnd:de,onReconnect:xe,onReconnectStart:be,onReconnectEnd:Nn,reconnectRadius:Ys=10,edgeUpdaterRadius:pl=10,onNodesChange:Ui,onEdgesChange:Fa,noDragClassName:hr="nodrag",noWheelClassName:zi="nowheel",noPanClassName:Jn="nopan",fitView:ti=!1,fitViewOptions:ei,connectOnClick:an=!0,attributionPosition:Te,proOptions:Ks,defaultEdgeOptions:Kr,elevateNodesOnSelect:Bn=!0,elevateEdgesOnSelect:Ei=!1,disableKeyboardA11y:Xs=!1,autoPanOnConnect:ja=!0,autoPanOnNodeDrag:fr=!0,connectionRadius:Ga=20,isValidConnection:Bi,onError:ni,style:Be,id:Hi,nodeDragThreshold:$a,...Ti},Xr)=>{const qi=Hi||"1";return lt.createElement("div",{...Ti,style:{...Be,...VD},ref:Xr,className:gn(["react-flow",a]),"data-testid":"rf__wrapper",id:Hi},lt.createElement(YS,null,lt.createElement(ID,{onInit:p,onMove:y,onMoveStart:v,onMoveEnd:T,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:q,onNodeMouseMove:F,onNodeMouseLeave:B,onNodeContextMenu:Q,onNodeDoubleClick:X,nodeTypes:l,edgeTypes:c,connectionLineType:x,connectionLineStyle:G,connectionLineComponent:J,connectionLineContainerStyle:rt,selectionKeyCode:mt,selectionOnDrag:pt,selectionMode:Rt,deleteKeyCode:ct,multiSelectionKeyCode:kt,panActivationKeyCode:bt,zoomActivationKeyCode:Pt,onlyRenderVisibleElements:ve,selectNodesOnDrag:ye,defaultViewport:Vi,translateExtent:_i,minZoom:Ln,maxZoom:wn,preventScrolling:te,zoomOnScroll:Ee,zoomOnPinch:ki,zoomOnDoubleClick:bn,panOnScroll:Ve,panOnScrollSpeed:Xe,panOnScrollMode:Sn,panOnDrag:Qe,onPaneClick:sn,onPaneMouseEnter:An,onPaneMouseMove:ur,onPaneMouseLeave:cr,onPaneScroll:vi,onPaneContextMenu:Un,onSelectionContextMenu:D,onSelectionStart:$,onSelectionEnd:at,onEdgeContextMenu:zn,onEdgeDoubleClick:Wn,onEdgeMouseEnter:$s,onEdgeMouseMove:Pi,onEdgeMouseLeave:Yr,onReconnect:xe??Li,onReconnectStart:be??qa,onReconnectEnd:Nn??de,reconnectRadius:Ys??pl,defaultMarkerColor:Oe,noDragClassName:hr,noWheelClassName:zi,noPanClassName:Jn,elevateEdgesOnSelect:Ei,rfId:qi,disableKeyboardA11y:Xs,nodeOrigin:Tt,nodeExtent:Ft}),lt.createElement(bN,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:S,onConnectStart:O,onConnectEnd:k,onClickConnectStart:L,onClickConnectEnd:H,nodesDraggable:he,nodesConnectable:Ke,nodesFocusable:Lt,edgesFocusable:Ce,edgesUpdatable:mn,elementsSelectable:Pn,elevateNodesOnSelect:Bn,minZoom:Ln,maxZoom:wn,nodeExtent:Ft,onNodesChange:Ui,onEdgesChange:Fa,snapToGrid:ue,snapGrid:ce,connectionMode:Y,translateExtent:_i,connectOnClick:an,defaultEdgeOptions:Kr,fitView:ti,fitViewOptions:ei,onNodesDelete:M,onEdgesDelete:V,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:R,onSelectionDrag:P,onSelectionDragStart:C,onSelectionDragStop:it,noPanClassName:Jn,nodeOrigin:Tt,rfId:qi,autoPanOnConnect:ja,autoPanOnNodeDrag:fr,onError:ni,connectionRadius:Ga,isValidConnection:Bi,nodeDragThreshold:$a}),lt.createElement(wN,{onSelectionChange:U}),Zn,lt.createElement(Zx,{proOptions:Ks,position:Te}),lt.createElement(xN,{rfId:qi,disableKeyboardA11y:Xs})))});KS.displayName="ReactFlow";function XS(e){return t=>{const[n,r]=et.useState(t),a=et.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,a]}}const kD=XS(VS),PD=XS(FN),QS=({id:e,x:t,y:n,width:r,height:a,style:l,color:c,strokeColor:d,strokeWidth:g,className:p,borderRadius:y,shapeRendering:v,onClick:T,selected:S})=>{const{background:O,backgroundColor:k}=l||{},L=c||O||k;return lt.createElement("rect",{className:gn(["react-flow__minimap-node",{selected:S},p]),x:t,y:n,rx:y,ry:y,width:r,height:a,fill:L,stroke:d,strokeWidth:g,shapeRendering:v,onClick:T?H=>T(H,e):void 0})};QS.displayName="MiniMapNode";var LD=et.memo(QS);const UD=e=>e.nodeOrigin,zD=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),bm=e=>e instanceof Function?e:()=>e;function BD({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a=2,nodeComponent:l=LD,onClick:c}){const d=me(zD,rn),g=me(UD),p=bm(t),y=bm(e),v=bm(n),T=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return lt.createElement(lt.Fragment,null,d.map(S=>{const{x:O,y:k}=Ca(S,g).positionAbsolute;return lt.createElement(l,{key:S.id,x:O,y:k,width:S.width,height:S.height,style:S.style,selected:S.selected,className:v(S),color:p(S),borderRadius:r,strokeColor:y(S),strokeWidth:a,shapeRendering:T,onClick:c,id:S.id})}))}var HD=et.memo(BD);const qD=200,FD=150,jD=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?tN(jf(t,e.nodeOrigin),n):n,rfId:e.rfId}},GD="react-flow__minimap-desc";function ZS({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c=2,nodeComponent:d,maskColor:g="rgb(240, 240, 240, 0.6)",maskStrokeColor:p="none",maskStrokeWidth:y=1,position:v="bottom-right",onClick:T,onNodeClick:S,pannable:O=!1,zoomable:k=!1,ariaLabel:L="React Flow mini map",inversePan:H=!1,zoomStep:q=10,offsetScale:F=5}){const B=Ye(),Q=et.useRef(null),{boundingRect:X,viewBB:N,rfId:A}=me(jD,rn),R=e?.width??qD,M=e?.height??FD,V=X.width/R,U=X.height/M,C=Math.max(V,U),P=C*R,it=C*M,D=F*C,$=X.x-(P-X.width)/2-D,at=X.y-(it-X.height)/2-D,Y=P+D*2,x=it+D*2,G=`${GD}-${A}`,J=et.useRef(0);J.current=C,et.useEffect(()=>{if(Q.current){const mt=gi(Q.current),pt=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce}=B.getState();if(kt.sourceEvent.type!=="wheel"||!ue||!ce)return;const ve=-kt.sourceEvent.deltaY*(kt.sourceEvent.deltaMode===1?.05:kt.sourceEvent.deltaMode?1:.002)*q,ye=Pt[2]*Math.pow(2,ve);ce.scaleTo(ue,ye)},Rt=kt=>{const{transform:Pt,d3Selection:ue,d3Zoom:ce,translateExtent:ve,width:ye,height:he}=B.getState();if(kt.sourceEvent.type!=="mousemove"||!ue||!ce)return;const Ke=J.current*Math.max(1,Pt[2])*(H?-1:1),Lt={x:Pt[0]-kt.sourceEvent.movementX*Ke,y:Pt[1]-kt.sourceEvent.movementY*Ke},Tt=[[0,0],[ye,he]],Ce=Lr.translate(Lt.x,Lt.y).scale(Pt[2]),mn=ce.constrain()(Ce,Tt,ve);ce.transform(ue,mn)},bt=eS().on("zoom",O?Rt:null).on("zoom.wheel",k?pt:null);return mt.call(bt),()=>{mt.on("zoom",null)}}},[O,k,H,q]);const rt=T?mt=>{const pt=Ri(mt);T(mt,{x:pt[0],y:pt[1]})}:void 0,ct=S?(mt,pt)=>{const Rt=B.getState().nodeInternals.get(pt);S(mt,Rt)}:void 0;return lt.createElement(Vp,{position:v,style:e,className:gn(["react-flow__minimap",t]),"data-testid":"rf__minimap"},lt.createElement("svg",{width:R,height:M,viewBox:`${$} ${at} ${Y} ${x}`,role:"img","aria-labelledby":G,ref:Q,onClick:rt},L&&lt.createElement("title",{id:G},L),lt.createElement(HD,{onClick:ct,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:d}),lt.createElement("path",{className:"react-flow__minimap-mask",d:`M${$-D},${at-D}h${Y+D*2}v${x+D*2}h${-Y-D*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fill:g,fillRule:"evenodd",stroke:p,strokeWidth:y,pointerEvents:"none"})))}ZS.displayName="MiniMap";var $D=et.memo(ZS);function YD(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function KD(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function XD(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function QD(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function ZD(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const bu=({children:e,className:t,...n})=>lt.createElement("button",{type:"button",className:gn(["react-flow__controls-button",t]),...n},e);bu.displayName="ControlButton";const WD=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),WS=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:g,className:p,children:y,position:v="bottom-left"})=>{const T=Ye(),[S,O]=et.useState(!1),{isInteractive:k,minZoomReached:L,maxZoomReached:H}=me(WD,rn),{zoomIn:q,zoomOut:F,fitView:B}=Fp();if(et.useEffect(()=>{O(!0)},[]),!S)return null;const Q=()=>{q(),l?.()},X=()=>{F(),c?.()},N=()=>{B(a),d?.()},A=()=>{T.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),g?.(!k)};return lt.createElement(Vp,{className:gn(["react-flow__controls",p]),position:v,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(bu,{onClick:Q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:H},lt.createElement(YD,null)),lt.createElement(bu,{onClick:X,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:L},lt.createElement(KD,null))),n&&lt.createElement(bu,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view"},lt.createElement(XD,null)),r&&lt.createElement(bu,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},k?lt.createElement(ZD,null):lt.createElement(QD,null)),y)};WS.displayName="Controls";var JD=et.memo(WS),Ni;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ni||(Ni={}));function tM({color:e,dimensions:t,lineWidth:n}){return lt.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function eM({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const nM={[Ni.Dots]:"#91919a",[Ni.Lines]:"#eee",[Ni.Cross]:"#e2e2e2"},iM={[Ni.Dots]:1,[Ni.Lines]:1,[Ni.Cross]:6},rM=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function JS({id:e,variant:t=Ni.Dots,gap:n=20,size:r,lineWidth:a=1,offset:l=2,color:c,style:d,className:g}){const p=et.useRef(null),{transform:y,patternId:v}=me(rM,rn),T=c||nM[t],S=r||iM[t],O=t===Ni.Dots,k=t===Ni.Cross,L=Array.isArray(n)?n:[n,n],H=[L[0]*y[2]||1,L[1]*y[2]||1],q=S*y[2],F=k?[q,q]:H,B=O?[q/l,q/l]:[F[0]/l,F[1]/l];return lt.createElement("svg",{className:gn(["react-flow__background",g]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},lt.createElement("pattern",{id:v+e,x:y[0]%H[0],y:y[1]%H[1],width:H[0],height:H[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${B[0]},-${B[1]})`},O?lt.createElement(eM,{color:T,radius:q/l}):lt.createElement(tM,{dimensions:F,color:T,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}JS.displayName="Background";var sM=et.memo(JS);const aM=()=>{};var KE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},oM=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},e1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,g=a+2<e.length,p=g?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let T=(d&15)<<2|p>>6,S=p&63;g||(S=64,c||(T=64)),r.push(n[y],n[v],n[T],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(t1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):oM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const p=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||p==null||v==null)throw new lM;const T=l<<2|d>>4;if(r.push(T),p!==64){const S=d<<4&240|p>>2;if(r.push(S),v!==64){const O=p<<6&192|v;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class lM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uM=function(e){const t=t1(e);return e1.encodeByteArray(t,!0)},_f=function(e){return uM(e).replace(/\./g,"")},n1=function(e){try{return e1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=()=>cM().__FIREBASE_DEFAULTS__,fM=()=>{if(typeof process>"u"||typeof KE>"u")return;const e=KE.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},dM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&n1(e[1]);return t&&JSON.parse(t)},Gf=()=>{try{return aM()||hM()||fM()||dM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},i1=e=>{var t,n;return(n=(t=Gf())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},gM=e=>{const t=i1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},r1=()=>{var e;return(e=Gf())===null||e===void 0?void 0:e.config},s1=e=>{var t;return(t=Gf())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(e){return e.endsWith(".cloudworkstations.dev")}async function a1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_f(JSON.stringify(n)),_f(JSON.stringify(c)),""].join(".")}const Nu={};function yM(){const e={prod:[],emulator:[]};for(const t of Object.keys(Nu))Nu[t]?e.emulator.push(t):e.prod.push(t);return e}function _M(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let XE=!1;function o1(e,t){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||Nu[e]===t||Nu[e]||XE)return;Nu[e]=t;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=yM().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{XE=!0,c()},T}function y(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=_M(r),S=n("text"),O=document.getElementById(S)||document.createElement("span"),k=n("learnmore"),L=document.getElementById(k)||document.createElement("a"),H=n("preprendIcon"),q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;d(F),y(L,k);const B=p();g(q,H),F.append(q,O,L,B),document.body.appendChild(F)}l?(O.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function EM(){var e;const t=(e=Gf())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wM(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function SM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bM(){const e=Tn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function AM(){return!EM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RM(){try{return typeof indexedDB=="object"}catch{return!1}}function IM(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="FirebaseError";class $r extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=CM,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?xM(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new $r(a,d,r)}}function xM(e,t){return e.replace(NM,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const NM=/\{\$([^}]+)}/g;function DM(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Da(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(QE(l)&&QE(c)){if(!Da(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function QE(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Au(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Ru(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function MM(e,t){const n=new OM(e,t);return n.subscribe.bind(n)}class OM{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VM(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=Am),a.error===void 0&&(a.error=Am),a.complete===void 0&&(a.complete=Am);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VM(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Am(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(e){return e&&e._delegate?e._delegate:e}class Ma{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new mM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LM(t))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Sa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Sa){return this.instances.has(t)}getOptions(t=Sa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PM(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Sa){return this.component?this.component.multipleInstances?t:Sa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PM(e){return e===Sa?void 0:e}function LM(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kM(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})($t||($t={}));const zM={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},BM=$t.INFO,HM={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},qM=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=HM[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Gp{constructor(t){this.name=t,this._logLevel=BM,this._logHandler=qM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?zM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const FM=(e,t)=>t.some(n=>e instanceof n);let ZE,WE;function jM(){return ZE||(ZE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GM(){return WE||(WE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l1=new WeakMap,np=new WeakMap,u1=new WeakMap,Rm=new WeakMap,$p=new WeakMap;function $M(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Ds(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&l1.set(n,e)}).catch(()=>{}),$p.set(t,e),t}function YM(e){if(np.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});np.set(e,t)}let ip={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return np.get(e);if(t==="objectStoreNames")return e.objectStoreNames||u1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ds(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function KM(e){ip=e(ip)}function XM(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Im(this),t,...n);return u1.set(r,t.sort?t.sort():[t]),Ds(r)}:GM().includes(e)?function(...t){return e.apply(Im(this),t),Ds(l1.get(this))}:function(...t){return Ds(e.apply(Im(this),t))}}function QM(e){return typeof e=="function"?XM(e):(e instanceof IDBTransaction&&YM(e),FM(e,jM())?new Proxy(e,ip):e)}function Ds(e){if(e instanceof IDBRequest)return $M(e);if(Rm.has(e))return Rm.get(e);const t=QM(e);return t!==e&&(Rm.set(e,t),$p.set(t,e)),t}const Im=e=>$p.get(e);function ZM(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=Ds(c);return r&&c.addEventListener("upgradeneeded",g=>{r(Ds(c.result),g.oldVersion,g.newVersion,Ds(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const WM=["get","getKey","getAll","getAllKeys","count"],JM=["put","add","delete","clear"],Cm=new Map;function JE(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Cm.get(t))return Cm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=JM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||WM.includes(n)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),a&&g.done]))[0]};return Cm.set(t,l),l}KM(e=>({...e,get:(t,n,r)=>JE(t,n)||e.get(t,n,r),has:(t,n)=>!!JE(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eO(e){const t=e.getComponent();return t?.type==="VERSION"}const rp="@firebase/app",tT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Gp("@firebase/app"),nO="@firebase/app-compat",iO="@firebase/analytics-compat",rO="@firebase/analytics",sO="@firebase/app-check-compat",aO="@firebase/app-check",oO="@firebase/auth",lO="@firebase/auth-compat",uO="@firebase/database",cO="@firebase/data-connect",hO="@firebase/database-compat",fO="@firebase/functions",dO="@firebase/functions-compat",gO="@firebase/installations",mO="@firebase/installations-compat",pO="@firebase/messaging",yO="@firebase/messaging-compat",_O="@firebase/performance",vO="@firebase/performance-compat",EO="@firebase/remote-config",TO="@firebase/remote-config-compat",wO="@firebase/storage",SO="@firebase/storage-compat",bO="@firebase/firestore",AO="@firebase/ai",RO="@firebase/firestore-compat",IO="firebase",CO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",xO={[rp]:"fire-core",[nO]:"fire-core-compat",[rO]:"fire-analytics",[iO]:"fire-analytics-compat",[aO]:"fire-app-check",[sO]:"fire-app-check-compat",[oO]:"fire-auth",[lO]:"fire-auth-compat",[uO]:"fire-rtdb",[cO]:"fire-data-connect",[hO]:"fire-rtdb-compat",[fO]:"fire-fn",[dO]:"fire-fn-compat",[gO]:"fire-iid",[mO]:"fire-iid-compat",[pO]:"fire-fcm",[yO]:"fire-fcm-compat",[_O]:"fire-perf",[vO]:"fire-perf-compat",[EO]:"fire-rc",[TO]:"fire-rc-compat",[wO]:"fire-gcs",[SO]:"fire-gcs-compat",[bO]:"fire-fst",[RO]:"fire-fst-compat",[AO]:"fire-vertex","fire-js":"fire-js",[IO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new Map,NO=new Map,ap=new Map;function eT(e,t){try{e.container.addComponent(t)}catch(n){qr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function tl(e){const t=e.name;if(ap.has(t))return qr.debug(`There were multiple attempts to register component ${t}.`),!1;ap.set(t,e);for(const n of vf.values())eT(n,e);for(const n of NO.values())eT(n,e);return!0}function Yp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mi(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new rc("app","Firebase",DO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=CO;function c1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:sp,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Ms.create("bad-app-name",{appName:String(a)});if(n||(n=r1()),!n)throw Ms.create("no-options");const l=vf.get(a);if(l){if(Da(n,l.options)&&Da(r,l.config))return l;throw Ms.create("duplicate-app",{appName:a})}const c=new UM(a);for(const g of ap.values())c.addComponent(g);const d=new MO(n,r,c);return vf.set(a,d),d}function h1(e=sp){const t=vf.get(e);if(!t&&e===sp&&r1())return c1();if(!t)throw Ms.create("no-app",{appName:e});return t}function Os(e,t,n){var r;let a=(r=xO[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),qr.warn(d.join(" "));return}tl(new Ma(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="firebase-heartbeat-database",VO=1,ju="firebase-heartbeat-store";let xm=null;function f1(){return xm||(xm=ZM(OO,VO,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ms.create("idb-open",{originalErrorMessage:e.message})})),xm}async function kO(e){try{const n=(await f1()).transaction(ju),r=await n.objectStore(ju).get(d1(e));return await n.done,r}catch(t){if(t instanceof $r)qr.warn(t.message);else{const n=Ms.create("idb-get",{originalErrorMessage:t?.message});qr.warn(n.message)}}}async function nT(e,t){try{const r=(await f1()).transaction(ju,"readwrite");await r.objectStore(ju).put(t,d1(e)),await r.done}catch(n){if(n instanceof $r)qr.warn(n.message);else{const r=Ms.create("idb-set",{originalErrorMessage:n?.message});qr.warn(r.message)}}}function d1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=1024,LO=30;class UO{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=iT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>LO){const c=HO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iT(),{heartbeatsToSend:r,unsentEntries:a}=zO(this._heartbeatsCache.heartbeats),l=_f(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return qr.warn(n),""}}}function iT(){return new Date().toISOString().substring(0,10)}function zO(e,t=PO){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),rT(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),rT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BO{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RM()?IM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return nT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return nT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function rT(e){return _f(JSON.stringify({version:2,heartbeats:e})).length}function HO(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(e){tl(new Ma("platform-logger",t=>new tO(t),"PRIVATE")),tl(new Ma("heartbeat",t=>new UO(t),"PRIVATE")),Os(rp,tT,e),Os(rp,tT,"esm2017"),Os("fire-js","")}qO("");var FO="firebase",jO="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(FO,jO,"app");var sT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,g1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,A){function R(){}R.prototype=A.prototype,N.D=A.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(M,V,U){for(var C=Array(arguments.length-2),P=2;P<arguments.length;P++)C[P-2]=arguments[P];return A.prototype[V].apply(M,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,A,R){R||(R=0);var M=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)M[V]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(V=0;16>V;++V)M[V]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=N.g[0],R=N.g[1],V=N.g[2];var U=N.g[3],C=A+(U^R&(V^U))+M[0]+3614090360&4294967295;A=R+(C<<7&4294967295|C>>>25),C=U+(V^A&(R^V))+M[1]+3905402710&4294967295,U=A+(C<<12&4294967295|C>>>20),C=V+(R^U&(A^R))+M[2]+606105819&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(A^V&(U^A))+M[3]+3250441966&4294967295,R=V+(C<<22&4294967295|C>>>10),C=A+(U^R&(V^U))+M[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=U+(V^A&(R^V))+M[5]+1200080426&4294967295,U=A+(C<<12&4294967295|C>>>20),C=V+(R^U&(A^R))+M[6]+2821735955&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(A^V&(U^A))+M[7]+4249261313&4294967295,R=V+(C<<22&4294967295|C>>>10),C=A+(U^R&(V^U))+M[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=U+(V^A&(R^V))+M[9]+2336552879&4294967295,U=A+(C<<12&4294967295|C>>>20),C=V+(R^U&(A^R))+M[10]+4294925233&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(A^V&(U^A))+M[11]+2304563134&4294967295,R=V+(C<<22&4294967295|C>>>10),C=A+(U^R&(V^U))+M[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=U+(V^A&(R^V))+M[13]+4254626195&4294967295,U=A+(C<<12&4294967295|C>>>20),C=V+(R^U&(A^R))+M[14]+2792965006&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(A^V&(U^A))+M[15]+1236535329&4294967295,R=V+(C<<22&4294967295|C>>>10),C=A+(V^U&(R^V))+M[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(A^R))+M[6]+3225465664&4294967295,U=A+(C<<9&4294967295|C>>>23),C=V+(A^R&(U^A))+M[11]+643717713&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(V^U))+M[0]+3921069994&4294967295,R=V+(C<<20&4294967295|C>>>12),C=A+(V^U&(R^V))+M[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(A^R))+M[10]+38016083&4294967295,U=A+(C<<9&4294967295|C>>>23),C=V+(A^R&(U^A))+M[15]+3634488961&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(V^U))+M[4]+3889429448&4294967295,R=V+(C<<20&4294967295|C>>>12),C=A+(V^U&(R^V))+M[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(A^R))+M[14]+3275163606&4294967295,U=A+(C<<9&4294967295|C>>>23),C=V+(A^R&(U^A))+M[3]+4107603335&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(V^U))+M[8]+1163531501&4294967295,R=V+(C<<20&4294967295|C>>>12),C=A+(V^U&(R^V))+M[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(A^R))+M[2]+4243563512&4294967295,U=A+(C<<9&4294967295|C>>>23),C=V+(A^R&(U^A))+M[7]+1735328473&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^A&(V^U))+M[12]+2368359562&4294967295,R=V+(C<<20&4294967295|C>>>12),C=A+(R^V^U)+M[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^V)+M[8]+2272392833&4294967295,U=A+(C<<11&4294967295|C>>>21),C=V+(U^A^R)+M[11]+1839030562&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^A)+M[14]+4259657740&4294967295,R=V+(C<<23&4294967295|C>>>9),C=A+(R^V^U)+M[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^V)+M[4]+1272893353&4294967295,U=A+(C<<11&4294967295|C>>>21),C=V+(U^A^R)+M[7]+4139469664&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^A)+M[10]+3200236656&4294967295,R=V+(C<<23&4294967295|C>>>9),C=A+(R^V^U)+M[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^V)+M[0]+3936430074&4294967295,U=A+(C<<11&4294967295|C>>>21),C=V+(U^A^R)+M[3]+3572445317&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^A)+M[6]+76029189&4294967295,R=V+(C<<23&4294967295|C>>>9),C=A+(R^V^U)+M[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=U+(A^R^V)+M[12]+3873151461&4294967295,U=A+(C<<11&4294967295|C>>>21),C=V+(U^A^R)+M[15]+530742520&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^A)+M[2]+3299628645&4294967295,R=V+(C<<23&4294967295|C>>>9),C=A+(V^(R|~U))+M[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~V))+M[7]+1126891415&4294967295,U=A+(C<<10&4294967295|C>>>22),C=V+(A^(U|~R))+M[14]+2878612391&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~A))+M[5]+4237533241&4294967295,R=V+(C<<21&4294967295|C>>>11),C=A+(V^(R|~U))+M[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~V))+M[3]+2399980690&4294967295,U=A+(C<<10&4294967295|C>>>22),C=V+(A^(U|~R))+M[10]+4293915773&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~A))+M[1]+2240044497&4294967295,R=V+(C<<21&4294967295|C>>>11),C=A+(V^(R|~U))+M[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~V))+M[15]+4264355552&4294967295,U=A+(C<<10&4294967295|C>>>22),C=V+(A^(U|~R))+M[6]+2734768916&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~A))+M[13]+1309151649&4294967295,R=V+(C<<21&4294967295|C>>>11),C=A+(V^(R|~U))+M[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=U+(R^(A|~V))+M[11]+3174756917&4294967295,U=A+(C<<10&4294967295|C>>>22),C=V+(A^(U|~R))+M[2]+718787259&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~A))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+U&4294967295}r.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var R=A-this.blockSize,M=this.B,V=this.h,U=0;U<A;){if(V==0)for(;U<=R;)a(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<A;)if(M[V++]=N.charCodeAt(U++),V==this.blockSize){a(this,M),V=0;break}}else for(;U<A;)if(M[V++]=N[U++],V==this.blockSize){a(this,M),V=0;break}}this.h=V,this.o+=A},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var R=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=R&255,R/=256;for(this.u(N),N=Array(16),A=R=0;4>A;++A)for(var M=0;32>M;M+=8)N[R++]=this.g[A]>>>M&255;return N};function l(N,A){var R=d;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=A(N)}function c(N,A){this.h=A;for(var R=[],M=!0,V=N.length-1;0<=V;V--){var U=N[V]|0;M&&U==A||(R[V]=U,M=!1)}this.g=R}var d={};function g(N){return-128<=N&&128>N?l(N,function(A){return new c([A|0],0>A?-1:0)}):new c([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return L(p(-N));for(var A=[],R=1,M=0;N>=R;M++)A[M]=N/R|0,R*=4294967296;return new c(A,0)}function y(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return L(y(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(A,8)),M=v,V=0;V<N.length;V+=8){var U=Math.min(8,N.length-V),C=parseInt(N.substring(V,V+U),A);8>U?(U=p(Math.pow(A,U)),M=M.j(U).add(p(C))):(M=M.j(R),M=M.add(p(C)))}return M}var v=g(0),T=g(1),S=g(16777216);e=c.prototype,e.m=function(){if(k(this))return-L(this).m();for(var N=0,A=1,R=0;R<this.g.length;R++){var M=this.i(R);N+=(0<=M?M:4294967296+M)*A,A*=4294967296}return N},e.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(k(this))return"-"+L(this).toString(N);for(var A=p(Math.pow(N,6)),R=this,M="";;){var V=B(R,A).g;R=H(R,V.j(A));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=V,O(R))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},e.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function k(N){return N.h==-1}e.l=function(N){return N=H(this,N),k(N)?-1:O(N)?0:1};function L(N){for(var A=N.g.length,R=[],M=0;M<A;M++)R[M]=~N.g[M];return new c(R,~N.h).add(T)}e.abs=function(){return k(this)?L(this):this},e.add=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0,V=0;V<=A;V++){var U=M+(this.i(V)&65535)+(N.i(V)&65535),C=(U>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);M=C>>>16,U&=65535,C&=65535,R[V]=C<<16|U}return new c(R,R[R.length-1]&-2147483648?-1:0)};function H(N,A){return N.add(L(A))}e.j=function(N){if(O(this)||O(N))return v;if(k(this))return k(N)?L(this).j(L(N)):L(L(this).j(N));if(k(N))return L(this.j(L(N)));if(0>this.l(S)&&0>N.l(S))return p(this.m()*N.m());for(var A=this.g.length+N.g.length,R=[],M=0;M<2*A;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<N.g.length;V++){var U=this.i(M)>>>16,C=this.i(M)&65535,P=N.i(V)>>>16,it=N.i(V)&65535;R[2*M+2*V]+=C*it,q(R,2*M+2*V),R[2*M+2*V+1]+=U*it,q(R,2*M+2*V+1),R[2*M+2*V+1]+=C*P,q(R,2*M+2*V+1),R[2*M+2*V+2]+=U*P,q(R,2*M+2*V+2)}for(M=0;M<A;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=A;M<2*A;M++)R[M]=0;return new c(R,0)};function q(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function F(N,A){this.g=N,this.h=A}function B(N,A){if(O(A))throw Error("division by zero");if(O(N))return new F(v,v);if(k(N))return A=B(L(N),A),new F(L(A.g),L(A.h));if(k(A))return A=B(N,L(A)),new F(L(A.g),A.h);if(30<N.g.length){if(k(N)||k(A))throw Error("slowDivide_ only works with positive integers.");for(var R=T,M=A;0>=M.l(N);)R=Q(R),M=Q(M);var V=X(R,1),U=X(M,1);for(M=X(M,2),R=X(R,2);!O(M);){var C=U.add(M);0>=C.l(N)&&(V=V.add(R),U=C),M=X(M,1),R=X(R,1)}return A=H(N,V.j(A)),new F(V,A)}for(V=v;0<=N.l(A);){for(R=Math.max(1,Math.floor(N.m()/A.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=p(R),C=U.j(A);k(C)||0<C.l(N);)R-=M,U=p(R),C=U.j(A);O(U)&&(U=T),V=V.add(U),N=H(N,C)}return new F(V,N)}e.A=function(N){return B(this,N).h},e.and=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0;M<A;M++)R[M]=this.i(M)&N.i(M);return new c(R,this.h&N.h)},e.or=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0;M<A;M++)R[M]=this.i(M)|N.i(M);return new c(R,this.h|N.h)},e.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],M=0;M<A;M++)R[M]=this.i(M)^N.i(M);return new c(R,this.h^N.h)};function Q(N){for(var A=N.g.length+1,R=[],M=0;M<A;M++)R[M]=N.i(M)<<1|N.i(M-1)>>>31;return new c(R,N.h)}function X(N,A){var R=A>>5;A%=32;for(var M=N.g.length-R,V=[],U=0;U<M;U++)V[U]=0<A?N.i(U+R)>>>A|N.i(U+R+1)<<32-A:N.i(U+R);return new c(V,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,g1=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Vs=c}).apply(typeof sT<"u"?sT:typeof self<"u"?self:typeof window<"u"?window:{});var zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m1,Iu,p1,Wh,op,y1,_1,v1;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zh=="object"&&zh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function a(h,_){if(_)t:{var E=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var Z=h[I];if(!(Z in E))break t;E=E[Z]}h=h[h.length-1],I=E[h],_=_(I),_!=I&&_!=null&&t(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,I=!1,Z={next:function(){if(!I&&E<h.length){var ot=E++;return{value:_(ot,h[ot]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,I),h.apply(_,Z)}}return function(){return h.apply(_,arguments)}}function T(h,_,E){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,T.apply(null,arguments)}function S(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function O(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(I,Z,ot){for(var yt=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)yt[Kt-2]=arguments[Kt];return _.prototype[Z].apply(I,yt)}}function k(h){const _=h.length;if(0<_){const E=Array(_);for(let I=0;I<_;I++)E[I]=h[I];return E}return[]}function L(h,_){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(g(I)){const Z=h.length||0,ot=I.length||0;h.length=Z+ot;for(let yt=0;yt<ot;yt++)h[Z+yt]=I[yt]}else h.push(I)}}class H{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function B(h){return B[" "](h),h}B[" "]=function(){};var Q=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function X(h,_,E){for(const I in h)_.call(E,h[I],I,h)}function N(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function A(h){const _={};for(const E in h)_[E]=h[E];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,_){let E,I;for(let Z=1;Z<arguments.length;Z++){I=arguments[Z];for(E in I)h[E]=I[E];for(let ot=0;ot<R.length;ot++)E=R[ot],Object.prototype.hasOwnProperty.call(I,E)&&(h[E]=I[E])}}function V(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function U(h){d.setTimeout(()=>{throw h},0)}function C(){var h=Y;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class P{constructor(){this.h=this.g=null}add(_,E){const I=it.get();I.set(_,E),this.h?this.h.next=I:this.g=I,this.h=I}}var it=new H(()=>new D,h=>h.reset());class D{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,at=!1,Y=new P,x=()=>{const h=d.Promise.resolve(void 0);$=()=>{h.then(G)}};var G=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(E){U(E)}var _=it;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}at=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h}();function mt(h,_){if(rt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Q){t:{try{B(_.nodeName);var Z=!0;break t}catch{}Z=!1}Z||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:pt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&mt.aa.h.call(this)}}O(mt,rt);var pt={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Rt="closure_listenable_"+(1e6*Math.random()|0),bt=0;function kt(h,_,E,I,Z){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!I,this.ha=Z,this.key=++bt,this.da=this.fa=!1}function Pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,_,E,I,Z){var ot=h.toString();h=this.g[ot],h||(h=this.g[ot]=[],this.h++);var yt=ve(h,_,I,Z);return-1<yt?(_=h[yt],E||(_.fa=!1)):(_=new kt(_,this.src,ot,!!I,Z),_.fa=E,h.push(_)),_};function ce(h,_){var E=_.type;if(E in h.g){var I=h.g[E],Z=Array.prototype.indexOf.call(I,_,void 0),ot;(ot=0<=Z)&&Array.prototype.splice.call(I,Z,1),ot&&(Pt(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ve(h,_,E,I){for(var Z=0;Z<h.length;++Z){var ot=h[Z];if(!ot.da&&ot.listener==_&&ot.capture==!!E&&ot.ha==I)return Z}return-1}var ye="closure_lm_"+(1e6*Math.random()|0),he={};function Ke(h,_,E,I,Z){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)Ke(h,_[ot],E,I,Z);return null}return E=_i(E),h&&h[Rt]?h.K(_,E,p(I)?!!I.capture:!1,Z):Lt(h,_,E,!1,I,Z)}function Lt(h,_,E,I,Z,ot){if(!_)throw Error("Invalid event type");var yt=p(Z)?!!Z.capture:!!Z,Kt=Ln(h);if(Kt||(h[ye]=Kt=new ue(h)),E=Kt.add(_,E,I,yt,ot),E.proxy)return E;if(I=Tt(),E.proxy=I,I.src=h,I.listener=E,h.addEventListener)ct||(Z=yt),Z===void 0&&(Z=!1),h.addEventListener(_.toString(),I,Z);else if(h.attachEvent)h.attachEvent(Pn(_.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Tt(){function h(E){return _.call(h.src,h.listener,E)}const _=Vi;return h}function Ce(h,_,E,I,Z){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)Ce(h,_[ot],E,I,Z);else I=p(I)?!!I.capture:!!I,E=_i(E),h&&h[Rt]?(h=h.i,_=String(_).toString(),_ in h.g&&(ot=h.g[_],E=ve(ot,E,I,Z),-1<E&&(Pt(ot[E]),Array.prototype.splice.call(ot,E,1),ot.length==0&&(delete h.g[_],h.h--)))):h&&(h=Ln(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,E,I,Z)),(E=-1<h?_[h]:null)&&mn(E))}function mn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Rt])ce(_.i,h);else{var E=h.type,I=h.proxy;_.removeEventListener?_.removeEventListener(E,I,h.capture):_.detachEvent?_.detachEvent(Pn(E),I):_.addListener&&_.removeListener&&_.removeListener(I),(E=Ln(_))?(ce(E,h),E.h==0&&(E.src=null,_[ye]=null)):Pt(h)}}}function Pn(h){return h in he?he[h]:he[h]="on"+h}function Vi(h,_){if(h.da)h=!0;else{_=new mt(_,this);var E=h.listener,I=h.ha||h.src;h.fa&&mn(h),h=E.call(I,_)}return h}function Ln(h){return h=h[ye],h instanceof ue?h:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _i(h){return typeof h=="function"?h:(h[wn]||(h[wn]=function(_){return h.handleEvent(_)}),h[wn])}function te(){J.call(this),this.i=new ue(this),this.M=this,this.F=null}O(te,J),te.prototype[Rt]=!0,te.prototype.removeEventListener=function(h,_,E,I){Ce(this,h,_,E,I)};function Ft(h,_){var E,I=h.F;if(I)for(E=[];I;I=I.F)E.push(I);if(h=h.M,I=_.type||_,typeof _=="string")_=new rt(_,h);else if(_ instanceof rt)_.target=_.target||h;else{var Z=_;_=new rt(I,h),M(_,Z)}if(Z=!0,E)for(var ot=E.length-1;0<=ot;ot--){var yt=_.g=E[ot];Z=Oe(yt,I,!0,_)&&Z}if(yt=_.g=h,Z=Oe(yt,I,!0,_)&&Z,Z=Oe(yt,I,!1,_)&&Z,E)for(ot=0;ot<E.length;ot++)yt=_.g=E[ot],Z=Oe(yt,I,!1,_)&&Z}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],I=0;I<E.length;I++)Pt(E[I]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,E,I){return this.i.add(String(h),_,!1,E,I)},te.prototype.L=function(h,_,E,I){return this.i.add(String(h),_,!0,E,I)};function Oe(h,_,E,I){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var Z=!0,ot=0;ot<_.length;++ot){var yt=_[ot];if(yt&&!yt.da&&yt.capture==E){var Kt=yt.listener,He=yt.ha||yt.src;yt.fa&&ce(h.i,yt),Z=Kt.call(He,I)!==!1&&Z}}return Z&&!I.defaultPrevented}function Ee(h,_,E){if(typeof h=="function")E&&(h=T(h,E));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function ki(h){h.g=Ee(()=>{h.g=null,h.i&&(h.i=!1,ki(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Ve extends J{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ki(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xe(h){J.call(this),this.h=h,this.g={}}O(Xe,J);var Sn=[];function bn(h){X(h.g,function(_,E){this.g.hasOwnProperty(E)&&mn(_)},h),h.g={}}Xe.prototype.N=function(){Xe.aa.N.call(this),bn(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=d.JSON.stringify,sn=d.JSON.parse,An=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ur(){}ur.prototype.h=null;function cr(h){return h.h||(h.h=h.i())}function vi(){}var Un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){rt.call(this,"d")}O(Zn,rt);function zn(){rt.call(this,"c")}O(zn,rt);var Wn={},$s=null;function Pi(){return $s=$s||new te}Wn.La="serverreachability";function Yr(h){rt.call(this,Wn.La,h)}O(Yr,rt);function Li(h){const _=Pi();Ft(_,new Yr(_))}Wn.STAT_EVENT="statevent";function qa(h,_){rt.call(this,Wn.STAT_EVENT,h),this.stat=_}O(qa,rt);function de(h){const _=Pi();Ft(_,new qa(_,h))}Wn.Ma="timingevent";function xe(h,_){rt.call(this,Wn.Ma,h),this.size=_}O(xe,rt);function be(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Ys(h,_,E,I,Z,ot){h.info(function(){if(h.g)if(ot)for(var yt="",Kt=ot.split("&"),He=0;He<Kt.length;He++){var Xt=Kt[He].split("=");if(1<Xt.length){var We=Xt[0];Xt=Xt[1];var qe=We.split("_");yt=2<=qe.length&&qe[1]=="type"?yt+(We+"="+Xt+"&"):yt+(We+"=redacted&")}}else yt=null;else yt=ot;return"XMLHTTP REQ ("+I+") [attempt "+Z+"]: "+_+`
`+E+`
`+yt})}function pl(h,_,E,I,Z,ot,yt){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Z+"]: "+_+`
`+E+`
`+ot+" "+yt})}function Ui(h,_,E,I){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+hr(h,E)+(I?" "+I:"")})}function Fa(h,_){h.info(function(){return"TIMEOUT: "+_})}Nn.prototype.info=function(){};function hr(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var I=E[h];if(!(2>I.length)){var Z=I[1];if(Array.isArray(Z)&&!(1>Z.length)){var ot=Z[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var yt=1;yt<Z.length;yt++)Z[yt]=""}}}}return Qe(E)}catch{return _}}var zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ei(){}O(ei,ur),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},ti=new ei;function an(h,_,E,I){this.j=h,this.i=_,this.l=E,this.R=I||1,this.U=new Xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Te}function Te(){this.i=null,this.g="",this.h=!1}var Ks={},Kr={};function Bn(h,_,E){h.L=1,h.v=Ws(Hn(_)),h.m=E,h.P=!0,Ei(h,null)}function Ei(h,_){h.F=Date.now(),fr(h),h.A=Hn(h.v);var E=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),wl(E.i,"t",I),h.C=0,E=h.j.J,h.h=new Te,h.g=Rc(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Ve(T(h.Y,h,h.g),h.O)),_=h.U,E=h.g,I=h.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Sn[0]=Z.toString()),Z=Sn);for(var ot=0;ot<Z.length;ot++){var yt=Ke(E,Z[ot],I||_.handleEvent,!1,_.h||_);if(!yt)break;_.g[yt.key]=yt}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Li(),Ys(h.i,h.u,h.A,h.l,h.R,h.m)}an.prototype.ca=function(h){h=h.target;const _=this.M;_&&ai(h)==3?_.j():this.Y(h)},an.prototype.Y=function(h){try{if(h==this.g)t:{const qe=ai(this.g);var _=this.g.Ba();const vr=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||_c(this.g)))){this.J||qe!=4||_==7||(_==8||0>=vr?Li(3):Li(2)),Bi(this);var E=this.g.Z();this.X=E;e:if(Xs(this)){var I=_c(this.g);h="";var Z=I.length,ot=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),ni(this);var yt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<Z;_++)this.h.h=!0,h+=this.h.i.decode(I[_],{stream:!(ot&&_==Z-1)});I.length=0,this.h.g+=h,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=E==200,pl(this.i,this.u,this.A,this.l,this.R,qe,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Kt,He=this.g;if((Kt=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Kt)){var Xt=Kt;break e}}Xt=null}if(E=Xt)Ui(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,E);else{this.o=!1,this.s=3,de(12),Be(this),ni(this);break t}}if(this.P){E=!0;let on;for(;!this.J&&this.C<yt.length;)if(on=ja(this,yt),on==Kr){qe==4&&(this.s=4,de(14),E=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Ks){this.s=4,de(15),Ui(this.i,this.l,yt,"[Invalid Chunk]"),E=!1;break}else Ui(this.i,this.l,on,null),Hi(this,on);if(Xs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||yt.length!=0||this.h.h||(this.s=1,de(16),E=!1),this.o=this.o&&E,!E)Ui(this.i,this.l,yt,"[Invalid Chunked Response]"),Be(this),ni(this);else if(0<yt.length&&!this.W){this.W=!0;var We=this.j;We.g==this&&We.ba&&!We.M&&(We.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),aa(We),We.M=!0,de(11))}}else Ui(this.i,this.l,yt,null),Hi(this,yt);qe==4&&Be(this),this.o&&!this.J&&(qe==4?Sc(this.j,this):(this.o=!1,fr(this)))}else dd(this.g),E==400&&0<yt.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),Be(this),ni(this)}}}catch{}finally{}};function Xs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ja(h,_){var E=h.C,I=_.indexOf(`
`,E);return I==-1?Kr:(E=Number(_.substring(E,I)),isNaN(E)?Ks:(I+=1,I+E>_.length?Kr:(_=_.slice(I,I+E),h.C=I+E,_)))}an.prototype.cancel=function(){this.J=!0,Be(this)};function fr(h){h.S=Date.now()+h.I,Ga(h,h.I)}function Ga(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=be(T(h.ba,h),_)}function Bi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}an.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Fa(this.i,this.A),this.L!=2&&(Li(),de(17)),Be(this),this.s=2,ni(this)):Ga(this,this.S-h)};function ni(h){h.j.G==0||h.J||Sc(h.j,h)}function Be(h){Bi(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,bn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Hi(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||yl(E.h,h))){if(!h.K&&yl(E.h,h)&&E.G==3){try{var I=E.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Z=I;if(Z[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)no(E),to(E);else break t;Il(E),de(18)}}else E.za=Z[1],0<E.za-E.T&&37500>Z[2]&&E.F&&E.v==0&&!E.C&&(E.C=be(T(E.Za,E),6e3));if(1>=qi(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else _r(E,11)}else if((h.K||E.g==h)&&no(E),!q(_))for(Z=E.Da.g.parse(_),_=0;_<Z.length;_++){let Xt=Z[_];if(E.T=Xt[0],Xt=Xt[1],E.G==2)if(Xt[0]=="c"){E.K=Xt[1],E.ia=Xt[2];const We=Xt[3];We!=null&&(E.la=We,E.j.info("VER="+E.la));const qe=Xt[4];qe!=null&&(E.Aa=qe,E.j.info("SVER="+E.Aa));const vr=Xt[5];vr!=null&&typeof vr=="number"&&0<vr&&(I=1.5*vr,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const on=h.g;if(on){const Xi=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var ot=I.h;ot.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Ya(ot,ot.h),ot.h=null))}if(I.D){const xl=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(I.ya=xl,se(I.I,I.D,xl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var yt=h;if(I.qa=Ac(I,I.J?I.ia:null,I.W),yt.K){Rn(I.h,yt);var Kt=yt,He=I.L;He&&(Kt.I=He),Kt.B&&(Bi(Kt),fr(Kt)),I.g=yt}else Tc(I);0<E.i.length&&eo(E)}else Xt[0]!="stop"&&Xt[0]!="close"||_r(E,7);else E.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?_r(E,7):Al(E):Xt[0]!="noop"&&E.l&&E.l.ta(Xt),E.v=0)}}Li(4)}catch{}}var $a=class{constructor(h,_){this.g=h,this.map=_}};function Ti(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qi(h){return h.h?1:h.g?h.g.size:0}function yl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ya(h,_){h.g?h.g.add(_):h.h=_}function Rn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ti.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _l(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return k(h.i)}function ud(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],E=h.length,I=0;I<E;I++)_.push(h[I]);return _}_=[],E=0;for(I in h)_[E++]=h[I];return _}function Ka(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const I in h)_[E++]=I;return _}}}function vl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=Ka(h),I=ud(h),Z=I.length,ot=0;ot<Z;ot++)_.call(void 0,I[ot],E&&E[ot],h)}var Qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var I=h[E].indexOf("="),Z=null;if(0<=I){var ot=h[E].substring(0,I);Z=h[E].substring(I+1)}else ot=h[E];_(ot,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function ke(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ke){this.h=h.h,Zs(this,h.j),this.o=h.o,this.g=h.g,Qr(this,h.s),this.l=h.l;var _=h.i,E=new gr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),dr(this,E),this.m=h.m}else h&&(_=String(h).match(Qs))?(this.h=!1,Zs(this,_[1]||"",!0),this.o=ii(_[2]||""),this.g=ii(_[3]||"",!0),Qr(this,_[4]),this.l=ii(_[5]||"",!0),dr(this,_[6]||"",!0),this.m=ii(_[7]||"")):(this.h=!1,this.i=new gr(null,this.h))}ke.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Js(_,El,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Js(_,El,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Js(E,E.charAt(0)=="/"?hd:Tl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Js(E,Xa)),h.join("")};function Hn(h){return new ke(h)}function Zs(h,_,E){h.j=E?ii(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Qr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function dr(h,_,E){_ instanceof gr?(h.i=_,pc(h.i,h.h)):(E||(_=Js(_,fd)),h.i=new gr(_,h.h))}function se(h,_,E){h.i.set(_,E)}function Ws(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ii(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Js(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,mc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var El=/[#\/\?@]/g,Tl=/[#\?:]/g,hd=/[#\?]/g,fd=/[#\?@]/g,Xa=/#/g;function gr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&cd(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}e=gr.prototype,e.add=function(h,_){ri(this),this.i=null,h=Fi(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function mr(h,_){ri(h),_=Fi(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function pr(h,_){return ri(h),_=Fi(h,_),h.g.has(_)}e.forEach=function(h,_){ri(this),this.g.forEach(function(E,I){E.forEach(function(Z){h.call(_,Z,I,this)},this)},this)},e.na=function(){ri(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let I=0;I<_.length;I++){const Z=h[I];for(let ot=0;ot<Z.length;ot++)E.push(_[I])}return E},e.V=function(h){ri(this);let _=[];if(typeof h=="string")pr(this,h)&&(_=_.concat(this.g.get(Fi(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},e.set=function(h,_){return ri(this),this.i=null,h=Fi(this,h),pr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function wl(h,_,E){mr(h,_),0<E.length&&(h.i=null,h.g.set(Fi(h,_),k(E)),h.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var I=_[E];const ot=encodeURIComponent(String(I)),yt=this.V(I);for(I=0;I<yt.length;I++){var Z=ot;yt[I]!==""&&(Z+="="+encodeURIComponent(String(yt[I]))),h.push(Z)}}return this.i=h.join("&")};function Fi(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function pc(h,_){_&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(E,I){var Z=I.toLowerCase();I!=Z&&(mr(this,I),wl(this,Z,E))},h)),h.j=_}function ta(h,_){const E=new Nn;if(d.Image){const I=new Image;I.onload=S(si,E,"TestLoadImage: loaded",!0,_,I),I.onerror=S(si,E,"TestLoadImage: error",!1,_,I),I.onabort=S(si,E,"TestLoadImage: abort",!1,_,I),I.ontimeout=S(si,E,"TestLoadImage: timeout",!1,_,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else _(!1)}function wi(h,_){const E=new Nn,I=new AbortController,Z=setTimeout(()=>{I.abort(),si(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:I.signal}).then(ot=>{clearTimeout(Z),ot.ok?si(E,"TestPingServer: ok",!0,_):si(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Z),si(E,"TestPingServer: error",!1,_)})}function si(h,_,E,I,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),I(E)}catch{}}function ea(){this.g=new An}function ji(h,_,E){const I=E||"";try{vl(h,function(Z,ot){let yt=Z;p(Z)&&(yt=Qe(Z)),_.push(I+ot+"="+encodeURIComponent(yt))})}catch(Z){throw _.push(I+"type="+encodeURIComponent("_badmap")),Z}}function Zr(h){this.l=h.Ub||null,this.j=h.eb||!1}O(Zr,ur),Zr.prototype.g=function(){return new yr(this.l,this.j)},Zr.prototype.i=function(h){return function(){return h}}({});function yr(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(yr,te),e=yr.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,$i(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Gi(this):$i(this),this.readyState==3&&Sl(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,Gi(this))},e.Qa=function(h){this.g&&(this.response=h,Gi(this))},e.ga=function(){this.g&&Gi(this)};function Gi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,$i(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function $i(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function bl(h){let _="";return X(h,function(E,I){_+=I,_+=":",_+=E,_+=`\r
`}),_}function Ze(h,_,E){t:{for(I in E){var I=!1;break t}I=!0}I||(E=bl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):se(h,_,E))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(ee,te);var Qa=/^https?$/i,na=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?cr(this.o):cr(ti),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ot){yc(this,ot);return}if(h=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Z in I)E.set(Z,I[Z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ot of I.keys())E.set(ot,I.get(ot));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(ot=>ot.toLowerCase()=="content-type"),Z=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(na,_,void 0))||I||Z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,yt]of E)this.g.setRequestHeader(ot,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(h),this.u=!1}catch(ot){yc(this,ot)}};function yc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Za(h),Yi(h)}function Za(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ft(this,"complete"),Ft(this,"abort"),Yi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Wa(this):this.bb())},e.bb=function(){Wa(this)};function Wa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ai(h)!=4||h.Z()!=2)){if(h.u&&ai(h)==4)Ee(h.Ea,0,h);else if(Ft(h,"readystatechange"),ai(h)==4){h.h=!1;try{const yt=h.Z();t:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var E;if(!(E=_)){var I;if(I=yt===0){var Z=String(h.D).match(Qs)[1]||null;!Z&&d.self&&d.self.location&&(Z=d.self.location.protocol.slice(0,-1)),I=!Qa.test(Z?Z.toLowerCase():"")}E=I}if(E)Ft(h,"complete"),Ft(h,"success");else{h.m=6;try{var ot=2<ai(h)?h.g.statusText:""}catch{ot=""}h.l=ot+" ["+h.Z()+"]",Za(h)}}finally{Yi(h)}}}}function Yi(h,_){if(h.g){ia(h);const E=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ft(h,"ready");try{E.onreadystatechange=I}catch{}}}function ia(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function ai(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),sn(_)}};function _c(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function dd(h){const _={};h=(h.g&&2<=ai(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(q(h[I]))continue;var E=V(h[I]);const Z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ot=_[Z]||[];_[Z]=ot,ot.push(E)}N(_,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Ja(h){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,h),this.cb=ra("retryDelaySeedMs",1e4,h),this.Wa=ra("forwardChannelMaxRetries",2,h),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(h&&h.concurrentRequestLimit),this.Da=new ea,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ja.prototype,e.la=8,e.G=1,e.connect=function(h,_,E,I){de(0),this.W=h,this.H=_||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=Ac(this,null,this.W),eo(this)};function Al(h){if(vc(h),h.G==3){var _=h.U++,E=Hn(h.I);if(se(E,"SID",h.K),se(E,"RID",_),se(E,"TYPE","terminate"),sa(h,E),_=new an(h,h.j,_),_.L=2,_.v=Ws(Hn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=Rc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),fr(_)}bc(h)}function to(h){h.g&&(aa(h),h.g.cancel(),h.g=null)}function vc(h){to(h),h.u&&(d.clearTimeout(h.u),h.u=null),no(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function eo(h){if(!Xr(h.h)&&!h.s){h.s=!0;var _=h.Ga;$||x(),at||($(),at=!0),Y.add(_,h),h.B=0}}function gd(h,_){return qi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=be(T(h.Ga,h,_),Cl(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Z=new an(this,this.j,h);let ot=this.o;if(this.S&&(ot?(ot=A(ot),M(ot,this.S)):ot=this.S),this.m!==null||this.O||(Z.H=ot,ot=null),this.P)t:{for(var _=0,E=0;E<this.i.length;E++){e:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=E;break t}if(_===4096||E===this.i.length-1){_=E+1;break t}}_=1e3}else _=1e3;_=Ec(this,Z,_),E=Hn(this.I),se(E,"RID",h),se(E,"CVER",22),this.D&&se(E,"X-HTTP-Session-Id",this.D),sa(this,E),ot&&(this.O?_="headers="+encodeURIComponent(String(bl(ot)))+"&"+_:this.m&&Ze(E,this.m,ot)),Ya(this.h,Z),this.Ua&&se(E,"TYPE","init"),this.P?(se(E,"$req",_),se(E,"SID","null"),Z.T=!0,Bn(Z,E,null)):Bn(Z,E,_),this.G=2}}else this.G==3&&(h?Rl(this,h):this.i.length==0||Xr(this.h)||Rl(this))};function Rl(h,_){var E;_?E=_.l:E=h.U++;const I=Hn(h.I);se(I,"SID",h.K),se(I,"RID",E),se(I,"AID",h.T),sa(h,I),h.m&&h.o&&Ze(I,h.m,h.o),E=new an(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Ec(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ya(h.h,E),Bn(E,I,_)}function sa(h,_){h.H&&X(h.H,function(E,I){se(_,I,E)}),h.l&&vl({},function(E,I){se(_,I,E)})}function Ec(h,_,E){E=Math.min(h.i.length,E);var I=h.l?T(h.l.Na,h.l,h):null;t:{var Z=h.i;let ot=-1;for(;;){const yt=["count="+E];ot==-1?0<E?(ot=Z[0].g,yt.push("ofs="+ot)):ot=0:yt.push("ofs="+ot);let Kt=!0;for(let He=0;He<E;He++){let Xt=Z[He].g;const We=Z[He].map;if(Xt-=ot,0>Xt)ot=Math.max(0,Z[He].g-100),Kt=!1;else try{ji(We,yt,"req"+Xt+"_")}catch{I&&I(We)}}if(Kt){I=yt.join("&");break t}}}return h=h.i.splice(0,E),_.D=h,I}function Tc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;$||x(),at||($(),at=!0),Y.add(_,h),h.v=0}}function Il(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=be(T(h.Fa,h),Cl(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=be(T(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),to(this),wc(this))};function aa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function wc(h){h.g=new an(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Hn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),sa(h,_),h.m&&h.o&&Ze(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Ws(Hn(_)),E.m=null,E.P=!0,Ei(E,h)}e.Za=function(){this.C!=null&&(this.C=null,to(this),Il(this),de(19))};function no(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Sc(h,_){var E=null;if(h.g==_){no(h),aa(h),h.g=null;var I=2}else if(yl(h.h,_))E=_.D,Rn(h.h,_),I=1;else return;if(h.G!=0){if(_.o)if(I==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var Z=h.B;I=Pi(),Ft(I,new xe(I,E)),eo(h)}else Tc(h);else if(Z=_.s,Z==3||Z==0&&0<_.X||!(I==1&&gd(h,_)||I==2&&Il(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),Z){case 1:_r(h,5);break;case 4:_r(h,10);break;case 3:_r(h,6);break;default:_r(h,2)}}}function Cl(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function _r(h,_){if(h.j.info("Error code "+_),_==2){var E=T(h.fb,h),I=h.Xa;const Z=!I;I=new ke(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Zs(I,"https"),Ws(I),Z?ta(I.toString(),E):wi(I.toString(),E)}else de(2);h.G=0,h.l&&h.l.sa(_),bc(h),vc(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function bc(h){if(h.G=0,h.ka=[],h.l){const _=_l(h.h);(_.length!=0||h.i.length!=0)&&(L(h.ka,_),L(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function Ac(h,_,E){var I=E instanceof ke?Hn(E):new ke(E);if(I.g!="")_&&(I.g=_+"."+I.g),Qr(I,I.s);else{var Z=d.location;I=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;var ot=new ke(null);I&&Zs(ot,I),_&&(ot.g=_),Z&&Qr(ot,Z),E&&(ot.l=E),I=ot}return E=h.D,_=h.ya,E&&_&&se(I,E,_),se(I,"VER",h.la),sa(h,I),I}function Rc(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new Zr({eb:E})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ic(){}e=Ic.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function io(){}io.prototype.g=function(h,_){return new In(h,_)};function In(h,_){te.call(this),this.g=new Ja(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!q(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!q(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ki(this)}O(In,te),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Al(this.g)},In.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Qe(h),h=E);_.i.push(new $a(_.Ya++,h)),_.G==3&&eo(_)},In.prototype.N=function(){this.g.l=null,delete this.j,Al(this.g),delete this.g,In.aa.N.call(this)};function Cc(h){Zn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const E in _){h=E;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}O(Cc,Zn);function xc(){zn.call(this),this.status=1}O(xc,zn);function Ki(h){this.g=h}O(Ki,Ic),Ki.prototype.ua=function(){Ft(this.g,"a")},Ki.prototype.ta=function(h){Ft(this.g,new Cc(h))},Ki.prototype.sa=function(h){Ft(this.g,new xc)},Ki.prototype.ra=function(){Ft(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,v1=function(){return new io},_1=function(){return Pi()},y1=Wn,op={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,Wh=zi,Jn.COMPLETE="complete",p1=Jn,vi.EventType=Un,Un.OPEN="a",Un.CLOSE="b",Un.ERROR="c",Un.MESSAGE="d",te.prototype.listen=te.prototype.K,Iu=vi,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,m1=ee}).apply(typeof zh<"u"?zh:typeof self<"u"?self:typeof window<"u"?window:{});const aT="@firebase/firestore",oT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Gp("@firebase/firestore");function Uo(){return Oa.logLevel}function _t(e,...t){if(Oa.logLevel<=$t.DEBUG){const n=t.map(Kp);Oa.debug(`Firestore (${cl}): ${e}`,...n)}}function Fr(e,...t){if(Oa.logLevel<=$t.ERROR){const n=t.map(Kp);Oa.error(`Firestore (${cl}): ${e}`,...n)}}function el(e,...t){if(Oa.logLevel<=$t.WARN){const n=t.map(Kp);Oa.warn(`Firestore (${cl}): ${e}`,...n)}}function Kp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,E1(e,r,n)}function E1(e,t,n){let r=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fr(r),new Error(r)}function ne(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||E1(t,a,r)}function Vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends $r{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class GO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(vn.UNAUTHENTICATED))}shutdown(){}}class $O{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class YO{constructor(t){this.t=t,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let l=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ks,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ks)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new T1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new vn(t)}}class KO{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XO{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new KO(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QO{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const r=l=>{l.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,_t("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=ZO(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Bt(e,t){return e<t?-1:e>t?1:0}function lp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Bt(r,a);{const l=w1(),c=WO(l.encode(uT(e,n)),l.encode(uT(t,n)));return c!==0?c:Bt(r,a)}}n+=r>65535?2:1}return Bt(e.length,t.length)}function uT(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function WO(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Bt(e[n],t[n]);return Bt(e.length,t.length)}function nl(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=-62135596800,hT=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(t){return Ge.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*hT);return new Ge(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<cT)throw new Et(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-cT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new Ge(0,0))}static max(){return new Ot(new Ge(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="__name__";class er{constructor(t,n,r){n===void 0?n=0:n>t.length&&Dt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Dt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return er.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof er?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=er.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Bt(t.length,n.length)}static compareSegments(t,n){const r=er.isNumericId(t),a=er.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?er.extractNumericId(t).compare(er.extractNumericId(n)):lp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vs.fromString(t.substring(4,t.length-2))}}class pe extends er{construct(t,n,r){return new pe(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(gt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const JO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends er{construct(t,n,r){return new fn(t,n,r)}static isValidIdentifier(t){return JO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fT}static keyField(){return new fn([fT])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new Et(gt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new Et(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Et(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new Et(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(t){this.path=t}static fromPath(t){return new At(pe.fromString(t))}static fromName(t){return new At(pe.fromString(t).popFirst(5))}static empty(){return new At(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pe.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new At(new pe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=-1;function t4(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Ot.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new Us(a,At.empty(),t)}function e4(e){return new Us(e.readTime,e.key,Gu)}class Us{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Us(Ot.min(),At.empty(),Gu)}static max(){return new Us(Ot.max(),At.empty(),Gu)}}function n4(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=At.comparator(e.documentKey,t.documentKey),n!==0?n:Bt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(e){if(e.code!==gt.FAILED_PRECONDITION||e.message!==i4)throw e;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},g=>r(g))}),c=!0,l===a&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(a=>a?dt.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;n(t[p]).next(y=>{c[p]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new dt((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function s4(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}$f.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=-1;function Yf(e){return e==null}function Ef(e){return e===0&&1/e==-1/0}function a4(e){return typeof e=="number"&&Number.isInteger(e)&&!Ef(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="";function o4(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=dT(t)),t=l4(e.get(n),t);return dT(t)}function l4(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case b1:n+="";break;default:n+=l}}return n}function dT(e){return e+b1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function La(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function A1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(t,n){this.comparator=t,this.root=n||hn.EMPTY}insert(t,n){return new Se(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(t){return new Se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Bh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Bh(this.root,t,this.comparator,!0)}}class Bh{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hn{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??hn.RED,this.left=a??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new hn(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return hn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Dt(27949);return t+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new hn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new Se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new mT(this.data.getIterator())}getIteratorFrom(t){return new mT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class mT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this.fields=t,t.sort(fn.comparator)}static empty(){return new Ci([])}unionWith(t){let n=new $e(fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ci(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return nl(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new R1("Invalid base64 string: "+l):l}}(t);return new dn(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new dn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const u4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=u4.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Me(e.seconds),nanos:Me(e.nanos)}}function Me(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Bs(e){return typeof e=="string"?dn.fromBase64String(e):dn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="server_timestamp",C1="__type__",x1="__previous_value__",N1="__local_write_time__";function Qp(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[C1])===null||n===void 0?void 0:n.stringValue)===I1}function Kf(e){const t=e.mapValue.fields[x1];return Qp(t)?Kf(t):t}function $u(e){const t=zs(e.mapValue.fields[N1].timestampValue);return new Ge(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(t,n,r,a,l,c,d,g,p,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=y}}const Tf="(default)";class Yu{constructor(t,n){this.projectId=t,this.database=n||Tf}static empty(){return new Yu("","")}get isDefaultDatabase(){return this.database===Tf}isEqual(t){return t instanceof Yu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="__type__",h4="__max__",Hh={mapValue:{}},M1="__vector__",wf="value";function Hs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qp(e)?4:d4(e)?9007199254740991:f4(e)?10:11:Dt(28295,{value:e})}function or(e,t){if(e===t)return!0;const n=Hs(e);if(n!==Hs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $u(e).isEqual($u(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=zs(a.timestampValue),d=zs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return Bs(a.bytesValue).isEqual(Bs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return Me(a.geoPointValue.latitude)===Me(l.geoPointValue.latitude)&&Me(a.geoPointValue.longitude)===Me(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Me(a.integerValue)===Me(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Me(a.doubleValue),d=Me(l.doubleValue);return c===d?Ef(c)===Ef(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return nl(e.arrayValue.values||[],t.arrayValue.values||[],or);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(gT(c)!==gT(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!or(c[g],d[g])))return!1;return!0}(e,t);default:return Dt(52216,{left:e})}}function Ku(e,t){return(e.values||[]).find(n=>or(n,t))!==void 0}function il(e,t){if(e===t)return 0;const n=Hs(e),r=Hs(t);if(n!==r)return Bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Me(l.integerValue||l.doubleValue),g=Me(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(e,t);case 3:return pT(e.timestampValue,t.timestampValue);case 4:return pT($u(e),$u(t));case 5:return lp(e.stringValue,t.stringValue);case 6:return function(l,c){const d=Bs(l),g=Bs(c);return d.compareTo(g)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const y=Bt(d[p],g[p]);if(y!==0)return y}return Bt(d.length,g.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Bt(Me(l.latitude),Me(c.latitude));return d!==0?d:Bt(Me(l.longitude),Me(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return yT(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,p,y;const v=l.fields||{},T=c.fields||{},S=(d=v[wf])===null||d===void 0?void 0:d.arrayValue,O=(g=T[wf])===null||g===void 0?void 0:g.arrayValue,k=Bt(((p=S?.values)===null||p===void 0?void 0:p.length)||0,((y=O?.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:yT(S,O)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===Hh.mapValue&&c===Hh.mapValue)return 0;if(l===Hh.mapValue)return 1;if(c===Hh.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=c.fields||{},y=Object.keys(p);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const T=lp(g[v],y[v]);if(T!==0)return T;const S=il(d[g[v]],p[y[v]]);if(S!==0)return S}return Bt(g.length,y.length)}(e.mapValue,t.mapValue);default:throw Dt(23264,{Pe:n})}}function pT(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Bt(e,t);const n=zs(e),r=zs(t),a=Bt(n.seconds,r.seconds);return a!==0?a:Bt(n.nanos,r.nanos)}function yT(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=il(n[a],r[a]);if(l)return l}return Bt(n.length,r.length)}function rl(e){return up(e)}function up(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=zs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Bs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return At.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=up(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${up(n.fields[c])}`;return a+"}"}(e.mapValue):Dt(61005,{value:e})}function Jh(e){switch(Hs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Kf(e);return t?16+Jh(t):16;case 5:return 2*e.stringValue.length;case 6:return Bs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Jh(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return La(r.fields,(l,c)=>{a+=l.length+Jh(c)}),a}(e.mapValue);default:throw Dt(13486,{value:e})}}function _T(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function cp(e){return!!e&&"integerValue"in e}function Zp(e){return!!e&&"arrayValue"in e}function vT(e){return!!e&&"nullValue"in e}function ET(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function tf(e){return!!e&&"mapValue"in e}function f4(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[D1])===null||n===void 0?void 0:n.stringValue)===M1}function Du(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return La(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Du(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Du(e.arrayValue.values[n]);return t}return Object.assign({},e)}function d4(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===h4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t){this.value=t}static empty(){return new pi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!tf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Du(n)}setAll(t){let n=fn.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=Du(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());tf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return or(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];tf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){La(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new pi(Du(this.value))}}function O1(e){const t=[];return La(e.fields,(n,r)=>{const a=new fn([n]);if(tf(r)){const l=O1(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Ci(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new En(t,0,Ot.min(),Ot.min(),Ot.min(),pi.empty(),0)}static newFoundDocument(t,n,r,a){return new En(t,1,n,Ot.min(),r,a,0)}static newNoDocument(t,n){return new En(t,2,n,Ot.min(),Ot.min(),pi.empty(),0)}static newUnknownDocument(t,n){return new En(t,3,n,Ot.min(),Ot.min(),pi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof En&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,n){this.position=t,this.inclusive=n}}function TT(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=At.comparator(At.fromName(c.referenceValue),n.key):r=il(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function wT(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!or(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t,n="asc"){this.field=t,this.dir=n}}function g4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{}class ze extends V1{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new p4(t,n,r):n==="array-contains"?new v4(t,r):n==="in"?new E4(t,r):n==="not-in"?new T4(t,r):n==="array-contains-any"?new w4(t,r):new ze(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new y4(t,r):new _4(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(il(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison(il(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends V1{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Di(t,n)}matches(t){return k1(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function k1(e){return e.op==="and"}function P1(e){return m4(e)&&k1(e)}function m4(e){for(const t of e.filters)if(t instanceof Di)return!1;return!0}function hp(e){if(e instanceof ze)return e.field.canonicalString()+e.op.toString()+rl(e.value);if(P1(e))return e.filters.map(t=>hp(t)).join(",");{const t=e.filters.map(n=>hp(n)).join(",");return`${e.op}(${t})`}}function L1(e,t){return e instanceof ze?function(r,a){return a instanceof ze&&r.op===a.op&&r.field.isEqual(a.field)&&or(r.value,a.value)}(e,t):e instanceof Di?function(r,a){return a instanceof Di&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&L1(c,a.filters[d]),!0):!1}(e,t):void Dt(19439)}function U1(e){return e instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${rl(n.value)}`}(e):e instanceof Di?function(n){return n.op.toString()+" {"+n.getFilters().map(U1).join(" ,")+"}"}(e):"Filter"}class p4 extends ze{constructor(t,n,r){super(t,n,r),this.key=At.fromName(r.referenceValue)}matches(t){const n=At.comparator(t.key,this.key);return this.matchesComparison(n)}}class y4 extends ze{constructor(t,n){super(t,"in",n),this.keys=z1("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class _4 extends ze{constructor(t,n){super(t,"not-in",n),this.keys=z1("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function z1(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>At.fromName(r.referenceValue))}class v4 extends ze{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Zp(n)&&Ku(n.arrayValue,this.value)}}class E4 extends ze{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}}class T4 extends ze{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ku(this.value.arrayValue,n)}}class w4 extends ze{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ku(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function ST(e,t=null,n=[],r=[],a=null,l=null,c=null){return new S4(e,t,n,r,a,l,c)}function Wp(e){const t=Vt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>hp(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Yf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>rl(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>rl(r)).join(",")),t.Ie=n}return t.Ie}function Jp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!g4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!L1(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wT(e.startAt,t.startAt)&&wT(e.endAt,t.endAt)}function fp(e){return At.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function b4(e,t,n,r,a,l,c,d){return new ac(e,t,n,r,a,l,c,d)}function B1(e){return new ac(e)}function bT(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function H1(e){return e.collectionGroup!==null}function Mu(e){const t=Vt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(fn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new bf(l,r))}),n.has(fn.keyField().canonicalString())||t.Ee.push(new bf(fn.keyField(),r))}return t.Ee}function ir(e){const t=Vt(e);return t.de||(t.de=A4(t,Mu(e))),t.de}function A4(e,t){if(e.limitType==="F")return ST(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new bf(a.field,l)});const n=e.endAt?new Sf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Sf(e.startAt.position,e.startAt.inclusive):null;return ST(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function dp(e,t){const n=e.filters.concat([t]);return new ac(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function gp(e,t,n){return new ac(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xf(e,t){return Jp(ir(e),ir(t))&&e.limitType===t.limitType}function q1(e){return`${Wp(ir(e))}|lt:${e.limitType}`}function zo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>U1(a)).join(", ")}]`),Yf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>rl(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>rl(a)).join(",")),`Target(${r})`}(ir(e))}; limitType=${e.limitType})`}function Qf(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):At.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of Mu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,g){const p=TT(c,d,g);return c.inclusive?p<=0:p<0}(r.startAt,Mu(r),a)||r.endAt&&!function(c,d,g){const p=TT(c,d,g);return c.inclusive?p>=0:p>0}(r.endAt,Mu(r),a))}(e,t)}function R4(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function F1(e){return(t,n)=>{let r=!1;for(const a of Mu(e)){const l=I4(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function I4(e,t,n){const r=e.field.isKeyField()?At.comparator(t.key,n.key):function(l,c,d){const g=c.data.field(l),p=d.data.field(l);return g!==null&&p!==null?il(g,p):Dt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){La(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return A1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new Se(At.comparator);function jr(){return C4}const j1=new Se(At.comparator);function Cu(...e){let t=j1;for(const n of e)t=t.insert(n.key,n);return t}function G1(e){let t=j1;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ra(){return Ou()}function $1(){return Ou()}function Ou(){return new Ua(e=>e.toString(),(e,t)=>e.isEqual(t))}const x4=new Se(At.comparator),N4=new $e(At.comparator);function Yt(...e){let t=N4;for(const n of e)t=t.add(n);return t}const D4=new $e(Bt);function M4(){return D4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ef(t)?"-0":t}}function Y1(e){return{integerValue:""+e}}function O4(e,t){return a4(t)?Y1(t):ty(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this._=void 0}}function V4(e,t,n){return e instanceof Af?function(a,l){const c={fields:{[C1]:{stringValue:I1},[N1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Qp(l)&&(l=Kf(l)),l&&(c.fields[x1]=l),{mapValue:c}}(n,t):e instanceof Xu?X1(e,t):e instanceof Qu?Q1(e,t):function(a,l){const c=K1(a,l),d=AT(c)+AT(a.Re);return cp(c)&&cp(a.Re)?Y1(d):ty(a.serializer,d)}(e,t)}function k4(e,t,n){return e instanceof Xu?X1(e,t):e instanceof Qu?Q1(e,t):n}function K1(e,t){return e instanceof Rf?function(r){return cp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class Af extends Zf{}class Xu extends Zf{constructor(t){super(),this.elements=t}}function X1(e,t){const n=Z1(t);for(const r of e.elements)n.some(a=>or(a,r))||n.push(r);return{arrayValue:{values:n}}}class Qu extends Zf{constructor(t){super(),this.elements=t}}function Q1(e,t){let n=Z1(t);for(const r of e.elements)n=n.filter(a=>!or(a,r));return{arrayValue:{values:n}}}class Rf extends Zf{constructor(t,n){super(),this.serializer=t,this.Re=n}}function AT(e){return Me(e.integerValue||e.doubleValue)}function Z1(e){return Zp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function P4(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof Xu&&a instanceof Xu||r instanceof Qu&&a instanceof Qu?nl(r.elements,a.elements,or):r instanceof Rf&&a instanceof Rf?or(r.Re,a.Re):r instanceof Af&&a instanceof Af}(e.transform,t.transform)}class L4{constructor(t,n){this.version=t,this.transformResults=n}}class Ur{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ur}static exists(t){return new Ur(void 0,t)}static updateTime(t){return new Ur(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ef(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Wf{}function W1(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new tb(e.key,Ur.none()):new oc(e.key,e.data,Ur.none());{const n=e.data,r=pi.empty();let a=new $e(fn.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new za(e.key,r,new Ci(a.toArray()),Ur.none())}}function U4(e,t,n){e instanceof oc?function(a,l,c){const d=a.value.clone(),g=IT(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof za?function(a,l,c){if(!ef(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=IT(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(J1(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function Vu(e,t,n,r){return e instanceof oc?function(l,c,d,g){if(!ef(l.precondition,c))return d;const p=l.value.clone(),y=CT(l.fieldTransforms,g,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(e,t,n,r):e instanceof za?function(l,c,d,g){if(!ef(l.precondition,c))return d;const p=CT(l.fieldTransforms,g,c),y=c.data;return y.setAll(J1(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return ef(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function z4(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=K1(r.transform,a||null);l!=null&&(n===null&&(n=pi.empty()),n.set(r.field,l))}return n||null}function RT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&nl(r,a,(l,c)=>P4(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class oc extends Wf{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class za extends Wf{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function J1(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function IT(e,t,n){const r=new Map;ne(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,k4(c,d,n[a]))}return r}function CT(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,V4(l,c,t))}return r}class tb extends Wf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B4 extends Wf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&U4(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Vu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Vu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=$1();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const g=W1(c,d);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Yt())}isEqual(t){return this.batchId===t.batchId&&nl(this.mutations,t.mutations,(n,r)=>RT(n,r))&&nl(this.baseMutations,t.baseMutations,(n,r)=>RT(n,r))}}class ey{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){ne(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return x4}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new ey(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,Zt;function j4(e){switch(e){case gt.OK:return Dt(64938);case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0;default:return Dt(15467,{code:e})}}function eb(e){if(e===void 0)return Fr("GRPC error has no .code"),gt.UNKNOWN;switch(e){case Ue.OK:return gt.OK;case Ue.CANCELLED:return gt.CANCELLED;case Ue.UNKNOWN:return gt.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return gt.INTERNAL;case Ue.UNAVAILABLE:return gt.UNAVAILABLE;case Ue.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case Ue.NOT_FOUND:return gt.NOT_FOUND;case Ue.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case Ue.ABORTED:return gt.ABORTED;case Ue.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case Ue.DATA_LOSS:return gt.DATA_LOSS;default:return Dt(39323,{code:e})}}(Zt=Ue||(Ue={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new Vs([4294967295,4294967295],0);function xT(e){const t=w1().encode(e),n=new g1;return n.update(t),new Uint8Array(n.digest())}function NT(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Vs([n,r],0),new Vs([a,l],0)]}class ny{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xu(`Invalid padding: ${n}`);if(r<0)throw new xu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new xu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Vs.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(Vs.fromNumber(r)));return a.compare(G4)===1&&(a=new Vs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=xT(t),[r,a]=NT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new ny(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=xT(t),[r,a]=NT(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,lc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Jf(Ot.min(),a,new Se(Bt),jr(),Yt())}}class lc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new lc(r,n,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class nb{constructor(t,n){this.targetId=t,this.Ce=n}}class ib{constructor(t,n,r=dn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class DT{constructor(){this.Fe=0,this.Me=MT(),this.xe=dn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Yt(),n=Yt(),r=Yt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Dt(38017,{changeType:l})}}),new lc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=MT()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ne(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class $4{constructor(t){this.ze=t,this.je=new Map,this.He=jr(),this.Je=qh(),this.Ye=qh(),this.Ze=new Se(Bt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Dt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(fp(l))if(r===0){const c=new At(l.path);this.tt(n,c,En.newNoDocument(c,Ot.min()))}else ne(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),g=d?this.lt(d,t,c):1;if(g!==0){this.st(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=Bs(r).toUint8Array()}catch(g){if(g instanceof R1)return el("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new ny(c,a,l)}catch(g){return el(g instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&fp(d.target)){const g=new At(d.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,En.newNoDocument(g,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=Yt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const p=this._t(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new Jf(t,n,this.Ze,this.He,r);return this.He=jr(),this.Je=qh(),this.Ye=qh(),this.Ze=new Se(Bt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new DT,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Bt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Bt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||_t("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new DT),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function qh(){return new Se(At.comparator)}function MT(){return new Se(At.comparator)}const Y4={asc:"ASCENDING",desc:"DESCENDING"},K4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X4={and:"AND",or:"OR"};class Q4{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function mp(e,t){return e.useProto3Json||Yf(t)?t:{value:t}}function If(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function rb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Z4(e,t){return If(e,t.toTimestamp())}function rr(e){return ne(!!e,49232),Ot.fromTimestamp(function(n){const r=zs(n);return new Ge(r.seconds,r.nanos)}(e))}function iy(e,t){return pp(e,t).canonicalString()}function pp(e,t){const n=function(a){return new pe(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function sb(e){const t=pe.fromString(e);return ne(cb(t),10190,{key:t.toString()}),t}function yp(e,t){return iy(e.databaseId,t.path)}function Nm(e,t){const n=sb(t);if(n.get(1)!==e.databaseId.projectId)throw new Et(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Et(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new At(ob(n))}function ab(e,t){return iy(e.databaseId,t)}function W4(e){const t=sb(e);return t.length===4?pe.emptyPath():ob(t)}function _p(e){return new pe(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ob(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function OT(e,t,n){return{name:yp(e,t),fields:n.value.mapValue.fields}}function J4(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Dt(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(ne(y===void 0||typeof y=="string",58123),dn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),dn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const y=p.code===void 0?gt.UNKNOWN:eb(p.code);return new Et(y,p.message||"")}(c);n=new ib(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Nm(e,r.document.name),l=rr(r.document.updateTime),c=r.document.createTime?rr(r.document.createTime):Ot.min(),d=new pi({mapValue:{fields:r.document.fields}}),g=En.newFoundDocument(a,l,c,d),p=r.targetIds||[],y=r.removedTargetIds||[];n=new nf(p,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Nm(e,r.document),l=r.readTime?rr(r.readTime):Ot.min(),c=En.newNoDocument(a,l),d=r.removedTargetIds||[];n=new nf([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Nm(e,r.document),l=r.removedTargetIds||[];n=new nf([],l,a,null)}else{if(!("filter"in t))return Dt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new F4(a,l),d=r.targetId;n=new nb(d,c)}}return n}function tV(e,t){let n;if(t instanceof oc)n={update:OT(e,t.key,t.value)};else if(t instanceof tb)n={delete:yp(e,t.key)};else if(t instanceof za)n={update:OT(e,t.key,t.data),updateMask:uV(t.fieldMask)};else{if(!(t instanceof B4))return Dt(16599,{ft:t.type});n={verify:yp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof Af)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Xu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Qu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Rf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Dt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:Z4(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Dt(27497)}(e,t.precondition)),n}function eV(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?rr(a.updateTime):rr(l);return c.isEqual(Ot.min())&&(c=rr(l)),new L4(c,a.transformResults||[])}(n,t))):[]}function nV(e,t){return{documents:[ab(e,t.path)]}}function iV(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ab(e,a);const l=function(p){if(p.length!==0)return ub(Di.create(p,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(T){return{field:Bo(T.field),direction:aV(T.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=mp(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{gt:n,parent:a}}function rV(e){let t=W4(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ne(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const T=lb(v);return T instanceof Di&&P1(T)?T.getFilters():[T]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(T=>function(O){return new bf(Ho(O.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(T))}(n.orderBy));let d=null;n.limit&&(d=function(v){let T;return T=typeof v=="object"?v.value:v,Yf(T)?null:T}(n.limit));let g=null;n.startAt&&(g=function(v){const T=!!v.before,S=v.values||[];return new Sf(S,T)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const T=!v.before,S=v.values||[];return new Sf(S,T)}(n.endAt)),b4(t,a,c,l,d,"F",g,p)}function sV(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function lb(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ho(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Ho(n.unaryFilter.field);return ze.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ho(n.unaryFilter.field);return ze.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ho(n.unaryFilter.field);return ze.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}}(e):e.fieldFilter!==void 0?function(n){return ze.create(Ho(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Di.create(n.compositeFilter.filters.map(r=>lb(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}}(n.compositeFilter.op))}(e):Dt(30097,{filter:e})}function aV(e){return Y4[e]}function oV(e){return K4[e]}function lV(e){return X4[e]}function Bo(e){return{fieldPath:e.canonicalString()}}function Ho(e){return fn.fromServerFormat(e.fieldPath)}function ub(e){return e instanceof ze?function(n){if(n.op==="=="){if(ET(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NAN"}};if(vT(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ET(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NAN"}};if(vT(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(n.field),op:oV(n.op),value:n.value}}}(e):e instanceof Di?function(n){const r=n.getFilters().map(a=>ub(a));return r.length===1?r[0]:{compositeFilter:{op:lV(n.op),filters:r}}}(e):Dt(54877,{filter:e})}function uV(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function cb(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(t,n,r,a,l=Ot.min(),c=Ot.min(),d=dn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new xs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(t){this.wt=t}}function hV(e){const t=rV({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?gp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.Cn=new dV}addToCollectionParentIndex(t,n){return this.Cn.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(Us.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(Us.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class dV{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new $e(pe.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new $e(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hb=41943040;class Vn{static withCacheSize(t){return new Vn(t,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(hb,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new sl(0)}static lr(){return new sl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="LruGarbageCollector",gV=1048576;function PT([e,t],[n,r]){const a=Bt(e,n);return a===0?Bt(t,r):a}class mV{constructor(t){this.Er=t,this.buffer=new $e(PT),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();PT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pV{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){_t(kT,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fl(n)?_t(kT,"Ignoring IndexedDB error during garbage collection: ",n):await hl(n)}await this.mr(3e5)})}}class yV{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return dt.resolve($f.le);const r=new mV(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(VT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VT):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,g,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(p=Date.now(),Uo()<=$t.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(p-g)+`ms
Total Duration: ${p-y}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function _V(e,t){return new yV(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.changes=new Ua(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,En.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&Vu(r.mutation,a,Ci.empty(),Ge.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Yt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Yt()){const a=Ra();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=Cu();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Ra();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Yt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=jr();const c=Ou(),d=function(){return Ou()}();return n.forEach((g,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof za)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Vu(y.mutation,p,y.mutation.getFieldMask(),Ge.now())):c.set(p.key,Ci.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((p,y)=>c.set(p,y)),n.forEach((p,y)=>{var v;return d.set(p,new EV(y,(v=c.get(p))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Ou();let a=new Se((c,d)=>c-d),l=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const p=n.get(g);if(p===null)return;let y=r.get(g)||Ci.empty();y=d.applyToLocalView(p,y),r.set(g,y);const v=(a.get(d.batchId)||Yt()).add(g);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,y=g.value,v=$1();y.forEach(T=>{if(!l.has(T)){const S=W1(n.get(T),r.get(T));S!==null&&v.set(T,S),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,v))}return dt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return At.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):H1(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):dt.resolve(Ra());let d=Gu,g=l;return c.next(p=>dt.forEach(p,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?dt.resolve():this.remoteDocumentCache.getEntry(t,y).next(T=>{g=g.insert(y,T)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,g,p,Yt())).next(y=>({batchId:d,changes:G1(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new At(n)).next(r=>{let a=Cu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=Cu();return this.indexManager.getCollectionParents(t,l).next(d=>dt.forEach(d,g=>{const p=function(v,T){return new ac(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,r,a).next(y=>{y.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((g,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,En.newInvalidDocument(y)))});let d=Cu();return c.forEach((g,p)=>{const y=l.get(g);y!==void 0&&Vu(y.mutation,p,Ci.empty(),Ge.now()),Qf(n,p)&&(d=d.insert(g,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return dt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:rr(a.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:hV(a.bundledQuery),readTime:rr(a.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.overlays=new Se(At.comparator),this.Qr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ra();return dt.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const a=Ra(),l=n.length+1,c=new At(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return dt.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new Se((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=Ra(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=Ra(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return dt.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new q4(n,r));let l=this.Qr.get(n);l===void 0&&(l=Yt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(t){return dt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.$r=new $e(nn.Ur),this.Kr=new $e(nn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new nn(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new nn(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new At(new pe([])),r=new nn(n,t),a=new nn(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new At(new pe([])),r=new nn(n,t),a=new nn(n,t+1);let l=Yt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new nn(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class nn{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return At.comparator(t.key,n.key)||Bt(t.Zr,n.Zr)}static Wr(t,n){return Bt(t.Zr,n.Zr)||At.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(nn.Ur)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new H4(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new nn(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return dt.resolve(c)}lookupMutationBatch(t,n){return dt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return dt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?Xp:this.nr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new nn(n,0),a=new nn(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),dt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Bt);return n.forEach(a=>{const l=new nn(a,0),c=new nn(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),dt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;At.isDocumentKey(l)||(l=l.child(""));const c=new nn(new At(l),0);let d=new $e(Bt);return this.Xr.forEachWhile(g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(g.Zr)),!0)},c),dt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){ne(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return dt.forEach(n.mutations,a=>{const l=new nn(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new nn(n,0),a=this.Xr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(t){this.ii=t,this.docs=function(){return new Se(At.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():En.newInvalidDocument(n))}getEntries(t,n){let r=jr();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():En.newInvalidDocument(a))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=jr();const c=n.path,d=new At(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:y}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||n4(e4(y),r)<=0||(a.has(y.key)||Qf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return dt.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Dt(9500)}si(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new IV(this)}getSize(t){return dt.resolve(this.size)}}class IV extends vV{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(t){this.persistence=t,this.oi=new Ua(n=>Wp(n),Jp),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this._i=0,this.ai=new ry,this.targetCount=0,this.ui=sl.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),dt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new sl(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.Tr(n),dt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),dt.waitFor(l).next(()=>a)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),dt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t,n){this.ci={},this.overlays={},this.li=new $f(0),this.hi=!1,this.hi=!0,this.Pi=new bV,this.referenceDelegate=t(this),this.Ti=new CV(this),this.indexManager=new fV,this.remoteDocumentCache=function(a){return new RV(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new cV(n),this.Ei=new wV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new SV,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new AV(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){_t("MemoryPersistence","Starting transaction:",t);const a=new xV(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return dt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class xV extends r4{constructor(t){super(),this.currentSequenceNumber=t}}class sy{constructor(t){this.persistence=t,this.Vi=new ry,this.mi=null}static fi(t){return new sy(t)}get gi(){if(this.mi)return this.mi;throw Dt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),dt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.gi,r=>{const a=At.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,Ot.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return dt.or([()=>dt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Cf{constructor(t,n){this.persistence=t,this.yi=new Ua(r=>o4(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=_V(this,n)}static fi(t,n){return new Cf(t,n)}di(){}Ai(t){return dt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return dt.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?dt.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Ot.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Jh(t.data.value)),n}Dr(t,n,r){return dt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return dt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=Yt(),a=Yt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ay(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return AM()?8:s4(Tn())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new NV;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(Uo()<=$t.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),dt.resolve()):(Uo()<=$t.DEBUG&&_t("QueryEngine","Query:",zo(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(Uo()<=$t.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ir(n))):dt.resolve())}ws(t,n){if(bT(n))return dt.resolve(null);let r=ir(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=gp(n,null,"F"),r=ir(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=Yt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const p=this.vs(n,d);return this.Cs(n,p,c,g.readTime)?this.ws(t,gp(n,null,"F")):this.Fs(t,p,n,g)}))})))}bs(t,n,r,a){return bT(n)||a.isEqual(Ot.min())?dt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?dt.resolve(null):(Uo()<=$t.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zo(n)),this.Fs(t,c,n,t4(a,Gu)).next(d=>d))})}vs(t,n){let r=new $e(F1(t));return n.forEach((a,l)=>{Qf(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return Uo()<=$t.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",zo(n)),this.ys.getDocumentsMatchingQuery(t,n,Us.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="LocalStore",MV=3e8;class OV{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new Se(Bt),this.Os=new Ua(l=>Wp(l),Jp),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TV(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function VV(e,t,n,r){return new OV(e,t,n,r)}async function db(e,t){const n=Vt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=Yt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:d}))})})}function kV(e,t){const n=Vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,p,y){const v=p.batch,T=v.keys();let S=dt.resolve();return T.forEach(O=>{S=S.next(()=>y.getEntry(g,O)).next(k=>{const L=p.docVersions.get(O);ne(L!==null,48541),k.version.compareTo(L)<0&&(v.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),y.addEntry(k)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(g,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Yt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function gb(e){const t=Vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function PV(e,t){const n=Vt(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const T=a.get(v);if(!T)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let S=T.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(dn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),a=a.insert(v,S),function(k,L,H){return k.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=MV?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(T,S,y)&&d.push(n.Ti.updateTargetData(l,S))});let g=jr(),p=Yt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(LV(l,c,t.documentUpdates).next(y=>{g=y.qs,p=y.Qs})),!r.isEqual(Ot.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return dt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,g,p)).next(()=>g)}).then(l=>(n.xs=a,l))}function LV(e,t,n){let r=Yt(),a=Yt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=jr();return n.forEach((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):_t(oy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)}),{qs:c,Qs:a}})}function UV(e,t){const n=Vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Xp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function zV(e,t){const n=Vt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,dt.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new xs(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function vp(e,t,n){const r=Vt(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!fl(c))throw c;_t(oy,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function LT(e,t,n){const r=Vt(e);let a=Ot.min(),l=Yt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,p,y){const v=Vt(g),T=v.Os.get(y);return T!==void 0?dt.resolve(v.xs.get(T)):v.Ti.getTargetData(p,y)}(r,c,ir(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:Ot.min(),n?l:Yt())).next(d=>(BV(r,R4(t),d),{documents:d,$s:l})))}function BV(e,t,n){let r=e.Ns.get(t)||Ot.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class UT{constructor(){this.activeTargetIds=M4()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class HV{constructor(){this.xo=new UT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new UT,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="ConnectivityMonitor";class BT{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){_t(zT,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){_t(zT,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function Ep(){return Fh===null?Fh=function(){return 268435456+Math.round(2147483648*Math.random())}():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",FV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jV{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===Tf?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=Ep(),d=this.jo(t,n.toUriEncodedString());_t(Dm,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,a,l);const{host:p}=new URL(d),y=ll(p);return this.Jo(t,d,g,r,y).then(v=>(_t(Dm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw el(Dm,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=FV[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class $V extends jV{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=Ep();return new Promise((d,g)=>{const p=new m1;p.setWithCredentials(!0),p.listenOnce(p1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Wh.NO_ERROR:const v=p.getResponseJson();_t(_n,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case Wh.TIMEOUT:_t(_n,`RPC '${t}' ${c} timed out`),g(new Et(gt.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const T=p.getStatus();if(_t(_n,`RPC '${t}' ${c} failed with status:`,T,"response text:",p.getResponseText()),T>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const O=S?.error;if(O&&O.status&&O.message){const k=function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(q)>=0?q:gt.UNKNOWN}(O.status);g(new Et(k,O.message))}else g(new Et(gt.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new Et(gt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{h_:t,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{_t(_n,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);_t(_n,`RPC '${t}' ${c} sending request:`,a),p.send(n,"POST",y,r,15)})}I_(t,n,r){const a=Ep(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=v1(),d=_1(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=l.join("");_t(_n,`Creating RPC '${t}' stream ${a}: ${y}`,g);const v=c.createWebChannel(y,g);this.E_(v);let T=!1,S=!1;const O=new GV({Zo:L=>{S?_t(_n,`Not sending because RPC '${t}' stream ${a} is closed:`,L):(T||(_t(_n,`Opening RPC '${t}' stream ${a} transport.`),v.open(),T=!0),_t(_n,`RPC '${t}' stream ${a} sending:`,L),v.send(L))},Xo:()=>v.close()}),k=(L,H,q)=>{L.listen(H,F=>{try{q(F)}catch(B){setTimeout(()=>{throw B},0)}})};return k(v,Iu.EventType.OPEN,()=>{S||(_t(_n,`RPC '${t}' stream ${a} transport opened.`),O.__())}),k(v,Iu.EventType.CLOSE,()=>{S||(S=!0,_t(_n,`RPC '${t}' stream ${a} transport closed`),O.u_(),this.d_(v))}),k(v,Iu.EventType.ERROR,L=>{S||(S=!0,el(_n,`RPC '${t}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),O.u_(new Et(gt.UNAVAILABLE,"The operation could not be completed")))}),k(v,Iu.EventType.MESSAGE,L=>{var H;if(!S){const q=L.data[0];ne(!!q,16349);const F=q,B=F?.error||((H=F[0])===null||H===void 0?void 0:H.error);if(B){_t(_n,`RPC '${t}' stream ${a} received error:`,B);const Q=B.status;let X=function(R){const M=Ue[R];if(M!==void 0)return eb(M)}(Q),N=B.message;X===void 0&&(X=gt.INTERNAL,N="Unknown error status: "+Q+" with message "+B.message),S=!0,O.u_(new Et(X,N)),v.close()}else _t(_n,`RPC '${t}' stream ${a} received:`,q),O.c_(q)}}),k(d,y1.STAT_EVENT,L=>{L.stat===op.PROXY?_t(_n,`RPC '${t}' stream ${a} detected buffering proxy`):L.stat===op.NOPROXY&&_t(_n,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.a_()},0),O}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e){return new Q4(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&_t("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="PersistentStream";class pb{constructor(t,n,r,a,l,c,d,g){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new mb(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===gt.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===gt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new Et(gt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return _t(HT,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(_t(HT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YV extends pb{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=J4(this.serializer,t),r=function(l){if(!("targetChange"in l))return Ot.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?rr(c.readTime):Ot.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=_p(this.serializer),n.addTarget=function(l,c){let d;const g=c.target;if(d=fp(g)?{documents:nV(l,g)}:{query:iV(l,g).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=rb(l,c.resumeToken);const p=mp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ot.min())>0){d.readTime=If(l,c.snapshotVersion.toTimestamp());const p=mp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,t);const r=sV(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=_p(this.serializer),n.removeTarget=t,this.Q_(n)}}class KV extends pb{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=eV(t.writeResults,t.commitTime),r=rr(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=_p(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>tV(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{}class QV extends XV{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new Et(gt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,pp(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Et(gt.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,pp(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Et(gt.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class ZV{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Fr(n),this.ua=!1):_t("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="RemoteStore";class WV{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Ba(this)&&(_t(Va,"Restarting streams for network reachability change."),await async function(g){const p=Vt(g);p.da.add(4),await uc(p),p.Va.set("Unknown"),p.da.delete(4),await ed(p)}(this))})}),this.Va=new ZV(r,a)}}async function ed(e){if(Ba(e))for(const t of e.Aa)await t(!0)}async function uc(e){for(const t of e.Aa)await t(!1)}function yb(e,t){const n=Vt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),hy(n)?cy(n):dl(n).N_()&&uy(n,t))}function ly(e,t){const n=Vt(e),r=dl(n);n.Ea.delete(t),r.N_()&&_b(n,t),n.Ea.size===0&&(r.N_()?r.k_():Ba(n)&&n.Va.set("Unknown"))}function uy(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ot.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dl(e).Z_(t)}function _b(e,t){e.ma.Ke(t),dl(e).X_(t)}function cy(e){e.ma=new $4({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),dl(e).start(),e.Va.ca()}function hy(e){return Ba(e)&&!dl(e).O_()&&e.Ea.size>0}function Ba(e){return Vt(e).da.size===0}function vb(e){e.ma=void 0}async function JV(e){e.Va.set("Online")}async function t3(e){e.Ea.forEach((t,n)=>{uy(e,t)})}async function e3(e,t){vb(e),hy(e)?(e.Va.Pa(t),cy(e)):e.Va.set("Unknown")}async function n3(e,t,n){if(e.Va.set("Online"),t instanceof ib&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){_t(Va,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await xf(e,r)}else if(t instanceof nf?e.ma.Xe(t):t instanceof nb?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Ot.min()))try{const r=await gb(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,p)=>{const y=l.Ea.get(g);if(!y)return;l.Ea.set(g,y.withResumeToken(dn.EMPTY_BYTE_STRING,y.snapshotVersion)),_b(l,g);const v=new xs(y.target,g,p,y.sequenceNumber);uy(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){_t(Va,"Failed to raise snapshot:",r),await xf(e,r)}}async function xf(e,t,n){if(!fl(t))throw t;e.da.add(1),await uc(e),e.Va.set("Offline"),n||(n=()=>gb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{_t(Va,"Retrying IndexedDB access"),await n(),e.da.delete(1),await ed(e)})}function Eb(e,t){return t().catch(n=>xf(e,n,t))}async function nd(e){const t=Vt(e),n=qs(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Xp;for(;i3(t);)try{const a=await UV(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,r3(t,a)}catch(a){await xf(t,a)}Tb(t)&&wb(t)}function i3(e){return Ba(e)&&e.Ia.length<10}function r3(e,t){e.Ia.push(t);const n=qs(e);n.N_()&&n.ea&&n.ta(t.mutations)}function Tb(e){return Ba(e)&&!qs(e).O_()&&e.Ia.length>0}function wb(e){qs(e).start()}async function s3(e){qs(e).ia()}async function a3(e){const t=qs(e);for(const n of e.Ia)t.ta(n.mutations)}async function o3(e,t,n){const r=e.Ia.shift(),a=ey.from(r,t,n);await Eb(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await nd(e)}async function l3(e,t){t&&qs(e).ea&&await async function(r,a){if(function(c){return j4(c)&&c!==gt.ABORTED}(a.code)){const l=r.Ia.shift();qs(r).L_(),await Eb(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await nd(r)}}(e,t),Tb(e)&&wb(e)}async function qT(e,t){const n=Vt(e);n.asyncQueue.verifyOperationInProgress(),_t(Va,"RemoteStore received new credentials");const r=Ba(n);n.da.add(3),await uc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await ed(n)}async function u3(e,t){const n=Vt(e);t?(n.da.delete(2),await ed(n)):t||(n.da.add(2),await uc(n),n.Va.set("Unknown"))}function dl(e){return e.fa||(e.fa=function(n,r,a){const l=Vt(n);return l.oa(),new YV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:JV.bind(null,e),n_:t3.bind(null,e),i_:e3.bind(null,e),Y_:n3.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),hy(e)?cy(e):e.Va.set("Unknown")):(await e.fa.stop(),vb(e))})),e.fa}function qs(e){return e.ga||(e.ga=function(n,r,a){const l=Vt(n);return l.oa(),new KV(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:s3.bind(null,e),i_:l3.bind(null,e),na:a3.bind(null,e),ra:o3.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await nd(e)):(await e.ga.stop(),e.Ia.length>0&&(_t(Va,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new fy(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(gt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(e,t){if(Fr("AsyncQueue",`${t}: ${e}`),fl(e))return new Et(gt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(t){return new Yo(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=Cu(),this.sortedSet=new Se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Yo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Yo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.pa=new Se(At.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Dt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class al{constructor(t,n,r,a,l,c,d,g,p){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new al(t,n,Yo.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class h3{constructor(){this.queries=jT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Vt(n),l=a.queries;a.queries=jT(),l.forEach((c,d)=>{for(const g of d.Sa)g.onError(r)})})(this,new Et(gt.ABORTED,"Firestore shutting down"))}}function jT(){return new Ua(e=>q1(e),Xf)}async function f3(e,t){const n=Vt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new c3,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=dy(c,`Initialization of query '${zo(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&gy(n)}async function d3(e,t){const n=Vt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function g3(e,t){const n=Vt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&gy(n)}function m3(e,t,n){const r=Vt(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function gy(e){e.Ca.forEach(t=>{t.next()})}var Tp,GT;(GT=Tp||(Tp={})).xa="default",GT.Cache="cache";class p3{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new al(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=al.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==Tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t){this.key=t}}class bb{constructor(t){this.key=t}}class y3{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yt(),this.mutatedKeys=Yt(),this.Za=F1(t),this.Xa=new Yo(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new FT,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const T=a.get(y),S=Qf(this.query,v)?v:null,O=!!T&&this.mutatedKeys.has(T.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let L=!1;T&&S?T.data.isEqual(S.data)?O!==k&&(r.track({type:3,doc:S}),L=!0):this.ru(T,S)||(r.track({type:2,doc:S}),L=!0,(g&&this.Za(S,g)>0||p&&this.Za(S,p)<0)&&(d=!0)):!T&&S?(r.track({type:0,doc:S}),L=!0):T&&!S&&(r.track({type:1,doc:T}),L=!0,(g||p)&&(d=!0)),L&&(S?(c=c.add(S),l=k?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(S,O){const k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Vt:L})}};return k(S)-k(O)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],g=this.Ya.size===0&&this.current&&!a?1:0,p=g!==this.Ja;return this.Ja=g,c.length!==0||p?{snapshot:new al(this.query,t.Xa,l,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new FT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Yt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new bb(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new Sb(r))}),n}au(t){this.Ha=t.$s,this.Ya=Yt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return al.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const my="SyncEngine";class _3{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class v3{constructor(t){this.key=t,this.cu=!1}}class E3{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new Ua(d=>q1(d),Xf),this.Pu=new Map,this.Tu=new Set,this.Iu=new Se(At.comparator),this.Eu=new Map,this.du=new ry,this.Au={},this.Ru=new Map,this.Vu=sl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function T3(e,t,n=!0){const r=Nb(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await Ab(r,t,n,!0),a}async function w3(e,t){const n=Nb(e);await Ab(n,t,!0,!1)}async function Ab(e,t,n,r){const a=await zV(e.localStore,ir(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await S3(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&yb(e.remoteStore,a),d}async function S3(e,t,n,r,a){e.fu=(v,T,S)=>async function(k,L,H,q){let F=L.view.tu(H);F.Cs&&(F=await LT(k.localStore,L.query,!1).then(({documents:N})=>L.view.tu(N,F)));const B=q&&q.targetChanges.get(L.targetId),Q=q&&q.targetMismatches.get(L.targetId)!=null,X=L.view.applyChanges(F,k.isPrimaryClient,B,Q);return YT(k,L.targetId,X.ou),X.snapshot}(e,v,T,S);const l=await LT(e.localStore,t,!0),c=new y3(t,l.$s),d=c.tu(l.documents),g=lc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),p=c.applyChanges(d,e.isPrimaryClient,g);YT(e,n,p.ou);const y=new _3(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),p.snapshot}async function b3(e,t,n){const r=Vt(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!Xf(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await vp(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&ly(r.remoteStore,a.targetId),wp(r,a.targetId)}).catch(hl)):(wp(r,a.targetId),await vp(r.localStore,a.targetId,!0))}async function A3(e,t){const n=Vt(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ly(n.remoteStore,r.targetId))}async function R3(e,t,n){const r=O3(e);try{const a=await function(c,d){const g=Vt(c),p=Ge.now(),y=d.reduce((S,O)=>S.add(O.key),Yt());let v,T;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>{let O=jr(),k=Yt();return g.Bs.getEntries(S,y).next(L=>{O=L,O.forEach((H,q)=>{q.isValidDocument()||(k=k.add(H))})}).next(()=>g.localDocuments.getOverlayedDocuments(S,O)).next(L=>{v=L;const H=[];for(const q of d){const F=z4(q,v.get(q.key).overlayedDocument);F!=null&&H.push(new za(q.key,F,O1(F.value.mapValue),Ur.exists(!0)))}return g.mutationQueue.addMutationBatch(S,p,H,d)}).next(L=>{T=L;const H=L.applyToLocalDocumentSet(v,k);return g.documentOverlayCache.saveOverlays(S,L.batchId,H)})}).then(()=>({batchId:T.batchId,changes:G1(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let p=c.Au[c.currentUser.toKey()];p||(p=new Se(Bt)),p=p.insert(d,g),c.Au[c.currentUser.toKey()]=p}(r,a.batchId,n),await cc(r,a.changes),await nd(r.remoteStore)}catch(a){const l=dy(a,"Failed to persist write");n.reject(l)}}async function Rb(e,t){const n=Vt(e);try{const r=await PV(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ne(c.cu,14607):a.removedDocuments.size>0&&(ne(c.cu,42227),c.cu=!1))}),await cc(n,r,t)}catch(r){await hl(r)}}function $T(e,t,n){const r=Vt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=Vt(c);g.onlineState=d;let p=!1;g.queries.forEach((y,v)=>{for(const T of v.Sa)T.Fa(d)&&(p=!0)}),p&&gy(g)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function I3(e,t,n){const r=Vt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new Se(At.comparator);c=c.insert(l,En.newNoDocument(l,Ot.min()));const d=Yt().add(l),g=new Jf(Ot.min(),new Map,new Se(Bt),c,d);await Rb(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(t),py(r)}else await vp(r.localStore,t,!1).then(()=>wp(r,t,n)).catch(hl)}async function C3(e,t){const n=Vt(e),r=t.batch.batchId;try{const a=await kV(n.localStore,t);Cb(n,r,null),Ib(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cc(n,a)}catch(a){await hl(a)}}async function x3(e,t,n){const r=Vt(e);try{const a=await function(c,d){const g=Vt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return g.mutationQueue.lookupMutationBatch(p,d).next(v=>(ne(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(p,v))).next(()=>g.mutationQueue.performConsistencyCheck(p)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>g.localDocuments.getDocuments(p,y))})}(r.localStore,t);Cb(r,t,n),Ib(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await cc(r,a)}catch(a){await hl(a)}}function Ib(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function Cb(e,t,n){const r=Vt(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function wp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||xb(e,r)})}function xb(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(ly(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),py(e))}function YT(e,t,n){for(const r of n)r instanceof Sb?(e.du.addReference(r.key,t),N3(e,r)):r instanceof bb?(_t(my,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||xb(e,r.key)):Dt(19791,{pu:r})}function N3(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(_t(my,"New document in limbo: "+n),e.Tu.add(r),py(e))}function py(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new At(pe.fromString(t)),r=e.Vu.next();e.Eu.set(r,new v3(n)),e.Iu=e.Iu.insert(n,r),yb(e.remoteStore,new xs(ir(B1(n.path)),r,"TargetPurposeLimboResolution",$f.le))}}async function cc(e,t,n){const r=Vt(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,g)=>{c.push(r.fu(g,t,n).then(p=>{var y;if((p||n)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=n?.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(p){a.push(p);const v=ay.Rs(g.targetId,p);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(g,p){const y=Vt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>dt.forEach(p,T=>dt.forEach(T.ds,S=>y.persistence.referenceDelegate.addReference(v,T.targetId,S)).next(()=>dt.forEach(T.As,S=>y.persistence.referenceDelegate.removeReference(v,T.targetId,S)))))}catch(v){if(!fl(v))throw v;_t(oy,"Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const S=y.xs.get(T),O=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(O);y.xs=y.xs.insert(T,k)}}}(r.localStore,l))}async function D3(e,t){const n=Vt(e);if(!n.currentUser.isEqual(t)){_t(my,"User change. New user:",t.toKey());const r=await db(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(g=>{g.reject(new Et(gt.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await cc(n,r.ks)}}function M3(e,t){const n=Vt(e),r=n.Eu.get(t);if(r&&r.cu)return Yt().add(r.key);{let a=Yt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function Nb(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=M3.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=I3.bind(null,t),t.lu.Y_=g3.bind(null,t.eventManager),t.lu.gu=m3.bind(null,t.eventManager),t}function O3(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=C3.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=x3.bind(null,t),t}class Nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=td(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return VV(this.persistence,new DV,t.initialUser,this.serializer)}Su(t){return new fb(sy.fi,this.serializer)}bu(t){return new HV}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nf.provider={build:()=>new Nf};class V3 extends Nf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ne(this.persistence.referenceDelegate instanceof Cf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pV(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new fb(r=>Cf.fi(r,n),this.serializer)}}class Sp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$T(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D3.bind(null,this.syncEngine),await u3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new h3}()}createDatastore(t){const n=td(t.databaseInfo.databaseId),r=function(l){return new $V(l)}(t.databaseInfo);return function(l,c,d,g){return new QV(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new WV(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>$T(this.syncEngine,n,0),function(){return BT.C()?new BT:new qV}())}createSyncEngine(t,n){return function(a,l,c,d,g,p,y){const v=new E3(a,l,c,d,g,p);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=Vt(a);_t(Va,"RemoteStore shutting down."),l.da.add(5),await uc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sp.provider={build:()=>new Sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):Fr("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class P3{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=vn.UNAUTHENTICATED,this.clientId=S1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{_t(Fs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(_t(Fs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=dy(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Om(e,t){e.asyncQueue.verifyOperationInProgress(),_t(Fs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await db(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function KT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await L3(e);_t(Fs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>qT(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>qT(t.remoteStore,a)),e._onlineComponents=t}async function L3(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_t(Fs,"Using user provided OfflineComponentProvider");try{await Om(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===gt.FAILED_PRECONDITION||a.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;el("Error using user provided cache. Falling back to memory cache: "+n),await Om(e,new Nf)}}else _t(Fs,"Using default OfflineComponentProvider"),await Om(e,new V3(void 0));return e._offlineComponents}async function Db(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(_t(Fs,"Using user provided OnlineComponentProvider"),await KT(e,e._uninitializedComponentsProvider._online)):(_t(Fs,"Using default OnlineComponentProvider"),await KT(e,new Sp))),e._onlineComponents}function U3(e){return Db(e).then(t=>t.syncEngine)}async function z3(e){const t=await Db(e),n=t.eventManager;return n.onListen=T3.bind(null,t.syncEngine),n.onUnlisten=b3.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=w3.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=A3.bind(null,t.syncEngine),n}function B3(e,t,n={}){const r=new ks;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,p){const y=new k3({next:T=>{y.xu(),c.enqueueAndForget(()=>d3(l,v)),T.fromCache&&g.source==="server"?p.reject(new Et(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new p3(d,y,{includeMetadataChanges:!0,Qa:!0});return f3(l,v)}(await z3(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(e,t,n){if(!n)throw new Et(gt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function H3(e,t,n,r){if(t===!0&&r===!0)throw new Et(gt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function QT(e){if(!At.isDocumentKey(e))throw new Et(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ZT(e){if(At.isDocumentKey(e))throw new Et(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function id(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dt(12329,{type:typeof e})}function Zu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(e);throw new Et(gt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firestore.googleapis.com",WT=!0;class JT{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vb,this.ssl=WT}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:WT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=hb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<gV)throw new Et(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}H3("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Et(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Et(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Et(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rd{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GO;switch(r.type){case"firstParty":return new XO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=XT.get(n);r&&(_t("ComponentProvider","Removing Datastore"),XT.delete(n),r.terminate())}(this),Promise.resolve()}}function q3(e,t,n,r={}){var a;e=Zu(e,rd);const l=ll(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),g=`${t}:${n}`;l&&(a1(`https://${g}`),o1("Firestore",!0)),c.host!==Vb&&c.host!==g&&el("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:g,ssl:l,emulatorOptions:r});if(!Da(p,d)&&(e._setSettings(p),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=vn.MOCK_USER;else{y=pM(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Et(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new vn(T)}e._authCredentials=new $O(new T1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new gl(this.firestore,t,this._query)}}class Xn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xn(this.firestore,t,this._key)}}class Ps extends gl{constructor(t,n,r){super(t,n,B1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xn(this.firestore,null,new At(t))}withConverter(t){return new Ps(this.firestore,t,this._path)}}function Vm(e,t,...n){if(e=xn(e),Ob("collection","path",t),e instanceof rd){const r=pe.fromString(t,...n);return ZT(r),new Ps(e,null,r)}{if(!(e instanceof Xn||e instanceof Ps))throw new Et(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return ZT(r),new Ps(e.firestore,null,r)}}function km(e,t,...n){if(e=xn(e),arguments.length===1&&(t=S1.newId()),Ob("doc","path",t),e instanceof rd){const r=pe.fromString(t,...n);return QT(r),new Xn(e,null,new At(r))}{if(!(e instanceof Xn||e instanceof Ps))throw new Et(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pe.fromString(t,...n));return QT(r),new Xn(e.firestore,e instanceof Ps?e.converter:null,new At(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="AsyncQueue";class ew{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new mb(this,"async_queue_retry"),this.rc=()=>{const r=Mm();r&&_t(tw,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new ks;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!fl(t))throw t;_t(tw,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,Fr("INTERNAL UNHANDLED ERROR: ",nw(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=fy.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Dt(47125,{cc:nw(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function nw(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class yy extends rd{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new ew,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ew(t),this._firestoreClient=void 0,await t}}}function F3(e,t){const n=typeof e=="object"?e:h1(),r=typeof e=="string"?e:Tf,a=Yp(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=gM("firestore");l&&q3(a,...l)}return a}function kb(e){if(e._terminated)throw new Et(gt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||j3(e),e._firestoreClient}function j3(e){var t,n,r;const a=e._freezeSettings(),l=function(d,g,p,y){return new c4(d,g,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Mb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new P3(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const g=d?._online.build();return{_offline:d?._offline.build(g),_online:g}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ol(dn.fromBase64String(t))}catch(n){throw new Et(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ol(dn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=/^__.*__$/;class $3{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new za(t,this.data,this.fieldMask,n,this.fieldTransforms):new oc(t,this.data,n,this.fieldTransforms)}}function Lb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ic:e})}}class Ty{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Ty(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Df(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(Lb(this.Ic)&&G3.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class Y3{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||td(t)}bc(t,n,r,a=!1){return new Ty({Ic:t,methodName:n,wc:r,path:fn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ub(e){const t=e._freezeSettings(),n=td(e._databaseId);return new Y3(e._databaseId,!!t.ignoreUndefinedProperties,n)}function K3(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);Hb("Data must be an object, but it was:",c,r);const d=zb(r,c);let g,p;if(l.merge)g=new Ci(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const T=Q3(t,v,n);if(!c.contains(T))throw new Et(gt.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);W3(y,T)||y.push(T)}g=new Ci(y),p=c.fieldTransforms.filter(v=>g.covers(v.field))}else g=null,p=c.fieldTransforms;return new $3(new pi(d),g,p)}function X3(e,t,n,r=!1){return wy(n,e.bc(r?4:3,t))}function wy(e,t){if(Bb(e=xn(e)))return Hb("Unsupported field value:",t,e),zb(e,t);if(e instanceof Pb)return function(r,a){if(!Lb(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let g=wy(d,a.fc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return O4(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Ge.fromDate(r);return{timestampValue:If(a.serializer,l)}}if(r instanceof Ge){const l=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:If(a.serializer,l)}}if(r instanceof vy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ol)return{bytesValue:rb(a.serializer,r._byteString)};if(r instanceof Xn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:iy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ey)return function(c,d){return{mapValue:{fields:{[D1]:{stringValue:M1},[wf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.gc("VectorValues must only contain numeric values.");return ty(d.serializer,p)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${id(r)}`)}(e,t)}function zb(e,t){const n={};return A1(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):La(e,(r,a)=>{const l=wy(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function Bb(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ge||e instanceof vy||e instanceof ol||e instanceof Xn||e instanceof Pb||e instanceof Ey)}function Hb(e,t,n){if(!Bb(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=id(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Q3(e,t,n){if((t=xn(t))instanceof _y)return t._internalPath;if(typeof t=="string")return qb(e,t);throw Df("Field path arguments must be of type string or ",e,!1,void 0,n)}const Z3=new RegExp("[~\\*/\\[\\]]");function qb(e,t,n){if(t.search(Z3)>=0)throw Df(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new _y(...t.split("."))._internalPath}catch{throw Df(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Df(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new Et(gt.INVALID_ARGUMENT,d+e+g)}function W3(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new J3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Sy("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J3 extends Fb{data(){return super.data()}}function Sy(e,t){return typeof t=="string"?qb(e,t):t instanceof _y?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class ek extends by{}function nk(e,t,...n){let r=[];t instanceof by&&r.push(t),r=r.concat(n),function(l){const c=l.filter(g=>g instanceof Ay).length,d=l.filter(g=>g instanceof sd).length;if(c>1||c>0&&d>0)throw new Et(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class sd extends ek{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new sd(t,n,r)}_apply(t){const n=this._parse(t);return jb(t._query,n),new gl(t.firestore,t.converter,dp(t._query,n))}_parse(t){const n=Ub(t.firestore);return function(l,c,d,g,p,y,v){let T;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Et(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){sw(v,y);const O=[];for(const k of v)O.push(rw(g,l,k));T={arrayValue:{values:O}}}else T=rw(g,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||sw(v,y),T=X3(d,c,v,y==="in"||y==="not-in");return ze.create(p,y,T)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function iw(e,t,n){const r=t,a=Sy("where",e);return sd._create(a,r,n)}class Ay extends by{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ay(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Di.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const g of d)jb(c,g),c=dp(c,g)}(t._query,n),new gl(t.firestore,t.converter,dp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rw(e,t,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new Et(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H1(t)&&n.indexOf("/")!==-1)throw new Et(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pe.fromString(n));if(!At.isDocumentKey(r))throw new Et(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _T(e,new At(r))}if(n instanceof Xn)return _T(e,n._key);throw new Et(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function sw(e,t){if(!Array.isArray(e)||e.length===0)throw new Et(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function jb(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Et(gt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Et(gt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ik{convertValue(t,n="none"){switch(Hs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Me(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Dt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return La(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[wf].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Me(c.doubleValue));return new Ey(l)}convertGeoPoint(t){return new vy(Me(t.latitude),Me(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Kf(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($u(t));default:return null}}convertTimestamp(t){const n=zs(t);return new Ge(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=pe.fromString(t);ne(cb(r),9688,{name:t});const a=new Yu(r.get(1),r.get(3)),l=new At(r.popFirst(5));return a.isEqual(n)||Fr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(e,t,n){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sk extends Fb{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Sy("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class rf extends sk{data(t={}){return super.data(t)}}class ak{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new jh(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new rf(this._firestore,this._userDataWriter,r.key,r,new jh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new jh(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:ok(d.type),doc:g,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ok(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:e})}}class lk extends ik{constructor(t){super(),this.firestore=t}convertBytes(t){return new ol(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Xn(this.firestore,null,n)}}function Pm(e){e=Zu(e,gl);const t=Zu(e.firestore,yy),n=kb(t),r=new lk(t);return tk(e._query),B3(n,e._query).then(a=>new ak(t,r,e,a))}function Lm(e,t,n){e=Zu(e,Xn);const r=Zu(e.firestore,yy),a=rk(e.converter,t);return uk(r,[K3(Ub(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,Ur.none())])}function uk(e,t){return function(r,a){const l=new ks;return r.asyncQueue.enqueueAndForget(async()=>R3(await U3(r),a,l)),l.promise}(kb(e),t)}(function(t,n=!0){(function(a){cl=a})(ul),tl(new Ma("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new yy(new YO(r.getProvider("auth-internal")),new QO(c,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Et(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yu(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Os(aT,oT,t),Os(aT,oT,"esm2017")})();function Ry(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ck=Gb,$b=new rc("auth","Firebase",Gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=new Gp("@firebase/auth");function hk(e,...t){Mf.logLevel<=$t.WARN&&Mf.warn(`Auth (${ul}): ${e}`,...t)}function sf(e,...t){Mf.logLevel<=$t.ERROR&&Mf.error(`Auth (${ul}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(e,...t){throw Iy(e,...t)}function sr(e,...t){return Iy(e,...t)}function Yb(e,t,n){const r=Object.assign(Object.assign({},ck()),{[t]:n});return new rc("auth","Firebase",r).create(t,{appName:e.name})}function zr(e){return Yb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return $b.create(e,...t)}function Nt(e,t,...n){if(!e)throw Iy(t,...n)}function kr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw sf(t),new Error(t)}function Gr(e,t){e||kr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function fk(){return aw()==="http:"||aw()==="https:"}function aw(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fk()||wM()||"connection"in navigator)?navigator.onLine:!0}function gk(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gr(n>t,"Short delay should be less than long delay!"),this.isMobile=vM()||SM()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(e,t){Gr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yk=new hc(3e4,6e4);function js(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gs(e,t,n,r,a={}){return Xb(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=sc(Object.assign({key:e.config.apiKey},c)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const p=Object.assign({method:t,headers:g},l);return TM()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&ll(e.emulatorConfig.host)&&(p.credentials="include"),Kb.fetch()(await Qb(e,e.config.apiHost,n,d),p)})}async function Xb(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},mk),t);try{const a=new vk(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Gh(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gh(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Gh(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw Gh(e,"user-disabled",c);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Yb(e,y,p);Mi(e,y)}}catch(a){if(a instanceof $r)throw a;Mi(e,"network-request-failed",{message:String(a)})}}async function fc(e,t,n,r,a={}){const l=await Gs(e,t,n,r,a);return"mfaPendingCredential"in l&&Mi(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function Qb(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?Cy(e.config,a):`${e.config.apiScheme}://${a}`;return pk.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function _k(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sr(this.auth,"network-request-failed")),yk.get())})}}function Gh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=sr(e,t,r);return a.customData._tokenResponse=n,a}function ow(e){return e!==void 0&&e.enterprise!==void 0}class Ek{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return _k(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Tk(e,t){return Gs(e,"GET","/v2/recaptchaConfig",js(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(e,t){return Gs(e,"POST","/v1/accounts:delete",t)}async function Of(e,t){return Gs(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Sk(e,t=!1){const n=xn(e),r=await n.getIdToken(t),a=xy(r);Nt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:ku(Um(a.auth_time)),issuedAtTime:ku(Um(a.iat)),expirationTime:ku(Um(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Um(e){return Number(e)*1e3}function xy(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=n1(n);return a?JSON.parse(a):(sf("Failed to decode base64 JWT payload"),null)}catch(a){return sf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function lw(e){const t=xy(e);return Nt(t,"internal-error"),Nt(typeof t.exp<"u","internal-error"),Nt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof $r&&bk(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function bk({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(e){var t;const n=e.auth,r=await e.getIdToken(),a=await Wu(e,Of(n,{idToken:r}));Nt(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?Zb(l.providerUserInfo):[],d=Ik(e.providerData,c),g=e.isAnonymous,p=!(e.email&&l.passwordHash)&&!d?.length,y=g?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ap(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function Rk(e){const t=xn(e);await Vf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ik(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function Zb(e){return e.map(t=>{var{providerId:n}=t,r=Ry(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(e,t){const n=await Xb(e,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await Qb(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return e.emulatorConfig&&ll(e.emulatorConfig.host)&&(g.credentials="include"),Kb.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xk(e,t){return Gs(e,"POST","/v2/accounts:revokeToken",js(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Nt(t.idToken,"internal-error"),Nt(typeof t.idToken<"u","internal-error"),Nt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):lw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Nt(t.length!==0,"internal-error");const n=lw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Nt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await Ck(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new Ko;return r&&(Nt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Nt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Nt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e,t){Nt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class xi{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=Ry(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ak(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ap(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Wu(this,this.stsTokenManager.getToken(this.auth,t));return Nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Sk(this,t)}reload(){return Rk(this)}_assign(t){this!==t&&(Nt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new xi(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Vf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mi(this.auth.app))return Promise.reject(zr(this.auth));const t=await this.getIdToken();return await Wu(this,wk(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,g,p,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,T=(a=n.email)!==null&&a!==void 0?a:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,O=(c=n.photoURL)!==null&&c!==void 0?c:void 0,k=(d=n.tenantId)!==null&&d!==void 0?d:void 0,L=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,H=(p=n.createdAt)!==null&&p!==void 0?p:void 0,q=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:F,emailVerified:B,isAnonymous:Q,providerData:X,stsTokenManager:N}=n;Nt(F&&N,t,"internal-error");const A=Ko.fromJSON(this.name,N);Nt(typeof F=="string",t,"internal-error"),Es(v,t.name),Es(T,t.name),Nt(typeof B=="boolean",t,"internal-error"),Nt(typeof Q=="boolean",t,"internal-error"),Es(S,t.name),Es(O,t.name),Es(k,t.name),Es(L,t.name),Es(H,t.name),Es(q,t.name);const R=new xi({uid:F,auth:t,email:T,emailVerified:B,displayName:v,isAnonymous:Q,photoURL:O,phoneNumber:S,tenantId:k,stsTokenManager:A,createdAt:H,lastLoginAt:q});return X&&Array.isArray(X)&&(R.providerData=X.map(M=>Object.assign({},M))),L&&(R._redirectEventId=L),R}static async _fromIdTokenResponse(t,n,r=!1){const a=new Ko;a.updateFromServerResponse(n);const l=new xi({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Vf(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];Nt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Zb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Ko;d.updateFromIdToken(r);const g=new xi({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ap(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map;function Pr(e){Gr(e instanceof Function,"Expected a class definition");let t=uw.get(e);return t?(Gr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,uw.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Wb.type="NONE";const cw=Wb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(e,t,n){return`firebase:${e}:${t}:${n}`}class Xo{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=af(this.userKey,a.apiKey,l),this.fullPersistenceKey=af("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Of(this.auth,{idToken:t}).catch(()=>{});return n?xi._fromGetAccountInfoResponse(this.auth,n,t):null}return xi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Xo(Pr(cw),t,r);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Pr(cw);const c=af(r,t.config.apiKey,t.name);let d=null;for(const p of n)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const T=await Of(t,{idToken:y}).catch(()=>{});if(!T)break;v=await xi._fromGetAccountInfoResponse(t,T,y)}else v=xi._fromJSON(t,y);p!==l&&(d=v),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Xo(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Xo(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Jb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rA(t))return"Blackberry";if(sA(t))return"Webos";if(tA(t))return"Safari";if((t.includes("chrome/")||eA(t))&&!t.includes("edge/"))return"Chrome";if(iA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function Jb(e=Tn()){return/firefox\//i.test(e)}function tA(e=Tn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eA(e=Tn()){return/crios\//i.test(e)}function nA(e=Tn()){return/iemobile/i.test(e)}function iA(e=Tn()){return/android/i.test(e)}function rA(e=Tn()){return/blackberry/i.test(e)}function sA(e=Tn()){return/webos/i.test(e)}function Ny(e=Tn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nk(e=Tn()){var t;return Ny(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Dk(){return bM()&&document.documentMode===10}function aA(e=Tn()){return Ny(e)||iA(e)||sA(e)||rA(e)||/windows phone/i.test(e)||nA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(e,t=[]){let n;switch(e){case"Browser":n=hw(Tn());break;case"Worker":n=`${hw(Tn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(e,t={}){return Gs(e,"GET","/v2/passwordPolicy",js(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=6;class kk{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:Vk,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fw(this),this.idTokenSubscription=new fw(this),this.beforeStateQueue=new Mk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Xo.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Of(this,{idToken:t}),r=await xi._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(mi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Vf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=gk()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(mi(this.app))return Promise.reject(zr(this));const n=t?xn(t):null;return n&&Nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Nt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return mi(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return mi(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ok(this),n=new kk(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new rc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xk(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Pr(t)||this._popupRedirectResolver;Nt(n,this,"argument-error"),this.redirectPersistenceManager=await Xo.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Nt(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=oA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(mi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&hk(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ha(e){return xn(e)}class fw{constructor(t){this.auth=t,this.observer=null,this.addObserver=MM(n=>this.observer=n)}get next(){return Nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lk(e){ad=e}function lA(e){return ad.loadJS(e)}function Uk(){return ad.recaptchaEnterpriseScript}function zk(){return ad.gapiScript}function Bk(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class Hk{constructor(){this.enterprise=new qk}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class qk{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Fk="recaptcha-enterprise",uA="NO_RECAPTCHA";class jk{constructor(t){this.type=Fk,this.auth=Ha(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Tk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new Ek(g);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(g=>{d(g)})})}function a(l,c,d){const g=window.grecaptcha;ow(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:t}).then(p=>{c(p)}).catch(()=>{c(uA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Hk().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&ow(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Uk();g.length!==0&&(g+=d),lA(g).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function dw(e,t,n,r=!1,a=!1){const l=new jk(e);let c;if(a)c=uA;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Rp(e,t,n,r,a){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await dw(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await dw(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(e,t){const n=Yp(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Da(l,t??{}))return a;Mi(a,"already-initialized")}return n.initialize({options:t})}function $k(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Pr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Yk(e,t,n){const r=Ha(e);Nt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=cA(t),{host:c,port:d}=Kk(t),g=d===null?"":`:${d}`,p={url:`${l}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Nt(Da(p,r.config.emulator)&&Da(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,ll(c)?(a1(`${l}//${c}${g}`),o1("Auth",!0)):Xk()}function cA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Kk(e){const t=cA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:gw(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:gw(c)}}}function gw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Xk(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(t){return kr("not implemented")}_linkToIdToken(t,n){return kr("not implemented")}_getReauthenticationResolver(t){return kr("not implemented")}}async function Qk(e,t){return Gs(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(e,t){return fc(e,"POST","/v1/accounts:signInWithPassword",js(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(e,t){return fc(e,"POST","/v1/accounts:signInWithEmailLink",js(e,t))}async function Jk(e,t){return fc(e,"POST","/v1/accounts:signInWithEmailLink",js(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Dy{constructor(t,n,r,a=null){super("password",r),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new Ju(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Ju(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rp(t,n,"signInWithPassword",Zk);case"emailLink":return Wk(t,{email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rp(t,r,"signUpPassword",Qk);case"emailLink":return Jk(t,{idToken:n,email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(e,t){return fc(e,"POST","/v1/accounts:signInWithIdp",js(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="http://localhost";class ka extends Dy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ka(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=Ry(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new ka(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return Qo(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Qo(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Qo(t,n)}buildRequest(){const t={requestUri:tP,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=sc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nP(e){const t=Au(Ru(e)).link,n=t?Au(Ru(t)).deep_link_id:null,r=Au(Ru(e)).deep_link_id;return(r?Au(Ru(r)).link:null)||r||n||t||e}class My{constructor(t){var n,r,a,l,c,d;const g=Au(Ru(t)),p=(n=g.apiKey)!==null&&n!==void 0?n:null,y=(r=g.oobCode)!==null&&r!==void 0?r:null,v=eP((a=g.mode)!==null&&a!==void 0?a:null);Nt(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=nP(t);try{return new My(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(t,n){return Ju._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=My.parseLink(n);return Nt(r,"argument-error"),Ju._fromEmailAndCode(t,r.code,r.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends hA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends dc{constructor(){super("facebook.com")}static credential(t){return ka._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return As.credentialFromTaggedObject(t)}static credentialFromError(t){return As.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return As.credential(t.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends dc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ka._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Rs.credentialFromTaggedObject(t)}static credentialFromError(t){return Rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Rs.credential(n,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends dc{constructor(){super("github.com")}static credential(t){return ka._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Is.credential(t.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends dc{constructor(){super("twitter.com")}static credential(t,n){return ka._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(e,t){return fc(e,"POST","/v1/accounts:signUp",js(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await xi._fromIdTokenResponse(t,r,a),c=mw(r);return new Pa({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=mw(r);return new Pa({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function mw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends $r{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new kf(t,n,r,a)}}function fA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(e,l,t,r):l})}async function rP(e,t,n=!1){const r=await Wu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Pa._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(e,t,n=!1){const{auth:r}=e;if(mi(r.app))return Promise.reject(zr(r));const a="reauthenticate";try{const l=await Wu(e,fA(r,a,t,e),n);Nt(l.idToken,r,"internal-error");const c=xy(l.idToken);Nt(c,r,"internal-error");const{sub:d}=c;return Nt(e.uid===d,r,"user-mismatch"),Pa._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Mi(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(e,t,n=!1){if(mi(e.app))return Promise.reject(zr(e));const r="signIn",a=await fA(e,r,t),l=await Pa._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}async function aP(e,t){return dA(Ha(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(e){const t=Ha(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function oP(e,t,n){if(mi(e.app))return Promise.reject(zr(e));const r=Ha(e),c=await Rp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iP).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&gA(e),g}),d=await Pa._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function lP(e,t,n){return mi(e.app)?Promise.reject(zr(e)):aP(xn(e),ml.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gA(e),r})}function uP(e,t,n,r){return xn(e).onIdTokenChanged(t,n,r)}function cP(e,t,n){return xn(e).beforeAuthStateChanged(t,n)}function mA(e,t,n,r){return xn(e).onAuthStateChanged(t,n,r)}function hP(e){return xn(e).signOut()}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=1e3,dP=10;class yA extends pA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);Dk()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,dP):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},fP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}yA.type="LOCAL";const gP=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A extends pA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}_A.type="SESSION";const vA=_A;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new od(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async p=>p(n.origin,l)),g=await mP(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const p=Oy("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function yP(e){ar().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function _P(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vP(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function EP(){return EA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="firebaseLocalStorageDb",TP=1,Lf="firebaseLocalStorage",wA="fbase_key";class gc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ld(e,t){return e.transaction([Lf],t?"readwrite":"readonly").objectStore(Lf)}function wP(){const e=indexedDB.deleteDatabase(TA);return new gc(e).toPromise()}function Ip(){const e=indexedDB.open(TA,TP);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Lf,{keyPath:wA})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Lf)?t(r):(r.close(),await wP(),t(await Ip()))})})}async function pw(e,t,n){const r=ld(e,!0).put({[wA]:t,value:n});return new gc(r).toPromise()}async function SP(e,t){const n=ld(e,!1).get(t),r=await new gc(n).toPromise();return r===void 0?null:r.value}function yw(e,t){const n=ld(e,!0).delete(t);return new gc(n).toPromise()}const bP=800,AP=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>AP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(EP()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await _P(),!this.activeServiceWorker)return;this.sender=new pP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||vP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ip();return await pw(t,Pf,"1"),await yw(t,Pf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pw(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>SP(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yw(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=ld(a,!1).getAll();return new gc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const RP=SA;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(e,t){return t?Pr(t):(Nt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends Dy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Qo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Qo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function CP(e){return dA(e.auth,new Vy(e),e.bypassAuthState)}function xP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),sP(n,new Vy(e),e.bypassAuthState)}async function NP(e){const{auth:t,user:n}=e;return Nt(n,t,"internal-error"),rP(n,new Vy(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return CP;case"linkViaPopup":case"linkViaRedirect":return NP;case"reauthViaPopup":case"reauthViaRedirect":return xP;default:Mi(this.auth,"internal-error")}}resolve(t){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new hc(2e3,1e4);class Fo extends bA{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Nt(t,this.auth,"internal-error"),t}async onExecution(){Gr(this.filter.length===1,"Popup operations only handle one event");const t=Oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,DP.get())};t()}}Fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="pendingRedirect",of=new Map;class OP extends bA{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=of.get(this.auth._key());if(!t){try{const r=await VP(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}of.set(this.auth._key(),t)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VP(e,t){const n=LP(t),r=PP(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function kP(e,t){of.set(e._key(),t)}function PP(e){return Pr(e._redirectPersistence)}function LP(e){return af(MP,e.config.apiKey,e.name)}async function UP(e,t,n=!1){if(mi(e.app))return Promise.reject(zr(e));const r=Ha(e),a=IP(r,t),c=await new OP(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=10*60*1e3;class BP{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!HP(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!AA(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sr(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=zP&&this.cachedEventUids.clear(),this.cachedEventUids.has(_w(t))}saveEventToCache(t){this.cachedEventUids.add(_w(t)),this.lastProcessedEventTime=Date.now()}}function _w(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function AA({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function HP(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AA(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(e,t={}){return Gs(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jP=/^https?/;async function GP(e){if(e.config.emulator)return;const{authorizedDomains:t}=await qP(e);for(const n of t)try{if($P(n))return}catch{}Mi(e,"unauthorized-domain")}function $P(e){const t=bp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!jP.test(n))return!1;if(FP.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new hc(3e4,6e4);function vw(){const e=ar().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function KP(e){return new Promise((t,n)=>{var r,a,l;function c(){vw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vw(),n(sr(e,"network-request-failed"))},timeout:YP.get()})}if(!((a=(r=ar().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=ar().gapi)===null||l===void 0)&&l.load)c();else{const d=Bk("iframefcb");return ar()[d]=()=>{gapi.load?c():n(sr(e,"network-request-failed"))},lA(`${zk()}?onload=${d}`).catch(g=>n(g))}}).catch(t=>{throw lf=null,t})}let lf=null;function XP(e){return lf=lf||KP(e),lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new hc(5e3,15e3),ZP="__/auth/iframe",WP="emulator/auth/iframe",JP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e6(e){const t=e.config;Nt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cy(t,WP):`https://${e.config.authDomain}/${ZP}`,r={apiKey:t.apiKey,appName:e.name,v:ul},a=t6.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${sc(r).slice(1)}`}async function n6(e){const t=await XP(e),n=ar().gapi;return Nt(n,e,"internal-error"),t.open({where:document.body,url:e6(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JP,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=sr(e,"network-request-failed"),d=ar().setTimeout(()=>{l(c)},QP.get());function g(){ar().clearTimeout(d),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r6=500,s6=600,a6="_blank",o6="http://localhost";class Ew{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l6(e,t,n,r=r6,a=s6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},i6),{width:r.toString(),height:a.toString(),top:l,left:c}),p=Tn().toLowerCase();n&&(d=eA(p)?a6:n),Jb(p)&&(t=t||o6,g.scrollbars="yes");const y=Object.entries(g).reduce((T,[S,O])=>`${T}${S}=${O},`,"");if(Nk(p)&&d!=="_self")return u6(t||"",d),new Ew(null);const v=window.open(t||"",d,y);Nt(v,e,"popup-blocked");try{v.focus()}catch{}return new Ew(v)}function u6(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="__/auth/handler",h6="emulator/auth/handler",f6=encodeURIComponent("fac");async function Tw(e,t,n,r,a,l){Nt(e.config.authDomain,e,"auth-domain-config-required"),Nt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ul,eventId:a};if(t instanceof hA){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",DM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof dc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),p=g?`#${f6}=${encodeURIComponent(g)}`:"";return`${d6(e)}?${sc(d).slice(1)}${p}`}function d6({config:e}){return e.emulator?Cy(e,h6):`https://${e.authDomain}/${c6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="webStorageSupport";class g6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vA,this._completeRedirectFn=UP,this._overrideRedirectResult=kP}async _openPopup(t,n,r,a){var l;Gr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Tw(t,n,r,bp(),a);return l6(t,c,Oy())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await Tw(t,n,r,bp(),a);return yP(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Gr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await n6(t),r=new BP(t);return n.register("authEvent",a=>(Nt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(zm,{type:zm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[zm];c!==void 0&&n(!!c),Mi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GP(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return aA()||tA()||Ny()}}const m6=g6;var ww="@firebase/auth",Sw="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _6(e){tl(new Ma("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Nt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oA(e)},p=new Pk(r,a,l,g);return $k(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),tl(new Ma("auth-internal",t=>{const n=Ha(t.getProvider("auth").getImmediate());return(r=>new p6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(ww,Sw,y6(e)),Os(ww,Sw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=5*60,E6=s1("authIdTokenMaxAge")||v6;let bw=null;const T6=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>E6)return;const a=n?.token;bw!==a&&(bw=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function w6(e=h1()){const t=Yp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Gk(e,{popupRedirectResolver:m6,persistence:[RP,gP,vA]}),r=s1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=T6(l.toString());cP(n,c,()=>c(n.currentUser)),uP(n,d=>c(d))}}const a=i1("auth");return a&&Yk(n,`http://${a}`),n}function S6(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Lk({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=sr("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",S6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_6("Browser");const b6={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},RA=c1(b6),Lo=F3(RA),Ts=w6(RA);function A6({onAuthed:e}){const[t,n]=et.useState(!1),[r,a]=et.useState(null),[l,c]=et.useState(""),[d,g]=et.useState(""),[p,y]=et.useState(!1),[v,T]=et.useState(!1),[S,O]=et.useState("");et.useEffect(()=>{const q=mA(Ts,F=>{F?(n(!0),e(Ts.currentUser),a(F)):(n(!1),a(null))});return()=>q()},[e]);const k=async q=>{q.preventDefault(),T(!0),O("");try{await oP(Ts,l,d),e(Ts.currentUser)}catch(F){O(F.message)}T(!1)},L=async q=>{q.preventDefault(),T(!0),O("");try{await lP(Ts,l,d),e(Ts.currentUser)}catch(F){O(F.message)}T(!1)},H=async()=>{try{await hP(Ts)}catch(q){O(q.message)}};return t?xt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif"},children:xt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9",textAlign:"center"},children:[xt.jsxs("p",{style:{marginBottom:"1rem"},children:["Welcome, ",r?.email,"!"]}),xt.jsx("button",{onClick:H,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Sign Out"})]})}):xt.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:xt.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[xt.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:p?"Sign Up":"Sign In"}),xt.jsxs("form",{onSubmit:p?k:L,children:[xt.jsx("input",{type:"email",placeholder:"Email",value:l,onChange:q=>c(q.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),xt.jsx("input",{type:"password",placeholder:"Password",value:d,onChange:q=>g(q.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),xt.jsx("button",{type:"submit",disabled:v,style:{width:"100%",padding:"0.75rem",backgroundColor:v?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:v?"not-allowed":"pointer",marginBottom:"1rem"},children:v?"Loading...":p?"Sign Up":"Sign In"}),S&&xt.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:S})]}),xt.jsxs("p",{style:{textAlign:"center",margin:0},children:[p?"Already have an account?":"Don't have an account?",xt.jsx("button",{type:"button",onClick:()=>y(!p),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:p?"Sign In":"Sign Up"})]})]})})}function R6({data:e,id:t}){const[n,r]=et.useState(!1),[a,l]=et.useState(e.label||"Static Node"),[c,d]=et.useState(!1),g=()=>{r(!1),console.log("Static node text changed to:",a)},p=v=>{v.stopPropagation()},y=v=>{v.stopPropagation(),v.key==="Enter"&&g(),v.key==="Escape"&&(l(e.label||"Static Node"),r(!1))};return xt.jsxs("div",{className:"static-editable-node nodrag",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[xt.jsx(Na,{type:"target",position:St.Bottom,id:"bottom"}),c&&xt.jsx("div",{className:"node-tooltip",children:xt.jsxs("div",{className:"tooltip-content",children:[xt.jsx("span",{children:" Static Node"}),xt.jsx("span",{children:"Click to edit text"})]})}),n?xt.jsx("input",{type:"text",value:a,onChange:v=>l(v.target.value),onBlur:g,onKeyDown:y,onClick:p,className:"node-input nodrag",autoFocus:!0}):xt.jsx("div",{className:"node-text",children:a}),xt.jsx(Na,{type:"source",position:St.Bottom,id:"bottom-source"})]})}function I6({data:e,id:t}){const[n,r]=et.useState(!1),[a,l]=et.useState(e.label||"Draggable Node"),[c,d]=et.useState(!1),g=T=>{T.stopPropagation(),r(!0)},p=()=>{r(!1),console.log("Draggable node text changed to:",a)},y=T=>{T.stopPropagation()},v=T=>{T.stopPropagation(),T.key==="Enter"&&p(),T.key==="Escape"&&(l(e.label||"Draggable Node"),r(!1))};return xt.jsxs("div",{className:"draggable-editable-node",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[c&&xt.jsx("div",{className:"node-tooltip",children:xt.jsxs("div",{className:"tooltip-content",children:[xt.jsx("span",{children:" Draggable Node"}),xt.jsx("span",{children:"Drag me around!"}),xt.jsx("span",{children:"Click to edit text"})]})}),xt.jsx("div",{className:"node-content",onClick:g,children:n?xt.jsx("input",{type:"text",value:a,onChange:T=>l(T.target.value),onBlur:p,onKeyDown:v,onClick:y,className:"node-input nodrag",autoFocus:!0}):xt.jsx("div",{className:"node-text",children:a})}),xt.jsx(Na,{type:"source",position:St.Bottom,id:"bottom-source"})]})}const C6={staticEditable:R6,draggableEditable:I6},$h=[{id:"1",type:"draggableEditable",data:{label:"Node A"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"Node B"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"Node C"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Node D"},position:{x:250,y:200},draggable:!1}],Yh=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}];function x6(){const[e,t]=et.useState(null),[n,r,a]=kD([]),[l,c,d]=PD([]),[g,p]=et.useState(!0),[y,v]=et.useState(null);et.useEffect(()=>{const F=mA(Ts,B=>{B?(t(B),console.log("User signed in:",B.uid)):(t(null),console.log("No user signed in"))});return()=>F()},[]);const T=F=>{t(F)},S=async F=>{try{const B=Vm(Lo,"boards"),Q=nk(B,iw("userId","==",F),iw("isOpen","==",!0)),X=await Pm(Q);if(X.empty){const R={id:`board_${Date.now()}`,userId:F,isOpen:!0,name:"Default Board",createdAt:new Date};return await Lm(km(Lo,"boards",R.id),R),console.log("Created default board:",R),R}const N=X.docs[0],A={id:N.id,...N.data()};return console.log("Found open board:",A),A}catch(B){return console.error("Fetch open board error:",B),null}},O=async F=>{try{const B=Vm(Lo,"boards",F,"nodes"),Q=await Pm(B);if(Q.empty)return console.log("No nodes found for board, using initial nodes"),$h;const X=Q.docs.map(N=>({id:N.id,...N.data()}));return console.log("Fetched nodes from board:",X),X}catch(B){return console.error("Fetch nodes error:",B),$h}},k=async F=>{try{const B=Vm(Lo,"boards",F,"edges"),Q=await Pm(B);if(Q.empty)return console.log("No edges found for board, using initial edges"),Yh;const X=Q.docs.map(N=>({id:N.id,...N.data()}));return console.log("Fetched edges from board:",X),X}catch(B){return console.error("Fetch edges error:",B),Yh}},L=async(F,B)=>{try{const Q=B.map(X=>Lm(km(Lo,"boards",F,"nodes",X.id),{type:X.type,data:X.data,position:X.position,draggable:X.draggable}));await Promise.all(Q),console.log("Nodes saved to board")}catch(Q){console.error("Save nodes error:",Q)}},H=async(F,B)=>{try{const Q=B.map(X=>Lm(km(Lo,"boards",F,"edges",X.id),{source:X.source,target:X.target,sourceHandle:X.sourceHandle,targetHandle:X.targetHandle}));await Promise.all(Q),console.log("Edges saved to board")}catch(Q){console.error("Save edges error:",Q)}};et.useEffect(()=>{(async()=>{if(e)try{p(!0);const B=await S(e.uid);if(!B){console.error("No board found for user"),r($h),c(Yh);return}v(B);const[Q,X]=await Promise.all([O(B.id),k(B.id)]);r(Q),c(X)}catch(B){console.error("Error loading initial data:",B),r($h),c(Yh)}finally{p(!1)}})()},[e,r,c]),et.useEffect(()=>{if(!g&&y&&n.length>0){const F=setTimeout(()=>{L(y.id,n)},1e3);return()=>clearTimeout(F)}},[n,g,y]),et.useEffect(()=>{if(!g&&y&&l.length>0){const F=setTimeout(()=>{H(y.id,l)},1e3);return()=>clearTimeout(F)}},[l,g,y]);const q=et.useCallback(F=>c(B=>dS(F,B)),[c]);return xt.jsx(xt.Fragment,{children:e?xt.jsxs(xt.Fragment,{children:[xt.jsx("div",{className:"app-container",children:xt.jsxs("header",{className:"app-header",children:[xt.jsx("h1",{children:"Tink Flow Editor"}),xt.jsxs("p",{children:["Welcome,"," ",e.isAnonymous?"Anonymous User":e.email]})]})}),xt.jsx("div",{style:{width:"100vw",height:"100vh"},children:xt.jsxs(KS,{nodes:n,edges:l,onNodesChange:a,onEdgesChange:d,onConnect:q,nodeTypes:C6,connectionMode:Ls.Loose,fitView:!0,children:[xt.jsx(JD,{}),xt.jsx($D,{}),xt.jsx(sM,{variant:"dots",gap:12,size:1})]})})]}):xt.jsx(A6,{onAuthed:T})})}sI.createRoot(document.getElementById("root")).render(xt.jsx(et.StrictMode,{children:xt.jsx(x6,{})}));
