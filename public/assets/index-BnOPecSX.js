(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function om(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ug={exports:{}},Xc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function a4(){if(zv)return Xc;zv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return Xc.Fragment=e,Xc.jsx=n,Xc.jsxs=n,Xc}var jv;function o4(){return jv||(jv=1,Ug.exports=a4()),Ug.exports}var M=o4(),Vg={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function u4(){if(qv)return at;qv=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,N={};function k(A,J,ae){this.props=A,this.context=J,this.refs=N,this.updater=ae||T}k.prototype.isReactComponent={},k.prototype.setState=function(A,J){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,J,"setState")},k.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function D(){}D.prototype=k.prototype;function z(A,J,ae){this.props=A,this.context=J,this.refs=N,this.updater=ae||T}var Y=z.prototype=new D;Y.constructor=z,x(Y,k.prototype),Y.isPureReactComponent=!0;var q=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function R(A,J,ae,B,ge,Ne){return ae=Ne.ref,{$$typeof:t,type:A,key:J,ref:ae!==void 0?ae:null,props:Ne}}function C(A,J){return R(A.type,J,void 0,void 0,void 0,A.props)}function O(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function P(A){var J={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ae){return J[ae]})}var U=/\/+/g;function V(A,J){return typeof A=="object"&&A!==null&&A.key!=null?P(""+A.key):J.toString(36)}function I(){}function L(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(I,I):(A.status="pending",A.then(function(J){A.status==="pending"&&(A.status="fulfilled",A.value=J)},function(J){A.status==="pending"&&(A.status="rejected",A.reason=J)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function K(A,J,ae,B,ge){var Ne=typeof A;(Ne==="undefined"||Ne==="boolean")&&(A=null);var Ie=!1;if(A===null)Ie=!0;else switch(Ne){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(A.$$typeof){case t:case e:Ie=!0;break;case p:return Ie=A._init,K(Ie(A._payload),J,ae,B,ge)}}if(Ie)return ge=ge(A),Ie=B===""?"."+V(A,0):B,q(ge)?(ae="",Ie!=null&&(ae=Ie.replace(U,"$&/")+"/"),K(ge,J,ae,"",function(Me){return Me})):ge!=null&&(O(ge)&&(ge=C(ge,ae+(ge.key==null||A&&A.key===ge.key?"":(""+ge.key).replace(U,"$&/")+"/")+Ie)),J.push(ge)),1;Ie=0;var je=B===""?".":B+":";if(q(A))for(var we=0;we<A.length;we++)B=A[we],Ne=je+V(B,we),Ie+=K(B,J,ae,Ne,ge);else if(we=b(A),typeof we=="function")for(A=we.call(A),we=0;!(B=A.next()).done;)B=B.value,Ne=je+V(B,we++),Ie+=K(B,J,ae,Ne,ge);else if(Ne==="object"){if(typeof A.then=="function")return K(L(A),J,ae,B,ge);throw J=String(A),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function F(A,J,ae){if(A==null)return A;var B=[],ge=0;return K(A,B,"","",function(Ne){return J.call(ae,Ne,ge++)}),B}function Q(A){if(A._status===-1){var J=A._result;J=J(),J.then(function(ae){(A._status===0||A._status===-1)&&(A._status=1,A._result=ae)},function(ae){(A._status===0||A._status===-1)&&(A._status=2,A._result=ae)}),A._status===-1&&(A._status=0,A._result=J)}if(A._status===1)return A._result.default;throw A._result}var se=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function te(){}return at.Children={map:F,forEach:function(A,J,ae){F(A,function(){J.apply(this,arguments)},ae)},count:function(A){var J=0;return F(A,function(){J++}),J},toArray:function(A){return F(A,function(J){return J})||[]},only:function(A){if(!O(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},at.Component=k,at.Fragment=n,at.Profiler=s,at.PureComponent=z,at.StrictMode=r,at.Suspense=d,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,at.__COMPILER_RUNTIME={__proto__:null,c:function(A){return ee.H.useMemoCache(A)}},at.cache=function(A){return function(){return A.apply(null,arguments)}},at.cloneElement=function(A,J,ae){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var B=x({},A.props),ge=A.key,Ne=void 0;if(J!=null)for(Ie in J.ref!==void 0&&(Ne=void 0),J.key!==void 0&&(ge=""+J.key),J)!$.call(J,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&J.ref===void 0||(B[Ie]=J[Ie]);var Ie=arguments.length-2;if(Ie===1)B.children=ae;else if(1<Ie){for(var je=Array(Ie),we=0;we<Ie;we++)je[we]=arguments[we+2];B.children=je}return R(A.type,ge,void 0,void 0,Ne,B)},at.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},at.createElement=function(A,J,ae){var B,ge={},Ne=null;if(J!=null)for(B in J.key!==void 0&&(Ne=""+J.key),J)$.call(J,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(ge[B]=J[B]);var Ie=arguments.length-2;if(Ie===1)ge.children=ae;else if(1<Ie){for(var je=Array(Ie),we=0;we<Ie;we++)je[we]=arguments[we+2];ge.children=je}if(A&&A.defaultProps)for(B in Ie=A.defaultProps,Ie)ge[B]===void 0&&(ge[B]=Ie[B]);return R(A,Ne,void 0,void 0,null,ge)},at.createRef=function(){return{current:null}},at.forwardRef=function(A){return{$$typeof:c,render:A}},at.isValidElement=O,at.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:Q}},at.memo=function(A,J){return{$$typeof:f,type:A,compare:J===void 0?null:J}},at.startTransition=function(A){var J=ee.T,ae={};ee.T=ae;try{var B=A(),ge=ee.S;ge!==null&&ge(ae,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(te,se)}catch(Ne){se(Ne)}finally{ee.T=J}},at.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},at.use=function(A){return ee.H.use(A)},at.useActionState=function(A,J,ae){return ee.H.useActionState(A,J,ae)},at.useCallback=function(A,J){return ee.H.useCallback(A,J)},at.useContext=function(A){return ee.H.useContext(A)},at.useDebugValue=function(){},at.useDeferredValue=function(A,J){return ee.H.useDeferredValue(A,J)},at.useEffect=function(A,J,ae){var B=ee.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return B.useEffect(A,J)},at.useId=function(){return ee.H.useId()},at.useImperativeHandle=function(A,J,ae){return ee.H.useImperativeHandle(A,J,ae)},at.useInsertionEffect=function(A,J){return ee.H.useInsertionEffect(A,J)},at.useLayoutEffect=function(A,J){return ee.H.useLayoutEffect(A,J)},at.useMemo=function(A,J){return ee.H.useMemo(A,J)},at.useOptimistic=function(A,J){return ee.H.useOptimistic(A,J)},at.useReducer=function(A,J,ae){return ee.H.useReducer(A,J,ae)},at.useRef=function(A){return ee.H.useRef(A)},at.useState=function(A){return ee.H.useState(A)},at.useSyncExternalStore=function(A,J,ae){return ee.H.useSyncExternalStore(A,J,ae)},at.useTransition=function(){return ee.H.useTransition()},at.version="19.1.0",at}var Yv;function td(){return Yv||(Yv=1,Vg.exports=u4()),Vg.exports}var re=td();const _e=om(re);var Hg={exports:{}},Qc={},Fg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function l4(){return Gv||(Gv=1,function(t){function e(F,Q){var se=F.length;F.push(Q);e:for(;0<se;){var te=se-1>>>1,A=F[te];if(0<s(A,Q))F[te]=Q,F[se]=A,se=te;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Q=F[0],se=F.pop();if(se!==Q){F[0]=se;e:for(var te=0,A=F.length,J=A>>>1;te<J;){var ae=2*(te+1)-1,B=F[ae],ge=ae+1,Ne=F[ge];if(0>s(B,se))ge<A&&0>s(Ne,B)?(F[te]=Ne,F[ge]=se,te=ge):(F[te]=B,F[ae]=se,te=ae);else if(ge<A&&0>s(Ne,se))F[te]=Ne,F[ge]=se,te=ge;else break e}}return Q}function s(F,Q){var se=F.sortIndex-Q.sortIndex;return se!==0?se:F.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var d=[],f=[],p=1,y=null,b=3,T=!1,x=!1,N=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function q(F){for(var Q=n(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=F)r(f),Q.sortIndex=Q.expirationTime,e(d,Q);else break;Q=n(f)}}function ee(F){if(N=!1,q(F),!x)if(n(d)!==null)x=!0,$||($=!0,V());else{var Q=n(f);Q!==null&&K(ee,Q.startTime-F)}}var $=!1,R=-1,C=5,O=-1;function P(){return k?!0:!(t.unstable_now()-O<C)}function U(){if(k=!1,$){var F=t.unstable_now();O=F;var Q=!0;try{e:{x=!1,N&&(N=!1,z(R),R=-1),T=!0;var se=b;try{t:{for(q(F),y=n(d);y!==null&&!(y.expirationTime>F&&P());){var te=y.callback;if(typeof te=="function"){y.callback=null,b=y.priorityLevel;var A=te(y.expirationTime<=F);if(F=t.unstable_now(),typeof A=="function"){y.callback=A,q(F),Q=!0;break t}y===n(d)&&r(d),q(F)}else r(d);y=n(d)}if(y!==null)Q=!0;else{var J=n(f);J!==null&&K(ee,J.startTime-F),Q=!1}}break e}finally{y=null,b=se,T=!1}Q=void 0}}finally{Q?V():$=!1}}}var V;if(typeof Y=="function")V=function(){Y(U)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,L=I.port2;I.port1.onmessage=U,V=function(){L.postMessage(null)}}else V=function(){D(U,0)};function K(F,Q){R=D(function(){F(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(F){switch(b){case 1:case 2:case 3:var Q=3;break;default:Q=b}var se=b;b=Q;try{return F()}finally{b=se}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(F,Q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var se=b;b=F;try{return Q()}finally{b=se}},t.unstable_scheduleCallback=function(F,Q,se){var te=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?te+se:te):se=te,F){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=se+A,F={id:p++,callback:Q,priorityLevel:F,startTime:se,expirationTime:A,sortIndex:-1},se>te?(F.sortIndex=se,e(f,F),n(d)===null&&F===n(f)&&(N?(z(R),R=-1):N=!0,K(ee,se-te))):(F.sortIndex=A,e(d,F),x||T||(x=!0,$||($=!0,V()))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var Q=b;return function(){var se=b;b=Q;try{return F.apply(this,arguments)}finally{b=se}}}}(zg)),zg}var $v;function c4(){return $v||($v=1,Fg.exports=l4()),Fg.exports}var jg={exports:{}},vr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function h4(){if(Kv)return vr;Kv=1;var t=td();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:p}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vr.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},vr.flushSync=function(d){var f=u.T,p=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=f,r.p=p,r.d.f()}},vr.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},vr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},vr.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:T}):p==="script"&&r.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},vr.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},vr.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);r.d.L(d,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},vr.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},vr.requestFormReset=function(d){r.d.r(d)},vr.unstable_batchedUpdates=function(d,f){return d(f)},vr.useFormState=function(d,f,p){return u.H.useFormState(d,f,p)},vr.useFormStatus=function(){return u.H.useHostTransitionStatus()},vr.version="19.1.0",vr}var Xv;function Zx(){if(Xv)return jg.exports;Xv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jg.exports=h4(),jg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function d4(){if(Qv)return Qc;Qv=1;var t=c4(),e=td(),n=Zx();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function d(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,h=a;;){var g=l.return;if(g===null)break;var E=g.alternate;if(E===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===E.child){for(E=g.child;E;){if(E===l)return c(g),i;if(E===h)return c(g),a;E=E.sibling}throw Error(r(188))}if(l.return!==h.return)l=g,h=E;else{for(var w=!1,H=g.child;H;){if(H===l){w=!0,l=g,h=E;break}if(H===h){w=!0,h=g,l=E;break}H=H.sibling}if(!w){for(H=E.child;H;){if(H===l){w=!0,l=E,h=g;break}if(H===h){w=!0,h=E,l=g;break}H=H.sibling}if(!w)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function f(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=f(i),a!==null)return a;i=i.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var I=Symbol.for("react.client.reference");function L(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===I?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case ee:return"Suspense";case $:return"SuspenseList";case O:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case Y:return(i.displayName||"Context")+".Provider";case z:return(i._context.displayName||"Context")+".Consumer";case q:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return a=i.displayName||null,a!==null?a:L(i.type)||"Memo";case C:a=i._payload,i=i._init;try{return L(i(a))}catch{}}return null}var K=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},te=[],A=-1;function J(i){return{current:i}}function ae(i){0>A||(i.current=te[A],te[A]=null,A--)}function B(i,a){A++,te[A]=i.current,i.current=a}var ge=J(null),Ne=J(null),Ie=J(null),je=J(null);function we(i,a){switch(B(Ie,a),B(Ne,i),B(ge,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?gv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=gv(a),i=yv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(ge),B(ge,i)}function Me(){ae(ge),ae(Ne),ae(Ie)}function He(i){i.memoizedState!==null&&B(je,i);var a=ge.current,l=yv(a,i.type);a!==l&&(B(Ne,i),B(ge,l))}function Je(i){Ne.current===i&&(ae(ge),ae(Ne)),je.current===i&&(ae(je),qc._currentValue=se)}var an=Object.prototype.hasOwnProperty,Jt=t.unstable_scheduleCallback,on=t.unstable_cancelCallback,Dt=t.unstable_shouldYield,Rn=t.unstable_requestPaint,Qe=t.unstable_now,qe=t.unstable_getCurrentPriorityLevel,cn=t.unstable_ImmediatePriority,Un=t.unstable_UserBlockingPriority,Vn=t.unstable_NormalPriority,Kn=t.unstable_LowPriority,Hn=t.unstable_IdlePriority,Sn=t.log,or=t.unstable_setDisableYieldValue,de=null,Te=null;function Ve(i){if(typeof Sn=="function"&&or(i),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(de,i)}catch{}}var Ye=Math.clz32?Math.clz32:Ht,ut=Math.log,Tt=Math.LN2;function Ht(i){return i>>>=0,i===0?32:31-(ut(i)/Tt|0)|0}var Ft=256,zt=4194304;function vt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function lt(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,E=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var H=h&134217727;return H!==0?(h=H&~E,h!==0?g=vt(h):(w&=H,w!==0?g=vt(w):l||(l=H&~i,l!==0&&(g=vt(l))))):(H=h&~E,H!==0?g=vt(H):w!==0?g=vt(w):l||(l=h&~i,l!==0&&(g=vt(l)))),g===0?0:a!==0&&a!==g&&(a&E)===0&&(E=g&-g,l=a&-a,E>=l||E===32&&(l&4194048)!==0)?a:g}function Wt(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Gt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(){var i=Ft;return Ft<<=1,(Ft&4194048)===0&&(Ft=256),i}function _r(){var i=zt;return zt<<=1,(zt&62914560)===0&&(zt=4194304),i}function Fn(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Rr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function br(i,a,l,h,g,E){var w=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var H=i.entanglements,Z=i.expirationTimes,he=i.hiddenUpdates;for(l=w&~l;0<l;){var be=31-Ye(l),Ae=1<<be;H[be]=0,Z[be]=-1;var fe=he[be];if(fe!==null)for(he[be]=null,be=0;be<fe.length;be++){var me=fe[be];me!==null&&(me.lane&=-536870913)}l&=~Ae}h!==0&&jr(i,h,0),E!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=E&~(w&~a))}function jr(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-Ye(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function Us(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-Ye(l),g=1<<h;g&a|i[h]&a&&(i[h]|=a),l&=~g}}function ri(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Gi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Dr(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:Pv(i.type))}function ii(i,a){var l=Q.p;try{return Q.p=i,a()}finally{Q.p=l}}var $t=Math.random().toString(36).slice(2),Lt="__reactFiber$"+$t,hn="__reactProps$"+$t,En="__reactContainer$"+$t,os="__reactEvents$"+$t,Ao="__reactListeners$"+$t,Or="__reactHandles$"+$t,us="__reactResources$"+$t,Ai="__reactMarker$"+$t;function si(i){delete i[Lt],delete i[hn],delete i[os],delete i[Ao],delete i[Or]}function kr(i){var a=i[Lt];if(a)return a;for(var l=i.parentNode;l;){if(a=l[En]||l[Lt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=Tv(i);i!==null;){if(l=i[Lt])return l;i=Tv(i)}return a}i=l,l=i.parentNode}return null}function Xn(i){if(i=i[Lt]||i[En]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Lr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function zn(i){var a=i[us];return a||(a=i[us]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ne(i){i[Ai]=!0}var pe=new Set,De={};function Pe(i,a){pt(i,a),pt(i+"Capture",a)}function pt(i,a){for(De[i]=a,i=0;i<a.length;i++)pe.add(a[i])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jt={},Mt={};function Qn(i){return an.call(Mt,i)?!0:an.call(jt,i)?!1:rt.test(i)?Mt[i]=!0:(jt[i]=!0,!1)}function Pt(i,a,l){if(Qn(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Nt(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Bt(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}var Dn,_n;function xn(i){if(Dn===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Dn=a&&a[1]||"",_n=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dn+i+_n}var Mr=!1;function Pr(i,a){if(!i||Mr)return"";Mr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(me){var fe=me}Reflect.construct(i,[],Ae)}else{try{Ae.call()}catch(me){fe=me}i.call(Ae.prototype)}}else{try{throw Error()}catch(me){fe=me}(Ae=i())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(me){if(me&&fe&&typeof me.stack=="string")return[me.stack,fe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),w=E[0],H=E[1];if(w&&H){var Z=w.split(`
`),he=H.split(`
`);for(g=h=0;h<Z.length&&!Z[h].includes("DetermineComponentFrameRoot");)h++;for(;g<he.length&&!he[g].includes("DetermineComponentFrameRoot");)g++;if(h===Z.length||g===he.length)for(h=Z.length-1,g=he.length-1;1<=h&&0<=g&&Z[h]!==he[g];)g--;for(;1<=h&&0<=g;h--,g--)if(Z[h]!==he[g]){if(h!==1||g!==1)do if(h--,g--,0>g||Z[h]!==he[g]){var be=`
`+Z[h].replace(" at new "," at ");return i.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",i.displayName)),be}while(1<=h&&0<=g);break}}}finally{Mr=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?xn(l):""}function Si(i){switch(i.tag){case 26:case 27:case 5:return xn(i.type);case 16:return xn("Lazy");case 13:return xn("Suspense");case 19:return xn("SuspenseList");case 0:case 15:return Pr(i.type,!1);case 11:return Pr(i.type.render,!1);case 1:return Pr(i.type,!0);case 31:return xn("Activity");default:return""}}function xi(i){try{var a="";do a+=Si(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function So(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function tc(i){var a=So(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),h=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,E=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(w){h=""+w,E.call(this,w)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function At(i){i._valueTracker||(i._valueTracker=tc(i))}function bt(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=So(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function wi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ii=/[\n"\\]/g;function dn(i){return i.replace(Ii,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function en(i,a,l,h,g,E,w,H){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),a!=null?w==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Wn(a)):i.value!==""+Wn(a)&&(i.value=""+Wn(a)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),a!=null?lr(i,w,Wn(a)):l!=null?lr(i,w,Wn(l)):h!=null&&i.removeAttribute("value"),g==null&&E!=null&&(i.defaultChecked=!!E),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.name=""+Wn(H):i.removeAttribute("name")}function ur(i,a,l,h,g,E,w,H){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.type=E),a!=null||l!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;l=l!=null?""+Wn(l):"",a=a!=null?""+Wn(a):l,H||a===i.value||(i.value=a),i.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=H?i.checked:!!h,i.defaultChecked=!!h,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w)}function lr(i,a,l){a==="number"&&wi(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Br(i,a,l,h){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Wn(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function Ct(i,a,l){if(a!=null&&(a=""+Wn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+Wn(l):""}function $i(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(r(92));if(K(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Wn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function cr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var Ur=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xo(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||Ur.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function ls(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&l[g]!==h&&xo(i,g,h)}else for(var E in a)a.hasOwnProperty(E)&&xo(i,E,a[E])}function Vs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ya=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ea=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hs(i){return Ea.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var qr=null;function hr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,zs=null;function nc(i){var a=Xn(i);if(a&&(i=a.stateNode)){var l=i[hn]||null;e:switch(i=a.stateNode,a.type){case"input":if(en(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+dn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var g=h[hn]||null;if(!g)throw Error(r(90));en(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&bt(h)}break e;case"textarea":Ct(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Br(i,!!l.multiple,a,!1)}}}var cs=!1;function Sd(i,a,l){if(cs)return i(a,l);cs=!0;try{var h=i(a);return h}finally{if(cs=!1,(Fs!==null||zs!==null)&&(Ef(),Fs&&(a=Fs,i=zs,zs=Fs=null,nc(a),i)))for(a=0;a<i.length;a++)nc(i[a])}}function wo(i,a){var l=i.stateNode;if(l===null)return null;var h=l[hn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(Ki)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{Ci=!1}var hs=null,_a=null,js=null;function rc(){if(js)return js;var i,a=_a,l=a.length,h,g="value"in hs?hs.value:hs.textContent,E=g.length;for(i=0;i<l&&a[i]===g[i];i++);var w=l-i;for(h=1;h<=w&&a[l-h]===g[E-h];h++);return js=g.slice(i,1<h?1-h:void 0)}function ds(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function fs(){return!0}function ic(){return!1}function Zn(i){function a(l,h,g,E,w){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=E,this.target=w,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(l=i[H],this[H]=l?l(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?fs:ic,this.isPropagationStopped=ic,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),a}var Ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eu=Zn(Ut),Co=p({},Ut,{view:0,detail:0}),xd=Zn(Co),_u,bu,ms,No=p({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ms&&(ms&&i.type==="mousemove"?(_u=i.screenX-ms.screenX,bu=i.screenY-ms.screenY):bu=_u=0,ms=i),_u)},movementY:function(i){return"movementY"in i?i.movementY:bu}}),Ni=Zn(No),wd=p({},No,{dataTransfer:0}),Gm=Zn(wd),Ro=p({},Co,{relatedTarget:0}),Tu=Zn(Ro),sc=p({},Ut,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=Zn(sc),Id=p({},Ut,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Au=Zn(Id),$m=p({},Ut,{data:0}),ac=Zn($m),Do={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Nd[i])?!!a[i]:!1}function Oo(){return oc}var Rd=p({},Co,{key:function(i){if(i.key){var a=Do[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ds(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Cd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(i){return i.type==="keypress"?ds(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ds(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Su=Zn(Rd),Dd=p({},No,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uc=Zn(Dd),qs=p({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),Od=Zn(qs),kd=p({},Ut,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ld=Zn(kd),Md=p({},No,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),xu=Zn(Md),Vr=p({},Ut,{newState:0,oldState:0}),Pd=Zn(Vr),Bd=[9,13,27,32],ps=Ki&&"CompositionEvent"in window,m=null;Ki&&"documentMode"in document&&(m=document.documentMode);var v=Ki&&"TextEvent"in window&&!m,S=Ki&&(!ps||m&&8<m&&11>=m),j=" ",ue=!1;function ye(i,a){switch(i){case"keyup":return Bd.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Le(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var St=!1;function jn(i,a){switch(i){case"compositionend":return Le(a);case"keypress":return a.which!==32?null:(ue=!0,j);case"textInput":return i=a.data,i===j&&ue?null:i;default:return null}}function xt(i,a){if(St)return i==="compositionend"||!ps&&ye(i,a)?(i=rc(),js=_a=hs=null,St=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return S&&a.locale!=="ko"?null:a.data;default:return null}}var Jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Jn[i.type]:a==="textarea"}function Ys(i,a,l,h){Fs?zs?zs.push(h):zs=[h]:Fs=h,a=Sf(a,"onChange"),0<a.length&&(l=new Eu("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var dr=null,gs=null;function lc(i){hv(i,0)}function Ud(i){var a=Lr(i);if(bt(a))return i}function O_(i,a){if(i==="change")return a}var k_=!1;if(Ki){var Km;if(Ki){var Xm="oninput"in document;if(!Xm){var L_=document.createElement("div");L_.setAttribute("oninput","return;"),Xm=typeof L_.oninput=="function"}Km=Xm}else Km=!1;k_=Km&&(!document.documentMode||9<document.documentMode)}function M_(){dr&&(dr.detachEvent("onpropertychange",P_),gs=dr=null)}function P_(i){if(i.propertyName==="value"&&Ud(gs)){var a=[];Ys(a,gs,i,hr(i)),Sd(lc,a)}}function P3(i,a,l){i==="focusin"?(M_(),dr=a,gs=l,dr.attachEvent("onpropertychange",P_)):i==="focusout"&&M_()}function B3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ud(gs)}function U3(i,a){if(i==="click")return Ud(a)}function V3(i,a){if(i==="input"||i==="change")return Ud(a)}function H3(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var ai=typeof Object.is=="function"?Object.is:H3;function cc(i,a){if(ai(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!an.call(a,g)||!ai(i[g],a[g]))return!1}return!0}function B_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function U_(i,a){var l=B_(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=B_(l)}}function V_(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?V_(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function H_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=wi(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=wi(i.document)}return a}function Qm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var F3=Ki&&"documentMode"in document&&11>=document.documentMode,wu=null,Wm=null,hc=null,Zm=!1;function F_(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Zm||wu==null||wu!==wi(h)||(h=wu,"selectionStart"in h&&Qm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),hc&&cc(hc,h)||(hc=h,h=Sf(Wm,"onSelect"),0<h.length&&(a=new Eu("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=wu)))}function ko(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Iu={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionrun:ko("Transition","TransitionRun"),transitionstart:ko("Transition","TransitionStart"),transitioncancel:ko("Transition","TransitionCancel"),transitionend:ko("Transition","TransitionEnd")},Jm={},z_={};Ki&&(z_=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function Lo(i){if(Jm[i])return Jm[i];if(!Iu[i])return i;var a=Iu[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in z_)return Jm[i]=a[l];return i}var j_=Lo("animationend"),q_=Lo("animationiteration"),Y_=Lo("animationstart"),z3=Lo("transitionrun"),j3=Lo("transitionstart"),q3=Lo("transitioncancel"),G_=Lo("transitionend"),$_=new Map,ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ep.push("scrollEnd");function Xi(i,a){$_.set(i,a),Pe(a,[i])}var K_=new WeakMap;function Ri(i,a){if(typeof i=="object"&&i!==null){var l=K_.get(i);return l!==void 0?l:(a={value:i,source:a,stack:xi(a)},K_.set(i,a),a)}return{value:i,source:a,stack:xi(a)}}var Di=[],Cu=0,tp=0;function Vd(){for(var i=Cu,a=tp=Cu=0;a<i;){var l=Di[a];Di[a++]=null;var h=Di[a];Di[a++]=null;var g=Di[a];Di[a++]=null;var E=Di[a];if(Di[a++]=null,h!==null&&g!==null){var w=h.pending;w===null?g.next=g:(g.next=w.next,w.next=g),h.pending=g}E!==0&&X_(l,g,E)}}function Hd(i,a,l,h){Di[Cu++]=i,Di[Cu++]=a,Di[Cu++]=l,Di[Cu++]=h,tp|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function np(i,a,l,h){return Hd(i,a,l,h),Fd(i)}function Nu(i,a){return Hd(i,null,null,a),Fd(i)}function X_(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,E=i.return;E!==null;)E.childLanes|=l,h=E.alternate,h!==null&&(h.childLanes|=l),E.tag===22&&(i=E.stateNode,i===null||i._visibility&1||(g=!0)),i=E,E=E.return;return i.tag===3?(E=i.stateNode,g&&a!==null&&(g=31-Ye(l),i=E.hiddenUpdates,h=i[g],h===null?i[g]=[a]:h.push(a),a.lane=l|536870912),E):null}function Fd(i){if(50<Pc)throw Pc=0,ug=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Ru={};function Y3(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(i,a,l,h){return new Y3(i,a,l,h)}function rp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Gs(i,a){var l=i.alternate;return l===null?(l=oi(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Q_(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function zd(i,a,l,h,g,E){var w=0;if(h=i,typeof i=="function")rp(i)&&(w=1);else if(typeof i=="string")w=$6(i,l,ge.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case O:return i=oi(31,l,a,g),i.elementType=O,i.lanes=E,i;case x:return Mo(l.children,g,E,a);case N:w=8,g|=24;break;case k:return i=oi(12,l,a,g|2),i.elementType=k,i.lanes=E,i;case ee:return i=oi(13,l,a,g),i.elementType=ee,i.lanes=E,i;case $:return i=oi(19,l,a,g),i.elementType=$,i.lanes=E,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D:case Y:w=10;break e;case z:w=9;break e;case q:w=11;break e;case R:w=14;break e;case C:w=16,h=null;break e}w=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return a=oi(w,l,a,g),a.elementType=i,a.type=h,a.lanes=E,a}function Mo(i,a,l,h){return i=oi(7,i,h,a),i.lanes=l,i}function ip(i,a,l){return i=oi(6,i,null,a),i.lanes=l,i}function sp(i,a,l){return a=oi(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Du=[],Ou=0,jd=null,qd=0,Oi=[],ki=0,Po=null,$s=1,Ks="";function Bo(i,a){Du[Ou++]=qd,Du[Ou++]=jd,jd=i,qd=a}function W_(i,a,l){Oi[ki++]=$s,Oi[ki++]=Ks,Oi[ki++]=Po,Po=i;var h=$s;i=Ks;var g=32-Ye(h)-1;h&=~(1<<g),l+=1;var E=32-Ye(a)+g;if(30<E){var w=g-g%5;E=(h&(1<<w)-1).toString(32),h>>=w,g-=w,$s=1<<32-Ye(a)+g|l<<g|h,Ks=E+i}else $s=1<<E|l<<g|h,Ks=i}function ap(i){i.return!==null&&(Bo(i,1),W_(i,1,0))}function op(i){for(;i===jd;)jd=Du[--Ou],Du[Ou]=null,qd=Du[--Ou],Du[Ou]=null;for(;i===Po;)Po=Oi[--ki],Oi[ki]=null,Ks=Oi[--ki],Oi[ki]=null,$s=Oi[--ki],Oi[ki]=null}var Hr=null,bn=null,Ot=!1,Uo=null,ys=!1,up=Error(r(519));function Vo(i){var a=Error(r(418,""));throw mc(Ri(a,i)),up}function Z_(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Lt]=i,a[hn]=h,l){case"dialog":yt("cancel",a),yt("close",a);break;case"iframe":case"object":case"embed":yt("load",a);break;case"video":case"audio":for(l=0;l<Uc.length;l++)yt(Uc[l],a);break;case"source":yt("error",a);break;case"img":case"image":case"link":yt("error",a),yt("load",a);break;case"details":yt("toggle",a);break;case"input":yt("invalid",a),ur(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),At(a);break;case"select":yt("invalid",a);break;case"textarea":yt("invalid",a),$i(a,h.value,h.defaultValue,h.children),At(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||pv(a.textContent,l)?(h.popover!=null&&(yt("beforetoggle",a),yt("toggle",a)),h.onScroll!=null&&yt("scroll",a),h.onScrollEnd!=null&&yt("scrollend",a),h.onClick!=null&&(a.onclick=xf),a=!0):a=!1,a||Vo(i)}function J_(i){for(Hr=i.return;Hr;)switch(Hr.tag){case 5:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:Hr=Hr.return}}function dc(i){if(i!==Hr)return!1;if(!Ot)return J_(i),Ot=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||Sg(i.type,i.memoizedProps)),l=!l),l&&bn&&Vo(i),J_(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){bn=Wi(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}bn=null}}else a===27?(a=bn,Ma(i.type)?(i=Cg,Cg=null,bn=i):bn=a):bn=Hr?Wi(i.stateNode.nextSibling):null;return!0}function fc(){bn=Hr=null,Ot=!1}function eb(){var i=Uo;return i!==null&&($r===null?$r=i:$r.push.apply($r,i),Uo=null),i}function mc(i){Uo===null?Uo=[i]:Uo.push(i)}var lp=J(null),Ho=null,Xs=null;function ba(i,a,l){B(lp,a._currentValue),a._currentValue=l}function Qs(i){i._currentValue=lp.current,ae(lp)}function cp(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function hp(i,a,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var E=g.dependencies;if(E!==null){var w=g.child;E=E.firstContext;e:for(;E!==null;){var H=E;E=g;for(var Z=0;Z<a.length;Z++)if(H.context===a[Z]){E.lanes|=l,H=E.alternate,H!==null&&(H.lanes|=l),cp(E.return,l,i),h||(w=null);break e}E=H.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=l,E=w.alternate,E!==null&&(E.lanes|=l),cp(w,l,i),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function pc(i,a,l,h){i=null;for(var g=a,E=!1;g!==null;){if(!E){if((g.flags&524288)!==0)E=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var H=g.type;ai(g.pendingProps.value,w.value)||(i!==null?i.push(H):i=[H])}}else if(g===je.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(qc):i=[qc])}g=g.return}i!==null&&hp(a,i,l,h),a.flags|=262144}function Yd(i){for(i=i.firstContext;i!==null;){if(!ai(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fo(i){Ho=i,Xs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Tr(i){return tb(Ho,i)}function Gd(i,a){return Ho===null&&Fo(i),tb(i,a)}function tb(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xs===null){if(i===null)throw Error(r(308));Xs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Xs=Xs.next=a;return l}var G3=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},$3=t.unstable_scheduleCallback,K3=t.unstable_NormalPriority,Yn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dp(){return{controller:new G3,data:new Map,refCount:0}}function gc(i){i.refCount--,i.refCount===0&&$3(K3,function(){i.controller.abort()})}var yc=null,fp=0,ku=0,Lu=null;function X3(i,a){if(yc===null){var l=yc=[];fp=0,ku=pg(),Lu={status:"pending",value:void 0,then:function(h){l.push(h)}}}return fp++,a.then(nb,nb),a}function nb(){if(--fp===0&&yc!==null){Lu!==null&&(Lu.status="fulfilled");var i=yc;yc=null,ku=0,Lu=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function Q3(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var rb=F.S;F.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&X3(i,a),rb!==null&&rb(i,a)};var zo=J(null);function mp(){var i=zo.current;return i!==null?i:tn.pooledCache}function $d(i,a){a===null?B(zo,zo.current):B(zo,a.pool)}function ib(){var i=mp();return i===null?null:{parent:Yn._currentValue,pool:i}}var Ec=Error(r(460)),sb=Error(r(474)),Kd=Error(r(542)),pp={then:function(){}};function ab(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xd(){}function ob(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Xd,Xd),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,lb(i),i;default:if(typeof a.status=="string")a.then(Xd,Xd);else{if(i=tn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,lb(i),i}throw _c=a,Ec}}var _c=null;function ub(){if(_c===null)throw Error(r(459));var i=_c;return _c=null,i}function lb(i){if(i===Ec||i===Kd)throw Error(r(483))}var Ta=!1;function gp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function va(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Aa(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(qt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=Fd(i),X_(i,null,l),a}return Hd(i,h,a,l),Fd(i)}function bc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Us(i,l)}}function Ep(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};E===null?g=E=w:E=E.next=w,l=l.next}while(l!==null);E===null?g=E=a:E=E.next=a}else g=E=a;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var _p=!1;function Tc(){if(_p){var i=Lu;if(i!==null)throw i}}function vc(i,a,l,h){_p=!1;var g=i.updateQueue;Ta=!1;var E=g.firstBaseUpdate,w=g.lastBaseUpdate,H=g.shared.pending;if(H!==null){g.shared.pending=null;var Z=H,he=Z.next;Z.next=null,w===null?E=he:w.next=he,w=Z;var be=i.alternate;be!==null&&(be=be.updateQueue,H=be.lastBaseUpdate,H!==w&&(H===null?be.firstBaseUpdate=he:H.next=he,be.lastBaseUpdate=Z))}if(E!==null){var Ae=g.baseState;w=0,be=he=Z=null,H=E;do{var fe=H.lane&-536870913,me=fe!==H.lane;if(me?(wt&fe)===fe:(h&fe)===fe){fe!==0&&fe===ku&&(_p=!0),be!==null&&(be=be.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var et=i,Ke=H;fe=a;var Qt=l;switch(Ke.tag){case 1:if(et=Ke.payload,typeof et=="function"){Ae=et.call(Qt,Ae,fe);break e}Ae=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=Ke.payload,fe=typeof et=="function"?et.call(Qt,Ae,fe):et,fe==null)break e;Ae=p({},Ae,fe);break e;case 2:Ta=!0}}fe=H.callback,fe!==null&&(i.flags|=64,me&&(i.flags|=8192),me=g.callbacks,me===null?g.callbacks=[fe]:me.push(fe))}else me={lane:fe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},be===null?(he=be=me,Z=Ae):be=be.next=me,w|=fe;if(H=H.next,H===null){if(H=g.shared.pending,H===null)break;me=H,H=me.next,me.next=null,g.lastBaseUpdate=me,g.shared.pending=null}}while(!0);be===null&&(Z=Ae),g.baseState=Z,g.firstBaseUpdate=he,g.lastBaseUpdate=be,E===null&&(g.shared.lanes=0),Da|=w,i.lanes=w,i.memoizedState=Ae}}function cb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function hb(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)cb(l[i],a)}var Mu=J(null),Qd=J(0);function db(i,a){i=ra,B(Qd,i),B(Mu,a),ra=i|a.baseLanes}function bp(){B(Qd,ra),B(Mu,Mu.current)}function Tp(){ra=Qd.current,ae(Mu),ae(Qd)}var Sa=0,ct=null,Kt=null,On=null,Wd=!1,Pu=!1,jo=!1,Zd=0,Ac=0,Bu=null,W3=0;function wn(){throw Error(r(321))}function vp(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!ai(i[l],a[l]))return!1;return!0}function Ap(i,a,l,h,g,E){return Sa=E,ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=i===null||i.memoizedState===null?Xb:Qb,jo=!1,E=l(h,g),jo=!1,Pu&&(E=mb(a,l,h,g)),fb(i),E}function fb(i){F.H=sf;var a=Kt!==null&&Kt.next!==null;if(Sa=0,On=Kt=ct=null,Wd=!1,Ac=0,Bu=null,a)throw Error(r(300));i===null||er||(i=i.dependencies,i!==null&&Yd(i)&&(er=!0))}function mb(i,a,l,h){ct=i;var g=0;do{if(Pu&&(Bu=null),Ac=0,Pu=!1,25<=g)throw Error(r(301));if(g+=1,On=Kt=null,i.updateQueue!=null){var E=i.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}F.H=i6,E=a(l,h)}while(Pu);return E}function Z3(){var i=F.H,a=i.useState()[0];return a=typeof a.then=="function"?Sc(a):a,i=i.useState()[0],(Kt!==null?Kt.memoizedState:null)!==i&&(ct.flags|=1024),a}function Sp(){var i=Zd!==0;return Zd=0,i}function xp(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function wp(i){if(Wd){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Wd=!1}Sa=0,On=Kt=ct=null,Pu=!1,Ac=Zd=0,Bu=null}function Yr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?ct.memoizedState=On=i:On=On.next=i,On}function kn(){if(Kt===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Kt.next;var a=On===null?ct.memoizedState:On.next;if(a!==null)On=a,Kt=i;else{if(i===null)throw ct.alternate===null?Error(r(467)):Error(r(310));Kt=i,i={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},On===null?ct.memoizedState=On=i:On=On.next=i}return On}function Ip(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sc(i){var a=Ac;return Ac+=1,Bu===null&&(Bu=[]),i=ob(Bu,i,a),a=ct,(On===null?a.memoizedState:On.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?Xb:Qb),i}function Jd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Sc(i);if(i.$$typeof===Y)return Tr(i)}throw Error(r(438,String(i)))}function Cp(i){var a=null,l=ct.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=ct.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ip(),ct.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=P;return a.index++,l}function Ws(i,a){return typeof a=="function"?a(i):a}function ef(i){var a=kn();return Np(a,Kt,i)}function Np(i,a,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var g=i.baseQueue,E=h.pending;if(E!==null){if(g!==null){var w=g.next;g.next=E.next,E.next=w}a.baseQueue=g=E,h.pending=null}if(E=i.baseState,g===null)i.memoizedState=E;else{a=g.next;var H=w=null,Z=null,he=a,be=!1;do{var Ae=he.lane&-536870913;if(Ae!==he.lane?(wt&Ae)===Ae:(Sa&Ae)===Ae){var fe=he.revertLane;if(fe===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ae===ku&&(be=!0);else if((Sa&fe)===fe){he=he.next,fe===ku&&(be=!0);continue}else Ae={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(H=Z=Ae,w=E):Z=Z.next=Ae,ct.lanes|=fe,Da|=fe;Ae=he.action,jo&&l(E,Ae),E=he.hasEagerState?he.eagerState:l(E,Ae)}else fe={lane:Ae,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(H=Z=fe,w=E):Z=Z.next=fe,ct.lanes|=Ae,Da|=Ae;he=he.next}while(he!==null&&he!==a);if(Z===null?w=E:Z.next=H,!ai(E,i.memoizedState)&&(er=!0,be&&(l=Lu,l!==null)))throw l;i.memoizedState=E,i.baseState=w,i.baseQueue=Z,h.lastRenderedState=E}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Rp(i){var a=kn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,E=a.memoizedState;if(g!==null){l.pending=null;var w=g=g.next;do E=i(E,w.action),w=w.next;while(w!==g);ai(E,a.memoizedState)||(er=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),l.lastRenderedState=E}return[E,h]}function pb(i,a,l){var h=ct,g=kn(),E=Ot;if(E){if(l===void 0)throw Error(r(407));l=l()}else l=a();var w=!ai((Kt||g).memoizedState,l);w&&(g.memoizedState=l,er=!0),g=g.queue;var H=Eb.bind(null,h,g,i);if(xc(2048,8,H,[i]),g.getSnapshot!==a||w||On!==null&&On.memoizedState.tag&1){if(h.flags|=2048,Uu(9,tf(),yb.bind(null,h,g,l,a),null),tn===null)throw Error(r(349));E||(Sa&124)!==0||gb(h,a,l)}return l}function gb(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=ct.updateQueue,a===null?(a=Ip(),ct.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function yb(i,a,l,h){a.value=l,a.getSnapshot=h,_b(a)&&bb(i)}function Eb(i,a,l){return l(function(){_b(a)&&bb(i)})}function _b(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!ai(i,l)}catch{return!0}}function bb(i){var a=Nu(i,2);a!==null&&di(a,i,2)}function Dp(i){var a=Yr();if(typeof i=="function"){var l=i;if(i=l(),jo){Ve(!0);try{l()}finally{Ve(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:i},a}function Tb(i,a,l,h){return i.baseState=l,Np(i,Kt,typeof h=="function"?h:Ws)}function J3(i,a,l,h,g){if(rf(i))throw Error(r(485));if(i=a.action,i!==null){var E={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){E.listeners.push(w)}};F.T!==null?l(!0):E.isTransition=!1,h(E),l=a.pending,l===null?(E.next=a.pending=E,vb(a,E)):(E.next=l.next,a.pending=l.next=E)}}function vb(i,a){var l=a.action,h=a.payload,g=i.state;if(a.isTransition){var E=F.T,w={};F.T=w;try{var H=l(g,h),Z=F.S;Z!==null&&Z(w,H),Ab(i,a,H)}catch(he){Op(i,a,he)}finally{F.T=E}}else try{E=l(g,h),Ab(i,a,E)}catch(he){Op(i,a,he)}}function Ab(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Sb(i,a,h)},function(h){return Op(i,a,h)}):Sb(i,a,l)}function Sb(i,a,l){a.status="fulfilled",a.value=l,xb(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,vb(i,l)))}function Op(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,xb(a),a=a.next;while(a!==h)}i.action=null}function xb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function wb(i,a){return a}function Ib(i,a){if(Ot){var l=tn.formState;if(l!==null){e:{var h=ct;if(Ot){if(bn){t:{for(var g=bn,E=ys;g.nodeType!==8;){if(!E){g=null;break t}if(g=Wi(g.nextSibling),g===null){g=null;break t}}E=g.data,g=E==="F!"||E==="F"?g:null}if(g){bn=Wi(g.nextSibling),h=g.data==="F!";break e}}Vo(h)}h=!1}h&&(a=l[0])}}return l=Yr(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wb,lastRenderedState:a},l.queue=h,l=Gb.bind(null,ct,h),h.dispatch=l,h=Dp(!1),E=Bp.bind(null,ct,!1,h.queue),h=Yr(),g={state:a,dispatch:null,action:i,pending:null},h.queue=g,l=J3.bind(null,ct,g,E,l),g.dispatch=l,h.memoizedState=i,[a,l,!1]}function Cb(i){var a=kn();return Nb(a,Kt,i)}function Nb(i,a,l){if(a=Np(i,a,wb)[0],i=ef(Ws)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Sc(a)}catch(w){throw w===Ec?Kd:w}else h=a;a=kn();var g=a.queue,E=g.dispatch;return l!==a.memoizedState&&(ct.flags|=2048,Uu(9,tf(),e6.bind(null,g,l),null)),[h,E,i]}function e6(i,a){i.action=a}function Rb(i){var a=kn(),l=Kt;if(l!==null)return Nb(a,l,i);kn(),a=a.memoizedState,l=kn();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function Uu(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=ct.updateQueue,a===null&&(a=Ip(),ct.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function tf(){return{destroy:void 0,resource:void 0}}function Db(){return kn().memoizedState}function nf(i,a,l,h){var g=Yr();h=h===void 0?null:h,ct.flags|=i,g.memoizedState=Uu(1|a,tf(),l,h)}function xc(i,a,l,h){var g=kn();h=h===void 0?null:h;var E=g.memoizedState.inst;Kt!==null&&h!==null&&vp(h,Kt.memoizedState.deps)?g.memoizedState=Uu(a,E,l,h):(ct.flags|=i,g.memoizedState=Uu(1|a,E,l,h))}function Ob(i,a){nf(8390656,8,i,a)}function kb(i,a){xc(2048,8,i,a)}function Lb(i,a){return xc(4,2,i,a)}function Mb(i,a){return xc(4,4,i,a)}function Pb(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Bb(i,a,l){l=l!=null?l.concat([i]):null,xc(4,4,Pb.bind(null,a,i),l)}function kp(){}function Ub(i,a){var l=kn();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&vp(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function Vb(i,a){var l=kn();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&vp(a,h[1]))return h[0];if(h=i(),jo){Ve(!0);try{i()}finally{Ve(!1)}}return l.memoizedState=[h,a],h}function Lp(i,a,l){return l===void 0||(Sa&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=zT(),ct.lanes|=i,Da|=i,l)}function Hb(i,a,l,h){return ai(l,a)?l:Mu.current!==null?(i=Lp(i,l,h),ai(i,a)||(er=!0),i):(Sa&42)===0?(er=!0,i.memoizedState=l):(i=zT(),ct.lanes|=i,Da|=i,a)}function Fb(i,a,l,h,g){var E=Q.p;Q.p=E!==0&&8>E?E:8;var w=F.T,H={};F.T=H,Bp(i,!1,a,l);try{var Z=g(),he=F.S;if(he!==null&&he(H,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var be=Q3(Z,h);wc(i,a,be,hi(i))}else wc(i,a,h,hi(i))}catch(Ae){wc(i,a,{then:function(){},status:"rejected",reason:Ae},hi())}finally{Q.p=E,F.T=w}}function t6(){}function Mp(i,a,l,h){if(i.tag!==5)throw Error(r(476));var g=zb(i).queue;Fb(i,g,a,se,l===null?t6:function(){return jb(i),l(h)})}function zb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:se},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function jb(i){var a=zb(i).next.queue;wc(i,a,{},hi())}function Pp(){return Tr(qc)}function qb(){return kn().memoizedState}function Yb(){return kn().memoizedState}function n6(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=hi();i=va(l);var h=Aa(a,i,l);h!==null&&(di(h,a,l),bc(h,a,l)),a={cache:dp()},i.payload=a;return}a=a.return}}function r6(i,a,l){var h=hi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},rf(i)?$b(a,l):(l=np(i,a,l,h),l!==null&&(di(l,i,h),Kb(l,a,h)))}function Gb(i,a,l){var h=hi();wc(i,a,l,h)}function wc(i,a,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(rf(i))$b(a,g);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var w=a.lastRenderedState,H=E(w,l);if(g.hasEagerState=!0,g.eagerState=H,ai(H,w))return Hd(i,a,g,0),tn===null&&Vd(),!1}catch{}finally{}if(l=np(i,a,g,h),l!==null)return di(l,i,h),Kb(l,a,h),!0}return!1}function Bp(i,a,l,h){if(h={lane:2,revertLane:pg(),action:h,hasEagerState:!1,eagerState:null,next:null},rf(i)){if(a)throw Error(r(479))}else a=np(i,l,h,2),a!==null&&di(a,i,2)}function rf(i){var a=i.alternate;return i===ct||a!==null&&a===ct}function $b(i,a){Pu=Wd=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function Kb(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Us(i,l)}}var sf={readContext:Tr,use:Jd,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn,useHostTransitionStatus:wn,useFormState:wn,useActionState:wn,useOptimistic:wn,useMemoCache:wn,useCacheRefresh:wn},Xb={readContext:Tr,use:Jd,useCallback:function(i,a){return Yr().memoizedState=[i,a===void 0?null:a],i},useContext:Tr,useEffect:Ob,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,nf(4194308,4,Pb.bind(null,a,i),l)},useLayoutEffect:function(i,a){return nf(4194308,4,i,a)},useInsertionEffect:function(i,a){nf(4,2,i,a)},useMemo:function(i,a){var l=Yr();a=a===void 0?null:a;var h=i();if(jo){Ve(!0);try{i()}finally{Ve(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=Yr();if(l!==void 0){var g=l(a);if(jo){Ve(!0);try{l(a)}finally{Ve(!1)}}}else g=a;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=r6.bind(null,ct,i),[h.memoizedState,i]},useRef:function(i){var a=Yr();return i={current:i},a.memoizedState=i},useState:function(i){i=Dp(i);var a=i.queue,l=Gb.bind(null,ct,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:kp,useDeferredValue:function(i,a){var l=Yr();return Lp(l,i,a)},useTransition:function(){var i=Dp(!1);return i=Fb.bind(null,ct,i.queue,!0,!1),Yr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=ct,g=Yr();if(Ot){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),tn===null)throw Error(r(349));(wt&124)!==0||gb(h,a,l)}g.memoizedState=l;var E={value:l,getSnapshot:a};return g.queue=E,Ob(Eb.bind(null,h,E,i),[i]),h.flags|=2048,Uu(9,tf(),yb.bind(null,h,E,l,a),null),l},useId:function(){var i=Yr(),a=tn.identifierPrefix;if(Ot){var l=Ks,h=$s;l=(h&~(1<<32-Ye(h)-1)).toString(32)+l,a=""+a+"R"+l,l=Zd++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=W3++,a=""+a+"r"+l.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:Pp,useFormState:Ib,useActionState:Ib,useOptimistic:function(i){var a=Yr();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Bp.bind(null,ct,!0,l),l.dispatch=a,[i,a]},useMemoCache:Cp,useCacheRefresh:function(){return Yr().memoizedState=n6.bind(null,ct)}},Qb={readContext:Tr,use:Jd,useCallback:Ub,useContext:Tr,useEffect:kb,useImperativeHandle:Bb,useInsertionEffect:Lb,useLayoutEffect:Mb,useMemo:Vb,useReducer:ef,useRef:Db,useState:function(){return ef(Ws)},useDebugValue:kp,useDeferredValue:function(i,a){var l=kn();return Hb(l,Kt.memoizedState,i,a)},useTransition:function(){var i=ef(Ws)[0],a=kn().memoizedState;return[typeof i=="boolean"?i:Sc(i),a]},useSyncExternalStore:pb,useId:qb,useHostTransitionStatus:Pp,useFormState:Cb,useActionState:Cb,useOptimistic:function(i,a){var l=kn();return Tb(l,Kt,i,a)},useMemoCache:Cp,useCacheRefresh:Yb},i6={readContext:Tr,use:Jd,useCallback:Ub,useContext:Tr,useEffect:kb,useImperativeHandle:Bb,useInsertionEffect:Lb,useLayoutEffect:Mb,useMemo:Vb,useReducer:Rp,useRef:Db,useState:function(){return Rp(Ws)},useDebugValue:kp,useDeferredValue:function(i,a){var l=kn();return Kt===null?Lp(l,i,a):Hb(l,Kt.memoizedState,i,a)},useTransition:function(){var i=Rp(Ws)[0],a=kn().memoizedState;return[typeof i=="boolean"?i:Sc(i),a]},useSyncExternalStore:pb,useId:qb,useHostTransitionStatus:Pp,useFormState:Rb,useActionState:Rb,useOptimistic:function(i,a){var l=kn();return Kt!==null?Tb(l,Kt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Cp,useCacheRefresh:Yb},Vu=null,Ic=0;function af(i){var a=Ic;return Ic+=1,Vu===null&&(Vu=[]),ob(Vu,i,a)}function Cc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function of(i,a){throw a.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Wb(i){var a=i._init;return a(i._payload)}function Zb(i){function a(oe,ie){if(i){var le=oe.deletions;le===null?(oe.deletions=[ie],oe.flags|=16):le.push(ie)}}function l(oe,ie){if(!i)return null;for(;ie!==null;)a(oe,ie),ie=ie.sibling;return null}function h(oe){for(var ie=new Map;oe!==null;)oe.key!==null?ie.set(oe.key,oe):ie.set(oe.index,oe),oe=oe.sibling;return ie}function g(oe,ie){return oe=Gs(oe,ie),oe.index=0,oe.sibling=null,oe}function E(oe,ie,le){return oe.index=le,i?(le=oe.alternate,le!==null?(le=le.index,le<ie?(oe.flags|=67108866,ie):le):(oe.flags|=67108866,ie)):(oe.flags|=1048576,ie)}function w(oe){return i&&oe.alternate===null&&(oe.flags|=67108866),oe}function H(oe,ie,le,ve){return ie===null||ie.tag!==6?(ie=ip(le,oe.mode,ve),ie.return=oe,ie):(ie=g(ie,le),ie.return=oe,ie)}function Z(oe,ie,le,ve){var Fe=le.type;return Fe===x?be(oe,ie,le.props.children,ve,le.key):ie!==null&&(ie.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===C&&Wb(Fe)===ie.type)?(ie=g(ie,le.props),Cc(ie,le),ie.return=oe,ie):(ie=zd(le.type,le.key,le.props,null,oe.mode,ve),Cc(ie,le),ie.return=oe,ie)}function he(oe,ie,le,ve){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==le.containerInfo||ie.stateNode.implementation!==le.implementation?(ie=sp(le,oe.mode,ve),ie.return=oe,ie):(ie=g(ie,le.children||[]),ie.return=oe,ie)}function be(oe,ie,le,ve,Fe){return ie===null||ie.tag!==7?(ie=Mo(le,oe.mode,ve,Fe),ie.return=oe,ie):(ie=g(ie,le),ie.return=oe,ie)}function Ae(oe,ie,le){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=ip(""+ie,oe.mode,le),ie.return=oe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:return le=zd(ie.type,ie.key,ie.props,null,oe.mode,le),Cc(le,ie),le.return=oe,le;case T:return ie=sp(ie,oe.mode,le),ie.return=oe,ie;case C:var ve=ie._init;return ie=ve(ie._payload),Ae(oe,ie,le)}if(K(ie)||V(ie))return ie=Mo(ie,oe.mode,le,null),ie.return=oe,ie;if(typeof ie.then=="function")return Ae(oe,af(ie),le);if(ie.$$typeof===Y)return Ae(oe,Gd(oe,ie),le);of(oe,ie)}return null}function fe(oe,ie,le,ve){var Fe=ie!==null?ie.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Fe!==null?null:H(oe,ie,""+le,ve);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return le.key===Fe?Z(oe,ie,le,ve):null;case T:return le.key===Fe?he(oe,ie,le,ve):null;case C:return Fe=le._init,le=Fe(le._payload),fe(oe,ie,le,ve)}if(K(le)||V(le))return Fe!==null?null:be(oe,ie,le,ve,null);if(typeof le.then=="function")return fe(oe,ie,af(le),ve);if(le.$$typeof===Y)return fe(oe,ie,Gd(oe,le),ve);of(oe,le)}return null}function me(oe,ie,le,ve,Fe){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return oe=oe.get(le)||null,H(ie,oe,""+ve,Fe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return oe=oe.get(ve.key===null?le:ve.key)||null,Z(ie,oe,ve,Fe);case T:return oe=oe.get(ve.key===null?le:ve.key)||null,he(ie,oe,ve,Fe);case C:var dt=ve._init;return ve=dt(ve._payload),me(oe,ie,le,ve,Fe)}if(K(ve)||V(ve))return oe=oe.get(le)||null,be(ie,oe,ve,Fe,null);if(typeof ve.then=="function")return me(oe,ie,le,af(ve),Fe);if(ve.$$typeof===Y)return me(oe,ie,le,Gd(ie,ve),Fe);of(ie,ve)}return null}function et(oe,ie,le,ve){for(var Fe=null,dt=null,Ge=ie,Xe=ie=0,nr=null;Ge!==null&&Xe<le.length;Xe++){Ge.index>Xe?(nr=Ge,Ge=null):nr=Ge.sibling;var Rt=fe(oe,Ge,le[Xe],ve);if(Rt===null){Ge===null&&(Ge=nr);break}i&&Ge&&Rt.alternate===null&&a(oe,Ge),ie=E(Rt,ie,Xe),dt===null?Fe=Rt:dt.sibling=Rt,dt=Rt,Ge=nr}if(Xe===le.length)return l(oe,Ge),Ot&&Bo(oe,Xe),Fe;if(Ge===null){for(;Xe<le.length;Xe++)Ge=Ae(oe,le[Xe],ve),Ge!==null&&(ie=E(Ge,ie,Xe),dt===null?Fe=Ge:dt.sibling=Ge,dt=Ge);return Ot&&Bo(oe,Xe),Fe}for(Ge=h(Ge);Xe<le.length;Xe++)nr=me(Ge,oe,Xe,le[Xe],ve),nr!==null&&(i&&nr.alternate!==null&&Ge.delete(nr.key===null?Xe:nr.key),ie=E(nr,ie,Xe),dt===null?Fe=nr:dt.sibling=nr,dt=nr);return i&&Ge.forEach(function(Ha){return a(oe,Ha)}),Ot&&Bo(oe,Xe),Fe}function Ke(oe,ie,le,ve){if(le==null)throw Error(r(151));for(var Fe=null,dt=null,Ge=ie,Xe=ie=0,nr=null,Rt=le.next();Ge!==null&&!Rt.done;Xe++,Rt=le.next()){Ge.index>Xe?(nr=Ge,Ge=null):nr=Ge.sibling;var Ha=fe(oe,Ge,Rt.value,ve);if(Ha===null){Ge===null&&(Ge=nr);break}i&&Ge&&Ha.alternate===null&&a(oe,Ge),ie=E(Ha,ie,Xe),dt===null?Fe=Ha:dt.sibling=Ha,dt=Ha,Ge=nr}if(Rt.done)return l(oe,Ge),Ot&&Bo(oe,Xe),Fe;if(Ge===null){for(;!Rt.done;Xe++,Rt=le.next())Rt=Ae(oe,Rt.value,ve),Rt!==null&&(ie=E(Rt,ie,Xe),dt===null?Fe=Rt:dt.sibling=Rt,dt=Rt);return Ot&&Bo(oe,Xe),Fe}for(Ge=h(Ge);!Rt.done;Xe++,Rt=le.next())Rt=me(Ge,oe,Xe,Rt.value,ve),Rt!==null&&(i&&Rt.alternate!==null&&Ge.delete(Rt.key===null?Xe:Rt.key),ie=E(Rt,ie,Xe),dt===null?Fe=Rt:dt.sibling=Rt,dt=Rt);return i&&Ge.forEach(function(s4){return a(oe,s4)}),Ot&&Bo(oe,Xe),Fe}function Qt(oe,ie,le,ve){if(typeof le=="object"&&le!==null&&le.type===x&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case b:e:{for(var Fe=le.key;ie!==null;){if(ie.key===Fe){if(Fe=le.type,Fe===x){if(ie.tag===7){l(oe,ie.sibling),ve=g(ie,le.props.children),ve.return=oe,oe=ve;break e}}else if(ie.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===C&&Wb(Fe)===ie.type){l(oe,ie.sibling),ve=g(ie,le.props),Cc(ve,le),ve.return=oe,oe=ve;break e}l(oe,ie);break}else a(oe,ie);ie=ie.sibling}le.type===x?(ve=Mo(le.props.children,oe.mode,ve,le.key),ve.return=oe,oe=ve):(ve=zd(le.type,le.key,le.props,null,oe.mode,ve),Cc(ve,le),ve.return=oe,oe=ve)}return w(oe);case T:e:{for(Fe=le.key;ie!==null;){if(ie.key===Fe)if(ie.tag===4&&ie.stateNode.containerInfo===le.containerInfo&&ie.stateNode.implementation===le.implementation){l(oe,ie.sibling),ve=g(ie,le.children||[]),ve.return=oe,oe=ve;break e}else{l(oe,ie);break}else a(oe,ie);ie=ie.sibling}ve=sp(le,oe.mode,ve),ve.return=oe,oe=ve}return w(oe);case C:return Fe=le._init,le=Fe(le._payload),Qt(oe,ie,le,ve)}if(K(le))return et(oe,ie,le,ve);if(V(le)){if(Fe=V(le),typeof Fe!="function")throw Error(r(150));return le=Fe.call(le),Ke(oe,ie,le,ve)}if(typeof le.then=="function")return Qt(oe,ie,af(le),ve);if(le.$$typeof===Y)return Qt(oe,ie,Gd(oe,le),ve);of(oe,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ie!==null&&ie.tag===6?(l(oe,ie.sibling),ve=g(ie,le),ve.return=oe,oe=ve):(l(oe,ie),ve=ip(le,oe.mode,ve),ve.return=oe,oe=ve),w(oe)):l(oe,ie)}return function(oe,ie,le,ve){try{Ic=0;var Fe=Qt(oe,ie,le,ve);return Vu=null,Fe}catch(Ge){if(Ge===Ec||Ge===Kd)throw Ge;var dt=oi(29,Ge,null,oe.mode);return dt.lanes=ve,dt.return=oe,dt}finally{}}}var Hu=Zb(!0),Jb=Zb(!1),Li=J(null),Es=null;function xa(i){var a=i.alternate;B(Gn,Gn.current&1),B(Li,i),Es===null&&(a===null||Mu.current!==null||a.memoizedState!==null)&&(Es=i)}function eT(i){if(i.tag===22){if(B(Gn,Gn.current),B(Li,i),Es===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Es=i)}}else wa()}function wa(){B(Gn,Gn.current),B(Li,Li.current)}function Zs(i){ae(Li),Es===i&&(Es=null),ae(Gn)}var Gn=J(0);function uf(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Ig(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Up(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:p({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Vp={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=hi(),g=va(h);g.payload=a,l!=null&&(g.callback=l),a=Aa(i,g,h),a!==null&&(di(a,i,h),bc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=hi(),g=va(h);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=Aa(i,g,h),a!==null&&(di(a,i,h),bc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=hi(),h=va(l);h.tag=2,a!=null&&(h.callback=a),a=Aa(i,h,l),a!==null&&(di(a,i,l),bc(a,i,l))}};function tT(i,a,l,h,g,E,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,E,w):a.prototype&&a.prototype.isPureReactComponent?!cc(l,h)||!cc(g,E):!0}function nT(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&Vp.enqueueReplaceState(a,a.state,null)}function qo(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=p({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var lf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function rT(i){lf(i)}function iT(i){console.error(i)}function sT(i){lf(i)}function cf(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function aT(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Hp(i,a,l){return l=va(l),l.tag=3,l.payload={element:null},l.callback=function(){cf(i,a)},l}function oT(i){return i=va(i),i.tag=3,i}function uT(i,a,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var E=h.value;i.payload=function(){return g(E)},i.callback=function(){aT(a,l,h)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){aT(a,l,h),typeof g!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var H=h.stack;this.componentDidCatch(h.value,{componentStack:H!==null?H:""})})}function s6(i,a,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&pc(a,l,g,!0),l=Li.current,l!==null){switch(l.tag){case 13:return Es===null?cg():l.alternate===null&&Tn===0&&(Tn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===pp?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),dg(i,h,g)),!1;case 22:return l.flags|=65536,h===pp?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),dg(i,h,g)),!1}throw Error(r(435,l.tag))}return dg(i,h,g),cg(),!1}if(Ot)return a=Li.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==up&&(i=Error(r(422),{cause:h}),mc(Ri(i,l)))):(h!==up&&(a=Error(r(423),{cause:h}),mc(Ri(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=Ri(h,l),g=Hp(i.stateNode,h,g),Ep(i,g),Tn!==4&&(Tn=2)),!1;var E=Error(r(520),{cause:h});if(E=Ri(E,l),Mc===null?Mc=[E]:Mc.push(E),Tn!==4&&(Tn=2),a===null)return!0;h=Ri(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Hp(l.stateNode,h,i),Ep(l,i),!1;case 1:if(a=l.type,E=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Oa===null||!Oa.has(E))))return l.flags|=65536,g&=-g,l.lanes|=g,g=oT(g),uT(g,i,l,h),Ep(l,g),!1}l=l.return}while(l!==null);return!1}var lT=Error(r(461)),er=!1;function fr(i,a,l,h){a.child=i===null?Jb(a,null,l,h):Hu(a,i.child,l,h)}function cT(i,a,l,h,g){l=l.render;var E=a.ref;if("ref"in h){var w={};for(var H in h)H!=="ref"&&(w[H]=h[H])}else w=h;return Fo(a),h=Ap(i,a,l,w,E,g),H=Sp(),i!==null&&!er?(xp(i,a,g),Js(i,a,g)):(Ot&&H&&ap(a),a.flags|=1,fr(i,a,h,g),a.child)}function hT(i,a,l,h,g){if(i===null){var E=l.type;return typeof E=="function"&&!rp(E)&&E.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=E,dT(i,a,E,h,g)):(i=zd(l.type,null,h,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(E=i.child,!Kp(i,g)){var w=E.memoizedProps;if(l=l.compare,l=l!==null?l:cc,l(w,h)&&i.ref===a.ref)return Js(i,a,g)}return a.flags|=1,i=Gs(E,h),i.ref=a.ref,i.return=a,a.child=i}function dT(i,a,l,h,g){if(i!==null){var E=i.memoizedProps;if(cc(E,h)&&i.ref===a.ref)if(er=!1,a.pendingProps=h=E,Kp(i,g))(i.flags&131072)!==0&&(er=!0);else return a.lanes=i.lanes,Js(i,a,g)}return Fp(i,a,l,h,g)}function fT(i,a,l){var h=a.pendingProps,g=h.children,E=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=E!==null?E.baseLanes|l:l,i!==null){for(g=a.child=i.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;a.childLanes=E&~h}else a.childLanes=0,a.child=null;return mT(i,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&$d(a,E!==null?E.cachePool:null),E!==null?db(a,E):bp(),eT(a);else return a.lanes=a.childLanes=536870912,mT(i,a,E!==null?E.baseLanes|l:l,l)}else E!==null?($d(a,E.cachePool),db(a,E),wa(),a.memoizedState=null):(i!==null&&$d(a,null),bp(),wa());return fr(i,a,g,l),a.child}function mT(i,a,l,h){var g=mp();return g=g===null?null:{parent:Yn._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},i!==null&&$d(a,null),bp(),eT(a),i!==null&&pc(i,a,h,!0),null}function hf(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Fp(i,a,l,h,g){return Fo(a),l=Ap(i,a,l,h,void 0,g),h=Sp(),i!==null&&!er?(xp(i,a,g),Js(i,a,g)):(Ot&&h&&ap(a),a.flags|=1,fr(i,a,l,g),a.child)}function pT(i,a,l,h,g,E){return Fo(a),a.updateQueue=null,l=mb(a,h,l,g),fb(i),h=Sp(),i!==null&&!er?(xp(i,a,E),Js(i,a,E)):(Ot&&h&&ap(a),a.flags|=1,fr(i,a,l,E),a.child)}function gT(i,a,l,h,g){if(Fo(a),a.stateNode===null){var E=Ru,w=l.contextType;typeof w=="object"&&w!==null&&(E=Tr(w)),E=new l(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Vp,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},gp(a),w=l.contextType,E.context=typeof w=="object"&&w!==null?Tr(w):Ru,E.state=a.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Up(a,l,w,h),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(w=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),w!==E.state&&Vp.enqueueReplaceState(E,E.state,null),vc(a,h,E,g),Tc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){E=a.stateNode;var H=a.memoizedProps,Z=qo(l,H);E.props=Z;var he=E.context,be=l.contextType;w=Ru,typeof be=="object"&&be!==null&&(w=Tr(be));var Ae=l.getDerivedStateFromProps;be=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function",H=a.pendingProps!==H,be||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H||he!==w)&&nT(a,E,h,w),Ta=!1;var fe=a.memoizedState;E.state=fe,vc(a,h,E,g),Tc(),he=a.memoizedState,H||fe!==he||Ta?(typeof Ae=="function"&&(Up(a,l,Ae,h),he=a.memoizedState),(Z=Ta||tT(a,l,Z,h,fe,he,w))?(be||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=he),E.props=h,E.state=he,E.context=w,h=Z):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,yp(i,a),w=a.memoizedProps,be=qo(l,w),E.props=be,Ae=a.pendingProps,fe=E.context,he=l.contextType,Z=Ru,typeof he=="object"&&he!==null&&(Z=Tr(he)),H=l.getDerivedStateFromProps,(he=typeof H=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(w!==Ae||fe!==Z)&&nT(a,E,h,Z),Ta=!1,fe=a.memoizedState,E.state=fe,vc(a,h,E,g),Tc();var me=a.memoizedState;w!==Ae||fe!==me||Ta||i!==null&&i.dependencies!==null&&Yd(i.dependencies)?(typeof H=="function"&&(Up(a,l,H,h),me=a.memoizedState),(be=Ta||tT(a,l,be,h,fe,me,Z)||i!==null&&i.dependencies!==null&&Yd(i.dependencies))?(he||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,me,Z),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,me,Z)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||w===i.memoizedProps&&fe===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&fe===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=me),E.props=h,E.state=me,E.context=Z,h=be):(typeof E.componentDidUpdate!="function"||w===i.memoizedProps&&fe===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&fe===i.memoizedState||(a.flags|=1024),h=!1)}return E=h,hf(i,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,i!==null&&h?(a.child=Hu(a,i.child,null,g),a.child=Hu(a,null,l,g)):fr(i,a,l,g),a.memoizedState=E.state,i=a.child):i=Js(i,a,g),i}function yT(i,a,l,h){return fc(),a.flags|=256,fr(i,a,l,h),a.child}var zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jp(i){return{baseLanes:i,cachePool:ib()}}function qp(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Mi),i}function ET(i,a,l){var h=a.pendingProps,g=!1,E=(a.flags&128)!==0,w;if((w=E)||(w=i!==null&&i.memoizedState===null?!1:(Gn.current&2)!==0),w&&(g=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,i===null){if(Ot){if(g?xa(a):wa(),Ot){var H=bn,Z;if(Z=H){e:{for(Z=H,H=ys;Z.nodeType!==8;){if(!H){H=null;break e}if(Z=Wi(Z.nextSibling),Z===null){H=null;break e}}H=Z}H!==null?(a.memoizedState={dehydrated:H,treeContext:Po!==null?{id:$s,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},Z=oi(18,null,null,0),Z.stateNode=H,Z.return=a,a.child=Z,Hr=a,bn=null,Z=!0):Z=!1}Z||Vo(a)}if(H=a.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return Ig(H)?a.lanes=32:a.lanes=536870912,null;Zs(a)}return H=h.children,h=h.fallback,g?(wa(),g=a.mode,H=df({mode:"hidden",children:H},g),h=Mo(h,g,l,null),H.return=a,h.return=a,H.sibling=h,a.child=H,g=a.child,g.memoizedState=jp(l),g.childLanes=qp(i,w,l),a.memoizedState=zp,h):(xa(a),Yp(a,H))}if(Z=i.memoizedState,Z!==null&&(H=Z.dehydrated,H!==null)){if(E)a.flags&256?(xa(a),a.flags&=-257,a=Gp(i,a,l)):a.memoizedState!==null?(wa(),a.child=i.child,a.flags|=128,a=null):(wa(),g=h.fallback,H=a.mode,h=df({mode:"visible",children:h.children},H),g=Mo(g,H,l,null),g.flags|=2,h.return=a,g.return=a,h.sibling=g,a.child=h,Hu(a,i.child,null,l),h=a.child,h.memoizedState=jp(l),h.childLanes=qp(i,w,l),a.memoizedState=zp,a=g);else if(xa(a),Ig(H)){if(w=H.nextSibling&&H.nextSibling.dataset,w)var he=w.dgst;w=he,h=Error(r(419)),h.stack="",h.digest=w,mc({value:h,source:null,stack:null}),a=Gp(i,a,l)}else if(er||pc(i,a,l,!1),w=(l&i.childLanes)!==0,er||w){if(w=tn,w!==null&&(h=l&-l,h=(h&42)!==0?1:ri(h),h=(h&(w.suspendedLanes|l))!==0?0:h,h!==0&&h!==Z.retryLane))throw Z.retryLane=h,Nu(i,h),di(w,i,h),lT;H.data==="$?"||cg(),a=Gp(i,a,l)}else H.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=Z.treeContext,bn=Wi(H.nextSibling),Hr=a,Ot=!0,Uo=null,ys=!1,i!==null&&(Oi[ki++]=$s,Oi[ki++]=Ks,Oi[ki++]=Po,$s=i.id,Ks=i.overflow,Po=a),a=Yp(a,h.children),a.flags|=4096);return a}return g?(wa(),g=h.fallback,H=a.mode,Z=i.child,he=Z.sibling,h=Gs(Z,{mode:"hidden",children:h.children}),h.subtreeFlags=Z.subtreeFlags&65011712,he!==null?g=Gs(he,g):(g=Mo(g,H,l,null),g.flags|=2),g.return=a,h.return=a,h.sibling=g,a.child=h,h=g,g=a.child,H=i.child.memoizedState,H===null?H=jp(l):(Z=H.cachePool,Z!==null?(he=Yn._currentValue,Z=Z.parent!==he?{parent:he,pool:he}:Z):Z=ib(),H={baseLanes:H.baseLanes|l,cachePool:Z}),g.memoizedState=H,g.childLanes=qp(i,w,l),a.memoizedState=zp,h):(xa(a),l=i.child,i=l.sibling,l=Gs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(w=a.deletions,w===null?(a.deletions=[i],a.flags|=16):w.push(i)),a.child=l,a.memoizedState=null,l)}function Yp(i,a){return a=df({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function df(i,a){return i=oi(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Gp(i,a,l){return Hu(a,i.child,null,l),i=Yp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function _T(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),cp(i.return,a,l)}function $p(i,a,l,h,g){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=g)}function bT(i,a,l){var h=a.pendingProps,g=h.revealOrder,E=h.tail;if(fr(i,a,h.children,l),h=Gn.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_T(i,l,a);else if(i.tag===19)_T(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(B(Gn,h),g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&uf(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),$p(a,!1,g,l,E);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&uf(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}$p(a,!0,l,null,E);break;case"together":$p(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Js(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Da|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(pc(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=Gs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Gs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function Kp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Yd(i)))}function a6(i,a,l){switch(a.tag){case 3:we(a,a.stateNode.containerInfo),ba(a,Yn,i.memoizedState.cache),fc();break;case 27:case 5:He(a);break;case 4:we(a,a.stateNode.containerInfo);break;case 10:ba(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(xa(a),a.flags|=128,null):(l&a.child.childLanes)!==0?ET(i,a,l):(xa(a),i=Js(i,a,l),i!==null?i.sibling:null);xa(a);break;case 19:var g=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(pc(i,a,l,!1),h=(l&a.childLanes)!==0),g){if(h)return bT(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),B(Gn,Gn.current),h)break;return null;case 22:case 23:return a.lanes=0,fT(i,a,l);case 24:ba(a,Yn,i.memoizedState.cache)}return Js(i,a,l)}function TT(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)er=!0;else{if(!Kp(i,l)&&(a.flags&128)===0)return er=!1,a6(i,a,l);er=(i.flags&131072)!==0}else er=!1,Ot&&(a.flags&1048576)!==0&&W_(a,qd,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var h=a.elementType,g=h._init;if(h=g(h._payload),a.type=h,typeof h=="function")rp(h)?(i=qo(h,i),a.tag=1,a=gT(null,a,h,i,l)):(a.tag=0,a=Fp(null,a,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===q){a.tag=11,a=cT(null,a,h,i,l);break e}else if(g===R){a.tag=14,a=hT(null,a,h,i,l);break e}}throw a=L(h)||h,Error(r(306,a,""))}}return a;case 0:return Fp(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,g=qo(h,a.pendingProps),gT(i,a,h,g,l);case 3:e:{if(we(a,a.stateNode.containerInfo),i===null)throw Error(r(387));h=a.pendingProps;var E=a.memoizedState;g=E.element,yp(i,a),vc(a,h,null,l);var w=a.memoizedState;if(h=w.cache,ba(a,Yn,h),h!==E.cache&&hp(a,[Yn],l,!0),Tc(),h=w.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=yT(i,a,h,l);break e}else if(h!==g){g=Ri(Error(r(424)),a),mc(g),a=yT(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(bn=Wi(i.firstChild),Hr=a,Ot=!0,Uo=null,ys=!0,l=Jb(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(fc(),h===g){a=Js(i,a,l);break e}fr(i,a,h,l)}a=a.child}return a;case 26:return hf(i,a),i===null?(l=xv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ot||(l=a.type,i=a.pendingProps,h=wf(Ie.current).createElement(l),h[Lt]=a,h[hn]=i,pr(h,l,i),ne(h),a.stateNode=h):a.memoizedState=xv(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return He(a),i===null&&Ot&&(h=a.stateNode=vv(a.type,a.pendingProps,Ie.current),Hr=a,ys=!0,g=bn,Ma(a.type)?(Cg=g,bn=Wi(h.firstChild)):bn=g),fr(i,a,a.pendingProps.children,l),hf(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&Ot&&((g=h=bn)&&(h=L6(h,a.type,a.pendingProps,ys),h!==null?(a.stateNode=h,Hr=a,bn=Wi(h.firstChild),ys=!1,g=!0):g=!1),g||Vo(a)),He(a),g=a.type,E=a.pendingProps,w=i!==null?i.memoizedProps:null,h=E.children,Sg(g,E)?h=null:w!==null&&Sg(g,w)&&(a.flags|=32),a.memoizedState!==null&&(g=Ap(i,a,Z3,null,null,l),qc._currentValue=g),hf(i,a),fr(i,a,h,l),a.child;case 6:return i===null&&Ot&&((i=l=bn)&&(l=M6(l,a.pendingProps,ys),l!==null?(a.stateNode=l,Hr=a,bn=null,i=!0):i=!1),i||Vo(a)),null;case 13:return ET(i,a,l);case 4:return we(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Hu(a,null,h,l):fr(i,a,h,l),a.child;case 11:return cT(i,a,a.type,a.pendingProps,l);case 7:return fr(i,a,a.pendingProps,l),a.child;case 8:return fr(i,a,a.pendingProps.children,l),a.child;case 12:return fr(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,ba(a,a.type,h.value),fr(i,a,h.children,l),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,Fo(a),g=Tr(g),h=h(g),a.flags|=1,fr(i,a,h,l),a.child;case 14:return hT(i,a,a.type,a.pendingProps,l);case 15:return dT(i,a,a.type,a.pendingProps,l);case 19:return bT(i,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},i===null?(l=df(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Gs(i.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return fT(i,a,l);case 24:return Fo(a),h=Tr(Yn),i===null?(g=mp(),g===null&&(g=tn,E=dp(),g.pooledCache=E,E.refCount++,E!==null&&(g.pooledCacheLanes|=l),g=E),a.memoizedState={parent:h,cache:g},gp(a),ba(a,Yn,g)):((i.lanes&l)!==0&&(yp(i,a),vc(a,null,null,l),Tc()),g=i.memoizedState,E=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),ba(a,Yn,h)):(h=E.cache,ba(a,Yn,h),h!==g.cache&&hp(a,[Yn],l,!0))),fr(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ea(i){i.flags|=4}function vT(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Rv(a)){if(a=Li.current,a!==null&&((wt&4194048)===wt?Es!==null:(wt&62914560)!==wt&&(wt&536870912)===0||a!==Es))throw _c=pp,sb;i.flags|=8192}}function ff(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?_r():536870912,i.lanes|=a,qu|=a)}function Nc(i,a){if(!Ot)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function pn(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function o6(i,a,l){var h=a.pendingProps;switch(op(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return pn(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Qs(Yn),Me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(dc(a)?ea(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,eb())),pn(a),null;case 26:return l=a.memoizedState,i===null?(ea(a),l!==null?(pn(a),vT(a,l)):(pn(a),a.flags&=-16777217)):l?l!==i.memoizedState?(ea(a),pn(a),vT(a,l)):(pn(a),a.flags&=-16777217):(i.memoizedProps!==h&&ea(a),pn(a),a.flags&=-16777217),null;case 27:Je(a),l=Ie.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ea(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return pn(a),null}i=ge.current,dc(a)?Z_(a):(i=vv(g,h,l),a.stateNode=i,ea(a))}return pn(a),null;case 5:if(Je(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ea(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return pn(a),null}if(i=ge.current,dc(a))Z_(a);else{switch(g=wf(Ie.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[Lt]=a,i[hn]=h;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(pr(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ea(a)}}return pn(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ea(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(i=Ie.current,dc(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,g=Hr,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[Lt]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||pv(i.nodeValue,l)),i||Vo(a)}else i=wf(i).createTextNode(h),i[Lt]=a,a.stateNode=i}return pn(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=dc(a),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Lt]=a}else fc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pn(a),g=!1}else g=eb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Zs(a),a):(Zs(a),null)}if(Zs(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var E=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==g&&(h.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),ff(a,a.updateQueue),pn(a),null;case 4:return Me(),i===null&&_g(a.stateNode.containerInfo),pn(a),null;case 10:return Qs(a.type),pn(a),null;case 19:if(ae(Gn),g=a.memoizedState,g===null)return pn(a),null;if(h=(a.flags&128)!==0,E=g.rendering,E===null)if(h)Nc(g,!1);else{if(Tn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(E=uf(i),E!==null){for(a.flags|=128,Nc(g,!1),i=E.updateQueue,a.updateQueue=i,ff(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Q_(l,i),l=l.sibling;return B(Gn,Gn.current&1|2),a.child}i=i.sibling}g.tail!==null&&Qe()>gf&&(a.flags|=128,h=!0,Nc(g,!1),a.lanes=4194304)}else{if(!h)if(i=uf(E),i!==null){if(a.flags|=128,h=!0,i=i.updateQueue,a.updateQueue=i,ff(a,i),Nc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Ot)return pn(a),null}else 2*Qe()-g.renderingStartTime>gf&&l!==536870912&&(a.flags|=128,h=!0,Nc(g,!1),a.lanes=4194304);g.isBackwards?(E.sibling=a.child,a.child=E):(i=g.last,i!==null?i.sibling=E:a.child=E,g.last=E)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Qe(),a.sibling=null,i=Gn.current,B(Gn,h?i&1|2:i&1),a):(pn(a),null);case 22:case 23:return Zs(a),Tp(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),l=a.updateQueue,l!==null&&ff(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&ae(zo),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Qs(Yn),pn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function u6(i,a){switch(op(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Qs(Yn),Me(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Je(a),null;case 13:if(Zs(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));fc()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ae(Gn),null;case 4:return Me(),null;case 10:return Qs(a.type),null;case 22:case 23:return Zs(a),Tp(),i!==null&&ae(zo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Qs(Yn),null;case 25:return null;default:return null}}function AT(i,a){switch(op(a),a.tag){case 3:Qs(Yn),Me();break;case 26:case 27:case 5:Je(a);break;case 4:Me();break;case 13:Zs(a);break;case 19:ae(Gn);break;case 10:Qs(a.type);break;case 22:case 23:Zs(a),Tp(),i!==null&&ae(zo);break;case 24:Qs(Yn)}}function Rc(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var E=l.create,w=l.inst;h=E(),w.destroy=h}l=l.next}while(l!==g)}}catch(H){Zt(a,a.return,H)}}function Ia(i,a,l){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var E=g.next;h=E;do{if((h.tag&i)===i){var w=h.inst,H=w.destroy;if(H!==void 0){w.destroy=void 0,g=a;var Z=l,he=H;try{he()}catch(be){Zt(g,Z,be)}}}h=h.next}while(h!==E)}}catch(be){Zt(a,a.return,be)}}function ST(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{hb(a,l)}catch(h){Zt(i,i.return,h)}}}function xT(i,a,l){l.props=qo(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Zt(i,a,h)}}function Dc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){Zt(i,a,g)}}function _s(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Zt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Zt(i,a,g)}else l.current=null}function wT(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Zt(i,i.return,g)}}function Xp(i,a,l){try{var h=i.stateNode;N6(h,i.type,l,a),h[hn]=a}catch(g){Zt(i,i.return,g)}}function IT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ma(i.type)||i.tag===4}function Qp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||IT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ma(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=xf));else if(h!==4&&(h===27&&Ma(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(Wp(i,a,l),i=i.sibling;i!==null;)Wp(i,a,l),i=i.sibling}function mf(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Ma(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(mf(i,a,l),i=i.sibling;i!==null;)mf(i,a,l),i=i.sibling}function CT(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);pr(a,h,l),a[Lt]=i,a[hn]=l}catch(E){Zt(i,i.return,E)}}var ta=!1,In=!1,Zp=!1,NT=typeof WeakSet=="function"?WeakSet:Set,tr=null;function l6(i,a){if(i=i.containerInfo,vg=Of,i=H_(i),Qm(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var w=0,H=-1,Z=-1,he=0,be=0,Ae=i,fe=null;t:for(;;){for(var me;Ae!==l||g!==0&&Ae.nodeType!==3||(H=w+g),Ae!==E||h!==0&&Ae.nodeType!==3||(Z=w+h),Ae.nodeType===3&&(w+=Ae.nodeValue.length),(me=Ae.firstChild)!==null;)fe=Ae,Ae=me;for(;;){if(Ae===i)break t;if(fe===l&&++he===g&&(H=w),fe===E&&++be===h&&(Z=w),(me=Ae.nextSibling)!==null)break;Ae=fe,fe=Ae.parentNode}Ae=me}l=H===-1||Z===-1?null:{start:H,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ag={focusedElem:i,selectionRange:l},Of=!1,tr=a;tr!==null;)if(a=tr,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,tr=i;else for(;tr!==null;){switch(a=tr,E=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&E!==null){i=void 0,l=a,g=E.memoizedProps,E=E.memoizedState,h=l.stateNode;try{var et=qo(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(et,E),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ke){Zt(l,l.return,Ke)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)wg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":wg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,tr=i;break}tr=a.return}}function RT(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Ca(i,l),h&4&&Rc(5,l);break;case 1:if(Ca(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(w){Zt(l,l.return,w)}else{var g=qo(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Zt(l,l.return,w)}}h&64&&ST(l),h&512&&Dc(l,l.return);break;case 3:if(Ca(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{hb(i,a)}catch(w){Zt(l,l.return,w)}}break;case 27:a===null&&h&4&&CT(l);case 26:case 5:Ca(i,l),a===null&&h&4&&wT(l),h&512&&Dc(l,l.return);break;case 12:Ca(i,l);break;case 13:Ca(i,l),h&4&&kT(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=E6.bind(null,l),P6(i,l))));break;case 22:if(h=l.memoizedState!==null||ta,!h){a=a!==null&&a.memoizedState!==null||In,g=ta;var E=In;ta=h,(In=a)&&!E?Na(i,l,(l.subtreeFlags&8772)!==0):Ca(i,l),ta=g,In=E}break;case 30:break;default:Ca(i,l)}}function DT(i){var a=i.alternate;a!==null&&(i.alternate=null,DT(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&si(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var fn=null,Gr=!1;function na(i,a,l){for(l=l.child;l!==null;)OT(i,a,l),l=l.sibling}function OT(i,a,l){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:In||_s(l,a),na(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:In||_s(l,a);var h=fn,g=Gr;Ma(l.type)&&(fn=l.stateNode,Gr=!1),na(i,a,l),Hc(l.stateNode),fn=h,Gr=g;break;case 5:In||_s(l,a);case 6:if(h=fn,g=Gr,fn=null,na(i,a,l),fn=h,Gr=g,fn!==null)if(Gr)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(l.stateNode)}catch(E){Zt(l,a,E)}else try{fn.removeChild(l.stateNode)}catch(E){Zt(l,a,E)}break;case 18:fn!==null&&(Gr?(i=fn,bv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Kc(i)):bv(fn,l.stateNode));break;case 4:h=fn,g=Gr,fn=l.stateNode.containerInfo,Gr=!0,na(i,a,l),fn=h,Gr=g;break;case 0:case 11:case 14:case 15:In||Ia(2,l,a),In||Ia(4,l,a),na(i,a,l);break;case 1:In||(_s(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&xT(l,a,h)),na(i,a,l);break;case 21:na(i,a,l);break;case 22:In=(h=In)||l.memoizedState!==null,na(i,a,l),In=h;break;default:na(i,a,l)}}function kT(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Kc(i)}catch(l){Zt(a,a.return,l)}}function c6(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new NT),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new NT),a;default:throw Error(r(435,i.tag))}}function Jp(i,a){var l=c6(i);a.forEach(function(h){var g=_6.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function ui(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],E=i,w=a,H=w;e:for(;H!==null;){switch(H.tag){case 27:if(Ma(H.type)){fn=H.stateNode,Gr=!1;break e}break;case 5:fn=H.stateNode,Gr=!1;break e;case 3:case 4:fn=H.stateNode.containerInfo,Gr=!0;break e}H=H.return}if(fn===null)throw Error(r(160));OT(E,w,g),fn=null,Gr=!1,E=g.alternate,E!==null&&(E.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)LT(a,i),a=a.sibling}var Qi=null;function LT(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ui(a,i),li(i),h&4&&(Ia(3,i,i.return),Rc(3,i),Ia(5,i,i.return));break;case 1:ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),h&64&&ta&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Qi;if(ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),h&4){var E=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":E=g.getElementsByTagName("title")[0],(!E||E[Ai]||E[Lt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=g.createElement(h),g.head.insertBefore(E,g.querySelector("head > title"))),pr(E,h,l),E[Lt]=i,ne(E),h=E;break e;case"link":var w=Cv("link","href",g).get(h+(l.href||""));if(w){for(var H=0;H<w.length;H++)if(E=w[H],E.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&E.getAttribute("rel")===(l.rel==null?null:l.rel)&&E.getAttribute("title")===(l.title==null?null:l.title)&&E.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(H,1);break t}}E=g.createElement(h),pr(E,h,l),g.head.appendChild(E);break;case"meta":if(w=Cv("meta","content",g).get(h+(l.content||""))){for(H=0;H<w.length;H++)if(E=w[H],E.getAttribute("content")===(l.content==null?null:""+l.content)&&E.getAttribute("name")===(l.name==null?null:l.name)&&E.getAttribute("property")===(l.property==null?null:l.property)&&E.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&E.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(H,1);break t}}E=g.createElement(h),pr(E,h,l),g.head.appendChild(E);break;default:throw Error(r(468,h))}E[Lt]=i,ne(E),h=E}i.stateNode=h}else Nv(g,i.type,i.stateNode);else i.stateNode=Iv(g,h,i.memoizedProps);else E!==h?(E===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):E.count--,h===null?Nv(g,i.type,i.stateNode):Iv(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Xp(i,i.memoizedProps,l.memoizedProps)}break;case 27:ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),l!==null&&h&4&&Xp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(ui(a,i),li(i),h&512&&(In||l===null||_s(l,l.return)),i.flags&32){g=i.stateNode;try{cr(g,"")}catch(me){Zt(i,i.return,me)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Xp(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Zp=!0);break;case 6:if(ui(a,i),li(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(me){Zt(i,i.return,me)}}break;case 3:if(Nf=null,g=Qi,Qi=If(a.containerInfo),ui(a,i),Qi=g,li(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Kc(a.containerInfo)}catch(me){Zt(i,i.return,me)}Zp&&(Zp=!1,MT(i));break;case 4:h=Qi,Qi=If(i.stateNode.containerInfo),ui(a,i),li(i),Qi=h;break;case 12:ui(a,i),li(i);break;case 13:ui(a,i),li(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sg=Qe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Jp(i,h)));break;case 22:g=i.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,he=ta,be=In;if(ta=he||g,In=be||Z,ui(a,i),In=be,ta=he,li(i),h&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||Z||ta||In||Yo(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Z=l=a;try{if(E=Z.stateNode,g)w=E.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{H=Z.stateNode;var Ae=Z.memoizedProps.style,fe=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;H.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(me){Zt(Z,Z.return,me)}}}else if(a.tag===6){if(l===null){Z=a;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(me){Zt(Z,Z.return,me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Jp(i,l))));break;case 19:ui(a,i),li(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Jp(i,h)));break;case 30:break;case 21:break;default:ui(a,i),li(i)}}function li(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(IT(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,E=Qp(i);mf(i,E,g);break;case 5:var w=l.stateNode;l.flags&32&&(cr(w,""),l.flags&=-33);var H=Qp(i);mf(i,H,w);break;case 3:case 4:var Z=l.stateNode.containerInfo,he=Qp(i);Wp(i,he,Z);break;default:throw Error(r(161))}}catch(be){Zt(i,i.return,be)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function MT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;MT(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ca(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)RT(i,a.alternate,a),a=a.sibling}function Yo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ia(4,a,a.return),Yo(a);break;case 1:_s(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&xT(a,a.return,l),Yo(a);break;case 27:Hc(a.stateNode);case 26:case 5:_s(a,a.return),Yo(a);break;case 22:a.memoizedState===null&&Yo(a);break;case 30:Yo(a);break;default:Yo(a)}i=i.sibling}}function Na(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=i,E=a,w=E.flags;switch(E.tag){case 0:case 11:case 15:Na(g,E,l),Rc(4,E);break;case 1:if(Na(g,E,l),h=E,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(he){Zt(h,h.return,he)}if(h=E,g=h.updateQueue,g!==null){var H=h.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)cb(Z[g],H)}catch(he){Zt(h,h.return,he)}}l&&w&64&&ST(E),Dc(E,E.return);break;case 27:CT(E);case 26:case 5:Na(g,E,l),l&&h===null&&w&4&&wT(E),Dc(E,E.return);break;case 12:Na(g,E,l);break;case 13:Na(g,E,l),l&&w&4&&kT(g,E);break;case 22:E.memoizedState===null&&Na(g,E,l),Dc(E,E.return);break;case 30:break;default:Na(g,E,l)}a=a.sibling}}function eg(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&gc(l))}function tg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&gc(i))}function bs(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)PT(i,a,l,h),a=a.sibling}function PT(i,a,l,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:bs(i,a,l,h),g&2048&&Rc(9,a);break;case 1:bs(i,a,l,h);break;case 3:bs(i,a,l,h),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&gc(i)));break;case 12:if(g&2048){bs(i,a,l,h),i=a.stateNode;try{var E=a.memoizedProps,w=E.id,H=E.onPostCommit;typeof H=="function"&&H(w,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Z){Zt(a,a.return,Z)}}else bs(i,a,l,h);break;case 13:bs(i,a,l,h);break;case 23:break;case 22:E=a.stateNode,w=a.alternate,a.memoizedState!==null?E._visibility&2?bs(i,a,l,h):Oc(i,a):E._visibility&2?bs(i,a,l,h):(E._visibility|=2,Fu(i,a,l,h,(a.subtreeFlags&10256)!==0)),g&2048&&eg(w,a);break;case 24:bs(i,a,l,h),g&2048&&tg(a.alternate,a);break;default:bs(i,a,l,h)}}function Fu(i,a,l,h,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=i,w=a,H=l,Z=h,he=w.flags;switch(w.tag){case 0:case 11:case 15:Fu(E,w,H,Z,g),Rc(8,w);break;case 23:break;case 22:var be=w.stateNode;w.memoizedState!==null?be._visibility&2?Fu(E,w,H,Z,g):Oc(E,w):(be._visibility|=2,Fu(E,w,H,Z,g)),g&&he&2048&&eg(w.alternate,w);break;case 24:Fu(E,w,H,Z,g),g&&he&2048&&tg(w.alternate,w);break;default:Fu(E,w,H,Z,g)}a=a.sibling}}function Oc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,g=h.flags;switch(h.tag){case 22:Oc(l,h),g&2048&&eg(h.alternate,h);break;case 24:Oc(l,h),g&2048&&tg(h.alternate,h);break;default:Oc(l,h)}a=a.sibling}}var kc=8192;function zu(i){if(i.subtreeFlags&kc)for(i=i.child;i!==null;)BT(i),i=i.sibling}function BT(i){switch(i.tag){case 26:zu(i),i.flags&kc&&i.memoizedState!==null&&X6(Qi,i.memoizedState,i.memoizedProps);break;case 5:zu(i);break;case 3:case 4:var a=Qi;Qi=If(i.stateNode.containerInfo),zu(i),Qi=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=kc,kc=16777216,zu(i),kc=a):zu(i));break;default:zu(i)}}function UT(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Lc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];tr=h,HT(h,i)}UT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)VT(i),i=i.sibling}function VT(i){switch(i.tag){case 0:case 11:case 15:Lc(i),i.flags&2048&&Ia(9,i,i.return);break;case 3:Lc(i);break;case 12:Lc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,pf(i)):Lc(i);break;default:Lc(i)}}function pf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];tr=h,HT(h,i)}UT(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ia(8,a,a.return),pf(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,pf(a));break;default:pf(a)}i=i.sibling}}function HT(i,a){for(;tr!==null;){var l=tr;switch(l.tag){case 0:case 11:case 15:Ia(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:gc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,tr=h;else e:for(l=i;tr!==null;){h=tr;var g=h.sibling,E=h.return;if(DT(h),h===l){tr=null;break e}if(g!==null){g.return=E,tr=g;break e}tr=E}}}var h6={getCacheForType:function(i){var a=Tr(Yn),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},d6=typeof WeakMap=="function"?WeakMap:Map,qt=0,tn=null,gt=null,wt=0,Yt=0,ci=null,Ra=!1,ju=!1,ng=!1,ra=0,Tn=0,Da=0,Go=0,rg=0,Mi=0,qu=0,Mc=null,$r=null,ig=!1,sg=0,gf=1/0,yf=null,Oa=null,mr=0,ka=null,Yu=null,Gu=0,ag=0,og=null,FT=null,Pc=0,ug=null;function hi(){if((qt&2)!==0&&wt!==0)return wt&-wt;if(F.T!==null){var i=ku;return i!==0?i:pg()}return Dr()}function zT(){Mi===0&&(Mi=(wt&536870912)===0||Ot?Yi():536870912);var i=Li.current;return i!==null&&(i.flags|=32),Mi}function di(i,a,l){(i===tn&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)&&($u(i,0),La(i,wt,Mi,!1)),Rr(i,l),((qt&2)===0||i!==tn)&&(i===tn&&((qt&2)===0&&(Go|=l),Tn===4&&La(i,wt,Mi,!1)),Ts(i))}function jT(i,a,l){if((qt&6)!==0)throw Error(r(327));var h=!l&&(a&124)===0&&(a&i.expiredLanes)===0||Wt(i,a),g=h?p6(i,a):hg(i,a,!0),E=h;do{if(g===0){ju&&!h&&La(i,a,0,!1);break}else{if(l=i.current.alternate,E&&!f6(l)){g=hg(i,a,!1),E=!1;continue}if(g===2){if(E=a,i.errorRecoveryDisabledLanes&E)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var H=i;g=Mc;var Z=H.current.memoizedState.isDehydrated;if(Z&&($u(H,w).flags|=256),w=hg(H,w,!1),w!==2){if(ng&&!Z){H.errorRecoveryDisabledLanes|=E,Go|=E,g=4;break e}E=$r,$r=g,E!==null&&($r===null?$r=E:$r.push.apply($r,E))}g=w}if(E=!1,g!==2)continue}}if(g===1){$u(i,0),La(i,a,0,!0);break}e:{switch(h=i,E=g,E){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:La(h,a,Mi,!Ra);break e;case 2:$r=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=sg+300-Qe(),10<g)){if(La(h,a,Mi,!Ra),lt(h,0,!0)!==0)break e;h.timeoutHandle=Ev(qT.bind(null,h,l,$r,yf,ig,a,Mi,Go,qu,Ra,E,2,-0,0),g);break e}qT(h,l,$r,yf,ig,a,Mi,Go,qu,Ra,E,0,-0,0)}}break}while(!0);Ts(i)}function qT(i,a,l,h,g,E,w,H,Z,he,be,Ae,fe,me){if(i.timeoutHandle=-1,Ae=a.subtreeFlags,(Ae&8192||(Ae&16785408)===16785408)&&(jc={stylesheets:null,count:0,unsuspend:K6},BT(a),Ae=Q6(),Ae!==null)){i.cancelPendingCommit=Ae(WT.bind(null,i,a,E,l,h,g,w,H,Z,be,1,fe,me)),La(i,E,w,!he);return}WT(i,a,E,l,h,g,w,H,Z)}function f6(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],E=g.getSnapshot;g=g.value;try{if(!ai(E(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function La(i,a,l,h){a&=~rg,a&=~Go,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var g=a;0<g;){var E=31-Ye(g),w=1<<E;h[E]=-1,g&=~w}l!==0&&jr(i,l,a)}function Ef(){return(qt&6)===0?(Bc(0),!1):!0}function lg(){if(gt!==null){if(Yt===0)var i=gt.return;else i=gt,Xs=Ho=null,wp(i),Vu=null,Ic=0,i=gt;for(;i!==null;)AT(i.alternate,i),i=i.return;gt=null}}function $u(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,D6(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),lg(),tn=i,gt=l=Gs(i.current,null),wt=a,Yt=0,ci=null,Ra=!1,ju=Wt(i,a),ng=!1,qu=Mi=rg=Go=Da=Tn=0,$r=Mc=null,ig=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var g=31-Ye(h),E=1<<g;a|=i[g],h&=~E}return ra=a,Vd(),l}function YT(i,a){ct=null,F.H=sf,a===Ec||a===Kd?(a=ub(),Yt=3):a===sb?(a=ub(),Yt=4):Yt=a===lT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ci=a,gt===null&&(Tn=1,cf(i,Ri(a,i.current)))}function GT(){var i=F.H;return F.H=sf,i===null?sf:i}function $T(){var i=F.A;return F.A=h6,i}function cg(){Tn=4,Ra||(wt&4194048)!==wt&&Li.current!==null||(ju=!0),(Da&134217727)===0&&(Go&134217727)===0||tn===null||La(tn,wt,Mi,!1)}function hg(i,a,l){var h=qt;qt|=2;var g=GT(),E=$T();(tn!==i||wt!==a)&&(yf=null,$u(i,a)),a=!1;var w=Tn;e:do try{if(Yt!==0&&gt!==null){var H=gt,Z=ci;switch(Yt){case 8:lg(),w=6;break e;case 3:case 2:case 9:case 6:Li.current===null&&(a=!0);var he=Yt;if(Yt=0,ci=null,Ku(i,H,Z,he),l&&ju){w=0;break e}break;default:he=Yt,Yt=0,ci=null,Ku(i,H,Z,he)}}m6(),w=Tn;break}catch(be){YT(i,be)}while(!0);return a&&i.shellSuspendCounter++,Xs=Ho=null,qt=h,F.H=g,F.A=E,gt===null&&(tn=null,wt=0,Vd()),w}function m6(){for(;gt!==null;)KT(gt)}function p6(i,a){var l=qt;qt|=2;var h=GT(),g=$T();tn!==i||wt!==a?(yf=null,gf=Qe()+500,$u(i,a)):ju=Wt(i,a);e:do try{if(Yt!==0&&gt!==null){a=gt;var E=ci;t:switch(Yt){case 1:Yt=0,ci=null,Ku(i,a,E,1);break;case 2:case 9:if(ab(E)){Yt=0,ci=null,XT(a);break}a=function(){Yt!==2&&Yt!==9||tn!==i||(Yt=7),Ts(i)},E.then(a,a);break e;case 3:Yt=7;break e;case 4:Yt=5;break e;case 7:ab(E)?(Yt=0,ci=null,XT(a)):(Yt=0,ci=null,Ku(i,a,E,7));break;case 5:var w=null;switch(gt.tag){case 26:w=gt.memoizedState;case 5:case 27:var H=gt;if(!w||Rv(w)){Yt=0,ci=null;var Z=H.sibling;if(Z!==null)gt=Z;else{var he=H.return;he!==null?(gt=he,_f(he)):gt=null}break t}}Yt=0,ci=null,Ku(i,a,E,5);break;case 6:Yt=0,ci=null,Ku(i,a,E,6);break;case 8:lg(),Tn=6;break e;default:throw Error(r(462))}}g6();break}catch(be){YT(i,be)}while(!0);return Xs=Ho=null,F.H=h,F.A=g,qt=l,gt!==null?0:(tn=null,wt=0,Vd(),Tn)}function g6(){for(;gt!==null&&!Dt();)KT(gt)}function KT(i){var a=TT(i.alternate,i,ra);i.memoizedProps=i.pendingProps,a===null?_f(i):gt=a}function XT(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=pT(l,a,a.pendingProps,a.type,void 0,wt);break;case 11:a=pT(l,a,a.pendingProps,a.type.render,a.ref,wt);break;case 5:wp(a);default:AT(l,a),a=gt=Q_(a,ra),a=TT(l,a,ra)}i.memoizedProps=i.pendingProps,a===null?_f(i):gt=a}function Ku(i,a,l,h){Xs=Ho=null,wp(a),Vu=null,Ic=0;var g=a.return;try{if(s6(i,g,a,l,wt)){Tn=1,cf(i,Ri(l,i.current)),gt=null;return}}catch(E){if(g!==null)throw gt=g,E;Tn=1,cf(i,Ri(l,i.current)),gt=null;return}a.flags&32768?(Ot||h===1?i=!0:ju||(wt&536870912)!==0?i=!1:(Ra=i=!0,(h===2||h===9||h===3||h===6)&&(h=Li.current,h!==null&&h.tag===13&&(h.flags|=16384))),QT(a,i)):_f(a)}function _f(i){var a=i;do{if((a.flags&32768)!==0){QT(a,Ra);return}i=a.return;var l=o6(a.alternate,a,ra);if(l!==null){gt=l;return}if(a=a.sibling,a!==null){gt=a;return}gt=a=i}while(a!==null);Tn===0&&(Tn=5)}function QT(i,a){do{var l=u6(i.alternate,i);if(l!==null){l.flags&=32767,gt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){gt=i;return}gt=i=l}while(i!==null);Tn=6,gt=null}function WT(i,a,l,h,g,E,w,H,Z){i.cancelPendingCommit=null;do bf();while(mr!==0);if((qt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(E=a.lanes|a.childLanes,E|=tp,br(i,l,E,w,H,Z),i===tn&&(gt=tn=null,wt=0),Yu=a,ka=i,Gu=l,ag=E,og=g,FT=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,b6(Vn,function(){return nv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,g=Q.p,Q.p=2,w=qt,qt|=4;try{l6(i,a,l)}finally{qt=w,Q.p=g,F.T=h}}mr=1,ZT(),JT(),ev()}}function ZT(){if(mr===1){mr=0;var i=ka,a=Yu,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=F.T,F.T=null;var h=Q.p;Q.p=2;var g=qt;qt|=4;try{LT(a,i);var E=Ag,w=H_(i.containerInfo),H=E.focusedElem,Z=E.selectionRange;if(w!==H&&H&&H.ownerDocument&&V_(H.ownerDocument.documentElement,H)){if(Z!==null&&Qm(H)){var he=Z.start,be=Z.end;if(be===void 0&&(be=he),"selectionStart"in H)H.selectionStart=he,H.selectionEnd=Math.min(be,H.value.length);else{var Ae=H.ownerDocument||document,fe=Ae&&Ae.defaultView||window;if(fe.getSelection){var me=fe.getSelection(),et=H.textContent.length,Ke=Math.min(Z.start,et),Qt=Z.end===void 0?Ke:Math.min(Z.end,et);!me.extend&&Ke>Qt&&(w=Qt,Qt=Ke,Ke=w);var oe=U_(H,Ke),ie=U_(H,Qt);if(oe&&ie&&(me.rangeCount!==1||me.anchorNode!==oe.node||me.anchorOffset!==oe.offset||me.focusNode!==ie.node||me.focusOffset!==ie.offset)){var le=Ae.createRange();le.setStart(oe.node,oe.offset),me.removeAllRanges(),Ke>Qt?(me.addRange(le),me.extend(ie.node,ie.offset)):(le.setEnd(ie.node,ie.offset),me.addRange(le))}}}}for(Ae=[],me=H;me=me.parentNode;)me.nodeType===1&&Ae.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Ae.length;H++){var ve=Ae[H];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Of=!!vg,Ag=vg=null}finally{qt=g,Q.p=h,F.T=l}}i.current=a,mr=2}}function JT(){if(mr===2){mr=0;var i=ka,a=Yu,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=F.T,F.T=null;var h=Q.p;Q.p=2;var g=qt;qt|=4;try{RT(i,a.alternate,a)}finally{qt=g,Q.p=h,F.T=l}}mr=3}}function ev(){if(mr===4||mr===3){mr=0,Rn();var i=ka,a=Yu,l=Gu,h=FT;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?mr=5:(mr=0,Yu=ka=null,tv(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Oa=null),Gi(l),a=a.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(de,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=F.T,g=Q.p,Q.p=2,F.T=null;try{for(var E=i.onRecoverableError,w=0;w<h.length;w++){var H=h[w];E(H.value,{componentStack:H.stack})}}finally{F.T=a,Q.p=g}}(Gu&3)!==0&&bf(),Ts(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===ug?Pc++:(Pc=0,ug=i):Pc=0,Bc(0)}}function tv(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,gc(a)))}function bf(i){return ZT(),JT(),ev(),nv()}function nv(){if(mr!==5)return!1;var i=ka,a=ag;ag=0;var l=Gi(Gu),h=F.T,g=Q.p;try{Q.p=32>l?32:l,F.T=null,l=og,og=null;var E=ka,w=Gu;if(mr=0,Yu=ka=null,Gu=0,(qt&6)!==0)throw Error(r(331));var H=qt;if(qt|=4,VT(E.current),PT(E,E.current,w,l),qt=H,Bc(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(de,E)}catch{}return!0}finally{Q.p=g,F.T=h,tv(i,a)}}function rv(i,a,l){a=Ri(l,a),a=Hp(i.stateNode,a,2),i=Aa(i,a,2),i!==null&&(Rr(i,2),Ts(i))}function Zt(i,a,l){if(i.tag===3)rv(i,i,l);else for(;a!==null;){if(a.tag===3){rv(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Oa===null||!Oa.has(h))){i=Ri(l,i),l=oT(2),h=Aa(a,l,2),h!==null&&(uT(l,h,a,i),Rr(h,2),Ts(h));break}}a=a.return}}function dg(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new d6;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(l)||(ng=!0,g.add(l),i=y6.bind(null,i,a,l),a.then(i,i))}function y6(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,tn===i&&(wt&l)===l&&(Tn===4||Tn===3&&(wt&62914560)===wt&&300>Qe()-sg?(qt&2)===0&&$u(i,0):rg|=l,qu===wt&&(qu=0)),Ts(i)}function iv(i,a){a===0&&(a=_r()),i=Nu(i,a),i!==null&&(Rr(i,a),Ts(i))}function E6(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),iv(i,l)}function _6(i,a){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),iv(i,l)}function b6(i,a){return Jt(i,a)}var Tf=null,Xu=null,fg=!1,vf=!1,mg=!1,$o=0;function Ts(i){i!==Xu&&i.next===null&&(Xu===null?Tf=Xu=i:Xu=Xu.next=i),vf=!0,fg||(fg=!0,v6())}function Bc(i,a){if(!mg&&vf){mg=!0;do for(var l=!1,h=Tf;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var E=0;else{var w=h.suspendedLanes,H=h.pingedLanes;E=(1<<31-Ye(42|i)+1)-1,E&=g&~(w&~H),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(l=!0,uv(h,E))}else E=wt,E=lt(h,h===tn?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||Wt(h,E)||(l=!0,uv(h,E));h=h.next}while(l);mg=!1}}function T6(){sv()}function sv(){vf=fg=!1;var i=0;$o!==0&&(R6()&&(i=$o),$o=0);for(var a=Qe(),l=null,h=Tf;h!==null;){var g=h.next,E=av(h,a);E===0?(h.next=null,l===null?Tf=g:l.next=g,g===null&&(Xu=l)):(l=h,(i!==0||(E&3)!==0)&&(vf=!0)),h=g}Bc(i)}function av(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,E=i.pendingLanes&-62914561;0<E;){var w=31-Ye(E),H=1<<w,Z=g[w];Z===-1?((H&l)===0||(H&h)!==0)&&(g[w]=Gt(H,a)):Z<=a&&(i.expiredLanes|=H),E&=~H}if(a=tn,l=wt,l=lt(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&on(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Wt(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&on(h),Gi(l)){case 2:case 8:l=Un;break;case 32:l=Vn;break;case 268435456:l=Hn;break;default:l=Vn}return h=ov.bind(null,i),l=Jt(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&on(h),i.callbackPriority=2,i.callbackNode=null,2}function ov(i,a){if(mr!==0&&mr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(bf()&&i.callbackNode!==l)return null;var h=wt;return h=lt(i,i===tn?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(jT(i,h,a),av(i,Qe()),i.callbackNode!=null&&i.callbackNode===l?ov.bind(null,i):null)}function uv(i,a){if(bf())return null;jT(i,a,!0)}function v6(){O6(function(){(qt&6)!==0?Jt(cn,T6):sv()})}function pg(){return $o===0&&($o=Yi()),$o}function lv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Hs(""+i)}function cv(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function A6(i,a,l,h,g){if(a==="submit"&&l&&l.stateNode===g){var E=lv((g[hn]||null).action),w=h.submitter;w&&(a=(a=w[hn]||null)?lv(a.formAction):w.getAttribute("formAction"),a!==null&&(E=a,w=null));var H=new Eu("action","action",null,h,g);i.push({event:H,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if($o!==0){var Z=w?cv(g,w):new FormData(g);Mp(l,{pending:!0,data:Z,method:g.method,action:E},null,Z)}}else typeof E=="function"&&(H.preventDefault(),Z=w?cv(g,w):new FormData(g),Mp(l,{pending:!0,data:Z,method:g.method,action:E},E,Z))},currentTarget:g}]})}}for(var gg=0;gg<ep.length;gg++){var yg=ep[gg],S6=yg.toLowerCase(),x6=yg[0].toUpperCase()+yg.slice(1);Xi(S6,"on"+x6)}Xi(j_,"onAnimationEnd"),Xi(q_,"onAnimationIteration"),Xi(Y_,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(z3,"onTransitionRun"),Xi(j3,"onTransitionStart"),Xi(q3,"onTransitionCancel"),Xi(G_,"onTransitionEnd"),pt("onMouseEnter",["mouseout","mouseover"]),pt("onMouseLeave",["mouseout","mouseover"]),pt("onPointerEnter",["pointerout","pointerover"]),pt("onPointerLeave",["pointerout","pointerover"]),Pe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function hv(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var w=h.length-1;0<=w;w--){var H=h[w],Z=H.instance,he=H.currentTarget;if(H=H.listener,Z!==E&&g.isPropagationStopped())break e;E=H,g.currentTarget=he;try{E(g)}catch(be){lf(be)}g.currentTarget=null,E=Z}else for(w=0;w<h.length;w++){if(H=h[w],Z=H.instance,he=H.currentTarget,H=H.listener,Z!==E&&g.isPropagationStopped())break e;E=H,g.currentTarget=he;try{E(g)}catch(be){lf(be)}g.currentTarget=null,E=Z}}}}function yt(i,a){var l=a[os];l===void 0&&(l=a[os]=new Set);var h=i+"__bubble";l.has(h)||(dv(a,i,2,!1),l.add(h))}function Eg(i,a,l){var h=0;a&&(h|=4),dv(l,i,h,a)}var Af="_reactListening"+Math.random().toString(36).slice(2);function _g(i){if(!i[Af]){i[Af]=!0,pe.forEach(function(l){l!=="selectionchange"&&(w6.has(l)||Eg(l,!1,i),Eg(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Af]||(a[Af]=!0,Eg("selectionchange",!1,a))}}function dv(i,a,l,h){switch(Pv(a)){case 2:var g=J6;break;case 8:g=e4;break;default:g=kg}l=g.bind(null,a,l,i),g=void 0,!Ci||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function bg(i,a,l,h,g){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var H=h.stateNode.containerInfo;if(H===g)break;if(w===4)for(w=h.return;w!==null;){var Z=w.tag;if((Z===3||Z===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;H!==null;){if(w=kr(H),w===null)return;if(Z=w.tag,Z===5||Z===6||Z===26||Z===27){h=E=w;continue e}H=H.parentNode}}h=h.return}Sd(function(){var he=E,be=hr(l),Ae=[];e:{var fe=$_.get(i);if(fe!==void 0){var me=Eu,et=i;switch(i){case"keypress":if(ds(l)===0)break e;case"keydown":case"keyup":me=Su;break;case"focusin":et="focus",me=Tu;break;case"focusout":et="blur",me=Tu;break;case"beforeblur":case"afterblur":me=Tu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Ni;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Gm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Od;break;case j_:case q_:case Y_:me=vu;break;case G_:me=Ld;break;case"scroll":case"scrollend":me=xd;break;case"wheel":me=xu;break;case"copy":case"cut":case"paste":me=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=uc;break;case"toggle":case"beforetoggle":me=Pd}var Ke=(a&4)!==0,Qt=!Ke&&(i==="scroll"||i==="scrollend"),oe=Ke?fe!==null?fe+"Capture":null:fe;Ke=[];for(var ie=he,le;ie!==null;){var ve=ie;if(le=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||le===null||oe===null||(ve=wo(ie,oe),ve!=null&&Ke.push(Vc(ie,ve,le))),Qt)break;ie=ie.return}0<Ke.length&&(fe=new me(fe,et,null,l,be),Ae.push({event:fe,listeners:Ke}))}}if((a&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",me=i==="mouseout"||i==="pointerout",fe&&l!==qr&&(et=l.relatedTarget||l.fromElement)&&(kr(et)||et[En]))break e;if((me||fe)&&(fe=be.window===be?be:(fe=be.ownerDocument)?fe.defaultView||fe.parentWindow:window,me?(et=l.relatedTarget||l.toElement,me=he,et=et?kr(et):null,et!==null&&(Qt=o(et),Ke=et.tag,et!==Qt||Ke!==5&&Ke!==27&&Ke!==6)&&(et=null)):(me=null,et=he),me!==et)){if(Ke=Ni,ve="onMouseLeave",oe="onMouseEnter",ie="mouse",(i==="pointerout"||i==="pointerover")&&(Ke=uc,ve="onPointerLeave",oe="onPointerEnter",ie="pointer"),Qt=me==null?fe:Lr(me),le=et==null?fe:Lr(et),fe=new Ke(ve,ie+"leave",me,l,be),fe.target=Qt,fe.relatedTarget=le,ve=null,kr(be)===he&&(Ke=new Ke(oe,ie+"enter",et,l,be),Ke.target=le,Ke.relatedTarget=Qt,ve=Ke),Qt=ve,me&&et)t:{for(Ke=me,oe=et,ie=0,le=Ke;le;le=Qu(le))ie++;for(le=0,ve=oe;ve;ve=Qu(ve))le++;for(;0<ie-le;)Ke=Qu(Ke),ie--;for(;0<le-ie;)oe=Qu(oe),le--;for(;ie--;){if(Ke===oe||oe!==null&&Ke===oe.alternate)break t;Ke=Qu(Ke),oe=Qu(oe)}Ke=null}else Ke=null;me!==null&&fv(Ae,fe,me,Ke,!1),et!==null&&Qt!==null&&fv(Ae,Qt,et,Ke,!0)}}e:{if(fe=he?Lr(he):window,me=fe.nodeName&&fe.nodeName.toLowerCase(),me==="select"||me==="input"&&fe.type==="file")var Fe=O_;else if(qn(fe))if(k_)Fe=V3;else{Fe=B3;var dt=P3}else me=fe.nodeName,!me||me.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?he&&Vs(he.elementType)&&(Fe=O_):Fe=U3;if(Fe&&(Fe=Fe(i,he))){Ys(Ae,Fe,l,be);break e}dt&&dt(i,fe,he),i==="focusout"&&he&&fe.type==="number"&&he.memoizedProps.value!=null&&lr(fe,"number",fe.value)}switch(dt=he?Lr(he):window,i){case"focusin":(qn(dt)||dt.contentEditable==="true")&&(wu=dt,Wm=he,hc=null);break;case"focusout":hc=Wm=wu=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,F_(Ae,l,be);break;case"selectionchange":if(F3)break;case"keydown":case"keyup":F_(Ae,l,be)}var Ge;if(ps)e:{switch(i){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else St?ye(i,l)&&(Xe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Xe="onCompositionStart");Xe&&(S&&l.locale!=="ko"&&(St||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&St&&(Ge=rc()):(hs=be,_a="value"in hs?hs.value:hs.textContent,St=!0)),dt=Sf(he,Xe),0<dt.length&&(Xe=new ac(Xe,i,null,l,be),Ae.push({event:Xe,listeners:dt}),Ge?Xe.data=Ge:(Ge=Le(l),Ge!==null&&(Xe.data=Ge)))),(Ge=v?jn(i,l):xt(i,l))&&(Xe=Sf(he,"onBeforeInput"),0<Xe.length&&(dt=new ac("onBeforeInput","beforeinput",null,l,be),Ae.push({event:dt,listeners:Xe}),dt.data=Ge)),A6(Ae,i,he,l,be)}hv(Ae,a)})}function Vc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function Sf(i,a){for(var l=a+"Capture",h=[];i!==null;){var g=i,E=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||E===null||(g=wo(i,l),g!=null&&h.unshift(Vc(i,g,E)),g=wo(i,a),g!=null&&h.push(Vc(i,g,E))),i.tag===3)return h;i=i.return}return[]}function Qu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function fv(i,a,l,h,g){for(var E=a._reactName,w=[];l!==null&&l!==h;){var H=l,Z=H.alternate,he=H.stateNode;if(H=H.tag,Z!==null&&Z===h)break;H!==5&&H!==26&&H!==27||he===null||(Z=he,g?(he=wo(l,E),he!=null&&w.unshift(Vc(l,he,Z))):g||(he=wo(l,E),he!=null&&w.push(Vc(l,he,Z)))),l=l.return}w.length!==0&&i.push({event:a,listeners:w})}var I6=/\r\n?/g,C6=/\u0000|\uFFFD/g;function mv(i){return(typeof i=="string"?i:""+i).replace(I6,`
`).replace(C6,"")}function pv(i,a){return a=mv(a),mv(i)===a}function xf(){}function Xt(i,a,l,h,g,E){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||cr(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&cr(i,""+h);break;case"className":Nt(i,"class",h);break;case"tabIndex":Nt(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Nt(i,l,h);break;case"style":ls(i,h,E);break;case"data":if(a!=="object"){Nt(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Hs(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(l==="formAction"?(a!=="input"&&Xt(i,a,"name",g.name,g,null),Xt(i,a,"formEncType",g.formEncType,g,null),Xt(i,a,"formMethod",g.formMethod,g,null),Xt(i,a,"formTarget",g.formTarget,g,null)):(Xt(i,a,"encType",g.encType,g,null),Xt(i,a,"method",g.method,g,null),Xt(i,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Hs(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=xf);break;case"onScroll":h!=null&&yt("scroll",i);break;case"onScrollEnd":h!=null&&yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Hs(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":yt("beforetoggle",i),yt("toggle",i),Pt(i,"popover",h);break;case"xlinkActuate":Bt(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Bt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Bt(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Bt(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Bt(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Bt(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Bt(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Pt(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ya.get(l)||l,Pt(i,l,h))}}function Tg(i,a,l,h,g,E){switch(l){case"style":ls(i,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?cr(i,h):(typeof h=="number"||typeof h=="bigint")&&cr(i,""+h);break;case"onScroll":h!=null&&yt("scroll",i);break;case"onScrollEnd":h!=null&&yt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=xf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!De.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),E=i[hn]||null,E=E!=null?E[l]:null,typeof E=="function"&&i.removeEventListener(a,E,g),typeof h=="function")){typeof E!="function"&&E!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Pt(i,l,h)}}}function pr(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",i),yt("load",i);var h=!1,g=!1,E;for(E in l)if(l.hasOwnProperty(E)){var w=l[E];if(w!=null)switch(E){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Xt(i,a,E,w,l,null)}}g&&Xt(i,a,"srcSet",l.srcSet,l,null),h&&Xt(i,a,"src",l.src,l,null);return;case"input":yt("invalid",i);var H=E=w=g=null,Z=null,he=null;for(h in l)if(l.hasOwnProperty(h)){var be=l[h];if(be!=null)switch(h){case"name":g=be;break;case"type":w=be;break;case"checked":Z=be;break;case"defaultChecked":he=be;break;case"value":E=be;break;case"defaultValue":H=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,a));break;default:Xt(i,a,h,be,l,null)}}ur(i,E,H,Z,he,w,g,!1),At(i);return;case"select":yt("invalid",i),h=w=E=null;for(g in l)if(l.hasOwnProperty(g)&&(H=l[g],H!=null))switch(g){case"value":E=H;break;case"defaultValue":w=H;break;case"multiple":h=H;default:Xt(i,a,g,H,l,null)}a=E,l=w,i.multiple=!!h,a!=null?Br(i,!!h,a,!1):l!=null&&Br(i,!!h,l,!0);return;case"textarea":yt("invalid",i),E=g=h=null;for(w in l)if(l.hasOwnProperty(w)&&(H=l[w],H!=null))switch(w){case"value":h=H;break;case"defaultValue":g=H;break;case"children":E=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:Xt(i,a,w,H,l,null)}$i(i,h,g,E),At(i);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(h=l[Z],h!=null))switch(Z){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Xt(i,a,Z,h,l,null)}return;case"dialog":yt("beforetoggle",i),yt("toggle",i),yt("cancel",i),yt("close",i);break;case"iframe":case"object":yt("load",i);break;case"video":case"audio":for(h=0;h<Uc.length;h++)yt(Uc[h],i);break;case"image":yt("error",i),yt("load",i);break;case"details":yt("toggle",i);break;case"embed":case"source":case"link":yt("error",i),yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in l)if(l.hasOwnProperty(he)&&(h=l[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Xt(i,a,he,h,l,null)}return;default:if(Vs(a)){for(be in l)l.hasOwnProperty(be)&&(h=l[be],h!==void 0&&Tg(i,a,be,h,l,void 0));return}}for(H in l)l.hasOwnProperty(H)&&(h=l[H],h!=null&&Xt(i,a,H,h,l,null))}function N6(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,E=null,w=null,H=null,Z=null,he=null,be=null;for(me in l){var Ae=l[me];if(l.hasOwnProperty(me)&&Ae!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":Z=Ae;default:h.hasOwnProperty(me)||Xt(i,a,me,null,h,Ae)}}for(var fe in h){var me=h[fe];if(Ae=l[fe],h.hasOwnProperty(fe)&&(me!=null||Ae!=null))switch(fe){case"type":E=me;break;case"name":g=me;break;case"checked":he=me;break;case"defaultChecked":be=me;break;case"value":w=me;break;case"defaultValue":H=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(r(137,a));break;default:me!==Ae&&Xt(i,a,fe,me,h,Ae)}}en(i,w,H,Z,he,be,E,g);return;case"select":me=w=H=fe=null;for(E in l)if(Z=l[E],l.hasOwnProperty(E)&&Z!=null)switch(E){case"value":break;case"multiple":me=Z;default:h.hasOwnProperty(E)||Xt(i,a,E,null,h,Z)}for(g in h)if(E=h[g],Z=l[g],h.hasOwnProperty(g)&&(E!=null||Z!=null))switch(g){case"value":fe=E;break;case"defaultValue":H=E;break;case"multiple":w=E;default:E!==Z&&Xt(i,a,g,E,h,Z)}a=H,l=w,h=me,fe!=null?Br(i,!!l,fe,!1):!!h!=!!l&&(a!=null?Br(i,!!l,a,!0):Br(i,!!l,l?[]:"",!1));return;case"textarea":me=fe=null;for(H in l)if(g=l[H],l.hasOwnProperty(H)&&g!=null&&!h.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Xt(i,a,H,null,h,g)}for(w in h)if(g=h[w],E=l[w],h.hasOwnProperty(w)&&(g!=null||E!=null))switch(w){case"value":fe=g;break;case"defaultValue":me=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==E&&Xt(i,a,w,g,h,E)}Ct(i,fe,me);return;case"option":for(var et in l)if(fe=l[et],l.hasOwnProperty(et)&&fe!=null&&!h.hasOwnProperty(et))switch(et){case"selected":i.selected=!1;break;default:Xt(i,a,et,null,h,fe)}for(Z in h)if(fe=h[Z],me=l[Z],h.hasOwnProperty(Z)&&fe!==me&&(fe!=null||me!=null))switch(Z){case"selected":i.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Xt(i,a,Z,fe,h,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in l)fe=l[Ke],l.hasOwnProperty(Ke)&&fe!=null&&!h.hasOwnProperty(Ke)&&Xt(i,a,Ke,null,h,fe);for(he in h)if(fe=h[he],me=l[he],h.hasOwnProperty(he)&&fe!==me&&(fe!=null||me!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,a));break;default:Xt(i,a,he,fe,h,me)}return;default:if(Vs(a)){for(var Qt in l)fe=l[Qt],l.hasOwnProperty(Qt)&&fe!==void 0&&!h.hasOwnProperty(Qt)&&Tg(i,a,Qt,void 0,h,fe);for(be in h)fe=h[be],me=l[be],!h.hasOwnProperty(be)||fe===me||fe===void 0&&me===void 0||Tg(i,a,be,fe,h,me);return}}for(var oe in l)fe=l[oe],l.hasOwnProperty(oe)&&fe!=null&&!h.hasOwnProperty(oe)&&Xt(i,a,oe,null,h,fe);for(Ae in h)fe=h[Ae],me=l[Ae],!h.hasOwnProperty(Ae)||fe===me||fe==null&&me==null||Xt(i,a,Ae,fe,h,me)}var vg=null,Ag=null;function wf(i){return i.nodeType===9?i:i.ownerDocument}function gv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Sg(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var xg=null;function R6(){var i=window.event;return i&&i.type==="popstate"?i===xg?!1:(xg=i,!0):(xg=null,!1)}var Ev=typeof setTimeout=="function"?setTimeout:void 0,D6=typeof clearTimeout=="function"?clearTimeout:void 0,_v=typeof Promise=="function"?Promise:void 0,O6=typeof queueMicrotask=="function"?queueMicrotask:typeof _v<"u"?function(i){return _v.resolve(null).then(i).catch(k6)}:Ev;function k6(i){setTimeout(function(){throw i})}function Ma(i){return i==="head"}function bv(i,a){var l=a,h=0,g=0;do{var E=l.nextSibling;if(i.removeChild(l),E&&E.nodeType===8)if(l=E.data,l==="/$"){if(0<h&&8>h){l=h;var w=i.ownerDocument;if(l&1&&Hc(w.documentElement),l&2&&Hc(w.body),l&4)for(l=w.head,Hc(l),w=l.firstChild;w;){var H=w.nextSibling,Z=w.nodeName;w[Ai]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=H}}if(g===0){i.removeChild(E),Kc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=E}while(l);Kc(a)}function wg(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":wg(l),si(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function L6(i,a,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ai])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(E=i.getAttribute("rel"),E==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(E!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(E=i.getAttribute("src"),(E!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&E&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var E=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===E)return i}else return i;if(i=Wi(i.nextSibling),i===null)break}return null}function M6(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Wi(i.nextSibling),i===null))return null;return i}function Ig(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function P6(i,a){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Wi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var Cg=null;function Tv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function vv(i,a,l){switch(a=wf(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Hc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);si(i)}var Pi=new Map,Av=new Set;function If(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ia=Q.d;Q.d={f:B6,r:U6,D:V6,C:H6,L:F6,m:z6,X:q6,S:j6,M:Y6};function B6(){var i=ia.f(),a=Ef();return i||a}function U6(i){var a=Xn(i);a!==null&&a.tag===5&&a.type==="form"?jb(a):ia.r(i)}var Wu=typeof document>"u"?null:document;function Sv(i,a,l){var h=Wu;if(h&&typeof a=="string"&&a){var g=dn(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Av.has(g)||(Av.add(g),i={rel:i,crossOrigin:l,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),pr(a,"link",i),ne(a),h.head.appendChild(a)))}}function V6(i){ia.D(i),Sv("dns-prefetch",i,null)}function H6(i,a){ia.C(i,a),Sv("preconnect",i,a)}function F6(i,a,l){ia.L(i,a,l);var h=Wu;if(h&&i&&a){var g='link[rel="preload"][as="'+dn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+dn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+dn(l.imageSizes)+'"]')):g+='[href="'+dn(i)+'"]';var E=g;switch(a){case"style":E=Zu(i);break;case"script":E=Ju(i)}Pi.has(E)||(i=p({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Pi.set(E,i),h.querySelector(g)!==null||a==="style"&&h.querySelector(Fc(E))||a==="script"&&h.querySelector(zc(E))||(a=h.createElement("link"),pr(a,"link",i),ne(a),h.head.appendChild(a)))}}function z6(i,a){ia.m(i,a);var l=Wu;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+dn(h)+'"][href="'+dn(i)+'"]',E=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ju(i)}if(!Pi.has(E)&&(i=p({rel:"modulepreload",href:i},a),Pi.set(E,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zc(E)))return}h=l.createElement("link"),pr(h,"link",i),ne(h),l.head.appendChild(h)}}}function j6(i,a,l){ia.S(i,a,l);var h=Wu;if(h&&i){var g=zn(h).hoistableStyles,E=Zu(i);a=a||"default";var w=g.get(E);if(!w){var H={loading:0,preload:null};if(w=h.querySelector(Fc(E)))H.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Pi.get(E))&&Ng(i,l);var Z=w=h.createElement("link");ne(Z),pr(Z,"link",i),Z._p=new Promise(function(he,be){Z.onload=he,Z.onerror=be}),Z.addEventListener("load",function(){H.loading|=1}),Z.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Cf(w,a,h)}w={type:"stylesheet",instance:w,count:1,state:H},g.set(E,w)}}}function q6(i,a){ia.X(i,a);var l=Wu;if(l&&i){var h=zn(l).hoistableScripts,g=Ju(i),E=h.get(g);E||(E=l.querySelector(zc(g)),E||(i=p({src:i,async:!0},a),(a=Pi.get(g))&&Rg(i,a),E=l.createElement("script"),ne(E),pr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function Y6(i,a){ia.M(i,a);var l=Wu;if(l&&i){var h=zn(l).hoistableScripts,g=Ju(i),E=h.get(g);E||(E=l.querySelector(zc(g)),E||(i=p({src:i,async:!0,type:"module"},a),(a=Pi.get(g))&&Rg(i,a),E=l.createElement("script"),ne(E),pr(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function xv(i,a,l,h){var g=(g=Ie.current)?If(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Zu(l.href),l=zn(g).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Zu(l.href);var E=zn(g).hoistableStyles,w=E.get(i);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(i,w),(E=g.querySelector(Fc(i)))&&!E._p&&(w.instance=E,w.state.loading=5),Pi.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pi.set(i,l),E||G6(g,i,l,w.state))),a&&h===null)throw Error(r(528,""));return w}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ju(l),l=zn(g).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Zu(i){return'href="'+dn(i)+'"'}function Fc(i){return'link[rel="stylesheet"]['+i+"]"}function wv(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function G6(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),pr(a,"link",l),ne(a),i.head.appendChild(a))}function Ju(i){return'[src="'+dn(i)+'"]'}function zc(i){return"script[async]"+i}function Iv(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+dn(l.href)+'"]');if(h)return a.instance=h,ne(h),h;var g=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),ne(h),pr(h,"style",g),Cf(h,l.precedence,i),a.instance=h;case"stylesheet":g=Zu(l.href);var E=i.querySelector(Fc(g));if(E)return a.state.loading|=4,a.instance=E,ne(E),E;h=wv(l),(g=Pi.get(g))&&Ng(h,g),E=(i.ownerDocument||i).createElement("link"),ne(E);var w=E;return w._p=new Promise(function(H,Z){w.onload=H,w.onerror=Z}),pr(E,"link",h),a.state.loading|=4,Cf(E,l.precedence,i),a.instance=E;case"script":return E=Ju(l.src),(g=i.querySelector(zc(E)))?(a.instance=g,ne(g),g):(h=l,(g=Pi.get(E))&&(h=p({},l),Rg(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),ne(g),pr(g,"link",h),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Cf(h,l.precedence,i));return a.instance}function Cf(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,E=g,w=0;w<h.length;w++){var H=h[w];if(H.dataset.precedence===a)E=H;else if(E!==g)break}E?E.parentNode.insertBefore(i,E.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Ng(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Rg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Nf=null;function Cv(i,a,l){if(Nf===null){var h=new Map,g=Nf=new Map;g.set(l,h)}else g=Nf,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var E=l[g];if(!(E[Ai]||E[Lt]||i==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var w=E.getAttribute(a)||"";w=i+w;var H=h.get(w);H?H.push(E):h.set(w,[E])}}return h}function Nv(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function $6(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Rv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var jc=null;function K6(){}function X6(i,a,l){if(jc===null)throw Error(r(475));var h=jc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Zu(l.href),E=i.querySelector(Fc(g));if(E){i=E._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=Rf.bind(h),i.then(h,h)),a.state.loading|=4,a.instance=E,ne(E);return}E=i.ownerDocument||i,l=wv(l),(g=Pi.get(g))&&Ng(l,g),E=E.createElement("link"),ne(E);var w=E;w._p=new Promise(function(H,Z){w.onload=H,w.onerror=Z}),pr(E,"link",l),a.instance=E}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=Rf.bind(h),i.addEventListener("load",a),i.addEventListener("error",a))}}function Q6(){if(jc===null)throw Error(r(475));var i=jc;return i.stylesheets&&i.count===0&&Dg(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&Dg(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Rf(){if(this.count--,this.count===0){if(this.stylesheets)Dg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Df=null;function Dg(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Df=new Map,a.forEach(W6,i),Df=null,Rf.call(i))}function W6(i,a){if(!(a.state.loading&4)){var l=Df.get(i);if(l)var h=l.get(null);else{l=new Map,Df.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<g.length;E++){var w=g[E];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),h=w)}h&&l.set(null,h)}g=a.instance,w=g.getAttribute("data-precedence"),E=l.get(w)||h,E===h&&l.set(null,g),l.set(w,g),this.count++,h=Rf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),E?E.parentNode.insertBefore(g,E.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var qc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Z6(i,a,l,h,g,E,w,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=E,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Dv(i,a,l,h,g,E,w,H,Z,he,be,Ae){return i=new Z6(i,a,l,w,H,Z,he,Ae),a=1,E===!0&&(a|=24),E=oi(3,null,null,a),i.current=E,E.stateNode=i,a=dp(),a.refCount++,i.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:l,cache:a},gp(E),i}function Ov(i){return i?(i=Ru,i):Ru}function kv(i,a,l,h,g,E){g=Ov(g),h.context===null?h.context=g:h.pendingContext=g,h=va(a),h.payload={element:l},E=E===void 0?null:E,E!==null&&(h.callback=E),l=Aa(i,h,a),l!==null&&(di(l,i,a),bc(l,i,a))}function Lv(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Og(i,a){Lv(i,a),(i=i.alternate)&&Lv(i,a)}function Mv(i){if(i.tag===13){var a=Nu(i,67108864);a!==null&&di(a,i,67108864),Og(i,67108864)}}var Of=!0;function J6(i,a,l,h){var g=F.T;F.T=null;var E=Q.p;try{Q.p=2,kg(i,a,l,h)}finally{Q.p=E,F.T=g}}function e4(i,a,l,h){var g=F.T;F.T=null;var E=Q.p;try{Q.p=8,kg(i,a,l,h)}finally{Q.p=E,F.T=g}}function kg(i,a,l,h){if(Of){var g=Lg(h);if(g===null)bg(i,a,h,kf,l),Bv(i,h);else if(n4(g,i,a,l,h))h.stopPropagation();else if(Bv(i,h),a&4&&-1<t4.indexOf(i)){for(;g!==null;){var E=Xn(g);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var w=vt(E.pendingLanes);if(w!==0){var H=E;for(H.pendingLanes|=2,H.entangledLanes|=2;w;){var Z=1<<31-Ye(w);H.entanglements[1]|=Z,w&=~Z}Ts(E),(qt&6)===0&&(gf=Qe()+500,Bc(0))}}break;case 13:H=Nu(E,2),H!==null&&di(H,E,2),Ef(),Og(E,2)}if(E=Lg(h),E===null&&bg(i,a,h,kf,l),E===g)break;g=E}g!==null&&h.stopPropagation()}else bg(i,a,h,null,l)}}function Lg(i){return i=hr(i),Mg(i)}var kf=null;function Mg(i){if(kf=null,i=kr(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return kf=i,null}function Pv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case cn:return 2;case Un:return 8;case Vn:case Kn:return 32;case Hn:return 268435456;default:return 32}default:return 32}}var Pg=!1,Pa=null,Ba=null,Ua=null,Yc=new Map,Gc=new Map,Va=[],t4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(i,a){switch(i){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":Yc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(a.pointerId)}}function $c(i,a,l,h,g,E){return i===null||i.nativeEvent!==E?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:E,targetContainers:[g]},a!==null&&(a=Xn(a),a!==null&&Mv(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function n4(i,a,l,h,g){switch(a){case"focusin":return Pa=$c(Pa,i,a,l,h,g),!0;case"dragenter":return Ba=$c(Ba,i,a,l,h,g),!0;case"mouseover":return Ua=$c(Ua,i,a,l,h,g),!0;case"pointerover":var E=g.pointerId;return Yc.set(E,$c(Yc.get(E)||null,i,a,l,h,g)),!0;case"gotpointercapture":return E=g.pointerId,Gc.set(E,$c(Gc.get(E)||null,i,a,l,h,g)),!0}return!1}function Uv(i){var a=kr(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,ii(i.priority,function(){if(l.tag===13){var h=hi();h=ri(h);var g=Nu(l,h);g!==null&&di(g,l,h),Og(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Lf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=Lg(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);qr=h,l.target.dispatchEvent(h),qr=null}else return a=Xn(l),a!==null&&Mv(a),i.blockedOn=l,!1;a.shift()}return!0}function Vv(i,a,l){Lf(i)&&l.delete(a)}function r4(){Pg=!1,Pa!==null&&Lf(Pa)&&(Pa=null),Ba!==null&&Lf(Ba)&&(Ba=null),Ua!==null&&Lf(Ua)&&(Ua=null),Yc.forEach(Vv),Gc.forEach(Vv)}function Mf(i,a){i.blockedOn===a&&(i.blockedOn=null,Pg||(Pg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,r4)))}var Pf=null;function Hv(i){Pf!==i&&(Pf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pf===i&&(Pf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],g=i[a+2];if(typeof h!="function"){if(Mg(h||l)===null)continue;break}var E=Xn(l);E!==null&&(i.splice(a,3),a-=3,Mp(E,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Kc(i){function a(Z){return Mf(Z,i)}Pa!==null&&Mf(Pa,i),Ba!==null&&Mf(Ba,i),Ua!==null&&Mf(Ua,i),Yc.forEach(a),Gc.forEach(a);for(var l=0;l<Va.length;l++){var h=Va[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Va.length&&(l=Va[0],l.blockedOn===null);)Uv(l),l.blockedOn===null&&Va.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],E=l[h+1],w=g[hn]||null;if(typeof E=="function")w||Hv(l);else if(w){var H=null;if(E&&E.hasAttribute("formAction")){if(g=E,w=E[hn]||null)H=w.formAction;else if(Mg(g)!==null)continue}else H=w.action;typeof H=="function"?l[h+1]=H:(l.splice(h,3),h-=3),Hv(l)}}}function Bg(i){this._internalRoot=i}Bf.prototype.render=Bg.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,h=hi();kv(l,h,i,a,null,null)},Bf.prototype.unmount=Bg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;kv(i.current,2,null,i,null,null),Ef(),a[En]=null}};function Bf(i){this._internalRoot=i}Bf.prototype.unstable_scheduleHydration=function(i){if(i){var a=Dr();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Va.length&&a!==0&&a<Va[l].priority;l++);Va.splice(l,0,i),l===0&&Uv(i)}};var Fv=e.version;if(Fv!=="19.1.0")throw Error(r(527,Fv,"19.1.0"));Q.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(a),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var i4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uf.isDisabled&&Uf.supportsFiber)try{de=Uf.inject(i4),Te=Uf}catch{}}return Qc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,h="",g=rT,E=iT,w=sT,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(H=a.unstable_transitionCallbacks)),a=Dv(i,1,!1,null,null,l,h,g,E,w,H,null),i[En]=a.current,_g(i),new Bg(a)},Qc.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var h=!1,g="",E=rT,w=iT,H=sT,Z=null,he=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(H=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(he=l.formState)),a=Dv(i,1,!0,a,l??null,h,g,E,w,H,Z,he),a.context=Ov(null),l=a.current,h=hi(),h=ri(h),g=va(h),g.callback=null,Aa(l,g,h),l=h,a.current.lanes=l,Rr(a,l),Ts(a),i[En]=a.current,_g(i),new Bf(a)},Qc.version="19.1.0",Qc}var Wv;function f4(){if(Wv)return Hg.exports;Wv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hg.exports=d4(),Hg.exports}var m4=f4();function zr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=zr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var qg={exports:{}},Yg={},Gg={exports:{}},$g={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function p4(){if(Zv)return $g;Zv=1;var t=td();function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(y,b){var T=b(),x=r({inst:{value:T,getSnapshot:b}}),N=x[0].inst,k=x[1];return o(function(){N.value=T,N.getSnapshot=b,d(N)&&k({inst:N})},[y,T,b]),s(function(){return d(N)&&k({inst:N}),y(function(){d(N)&&k({inst:N})})},[y]),u(T),T}function d(y){var b=y.getSnapshot;y=y.value;try{var T=b();return!n(y,T)}catch{return!0}}function f(y,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return $g.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,$g}var Jv;function g4(){return Jv||(Jv=1,Gg.exports=p4()),Gg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function y4(){if(e2)return Yg;e2=1;var t=td(),e=g4();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,u=t.useEffect,c=t.useMemo,d=t.useDebugValue;return Yg.useSyncExternalStoreWithSelector=function(f,p,y,b,T){var x=o(null);if(x.current===null){var N={hasValue:!1,value:null};x.current=N}else N=x.current;x=c(function(){function D($){if(!z){if(z=!0,Y=$,$=b($),T!==void 0&&N.hasValue){var R=N.value;if(T(R,$))return q=R}return q=$}if(R=q,r(Y,$))return R;var C=b($);return T!==void 0&&T(R,C)?(Y=$,R):(Y=$,q=C)}var z=!1,Y,q,ee=y===void 0?null:y;return[function(){return D(p())},ee===null?void 0:function(){return D(ee())}]},[p,y,b,T]);var k=s(f,x[0],x[1]);return u(function(){N.hasValue=!0,N.value=k},[k]),d(k),k},Yg}var t2;function E4(){return t2||(t2=1,qg.exports=y4()),qg.exports}var _4=E4();const b4=om(_4),T4={},n2=t=>{let e;const n=new Set,r=(p,y)=>{const b=typeof p=="function"?p(e):p;if(!Object.is(b,e)){const T=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(x=>x(e,T))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(T4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(r,s,d);return d},v4=t=>t?n2(t):n2,{useDebugValue:A4}=_e,{useSyncExternalStoreWithSelector:S4}=b4,x4=t=>t;function Jx(t,e=x4,n){const r=S4(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return A4(r),r}const r2=(t,e)=>{const n=v4(t),r=(s,o=e)=>Jx(n,s,o);return Object.assign(r,n),r},w4=(t,e)=>t?r2(t,e):r2;function wr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var I4={value:()=>{}};function um(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new o0(n)}function o0(t){this._=t}function C4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}o0.prototype=um.prototype={constructor:o0,on:function(t,e){var n=this._,r=C4(t+"",n),s,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((s=(t=r[o]).type)&&(s=N4(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<u;)if(s=(t=r[o]).type)n[s]=i2(n[s],t.name,e);else if(e==null)for(s in n)n[s]=i2(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o0(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function N4(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function i2(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=I4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Uy="http://www.w3.org/1999/xhtml";const s2={svg:"http://www.w3.org/2000/svg",xhtml:Uy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function lm(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),s2.hasOwnProperty(e)?{space:s2[e],local:t}:t}function R4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Uy&&e.documentElement.namespaceURI===Uy?e.createElement(t):e.createElementNS(n,t)}}function D4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ew(t){var e=lm(t);return(e.local?D4:R4)(e)}function O4(){}function Y1(t){return t==null?O4:function(){return this.querySelector(t)}}function k4(t){typeof t!="function"&&(t=Y1(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=new Array(u),d,f,p=0;p<u;++p)(d=o[p])&&(f=t.call(d,d.__data__,p,o))&&("__data__"in d&&(f.__data__=d.__data__),c[p]=f);return new Ti(r,this._parents)}function L4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function M4(){return[]}function tw(t){return t==null?M4:function(){return this.querySelectorAll(t)}}function P4(t){return function(){return L4(t.apply(this,arguments))}}function B4(t){typeof t=="function"?t=P4(t):t=tw(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var u=e[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&(r.push(t.call(d,d.__data__,f,u)),s.push(d));return new Ti(r,s)}function nw(t){return function(){return this.matches(t)}}function rw(t){return function(e){return e.matches(t)}}var U4=Array.prototype.find;function V4(t){return function(){return U4.call(this.children,t)}}function H4(){return this.firstElementChild}function F4(t){return this.select(t==null?H4:V4(typeof t=="function"?t:rw(t)))}var z4=Array.prototype.filter;function j4(){return Array.from(this.children)}function q4(t){return function(){return z4.call(this.children,t)}}function Y4(t){return this.selectAll(t==null?j4:q4(typeof t=="function"?t:rw(t)))}function G4(t){typeof t!="function"&&(t=nw(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],d,f=0;f<u;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new Ti(r,this._parents)}function iw(t){return new Array(t.length)}function $4(){return new Ti(this._enter||this._groups.map(iw),this._parents)}function w0(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}w0.prototype={constructor:w0,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function K4(t){return function(){return t}}function X4(t,e,n,r,s,o){for(var u=0,c,d=e.length,f=o.length;u<f;++u)(c=e[u])?(c.__data__=o[u],r[u]=c):n[u]=new w0(t,o[u]);for(;u<d;++u)(c=e[u])&&(s[u]=c)}function Q4(t,e,n,r,s,o,u){var c,d,f=new Map,p=e.length,y=o.length,b=new Array(p),T;for(c=0;c<p;++c)(d=e[c])&&(b[c]=T=u.call(d,d.__data__,c,e)+"",f.has(T)?s[c]=d:f.set(T,d));for(c=0;c<y;++c)T=u.call(t,o[c],c,o)+"",(d=f.get(T))?(r[c]=d,d.__data__=o[c],f.delete(T)):n[c]=new w0(t,o[c]);for(c=0;c<p;++c)(d=e[c])&&f.get(b[c])===d&&(s[c]=d)}function W4(t){return t.__data__}function Z4(t,e){if(!arguments.length)return Array.from(this,W4);var n=e?Q4:X4,r=this._parents,s=this._groups;typeof t!="function"&&(t=K4(t));for(var o=s.length,u=new Array(o),c=new Array(o),d=new Array(o),f=0;f<o;++f){var p=r[f],y=s[f],b=y.length,T=J4(t.call(p,p&&p.__data__,f,r)),x=T.length,N=c[f]=new Array(x),k=u[f]=new Array(x),D=d[f]=new Array(b);n(p,y,N,k,D,T,e);for(var z=0,Y=0,q,ee;z<x;++z)if(q=N[z]){for(z>=Y&&(Y=z+1);!(ee=k[Y])&&++Y<x;);q._next=ee||null}}return u=new Ti(u,r),u._enter=c,u._exit=d,u}function J4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eD(){return new Ti(this._exit||this._groups.map(iw),this._parents)}function tD(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function nD(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,u=Math.min(s,o),c=new Array(s),d=0;d<u;++d)for(var f=n[d],p=r[d],y=f.length,b=c[d]=new Array(y),T,x=0;x<y;++x)(T=f[x]||p[x])&&(b[x]=T);for(;d<s;++d)c[d]=n[d];return new Ti(c,this._parents)}function rD(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],u;--s>=0;)(u=r[s])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function iD(t){t||(t=sD);function e(y,b){return y&&b?t(y.__data__,b.__data__):!y-!b}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var u=n[o],c=u.length,d=s[o]=new Array(c),f,p=0;p<c;++p)(f=u[p])&&(d[p]=f);d.sort(e)}return new Ti(s,this._parents).order()}function sD(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function aD(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oD(){return Array.from(this)}function uD(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var u=r[s];if(u)return u}return null}function lD(){let t=0;for(const e of this)++t;return t}function cD(){return!this.node()}function hD(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,u=s.length,c;o<u;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function dD(t){return function(){this.removeAttribute(t)}}function fD(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mD(t,e){return function(){this.setAttribute(t,e)}}function pD(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function gD(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function yD(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ED(t,e){var n=lm(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?fD:dD:typeof e=="function"?n.local?yD:gD:n.local?pD:mD)(n,e))}function sw(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _D(t){return function(){this.style.removeProperty(t)}}function bD(t,e,n){return function(){this.style.setProperty(t,e,n)}}function TD(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vD(t,e,n){return arguments.length>1?this.each((e==null?_D:typeof e=="function"?TD:bD)(t,e,n??"")):Il(this.node(),t)}function Il(t,e){return t.style.getPropertyValue(e)||sw(t).getComputedStyle(t,null).getPropertyValue(e)}function AD(t){return function(){delete this[t]}}function SD(t,e){return function(){this[t]=e}}function xD(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function wD(t,e){return arguments.length>1?this.each((e==null?AD:typeof e=="function"?xD:SD)(t,e)):this.node()[t]}function aw(t){return t.trim().split(/^|\s+/)}function G1(t){return t.classList||new ow(t)}function ow(t){this._node=t,this._names=aw(t.getAttribute("class")||"")}ow.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function uw(t,e){for(var n=G1(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function lw(t,e){for(var n=G1(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function ID(t){return function(){uw(this,t)}}function CD(t){return function(){lw(this,t)}}function ND(t,e){return function(){(e.apply(this,arguments)?uw:lw)(this,t)}}function RD(t,e){var n=aw(t+"");if(arguments.length<2){for(var r=G1(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?ND:e?ID:CD)(n,e))}function DD(){this.textContent=""}function OD(t){return function(){this.textContent=t}}function kD(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function LD(t){return arguments.length?this.each(t==null?DD:(typeof t=="function"?kD:OD)(t)):this.node().textContent}function MD(){this.innerHTML=""}function PD(t){return function(){this.innerHTML=t}}function BD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function UD(t){return arguments.length?this.each(t==null?MD:(typeof t=="function"?BD:PD)(t)):this.node().innerHTML}function VD(){this.nextSibling&&this.parentNode.appendChild(this)}function HD(){return this.each(VD)}function FD(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zD(){return this.each(FD)}function jD(t){var e=typeof t=="function"?t:ew(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qD(){return null}function YD(t,e){var n=typeof t=="function"?t:ew(t),r=e==null?qD:typeof e=="function"?e:Y1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function GD(){var t=this.parentNode;t&&t.removeChild(this)}function $D(){return this.each(GD)}function KD(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function XD(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function QD(t){return this.select(t?XD:KD)}function WD(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ZD(t){return function(e){t.call(this,e,this.__data__)}}function JD(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function eO(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function tO(t,e,n){return function(){var r=this.__on,s,o=ZD(e);if(r){for(var u=0,c=r.length;u<c;++u)if((s=r[u]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function nO(t,e,n){var r=JD(t+""),s,o=r.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,p;d<f;++d)for(s=0,p=c[d];s<o;++s)if((u=r[s]).type===p.type&&u.name===p.name)return p.value}return}for(c=e?tO:eO,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function cw(t,e,n){var r=sw(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function rO(t,e){return function(){return cw(this,t,e)}}function iO(t,e){return function(){return cw(this,t,e.apply(this,arguments))}}function sO(t,e){return this.each((typeof e=="function"?iO:rO)(t,e))}function*aO(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,u;s<o;++s)(u=r[s])&&(yield u)}var hw=[null];function Ti(t,e){this._groups=t,this._parents=e}function nd(){return new Ti([[document.documentElement]],hw)}function oO(){return this}Ti.prototype=nd.prototype={constructor:Ti,select:k4,selectAll:B4,selectChild:F4,selectChildren:Y4,filter:G4,data:Z4,enter:$4,exit:eD,join:tD,merge:nD,selection:oO,order:rD,sort:iD,call:aD,nodes:oD,node:uD,size:lD,empty:cD,each:hD,attr:ED,style:vD,property:wD,classed:RD,text:LD,html:UD,raise:HD,lower:zD,append:jD,insert:YD,remove:$D,clone:QD,datum:WD,on:nO,dispatch:sO,[Symbol.iterator]:aO};function Ji(t){return typeof t=="string"?new Ti([[document.querySelector(t)]],[document.documentElement]):new Ti([[t]],hw)}function uO(t){let e;for(;e=t.sourceEvent;)t=e;return t}function As(t,e){if(t=uO(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const lO={passive:!1},Lh={capture:!0,passive:!1};function Kg(t){t.stopImmediatePropagation()}function pl(t){t.preventDefault(),t.stopImmediatePropagation()}function dw(t){var e=t.document.documentElement,n=Ji(t).on("dragstart.drag",pl,Lh);"onselectstart"in e?n.on("selectstart.drag",pl,Lh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function fw(t,e){var n=t.document.documentElement,r=Ji(t).on("dragstart.drag",null);e&&(r.on("click.drag",pl,Lh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Vf=t=>()=>t;function Vy(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:u,y:c,dx:d,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}Vy.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cO(t){return!t.ctrlKey&&!t.button}function hO(){return this.parentNode}function dO(t,e){return e??{x:t.x,y:t.y}}function fO(){return navigator.maxTouchPoints||"ontouchstart"in this}function mO(){var t=cO,e=hO,n=dO,r=fO,s={},o=um("start","drag","end"),u=0,c,d,f,p,y=0;function b(q){q.on("mousedown.drag",T).filter(r).on("touchstart.drag",k).on("touchmove.drag",D,lO).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function T(q,ee){if(!(p||!t.call(this,q,ee))){var $=Y(this,e.call(this,q,ee),q,ee,"mouse");$&&(Ji(q.view).on("mousemove.drag",x,Lh).on("mouseup.drag",N,Lh),dw(q.view),Kg(q),f=!1,c=q.clientX,d=q.clientY,$("start",q))}}function x(q){if(pl(q),!f){var ee=q.clientX-c,$=q.clientY-d;f=ee*ee+$*$>y}s.mouse("drag",q)}function N(q){Ji(q.view).on("mousemove.drag mouseup.drag",null),fw(q.view,f),pl(q),s.mouse("end",q)}function k(q,ee){if(t.call(this,q,ee)){var $=q.changedTouches,R=e.call(this,q,ee),C=$.length,O,P;for(O=0;O<C;++O)(P=Y(this,R,q,ee,$[O].identifier,$[O]))&&(Kg(q),P("start",q,$[O]))}}function D(q){var ee=q.changedTouches,$=ee.length,R,C;for(R=0;R<$;++R)(C=s[ee[R].identifier])&&(pl(q),C("drag",q,ee[R]))}function z(q){var ee=q.changedTouches,$=ee.length,R,C;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),R=0;R<$;++R)(C=s[ee[R].identifier])&&(Kg(q),C("end",q,ee[R]))}function Y(q,ee,$,R,C,O){var P=o.copy(),U=As(O||$,ee),V,I,L;if((L=n.call(q,new Vy("beforestart",{sourceEvent:$,target:b,identifier:C,active:u,x:U[0],y:U[1],dx:0,dy:0,dispatch:P}),R))!=null)return V=L.x-U[0]||0,I=L.y-U[1]||0,function K(F,Q,se){var te=U,A;switch(F){case"start":s[C]=K,A=u++;break;case"end":delete s[C],--u;case"drag":U=As(se||Q,ee),A=u;break}P.call(F,q,new Vy(F,{sourceEvent:Q,subject:L,target:b,identifier:C,active:A,x:U[0]+V,y:U[1]+I,dx:U[0]-te[0],dy:U[1]-te[1],dispatch:P}),R)}}return b.filter=function(q){return arguments.length?(t=typeof q=="function"?q:Vf(!!q),b):t},b.container=function(q){return arguments.length?(e=typeof q=="function"?q:Vf(q),b):e},b.subject=function(q){return arguments.length?(n=typeof q=="function"?q:Vf(q),b):n},b.touchable=function(q){return arguments.length?(r=typeof q=="function"?q:Vf(!!q),b):r},b.on=function(){var q=o.on.apply(o,arguments);return q===o?b:q},b.clickDistance=function(q){return arguments.length?(y=(q=+q)*q,b):Math.sqrt(y)},b}function $1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mw(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rd(){}var Mh=.7,I0=1/Mh,gl="\\s*([+-]?\\d+)\\s*",Ph="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pO=/^#([0-9a-f]{3,8})$/,gO=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),yO=new RegExp(`^rgb\\(${Is},${Is},${Is}\\)$`),EO=new RegExp(`^rgba\\(${gl},${gl},${gl},${Ph}\\)$`),_O=new RegExp(`^rgba\\(${Is},${Is},${Is},${Ph}\\)$`),bO=new RegExp(`^hsl\\(${Ph},${Is},${Is}\\)$`),TO=new RegExp(`^hsla\\(${Ph},${Is},${Is},${Ph}\\)$`),a2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$1(rd,Bh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:o2,formatHex:o2,formatHex8:vO,formatHsl:AO,formatRgb:u2,toString:u2});function o2(){return this.rgb().formatHex()}function vO(){return this.rgb().formatHex8()}function AO(){return pw(this).formatHsl()}function u2(){return this.rgb().formatRgb()}function Bh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pO.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?l2(e):n===3?new Jr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Hf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Hf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gO.exec(t))?new Jr(e[1],e[2],e[3],1):(e=yO.exec(t))?new Jr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=EO.exec(t))?Hf(e[1],e[2],e[3],e[4]):(e=_O.exec(t))?Hf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bO.exec(t))?d2(e[1],e[2]/100,e[3]/100,1):(e=TO.exec(t))?d2(e[1],e[2]/100,e[3]/100,e[4]):a2.hasOwnProperty(t)?l2(a2[t]):t==="transparent"?new Jr(NaN,NaN,NaN,0):null}function l2(t){return new Jr(t>>16&255,t>>8&255,t&255,1)}function Hf(t,e,n,r){return r<=0&&(t=e=n=NaN),new Jr(t,e,n,r)}function SO(t){return t instanceof rd||(t=Bh(t)),t?(t=t.rgb(),new Jr(t.r,t.g,t.b,t.opacity)):new Jr}function Hy(t,e,n,r){return arguments.length===1?SO(t):new Jr(t,e,n,r??1)}function Jr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}$1(Jr,Hy,mw(rd,{brighter(t){return t=t==null?I0:Math.pow(I0,t),new Jr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new Jr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Jr(eu(this.r),eu(this.g),eu(this.b),C0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:c2,formatHex:c2,formatHex8:xO,formatRgb:h2,toString:h2}));function c2(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}`}function xO(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}${Qo((isNaN(this.opacity)?1:this.opacity)*255)}`}function h2(){const t=C0(this.opacity);return`${t===1?"rgb(":"rgba("}${eu(this.r)}, ${eu(this.g)}, ${eu(this.b)}${t===1?")":`, ${t})`}`}function C0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Qo(t){return t=eu(t),(t<16?"0":"")+t.toString(16)}function d2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new es(t,e,n,r)}function pw(t){if(t instanceof es)return new es(t.h,t.s,t.l,t.opacity);if(t instanceof rd||(t=Bh(t)),!t)return new es;if(t instanceof es)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,c=o-s,d=(o+s)/2;return c?(e===o?u=(n-r)/c+(n<r)*6:n===o?u=(r-e)/c+2:u=(e-n)/c+4,c/=d<.5?o+s:2-o-s,u*=60):c=d>0&&d<1?0:u,new es(u,c,d,t.opacity)}function wO(t,e,n,r){return arguments.length===1?pw(t):new es(t,e,n,r??1)}function es(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}$1(es,wO,mw(rd,{brighter(t){return t=t==null?I0:Math.pow(I0,t),new es(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mh:Math.pow(Mh,t),new es(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Jr(Xg(t>=240?t-240:t+120,s,r),Xg(t,s,r),Xg(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new es(f2(this.h),Ff(this.s),Ff(this.l),C0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=C0(this.opacity);return`${t===1?"hsl(":"hsla("}${f2(this.h)}, ${Ff(this.s)*100}%, ${Ff(this.l)*100}%${t===1?")":`, ${t})`}`}}));function f2(t){return t=(t||0)%360,t<0?t+360:t}function Ff(t){return Math.max(0,Math.min(1,t||0))}function Xg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gw=t=>()=>t;function IO(t,e){return function(n){return t+n*e}}function CO(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function NO(t){return(t=+t)==1?yw:function(e,n){return n-e?CO(e,n,t):gw(isNaN(e)?n:e)}}function yw(t,e){var n=e-t;return n?IO(t,n):gw(isNaN(t)?e:t)}const m2=function t(e){var n=NO(e);function r(s,o){var u=n((s=Hy(s)).r,(o=Hy(o)).r),c=n(s.g,o.g),d=n(s.b,o.b),f=yw(s.opacity,o.opacity);return function(p){return s.r=u(p),s.g=c(p),s.b=d(p),s.opacity=f(p),s+""}}return r.gamma=t,r}(1);function Ga(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Fy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qg=new RegExp(Fy.source,"g");function RO(t){return function(){return t}}function DO(t){return function(e){return t(e)+""}}function OO(t,e){var n=Fy.lastIndex=Qg.lastIndex=0,r,s,o,u=-1,c=[],d=[];for(t=t+"",e=e+"";(r=Fy.exec(t))&&(s=Qg.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[u]?c[u]+=o:c[++u]=o),(r=r[0])===(s=s[0])?c[u]?c[u]+=s:c[++u]=s:(c[++u]=null,d.push({i:u,x:Ga(r,s)})),n=Qg.lastIndex;return n<e.length&&(o=e.slice(n),c[u]?c[u]+=o:c[++u]=o),c.length<2?d[0]?DO(d[0].x):RO(e):(e=d.length,function(f){for(var p=0,y;p<e;++p)c[(y=d[p]).i]=y.x(f);return c.join("")})}var p2=180/Math.PI,zy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ew(t,e,n,r,s,o){var u,c,d;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(d=t*n+e*r)&&(n-=t*d,r-=e*d),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,d/=c),t*r<e*n&&(t=-t,e=-e,d=-d,u=-u),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*p2,skewX:Math.atan(d)*p2,scaleX:u,scaleY:c}}var zf;function kO(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?zy:Ew(e.a,e.b,e.c,e.d,e.e,e.f)}function LO(t){return t==null||(zf||(zf=document.createElementNS("http://www.w3.org/2000/svg","g")),zf.setAttribute("transform",t),!(t=zf.transform.baseVal.consolidate()))?zy:(t=t.matrix,Ew(t.a,t.b,t.c,t.d,t.e,t.f))}function _w(t,e,n,r){function s(f){return f.length?f.pop()+" ":""}function o(f,p,y,b,T,x){if(f!==y||p!==b){var N=T.push("translate(",null,e,null,n);x.push({i:N-4,x:Ga(f,y)},{i:N-2,x:Ga(p,b)})}else(y||b)&&T.push("translate("+y+e+b+n)}function u(f,p,y,b){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),b.push({i:y.push(s(y)+"rotate(",null,r)-2,x:Ga(f,p)})):p&&y.push(s(y)+"rotate("+p+r)}function c(f,p,y,b){f!==p?b.push({i:y.push(s(y)+"skewX(",null,r)-2,x:Ga(f,p)}):p&&y.push(s(y)+"skewX("+p+r)}function d(f,p,y,b,T,x){if(f!==y||p!==b){var N=T.push(s(T)+"scale(",null,",",null,")");x.push({i:N-4,x:Ga(f,y)},{i:N-2,x:Ga(p,b)})}else(y!==1||b!==1)&&T.push(s(T)+"scale("+y+","+b+")")}return function(f,p){var y=[],b=[];return f=t(f),p=t(p),o(f.translateX,f.translateY,p.translateX,p.translateY,y,b),u(f.rotate,p.rotate,y,b),c(f.skewX,p.skewX,y,b),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,y,b),f=p=null,function(T){for(var x=-1,N=b.length,k;++x<N;)y[(k=b[x]).i]=k.x(T);return y.join("")}}}var MO=_w(kO,"px, ","px)","deg)"),PO=_w(LO,", ",")",")"),BO=1e-12;function g2(t){return((t=Math.exp(t))+1/t)/2}function UO(t){return((t=Math.exp(t))-1/t)/2}function VO(t){return((t=Math.exp(2*t))-1)/(t+1)}const HO=function t(e,n,r){function s(o,u){var c=o[0],d=o[1],f=o[2],p=u[0],y=u[1],b=u[2],T=p-c,x=y-d,N=T*T+x*x,k,D;if(N<BO)D=Math.log(b/f)/e,k=function(R){return[c+R*T,d+R*x,f*Math.exp(e*R*D)]};else{var z=Math.sqrt(N),Y=(b*b-f*f+r*N)/(2*f*n*z),q=(b*b-f*f-r*N)/(2*b*n*z),ee=Math.log(Math.sqrt(Y*Y+1)-Y),$=Math.log(Math.sqrt(q*q+1)-q);D=($-ee)/e,k=function(R){var C=R*D,O=g2(ee),P=f/(n*z)*(O*VO(e*C+ee)-UO(ee));return[c+P*T,d+P*x,f*O/g2(e*C+ee)]}}return k.duration=D*1e3*e/Math.SQRT2,k}return s.rho=function(o){var u=Math.max(.001,+o),c=u*u,d=c*c;return t(u,c,d)},s}(Math.SQRT2,2,4);var Cl=0,lh=0,Wc=0,bw=1e3,N0,ch,R0=0,nu=0,cm=0,Uh=typeof performance=="object"&&performance.now?performance:Date,Tw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function K1(){return nu||(Tw(FO),nu=Uh.now()+cm)}function FO(){nu=0}function D0(){this._call=this._time=this._next=null}D0.prototype=vw.prototype={constructor:D0,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?K1():+n)+(e==null?0:+e),!this._next&&ch!==this&&(ch?ch._next=this:N0=this,ch=this),this._call=t,this._time=n,jy()},stop:function(){this._call&&(this._call=null,this._time=1/0,jy())}};function vw(t,e,n){var r=new D0;return r.restart(t,e,n),r}function zO(){K1(),++Cl;for(var t=N0,e;t;)(e=nu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Cl}function y2(){nu=(R0=Uh.now())+cm,Cl=lh=0;try{zO()}finally{Cl=0,qO(),nu=0}}function jO(){var t=Uh.now(),e=t-R0;e>bw&&(cm-=e,R0=t)}function qO(){for(var t,e=N0,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:N0=n);ch=t,jy(r)}function jy(t){if(!Cl){lh&&(lh=clearTimeout(lh));var e=t-nu;e>24?(t<1/0&&(lh=setTimeout(y2,t-Uh.now()-cm)),Wc&&(Wc=clearInterval(Wc))):(Wc||(R0=Uh.now(),Wc=setInterval(jO,bw)),Cl=1,Tw(y2))}}function E2(t,e,n){var r=new D0;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var YO=um("start","end","cancel","interrupt"),GO=[],Aw=0,_2=1,qy=2,u0=3,b2=4,Yy=5,l0=6;function hm(t,e,n,r,s,o){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;$O(t,n,{name:e,index:r,group:s,on:YO,tween:GO,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Aw})}function X1(t,e){var n=ss(t,e);if(n.state>Aw)throw new Error("too late; already scheduled");return n}function Ms(t,e){var n=ss(t,e);if(n.state>u0)throw new Error("too late; already running");return n}function ss(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $O(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=vw(o,0,n.time);function o(f){n.state=_2,n.timer.restart(u,n.delay,n.time),n.delay<=f&&u(f-n.delay)}function u(f){var p,y,b,T;if(n.state!==_2)return d();for(p in r)if(T=r[p],T.name===n.name){if(T.state===u0)return E2(u);T.state===b2?(T.state=l0,T.timer.stop(),T.on.call("interrupt",t,t.__data__,T.index,T.group),delete r[p]):+p<e&&(T.state=l0,T.timer.stop(),T.on.call("cancel",t,t.__data__,T.index,T.group),delete r[p])}if(E2(function(){n.state===u0&&(n.state=b2,n.timer.restart(c,n.delay,n.time),c(f))}),n.state=qy,n.on.call("start",t,t.__data__,n.index,n.group),n.state===qy){for(n.state=u0,s=new Array(b=n.tween.length),p=0,y=-1;p<b;++p)(T=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++y]=T);s.length=y+1}}function c(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=Yy,1),y=-1,b=s.length;++y<b;)s[y].call(t,p);n.state===Yy&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=l0,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function c0(t,e){var n=t.__transition,r,s,o=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){o=!1;continue}s=r.state>qy&&r.state<Yy,r.state=l0,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}o&&delete t.__transition}}function KO(t){return this.each(function(){c0(this,t)})}function XO(t,e){var n,r;return function(){var s=Ms(this,t),o=s.tween;if(o!==n){r=n=o;for(var u=0,c=r.length;u<c;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}s.tween=r}}function QO(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Ms(this,t),u=o.tween;if(u!==r){s=(r=u).slice();for(var c={name:e,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===e){s[d]=c;break}d===f&&s.push(c)}o.tween=s}}function WO(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ss(this.node(),n).tween,s=0,o=r.length,u;s<o;++s)if((u=r[s]).name===t)return u.value;return null}return this.each((e==null?XO:QO)(n,t,e))}function Q1(t,e,n){var r=t._id;return t.each(function(){var s=Ms(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ss(s,r).value[e]}}function Sw(t,e){var n;return(typeof e=="number"?Ga:e instanceof Bh?m2:(n=Bh(e))?(e=n,m2):OO)(t,e)}function ZO(t){return function(){this.removeAttribute(t)}}function JO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ek(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttribute(t);return u===s?null:u===r?o:o=e(r=u,n)}}function tk(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttributeNS(t.space,t.local);return u===s?null:u===r?o:o=e(r=u,n)}}function nk(t,e,n){var r,s,o;return function(){var u,c=n(this),d;return c==null?void this.removeAttribute(t):(u=this.getAttribute(t),d=c+"",u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c)))}}function rk(t,e,n){var r,s,o;return function(){var u,c=n(this),d;return c==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),d=c+"",u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c)))}}function ik(t,e){var n=lm(t),r=n==="transform"?PO:Sw;return this.attrTween(t,typeof e=="function"?(n.local?rk:nk)(n,r,Q1(this,"attr."+t,e)):e==null?(n.local?JO:ZO)(n):(n.local?tk:ek)(n,r,e))}function sk(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ak(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ok(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ak(t,o)),n}return s._value=e,s}function uk(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&sk(t,o)),n}return s._value=e,s}function lk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=lm(t);return this.tween(n,(r.local?ok:uk)(r,e))}function ck(t,e){return function(){X1(this,t).delay=+e.apply(this,arguments)}}function hk(t,e){return e=+e,function(){X1(this,t).delay=e}}function dk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ck:hk)(e,t)):ss(this.node(),e).delay}function fk(t,e){return function(){Ms(this,t).duration=+e.apply(this,arguments)}}function mk(t,e){return e=+e,function(){Ms(this,t).duration=e}}function pk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fk:mk)(e,t)):ss(this.node(),e).duration}function gk(t,e){if(typeof e!="function")throw new Error;return function(){Ms(this,t).ease=e}}function yk(t){var e=this._id;return arguments.length?this.each(gk(e,t)):ss(this.node(),e).ease}function Ek(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ms(this,t).ease=n}}function _k(t){if(typeof t!="function")throw new Error;return this.each(Ek(this._id,t))}function bk(t){typeof t!="function"&&(t=nw(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],d,f=0;f<u;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new ha(r,this._parents,this._name,this._id)}function Tk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),u=new Array(r),c=0;c<o;++c)for(var d=e[c],f=n[c],p=d.length,y=u[c]=new Array(p),b,T=0;T<p;++T)(b=d[T]||f[T])&&(y[T]=b);for(;c<r;++c)u[c]=e[c];return new ha(u,this._parents,this._name,this._id)}function vk(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ak(t,e,n){var r,s,o=vk(e)?X1:Ms;return function(){var u=o(this,t),c=u.on;c!==r&&(s=(r=c).copy()).on(e,n),u.on=s}}function Sk(t,e){var n=this._id;return arguments.length<2?ss(this.node(),n).on.on(t):this.each(Ak(n,t,e))}function xk(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function wk(){return this.on("end.remove",xk(this._id))}function Ik(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Y1(t));for(var r=this._groups,s=r.length,o=new Array(s),u=0;u<s;++u)for(var c=r[u],d=c.length,f=o[u]=new Array(d),p,y,b=0;b<d;++b)(p=c[b])&&(y=t.call(p,p.__data__,b,c))&&("__data__"in p&&(y.__data__=p.__data__),f[b]=y,hm(f[b],e,n,b,f,ss(p,n)));return new ha(o,this._parents,e,n)}function Ck(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tw(t));for(var r=this._groups,s=r.length,o=[],u=[],c=0;c<s;++c)for(var d=r[c],f=d.length,p,y=0;y<f;++y)if(p=d[y]){for(var b=t.call(p,p.__data__,y,d),T,x=ss(p,n),N=0,k=b.length;N<k;++N)(T=b[N])&&hm(T,e,n,N,b,x);o.push(b),u.push(p)}return new ha(o,u,e,n)}var Nk=nd.prototype.constructor;function Rk(){return new Nk(this._groups,this._parents)}function Dk(t,e){var n,r,s;return function(){var o=Il(this,t),u=(this.style.removeProperty(t),Il(this,t));return o===u?null:o===n&&u===r?s:s=e(n=o,r=u)}}function xw(t){return function(){this.style.removeProperty(t)}}function Ok(t,e,n){var r,s=n+"",o;return function(){var u=Il(this,t);return u===s?null:u===r?o:o=e(r=u,n)}}function kk(t,e,n){var r,s,o;return function(){var u=Il(this,t),c=n(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(t),Il(this,t))),u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c))}}function Lk(t,e){var n,r,s,o="style."+e,u="end."+o,c;return function(){var d=Ms(this,t),f=d.on,p=d.value[o]==null?c||(c=xw(e)):void 0;(f!==n||s!==p)&&(r=(n=f).copy()).on(u,s=p),d.on=r}}function Mk(t,e,n){var r=(t+="")=="transform"?MO:Sw;return e==null?this.styleTween(t,Dk(t,r)).on("end.style."+t,xw(t)):typeof e=="function"?this.styleTween(t,kk(t,r,Q1(this,"style."+t,e))).each(Lk(this._id,t)):this.styleTween(t,Ok(t,r,e),n).on("end.style."+t,null)}function Pk(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Bk(t,e,n){var r,s;function o(){var u=e.apply(this,arguments);return u!==s&&(r=(s=u)&&Pk(t,u,n)),r}return o._value=e,o}function Uk(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Bk(t,e,n??""))}function Vk(t){return function(){this.textContent=t}}function Hk(t){return function(){var e=t(this);this.textContent=e??""}}function Fk(t){return this.tween("text",typeof t=="function"?Hk(Q1(this,"text",t)):Vk(t==null?"":t+""))}function zk(t){return function(e){this.textContent=t.call(this,e)}}function jk(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&zk(s)),e}return r._value=t,r}function qk(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,jk(t))}function Yk(){for(var t=this._name,e=this._id,n=ww(),r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,d,f=0;f<c;++f)if(d=u[f]){var p=ss(d,e);hm(d,t,n,f,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ha(r,this._parents,t,n)}function Gk(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,u){var c={value:u},d={value:function(){--s===0&&o()}};n.each(function(){var f=Ms(this,r),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(d)),f.on=e}),s===0&&o()})}var $k=0;function ha(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ww(){return++$k}var sa=nd.prototype;ha.prototype={constructor:ha,select:Ik,selectAll:Ck,selectChild:sa.selectChild,selectChildren:sa.selectChildren,filter:bk,merge:Tk,selection:Rk,transition:Yk,call:sa.call,nodes:sa.nodes,node:sa.node,size:sa.size,empty:sa.empty,each:sa.each,on:Sk,attr:ik,attrTween:lk,style:Mk,styleTween:Uk,text:Fk,textTween:qk,remove:wk,tween:WO,delay:dk,duration:pk,ease:yk,easeVarying:_k,end:Gk,[Symbol.iterator]:sa[Symbol.iterator]};function Kk(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xk={time:null,delay:0,duration:250,ease:Kk};function Qk(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Wk(t){var e,n;t instanceof ha?(e=t._id,t=t._name):(e=ww(),(n=Xk).time=K1(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&hm(d,t,e,f,u,n||Qk(d,e));return new ha(r,this._parents,t,e)}nd.prototype.interrupt=KO;nd.prototype.transition=Wk;const jf=t=>()=>t;function Zk(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function oa(t,e,n){this.k=t,this.x=e,this.y=n}oa.prototype={constructor:oa,scale:function(t){return t===1?this:new oa(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new oa(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var no=new oa(1,0,0);oa.prototype;function Wg(t){t.stopImmediatePropagation()}function Zc(t){t.preventDefault(),t.stopImmediatePropagation()}function Jk(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function eL(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function T2(){return this.__zoom||no}function tL(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function nL(){return navigator.maxTouchPoints||"ontouchstart"in this}function rL(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function iL(){var t=Jk,e=eL,n=rL,r=tL,s=nL,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=HO,f=um("start","zoom","end"),p,y,b,T=500,x=150,N=0,k=10;function D(L){L.property("__zoom",T2).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",P).filter(s).on("touchstart.zoom",U).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}D.transform=function(L,K,F,Q){var se=L.selection?L.selection():L;se.property("__zoom",T2),L!==se?ee(L,K,F,Q):se.interrupt().each(function(){$(this,arguments).event(Q).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},D.scaleBy=function(L,K,F,Q){D.scaleTo(L,function(){var se=this.__zoom.k,te=typeof K=="function"?K.apply(this,arguments):K;return se*te},F,Q)},D.scaleTo=function(L,K,F,Q){D.transform(L,function(){var se=e.apply(this,arguments),te=this.__zoom,A=F==null?q(se):typeof F=="function"?F.apply(this,arguments):F,J=te.invert(A),ae=typeof K=="function"?K.apply(this,arguments):K;return n(Y(z(te,ae),A,J),se,u)},F,Q)},D.translateBy=function(L,K,F,Q){D.transform(L,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof F=="function"?F.apply(this,arguments):F),e.apply(this,arguments),u)},null,Q)},D.translateTo=function(L,K,F,Q,se){D.transform(L,function(){var te=e.apply(this,arguments),A=this.__zoom,J=Q==null?q(te):typeof Q=="function"?Q.apply(this,arguments):Q;return n(no.translate(J[0],J[1]).scale(A.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof F=="function"?-F.apply(this,arguments):-F),te,u)},Q,se)};function z(L,K){return K=Math.max(o[0],Math.min(o[1],K)),K===L.k?L:new oa(K,L.x,L.y)}function Y(L,K,F){var Q=K[0]-F[0]*L.k,se=K[1]-F[1]*L.k;return Q===L.x&&se===L.y?L:new oa(L.k,Q,se)}function q(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function ee(L,K,F,Q){L.on("start.zoom",function(){$(this,arguments).event(Q).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(Q).end()}).tween("zoom",function(){var se=this,te=arguments,A=$(se,te).event(Q),J=e.apply(se,te),ae=F==null?q(J):typeof F=="function"?F.apply(se,te):F,B=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ge=se.__zoom,Ne=typeof K=="function"?K.apply(se,te):K,Ie=d(ge.invert(ae).concat(B/ge.k),Ne.invert(ae).concat(B/Ne.k));return function(je){if(je===1)je=Ne;else{var we=Ie(je),Me=B/we[2];je=new oa(Me,ae[0]-we[0]*Me,ae[1]-we[1]*Me)}A.zoom(null,je)}})}function $(L,K,F){return!F&&L.__zooming||new R(L,K)}function R(L,K){this.that=L,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(L,K),this.taps=0}R.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,K){return this.mouse&&L!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var K=Ji(this.that).datum();f.call(L,this.that,new Zk(L,{sourceEvent:this.sourceEvent,target:D,transform:this.that.__zoom,dispatch:f}),K)}};function C(L,...K){if(!t.apply(this,arguments))return;var F=$(this,K).event(L),Q=this.__zoom,se=Math.max(o[0],Math.min(o[1],Q.k*Math.pow(2,r.apply(this,arguments)))),te=As(L);if(F.wheel)(F.mouse[0][0]!==te[0]||F.mouse[0][1]!==te[1])&&(F.mouse[1]=Q.invert(F.mouse[0]=te)),clearTimeout(F.wheel);else{if(Q.k===se)return;F.mouse=[te,Q.invert(te)],c0(this),F.start()}Zc(L),F.wheel=setTimeout(A,x),F.zoom("mouse",n(Y(z(Q,se),F.mouse[0],F.mouse[1]),F.extent,u));function A(){F.wheel=null,F.end()}}function O(L,...K){if(b||!t.apply(this,arguments))return;var F=L.currentTarget,Q=$(this,K,!0).event(L),se=Ji(L.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",B,!0),te=As(L,F),A=L.clientX,J=L.clientY;dw(L.view),Wg(L),Q.mouse=[te,this.__zoom.invert(te)],c0(this),Q.start();function ae(ge){if(Zc(ge),!Q.moved){var Ne=ge.clientX-A,Ie=ge.clientY-J;Q.moved=Ne*Ne+Ie*Ie>N}Q.event(ge).zoom("mouse",n(Y(Q.that.__zoom,Q.mouse[0]=As(ge,F),Q.mouse[1]),Q.extent,u))}function B(ge){se.on("mousemove.zoom mouseup.zoom",null),fw(ge.view,Q.moved),Zc(ge),Q.event(ge).end()}}function P(L,...K){if(t.apply(this,arguments)){var F=this.__zoom,Q=As(L.changedTouches?L.changedTouches[0]:L,this),se=F.invert(Q),te=F.k*(L.shiftKey?.5:2),A=n(Y(z(F,te),Q,se),e.apply(this,K),u);Zc(L),c>0?Ji(this).transition().duration(c).call(ee,A,Q,L):Ji(this).call(D.transform,A,Q,L)}}function U(L,...K){if(t.apply(this,arguments)){var F=L.touches,Q=F.length,se=$(this,K,L.changedTouches.length===Q).event(L),te,A,J,ae;for(Wg(L),A=0;A<Q;++A)J=F[A],ae=As(J,this),ae=[ae,this.__zoom.invert(ae),J.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ae[2]&&(se.touch1=ae,se.taps=0):(se.touch0=ae,te=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),te&&(se.taps<2&&(y=ae[0],p=setTimeout(function(){p=null},T)),c0(this),se.start())}}function V(L,...K){if(this.__zooming){var F=$(this,K).event(L),Q=L.changedTouches,se=Q.length,te,A,J,ae;for(Zc(L),te=0;te<se;++te)A=Q[te],J=As(A,this),F.touch0&&F.touch0[2]===A.identifier?F.touch0[0]=J:F.touch1&&F.touch1[2]===A.identifier&&(F.touch1[0]=J);if(A=F.that.__zoom,F.touch1){var B=F.touch0[0],ge=F.touch0[1],Ne=F.touch1[0],Ie=F.touch1[1],je=(je=Ne[0]-B[0])*je+(je=Ne[1]-B[1])*je,we=(we=Ie[0]-ge[0])*we+(we=Ie[1]-ge[1])*we;A=z(A,Math.sqrt(je/we)),J=[(B[0]+Ne[0])/2,(B[1]+Ne[1])/2],ae=[(ge[0]+Ie[0])/2,(ge[1]+Ie[1])/2]}else if(F.touch0)J=F.touch0[0],ae=F.touch0[1];else return;F.zoom("touch",n(Y(A,J,ae),F.extent,u))}}function I(L,...K){if(this.__zooming){var F=$(this,K).event(L),Q=L.changedTouches,se=Q.length,te,A;for(Wg(L),b&&clearTimeout(b),b=setTimeout(function(){b=null},T),te=0;te<se;++te)A=Q[te],F.touch0&&F.touch0[2]===A.identifier?delete F.touch0:F.touch1&&F.touch1[2]===A.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(A=As(A,this),Math.hypot(y[0]-A[0],y[1]-A[1])<k)){var J=Ji(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return D.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:jf(+L),D):r},D.filter=function(L){return arguments.length?(t=typeof L=="function"?L:jf(!!L),D):t},D.touchable=function(L){return arguments.length?(s=typeof L=="function"?L:jf(!!L),D):s},D.extent=function(L){return arguments.length?(e=typeof L=="function"?L:jf([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),D):e},D.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],D):[o[0],o[1]]},D.translateExtent=function(L){return arguments.length?(u[0][0]=+L[0][0],u[1][0]=+L[1][0],u[0][1]=+L[0][1],u[1][1]=+L[1][1],D):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},D.constrain=function(L){return arguments.length?(n=L,D):n},D.duration=function(L){return arguments.length?(c=+L,D):c},D.interpolate=function(L){return arguments.length?(d=L,D):d},D.on=function(){var L=f.on.apply(f,arguments);return L===f?D:L},D.clickDistance=function(L){return arguments.length?(N=(L=+L)*L,D):Math.sqrt(N)},D.tapDistance=function(L){return arguments.length?(k=+L,D):k},D}Zx();const dm=re.createContext(null),sL=dm.Provider,da={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Iw=da.error001();function gn(t,e){const n=re.useContext(dm);if(n===null)throw new Error(Iw);return Jx(n,t,e)}const ar=()=>{const t=re.useContext(dm);if(t===null)throw new Error(Iw);return re.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},aL=t=>t.userSelectionActive?"none":"all";function Cw({position:t,children:e,className:n,style:r,...s}){const o=gn(aL),u=`${t}`.split("-");return _e.createElement("div",{className:zr(["react-flow__panel",n,...u]),style:{...r,pointerEvents:o},...s},e)}function oL({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:_e.createElement(Cw,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},_e.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const uL=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:d,className:f,...p})=>{const y=re.useRef(null),[b,T]=re.useState({x:0,y:0,width:0,height:0}),x=zr(["react-flow__edge-textwrapper",f]);return re.useEffect(()=>{if(y.current){const N=y.current.getBBox();T({x:N.x,y:N.y,width:N.width,height:N.height})}},[n]),typeof n>"u"||!n?null:_e.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:x,visibility:b.width?"visible":"hidden",...p},s&&_e.createElement("rect",{width:b.width+2*u[0],x:-u[0],y:-u[1],height:b.height+2*u[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),_e.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:y,style:r},n),d)};var lL=re.memo(uL);const W1=t=>({width:t.offsetWidth,height:t.offsetHeight}),Nl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Z1=(t={x:0,y:0},e)=>({x:Nl(t.x,e[0][0],e[1][0]),y:Nl(t.y,e[0][1],e[1][1])}),v2=(t,e,n)=>t<e?Nl(Math.abs(t-e),1,50)/50:t>n?-Nl(Math.abs(t-n),1,50)/50:0,Nw=(t,e)=>{const n=v2(t.x,35,e.width-35)*20,r=v2(t.y,35,e.height-35)*20;return[n,r]},Rw=t=>t.getRootNode?.()||window?.document,cL=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),J1=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),hL=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),A2=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Gy=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},dL=t=>zi(t.width)&&zi(t.height)&&zi(t.x)&&zi(t.y),zi=t=>!isNaN(t)&&isFinite(t),vn=Symbol.for("internals"),Dw=["Enter"," ","Escape"],fL=(t,e)=>{},mL=t=>"nativeEvent"in t;function $y(t){const n=(mL(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Ow=t=>"clientX"in t,ro=(t,e)=>{const n=Ow(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},O0=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,id=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:b,interactionWidth:T=20})=>_e.createElement(_e.Fragment,null,_e.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:b}),T&&_e.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:T,className:"react-flow__edge-interaction"}),s&&zi(n)&&zi(r)?_e.createElement(lL,{x:n,y:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null);id.displayName="BaseEdge";function Jc(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function kw({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,u=Math.abs(r-e)/2,c=r<e?r+u:r-u;return[o,c,s,u]}function Lw({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:u,targetControlY:c}){const d=t*.125+s*.375+u*.375+n*.125,f=e*.125+o*.375+c*.375+r*.125,p=Math.abs(d-t),y=Math.abs(f-e);return[d,f,p,y]}var lo;(function(t){t.Strict="strict",t.Loose="loose"})(lo||(lo={}));var Wo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Wo||(Wo={}));var Vh;(function(t){t.Partial="partial",t.Full="full"})(Vh||(Vh={}));var Ka;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ka||(Ka={}));var Hh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Hh||(Hh={}));var ze;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ze||(ze={}));function S2({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===ze.Left||t===ze.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function Mw({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:s,targetPosition:o=ze.Top}){const[u,c]=S2({pos:n,x1:t,y1:e,x2:r,y2:s}),[d,f]=S2({pos:o,x1:r,y1:s,x2:t,y2:e}),[p,y,b,T]=Lw({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${t},${e} C${u},${c} ${d},${f} ${r},${s}`,p,y,b,T]}const eE=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=ze.Bottom,targetPosition:o=ze.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:x,interactionWidth:N})=>{const[k,D,z]=Mw({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return _e.createElement(id,{path:k,labelX:D,labelY:z,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:x,interactionWidth:N})});eE.displayName="SimpleBezierEdge";const x2={[ze.Left]:{x:-1,y:0},[ze.Right]:{x:1,y:0},[ze.Top]:{x:0,y:-1},[ze.Bottom]:{x:0,y:1}},pL=({source:t,sourcePosition:e=ze.Bottom,target:n})=>e===ze.Left||e===ze.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},w2=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function gL({source:t,sourcePosition:e=ze.Bottom,target:n,targetPosition:r=ze.Top,center:s,offset:o}){const u=x2[e],c=x2[r],d={x:t.x+u.x*o,y:t.y+u.y*o},f={x:n.x+c.x*o,y:n.y+c.y*o},p=pL({source:d,sourcePosition:e,target:f}),y=p.x!==0?"x":"y",b=p[y];let T=[],x,N;const k={x:0,y:0},D={x:0,y:0},[z,Y,q,ee]=kw({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[y]*c[y]===-1){x=s.x??z,N=s.y??Y;const R=[{x,y:d.y},{x,y:f.y}],C=[{x:d.x,y:N},{x:f.x,y:N}];u[y]===b?T=y==="x"?R:C:T=y==="x"?C:R}else{const R=[{x:d.x,y:f.y}],C=[{x:f.x,y:d.y}];if(y==="x"?T=u.x===b?C:R:T=u.y===b?R:C,e===r){const I=Math.abs(t[y]-n[y]);if(I<=o){const L=Math.min(o-1,o-I);u[y]===b?k[y]=(d[y]>t[y]?-1:1)*L:D[y]=(f[y]>n[y]?-1:1)*L}}if(e!==r){const I=y==="x"?"y":"x",L=u[y]===c[I],K=d[I]>f[I],F=d[I]<f[I];(u[y]===1&&(!L&&K||L&&F)||u[y]!==1&&(!L&&F||L&&K))&&(T=y==="x"?R:C)}const O={x:d.x+k.x,y:d.y+k.y},P={x:f.x+D.x,y:f.y+D.y},U=Math.max(Math.abs(O.x-T[0].x),Math.abs(P.x-T[0].x)),V=Math.max(Math.abs(O.y-T[0].y),Math.abs(P.y-T[0].y));U>=V?(x=(O.x+P.x)/2,N=T[0].y):(x=T[0].x,N=(O.y+P.y)/2)}return[[t,{x:d.x+k.x,y:d.y+k.y},...T,{x:f.x+D.x,y:f.y+D.y},n],x,N,q,ee]}function yL(t,e,n,r){const s=Math.min(w2(t,e)/2,w2(e,n)/2,r),{x:o,y:u}=e;if(t.x===o&&o===n.x||t.y===u&&u===n.y)return`L${o} ${u}`;if(t.y===u){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${o+s*f},${u}Q ${o},${u} ${o},${u+s*p}`}const c=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${o},${u+s*d}Q ${o},${u} ${o+s*c},${u}`}function Ky({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:s,targetPosition:o=ze.Top,borderRadius:u=5,centerX:c,centerY:d,offset:f=20}){const[p,y,b,T,x]=gL({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:d},offset:f});return[p.reduce((k,D,z)=>{let Y="";return z>0&&z<p.length-1?Y=yL(p[z-1],D,p[z+1],u):Y=`${z===0?"M":"L"}${D.x} ${D.y}`,k+=Y,k},""),y,b,T,x]}const fm=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:y=ze.Bottom,targetPosition:b=ze.Top,markerEnd:T,markerStart:x,pathOptions:N,interactionWidth:k})=>{const[D,z,Y]=Ky({sourceX:t,sourceY:e,sourcePosition:y,targetX:n,targetY:r,targetPosition:b,borderRadius:N?.borderRadius,offset:N?.offset});return _e.createElement(id,{path:D,labelX:z,labelY:Y,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:T,markerStart:x,interactionWidth:k})});fm.displayName="SmoothStepEdge";const tE=re.memo(t=>_e.createElement(fm,{...t,pathOptions:re.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));tE.displayName="StepEdge";function EL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,u,c]=kw({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,u,c]}const nE=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:b,interactionWidth:T})=>{const[x,N,k]=EL({sourceX:t,sourceY:e,targetX:n,targetY:r});return _e.createElement(id,{path:x,labelX:N,labelY:k,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:b,interactionWidth:T})});nE.displayName="StraightEdge";function qf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function I2({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case ze.Left:return[e-qf(e-r,o),n];case ze.Right:return[e+qf(r-e,o),n];case ze.Top:return[e,n-qf(n-s,o)];case ze.Bottom:return[e,n+qf(s-n,o)]}}function Pw({sourceX:t,sourceY:e,sourcePosition:n=ze.Bottom,targetX:r,targetY:s,targetPosition:o=ze.Top,curvature:u=.25}){const[c,d]=I2({pos:n,x1:t,y1:e,x2:r,y2:s,c:u}),[f,p]=I2({pos:o,x1:r,y1:s,x2:t,y2:e,c:u}),[y,b,T,x]=Lw({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${e} C${c},${d} ${f},${p} ${r},${s}`,y,b,T,x]}const k0=re.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=ze.Bottom,targetPosition:o=ze.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:x,pathOptions:N,interactionWidth:k})=>{const[D,z,Y]=Pw({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:N?.curvature});return _e.createElement(id,{path:D,labelX:z,labelY:Y,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:x,interactionWidth:k})});k0.displayName="BezierEdge";const rE=re.createContext(null),_L=rE.Provider;rE.Consumer;const bL=()=>re.useContext(rE),TL=t=>"id"in t&&"source"in t&&"target"in t,vL=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,Xy=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,AL=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),SL=(t,e)=>{if(!t.source||!t.target)return e;let n;return TL(t)?n={...t}:n={...t,id:vL(t)},AL(n,e)?e:e.concat(n)},Qy=({x:t,y:e},[n,r,s],o,[u,c])=>{const d={x:(t-n)/s,y:(e-r)/s};return o?{x:u*Math.round(d.x/u),y:c*Math.round(d.y/c)}:d},Bw=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),yl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},iE=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:u}=yl(s,e).positionAbsolute;return cL(r,J1({x:o,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return hL(n)},Uw=(t,e,[n,r,s]=[0,0,1],o=!1,u=!1,c=[0,0])=>{const d={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},f=[];return t.forEach(p=>{const{width:y,height:b,selectable:T=!0,hidden:x=!1}=p;if(u&&!T||x)return!1;const{positionAbsolute:N}=yl(p,c),k={x:N.x,y:N.y,width:y||0,height:b||0},D=Gy(d,k),z=typeof y>"u"||typeof b>"u"||y===null||b===null,Y=o&&D>0,q=(y||0)*(b||0);(z||Y||D>=q||p.dragging)&&f.push(p)}),f},Vw=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},Hw=(t,e,n,r,s,o=.1)=>{const u=e/(t.width*(1+o)),c=n/(t.height*(1+o)),d=Math.min(u,c),f=Nl(d,r,s),p=t.x+t.width/2,y=t.y+t.height/2,b=e/2-p*f,T=n/2-y*f;return{x:b,y:T,zoom:f}},Ko=(t,e=0)=>t.transition().duration(e);function C2(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function xL(t,e,n,r,s,o){const{x:u,y:c}=ro(t),f=e.elementsFromPoint(u,c).find(x=>x.classList.contains("react-flow__handle"));if(f){const x=f.getAttribute("data-nodeid");if(x){const N=sE(void 0,f),k=f.getAttribute("data-handleid"),D=o({nodeId:x,id:k,type:N});if(D){const z=s.find(Y=>Y.nodeId===x&&Y.type===N&&Y.id===k);return{handle:{id:k,type:N,nodeId:x,x:z?.x||n.x,y:z?.y||n.y},validHandleResult:D}}}}let p=[],y=1/0;if(s.forEach(x=>{const N=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(N<=r){const k=o(x);N<=y&&(N<y?p=[{handle:x,validHandleResult:k}]:N===y&&p.push({handle:x,validHandleResult:k}),y=N)}}),!p.length)return{handle:null,validHandleResult:Fw()};if(p.length===1)return p[0];const b=p.some(({validHandleResult:x})=>x.isValid),T=p.some(({handle:x})=>x.type==="target");return p.find(({handle:x,validHandleResult:N})=>T?x.type==="target":b?N.isValid:!0)||p[0]}const wL={source:null,target:null,sourceHandle:null,targetHandle:null},Fw=()=>({handleDomNode:null,isValid:!1,connection:wL,endHandle:null});function zw(t,e,n,r,s,o,u){const c=s==="target",d=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...Fw(),handleDomNode:d};if(d){const p=sE(void 0,d),y=d.getAttribute("data-nodeid"),b=d.getAttribute("data-handleid"),T=d.classList.contains("connectable"),x=d.classList.contains("connectableend"),N={source:c?y:n,sourceHandle:c?b:r,target:c?n:y,targetHandle:c?r:b};f.connection=N,T&&x&&(e===lo.Strict?c&&p==="source"||!c&&p==="target":y!==n||b!==r)&&(f.endHandle={nodeId:y,handleId:b,type:p},f.isValid=o(N))}return f}function IL({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[vn]){const{handleBounds:u}=o[vn];let c=[],d=[];u&&(c=C2(o,u,"source",`${e}-${n}-${r}`),d=C2(o,u,"target",`${e}-${n}-${r}`)),s.push(...c,...d)}return s},[])}function sE(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Zg(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function CL(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function jw({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:u,isValidConnection:c,edgeUpdaterType:d,onReconnectEnd:f}){const p=Rw(t.target),{connectionMode:y,domNode:b,autoPanOnConnect:T,connectionRadius:x,onConnectStart:N,panBy:k,getNodes:D,cancelConnection:z}=o();let Y=0,q;const{x:ee,y:$}=ro(t),R=p?.elementFromPoint(ee,$),C=sE(d,R),O=b?.getBoundingClientRect();if(!O||!C)return;let P,U=ro(t,O),V=!1,I=null,L=!1,K=null;const F=IL({nodes:D(),nodeId:n,handleId:e,handleType:C}),Q=()=>{if(!T)return;const[A,J]=Nw(U,O);k({x:A,y:J}),Y=requestAnimationFrame(Q)};u({connectionPosition:U,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:e,type:C},connectionEndHandle:null}),N?.(t,{nodeId:n,handleId:e,handleType:C});function se(A){const{transform:J}=o();U=ro(A,O);const{handle:ae,validHandleResult:B}=xL(A,p,Qy(U,J,!1,[1,1]),x,F,ge=>zw(ge,y,n,e,s?"target":"source",c,p));if(q=ae,V||(Q(),V=!0),K=B.handleDomNode,I=B.connection,L=B.isValid,u({connectionPosition:q&&L?Bw({x:q.x,y:q.y},J):U,connectionStatus:CL(!!q,L),connectionEndHandle:B.endHandle}),!q&&!L&&!K)return Zg(P);I.source!==I.target&&K&&(Zg(P),P=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",L),K.classList.toggle("react-flow__handle-valid",L))}function te(A){(q||K)&&I&&L&&r?.(I),o().onConnectEnd?.(A),d&&f?.(A),Zg(P),z(),cancelAnimationFrame(Y),V=!1,L=!1,I=null,K=null,p.removeEventListener("mousemove",se),p.removeEventListener("mouseup",te),p.removeEventListener("touchmove",se),p.removeEventListener("touchend",te)}p.addEventListener("mousemove",se),p.addEventListener("mouseup",te),p.addEventListener("touchmove",se),p.addEventListener("touchend",te)}const N2=()=>!0,NL=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),RL=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:u}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===e&&u?.type===n}},qw=re.forwardRef(({type:t="source",position:e=ze.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:u,onConnect:c,children:d,className:f,onMouseDown:p,onTouchStart:y,...b},T)=>{const x=u||null,N=t==="target",k=ar(),D=bL(),{connectOnClick:z,noPanClassName:Y}=gn(NL,wr),{connecting:q,clickConnecting:ee}=gn(RL(D,x,t),wr);D||k.getState().onError?.("010",da.error010());const $=O=>{const{defaultEdgeOptions:P,onConnect:U,hasDefaultEdges:V}=k.getState(),I={...P,...O};if(V){const{edges:L,setEdges:K}=k.getState();K(SL(I,L))}U?.(I),c?.(I)},R=O=>{if(!D)return;const P=Ow(O);s&&(P&&O.button===0||!P)&&jw({event:O,handleId:x,nodeId:D,onConnect:$,isTarget:N,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||N2}),P?p?.(O):y?.(O)},C=O=>{const{onClickConnectStart:P,onClickConnectEnd:U,connectionClickStartHandle:V,connectionMode:I,isValidConnection:L}=k.getState();if(!D||!V&&!s)return;if(!V){P?.(O,{nodeId:D,handleId:x,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:D,type:t,handleId:x}});return}const K=Rw(O.target),F=n||L||N2,{connection:Q,isValid:se}=zw({nodeId:D,id:x,type:t},I,V.nodeId,V.handleId||null,V.type,F,K);se&&$(Q),U?.(O),k.setState({connectionClickStartHandle:null})};return _e.createElement("div",{"data-handleid":x,"data-nodeid":D,"data-handlepos":e,"data-id":`${D}-${x}-${t}`,className:zr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",Y,f,{source:!N,target:N,connectable:r,connectablestart:s,connectableend:o,connecting:ee,connectionindicator:r&&(s&&!q||o&&q)}]),onMouseDown:R,onTouchStart:R,onClick:z?C:void 0,ref:T,...b},d)});qw.displayName="Handle";var Wr=re.memo(qw);const Yw=({data:t,isConnectable:e,targetPosition:n=ze.Top,sourcePosition:r=ze.Bottom})=>_e.createElement(_e.Fragment,null,_e.createElement(Wr,{type:"target",position:n,isConnectable:e}),t?.label,_e.createElement(Wr,{type:"source",position:r,isConnectable:e}));Yw.displayName="DefaultNode";var Wy=re.memo(Yw);const Gw=({data:t,isConnectable:e,sourcePosition:n=ze.Bottom})=>_e.createElement(_e.Fragment,null,t?.label,_e.createElement(Wr,{type:"source",position:n,isConnectable:e}));Gw.displayName="InputNode";var $w=re.memo(Gw);const Kw=({data:t,isConnectable:e,targetPosition:n=ze.Top})=>_e.createElement(_e.Fragment,null,_e.createElement(Wr,{type:"target",position:n,isConnectable:e}),t?.label);Kw.displayName="OutputNode";var Xw=re.memo(Kw);const aE=()=>null;aE.displayName="GroupNode";const DL=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Yf=t=>t.id;function OL(t,e){return wr(t.selectedNodes.map(Yf),e.selectedNodes.map(Yf))&&wr(t.selectedEdges.map(Yf),e.selectedEdges.map(Yf))}const Qw=re.memo(({onSelectionChange:t})=>{const e=ar(),{selectedNodes:n,selectedEdges:r}=gn(DL,OL);return re.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});Qw.displayName="SelectionListener";const kL=t=>!!t.onSelectionChange;function LL({onSelectionChange:t}){const e=gn(kL);return t||e?_e.createElement(Qw,{onSelectionChange:t}):null}const ML=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function el(t,e){re.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function ft(t,e,n){re.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const PL=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:u,onClickConnectStart:c,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:p,nodesFocusable:y,edgesFocusable:b,edgesUpdatable:T,elevateNodesOnSelect:x,minZoom:N,maxZoom:k,nodeExtent:D,onNodesChange:z,onEdgesChange:Y,elementsSelectable:q,connectionMode:ee,snapGrid:$,snapToGrid:R,translateExtent:C,connectOnClick:O,defaultEdgeOptions:P,fitView:U,fitViewOptions:V,onNodesDelete:I,onEdgesDelete:L,onNodeDrag:K,onNodeDragStart:F,onNodeDragStop:Q,onSelectionDrag:se,onSelectionDragStart:te,onSelectionDragStop:A,noPanClassName:J,nodeOrigin:ae,rfId:B,autoPanOnConnect:ge,autoPanOnNodeDrag:Ne,onError:Ie,connectionRadius:je,isValidConnection:we,nodeDragThreshold:Me})=>{const{setNodes:He,setEdges:Je,setDefaultNodesAndEdges:an,setMinZoom:Jt,setMaxZoom:on,setTranslateExtent:Dt,setNodeExtent:Rn,reset:Qe}=gn(ML,wr),qe=ar();return re.useEffect(()=>{const cn=r?.map(Un=>({...Un,...P}));return an(n,cn),()=>{Qe()}},[]),ft("defaultEdgeOptions",P,qe.setState),ft("connectionMode",ee,qe.setState),ft("onConnect",s,qe.setState),ft("onConnectStart",o,qe.setState),ft("onConnectEnd",u,qe.setState),ft("onClickConnectStart",c,qe.setState),ft("onClickConnectEnd",d,qe.setState),ft("nodesDraggable",f,qe.setState),ft("nodesConnectable",p,qe.setState),ft("nodesFocusable",y,qe.setState),ft("edgesFocusable",b,qe.setState),ft("edgesUpdatable",T,qe.setState),ft("elementsSelectable",q,qe.setState),ft("elevateNodesOnSelect",x,qe.setState),ft("snapToGrid",R,qe.setState),ft("snapGrid",$,qe.setState),ft("onNodesChange",z,qe.setState),ft("onEdgesChange",Y,qe.setState),ft("connectOnClick",O,qe.setState),ft("fitViewOnInit",U,qe.setState),ft("fitViewOnInitOptions",V,qe.setState),ft("onNodesDelete",I,qe.setState),ft("onEdgesDelete",L,qe.setState),ft("onNodeDrag",K,qe.setState),ft("onNodeDragStart",F,qe.setState),ft("onNodeDragStop",Q,qe.setState),ft("onSelectionDrag",se,qe.setState),ft("onSelectionDragStart",te,qe.setState),ft("onSelectionDragStop",A,qe.setState),ft("noPanClassName",J,qe.setState),ft("nodeOrigin",ae,qe.setState),ft("rfId",B,qe.setState),ft("autoPanOnConnect",ge,qe.setState),ft("autoPanOnNodeDrag",Ne,qe.setState),ft("onError",Ie,qe.setState),ft("connectionRadius",je,qe.setState),ft("isValidConnection",we,qe.setState),ft("nodeDragThreshold",Me,qe.setState),el(t,He),el(e,Je),el(N,Jt),el(k,on),el(C,Dt),el(D,Rn),null},R2={display:"none"},BL={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ww="react-flow__node-desc",Zw="react-flow__edge-desc",UL="react-flow__aria-live",VL=t=>t.ariaLiveMessage;function HL({rfId:t}){const e=gn(VL);return _e.createElement("div",{id:`${UL}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:BL},e)}function FL({rfId:t,disableKeyboardA11y:e}){return _e.createElement(_e.Fragment,null,_e.createElement("div",{id:`${Ww}-${t}`,style:R2},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),_e.createElement("div",{id:`${Zw}-${t}`,style:R2},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&_e.createElement(HL,{rfId:t}))}var Fh=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=re.useState(!1),s=re.useRef(!1),o=re.useRef(new Set([])),[u,c]=re.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),p=f.reduce((y,b)=>y.concat(...b),[]);return[f,p]}return[[],[]]},[t]);return re.useEffect(()=>{const d=typeof document<"u"?document:null,f=e?.target||d;if(t!==null){const p=T=>{if(s.current=T.ctrlKey||T.metaKey||T.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&$y(T))return!1;const N=O2(T.code,c);o.current.add(T[N]),D2(u,o.current,!1)&&(T.preventDefault(),r(!0))},y=T=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&$y(T))return!1;const N=O2(T.code,c);D2(u,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(T[N]),T.key==="Meta"&&o.current.clear(),s.current=!1},b=()=>{o.current.clear(),r(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",y),window.addEventListener("blur",b),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",y),window.removeEventListener("blur",b)}}},[t,r]),n};function D2(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function O2(t,e){return e.includes(t)?"code":"key"}function Jw(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),u=yl(o,r);return Jw(o,e,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(o[vn]?.z??0)>(n.z??0)?o[vn]?.z??0:n.z??0},r)}function eI(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:u,z:c}=Jw(r,t,{...r.position,z:r[vn]?.z??0},e);r.positionAbsolute={x:o,y:u},r[vn].z=c,n?.[r.id]&&(r[vn].isParent=!0)}})}function Jg(t,e,n,r){const s=new Map,o={},u=r?1e3:0;return t.forEach(c=>{const d=(zi(c.zIndex)?c.zIndex:0)+(c.selected?u:0),f=e.get(c.id),p={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},y=c.parentNode||c.parentId;y&&(o[y]=!0);const b=f?.type&&f?.type!==c.type;Object.defineProperty(p,vn,{enumerable:!1,value:{handleBounds:b?void 0:f?.[vn]?.handleBounds,z:d}}),s.set(c.id,p)}),eI(s,n,o),s}function tI(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:u,d3Zoom:c,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:p,nodeOrigin:y}=t(),b=e.initial&&!f&&p;if(c&&d&&(b||!e.initial)){const x=n().filter(k=>{const D=e.includeHiddenNodes?k.width&&k.height:!k.hidden;return e.nodes?.length?D&&e.nodes.some(z=>z.id===k.id):D}),N=x.every(k=>k.width&&k.height);if(x.length>0&&N){const k=iE(x,y),{x:D,y:z,zoom:Y}=Hw(k,r,s,e.minZoom??o,e.maxZoom??u,e.padding??.1),q=no.translate(D,z).scale(Y);return typeof e.duration=="number"&&e.duration>0?c.transform(Ko(d,e.duration),q):c.transform(d,q),!0}}return!1}function zL(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[vn]:r[vn],selected:n.selected})}),new Map(e)}function jL(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Gf({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:u,onEdgesChange:c,hasDefaultNodes:d,hasDefaultEdges:f}=n();t?.length&&(d&&r({nodeInternals:zL(t,s)}),u?.(t)),e?.length&&(f&&r({edges:jL(e,o)}),c?.(e))}const tl=()=>{},qL={zoomIn:tl,zoomOut:tl,zoomTo:tl,getZoom:()=>1,setViewport:tl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:tl,fitBounds:tl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},YL=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),GL=()=>{const t=ar(),{d3Zoom:e,d3Selection:n}=gn(YL,wr);return re.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Ko(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(Ko(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(Ko(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[u,c,d]=t.getState().transform,f=no.translate(s.x??u,s.y??c).scale(s.zoom??d);e.transform(Ko(n,o?.duration),f)},getViewport:()=>{const[s,o,u]=t.getState().transform;return{x:s,y:o,zoom:u}},fitView:s=>tI(t.getState,s),setCenter:(s,o,u)=>{const{width:c,height:d,maxZoom:f}=t.getState(),p=typeof u?.zoom<"u"?u.zoom:f,y=c/2-s*p,b=d/2-o*p,T=no.translate(y,b).scale(p);e.transform(Ko(n,u?.duration),T)},fitBounds:(s,o)=>{const{width:u,height:c,minZoom:d,maxZoom:f}=t.getState(),{x:p,y,zoom:b}=Hw(s,u,c,d,f,o?.padding??.1),T=no.translate(p,y).scale(b);e.transform(Ko(n,o?.duration),T)},project:s=>{const{transform:o,snapToGrid:u,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Qy(s,o,u,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:u,snapGrid:c,domNode:d}=t.getState();if(!d)return s;const{x:f,y:p}=d.getBoundingClientRect(),y={x:s.x-f,y:s.y-p};return Qy(y,o,u,c)},flowToScreenPosition:s=>{const{transform:o,domNode:u}=t.getState();if(!u)return s;const{x:c,y:d}=u.getBoundingClientRect(),f=Bw(s,o);return{x:f.x+c,y:f.y+d}},viewportInitialized:!0}:qL,[e,n])};function sd(){const t=GL(),e=ar(),n=re.useCallback(()=>e.getState().getNodes().map(N=>({...N})),[]),r=re.useCallback(N=>e.getState().nodeInternals.get(N),[]),s=re.useCallback(()=>{const{edges:N=[]}=e.getState();return N.map(k=>({...k}))},[]),o=re.useCallback(N=>{const{edges:k=[]}=e.getState();return k.find(D=>D.id===N)},[]),u=re.useCallback(N=>{const{getNodes:k,setNodes:D,hasDefaultNodes:z,onNodesChange:Y}=e.getState(),q=k(),ee=typeof N=="function"?N(q):N;if(z)D(ee);else if(Y){const $=ee.length===0?q.map(R=>({type:"remove",id:R.id})):ee.map(R=>({item:R,type:"reset"}));Y($)}},[]),c=re.useCallback(N=>{const{edges:k=[],setEdges:D,hasDefaultEdges:z,onEdgesChange:Y}=e.getState(),q=typeof N=="function"?N(k):N;if(z)D(q);else if(Y){const ee=q.length===0?k.map($=>({type:"remove",id:$.id})):q.map($=>({item:$,type:"reset"}));Y(ee)}},[]),d=re.useCallback(N=>{const k=Array.isArray(N)?N:[N],{getNodes:D,setNodes:z,hasDefaultNodes:Y,onNodesChange:q}=e.getState();if(Y){const $=[...D(),...k];z($)}else if(q){const ee=k.map($=>({item:$,type:"add"}));q(ee)}},[]),f=re.useCallback(N=>{const k=Array.isArray(N)?N:[N],{edges:D=[],setEdges:z,hasDefaultEdges:Y,onEdgesChange:q}=e.getState();if(Y)z([...D,...k]);else if(q){const ee=k.map($=>({item:$,type:"add"}));q(ee)}},[]),p=re.useCallback(()=>{const{getNodes:N,edges:k=[],transform:D}=e.getState(),[z,Y,q]=D;return{nodes:N().map(ee=>({...ee})),edges:k.map(ee=>({...ee})),viewport:{x:z,y:Y,zoom:q}}},[]),y=re.useCallback(({nodes:N,edges:k})=>{const{nodeInternals:D,getNodes:z,edges:Y,hasDefaultNodes:q,hasDefaultEdges:ee,onNodesDelete:$,onEdgesDelete:R,onNodesChange:C,onEdgesChange:O}=e.getState(),P=(N||[]).map(K=>K.id),U=(k||[]).map(K=>K.id),V=z().reduce((K,F)=>{const Q=F.parentNode||F.parentId,se=!P.includes(F.id)&&Q&&K.find(A=>A.id===Q);return(typeof F.deletable=="boolean"?F.deletable:!0)&&(P.includes(F.id)||se)&&K.push(F),K},[]),I=Y.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),L=I.filter(K=>U.includes(K.id));if(V||L){const K=Vw(V,I),F=[...L,...K],Q=F.reduce((se,te)=>(se.includes(te.id)||se.push(te.id),se),[]);if((ee||q)&&(ee&&e.setState({edges:Y.filter(se=>!Q.includes(se.id))}),q&&(V.forEach(se=>{D.delete(se.id)}),e.setState({nodeInternals:new Map(D)}))),Q.length>0&&(R?.(F),O&&O(Q.map(se=>({id:se,type:"remove"})))),V.length>0&&($?.(V),C)){const se=V.map(te=>({id:te.id,type:"remove"}));C(se)}}},[]),b=re.useCallback(N=>{const k=dL(N),D=k?null:e.getState().nodeInternals.get(N.id);return!k&&!D?[null,null,k]:[k?N:A2(D),D,k]},[]),T=re.useCallback((N,k=!0,D)=>{const[z,Y,q]=b(N);return z?(D||e.getState().getNodes()).filter(ee=>{if(!q&&(ee.id===Y.id||!ee.positionAbsolute))return!1;const $=A2(ee),R=Gy($,z);return k&&R>0||R>=z.width*z.height}):[]},[]),x=re.useCallback((N,k,D=!0)=>{const[z]=b(N);if(!z)return!1;const Y=Gy(z,k);return D&&Y>0||Y>=z.width*z.height},[]);return re.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:u,setEdges:c,addNodes:d,addEdges:f,toObject:p,deleteElements:y,getIntersectingNodes:T,isNodeIntersecting:x}),[t,n,r,s,o,u,c,d,f,p,y,T,x])}const $L={actInsideInputWithModifier:!1};var KL=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ar(),{deleteElements:r}=sd(),s=Fh(t,$L),o=Fh(e);re.useEffect(()=>{if(s){const{edges:u,getNodes:c}=n.getState(),d=c().filter(p=>p.selected),f=u.filter(p=>p.selected);r({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),re.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function XL(t){const e=ar();re.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=W1(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",da.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const oE={position:"absolute",width:"100%",height:"100%",top:0,left:0},QL=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,$f=t=>({x:t.x,y:t.y,zoom:t.k}),nl=(t,e)=>t.target.closest(`.${e}`),k2=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),L2=t=>{const e=t.ctrlKey&&O0()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},WL=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),ZL=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:u=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=Wo.Free,zoomOnDoubleClick:f=!0,elementsSelectable:p,panOnDrag:y=!0,defaultViewport:b,translateExtent:T,minZoom:x,maxZoom:N,zoomActivationKeyCode:k,preventScrolling:D=!0,children:z,noWheelClassName:Y,noPanClassName:q})=>{const ee=re.useRef(),$=ar(),R=re.useRef(!1),C=re.useRef(!1),O=re.useRef(null),P=re.useRef({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:V,d3ZoomHandler:I,userSelectionActive:L}=gn(WL,wr),K=Fh(k),F=re.useRef(0),Q=re.useRef(!1),se=re.useRef();return XL(O),re.useEffect(()=>{if(O.current){const te=O.current.getBoundingClientRect(),A=iL().scaleExtent([x,N]).translateExtent(T),J=Ji(O.current).call(A),ae=no.translate(b.x,b.y).scale(Nl(b.zoom,x,N)),B=[[0,0],[te.width,te.height]],ge=A.constrain()(ae,B,T);A.transform(J,ge),A.wheelDelta(L2),$.setState({d3Zoom:A,d3Selection:J,d3ZoomHandler:J.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:O.current.closest(".react-flow")})}},[]),re.useEffect(()=>{V&&U&&(u&&!K&&!L?V.on("wheel.zoom",te=>{if(nl(te,Y))return!1;te.preventDefault(),te.stopImmediatePropagation();const A=V.property("__zoom").k||1;if(te.ctrlKey&&o){const we=As(te),Me=L2(te),He=A*Math.pow(2,Me);U.scaleTo(V,He,we,te);return}const J=te.deltaMode===1?20:1;let ae=d===Wo.Vertical?0:te.deltaX*J,B=d===Wo.Horizontal?0:te.deltaY*J;!O0()&&te.shiftKey&&d!==Wo.Vertical&&(ae=te.deltaY*J,B=0),U.translateBy(V,-(ae/A)*c,-(B/A)*c,{internal:!0});const ge=$f(V.property("__zoom")),{onViewportChangeStart:Ne,onViewportChange:Ie,onViewportChangeEnd:je}=$.getState();clearTimeout(se.current),Q.current||(Q.current=!0,e?.(te,ge),Ne?.(ge)),Q.current&&(t?.(te,ge),Ie?.(ge),se.current=setTimeout(()=>{n?.(te,ge),je?.(ge),Q.current=!1},150))},{passive:!1}):typeof I<"u"&&V.on("wheel.zoom",function(te,A){if(!D&&te.type==="wheel"&&!te.ctrlKey||nl(te,Y))return null;te.preventDefault(),I.call(this,te,A)},{passive:!1}))},[L,u,d,V,U,I,K,o,D,Y,e,t,n]),re.useEffect(()=>{U&&U.on("start",te=>{if(!te.sourceEvent||te.sourceEvent.internal)return null;F.current=te.sourceEvent?.button;const{onViewportChangeStart:A}=$.getState(),J=$f(te.transform);R.current=!0,P.current=J,te.sourceEvent?.type==="mousedown"&&$.setState({paneDragging:!0}),A?.(J),e?.(te.sourceEvent,J)})},[U,e]),re.useEffect(()=>{U&&(L&&!R.current?U.on("zoom",null):L||U.on("zoom",te=>{const{onViewportChange:A}=$.getState();if($.setState({transform:[te.transform.x,te.transform.y,te.transform.k]}),C.current=!!(r&&k2(y,F.current??0)),(t||A)&&!te.sourceEvent?.internal){const J=$f(te.transform);A?.(J),t?.(te.sourceEvent,J)}}))},[L,U,t,y,r]),re.useEffect(()=>{U&&U.on("end",te=>{if(!te.sourceEvent||te.sourceEvent.internal)return null;const{onViewportChangeEnd:A}=$.getState();if(R.current=!1,$.setState({paneDragging:!1}),r&&k2(y,F.current??0)&&!C.current&&r(te.sourceEvent),C.current=!1,(n||A)&&QL(P.current,te.transform)){const J=$f(te.transform);P.current=J,clearTimeout(ee.current),ee.current=setTimeout(()=>{A?.(J),n?.(te.sourceEvent,J)},u?150:0)}})},[U,u,y,n,r]),re.useEffect(()=>{U&&U.filter(te=>{const A=K||s,J=o&&te.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&te.button===1&&te.type==="mousedown"&&(nl(te,"react-flow__node")||nl(te,"react-flow__edge")))return!0;if(!y&&!A&&!u&&!f&&!o||L||!f&&te.type==="dblclick"||nl(te,Y)&&te.type==="wheel"||nl(te,q)&&(te.type!=="wheel"||u&&te.type==="wheel"&&!K)||!o&&te.ctrlKey&&te.type==="wheel"||!A&&!u&&!J&&te.type==="wheel"||!y&&(te.type==="mousedown"||te.type==="touchstart")||Array.isArray(y)&&!y.includes(te.button)&&te.type==="mousedown")return!1;const ae=Array.isArray(y)&&y.includes(te.button)||!te.button||te.button<=1;return(!te.ctrlKey||te.type==="wheel")&&ae})},[L,U,s,o,u,f,y,p,K]),_e.createElement("div",{className:"react-flow__renderer",ref:O,style:oE},z)},JL=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function e5(){const{userSelectionActive:t,userSelectionRect:e}=gn(JL,wr);return t&&e?_e.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function M2(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const u=Math.abs(e.position.x);r.position.x=r.position.x-u,r.style.width+=u,e.position.x=0}if(e.position.y<0){const u=Math.abs(e.position.y);r.position.y=r.position.y-u,r.style.height+=u,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function nI(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const u={...s};for(const c of o)if(c)switch(c.type){case"select":{u.selected=c.selected;break}case"position":{typeof c.position<"u"&&(u.position=c.position),typeof c.positionAbsolute<"u"&&(u.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(u.dragging=c.dragging),u.expandParent&&M2(r,u);break}case"dimensions":{typeof c.dimensions<"u"&&(u.width=c.dimensions.width,u.height=c.dimensions.height),typeof c.updateStyle<"u"&&(u.style={...u.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(u.resizing=c.resizing),u.expandParent&&M2(r,u);break}case"remove":return r}return r.push(u),r},n)}function rI(t,e){return nI(t,e)}function t5(t,e){return nI(t,e)}const $a=(t,e)=>({id:t,type:"select",selected:e});function dl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push($a(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push($a(r.id,!1))),n},[])}const ey=(t,e)=>n=>{n.target===e.current&&t?.(n)},n5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),iI=re.memo(({isSelecting:t,selectionMode:e=Vh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:p,children:y})=>{const b=re.useRef(null),T=ar(),x=re.useRef(0),N=re.useRef(0),k=re.useRef(),{userSelectionActive:D,elementsSelectable:z,dragging:Y}=gn(n5,wr),q=()=>{T.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,N.current=0},ee=I=>{o?.(I),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},$=I=>{if(Array.isArray(n)&&n?.includes(2)){I.preventDefault();return}u?.(I)},R=c?I=>c(I):void 0,C=I=>{const{resetSelectedElements:L,domNode:K}=T.getState();if(k.current=K?.getBoundingClientRect(),!z||!t||I.button!==0||I.target!==b.current||!k.current)return;const{x:F,y:Q}=ro(I,k.current);L(),T.setState({userSelectionRect:{width:0,height:0,startX:F,startY:Q,x:F,y:Q}}),r?.(I)},O=I=>{const{userSelectionRect:L,nodeInternals:K,edges:F,transform:Q,onNodesChange:se,onEdgesChange:te,nodeOrigin:A,getNodes:J}=T.getState();if(!t||!k.current||!L)return;T.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=ro(I,k.current),B=L.startX??0,ge=L.startY??0,Ne={...L,x:ae.x<B?ae.x:B,y:ae.y<ge?ae.y:ge,width:Math.abs(ae.x-B),height:Math.abs(ae.y-ge)},Ie=J(),je=Uw(K,Ne,Q,e===Vh.Partial,!0,A),we=Vw(je,F).map(He=>He.id),Me=je.map(He=>He.id);if(x.current!==Me.length){x.current=Me.length;const He=dl(Ie,Me);He.length&&se?.(He)}if(N.current!==we.length){N.current=we.length;const He=dl(F,we);He.length&&te?.(He)}T.setState({userSelectionRect:Ne})},P=I=>{if(I.button!==0)return;const{userSelectionRect:L}=T.getState();!D&&L&&I.target===b.current&&ee?.(I),T.setState({nodesSelectionActive:x.current>0}),q(),s?.(I)},U=I=>{D&&(T.setState({nodesSelectionActive:x.current>0}),s?.(I)),q()},V=z&&(t||D);return _e.createElement("div",{className:zr(["react-flow__pane",{dragging:Y,selection:t}]),onClick:V?void 0:ey(ee,b),onContextMenu:ey($,b),onWheel:ey(R,b),onMouseEnter:V?void 0:d,onMouseDown:V?C:void 0,onMouseMove:V?O:f,onMouseUp:V?P:void 0,onMouseLeave:V?U:p,ref:b,style:oE},y,_e.createElement(e5,null))});iI.displayName="Pane";function sI(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:sI(r,e):!1}function P2(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function r5(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!sI(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function i5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function aI(t,e,n,r,s=[0,0],o){const u=i5(t,t.extent||r);let c=u;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const y=n.get(d),{x:b,y:T}=yl(y,s).positionAbsolute;c=y&&zi(b)&&zi(T)&&zi(y.width)&&zi(y.height)?[[b+t.width*s[0],T+t.height*s[1]],[b+y.width-t.width+t.width*s[0],T+y.height-t.height+t.height*s[1]]]:c}else o?.("005",da.error005()),c=u;else if(t.extent&&d&&t.extent!=="parent"){const y=n.get(d),{x:b,y:T}=yl(y,s).positionAbsolute;c=[[t.extent[0][0]+b,t.extent[0][1]+T],[t.extent[1][0]+b,t.extent[1][1]+T]]}let f={x:0,y:0};if(d){const y=n.get(d);f=yl(y,s).positionAbsolute}const p=c&&c!=="parent"?Z1(e,c):e;return{position:{x:p.x-f.x,y:p.y-f.y},positionAbsolute:p}}function ty({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const B2=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),u=e.getBoundingClientRect(),c={x:u.width*r[0],y:u.height*r[1]};return o.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-u.left-c.x)/n,y:(f.top-u.top-c.y)/n,...W1(d)}})};function eh(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function Zy({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:u,nodeInternals:c,onError:d}=e.getState(),f=c.get(t);if(!f){d?.("012",da.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&u)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function s5(){const t=ar();return re.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),u=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,d={x:(u-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:o?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function ny(t){return(e,n,r)=>t?.(e,r)}function oI({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:u}){const c=ar(),[d,f]=re.useState(!1),p=re.useRef([]),y=re.useRef({x:null,y:null}),b=re.useRef(0),T=re.useRef(null),x=re.useRef({x:0,y:0}),N=re.useRef(null),k=re.useRef(!1),D=re.useRef(!1),z=re.useRef(!1),Y=s5();return re.useEffect(()=>{if(t?.current){const q=Ji(t.current),ee=({x:C,y:O})=>{const{nodeInternals:P,onNodeDrag:U,onSelectionDrag:V,updateNodePositions:I,nodeExtent:L,snapGrid:K,snapToGrid:F,nodeOrigin:Q,onError:se}=c.getState();y.current={x:C,y:O};let te=!1,A={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&L){const ae=iE(p.current,Q);A=J1(ae)}if(p.current=p.current.map(ae=>{const B={x:C-ae.distance.x,y:O-ae.distance.y};F&&(B.x=K[0]*Math.round(B.x/K[0]),B.y=K[1]*Math.round(B.y/K[1]));const ge=[[L[0][0],L[0][1]],[L[1][0],L[1][1]]];p.current.length>1&&L&&!ae.extent&&(ge[0][0]=ae.positionAbsolute.x-A.x+L[0][0],ge[1][0]=ae.positionAbsolute.x+(ae.width??0)-A.x2+L[1][0],ge[0][1]=ae.positionAbsolute.y-A.y+L[0][1],ge[1][1]=ae.positionAbsolute.y+(ae.height??0)-A.y2+L[1][1]);const Ne=aI(ae,B,P,ge,Q,se);return te=te||ae.position.x!==Ne.position.x||ae.position.y!==Ne.position.y,ae.position=Ne.position,ae.positionAbsolute=Ne.positionAbsolute,ae}),!te)return;I(p.current,!0,!0),f(!0);const J=s?U:ny(V);if(J&&N.current){const[ae,B]=ty({nodeId:s,dragItems:p.current,nodeInternals:P});J(N.current,ae,B)}},$=()=>{if(!T.current)return;const[C,O]=Nw(x.current,T.current);if(C!==0||O!==0){const{transform:P,panBy:U}=c.getState();y.current.x=(y.current.x??0)-C/P[2],y.current.y=(y.current.y??0)-O/P[2],U({x:C,y:O})&&ee(y.current)}b.current=requestAnimationFrame($)},R=C=>{const{nodeInternals:O,multiSelectionActive:P,nodesDraggable:U,unselectNodesAndEdges:V,onNodeDragStart:I,onSelectionDragStart:L}=c.getState();D.current=!0;const K=s?I:ny(L);(!u||!o)&&!P&&s&&(O.get(s)?.selected||V()),s&&o&&u&&Zy({id:s,store:c,nodeRef:t});const F=Y(C);if(y.current=F,p.current=r5(O,U,F,s),K&&p.current){const[Q,se]=ty({nodeId:s,dragItems:p.current,nodeInternals:O});K(C.sourceEvent,Q,se)}};if(e)q.on(".drag",null);else{const C=mO().on("start",O=>{const{domNode:P,nodeDragThreshold:U}=c.getState();U===0&&R(O),z.current=!1;const V=Y(O);y.current=V,T.current=P?.getBoundingClientRect()||null,x.current=ro(O.sourceEvent,T.current)}).on("drag",O=>{const P=Y(O),{autoPanOnNodeDrag:U,nodeDragThreshold:V}=c.getState();if(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1&&(z.current=!0),!z.current){if(!k.current&&D.current&&U&&(k.current=!0,$()),!D.current){const I=P.xSnapped-(y?.current?.x??0),L=P.ySnapped-(y?.current?.y??0);Math.sqrt(I*I+L*L)>V&&R(O)}(y.current.x!==P.xSnapped||y.current.y!==P.ySnapped)&&p.current&&D.current&&(N.current=O.sourceEvent,x.current=ro(O.sourceEvent,T.current),ee(P))}}).on("end",O=>{if(!(!D.current||z.current)&&(f(!1),k.current=!1,D.current=!1,cancelAnimationFrame(b.current),p.current)){const{updateNodePositions:P,nodeInternals:U,onNodeDragStop:V,onSelectionDragStop:I}=c.getState(),L=s?V:ny(I);if(P(p.current,!1,!1),L){const[K,F]=ty({nodeId:s,dragItems:p.current,nodeInternals:U});L(O.sourceEvent,K,F)}}}).filter(O=>{const P=O.target;return!O.button&&(!n||!P2(P,`.${n}`,t))&&(!r||P2(P,r,t))});return q.call(C),()=>{q.on(".drag",null)}}}},[t,e,n,r,o,c,s,u,Y]),d}function uI(){const t=ar();return re.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:u,snapToGrid:c,snapGrid:d,onError:f,nodesDraggable:p}=t.getState(),y=u().filter(z=>z.selected&&(z.draggable||p&&typeof z.draggable>"u")),b=c?d[0]:5,T=c?d[1]:5,x=n.isShiftPressed?4:1,N=n.x*b*x,k=n.y*T*x,D=y.map(z=>{if(z.positionAbsolute){const Y={x:z.positionAbsolute.x+N,y:z.positionAbsolute.y+k};c&&(Y.x=d[0]*Math.round(Y.x/d[0]),Y.y=d[1]*Math.round(Y.y/d[1]));const{positionAbsolute:q,position:ee}=aI(z,Y,r,s,void 0,f);z.position=ee,z.positionAbsolute=q}return z});o(D,!0,!1)},[])}const El={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var th=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:u,xPosOrigin:c,yPosOrigin:d,selected:f,onClick:p,onMouseEnter:y,onMouseMove:b,onMouseLeave:T,onContextMenu:x,onDoubleClick:N,style:k,className:D,isDraggable:z,isSelectable:Y,isConnectable:q,isFocusable:ee,selectNodesOnDrag:$,sourcePosition:R,targetPosition:C,hidden:O,resizeObserver:P,dragHandle:U,zIndex:V,isParent:I,noDragClassName:L,noPanClassName:K,initialized:F,disableKeyboardA11y:Q,ariaLabel:se,rfId:te,hasHandleBounds:A})=>{const J=ar(),ae=re.useRef(null),B=re.useRef(null),ge=re.useRef(R),Ne=re.useRef(C),Ie=re.useRef(r),je=Y||z||p||y||b||T,we=uI(),Me=eh(n,J.getState,y),He=eh(n,J.getState,b),Je=eh(n,J.getState,T),an=eh(n,J.getState,x),Jt=eh(n,J.getState,N),on=Qe=>{const{nodeDragThreshold:qe}=J.getState();if(Y&&(!$||!z||qe>0)&&Zy({id:n,store:J,nodeRef:ae}),p){const cn=J.getState().nodeInternals.get(n);cn&&p(Qe,{...cn})}},Dt=Qe=>{if(!$y(Qe)&&!Q)if(Dw.includes(Qe.key)&&Y){const qe=Qe.key==="Escape";Zy({id:n,store:J,unselect:qe,nodeRef:ae})}else z&&f&&Object.prototype.hasOwnProperty.call(El,Qe.key)&&(J.setState({ariaLiveMessage:`Moved selected node ${Qe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~u}`}),we({x:El[Qe.key].x,y:El[Qe.key].y,isShiftPressed:Qe.shiftKey}))};re.useEffect(()=>()=>{B.current&&(P?.unobserve(B.current),B.current=null)},[]),re.useEffect(()=>{if(ae.current&&!O){const Qe=ae.current;(!F||!A||B.current!==Qe)&&(B.current&&P?.unobserve(B.current),P?.observe(Qe),B.current=Qe)}},[O,F,A]),re.useEffect(()=>{const Qe=Ie.current!==r,qe=ge.current!==R,cn=Ne.current!==C;ae.current&&(Qe||qe||cn)&&(Qe&&(Ie.current=r),qe&&(ge.current=R),cn&&(Ne.current=C),J.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,r,R,C]);const Rn=oI({nodeRef:ae,disabled:O||!z,noDragClassName:L,handleSelector:U,nodeId:n,isSelectable:Y,selectNodesOnDrag:$});return O?null:_e.createElement("div",{className:zr(["react-flow__node",`react-flow__node-${r}`,{[K]:z},D,{selected:f,selectable:Y,parent:I,dragging:Rn}]),ref:ae,style:{zIndex:V,transform:`translate(${c}px,${d}px)`,pointerEvents:je?"all":"none",visibility:F?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Me,onMouseMove:He,onMouseLeave:Je,onContextMenu:an,onClick:on,onDoubleClick:Jt,onKeyDown:ee?Dt:void 0,tabIndex:ee?0:void 0,role:ee?"button":void 0,"aria-describedby":Q?void 0:`${Ww}-${te}`,"aria-label":se},_e.createElement(_L,{value:n},_e.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:u,selected:f,isConnectable:q,sourcePosition:R,targetPosition:C,dragging:Rn,dragHandle:U,zIndex:V})))};return e.displayName="NodeWrapper",re.memo(e)};const a5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...iE(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function o5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=ar(),{width:s,height:o,x:u,y:c,transformString:d,userSelectionActive:f}=gn(a5,wr),p=uI(),y=re.useRef(null);if(re.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),oI({nodeRef:y}),f||!s||!o)return null;const b=t?x=>{const N=r.getState().getNodes().filter(k=>k.selected);t(x,N)}:void 0,T=x=>{Object.prototype.hasOwnProperty.call(El,x.key)&&p({x:El[x.key].x,y:El[x.key].y,isShiftPressed:x.shiftKey})};return _e.createElement("div",{className:zr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d}},_e.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:T,style:{width:s,height:o,top:c,left:u}}))}var u5=re.memo(o5);const l5=t=>t.nodesSelectionActive,lI=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,deleteKeyCode:c,onMove:d,onMoveStart:f,onMoveEnd:p,selectionKeyCode:y,selectionOnDrag:b,selectionMode:T,onSelectionStart:x,onSelectionEnd:N,multiSelectionKeyCode:k,panActivationKeyCode:D,zoomActivationKeyCode:z,elementsSelectable:Y,zoomOnScroll:q,zoomOnPinch:ee,panOnScroll:$,panOnScrollSpeed:R,panOnScrollMode:C,zoomOnDoubleClick:O,panOnDrag:P,defaultViewport:U,translateExtent:V,minZoom:I,maxZoom:L,preventScrolling:K,onSelectionContextMenu:F,noWheelClassName:Q,noPanClassName:se,disableKeyboardA11y:te})=>{const A=gn(l5),J=Fh(y),ae=Fh(D),B=ae||P,ge=ae||$,Ne=J||b&&B!==!0;return KL({deleteKeyCode:c,multiSelectionKeyCode:k}),_e.createElement(ZL,{onMove:d,onMoveStart:f,onMoveEnd:p,onPaneContextMenu:o,elementsSelectable:Y,zoomOnScroll:q,zoomOnPinch:ee,panOnScroll:ge,panOnScrollSpeed:R,panOnScrollMode:C,zoomOnDoubleClick:O,panOnDrag:!J&&B,defaultViewport:U,translateExtent:V,minZoom:I,maxZoom:L,zoomActivationKeyCode:z,preventScrolling:K,noWheelClassName:Q,noPanClassName:se},_e.createElement(iI,{onSelectionStart:x,onSelectionEnd:N,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,panOnDrag:B,isSelecting:!!Ne,selectionMode:T},t,A&&_e.createElement(u5,{onSelectionContextMenu:F,noPanClassName:se,disableKeyboardA11y:te})))};lI.displayName="FlowRenderer";var c5=re.memo(lI);function h5(t){return gn(re.useCallback(n=>t?Uw(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function d5(t){const e={input:th(t.input||$w),default:th(t.default||Wy),output:th(t.output||Xw),group:th(t.group||aE)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=th(t[o]||Wy),s),n);return{...e,...r}}const f5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},m5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),cI=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:u}=gn(m5,wr),c=h5(t.onlyRenderVisibleElements),d=re.useRef(),f=re.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(y=>{const b=y.map(T=>({id:T.target.getAttribute("data-id"),nodeElement:T.target,forceUpdate:!0}));o(b)});return d.current=p,p},[]);return re.useEffect(()=>()=>{d?.current?.disconnect()},[]),_e.createElement("div",{className:"react-flow__nodes",style:oE},c.map(p=>{let y=p.type||"default";t.nodeTypes[y]||(u?.("003",da.error003(y)),y="default");const b=t.nodeTypes[y]||t.nodeTypes.default,T=!!(p.draggable||e&&typeof p.draggable>"u"),x=!!(p.selectable||s&&typeof p.selectable>"u"),N=!!(p.connectable||n&&typeof p.connectable>"u"),k=!!(p.focusable||r&&typeof p.focusable>"u"),D=t.nodeExtent?Z1(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,z=D?.x??0,Y=D?.y??0,q=f5({x:z,y:Y,width:p.width??0,height:p.height??0,origin:t.nodeOrigin});return _e.createElement(b,{key:p.id,id:p.id,className:p.className,style:p.style,type:y,data:p.data,sourcePosition:p.sourcePosition||ze.Bottom,targetPosition:p.targetPosition||ze.Top,hidden:p.hidden,xPos:z,yPos:Y,xPosOrigin:q.x,yPosOrigin:q.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:T,isSelectable:x,isConnectable:N,isFocusable:k,resizeObserver:f,dragHandle:p.dragHandle,zIndex:p[vn]?.z??0,isParent:!!p[vn]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[vn]?.handleBounds})}))};cI.displayName="NodeRenderer";var p5=re.memo(cI);const g5=(t,e,n)=>n===ze.Left?t-e:n===ze.Right?t+e:t,y5=(t,e,n)=>n===ze.Top?t-e:n===ze.Bottom?t+e:t,U2="react-flow__edgeupdater",V2=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:u,type:c})=>_e.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:u,className:zr([U2,`${U2}-${c}`]),cx:g5(e,r,t),cy:y5(n,r,t),r,stroke:"transparent",fill:"transparent"}),E5=()=>!0;var rl=t=>{const e=({id:n,className:r,type:s,data:o,onClick:u,onEdgeDoubleClick:c,selected:d,animated:f,label:p,labelStyle:y,labelShowBg:b,labelBgStyle:T,labelBgPadding:x,labelBgBorderRadius:N,style:k,source:D,target:z,sourceX:Y,sourceY:q,targetX:ee,targetY:$,sourcePosition:R,targetPosition:C,elementsSelectable:O,hidden:P,sourceHandleId:U,targetHandleId:V,onContextMenu:I,onMouseEnter:L,onMouseMove:K,onMouseLeave:F,reconnectRadius:Q,onReconnect:se,onReconnectStart:te,onReconnectEnd:A,markerEnd:J,markerStart:ae,rfId:B,ariaLabel:ge,isFocusable:Ne,isReconnectable:Ie,pathOptions:je,interactionWidth:we,disableKeyboardA11y:Me})=>{const He=re.useRef(null),[Je,an]=re.useState(!1),[Jt,on]=re.useState(!1),Dt=ar(),Rn=re.useMemo(()=>`url('#${Xy(ae,B)}')`,[ae,B]),Qe=re.useMemo(()=>`url('#${Xy(J,B)}')`,[J,B]);if(P)return null;const qe=Tt=>{const{edges:Ht,addSelectedEdges:Ft,unselectNodesAndEdges:zt,multiSelectionActive:vt}=Dt.getState(),lt=Ht.find(Wt=>Wt.id===n);lt&&(O&&(Dt.setState({nodesSelectionActive:!1}),lt.selected&&vt?(zt({nodes:[],edges:[lt]}),He.current?.blur()):Ft([n])),u&&u(Tt,lt))},cn=Jc(n,Dt.getState,c),Un=Jc(n,Dt.getState,I),Vn=Jc(n,Dt.getState,L),Kn=Jc(n,Dt.getState,K),Hn=Jc(n,Dt.getState,F),Sn=(Tt,Ht)=>{if(Tt.button!==0)return;const{edges:Ft,isValidConnection:zt}=Dt.getState(),vt=Ht?z:D,lt=(Ht?V:U)||null,Wt=Ht?"target":"source",Gt=zt||E5,Yi=Ht,_r=Ft.find(br=>br.id===n);on(!0),te?.(Tt,_r,Wt);const Fn=br=>{on(!1),A?.(br,_r,Wt)};jw({event:Tt,handleId:lt,nodeId:vt,onConnect:br=>se?.(_r,br),isTarget:Yi,getState:Dt.getState,setState:Dt.setState,isValidConnection:Gt,edgeUpdaterType:Wt,onReconnectEnd:Fn})},or=Tt=>Sn(Tt,!0),de=Tt=>Sn(Tt,!1),Te=()=>an(!0),Ve=()=>an(!1),Ye=!O&&!u,ut=Tt=>{if(!Me&&Dw.includes(Tt.key)&&O){const{unselectNodesAndEdges:Ht,addSelectedEdges:Ft,edges:zt}=Dt.getState();Tt.key==="Escape"?(He.current?.blur(),Ht({edges:[zt.find(lt=>lt.id===n)]})):Ft([n])}};return _e.createElement("g",{className:zr(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:d,animated:f,inactive:Ye,updating:Je}]),onClick:qe,onDoubleClick:cn,onContextMenu:Un,onMouseEnter:Vn,onMouseMove:Kn,onMouseLeave:Hn,onKeyDown:Ne?ut:void 0,tabIndex:Ne?0:void 0,role:Ne?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ge===null?void 0:ge||`Edge from ${D} to ${z}`,"aria-describedby":Ne?`${Zw}-${B}`:void 0,ref:He},!Jt&&_e.createElement(t,{id:n,source:D,target:z,selected:d,animated:f,label:p,labelStyle:y,labelShowBg:b,labelBgStyle:T,labelBgPadding:x,labelBgBorderRadius:N,data:o,style:k,sourceX:Y,sourceY:q,targetX:ee,targetY:$,sourcePosition:R,targetPosition:C,sourceHandleId:U,targetHandleId:V,markerStart:Rn,markerEnd:Qe,pathOptions:je,interactionWidth:we}),Ie&&_e.createElement(_e.Fragment,null,(Ie==="source"||Ie===!0)&&_e.createElement(V2,{position:R,centerX:Y,centerY:q,radius:Q,onMouseDown:or,onMouseEnter:Te,onMouseOut:Ve,type:"source"}),(Ie==="target"||Ie===!0)&&_e.createElement(V2,{position:C,centerX:ee,centerY:$,radius:Q,onMouseDown:de,onMouseEnter:Te,onMouseOut:Ve,type:"target"})))};return e.displayName="EdgeWrapper",re.memo(e)};function _5(t){const e={default:rl(t.default||k0),straight:rl(t.bezier||nE),step:rl(t.step||tE),smoothstep:rl(t.step||fm),simplebezier:rl(t.simplebezier||eE)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=rl(t[o]||k0),s),n);return{...e,...r}}function H2(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,u=n?.height||e.height;switch(t){case ze.Top:return{x:r+o/2,y:s};case ze.Right:return{x:r+o,y:s+u/2};case ze.Bottom:return{x:r+o/2,y:s+u};case ze.Left:return{x:r,y:s+u/2}}}function F2(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const b5=(t,e,n,r,s,o)=>{const u=H2(n,t,e),c=H2(o,r,s);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y}};function T5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:u,height:c,transform:d}){const f={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const p=J1({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:u/d[2],height:c/d[2]}),y=Math.max(0,Math.min(p.x2,f.x2)-Math.max(p.x,f.x)),b=Math.max(0,Math.min(p.y2,f.y2)-Math.max(p.y,f.y));return Math.ceil(y*b)>0}function z2(t){const e=t?.[vn]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const v5=[{level:0,isMaxLevel:!0,edges:[]}];function A5(t,e,n=!1){let r=-1;const s=t.reduce((u,c)=>{const d=zi(c.zIndex);let f=d?c.zIndex:0;if(n){const p=e.get(c.target),y=e.get(c.source),b=c.selected||p?.selected||y?.selected,T=Math.max(y?.[vn]?.z||0,p?.[vn]?.z||0,1e3);f=(d?c.zIndex:0)+(b?T:0)}return u[f]?u[f].push(c):u[f]=[c],r=f>r?f:r,u},{}),o=Object.entries(s).map(([u,c])=>{const d=+u;return{edges:c,level:d,isMaxLevel:d===r}});return o.length===0?v5:o}function S5(t,e,n){const r=gn(re.useCallback(s=>t?s.edges.filter(o=>{const u=e.get(o.source),c=e.get(o.target);return u?.width&&u?.height&&c?.width&&c?.height&&T5({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return A5(r,e,n)}const x5=({color:t="none",strokeWidth:e=1})=>_e.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),w5=({color:t="none",strokeWidth:e=1})=>_e.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),j2={[Hh.Arrow]:x5,[Hh.ArrowClosed]:w5};function I5(t){const e=ar();return re.useMemo(()=>Object.prototype.hasOwnProperty.call(j2,t)?j2[t]:(e.getState().onError?.("009",da.error009(t)),null),[t])}const C5=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{const d=I5(e);return d?_e.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},_e.createElement(d,{color:n,strokeWidth:u})):null},N5=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const c=Xy(u,e);r.includes(c)||(s.push({id:c,color:u.color||t,...u}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},hI=({defaultColor:t,rfId:e})=>{const n=gn(re.useCallback(N5({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,u)=>o.id!==s[u].id)));return _e.createElement("defs",null,n.map(r=>_e.createElement(C5,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};hI.displayName="MarkerDefinitions";var R5=re.memo(hI);const D5=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),dI=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:p,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:T,onReconnectEnd:x,reconnectRadius:N,children:k,disableKeyboardA11y:D})=>{const{edgesFocusable:z,edgesUpdatable:Y,elementsSelectable:q,width:ee,height:$,connectionMode:R,nodeInternals:C,onError:O}=gn(D5,wr),P=S5(e,C,n);return ee?_e.createElement(_e.Fragment,null,P.map(({level:U,edges:V,isMaxLevel:I})=>_e.createElement("svg",{key:U,style:{zIndex:U},width:ee,height:$,className:"react-flow__edges react-flow__container"},I&&_e.createElement(R5,{defaultColor:t,rfId:r}),_e.createElement("g",null,V.map(L=>{const[K,F,Q]=z2(C.get(L.source)),[se,te,A]=z2(C.get(L.target));if(!Q||!A)return null;let J=L.type||"default";s[J]||(O?.("011",da.error011(J)),J="default");const ae=s[J]||s.default,B=R===lo.Strict?te.target:(te.target??[]).concat(te.source??[]),ge=F2(F.source,L.sourceHandle),Ne=F2(B,L.targetHandle),Ie=ge?.position||ze.Bottom,je=Ne?.position||ze.Top,we=!!(L.focusable||z&&typeof L.focusable>"u"),Me=L.reconnectable||L.updatable,He=typeof b<"u"&&(Me||Y&&typeof Me>"u");if(!ge||!Ne)return O?.("008",da.error008(ge,L)),null;const{sourceX:Je,sourceY:an,targetX:Jt,targetY:on}=b5(K,ge,Ie,se,Ne,je);return _e.createElement(ae,{key:L.id,id:L.id,className:zr([L.className,o]),type:J,data:L.data,selected:!!L.selected,animated:!!L.animated,hidden:!!L.hidden,label:L.label,labelStyle:L.labelStyle,labelShowBg:L.labelShowBg,labelBgStyle:L.labelBgStyle,labelBgPadding:L.labelBgPadding,labelBgBorderRadius:L.labelBgBorderRadius,style:L.style,source:L.source,target:L.target,sourceHandleId:L.sourceHandle,targetHandleId:L.targetHandle,markerEnd:L.markerEnd,markerStart:L.markerStart,sourceX:Je,sourceY:an,targetX:Jt,targetY:on,sourcePosition:Ie,targetPosition:je,elementsSelectable:q,onContextMenu:u,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onClick:p,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:T,onReconnectEnd:x,reconnectRadius:N,rfId:r,ariaLabel:L.ariaLabel,isFocusable:we,isReconnectable:He,pathOptions:"pathOptions"in L?L.pathOptions:void 0,interactionWidth:L.interactionWidth,disableKeyboardA11y:D})})))),k):null};dI.displayName="EdgeRenderer";var O5=re.memo(dI);const k5=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function L5({children:t}){const e=gn(k5);return _e.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function M5(t){const e=sd(),n=re.useRef(!1);re.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const P5={[ze.Left]:ze.Right,[ze.Right]:ze.Left,[ze.Top]:ze.Bottom,[ze.Bottom]:ze.Top},fI=({nodeId:t,handleType:e,style:n,type:r=Ka.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:u,handleId:c,toX:d,toY:f,connectionMode:p}=gn(re.useCallback($=>({fromNode:$.nodeInternals.get(t),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2],connectionMode:$.connectionMode}),[t]),wr),y=u?.[vn]?.handleBounds;let b=y?.[e];if(p===lo.Loose&&(b=b||y?.[e==="source"?"target":"source"]),!u||!b)return null;const T=c?b.find($=>$.id===c):b[0],x=T?T.x+T.width/2:(u.width??0)/2,N=T?T.y+T.height/2:u.height??0,k=(u.positionAbsolute?.x??0)+x,D=(u.positionAbsolute?.y??0)+N,z=T?.position,Y=z?P5[z]:null;if(!z||!Y)return null;if(s)return _e.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:u,fromHandle:T,fromX:k,fromY:D,toX:d,toY:f,fromPosition:z,toPosition:Y,connectionStatus:o});let q="";const ee={sourceX:k,sourceY:D,sourcePosition:z,targetX:d,targetY:f,targetPosition:Y};return r===Ka.Bezier?[q]=Pw(ee):r===Ka.Step?[q]=Ky({...ee,borderRadius:0}):r===Ka.SmoothStep?[q]=Ky(ee):r===Ka.SimpleBezier?[q]=Mw(ee):q=`M${k},${D} ${d},${f}`,_e.createElement("path",{d:q,fill:"none",className:"react-flow__connection-path",style:n})};fI.displayName="ConnectionLine";const B5=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function U5({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:u,width:c,height:d,connectionStatus:f}=gn(B5,wr);return!(s&&o&&c&&u)?null:_e.createElement("svg",{style:t,width:c,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},_e.createElement("g",{className:zr(["react-flow__connection",f])},_e.createElement(fI,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:f})))}function q2(t,e){return re.useRef(null),ar(),re.useMemo(()=>e(t),[t])}const mI=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:u,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:T,onSelectionContextMenu:x,onSelectionStart:N,onSelectionEnd:k,connectionLineType:D,connectionLineStyle:z,connectionLineComponent:Y,connectionLineContainerStyle:q,selectionKeyCode:ee,selectionOnDrag:$,selectionMode:R,multiSelectionKeyCode:C,panActivationKeyCode:O,zoomActivationKeyCode:P,deleteKeyCode:U,onlyRenderVisibleElements:V,elementsSelectable:I,selectNodesOnDrag:L,defaultViewport:K,translateExtent:F,minZoom:Q,maxZoom:se,preventScrolling:te,defaultMarkerColor:A,zoomOnScroll:J,zoomOnPinch:ae,panOnScroll:B,panOnScrollSpeed:ge,panOnScrollMode:Ne,zoomOnDoubleClick:Ie,panOnDrag:je,onPaneClick:we,onPaneMouseEnter:Me,onPaneMouseMove:He,onPaneMouseLeave:Je,onPaneScroll:an,onPaneContextMenu:Jt,onEdgeContextMenu:on,onEdgeMouseEnter:Dt,onEdgeMouseMove:Rn,onEdgeMouseLeave:Qe,onReconnect:qe,onReconnectStart:cn,onReconnectEnd:Un,reconnectRadius:Vn,noDragClassName:Kn,noWheelClassName:Hn,noPanClassName:Sn,elevateEdgesOnSelect:or,disableKeyboardA11y:de,nodeOrigin:Te,nodeExtent:Ve,rfId:Ye})=>{const ut=q2(t,d5),Tt=q2(e,_5);return M5(o),_e.createElement(c5,{onPaneClick:we,onPaneMouseEnter:Me,onPaneMouseMove:He,onPaneMouseLeave:Je,onPaneContextMenu:Jt,onPaneScroll:an,deleteKeyCode:U,selectionKeyCode:ee,selectionOnDrag:$,selectionMode:R,onSelectionStart:N,onSelectionEnd:k,multiSelectionKeyCode:C,panActivationKeyCode:O,zoomActivationKeyCode:P,elementsSelectable:I,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:J,zoomOnPinch:ae,zoomOnDoubleClick:Ie,panOnScroll:B,panOnScrollSpeed:ge,panOnScrollMode:Ne,panOnDrag:je,defaultViewport:K,translateExtent:F,minZoom:Q,maxZoom:se,onSelectionContextMenu:x,preventScrolling:te,noDragClassName:Kn,noWheelClassName:Hn,noPanClassName:Sn,disableKeyboardA11y:de},_e.createElement(L5,null,_e.createElement(O5,{edgeTypes:Tt,onEdgeClick:c,onEdgeDoubleClick:f,onlyRenderVisibleElements:V,onEdgeContextMenu:on,onEdgeMouseEnter:Dt,onEdgeMouseMove:Rn,onEdgeMouseLeave:Qe,onReconnect:qe,onReconnectStart:cn,onReconnectEnd:Un,reconnectRadius:Vn,defaultMarkerColor:A,noPanClassName:Sn,elevateEdgesOnSelect:!!or,disableKeyboardA11y:de,rfId:Ye},_e.createElement(U5,{style:z,type:D,component:Y,containerStyle:q})),_e.createElement("div",{className:"react-flow__edgelabel-renderer"}),_e.createElement(p5,{nodeTypes:ut,onNodeClick:u,onNodeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:T,selectNodesOnDrag:L,onlyRenderVisibleElements:V,noPanClassName:Sn,noDragClassName:Kn,disableKeyboardA11y:de,nodeOrigin:Te,nodeExtent:Ve,rfId:Ye})))};mI.displayName="GraphView";var V5=re.memo(mI);const Jy=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Fa={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Jy,nodeExtent:Jy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:lo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:fL,isValidConnection:void 0},H5=()=>w4((t,e)=>({...Fa,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:Jg(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",u=s?Jg(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:u,fitViewOnInitOptions:c,domNode:d,nodeOrigin:f}=e(),p=d?.querySelector(".react-flow__viewport");if(!p)return;const y=window.getComputedStyle(p),{m22:b}=new window.DOMMatrixReadOnly(y.transform),T=n.reduce((N,k)=>{const D=s.get(k.id);if(D?.hidden)s.set(D.id,{...D,[vn]:{...D[vn],handleBounds:void 0}});else if(D){const z=W1(k.nodeElement);!!(z.width&&z.height&&(D.width!==z.width||D.height!==z.height||k.forceUpdate))&&(s.set(D.id,{...D,[vn]:{...D[vn],handleBounds:{source:B2(".source",k.nodeElement,b,f),target:B2(".target",k.nodeElement,b,f)}},...z}),N.push({id:D.id,type:"dimensions",dimensions:z}))}return N},[]);eI(s,f);const x=u||o&&!u&&tI(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:x}),T?.length>0&&r?.(T)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),u=n.map(c=>{const d={id:c.id,type:"position",dragging:s};return r&&(d.positionAbsolute=c.positionAbsolute,d.position=c.position),d});o(u)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:u,getNodes:c,elevateNodesOnSelect:d}=e();if(n?.length){if(o){const f=rI(n,c()),p=Jg(f,s,u,d);t({nodeInternals:p})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(d=>$a(d,!0)):(u=dl(o(),n),c=dl(s,[])),Gf({changedNodes:u,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(d=>$a(d,!0)):(u=dl(s,n),c=dl(o(),[])),Gf({changedNodes:c,changedEdges:u,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),u=n||o(),c=r||s,d=u.map(p=>(p.selected=!1,$a(p.id,!1))),f=c.map(p=>$a(p.id,!1));Gf({changedNodes:d,changedEdges:f,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>$a(c.id,!1)),u=n.filter(c=>c.selected).map(c=>$a(c.id,!1));Gf({changedNodes:o,changedEdges:u,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=Z1(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:u,d3Selection:c,translateExtent:d}=e();if(!u||!c||!n.x&&!n.y)return!1;const f=no.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),p=[[0,0],[s,o]],y=u?.constrain()(f,p,d);return u.transform(c,y),r[0]!==y.x||r[1]!==y.y||r[2]!==y.k},cancelConnection:()=>t({connectionNodeId:Fa.connectionNodeId,connectionHandleId:Fa.connectionHandleId,connectionHandleType:Fa.connectionHandleType,connectionStatus:Fa.connectionStatus,connectionStartHandle:Fa.connectionStartHandle,connectionEndHandle:Fa.connectionEndHandle}),reset:()=>t({...Fa})}),Object.is),pI=({children:t})=>{const e=re.useRef(null);return e.current||(e.current=H5()),_e.createElement(sL,{value:e.current},t)};pI.displayName="ReactFlowProvider";const gI=({children:t})=>re.useContext(dm)?_e.createElement(_e.Fragment,null,t):_e.createElement(pI,null,t);gI.displayName="ReactFlowWrapper";const F5={input:$w,default:Wy,output:Xw,group:aE},z5={default:k0,straight:nE,step:tE,smoothstep:fm,simplebezier:eE},j5=[0,0],q5=[15,15],Y5={x:0,y:0,zoom:1},G5={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},yI=re.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=F5,edgeTypes:u=z5,onNodeClick:c,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:y,onMoveEnd:b,onConnect:T,onConnectStart:x,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:D,onNodeMouseEnter:z,onNodeMouseMove:Y,onNodeMouseLeave:q,onNodeContextMenu:ee,onNodeDoubleClick:$,onNodeDragStart:R,onNodeDrag:C,onNodeDragStop:O,onNodesDelete:P,onEdgesDelete:U,onSelectionChange:V,onSelectionDragStart:I,onSelectionDrag:L,onSelectionDragStop:K,onSelectionContextMenu:F,onSelectionStart:Q,onSelectionEnd:se,connectionMode:te=lo.Strict,connectionLineType:A=Ka.Bezier,connectionLineStyle:J,connectionLineComponent:ae,connectionLineContainerStyle:B,deleteKeyCode:ge="Backspace",selectionKeyCode:Ne="Shift",selectionOnDrag:Ie=!1,selectionMode:je=Vh.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:Me=O0()?"Meta":"Control",zoomActivationKeyCode:He=O0()?"Meta":"Control",snapToGrid:Je=!1,snapGrid:an=q5,onlyRenderVisibleElements:Jt=!1,selectNodesOnDrag:on=!0,nodesDraggable:Dt,nodesConnectable:Rn,nodesFocusable:Qe,nodeOrigin:qe=j5,edgesFocusable:cn,edgesUpdatable:Un,elementsSelectable:Vn,defaultViewport:Kn=Y5,minZoom:Hn=.5,maxZoom:Sn=2,translateExtent:or=Jy,preventScrolling:de=!0,nodeExtent:Te,defaultMarkerColor:Ve="#b1b1b7",zoomOnScroll:Ye=!0,zoomOnPinch:ut=!0,panOnScroll:Tt=!1,panOnScrollSpeed:Ht=.5,panOnScrollMode:Ft=Wo.Free,zoomOnDoubleClick:zt=!0,panOnDrag:vt=!0,onPaneClick:lt,onPaneMouseEnter:Wt,onPaneMouseMove:Gt,onPaneMouseLeave:Yi,onPaneScroll:_r,onPaneContextMenu:Fn,children:Rr,onEdgeContextMenu:br,onEdgeDoubleClick:jr,onEdgeMouseEnter:Us,onEdgeMouseMove:ri,onEdgeMouseLeave:Gi,onEdgeUpdate:Dr,onEdgeUpdateStart:ii,onEdgeUpdateEnd:$t,onReconnect:Lt,onReconnectStart:hn,onReconnectEnd:En,reconnectRadius:os=10,edgeUpdaterRadius:Ao=10,onNodesChange:Or,onEdgesChange:us,noDragClassName:Ai="nodrag",noWheelClassName:si="nowheel",noPanClassName:kr="nopan",fitView:Xn=!1,fitViewOptions:Lr,connectOnClick:zn=!0,attributionPosition:ne,proOptions:pe,defaultEdgeOptions:De,elevateNodesOnSelect:Pe=!0,elevateEdgesOnSelect:pt=!1,disableKeyboardA11y:rt=!1,autoPanOnConnect:jt=!0,autoPanOnNodeDrag:Mt=!0,connectionRadius:Qn=20,isValidConnection:Pt,onError:Nt,style:Bt,id:Dn,nodeDragThreshold:_n,...xn},Mr)=>{const Pr=Dn||"1";return _e.createElement("div",{...xn,style:{...Bt,...G5},ref:Mr,className:zr(["react-flow",s]),"data-testid":"rf__wrapper",id:Dn},_e.createElement(gI,null,_e.createElement(V5,{onInit:f,onMove:p,onMoveStart:y,onMoveEnd:b,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:z,onNodeMouseMove:Y,onNodeMouseLeave:q,onNodeContextMenu:ee,onNodeDoubleClick:$,nodeTypes:o,edgeTypes:u,connectionLineType:A,connectionLineStyle:J,connectionLineComponent:ae,connectionLineContainerStyle:B,selectionKeyCode:Ne,selectionOnDrag:Ie,selectionMode:je,deleteKeyCode:ge,multiSelectionKeyCode:Me,panActivationKeyCode:we,zoomActivationKeyCode:He,onlyRenderVisibleElements:Jt,selectNodesOnDrag:on,defaultViewport:Kn,translateExtent:or,minZoom:Hn,maxZoom:Sn,preventScrolling:de,zoomOnScroll:Ye,zoomOnPinch:ut,zoomOnDoubleClick:zt,panOnScroll:Tt,panOnScrollSpeed:Ht,panOnScrollMode:Ft,panOnDrag:vt,onPaneClick:lt,onPaneMouseEnter:Wt,onPaneMouseMove:Gt,onPaneMouseLeave:Yi,onPaneScroll:_r,onPaneContextMenu:Fn,onSelectionContextMenu:F,onSelectionStart:Q,onSelectionEnd:se,onEdgeContextMenu:br,onEdgeDoubleClick:jr,onEdgeMouseEnter:Us,onEdgeMouseMove:ri,onEdgeMouseLeave:Gi,onReconnect:Lt??Dr,onReconnectStart:hn??ii,onReconnectEnd:En??$t,reconnectRadius:os??Ao,defaultMarkerColor:Ve,noDragClassName:Ai,noWheelClassName:si,noPanClassName:kr,elevateEdgesOnSelect:pt,rfId:Pr,disableKeyboardA11y:rt,nodeOrigin:qe,nodeExtent:Te}),_e.createElement(PL,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:T,onConnectStart:x,onConnectEnd:N,onClickConnectStart:k,onClickConnectEnd:D,nodesDraggable:Dt,nodesConnectable:Rn,nodesFocusable:Qe,edgesFocusable:cn,edgesUpdatable:Un,elementsSelectable:Vn,elevateNodesOnSelect:Pe,minZoom:Hn,maxZoom:Sn,nodeExtent:Te,onNodesChange:Or,onEdgesChange:us,snapToGrid:Je,snapGrid:an,connectionMode:te,translateExtent:or,connectOnClick:zn,defaultEdgeOptions:De,fitView:Xn,fitViewOptions:Lr,onNodesDelete:P,onEdgesDelete:U,onNodeDragStart:R,onNodeDrag:C,onNodeDragStop:O,onSelectionDrag:L,onSelectionDragStart:I,onSelectionDragStop:K,noPanClassName:kr,nodeOrigin:qe,rfId:Pr,autoPanOnConnect:jt,autoPanOnNodeDrag:Mt,onError:Nt,connectionRadius:Qn,isValidConnection:Pt,nodeDragThreshold:_n}),_e.createElement(LL,{onSelectionChange:V}),Rr,_e.createElement(oL,{proOptions:pe,position:ne}),_e.createElement(FL,{rfId:Pr,disableKeyboardA11y:rt})))});yI.displayName="ReactFlow";function EI(t){return e=>{const[n,r]=re.useState(e),s=re.useCallback(o=>r(u=>t(o,u)),[]);return[n,r,s]}}const $5=EI(rI),K5=EI(t5);function X5(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},_e.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Q5(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},_e.createElement("path",{d:"M0 0h32v4.2H0z"}))}function W5(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},_e.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Z5(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},_e.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function J5(){return _e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},_e.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const hh=({children:t,className:e,...n})=>_e.createElement("button",{type:"button",className:zr(["react-flow__controls-button",e]),...n},t);hh.displayName="ControlButton";const eM=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),_I=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:u,onFitView:c,onInteractiveChange:d,className:f,children:p,position:y="bottom-left"})=>{const b=ar(),[T,x]=re.useState(!1),{isInteractive:N,minZoomReached:k,maxZoomReached:D}=gn(eM,wr),{zoomIn:z,zoomOut:Y,fitView:q}=sd();if(re.useEffect(()=>{x(!0)},[]),!T)return null;const ee=()=>{z(),o?.()},$=()=>{Y(),u?.()},R=()=>{q(s),c?.()},C=()=>{b.setState({nodesDraggable:!N,nodesConnectable:!N,elementsSelectable:!N}),d?.(!N)};return _e.createElement(Cw,{className:zr(["react-flow__controls",f]),position:y,style:t,"data-testid":"rf__controls"},e&&_e.createElement(_e.Fragment,null,_e.createElement(hh,{onClick:ee,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:D},_e.createElement(X5,null)),_e.createElement(hh,{onClick:$,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},_e.createElement(Q5,null))),n&&_e.createElement(hh,{className:"react-flow__controls-fitview",onClick:R,title:"fit view","aria-label":"fit view"},_e.createElement(W5,null)),r&&_e.createElement(hh,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity"},N?_e.createElement(J5,null):_e.createElement(Z5,null)),p)};_I.displayName="Controls";var tM=re.memo(_I),ji;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ji||(ji={}));function nM({color:t,dimensions:e,lineWidth:n}){return _e.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function rM({color:t,radius:e}){return _e.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const iM={[ji.Dots]:"#91919a",[ji.Lines]:"#eee",[ji.Cross]:"#e2e2e2"},sM={[ji.Dots]:1,[ji.Lines]:1,[ji.Cross]:6},aM=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function bI({id:t,variant:e=ji.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:u,style:c,className:d}){const f=re.useRef(null),{transform:p,patternId:y}=gn(aM,wr),b=u||iM[e],T=r||sM[e],x=e===ji.Dots,N=e===ji.Cross,k=Array.isArray(n)?n:[n,n],D=[k[0]*p[2]||1,k[1]*p[2]||1],z=T*p[2],Y=N?[z,z]:D,q=x?[z/o,z/o]:[Y[0]/o,Y[1]/o];return _e.createElement("svg",{className:zr(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},_e.createElement("pattern",{id:y+t,x:p[0]%D[0],y:p[1]%D[1],width:D[0],height:D[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${q[0]},-${q[1]})`},x?_e.createElement(rM,{color:b,radius:z/o}):_e.createElement(nM,{dimensions:Y,color:b,lineWidth:s})),_e.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}bI.displayName="Background";var oM=re.memo(bI);function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eh.apply(null,arguments)}var Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ad(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y2,G2={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/var ry,$2,K2,uM=(Y2||(Y2=1,ry=G2,function(){var t={}.hasOwnProperty;function e(){for(var n=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var u=e.apply(null,s);u&&n.push(u)}}else if(o==="object")if(s.toString===Object.prototype.toString)for(var c in s)t.call(s,c)&&s[c]&&n.push(c);else n.push(s.toString())}}return n.join(" ")}ry.exports?(e.default=e,ry.exports=e):window.classNames=e}()),G2.exports),e1=ad(uM),X2,Zi=ad(function(){if(K2)return $2;K2=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,o=Object.prototype.toString;function u(d){var f=typeof d;return!!d&&(f=="object"||f=="function")}function c(d){if(typeof d=="number")return d;if(function(y){return typeof y=="symbol"||function(b){return!!b&&typeof b=="object"}(y)&&o.call(y)=="[object Symbol]"}(d))return NaN;if(u(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=u(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=d.replace(t,"");var p=n.test(d);return p||r.test(d)?s(d.slice(2),p?2:8):e.test(d)?NaN:+d}return $2=function(d,f,p){return p===void 0&&(p=f,f=void 0),p!==void 0&&(p=(p=c(p))==p?p:0),f!==void 0&&(f=(f=c(f))==f?f:0),function(y,b,T){return y==y&&(T!==void 0&&(y=y<=T?y:T),b!==void 0&&(y=y>=b?y:b)),y}(c(d),f,p)}}()),iy={exports:{}},lM=(X2||(X2=1,function(t,e){var n="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Error]",f="[object Function]",p="[object Map]",y="[object Number]",b="[object Object]",T="[object Promise]",x="[object RegExp]",N="[object Set]",k="[object String]",D="[object Symbol]",z="[object WeakMap]",Y="[object ArrayBuffer]",q="[object DataView]",ee=/^\[object .+?Constructor\]$/,$=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[s]=R[o]=R[Y]=R[u]=R[q]=R[c]=R[d]=R[f]=R[p]=R[y]=R[b]=R[x]=R[N]=R[k]=R[z]=!1;var C=typeof Ja=="object"&&Ja&&Ja.Object===Object&&Ja,O=typeof self=="object"&&self&&self.Object===Object&&self,P=C||O||Function("return this")(),U=e&&!e.nodeType&&e,V=U&&t&&!t.nodeType&&t,I=V&&V.exports===U,L=I&&C.process,K=function(){try{return L&&L.binding&&L.binding("util")}catch{}}(),F=K&&K.isTypedArray;function Q(ne,pe){for(var De=-1,Pe=ne==null?0:ne.length;++De<Pe;)if(pe(ne[De],De,ne))return!0;return!1}function se(ne){var pe=-1,De=Array(ne.size);return ne.forEach(function(Pe,pt){De[++pe]=[pt,Pe]}),De}function te(ne){var pe=-1,De=Array(ne.size);return ne.forEach(function(Pe){De[++pe]=Pe}),De}var A,J,ae,B=Array.prototype,ge=Function.prototype,Ne=Object.prototype,Ie=P["__core-js_shared__"],je=ge.toString,we=Ne.hasOwnProperty,Me=(A=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",He=Ne.toString,Je=RegExp("^"+je.call(we).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=I?P.Buffer:void 0,Jt=P.Symbol,on=P.Uint8Array,Dt=Ne.propertyIsEnumerable,Rn=B.splice,Qe=Jt?Jt.toStringTag:void 0,qe=Object.getOwnPropertySymbols,cn=an?an.isBuffer:void 0,Un=(J=Object.keys,ae=Object,function(ne){return J(ae(ne))}),Vn=ii(P,"DataView"),Kn=ii(P,"Map"),Hn=ii(P,"Promise"),Sn=ii(P,"Set"),or=ii(P,"WeakMap"),de=ii(Object,"create"),Te=En(Vn),Ve=En(Kn),Ye=En(Hn),ut=En(Sn),Tt=En(or),Ht=Jt?Jt.prototype:void 0,Ft=Ht?Ht.valueOf:void 0;function zt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Pe=ne[pe];this.set(Pe[0],Pe[1])}}function vt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Pe=ne[pe];this.set(Pe[0],Pe[1])}}function lt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.clear();++pe<De;){var Pe=ne[pe];this.set(Pe[0],Pe[1])}}function Wt(ne){var pe=-1,De=ne==null?0:ne.length;for(this.__data__=new lt;++pe<De;)this.add(ne[pe])}function Gt(ne){var pe=this.__data__=new vt(ne);this.size=pe.size}function Yi(ne,pe){var De=Or(ne),Pe=!De&&Ao(ne),pt=!De&&!Pe&&us(ne),rt=!De&&!Pe&&!pt&&Lr(ne),jt=De||Pe||pt||rt,Mt=jt?function(Nt,Bt){for(var Dn=-1,_n=Array(Nt);++Dn<Nt;)_n[Dn]=Bt(Dn);return _n}(ne.length,String):[],Qn=Mt.length;for(var Pt in ne)!we.call(ne,Pt)||jt&&(Pt=="length"||pt&&(Pt=="offset"||Pt=="parent")||rt&&(Pt=="buffer"||Pt=="byteLength"||Pt=="byteOffset")||hn(Pt,Qn))||Mt.push(Pt);return Mt}function _r(ne,pe){for(var De=ne.length;De--;)if(os(ne[De][0],pe))return De;return-1}function Fn(ne){return ne==null?ne===void 0?"[object Undefined]":"[object Null]":Qe&&Qe in Object(ne)?function(pe){var De=we.call(pe,Qe),Pe=pe[Qe];try{pe[Qe]=void 0;var pt=!0}catch{}var rt=He.call(pe);return pt&&(De?pe[Qe]=Pe:delete pe[Qe]),rt}(ne):function(pe){return He.call(pe)}(ne)}function Rr(ne){return Xn(ne)&&Fn(ne)==s}function br(ne,pe,De,Pe,pt){return ne===pe||(ne==null||pe==null||!Xn(ne)&&!Xn(pe)?ne!=ne&&pe!=pe:function(rt,jt,Mt,Qn,Pt,Nt){var Bt=Or(rt),Dn=Or(jt),_n=Bt?o:Lt(rt),xn=Dn?o:Lt(jt),Mr=(_n=_n==s?b:_n)==b,Pr=(xn=xn==s?b:xn)==b,Si=_n==xn;if(Si&&us(rt)){if(!us(jt))return!1;Bt=!0,Mr=!1}if(Si&&!Mr)return Nt||(Nt=new Gt),Bt||Lr(rt)?ri(rt,jt,Mt,Qn,Pt,Nt):function(At,bt,wi,Ii,dn,en,ur){switch(wi){case q:if(At.byteLength!=bt.byteLength||At.byteOffset!=bt.byteOffset)return!1;At=At.buffer,bt=bt.buffer;case Y:return!(At.byteLength!=bt.byteLength||!en(new on(At),new on(bt)));case u:case c:case y:return os(+At,+bt);case d:return At.name==bt.name&&At.message==bt.message;case x:case k:return At==bt+"";case p:var lr=se;case N:var Br=1&Ii;if(lr||(lr=te),At.size!=bt.size&&!Br)return!1;var Ct=ur.get(At);if(Ct)return Ct==bt;Ii|=2,ur.set(At,bt);var $i=ri(lr(At),lr(bt),Ii,dn,en,ur);return ur.delete(At),$i;case D:if(Ft)return Ft.call(At)==Ft.call(bt)}return!1}(rt,jt,_n,Mt,Qn,Pt,Nt);if(!(1&Mt)){var xi=Mr&&we.call(rt,"__wrapped__"),Wn=Pr&&we.call(jt,"__wrapped__");if(xi||Wn){var So=xi?rt.value():rt,tc=Wn?jt.value():jt;return Nt||(Nt=new Gt),Pt(So,tc,Mt,Qn,Nt)}}return!!Si&&(Nt||(Nt=new Gt),function(At,bt,wi,Ii,dn,en){var ur=1&wi,lr=Gi(At),Br=lr.length,Ct=Gi(bt),$i=Ct.length;if(Br!=$i&&!ur)return!1;for(var cr=Br;cr--;){var Ur=lr[cr];if(!(ur?Ur in bt:we.call(bt,Ur)))return!1}var xo=en.get(At);if(xo&&en.get(bt))return xo==bt;var ls=!0;en.set(At,bt),en.set(bt,At);for(var Vs=ur;++cr<Br;){var ya=At[Ur=lr[cr]],Ea=bt[Ur];if(Ii)var Hs=ur?Ii(Ea,ya,Ur,bt,At,en):Ii(ya,Ea,Ur,At,bt,en);if(!(Hs===void 0?ya===Ea||dn(ya,Ea,wi,Ii,en):Hs)){ls=!1;break}Vs||(Vs=Ur=="constructor")}if(ls&&!Vs){var qr=At.constructor,hr=bt.constructor;qr==hr||!("constructor"in At)||!("constructor"in bt)||typeof qr=="function"&&qr instanceof qr&&typeof hr=="function"&&hr instanceof hr||(ls=!1)}return en.delete(At),en.delete(bt),ls}(rt,jt,Mt,Qn,Pt,Nt))}(ne,pe,De,Pe,br,pt))}function jr(ne){return!(!kr(ne)||function(pe){return!!Me&&Me in pe}(ne))&&(Ai(ne)?Je:ee).test(En(ne))}function Us(ne){if(De=(pe=ne)&&pe.constructor,Pe=typeof De=="function"&&De.prototype||Ne,pe!==Pe)return Un(ne);var pe,De,Pe,pt=[];for(var rt in Object(ne))we.call(ne,rt)&&rt!="constructor"&&pt.push(rt);return pt}function ri(ne,pe,De,Pe,pt,rt){var jt=1&De,Mt=ne.length,Qn=pe.length;if(Mt!=Qn&&!(jt&&Qn>Mt))return!1;var Pt=rt.get(ne);if(Pt&&rt.get(pe))return Pt==pe;var Nt=-1,Bt=!0,Dn=2&De?new Wt:void 0;for(rt.set(ne,pe),rt.set(pe,ne);++Nt<Mt;){var _n=ne[Nt],xn=pe[Nt];if(Pe)var Mr=jt?Pe(xn,_n,Nt,pe,ne,rt):Pe(_n,xn,Nt,ne,pe,rt);if(Mr!==void 0){if(Mr)continue;Bt=!1;break}if(Dn){if(!Q(pe,function(Pr,Si){if(xi=Si,!Dn.has(xi)&&(_n===Pr||pt(_n,Pr,De,Pe,rt)))return Dn.push(Si);var xi})){Bt=!1;break}}else if(_n!==xn&&!pt(_n,xn,De,Pe,rt)){Bt=!1;break}}return rt.delete(ne),rt.delete(pe),Bt}function Gi(ne){return function(pe,De,Pe){var pt=De(pe);return Or(pe)?pt:function(rt,jt){for(var Mt=-1,Qn=jt.length,Pt=rt.length;++Mt<Qn;)rt[Pt+Mt]=jt[Mt];return rt}(pt,Pe(pe))}(ne,zn,$t)}function Dr(ne,pe){var De,Pe,pt=ne.__data__;return((Pe=typeof(De=pe))=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?De!=="__proto__":De===null)?pt[typeof pe=="string"?"string":"hash"]:pt.map}function ii(ne,pe){var De=function(Pe,pt){return Pe?.[pt]}(ne,pe);return jr(De)?De:void 0}zt.prototype.clear=function(){this.__data__=de?de(null):{},this.size=0},zt.prototype.delete=function(ne){var pe=this.has(ne)&&delete this.__data__[ne];return this.size-=pe?1:0,pe},zt.prototype.get=function(ne){var pe=this.__data__;if(de){var De=pe[ne];return De===n?void 0:De}return we.call(pe,ne)?pe[ne]:void 0},zt.prototype.has=function(ne){var pe=this.__data__;return de?pe[ne]!==void 0:we.call(pe,ne)},zt.prototype.set=function(ne,pe){var De=this.__data__;return this.size+=this.has(ne)?0:1,De[ne]=de&&pe===void 0?n:pe,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(ne){var pe=this.__data__,De=_r(pe,ne);return!(De<0||(De==pe.length-1?pe.pop():Rn.call(pe,De,1),--this.size,0))},vt.prototype.get=function(ne){var pe=this.__data__,De=_r(pe,ne);return De<0?void 0:pe[De][1]},vt.prototype.has=function(ne){return _r(this.__data__,ne)>-1},vt.prototype.set=function(ne,pe){var De=this.__data__,Pe=_r(De,ne);return Pe<0?(++this.size,De.push([ne,pe])):De[Pe][1]=pe,this},lt.prototype.clear=function(){this.size=0,this.__data__={hash:new zt,map:new(Kn||vt),string:new zt}},lt.prototype.delete=function(ne){var pe=Dr(this,ne).delete(ne);return this.size-=pe?1:0,pe},lt.prototype.get=function(ne){return Dr(this,ne).get(ne)},lt.prototype.has=function(ne){return Dr(this,ne).has(ne)},lt.prototype.set=function(ne,pe){var De=Dr(this,ne),Pe=De.size;return De.set(ne,pe),this.size+=De.size==Pe?0:1,this},Wt.prototype.add=Wt.prototype.push=function(ne){return this.__data__.set(ne,n),this},Wt.prototype.has=function(ne){return this.__data__.has(ne)},Gt.prototype.clear=function(){this.__data__=new vt,this.size=0},Gt.prototype.delete=function(ne){var pe=this.__data__,De=pe.delete(ne);return this.size=pe.size,De},Gt.prototype.get=function(ne){return this.__data__.get(ne)},Gt.prototype.has=function(ne){return this.__data__.has(ne)},Gt.prototype.set=function(ne,pe){var De=this.__data__;if(De instanceof vt){var Pe=De.__data__;if(!Kn||Pe.length<199)return Pe.push([ne,pe]),this.size=++De.size,this;De=this.__data__=new lt(Pe)}return De.set(ne,pe),this.size=De.size,this};var $t=qe?function(ne){return ne==null?[]:(ne=Object(ne),function(pe,De){for(var Pe=-1,pt=pe==null?0:pe.length,rt=0,jt=[];++Pe<pt;){var Mt=pe[Pe];De(Mt,Pe,pe)&&(jt[rt++]=Mt)}return jt}(qe(ne),function(pe){return Dt.call(ne,pe)}))}:function(){return[]},Lt=Fn;function hn(ne,pe){return!!(pe=pe??r)&&(typeof ne=="number"||$.test(ne))&&ne>-1&&ne%1==0&&ne<pe}function En(ne){if(ne!=null){try{return je.call(ne)}catch{}try{return ne+""}catch{}}return""}function os(ne,pe){return ne===pe||ne!=ne&&pe!=pe}(Vn&&Lt(new Vn(new ArrayBuffer(1)))!=q||Kn&&Lt(new Kn)!=p||Hn&&Lt(Hn.resolve())!=T||Sn&&Lt(new Sn)!=N||or&&Lt(new or)!=z)&&(Lt=function(ne){var pe=Fn(ne),De=pe==b?ne.constructor:void 0,Pe=De?En(De):"";if(Pe)switch(Pe){case Te:return q;case Ve:return p;case Ye:return T;case ut:return N;case Tt:return z}return pe});var Ao=Rr(function(){return arguments}())?Rr:function(ne){return Xn(ne)&&we.call(ne,"callee")&&!Dt.call(ne,"callee")},Or=Array.isArray,us=cn||function(){return!1};function Ai(ne){if(!kr(ne))return!1;var pe=Fn(ne);return pe==f||pe=="[object GeneratorFunction]"||pe=="[object AsyncFunction]"||pe=="[object Proxy]"}function si(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=r}function kr(ne){var pe=typeof ne;return ne!=null&&(pe=="object"||pe=="function")}function Xn(ne){return ne!=null&&typeof ne=="object"}var Lr=F?function(ne){return function(pe){return ne(pe)}}(F):function(ne){return Xn(ne)&&si(ne.length)&&!!R[Fn(ne)]};function zn(ne){return(pe=ne)!=null&&si(pe.length)&&!Ai(pe)?Yi(ne):Us(ne);var pe}t.exports=function(ne,pe){return br(ne,pe)}}(iy,iy.exports)),iy.exports),cM=ad(lM);function Q2(t,e,n){return t[e]?t[e][0]?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}function hM(t){t===void 0&&(t={});var e=t.onResize,n=re.useRef(void 0);n.current=e;var r=t.round||Math.round,s=re.useRef(),o=re.useState({width:void 0,height:void 0}),u=o[0],c=o[1],d=re.useRef(!1);re.useEffect(function(){return d.current=!1,function(){d.current=!0}},[]);var f=re.useRef({width:void 0,height:void 0}),p=function(y,b){var T=re.useRef(null),x=re.useRef(null);x.current=b;var N=re.useRef(null);re.useEffect(function(){k()});var k=re.useCallback(function(){var D=N.current,z=x.current,Y=D||(z?z instanceof Element?z:z.current:null);T.current&&T.current.element===Y&&T.current.subscriber===y||(T.current&&T.current.cleanup&&T.current.cleanup(),T.current={element:Y,subscriber:y,cleanup:Y?y(Y):void 0})},[y]);return re.useEffect(function(){return function(){T.current&&T.current.cleanup&&(T.current.cleanup(),T.current=null)}},[]),re.useCallback(function(D){N.current=D,k()},[k])}(re.useCallback(function(y){return s.current&&s.current.box===t.box&&s.current.round===r||(s.current={box:t.box,round:r,instance:new ResizeObserver(function(b){var T=b[0],x=t.box==="border-box"?"borderBoxSize":t.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",N=Q2(T,x,"inlineSize"),k=Q2(T,x,"blockSize"),D=N?r(N):void 0,z=k?r(k):void 0;if(f.current.width!==D||f.current.height!==z){var Y={width:D,height:z};f.current.width=D,f.current.height=z,n.current?n.current(Y):d.current||c(Y)}})}),s.current.instance.observe(y,{box:t.box}),function(){s.current&&s.current.instance.unobserve(y)}},[t.box,r]),t.ref);return re.useMemo(function(){return{ref:p,width:u.width,height:u.height}},[p,u.width,u.height])}var dM="allotment-module_splitView__L-yRc",fM="allotment-module_sashContainer__fzwJF",mM="allotment-module_splitViewContainer__rQnVa",TI="allotment-module_splitViewView__MGZ6O",pM="allotment-module_vertical__WSwwa",gM="allotment-module_horizontal__7doS8",yM="allotment-module_separatorBorder__x-rDS";let nh,vI=!1,AI=!1;typeof navigator=="object"&&(nh=navigator.userAgent,AI=nh.indexOf("Macintosh")>=0,vI=(nh.indexOf("Macintosh")>=0||nh.indexOf("iPad")>=0||nh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const SI=vI,EM=AI,W2=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?re.useLayoutEffect:re.useEffect;let _M=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(e){this._size=e}};function Kf(t,e){const n=t.length,r=n-e.length;return r>=0&&t.slice(r,n)===e}var Z2,J2={exports:{}},eA,tA,bM=(Z2||(Z2=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function s(d,f,p){this.fn=d,this.context=f,this.once=p||!1}function o(d,f,p,y,b){if(typeof p!="function")throw new TypeError("The listener must be a function");var T=new s(p,y||d,b),x=n?n+f:f;return d._events[x]?d._events[x].fn?d._events[x]=[d._events[x],T]:d._events[x].push(T):(d._events[x]=T,d._eventsCount++),d}function u(d,f){--d._eventsCount==0?d._events=new r:delete d._events[f]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),c.prototype.eventNames=function(){var d,f,p=[];if(this._eventsCount===0)return p;for(f in d=this._events)e.call(d,f)&&p.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(d)):p},c.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,b=p.length,T=new Array(b);y<b;y++)T[y]=p[y].fn;return T},c.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,f,p,y,b,T){var x=n?n+d:d;if(!this._events[x])return!1;var N,k,D=this._events[x],z=arguments.length;if(D.fn){switch(D.once&&this.removeListener(d,D.fn,void 0,!0),z){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,f),!0;case 3:return D.fn.call(D.context,f,p),!0;case 4:return D.fn.call(D.context,f,p,y),!0;case 5:return D.fn.call(D.context,f,p,y,b),!0;case 6:return D.fn.call(D.context,f,p,y,b,T),!0}for(k=1,N=new Array(z-1);k<z;k++)N[k-1]=arguments[k];D.fn.apply(D.context,N)}else{var Y,q=D.length;for(k=0;k<q;k++)switch(D[k].once&&this.removeListener(d,D[k].fn,void 0,!0),z){case 1:D[k].fn.call(D[k].context);break;case 2:D[k].fn.call(D[k].context,f);break;case 3:D[k].fn.call(D[k].context,f,p);break;case 4:D[k].fn.call(D[k].context,f,p,y);break;default:if(!N)for(Y=1,N=new Array(z-1);Y<z;Y++)N[Y-1]=arguments[Y];D[k].fn.apply(D[k].context,N)}}return!0},c.prototype.on=function(d,f,p){return o(this,d,f,p,!1)},c.prototype.once=function(d,f,p){return o(this,d,f,p,!0)},c.prototype.removeListener=function(d,f,p,y){var b=n?n+d:d;if(!this._events[b])return this;if(!f)return u(this,b),this;var T=this._events[b];if(T.fn)T.fn!==f||y&&!T.once||p&&T.context!==p||u(this,b);else{for(var x=0,N=[],k=T.length;x<k;x++)(T[x].fn!==f||y&&!T[x].once||p&&T[x].context!==p)&&N.push(T[x]);N.length?this._events[b]=N.length===1?N[0]:N:u(this,b)}return this},c.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&u(this,f)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c}(J2)),J2.exports),uE=ad(bM);function nA(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.unshift(e))}function sy(t,e){const n=t.indexOf(e);n>-1&&(t.splice(n,1),t.push(e))}function Bi(t,e,n=1){const r=Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);let o=-1;for(;++o<r;)s[o]=t+o*n;return s}var TM=ad(function(){if(tA)return eA;tA=1;var t=/^\s+|\s+$/g,e=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,s=parseInt,o=typeof Ja=="object"&&Ja&&Ja.Object===Object&&Ja,u=typeof self=="object"&&self&&self.Object===Object&&self,c=o||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,y=function(){return c.Date.now()};function b(x){var N=typeof x;return!!x&&(N=="object"||N=="function")}function T(x){if(typeof x=="number")return x;if(function(D){return typeof D=="symbol"||function(z){return!!z&&typeof z=="object"}(D)&&d.call(D)=="[object Symbol]"}(x))return NaN;if(b(x)){var N=typeof x.valueOf=="function"?x.valueOf():x;x=b(N)?N+"":N}if(typeof x!="string")return x===0?x:+x;x=x.replace(t,"");var k=n.test(x);return k||r.test(x)?s(x.slice(2),k?2:8):e.test(x)?NaN:+x}return eA=function(x,N,k){var D,z,Y,q,ee,$,R=0,C=!1,O=!1,P=!0;if(typeof x!="function")throw new TypeError("Expected a function");function U(F){var Q=D,se=z;return D=z=void 0,R=F,q=x.apply(se,Q)}function V(F){var Q=F-$;return $===void 0||Q>=N||Q<0||O&&F-R>=Y}function I(){var F=y();if(V(F))return L(F);ee=setTimeout(I,function(Q){var se=N-(Q-$);return O?p(se,Y-(Q-R)):se}(F))}function L(F){return ee=void 0,P&&D?U(F):(D=z=void 0,q)}function K(){var F=y(),Q=V(F);if(D=arguments,z=this,$=F,Q){if(ee===void 0)return function(se){return R=se,ee=setTimeout(I,N),C?U(se):q}($);if(O)return ee=setTimeout(I,N),U($)}return ee===void 0&&(ee=setTimeout(I,N)),q}return N=T(N)||0,b(k)&&(C=!!k.leading,Y=(O="maxWait"in k)?f(T(k.maxWait)||0,N):Y,P="trailing"in k?!!k.trailing:P),K.cancel=function(){ee!==void 0&&clearTimeout(ee),R=0,D=$=z=ee=void 0},K.flush=function(){return ee===void 0?q:L(y())},K}}()),vM="sash-module_sash__K-9lB",AM="sash-module_disabled__Hm-wx",SM="sash-module_mac__Jf6OJ",rA="sash-module_vertical__pB-rs",xM="sash-module_minimum__-UKxp",wM="sash-module_maximum__TCWxD",iA="sash-module_horizontal__kFbiw",ay="sash-module_hover__80W6I",oy="sash-module_active__bJspD";let Vi=function(t){return t.Vertical="VERTICAL",t.Horizontal="HORIZONTAL",t}({}),pi=function(t){return t.Disabled="DISABLED",t.Minimum="MINIMUM",t.Maximum="MAXIMUM",t.Enabled="ENABLED",t}({}),xI=SI?20:8;const wI=new uE;class sA extends uE{get state(){return this._state}set state(e){this._state!==e&&(this.el.classList.toggle(AM,e===pi.Disabled),this.el.classList.toggle("sash-disabled",e===pi.Disabled),this.el.classList.toggle(xM,e===pi.Minimum),this.el.classList.toggle("sash-minimum",e===pi.Minimum),this.el.classList.toggle(wM,e===pi.Maximum),this.el.classList.toggle("sash-maximum",e===pi.Maximum),this._state=e,this.emit("enablementChange",e))}constructor(e,n,r){var s;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=TM(o=>o.classList.add("sash-hover",ay),this.hoverDelay),this._state=pi.Enabled,this.onPointerStart=o=>{const u=o.pageX,c=o.pageY,d={startX:u,currentX:u,startY:c,currentY:c};this.el.classList.add("sash-active",oy),this.emit("start",d),this.el.setPointerCapture(o.pointerId);const f=y=>{y.preventDefault();const b={startX:u,currentX:y.pageX,startY:c,currentY:y.pageY};this.emit("change",b)},p=y=>{y.preventDefault(),this.el.classList.remove("sash-active",oy),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(y.pointerId),window.removeEventListener("pointermove",f),window.removeEventListener("pointerup",p)};window.addEventListener("pointermove",f),window.addEventListener("pointerup",p)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(oy)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",ay)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",ay)},this.el=document.createElement("div"),this.el.classList.add("sash",vM),this.el.dataset.testid="sash",e.append(this.el),EM&&this.el.classList.add("sash-mac",SM),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof r.size=="number"?(this.size=r.size,r.orientation===Vi.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=xI,wI.on("onDidChangeGlobalSize",o=>{this.size=o,this.layout()})),this.layoutProvider=n,this.orientation=(s=r.orientation)!=null?s:Vi.Vertical,this.orientation===Vi.Horizontal?(this.el.classList.add("sash-horizontal",iA),this.el.classList.remove("sash-vertical",rA)):(this.el.classList.remove("sash-horizontal",iA),this.el.classList.add("sash-vertical",rA)),this.layout()}layout(){if(this.orientation===Vi.Vertical){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let L0;var uy;(uy=L0||(L0={})).Distribute={type:"distribute"},uy.Split=function(t){return{type:"split",index:t}},uy.Invisible=function(t){return{type:"invisible",cachedVisibleSize:t}};let Ui=function(t){return t.Normal="NORMAL",t.Low="LOW",t.High="HIGH",t}({});class II{constructor(e,n,r){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=e,this.view=n,this.container.classList.add("split-view-view",TI),this.container.dataset.testid="split-view-view",typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,e.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(e,n){e!==this.visible&&(e?(this.size=Zi(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e){this.layoutContainer(e),this.view.layout(this.size,e)}}class IM extends II{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}class CM extends II{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class NM extends uE{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,n={},r,s,o){var u,c;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=d=>{this.emit("sashchange",d),this.saveProportions();for(const f of this.viewItems)f.enabled=!0},this.orientation=(u=n.orientation)!=null?u:Vi.Vertical,this.proportionalLayout=(c=n.proportionalLayout)!=null?c:!0,this.getSashOrthogonalSize=n.getSashOrthogonalSize,r&&(this.onDidChange=r),s&&(this.onDidDragStart=s),o&&(this.onDidDragEnd=o),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",fM),e.prepend(this.sashContainer),n.descriptor){this.size=n.descriptor.size;for(const[d,f]of n.descriptor.views.entries()){const p=f.size,y=f.container,b=f.view;this.addView(y,b,p,d,!0)}this.contentSize=this.viewItems.reduce((d,f)=>d+f.size,0),this.saveProportions()}}addView(e,n,r,s=this.viewItems.length,o){let u;u=typeof r=="number"?r:r.type==="split"?this.getViewSize(r.index)/2:r.type==="invisible"?{cachedVisibleSize:r.cachedVisibleSize}:n.minimumSize;const c=this.orientation===Vi.Vertical?new CM(e,n,u):new IM(e,n,u);if(this.viewItems.splice(s,0,c),this.viewItems.length>1){const d=this.orientation===Vi.Vertical?new sA(this.sashContainer,{getHorizontalSashTop:y=>this.getSashPosition(y),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:Vi.Horizontal}):new sA(this.sashContainer,{getVerticalSashLeft:y=>this.getSashPosition(y),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:Vi.Vertical}),f=this.orientation===Vi.Vertical?y=>({sash:d,start:y.startY,current:y.currentY}):y=>({sash:d,start:y.startX,current:y.currentX});d.on("start",y=>{var b;this.emit("sashDragStart"),this.onSashStart(f(y));const T=this.viewItems.map(x=>x.size);(b=this.onDidDragStart)==null||b.call(this,T)}),d.on("change",y=>this.onSashChange(f(y))),d.on("end",()=>{var y;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(T=>T.sash===d));const b=this.viewItems.map(T=>T.size);(y=this.onDidDragEnd)==null||y.call(this,b)}),d.on("reset",()=>{const y=this.sashItems.findIndex(k=>k.sash===d),b=Bi(y,-1,-1),T=Bi(y+1,this.viewItems.length),x=this.findFirstSnapIndex(b),N=this.findFirstSnapIndex(T);(typeof x!="number"||this.viewItems[x].visible)&&(typeof N!="number"||this.viewItems[N].visible)&&this.emit("sashreset",y)});const p={sash:d};this.sashItems.splice(s-1,0,p)}o||this.relayout(),o||typeof r=="number"||r.type!=="distribute"||this.distributeViewSizes()}removeView(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems.splice(e,1)[0].view;if(this.viewItems.length>=1){const s=Math.max(e-1,0);this.sashItems.splice(s,1)[0].sash.dispose()}return this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),r}moveView(e,n,r){const s=this.getViewCachedVisibleSize(n),o=s===void 0?this.getViewSize(n):L0.Invisible(s),u=this.removeView(n);this.addView(e,u,o,r)}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e=this.size){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.proportions)for(let r=0;r<this.viewItems.length;r++){const s=this.viewItems[r];s.size=Zi(Math.round(this.proportions[r]*e),s.minimumSize,s.maximumSize)}else{const r=Bi(0,this.viewItems.length),s=r.filter(u=>this.viewItems[u].priority===Ui.Low),o=r.filter(u=>this.viewItems[u].priority===Ui.High);this.resize(this.viewItems.length-1,e-n,void 0,s,o)}this.distributeEmptySpace(),this.layoutViews()}resizeView(e,n){if(e<0||e>=this.viewItems.length)return;const r=Bi(0,this.viewItems.length).filter(c=>c!==e),s=[...r.filter(c=>this.viewItems[c].priority===Ui.Low),e],o=r.filter(c=>this.viewItems[c].priority===Ui.High),u=this.viewItems[e];n=Math.round(n),n=Zi(n,u.minimumSize,Math.min(u.maximumSize,this.size)),u.size=n,this.relayout(s,o)}resizeViews(e){for(let n=0;n<e.length;n++){const r=this.viewItems[n];let s=e[n];s=Math.round(s),s=Zi(s,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=s}this.contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,n){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(n),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const e=[];let n=0;for(const c of this.viewItems)c.maximumSize-c.minimumSize>0&&(e.push(c),n+=c.size);const r=Math.floor(n/e.length);for(const c of e)c.size=Zi(r,c.minimumSize,c.maximumSize);const s=Bi(0,this.viewItems.length),o=s.filter(c=>this.viewItems[c].priority===Ui.Low),u=s.filter(c=>this.viewItems[c].priority===Ui.High);this.relayout(o,u)}dispose(){this.sashItems.forEach(e=>e.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(e,n){const r=this.viewItems.reduce((s,o)=>s+o.size,0);this.resize(this.viewItems.length-1,this.size-r,void 0,e,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:e,start:n}){const r=this.sashItems.findIndex(s=>s.sash===e);(s=>{const o=this.viewItems.map(z=>z.size);let u,c,d=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;const p=Bi(r,-1,-1),y=Bi(r+1,this.viewItems.length),b=p.reduce((z,Y)=>z+(this.viewItems[Y].minimumSize-o[Y]),0),T=p.reduce((z,Y)=>z+(this.viewItems[Y].viewMaximumSize-o[Y]),0),x=y.length===0?Number.POSITIVE_INFINITY:y.reduce((z,Y)=>z+(o[Y]-this.viewItems[Y].minimumSize),0),N=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((z,Y)=>z+(o[Y]-this.viewItems[Y].viewMaximumSize),0);d=Math.max(b,N),f=Math.min(x,T);const k=this.findFirstSnapIndex(p),D=this.findFirstSnapIndex(y);if(typeof k=="number"){const z=this.viewItems[k],Y=Math.floor(z.viewMinimumSize/2);u={index:k,limitDelta:z.visible?d-Y:d+Y,size:z.size}}if(typeof D=="number"){const z=this.viewItems[D],Y=Math.floor(z.viewMinimumSize/2);c={index:D,limitDelta:z.visible?f+Y:f-Y,size:z.size}}this.sashDragState={start:s,current:s,index:r,sizes:o,minDelta:d,maxDelta:f,snapBefore:u,snapAfter:c}})(n)}onSashChange({current:e}){const{index:n,start:r,sizes:s,minDelta:o,maxDelta:u,snapBefore:c,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const f=e-r;this.resize(n,f,s,void 0,void 0,o,u,c,d),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(e){let n=0;for(let r=0;r<this.sashItems.length;r++)if(n+=this.viewItems[r].size,this.sashItems[r].sash===e)return n;return 0}resize(e,n,r=this.viewItems.map(p=>p.size),s,o,u=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,d,f){if(e<0||e>=this.viewItems.length)return 0;const p=Bi(e,-1,-1),y=Bi(e+1,this.viewItems.length);if(o)for(const R of o)nA(p,R),nA(y,R);if(s)for(const R of s)sy(p,R),sy(y,R);const b=p.map(R=>this.viewItems[R]),T=p.map(R=>r[R]),x=y.map(R=>this.viewItems[R]),N=y.map(R=>r[R]),k=p.reduce((R,C)=>R+(this.viewItems[C].minimumSize-r[C]),0),D=p.reduce((R,C)=>R+(this.viewItems[C].maximumSize-r[C]),0),z=y.length===0?Number.POSITIVE_INFINITY:y.reduce((R,C)=>R+(r[C]-this.viewItems[C].minimumSize),0),Y=y.length===0?Number.NEGATIVE_INFINITY:y.reduce((R,C)=>R+(r[C]-this.viewItems[C].maximumSize),0),q=Math.max(k,Y,u),ee=Math.min(z,D,c);let $=!1;if(d){const R=this.viewItems[d.index],C=n>=d.limitDelta;$=C!==R.visible,R.setVisible(C,d.size)}if(!$&&f){const R=this.viewItems[f.index],C=n<f.limitDelta;$=C!==R.visible,R.setVisible(C,f.size)}if($)return this.resize(e,n,r,s,o,u,c);for(let R=0,C=n=Zi(n,q,ee);R<b.length;R++){const O=b[R],P=Zi(T[R]+C,O.minimumSize,O.maximumSize);C-=P-T[R],O.size=P}for(let R=0,C=n;R<x.length;R++){const O=x[R],P=Zi(N[R]-C,O.minimumSize,O.maximumSize);C+=P-N[R],O.size=P}return n}distributeEmptySpace(e){const n=this.viewItems.reduce((f,p)=>f+p.size,0);let r=this.size-n;const s=Bi(0,this.viewItems.length),o=[],u=s.filter(f=>this.viewItems[f].priority===Ui.Low),c=s.filter(f=>this.viewItems[f].priority===Ui.Normal),d=s.filter(f=>this.viewItems[f].priority===Ui.High);o.push(...d,...c,...u),typeof e=="number"&&sy(o,e);for(let f=0;r!==0&&f<o.length;f++){const p=this.viewItems[o[f]],y=Zi(p.size+r,p.minimumSize,p.maximumSize);r-=y-p.size,p.size=y}}layoutViews(){var e;this.contentSize=this.viewItems.reduce((r,s)=>r+s.size,0);let n=0;for(const r of this.viewItems)r.layout(n),n+=r.size;(e=this.onDidChange)!=null&&e.call(this,this.viewItems.map(r=>r.size)),this.sashItems.forEach(r=>r.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}updateSashEnablement(){let e=!1;const n=this.viewItems.map(d=>e=d.size-d.minimumSize>0||e);e=!1;const r=this.viewItems.map(d=>e=d.maximumSize-d.size>0||e),s=[...this.viewItems].reverse();e=!1;const o=s.map(d=>e=d.size-d.minimumSize>0||e).reverse();e=!1;const u=s.map(d=>e=d.maximumSize-d.size>0||e).reverse();let c=0;for(let d=0;d<this.sashItems.length;d++){const{sash:f}=this.sashItems[d];c+=this.viewItems[d].size;const p=!(n[d]&&u[d+1]),y=!(r[d]&&o[d+1]);if(p&&y){const b=Bi(d,-1,-1),T=Bi(d+1,this.viewItems.length),x=this.findFirstSnapIndex(b),N=this.findFirstSnapIndex(T),k=typeof x=="number"&&!this.viewItems[x].visible,D=typeof N=="number"&&!this.viewItems[N].visible;k&&o[d]&&(c>0||this.startSnappingEnabled)?f.state=pi.Minimum:D&&n[d]&&(c<this.contentSize||this.endSnappingEnabled)?f.state=pi.Maximum:f.state=pi.Disabled}else f.state=p&&!y?pi.Minimum:!p&&y?pi.Maximum:pi.Enabled}}findFirstSnapIndex(e){for(const n of e){const r=this.viewItems[n];if(r.visible&&r.snap)return n}for(const n of e){const r=this.viewItems[n];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return n}}}class il{constructor(e){this.size=void 0,this.size=e}getPreferredSize(){return this.size}}class aA{constructor(e,n){this.proportion=void 0,this.layoutService=void 0,this.proportion=e,this.layoutService=n}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class Xf{getPreferredSize(){}}class oA{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(e){if(typeof e=="number")this.layoutStrategy=new il(e);else if(typeof e=="string"){const n=e.trim();if(Kf(n,"%")){const r=Number(n.slice(0,-1))/100;this.layoutStrategy=new aA(r,this.layoutService)}else if(Kf(n,"px")){const r=Number(n.slice(0,-2))/100;this.layoutStrategy=new il(r)}else if(typeof Number.parseFloat(n)=="number"){const r=Number.parseFloat(n);this.layoutStrategy=new il(r)}else this.layoutStrategy=new Xf}else this.layoutStrategy=new Xf}constructor(e,n){var r;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=e,this.element=n.element,this.minimumSize=typeof n.minimumSize=="number"?n.minimumSize:30,this.maximumSize=typeof n.maximumSize=="number"?n.maximumSize:Number.POSITIVE_INFINITY,typeof n.preferredSize=="number")this.layoutStrategy=new il(n.preferredSize);else if(typeof n.preferredSize=="string"){const s=n.preferredSize.trim();if(Kf(s,"%")){const o=Number(s.slice(0,-1))/100;this.layoutStrategy=new aA(o,this.layoutService)}else if(Kf(s,"px")){const o=Number(s.slice(0,-2));this.layoutStrategy=new il(o)}else if(typeof Number.parseFloat(s)=="number"){const o=Number.parseFloat(s);this.layoutStrategy=new il(o)}else this.layoutStrategy=new Xf}else this.layoutStrategy=new Xf;this.priority=(r=n.priority)!=null?r:Ui.Normal,this.snap=typeof n.snap=="boolean"&&n.snap}layout(e){}}function uA(t){return t.minSize!==void 0||t.maxSize!==void 0||t.preferredSize!==void 0||t.priority!==void 0||t.visible!==void 0}const lE=re.forwardRef(({className:t,children:e},n)=>_e.createElement("div",{ref:n,className:e1("split-view-view",TI,t)},e));lE.displayName="Allotment.Pane";const CI=re.forwardRef(({children:t,className:e,id:n,maxSize:r=1/0,minSize:s=30,proportionalLayout:o=!0,separator:u=!0,sizes:c,defaultSizes:d=c,snap:f=!1,vertical:p=!1,onChange:y,onReset:b,onVisibleChange:T,onDragStart:x,onDragEnd:N},k)=>{const D=re.useRef(null),z=re.useRef([]),Y=re.useRef(new Map),q=re.useRef(null),ee=re.useRef(new Map),$=re.useRef(new _M),R=re.useRef([]),[C,O]=re.useState(!1),P=re.useMemo(()=>_e.Children.toArray(t).filter(_e.isValidElement),[t]),U=re.useCallback(V=>{var I,L;const K=(I=R.current)==null?void 0:I[V];return typeof K?.preferredSize=="number"&&((L=q.current)!=null&&L.resizeView(V,Math.round(K.preferredSize)),!0)},[]);return re.useImperativeHandle(k,()=>({reset:()=>{if(b)b();else{var V;(V=q.current)==null||V.distributeViewSizes();for(let I=0;I<R.current.length;I++)U(I)}},resize:V=>{var I;(I=q.current)==null||I.resizeViews(V)}})),W2(()=>{let V=!0;d&&ee.current.size!==d.length&&(V=!1,console.warn(`Expected ${d.length} children based on defaultSizes but found ${ee.current.size}`)),V&&d&&(z.current=P.map(K=>K.key));const I=Eh({orientation:p?Vi.Vertical:Vi.Horizontal,proportionalLayout:o},V&&d&&{descriptor:{size:d.reduce((K,F)=>K+F,0),views:d.map((K,F)=>{var Q,se,te,A;const J=Y.current.get(z.current[F]),ae=new oA($.current,Eh({element:document.createElement("div"),minimumSize:(Q=J?.minSize)!=null?Q:s,maximumSize:(se=J?.maxSize)!=null?se:r,priority:(te=J?.priority)!=null?te:Ui.Normal},J?.preferredSize&&{preferredSize:J?.preferredSize},{snap:(A=J?.snap)!=null?A:f}));return R.current.push(ae),{container:[...ee.current.values()][F],size:K,view:ae}})}});q.current=new NM(D.current,I,y,x,N),q.current.on("sashDragStart",()=>{var K;(K=D.current)==null||K.classList.add("split-view-sash-dragging")}),q.current.on("sashDragEnd",()=>{var K;(K=D.current)==null||K.classList.remove("split-view-sash-dragging")}),q.current.on("sashchange",K=>{if(T&&q.current){const F=P.map(Q=>Q.key);for(let Q=0;Q<F.length;Q++){const se=Y.current.get(F[Q]);se?.visible!==void 0&&se.visible!==q.current.isViewVisible(Q)&&T(Q,q.current.isViewVisible(Q))}}}),q.current.on("sashreset",K=>{if(b)b();else{var F;if(U(K)||U(K+1))return;(F=q.current)==null||F.distributeViewSizes()}});const L=q.current;return()=>{L.dispose()}},[]),W2(()=>{if(C){const B=P.map(we=>we.key),ge=[...z.current],Ne=B.filter(we=>!z.current.includes(we)),Ie=B.filter(we=>z.current.includes(we)),je=z.current.map(we=>!B.includes(we));for(let we=je.length-1;we>=0;we--){var V;je[we]&&((V=q.current)!=null&&V.removeView(we),ge.splice(we,1),R.current.splice(we,1))}for(const we of Ne){var I,L,K,F,Q;const Me=Y.current.get(we),He=new oA($.current,Eh({element:document.createElement("div"),minimumSize:(I=Me?.minSize)!=null?I:s,maximumSize:(L=Me?.maxSize)!=null?L:r,priority:(K=Me?.priority)!=null?K:Ui.Normal},Me?.preferredSize&&{preferredSize:Me?.preferredSize},{snap:(F=Me?.snap)!=null?F:f}));(Q=q.current)!=null&&Q.addView(ee.current.get(we),He,L0.Distribute,B.findIndex(Je=>Je===we)),ge.splice(B.findIndex(Je=>Je===we),0,we),R.current.splice(B.findIndex(Je=>Je===we),0,He)}for(;!cM(B,ge);)for(const[we,Me]of B.entries()){const He=ge.findIndex(Je=>Je===Me);if(He!==we){var se;(se=q.current)==null||se.moveView(ee.current.get(Me),He,we);const Je=ge[He];ge.splice(He,1),ge.splice(we,0,Je);break}}for(const we of Ne){var te;const Me=B.findIndex(Je=>Je===we),He=R.current[Me].preferredSize;He!==void 0&&((te=q.current)==null||te.resizeView(Me,He))}for(const we of[...Ne,...Ie]){var A,J;const Me=Y.current.get(we),He=B.findIndex(Je=>Je===we);Me&&uA(Me)&&Me.visible!==void 0&&((A=q.current)==null?void 0:A.isViewVisible(He))!==Me.visible&&((J=q.current)==null||J.setViewVisible(He,Me.visible))}for(const we of Ie){const Me=Y.current.get(we),He=B.findIndex(Je=>Je===we);if(Me&&uA(Me)){var ae;Me.preferredSize!==void 0&&R.current[He].preferredSize!==Me.preferredSize&&(R.current[He].preferredSize=Me.preferredSize);let Je=!1;Me.minSize!==void 0&&R.current[He].minimumSize!==Me.minSize&&(R.current[He].minimumSize=Me.minSize,Je=!0),Me.maxSize!==void 0&&R.current[He].maximumSize!==Me.maxSize&&(R.current[He].maximumSize=Me.maxSize,Je=!0),Je&&((ae=q.current)==null||ae.layout())}}(Ne.length>0||je.length>0)&&(z.current=B)}},[P,C,r,s,f]),re.useEffect(()=>{q.current&&(q.current.onDidChange=y)},[y]),re.useEffect(()=>{q.current&&(q.current.onDidDragStart=x)},[x]),re.useEffect(()=>{q.current&&(q.current.onDidDragEnd=N)},[N]),hM({ref:D,onResize:({width:V,height:I})=>{var L;V&&I&&((L=q.current)!=null&&L.layout(p?I:V),$.current.setSize(p?I:V),O(!0))}}),re.useEffect(()=>{SI&&RM(20)},[]),_e.createElement("div",{ref:D,className:e1("split-view",p?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":u},dM,p?pM:gM,{[yM]:u},e),id:n},_e.createElement("div",{className:e1("split-view-container",mM)},_e.Children.toArray(t).map(V=>{if(!_e.isValidElement(V))return null;const I=V.key;return V.type.displayName==="Allotment.Pane"?(Y.current.set(I,V.props),_e.cloneElement(V,{key:I,ref:L=>{const K=V.ref;K&&(K.current=L),L?ee.current.set(I,L):ee.current.delete(I)}})):_e.createElement(lE,{key:I,ref:L=>{L?ee.current.set(I,L):ee.current.delete(I)}},V)})))});function RM(t){const e=Zi(t,4,20),n=Zi(t,1,8);document.documentElement.style.setProperty("--sash-size",e+"px"),document.documentElement.style.setProperty("--sash-hover-size",n+"px"),function(r){xI=r,wI.emit("onDidChangeGlobalSize",r)}(e)}CI.displayName="Allotment";var ly=Object.assign(CI,{Pane:lE});const DM=()=>{};var lA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},OM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],c=t[n++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},RI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,c=u?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,p=o>>2,y=(o&3)<<4|c>>4;let b=(c&15)<<2|f>>6,T=f&63;d||(T=64,u||(b=64)),r.push(n[p],n[y],n[b],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(NI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||f==null||y==null)throw new kM;const b=o<<2|c>>4;if(r.push(b),f!==64){const T=c<<4&240|f>>2;if(r.push(T),y!==64){const x=f<<6&192|y;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LM=function(t){const e=NI(t);return RI.encodeByteArray(e,!0)},M0=function(t){return LM(t).replace(/\./g,"")},DI=function(t){try{return RI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=()=>MM().__FIREBASE_DEFAULTS__,BM=()=>{if(typeof process>"u"||typeof lA>"u")return;const t=lA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DI(t[1]);return e&&JSON.parse(e)},mm=()=>{try{return DM()||PM()||BM()||UM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,n;return(n=(e=mm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kI=t=>{const e=OI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LI=()=>{var t;return(t=mm())===null||t===void 0?void 0:t.config},MI=t=>{var e;return(e=mm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){return t.endsWith(".cloudworkstations.dev")}async function cE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[M0(JSON.stringify(n)),M0(JSON.stringify(u)),""].join(".")}const _h={};function FM(){const t={prod:[],emulator:[]};for(const e of Object.keys(_h))_h[e]?t.emulator.push(e):t.prod.push(e);return t}function zM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cA=!1;function hE(t,e){if(typeof window>"u"||typeof document>"u"||!cu(window.location.host)||_h[t]===e||_h[t]||cA)return;_h[t]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",o=FM().prod.length>0;function u(){const b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,T){b.setAttribute("width","24"),b.setAttribute("id",T),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{cA=!0,u()},b}function p(b,T){b.setAttribute("id",T),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){const b=zM(r),T=n("text"),x=document.getElementById(T)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),D=n("preprendIcon"),z=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Y=b.element;c(Y),p(k,N);const q=f();d(z,D),Y.append(z,x,k,q),document.body.appendChild(Y)}o?(x.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function qM(){var t;const e=(t=mm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $M(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KM(){const t=Ir();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XM(){return!qM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QM(){try{return typeof indexedDB=="object"}catch{return!1}}function WM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="FirebaseError";class Ps extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZM,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,od.prototype.create)}}class od{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?JM(o,r):"Error",c=`${this.serviceName}: ${u} (${s}).`;return new Ps(s,c,r)}}function JM(t,e){return t.replace(eP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const eP=/\{\$([^}]+)}/g;function tP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ru(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(hA(o)&&hA(u)){if(!ru(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function hA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function fh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nP(t,e){const n=new rP(t,e);return n.subscribe.bind(n)}class rP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cy),s.error===void 0&&(s.error=cy),s.complete===void 0&&(s.complete=cy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oP(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aP(t){return t===Xo?void 0:t}function oP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Et||(Et={}));const lP={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},cP=Et.INFO,hP={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},dP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=hP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dE{constructor(e){this.name=e,this._logLevel=cP,this._logHandler=dP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...e),this._logHandler(this,Et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...e),this._logHandler(this,Et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Et.INFO,...e),this._logHandler(this,Et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Et.WARN,...e),this._logHandler(this,Et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...e),this._logHandler(this,Et.ERROR,...e)}}const fP=(t,e)=>e.some(n=>t instanceof n);let dA,fA;function mP(){return dA||(dA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pP(){return fA||(fA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PI=new WeakMap,t1=new WeakMap,BI=new WeakMap,hy=new WeakMap,fE=new WeakMap;function gP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(io(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&PI.set(n,t)}).catch(()=>{}),fE.set(e,t),e}function yP(t){if(t1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});t1.set(t,e)}let n1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return t1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EP(t){n1=t(n1)}function _P(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dy(this),e,...n);return BI.set(r,e.sort?e.sort():[e]),io(r)}:pP().includes(t)?function(...e){return t.apply(dy(this),e),io(PI.get(this))}:function(...e){return io(t.apply(dy(this),e))}}function bP(t){return typeof t=="function"?_P(t):(t instanceof IDBTransaction&&yP(t),fP(t,mP())?new Proxy(t,n1):t)}function io(t){if(t instanceof IDBRequest)return gP(t);if(hy.has(t))return hy.get(t);const e=bP(t);return e!==t&&(hy.set(t,e),fE.set(e,t)),e}const dy=t=>fE.get(t);function TP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),c=io(u);return r&&u.addEventListener("upgradeneeded",d=>{r(io(u.result),d.oldVersion,d.newVersion,io(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const vP=["get","getKey","getAll","getAllKeys","count"],AP=["put","add","delete","clear"],fy=new Map;function mA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fy.get(e))return fy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vP.includes(n)))return;const o=async function(u,...c){const d=this.transaction(u,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),s&&d.done]))[0]};return fy.set(e,o),o}EP(t=>({...t,get:(e,n,r)=>mA(e,n)||t.get(e,n,r),has:(e,n)=>!!mA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xP(t){const e=t.getComponent();return e?.type==="VERSION"}const r1="@firebase/app",pA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new dE("@firebase/app"),wP="@firebase/app-compat",IP="@firebase/analytics-compat",CP="@firebase/analytics",NP="@firebase/app-check-compat",RP="@firebase/app-check",DP="@firebase/auth",OP="@firebase/auth-compat",kP="@firebase/database",LP="@firebase/data-connect",MP="@firebase/database-compat",PP="@firebase/functions",BP="@firebase/functions-compat",UP="@firebase/installations",VP="@firebase/installations-compat",HP="@firebase/messaging",FP="@firebase/messaging-compat",zP="@firebase/performance",jP="@firebase/performance-compat",qP="@firebase/remote-config",YP="@firebase/remote-config-compat",GP="@firebase/storage",$P="@firebase/storage-compat",KP="@firebase/firestore",XP="@firebase/ai",QP="@firebase/firestore-compat",WP="firebase",ZP="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="[DEFAULT]",JP={[r1]:"fire-core",[wP]:"fire-core-compat",[CP]:"fire-analytics",[IP]:"fire-analytics-compat",[RP]:"fire-app-check",[NP]:"fire-app-check-compat",[DP]:"fire-auth",[OP]:"fire-auth-compat",[kP]:"fire-rtdb",[LP]:"fire-data-connect",[MP]:"fire-rtdb-compat",[PP]:"fire-fn",[BP]:"fire-fn-compat",[UP]:"fire-iid",[VP]:"fire-iid-compat",[HP]:"fire-fcm",[FP]:"fire-fcm-compat",[zP]:"fire-perf",[jP]:"fire-perf-compat",[qP]:"fire-rc",[YP]:"fire-rc-compat",[GP]:"fire-gcs",[$P]:"fire-gcs-compat",[KP]:"fire-fst",[QP]:"fire-fst-compat",[XP]:"fire-vertex","fire-js":"fire-js",[WP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new Map,e8=new Map,s1=new Map;function gA(t,e){try{t.container.addComponent(e)}catch(n){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function iu(t){const e=t.name;if(s1.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;s1.set(e,t);for(const n of P0.values())gA(n,t);for(const n of e8.values())gA(n,t);return!0}function pm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new od("app","Firebase",t8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=ZP;function UI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:i1,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw so.create("bad-app-name",{appName:String(s)});if(n||(n=LI()),!n)throw so.create("no-options");const o=P0.get(s);if(o){if(ru(n,o.options)&&ru(r,o.config))return o;throw so.create("duplicate-app",{appName:s})}const u=new uP(s);for(const d of s1.values())u.addComponent(d);const c=new n8(n,r,u);return P0.set(s,c),c}function mE(t=i1){const e=P0.get(t);if(!e&&t===i1&&LI())return UI();if(!e)throw so.create("no-app",{appName:t});return e}function Cs(t,e,n){var r;let s=(r=JP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(c.join(" "));return}iu(new co(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8="firebase-heartbeat-database",i8=1,zh="firebase-heartbeat-store";let my=null;function VI(){return my||(my=TP(r8,i8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zh)}catch(n){console.warn(n)}}}}).catch(t=>{throw so.create("idb-open",{originalErrorMessage:t.message})})),my}async function s8(t){try{const n=(await VI()).transaction(zh),r=await n.objectStore(zh).get(HI(t));return await n.done,r}catch(e){if(e instanceof Ps)fa.warn(e.message);else{const n=so.create("idb-get",{originalErrorMessage:e?.message});fa.warn(n.message)}}}async function yA(t,e){try{const r=(await VI()).transaction(zh,"readwrite");await r.objectStore(zh).put(e,HI(t)),await r.done}catch(n){if(n instanceof Ps)fa.warn(n.message);else{const r=so.create("idb-set",{originalErrorMessage:n?.message});fa.warn(r.message)}}}function HI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=1024,o8=30;class u8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c8(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>o8){const u=h8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=EA(),{heartbeatsToSend:r,unsentEntries:s}=l8(this._heartbeatsCache.heartbeats),o=M0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return fa.warn(n),""}}}function EA(){return new Date().toISOString().substring(0,10)}function l8(t,e=a8){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),_A(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_A(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class c8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QM()?WM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await s8(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _A(t){return M0(JSON.stringify({version:2,heartbeats:t})).length}function h8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){iu(new co("platform-logger",e=>new SP(e),"PRIVATE")),iu(new co("heartbeat",e=>new u8(e),"PRIVATE")),Cs(r1,pA,t),Cs(r1,pA,"esm2017"),Cs("fire-js","")}d8("");var f8="firebase",m8="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(f8,m8,"app");var bA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,FI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function O(){}O.prototype=C.prototype,R.D=C.prototype,R.prototype=new O,R.prototype.constructor=R,R.C=function(P,U,V){for(var I=Array(arguments.length-2),L=2;L<arguments.length;L++)I[L-2]=arguments[L];return C.prototype[U].apply(P,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,C,O){O||(O=0);var P=Array(16);if(typeof C=="string")for(var U=0;16>U;++U)P[U]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(U=0;16>U;++U)P[U]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=R.g[0],O=R.g[1],U=R.g[2];var V=R.g[3],I=C+(V^O&(U^V))+P[0]+3614090360&4294967295;C=O+(I<<7&4294967295|I>>>25),I=V+(U^C&(O^U))+P[1]+3905402710&4294967295,V=C+(I<<12&4294967295|I>>>20),I=U+(O^V&(C^O))+P[2]+606105819&4294967295,U=V+(I<<17&4294967295|I>>>15),I=O+(C^U&(V^C))+P[3]+3250441966&4294967295,O=U+(I<<22&4294967295|I>>>10),I=C+(V^O&(U^V))+P[4]+4118548399&4294967295,C=O+(I<<7&4294967295|I>>>25),I=V+(U^C&(O^U))+P[5]+1200080426&4294967295,V=C+(I<<12&4294967295|I>>>20),I=U+(O^V&(C^O))+P[6]+2821735955&4294967295,U=V+(I<<17&4294967295|I>>>15),I=O+(C^U&(V^C))+P[7]+4249261313&4294967295,O=U+(I<<22&4294967295|I>>>10),I=C+(V^O&(U^V))+P[8]+1770035416&4294967295,C=O+(I<<7&4294967295|I>>>25),I=V+(U^C&(O^U))+P[9]+2336552879&4294967295,V=C+(I<<12&4294967295|I>>>20),I=U+(O^V&(C^O))+P[10]+4294925233&4294967295,U=V+(I<<17&4294967295|I>>>15),I=O+(C^U&(V^C))+P[11]+2304563134&4294967295,O=U+(I<<22&4294967295|I>>>10),I=C+(V^O&(U^V))+P[12]+1804603682&4294967295,C=O+(I<<7&4294967295|I>>>25),I=V+(U^C&(O^U))+P[13]+4254626195&4294967295,V=C+(I<<12&4294967295|I>>>20),I=U+(O^V&(C^O))+P[14]+2792965006&4294967295,U=V+(I<<17&4294967295|I>>>15),I=O+(C^U&(V^C))+P[15]+1236535329&4294967295,O=U+(I<<22&4294967295|I>>>10),I=C+(U^V&(O^U))+P[1]+4129170786&4294967295,C=O+(I<<5&4294967295|I>>>27),I=V+(O^U&(C^O))+P[6]+3225465664&4294967295,V=C+(I<<9&4294967295|I>>>23),I=U+(C^O&(V^C))+P[11]+643717713&4294967295,U=V+(I<<14&4294967295|I>>>18),I=O+(V^C&(U^V))+P[0]+3921069994&4294967295,O=U+(I<<20&4294967295|I>>>12),I=C+(U^V&(O^U))+P[5]+3593408605&4294967295,C=O+(I<<5&4294967295|I>>>27),I=V+(O^U&(C^O))+P[10]+38016083&4294967295,V=C+(I<<9&4294967295|I>>>23),I=U+(C^O&(V^C))+P[15]+3634488961&4294967295,U=V+(I<<14&4294967295|I>>>18),I=O+(V^C&(U^V))+P[4]+3889429448&4294967295,O=U+(I<<20&4294967295|I>>>12),I=C+(U^V&(O^U))+P[9]+568446438&4294967295,C=O+(I<<5&4294967295|I>>>27),I=V+(O^U&(C^O))+P[14]+3275163606&4294967295,V=C+(I<<9&4294967295|I>>>23),I=U+(C^O&(V^C))+P[3]+4107603335&4294967295,U=V+(I<<14&4294967295|I>>>18),I=O+(V^C&(U^V))+P[8]+1163531501&4294967295,O=U+(I<<20&4294967295|I>>>12),I=C+(U^V&(O^U))+P[13]+2850285829&4294967295,C=O+(I<<5&4294967295|I>>>27),I=V+(O^U&(C^O))+P[2]+4243563512&4294967295,V=C+(I<<9&4294967295|I>>>23),I=U+(C^O&(V^C))+P[7]+1735328473&4294967295,U=V+(I<<14&4294967295|I>>>18),I=O+(V^C&(U^V))+P[12]+2368359562&4294967295,O=U+(I<<20&4294967295|I>>>12),I=C+(O^U^V)+P[5]+4294588738&4294967295,C=O+(I<<4&4294967295|I>>>28),I=V+(C^O^U)+P[8]+2272392833&4294967295,V=C+(I<<11&4294967295|I>>>21),I=U+(V^C^O)+P[11]+1839030562&4294967295,U=V+(I<<16&4294967295|I>>>16),I=O+(U^V^C)+P[14]+4259657740&4294967295,O=U+(I<<23&4294967295|I>>>9),I=C+(O^U^V)+P[1]+2763975236&4294967295,C=O+(I<<4&4294967295|I>>>28),I=V+(C^O^U)+P[4]+1272893353&4294967295,V=C+(I<<11&4294967295|I>>>21),I=U+(V^C^O)+P[7]+4139469664&4294967295,U=V+(I<<16&4294967295|I>>>16),I=O+(U^V^C)+P[10]+3200236656&4294967295,O=U+(I<<23&4294967295|I>>>9),I=C+(O^U^V)+P[13]+681279174&4294967295,C=O+(I<<4&4294967295|I>>>28),I=V+(C^O^U)+P[0]+3936430074&4294967295,V=C+(I<<11&4294967295|I>>>21),I=U+(V^C^O)+P[3]+3572445317&4294967295,U=V+(I<<16&4294967295|I>>>16),I=O+(U^V^C)+P[6]+76029189&4294967295,O=U+(I<<23&4294967295|I>>>9),I=C+(O^U^V)+P[9]+3654602809&4294967295,C=O+(I<<4&4294967295|I>>>28),I=V+(C^O^U)+P[12]+3873151461&4294967295,V=C+(I<<11&4294967295|I>>>21),I=U+(V^C^O)+P[15]+530742520&4294967295,U=V+(I<<16&4294967295|I>>>16),I=O+(U^V^C)+P[2]+3299628645&4294967295,O=U+(I<<23&4294967295|I>>>9),I=C+(U^(O|~V))+P[0]+4096336452&4294967295,C=O+(I<<6&4294967295|I>>>26),I=V+(O^(C|~U))+P[7]+1126891415&4294967295,V=C+(I<<10&4294967295|I>>>22),I=U+(C^(V|~O))+P[14]+2878612391&4294967295,U=V+(I<<15&4294967295|I>>>17),I=O+(V^(U|~C))+P[5]+4237533241&4294967295,O=U+(I<<21&4294967295|I>>>11),I=C+(U^(O|~V))+P[12]+1700485571&4294967295,C=O+(I<<6&4294967295|I>>>26),I=V+(O^(C|~U))+P[3]+2399980690&4294967295,V=C+(I<<10&4294967295|I>>>22),I=U+(C^(V|~O))+P[10]+4293915773&4294967295,U=V+(I<<15&4294967295|I>>>17),I=O+(V^(U|~C))+P[1]+2240044497&4294967295,O=U+(I<<21&4294967295|I>>>11),I=C+(U^(O|~V))+P[8]+1873313359&4294967295,C=O+(I<<6&4294967295|I>>>26),I=V+(O^(C|~U))+P[15]+4264355552&4294967295,V=C+(I<<10&4294967295|I>>>22),I=U+(C^(V|~O))+P[6]+2734768916&4294967295,U=V+(I<<15&4294967295|I>>>17),I=O+(V^(U|~C))+P[13]+1309151649&4294967295,O=U+(I<<21&4294967295|I>>>11),I=C+(U^(O|~V))+P[4]+4149444226&4294967295,C=O+(I<<6&4294967295|I>>>26),I=V+(O^(C|~U))+P[11]+3174756917&4294967295,V=C+(I<<10&4294967295|I>>>22),I=U+(C^(V|~O))+P[2]+718787259&4294967295,U=V+(I<<15&4294967295|I>>>17),I=O+(V^(U|~C))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(U+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+V&4294967295}r.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var O=C-this.blockSize,P=this.B,U=this.h,V=0;V<C;){if(U==0)for(;V<=O;)s(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<C;)if(P[U++]=R.charCodeAt(V++),U==this.blockSize){s(this,P),U=0;break}}else for(;V<C;)if(P[U++]=R[V++],U==this.blockSize){s(this,P),U=0;break}}this.h=U,this.o+=C},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var O=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=O&255,O/=256;for(this.u(R),R=Array(16),C=O=0;4>C;++C)for(var P=0;32>P;P+=8)R[O++]=this.g[C]>>>P&255;return R};function o(R,C){var O=c;return Object.prototype.hasOwnProperty.call(O,R)?O[R]:O[R]=C(R)}function u(R,C){this.h=C;for(var O=[],P=!0,U=R.length-1;0<=U;U--){var V=R[U]|0;P&&V==C||(O[U]=V,P=!1)}this.g=O}var c={};function d(R){return-128<=R&&128>R?o(R,function(C){return new u([C|0],0>C?-1:0)}):new u([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return k(f(-R));for(var C=[],O=1,P=0;R>=O;P++)C[P]=R/O|0,O*=4294967296;return new u(C,0)}function p(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return k(p(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=f(Math.pow(C,8)),P=y,U=0;U<R.length;U+=8){var V=Math.min(8,R.length-U),I=parseInt(R.substring(U,U+V),C);8>V?(V=f(Math.pow(C,V)),P=P.j(V).add(f(I))):(P=P.j(O),P=P.add(f(I)))}return P}var y=d(0),b=d(1),T=d(16777216);t=u.prototype,t.m=function(){if(N(this))return-k(this).m();for(var R=0,C=1,O=0;O<this.g.length;O++){var P=this.i(O);R+=(0<=P?P:4294967296+P)*C,C*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(N(this))return"-"+k(this).toString(R);for(var C=f(Math.pow(R,6)),O=this,P="";;){var U=q(O,C).g;O=D(O,U.j(C));var V=((0<O.g.length?O.g[0]:O.h)>>>0).toString(R);if(O=U,x(O))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=D(this,R),N(R)?-1:x(R)?0:1};function k(R){for(var C=R.g.length,O=[],P=0;P<C;P++)O[P]=~R.g[P];return new u(O,~R.h).add(b)}t.abs=function(){return N(this)?k(this):this},t.add=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],P=0,U=0;U<=C;U++){var V=P+(this.i(U)&65535)+(R.i(U)&65535),I=(V>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);P=I>>>16,V&=65535,I&=65535,O[U]=I<<16|V}return new u(O,O[O.length-1]&-2147483648?-1:0)};function D(R,C){return R.add(k(C))}t.j=function(R){if(x(this)||x(R))return y;if(N(this))return N(R)?k(this).j(k(R)):k(k(this).j(R));if(N(R))return k(this.j(k(R)));if(0>this.l(T)&&0>R.l(T))return f(this.m()*R.m());for(var C=this.g.length+R.g.length,O=[],P=0;P<2*C;P++)O[P]=0;for(P=0;P<this.g.length;P++)for(var U=0;U<R.g.length;U++){var V=this.i(P)>>>16,I=this.i(P)&65535,L=R.i(U)>>>16,K=R.i(U)&65535;O[2*P+2*U]+=I*K,z(O,2*P+2*U),O[2*P+2*U+1]+=V*K,z(O,2*P+2*U+1),O[2*P+2*U+1]+=I*L,z(O,2*P+2*U+1),O[2*P+2*U+2]+=V*L,z(O,2*P+2*U+2)}for(P=0;P<C;P++)O[P]=O[2*P+1]<<16|O[2*P];for(P=C;P<2*C;P++)O[P]=0;return new u(O,0)};function z(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function Y(R,C){this.g=R,this.h=C}function q(R,C){if(x(C))throw Error("division by zero");if(x(R))return new Y(y,y);if(N(R))return C=q(k(R),C),new Y(k(C.g),k(C.h));if(N(C))return C=q(R,k(C)),new Y(k(C.g),C.h);if(30<R.g.length){if(N(R)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var O=b,P=C;0>=P.l(R);)O=ee(O),P=ee(P);var U=$(O,1),V=$(P,1);for(P=$(P,2),O=$(O,2);!x(P);){var I=V.add(P);0>=I.l(R)&&(U=U.add(O),V=I),P=$(P,1),O=$(O,1)}return C=D(R,U.j(C)),new Y(U,C)}for(U=y;0<=R.l(C);){for(O=Math.max(1,Math.floor(R.m()/C.m())),P=Math.ceil(Math.log(O)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=f(O),I=V.j(C);N(I)||0<I.l(R);)O-=P,V=f(O),I=V.j(C);x(V)&&(V=b),U=U.add(V),R=D(R,I)}return new Y(U,R)}t.A=function(R){return q(this,R).h},t.and=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],P=0;P<C;P++)O[P]=this.i(P)&R.i(P);return new u(O,this.h&R.h)},t.or=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],P=0;P<C;P++)O[P]=this.i(P)|R.i(P);return new u(O,this.h|R.h)},t.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),O=[],P=0;P<C;P++)O[P]=this.i(P)^R.i(P);return new u(O,this.h^R.h)};function ee(R){for(var C=R.g.length+1,O=[],P=0;P<C;P++)O[P]=R.i(P)<<1|R.i(P-1)>>>31;return new u(O,R.h)}function $(R,C){var O=C>>5;C%=32;for(var P=R.g.length-O,U=[],V=0;V<P;V++)U[V]=0<C?R.i(V+O)>>>C|R.i(V+O+1)<<32-C:R.i(V+O);return new u(U,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=p,ao=u}).apply(typeof bA<"u"?bA:typeof self<"u"?self:typeof window<"u"?window:{});var Qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zI,mh,jI,h0,a1,qI,YI,GI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,v,S){return m==Array.prototype||m==Object.prototype||(m[v]=S.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qf=="object"&&Qf];for(var v=0;v<m.length;++v){var S=m[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(m,v){if(v)e:{var S=r;m=m.split(".");for(var j=0;j<m.length-1;j++){var ue=m[j];if(!(ue in S))break e;S=S[ue]}m=m[m.length-1],j=S[m],v=v(j),v!=j&&v!=null&&e(S,m,{configurable:!0,writable:!0,value:v})}}function o(m,v){m instanceof String&&(m+="");var S=0,j=!1,ue={next:function(){if(!j&&S<m.length){var ye=S++;return{value:v(ye,m[ye]),done:!1}}return j=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}s("Array.prototype.values",function(m){return m||function(){return o(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(m){var v=typeof m;return v=v!="object"?v:m?Array.isArray(m)?"array":v:"null",v=="array"||v=="object"&&typeof m.length=="number"}function f(m){var v=typeof m;return v=="object"&&m!=null||v=="function"}function p(m,v,S){return m.call.apply(m.bind,arguments)}function y(m,v,S){if(!m)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,j),m.apply(v,ue)}}return function(){return m.apply(v,arguments)}}function b(m,v,S){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,b.apply(null,arguments)}function T(m,v){var S=Array.prototype.slice.call(arguments,1);return function(){var j=S.slice();return j.push.apply(j,arguments),m.apply(this,j)}}function x(m,v){function S(){}S.prototype=v.prototype,m.aa=v.prototype,m.prototype=new S,m.prototype.constructor=m,m.Qb=function(j,ue,ye){for(var Le=Array(arguments.length-2),St=2;St<arguments.length;St++)Le[St-2]=arguments[St];return v.prototype[ue].apply(j,Le)}}function N(m){const v=m.length;if(0<v){const S=Array(v);for(let j=0;j<v;j++)S[j]=m[j];return S}return[]}function k(m,v){for(let S=1;S<arguments.length;S++){const j=arguments[S];if(d(j)){const ue=m.length||0,ye=j.length||0;m.length=ue+ye;for(let Le=0;Le<ye;Le++)m[ue+Le]=j[Le]}else m.push(j)}}class D{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function z(m){return/^[\s\xa0]*$/.test(m)}function Y(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function q(m){return q[" "](m),m}q[" "]=function(){};var ee=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function $(m,v,S){for(const j in m)v.call(S,m[j],j,m)}function R(m,v){for(const S in m)v.call(void 0,m[S],S,m)}function C(m){const v={};for(const S in m)v[S]=m[S];return v}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,v){let S,j;for(let ue=1;ue<arguments.length;ue++){j=arguments[ue];for(S in j)m[S]=j[S];for(let ye=0;ye<O.length;ye++)S=O[ye],Object.prototype.hasOwnProperty.call(j,S)&&(m[S]=j[S])}}function U(m){var v=1;m=m.split(":");const S=[];for(;0<v&&m.length;)S.push(m.shift()),v--;return m.length&&S.push(m.join(":")),S}function V(m){c.setTimeout(()=>{throw m},0)}function I(){var m=te;let v=null;return m.g&&(v=m.g,m.g=m.g.next,m.g||(m.h=null),v.next=null),v}class L{constructor(){this.h=this.g=null}add(v,S){const j=K.get();j.set(v,S),this.h?this.h.next=j:this.g=j,this.h=j}}var K=new D(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,se=!1,te=new L,A=()=>{const m=c.Promise.resolve(void 0);Q=()=>{m.then(J)}};var J=()=>{for(var m;m=I();){try{m.h.call(m.g)}catch(S){V(S)}var v=K;v.j(m),100>v.h&&(v.h++,m.next=v.g,v.g=m)}se=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(m,v){this.type=m,this.g=this.target=v,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,v=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};c.addEventListener("test",S,v),c.removeEventListener("test",S,v)}catch{}return m}();function Ne(m,v){if(B.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var S=this.type=m.type,j=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=v,v=m.relatedTarget){if(ee){e:{try{q(v.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(v=null)}}else S=="mouseover"?v=m.fromElement:S=="mouseout"&&(v=m.toElement);this.relatedTarget=v,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ie[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ne.aa.h.call(this)}}x(Ne,B);var Ie={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),we=0;function Me(m,v,S,j,ue){this.listener=m,this.proxy=null,this.src=v,this.type=S,this.capture=!!j,this.ha=ue,this.key=++we,this.da=this.fa=!1}function He(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Je(m){this.src=m,this.g={},this.h=0}Je.prototype.add=function(m,v,S,j,ue){var ye=m.toString();m=this.g[ye],m||(m=this.g[ye]=[],this.h++);var Le=Jt(m,v,j,ue);return-1<Le?(v=m[Le],S||(v.fa=!1)):(v=new Me(v,this.src,ye,!!j,ue),v.fa=S,m.push(v)),v};function an(m,v){var S=v.type;if(S in m.g){var j=m.g[S],ue=Array.prototype.indexOf.call(j,v,void 0),ye;(ye=0<=ue)&&Array.prototype.splice.call(j,ue,1),ye&&(He(v),m.g[S].length==0&&(delete m.g[S],m.h--))}}function Jt(m,v,S,j){for(var ue=0;ue<m.length;++ue){var ye=m[ue];if(!ye.da&&ye.listener==v&&ye.capture==!!S&&ye.ha==j)return ue}return-1}var on="closure_lm_"+(1e6*Math.random()|0),Dt={};function Rn(m,v,S,j,ue){if(Array.isArray(v)){for(var ye=0;ye<v.length;ye++)Rn(m,v[ye],S,j,ue);return null}return S=or(S),m&&m[je]?m.K(v,S,f(j)?!!j.capture:!1,ue):Qe(m,v,S,!1,j,ue)}function Qe(m,v,S,j,ue,ye){if(!v)throw Error("Invalid event type");var Le=f(ue)?!!ue.capture:!!ue,St=Hn(m);if(St||(m[on]=St=new Je(m)),S=St.add(v,S,j,Le,ye),S.proxy)return S;if(j=qe(),S.proxy=j,j.src=m,j.listener=S,m.addEventListener)ge||(ue=Le),ue===void 0&&(ue=!1),m.addEventListener(v.toString(),j,ue);else if(m.attachEvent)m.attachEvent(Vn(v.toString()),j);else if(m.addListener&&m.removeListener)m.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return S}function qe(){function m(S){return v.call(m.src,m.listener,S)}const v=Kn;return m}function cn(m,v,S,j,ue){if(Array.isArray(v))for(var ye=0;ye<v.length;ye++)cn(m,v[ye],S,j,ue);else j=f(j)?!!j.capture:!!j,S=or(S),m&&m[je]?(m=m.i,v=String(v).toString(),v in m.g&&(ye=m.g[v],S=Jt(ye,S,j,ue),-1<S&&(He(ye[S]),Array.prototype.splice.call(ye,S,1),ye.length==0&&(delete m.g[v],m.h--)))):m&&(m=Hn(m))&&(v=m.g[v.toString()],m=-1,v&&(m=Jt(v,S,j,ue)),(S=-1<m?v[m]:null)&&Un(S))}function Un(m){if(typeof m!="number"&&m&&!m.da){var v=m.src;if(v&&v[je])an(v.i,m);else{var S=m.type,j=m.proxy;v.removeEventListener?v.removeEventListener(S,j,m.capture):v.detachEvent?v.detachEvent(Vn(S),j):v.addListener&&v.removeListener&&v.removeListener(j),(S=Hn(v))?(an(S,m),S.h==0&&(S.src=null,v[on]=null)):He(m)}}}function Vn(m){return m in Dt?Dt[m]:Dt[m]="on"+m}function Kn(m,v){if(m.da)m=!0;else{v=new Ne(v,this);var S=m.listener,j=m.ha||m.src;m.fa&&Un(m),m=S.call(j,v)}return m}function Hn(m){return m=m[on],m instanceof Je?m:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function or(m){return typeof m=="function"?m:(m[Sn]||(m[Sn]=function(v){return m.handleEvent(v)}),m[Sn])}function de(){ae.call(this),this.i=new Je(this),this.M=this,this.F=null}x(de,ae),de.prototype[je]=!0,de.prototype.removeEventListener=function(m,v,S,j){cn(this,m,v,S,j)};function Te(m,v){var S,j=m.F;if(j)for(S=[];j;j=j.F)S.push(j);if(m=m.M,j=v.type||v,typeof v=="string")v=new B(v,m);else if(v instanceof B)v.target=v.target||m;else{var ue=v;v=new B(j,m),P(v,ue)}if(ue=!0,S)for(var ye=S.length-1;0<=ye;ye--){var Le=v.g=S[ye];ue=Ve(Le,j,!0,v)&&ue}if(Le=v.g=m,ue=Ve(Le,j,!0,v)&&ue,ue=Ve(Le,j,!1,v)&&ue,S)for(ye=0;ye<S.length;ye++)Le=v.g=S[ye],ue=Ve(Le,j,!1,v)&&ue}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var m=this.i,v;for(v in m.g){for(var S=m.g[v],j=0;j<S.length;j++)He(S[j]);delete m.g[v],m.h--}}this.F=null},de.prototype.K=function(m,v,S,j){return this.i.add(String(m),v,!1,S,j)},de.prototype.L=function(m,v,S,j){return this.i.add(String(m),v,!0,S,j)};function Ve(m,v,S,j){if(v=m.i.g[String(v)],!v)return!0;v=v.concat();for(var ue=!0,ye=0;ye<v.length;++ye){var Le=v[ye];if(Le&&!Le.da&&Le.capture==S){var St=Le.listener,jn=Le.ha||Le.src;Le.fa&&an(m.i,Le),ue=St.call(jn,j)!==!1&&ue}}return ue&&!j.defaultPrevented}function Ye(m,v,S){if(typeof m=="function")S&&(m=b(m,S));else if(m&&typeof m.handleEvent=="function")m=b(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(m,v||0)}function ut(m){m.g=Ye(()=>{m.g=null,m.i&&(m.i=!1,ut(m))},m.l);const v=m.h;m.h=null,m.m.apply(null,v)}class Tt extends ae{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ut(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(m){ae.call(this),this.h=m,this.g={}}x(Ht,ae);var Ft=[];function zt(m){$(m.g,function(v,S){this.g.hasOwnProperty(S)&&Un(v)},m),m.g={}}Ht.prototype.N=function(){Ht.aa.N.call(this),zt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vt=c.JSON.stringify,lt=c.JSON.parse,Wt=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function Gt(){}Gt.prototype.h=null;function Yi(m){return m.h||(m.h=m.i())}function _r(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){B.call(this,"d")}x(Rr,B);function br(){B.call(this,"c")}x(br,B);var jr={},Us=null;function ri(){return Us=Us||new de}jr.La="serverreachability";function Gi(m){B.call(this,jr.La,m)}x(Gi,B);function Dr(m){const v=ri();Te(v,new Gi(v))}jr.STAT_EVENT="statevent";function ii(m,v){B.call(this,jr.STAT_EVENT,m),this.stat=v}x(ii,B);function $t(m){const v=ri();Te(v,new ii(v,m))}jr.Ma="timingevent";function Lt(m,v){B.call(this,jr.Ma,m),this.size=v}x(Lt,B);function hn(m,v){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},v)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function os(m,v,S,j,ue,ye){m.info(function(){if(m.g)if(ye)for(var Le="",St=ye.split("&"),jn=0;jn<St.length;jn++){var xt=St[jn].split("=");if(1<xt.length){var Jn=xt[0];xt=xt[1];var qn=Jn.split("_");Le=2<=qn.length&&qn[1]=="type"?Le+(Jn+"="+xt+"&"):Le+(Jn+"=redacted&")}}else Le=null;else Le=ye;return"XMLHTTP REQ ("+j+") [attempt "+ue+"]: "+v+`
`+S+`
`+Le})}function Ao(m,v,S,j,ue,ye,Le){m.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+ue+"]: "+v+`
`+S+`
`+ye+" "+Le})}function Or(m,v,S,j){m.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ai(m,S)+(j?" "+j:"")})}function us(m,v){m.info(function(){return"TIMEOUT: "+v})}En.prototype.info=function(){};function Ai(m,v){if(!m.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(m=0;m<S.length;m++)if(Array.isArray(S[m])){var j=S[m];if(!(2>j.length)){var ue=j[1];if(Array.isArray(ue)&&!(1>ue.length)){var ye=ue[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(var Le=1;Le<ue.length;Le++)ue[Le]=""}}}}return vt(S)}catch{return v}}var si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function Lr(){}x(Lr,Gt),Lr.prototype.g=function(){return new XMLHttpRequest},Lr.prototype.i=function(){return{}},Xn=new Lr;function zn(m,v,S,j){this.j=m,this.i=v,this.l=S,this.R=j||1,this.U=new Ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ne}function ne(){this.i=null,this.g="",this.h=!1}var pe={},De={};function Pe(m,v,S){m.L=1,m.v=$i(en(v)),m.m=S,m.P=!0,pt(m,null)}function pt(m,v){m.F=Date.now(),Mt(m),m.A=en(m.v);var S=m.A,j=m.R;Array.isArray(j)||(j=[String(j)]),nc(S.i,"t",j),m.C=0,S=m.j.J,m.h=new ne,m.g=Ld(m.j,S?v:null,!m.m),0<m.O&&(m.M=new Tt(b(m.Y,m,m.g),m.O)),v=m.U,S=m.g,j=m.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(Ft[0]=ue.toString()),ue=Ft);for(var ye=0;ye<ue.length;ye++){var Le=Rn(S,ue[ye],j||v.handleEvent,!1,v.h||v);if(!Le)break;v.g[Le.key]=Le}v=m.H?C(m.H):{},m.m?(m.u||(m.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,v)):(m.u="GET",m.g.ea(m.A,m.u,null,v)),Dr(),os(m.i,m.u,m.A,m.l,m.R,m.m)}zn.prototype.ca=function(m){m=m.target;const v=this.M;v&&Ni(m)==3?v.j():this.Y(m)},zn.prototype.Y=function(m){try{if(m==this.g)e:{const qn=Ni(this.g);var v=this.g.Ba();const Ys=this.g.Z();if(!(3>qn)&&(qn!=3||this.g&&(this.h.h||this.g.oa()||wd(this.g)))){this.J||qn!=4||v==7||(v==8||0>=Ys?Dr(3):Dr(2)),Pt(this);var S=this.g.Z();this.X=S;t:if(rt(this)){var j=wd(this.g);m="";var ue=j.length,ye=Ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bt(this),Nt(this);var Le="";break t}this.h.i=new c.TextDecoder}for(v=0;v<ue;v++)this.h.h=!0,m+=this.h.i.decode(j[v],{stream:!(ye&&v==ue-1)});j.length=0,this.h.g+=m,this.C=0,Le=this.h.g}else Le=this.g.oa();if(this.o=S==200,Ao(this.i,this.u,this.A,this.l,this.R,qn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var St,jn=this.g;if((St=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(St)){var xt=St;break t}}xt=null}if(S=xt)Or(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dn(this,S);else{this.o=!1,this.s=3,$t(12),Bt(this),Nt(this);break e}}if(this.P){S=!0;let dr;for(;!this.J&&this.C<Le.length;)if(dr=jt(this,Le),dr==De){qn==4&&(this.s=4,$t(14),S=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==pe){this.s=4,$t(15),Or(this.i,this.l,Le,"[Invalid Chunk]"),S=!1;break}else Or(this.i,this.l,dr,null),Dn(this,dr);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qn!=4||Le.length!=0||this.h.h||(this.s=1,$t(16),S=!1),this.o=this.o&&S,!S)Or(this.i,this.l,Le,"[Invalid Chunked Response]"),Bt(this),Nt(this);else if(0<Le.length&&!this.W){this.W=!0;var Jn=this.j;Jn.g==this&&Jn.ba&&!Jn.M&&(Jn.j.info("Great, no buffering proxy detected. Bytes received: "+Le.length),Oo(Jn),Jn.M=!0,$t(11))}}else Or(this.i,this.l,Le,null),Dn(this,Le);qn==4&&Bt(this),this.o&&!this.J&&(qn==4?Dd(this.j,this):(this.o=!1,Mt(this)))}else Gm(this.g),S==400&&0<Le.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),Bt(this),Nt(this)}}}catch{}finally{}};function rt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function jt(m,v){var S=m.C,j=v.indexOf(`
`,S);return j==-1?De:(S=Number(v.substring(S,j)),isNaN(S)?pe:(j+=1,j+S>v.length?De:(v=v.slice(j,j+S),m.C=j+S,v)))}zn.prototype.cancel=function(){this.J=!0,Bt(this)};function Mt(m){m.S=Date.now()+m.I,Qn(m,m.I)}function Qn(m,v){if(m.B!=null)throw Error("WatchDog timer not null");m.B=hn(b(m.ba,m),v)}function Pt(m){m.B&&(c.clearTimeout(m.B),m.B=null)}zn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(us(this.i,this.A),this.L!=2&&(Dr(),$t(17)),Bt(this),this.s=2,Nt(this)):Qn(this,this.S-m)};function Nt(m){m.j.G==0||m.J||Dd(m.j,m)}function Bt(m){Pt(m);var v=m.M;v&&typeof v.ma=="function"&&v.ma(),m.M=null,zt(m.U),m.g&&(v=m.g,m.g=null,v.abort(),v.ma())}function Dn(m,v){try{var S=m.j;if(S.G!=0&&(S.g==m||Si(S.h,m))){if(!m.K&&Si(S.h,m)&&S.G==3){try{var j=S.Da.g.parse(v)}catch{j=null}if(Array.isArray(j)&&j.length==3){var ue=j;if(ue[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<m.F)Su(S),vu(S);else break e;oc(S),$t(18)}}else S.za=ue[1],0<S.za-S.T&&37500>ue[2]&&S.F&&S.v==0&&!S.C&&(S.C=hn(b(S.Za,S),6e3));if(1>=Pr(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else qs(S,11)}else if((m.K||S.g==m)&&Su(S),!z(v))for(ue=S.Da.g.parse(v),v=0;v<ue.length;v++){let xt=ue[v];if(S.T=xt[0],xt=xt[1],S.G==2)if(xt[0]=="c"){S.K=xt[1],S.ia=xt[2];const Jn=xt[3];Jn!=null&&(S.la=Jn,S.j.info("VER="+S.la));const qn=xt[4];qn!=null&&(S.Aa=qn,S.j.info("SVER="+S.Aa));const Ys=xt[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(j=1.5*Ys,S.L=j,S.j.info("backChannelRequestTimeoutMs_="+j)),j=S;const dr=m.g;if(dr){const gs=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var ye=j.h;ye.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(xi(ye,ye.h),ye.h=null))}if(j.D){const lc=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(j.ya=lc,Ct(j.I,j.D,lc))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-m.F,S.j.info("Handshake RTT: "+S.R+"ms")),j=S;var Le=m;if(j.qa=kd(j,j.J?j.ia:null,j.W),Le.K){Wn(j.h,Le);var St=Le,jn=j.L;jn&&(St.I=jn),St.B&&(Pt(St),Mt(St)),j.g=Le}else Nd(j);0<S.i.length&&Au(S)}else xt[0]!="stop"&&xt[0]!="close"||qs(S,7);else S.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?qs(S,7):sc(S):xt[0]!="noop"&&S.l&&S.l.ta(xt),S.v=0)}}Dr(4)}catch{}}var _n=class{constructor(m,v){this.g=m,this.map=v}};function xn(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mr(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Pr(m){return m.h?1:m.g?m.g.size:0}function Si(m,v){return m.h?m.h==v:m.g?m.g.has(v):!1}function xi(m,v){m.g?m.g.add(v):m.h=v}function Wn(m,v){m.h&&m.h==v?m.h=null:m.g&&m.g.has(v)&&m.g.delete(v)}xn.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function So(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let v=m.i;for(const S of m.g.values())v=v.concat(S.D);return v}return N(m.i)}function tc(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(d(m)){for(var v=[],S=m.length,j=0;j<S;j++)v.push(m[j]);return v}v=[],S=0;for(j in m)v[S++]=m[j];return v}function At(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(d(m)||typeof m=="string"){var v=[];m=m.length;for(var S=0;S<m;S++)v.push(S);return v}v=[],S=0;for(const j in m)v[S++]=j;return v}}}function bt(m,v){if(m.forEach&&typeof m.forEach=="function")m.forEach(v,void 0);else if(d(m)||typeof m=="string")Array.prototype.forEach.call(m,v,void 0);else for(var S=At(m),j=tc(m),ue=j.length,ye=0;ye<ue;ye++)v.call(void 0,j[ye],S&&S[ye],m)}var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ii(m,v){if(m){m=m.split("&");for(var S=0;S<m.length;S++){var j=m[S].indexOf("="),ue=null;if(0<=j){var ye=m[S].substring(0,j);ue=m[S].substring(j+1)}else ye=m[S];v(ye,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function dn(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof dn){this.h=m.h,ur(this,m.j),this.o=m.o,this.g=m.g,lr(this,m.s),this.l=m.l;var v=m.i,S=new qr;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),Br(this,S),this.m=m.m}else m&&(v=String(m).match(wi))?(this.h=!1,ur(this,v[1]||"",!0),this.o=cr(v[2]||""),this.g=cr(v[3]||"",!0),lr(this,v[4]),this.l=cr(v[5]||"",!0),Br(this,v[6]||"",!0),this.m=cr(v[7]||"")):(this.h=!1,this.i=new qr(null,this.h))}dn.prototype.toString=function(){var m=[],v=this.j;v&&m.push(Ur(v,ls,!0),":");var S=this.g;return(S||v=="file")&&(m.push("//"),(v=this.o)&&m.push(Ur(v,ls,!0),"@"),m.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&m.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(Ur(S,S.charAt(0)=="/"?ya:Vs,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",Ur(S,Hs)),m.join("")};function en(m){return new dn(m)}function ur(m,v,S){m.j=S?cr(v,!0):v,m.j&&(m.j=m.j.replace(/:$/,""))}function lr(m,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);m.s=v}else m.s=null}function Br(m,v,S){v instanceof qr?(m.i=v,Sd(m.i,m.h)):(S||(v=Ur(v,Ea)),m.i=new qr(v,m.h))}function Ct(m,v,S){m.i.set(v,S)}function $i(m){return Ct(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function cr(m,v){return m?v?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ur(m,v,S){return typeof m=="string"?(m=encodeURI(m).replace(v,xo),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function xo(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ls=/[#\/\?@]/g,Vs=/[#\?:]/g,ya=/[#\?]/g,Ea=/[#\?@]/g,Hs=/#/g;function qr(m,v){this.h=this.g=null,this.i=m||null,this.j=!!v}function hr(m){m.g||(m.g=new Map,m.h=0,m.i&&Ii(m.i,function(v,S){m.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}t=qr.prototype,t.add=function(m,v){hr(this),this.i=null,m=cs(this,m);var S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(v),this.h+=1,this};function Fs(m,v){hr(m),v=cs(m,v),m.g.has(v)&&(m.i=null,m.h-=m.g.get(v).length,m.g.delete(v))}function zs(m,v){return hr(m),v=cs(m,v),m.g.has(v)}t.forEach=function(m,v){hr(this),this.g.forEach(function(S,j){S.forEach(function(ue){m.call(v,ue,j,this)},this)},this)},t.na=function(){hr(this);const m=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let j=0;j<v.length;j++){const ue=m[j];for(let ye=0;ye<ue.length;ye++)S.push(v[j])}return S},t.V=function(m){hr(this);let v=[];if(typeof m=="string")zs(this,m)&&(v=v.concat(this.g.get(cs(this,m))));else{m=Array.from(this.g.values());for(let S=0;S<m.length;S++)v=v.concat(m[S])}return v},t.set=function(m,v){return hr(this),this.i=null,m=cs(this,m),zs(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[v]),this.h+=1,this},t.get=function(m,v){return m?(m=this.V(m),0<m.length?String(m[0]):v):v};function nc(m,v,S){Fs(m,v),0<S.length&&(m.i=null,m.g.set(cs(m,v),N(S)),m.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var j=v[S];const ye=encodeURIComponent(String(j)),Le=this.V(j);for(j=0;j<Le.length;j++){var ue=ye;Le[j]!==""&&(ue+="="+encodeURIComponent(String(Le[j]))),m.push(ue)}}return this.i=m.join("&")};function cs(m,v){return v=String(v),m.j&&(v=v.toLowerCase()),v}function Sd(m,v){v&&!m.j&&(hr(m),m.i=null,m.g.forEach(function(S,j){var ue=j.toLowerCase();j!=ue&&(Fs(this,j),nc(this,ue,S))},m)),m.j=v}function wo(m,v){const S=new En;if(c.Image){const j=new Image;j.onload=T(Ci,S,"TestLoadImage: loaded",!0,v,j),j.onerror=T(Ci,S,"TestLoadImage: error",!1,v,j),j.onabort=T(Ci,S,"TestLoadImage: abort",!1,v,j),j.ontimeout=T(Ci,S,"TestLoadImage: timeout",!1,v,j),c.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=m}else v(!1)}function Ki(m,v){const S=new En,j=new AbortController,ue=setTimeout(()=>{j.abort(),Ci(S,"TestPingServer: timeout",!1,v)},1e4);fetch(m,{signal:j.signal}).then(ye=>{clearTimeout(ue),ye.ok?Ci(S,"TestPingServer: ok",!0,v):Ci(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ue),Ci(S,"TestPingServer: error",!1,v)})}function Ci(m,v,S,j,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),j(S)}catch{}}function Io(){this.g=new Wt}function hs(m,v,S){const j=S||"";try{bt(m,function(ue,ye){let Le=ue;f(ue)&&(Le=vt(ue)),v.push(j+ye+"="+encodeURIComponent(Le))})}catch(ue){throw v.push(j+"type="+encodeURIComponent("_badmap")),ue}}function _a(m){this.l=m.Ub||null,this.j=m.eb||!1}x(_a,Gt),_a.prototype.g=function(){return new js(this.l,this.j)},_a.prototype.i=function(m){return function(){return m}}({});function js(m,v){de.call(this),this.D=m,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(js,de),t=js.prototype,t.open=function(m,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=v,this.readyState=1,fs(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(v.body=m),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rc(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function rc(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var v=m.value?m.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!m.done}))&&(this.response=this.responseText+=v)}m.done?ds(this):fs(this),this.readyState==3&&rc(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,ds(this))},t.Qa=function(m){this.g&&(this.response=m,ds(this))},t.ga=function(){this.g&&ds(this)};function ds(m){m.readyState=4,m.l=null,m.j=null,m.v=null,fs(m)}t.setRequestHeader=function(m,v){this.u.append(m,v)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=v.next();return m.join(`\r
`)};function fs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ic(m){let v="";return $(m,function(S,j){v+=j,v+=":",v+=S,v+=`\r
`}),v}function Zn(m,v,S){e:{for(j in S){var j=!1;break e}j=!0}j||(S=ic(S),typeof m=="string"?S!=null&&encodeURIComponent(String(S)):Ct(m,v,S))}function Ut(m){de.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ut,de);var Eu=/^https?$/i,Co=["POST","PUT"];t=Ut.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,v,S,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);v=v?v.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?Yi(this.o):Yi(Xn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(m),!0),this.B=!1}catch(ye){xd(this,ye);return}if(m=S||"",S=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var ue in j)S.set(ue,j[ue]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ye of j.keys())S.set(ye,j.get(ye));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(S.keys()).find(ye=>ye.toLowerCase()=="content-type"),ue=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Co,v,void 0))||j||ue||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Le]of S)this.g.setRequestHeader(ye,Le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{No(this),this.u=!0,this.g.send(m),this.u=!1}catch(ye){xd(this,ye)}};function xd(m,v){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=v,m.m=5,_u(m),ms(m)}function _u(m){m.A||(m.A=!0,Te(m,"complete"),Te(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Te(this,"complete"),Te(this,"abort"),ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ms(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bu(this):this.bb())},t.bb=function(){bu(this)};function bu(m){if(m.h&&typeof u<"u"&&(!m.v[1]||Ni(m)!=4||m.Z()!=2)){if(m.u&&Ni(m)==4)Ye(m.Ea,0,m);else if(Te(m,"readystatechange"),Ni(m)==4){m.h=!1;try{const Le=m.Z();e:switch(Le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var j;if(j=Le===0){var ue=String(m.D).match(wi)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),j=!Eu.test(ue?ue.toLowerCase():"")}S=j}if(S)Te(m,"complete"),Te(m,"success");else{m.m=6;try{var ye=2<Ni(m)?m.g.statusText:""}catch{ye=""}m.l=ye+" ["+m.Z()+"]",_u(m)}}finally{ms(m)}}}}function ms(m,v){if(m.g){No(m);const S=m.g,j=m.v[0]?()=>{}:null;m.g=null,m.v=null,v||Te(m,"ready");try{S.onreadystatechange=j}catch{}}}function No(m){m.I&&(c.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function Ni(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<Ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var v=this.g.responseText;return m&&v.indexOf(m)==0&&(v=v.substring(m.length)),lt(v)}};function wd(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Gm(m){const v={};m=(m.g&&2<=Ni(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<m.length;j++){if(z(m[j]))continue;var S=U(m[j]);const ue=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ye=v[ue]||[];v[ue]=ye,ye.push(S)}R(v,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ro(m,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||v}function Tu(m){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ro("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ro("baseRetryDelayMs",5e3,m),this.cb=Ro("retryDelaySeedMs",1e4,m),this.Wa=Ro("forwardChannelMaxRetries",2,m),this.wa=Ro("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new xn(m&&m.concurrentRequestLimit),this.Da=new Io,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tu.prototype,t.la=8,t.G=1,t.connect=function(m,v,S,j){$t(0),this.W=m,this.H=v||{},S&&j!==void 0&&(this.H.OSID=S,this.H.OAID=j),this.F=this.X,this.I=kd(this,null,this.W),Au(this)};function sc(m){if(Id(m),m.G==3){var v=m.U++,S=en(m.I);if(Ct(S,"SID",m.K),Ct(S,"RID",v),Ct(S,"TYPE","terminate"),Do(m,S),v=new zn(m,m.j,v),v.L=2,v.v=$i(en(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&c.Image&&(new Image().src=v.v,S=!0),S||(v.g=Ld(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Mt(v)}Od(m)}function vu(m){m.g&&(Oo(m),m.g.cancel(),m.g=null)}function Id(m){vu(m),m.u&&(c.clearTimeout(m.u),m.u=null),Su(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function Au(m){if(!Mr(m.h)&&!m.s){m.s=!0;var v=m.Ga;Q||A(),se||(Q(),se=!0),te.add(v,m),m.B=0}}function $m(m,v){return Pr(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=v.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=hn(b(m.Ga,m,v),uc(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ue=new zn(this,this.j,m);let ye=this.o;if(this.S&&(ye?(ye=C(ye),P(ye,this.S)):ye=this.S),this.m!==null||this.O||(ue.H=ye,ye=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var j=this.i[S];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(v+=j,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Cd(this,ue,v),S=en(this.I),Ct(S,"RID",m),Ct(S,"CVER",22),this.D&&Ct(S,"X-HTTP-Session-Id",this.D),Do(this,S),ye&&(this.O?v="headers="+encodeURIComponent(String(ic(ye)))+"&"+v:this.m&&Zn(S,this.m,ye)),xi(this.h,ue),this.Ua&&Ct(S,"TYPE","init"),this.P?(Ct(S,"$req",v),Ct(S,"SID","null"),ue.T=!0,Pe(ue,S,null)):Pe(ue,S,v),this.G=2}}else this.G==3&&(m?ac(this,m):this.i.length==0||Mr(this.h)||ac(this))};function ac(m,v){var S;v?S=v.l:S=m.U++;const j=en(m.I);Ct(j,"SID",m.K),Ct(j,"RID",S),Ct(j,"AID",m.T),Do(m,j),m.m&&m.o&&Zn(j,m.m,m.o),S=new zn(m,m.j,S,m.B+1),m.m===null&&(S.H=m.o),v&&(m.i=v.D.concat(m.i)),v=Cd(m,S,1e3),S.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),xi(m.h,S),Pe(S,j,v)}function Do(m,v){m.H&&$(m.H,function(S,j){Ct(v,j,S)}),m.l&&bt({},function(S,j){Ct(v,j,S)})}function Cd(m,v,S){S=Math.min(m.i.length,S);var j=m.l?b(m.l.Na,m.l,m):null;e:{var ue=m.i;let ye=-1;for(;;){const Le=["count="+S];ye==-1?0<S?(ye=ue[0].g,Le.push("ofs="+ye)):ye=0:Le.push("ofs="+ye);let St=!0;for(let jn=0;jn<S;jn++){let xt=ue[jn].g;const Jn=ue[jn].map;if(xt-=ye,0>xt)ye=Math.max(0,ue[jn].g-100),St=!1;else try{hs(Jn,Le,"req"+xt+"_")}catch{j&&j(Jn)}}if(St){j=Le.join("&");break e}}}return m=m.i.splice(0,S),v.D=m,j}function Nd(m){if(!m.g&&!m.u){m.Y=1;var v=m.Fa;Q||A(),se||(Q(),se=!0),te.add(v,m),m.v=0}}function oc(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=hn(b(m.Fa,m),uc(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,Rd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=hn(b(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),vu(this),Rd(this))};function Oo(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function Rd(m){m.g=new zn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var v=en(m.qa);Ct(v,"RID","rpc"),Ct(v,"SID",m.K),Ct(v,"AID",m.T),Ct(v,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ct(v,"TO",m.ja),Ct(v,"TYPE","xmlhttp"),Do(m,v),m.m&&m.o&&Zn(v,m.m,m.o),m.L&&(m.g.I=m.L);var S=m.g;m=m.ia,S.L=1,S.v=$i(en(v)),S.m=null,S.P=!0,pt(S,m)}t.Za=function(){this.C!=null&&(this.C=null,vu(this),oc(this),$t(19))};function Su(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Dd(m,v){var S=null;if(m.g==v){Su(m),Oo(m),m.g=null;var j=2}else if(Si(m.h,v))S=v.D,Wn(m.h,v),j=1;else return;if(m.G!=0){if(v.o)if(j==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var ue=m.B;j=ri(),Te(j,new Lt(j,S)),Au(m)}else Nd(m);else if(ue=v.s,ue==3||ue==0&&0<v.X||!(j==1&&$m(m,v)||j==2&&oc(m)))switch(S&&0<S.length&&(v=m.h,v.i=v.i.concat(S)),ue){case 1:qs(m,5);break;case 4:qs(m,10);break;case 3:qs(m,6);break;default:qs(m,2)}}}function uc(m,v){let S=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(S*=2),S*v}function qs(m,v){if(m.j.info("Error code "+v),v==2){var S=b(m.fb,m),j=m.Xa;const ue=!j;j=new dn(j||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ur(j,"https"),$i(j),ue?wo(j.toString(),S):Ki(j.toString(),S)}else $t(2);m.G=0,m.l&&m.l.sa(v),Od(m),Id(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Od(m){if(m.G=0,m.ka=[],m.l){const v=So(m.h);(v.length!=0||m.i.length!=0)&&(k(m.ka,v),k(m.ka,m.i),m.h.i.length=0,N(m.i),m.i.length=0),m.l.ra()}}function kd(m,v,S){var j=S instanceof dn?en(S):new dn(S);if(j.g!="")v&&(j.g=v+"."+j.g),lr(j,j.s);else{var ue=c.location;j=ue.protocol,v=v?v+"."+ue.hostname:ue.hostname,ue=+ue.port;var ye=new dn(null);j&&ur(ye,j),v&&(ye.g=v),ue&&lr(ye,ue),S&&(ye.l=S),j=ye}return S=m.D,v=m.ya,S&&v&&Ct(j,S,v),Ct(j,"VER",m.la),Do(m,j),j}function Ld(m,v,S){if(v&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=m.Ca&&!m.pa?new Ut(new _a({eb:S})):new Ut(m.pa),v.Ha(m.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Md(){}t=Md.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xu(){}xu.prototype.g=function(m,v){return new Vr(m,v)};function Vr(m,v){de.call(this),this.g=new Tu(v),this.l=m,this.h=v&&v.messageUrlParams||null,m=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(m?m["X-WebChannel-Content-Type"]=v.messageContentType:m={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(m?m["X-WebChannel-Client-Profile"]=v.va:m={"X-WebChannel-Client-Profile":v.va}),this.g.S=m,(m=v&&v.Sb)&&!z(m)&&(this.g.m=m),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!z(v)&&(this.g.D=v,m=this.h,m!==null&&v in m&&(m=this.h,v in m&&delete m[v])),this.j=new ps(this)}x(Vr,de),Vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){sc(this.g)},Vr.prototype.o=function(m){var v=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.u&&(S={},S.__data__=vt(m),m=S);v.i.push(new _n(v.Ya++,m)),v.G==3&&Au(v)},Vr.prototype.N=function(){this.g.l=null,delete this.j,sc(this.g),delete this.g,Vr.aa.N.call(this)};function Pd(m){Rr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var v=m.__sm__;if(v){e:{for(const S in v){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,v=v!==null&&m in v?v[m]:void 0),this.data=v}else this.data=m}x(Pd,Rr);function Bd(){br.call(this),this.status=1}x(Bd,br);function ps(m){this.g=m}x(ps,Md),ps.prototype.ua=function(){Te(this.g,"a")},ps.prototype.ta=function(m){Te(this.g,new Pd(m))},ps.prototype.sa=function(m){Te(this.g,new Bd)},ps.prototype.ra=function(){Te(this.g,"b")},xu.prototype.createWebChannel=xu.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,GI=function(){return new xu},YI=function(){return ri()},qI=jr,a1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},si.NO_ERROR=0,si.TIMEOUT=8,si.HTTP_ERROR=6,h0=si,kr.COMPLETE="complete",jI=kr,_r.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",de.prototype.listen=de.prototype.K,mh=_r,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,zI=Ut}).apply(typeof Qf<"u"?Qf:typeof self<"u"?self:typeof window<"u"?window:{});const TA="@firebase/firestore",vA="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new dE("@firebase/firestore");function ul(){return su.logLevel}function Be(t,...e){if(su.logLevel<=Et.DEBUG){const n=e.map(pE);su.debug(`Firestore (${Fl}): ${t}`,...n)}}function ma(t,...e){if(su.logLevel<=Et.ERROR){const n=e.map(pE);su.error(`Firestore (${Fl}): ${t}`,...n)}}function Rl(t,...e){if(su.logLevel<=Et.WARN){const n=e.map(pE);su.warn(`Firestore (${Fl}): ${t}`,...n)}}function pE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$I(t,r,n)}function $I(t,e,n){let r=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ma(r),new Error(r)}function Vt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$I(e,s,r)}function it(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends Ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Sr.UNAUTHENTICATED))}shutdown(){}}class g8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y8{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new oo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new oo,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new oo)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt(typeof r.accessToken=="string",31837,{l:r}),new KI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new Sr(e)}}class E8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new E8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=T8(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ht(t,e){return t<e?-1:t>e?1:0}function o1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ht(r,s);{const o=XI(),u=v8(o.encode(SA(t,n)),o.encode(SA(e,n)));return u!==0?u:ht(r,s)}}n+=r>65535?2:1}return ht(t.length,e.length)}function SA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function v8(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ht(t[n],e[n]);return ht(t.length,e.length)}function Dl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=-62135596800,wA=1e6;class ln{static now(){return ln.fromMillis(Date.now())}static fromDate(e){return ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wA);return new ln(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xA)throw new Ue(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wA}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-xA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new ln(0,0))}static max(){return new nt(new ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="__name__";class Ss{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ze(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ze(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ss.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ss?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Ss.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ht(e.length,n.length)}static compareSegments(e,n){const r=Ss.isNumericId(e),s=Ss.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ss.extractNumericId(e).compare(Ss.extractNumericId(n)):o1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}}class un extends Ss{construct(e,n,r){return new un(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new un(n)}static emptyPath(){return new un([])}}const A8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends Ss{construct(e,n,r){return new yr(e,n,r)}static isValidIdentifier(e){return A8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IA}static keyField(){return new yr([IA])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ue(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ue(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ue(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(u=!u,s++):c!=="."||u?(r+=c,s++):(o(),s++)}if(o(),u)throw new Ue(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(n)}static emptyPath(){return new yr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(un.fromString(e))}static fromName(e){return new $e(un.fromString(e).popFirst(5))}static empty(){return new $e(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return un.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new un(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=-1;function S8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new ln(n+1,0):new ln(n,r));return new ho(s,$e.empty(),e)}function x8(t){return new ho(t.readTime,t.key,jh)}class ho{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ho(nt.min(),$e.empty(),jh)}static max(){return new ho(nt.max(),$e.empty(),jh)}}function w8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(t.documentKey,e.documentKey),n!==0?n:ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t){if(t.code!==Se.FAILED_PRECONDITION||t.message!==I8)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.reject(n)}static resolve(e){return new xe((n,r)=>{n(e)})}static reject(e){return new xe((n,r)=>{r(e)})}static waitFor(e){return new xe((n,r)=>{let s=0,o=0,u=!1;e.forEach(c=>{++s,c.next(()=>{++o,u&&o===s&&n()},d=>r(d))}),u=!0,o===s&&n()})}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next(s=>s?xe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new xe((r,s)=>{const o=e.length,u=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(p=>{u[f]=p,++c,c===o&&r(u)},p=>s(p))}})}static doWhile(e,n){return new xe((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function N8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}gm.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=-1;function ym(t){return t==null}function B0(t){return t===0&&1/t==-1/0}function R8(t){return typeof t=="number"&&Number.isInteger(t)&&!B0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="";function D8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=CA(e)),e=O8(t.get(n),e);return CA(e)}function O8(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case WI:n+="";break;default:n+=o}}return n}function CA(t){return t+WI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.comparator=e,this.root=n||gr.EMPTY}insert(e,n){return new yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wf(this.root,e,this.comparator,!0)}}class Wf{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gr{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??gr.RED,this.left=s??gr.EMPTY,this.right=o??gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new gr(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new gr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new RA(this.data.getIterator())}getIteratorFrom(e){return new RA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class RA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new yi([])}unionWith(e){let n=new $n(yr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new JI("Invalid base64 string: "+o):o}}(e);return new Er(n)}static fromUint8Array(e){const n=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new Er(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const k8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(t){if(Vt(!!t,39018),typeof t=="string"){let e=0;const n=k8.exec(t);if(Vt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Cn(t.seconds),nanos:Cn(t.nanos)}}function Cn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mo(t){return typeof t=="string"?Er.fromBase64String(t):Er.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="server_timestamp",tC="__type__",nC="__previous_value__",rC="__local_write_time__";function yE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[tC])===null||n===void 0?void 0:n.stringValue)===eC}function Em(t){const e=t.mapValue.fields[nC];return yE(e)?Em(e):e}function qh(t){const e=fo(t.mapValue.fields[rC].timestampValue);return new ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,n,r,s,o,u,c,d,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=p}}const U0="(default)";class Yh{constructor(e,n){this.projectId=e,this.database=n||U0}static empty(){return new Yh("","")}get isDefaultDatabase(){return this.database===U0}isEqual(e){return e instanceof Yh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="__type__",M8="__max__",Zf={mapValue:{}},sC="__vector__",V0="value";function po(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yE(t)?4:B8(t)?9007199254740991:P8(t)?10:11:Ze(28295,{value:t})}function ks(t,e){if(t===e)return!0;const n=po(t);if(n!==po(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qh(t).isEqual(qh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=fo(s.timestampValue),c=fo(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return mo(s.bytesValue).isEqual(mo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Cn(s.geoPointValue.latitude)===Cn(o.geoPointValue.latitude)&&Cn(s.geoPointValue.longitude)===Cn(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Cn(s.integerValue)===Cn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=Cn(s.doubleValue),c=Cn(o.doubleValue);return u===c?B0(u)===B0(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return Dl(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},c=o.mapValue.fields||{};if(NA(u)!==NA(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!ks(u[d],c[d])))return!1;return!0}(t,e);default:return Ze(52216,{left:t})}}function Gh(t,e){return(t.values||[]).find(n=>ks(n,e))!==void 0}function Ol(t,e){if(t===e)return 0;const n=po(t),r=po(e);if(n!==r)return ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ht(t.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Cn(o.integerValue||o.doubleValue),d=Cn(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return DA(t.timestampValue,e.timestampValue);case 4:return DA(qh(t),qh(e));case 5:return o1(t.stringValue,e.stringValue);case 6:return function(o,u){const c=mo(o),d=mo(u);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),d=u.split("/");for(let f=0;f<c.length&&f<d.length;f++){const p=ht(c[f],d[f]);if(p!==0)return p}return ht(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,u){const c=ht(Cn(o.latitude),Cn(u.latitude));return c!==0?c:ht(Cn(o.longitude),Cn(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OA(t.arrayValue,e.arrayValue);case 10:return function(o,u){var c,d,f,p;const y=o.fields||{},b=u.fields||{},T=(c=y[V0])===null||c===void 0?void 0:c.arrayValue,x=(d=b[V0])===null||d===void 0?void 0:d.arrayValue,N=ht(((f=T?.values)===null||f===void 0?void 0:f.length)||0,((p=x?.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:OA(T,x)}(t.mapValue,e.mapValue);case 11:return function(o,u){if(o===Zf.mapValue&&u===Zf.mapValue)return 0;if(o===Zf.mapValue)return 1;if(u===Zf.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=u.fields||{},p=Object.keys(f);d.sort(),p.sort();for(let y=0;y<d.length&&y<p.length;++y){const b=o1(d[y],p[y]);if(b!==0)return b;const T=Ol(c[d[y]],f[p[y]]);if(T!==0)return T}return ht(d.length,p.length)}(t.mapValue,e.mapValue);default:throw Ze(23264,{Pe:n})}}function DA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ht(t,e);const n=fo(t),r=fo(e),s=ht(n.seconds,r.seconds);return s!==0?s:ht(n.nanos,r.nanos)}function OA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Ol(n[s],r[s]);if(o)return o}return ht(n.length,r.length)}function kl(t){return u1(t)}function u1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=u1(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${u1(n.fields[u])}`;return s+"}"}(t.mapValue):Ze(61005,{value:t})}function d0(t){switch(po(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(t);return e?16+d0(e):16;case 5:return 2*t.stringValue.length;case 6:return mo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+d0(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Eo(r.fields,(o,u)=>{s+=o.length+d0(u)}),s}(t.mapValue);default:throw Ze(13486,{value:t})}}function kA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function l1(t){return!!t&&"integerValue"in t}function EE(t){return!!t&&"arrayValue"in t}function LA(t){return!!t&&"nullValue"in t}function MA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function f0(t){return!!t&&"mapValue"in t}function P8(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[iC])===null||n===void 0?void 0:n.stringValue)===sC}function bh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function B8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===M8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!f0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bh(n)}setAll(e){let n=yr.emptyPath(),r={},s=[];e.forEach((u,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=c.popLast()}u?r[c.lastSegment()]=bh(u):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());f0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];f0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Eo(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Zr(bh(this.value))}}function aC(t){const e=[];return Eo(t.fields,(n,r)=>{const s=new yr([n]);if(f0(r)){const o=aC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new yi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,s,o,u,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new xr(e,0,nt.min(),nt.min(),nt.min(),Zr.empty(),0)}static newFoundDocument(e,n,r,s){return new xr(e,1,n,nt.min(),r,s,0)}static newNoDocument(e,n){return new xr(e,2,n,nt.min(),nt.min(),Zr.empty(),0)}static newUnknownDocument(e,n){return new xr(e,3,n,nt.min(),nt.min(),Zr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n){this.position=e,this.inclusive=n}}function PA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=$e.comparator($e.fromName(u.referenceValue),n.key):r=Ol(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function BA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ks(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n="asc"){this.field=e,this.dir=n}}function U8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{}class Bn extends oC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H8(e,n,r):n==="array-contains"?new j8(e,r):n==="in"?new q8(e,r):n==="not-in"?new Y8(e,r):n==="array-contains-any"?new G8(e,r):new Bn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new F8(e,r):new z8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ol(n,this.value)):n!==null&&po(this.value)===po(n)&&this.matchesComparison(Ol(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends oC{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ns(e,n)}matches(e){return uC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function uC(t){return t.op==="and"}function lC(t){return V8(t)&&uC(t)}function V8(t){for(const e of t.filters)if(e instanceof ns)return!1;return!0}function c1(t){if(t instanceof Bn)return t.field.canonicalString()+t.op.toString()+kl(t.value);if(lC(t))return t.filters.map(e=>c1(e)).join(",");{const e=t.filters.map(n=>c1(n)).join(",");return`${t.op}(${e})`}}function cC(t,e){return t instanceof Bn?function(r,s){return s instanceof Bn&&r.op===s.op&&r.field.isEqual(s.field)&&ks(r.value,s.value)}(t,e):t instanceof ns?function(r,s){return s instanceof ns&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,c)=>o&&cC(u,s.filters[c]),!0):!1}(t,e):void Ze(19439)}function hC(t){return t instanceof Bn?function(n){return`${n.field.canonicalString()} ${n.op} ${kl(n.value)}`}(t):t instanceof ns?function(n){return n.op.toString()+" {"+n.getFilters().map(hC).join(" ,")+"}"}(t):"Filter"}class H8 extends Bn{constructor(e,n,r){super(e,n,r),this.key=$e.fromName(r.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class F8 extends Bn{constructor(e,n){super(e,"in",n),this.keys=dC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z8 extends Bn{constructor(e,n){super(e,"not-in",n),this.keys=dC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$e.fromName(r.referenceValue))}class j8 extends Bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return EE(n)&&Gh(n.arrayValue,this.value)}}class q8 extends Bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gh(this.value.arrayValue,n)}}class Y8 extends Bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Gh(this.value.arrayValue,n)}}class G8 extends Bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!EE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,n=null,r=[],s=[],o=null,u=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=c,this.Ie=null}}function UA(t,e=null,n=[],r=[],s=null,o=null,u=null){return new $8(t,e,n,r,s,o,u)}function _E(t){const e=it(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>c1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ym(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>kl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>kl(r)).join(",")),e.Ie=n}return e.Ie}function bE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BA(t.startAt,e.startAt)&&BA(t.endAt,e.endAt)}function h1(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,r=[],s=[],o=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function K8(t,e,n,r,s,o,u,c){return new ql(t,e,n,r,s,o,u,c)}function fC(t){return new ql(t)}function VA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mC(t){return t.collectionGroup!==null}function Th(t){const e=it(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new $n(yr.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new $h(o,r))}),n.has(yr.keyField().canonicalString())||e.Ee.push(new $h(yr.keyField(),r))}return e.Ee}function Ns(t){const e=it(t);return e.de||(e.de=X8(e,Th(t))),e.de}function X8(t,e){if(t.limitType==="F")return UA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new $h(s.field,o)});const n=t.endAt?new H0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new H0(t.startAt.position,t.startAt.inclusive):null;return UA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function d1(t,e){const n=t.filters.concat([e]);return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function f1(t,e,n){return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _m(t,e){return bE(Ns(t),Ns(e))&&t.limitType===e.limitType}function pC(t){return`${_E(Ns(t))}|lt:${t.limitType}`}function ll(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>hC(s)).join(", ")}]`),ym(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>kl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>kl(s)).join(",")),`Target(${r})`}(Ns(t))}; limitType=${t.limitType})`}function bm(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of Th(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(u,c,d){const f=PA(u,c,d);return u.inclusive?f<=0:f<0}(r.startAt,Th(r),s)||r.endAt&&!function(u,c,d){const f=PA(u,c,d);return u.inclusive?f>=0:f>0}(r.endAt,Th(r),s))}(t,e)}function Q8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gC(t){return(e,n)=>{let r=!1;for(const s of Th(t)){const o=W8(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function W8(t,e,n){const r=t.field.isKeyField()?$e.comparator(e.key,n.key):function(o,u,c){const d=u.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Ol(d,f):Ze(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ze(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return ZI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=new yn($e.comparator);function pa(){return Z8}const yC=new yn($e.comparator);function ph(...t){let e=yC;for(const n of t)e=e.insert(n.key,n);return e}function EC(t){let e=yC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zo(){return vh()}function _C(){return vh()}function vh(){return new hu(t=>t.toString(),(t,e)=>t.isEqual(e))}const J8=new yn($e.comparator),e9=new $n($e.comparator);function _t(...t){let e=e9;for(const n of t)e=e.add(n);return e}const t9=new $n(ht);function n9(){return t9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:B0(e)?"-0":e}}function bC(t){return{integerValue:""+t}}function r9(t,e){return R8(e)?bC(e):TE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this._=void 0}}function i9(t,e,n){return t instanceof F0?function(s,o){const u={fields:{[tC]:{stringValue:eC},[rC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&yE(o)&&(o=Em(o)),o&&(u.fields[nC]=o),{mapValue:u}}(n,e):t instanceof Kh?vC(t,e):t instanceof Xh?AC(t,e):function(s,o){const u=TC(s,o),c=HA(u)+HA(s.Re);return l1(u)&&l1(s.Re)?bC(c):TE(s.serializer,c)}(t,e)}function s9(t,e,n){return t instanceof Kh?vC(t,e):t instanceof Xh?AC(t,e):n}function TC(t,e){return t instanceof z0?function(r){return l1(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class F0 extends Tm{}class Kh extends Tm{constructor(e){super(),this.elements=e}}function vC(t,e){const n=SC(e);for(const r of t.elements)n.some(s=>ks(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xh extends Tm{constructor(e){super(),this.elements=e}}function AC(t,e){let n=SC(e);for(const r of t.elements)n=n.filter(s=>!ks(s,r));return{arrayValue:{values:n}}}class z0 extends Tm{constructor(e,n){super(),this.serializer=e,this.Re=n}}function HA(t){return Cn(t.integerValue||t.doubleValue)}function SC(t){return EE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function a9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Kh&&s instanceof Kh||r instanceof Xh&&s instanceof Xh?Dl(r.elements,s.elements,ks):r instanceof z0&&s instanceof z0?ks(r.Re,s.Re):r instanceof F0&&s instanceof F0}(t.transform,e.transform)}class o9{constructor(e,n){this.version=e,this.transformResults=n}}class _i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _i}static exists(e){return new _i(void 0,e)}static updateTime(e){return new _i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function m0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vm{}function xC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Am(t.key,_i.none()):new ld(t.key,t.data,_i.none());{const n=t.data,r=Zr.empty();let s=new $n(yr.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new _o(t.key,r,new yi(s.toArray()),_i.none())}}function u9(t,e,n){t instanceof ld?function(s,o,u){const c=s.value.clone(),d=zA(s.fieldTransforms,o,u.transformResults);c.setAll(d),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,n):t instanceof _o?function(s,o,u){if(!m0(s.precondition,o))return void o.convertToUnknownDocument(u.version);const c=zA(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(wC(s)),d.setAll(c),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Ah(t,e,n,r){return t instanceof ld?function(o,u,c,d){if(!m0(o.precondition,u))return c;const f=o.value.clone(),p=jA(o.fieldTransforms,d,u);return f.setAll(p),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof _o?function(o,u,c,d){if(!m0(o.precondition,u))return c;const f=jA(o.fieldTransforms,d,u),p=u.data;return p.setAll(wC(o)),p.setAll(f),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,u,c){return m0(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(t,e,n)}function l9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=TC(r.transform,s||null);o!=null&&(n===null&&(n=Zr.empty()),n.set(r.field,o))}return n||null}function FA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Dl(r,s,(o,u)=>a9(o,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ld extends vm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _o extends vm{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function wC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zA(t,e,n){const r=new Map;Vt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,c=e.data.field(o.field);r.set(o.field,s9(u,c,n[s]))}return r}function jA(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,i9(o,u,e))}return r}class Am extends vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c9 extends vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&u9(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ah(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ah(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_C();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let c=this.applyToLocalView(u,o.mutatedFields);c=n.has(s.key)?null:c;const d=xC(u,c);d!==null&&r.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(nt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_t())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,(n,r)=>FA(n,r))&&Dl(this.baseMutations,e.baseMutations,(n,r)=>FA(n,r))}}class vE{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Vt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return J8}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new vE(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln,It;function m9(t){switch(t){case Se.OK:return Ze(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return Ze(15467,{code:t})}}function IC(t){if(t===void 0)return ma("GRPC error has no .code"),Se.UNKNOWN;switch(t){case Ln.OK:return Se.OK;case Ln.CANCELLED:return Se.CANCELLED;case Ln.UNKNOWN:return Se.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return Se.INTERNAL;case Ln.UNAVAILABLE:return Se.UNAVAILABLE;case Ln.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case Ln.NOT_FOUND:return Se.NOT_FOUND;case Ln.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case Ln.ABORTED:return Se.ABORTED;case Ln.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case Ln.DATA_LOSS:return Se.DATA_LOSS;default:return Ze(39323,{code:t})}}(It=Ln||(Ln={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new ao([4294967295,4294967295],0);function qA(t){const e=XI().encode(t),n=new FI;return n.update(e),new Uint8Array(n.digest())}function YA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ao([n,r],0),new ao([s,o],0)]}class AE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gh(`Invalid padding: ${n}`);if(r<0)throw new gh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gh(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ao.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(ao.fromNumber(r)));return s.compare(p9)===1&&(s=new ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=qA(e),[r,s]=YA(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);if(!this.be(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new AE(o,s,n);return r.forEach(c=>u.insert(c)),u}insert(e){if(this.pe===0)return;const n=qA(e),[r,s]=YA(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sm(nt.min(),s,new yn(ht),pa(),_t())}}class cd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cd(r,n,_t(),_t(),_t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class CC{constructor(e,n){this.targetId=e,this.Ce=n}}class NC{constructor(e,n,r=Er.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class GA{constructor(){this.Fe=0,this.Me=$A(),this.xe=Er.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=_t(),n=_t(),r=_t();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ze(38017,{changeType:o})}}),new cd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=$A()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Vt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class g9{constructor(e){this.ze=e,this.je=new Map,this.He=pa(),this.Je=Jf(),this.Ye=Jf(),this.Ze=new yn(ht)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Ze(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(h1(o))if(r===0){const u=new $e(o.path);this.tt(n,u,xr.newNoDocument(u,nt.min()))}else Vt(r===1,20013,{expectedCount:r});else{const u=this.ut(n);if(u!==r){const c=this.ct(e),d=c?this.lt(c,e,u):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,c;try{u=mo(r).toUint8Array()}catch(d){if(d instanceof JI)return Rl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new AE(u,s,o)}catch(d){return Rl(d instanceof gh?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const u=this.ze.Pt(),c=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,u)=>{const c=this._t(u);if(c){if(o.current&&h1(c.target)){const d=new $e(c.target.path);this.Et(d).has(u)||this.dt(u,d)||this.tt(u,d,xr.newNoDocument(d,e))}o.Le&&(n.set(u,o.qe()),o.Qe())}});let r=_t();this.Ye.forEach((o,u)=>{let c=!0;u.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,u)=>u.setReadTime(e));const s=new Sm(e,n,this.Ze,this.He,r);return this.He=pa(),this.Je=Jf(),this.Ye=Jf(),this.Ze=new yn(ht),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new GA,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new $n(ht),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new $n(ht),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new GA),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Jf(){return new yn($e.comparator)}function $A(){return new yn($e.comparator)}const y9={asc:"ASCENDING",desc:"DESCENDING"},E9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_9={and:"AND",or:"OR"};class b9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function m1(t,e){return t.useProto3Json||ym(e)?e:{value:e}}function j0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T9(t,e){return j0(t,e.toTimestamp())}function Rs(t){return Vt(!!t,49232),nt.fromTimestamp(function(n){const r=fo(n);return new ln(r.seconds,r.nanos)}(t))}function SE(t,e){return p1(t,e).canonicalString()}function p1(t,e){const n=function(s){return new un(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DC(t){const e=un.fromString(t);return Vt(PC(e),10190,{key:e.toString()}),e}function g1(t,e){return SE(t.databaseId,e.path)}function py(t,e){const n=DC(e);if(n.get(1)!==t.databaseId.projectId)throw new Ue(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ue(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $e(kC(n))}function OC(t,e){return SE(t.databaseId,e)}function v9(t){const e=DC(t);return e.length===4?un.emptyPath():kC(e)}function y1(t){return new un(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return Vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KA(t,e,n){return{name:g1(t,e),fields:n.value.mapValue.fields}}function A9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ze(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(Vt(p===void 0||typeof p=="string",58123),Er.fromBase64String(p||"")):(Vt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Er.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(f){const p=f.code===void 0?Se.UNKNOWN:IC(f.code);return new Ue(p,f.message||"")}(u);n=new NC(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=py(t,r.document.name),o=Rs(r.document.updateTime),u=r.document.createTime?Rs(r.document.createTime):nt.min(),c=new Zr({mapValue:{fields:r.document.fields}}),d=xr.newFoundDocument(s,o,u,c),f=r.targetIds||[],p=r.removedTargetIds||[];n=new p0(f,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=py(t,r.document),o=r.readTime?Rs(r.readTime):nt.min(),u=xr.newNoDocument(s,o),c=r.removedTargetIds||[];n=new p0([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=py(t,r.document),o=r.removedTargetIds||[];n=new p0([],o,s,null)}else{if(!("filter"in e))return Ze(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new f9(s,o),c=r.targetId;n=new CC(c,u)}}return n}function S9(t,e){let n;if(e instanceof ld)n={update:KA(t,e.key,e.value)};else if(e instanceof Am)n={delete:g1(t,e.key)};else if(e instanceof _o)n={update:KA(t,e.key,e.data),updateMask:k9(e.fieldMask)};else{if(!(e instanceof c9))return Ze(16599,{ft:e.type});n={verify:g1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof F0)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Kh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof z0)return{fieldPath:u.field.canonicalString(),increment:c.Re};throw Ze(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:T9(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ze(27497)}(t,e.precondition)),n}function x9(t,e){return t&&t.length>0?(Vt(e!==void 0,14353),t.map(n=>function(s,o){let u=s.updateTime?Rs(s.updateTime):Rs(o);return u.isEqual(nt.min())&&(u=Rs(o)),new o9(u,s.transformResults||[])}(n,e))):[]}function w9(t,e){return{documents:[OC(t,e.path)]}}function I9(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OC(t,s);const o=function(f){if(f.length!==0)return MC(ns.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const u=function(f){if(f.length!==0)return f.map(p=>function(b){return{field:cl(b.field),direction:R9(b.dir)}}(p))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const c=m1(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function C9(t){let e=v9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Vt(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(y){const b=LC(y);return b instanceof ns&&lC(b)?b.getFilters():[b]}(n.where));let u=[];n.orderBy&&(u=function(y){return y.map(b=>function(x){return new $h(hl(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(y){let b;return b=typeof y=="object"?y.value:y,ym(b)?null:b}(n.limit));let d=null;n.startAt&&(d=function(y){const b=!!y.before,T=y.values||[];return new H0(T,b)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const b=!y.before,T=y.values||[];return new H0(T,b)}(n.endAt)),K8(e,s,u,o,c,"F",d,f)}function N9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hl(n.unaryFilter.field);return Bn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=hl(n.unaryFilter.field);return Bn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hl(n.unaryFilter.field);return Bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=hl(n.unaryFilter.field);return Bn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}}(t):t.fieldFilter!==void 0?function(n){return Bn.create(hl(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ns.create(n.compositeFilter.filters.map(r=>LC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}}(n.compositeFilter.op))}(t):Ze(30097,{filter:t})}function R9(t){return y9[t]}function D9(t){return E9[t]}function O9(t){return _9[t]}function cl(t){return{fieldPath:t.canonicalString()}}function hl(t){return yr.fromServerFormat(t.fieldPath)}function MC(t){return t instanceof Bn?function(n){if(n.op==="=="){if(MA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(LA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(LA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:D9(n.op),value:n.value}}}(t):t instanceof ns?function(n){const r=n.getFilters().map(s=>MC(s));return r.length===1?r[0]:{compositeFilter:{op:O9(n.op),filters:r}}}(t):Ze(54877,{filter:t})}function k9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function PC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r,s,o=nt.min(),u=nt.min(),c=Er.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.wt=e}}function M9(t){const e=C9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?f1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(){this.Cn=new B9}addToCollectionParentIndex(e,n){return this.Cn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(ho.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class B9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new $n(un.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $n(un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BC=41943040;class Qr{static withCacheSize(e){return new Qr(e,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr.DEFAULT_COLLECTION_PERCENTILE=10,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qr.DEFAULT=new Qr(BC,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qr.DISABLED=new Qr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ll(0)}static lr(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="LruGarbageCollector",U9=1048576;function WA([t,e],[n,r]){const s=ht(t,n);return s===0?ht(e,r):s}class V9{constructor(e){this.Er=e,this.buffer=new $n(WA),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();WA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Be(QA,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jl(n)?Be(QA,"Ignoring IndexedDB error during garbage collection: ",n):await zl(n)}await this.mr(3e5)})}}class F9{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(gm.le);const r=new V9(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(XA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XA):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,u,c,d,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,u=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),ul()<=Et.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-p}ms
	Determined least recently used ${s} in `+(c-u)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-p}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function z9(t,e){return new F9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(){this.changes=new hu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ah(r.mutation,s,yi.empty(),ln.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_t()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_t()){const s=Zo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let u=ph();return o.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=Zo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_t()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,c)=>{n.set(u,c)})})}computeViews(e,n,r,s){let o=pa();const u=vh(),c=function(){return vh()}();return n.forEach((d,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof _o)?o=o.insert(f.key,f):p!==void 0?(u.set(f.key,p.mutation.getFieldMask()),Ah(p.mutation,f,p.mutation.getFieldMask(),ln.now())):u.set(f.key,yi.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,p)=>u.set(f,p)),n.forEach((f,p)=>{var y;return c.set(f,new q9(p,(y=u.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=vh();let s=new yn((u,c)=>u-c),o=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const c of u)c.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let p=r.get(d)||yi.empty();p=c.applyToLocalView(f,p),r.set(d,p);const y=(s.get(c.batchId)||_t()).add(d);s=s.insert(c.batchId,y)})}).next(()=>{const u=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,p=d.value,y=_C();p.forEach(b=>{if(!o.has(b)){const T=xC(n.get(b),r.get(b));T!==null&&y.set(b,T),o=o.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,f,y))}return xe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(u){return $e.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):xe.resolve(Zo());let c=jh,d=o;return u.next(f=>xe.forEach(f,(p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(p)?xe.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{d=d.insert(p,b)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,_t())).next(p=>({batchId:c,changes:EC(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next(r=>{let s=ph();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=ph();return this.indexManager.getCollectionParents(e,o).next(c=>xe.forEach(c,d=>{const f=function(y,b){return new ql(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(p=>{p.forEach((y,b)=>{u=u.insert(y,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(u=>{o.forEach((d,f)=>{const p=f.getKey();u.get(p)===null&&(u=u.insert(p,xr.newInvalidDocument(p)))});let c=ph();return u.forEach((d,f)=>{const p=o.get(d);p!==void 0&&Ah(p.mutation,f,yi.empty(),ln.now()),bm(n,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return xe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rs(s.createTime)}}(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:M9(s.bundledQuery),readTime:Rs(s.readTime)}}(n)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(){this.overlays=new yn($e.comparator),this.Qr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zo();return xe.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),xe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const s=Zo(),o=n.length+1,u=new $e(n.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return xe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new yn((f,p)=>f-p);const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=o.get(f.largestBatchId);p===null&&(p=Zo(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const c=Zo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,p)=>c.set(f,p)),!(c.size()>=s)););return xe.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new d9(n,r));let o=this.Qr.get(n);o===void 0&&(o=_t(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(){this.sessionToken=Er.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.$r=new $n(ir.Ur),this.Kr=new $n(ir.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new ir(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new ir(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new $e(new un([])),r=new ir(n,e),s=new ir(n,e+1),o=[];return this.Kr.forEachInRange([r,s],u=>{this.zr(u),o.push(u.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new $e(new un([])),r=new ir(n,e),s=new ir(n,e+1);let o=_t();return this.Kr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const n=new ir(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ir{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return $e.comparator(e.key,n.key)||ht(e.Zr,n.Zr)}static Wr(e,n){return ht(e.Zr,n.Zr)||$e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $n(ir.Ur)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new h9(o,n,r,s);this.mutationQueue.push(u);for(const c of s)this.Xr=this.Xr.add(new ir(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return xe.resolve(u)}lookupMutationBatch(e,n){return xe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return xe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?gE:this.nr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ir(n,0),s=new ir(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],u=>{const c=this.ei(u.Zr);o.push(c)}),xe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(ht);return n.forEach(s=>{const o=new ir(s,0),u=new ir(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,u],c=>{r=r.add(c.Zr)})}),xe.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;$e.isDocumentKey(o)||(o=o.child(""));const u=new ir(new $e(o),0);let c=new $n(ht);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(d.Zr)),!0)},u),xe.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Vt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return xe.forEach(n.mutations,s=>{const o=new ir(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new ir(n,0),s=this.Xr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.ii=e,this.docs=function(){return new yn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():xr.newInvalidDocument(n))}getEntries(e,n){let r=pa();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():xr.newInvalidDocument(s))}),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=pa();const u=n.path,c=new $e(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:p}}=d.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||w8(x8(p),r)<=0||(s.has(p.key)||bm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return xe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ze(9500)}si(e,n){return xe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new W9(this)}getSize(e){return xe.resolve(this.size)}}class W9 extends j9{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),xe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.persistence=e,this.oi=new hu(n=>_E(n),bE),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this._i=0,this.ai=new xE,this.targetCount=0,this.ui=Ll.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),xe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.Tr(n),xe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((u,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(u),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),xe.waitFor(o).next(()=>s)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),xe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.ci={},this.overlays={},this.li=new gm(0),this.hi=!1,this.hi=!0,this.Pi=new K9,this.referenceDelegate=e(this),this.Ti=new Z9(this),this.indexManager=new P9,this.remoteDocumentCache=function(s){return new Q9(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new L9(n),this.Ei=new G9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new X9(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const s=new J9(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return xe.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class J9 extends C8{constructor(e){super(),this.currentSequenceNumber=e}}class wE{constructor(e){this.persistence=e,this.Vi=new xE,this.mi=null}static fi(e){return new wE(e)}get gi(){if(this.mi)return this.mi;throw Ze(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.gi,r=>{const s=$e.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,nt.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return xe.or([()=>xe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class q0{constructor(e,n){this.persistence=e,this.yi=new hu(r=>D8(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=z9(this,n)}static fi(e,n){return new q0(e,n)}di(){}Ai(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return xe.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?xe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,u=>this.Dr(e,u,n).next(c=>{c||(r++,o.removeEntry(u,nt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=d0(e.data.value)),n}Dr(e,n,r){return xe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return xe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=_t(),s=_t();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new IE(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return XM()?8:N8(Ir())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new e7;return this.Ss(e,n,u).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,u,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(ul()<=Et.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",ll(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),xe.resolve()):(ul()<=Et.DEBUG&&Be("QueryEngine","Query:",ll(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(ul()<=Et.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",ll(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(n))):xe.resolve())}ws(e,n){if(VA(n))return xe.resolve(null);let r=Ns(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=f1(n,null,"F"),r=Ns(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=_t(...o);return this.ys.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.vs(n,c);return this.Cs(n,f,u,d.readTime)?this.ws(e,f1(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,r,s){return VA(n)||s.isEqual(nt.min())?xe.resolve(null):this.ys.getDocuments(e,r).next(o=>{const u=this.vs(n,o);return this.Cs(n,u,r,s)?xe.resolve(null):(ul()<=Et.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ll(n)),this.Fs(e,u,n,S8(s,jh)).next(c=>c))})}vs(e,n){let r=new $n(gC(e));return n.forEach((s,o)=>{bm(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return ul()<=Et.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",ll(n)),this.ys.getDocumentsMatchingQuery(e,n,ho.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="LocalStore",n7=3e8;class r7{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new yn(ht),this.Os=new hu(o=>_E(o),bE),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y9(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function i7(t,e,n,r){return new r7(t,e,n,r)}async function VC(t,e){const n=it(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],c=[];let d=_t();for(const f of s){u.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}for(const f of o){c.push(f.batchId);for(const p of f.mutations)d=d.add(p.key)}return n.localDocuments.getDocuments(r,d).next(f=>({ks:f,removedBatchIds:u,addedBatchIds:c}))})})}function s7(t,e){const n=it(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,p){const y=f.batch,b=y.keys();let T=xe.resolve();return b.forEach(x=>{T=T.next(()=>p.getEntry(d,x)).next(N=>{const k=f.docVersions.get(x);Vt(k!==null,48541),N.version.compareTo(k)<0&&(y.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),p.addEntry(N)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=_t();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function HC(t){const e=it(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function a7(t,e){const n=it(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((p,y)=>{const b=s.get(y);if(!b)return;c.push(n.Ti.removeMatchingKeys(o,p.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(o,p.addedDocuments,y)));let T=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(Er.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,r)),s=s.insert(y,T),function(N,k,D){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=n7?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(b,T,p)&&c.push(n.Ti.updateTargetData(o,T))});let d=pa(),f=_t();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(o7(o,u,e.documentUpdates).next(p=>{d=p.qs,f=p.Qs})),!r.isEqual(nt.min())){const p=n.Ti.getLastRemoteSnapshotVersion(o).next(y=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return xe.waitFor(c).next(()=>u.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.xs=s,o))}function o7(t,e,n){let r=_t(),s=_t();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let u=pa();return n.forEach((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(nt.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):Be(CE,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{qs:u,Qs:s}})}function u7(t,e){const n=it(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l7(t,e){const n=it(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,xe.resolve(s)):n.Ti.allocateTargetId(r).next(u=>(s=new eo(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function E1(t,e,n){const r=it(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!jl(u))throw u;Be(CE,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function ZA(t,e,n){const r=it(t);let s=nt.min(),o=_t();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,f,p){const y=it(d),b=y.Os.get(p);return b!==void 0?xe.resolve(y.xs.get(b)):y.Ti.getTargetData(f,p)}(r,u,Ns(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,c.targetId).next(d=>{o=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,n?s:nt.min(),n?o:_t())).next(c=>(c7(r,Q8(e),c),{documents:c,$s:o})))}function c7(t,e,n){let r=t.Ns.get(e)||nt.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class JA{constructor(){this.activeTargetIds=n9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h7{constructor(){this.xo=new JA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new JA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="ConnectivityMonitor";class tS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Be(eS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Be(eS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e0=null;function _1(){return e0===null?e0=function(){return 268435456+Math.round(2147483648*Math.random())}():e0++,"0x"+e0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="RestConnection",f7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m7{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===U0?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const u=_1(),c=this.jo(e,n.toUriEncodedString());Be(gy,`Sending RPC '${e}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,o);const{host:f}=new URL(c),p=cu(f);return this.Jo(e,c,d,r,p).then(y=>(Be(gy,`Received RPC '${e}' ${u}: `,y),y),y=>{throw Rl(gy,`RPC '${e}' ${u} failed with error: `,y,"url: ",c,"request:",r),y})}Yo(e,n,r,s,o,u){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=f7[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="WebChannelConnection";class g7 extends m7{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const u=_1();return new Promise((c,d)=>{const f=new zI;f.setWithCredentials(!0),f.listenOnce(jI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case h0.NO_ERROR:const y=f.getResponseJson();Be(Ar,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),c(y);break;case h0.TIMEOUT:Be(Ar,`RPC '${e}' ${u} timed out`),d(new Ue(Se.DEADLINE_EXCEEDED,"Request time out"));break;case h0.HTTP_ERROR:const b=f.getStatus();if(Be(Ar,`RPC '${e}' ${u} failed with status:`,b,"response text:",f.getResponseText()),b>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const x=T?.error;if(x&&x.status&&x.message){const N=function(D){const z=D.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(z)>=0?z:Se.UNKNOWN}(x.status);d(new Ue(N,x.message))}else d(new Ue(Se.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ue(Se.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{h_:e,streamId:u,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{Be(Ar,`RPC '${e}' ${u} completed.`)}});const p=JSON.stringify(s);Be(Ar,`RPC '${e}' ${u} sending request:`,s),f.send(n,"POST",p,r,15)})}I_(e,n,r){const s=_1(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=GI(),c=YI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const p=o.join("");Be(Ar,`Creating RPC '${e}' stream ${s}: ${p}`,d);const y=u.createWebChannel(p,d);this.E_(y);let b=!1,T=!1;const x=new p7({Zo:k=>{T?Be(Ar,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(b||(Be(Ar,`Opening RPC '${e}' stream ${s} transport.`),y.open(),b=!0),Be(Ar,`RPC '${e}' stream ${s} sending:`,k),y.send(k))},Xo:()=>y.close()}),N=(k,D,z)=>{k.listen(D,Y=>{try{z(Y)}catch(q){setTimeout(()=>{throw q},0)}})};return N(y,mh.EventType.OPEN,()=>{T||(Be(Ar,`RPC '${e}' stream ${s} transport opened.`),x.__())}),N(y,mh.EventType.CLOSE,()=>{T||(T=!0,Be(Ar,`RPC '${e}' stream ${s} transport closed`),x.u_(),this.d_(y))}),N(y,mh.EventType.ERROR,k=>{T||(T=!0,Rl(Ar,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),x.u_(new Ue(Se.UNAVAILABLE,"The operation could not be completed")))}),N(y,mh.EventType.MESSAGE,k=>{var D;if(!T){const z=k.data[0];Vt(!!z,16349);const Y=z,q=Y?.error||((D=Y[0])===null||D===void 0?void 0:D.error);if(q){Be(Ar,`RPC '${e}' stream ${s} received error:`,q);const ee=q.status;let $=function(O){const P=Ln[O];if(P!==void 0)return IC(P)}(ee),R=q.message;$===void 0&&($=Se.INTERNAL,R="Unknown error status: "+ee+" with message "+q.message),T=!0,x.u_(new Ue($,R)),y.close()}else Be(Ar,`RPC '${e}' stream ${s} received:`,z),x.c_(z)}}),N(c,qI.STAT_EVENT,k=>{k.stat===a1.PROXY?Be(Ar,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===a1.NOPROXY&&Be(Ar,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function yy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){return new b9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="PersistentStream";class zC{constructor(e,n,r,s,o,u,c,d){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new FC(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===Se.RESOURCE_EXHAUSTED?(ma(n.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Ue(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Be(nS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Be(nS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y7 extends zC{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=A9(this.serializer,e),r=function(o){if(!("targetChange"in o))return nt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?nt.min():u.readTime?Rs(u.readTime):nt.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=y1(this.serializer),n.addTarget=function(o,u){let c;const d=u.target;if(c=h1(d)?{documents:w9(o,d)}:{query:I9(o,d).gt},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=RC(o,u.resumeToken);const f=m1(o,u.expectedCount);f!==null&&(c.expectedCount=f)}else if(u.snapshotVersion.compareTo(nt.min())>0){c.readTime=j0(o,u.snapshotVersion.toTimestamp());const f=m1(o,u.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=N9(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=y1(this.serializer),n.removeTarget=e,this.Q_(n)}}class E7 extends zC{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=x9(e.writeResults,e.commitTime),r=Rs(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=y1(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>S9(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{}class b7 extends _7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Ue(Se.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.zo(e,p1(n,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(Se.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Yo(e,p1(n,r),s,u,c,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ue(Se.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class T7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ma(n),this.ua=!1):Be("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="RemoteStore";class v7{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(u=>{r.enqueueAndForget(async()=>{du(this)&&(Be(au,"Restarting streams for network reachability change."),await async function(d){const f=it(d);f.da.add(4),await hd(f),f.Va.set("Unknown"),f.da.delete(4),await wm(f)}(this))})}),this.Va=new T7(r,s)}}async function wm(t){if(du(t))for(const e of t.Aa)await e(!0)}async function hd(t){for(const e of t.Aa)await e(!1)}function jC(t,e){const n=it(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),OE(n)?DE(n):Yl(n).N_()&&RE(n,e))}function NE(t,e){const n=it(t),r=Yl(n);n.Ea.delete(e),r.N_()&&qC(n,e),n.Ea.size===0&&(r.N_()?r.k_():du(n)&&n.Va.set("Unknown"))}function RE(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(t).Z_(e)}function qC(t,e){t.ma.Ke(e),Yl(t).X_(e)}function DE(t){t.ma=new g9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Yl(t).start(),t.Va.ca()}function OE(t){return du(t)&&!Yl(t).O_()&&t.Ea.size>0}function du(t){return it(t).da.size===0}function YC(t){t.ma=void 0}async function A7(t){t.Va.set("Online")}async function S7(t){t.Ea.forEach((e,n)=>{RE(t,e)})}async function x7(t,e){YC(t),OE(t)?(t.Va.Pa(e),DE(t)):t.Va.set("Unknown")}async function w7(t,e,n){if(t.Va.set("Online"),e instanceof NC&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,u),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Be(au,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Y0(t,r)}else if(e instanceof p0?t.ma.Xe(e):e instanceof CC?t.ma.ot(e):t.ma.nt(e),!n.isEqual(nt.min()))try{const r=await HC(t.localStore);n.compareTo(r)>=0&&await function(o,u){const c=o.ma.It(u);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const p=o.Ea.get(f);p&&o.Ea.set(f,p.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,f)=>{const p=o.Ea.get(d);if(!p)return;o.Ea.set(d,p.withResumeToken(Er.EMPTY_BYTE_STRING,p.snapshotVersion)),qC(o,d);const y=new eo(p.target,d,f,p.sequenceNumber);RE(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Be(au,"Failed to raise snapshot:",r),await Y0(t,r)}}async function Y0(t,e,n){if(!jl(e))throw e;t.da.add(1),await hd(t),t.Va.set("Offline"),n||(n=()=>HC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Be(au,"Retrying IndexedDB access"),await n(),t.da.delete(1),await wm(t)})}function GC(t,e){return e().catch(n=>Y0(t,n,e))}async function Im(t){const e=it(t),n=go(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:gE;for(;I7(e);)try{const s=await u7(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,C7(e,s)}catch(s){await Y0(e,s)}$C(e)&&KC(e)}function I7(t){return du(t)&&t.Ia.length<10}function C7(t,e){t.Ia.push(e);const n=go(t);n.N_()&&n.ea&&n.ta(e.mutations)}function $C(t){return du(t)&&!go(t).O_()&&t.Ia.length>0}function KC(t){go(t).start()}async function N7(t){go(t).ia()}async function R7(t){const e=go(t);for(const n of t.Ia)e.ta(n.mutations)}async function D7(t,e,n){const r=t.Ia.shift(),s=vE.from(r,e,n);await GC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Im(t)}async function O7(t,e){e&&go(t).ea&&await async function(r,s){if(function(u){return m9(u)&&u!==Se.ABORTED}(s.code)){const o=r.Ia.shift();go(r).L_(),await GC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Im(r)}}(t,e),$C(t)&&KC(t)}async function rS(t,e){const n=it(t);n.asyncQueue.verifyOperationInProgress(),Be(au,"RemoteStore received new credentials");const r=du(n);n.da.add(3),await hd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await wm(n)}async function k7(t,e){const n=it(t);e?(n.da.delete(2),await wm(n)):e||(n.da.add(2),await hd(n),n.Va.set("Unknown"))}function Yl(t){return t.fa||(t.fa=function(n,r,s){const o=it(n);return o.oa(),new y7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:A7.bind(null,t),n_:S7.bind(null,t),i_:x7.bind(null,t),Y_:w7.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),OE(t)?DE(t):t.Va.set("Unknown")):(await t.fa.stop(),YC(t))})),t.fa}function go(t){return t.ga||(t.ga=function(n,r,s){const o=it(n);return o.oa(),new E7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:N7.bind(null,t),i_:O7.bind(null,t),na:R7.bind(null,t),ra:D7.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Im(t)):(await t.ga.stop(),t.Ia.length>0&&(Be(au,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,c=new kE(e,n,u,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function LE(t,e){if(ma("AsyncQueue",`${e}: ${t}`),jl(t))return new Ue(Se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$e.comparator(n.key,r.key):(n,r)=>$e.comparator(n.key,r.key),this.keyedMap=ph(),this.sortedSet=new yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.pa=new yn($e.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ze(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ml{constructor(e,n,r,s,o,u,c,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach(c=>{u.push({type:0,doc:c})}),new Ml(e,n,_l.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class M7{constructor(){this.queries=sS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=it(n),o=s.queries;s.queries=sS(),o.forEach((u,c)=>{for(const d of c.Sa)d.onError(r)})})(this,new Ue(Se.ABORTED,"Firestore shutting down"))}}function sS(){return new hu(t=>pC(t),_m)}async function P7(t,e){const n=it(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new L7,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const c=LE(u,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&ME(n)}async function B7(t,e){const n=it(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function U7(t,e){const n=it(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const c of u.Sa)c.Ma(s)&&(r=!0);u.ba=s}}r&&ME(n)}function V7(t,e,n){const r=it(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function ME(t){t.Ca.forEach(e=>{e.next()})}var b1,aS;(aS=b1||(b1={})).xa="default",aS.Cache="cache";class H7{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==b1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class F7{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=_t(),this.mutatedKeys=_t(),this.Za=gC(e),this.Xa=new _l(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new iS,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,y)=>{const b=s.get(p),T=bm(this.query,y)?y:null,x=!!b&&this.mutatedKeys.has(b.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;b&&T?b.data.isEqual(T.data)?x!==N&&(r.track({type:3,doc:T}),k=!0):this.ru(b,T)||(r.track({type:2,doc:T}),k=!0,(d&&this.Za(T,d)>0||f&&this.Za(T,f)<0)&&(c=!0)):!b&&T?(r.track({type:0,doc:T}),k=!0):b&&!T&&(r.track({type:1,doc:b}),k=!0,(d||f)&&(c=!0)),k&&(T?(u=u.add(T),o=N?o.add(p):o.delete(p)):(u=u.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const p=this.query.limitType==="F"?u.last():u.first();u=u.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Xa:u,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((p,y)=>function(T,x){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Vt:k})}};return N(T)-N(x)}(p.type,y.type)||this.Za(p.doc,y.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,f=d!==this.Ja;return this.Ja=d,u.length!==0||f?{snapshot:new Ml(this.query,e.Xa,o,u,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new iS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=_t(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new QC(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new XC(r))}),n}au(e){this.Ha=e.$s,this.Ya=_t();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Ml.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const PE="SyncEngine";class z7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class j7{constructor(e){this.key=e,this.cu=!1}}class q7{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new hu(c=>pC(c),_m),this.Pu=new Map,this.Tu=new Set,this.Iu=new yn($e.comparator),this.Eu=new Map,this.du=new xE,this.Au={},this.Ru=new Map,this.Vu=Ll.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Y7(t,e,n=!0){const r=nN(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await WC(r,e,n,!0),s}async function G7(t,e){const n=nN(t);await WC(n,e,!0,!1)}async function WC(t,e,n,r){const s=await l7(t.localStore,Ns(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await $7(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&jC(t.remoteStore,s),c}async function $7(t,e,n,r,s){t.fu=(y,b,T)=>async function(N,k,D,z){let Y=k.view.tu(D);Y.Cs&&(Y=await ZA(N.localStore,k.query,!1).then(({documents:R})=>k.view.tu(R,Y)));const q=z&&z.targetChanges.get(k.targetId),ee=z&&z.targetMismatches.get(k.targetId)!=null,$=k.view.applyChanges(Y,N.isPrimaryClient,q,ee);return uS(N,k.targetId,$.ou),$.snapshot}(t,y,b,T);const o=await ZA(t.localStore,e,!0),u=new F7(e,o.$s),c=u.tu(o.documents),d=cd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=u.applyChanges(c,t.isPrimaryClient,d);uS(t,n,f.ou);const p=new z7(e,n,u);return t.hu.set(e,p),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function K7(t,e,n){const r=it(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(u=>!_m(u,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await E1(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&NE(r.remoteStore,s.targetId),T1(r,s.targetId)}).catch(zl)):(T1(r,s.targetId),await E1(r.localStore,s.targetId,!0))}async function X7(t,e){const n=it(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),NE(n.remoteStore,r.targetId))}async function Q7(t,e,n){const r=rB(t);try{const s=await function(u,c){const d=it(u),f=ln.now(),p=c.reduce((T,x)=>T.add(x.key),_t());let y,b;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let x=pa(),N=_t();return d.Bs.getEntries(T,p).next(k=>{x=k,x.forEach((D,z)=>{z.isValidDocument()||(N=N.add(D))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,x)).next(k=>{y=k;const D=[];for(const z of c){const Y=l9(z,y.get(z.key).overlayedDocument);Y!=null&&D.push(new _o(z.key,Y,aC(Y.value.mapValue),_i.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,D,c)}).next(k=>{b=k;const D=k.applyToLocalDocumentSet(y,N);return d.documentOverlayCache.saveOverlays(T,k.batchId,D)})}).then(()=>({batchId:b.batchId,changes:EC(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,d){let f=u.Au[u.currentUser.toKey()];f||(f=new yn(ht)),f=f.insert(c,d),u.Au[u.currentUser.toKey()]=f}(r,s.batchId,n),await dd(r,s.changes),await Im(r.remoteStore)}catch(s){const o=LE(s,"Failed to persist write");n.reject(o)}}async function ZC(t,e){const n=it(t);try{const r=await a7(n.localStore,e);e.targetChanges.forEach((s,o)=>{const u=n.Eu.get(o);u&&(Vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.cu=!0:s.modifiedDocuments.size>0?Vt(u.cu,14607):s.removedDocuments.size>0&&(Vt(u.cu,42227),u.cu=!1))}),await dd(n,r,e)}catch(r){await zl(r)}}function oS(t,e,n){const r=it(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,u)=>{const c=u.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(u,c){const d=it(u);d.onlineState=c;let f=!1;d.queries.forEach((p,y)=>{for(const b of y.Sa)b.Fa(c)&&(f=!0)}),f&&ME(d)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function W7(t,e,n){const r=it(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new yn($e.comparator);u=u.insert(o,xr.newNoDocument(o,nt.min()));const c=_t().add(o),d=new Sm(nt.min(),new Map,new yn(ht),u,c);await ZC(r,d),r.Iu=r.Iu.remove(o),r.Eu.delete(e),BE(r)}else await E1(r.localStore,e,!1).then(()=>T1(r,e,n)).catch(zl)}async function Z7(t,e){const n=it(t),r=e.batch.batchId;try{const s=await s7(n.localStore,e);eN(n,r,null),JC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dd(n,s)}catch(s){await zl(s)}}async function J7(t,e,n){const r=it(t);try{const s=await function(u,c){const d=it(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(Vt(y!==null,37113),p=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,p,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>d.localDocuments.getDocuments(f,p))})}(r.localStore,e);eN(r,e,n),JC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await dd(r,s)}catch(s){await zl(s)}}function JC(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function eN(t,e,n){const r=it(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function T1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||tN(t,r)})}function tN(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(NE(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),BE(t))}function uS(t,e,n){for(const r of n)r instanceof XC?(t.du.addReference(r.key,e),eB(t,r)):r instanceof QC?(Be(PE,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||tN(t,r.key)):Ze(19791,{pu:r})}function eB(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Be(PE,"New document in limbo: "+n),t.Tu.add(r),BE(t))}function BE(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new $e(un.fromString(e)),r=t.Vu.next();t.Eu.set(r,new j7(n)),t.Iu=t.Iu.insert(n,r),jC(t.remoteStore,new eo(Ns(fC(n.path)),r,"TargetPurposeLimboResolution",gm.le))}}async function dd(t,e,n){const r=it(t),s=[],o=[],u=[];r.hu.isEmpty()||(r.hu.forEach((c,d)=>{u.push(r.fu(d,e,n).then(f=>{var p;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(p=n?.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){s.push(f);const y=IE.Rs(d.targetId,f);o.push(y)}}))}),await Promise.all(u),r.lu.Y_(s),await async function(d,f){const p=it(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>xe.forEach(f,b=>xe.forEach(b.ds,T=>p.persistence.referenceDelegate.addReference(y,b.targetId,T)).next(()=>xe.forEach(b.As,T=>p.persistence.referenceDelegate.removeReference(y,b.targetId,T)))))}catch(y){if(!jl(y))throw y;Be(CE,"Failed to update sequence numbers: "+y)}for(const y of f){const b=y.targetId;if(!y.fromCache){const T=p.xs.get(b),x=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(x);p.xs=p.xs.insert(b,N)}}}(r.localStore,o))}async function tB(t,e){const n=it(t);if(!n.currentUser.isEqual(e)){Be(PE,"User change. New user:",e.toKey());const r=await VC(n.localStore,e);n.currentUser=e,function(o,u){o.Ru.forEach(c=>{c.forEach(d=>{d.reject(new Ue(Se.CANCELLED,u))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await dd(n,r.ks)}}function nB(t,e){const n=it(t),r=n.Eu.get(e);if(r&&r.cu)return _t().add(r.key);{let s=_t();const o=n.Pu.get(e);if(!o)return s;for(const u of o){const c=n.hu.get(u);s=s.unionWith(c.view.eu)}return s}}function nN(t){const e=it(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W7.bind(null,e),e.lu.Y_=U7.bind(null,e.eventManager),e.lu.gu=V7.bind(null,e.eventManager),e}function rB(t){const e=it(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J7.bind(null,e),e}class G0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return i7(this.persistence,new t7,e.initialUser,this.serializer)}Su(e){return new UC(wE.fi,this.serializer)}bu(e){return new h7}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}G0.provider={build:()=>new G0};class iB extends G0{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Vt(this.persistence.referenceDelegate instanceof q0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new H9(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Qr.withCacheSize(this.cacheSizeBytes):Qr.DEFAULT;return new UC(r=>q0.fi(r,n),this.serializer)}}class v1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tB.bind(null,this.syncEngine),await k7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M7}()}createDatastore(e){const n=xm(e.databaseInfo.databaseId),r=function(o){return new g7(o)}(e.databaseInfo);return function(o,u,c,d){return new b7(o,u,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,u,c){return new v7(r,s,o,u,c)}(this.localStore,this.datastore,e.asyncQueue,n=>oS(this.syncEngine,n,0),function(){return tS.C()?new tS:new d7}())}createSyncEngine(e,n){return function(s,o,u,c,d,f,p){const y=new q7(s,o,u,c,d,f);return p&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=it(s);Be(au,"RemoteStore shutting down."),o.da.add(5),await hd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}v1.provider={build:()=>new v1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="FirestoreClient";class aB{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Sr.UNAUTHENTICATED,this.clientId=QI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{Be(yo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Be(yo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=LE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ey(t,e){t.asyncQueue.verifyOperationInProgress(),Be(yo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await VC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oB(t);Be(yo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>rS(e.remoteStore,s)),t._onlineComponents=e}async function oB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be(yo,"Using user provided OfflineComponentProvider");try{await Ey(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Se.FAILED_PRECONDITION||s.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Rl("Error using user provided cache. Falling back to memory cache: "+n),await Ey(t,new G0)}}else Be(yo,"Using default OfflineComponentProvider"),await Ey(t,new iB(void 0));return t._offlineComponents}async function rN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be(yo,"Using user provided OnlineComponentProvider"),await lS(t,t._uninitializedComponentsProvider._online)):(Be(yo,"Using default OnlineComponentProvider"),await lS(t,new v1))),t._onlineComponents}function uB(t){return rN(t).then(e=>e.syncEngine)}async function lB(t){const e=await rN(t),n=e.eventManager;return n.onListen=Y7.bind(null,e.syncEngine),n.onUnlisten=K7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=G7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=X7.bind(null,e.syncEngine),n}function cB(t,e,n={}){const r=new oo;return t.asyncQueue.enqueueAndForget(async()=>function(o,u,c,d,f){const p=new sB({next:b=>{p.xu(),u.enqueueAndForget(()=>B7(o,y)),b.fromCache&&d.source==="server"?f.reject(new Ue(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),y=new H7(c,p,{includeMetadataChanges:!0,Qa:!0});return P7(o,y)}(await lB(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e,n){if(!n)throw new Ue(Se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hB(t,e,n,r){if(e===!0&&r===!0)throw new Ue(Se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hS(t){if(!$e.isDocumentKey(t))throw new Ue(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dS(t){if($e.isDocumentKey(t))throw new Ue(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ze(12329,{type:typeof t})}function ou(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cm(t);throw new Ue(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firestore.googleapis.com",fS=!0;class mS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aN,this.ssl=fS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:fS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<U9)throw new Ue(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ue(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ue(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ue(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p8;switch(r.type){case"firstParty":return new _8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cS.get(n);r&&(Be("ComponentProvider","Removing Datastore"),cS.delete(n),r.terminate())}(this),Promise.resolve()}}function dB(t,e,n,r={}){var s;t=ou(t,Nm);const o=cu(e),u=t._getSettings(),c=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(cE(`https://${d}`),hE("Firestore",!0)),u.host!==aN&&u.host!==d&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},u),{host:d,ssl:o,emulatorOptions:r});if(!ru(f,c)&&(t._setSettings(f),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=Sr.MOCK_USER;else{p=HM(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Ue(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Sr(b)}t._authCredentials=new g8(new KI(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fu(this.firestore,e,this._query)}}class bi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bi(this.firestore,e,this._key)}}class uo extends fu{constructor(e,n,r){super(e,n,fC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bi(this.firestore,null,new $e(e))}withConverter(e){return new uo(this.firestore,e,this._path)}}function UE(t,e,...n){if(t=An(t),sN("collection","path",e),t instanceof Nm){const r=un.fromString(e,...n);return dS(r),new uo(t,null,r)}{if(!(t instanceof bi||t instanceof uo))throw new Ue(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return dS(r),new uo(t.firestore,null,r)}}function Gl(t,e,...n){if(t=An(t),arguments.length===1&&(e=QI.newId()),sN("doc","path",e),t instanceof Nm){const r=un.fromString(e,...n);return hS(r),new bi(t,null,new $e(r))}{if(!(t instanceof bi||t instanceof uo))throw new Ue(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(un.fromString(e,...n));return hS(r),new bi(t.firestore,t instanceof uo?t.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="AsyncQueue";class gS{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new FC(this,"async_queue_retry"),this.rc=()=>{const r=yy();r&&Be(pS,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=yy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=yy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new oo;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!jl(e))throw e;Be(pS,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ma("INTERNAL UNHANDLED ERROR: ",yS(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=kE.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&Ze(47125,{cc:yS(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function yS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class fd extends Nm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new gS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gS(e),this._firestoreClient=void 0,await e}}}function fB(t,e){const n=typeof t=="object"?t:mE(),r=typeof t=="string"?t:U0,s=pm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=kI("firestore");o&&dB(s,...o)}return s}function VE(t){if(t._terminated)throw new Ue(Se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mB(t),t._firestoreClient}function mB(t){var e,n,r;const s=t._freezeSettings(),o=function(c,d,f,p){return new L8(c,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,iN(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new aB(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(Er.fromBase64String(e))}catch(n){throw new Ue(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pl(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=/^__.*__$/;class gB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,n,this.fieldTransforms):new ld(e,this.data,n,this.fieldTransforms)}}class oN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _o(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ic:t})}}class jE{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new jE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return $0(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(uN(this.Ic)&&pB.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class yB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xm(e)}bc(e,n,r,s=!1){return new jE({Ic:e,methodName:n,wc:r,path:yr.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qE(t){const e=t._freezeSettings(),n=xm(t._databaseId);return new yB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lN(t,e,n,r,s,o={}){const u=t.bc(o.merge||o.mergeFields?2:0,e,n,s);YE("Data must be an object, but it was:",u,r);const c=cN(r,u);let d,f;if(o.merge)d=new yi(u.fieldMask),f=u.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const b=A1(e,y,n);if(!u.contains(b))throw new Ue(Se.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);dN(p,b)||p.push(b)}d=new yi(p),f=u.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=u.fieldTransforms;return new gB(new Zr(c),d,f)}class Dm extends HE{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dm}}function EB(t,e,n,r){const s=t.bc(1,e,n);YE("Data must be an object, but it was:",s,r);const o=[],u=Zr.empty();Eo(r,(d,f)=>{const p=GE(e,d,n);f=An(f);const y=s.mc(p);if(f instanceof Dm)o.push(p);else{const b=md(f,y);b!=null&&(o.push(p),u.set(p,b))}});const c=new yi(o);return new oN(u,c,s.fieldTransforms)}function _B(t,e,n,r,s,o){const u=t.bc(1,e,n),c=[A1(e,r,n)],d=[s];if(o.length%2!=0)throw new Ue(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(A1(e,o[b])),d.push(o[b+1]);const f=[],p=Zr.empty();for(let b=c.length-1;b>=0;--b)if(!dN(f,c[b])){const T=c[b];let x=d[b];x=An(x);const N=u.mc(T);if(x instanceof Dm)f.push(T);else{const k=md(x,N);k!=null&&(f.push(T),p.set(T,k))}}const y=new yi(f);return new oN(p,y,u.fieldTransforms)}function bB(t,e,n,r=!1){return md(n,t.bc(r?4:3,e))}function md(t,e){if(hN(t=An(t)))return YE("Unsupported field value:",e,t),cN(t,e);if(t instanceof HE)return function(r,s){if(!uN(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const c of r){let d=md(c,s.fc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=An(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return r9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ln.fromDate(r);return{timestampValue:j0(s.serializer,o)}}if(r instanceof ln){const o=new ln(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:j0(s.serializer,o)}}if(r instanceof FE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pl)return{bytesValue:RC(s.serializer,r._byteString)};if(r instanceof bi){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:SE(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof zE)return function(u,c){return{mapValue:{fields:{[iC]:{stringValue:sC},[V0]:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw c.gc("VectorValues must only contain numeric values.");return TE(c.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Cm(r)}`)}(t,e)}function cN(t,e){const n={};return ZI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(r,s)=>{const o=md(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function hN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ln||t instanceof FE||t instanceof Pl||t instanceof bi||t instanceof HE||t instanceof zE)}function YE(t,e,n){if(!hN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Cm(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function A1(t,e,n){if((e=An(e))instanceof Rm)return e._internalPath;if(typeof e=="string")return GE(t,e);throw $0("Field path arguments must be of type string or ",t,!1,void 0,n)}const TB=new RegExp("[~\\*/\\[\\]]");function GE(t,e,n){if(e.search(TB)>=0)throw $0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rm(...e.split("."))._internalPath}catch{throw $0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $0(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${s}`),d+=")"),new Ue(Se.INVALID_ARGUMENT,c+t+d)}function dN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Om("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vB extends fN{data(){return super.data()}}function Om(t,e){return typeof e=="string"?GE(t,e):e instanceof Rm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ue(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $E{}class mN extends $E{}function SB(t,e,...n){let r=[];e instanceof $E&&r.push(e),r=r.concat(n),function(o){const u=o.filter(d=>d instanceof KE).length,c=o.filter(d=>d instanceof km).length;if(u>1||u>0&&c>0)throw new Ue(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class km extends mN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new km(e,n,r)}_apply(e){const n=this._parse(e);return pN(e._query,n),new fu(e.firestore,e.converter,d1(e._query,n))}_parse(e){const n=qE(e.firestore);return function(o,u,c,d,f,p,y){let b;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ue(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){_S(y,p);const x=[];for(const N of y)x.push(ES(d,o,N));b={arrayValue:{values:x}}}else b=ES(d,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||_S(y,p),b=bB(c,u,y,p==="in"||p==="not-in");return Bn.create(f,p,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xB(t,e,n){const r=e,s=Om("where",t);return km._create(s,r,n)}class KE extends $E{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new KE(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let u=s;const c=o.getFlattenedFilters();for(const d of c)pN(u,d),u=d1(u,d)}(e._query,n),new fu(e.firestore,e.converter,d1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class XE extends mN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new XE(e,n)}_apply(e){const n=function(s,o,u){if(s.startAt!==null)throw new Ue(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ue(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $h(o,u)}(e._query,this._field,this._direction);return new fu(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new ql(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function wB(t,e="asc"){const n=e,r=Om("orderBy",t);return XE._create(r,n)}function ES(t,e,n){if(typeof(n=An(n))=="string"){if(n==="")throw new Ue(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mC(e)&&n.indexOf("/")!==-1)throw new Ue(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(un.fromString(n));if(!$e.isDocumentKey(r))throw new Ue(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kA(t,new $e(r))}if(n instanceof bi)return kA(t,n._key);throw new Ue(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(n)}.`)}function _S(t,e){if(!Array.isArray(t)||t.length===0)throw new Ue(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pN(t,e){const n=function(s,o){for(const u of s)for(const c of u.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ue(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IB{convertValue(e,n="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Eo(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[V0].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Cn(u.doubleValue));return new zE(o)}convertGeoPoint(e){return new FE(Cn(e.latitude),Cn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Em(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qh(e));default:return null}}convertTimestamp(e){const n=fo(e);return new ln(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=un.fromString(e);Vt(PC(r),9688,{name:e});const s=new Yh(r.get(1),r.get(3)),o=new $e(r.popFirst(5));return s.isEqual(n)||ma(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CB extends fN{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new g0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Om("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class g0 extends CB{data(e={}){return super.data(e)}}class NB{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new t0(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new g0(this._firestore,this._userDataWriter,r.key,r,new t0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(c=>{const d=new g0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new t0(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new g0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new t0(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return c.type!==0&&(f=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),p=u.indexOf(c.doc.key)),{type:RB(c.type),doc:d,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:t})}}class DB extends IB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bi(this.firestore,null,n)}}function QE(t){t=ou(t,fu);const e=ou(t.firestore,fd),n=VE(e),r=new DB(e);return AB(t._query),cB(n,t._query).then(s=>new NB(e,r,t,s))}function WE(t,e,n){t=ou(t,bi);const r=ou(t.firestore,fd),s=gN(t.converter,e,n);return ZE(r,[lN(qE(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_i.none())])}function OB(t){return ZE(ou(t.firestore,fd),[new Am(t._key,_i.none())])}function ZE(t,e){return function(r,s){const o=new oo;return r.asyncQueue.enqueueAndForget(async()=>Q7(await uB(r),s,o)),o.promise}(VE(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=qE(e)}set(e,n,r){this._verifyNotCommitted();const s=_y(e,this._firestore),o=gN(s.converter,n,r),u=lN(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,_i.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=_y(e,this._firestore);let u;return u=typeof(n=An(n))=="string"||n instanceof Rm?_B(this._dataReader,"WriteBatch.update",o._key,n,r,s):EB(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,_i.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=_y(e,this._firestore);return this._mutations=this._mutations.concat(new Am(n._key,_i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _y(t,e){if((t=An(t)).firestore!==e)throw new Ue(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){return VE(t=ou(t,fd)),new kB(t,e=>ZE(t,e))}(function(e,n=!0){(function(s){Fl=s})(Hl),iu(new co("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),c=new fd(new y8(r.getProvider("auth-internal")),new b8(u,r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ue(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yh(f.options.projectId,p)}(u,s),u);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Cs(TA,vA,e),Cs(TA,vA,"esm2017")})();function JE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function EN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LB=EN,_N=new od("auth","Firebase",EN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new dE("@firebase/auth");function MB(t,...e){K0.logLevel<=Et.WARN&&K0.warn(`Auth (${Hl}): ${t}`,...e)}function y0(t,...e){K0.logLevel<=Et.ERROR&&K0.error(`Auth (${Hl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,...e){throw e_(t,...e)}function Ds(t,...e){return e_(t,...e)}function bN(t,e,n){const r=Object.assign(Object.assign({},LB()),{[e]:n});return new od("auth","Firebase",r).create(e,{appName:t.name})}function ca(t){return bN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _N.create(t,...e)}function We(t,e,...n){if(!t)throw e_(e,...n)}function ua(t){const e="INTERNAL ASSERTION FAILED: "+t;throw y0(e),new Error(e)}function ga(t,e){t||ua(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PB(){return bS()==="http:"||bS()==="https:"}function bS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PB()||GM()||"connection"in navigator)?navigator.onLine:!0}function UB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,n){this.shortDelay=e,this.longDelay=n,ga(n>e,"Short delay should be less than long delay!"),this.isMobile=jM()||$M()}get(){return BB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e){ga(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FB=new pd(3e4,6e4);function bo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function To(t,e,n,r,s={}){return vN(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const c=ud(Object.assign({key:t.config.apiKey},u)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return YM()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&cu(t.emulatorConfig.host)&&(f.credentials="include"),TN.fetch()(await AN(t,t.config.apiHost,n,c),f)})}async function vN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},VB),e);try{const s=new jB(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw n0(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const c=o.ok?u.errorMessage:u.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw n0(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw n0(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw n0(t,"user-disabled",u);const p=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw bN(t,p,f);rs(t,p)}}catch(s){if(s instanceof Ps)throw s;rs(t,"network-request-failed",{message:String(s)})}}async function gd(t,e,n,r,s={}){const o=await To(t,e,n,r,s);return"mfaPendingCredential"in o&&rs(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function AN(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?t_(t.config,s):`${t.config.apiScheme}://${s}`;return HB.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function zB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jB{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ds(this.auth,"network-request-failed")),FB.get())})}}function n0(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ds(t,e,r);return s.customData._tokenResponse=n,s}function TS(t){return t!==void 0&&t.enterprise!==void 0}class qB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YB(t,e){return To(t,"GET","/v2/recaptchaConfig",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e){return To(t,"POST","/v1/accounts:delete",e)}async function X0(t,e){return To(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $B(t,e=!1){const n=An(t),r=await n.getIdToken(e),s=n_(r);We(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:r,authTime:Sh(by(s.auth_time)),issuedAtTime:Sh(by(s.iat)),expirationTime:Sh(by(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function by(t){return Number(t)*1e3}function n_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return y0("JWT malformed, contained fewer than 3 sections"),null;try{const s=DI(n);return s?JSON.parse(s):(y0("Failed to decode base64 JWT payload"),null)}catch(s){return y0("Caught error parsing JWT payload as JSON",s?.toString()),null}}function vS(t){const e=n_(t);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ps&&KB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sh(this.lastLoginAt),this.creationTime=Sh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Qh(t,X0(n,{idToken:r}));We(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?SN(o.providerUserInfo):[],c=WB(t.providerData,u),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!c?.length,p=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new x1(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function QB(t){const e=An(t);await Q0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WB(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function SN(t){return t.map(e=>{var{providerId:n}=e,r=JE(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZB(t,e){const n=await vN(t,{},async()=>{const r=ud({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await AN(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:r};return t.emulatorConfig&&cu(t.emulatorConfig.host)&&(d.credentials="include"),TN.fetch()(u,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JB(t,e){return To(t,"POST","/v2/accounts:revokeToken",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){We(e.length!==0,"internal-error");const n=vS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await ZB(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new bl;return r&&(We(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(We(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(We(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return ua("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t,e){We(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ts{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=JE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new x1(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Qh(this,this.stsTokenManager.getToken(this.auth,e));return We(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $B(this,e)}reload(){return QB(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ts(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Q0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(ca(this.auth));const e=await this.getIdToken();return await Qh(this,GB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,c,d,f,p;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,b=(s=n.email)!==null&&s!==void 0?s:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,x=(u=n.photoURL)!==null&&u!==void 0?u:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,k=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,D=(f=n.createdAt)!==null&&f!==void 0?f:void 0,z=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:Y,emailVerified:q,isAnonymous:ee,providerData:$,stsTokenManager:R}=n;We(Y&&R,e,"internal-error");const C=bl.fromJSON(this.name,R);We(typeof Y=="string",e,"internal-error"),za(y,e.name),za(b,e.name),We(typeof q=="boolean",e,"internal-error"),We(typeof ee=="boolean",e,"internal-error"),za(T,e.name),za(x,e.name),za(N,e.name),za(k,e.name),za(D,e.name),za(z,e.name);const O=new ts({uid:Y,auth:e,email:b,emailVerified:q,displayName:y,isAnonymous:ee,photoURL:x,phoneNumber:T,tenantId:N,stsTokenManager:C,createdAt:D,lastLoginAt:z});return $&&Array.isArray($)&&(O.providerData=$.map(P=>Object.assign({},P))),k&&(O._redirectEventId=k),O}static async _fromIdTokenResponse(e,n,r=!1){const s=new bl;s.updateFromServerResponse(n);const o=new ts({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Q0(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];We(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?SN(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,c=new bl;c.updateFromIdToken(r);const d=new ts({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:u}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new x1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new Map;function la(t){ga(t instanceof Function,"Expected a class definition");let e=AS.get(t);return e?(ga(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xN.type="NONE";const SS=xN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t,e,n){return`firebase:${t}:${e}:${n}`}class Tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=E0(this.userKey,s.apiKey,o),this.fullPersistenceKey=E0("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await X0(this.auth,{idToken:e}).catch(()=>{});return n?ts._fromGetAccountInfoResponse(this.auth,n,e):null}return ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tl(la(SS),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||la(SS);const u=E0(r,e.config.apiKey,e.name);let c=null;for(const f of n)try{const p=await f._get(u);if(p){let y;if(typeof p=="string"){const b=await X0(e,{idToken:p}).catch(()=>{});if(!b)break;y=await ts._fromGetAccountInfoResponse(e,b,p)}else y=ts._fromJSON(e,p);f!==o&&(c=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Tl(o,e,r):(o=d[0],c&&await o._set(u,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(u)}catch{}})),new Tl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DN(e))return"Blackberry";if(ON(e))return"Webos";if(IN(e))return"Safari";if((e.includes("chrome/")||CN(e))&&!e.includes("edge/"))return"Chrome";if(RN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function wN(t=Ir()){return/firefox\//i.test(t)}function IN(t=Ir()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CN(t=Ir()){return/crios\//i.test(t)}function NN(t=Ir()){return/iemobile/i.test(t)}function RN(t=Ir()){return/android/i.test(t)}function DN(t=Ir()){return/blackberry/i.test(t)}function ON(t=Ir()){return/webos/i.test(t)}function r_(t=Ir()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eU(t=Ir()){var e;return r_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tU(){return KM()&&document.documentMode===10}function kN(t=Ir()){return r_(t)||RN(t)||ON(t)||DN(t)||/windows phone/i.test(t)||NN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e=[]){let n;switch(t){case"Browser":n=xS(Ir());break;case"Worker":n=`${xS(Ir())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,c)=>{try{const d=e(o);u(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(t,e={}){return To(t,"GET","/v2/passwordPolicy",bo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=6;class sU{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:iU,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wS(this),this.idTokenSubscription=new wS(this),this.beforeStateQueue=new nU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_N,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=la(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await X0(this,{idToken:e}),r=await ts._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===c)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Q0(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(ca(this));const n=e?An(e):null;return n&&We(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(ca(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(ca(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rU(this),n=new sU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new od("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&la(e)||this._popupRedirectResolver;We(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[la(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(c,this,"internal-error"),c.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&MB(`Error while retrieving App Check token: ${n.error}`),n?.token}}function mu(t){return An(t)}class wS{constructor(e){this.auth=e,this.observer=null,this.addObserver=nP(n=>this.observer=n)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oU(t){Lm=t}function MN(t){return Lm.loadJS(t)}function uU(){return Lm.recaptchaEnterpriseScript}function lU(){return Lm.gapiScript}function cU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hU{constructor(){this.enterprise=new dU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fU="recaptcha-enterprise",PN="NO_RECAPTCHA";class mU{constructor(e){this.type=fU,this.auth=mu(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,c)=>{YB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new qB(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,u(f.siteKey)}}).catch(d=>{c(d)})})}function s(o,u,c){const d=window.grecaptcha;TS(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{u(f)}).catch(()=>{u(PN)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hU().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(c=>{if(!n&&TS(window.grecaptcha))s(c,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=uU();d.length!==0&&(d+=c),MN(d).then(()=>{s(c,o,u)}).catch(f=>{u(f)})}}).catch(c=>{u(c)})})}}async function IS(t,e,n,r=!1,s=!1){const o=new mU(t);let u;if(s)u=PN;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:u}):Object.assign(c,{captchaResponse:u}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function w1(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await IS(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await IS(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t,e){const n=pm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(ru(o,e??{}))return s;rs(s,"already-initialized")}return n.initialize({options:e})}function gU(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(la);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function yU(t,e,n){const r=mu(t);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=BN(e),{host:u,port:c}=EU(e),d=c===null?"":`:${c}`,f={url:`${o}//${u}${d}/`},p=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(ru(f,r.config.emulator)&&ru(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,cu(u)?(cE(`${o}//${u}${d}`),hE("Auth",!0)):_U()}function BN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EU(t){const e=BN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:CS(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:CS(u)}}}function CS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _U(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ua("not implemented")}_getIdTokenResponse(e){return ua("not implemented")}_linkToIdToken(e,n){return ua("not implemented")}_getReauthenticationResolver(e){return ua("not implemented")}}async function bU(t,e){return To(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TU(t,e){return gd(t,"POST","/v1/accounts:signInWithPassword",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(t,e){return gd(t,"POST","/v1/accounts:signInWithEmailLink",bo(t,e))}async function AU(t,e){return gd(t,"POST","/v1/accounts:signInWithEmailLink",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends i_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Wh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w1(e,n,"signInWithPassword",TU);case"emailLink":return vU(e,{email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return w1(e,r,"signUpPassword",bU);case"emailLink":return AU(e,{idToken:n,email:this._email,oobCode:this._password});default:rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t,e){return gd(t,"POST","/v1/accounts:signInWithIdp",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU="http://localhost";class uu extends i_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=JE(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new uu(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return vl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vl(e,n)}buildRequest(){const e={requestUri:SU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ud(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wU(t){const e=dh(fh(t)).link,n=e?dh(fh(e)).deep_link_id:null,r=dh(fh(t)).deep_link_id;return(r?dh(fh(r)).link:null)||r||n||e||t}class s_{constructor(e){var n,r,s,o,u,c;const d=dh(fh(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,p=(r=d.oobCode)!==null&&r!==void 0?r:null,y=xU((s=d.mode)!==null&&s!==void 0?s:null);We(f&&p&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=p,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=wU(e);try{return new s_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return Wh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=s_.parseLink(n);return We(r,"argument-error"),Wh._fromEmailAndCode(e,r.code,r.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends UN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends yd{constructor(){super("facebook.com")}static credential(e){return uu._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends yd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uu._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qa.credential(n,r)}catch{return null}}}Qa.GOOGLE_SIGN_IN_METHOD="google.com";Qa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends yd{constructor(){super("github.com")}static credential(e){return uu._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.GITHUB_SIGN_IN_METHOD="github.com";Wa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends yd{constructor(){super("twitter.com")}static credential(e,n){return uu._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Za.credential(n,r)}catch{return null}}}Za.TWITTER_SIGN_IN_METHOD="twitter.com";Za.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IU(t,e){return gd(t,"POST","/v1/accounts:signUp",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await ts._fromIdTokenResponse(e,r,s),u=NS(r);return new lu({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=NS(r);return new lu({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function NS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends Ps{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,W0.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new W0(e,n,r,s)}}function VN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?W0._fromErrorAndOperation(t,o,e,r):o})}async function CU(t,e,n=!1){const r=await Qh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e,n=!1){const{auth:r}=t;if(gi(r.app))return Promise.reject(ca(r));const s="reauthenticate";try{const o=await Qh(t,VN(r,s,e,t),n);We(o.idToken,r,"internal-error");const u=n_(o.idToken);We(u,r,"internal-error");const{sub:c}=u;return We(t.uid===c,r,"user-mismatch"),lu._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&rs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e,n=!1){if(gi(t.app))return Promise.reject(ca(t));const r="signIn",s=await VN(t,r,e),o=await lu._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function RU(t,e){return HN(mu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t){const e=mu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DU(t,e,n){if(gi(t.app))return Promise.reject(ca(t));const r=mu(t),u=await w1(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IU).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&FN(t),d}),c=await lu._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(c.user),c}function OU(t,e,n){return gi(t.app)?Promise.reject(ca(t)):RU(An(t),$l.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FN(t),r})}function kU(t,e,n,r){return An(t).onIdTokenChanged(e,n,r)}function LU(t,e,n){return An(t).beforeAuthStateChanged(e,n)}function MU(t,e,n,r){return An(t).onAuthStateChanged(e,n,r)}function PU(t){return An(t).signOut()}const Z0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Z0,"1"),this.storage.removeItem(Z0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=1e3,UU=10;class jN extends zN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,c,d)=>{this.notifyListeners(u,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);tU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jN.type="LOCAL";const VU=jN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN extends zN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qN.type="SESSION";const YN=qN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Mm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(u).map(async f=>f(n.origin,o)),d=await HU(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((c,d)=>{const f=a_("",20);s.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(y){const b=y;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(b.data.response);break;default:clearTimeout(p),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function zU(t){Os().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function jU(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YU(){return GN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="firebaseLocalStorageDb",GU=1,J0="firebaseLocalStorage",KN="fbase_key";class Ed{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pm(t,e){return t.transaction([J0],e?"readwrite":"readonly").objectStore(J0)}function $U(){const t=indexedDB.deleteDatabase($N);return new Ed(t).toPromise()}function I1(){const t=indexedDB.open($N,GU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(J0,{keyPath:KN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(J0)?e(r):(r.close(),await $U(),e(await I1()))})})}async function RS(t,e,n){const r=Pm(t,!0).put({[KN]:e,value:n});return new Ed(r).toPromise()}async function KU(t,e){const n=Pm(t,!1).get(e),r=await new Ed(n).toPromise();return r===void 0?null:r.value}function DS(t,e){const n=Pm(t,!0).delete(e);return new Ed(n).toPromise()}const XU=800,QU=3;class XN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await I1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mm._getInstance(YU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jU(),!this.activeServiceWorker)return;this.sender=new FU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await I1();return await RS(e,Z0,"1"),await DS(e,Z0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>RS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>KU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Pm(s,!1).getAll();return new Ed(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XN.type="LOCAL";const WU=XN;new pd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t,e){return e?la(e):(We(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends i_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JU(t){return HN(t.auth,new o_(t),t.bypassAuthState)}function eV(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),NU(n,new o_(t),t.bypassAuthState)}async function tV(t){const{auth:e,user:n}=t;return We(n,e,"internal-error"),CU(n,new o_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:c}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JU;case"linkViaPopup":case"linkViaRedirect":return tV;case"reauthViaPopup":case"reauthViaRedirect":return eV;default:rs(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=new pd(2e3,1e4);class fl extends QN{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,fl.currentPopupAction&&fl.currentPopupAction.cancel(),fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=a_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nV.get())};e()}}fl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV="pendingRedirect",_0=new Map;class iV extends QN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=_0.get(this.auth._key());if(!e){try{const r=await sV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}_0.set(this.auth._key(),e)}return this.bypassAuthState||_0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sV(t,e){const n=uV(e),r=oV(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function aV(t,e){_0.set(t._key(),e)}function oV(t){return la(t._redirectPersistence)}function uV(t){return E0(rV,t.config.apiKey,t.name)}async function lV(t,e,n=!1){if(gi(t.app))return Promise.reject(ca(t));const r=mu(t),s=ZU(r,e),u=await new iV(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=10*60*1e3;class hV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ds(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cV&&this.cachedEventUids.clear(),this.cachedEventUids.has(OS(e))}saveEventToCache(e){this.cachedEventUids.add(OS(e)),this.lastProcessedEventTime=Date.now()}}function OS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function dV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV(t,e={}){return To(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pV=/^https?/;async function gV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fV(t);for(const n of e)try{if(yV(n))return}catch{}rs(t,"unauthorized-domain")}function yV(t){const e=S1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!pV.test(n))return!1;if(mV.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new pd(3e4,6e4);function kS(){const t=Os().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _V(t){return new Promise((e,n)=>{var r,s,o;function u(){kS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kS(),n(Ds(t,"network-request-failed"))},timeout:EV.get()})}if(!((s=(r=Os().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Os().gapi)===null||o===void 0)&&o.load)u();else{const c=cU("iframefcb");return Os()[c]=()=>{gapi.load?u():n(Ds(t,"network-request-failed"))},MN(`${lU()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw b0=null,e})}let b0=null;function bV(t){return b0=b0||_V(t),b0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new pd(5e3,15e3),vV="__/auth/iframe",AV="emulator/auth/iframe",SV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wV(t){const e=t.config;We(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?t_(e,AV):`https://${t.config.authDomain}/${vV}`,r={apiKey:e.apiKey,appName:t.name,v:Hl},s=xV.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ud(r).slice(1)}`}async function IV(t){const e=await bV(t),n=Os().gapi;return We(n,t,"internal-error"),e.open({where:document.body,url:wV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SV,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=Ds(t,"network-request-failed"),c=Os().setTimeout(()=>{o(u)},TV.get());function d(){Os().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NV=500,RV=600,DV="_blank",OV="http://localhost";class LS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kV(t,e,n,r=NV,s=RV){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},CV),{width:r.toString(),height:s.toString(),top:o,left:u}),f=Ir().toLowerCase();n&&(c=CN(f)?DV:n),wN(f)&&(e=e||OV,d.scrollbars="yes");const p=Object.entries(d).reduce((b,[T,x])=>`${b}${T}=${x},`,"");if(eU(f)&&c!=="_self")return LV(e||"",c),new LS(null);const y=window.open(e||"",c,p);We(y,t,"popup-blocked");try{y.focus()}catch{}return new LS(y)}function LV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="__/auth/handler",PV="emulator/auth/handler",BV=encodeURIComponent("fac");async function MS(t,e,n,r,s,o){We(t.config.authDomain,t,"auth-domain-config-required"),We(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hl,eventId:s};if(e instanceof UN){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",tP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))u[p]=y}if(e instanceof yd){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(u.scopes=p.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),f=d?`#${BV}=${encodeURIComponent(d)}`:"";return`${UV(t)}?${ud(c).slice(1)}${f}`}function UV({config:t}){return t.emulator?t_(t,PV):`https://${t.authDomain}/${MV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="webStorageSupport";class VV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YN,this._completeRedirectFn=lV,this._overrideRedirectResult=aV}async _openPopup(e,n,r,s){var o;ga((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await MS(e,n,r,S1(),s);return kV(e,u,a_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await MS(e,n,r,S1(),s);return zU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(ga(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IV(e),r=new hV(e);return n.register("authEvent",s=>(We(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ty,{type:Ty},s=>{var o;const u=(o=s?.[0])===null||o===void 0?void 0:o[Ty];u!==void 0&&n(!!u),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kN()||IN()||r_()}}const HV=VV;var PS="@firebase/auth",BS="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jV(t){iu(new co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=r.options;We(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LN(t)},f=new aU(r,s,o,d);return gU(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),iu(new co("auth-internal",e=>{const n=mu(e.getProvider("auth").getImmediate());return(r=>new FV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(PS,BS,zV(t)),Cs(PS,BS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=5*60,YV=MI("authIdTokenMaxAge")||qV;let US=null;const GV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YV)return;const s=n?.token;US!==s&&(US=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $V(t=mE()){const e=pm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pU(t,{popupRedirectResolver:HV,persistence:[WU,VU,YN]}),r=MI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=GV(o.toString());LU(n,u,()=>u(n.currentUser)),kU(n,c=>u(c))}}const s=OI("auth");return s&&yU(n,`http://${s}`),n}function KV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Ds("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",KV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jV("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="type.googleapis.com/google.protobuf.Int64Value",QV="type.googleapis.com/google.protobuf.UInt64Value";function ZN(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function em(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>em(e));if(typeof t=="function"||typeof t=="object")return ZN(t,e=>em(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Bl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case XV:case QV:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Bl(e)):typeof t=="function"||typeof t=="object"?ZN(t,e=>Bl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ei extends Ps{constructor(e,n,r){super(`${u_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ei.prototype)}}function WV(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function tm(t,e){let n=WV(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!VS[u])return new ei("internal","internal");n=VS[u],r=u}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=Bl(s))}}catch{}return n==="ok"?null:new ei(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,gi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="us-central1",JV=/^data: (.*?)(?:\n|$)/;function eH(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ei("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class tH{constructor(e,n,r,s,o=C1,u=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new ZV(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=C1}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function nH(t,e,n){const r=cu(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(cE(t.emulatorOrigin),hE("Functions",!0))}function rH(t,e,n){const r=s=>sH(t,e,s,{});return r.stream=(s,o)=>oH(t,e,s,o),r}async function iH(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function JN(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function sH(t,e,n,r){const s=t._url(e);return aH(t,s,n,r)}async function aH(t,e,n,r){n=em(n);const s={data:n},o=await JN(t,r),u=r.timeout||7e4,c=eH(u),d=await Promise.race([iH(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new ei("cancelled","Firebase Functions instance was deleted.");const f=tm(d.status,d.json);if(f)throw f;if(!d.json)throw new ei("internal","Response is not valid JSON object.");let p=d.json.data;if(typeof p>"u"&&(p=d.json.result),typeof p>"u")throw new ei("internal","Response is missing data field.");return{data:Bl(p)}}function oH(t,e,n,r){const s=t._url(e);return uH(t,s,n,r||{})}async function uH(t,e,n,r){var s;n=em(n);const o={data:n},u=await JN(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r?.signal})}catch(T){if(T instanceof Error&&T.name==="AbortError"){const N=new ei("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const x=tm(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let d,f;const p=new Promise((T,x)=>{d=T,f=x});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const T=new ei("cancelled","Request was cancelled.");f(T)});const y=c.body.getReader(),b=lH(y,d,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const T=b.getReader();return{async next(){const{value:x,done:N}=await T.read();return{value:x,done:N}},async return(){return await T.cancel(),{done:!0,value:void 0}}}}},data:p}}function lH(t,e,n,r){const s=(u,c)=>{const d=u.match(JV);if(!d)return;const f=d[1];try{const p=JSON.parse(f);if("result"in p){e(Bl(p.result));return}if("message"in p){c.enqueue(Bl(p.message));return}if("error"in p){const y=tm(0,p);c.error(y),n(y);return}}catch(p){if(p instanceof ei){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(u){let c="";return d();async function d(){if(r?.aborted){const f=new ei("cancelled","Request was cancelled");return u.error(f),n(f),Promise.resolve()}try{const{value:f,done:p}=await t.read();if(p){c.trim()&&s(c.trim(),u),u.close();return}if(r?.aborted){const b=new ei("cancelled","Request was cancelled");u.error(b),n(b),await t.cancel();return}c+=o.decode(f,{stream:!0});const y=c.split(`
`);c=y.pop()||"";for(const b of y)b.trim()&&s(b.trim(),u);return d()}catch(f){const p=f instanceof ei?f:tm(0,null);u.error(p),n(p)}}},cancel(){return t.cancel()}})}const HS="@firebase/functions",FS="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH="auth-internal",hH="app-check-internal",dH="messaging-internal";function fH(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(cH),u=n.getProvider(dH),c=n.getProvider(hH);return new tH(s,o,u,c,r)};iu(new co(u_,e,"PUBLIC").setMultipleInstances(!0)),Cs(HS,FS,t),Cs(HS,FS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t=mE(),e=C1){const r=pm(An(t),u_).getImmediate({identifier:e}),s=kI("functions");return s&&eR(r,...s),r}function eR(t,e,n){nH(An(t),e,n)}function tR(t,e,n){return rH(An(t),e)}fH();const pH={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},l_=UI(pH),is=fB(l_),nm=$V(l_),c_=mH(l_,"us-central1");eR(c_,"localhost",5001);const vi={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},Fr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function gH(){const[t,e]=re.useState(""),[n,r]=re.useState(""),[s,o]=re.useState(!1),[u,c]=re.useState(!1),[d,f]=re.useState(""),p=async b=>{b.preventDefault(),c(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(Fr.INVALID_EMAIL);if(n.length<6)throw new Error(Fr.WEAK_PASSWORD);const x=await DU(nm,t,n);console.log("User created successfully:",x.user.uid)}catch(T){console.error("Sign up error:",T);let x="Failed to create account";T.code==="auth/email-already-in-use"?x=Fr.EMAIL_IN_USE:T.code==="auth/invalid-email"?x=Fr.INVALID_EMAIL:T.code==="auth/weak-password"?x=Fr.WEAK_PASSWORD:T.code==="auth/operation-not-allowed"?x="Email/password accounts are not enabled. Please contact support.":T.message&&(x=T.message),f(x)}finally{c(!1)}},y=async b=>{b.preventDefault(),c(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(Fr.INVALID_EMAIL);const x=await OU(nm,t,n);console.log("User signed in successfully:",x.user.uid)}catch(T){console.error("Sign in error:",T);let x="Failed to sign in";T.code==="auth/user-not-found"?x=Fr.USER_NOT_FOUND:T.code==="auth/wrong-password"?x=Fr.WRONG_PASSWORD:T.code==="auth/invalid-email"?x=Fr.INVALID_EMAIL:T.code==="auth/user-disabled"?x="This account has been disabled. Please contact support.":T.code==="auth/too-many-requests"?x=Fr.TOO_MANY_REQUESTS:T.message&&(x=T.message),f(x)}finally{c(!1)}};return M.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:M.jsxs("div",{className:`bg-[#222226] dark:bg-[#222226] rounded-2xl shadow-[0_24px_48px_rgba(0,0,0,0.7),0_10px_20px_rgba(0,0,0,0.5)] 
                          p-8 w-full max-w-md border border-white/12 dark:border-white/12`,children:[M.jsxs("div",{className:"text-center mb-8",children:[M.jsx("div",{className:"flex items-center justify-center mb-4",children:M.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:M.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),M.jsx("h2",{className:"text-2xl font-bold text-[#f8faff] dark:text-[#f8faff] mb-2",children:s?"Join TinkFlow":"Welcome Back"}),M.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm",children:s?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),M.jsxs("form",{onSubmit:s?p:y,className:"space-y-6",children:[M.jsx("div",{children:M.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:b=>e(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),M.jsx("div",{children:M.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:b=>r(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),M.jsx("button",{type:"submit",disabled:u,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-all duration-200 
                                   ${u?"bg-[#3a3a3e] dark:bg-[#3a3a3e] cursor-not-allowed opacity-60":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 active:from-indigo-700 active:to-purple-800 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}
                                   focus:outline-none focus:shadow-[0_0_0_3px_rgba(99,102,241,0.4)]`,children:u?M.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s?"Create Account":"Sign In"}),d&&M.jsx("div",{className:`bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 
                                       rounded-lg p-3 text-red-400 dark:text-red-400 text-sm`,children:d})]}),M.jsxs("div",{className:"auth-switch text-center mt-6",children:[M.jsx("span",{className:"auth-switch-text text-gray-400 dark:text-gray-400 text-sm",children:s?"Already have an account?":"Don't have an account?"}),M.jsx("button",{type:"button",onClick:()=>o(!s),className:`auth-switch-btn ml-2 text-blue-400 dark:text-blue-400 hover:text-blue-300 dark:hover:text-blue-300 
                                 text-sm font-medium transition-colors duration-200 bg-transparent border-none cursor-pointer`,children:s?"Sign In":"Sign Up"})]})]})})}function yH({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=re.useState(""),[u,c]=re.useState(!0),d=b=>{const T=b.target.value;o(T),c(T.trim().length>0&&T.trim().length<=50)},f=b=>{b.preventDefault();const T=s.trim();T.length>0&&T.length<=50&&(n(T),o(""),c(!0))},p=()=>{o(""),c(!0),e()},y=b=>{b.key==="Enter"&&f(b)};return t?M.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:M.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[M.jsxs("div",{className:"flex justify-between items-center mb-6",children:[M.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),M.jsx("button",{onClick:p,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),M.jsxs("form",{onSubmit:f,className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),M.jsx("input",{type:"text",value:s,onChange:d,onKeyDown:y,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${u?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!u&&M.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),M.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),M.jsxs("div",{className:"flex gap-3 pt-4",children:[M.jsx("button",{type:"button",onClick:p,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),M.jsx("button",{type:"submit",disabled:!u||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function EH({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:u}){const[c,d]=re.useState(!1),[f,p]=re.useState(!1),[y,b]=re.useState(null),T=async D=>{try{d(!0),await r(D),p(!1)}catch(z){console.error("Error in sidebar create board:",z)}finally{d(!1)}},x=()=>{p(!0)},N=()=>{p(!1)},k=(D,z)=>{D.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(z)};return M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"fixed left-0 top-0 w-[440px] h-screen bg-[#222226] dark:bg-[#222226] border-r border-white/10 dark:border-white/10 flex flex-col z-[1001] transition-transform duration-[0.35s] ease-[cubic-bezier(0.4,0,0.2,1)]",children:M.jsxs("div",{className:"flex flex-col h-full",children:[M.jsxs("div",{className:"p-[22px] border-b border-white/[0.08] dark:border-white/[0.08] bg-white/[0.03] dark:bg-white/[0.03]",children:[M.jsx("h2",{className:"m-0 mb-[18px] text-[18px] font-semibold text-[#f8faff] dark:text-[#f8faff] tracking-[-0.012em]",children:"TinkFlow Boards"}),M.jsx("button",{onClick:x,disabled:u||c,className:`w-full bg-[#2f2f33] dark:bg-[#2f2f33] text-[#f8faff] dark:text-[#f8faff] border border-white/12 dark:border-white/12 
                                      px-4 py-[10px] rounded-md cursor-pointer text-[13px] font-semibold transition-all duration-200 
                                      tracking-[0.015em] uppercase
                                      ${u||c?"cursor-not-allowed opacity-60":"hover:bg-[#3a3a3e] dark:hover:bg-[#3a3a3e] hover:border-white/18 dark:hover:border-white/18 hover:-translate-y-0.5"}`,children:c?"Creating...":"+ New Board"})]}),M.jsx("div",{className:"flex-1 overflow-y-auto p-[14px] scrollbar-thin scrollbar-track-[#2a2a2e] scrollbar-thumb-[#4a4a4e] hover:scrollbar-thumb-[#5a5a5e]",children:t.map(D=>{const z=e?.id===D.id,Y=y===D.id;return M.jsxs("div",{onClick:()=>!u&&n(D.id),onMouseEnter:()=>b(D.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[54px] px-[18px] py-[14px] mb-[8px] rounded-[12px] flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-[14px] leading-[1.4]
                                        ${u?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${z?"border-[#4a90e2] bg-[#2a3850] dark:bg-[#2a3850] text-[#f8faff] dark:text-[#f8faff] font-semibold shadow-[0_2px_8px_rgba(74,144,226,0.3)] transform translate-y-[-1px]":Y?"border-white/20 dark:border-white/20 bg-[#2a2a2e] dark:bg-[#2a2a2e] text-[#e8eaed] dark:text-[#e8eaed] shadow-[0_2px_8px_rgba(0,0,0,0.3)] transform translate-y-[-1px]":"border-white/10 dark:border-white/10 bg-[#1e1e22] dark:bg-[#1e1e22] text-[#b0b3b8] dark:text-[#b0b3b8]"}
                                    `,role:"button",tabIndex:0,onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&!u&&n(D.id)},children:[M.jsx("span",{className:`
                                        ${z?"font-bold":"font-medium"} 
                                        text-lg flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        tracking-wide leading-5
                                    `,children:D.name}),M.jsxs("div",{className:"flex items-center gap-2",children:[D.isOpen&&M.jsx("span",{className:"text-blue-400 dark:text-blue-400 text-lg",children:""}),t.length>1&&M.jsx("button",{onClick:q=>{q.stopPropagation(),k(q,D.id)},title:"Delete board",className:`
                                                    bg-transparent border-none text-red-400 dark:text-red-400 
                                                    cursor-pointer text-xl leading-none px-1 transition-opacity duration-150
                                                    ${Y?"opacity-100 visible":"opacity-0 invisible"}
                                                    hover:text-red-300 dark:hover:text-red-300
                                                `,children:""})]})]},D.id)})}),u&&M.jsx("div",{className:"p-4 text-center text-[#b0b3b8] dark:text-[#b0b3b8] text-[13px] font-medium",children:"Loading boards..."}),M.jsx("div",{className:"p-[22px] border-t border-white/[0.08] dark:border-white/[0.08]",children:M.jsx("button",{onClick:o,className:`w-full px-4 py-[10px] rounded-md border border-white/12 dark:border-white/12 
                                     bg-transparent text-[#b0b3b8] dark:text-[#b0b3b8] cursor-pointer text-[13px] font-semibold
                                     transition-all duration-200 tracking-[0.015em] uppercase
                                     hover:bg-[#2a2a2e] dark:hover:bg-[#2a2a2e] hover:border-white/18 dark:hover:border-white/18 
                                     hover:text-[#e8eaed] dark:hover:text-[#e8eaed] hover:-translate-y-0.5`,children:"Sign Out"})})]})}),M.jsx(yH,{show:f,onHide:N,onConfirm:T,isCreating:c})]})}function zS(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const u=n.slice(s,r).trim();(u||!o)&&e.push(u),s=r+1,r=n.indexOf(",",s)}return e}function nR(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _H=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bH=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TH={};function jS(t,e){return(TH.jsx?bH:_H).test(t)}const vH=/[ \t\n\f\r]/g;function AH(t){return typeof t=="object"?t.type==="text"?qS(t.value):!1:qS(t)}function qS(t){return t.replace(vH,"")===""}let _d=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};_d.prototype.normal={};_d.prototype.property={};_d.prototype.space=void 0;function rR(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new _d(n,r,e)}function Zh(t){return t.toLowerCase()}let ni=class{constructor(e,n){this.attribute=n,this.property=e}};ni.prototype.attribute="";ni.prototype.booleanish=!1;ni.prototype.boolean=!1;ni.prototype.commaOrSpaceSeparated=!1;ni.prototype.commaSeparated=!1;ni.prototype.defined=!1;ni.prototype.mustUseProperty=!1;ni.prototype.number=!1;ni.prototype.overloadedBoolean=!1;ni.prototype.property="";ni.prototype.spaceSeparated=!1;ni.prototype.space=void 0;let SH=0;const ot=pu(),Mn=pu(),N1=pu(),Oe=pu(),nn=pu(),Al=pu(),fi=pu();function pu(){return 2**++SH}const R1=Object.freeze(Object.defineProperty({__proto__:null,boolean:ot,booleanish:Mn,commaOrSpaceSeparated:fi,commaSeparated:Al,number:Oe,overloadedBoolean:N1,spaceSeparated:nn},Symbol.toStringTag,{value:"Module"})),vy=Object.keys(R1);let h_=class extends ni{constructor(e,n,r,s){let o=-1;if(super(e,n),YS(this,"space",s),typeof r=="number")for(;++o<vy.length;){const u=vy[o];YS(this,vy[o],(r&R1[u])===R1[u])}}};h_.prototype.defined=!0;function YS(t,e,n){n&&(t[e]=n)}function Kl(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const o=new h_(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[Zh(r)]=r,n[Zh(o.attribute)]=r}return new _d(e,n,t.space)}const iR=Kl({properties:{ariaActiveDescendant:null,ariaAtomic:Mn,ariaAutoComplete:null,ariaBusy:Mn,ariaChecked:Mn,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:nn,ariaCurrent:null,ariaDescribedBy:nn,ariaDetails:null,ariaDisabled:Mn,ariaDropEffect:nn,ariaErrorMessage:null,ariaExpanded:Mn,ariaFlowTo:nn,ariaGrabbed:Mn,ariaHasPopup:null,ariaHidden:Mn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:nn,ariaLevel:Oe,ariaLive:null,ariaModal:Mn,ariaMultiLine:Mn,ariaMultiSelectable:Mn,ariaOrientation:null,ariaOwns:nn,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Mn,ariaReadOnly:Mn,ariaRelevant:null,ariaRequired:Mn,ariaRoleDescription:nn,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Mn,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function sR(t,e){return e in t?t[e]:e}function aR(t,e){return sR(t,e.toLowerCase())}const xH=Kl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Al,acceptCharset:nn,accessKey:nn,action:null,allow:null,allowFullScreen:ot,allowPaymentRequest:ot,allowUserMedia:ot,alt:null,as:null,async:ot,autoCapitalize:null,autoComplete:nn,autoFocus:ot,autoPlay:ot,blocking:nn,capture:null,charSet:null,checked:ot,cite:null,className:nn,cols:Oe,colSpan:null,content:null,contentEditable:Mn,controls:ot,controlsList:nn,coords:Oe|Al,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ot,defer:ot,dir:null,dirName:null,disabled:ot,download:N1,draggable:Mn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ot,formTarget:null,headers:nn,height:Oe,hidden:N1,high:Oe,href:null,hrefLang:null,htmlFor:nn,httpEquiv:nn,id:null,imageSizes:null,imageSrcSet:null,inert:ot,inputMode:null,integrity:null,is:null,isMap:ot,itemId:null,itemProp:nn,itemRef:nn,itemScope:ot,itemType:nn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ot,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:ot,muted:ot,name:null,nonce:null,noModule:ot,noValidate:ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ot,optimum:Oe,pattern:null,ping:nn,placeholder:null,playsInline:ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ot,referrerPolicy:null,rel:nn,required:ot,reversed:ot,rows:Oe,rowSpan:Oe,sandbox:nn,scope:null,scoped:ot,seamless:ot,selected:ot,shadowRootClonable:ot,shadowRootDelegatesFocus:ot,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Mn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:ot,useMap:null,value:Mn,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:nn,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ot,declare:ot,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:ot,noHref:ot,noShade:ot,noWrap:ot,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Mn,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ot,disableRemotePlayback:ot,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:aR}),wH=Kl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:fi,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:nn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Al,g2:Al,glyphName:Al,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:fi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:nn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:fi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:fi,rev:fi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:fi,requiredFeatures:fi,requiredFonts:fi,requiredFormats:fi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:fi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:fi,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:fi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:sR}),oR=Kl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),uR=Kl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aR}),lR=Kl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),IH={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},CH=/[A-Z]/g,GS=/-[a-z]/g,NH=/^data[-\w.:]+$/i;function d_(t,e){const n=Zh(e);let r=e,s=ni;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&NH.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(GS,DH);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!GS.test(o)){let u=o.replace(CH,RH);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=h_}return new s(r,e)}function RH(t){return"-"+t.toLowerCase()}function DH(t){return t.charAt(1).toUpperCase()}const Bm=rR([iR,xH,oR,uR,lR],"html"),Xl=rR([iR,wH,oR,uR,lR],"svg");function $S(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function cR(t){return t.join(" ").trim()}var sl={},Ay,KS;function OH(){if(KS)return Ay;KS=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,f="/",p="*",y="",b="comment",T="declaration";Ay=function(N,k){if(typeof N!="string")throw new TypeError("First argument must be a string");if(!N)return[];k=k||{};var D=1,z=1;function Y(I){var L=I.match(e);L&&(D+=L.length);var K=I.lastIndexOf(d);z=~K?I.length-K:z+I.length}function q(){var I={line:D,column:z};return function(L){return L.position=new ee(I),C(),L}}function ee(I){this.start=I,this.end={line:D,column:z},this.source=k.source}ee.prototype.content=N;function $(I){var L=new Error(k.source+":"+D+":"+z+": "+I);if(L.reason=I,L.filename=k.source,L.line=D,L.column=z,L.source=N,!k.silent)throw L}function R(I){var L=I.exec(N);if(L){var K=L[0];return Y(K),N=N.slice(K.length),L}}function C(){R(n)}function O(I){var L;for(I=I||[];L=P();)L!==!1&&I.push(L);return I}function P(){var I=q();if(!(f!=N.charAt(0)||p!=N.charAt(1))){for(var L=2;y!=N.charAt(L)&&(p!=N.charAt(L)||f!=N.charAt(L+1));)++L;if(L+=2,y===N.charAt(L-1))return $("End of comment missing");var K=N.slice(2,L-2);return z+=2,Y(K),N=N.slice(L),z+=2,I({type:b,comment:K})}}function U(){var I=q(),L=R(r);if(L){if(P(),!R(s))return $("property missing ':'");var K=R(o),F=I({type:T,property:x(L[0].replace(t,y)),value:K?x(K[0].replace(t,y)):y});return R(u),F}}function V(){var I=[];O(I);for(var L;L=U();)L!==!1&&(I.push(L),O(I));return I}return C(),V()};function x(N){return N?N.replace(c,y):y}return Ay}var XS;function kH(){if(XS)return sl;XS=1;var t=sl&&sl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(sl,"__esModule",{value:!0}),sl.default=n;var e=t(OH());function n(r,s){var o=null;if(!r||typeof r!="string")return o;var u=(0,e.default)(r),c=typeof s=="function";return u.forEach(function(d){if(d.type==="declaration"){var f=d.property,p=d.value;c?s(f,p,d):p&&(o=o||{},o[f]=p)}}),o}return sl}var rh={},QS;function LH(){if(QS)return rh;QS=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(f){return!f||n.test(f)||t.test(f)},u=function(f,p){return p.toUpperCase()},c=function(f,p){return"".concat(p,"-")},d=function(f,p){return p===void 0&&(p={}),o(f)?f:(f=f.toLowerCase(),p.reactCompat?f=f.replace(s,c):f=f.replace(r,c),f.replace(e,u))};return rh.camelCase=d,rh}var ih,WS;function MH(){if(WS)return ih;WS=1;var t=ih&&ih.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(kH()),n=LH();function r(s,o){var u={};return!s||typeof s!="string"||(0,e.default)(s,function(c,d){c&&d&&(u[(0,n.camelCase)(c,o)]=d)}),u}return r.default=r,ih=r,ih}var PH=MH();const BH=om(PH),Um=hR("end"),Bs=hR("start");function hR(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function UH(t){const e=Bs(t),n=Um(t);if(e&&n)return{start:e,end:n}}function xh(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?ZS(t.position):"start"in t||"end"in t?ZS(t):"line"in t||"column"in t?D1(t):""}function D1(t){return JS(t&&t.line)+":"+JS(t&&t.column)}function ZS(t){return D1(t&&t.start)+"-"+D1(t&&t.end)}function JS(t){return t&&typeof t=="number"?t:1}class Cr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},u=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?s=e:!o.cause&&e&&(u=!0,s=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?o.ruleId=r:(o.source=r.slice(0,d),o.ruleId=r.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const c=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=c?c.line:void 0,this.name=xh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=u&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Cr.prototype.file="";Cr.prototype.name="";Cr.prototype.reason="";Cr.prototype.message="";Cr.prototype.stack="";Cr.prototype.column=void 0;Cr.prototype.line=void 0;Cr.prototype.ancestors=void 0;Cr.prototype.cause=void 0;Cr.prototype.fatal=void 0;Cr.prototype.place=void 0;Cr.prototype.ruleId=void 0;Cr.prototype.source=void 0;const f_={}.hasOwnProperty,VH=new Map,HH=/[A-Z]/g,FH=new Set(["table","tbody","thead","tfoot","tr"]),zH=new Set(["td","th"]),dR="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function jH(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=WH(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=QH(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Xl:Bm,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=fR(s,t,void 0);return o&&typeof o!="string"?o:s.create(t,s.Fragment,{children:o||void 0},void 0)}function fR(t,e,n){if(e.type==="element")return qH(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return YH(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return $H(t,e,n);if(e.type==="mdxjsEsm")return GH(t,e);if(e.type==="root")return KH(t,e,n);if(e.type==="text")return XH(t,e)}function qH(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const o=pR(t,e.tagName,!1),u=ZH(t,e);let c=p_(t,e);return FH.has(e.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!AH(d):!0})),mR(t,u,o,e),m_(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function YH(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Jh(t,e.position)}function GH(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Jh(t,e.position)}function $H(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const o=e.name===null?t.Fragment:pR(t,e.name,!0),u=JH(t,e),c=p_(t,e);return mR(t,u,o,e),m_(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function KH(t,e,n){const r={};return m_(r,p_(t,e)),t.create(e,t.Fragment,r,n)}function XH(t,e){return e.value}function mR(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function m_(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function QH(t,e,n){return r;function r(s,o,u,c){const f=Array.isArray(u.children)?n:e;return c?f(o,u,c):f(o,u)}}function WH(t,e){return n;function n(r,s,o,u){const c=Array.isArray(o.children),d=Bs(r);return e(s,o,u,c,{columnNumber:d?d.column-1:void 0,fileName:t,lineNumber:d?d.line:void 0},void 0)}}function ZH(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&f_.call(e.properties,s)){const o=eF(t,s,e.properties[s]);if(o){const[u,c]=o;t.tableCellAlignToStyle&&u==="align"&&typeof c=="string"&&zH.has(e.tagName)?r=c:n[u]=c}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function JH(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const u=o.expression;u.type;const c=u.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else Jh(t,e.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,o=t.evaluater.evaluateExpression(c.expression)}else Jh(t,e.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function p_(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:VH;for(;++r<e.children.length;){const o=e.children[r];let u;if(t.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const f=s.get(d)||0;u=d+"-"+f,s.set(d,f+1)}}const c=fR(t,o,u);c!==void 0&&n.push(c)}return n}function eF(t,e,n){const r=d_(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?nR(n):cR(n)),r.property==="style"){let s=typeof n=="object"?n:tF(t,String(n));return t.stylePropertyNameCase==="css"&&(s=nF(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?IH[r.property]||r.property:r.attribute,n]}}function tF(t,e){try{return BH(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Cr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=dR+"#cannot-parse-style-attribute",s}}function pR(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let o=-1,u;for(;++o<s.length;){const c=jS(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};u=u?{type:"MemberExpression",object:u,property:c,computed:!!(o&&c.type==="Literal"),optional:!1}:c}r=u}else r=jS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return f_.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);Jh(t)}function Jh(t,e){const n=new Cr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=dR+"#cannot-handle-mdx-estrees-without-createevaluater",n}function nF(t){const e={};let n;for(n in t)f_.call(t,n)&&(e[rF(n)]=t[n]);return e}function rF(t){let e=t.replace(HH,iF);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function iF(t){return"-"+t.toLowerCase()}const Sy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sF={};function aF(t,e){const n=sF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return gR(t,r,s)}function gR(t,e,n){if(oF(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return ex(t.children,e,n)}return Array.isArray(t)?ex(t,e,n):""}function ex(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=gR(t[s],e,n);return r.join("")}function oF(t){return!!(t&&typeof t=="object")}const tx=document.createElement("i");function g_(t){const e="&"+t+";";tx.innerHTML=e;const n=tx.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ls(t,e,n,r){const s=t.length;let o=0,u;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)u=Array.from(r),u.unshift(e,n),t.splice(...u);else for(n&&t.splice(e,n);o<r.length;)u=r.slice(o,o+1e4),u.unshift(e,0),t.splice(...u),o+=1e4,e+=1e4}function Hi(t,e){return t.length>0?(Ls(t,t.length,0,e),t):e}const nx={}.hasOwnProperty;function uF(t){const e={};let n=-1;for(;++n<t.length;)lF(e,t[n]);return e}function lF(t,e){let n;for(n in e){const s=(nx.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let u;if(o)for(u in o){nx.call(s,u)||(s[u]=[]);const c=o[u];cF(s[u],Array.isArray(c)?c:c?[c]:[])}}}function cF(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ls(t,0,0,r)}function yR(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Sl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ws=vo(/[A-Za-z]/),Ei=vo(/[\dA-Za-z]/),hF=vo(/[#-'*+\--9=?A-Z^-~]/);function O1(t){return t!==null&&(t<32||t===127)}const k1=vo(/\d/),dF=vo(/[\dA-Fa-f]/),fF=vo(/[!-/:-@[-`{-~]/);function tt(t){return t!==null&&t<-2}function ti(t){return t!==null&&(t<0||t===32)}function kt(t){return t===-2||t===-1||t===32}const mF=vo(new RegExp("\\p{P}|\\p{S}","u")),pF=vo(/\s/);function vo(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ql(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const o=t.charCodeAt(n);let u="";if(o===37&&Ei(t.charCodeAt(n+1))&&Ei(t.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(u=String.fromCharCode(o));else if(o>55295&&o<57344){const c=t.charCodeAt(n+1);o<56320&&c>56319&&c<57344?(u=String.fromCharCode(o,c),s=1):u=""}else u=String.fromCharCode(o);u&&(e.push(t.slice(r,n),encodeURIComponent(u)),r=n+s+1,u=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function sn(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return u;function u(d){return kt(d)?(t.enter(n),c(d)):e(d)}function c(d){return kt(d)&&o++<s?(t.consume(d),c):(t.exit(n),e(d))}}const gF={tokenize:yF};function yF(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),sn(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),o(c)}function o(c){const d=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,u(c)}function u(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return tt(c)?(t.consume(c),t.exit("chunkText"),o):(t.consume(c),u)}}const EF={tokenize:_F},rx={tokenize:bF};function _F(t){const e=this,n=[];let r=0,s,o,u;return c;function c(Y){if(r<n.length){const q=n[r];return e.containerState=q[1],t.attempt(q[0].continuation,d,f)(Y)}return f(Y)}function d(Y){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&z();const q=e.events.length;let ee=q,$;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){$=e.events[ee][1].end;break}D(r);let R=q;for(;R<e.events.length;)e.events[R][1].end={...$},R++;return Ls(e.events,ee+1,0,e.events.slice(q)),e.events.length=R,f(Y)}return c(Y)}function f(Y){if(r===n.length){if(!s)return b(Y);if(s.currentConstruct&&s.currentConstruct.concrete)return x(Y);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(rx,p,y)(Y)}function p(Y){return s&&z(),D(r),b(Y)}function y(Y){return e.parser.lazy[e.now().line]=r!==n.length,u=e.now().offset,x(Y)}function b(Y){return e.containerState={},t.attempt(rx,T,x)(Y)}function T(Y){return r++,n.push([e.currentConstruct,e.containerState]),b(Y)}function x(Y){if(Y===null){s&&z(),D(0),t.consume(Y);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),N(Y)}function N(Y){if(Y===null){k(t.exit("chunkFlow"),!0),D(0),t.consume(Y);return}return tt(Y)?(t.consume(Y),k(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(Y),N)}function k(Y,q){const ee=e.sliceStream(Y);if(q&&ee.push(null),Y.previous=o,o&&(o.next=Y),o=Y,s.defineSkip(Y.start),s.write(ee),e.parser.lazy[Y.start.line]){let $=s.events.length;for(;$--;)if(s.events[$][1].start.offset<u&&(!s.events[$][1].end||s.events[$][1].end.offset>u))return;const R=e.events.length;let C=R,O,P;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(O){P=e.events[C][1].end;break}O=!0}for(D(r),$=R;$<e.events.length;)e.events[$][1].end={...P},$++;Ls(e.events,C+1,0,e.events.slice(R)),e.events.length=$}}function D(Y){let q=n.length;for(;q-- >Y;){const ee=n[q];e.containerState=ee[1],ee[0].exit.call(e,t)}n.length=Y}function z(){s.write([null]),o=void 0,s=void 0,e.containerState._closeFlow=void 0}}function bF(t,e,n){return sn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ix(t){if(t===null||ti(t)||pF(t))return 1;if(mF(t))return 2}function y_(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const o=t[s].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const L1={name:"attention",resolveAll:TF,tokenize:vF};function TF(t,e){let n=-1,r,s,o,u,c,d,f,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;d=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[r][1].end},b={...t[n][1].start};sx(y,-d),sx(b,d),u={type:d>1?"strongSequence":"emphasisSequence",start:y,end:{...t[r][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},o={type:d>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:d>1?"strong":"emphasis",start:{...u.start},end:{...c.end}},t[r][1].end={...u.start},t[n][1].start={...c.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=Hi(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=Hi(f,[["enter",s,e],["enter",u,e],["exit",u,e],["enter",o,e]]),f=Hi(f,y_(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=Hi(f,[["exit",o,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,f=Hi(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):p=0,Ls(t,r-1,n-r+3,f),n=r+f.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function vF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=ix(r);let o;return u;function u(d){return o=d,t.enter("attentionSequence"),c(d)}function c(d){if(d===o)return t.consume(d),c;const f=t.exit("attentionSequence"),p=ix(d),y=!p||p===2&&s||n.includes(d),b=!s||s===2&&p||n.includes(r);return f._open=!!(o===42?y:y&&(s||!b)),f._close=!!(o===42?b:b&&(p||!y)),e(d)}}function sx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const AF={name:"autolink",tokenize:SF};function SF(t,e,n){let r=0;return s;function s(T){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(T){return ws(T)?(t.consume(T),u):T===64?n(T):f(T)}function u(T){return T===43||T===45||T===46||Ei(T)?(r=1,c(T)):f(T)}function c(T){return T===58?(t.consume(T),r=0,d):(T===43||T===45||T===46||Ei(T))&&r++<32?(t.consume(T),c):(r=0,f(T))}function d(T){return T===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):T===null||T===32||T===60||O1(T)?n(T):(t.consume(T),d)}function f(T){return T===64?(t.consume(T),p):hF(T)?(t.consume(T),f):n(T)}function p(T){return Ei(T)?y(T):n(T)}function y(T){return T===46?(t.consume(T),r=0,p):T===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):b(T)}function b(T){if((T===45||Ei(T))&&r++<63){const x=T===45?b:y;return t.consume(T),x}return n(T)}}const Vm={partial:!0,tokenize:xF};function xF(t,e,n){return r;function r(o){return kt(o)?sn(t,s,"linePrefix")(o):s(o)}function s(o){return o===null||tt(o)?e(o):n(o)}}const ER={continuation:{tokenize:IF},exit:CF,name:"blockQuote",tokenize:wF};function wF(t,e,n){const r=this;return s;function s(u){if(u===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(u),t.exit("blockQuoteMarker"),o}return n(u)}function o(u){return kt(u)?(t.enter("blockQuotePrefixWhitespace"),t.consume(u),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(u))}}function IF(t,e,n){const r=this;return s;function s(u){return kt(u)?sn(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):o(u)}function o(u){return t.attempt(ER,e,n)(u)}}function CF(t){t.exit("blockQuote")}const _R={name:"characterEscape",tokenize:NF};function NF(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),s}function s(o){return fF(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const bR={name:"characterReference",tokenize:RF};function RF(t,e,n){const r=this;let s=0,o,u;return c;function c(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),d}function d(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),o=31,u=Ei,p(y))}function f(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,u=dF,p):(t.enter("characterReferenceValue"),o=7,u=k1,p(y))}function p(y){if(y===59&&s){const b=t.exit("characterReferenceValue");return u===Ei&&!g_(r.sliceSerialize(b))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return u(y)&&s++<o?(t.consume(y),p):n(y)}}const ax={partial:!0,tokenize:OF},ox={concrete:!0,name:"codeFenced",tokenize:DF};function DF(t,e,n){const r=this,s={partial:!0,tokenize:ee};let o=0,u=0,c;return d;function d($){return f($)}function f($){const R=r.events[r.events.length-1];return o=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,c=$,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p($)}function p($){return $===c?(u++,t.consume($),p):u<3?n($):(t.exit("codeFencedFenceSequence"),kt($)?sn(t,y,"whitespace")($):y($))}function y($){return $===null||tt($)?(t.exit("codeFencedFence"),r.interrupt?e($):t.check(ax,N,q)($)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b($))}function b($){return $===null||tt($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y($)):kt($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),sn(t,T,"whitespace")($)):$===96&&$===c?n($):(t.consume($),b)}function T($){return $===null||tt($)?y($):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x($))}function x($){return $===null||tt($)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y($)):$===96&&$===c?n($):(t.consume($),x)}function N($){return t.attempt(s,q,k)($)}function k($){return t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),D}function D($){return o>0&&kt($)?sn(t,z,"linePrefix",o+1)($):z($)}function z($){return $===null||tt($)?t.check(ax,N,q)($):(t.enter("codeFlowValue"),Y($))}function Y($){return $===null||tt($)?(t.exit("codeFlowValue"),z($)):(t.consume($),Y)}function q($){return t.exit("codeFenced"),e($)}function ee($,R,C){let O=0;return P;function P(K){return $.enter("lineEnding"),$.consume(K),$.exit("lineEnding"),U}function U(K){return $.enter("codeFencedFence"),kt(K)?sn($,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):V(K)}function V(K){return K===c?($.enter("codeFencedFenceSequence"),I(K)):C(K)}function I(K){return K===c?(O++,$.consume(K),I):O>=u?($.exit("codeFencedFenceSequence"),kt(K)?sn($,L,"whitespace")(K):L(K)):C(K)}function L(K){return K===null||tt(K)?($.exit("codeFencedFence"),R(K)):C(K)}}}function OF(t,e,n){const r=this;return s;function s(u){return u===null?n(u):(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}const xy={name:"codeIndented",tokenize:LF},kF={partial:!0,tokenize:MF};function LF(t,e,n){const r=this;return s;function s(f){return t.enter("codeIndented"),sn(t,o,"linePrefix",5)(f)}function o(f){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?u(f):n(f)}function u(f){return f===null?d(f):tt(f)?t.attempt(kF,u,d)(f):(t.enter("codeFlowValue"),c(f))}function c(f){return f===null||tt(f)?(t.exit("codeFlowValue"),u(f)):(t.consume(f),c)}function d(f){return t.exit("codeIndented"),e(f)}}function MF(t,e,n){const r=this;return s;function s(u){return r.parser.lazy[r.now().line]?n(u):tt(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),s):sn(t,o,"linePrefix",5)(u)}function o(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):tt(u)?s(u):n(u)}}const PF={name:"codeText",previous:UF,resolve:BF,tokenize:VF};function BF(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function UF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function VF(t,e,n){let r=0,s,o;return u;function u(y){return t.enter("codeText"),t.enter("codeTextSequence"),c(y)}function c(y){return y===96?(t.consume(y),r++,c):(t.exit("codeTextSequence"),d(y))}function d(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),d):y===96?(o=t.enter("codeTextSequence"),s=0,p(y)):tt(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),d):(t.enter("codeTextData"),f(y))}function f(y){return y===null||y===32||y===96||tt(y)?(t.exit("codeTextData"),d(y)):(t.consume(y),f)}function p(y){return y===96?(t.consume(y),s++,p):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(o.type="codeTextData",f(y))}}class HF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&sh(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),sh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),sh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);sh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);sh(this.left,n.reverse())}}}function sh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function TR(t){const e={};let n=-1,r,s,o,u,c,d,f;const p=new HF(t);for(;++n<p.length;){for(;n in e;)n=e[n];if(r=p.get(n),n&&r[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,FF(p,n)),n=e[n],f=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(u=p.get(o),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(s&&(p.get(s)[1].type="lineEndingBlank"),u[1].type="lineEnding",s=o);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;s&&(r[1].end={...p.get(s)[1].start},c=p.slice(s,n),c.unshift(r),p.splice(s,n-s+1,c))}}return Ls(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!f}function FF(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const o=[];let u=n._tokenizer;u||(u=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const c=u.events,d=[],f={};let p,y,b=-1,T=n,x=0,N=0;const k=[N];for(;T;){for(;t.get(++s)[1]!==T;);o.push(s),T._tokenizer||(p=r.sliceStream(T),T.next||p.push(null),y&&u.defineSkip(T.start),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(p),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),y=T,T=T.next}for(T=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(N=b+1,k.push(N),T._tokenizer=void 0,T.previous=void 0,T=T.next);for(u.events=[],T?(T._tokenizer=void 0,T.previous=void 0):k.pop(),b=k.length;b--;){const D=c.slice(k[b],k[b+1]),z=o.pop();d.push([z,z+D.length-1]),t.splice(z,2,D)}for(d.reverse(),b=-1;++b<d.length;)f[x+d[b][0]]=x+d[b][1],x+=d[b][1]-d[b][0]-1;return f}const zF={resolve:qF,tokenize:YF},jF={partial:!0,tokenize:GF};function qF(t){return TR(t),t}function YF(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?o(c):tt(c)?t.check(jF,u,o)(c):(t.consume(c),s)}function o(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function u(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function GF(t,e,n){const r=this;return s;function s(u){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),sn(t,o,"linePrefix")}function o(u){if(u===null||tt(u))return n(u);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):t.interrupt(r.parser.constructs.flow,n,e)(u)}}function vR(t,e,n,r,s,o,u,c,d){const f=d||Number.POSITIVE_INFINITY;let p=0;return y;function y(D){return D===60?(t.enter(r),t.enter(s),t.enter(o),t.consume(D),t.exit(o),b):D===null||D===32||D===41||O1(D)?n(D):(t.enter(r),t.enter(u),t.enter(c),t.enter("chunkString",{contentType:"string"}),N(D))}function b(D){return D===62?(t.enter(o),t.consume(D),t.exit(o),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),T(D))}function T(D){return D===62?(t.exit("chunkString"),t.exit(c),b(D)):D===null||D===60||tt(D)?n(D):(t.consume(D),D===92?x:T)}function x(D){return D===60||D===62||D===92?(t.consume(D),T):T(D)}function N(D){return!p&&(D===null||D===41||ti(D))?(t.exit("chunkString"),t.exit(c),t.exit(u),t.exit(r),e(D)):p<f&&D===40?(t.consume(D),p++,N):D===41?(t.consume(D),p--,N):D===null||D===32||D===40||O1(D)?n(D):(t.consume(D),D===92?k:N)}function k(D){return D===40||D===41||D===92?(t.consume(D),N):N(D)}}function AR(t,e,n,r,s,o){const u=this;let c=0,d;return f;function f(T){return t.enter(r),t.enter(s),t.consume(T),t.exit(s),t.enter(o),p}function p(T){return c>999||T===null||T===91||T===93&&!d||T===94&&!c&&"_hiddenFootnoteSupport"in u.parser.constructs?n(T):T===93?(t.exit(o),t.enter(s),t.consume(T),t.exit(s),t.exit(r),e):tt(T)?(t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===null||T===91||T===93||tt(T)||c++>999?(t.exit("chunkString"),p(T)):(t.consume(T),d||(d=!kt(T)),T===92?b:y)}function b(T){return T===91||T===92||T===93?(t.consume(T),c++,y):y(T)}}function SR(t,e,n,r,s,o){let u;return c;function c(b){return b===34||b===39||b===40?(t.enter(r),t.enter(s),t.consume(b),t.exit(s),u=b===40?41:b,d):n(b)}function d(b){return b===u?(t.enter(s),t.consume(b),t.exit(s),t.exit(r),e):(t.enter(o),f(b))}function f(b){return b===u?(t.exit(o),d(u)):b===null?n(b):tt(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),sn(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===u||b===null||tt(b)?(t.exit("chunkString"),f(b)):(t.consume(b),b===92?y:p)}function y(b){return b===u||b===92?(t.consume(b),p):p(b)}}function wh(t,e){let n;return r;function r(s){return tt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):kt(s)?sn(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const $F={name:"definition",tokenize:XF},KF={partial:!0,tokenize:QF};function XF(t,e,n){const r=this;let s;return o;function o(T){return t.enter("definition"),u(T)}function u(T){return AR.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(T)}function c(T){return s=Sl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),T===58?(t.enter("definitionMarker"),t.consume(T),t.exit("definitionMarker"),d):n(T)}function d(T){return ti(T)?wh(t,f)(T):f(T)}function f(T){return vR(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(T)}function p(T){return t.attempt(KF,y,y)(T)}function y(T){return kt(T)?sn(t,b,"whitespace")(T):b(T)}function b(T){return T===null||tt(T)?(t.exit("definition"),r.parser.defined.push(s),e(T)):n(T)}}function QF(t,e,n){return r;function r(c){return ti(c)?wh(t,s)(c):n(c)}function s(c){return SR(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function o(c){return kt(c)?sn(t,u,"whitespace")(c):u(c)}function u(c){return c===null||tt(c)?e(c):n(c)}}const WF={name:"hardBreakEscape",tokenize:ZF};function ZF(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),s}function s(o){return tt(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const JF={name:"headingAtx",resolve:ez,tokenize:tz};function ez(t,e){let n=t.length-2,r=3,s,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ls(t,r,n-r+1,[["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e]])),t}function tz(t,e,n){let r=0;return s;function s(p){return t.enter("atxHeading"),o(p)}function o(p){return t.enter("atxHeadingSequence"),u(p)}function u(p){return p===35&&r++<6?(t.consume(p),u):p===null||ti(p)?(t.exit("atxHeadingSequence"),c(p)):n(p)}function c(p){return p===35?(t.enter("atxHeadingSequence"),d(p)):p===null||tt(p)?(t.exit("atxHeading"),e(p)):kt(p)?sn(t,c,"whitespace")(p):(t.enter("atxHeadingText"),f(p))}function d(p){return p===35?(t.consume(p),d):(t.exit("atxHeadingSequence"),c(p))}function f(p){return p===null||p===35||ti(p)?(t.exit("atxHeadingText"),c(p)):(t.consume(p),f)}}const nz=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ux=["pre","script","style","textarea"],rz={concrete:!0,name:"htmlFlow",resolveTo:az,tokenize:oz},iz={partial:!0,tokenize:lz},sz={partial:!0,tokenize:uz};function az(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function oz(t,e,n){const r=this;let s,o,u,c,d;return f;function f(B){return p(B)}function p(B){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(B),y}function y(B){return B===33?(t.consume(B),b):B===47?(t.consume(B),o=!0,N):B===63?(t.consume(B),s=3,r.interrupt?e:A):ws(B)?(t.consume(B),u=String.fromCharCode(B),k):n(B)}function b(B){return B===45?(t.consume(B),s=2,T):B===91?(t.consume(B),s=5,c=0,x):ws(B)?(t.consume(B),s=4,r.interrupt?e:A):n(B)}function T(B){return B===45?(t.consume(B),r.interrupt?e:A):n(B)}function x(B){const ge="CDATA[";return B===ge.charCodeAt(c++)?(t.consume(B),c===ge.length?r.interrupt?e:V:x):n(B)}function N(B){return ws(B)?(t.consume(B),u=String.fromCharCode(B),k):n(B)}function k(B){if(B===null||B===47||B===62||ti(B)){const ge=B===47,Ne=u.toLowerCase();return!ge&&!o&&ux.includes(Ne)?(s=1,r.interrupt?e(B):V(B)):nz.includes(u.toLowerCase())?(s=6,ge?(t.consume(B),D):r.interrupt?e(B):V(B)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):o?z(B):Y(B))}return B===45||Ei(B)?(t.consume(B),u+=String.fromCharCode(B),k):n(B)}function D(B){return B===62?(t.consume(B),r.interrupt?e:V):n(B)}function z(B){return kt(B)?(t.consume(B),z):P(B)}function Y(B){return B===47?(t.consume(B),P):B===58||B===95||ws(B)?(t.consume(B),q):kt(B)?(t.consume(B),Y):P(B)}function q(B){return B===45||B===46||B===58||B===95||Ei(B)?(t.consume(B),q):ee(B)}function ee(B){return B===61?(t.consume(B),$):kt(B)?(t.consume(B),ee):Y(B)}function $(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(t.consume(B),d=B,R):kt(B)?(t.consume(B),$):C(B)}function R(B){return B===d?(t.consume(B),d=null,O):B===null||tt(B)?n(B):(t.consume(B),R)}function C(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||ti(B)?ee(B):(t.consume(B),C)}function O(B){return B===47||B===62||kt(B)?Y(B):n(B)}function P(B){return B===62?(t.consume(B),U):n(B)}function U(B){return B===null||tt(B)?V(B):kt(B)?(t.consume(B),U):n(B)}function V(B){return B===45&&s===2?(t.consume(B),F):B===60&&s===1?(t.consume(B),Q):B===62&&s===4?(t.consume(B),J):B===63&&s===3?(t.consume(B),A):B===93&&s===5?(t.consume(B),te):tt(B)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(iz,ae,I)(B)):B===null||tt(B)?(t.exit("htmlFlowData"),I(B)):(t.consume(B),V)}function I(B){return t.check(sz,L,ae)(B)}function L(B){return t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),K}function K(B){return B===null||tt(B)?I(B):(t.enter("htmlFlowData"),V(B))}function F(B){return B===45?(t.consume(B),A):V(B)}function Q(B){return B===47?(t.consume(B),u="",se):V(B)}function se(B){if(B===62){const ge=u.toLowerCase();return ux.includes(ge)?(t.consume(B),J):V(B)}return ws(B)&&u.length<8?(t.consume(B),u+=String.fromCharCode(B),se):V(B)}function te(B){return B===93?(t.consume(B),A):V(B)}function A(B){return B===62?(t.consume(B),J):B===45&&s===2?(t.consume(B),A):V(B)}function J(B){return B===null||tt(B)?(t.exit("htmlFlowData"),ae(B)):(t.consume(B),J)}function ae(B){return t.exit("htmlFlow"),e(B)}}function uz(t,e,n){const r=this;return s;function s(u){return tt(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o):n(u)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}function lz(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Vm,e,n)}}const cz={name:"htmlText",tokenize:hz};function hz(t,e,n){const r=this;let s,o,u;return c;function c(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),d}function d(A){return A===33?(t.consume(A),f):A===47?(t.consume(A),ee):A===63?(t.consume(A),Y):ws(A)?(t.consume(A),C):n(A)}function f(A){return A===45?(t.consume(A),p):A===91?(t.consume(A),o=0,x):ws(A)?(t.consume(A),z):n(A)}function p(A){return A===45?(t.consume(A),T):n(A)}function y(A){return A===null?n(A):A===45?(t.consume(A),b):tt(A)?(u=y,Q(A)):(t.consume(A),y)}function b(A){return A===45?(t.consume(A),T):y(A)}function T(A){return A===62?F(A):A===45?b(A):y(A)}function x(A){const J="CDATA[";return A===J.charCodeAt(o++)?(t.consume(A),o===J.length?N:x):n(A)}function N(A){return A===null?n(A):A===93?(t.consume(A),k):tt(A)?(u=N,Q(A)):(t.consume(A),N)}function k(A){return A===93?(t.consume(A),D):N(A)}function D(A){return A===62?F(A):A===93?(t.consume(A),D):N(A)}function z(A){return A===null||A===62?F(A):tt(A)?(u=z,Q(A)):(t.consume(A),z)}function Y(A){return A===null?n(A):A===63?(t.consume(A),q):tt(A)?(u=Y,Q(A)):(t.consume(A),Y)}function q(A){return A===62?F(A):Y(A)}function ee(A){return ws(A)?(t.consume(A),$):n(A)}function $(A){return A===45||Ei(A)?(t.consume(A),$):R(A)}function R(A){return tt(A)?(u=R,Q(A)):kt(A)?(t.consume(A),R):F(A)}function C(A){return A===45||Ei(A)?(t.consume(A),C):A===47||A===62||ti(A)?O(A):n(A)}function O(A){return A===47?(t.consume(A),F):A===58||A===95||ws(A)?(t.consume(A),P):tt(A)?(u=O,Q(A)):kt(A)?(t.consume(A),O):F(A)}function P(A){return A===45||A===46||A===58||A===95||Ei(A)?(t.consume(A),P):U(A)}function U(A){return A===61?(t.consume(A),V):tt(A)?(u=U,Q(A)):kt(A)?(t.consume(A),U):O(A)}function V(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),s=A,I):tt(A)?(u=V,Q(A)):kt(A)?(t.consume(A),V):(t.consume(A),L)}function I(A){return A===s?(t.consume(A),s=void 0,K):A===null?n(A):tt(A)?(u=I,Q(A)):(t.consume(A),I)}function L(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||ti(A)?O(A):(t.consume(A),L)}function K(A){return A===47||A===62||ti(A)?O(A):n(A)}function F(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}function Q(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),se}function se(A){return kt(A)?sn(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):te(A)}function te(A){return t.enter("htmlTextData"),u(A)}}const E_={name:"labelEnd",resolveAll:pz,resolveTo:gz,tokenize:yz},dz={tokenize:Ez},fz={tokenize:_z},mz={tokenize:bz};function pz(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&Ls(t,0,t.length,n),t}function gz(t,e){let n=t.length,r=0,s,o,u,c;for(;n--;)if(s=t[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(u){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(u=n);const d={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[o][1].start},end:{...t[u][1].end}},p={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[u-2][1].start}};return c=[["enter",d,e],["enter",f,e]],c=Hi(c,t.slice(o+1,o+r+3)),c=Hi(c,[["enter",p,e]]),c=Hi(c,y_(e.parser.constructs.insideSpan.null,t.slice(o+r+4,u-3),e)),c=Hi(c,[["exit",p,e],t[u-2],t[u-1],["exit",f,e]]),c=Hi(c,t.slice(u+1)),c=Hi(c,[["exit",d,e]]),Ls(t,o,t.length,c),t}function yz(t,e,n){const r=this;let s=r.events.length,o,u;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return c;function c(b){return o?o._inactive?y(b):(u=r.parser.defined.includes(Sl(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),d):n(b)}function d(b){return b===40?t.attempt(dz,p,u?p:y)(b):b===91?t.attempt(fz,p,u?f:y)(b):u?p(b):y(b)}function f(b){return t.attempt(mz,p,y)(b)}function p(b){return e(b)}function y(b){return o._balanced=!0,n(b)}}function Ez(t,e,n){return r;function r(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),s}function s(y){return ti(y)?wh(t,o)(y):o(y)}function o(y){return y===41?p(y):vR(t,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function u(y){return ti(y)?wh(t,d)(y):p(y)}function c(y){return n(y)}function d(y){return y===34||y===39||y===40?SR(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):p(y)}function f(y){return ti(y)?wh(t,p)(y):p(y)}function p(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function _z(t,e,n){const r=this;return s;function s(c){return AR.call(r,t,o,u,"reference","referenceMarker","referenceString")(c)}function o(c){return r.parser.defined.includes(Sl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function u(c){return n(c)}}function bz(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),s}function s(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const Tz={name:"labelStartImage",resolveAll:E_.resolveAll,tokenize:vz};function vz(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),o}function o(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),u):n(c)}function u(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const Az={name:"labelStartLink",resolveAll:E_.resolveAll,tokenize:Sz};function Sz(t,e,n){const r=this;return s;function s(u){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelLink"),o}function o(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const wy={name:"lineEnding",tokenize:xz};function xz(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),sn(t,e,"linePrefix")}}const T0={name:"thematicBreak",tokenize:wz};function wz(t,e,n){let r=0,s;return o;function o(f){return t.enter("thematicBreak"),u(f)}function u(f){return s=f,c(f)}function c(f){return f===s?(t.enter("thematicBreakSequence"),d(f)):r>=3&&(f===null||tt(f))?(t.exit("thematicBreak"),e(f)):n(f)}function d(f){return f===s?(t.consume(f),r++,d):(t.exit("thematicBreakSequence"),kt(f)?sn(t,c,"whitespace")(f):c(f))}}const Xr={continuation:{tokenize:Rz},exit:Oz,name:"list",tokenize:Nz},Iz={partial:!0,tokenize:kz},Cz={partial:!0,tokenize:Dz};function Nz(t,e,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,u=0;return c;function c(T){const x=r.containerState.type||(T===42||T===43||T===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||T===r.containerState.marker:k1(T)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),T===42||T===45?t.check(T0,n,f)(T):f(T);if(!r.interrupt||T===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),d(T)}return n(T)}function d(T){return k1(T)&&++u<10?(t.consume(T),d):(!r.interrupt||u<2)&&(r.containerState.marker?T===r.containerState.marker:T===41||T===46)?(t.exit("listItemValue"),f(T)):n(T)}function f(T){return t.enter("listItemMarker"),t.consume(T),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||T,t.check(Vm,r.interrupt?n:p,t.attempt(Iz,b,y))}function p(T){return r.containerState.initialBlankLine=!0,o++,b(T)}function y(T){return kt(T)?(t.enter("listItemPrefixWhitespace"),t.consume(T),t.exit("listItemPrefixWhitespace"),b):n(T)}function b(T){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(T)}}function Rz(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Vm,s,o);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,sn(t,e,"listItemIndent",r.containerState.size+1)(c)}function o(c){return r.containerState.furtherBlankLines||!kt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,u(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Cz,e,u)(c))}function u(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,sn(t,t.attempt(Xr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Dz(t,e,n){const r=this;return sn(t,s,"listItemIndent",r.containerState.size+1);function s(o){const u=r.events[r.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===r.containerState.size?e(o):n(o)}}function Oz(t){t.exit(this.containerState.type)}function kz(t,e,n){const r=this;return sn(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const u=r.events[r.events.length-1];return!kt(o)&&u&&u[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const lx={name:"setextUnderline",resolveTo:Lz,tokenize:Mz};function Lz(t,e){let n=t.length,r,s,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const u={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",o?(t.splice(s,0,["enter",u,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=u,t.push(["exit",u,e]),t}function Mz(t,e,n){const r=this;let s;return o;function o(f){let p=r.events.length,y;for(;p--;)if(r.events[p][1].type!=="lineEnding"&&r.events[p][1].type!=="linePrefix"&&r.events[p][1].type!=="content"){y=r.events[p][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||y)?(t.enter("setextHeadingLine"),s=f,u(f)):n(f)}function u(f){return t.enter("setextHeadingLineSequence"),c(f)}function c(f){return f===s?(t.consume(f),c):(t.exit("setextHeadingLineSequence"),kt(f)?sn(t,d,"lineSuffix")(f):d(f))}function d(f){return f===null||tt(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const Pz={tokenize:Bz};function Bz(t){const e=this,n=t.attempt(Vm,r,t.attempt(this.parser.constructs.flowInitial,s,sn(t,t.attempt(this.parser.constructs.flow,s,t.attempt(zF,s)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Uz={resolveAll:wR()},Vz=xR("string"),Hz=xR("text");function xR(t){return{resolveAll:wR(t==="text"?Fz:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],o=n.attempt(s,u,c);return u;function u(p){return f(p)?o(p):c(p)}function c(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),d}function d(p){return f(p)?(n.exit("data"),o(p)):(n.consume(p),d)}function f(p){if(p===null)return!0;const y=s[p];let b=-1;if(y)for(;++b<y.length;){const T=y[b];if(!T.previous||T.previous.call(r,r.previous))return!0}return!1}}}function wR(t){return e;function e(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return t?t(n,r):n}}function Fz(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let o=s.length,u=-1,c=0,d;for(;o--;){const f=s[o];if(typeof f=="string"){for(u=f.length;f.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(f===-2)d=!0,c++;else if(f!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const f={type:n===t.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?u:r.start._bufferIndex+u,_index:r.start._index+o,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const zz={42:Xr,43:Xr,45:Xr,48:Xr,49:Xr,50:Xr,51:Xr,52:Xr,53:Xr,54:Xr,55:Xr,56:Xr,57:Xr,62:ER},jz={91:$F},qz={[-2]:xy,[-1]:xy,32:xy},Yz={35:JF,42:T0,45:[lx,T0],60:rz,61:lx,95:T0,96:ox,126:ox},Gz={38:bR,92:_R},$z={[-5]:wy,[-4]:wy,[-3]:wy,33:Tz,38:bR,42:L1,60:[AF,cz],91:Az,92:[WF,_R],93:E_,95:L1,96:PF},Kz={null:[L1,Uz]},Xz={null:[42,95]},Qz={null:[]},Wz=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Xz,contentInitial:jz,disable:Qz,document:zz,flow:Yz,flowInitial:qz,insideSpan:Kz,string:Gz,text:$z},Symbol.toStringTag,{value:"Module"}));function Zz(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let u=[],c=[];const d={attempt:R(ee),check:R($),consume:z,enter:Y,exit:q,interrupt:R($,{interrupt:!0})},f={code:null,containerState:{},defineSkip:N,events:[],now:x,parser:t,previous:null,sliceSerialize:b,sliceStream:T,write:y};let p=e.tokenize.call(f,d);return e.resolveAll&&o.push(e),f;function y(U){return u=Hi(u,U),k(),u[u.length-1]!==null?[]:(C(e,0),f.events=y_(o,f.events,f),f.events)}function b(U,V){return ej(T(U),V)}function T(U){return Jz(u,U)}function x(){const{_bufferIndex:U,_index:V,line:I,column:L,offset:K}=r;return{_bufferIndex:U,_index:V,line:I,column:L,offset:K}}function N(U){s[U.line]=U.column,P()}function k(){let U;for(;r._index<u.length;){const V=u[r._index];if(typeof V=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<V.length;)D(V.charCodeAt(r._bufferIndex));else D(V)}}function D(U){p=p(U)}function z(U){tt(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,P()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===u[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=U}function Y(U,V){const I=V||{};return I.type=U,I.start=x(),f.events.push(["enter",I,f]),c.push(I),I}function q(U){const V=c.pop();return V.end=x(),f.events.push(["exit",V,f]),V}function ee(U,V){C(U,V.from)}function $(U,V){V.restore()}function R(U,V){return I;function I(L,K,F){let Q,se,te,A;return Array.isArray(L)?ae(L):"tokenize"in L?ae([L]):J(L);function J(Ie){return je;function je(we){const Me=we!==null&&Ie[we],He=we!==null&&Ie.null,Je=[...Array.isArray(Me)?Me:Me?[Me]:[],...Array.isArray(He)?He:He?[He]:[]];return ae(Je)(we)}}function ae(Ie){return Q=Ie,se=0,Ie.length===0?F:B(Ie[se])}function B(Ie){return je;function je(we){return A=O(),te=Ie,Ie.partial||(f.currentConstruct=Ie),Ie.name&&f.parser.constructs.disable.null.includes(Ie.name)?Ne():Ie.tokenize.call(V?Object.assign(Object.create(f),V):f,d,ge,Ne)(we)}}function ge(Ie){return U(te,A),K}function Ne(Ie){return A.restore(),++se<Q.length?B(Q[se]):F}}}function C(U,V){U.resolveAll&&!o.includes(U)&&o.push(U),U.resolve&&Ls(f.events,V,f.events.length-V,U.resolve(f.events.slice(V),f)),U.resolveTo&&(f.events=U.resolveTo(f.events,f))}function O(){const U=x(),V=f.previous,I=f.currentConstruct,L=f.events.length,K=Array.from(c);return{from:L,restore:F};function F(){r=U,f.previous=V,f.currentConstruct=I,f.events.length=L,c=K,P()}}function P(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Jz(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,o=e.end._bufferIndex;let u;if(n===s)u=[t[n].slice(r,o)];else{if(u=t.slice(n,s),r>-1){const c=u[0];typeof c=="string"?u[0]=c.slice(r):u.shift()}o>0&&u.push(t[s].slice(0,o))}return u}function ej(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const o=t[n];let u;if(typeof o=="string")u=o;else switch(o){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=e?" ":"	";break}case-1:{if(!e&&s)continue;u=" ";break}default:u=String.fromCharCode(o)}s=o===-2,r.push(u)}return r.join("")}function tj(t){const r={constructs:uF([Wz,...(t||{}).extensions||[]]),content:s(gF),defined:[],document:s(EF),flow:s(Pz),lazy:{},string:s(Vz),text:s(Hz)};return r;function s(o){return u;function u(c){return Zz(r,o,c)}}}function nj(t){for(;!TR(t););return t}const cx=/[\0\t\n\r]/g;function rj(){let t=1,e="",n=!0,r;return s;function s(o,u,c){const d=[];let f,p,y,b,T;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(u||void 0).decode(o)),y=0,e="",n&&(o.charCodeAt(0)===65279&&y++,n=void 0);y<o.length;){if(cx.lastIndex=y,f=cx.exec(o),b=f&&f.index!==void 0?f.index:o.length,T=o.charCodeAt(b),!f){e=o.slice(y);break}if(T===10&&y===b&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),y<b&&(d.push(o.slice(y,b)),t+=b-y),T){case 0:{d.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,d.push(-2);t++<p;)d.push(-1);break}case 10:{d.push(-4),t=1;break}default:r=!0,t=1}y=b+1}return c&&(r&&d.push(-5),e&&d.push(e),d.push(null)),d}}const ij=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function sj(t){return t.replace(ij,aj)}function aj(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return yR(n.slice(o?2:1),o?16:10)}return g_(n)||t}const IR={}.hasOwnProperty;function oj(t,e,n){return typeof e!="string"&&(n=e,e=void 0),uj(n)(nj(tj(n).document().write(rj()(t,e,!0))))}function uj(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(cn),autolinkProtocol:O,autolinkEmail:O,atxHeading:o(Dt),blockQuote:o(He),characterEscape:O,characterReference:O,codeFenced:o(Je),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:o(Je,u),codeText:o(an,u),codeTextData:O,data:O,codeFlowValue:O,definition:o(Jt),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:o(on),hardBreakEscape:o(Rn),hardBreakTrailing:o(Rn),htmlFlow:o(Qe,u),htmlFlowData:O,htmlText:o(Qe,u),htmlTextData:O,image:o(qe),label:u,link:o(cn),listItem:o(Vn),listItemValue:b,listOrdered:o(Un,y),listUnordered:o(Un),paragraph:o(Kn),reference:B,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:o(Dt),strong:o(Hn),thematicBreak:o(or)},exit:{atxHeading:d(),atxHeadingSequence:ee,autolink:d(),autolinkEmail:Me,autolinkProtocol:we,blockQuote:d(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:Ne,characterReferenceMarkerNumeric:Ne,characterReferenceValue:Ie,characterReference:je,codeFenced:d(k),codeFencedFence:N,codeFencedFenceInfo:T,codeFencedFenceMeta:x,codeFlowValue:P,codeIndented:d(D),codeText:d(K),codeTextData:P,data:P,definition:d(),definitionDestinationString:q,definitionLabelString:z,definitionTitleString:Y,emphasis:d(),hardBreakEscape:d(V),hardBreakTrailing:d(V),htmlFlow:d(I),htmlFlowData:P,htmlText:d(L),htmlTextData:P,image:d(Q),label:te,labelText:se,lineEnding:U,link:d(F),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:ge,resourceDestinationString:A,resourceTitleString:J,resource:ae,setextHeading:d(C),setextHeadingLineSequence:R,setextHeadingText:$,strong:d(),thematicBreak:d()}};CR(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(de){let Te={type:"root",children:[]};const Ve={stack:[Te],tokenStack:[],config:e,enter:c,exit:f,buffer:u,resume:p,data:n},Ye=[];let ut=-1;for(;++ut<de.length;)if(de[ut][1].type==="listOrdered"||de[ut][1].type==="listUnordered")if(de[ut][0]==="enter")Ye.push(ut);else{const Tt=Ye.pop();ut=s(de,Tt,ut)}for(ut=-1;++ut<de.length;){const Tt=e[de[ut][0]];IR.call(Tt,de[ut][1].type)&&Tt[de[ut][1].type].call(Object.assign({sliceSerialize:de[ut][2].sliceSerialize},Ve),de[ut][1])}if(Ve.tokenStack.length>0){const Tt=Ve.tokenStack[Ve.tokenStack.length-1];(Tt[1]||hx).call(Ve,void 0,Tt[0])}for(Te.position={start:ja(de.length>0?de[0][1].start:{line:1,column:1,offset:0}),end:ja(de.length>0?de[de.length-2][1].end:{line:1,column:1,offset:0})},ut=-1;++ut<e.transforms.length;)Te=e.transforms[ut](Te)||Te;return Te}function s(de,Te,Ve){let Ye=Te-1,ut=-1,Tt=!1,Ht,Ft,zt,vt;for(;++Ye<=Ve;){const lt=de[Ye];switch(lt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{lt[0]==="enter"?ut++:ut--,vt=void 0;break}case"lineEndingBlank":{lt[0]==="enter"&&(Ht&&!vt&&!ut&&!zt&&(zt=Ye),vt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:vt=void 0}if(!ut&&lt[0]==="enter"&&lt[1].type==="listItemPrefix"||ut===-1&&lt[0]==="exit"&&(lt[1].type==="listUnordered"||lt[1].type==="listOrdered")){if(Ht){let Wt=Ye;for(Ft=void 0;Wt--;){const Gt=de[Wt];if(Gt[1].type==="lineEnding"||Gt[1].type==="lineEndingBlank"){if(Gt[0]==="exit")continue;Ft&&(de[Ft][1].type="lineEndingBlank",Tt=!0),Gt[1].type="lineEnding",Ft=Wt}else if(!(Gt[1].type==="linePrefix"||Gt[1].type==="blockQuotePrefix"||Gt[1].type==="blockQuotePrefixWhitespace"||Gt[1].type==="blockQuoteMarker"||Gt[1].type==="listItemIndent"))break}zt&&(!Ft||zt<Ft)&&(Ht._spread=!0),Ht.end=Object.assign({},Ft?de[Ft][1].start:lt[1].end),de.splice(Ft||Ye,0,["exit",Ht,lt[2]]),Ye++,Ve++}if(lt[1].type==="listItemPrefix"){const Wt={type:"listItem",_spread:!1,start:Object.assign({},lt[1].start),end:void 0};Ht=Wt,de.splice(Ye,0,["enter",Wt,lt[2]]),Ye++,Ve++,zt=void 0,vt=!0}}}return de[Te][1]._spread=Tt,Ve}function o(de,Te){return Ve;function Ve(Ye){c.call(this,de(Ye),Ye),Te&&Te.call(this,Ye)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(de,Te,Ve){this.stack[this.stack.length-1].children.push(de),this.stack.push(de),this.tokenStack.push([Te,Ve||void 0]),de.position={start:ja(Te.start),end:void 0}}function d(de){return Te;function Te(Ve){de&&de.call(this,Ve),f.call(this,Ve)}}function f(de,Te){const Ve=this.stack.pop(),Ye=this.tokenStack.pop();if(Ye)Ye[0].type!==de.type&&(Te?Te.call(this,de,Ye[0]):(Ye[1]||hx).call(this,de,Ye[0]));else throw new Error("Cannot close `"+de.type+"` ("+xh({start:de.start,end:de.end})+"): its not open");Ve.position.end=ja(de.end)}function p(){return aF(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function b(de){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(de),10),this.data.expectingFirstListItemValue=void 0}}function T(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=de}function x(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=de}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.value=de.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function D(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.value=de.replace(/(\r?\n|\r)$/g,"")}function z(de){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=Te,Ve.identifier=Sl(this.sliceSerialize(de)).toLowerCase()}function Y(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.title=de}function q(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.url=de}function ee(de){const Te=this.stack[this.stack.length-1];if(!Te.depth){const Ve=this.sliceSerialize(de).length;Te.depth=Ve}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function R(de){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(de).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function O(de){const Ve=this.stack[this.stack.length-1].children;let Ye=Ve[Ve.length-1];(!Ye||Ye.type!=="text")&&(Ye=Sn(),Ye.position={start:ja(de.start),end:void 0},Ve.push(Ye)),this.stack.push(Ye)}function P(de){const Te=this.stack.pop();Te.value+=this.sliceSerialize(de),Te.position.end=ja(de.end)}function U(de){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ve=Te.children[Te.children.length-1];Ve.position.end=ja(de.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Te.type)&&(O.call(this,de),P.call(this,de))}function V(){this.data.atHardBreak=!0}function I(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.value=de}function L(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.value=de}function K(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.value=de}function F(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=Te,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function Q(){const de=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";de.type+="Reference",de.referenceType=Te,delete de.url,delete de.title}else delete de.identifier,delete de.label;this.data.referenceType=void 0}function se(de){const Te=this.sliceSerialize(de),Ve=this.stack[this.stack.length-2];Ve.label=sj(Te),Ve.identifier=Sl(Te).toLowerCase()}function te(){const de=this.stack[this.stack.length-1],Te=this.resume(),Ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ve.type==="link"){const Ye=de.children;Ve.children=Ye}else Ve.alt=Te}function A(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.url=de}function J(){const de=this.resume(),Te=this.stack[this.stack.length-1];Te.title=de}function ae(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function ge(de){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=Te,Ve.identifier=Sl(this.sliceSerialize(de)).toLowerCase(),this.data.referenceType="full"}function Ne(de){this.data.characterReferenceType=de.type}function Ie(de){const Te=this.sliceSerialize(de),Ve=this.data.characterReferenceType;let Ye;Ve?(Ye=yR(Te,Ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ye=g_(Te);const ut=this.stack[this.stack.length-1];ut.value+=Ye}function je(de){const Te=this.stack.pop();Te.position.end=ja(de.end)}function we(de){P.call(this,de);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(de)}function Me(de){P.call(this,de);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(de)}function He(){return{type:"blockquote",children:[]}}function Je(){return{type:"code",lang:null,meta:null,value:""}}function an(){return{type:"inlineCode",value:""}}function Jt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function on(){return{type:"emphasis",children:[]}}function Dt(){return{type:"heading",depth:0,children:[]}}function Rn(){return{type:"break"}}function Qe(){return{type:"html",value:""}}function qe(){return{type:"image",title:null,url:"",alt:null}}function cn(){return{type:"link",title:null,url:"",children:[]}}function Un(de){return{type:"list",ordered:de.type==="listOrdered",start:null,spread:de._spread,children:[]}}function Vn(de){return{type:"listItem",spread:de._spread,checked:null,children:[]}}function Kn(){return{type:"paragraph",children:[]}}function Hn(){return{type:"strong",children:[]}}function Sn(){return{type:"text",value:""}}function or(){return{type:"thematicBreak"}}}function ja(t){return{line:t.line,column:t.column,offset:t.offset}}function CR(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?CR(t,r):lj(t,r)}}function lj(t,e){let n;for(n in e)if(IR.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function hx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+xh({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+xh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+xh({start:e.start,end:e.end})+") is still open")}function cj(t){const e=this;e.parser=n;function n(r){return oj(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function hj(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function dj(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function fj(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function mj(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pj(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gj(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Ql(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let u,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),u=t.footnoteOrder.length):u=o+1,c+=1,t.footnoteCounts.set(r,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};t.patch(e,d);const f={type:"element",tagName:"sup",properties:{},children:[d]};return t.patch(e,f),t.applyData(e,f)}function yj(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Ej(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function NR(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const u=s[s.length-1];return u&&u.type==="text"?u.value+=r:s.push({type:"text",value:r}),s}function _j(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return NR(t,e);const s={src:Ql(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,o),t.applyData(e,o)}function bj(t,e){const n={src:Ql(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Tj(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function vj(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return NR(t,e);const s={href:Ql(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function Aj(t,e){const n={href:Ql(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Sj(t,e,n){const r=t.all(e),s=n?xj(n):RR(e),o={},u=[];if(typeof e.checked=="boolean"){const p=r[0];let y;p&&p.type==="element"&&p.tagName==="p"?y=p:(y={type:"element",tagName:"p",properties:{},children:[]},r.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const p=r[c];(s||c!==0||p.type!=="element"||p.tagName!=="p")&&u.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!s?u.push(...p.children):u.push(p)}const d=r[r.length-1];d&&(s||d.type!=="element"||d.tagName!=="p")&&u.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:u};return t.patch(e,f),t.applyData(e,f)}function xj(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=RR(n[r])}return e}function RR(t){const e=t.spread;return e??t.children.length>1}function wj(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const u=r[s];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function Ij(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Cj(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Nj(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Rj(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const u={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],u),s.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=Bs(e.children[1]),d=Um(e.children[e.children.length-1]);c&&d&&(u.position={start:c,end:d}),s.push(u)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function Dj(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,c=u?u.length:e.children.length;let d=-1;const f=[];for(;++d<c;){const y=e.children[d],b={},T=u?u[d]:void 0;T&&(b.align=T);let x={type:"element",tagName:o,properties:b,children:[]};y&&(x.children=t.all(y),t.patch(y,x),x=t.applyData(y,x)),f.push(x)}const p={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,p),t.applyData(e,p)}function Oj(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const dx=9,fx=32;function kj(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const o=[];for(;r;)o.push(mx(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return o.push(mx(e.slice(s),s>0,!1)),o.join("")}function mx(t,e,n){let r=0,s=t.length;if(e){let o=t.codePointAt(r);for(;o===dx||o===fx;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(s-1);for(;o===dx||o===fx;)s--,o=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function Lj(t,e){const n={type:"text",value:kj(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Mj(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Pj={blockquote:hj,break:dj,code:fj,delete:mj,emphasis:pj,footnoteReference:gj,heading:yj,html:Ej,imageReference:_j,image:bj,inlineCode:Tj,linkReference:vj,link:Aj,listItem:Sj,list:wj,paragraph:Ij,root:Cj,strong:Nj,table:Rj,tableCell:Oj,tableRow:Dj,text:Lj,thematicBreak:Mj,toml:r0,yaml:r0,definition:r0,footnoteDefinition:r0};function r0(){}const DR=-1,Hm=0,Ih=1,rm=2,__=3,b_=4,T_=5,v_=6,OR=7,kR=8,px=typeof self=="object"?self:globalThis,Bj=(t,e)=>{const n=(s,o)=>(t.set(o,s),s),r=s=>{if(t.has(s))return t.get(s);const[o,u]=e[s];switch(o){case Hm:case DR:return n(u,s);case Ih:{const c=n([],s);for(const d of u)c.push(r(d));return c}case rm:{const c=n({},s);for(const[d,f]of u)c[r(d)]=r(f);return c}case __:return n(new Date(u),s);case b_:{const{source:c,flags:d}=u;return n(new RegExp(c,d),s)}case T_:{const c=n(new Map,s);for(const[d,f]of u)c.set(r(d),r(f));return c}case v_:{const c=n(new Set,s);for(const d of u)c.add(r(d));return c}case OR:{const{name:c,message:d}=u;return n(new px[c](d),s)}case kR:return n(BigInt(u),s);case"BigInt":return n(Object(BigInt(u)),s);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:c}=new Uint8Array(u);return n(new DataView(c),u)}}return n(new px[o](u),s)};return r},gx=t=>Bj(new Map,t)(0),al="",{toString:Uj}={},{keys:Vj}=Object,ah=t=>{const e=typeof t;if(e!=="object"||!t)return[Hm,e];const n=Uj.call(t).slice(8,-1);switch(n){case"Array":return[Ih,al];case"Object":return[rm,al];case"Date":return[__,al];case"RegExp":return[b_,al];case"Map":return[T_,al];case"Set":return[v_,al];case"DataView":return[Ih,n]}return n.includes("Array")?[Ih,n]:n.includes("Error")?[OR,n]:[rm,n]},i0=([t,e])=>t===Hm&&(e==="function"||e==="symbol"),Hj=(t,e,n,r)=>{const s=(u,c)=>{const d=r.push(u)-1;return n.set(c,d),d},o=u=>{if(n.has(u))return n.get(u);let[c,d]=ah(u);switch(c){case Hm:{let p=u;switch(d){case"bigint":c=kR,p=u.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+d);p=null;break;case"undefined":return s([DR],u)}return s([c,p],u)}case Ih:{if(d){let b=u;return d==="DataView"?b=new Uint8Array(u.buffer):d==="ArrayBuffer"&&(b=new Uint8Array(u)),s([d,[...b]],u)}const p=[],y=s([c,p],u);for(const b of u)p.push(o(b));return y}case rm:{if(d)switch(d){case"BigInt":return s([d,u.toString()],u);case"Boolean":case"Number":case"String":return s([d,u.valueOf()],u)}if(e&&"toJSON"in u)return o(u.toJSON());const p=[],y=s([c,p],u);for(const b of Vj(u))(t||!i0(ah(u[b])))&&p.push([o(b),o(u[b])]);return y}case __:return s([c,u.toISOString()],u);case b_:{const{source:p,flags:y}=u;return s([c,{source:p,flags:y}],u)}case T_:{const p=[],y=s([c,p],u);for(const[b,T]of u)(t||!(i0(ah(b))||i0(ah(T))))&&p.push([o(b),o(T)]);return y}case v_:{const p=[],y=s([c,p],u);for(const b of u)(t||!i0(ah(b)))&&p.push(o(b));return y}}const{message:f}=u;return s([c,{name:d,message:f}],u)};return o},yx=(t,{json:e,lossy:n}={})=>{const r=[];return Hj(!(e||n),!!e,new Map,r)(t),r},Ul=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?gx(yx(t,e)):structuredClone(t):(t,e)=>gx(yx(t,e));function Fj(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function zj(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function jj(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Fj,r=t.options.footnoteBackLabel||zj,s=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",u=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[d]);if(!f)continue;const p=t.all(f),y=String(f.identifier).toUpperCase(),b=Ql(y.toLowerCase());let T=0;const x=[],N=t.footnoteCounts.get(y);for(;N!==void 0&&++T<=N;){x.length>0&&x.push({type:"text",value:" "});let z=typeof n=="string"?n:n(d,T);typeof z=="string"&&(z={type:"text",value:z}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(T>1?"-"+T:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,T),className:["data-footnote-backref"]},children:Array.isArray(z)?z:[z]})}const k=p[p.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const z=k.children[k.children.length-1];z&&z.type==="text"?z.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...x)}else p.push(...x);const D={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(p,!0)};t.patch(f,D),c.push(D)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Ul(u),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const LR=function(t){if(t==null)return $j;if(typeof t=="function")return Fm(t);if(typeof t=="object")return Array.isArray(t)?qj(t):Yj(t);if(typeof t=="string")return Gj(t);throw new Error("Expected function, string, or object as test")};function qj(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=LR(t[n]);return Fm(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function Yj(t){const e=t;return Fm(n);function n(r){const s=r;let o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function Gj(t){return Fm(e);function e(n){return n&&n.type===t}}function Fm(t){return e;function e(n,r,s){return!!(Kj(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function $j(){return!0}function Kj(t){return t!==null&&typeof t=="object"&&"type"in t}const MR=[],Xj=!0,Ex=!1,Qj="skip";function Wj(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const o=LR(s),u=r?-1:1;c(t,void 0,[])();function c(d,f,p){const y=d&&typeof d=="object"?d:{};if(typeof y.type=="string"){const T=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(d.type+(T?"<"+T+">":""))+")"})}return b;function b(){let T=MR,x,N,k;if((!e||o(d,f,p[p.length-1]||void 0))&&(T=Zj(n(d,p)),T[0]===Ex))return T;if("children"in d&&d.children){const D=d;if(D.children&&T[0]!==Qj)for(N=(r?D.children.length:-1)+u,k=p.concat(D);N>-1&&N<D.children.length;){const z=D.children[N];if(x=c(z,N,k)(),x[0]===Ex)return x;N=typeof x[1]=="number"?x[1]:N+u}}return T}}}function Zj(t){return Array.isArray(t)?t:typeof t=="number"?[Xj,t]:t==null?MR:[t]}function A_(t,e,n,r){let s,o,u;typeof e=="function"&&typeof n!="function"?(o=void 0,u=e,s=n):(o=e,u=n,s=r),Wj(t,o,c,s);function c(d,f){const p=f[f.length-1],y=p?p.children.indexOf(d):void 0;return u(d,y,p)}}const M1={}.hasOwnProperty,Jj={};function eq(t,e){const n=e||Jj,r=new Map,s=new Map,o=new Map,u={...Pj,...n.handlers},c={all:f,applyData:nq,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:u,one:d,options:n,patch:tq,wrap:iq};return A_(t,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const y=p.type==="definition"?r:s,b=String(p.identifier).toUpperCase();y.has(b)||y.set(b,p)}}),c;function d(p,y){const b=p.type,T=c.handlers[b];if(M1.call(c.handlers,b)&&T)return T(c,p,y);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in p){const{children:N,...k}=p,D=Ul(k);return D.children=c.all(p),D}return Ul(p)}return(c.options.unknownHandler||rq)(c,p,y)}function f(p){const y=[];if("children"in p){const b=p.children;let T=-1;for(;++T<b.length;){const x=c.one(b[T],p);if(x){if(T&&b[T-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=_x(x.value)),!Array.isArray(x)&&x.type==="element")){const N=x.children[0];N&&N.type==="text"&&(N.value=_x(N.value))}Array.isArray(x)?y.push(...x):y.push(x)}}}return y}}function tq(t,e){t.position&&(e.position=UH(t))}function nq(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const u="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:u}}n.type==="element"&&o&&Object.assign(n.properties,Ul(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function rq(t,e){const n=e.data||{},r="value"in e&&!(M1.call(n,"hProperties")||M1.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function iq(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function _x(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function bx(t,e){const n=eq(t,e),r=n.one(t,void 0),s=jj(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function sq(t,e){return t&&"run"in t?async function(n,r){const s=bx(n,{file:r,...e});await t.run(s,r)}:function(n,r){return bx(n,{file:r,...t||e})}}function Tx(t){if(t)throw t}var Iy,vx;function aq(){if(vx)return Iy;vx=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},o=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var p=t.call(f,"constructor"),y=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!p&&!y)return!1;var b;for(b in f);return typeof b>"u"||t.call(f,b)},u=function(f,p){n&&p.name==="__proto__"?n(f,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):f[p.name]=p.newValue},c=function(f,p){if(p==="__proto__")if(t.call(f,p)){if(r)return r(f,p).value}else return;return f[p]};return Iy=function d(){var f,p,y,b,T,x,N=arguments[0],k=1,D=arguments.length,z=!1;for(typeof N=="boolean"&&(z=N,N=arguments[1]||{},k=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});k<D;++k)if(f=arguments[k],f!=null)for(p in f)y=c(N,p),b=c(f,p),N!==b&&(z&&b&&(o(b)||(T=s(b)))?(T?(T=!1,x=y&&s(y)?y:[]):x=y&&o(y)?y:{},u(N,{name:p,newValue:d(z,x,b)})):typeof b<"u"&&u(N,{name:p,newValue:b}));return N},Iy}var oq=aq();const Cy=om(oq);function P1(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function uq(){const t=[],e={run:n,use:r};return e;function n(...s){let o=-1;const u=s.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);c(null,...s);function c(d,...f){const p=t[++o];let y=-1;if(d){u(d);return}for(;++y<s.length;)(f[y]===null||f[y]===void 0)&&(f[y]=s[y]);s=f,p?lq(p,c)(...f):u(null,...f)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function lq(t,e){let n;return r;function r(...u){const c=t.length>u.length;let d;c&&u.push(s);try{d=t.apply(this,u)}catch(f){const p=f;if(c&&n)throw p;return s(p)}c||(d&&d.then&&typeof d.then=="function"?d.then(o,s):d instanceof Error?s(d):o(d))}function s(u,...c){n||(n=!0,e(u,...c))}function o(u){s(null,u)}}const vs={basename:cq,dirname:hq,extname:dq,join:fq,sep:"/"};function cq(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');bd(t);let n=0,r=-1,s=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let u=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else u<0&&(o=!0,u=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=u));return n===r?r=u:r<0&&(r=t.length),t.slice(n,r)}function hq(t){if(bd(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function dq(t){bd(t);let e=t.length,n=-1,r=0,s=-1,o=0,u;for(;e--;){const c=t.codePointAt(e);if(c===47){if(u){r=e+1;break}continue}n<0&&(u=!0,n=e+1),c===46?s<0?s=e:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function fq(...t){let e=-1,n;for(;++e<t.length;)bd(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":mq(n)}function mq(t){bd(t);const e=t.codePointAt(0)===47;let n=pq(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function pq(t,e){let n="",r=0,s=-1,o=0,u=-1,c,d;for(;++u<=t.length;){if(u<t.length)c=t.codePointAt(u);else{if(c===47)break;c=47}if(c===47){if(!(s===u-1||o===1))if(s!==u-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),s=u,o=0;continue}}else if(n.length>0){n="",r=0,s=u,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,u):n=t.slice(s+1,u),r=u-s-1;s=u,o=0}else c===46&&o>-1?o++:o=-1}return n}function bd(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const gq={cwd:yq};function yq(){return"/"}function B1(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Eq(t){if(typeof t=="string")t=new URL(t);else if(!B1(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return _q(t)}function _q(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Ny=["history","path","basename","stem","extname","dirname"];class PR{constructor(e){let n;e?B1(e)?n={path:e}:typeof e=="string"||bq(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":gq.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ny.length;){const o=Ny[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)Ny.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?vs.basename(this.path):void 0}set basename(e){Dy(e,"basename"),Ry(e,"basename"),this.path=vs.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?vs.dirname(this.path):void 0}set dirname(e){Ax(this.basename,"dirname"),this.path=vs.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?vs.extname(this.path):void 0}set extname(e){if(Ry(e,"extname"),Ax(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vs.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){B1(e)&&(e=Eq(e)),Dy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?vs.basename(this.path,this.extname):void 0}set stem(e){Dy(e,"stem"),Ry(e,"stem"),this.path=vs.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Cr(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Ry(t,e){if(t&&t.includes(vs.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+vs.sep+"`")}function Dy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Ax(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function bq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Tq=function(t){const r=this.constructor.prototype,s=r[t],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},vq={}.hasOwnProperty;class S_ extends Tq{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uq()}copy(){const e=new S_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Cy(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ly("data",this.frozen),this.namespace[e]=n,this):vq.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ly("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=s0(e),r=this.parser||this.Parser;return Oy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Oy("process",this.parser||this.Parser),ky("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,u){const c=s0(e),d=r.parse(c);r.run(d,c,function(p,y,b){if(p||!y||!b)return f(p);const T=y,x=r.stringify(T,b);xq(x)?b.value=x:b.result=x,f(p,b)});function f(p,y){p||!y?u(p):o?o(y):n(void 0,y)}}}processSync(e){let n=!1,r;return this.freeze(),Oy("processSync",this.parser||this.Parser),ky("processSync",this.compiler||this.Compiler),this.process(e,s),xx("processSync","process",n),r;function s(o,u){n=!0,Tx(o),r=u}}run(e,n,r){Sx(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(u,c){const d=s0(n);s.run(e,d,f);function f(p,y,b){const T=y||e;p?c(p):u?u(T):r(void 0,T,b)}}}runSync(e,n){let r=!1,s;return this.run(e,n,o),xx("runSync","run",r),s;function o(u,c){Tx(u),s=c,r=!0}}stringify(e,n){this.freeze();const r=s0(n),s=this.compiler||this.Compiler;return ky("stringify",s),Sx(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Ly("use",this.frozen),e!=null)if(typeof e=="function")d(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):u(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(f){if(typeof f=="function")d(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[p,...y]=f;d(p,y)}else u(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function u(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(f.plugins),f.settings&&(s.settings=Cy(!0,s.settings,f.settings))}function c(f){let p=-1;if(f!=null)if(Array.isArray(f))for(;++p<f.length;){const y=f[p];o(y)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function d(f,p){let y=-1,b=-1;for(;++y<r.length;)if(r[y][0]===f){b=y;break}if(b===-1)r.push([f,...p]);else if(p.length>0){let[T,...x]=p;const N=r[b][1];P1(N)&&P1(T)&&(T=Cy(!0,N,T)),r[b]=[f,T,...x]}}}}const Aq=new S_().freeze();function Oy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function ky(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Ly(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Sx(t){if(!P1(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function xx(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function s0(t){return Sq(t)?t:new PR(t)}function Sq(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function xq(t){return typeof t=="string"||wq(t)}function wq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Iq="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",wx=[],Ix={allowDangerousHtml:!0},Cq=/^(https?|ircs?|mailto|xmpp)$/i,Nq=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Rq(t){const e=Dq(t),n=Oq(t);return kq(e.runSync(e.parse(n),n),t)}function Dq(t){const e=t.rehypePlugins||wx,n=t.remarkPlugins||wx,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Ix}:Ix;return Aq().use(cj).use(n).use(sq,r).use(e)}function Oq(t){const e=t.children||"",n=new PR;return typeof e=="string"&&(n.value=e),n}function kq(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,o=e.disallowedElements,u=e.skipHtml,c=e.unwrapDisallowed,d=e.urlTransform||Lq;for(const p of Nq)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+Iq+p.id,void 0);return A_(t,f),jH(t,{Fragment:M.Fragment,components:s,ignoreInvalidStyle:!0,jsx:M.jsx,jsxs:M.jsxs,passKeys:!0,passNode:!0});function f(p,y,b){if(p.type==="raw"&&b&&typeof y=="number")return u?b.children.splice(y,1):b.children[y]={type:"text",value:p.value},y;if(p.type==="element"){let T;for(T in Sy)if(Object.hasOwn(Sy,T)&&Object.hasOwn(p.properties,T)){const x=p.properties[T],N=Sy[T];(N===null||N.includes(p.tagName))&&(p.properties[T]=d(String(x||""),T,p))}}if(p.type==="element"){let T=n?!n.includes(p.tagName):o?o.includes(p.tagName):!1;if(!T&&r&&typeof y=="number"&&(T=!r(p,y,b)),T&&b&&typeof y=="number")return c&&p.children?b.children.splice(y,1,...p.children):b.children.splice(y,1),y}}}function Lq(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||Cq.test(t.slice(0,e))?t:""}const Cx=/[#.]/g;function Mq(t,e){const n=t||"",r={};let s=0,o,u;for(;s<n.length;){Cx.lastIndex=s;const c=Cx.exec(n),d=n.slice(s,c?c.index:n.length);d&&(o?o==="#"?r.id=d:Array.isArray(r.className)?r.className.push(d):r.className=[d]:u=d,s+=d.length),c&&(o=c[0],s++)}return{type:"element",tagName:u||e||"div",properties:r,children:[]}}function BR(t,e,n){const r=n?Vq(n):void 0;function s(o,u,...c){let d;if(o==null){d={type:"root",children:[]};const f=u;c.unshift(f)}else{d=Mq(o,e);const f=d.tagName.toLowerCase(),p=r?r.get(f):void 0;if(d.tagName=p||f,Pq(u))c.unshift(u);else for(const[y,b]of Object.entries(u))Bq(t,d.properties,y,b)}for(const f of c)U1(d.children,f);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return s}function Pq(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const o=s;for(const u of o)if(typeof u!="number"&&typeof u!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Bq(t,e,n,r){const s=d_(t,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=$S(r):s.commaSeparated?o=zS(r):s.commaOrSpaceSeparated?o=$S(zS(r).join(" ")):o=Nx(s,s.property,r):Array.isArray(r)?o=[...r]:o=s.property==="style"?Uq(r):String(r);if(Array.isArray(o)){const u=[];for(const c of o)u.push(Nx(s,s.property,c));o=u}s.property==="className"&&Array.isArray(e.className)&&(o=e.className.concat(o)),e[s.property]=o}}function U1(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)U1(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?U1(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function Nx(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||Zh(n)===Zh(e)))return!0}return n}function Uq(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function Vq(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const Hq=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Fq=BR(Bm,"div"),zq=BR(Xl,"g",Hq);function jq(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=e.length){let u=0;for(;;){let c=n[u];if(c===void 0){const d=Rx(e,n[u-1]);c=d===-1?e.length+1:d+1,n[u]=c}if(c>o)return{line:u+1,column:o-(u>0?n[u-1]:0)+1,offset:o};u++}}}function s(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const c=n[n.length-1],d=Rx(e,c),f=d===-1?e.length+1:d+1;if(c===f)break;n.push(f)}const u=(o.line>1?n[o.line-2]:0)+o.column-1;if(u<n[o.line-1])return u}}}function Rx(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Jo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},UR={}.hasOwnProperty,qq=Object.prototype;function Yq(t,e){const n=e||{};return x_({file:n.file||void 0,location:!1,schema:n.space==="svg"?Xl:Bm,verbose:n.verbose||!1},t)}function x_(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},v0(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:VR(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const o=String(t.file),u=jq(o),c=u.toPoint(0),d=u.toPoint(o.length);n.position={start:c,end:d}}return n}case"#documentType":{const r=e;return n={type:"doctype"},v0(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},v0(t,r,n),n}default:return n=Gq(t,e),n}}function VR(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=x_(t,e[n]);r.push(s)}return r}function Gq(t,e){const n=t.schema;t.schema=e.namespaceURI===Jo.svg?Xl:Bm;let r=-1;const s={};for(;++r<e.attrs.length;){const c=e.attrs[r],d=(c.prefix?c.prefix+":":"")+c.name;UR.call(qq,d)||(s[d]=c.value)}const u=(t.schema.space==="svg"?zq:Fq)(e.tagName,s,VR(t,e.childNodes));if(v0(t,e,u),u.tagName==="template"){const c=e,d=c.sourceCodeLocation,f=d&&d.startTag&&ml(d.startTag),p=d&&d.endTag&&ml(d.endTag),y=x_(t,c.content);f&&p&&t.file&&(y.position={start:f.end,end:p.start}),u.content=y}return t.schema=n,u}function v0(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=$q(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function $q(t,e,n){const r=ml(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const o={};let u;if(n.attrs)for(u in n.attrs)UR.call(n.attrs,u)&&(o[d_(t.schema,u).property]=ml(n.attrs[u]));n.startTag;const c=ml(n.startTag),d=n.endTag?ml(n.endTag):void 0,f={opening:c};d&&(f.closing=d),f.properties=o,e.data={position:f}}}return r}function ml(t){const e=Dx({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=Dx({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function Dx(t){return t.line&&t.column?t:void 0}class Td{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Td.prototype.property={};Td.prototype.normal={};Td.prototype.space=null;function HR(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new Td(n,r,e)}function V1(t){return t.toLowerCase()}class qi{constructor(e,n){this.property=e,this.attribute=n}}qi.prototype.space=null;qi.prototype.boolean=!1;qi.prototype.booleanish=!1;qi.prototype.overloadedBoolean=!1;qi.prototype.number=!1;qi.prototype.commaSeparated=!1;qi.prototype.spaceSeparated=!1;qi.prototype.commaOrSpaceSeparated=!1;qi.prototype.mustUseProperty=!1;qi.prototype.defined=!1;let Kq=0;const st=gu(),Pn=gu(),FR=gu(),ke=gu(),rn=gu(),xl=gu(),mi=gu();function gu(){return 2**++Kq}const H1=Object.freeze(Object.defineProperty({__proto__:null,boolean:st,booleanish:Pn,commaOrSpaceSeparated:mi,commaSeparated:xl,number:ke,overloadedBoolean:FR,spaceSeparated:rn},Symbol.toStringTag,{value:"Module"})),My=Object.keys(H1);class w_ extends qi{constructor(e,n,r,s){let o=-1;if(super(e,n),Ox(this,"space",s),typeof r=="number")for(;++o<My.length;){const u=My[o];Ox(this,My[o],(r&H1[u])===H1[u])}}}w_.prototype.defined=!0;function Ox(t,e,n){n&&(t[e]=n)}const Xq={}.hasOwnProperty;function Wl(t){const e={},n={};let r;for(r in t.properties)if(Xq.call(t.properties,r)){const s=t.properties[r],o=new w_(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[V1(r)]=r,n[V1(o.attribute)]=r}return new Td(e,n,t.space)}const zR=Wl({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),jR=Wl({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function qR(t,e){return e in t?t[e]:e}function YR(t,e){return qR(t,e.toLowerCase())}const GR=Wl({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:YR,properties:{xmlns:null,xmlnsXLink:null}}),$R=Wl({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Pn,ariaAutoComplete:null,ariaBusy:Pn,ariaChecked:Pn,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:rn,ariaCurrent:null,ariaDescribedBy:rn,ariaDetails:null,ariaDisabled:Pn,ariaDropEffect:rn,ariaErrorMessage:null,ariaExpanded:Pn,ariaFlowTo:rn,ariaGrabbed:Pn,ariaHasPopup:null,ariaHidden:Pn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rn,ariaLevel:ke,ariaLive:null,ariaModal:Pn,ariaMultiLine:Pn,ariaMultiSelectable:Pn,ariaOrientation:null,ariaOwns:rn,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Pn,ariaReadOnly:Pn,ariaRelevant:null,ariaRequired:Pn,ariaRoleDescription:rn,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Pn,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null}}),Qq=Wl({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:YR,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xl,acceptCharset:rn,accessKey:rn,action:null,allow:null,allowFullScreen:st,allowPaymentRequest:st,allowUserMedia:st,alt:null,as:null,async:st,autoCapitalize:null,autoComplete:rn,autoFocus:st,autoPlay:st,blocking:rn,capture:null,charSet:null,checked:st,cite:null,className:rn,cols:ke,colSpan:null,content:null,contentEditable:Pn,controls:st,controlsList:rn,coords:ke|xl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:st,defer:st,dir:null,dirName:null,disabled:st,download:FR,draggable:Pn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:st,formTarget:null,headers:rn,height:ke,hidden:st,high:ke,href:null,hrefLang:null,htmlFor:rn,httpEquiv:rn,id:null,imageSizes:null,imageSrcSet:null,inert:st,inputMode:null,integrity:null,is:null,isMap:st,itemId:null,itemProp:rn,itemRef:rn,itemScope:st,itemType:rn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:st,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:st,muted:st,name:null,nonce:null,noModule:st,noValidate:st,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:st,optimum:ke,pattern:null,ping:rn,placeholder:null,playsInline:st,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:st,referrerPolicy:null,rel:rn,required:st,reversed:st,rows:ke,rowSpan:ke,sandbox:rn,scope:null,scoped:st,seamless:st,selected:st,shadowRootClonable:st,shadowRootDelegatesFocus:st,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Pn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:st,useMap:null,value:Pn,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rn,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:st,declare:st,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:st,noHref:st,noShade:st,noWrap:st,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Pn,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:st,disableRemotePlayback:st,prefix:null,property:null,results:ke,security:null,unselectable:null}}),Wq=Wl({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:qR,properties:{about:mi,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:rn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:st,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xl,g2:xl,glyphName:xl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:mi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mi,rev:mi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mi,requiredFeatures:mi,requiredFonts:mi,requiredFormats:mi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:mi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mi,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Zq=/^data[-\w.:]+$/i,kx=/-[a-z]/g,Jq=/[A-Z]/g;function eY(t,e){const n=V1(e);let r=e,s=qi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Zq.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(kx,nY);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!kx.test(o)){let u=o.replace(Jq,tY);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=w_}return new s(r,e)}function tY(t){return"-"+t.toLowerCase()}function nY(t){return t.charAt(1).toUpperCase()}const rY=HR([jR,zR,GR,$R,Qq],"html"),KR=HR([jR,zR,GR,$R,Wq],"svg"),Lx={}.hasOwnProperty;function XR(t,e){const n=e||{};function r(s,...o){let u=r.invalid;const c=r.handlers;if(s&&Lx.call(s,t)){const d=String(s[t]);u=Lx.call(c,d)?c[d]:r.unknown}if(u)return u.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const iY={},sY={}.hasOwnProperty,QR=XR("type",{handlers:{root:oY,element:dY,text:cY,comment:hY,doctype:lY}});function aY(t,e){const r=(e||iY).space;return QR(t,r==="svg"?KR:rY)}function oY(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=I_(t.children,n,e),Zl(t,n),n}function uY(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=I_(t.children,n,e),Zl(t,n),n}function lY(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Zl(t,e),e}function cY(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Zl(t,e),e}function hY(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Zl(t,e),e}function dY(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=KR);const s=[];let o;if(t.properties){for(o in t.properties)if(o!=="children"&&sY.call(t.properties,o)){const d=fY(r,o,t.properties[o]);d&&s.push(d)}}const u=r.space,c={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:Jo[u],childNodes:[],parentNode:null};return c.childNodes=I_(t.children,c,r),Zl(t,c),t.tagName==="template"&&t.content&&(c.content=uY(t.content,r)),c}function fY(t,e,n){const r=eY(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?nR(n):cR(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=Jo[r.space]}return s}function I_(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const o=QR(t[r],n);o.parentNode=e,s.push(o)}return s}function Zl(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const mY=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],pY=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),mn="";var G;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(G||(G={}));const Kr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function WR(t){return t>=55296&&t<=57343}function gY(t){return t>=56320&&t<=57343}function yY(t,e){return(t-55296)*1024+9216+e}function ZR(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function JR(t){return t>=64976&&t<=65007||pY.has(t)}var Ee;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ee||(Ee={}));const EY=65536;class _Y{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=EY,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:o}=this,u=s+n,c=o+n;return{code:e,startLine:r,endLine:r,startCol:u,endCol:u,startOffset:c,endOffset:c}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(gY(n))return this.pos++,this._addGap(),yY(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,G.EOF;return this._err(Ee.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,G.EOF;const r=this.html.charCodeAt(n);return r===G.CARRIAGE_RETURN?G.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,G.EOF;let e=this.html.charCodeAt(this.pos);return e===G.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,G.LINE_FEED):e===G.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,WR(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===G.LINE_FEED||e===G.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){ZR(e)?this._err(Ee.controlCharacterInInputStream):JR(e)&&this._err(Ee.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var mt;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(mt||(mt={}));function e3(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const bY=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),TY=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function vY(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=TY.get(t))!==null&&e!==void 0?e:t}var sr;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(sr||(sr={}));const AY=32;var to;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(to||(to={}));function F1(t){return t>=sr.ZERO&&t<=sr.NINE}function SY(t){return t>=sr.UPPER_A&&t<=sr.UPPER_F||t>=sr.LOWER_A&&t<=sr.LOWER_F}function xY(t){return t>=sr.UPPER_A&&t<=sr.UPPER_Z||t>=sr.LOWER_A&&t<=sr.LOWER_Z||F1(t)}function wY(t){return t===sr.EQUALS||xY(t)}var rr;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(rr||(rr={}));var aa;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(aa||(aa={}));class IY{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=rr.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=aa.Strict}startEntity(e){this.decodeMode=e,this.state=rr.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case rr.EntityStart:return e.charCodeAt(n)===sr.NUM?(this.state=rr.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=rr.NamedEntity,this.stateNamedEntity(e,n));case rr.NumericStart:return this.stateNumericStart(e,n);case rr.NumericDecimal:return this.stateNumericDecimal(e,n);case rr.NumericHex:return this.stateNumericHex(e,n);case rr.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|AY)===sr.LOWER_X?(this.state=rr.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=rr.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const o=r-n;this.result=this.result*Math.pow(s,o)+Number.parseInt(e.substr(n,o),s),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(F1(s)||SY(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(F1(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===sr.SEMI)this.consumed+=1;else if(this.decodeMode===aa.Strict)return 0;return this.emitCodePoint(vY(this.result),this.consumed),this.errors&&(e!==sr.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],o=(s&to.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const u=e.charCodeAt(n);if(this.treeIndex=CY(r,s,this.treeIndex+Math.max(1,o),u),this.treeIndex<0)return this.result===0||this.decodeMode===aa.Attribute&&(o===0||wY(u))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],o=(s&to.VALUE_LENGTH)>>14,o!==0){if(u===sr.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==aa.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&to.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~to.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case rr.NamedEntity:return this.result!==0&&(this.decodeMode!==aa.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case rr.NumericDecimal:return this.emitNumericEntity(0,2);case rr.NumericHex:return this.emitNumericEntity(0,3);case rr.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case rr.EntityStart:return 0}}}function CY(t,e,n,r){const s=(e&to.BRANCH_LENGTH)>>7,o=e&to.JUMP_TABLE;if(s===0)return o!==0&&r===o?n:-1;if(o){const d=r-o;return d<0||d>=s?-1:t[n+d]-1}let u=n,c=u+s-1;for(;u<=c;){const d=u+c>>>1,f=t[d];if(f<r)u=d+1;else if(f>r)c=d-1;else return t[d+s]}return-1}var Ce;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Ce||(Ce={}));var tu;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(tu||(tu={}));var Fi;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Fi||(Fi={}));var ce;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(ce||(ce={}));var _;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(_||(_={}));const NY=new Map([[ce.A,_.A],[ce.ADDRESS,_.ADDRESS],[ce.ANNOTATION_XML,_.ANNOTATION_XML],[ce.APPLET,_.APPLET],[ce.AREA,_.AREA],[ce.ARTICLE,_.ARTICLE],[ce.ASIDE,_.ASIDE],[ce.B,_.B],[ce.BASE,_.BASE],[ce.BASEFONT,_.BASEFONT],[ce.BGSOUND,_.BGSOUND],[ce.BIG,_.BIG],[ce.BLOCKQUOTE,_.BLOCKQUOTE],[ce.BODY,_.BODY],[ce.BR,_.BR],[ce.BUTTON,_.BUTTON],[ce.CAPTION,_.CAPTION],[ce.CENTER,_.CENTER],[ce.CODE,_.CODE],[ce.COL,_.COL],[ce.COLGROUP,_.COLGROUP],[ce.DD,_.DD],[ce.DESC,_.DESC],[ce.DETAILS,_.DETAILS],[ce.DIALOG,_.DIALOG],[ce.DIR,_.DIR],[ce.DIV,_.DIV],[ce.DL,_.DL],[ce.DT,_.DT],[ce.EM,_.EM],[ce.EMBED,_.EMBED],[ce.FIELDSET,_.FIELDSET],[ce.FIGCAPTION,_.FIGCAPTION],[ce.FIGURE,_.FIGURE],[ce.FONT,_.FONT],[ce.FOOTER,_.FOOTER],[ce.FOREIGN_OBJECT,_.FOREIGN_OBJECT],[ce.FORM,_.FORM],[ce.FRAME,_.FRAME],[ce.FRAMESET,_.FRAMESET],[ce.H1,_.H1],[ce.H2,_.H2],[ce.H3,_.H3],[ce.H4,_.H4],[ce.H5,_.H5],[ce.H6,_.H6],[ce.HEAD,_.HEAD],[ce.HEADER,_.HEADER],[ce.HGROUP,_.HGROUP],[ce.HR,_.HR],[ce.HTML,_.HTML],[ce.I,_.I],[ce.IMG,_.IMG],[ce.IMAGE,_.IMAGE],[ce.INPUT,_.INPUT],[ce.IFRAME,_.IFRAME],[ce.KEYGEN,_.KEYGEN],[ce.LABEL,_.LABEL],[ce.LI,_.LI],[ce.LINK,_.LINK],[ce.LISTING,_.LISTING],[ce.MAIN,_.MAIN],[ce.MALIGNMARK,_.MALIGNMARK],[ce.MARQUEE,_.MARQUEE],[ce.MATH,_.MATH],[ce.MENU,_.MENU],[ce.META,_.META],[ce.MGLYPH,_.MGLYPH],[ce.MI,_.MI],[ce.MO,_.MO],[ce.MN,_.MN],[ce.MS,_.MS],[ce.MTEXT,_.MTEXT],[ce.NAV,_.NAV],[ce.NOBR,_.NOBR],[ce.NOFRAMES,_.NOFRAMES],[ce.NOEMBED,_.NOEMBED],[ce.NOSCRIPT,_.NOSCRIPT],[ce.OBJECT,_.OBJECT],[ce.OL,_.OL],[ce.OPTGROUP,_.OPTGROUP],[ce.OPTION,_.OPTION],[ce.P,_.P],[ce.PARAM,_.PARAM],[ce.PLAINTEXT,_.PLAINTEXT],[ce.PRE,_.PRE],[ce.RB,_.RB],[ce.RP,_.RP],[ce.RT,_.RT],[ce.RTC,_.RTC],[ce.RUBY,_.RUBY],[ce.S,_.S],[ce.SCRIPT,_.SCRIPT],[ce.SEARCH,_.SEARCH],[ce.SECTION,_.SECTION],[ce.SELECT,_.SELECT],[ce.SOURCE,_.SOURCE],[ce.SMALL,_.SMALL],[ce.SPAN,_.SPAN],[ce.STRIKE,_.STRIKE],[ce.STRONG,_.STRONG],[ce.STYLE,_.STYLE],[ce.SUB,_.SUB],[ce.SUMMARY,_.SUMMARY],[ce.SUP,_.SUP],[ce.TABLE,_.TABLE],[ce.TBODY,_.TBODY],[ce.TEMPLATE,_.TEMPLATE],[ce.TEXTAREA,_.TEXTAREA],[ce.TFOOT,_.TFOOT],[ce.TD,_.TD],[ce.TH,_.TH],[ce.THEAD,_.THEAD],[ce.TITLE,_.TITLE],[ce.TR,_.TR],[ce.TRACK,_.TRACK],[ce.TT,_.TT],[ce.U,_.U],[ce.UL,_.UL],[ce.SVG,_.SVG],[ce.VAR,_.VAR],[ce.WBR,_.WBR],[ce.XMP,_.XMP]]);function Jl(t){var e;return(e=NY.get(t))!==null&&e!==void 0?e:_.UNKNOWN}const Re=_,RY={[Ce.HTML]:new Set([Re.ADDRESS,Re.APPLET,Re.AREA,Re.ARTICLE,Re.ASIDE,Re.BASE,Re.BASEFONT,Re.BGSOUND,Re.BLOCKQUOTE,Re.BODY,Re.BR,Re.BUTTON,Re.CAPTION,Re.CENTER,Re.COL,Re.COLGROUP,Re.DD,Re.DETAILS,Re.DIR,Re.DIV,Re.DL,Re.DT,Re.EMBED,Re.FIELDSET,Re.FIGCAPTION,Re.FIGURE,Re.FOOTER,Re.FORM,Re.FRAME,Re.FRAMESET,Re.H1,Re.H2,Re.H3,Re.H4,Re.H5,Re.H6,Re.HEAD,Re.HEADER,Re.HGROUP,Re.HR,Re.HTML,Re.IFRAME,Re.IMG,Re.INPUT,Re.LI,Re.LINK,Re.LISTING,Re.MAIN,Re.MARQUEE,Re.MENU,Re.META,Re.NAV,Re.NOEMBED,Re.NOFRAMES,Re.NOSCRIPT,Re.OBJECT,Re.OL,Re.P,Re.PARAM,Re.PLAINTEXT,Re.PRE,Re.SCRIPT,Re.SECTION,Re.SELECT,Re.SOURCE,Re.STYLE,Re.SUMMARY,Re.TABLE,Re.TBODY,Re.TD,Re.TEMPLATE,Re.TEXTAREA,Re.TFOOT,Re.TH,Re.THEAD,Re.TITLE,Re.TR,Re.TRACK,Re.UL,Re.WBR,Re.XMP]),[Ce.MATHML]:new Set([Re.MI,Re.MO,Re.MN,Re.MS,Re.MTEXT,Re.ANNOTATION_XML]),[Ce.SVG]:new Set([Re.TITLE,Re.FOREIGN_OBJECT,Re.DESC]),[Ce.XLINK]:new Set,[Ce.XML]:new Set,[Ce.XMLNS]:new Set},z1=new Set([Re.H1,Re.H2,Re.H3,Re.H4,Re.H5,Re.H6]);ce.STYLE,ce.SCRIPT,ce.XMP,ce.IFRAME,ce.NOEMBED,ce.NOFRAMES,ce.PLAINTEXT;var X;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(X||(X={}));const Nn={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function DY(t){return t>=G.DIGIT_0&&t<=G.DIGIT_9}function yh(t){return t>=G.LATIN_CAPITAL_A&&t<=G.LATIN_CAPITAL_Z}function OY(t){return t>=G.LATIN_SMALL_A&&t<=G.LATIN_SMALL_Z}function qa(t){return OY(t)||yh(t)}function Mx(t){return qa(t)||DY(t)}function a0(t){return t+32}function t3(t){return t===G.SPACE||t===G.LINE_FEED||t===G.TABULATION||t===G.FORM_FEED}function Px(t){return t3(t)||t===G.SOLIDUS||t===G.GREATER_THAN_SIGN}function kY(t){return t===G.NULL?Ee.nullCharacterReference:t>1114111?Ee.characterReferenceOutsideUnicodeRange:WR(t)?Ee.surrogateCharacterReference:JR(t)?Ee.noncharacterCharacterReference:ZR(t)||t===G.CARRIAGE_RETURN?Ee.controlCharacterReference:null}class LY{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new _Y(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new IY(bY,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ee.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(Ee.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=kY(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:mt.START_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:mt.END_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:mt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:mt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(e3(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ee.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Jl(e.tagName),e.type===mt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Ee.endTagWithAttributes),e.selfClosing&&this._err(Ee.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case mt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case mt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case mt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:mt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=t3(e)?mt.WHITESPACE_CHARACTER:e===G.NULL?mt.NULL_CHARACTER:mt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(mt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=X.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?aa.Attribute:aa.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case X.DATA:{this._stateData(e);break}case X.RCDATA:{this._stateRcdata(e);break}case X.RAWTEXT:{this._stateRawtext(e);break}case X.SCRIPT_DATA:{this._stateScriptData(e);break}case X.PLAINTEXT:{this._statePlaintext(e);break}case X.TAG_OPEN:{this._stateTagOpen(e);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case X.TAG_NAME:{this._stateTagName(e);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case X.BOGUS_COMMENT:{this._stateBogusComment(e);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case X.COMMENT_START:{this._stateCommentStart(e);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case X.COMMENT:{this._stateComment(e);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case X.COMMENT_END:{this._stateCommentEnd(e);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case X.DOCTYPE:{this._stateDoctype(e);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case X.CDATA_SECTION:{this._stateCdataSection(e);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitCodePoint(e);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case G.AMPERSAND:{this._startCharacterReference();break}case G.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(qa(e))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(e);else switch(e){case G.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case G.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case G.QUESTION_MARK:{this._err(Ee.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e);break}case G.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(qa(e))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(e);else switch(e){case G.GREATER_THAN_SIGN:{this._err(Ee.missingEndTagName),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.tagName+=mn;break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(yh(e)?a0(e):e)}}_stateRcdataLessThanSign(e){e===G.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){qa(e)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case G.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case G.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===G.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){qa(e)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case G.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case G.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){qa(e)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===G.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===G.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case G.HYPHEN_MINUS:{this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===G.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:qa(e)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){qa(e)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Kr.SCRIPT,!1)&&Px(this.preprocessor.peek(Kr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Kr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case G.HYPHEN_MINUS:{this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mn);break}case G.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===G.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Kr.SCRIPT,!1)&&Px(this.preprocessor.peek(Kr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Kr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.SOLIDUS:case G.GREATER_THAN_SIGN:case G.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case G.EQUALS_SIGN:{this._err(Ee.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:case G.SOLIDUS:case G.GREATER_THAN_SIGN:case G.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case G.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case G.QUOTATION_MARK:case G.APOSTROPHE:case G.LESS_THAN_SIGN:{this._err(Ee.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.name+=mn;break}default:this.currentAttr.name+=String.fromCodePoint(yh(e)?a0(e):e)}}_stateAfterAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case G.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case G.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=mn;break}case G.QUOTATION_MARK:case G.APOSTROPHE:case G.LESS_THAN_SIGN:case G.EQUALS_SIGN:case G.GRAVE_ACCENT:{this._err(Ee.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case G.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case G.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=mn;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Kr.DASH_DASH,!0)?(this._createCommentToken(Kr.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(Kr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Kr.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(Kr.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(Ee.cdataInHtmlContent),this._createCommentToken(Kr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ee.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case G.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=mn;break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case G.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case G.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===G.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===G.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==G.GREATER_THAN_SIGN&&e!==G.EOF&&this._err(Ee.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case G.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case G.HYPHEN_MINUS:{n.data+="-";break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case G.GREATER_THAN_SIGN:{this._err(Ee.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case G.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(yh(e))this._createDoctypeToken(String.fromCharCode(a0(e))),this.state=X.DOCTYPE_NAME;else switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.NULL:{this._err(Ee.unexpectedNullCharacter),this._createDoctypeToken(mn),this.state=X.DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.name+=mn;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(yh(e)?a0(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Kr.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Kr.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ee.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case G.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.QUOTATION_MARK:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case G.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=mn;break}case G.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.NULL:{this._err(Ee.unexpectedNullCharacter);break}case G.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case G.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case G.EOF:{this._err(Ee.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===G.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA;break}case G.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(G.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Mx(this.preprocessor.peek(1))?X.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){Mx(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===G.SEMICOLON&&this._err(Ee.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const n3=new Set([_.DD,_.DT,_.LI,_.OPTGROUP,_.OPTION,_.P,_.RB,_.RP,_.RT,_.RTC]),Bx=new Set([...n3,_.CAPTION,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]),im=new Set([_.APPLET,_.CAPTION,_.HTML,_.MARQUEE,_.OBJECT,_.TABLE,_.TD,_.TEMPLATE,_.TH]),MY=new Set([...im,_.OL,_.UL]),PY=new Set([...im,_.BUTTON]),Ux=new Set([_.ANNOTATION_XML,_.MI,_.MN,_.MO,_.MS,_.MTEXT]),Vx=new Set([_.DESC,_.FOREIGN_OBJECT,_.TITLE]),BY=new Set([_.TR,_.TEMPLATE,_.HTML]),UY=new Set([_.TBODY,_.TFOOT,_.THEAD,_.TEMPLATE,_.HTML]),VY=new Set([_.TABLE,_.TEMPLATE,_.HTML]),HY=new Set([_.TD,_.TH]);class FY{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=_.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===_.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ce.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ce.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(z1,Ce.HTML)}popUntilTableCellPopped(){this.popUntilPopped(HY,Ce.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(VY,Ce.HTML)}clearBackToTableBodyContext(){this.clearBackTo(UY,Ce.HTML)}clearBackToTableRowContext(){this.clearBackTo(BY,Ce.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===_.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===_.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Ce.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case Ce.SVG:{if(Vx.has(s))return!1;break}case Ce.MATHML:{if(Ux.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,im)}hasInListItemScope(e){return this.hasInDynamicScope(e,MY)}hasInButtonScope(e){return this.hasInDynamicScope(e,PY)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Ce.HTML:{if(z1.has(n))return!0;if(im.has(n))return!1;break}case Ce.SVG:{if(Vx.has(n))return!1;break}case Ce.MATHML:{if(Ux.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML)switch(this.tagIDs[n]){case e:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Ce.HTML)switch(this.tagIDs[e]){case _.TBODY:case _.THEAD:case _.TFOOT:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ce.HTML)switch(this.tagIDs[n]){case e:return!0;case _.OPTION:case _.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&n3.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&Bx.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&Bx.has(this.currentTagId);)this.pop()}}const Py=3;var xs;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(xs||(xs={}));const Hx={type:xs.Marker};class zY{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,o=this.treeAdapter.getTagName(e),u=this.treeAdapter.getNamespaceURI(e);for(let c=0;c<this.entries.length;c++){const d=this.entries[c];if(d.type===xs.Marker)break;const{element:f}=d;if(this.treeAdapter.getTagName(f)===o&&this.treeAdapter.getNamespaceURI(f)===u){const p=this.treeAdapter.getAttrList(f);p.length===s&&r.push({idx:c,attrs:p})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<Py)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<Py)return;const s=new Map(n.map(u=>[u.name,u.value]));let o=0;for(let u=0;u<r.length;u++){const c=r[u];c.attrs.every(d=>s.get(d.name)===d.value)&&(o+=1,o>=Py&&this.entries.splice(c.idx,1))}}insertMarker(){this.entries.unshift(Hx)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:xs.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:xs.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(Hx);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===xs.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===xs.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===xs.Element&&n.element===e)}}const Ya={createDocument(){return{nodeName:"#document",mode:Fi.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(o=>o.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const o={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Ya.appendChild(t,o)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Ya.isTextNode(n)){n.value+=e;return}}Ya.appendChild(t,Ya.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Ya.isTextNode(r)?r.value+=e:Ya.insertBefore(t,Ya.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},r3="html",jY="about:legacy-compat",qY="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",i3=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],YY=[...i3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],GY=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),s3=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],$Y=[...s3,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Fx(t,e){return e.some(n=>t.startsWith(n))}function KY(t){return t.name===r3&&t.publicId===null&&(t.systemId===null||t.systemId===jY)}function XY(t){if(t.name!==r3)return Fi.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===qY)return Fi.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),GY.has(n))return Fi.QUIRKS;let r=e===null?YY:i3;if(Fx(n,r))return Fi.QUIRKS;if(r=e===null?s3:$Y,Fx(n,r))return Fi.LIMITED_QUIRKS}return Fi.NO_QUIRKS}const zx={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},QY="definitionurl",WY="definitionURL",ZY=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),JY=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ce.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ce.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ce.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ce.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ce.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ce.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ce.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ce.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ce.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ce.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ce.XMLNS}]]),eG=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),tG=new Set([_.B,_.BIG,_.BLOCKQUOTE,_.BODY,_.BR,_.CENTER,_.CODE,_.DD,_.DIV,_.DL,_.DT,_.EM,_.EMBED,_.H1,_.H2,_.H3,_.H4,_.H5,_.H6,_.HEAD,_.HR,_.I,_.IMG,_.LI,_.LISTING,_.MENU,_.META,_.NOBR,_.OL,_.P,_.PRE,_.RUBY,_.S,_.SMALL,_.SPAN,_.STRONG,_.STRIKE,_.SUB,_.SUP,_.TABLE,_.TT,_.U,_.UL,_.VAR]);function nG(t){const e=t.tagID;return e===_.FONT&&t.attrs.some(({name:r})=>r===tu.COLOR||r===tu.SIZE||r===tu.FACE)||tG.has(e)}function a3(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===QY){t.attrs[e].name=WY;break}}function o3(t){for(let e=0;e<t.attrs.length;e++){const n=ZY.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function C_(t){for(let e=0;e<t.attrs.length;e++){const n=JY.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function rG(t){const e=eG.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=Jl(t.tagName))}function iG(t,e){return e===Ce.MATHML&&(t===_.MI||t===_.MO||t===_.MN||t===_.MS||t===_.MTEXT)}function sG(t,e,n){if(e===Ce.MATHML&&t===_.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===tu.ENCODING){const s=n[r].value.toLowerCase();return s===zx.TEXT_HTML||s===zx.APPLICATION_XML}}return e===Ce.SVG&&(t===_.FOREIGN_OBJECT||t===_.DESC||t===_.TITLE)}function aG(t,e,n,r){return(!r||r===Ce.HTML)&&sG(t,e,n)||(!r||r===Ce.MATHML)&&iG(t,e)}const oG="hidden",uG=8,lG=3;var W;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(W||(W={}));const cG={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},u3=new Set([_.TABLE,_.TBODY,_.TFOOT,_.THEAD,_.TR]),jx={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Ya,onParseError:null};class qx{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=W.INITIAL,this.originalInsertionMode=W.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...jx,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new LY(this.options,this),this.activeFormattingElements=new zY(this.treeAdapter),this.fragmentContextID=r?Jl(this.treeAdapter.getTagName(r)):_.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new FY(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...jx,...n};e??(e=r.treeAdapter.createElement(ce.TEMPLATE,Ce.HTML,[]));const s=r.treeAdapter.createElement("documentmock",Ce.HTML,[]),o=new this(r,s,e);return o.fragmentContextID===_.TEMPLATE&&o.tmplInsertionModeStack.unshift(W.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const o=(s=e.location)!==null&&s!==void 0?s:cG,u={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(u)}onItemPush(e,n,r){var s,o;(o=(s=this.treeAdapter).onItemPush)===null||o===void 0||o.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let o,u;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,u=this.fragmentContextID):{current:o,currentTagId:u}=this.openElements,this._setContextModes(o,u)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Ce.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Ce.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=W.TEXT}switchToPlaintextParsing(){this.insertionMode=W.TEXT,this.originalInsertionMode=W.IN_BODY,this.tokenizer.state=Nn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===ce.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ce.HTML))switch(this.fragmentContextID){case _.TITLE:case _.TEXTAREA:{this.tokenizer.state=Nn.RCDATA;break}case _.STYLE:case _.XMP:case _.IFRAME:case _.NOEMBED:case _.NOFRAMES:case _.NOSCRIPT:{this.tokenizer.state=Nn.RAWTEXT;break}case _.SCRIPT:{this.tokenizer.state=Nn.SCRIPT_DATA;break}case _.PLAINTEXT:{this.tokenizer.state=Nn.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const u=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));u&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Ce.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Ce.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(ce.HTML,Ce.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,_.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),o=r?s.lastIndexOf(r):s.length,u=s[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(u)){const{endLine:d,endCol:f,endOffset:p}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(u,{endLine:d,endCol:f,endOffset:p})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),o=n.type===mt.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,o)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===_.SVG&&this.treeAdapter.getTagName(n)===ce.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ce.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===_.MGLYPH||e.tagID===_.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Ce.HTML)}_processToken(e){switch(e.type){case mt.CHARACTER:{this.onCharacter(e);break}case mt.NULL_CHARACTER:{this.onNullCharacter(e);break}case mt.COMMENT:{this.onComment(e);break}case mt.DOCTYPE:{this.onDoctype(e);break}case mt.START_TAG:{this._processStartTag(e);break}case mt.END_TAG:{this.onEndTag(e);break}case mt.EOF:{this.onEof(e);break}case mt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return aG(e,s,o,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===xs.Marker||this.openElements.contains(s.element)),r=n===-1?e-1:n-1;for(let s=r;s>=0;s--){const o=this.activeFormattingElements.entries[s];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=W.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(_.P),this.openElements.popUntilTagNamePopped(_.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case _.TR:{this.insertionMode=W.IN_ROW;return}case _.TBODY:case _.THEAD:case _.TFOOT:{this.insertionMode=W.IN_TABLE_BODY;return}case _.CAPTION:{this.insertionMode=W.IN_CAPTION;return}case _.COLGROUP:{this.insertionMode=W.IN_COLUMN_GROUP;return}case _.TABLE:{this.insertionMode=W.IN_TABLE;return}case _.BODY:{this.insertionMode=W.IN_BODY;return}case _.FRAMESET:{this.insertionMode=W.IN_FRAMESET;return}case _.SELECT:{this._resetInsertionModeForSelect(e);return}case _.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case _.HTML:{this.insertionMode=this.headElement?W.AFTER_HEAD:W.BEFORE_HEAD;return}case _.TD:case _.TH:{if(e>0){this.insertionMode=W.IN_CELL;return}break}case _.HEAD:{if(e>0){this.insertionMode=W.IN_HEAD;return}break}}this.insertionMode=W.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===_.TEMPLATE)break;if(r===_.TABLE){this.insertionMode=W.IN_SELECT_IN_TABLE;return}}this.insertionMode=W.IN_SELECT}_isElementCausesFosterParenting(e){return u3.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case _.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ce.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case _.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return RY[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){H$(this,e);return}switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{Ch(this,e);break}case W.BEFORE_HEAD:{Nh(this,e);break}case W.IN_HEAD:{Rh(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Dh(this,e);break}case W.AFTER_HEAD:{Oh(this,e);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:{c3(this,e);break}case W.TEXT:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{By(this,e);break}case W.IN_TABLE_TEXT:{g3(this,e);break}case W.IN_COLUMN_GROUP:{sm(this,e);break}case W.AFTER_BODY:{am(this,e);break}case W.AFTER_AFTER_BODY:{A0(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){V$(this,e);return}switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{Ch(this,e);break}case W.BEFORE_HEAD:{Nh(this,e);break}case W.IN_HEAD:{Rh(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Dh(this,e);break}case W.AFTER_HEAD:{Oh(this,e);break}case W.TEXT:{this._insertCharacters(e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{By(this,e);break}case W.IN_COLUMN_GROUP:{sm(this,e);break}case W.AFTER_BODY:{am(this,e);break}case W.AFTER_AFTER_BODY:{A0(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){j1(this,e);return}switch(this.insertionMode){case W.INITIAL:case W.BEFORE_HTML:case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_TEMPLATE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{j1(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.AFTER_BODY:{yG(this,e);break}case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{EG(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case W.INITIAL:{_G(this,e);break}case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:{this._err(e,Ee.misplacedDoctype);break}case W.IN_TABLE_TEXT:{uh(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Ee.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?F$(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{bG(this,e);break}case W.BEFORE_HEAD:{vG(this,e);break}case W.IN_HEAD:{as(this,e);break}case W.IN_HEAD_NO_SCRIPT:{xG(this,e);break}case W.AFTER_HEAD:{IG(this,e);break}case W.IN_BODY:{Nr(this,e);break}case W.IN_TABLE:{Vl(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.IN_CAPTION:{A$(this,e);break}case W.IN_COLUMN_GROUP:{D_(this,e);break}case W.IN_TABLE_BODY:{qm(this,e);break}case W.IN_ROW:{Ym(this,e);break}case W.IN_CELL:{w$(this,e);break}case W.IN_SELECT:{_3(this,e);break}case W.IN_SELECT_IN_TABLE:{C$(this,e);break}case W.IN_TEMPLATE:{R$(this,e);break}case W.AFTER_BODY:{O$(this,e);break}case W.IN_FRAMESET:{k$(this,e);break}case W.AFTER_FRAMESET:{M$(this,e);break}case W.AFTER_AFTER_BODY:{B$(this,e);break}case W.AFTER_AFTER_FRAMESET:{U$(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?z$(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{TG(this,e);break}case W.BEFORE_HEAD:{AG(this,e);break}case W.IN_HEAD:{SG(this,e);break}case W.IN_HEAD_NO_SCRIPT:{wG(this,e);break}case W.AFTER_HEAD:{CG(this,e);break}case W.IN_BODY:{jm(this,e);break}case W.TEXT:{f$(this,e);break}case W.IN_TABLE:{ed(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.IN_CAPTION:{S$(this,e);break}case W.IN_COLUMN_GROUP:{x$(this,e);break}case W.IN_TABLE_BODY:{q1(this,e);break}case W.IN_ROW:{E3(this,e);break}case W.IN_CELL:{I$(this,e);break}case W.IN_SELECT:{b3(this,e);break}case W.IN_SELECT_IN_TABLE:{N$(this,e);break}case W.IN_TEMPLATE:{D$(this,e);break}case W.AFTER_BODY:{v3(this,e);break}case W.IN_FRAMESET:{L$(this,e);break}case W.AFTER_FRAMESET:{P$(this,e);break}case W.AFTER_AFTER_BODY:{A0(this,e);break}}}onEof(e){switch(this.insertionMode){case W.INITIAL:{oh(this,e);break}case W.BEFORE_HTML:{Ch(this,e);break}case W.BEFORE_HEAD:{Nh(this,e);break}case W.IN_HEAD:{Rh(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Dh(this,e);break}case W.AFTER_HEAD:{Oh(this,e);break}case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{m3(this,e);break}case W.TEXT:{m$(this,e);break}case W.IN_TABLE_TEXT:{uh(this,e);break}case W.IN_TEMPLATE:{T3(this,e);break}case W.AFTER_BODY:case W.IN_FRAMESET:case W.AFTER_FRAMESET:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{R_(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===G.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.TEXT:case W.IN_COLUMN_GROUP:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{this._insertCharacters(e);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:case W.AFTER_BODY:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{l3(this,e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{By(this,e);break}case W.IN_TABLE_TEXT:{p3(this,e);break}}}}function hG(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):f3(t,e),n}function dG(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function fG(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let o=0,u=s;u!==n;o++,u=s){s=t.openElements.getCommonAncestor(u);const c=t.activeFormattingElements.getElementEntry(u),d=c&&o>=lG;!c||d?(d&&t.activeFormattingElements.removeEntry(c),t.openElements.remove(u)):(u=mG(t,c),r===e&&(t.activeFormattingElements.bookmark=c),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(u,r),r=u)}return r}function mG(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function pG(t,e,n){const r=t.treeAdapter.getTagName(e),s=Jl(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const o=t.treeAdapter.getNamespaceURI(e);s===_.TEMPLATE&&o===Ce.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function gG(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,o=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,o),t.treeAdapter.appendChild(e,o),t.activeFormattingElements.insertElementAfterBookmark(o,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,o,s.tagID)}function N_(t,e){for(let n=0;n<uG;n++){const r=hG(t,e);if(!r)break;const s=dG(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const o=fG(t,s,r.element),u=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(o),u&&pG(t,u,o),gG(t,s,r)}}function j1(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function yG(t,e){t._appendCommentNode(e,t.openElements.items[0])}function EG(t,e){t._appendCommentNode(e,t.document)}function R_(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const o=t.openElements.items[1],u=t.treeAdapter.getNodeSourceCodeLocation(o);u&&!u.endTag&&t._setEndLocation(o,e)}}}}function _G(t,e){t._setDocumentType(e);const n=e.forceQuirks?Fi.QUIRKS:XY(e);KY(e)||t._err(e,Ee.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=W.BEFORE_HTML}function oh(t,e){t._err(e,Ee.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Fi.QUIRKS),t.insertionMode=W.BEFORE_HTML,t._processToken(e)}function bG(t,e){e.tagID===_.HTML?(t._insertElement(e,Ce.HTML),t.insertionMode=W.BEFORE_HEAD):Ch(t,e)}function TG(t,e){const n=e.tagID;(n===_.HTML||n===_.HEAD||n===_.BODY||n===_.BR)&&Ch(t,e)}function Ch(t,e){t._insertFakeRootElement(),t.insertionMode=W.BEFORE_HEAD,t._processToken(e)}function vG(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.HEAD:{t._insertElement(e,Ce.HTML),t.headElement=t.openElements.current,t.insertionMode=W.IN_HEAD;break}default:Nh(t,e)}}function AG(t,e){const n=e.tagID;n===_.HEAD||n===_.BODY||n===_.HTML||n===_.BR?Nh(t,e):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function Nh(t,e){t._insertFakeElement(ce.HEAD,_.HEAD),t.headElement=t.openElements.current,t.insertionMode=W.IN_HEAD,t._processToken(e)}function as(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:{t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.TITLE:{t._switchToTextParsing(e,Nn.RCDATA);break}case _.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Nn.RAWTEXT):(t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_HEAD_NO_SCRIPT);break}case _.NOFRAMES:case _.STYLE:{t._switchToTextParsing(e,Nn.RAWTEXT);break}case _.SCRIPT:{t._switchToTextParsing(e,Nn.SCRIPT_DATA);break}case _.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=W.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(W.IN_TEMPLATE);break}case _.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:Rh(t,e)}}function SG(t,e){switch(e.tagID){case _.HEAD:{t.openElements.pop(),t.insertionMode=W.AFTER_HEAD;break}case _.BODY:case _.BR:case _.HTML:{Rh(t,e);break}case _.TEMPLATE:{yu(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function yu(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==_.TEMPLATE&&t._err(e,Ee.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function Rh(t,e){t.openElements.pop(),t.insertionMode=W.AFTER_HEAD,t._processToken(e)}function xG(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.BASEFONT:case _.BGSOUND:case _.HEAD:case _.LINK:case _.META:case _.NOFRAMES:case _.STYLE:{as(t,e);break}case _.NOSCRIPT:{t._err(e,Ee.nestedNoscriptInHead);break}default:Dh(t,e)}}function wG(t,e){switch(e.tagID){case _.NOSCRIPT:{t.openElements.pop(),t.insertionMode=W.IN_HEAD;break}case _.BR:{Dh(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Dh(t,e){const n=e.type===mt.EOF?Ee.openElementsLeftAfterEof:Ee.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=W.IN_HEAD,t._processToken(e)}function IG(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.BODY:{t._insertElement(e,Ce.HTML),t.framesetOk=!1,t.insertionMode=W.IN_BODY;break}case _.FRAMESET:{t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_FRAMESET;break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{t._err(e,Ee.abandonedHeadElementChild),t.openElements.push(t.headElement,_.HEAD),as(t,e),t.openElements.remove(t.headElement);break}case _.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:Oh(t,e)}}function CG(t,e){switch(e.tagID){case _.BODY:case _.HTML:case _.BR:{Oh(t,e);break}case _.TEMPLATE:{yu(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Oh(t,e){t._insertFakeElement(ce.BODY,_.BODY),t.insertionMode=W.IN_BODY,zm(t,e)}function zm(t,e){switch(e.type){case mt.CHARACTER:{c3(t,e);break}case mt.WHITESPACE_CHARACTER:{l3(t,e);break}case mt.COMMENT:{j1(t,e);break}case mt.START_TAG:{Nr(t,e);break}case mt.END_TAG:{jm(t,e);break}case mt.EOF:{m3(t,e);break}}}function l3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function c3(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function NG(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function RG(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function DG(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_FRAMESET)}function OG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML)}function kG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&z1.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Ce.HTML)}function LG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function MG(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),n||(t.formElement=t.openElements.current))}function PG(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===_.LI&&s===_.LI||(n===_.DD||n===_.DT)&&(s===_.DD||s===_.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==_.ADDRESS&&s!==_.DIV&&s!==_.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML)}function BG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),t.tokenizer.state=Nn.PLAINTEXT}function UG(t,e){t.openElements.hasInScope(_.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.framesetOk=!1}function VG(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(ce.A);n&&(N_(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function HG(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function FG(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(_.NOBR)&&(N_(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Ce.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function zG(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function jG(t,e){t.treeAdapter.getDocumentMode(t.document)!==Fi.QUIRKS&&t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ce.HTML),t.framesetOk=!1,t.insertionMode=W.IN_TABLE}function h3(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ce.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function d3(t){const e=e3(t,tu.TYPE);return e!=null&&e.toLowerCase()===oG}function qG(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ce.HTML),d3(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function YG(t,e){t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0}function GG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._appendElement(e,Ce.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function $G(t,e){e.tagName=ce.IMG,e.tagID=_.IMG,h3(t,e)}function KG(t,e){t._insertElement(e,Ce.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Nn.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=W.TEXT}function XG(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Nn.RAWTEXT)}function QG(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Nn.RAWTEXT)}function Yx(t,e){t._switchToTextParsing(e,Nn.RAWTEXT)}function WG(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===W.IN_TABLE||t.insertionMode===W.IN_CAPTION||t.insertionMode===W.IN_TABLE_BODY||t.insertionMode===W.IN_ROW||t.insertionMode===W.IN_CELL?W.IN_SELECT_IN_TABLE:W.IN_SELECT}function ZG(t,e){t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML)}function JG(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Ce.HTML)}function e$(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(_.RTC),t._insertElement(e,Ce.HTML)}function t$(t,e){t._reconstructActiveFormattingElements(),a3(e),C_(e),e.selfClosing?t._appendElement(e,Ce.MATHML):t._insertElement(e,Ce.MATHML),e.ackSelfClosing=!0}function n$(t,e){t._reconstructActiveFormattingElements(),o3(e),C_(e),e.selfClosing?t._appendElement(e,Ce.SVG):t._insertElement(e,Ce.SVG),e.ackSelfClosing=!0}function Gx(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ce.HTML)}function Nr(t,e){switch(e.tagID){case _.I:case _.S:case _.B:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.SMALL:case _.STRIKE:case _.STRONG:{HG(t,e);break}case _.A:{VG(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{kG(t,e);break}case _.P:case _.DL:case _.OL:case _.UL:case _.DIV:case _.DIR:case _.NAV:case _.MAIN:case _.MENU:case _.ASIDE:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.DETAILS:case _.ADDRESS:case _.ARTICLE:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{OG(t,e);break}case _.LI:case _.DD:case _.DT:{PG(t,e);break}case _.BR:case _.IMG:case _.WBR:case _.AREA:case _.EMBED:case _.KEYGEN:{h3(t,e);break}case _.HR:{GG(t,e);break}case _.RB:case _.RTC:{JG(t,e);break}case _.RT:case _.RP:{e$(t,e);break}case _.PRE:case _.LISTING:{LG(t,e);break}case _.XMP:{XG(t,e);break}case _.SVG:{n$(t,e);break}case _.HTML:{NG(t,e);break}case _.BASE:case _.LINK:case _.META:case _.STYLE:case _.TITLE:case _.SCRIPT:case _.BGSOUND:case _.BASEFONT:case _.TEMPLATE:{as(t,e);break}case _.BODY:{RG(t,e);break}case _.FORM:{MG(t,e);break}case _.NOBR:{FG(t,e);break}case _.MATH:{t$(t,e);break}case _.TABLE:{jG(t,e);break}case _.INPUT:{qG(t,e);break}case _.PARAM:case _.TRACK:case _.SOURCE:{YG(t,e);break}case _.IMAGE:{$G(t,e);break}case _.BUTTON:{UG(t,e);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{zG(t,e);break}case _.IFRAME:{QG(t,e);break}case _.SELECT:{WG(t,e);break}case _.OPTION:case _.OPTGROUP:{ZG(t,e);break}case _.NOEMBED:case _.NOFRAMES:{Yx(t,e);break}case _.FRAMESET:{DG(t,e);break}case _.TEXTAREA:{KG(t,e);break}case _.NOSCRIPT:{t.options.scriptingEnabled?Yx(t,e):Gx(t,e);break}case _.PLAINTEXT:{BG(t,e);break}case _.COL:case _.TH:case _.TD:case _.TR:case _.HEAD:case _.FRAME:case _.TBODY:case _.TFOOT:case _.THEAD:case _.CAPTION:case _.COLGROUP:break;default:Gx(t,e)}}function r$(t,e){if(t.openElements.hasInScope(_.BODY)&&(t.insertionMode=W.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function i$(t,e){t.openElements.hasInScope(_.BODY)&&(t.insertionMode=W.AFTER_BODY,v3(t,e))}function s$(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function a$(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(_.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(_.FORM):n&&t.openElements.remove(n))}function o$(t){t.openElements.hasInButtonScope(_.P)||t._insertFakeElement(ce.P,_.P),t._closePElement()}function u$(t){t.openElements.hasInListItemScope(_.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(_.LI),t.openElements.popUntilTagNamePopped(_.LI))}function l$(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function c$(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function h$(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function d$(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(ce.BR,_.BR),t.openElements.pop(),t.framesetOk=!1}function f3(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const o=t.openElements.items[s],u=t.openElements.tagIDs[s];if(r===u&&(r!==_.UNKNOWN||t.treeAdapter.getTagName(o)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(o,u))break}}function jm(t,e){switch(e.tagID){case _.A:case _.B:case _.I:case _.S:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.NOBR:case _.SMALL:case _.STRIKE:case _.STRONG:{N_(t,e);break}case _.P:{o$(t);break}case _.DL:case _.UL:case _.OL:case _.DIR:case _.DIV:case _.NAV:case _.PRE:case _.MAIN:case _.MENU:case _.ASIDE:case _.BUTTON:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.ADDRESS:case _.ARTICLE:case _.DETAILS:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.LISTING:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{s$(t,e);break}case _.LI:{u$(t);break}case _.DD:case _.DT:{l$(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{c$(t);break}case _.BR:{d$(t);break}case _.BODY:{r$(t,e);break}case _.HTML:{i$(t,e);break}case _.FORM:{a$(t);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{h$(t,e);break}case _.TEMPLATE:{yu(t,e);break}default:f3(t,e)}}function m3(t,e){t.tmplInsertionModeStack.length>0?T3(t,e):R_(t,e)}function f$(t,e){var n;e.tagID===_.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function m$(t,e){t._err(e,Ee.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function By(t,e){if(t.openElements.currentTagId!==void 0&&u3.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=W.IN_TABLE_TEXT,e.type){case mt.CHARACTER:{g3(t,e);break}case mt.WHITESPACE_CHARACTER:{p3(t,e);break}}else vd(t,e)}function p$(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_CAPTION}function g$(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_COLUMN_GROUP}function y$(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.COLGROUP,_.COLGROUP),t.insertionMode=W.IN_COLUMN_GROUP,D_(t,e)}function E$(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_TABLE_BODY}function _$(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.TBODY,_.TBODY),t.insertionMode=W.IN_TABLE_BODY,qm(t,e)}function b$(t,e){t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function T$(t,e){d3(e)?t._appendElement(e,Ce.HTML):vd(t,e),e.ackSelfClosing=!0}function v$(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Ce.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function Vl(t,e){switch(e.tagID){case _.TD:case _.TH:case _.TR:{_$(t,e);break}case _.STYLE:case _.SCRIPT:case _.TEMPLATE:{as(t,e);break}case _.COL:{y$(t,e);break}case _.FORM:{v$(t,e);break}case _.TABLE:{b$(t,e);break}case _.TBODY:case _.TFOOT:case _.THEAD:{E$(t,e);break}case _.INPUT:{T$(t,e);break}case _.CAPTION:{p$(t,e);break}case _.COLGROUP:{g$(t,e);break}default:vd(t,e)}}function ed(t,e){switch(e.tagID){case _.TABLE:{t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode());break}case _.TEMPLATE:{yu(t,e);break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:vd(t,e)}}function vd(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,zm(t,e),t.fosterParentingEnabled=n}function p3(t,e){t.pendingCharacterTokens.push(e)}function g3(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function uh(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)vd(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const y3=new Set([_.CAPTION,_.COL,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]);function A$(t,e){const n=e.tagID;y3.has(n)?t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_TABLE,Vl(t,e)):Nr(t,e)}function S$(t,e){const n=e.tagID;switch(n){case _.CAPTION:case _.TABLE:{t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_TABLE,n===_.TABLE&&ed(t,e));break}case _.BODY:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:jm(t,e)}}function D_(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.COL:{t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.TEMPLATE:{as(t,e);break}default:sm(t,e)}}function x$(t,e){switch(e.tagID){case _.COLGROUP:{t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=W.IN_TABLE);break}case _.TEMPLATE:{yu(t,e);break}case _.COL:break;default:sm(t,e)}}function sm(t,e){t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=W.IN_TABLE,t._processToken(e))}function qm(t,e){switch(e.tagID){case _.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_ROW;break}case _.TH:case _.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(ce.TR,_.TR),t.insertionMode=W.IN_ROW,Ym(t,e);break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE,Vl(t,e));break}default:Vl(t,e)}}function q1(t,e){const n=e.tagID;switch(e.tagID){case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE);break}case _.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE,ed(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:case _.TR:break;default:ed(t,e)}}function Ym(t,e){switch(e.tagID){case _.TH:case _.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Ce.HTML),t.insertionMode=W.IN_CELL,t.activeFormattingElements.insertMarker();break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,qm(t,e));break}default:Vl(t,e)}}function E3(t,e){switch(e.tagID){case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY);break}case _.TABLE:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,q1(t,e));break}case _.TBODY:case _.TFOOT:case _.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(_.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,q1(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:break;default:ed(t,e)}}function w$(t,e){const n=e.tagID;y3.has(n)?(t.openElements.hasInTableScope(_.TD)||t.openElements.hasInTableScope(_.TH))&&(t._closeTableCell(),Ym(t,e)):Nr(t,e)}function I$(t,e){const n=e.tagID;switch(n){case _.TD:case _.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_ROW);break}case _.TABLE:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),E3(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:break;default:jm(t,e)}}function _3(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._insertElement(e,Ce.HTML);break}case _.OPTGROUP:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Ce.HTML);break}case _.HR:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.INPUT:case _.KEYGEN:case _.TEXTAREA:case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),e.tagID!==_.SELECT&&t._processStartTag(e));break}case _.SCRIPT:case _.TEMPLATE:{as(t,e);break}}}function b3(t,e){switch(e.tagID){case _.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===_.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===_.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop();break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop();break}case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode());break}case _.TEMPLATE:{yu(t,e);break}}}function C$(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t._processStartTag(e)):_3(t,e)}function N$(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t.onEndTag(e)):b3(t,e)}function R$(t,e){switch(e.tagID){case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{as(t,e);break}case _.CAPTION:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.tmplInsertionModeStack[0]=W.IN_TABLE,t.insertionMode=W.IN_TABLE,Vl(t,e);break}case _.COL:{t.tmplInsertionModeStack[0]=W.IN_COLUMN_GROUP,t.insertionMode=W.IN_COLUMN_GROUP,D_(t,e);break}case _.TR:{t.tmplInsertionModeStack[0]=W.IN_TABLE_BODY,t.insertionMode=W.IN_TABLE_BODY,qm(t,e);break}case _.TD:case _.TH:{t.tmplInsertionModeStack[0]=W.IN_ROW,t.insertionMode=W.IN_ROW,Ym(t,e);break}default:t.tmplInsertionModeStack[0]=W.IN_BODY,t.insertionMode=W.IN_BODY,Nr(t,e)}}function D$(t,e){e.tagID===_.TEMPLATE&&yu(t,e)}function T3(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):R_(t,e)}function O$(t,e){e.tagID===_.HTML?Nr(t,e):am(t,e)}function v3(t,e){var n;if(e.tagID===_.HTML){if(t.fragmentContext||(t.insertionMode=W.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===_.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else am(t,e)}function am(t,e){t.insertionMode=W.IN_BODY,zm(t,e)}function k$(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.FRAMESET:{t._insertElement(e,Ce.HTML);break}case _.FRAME:{t._appendElement(e,Ce.HTML),e.ackSelfClosing=!0;break}case _.NOFRAMES:{as(t,e);break}}}function L$(t,e){e.tagID===_.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==_.FRAMESET&&(t.insertionMode=W.AFTER_FRAMESET))}function M$(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.NOFRAMES:{as(t,e);break}}}function P$(t,e){e.tagID===_.HTML&&(t.insertionMode=W.AFTER_AFTER_FRAMESET)}function B$(t,e){e.tagID===_.HTML?Nr(t,e):A0(t,e)}function A0(t,e){t.insertionMode=W.IN_BODY,zm(t,e)}function U$(t,e){switch(e.tagID){case _.HTML:{Nr(t,e);break}case _.NOFRAMES:{as(t,e);break}}}function V$(t,e){e.chars=mn,t._insertCharacters(e)}function H$(t,e){t._insertCharacters(e),t.framesetOk=!1}function A3(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Ce.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function F$(t,e){if(nG(e))A3(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Ce.MATHML?a3(e):r===Ce.SVG&&(rG(e),o3(e)),C_(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function z$(t,e){if(e.tagID===_.P||e.tagID===_.BR){A3(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Ce.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}ce.AREA,ce.BASE,ce.BASEFONT,ce.BGSOUND,ce.BR,ce.COL,ce.EMBED,ce.FRAME,ce.HR,ce.IMG,ce.INPUT,ce.KEYGEN,ce.LINK,ce.META,ce.PARAM,ce.SOURCE,ce.TRACK,ce.WBR;const j$=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,q$=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),$x={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function S3(t,e){const n=eK(t),r=XR("type",{handlers:{root:Y$,element:G$,text:$$,comment:w3,doctype:K$,raw:Q$},unknown:W$}),s={parser:n?new qx($x):qx.getFragmentParser(void 0,$x),handle(c){r(c,s)},stitches:!1,options:e||{}};r(t,s),ec(s,Bs());const o=n?s.parser.document:s.parser.getFragment(),u=Yq(o,{file:s.options.file});return s.stitches&&A_(u,"comment",function(c,d,f){const p=c;if(p.value.stitch&&f&&d!==void 0){const y=f.children;return y[d]=p.value.stitch,d}}),u.type==="root"&&u.children.length===1&&u.children[0].type===t.type?u.children[0]:u}function x3(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function Y$(t,e){x3(t.children,e)}function G$(t,e){Z$(t,e),x3(t.children,e),J$(t,e)}function $$(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:mt.CHARACTER,chars:t.value,location:Ad(t)};ec(e,Bs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function K$(t,e){const n={type:mt.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Ad(t)};ec(e,Bs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function X$(t,e){e.stitches=!0;const n=tK(t);if("children"in t&&"children"in n){const r=S3({type:"root",children:t.children},e.options);n.children=r.children}w3({type:"comment",value:{stitch:n}},e)}function w3(t,e){const n=t.value,r={type:mt.COMMENT,data:n,location:Ad(t)};ec(e,Bs(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function Q$(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,I3(e,Bs(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(j$,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function W$(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))X$(n,e);else{let r="";throw q$.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function ec(t,e){I3(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Nn.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function I3(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function Z$(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Nn.PLAINTEXT)return;ec(e,Bs(t));const r=e.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:Jo.html;s===Jo.html&&n==="svg"&&(s=Jo.svg);const o=aY({...t,children:[]},{space:s===Jo.svg?"svg":"html"}),u={type:mt.START_TAG,tagName:n,tagID:Jl(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:Ad(t)};e.parser.currentToken=u,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function J$(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&mY.includes(n)||e.parser.tokenizer.state===Nn.PLAINTEXT)return;ec(e,Um(t));const r={type:mt.END_TAG,tagName:n,tagID:Jl(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Ad(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Nn.RCDATA||e.parser.tokenizer.state===Nn.RAWTEXT||e.parser.tokenizer.state===Nn.SCRIPT_DATA)&&(e.parser.tokenizer.state=Nn.DATA)}function eK(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Ad(t){const e=Bs(t)||{line:void 0,column:void 0,offset:void 0},n=Um(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function tK(t){return"children"in t?Ul({...t,children:[]}):Ul(t)}function nK(t){return function(e,n){return S3(e,{...t,file:n})}}function rK({explanation:t,onClose:e,isVisible:n}){return n?M.jsxs("div",{className:"h-full flex flex-col",children:[M.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[M.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[M.jsx("span",{className:"text-blue-500",children:""}),"Explanation"]}),M.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:e,title:"Close explanation","aria-label":"Close explanation sidebar",children:M.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:M.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),M.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:t?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"mb-6",children:M.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:t.title})}),M.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700`,children:M.jsx(Rq,{rehypePlugins:[nK],children:t.text})})]}):M.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"text-6xl mb-6 opacity-60",children:""}),M.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),M.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]}):null}const C3=re.createContext(void 0),iK=()=>{const t=re.useContext(C3);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},sK=({children:t})=>{const[e,n]=re.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});re.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return M.jsx(C3.Provider,{value:{theme:e,toggleTheme:r},children:t})},N3=()=>{const{theme:t,toggleTheme:e}=iK();return M.jsx("button",{onClick:e,className:`p-2.5 rounded-xl bg-gray-200/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 
                     hover:bg-gray-300/80 dark:hover:bg-gray-700/80 border border-gray-300/60 dark:border-gray-700/60
                     hover:border-gray-400/60 dark:hover:border-gray-600/60 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-indigo-500/30 dark:focus:ring-indigo-400/30
                     backdrop-blur-sm shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?M.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:M.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):M.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:M.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function aK({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=re.useState(!1),[u,c]=re.useState(t||"");re.useEffect(()=>{c(t||"")},[t]);const d=p=>{p.key==="Enter"&&(e(u),o(!1))},f=()=>{o(!0),c(t||"")};return M.jsx(M.Fragment,{children:M.jsx("div",{className:"name bg-gray-900 dark:bg-gray-950 border-b border-gray-700 dark:border-gray-800",children:M.jsx("div",{className:"app-container max-w-7xl mx-auto px-4",children:M.jsxs("header",{className:"app-header flex justify-between items-center py-4",children:[M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsxs("div",{className:"flex items-center space-x-2",children:[M.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:M.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),M.jsx("h1",{className:"text-xl font-bold text-white dark:text-white",children:"TinkFlow"})]}),M.jsx("span",{className:"text-slate-500 dark:text-slate-500 text-sm",children:""}),s?M.jsx("input",{type:"text",value:u,onChange:p=>c(p.target.value),onKeyDown:d,onBlur:()=>{e(u),o(!1)},className:`bg-gray-800 dark:bg-gray-800 border border-white/20 dark:border-white/20 
                                             rounded px-2 py-1 text-slate-100 dark:text-slate-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-400 dark:focus:border-blue-400`,autoFocus:!0}):M.jsx("button",{onClick:f,className:`bg-transparent border-none text-slate-400 dark:text-slate-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded transition-all duration-150 ease-in-out
                                             hover:bg-white/5 dark:hover:bg-white/5 hover:text-slate-100 dark:hover:text-slate-100`,children:t||"Untitled Board"})]}),M.jsxs("div",{className:"user-info flex items-center gap-3",children:[M.jsx(N3,{}),M.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),r&&M.jsxs("div",{className:`text-emerald-500 dark:text-emerald-400 text-sm flex items-center gap-2 
                                               bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-full border border-emerald-200 dark:border-emerald-700/50
                                               animate-pulse`,children:[M.jsx("div",{className:"w-2 h-2 bg-emerald-500 dark:bg-emerald-400 rounded-full animate-bounce"}),M.jsx("span",{className:"font-medium",children:"Saving..."})]})]})]})})})})}const oK=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return M.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",M.jsxs("div",{className:"flex items-start gap-3",children:[" ",M.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",M.jsxs("div",{className:"flex-1 min-w-0",children:[" ",M.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",M.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",M.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",M.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},uK=({notifications:t,onRemove:e})=>M.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>M.jsxs("div",{className:"pointer-events-auto",children:[" ",M.jsx(oK,{notification:n,onRemove:e})," "]},n.id))," "]});function lK({onLogin:t}){return M.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",M.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",M.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",M.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",M.jsxs("div",{className:"flex items-center space-x-3",children:[" ",M.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",M.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",M.jsxs("div",{className:"flex flex-col",children:[" ",M.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",M.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",M.jsxs("div",{className:"flex items-center gap-4",children:[" ",M.jsx(N3,{})," ",M.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",M.jsxs("section",{className:"relative overflow-hidden",children:[" ",M.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",M.jsxs("div",{className:"text-center",children:[" ",M.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",M.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",M.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",M.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",M.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",M.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",M.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",M.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",M.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",M.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",M.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",M.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",M.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",M.jsxs("div",{className:"text-center mb-16",children:[" ",M.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",M.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",M.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",M.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",M.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",M.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",M.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",M.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",M.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",M.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",M.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",M.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",M.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",M.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",M.jsxs("div",{className:"text-center mb-16",children:[" ",M.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",M.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",M.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",M.jsxs("div",{className:"text-center",children:[" ",M.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",M.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",M.jsxs("div",{className:"text-center",children:[" ",M.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",M.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",M.jsxs("div",{className:"text-center",children:[" ",M.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",M.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",M.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",M.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",M.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",M.jsxs("div",{className:"text-white",children:[" ",M.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",M.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",M.jsxs("div",{className:"text-white",children:[" ",M.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",M.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",M.jsxs("div",{className:"text-white",children:[" ",M.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",M.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",M.jsxs("div",{className:"text-white",children:[" ",M.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",M.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",M.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",M.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",M.jsxs("div",{className:"text-center mb-16",children:[" ",M.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",M.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",M.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",M.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",M.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",M.jsx("li",{children:" Research paper analysis"})," ",M.jsx("li",{children:" Concept mapping for exams"})," ",M.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",M.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",M.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",M.jsx("li",{children:" Idea generation workflows"})," ",M.jsx("li",{children:" Problem-solving frameworks"})," ",M.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",M.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",M.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",M.jsx("li",{children:" System architecture learning"})," ",M.jsx("li",{children:" Technology stack exploration"})," ",M.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",M.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",M.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",M.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",M.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",M.jsx("li",{children:" Skill gap analysis"})," ",M.jsx("li",{children:" Career pathway planning"})," ",M.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",M.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",M.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",M.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",M.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",M.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",M.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",M.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",M.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",M.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",M.jsxs("div",{className:"col-span-1",children:[" ",M.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",M.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",M.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",M.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",M.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",M.jsxs("div",{children:[" ",M.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",M.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",M.jsxs("div",{children:[" ",M.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",M.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",M.jsxs("div",{children:[" ",M.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",M.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",M.jsx("li",{children:M.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",M.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",M.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2024 TinkFlow. All rights reserved."," "]})," ",M.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",M.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",M.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",M.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",M.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",M.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",M.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",M.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",M.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",M.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const cK=async()=>{try{await PU(nm),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},hK=()=>{const[t,e]=re.useState(null);return re.useEffect(()=>{const r=MU(nm,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await cK(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},R3=t=>!!(t&&t.uid),kh=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],wl=[],dK=async t=>{if(!R3({uid:t}))throw new Error(Fr.AUTH_REQUIRED);try{const e=UE(is,vi.BOARDS),n=SB(e,xB("userId","==",t),wB("createdAt","desc")),r=await QE(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:ln.now(),isOpen:!0};return await WE(Gl(is,vi.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:ln.now(),isOpen:!0,isFallback:!0}]}throw new Error(Fr.LOAD_FAILED)}},Kx=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),kh;try{const e=UE(is,vi.BOARDS,t,vi.NODES),n=await QE(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),kh;const r=n.docs.map(s=>{const o=s.data(),u={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:u,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),kh}},Xx=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),wl;try{const e=UE(is,vi.BOARDS,t,vi.EDGES),n=await QE(e);if(n.empty)return console.log("No edges found for board, using initial edges"),wl;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),wl}},fK=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=yN(is);e.forEach(r=>{const s=Gl(is,vi.BOARDS,t,vi.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:ln.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(Fr.SAVE_FAILED)}},mK=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=yN(is);e.forEach(r=>{const s=Gl(is,vi.BOARDS,t,vi.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:ln.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(Fr.SAVE_FAILED)}},pK=async(t,e,n)=>{if(!R3({uid:t}))throw new Error(Fr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:ln.now(),isOpen:!1};return console.log("Creating board:",r),await WE(Gl(is,vi.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},gK=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await OB(Gl(is,vi.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},ol=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:ln.now()};await WE(Gl(is,vi.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},yK=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},EK=t=>Array.isArray(t)?t.map(yK):[],_K=(t,e={})=>{const[n,r,s]=$5([]),[o,u,c]=K5([]),[d,f]=re.useState(!0),[p,y]=re.useState(!1),[b,T]=re.useState(!1),[x,N]=re.useState([]),[k,D]=re.useState(null),z=re.useRef(null),{showSuccess:Y,showError:q,showInfo:ee}=e,$=I=>{const L=I.find(K=>K.isOpen===!0);if(L)return L;if(I.length>0){const K={...I[0],isOpen:!0};return ol(K.id,K).catch(console.error),K}return null};re.useEffect(()=>{(async()=>{if(t)try{f(!0);const L=await dK(t.uid);N(L);const K=L.some(te=>te.isFallback);K&&q&&q("Database index missing. Please create the required Firestore index. Check console for details.");const F=$(L);if(!F){console.error("No board found for user"),q&&q("No boards found. Creating a default board..."),r(kh),u(wl);return}D(F);const[Q,se]=await Promise.all([Kx(F.id),Xx(F.id)]);r(Q),u(se),ee&&!K&&ee("Board loaded successfully!")}catch(L){console.error("Error loading initial data:",L),q&&q("Failed to load board data. Using default board."),r(kh),u(wl)}finally{f(!1)}})()},[t,r,u]);const R=async(I,L,K)=>{z.current&&clearTimeout(z.current);const F=setTimeout(async()=>{try{T(!0);const Q=[];L&&L.length>0&&Q.push(fK(I,L)),K&&K.length>0&&Q.push(mK(I,K)),Q.length>0&&(await Promise.all(Q),console.log("Auto-save completed successfully"))}catch(Q){console.error("Auto-save failed:",Q),q&&q("Failed to save changes automatically")}finally{T(!1),z.current=null}},1e3);z.current=F};re.useEffect(()=>(!d&&k&&!p&&!k.isFallback&&R(k.id,n,o),()=>{z.current&&clearTimeout(z.current)}),[n,o,d,k,p]);const C=async I=>{try{if(k?.id===I)return;if(k?.isFallback||x.find(K=>K.id===I)?.isFallback){q&&q("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(y(!0),k&&!k.isFallback){const K={...k,isOpen:!1};await ol(k.id,K),N(F=>F.map(Q=>Q.id===k.id?K:Q))}const L=x.find(K=>K.id===I);if(L){const K={...L,isOpen:!0};await ol(I,K),D(K),N(te=>te.map(A=>A.id===I?K:A));const[F,Q]=await Promise.all([Kx(I),Xx(I)]),se=EK(F);r(se),u(Q),Y&&Y(`Switched to "${K.name}"`)}else console.error("Board not found:",I),q&&q("Board not found")}catch(L){console.error("Error switching board:",L),q&&q("Failed to switch board. Please try again.")}finally{y(!1)}};return{nodes:n,edges:o,allBoards:x,currentBoard:k,isLoading:d,isSwitchingBoard:p,isSaving:b,onNodesChange:s,onEdgesChange:c,setNodes:r,switchToBoard:C,createNewBoard:async I=>{try{if(!t)return q&&q("You must be logged in to create a board"),null;ee&&ee("Creating new board...");const L=await pK(t.uid,I||null,x);if(L){if(k&&!k.isFallback){const F={...k,isOpen:!1};ol(k.id,F).catch(console.error)}const K={...L,isOpen:!0};return N(F=>{const Q=F.map(se=>se.id===k?.id?{...se,isOpen:!1}:se);return[K,...Q]}),D(K),ol(L.id,K).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:I||"New Board"},position:{x:250,y:25},draggable:!1}]),u(wl),Y&&Y(`Board "${L.name}" created and opened!`),K}else return q&&q("Failed to create board. Please try again."),null}catch(L){return q&&q(`Failed to create board: ${L.message}`),null}},deleteBoard:async I=>{try{if(x.length<=1){q&&q("Cannot delete the last board!");return}if(!x.find(K=>K.id===I)){console.error("Board not found for deletion"),q&&q("Board not found");return}if(ee&&ee("Deleting board..."),k?.id===I){const K=x.find(F=>F.id!==I);K&&await C(K.id)}await gK(I),N(K=>K.filter(F=>F.id!==I)),Y&&Y("Board deleted successfully!")}catch(L){console.error("Error deleting board:",L),q&&q("Failed to delete board. Please try again.")}},updateBoardName:async I=>{if(k&&k.name!==I){const L={...k,name:I};D(L),N(K=>K.map(F=>F.id===k.id?L:F));try{await ol(k.id,L),console.log("Board name updated successfully")}catch(K){console.error("Error updating board name:",K)}}},clearBoardState:()=>{z.current&&(clearTimeout(z.current),z.current=null),N([]),D(null),r([]),u([]),f(!0),y(!1),T(!1)}}},bK=()=>{const[t,e]=re.useState([]),n=f=>{e(p=>p.filter(y=>y.id!==f))},r=f=>{const p=Date.now().toString(),y={id:p,timestamp:new Date,...f};return e(b=>[...b,y]),f.autoRemove!==!1&&setTimeout(()=>{n(p)},f.duration||5e3),p};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(f,p={})=>r({type:"success",message:f,...p}),showError:(f,p={})=>r({type:"error",message:f,duration:7e3,...p}),showInfo:(f,p={})=>r({type:"info",message:f,...p}),showWarning:(f,p={})=>r({type:"warning",message:f,duration:6e3,...p})}},D3=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(u=>u.trim()!=="").forEach(u=>{e.push({word:u.trim(),myConcept:s})})}return e},Qx=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},S0=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return(e*299+n*587+r*114)/1e3>=128?"#000000":"#ffffff"},x0=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const r=parseInt(n,16),s=255,o=e,u=r>>16,c=r>>8&255,d=r&255,f=Math.round((s-u)*o)+u,p=Math.round((s-c)*o)+c,y=Math.round((s-d)*o)+d;return`#${(16777216+f*65536+p*256+y).toString(16).slice(1)}`},TK=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,u=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),d=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(u).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}`},vK=t=>{const r=(Math.random()-.5)*150*2;return{x:t.x+r,y:t.y+200}},AK=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,SK=(t,e)=>`edge_${t}_${e}`,xK=(t,e,n,r,s,o,u)=>({id:AK(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:u}}),wK=(t,e,n,r)=>({id:SK(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Hh.ArrowClosed,color:n}}),Wx=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await tR(c_,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},IK=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const r=tR(c_,"groqChat");console.log("Starting streaming request...");const{stream:s,data:o}=await r.stream({message:n});console.log("Stream started, waiting for chunks...");let u="";for await(const d of s)if(console.log("Received chunk:",d),d&&typeof d=="object"&&"type"in d&&"content"in d){const f=d;console.log("Processing chunk:",f),f.type==="chunk"&&f.content&&(u+=f.content,e?.(f.content))}console.log("Waiting for final result...");const c=await o;return console.log("Final result received:",c),c&&typeof c=="object"&&"response"in c?(console.log("Returning final result response"),c.response):(console.log("Returning accumulated response:",u),u)}catch(n){throw console.error("Firebase function streaming error:",n),n}},CK=async(t,e,n)=>{try{const r=`You are an expert educator. Explain the following concept to a beginner.

        Context: ${e}

        Instructions:
        - Highlight every key term with [square-braces], e.g., [variable].
        - Use simple language and practical examples or analogies.
        - Use only correct HTML or MARKDOWN for all formatting (headings, lists, tables, images, code).
        - All HTML elements (including headings, lists, tables, images, code) MUST use inline CSS for styling.
        - For inline CSS, use: <span style="color:#fff;background:#222;padding:4px;border-radius:4px;">example</span>
        - For images: <img src="IMAGE_URL" alt="desc" style="max-width:100%;border-radius:8px;">
        - For code: <pre style="background:#222;color:#fff;padding:8px;border-radius:6px;"><code>console.log("Hello World");</code></pre>
        - For tables: <table style="border-collapse:collapse;width:100%;"><tr><th style="background:#222;color:#fff;padding:6px;">Header</th></tr><tr><td style="padding:6px;">Data</td></tr></table>
        - For lists: <ul style="padding-left:20px;"><li style="margin-bottom:4px;">Item 1</li></ul>
        - No introductions, conclusions, or extra commentary.
        - Start directly with the explanation.

        Concept: `,s=`Summarize in exactly 40 words or less.

        CRITICAL:
        - Preserve ALL [square-braces] concepts exactly
        - Every key concept MUST use [square-braces]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with summary content
        - ONLY the summary text

        Text to summarize: `,o=`You are an expert educator. Respond ONLY with a valid JSON object in the following format: {"topics": ["[concept1]", "[concept2]", "[concept3]"]}. 

        Instructions:
        - Suggest exactly 3 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON object.
        - Only output the JSON object as specified.

        Concept: `,u=Wx(r+t),c=Wx(o+t);let d="";const f=IK(s+t,D=>{d+=D,n(D)}),[p,y,b]=await Promise.all([u,c,f]);let T=y??"";T=T.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let x=[];const N=T.match(/"(.*?)"/g);N&&(x=N.map(D=>D.replace(/"/g,"")));const k={firstResponse:{response:p?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/```/g,"").replace(/markdown/g,"")},secondResponse:{response:b?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/Here is a summary of the text in exactly 40 words or less:/g,"").replace("/Here is a summary of the text in 40 words or less:/g","")},thirdResponse:{response:x}};return console.log("askAITwice response:",k),k}catch(r){throw console.error("Error in askAITwice:",r),r}},O3=re.createContext(null),NK=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,showExplanation:o})=>{const u=(c,d,f,p,y,b,T)=>{const x=e.find($=>$.id===d);if(!x)return null;const N=x.data.tokenColors||{},k=c.myConcept||c.word;if(N[k])return console.log(`Token "${k}" is already colored, ignoring click`),null;let D;p==="staticEditable"?D=Qx():D=y?TK(y):Qx();const z={...N};c.myConcept?z[c.myConcept]=D:z[c.word]=D,s($=>$.map(R=>R.id===d?{...R,data:{...R.data,tokenColors:z}}:R));const Y=vK(f),q=xK(Y,c.word,"Loading...","",D,p,d);q.data.isLoading=!0;const ee=wK(d,q.id,D,T);return n([{type:"add",item:q}]),r([{type:"add",item:ee}]),CK(c.word,b||"",$=>{s(R=>R.map(C=>{if(C.id===q.id){const O=C.data.summary||"";return{...C,data:{...C.data,label:O+$,summary:O+$}}}return C}))}).then($=>{const R=$.firstResponse?.response||c.word,C=$.secondResponse?.response||c.word,O=$.thirdResponse?.response||{};s(P=>P.map(U=>U.id===q.id?{...U,data:{...U.data,label:C,title:c.word,summary:C,full_text:R,suggestions:O,isLoading:!1}}:U))}).catch(()=>{s($=>$.map(R=>R.id===q.id?{...R,data:{...R.data,label:c.word,title:c.word,summary:c.word,full_text:c.word,suggestions:[],isLoading:!1}}:R))}),D};return M.jsx(O3.Provider,{value:{handleTokenClick:u,setNodes:s,showExplanation:o},children:t})},k3=()=>{const t=re.useContext(O3);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},L3=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return M.jsx("div",{className:"flex items-center justify-center",children:M.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function RK({data:t,id:e}){const[n,r]=re.useState(!1),[s,o]=re.useState(t.summary||t.label||"Static Node"),[u,c]=re.useState(!1),{handleTokenClick:d,showExplanation:f}=k3(),{getNode:p,setViewport:y}=sd();re.useEffect(()=>{n||o(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const b=D3(s),T=(C,O)=>{O.stopPropagation(),console.log("Static Token clicked:",C),d(C,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",C.suggestionId)},x=C=>{C.stopPropagation(),r(!0)},N=()=>{r(!1)},k=C=>{C.stopPropagation()},D=C=>{C.stopPropagation(),C.key==="Enter"&&N(),C.key==="Escape"&&(o(t.summary||t.label||"Static Node"),r(!1))},z=C=>{C.stopPropagation(),c(!u)},Y=C=>{C.stopPropagation(),f&&f(t.title||"Explanation",t.full_text||"No detailed information available.")},q=C=>{if(C.stopPropagation(),t.previousNode){const O=p(t.previousNode);if(O){const{x:P,y:U}=O.position;y({x:-P+200,y:-U+100,zoom:1},{duration:500})}}},ee=(()=>{const C=t.tokenColors||{};return b.map((O,P)=>{const U=O.myConcept||O.word,V=C[U],I=!V;return M.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                              ${I?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                              ${O.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:V||"transparent",color:V?t.myColor||"#ffffff":"inherit",border:V?`1px solid ${V}`:"",boxShadow:V?`0 0 0 1px ${V}25`:""},onClick:L=>I?T(O,L):L.stopPropagation(),children:[O.word,P<b.length-1?" ":""]},P)})})(),$=M.jsxs("div",{className:"node-buttons",children:[t.previousNode&&M.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:q,title:"Go to previous node",children:""}),b.length>5&&M.jsx("button",{className:"node-expand-btn",onClick:z,title:u?"Show less":"Show more",children:u?"":"+"}),M.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:Y,title:"Show full text",children:""})]}),R=re.useMemo(()=>t.isLoading?M.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[M.jsx(L3,{size:"small",color:t.myColor||"#6366f1"}),M.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):n?M.jsx("input",{type:"text",value:s,onChange:C=>o(C.target.value),onBlur:N,onKeyDown:D,onClick:k,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):M.jsxs("div",{className:"flex flex-col gap-3",children:[M.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[M.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),M.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&M.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                         hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:q,title:"Go to previous node",children:""}),b.length>5&&M.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:z,title:u?"Show less":"Show more",children:u?"":"+"}),M.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:Y,title:"Show full text",children:""})]})]}),M.jsx("div",{className:"flex-1",children:M.jsxs("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",onClick:x,children:[ee,b.length>5&&!u&&M.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),M.jsxs("div",{className:"mt-2",children:[M.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),M.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((C,O)=>{const U=(t.tokenColors||{})[C],V=!U;return M.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                  bg-white/5 border border-white/10 transition-all duration-200 
                                                  ${V?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:U||"transparent",color:U?t.myColor||"#ffffff":"inherit",border:U?`1px solid ${U}`:""},onClick:I=>V?T({word:C,myConcept:C,suggestionId:t.label+C+O},I):I.stopPropagation(),children:[C,O<t.suggestions.length-1?" ":"",M.jsx(Wr,{type:"source",position:ze.Right,id:t.label+C+O})]},O)}):M.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[n,s,u,b.length,x,N,D,k,ee,$]);return M.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       shadow-[0_14px_36px_rgba(0,0,0,0.6),0_2px_6px_rgba(0,0,0,0.8)] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2] 
                       hover:transform hover:scale-[1.03] hover:shadow-[0_14px_36px_rgba(0,0,0,0.6),0_4px_8px_rgba(0,0,0,0.8)]`,style:{backgroundColor:t.myColor,color:t.myColor?S0(t.myColor):"#f8faff",border:t.myColor?`1px solid ${x0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[M.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:R}),M.jsx(Wr,{type:"source",position:ze.Bottom,id:"bottom-source"}),M.jsx(Wr,{type:"target",position:ze.Bottom,id:"bottom-target"})]})}function DK({data:t,id:e}){const[n,r]=re.useState(!1),[s,o]=re.useState(t.summary||t.label||"Draggable Node"),[u,c]=re.useState(t.expanded||!1),{getNodes:d,getNode:f,setViewport:p}=sd(),{handleTokenClick:y,showExplanation:b}=k3();re.useEffect(()=>{n||o(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const T=D3(s),x=u||T.length<=5?T:T.slice(0,5),N=()=>!0,k=(P,U)=>{U.stopPropagation();const I=d().find(K=>K.id===e);return I?y(P,e,I.position,I.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},D=P=>{P.stopPropagation(),r(!0)},z=()=>{r(!1)},Y=P=>{P.stopPropagation()},q=P=>{P.stopPropagation(),P.key==="Enter"&&z(),P.key==="Escape"&&(o(t.summary||t.label||"Draggable Node"),r(!1))},ee=P=>{P.stopPropagation(),c(!u),!u&&t.onExpand&&t.onExpand()},$=P=>{P.stopPropagation(),b&&b(t.title,t.full_text||"No detailed information available.")},R=P=>{if(P.stopPropagation(),t.previousNode){const U=f(t.previousNode);if(U){const{x:V,y:I}=U.position;p({x:-V+200,y:-I+100,zoom:1},{duration:500})}}},C=re.useMemo(()=>{const P={};return x.forEach(U=>{const V=U.myConcept||U.word;P[V]||(P[V]=[]),P[V].push(U)}),P},[x]),O=re.useMemo(()=>n?M.jsx("input",{type:"text",value:s,onChange:P=>o(P.target.value),onBlur:z,onKeyDown:q,onClick:Y,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):M.jsxs(M.Fragment,{children:[t.isLoading&&M.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[M.jsx(L3,{size:"small",color:t.myColor||"#6366f1"}),M.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),M.jsxs("div",{className:"flex flex-col gap-3",children:[M.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[M.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),M.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&M.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:R,title:"Go to previous node",children:""}),T.length>5&&M.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                             hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:ee,title:u?"Show less":"Show more",children:u?"":"+"}),M.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:$,title:"Show full text",children:""})]})]}),M.jsx("div",{className:"flex-1",children:M.jsxs("div",{className:"cursor-text leading-relaxed break-words",onClick:D,children:[x.map((P,U)=>{const V=t.tokenColors||{},I=P.myConcept||P.word,L=V[I],K=!L;return M.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${K?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${P.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:L||"transparent",color:L?S0(L):"inherit",border:L?`1px solid ${x0(L,20)}`:"",boxShadow:L?`0 0 0 1px ${L}25`:""},onClick:F=>K?k(P,F):F.stopPropagation(),children:[P.word,U<x.length-1?" ":""]},U)}),T.length>5&&!u&&M.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),M.jsxs("div",{className:"mt-2",children:[M.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),M.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((P,U)=>{const I=(t.tokenColors||{})[P],L=!I;return M.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${L?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:I||"transparent",color:I?S0(I):"inherit",border:I?`1px solid ${x0(I,20)}`:""},onClick:K=>L?k({word:P,myConcept:P,suggestionId:t.label+P+U},K):K.stopPropagation(),children:[P,M.jsx(Wr,{type:"source",position:ze.Bottom,id:t.label+P+U})]},U)}):M.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,s,x,T,u,C,D,z,q,Y,ee,$,k,N,t.previousNode,R,t.tokenColors,t.myColor,t.isLoading]);return M.jsxs("div",{className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[450px] 
                       shadow-[0_10px_30px_rgba(0,0,0,0.5),0_1px_4px_rgba(0,0,0,0.7)] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px] hover:shadow-[0_12px_35px_rgba(0,0,0,0.6),0_2px_6px_rgba(0,0,0,0.8)] 
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?S0(t.myColor):"#f0f4f8",border:t.myColor?`1px solid ${x0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.12)"},children:[M.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:O}),M.jsx(Wr,{type:"source",position:ze.Bottom,id:"bottom-source"}),M.jsx(Wr,{type:"target",position:ze.Top,id:"top-target"}),M.jsx(Wr,{type:"source",position:ze.Left,id:"left-source"}),M.jsx(Wr,{type:"target",position:ze.Left,id:"left-target"}),M.jsx(Wr,{type:"source",position:ze.Right,id:"right-source"}),M.jsx(Wr,{type:"target",position:ze.Right,id:"right-target"})]})}const OK={staticEditable:RK,draggableEditable:DK};function kK(){const[t,e]=re.useState(!1),[n,r]=re.useState(!1),[s,o]=re.useState(450),[u,c]=re.useState(null),{user:d,signOut:f}=hK(),{notifications:p,removeNotification:y,showSuccess:b,showError:T,showInfo:x}=bK(),{nodes:N,edges:k,allBoards:D,currentBoard:z,isSwitchingBoard:Y,isSaving:q,onNodesChange:ee,onEdgesChange:$,setNodes:R,switchToBoard:C,createNewBoard:O,deleteBoard:P,updateBoardName:U,clearBoardState:V}=_K(d,{showSuccess:b,showError:T,showInfo:x}),I=async()=>{await f(),V()},L=()=>{r(!0)},K=(te,A)=>{c({title:te,text:A}),e(!0)},F=()=>{e(!1)},Q=te=>{o(te)},se=te=>{const A={id:`e${te.source}-${te.target}`,source:te.source,target:te.target,sourceHandle:te.sourceHandle,targetHandle:te.targetHandle};$([{type:"add",item:A}])};return d?M.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 app-layout",style:{height:"100vh",width:"100vw"},children:[M.jsx(uK,{notifications:p,onRemove:y}),M.jsxs("div",{style:{height:"100%",position:"relative"},children:[M.jsxs(ly,{defaultSizes:[280,1e3],children:[M.jsx(ly.Pane,{minSize:200,maxSize:500,children:M.jsx(EH,{allBoards:D,currentBoard:z,onSwitchBoard:C,onCreateBoard:async te=>{await O(te)},onDeleteBoard:P,onSignOut:I,isLoading:Y})}),M.jsx(ly.Pane,{children:M.jsxs("div",{className:"bg-white dark:bg-gray-800 main-content-pane",style:{height:"100%",position:"relative"},children:[M.jsx(aK,{name:z?.name||"Loading...",onSetName:U,user:d,isSaving:q}),M.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 reactflow-container",style:{height:"calc(100% - 56px)"},children:M.jsx(NK,{nodes:N,onNodesChange:ee,onEdgesChange:$,setNodes:R,showExplanation:K,children:M.jsxs(yI,{nodes:N,edges:k,onNodesChange:ee,onEdgesChange:$,onConnect:se,nodeTypes:OK,connectionMode:lo.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[M.jsx(tM,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg"}),M.jsx(oM,{variant:ji.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]})})})]})})]}),t&&M.jsx(M.Fragment,{children:M.jsxs("div",{className:`fixed top-4 right-4 h-[calc(100vh-2rem)] 
                                       bg-white/95 dark:bg-gray-800/95 backdrop-blur-xl
                                       border border-gray-200/50 dark:border-gray-700/50 
                                       rounded-3xl shadow-2xl z-50 
                                       animate-in slide-in-from-right-5 fade-in duration-300
                                       transition-all ease-out`,style:{width:`${s}px`,maxWidth:"50vw",minWidth:"420px",pointerEvents:"auto"},children:[M.jsx("div",{className:"absolute left-0 top-0 w-1 h-full cursor-ew-resize hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",style:{zIndex:1001},onMouseDown:te=>{te.preventDefault();const A=te.clientX,J=s,ae=ge=>{const Ne=A-ge.clientX,Ie=Math.max(420,Math.min(window.innerWidth*.5,J+Ne));Q(Ie)},B=()=>{document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",B),document.body.style.cursor="default",document.body.style.userSelect="auto"};document.addEventListener("mousemove",ae),document.addEventListener("mouseup",B),document.body.style.cursor="ew-resize",document.body.style.userSelect="none"}}),M.jsx("div",{className:"h-full rounded-3xl overflow-hidden bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:M.jsx(rK,{explanation:u,onClose:F,isVisible:t})})]})})]})]}):n?M.jsx(gH,{}):M.jsx(lK,{onLogin:L})}function LK(){return M.jsx(sK,{children:M.jsx(kK,{})})}const M3=document.getElementById("root");if(!M3)throw new Error("Failed to find the root element");m4.createRoot(M3).render(M.jsx(re.StrictMode,{children:M.jsx(LK,{})}));
