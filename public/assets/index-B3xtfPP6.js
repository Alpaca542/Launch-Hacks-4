(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function kw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fm={exports:{}},Eu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function eI(){if(tE)return Eu;tE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Eu.Fragment=t,Eu.jsx=n,Eu.jsxs=n,Eu}var eE;function nI(){return eE||(eE=1,fm.exports=eI()),fm.exports}var Ge=nI(),hm={exports:{}},Vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function iI(){if(nE)return Vt;nE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function w(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,L={};function k(N,j,nt){this.props=N,this.context=j,this.refs=L,this.updater=nt||S}k.prototype.isReactComponent={},k.prototype.setState=function(N,j){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,j,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=k.prototype;function G(N,j,nt){this.props=N,this.context=j,this.refs=L,this.updater=nt||S}var Q=G.prototype=new B;Q.constructor=G,O(Q,k.prototype),Q.isPureReactComponent=!0;var q=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},rt=Object.prototype.hasOwnProperty;function M(N,j,nt,st,ct,pt){return nt=pt.ref,{$$typeof:e,type:N,key:j,ref:nt!==void 0?nt:null,props:pt}}function b(N,j){return M(N.type,j,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function V(N){var j={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(nt){return j[nt]})}var P=/\/+/g;function U(N,j){return typeof N=="object"&&N!==null&&N.key!=null?V(""+N.key):j.toString(36)}function x(){}function D(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(x,x):(N.status="pending",N.then(function(j){N.status==="pending"&&(N.status="fulfilled",N.value=j)},function(j){N.status==="pending"&&(N.status="rejected",N.reason=j)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function $(N,j,nt,st,ct){var pt=typeof N;(pt==="undefined"||pt==="boolean")&&(N=null);var yt=!1;if(N===null)yt=!0;else switch(pt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(N.$$typeof){case e:case t:yt=!0;break;case y:return yt=N._init,$(yt(N._payload),j,nt,st,ct)}}if(yt)return ct=ct(N),yt=st===""?"."+U(N,0):st,q(ct)?(nt="",yt!=null&&(nt=yt.replace(P,"$&/")+"/"),$(ct,j,nt,"",function(Qt){return Qt})):ct!=null&&(R(ct)&&(ct=b(ct,nt+(ct.key==null||N&&N.key===ct.key?"":(""+ct.key).replace(P,"$&/")+"/")+yt)),j.push(ct)),1;yt=0;var xt=st===""?".":st+":";if(q(N))for(var St=0;St<N.length;St++)st=N[St],pt=xt+U(st,St),yt+=$(st,j,nt,pt,ct);else if(St=w(N),typeof St=="function")for(N=St.call(N),St=0;!(st=N.next()).done;)st=st.value,pt=xt+U(st,St++),yt+=$(st,j,nt,pt,ct);else if(pt==="object"){if(typeof N.then=="function")return $(D(N),j,nt,st,ct);throw j=String(N),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return yt}function C(N,j,nt){if(N==null)return N;var st=[],ct=0;return $(N,st,"","",function(pt){return j.call(nt,pt,ct++)}),st}function F(N){if(N._status===-1){var j=N._result;j=j(),j.then(function(nt){(N._status===0||N._status===-1)&&(N._status=1,N._result=nt)},function(nt){(N._status===0||N._status===-1)&&(N._status=2,N._result=nt)}),N._status===-1&&(N._status=0,N._result=j)}if(N._status===1)return N._result.default;throw N._result}var J=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Y(){}return Vt.Children={map:C,forEach:function(N,j,nt){C(N,function(){j.apply(this,arguments)},nt)},count:function(N){var j=0;return C(N,function(){j++}),j},toArray:function(N){return C(N,function(j){return j})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Vt.Component=k,Vt.Fragment=n,Vt.Profiler=a,Vt.PureComponent=G,Vt.StrictMode=r,Vt.Suspense=g,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return X.H.useMemoCache(N)}},Vt.cache=function(N){return function(){return N.apply(null,arguments)}},Vt.cloneElement=function(N,j,nt){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var st=O({},N.props),ct=N.key,pt=void 0;if(j!=null)for(yt in j.ref!==void 0&&(pt=void 0),j.key!==void 0&&(ct=""+j.key),j)!rt.call(j,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&j.ref===void 0||(st[yt]=j[yt]);var yt=arguments.length-2;if(yt===1)st.children=nt;else if(1<yt){for(var xt=Array(yt),St=0;St<yt;St++)xt[St]=arguments[St+2];st.children=xt}return M(N.type,ct,void 0,void 0,pt,st)},Vt.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Vt.createElement=function(N,j,nt){var st,ct={},pt=null;if(j!=null)for(st in j.key!==void 0&&(pt=""+j.key),j)rt.call(j,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(ct[st]=j[st]);var yt=arguments.length-2;if(yt===1)ct.children=nt;else if(1<yt){for(var xt=Array(yt),St=0;St<yt;St++)xt[St]=arguments[St+2];ct.children=xt}if(N&&N.defaultProps)for(st in yt=N.defaultProps,yt)ct[st]===void 0&&(ct[st]=yt[st]);return M(N,pt,void 0,void 0,null,ct)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(N){return{$$typeof:d,render:N}},Vt.isValidElement=R,Vt.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:F}},Vt.memo=function(N,j){return{$$typeof:m,type:N,compare:j===void 0?null:j}},Vt.startTransition=function(N){var j=X.T,nt={};X.T=nt;try{var st=N(),ct=X.S;ct!==null&&ct(nt,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(Y,J)}catch(pt){J(pt)}finally{X.T=j}},Vt.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Vt.use=function(N){return X.H.use(N)},Vt.useActionState=function(N,j,nt){return X.H.useActionState(N,j,nt)},Vt.useCallback=function(N,j){return X.H.useCallback(N,j)},Vt.useContext=function(N){return X.H.useContext(N)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(N,j){return X.H.useDeferredValue(N,j)},Vt.useEffect=function(N,j,nt){var st=X.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(N,j)},Vt.useId=function(){return X.H.useId()},Vt.useImperativeHandle=function(N,j,nt){return X.H.useImperativeHandle(N,j,nt)},Vt.useInsertionEffect=function(N,j){return X.H.useInsertionEffect(N,j)},Vt.useLayoutEffect=function(N,j){return X.H.useLayoutEffect(N,j)},Vt.useMemo=function(N,j){return X.H.useMemo(N,j)},Vt.useOptimistic=function(N,j){return X.H.useOptimistic(N,j)},Vt.useReducer=function(N,j,nt){return X.H.useReducer(N,j,nt)},Vt.useRef=function(N){return X.H.useRef(N)},Vt.useState=function(N){return X.H.useState(N)},Vt.useSyncExternalStore=function(N,j,nt){return X.H.useSyncExternalStore(N,j,nt)},Vt.useTransition=function(){return X.H.useTransition()},Vt.version="19.1.0",Vt}var iE;function ic(){return iE||(iE=1,hm.exports=iI()),hm.exports}var et=ic();const gt=kw(et);var dm={exports:{}},Tu={},gm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function rI(){return rE||(rE=1,function(e){function t(C,F){var J=C.length;C.push(F);t:for(;0<J;){var Y=J-1>>>1,N=C[Y];if(0<a(N,F))C[Y]=F,C[J]=N,J=Y;else break t}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var F=C[0],J=C.pop();if(J!==F){C[0]=J;t:for(var Y=0,N=C.length,j=N>>>1;Y<j;){var nt=2*(Y+1)-1,st=C[nt],ct=nt+1,pt=C[ct];if(0>a(st,J))ct<N&&0>a(pt,st)?(C[Y]=pt,C[ct]=J,Y=ct):(C[Y]=st,C[nt]=J,Y=nt);else if(ct<N&&0>a(pt,J))C[Y]=pt,C[ct]=J,Y=ct;else break t}}return F}function a(C,F){var J=C.sortIndex-F.sortIndex;return J!==0?J:C.id-F.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],m=[],y=1,v=null,w=3,S=!1,O=!1,L=!1,k=!1,B=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function q(C){for(var F=n(m);F!==null;){if(F.callback===null)r(m);else if(F.startTime<=C)r(m),F.sortIndex=F.expirationTime,t(g,F);else break;F=n(m)}}function X(C){if(L=!1,q(C),!O)if(n(g)!==null)O=!0,rt||(rt=!0,U());else{var F=n(m);F!==null&&$(X,F.startTime-C)}}var rt=!1,M=-1,b=5,R=-1;function V(){return k?!0:!(e.unstable_now()-R<b)}function P(){if(k=!1,rt){var C=e.unstable_now();R=C;var F=!0;try{t:{O=!1,L&&(L=!1,G(M),M=-1),S=!0;var J=w;try{e:{for(q(C),v=n(g);v!==null&&!(v.expirationTime>C&&V());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,w=v.priorityLevel;var N=Y(v.expirationTime<=C);if(C=e.unstable_now(),typeof N=="function"){v.callback=N,q(C),F=!0;break e}v===n(g)&&r(g),q(C)}else r(g);v=n(g)}if(v!==null)F=!0;else{var j=n(m);j!==null&&$(X,j.startTime-C),F=!1}}break t}finally{v=null,w=J,S=!1}F=void 0}}finally{F?U():rt=!1}}}var U;if(typeof Q=="function")U=function(){Q(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,D=x.port2;x.port1.onmessage=P,U=function(){D.postMessage(null)}}else U=function(){B(P,0)};function $(C,F){M=B(function(){C(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(C){switch(w){case 1:case 2:case 3:var F=3;break;default:F=w}var J=w;w=F;try{return C()}finally{w=J}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(C,F){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var J=w;w=C;try{return F()}finally{w=J}},e.unstable_scheduleCallback=function(C,F,J){var Y=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Y+J:Y):J=Y,C){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=J+N,C={id:y++,callback:F,priorityLevel:C,startTime:J,expirationTime:N,sortIndex:-1},J>Y?(C.sortIndex=J,t(m,C),n(g)===null&&C===n(m)&&(L?(G(M),M=-1):L=!0,$(X,J-Y))):(C.sortIndex=N,t(g,C),O||S||(O=!0,rt||(rt=!0,U()))),C},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(C){var F=w;return function(){var J=w;w=F;try{return C.apply(this,arguments)}finally{w=J}}}}(mm)),mm}var sE;function sI(){return sE||(sE=1,gm.exports=rI()),gm.exports}var pm={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function aI(){if(aE)return gn;aE=1;var e=ic();function t(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:m,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gn.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(g,m,null,y)},gn.flushSync=function(g){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=m,r.p=y,r.d.f()}},gn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(g,m))},gn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},gn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:S}):y==="script"&&r.d.X(g,{crossOrigin:v,integrity:w,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},gn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(g)},gn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=d(y,m.crossOrigin);r.d.L(g,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},gn.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(g)},gn.requestFormReset=function(g){r.d.r(g)},gn.unstable_batchedUpdates=function(g,m){return g(m)},gn.useFormState=function(g,m,y){return c.H.useFormState(g,m,y)},gn.useFormStatus=function(){return c.H.useHostTransitionStatus()},gn.version="19.1.0",gn}var oE;function Pw(){if(oE)return pm.exports;oE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pm.exports=aI(),pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function oI(){if(lE)return Tu;lE=1;var e=sI(),t=ic(),n=Pw();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return d(h),i;if(p===u)return d(h),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=h,u=p;else{for(var T=!1,A=h.child;A;){if(A===o){T=!0,o=h,u=p;break}if(A===u){T=!0,u=h,o=p;break}A=A.sibling}if(!T){for(A=p.child;A;){if(A===o){T=!0,o=p,u=h;break}if(A===u){T=!0,u=p,o=h;break}A=A.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),G=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var x=Symbol.for("react.client.reference");function D(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===x?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case k:return"Profiler";case L:return"StrictMode";case X:return"Suspense";case rt:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case Q:return(i.displayName||"Context")+".Provider";case G:return(i._context.displayName||"Context")+".Consumer";case q:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return s=i.displayName||null,s!==null?s:D(i.type)||"Memo";case b:s=i._payload,i=i._init;try{return D(i(s))}catch{}}return null}var $=Array.isArray,C=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Y=[],N=-1;function j(i){return{current:i}}function nt(i){0>N||(i.current=Y[N],Y[N]=null,N--)}function st(i,s){N++,Y[N]=i.current,i.current=s}var ct=j(null),pt=j(null),yt=j(null),xt=j(null);function St(i,s){switch(st(yt,s),st(pt,i),st(ct,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?C0(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=C0(s),i=N0(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}nt(ct),st(ct,i)}function Qt(){nt(ct),nt(pt),nt(yt)}function Gt(i){i.memoizedState!==null&&st(xt,i);var s=ct.current,o=N0(s,i.type);s!==o&&(st(pt,i),st(ct,o))}function Se(i){pt.current===i&&(nt(ct),nt(pt)),xt.current===i&&(nt(xt),mu._currentValue=J)}var Ne=Object.prototype.hasOwnProperty,Ue=e.unstable_scheduleCallback,xe=e.unstable_cancelCallback,fe=e.unstable_shouldYield,vn=e.unstable_requestPaint,Lt=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,ze=e.unstable_ImmediatePriority,Cn=e.unstable_UserBlockingPriority,Ln=e.unstable_NormalPriority,Pi=e.unstable_LowPriority,Un=e.unstable_IdlePriority,En=e.log,Ti=e.unstable_setDisableYieldValue,Jt=null,Bt=null;function De(i){if(typeof En=="function"&&Ti(i),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Jt,i)}catch{}}var me=Math.clz32?Math.clz32:Ke,Li=Math.log,Oe=Math.LN2;function Ke(i){return i>>>=0,i===0?32:31-(Li(i)/Oe|0)|0}var Tn=256,wn=4194304;function Xe(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function nn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var h=0,p=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?h=Xe(u):(T&=A,T!==0?h=Xe(T):o||(o=A&~i,o!==0&&(h=Xe(o))))):(A=u&~p,A!==0?h=Xe(A):T!==0?h=Xe(T):o||(o=u&~i,o!==0&&(h=Xe(o)))),h===0?0:s!==0&&s!==h&&(s&p)===0&&(p=h&-h,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:h}function Sn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function hr(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dr(){var i=Tn;return Tn<<=1,(Tn&4194048)===0&&(Tn=256),i}function wi(){var i=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),i}function zn(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function ei(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Bn(i,s,o,u,h,p){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var A=i.entanglements,z=i.expirationTimes,tt=i.hiddenUpdates;for(o=T&~o;0<o;){var lt=31-me(o),ft=1<<lt;A[lt]=0,z[lt]=-1;var it=tt[lt];if(it!==null)for(tt[lt]=null,lt=0;lt<it.length;lt++){var at=it[lt];at!==null&&(at.lane&=-536870913)}o&=~ft}u!==0&&ni(i,u,0),p!==0&&h===0&&i.tag!==0&&(i.suspendedLanes|=p&~(T&~s))}function ni(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-me(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&4194090}function Ks(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-me(o),h=1<<u;h&s|i[u]&s&&(i[u]|=s),o&=~h}}function Ui(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Kr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function zi(){var i=F.p;return i!==0?i:(i=window.event,i===void 0?32:K0(i.type))}function Fa(i,s){var o=F.p;try{return F.p=i,s()}finally{F.p=o}}var ue=Math.random().toString(36).slice(2),Ae="__reactFiber$"+ue,ve="__reactProps$"+ue,Nn="__reactContainer$"+ue,Xs="__reactEvents$"+ue,Tl="__reactListeners$"+ue,Bi="__reactHandles$"+ue,ja="__reactResources$"+ue,gr="__reactMarker$"+ue;function Hi(i){delete i[Ae],delete i[ve],delete i[Xs],delete i[Tl],delete i[Bi]}function ii(i){var s=i[Ae];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Nn]||o[Ae]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=M0(i);i!==null;){if(o=i[Ae])return o;i=M0(i)}return s}i=o,o=i.parentNode}return null}function ri(i){if(i=i[Ae]||i[Nn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function si(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function rn(i){var s=i[ja];return s||(s=i[ja]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function pe(i){i[gr]=!0}var Qs=new Set,Xr={};function Hn(i,s){Si(i,s),Si(i+"Capture",s)}function Si(i,s){for(Xr[i]=s,i=0;i<s.length;i++)Qs.add(s[i])}var Zs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ga={},mr={};function $a(i){return Ne.call(mr,i)?!0:Ne.call(Ga,i)?!1:Zs.test(i)?mr[i]=!0:(Ga[i]=!0,!1)}function qi(i,s,o){if($a(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function ai(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Be(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}var Fi,Ya;function Ai(i){if(Fi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Fi=s&&s[1]||"",Ya=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fi+i+Ya}var Qr=!1;function ji(i,s){if(!i||Qr)return"";Qr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(at){var it=at}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(at){it=at}i.call(ft.prototype)}}else{try{throw Error()}catch(at){it=at}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(at){if(at&&it&&typeof at.stack=="string")return[at.stack,it.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],A=p[1];if(T&&A){var z=T.split(`
`),tt=A.split(`
`);for(h=u=0;u<z.length&&!z[u].includes("DetermineComponentFrameRoot");)u++;for(;h<tt.length&&!tt[h].includes("DetermineComponentFrameRoot");)h++;if(u===z.length||h===tt.length)for(u=z.length-1,h=tt.length-1;1<=u&&0<=h&&z[u]!==tt[h];)h--;for(;1<=u&&0<=h;u--,h--)if(z[u]!==tt[h]){if(u!==1||h!==1)do if(u--,h--,0>h||z[u]!==tt[h]){var lt=`
`+z[u].replace(" at new "," at ");return i.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",i.displayName)),lt}while(1<=u&&0<=h);break}}}finally{Qr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ai(o):""}function wl(i){switch(i.tag){case 26:case 27:case 5:return Ai(i.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return ji(i.type,!1);case 11:return ji(i.type.render,!1);case 1:return ji(i.type,!0);case 31:return Ai("Activity");default:return""}}function Ka(i){try{var s="";do s+=wl(i),i=i.return;while(i);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function An(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sl(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function md(i){var s=Sl(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),u=""+i[s];if(!i.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return h.call(this)},set:function(T){u=""+T,p.call(this,T)}}),Object.defineProperty(i,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Xa(i){i._valueTracker||(i._valueTracker=md(i))}function Al(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Sl(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function Ws(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var pd=/[\n"\\]/g;function Me(i){return i.replace(pd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function qn(i,s,o,u,h,p,T,A){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+An(s)):i.value!==""+An(s)&&(i.value=""+An(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?Zr(i,T,An(s)):o!=null?Zr(i,T,An(o)):u!=null&&i.removeAttribute("value"),h==null&&p!=null&&(i.defaultChecked=!!p),h!=null&&(i.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+An(A):i.removeAttribute("name")}function Js(i,s,o,u,h,p,T,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+An(o):"",s=s!=null?""+An(s):o,A||s===i.value||(i.value=s),i.defaultValue=s}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=A?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Zr(i,s,o){s==="number"&&Ws(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function pr(i,s,o,u){if(i=i.options,s){s={};for(var h=0;h<o.length;h++)s["$"+o[h]]=!0;for(o=0;o<i.length;o++)h=s.hasOwnProperty("$"+i[o].value),i[o].selected!==h&&(i[o].selected=h),h&&u&&(i[o].defaultSelected=!0)}else{for(o=""+An(o),s=null,h=0;h<i.length;h++){if(i[h].value===o){i[h].selected=!0,u&&(i[h].defaultSelected=!0);return}s!==null||i[h].disabled||(s=i[h])}s!==null&&(s.selected=!0)}}function re(i,s,o){if(s!=null&&(s=""+An(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+An(o):""}function ta(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if($(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=An(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u)}function oi(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var ea=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vc(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||ea.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function bl(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var h in s)u=s[h],s.hasOwnProperty(h)&&o[h]!==u&&vc(i,h,u)}else for(var p in s)s.hasOwnProperty(p)&&vc(i,p,s[p])}function Rl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(i){return _d.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var yr=null;function li(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _r=null,vr=null;function Il(i){var s=ri(i);if(s&&(i=s.stateNode)){var o=i[ve]||null;t:switch(i=s.stateNode,s.type){case"input":if(qn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Me(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var h=u[ve]||null;if(!h)throw Error(r(90));qn(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Al(u)}break t;case"textarea":re(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&pr(i,!!o.multiple,s,!1)}}}var Gi=!1;function Ec(i,s,o){if(Gi)return i(s,o);Gi=!0;try{var u=i(s);return u}finally{if(Gi=!1,(_r!==null||vr!==null)&&(gf(),_r&&(s=_r,i=vr,vr=_r=null,Il(s),i)))for(s=0;s<i.length;s++)Il(i[s])}}function na(i,s){var o=i.stateNode;if(o===null)return null;var u=o[ve]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ui=!1;if(bi)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){ui=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{ui=!1}var $i=null,Wr=null,Er=null;function Cl(){if(Er)return Er;var i,s=Wr,o=s.length,u,h="value"in $i?$i.value:$i.textContent,p=h.length;for(i=0;i<o&&s[i]===h[i];i++);var T=o-i;for(u=1;u<=T&&s[o-u]===h[p-u];u++);return Er=h.slice(i,1<u?1-u:void 0)}function Yi(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Ki(){return!0}function Nl(){return!1}function Qe(i){function s(o,u,h,p,T){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(o=i[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ki:Nl,this.isPropagationStopped=Nl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),s}var te={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Za=Qe(te),ra=y({},te,{view:0,detail:0}),Tc=Qe(ra),Wa,Ja,Xi,sa=y({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:la,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xi&&(Xi&&i.type==="mousemove"?(Wa=i.screenX-Xi.screenX,Ja=i.screenY-Xi.screenY):Ja=Wa=0,Xi=i),Wa)},movementY:function(i){return"movementY"in i?i.movementY:Ja}}),ci=Qe(sa),wc=y({},sa,{dataTransfer:0}),vd=Qe(wc),aa=y({},ra,{relatedTarget:0}),to=Qe(aa),xl=y({},te,{animationName:0,elapsedTime:0,pseudoElement:0}),eo=Qe(xl),Sc=y({},te,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),no=Qe(Sc),Ed=y({},te,{data:0}),Dl=Qe(Ed),oa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ac={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=bc[i])?!!s[i]:!1}function la(){return Ol}var Rc=y({},ra,{key:function(i){if(i.key){var s=oa[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Yi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ac[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:la,charCode:function(i){return i.type==="keypress"?Yi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Yi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),io=Qe(Rc),Ic=y({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ml=Qe(Ic),Tr=y({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:la}),Cc=Qe(Tr),Nc=y({},te,{propertyName:0,elapsedTime:0,pseudoElement:0}),xc=Qe(Nc),Dc=y({},sa,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ro=Qe(Dc),bn=y({},te,{newState:0,oldState:0}),Oc=Qe(bn),Mc=[9,13,27,32],Qi=bi&&"CompositionEvent"in window,f=null;bi&&"documentMode"in document&&(f=document.documentMode);var _=bi&&"TextEvent"in window&&!f,E=bi&&(!Qi||f&&8<f&&11>=f),I=" ",Z=!1;function ot(i,s){switch(i){case"keyup":return Mc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $t=!1;function He(i,s){switch(i){case"compositionend":return mt(s);case"keypress":return s.which!==32?null:(Z=!0,I);case"textInput":return i=s.data,i===I&&Z?null:i;default:return null}}function Yt(i,s){if($t)return i==="compositionend"||!Qi&&ot(i,s)?(i=Cl(),Er=Wr=$i=null,$t=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qe(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Ze[i.type]:s==="textarea"}function wr(i,s,o,u){_r?vr?vr.push(u):vr=[u]:_r=u,s=Ef(s,"onChange"),0<s.length&&(o=new Za("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var sn=null,Zi=null;function Vl(i){S0(i,0)}function Vc(i){var s=si(i);if(Al(s))return i}function jy(i,s){if(i==="change")return s}var Gy=!1;if(bi){var Td;if(bi){var wd="oninput"in document;if(!wd){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),wd=typeof $y.oninput=="function"}Td=wd}else Td=!1;Gy=Td&&(!document.documentMode||9<document.documentMode)}function Yy(){sn&&(sn.detachEvent("onpropertychange",Ky),Zi=sn=null)}function Ky(i){if(i.propertyName==="value"&&Vc(Zi)){var s=[];wr(s,Zi,i,li(i)),Ec(Vl,s)}}function D1(i,s,o){i==="focusin"?(Yy(),sn=s,Zi=o,sn.attachEvent("onpropertychange",Ky)):i==="focusout"&&Yy()}function O1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Vc(Zi)}function M1(i,s){if(i==="click")return Vc(s)}function V1(i,s){if(i==="input"||i==="change")return Vc(s)}function k1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Fn=typeof Object.is=="function"?Object.is:k1;function kl(i,s){if(Fn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!Ne.call(s,h)||!Fn(i[h],s[h]))return!1}return!0}function Xy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Qy(i,s){var o=Xy(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Xy(o)}}function Zy(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Zy(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Wy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Ws(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=Ws(i.document)}return s}function Sd(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var P1=bi&&"documentMode"in document&&11>=document.documentMode,so=null,Ad=null,Pl=null,bd=!1;function Jy(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;bd||so==null||so!==Ws(u)||(u=so,"selectionStart"in u&&Sd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pl&&kl(Pl,u)||(Pl=u,u=Ef(Ad,"onSelect"),0<u.length&&(s=new Za("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=so)))}function ua(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var ao={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},Rd={},t_={};bi&&(t_=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ca(i){if(Rd[i])return Rd[i];if(!ao[i])return i;var s=ao[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in t_)return Rd[i]=s[o];return i}var e_=ca("animationend"),n_=ca("animationiteration"),i_=ca("animationstart"),L1=ca("transitionrun"),U1=ca("transitionstart"),z1=ca("transitioncancel"),r_=ca("transitionend"),s_=new Map,Id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Id.push("scrollEnd");function Ri(i,s){s_.set(i,s),Hn(s,[i])}var a_=new WeakMap;function fi(i,s){if(typeof i=="object"&&i!==null){var o=a_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Ka(s)},a_.set(i,s),s)}return{value:i,source:s,stack:Ka(s)}}var hi=[],oo=0,Cd=0;function kc(){for(var i=oo,s=Cd=oo=0;s<i;){var o=hi[s];hi[s++]=null;var u=hi[s];hi[s++]=null;var h=hi[s];hi[s++]=null;var p=hi[s];if(hi[s++]=null,u!==null&&h!==null){var T=u.pending;T===null?h.next=h:(h.next=T.next,T.next=h),u.pending=h}p!==0&&o_(o,h,p)}}function Pc(i,s,o,u){hi[oo++]=i,hi[oo++]=s,hi[oo++]=o,hi[oo++]=u,Cd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Nd(i,s,o,u){return Pc(i,s,o,u),Lc(i)}function lo(i,s){return Pc(i,null,null,s),Lc(i)}function o_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var h=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(h=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,h&&s!==null&&(h=31-me(o),i=p.hiddenUpdates,u=i[h],u===null?i[h]=[s]:u.push(s),s.lane=o|536870912),p):null}function Lc(i){if(50<ou)throw ou=0,kg=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var uo={};function B1(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(i,s,o,u){return new B1(i,s,o,u)}function xd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Sr(i,s){var o=i.alternate;return o===null?(o=jn(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function l_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Uc(i,s,o,u,h,p){var T=0;if(u=i,typeof i=="function")xd(i)&&(T=1);else if(typeof i=="string")T=qR(i,o,ct.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case R:return i=jn(31,o,s,h),i.elementType=R,i.lanes=p,i;case O:return fa(o.children,h,p,s);case L:T=8,h|=24;break;case k:return i=jn(12,o,s,h|2),i.elementType=k,i.lanes=p,i;case X:return i=jn(13,o,s,h),i.elementType=X,i.lanes=p,i;case rt:return i=jn(19,o,s,h),i.elementType=rt,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case Q:T=10;break t;case G:T=9;break t;case q:T=11;break t;case M:T=14;break t;case b:T=16,u=null;break t}T=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=jn(T,o,s,h),s.elementType=i,s.type=u,s.lanes=p,s}function fa(i,s,o,u){return i=jn(7,i,u,s),i.lanes=o,i}function Dd(i,s,o){return i=jn(6,i,null,s),i.lanes=o,i}function Od(i,s,o){return s=jn(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var co=[],fo=0,zc=null,Bc=0,di=[],gi=0,ha=null,Ar=1,br="";function da(i,s){co[fo++]=Bc,co[fo++]=zc,zc=i,Bc=s}function u_(i,s,o){di[gi++]=Ar,di[gi++]=br,di[gi++]=ha,ha=i;var u=Ar;i=br;var h=32-me(u)-1;u&=~(1<<h),o+=1;var p=32-me(s)+h;if(30<p){var T=h-h%5;p=(u&(1<<T)-1).toString(32),u>>=T,h-=T,Ar=1<<32-me(s)+h|o<<h|u,br=p+i}else Ar=1<<p|o<<h|u,br=i}function Md(i){i.return!==null&&(da(i,1),u_(i,1,0))}function Vd(i){for(;i===zc;)zc=co[--fo],co[fo]=null,Bc=co[--fo],co[fo]=null;for(;i===ha;)ha=di[--gi],di[gi]=null,br=di[--gi],di[gi]=null,Ar=di[--gi],di[gi]=null}var Rn=null,Ee=null,Wt=!1,ga=null,Wi=!1,kd=Error(r(519));function ma(i){var s=Error(r(418,""));throw zl(fi(s,i)),kd}function c_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Ae]=i,s[ve]=u,o){case"dialog":qt("cancel",s),qt("close",s);break;case"iframe":case"object":case"embed":qt("load",s);break;case"video":case"audio":for(o=0;o<uu.length;o++)qt(uu[o],s);break;case"source":qt("error",s);break;case"img":case"image":case"link":qt("error",s),qt("load",s);break;case"details":qt("toggle",s);break;case"input":qt("invalid",s),Js(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Xa(s);break;case"select":qt("invalid",s);break;case"textarea":qt("invalid",s),ta(s,u.value,u.defaultValue,u.children),Xa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||I0(s.textContent,o)?(u.popover!=null&&(qt("beforetoggle",s),qt("toggle",s)),u.onScroll!=null&&qt("scroll",s),u.onScrollEnd!=null&&qt("scrollend",s),u.onClick!=null&&(s.onclick=Tf),s=!0):s=!1,s||ma(i)}function f_(i){for(Rn=i.return;Rn;)switch(Rn.tag){case 5:case 13:Wi=!1;return;case 27:case 3:Wi=!0;return;default:Rn=Rn.return}}function Ll(i){if(i!==Rn)return!1;if(!Wt)return f_(i),Wt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Zg(i.type,i.memoizedProps)),o=!o),o&&Ee&&ma(i),f_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(s===0){Ee=Ci(i.nextSibling);break t}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;i=i.nextSibling}Ee=null}}else s===27?(s=Ee,gs(i.type)?(i=em,em=null,Ee=i):Ee=s):Ee=Rn?Ci(i.stateNode.nextSibling):null;return!0}function Ul(){Ee=Rn=null,Wt=!1}function h_(){var i=ga;return i!==null&&(On===null?On=i:On.push.apply(On,i),ga=null),i}function zl(i){ga===null?ga=[i]:ga.push(i)}var Pd=j(null),pa=null,Rr=null;function Jr(i,s,o){st(Pd,s._currentValue),s._currentValue=o}function Ir(i){i._currentValue=Pd.current,nt(Pd)}function Ld(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Ud(i,s,o,u){var h=i.child;for(h!==null&&(h.return=i);h!==null;){var p=h.dependencies;if(p!==null){var T=h.child;p=p.firstContext;t:for(;p!==null;){var A=p;p=h;for(var z=0;z<s.length;z++)if(A.context===s[z]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),Ld(p.return,o,i),u||(T=null);break t}p=A.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(r(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),Ld(T,o,i),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===i){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function Bl(i,s,o,u){i=null;for(var h=s,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var A=h.type;Fn(h.pendingProps.value,T.value)||(i!==null?i.push(A):i=[A])}}else if(h===xt.current){if(T=h.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(i!==null?i.push(mu):i=[mu])}h=h.return}i!==null&&Ud(s,i,o,u),s.flags|=262144}function Hc(i){for(i=i.firstContext;i!==null;){if(!Fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ya(i){pa=i,Rr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dn(i){return d_(pa,i)}function qc(i,s){return pa===null&&ya(i),d_(i,s)}function d_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Rr===null){if(i===null)throw Error(r(308));Rr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Rr=Rr.next=s;return o}var H1=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},q1=e.unstable_scheduleCallback,F1=e.unstable_NormalPriority,Fe={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new H1,data:new Map,refCount:0}}function Hl(i){i.refCount--,i.refCount===0&&q1(F1,function(){i.controller.abort()})}var ql=null,Bd=0,ho=0,go=null;function j1(i,s){if(ql===null){var o=ql=[];Bd=0,ho=qg(),go={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Bd++,s.then(g_,g_),s}function g_(){if(--Bd===0&&ql!==null){go!==null&&(go.status="fulfilled");var i=ql;ql=null,ho=0,go=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function G1(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var h=0;h<o.length;h++)(0,o[h])(s)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var m_=C.S;C.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&j1(i,s),m_!==null&&m_(i,s)};var _a=j(null);function Hd(){var i=_a.current;return i!==null?i:ce.pooledCache}function Fc(i,s){s===null?st(_a,_a.current):st(_a,s.pool)}function p_(){var i=Hd();return i===null?null:{parent:Fe._currentValue,pool:i}}var Fl=Error(r(460)),y_=Error(r(474)),jc=Error(r(542)),qd={then:function(){}};function __(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Gc(){}function v_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Gc,Gc),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,T_(i),i;default:if(typeof s.status=="string")s.then(Gc,Gc);else{if(i=ce,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=u}},function(u){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,T_(i),i}throw jl=s,Fl}}var jl=null;function E_(){if(jl===null)throw Error(r(459));var i=jl;return jl=null,i}function T_(i){if(i===Fl||i===jc)throw Error(r(483))}var ts=!1;function Fd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function es(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ns(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(ne&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,s=Lc(i),o_(i,null,o),s}return Pc(i,u,s,o),Lc(i)}function Gl(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Ks(i,o)}}function Gd(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?h=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?h=p=s:p=p.next=s}else h=p=s;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var $d=!1;function $l(){if($d){var i=go;if(i!==null)throw i}}function Yl(i,s,o,u){$d=!1;var h=i.updateQueue;ts=!1;var p=h.firstBaseUpdate,T=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var z=A,tt=z.next;z.next=null,T===null?p=tt:T.next=tt,T=z;var lt=i.alternate;lt!==null&&(lt=lt.updateQueue,A=lt.lastBaseUpdate,A!==T&&(A===null?lt.firstBaseUpdate=tt:A.next=tt,lt.lastBaseUpdate=z))}if(p!==null){var ft=h.baseState;T=0,lt=tt=z=null,A=p;do{var it=A.lane&-536870913,at=it!==A.lane;if(at?(Kt&it)===it:(u&it)===it){it!==0&&it===ho&&($d=!0),lt!==null&&(lt=lt.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Dt=i,Rt=A;it=s;var oe=o;switch(Rt.tag){case 1:if(Dt=Rt.payload,typeof Dt=="function"){ft=Dt.call(oe,ft,it);break t}ft=Dt;break t;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Rt.payload,it=typeof Dt=="function"?Dt.call(oe,ft,it):Dt,it==null)break t;ft=y({},ft,it);break t;case 2:ts=!0}}it=A.callback,it!==null&&(i.flags|=64,at&&(i.flags|=8192),at=h.callbacks,at===null?h.callbacks=[it]:at.push(it))}else at={lane:it,tag:A.tag,payload:A.payload,callback:A.callback,next:null},lt===null?(tt=lt=at,z=ft):lt=lt.next=at,T|=it;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;at=A,A=at.next,at.next=null,h.lastBaseUpdate=at,h.shared.pending=null}}while(!0);lt===null&&(z=ft),h.baseState=z,h.firstBaseUpdate=tt,h.lastBaseUpdate=lt,p===null&&(h.shared.lanes=0),cs|=T,i.lanes=T,i.memoizedState=ft}}function w_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function S_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)w_(o[i],s)}var mo=j(null),$c=j(0);function A_(i,s){i=Vr,st($c,i),st(mo,s),Vr=i|s.baseLanes}function Yd(){st($c,Vr),st(mo,mo.current)}function Kd(){Vr=$c.current,nt(mo),nt($c)}var is=0,kt=null,se=null,Ve=null,Yc=!1,po=!1,va=!1,Kc=0,Kl=0,yo=null,$1=0;function be(){throw Error(r(321))}function Xd(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Fn(i[o],s[o]))return!1;return!0}function Qd(i,s,o,u,h,p){return is=p,kt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,C.H=i===null||i.memoizedState===null?ov:lv,va=!1,p=o(u,h),va=!1,po&&(p=R_(s,o,u,h)),b_(i),p}function b_(i){C.H=tf;var s=se!==null&&se.next!==null;if(is=0,Ve=se=kt=null,Yc=!1,Kl=0,yo=null,s)throw Error(r(300));i===null||We||(i=i.dependencies,i!==null&&Hc(i)&&(We=!0))}function R_(i,s,o,u){kt=i;var h=0;do{if(po&&(yo=null),Kl=0,po=!1,25<=h)throw Error(r(301));if(h+=1,Ve=se=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}C.H=J1,p=s(o,u)}while(po);return p}function Y1(){var i=C.H,s=i.useState()[0];return s=typeof s.then=="function"?Xl(s):s,i=i.useState()[0],(se!==null?se.memoizedState:null)!==i&&(kt.flags|=1024),s}function Zd(){var i=Kc!==0;return Kc=0,i}function Wd(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Jd(i){if(Yc){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Yc=!1}is=0,Ve=se=kt=null,po=!1,Kl=Kc=0,yo=null}function xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?kt.memoizedState=Ve=i:Ve=Ve.next=i,Ve}function ke(){if(se===null){var i=kt.alternate;i=i!==null?i.memoizedState:null}else i=se.next;var s=Ve===null?kt.memoizedState:Ve.next;if(s!==null)Ve=s,se=i;else{if(i===null)throw kt.alternate===null?Error(r(467)):Error(r(310));se=i,i={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Ve===null?kt.memoizedState=Ve=i:Ve=Ve.next=i}return Ve}function tg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(i){var s=Kl;return Kl+=1,yo===null&&(yo=[]),i=v_(yo,i,s),s=kt,(Ve===null?s.memoizedState:Ve.next)===null&&(s=s.alternate,C.H=s===null||s.memoizedState===null?ov:lv),i}function Xc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Xl(i);if(i.$$typeof===Q)return dn(i)}throw Error(r(438,String(i)))}function eg(i){var s=null,o=kt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=kt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=tg(),kt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=V;return s.index++,o}function Cr(i,s){return typeof s=="function"?s(i):s}function Qc(i){var s=ke();return ng(s,se,i)}function ng(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var h=i.baseQueue,p=u.pending;if(p!==null){if(h!==null){var T=h.next;h.next=p.next,p.next=T}s.baseQueue=h=p,u.pending=null}if(p=i.baseState,h===null)i.memoizedState=p;else{s=h.next;var A=T=null,z=null,tt=s,lt=!1;do{var ft=tt.lane&-536870913;if(ft!==tt.lane?(Kt&ft)===ft:(is&ft)===ft){var it=tt.revertLane;if(it===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),ft===ho&&(lt=!0);else if((is&it)===it){tt=tt.next,it===ho&&(lt=!0);continue}else ft={lane:0,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},z===null?(A=z=ft,T=p):z=z.next=ft,kt.lanes|=it,cs|=it;ft=tt.action,va&&o(p,ft),p=tt.hasEagerState?tt.eagerState:o(p,ft)}else it={lane:ft,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},z===null?(A=z=it,T=p):z=z.next=it,kt.lanes|=ft,cs|=ft;tt=tt.next}while(tt!==null&&tt!==s);if(z===null?T=p:z.next=A,!Fn(p,i.memoizedState)&&(We=!0,lt&&(o=go,o!==null)))throw o;i.memoizedState=p,i.baseState=T,i.baseQueue=z,u.lastRenderedState=p}return h===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function ig(i){var s=ke(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,h=o.pending,p=s.memoizedState;if(h!==null){o.pending=null;var T=h=h.next;do p=i(p,T.action),T=T.next;while(T!==h);Fn(p,s.memoizedState)||(We=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function I_(i,s,o){var u=kt,h=ke(),p=Wt;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!Fn((se||h).memoizedState,o);T&&(h.memoizedState=o,We=!0),h=h.queue;var A=x_.bind(null,u,h,i);if(Ql(2048,8,A,[i]),h.getSnapshot!==s||T||Ve!==null&&Ve.memoizedState.tag&1){if(u.flags|=2048,_o(9,Zc(),N_.bind(null,u,h,o,s),null),ce===null)throw Error(r(349));p||(is&124)!==0||C_(u,s,o)}return o}function C_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=kt.updateQueue,s===null?(s=tg(),kt.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function N_(i,s,o,u){s.value=o,s.getSnapshot=u,D_(s)&&O_(i)}function x_(i,s,o){return o(function(){D_(s)&&O_(i)})}function D_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Fn(i,o)}catch{return!0}}function O_(i){var s=lo(i,2);s!==null&&Xn(s,i,2)}function rg(i){var s=xn();if(typeof i=="function"){var o=i;if(i=o(),va){De(!0);try{o()}finally{De(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:i},s}function M_(i,s,o,u){return i.baseState=o,ng(i,se,typeof u=="function"?u:Cr)}function K1(i,s,o,u,h){if(Jc(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:h,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};C.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,V_(s,p)):(p.next=o.next,s.pending=o.next=p)}}function V_(i,s){var o=s.action,u=s.payload,h=i.state;if(s.isTransition){var p=C.T,T={};C.T=T;try{var A=o(h,u),z=C.S;z!==null&&z(T,A),k_(i,s,A)}catch(tt){sg(i,s,tt)}finally{C.T=p}}else try{p=o(h,u),k_(i,s,p)}catch(tt){sg(i,s,tt)}}function k_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){P_(i,s,u)},function(u){return sg(i,s,u)}):P_(i,s,o)}function P_(i,s,o){s.status="fulfilled",s.value=o,L_(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,V_(i,o)))}function sg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,L_(s),s=s.next;while(s!==u)}i.action=null}function L_(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function U_(i,s){return s}function z_(i,s){if(Wt){var o=ce.formState;if(o!==null){t:{var u=kt;if(Wt){if(Ee){e:{for(var h=Ee,p=Wi;h.nodeType!==8;){if(!p){h=null;break e}if(h=Ci(h.nextSibling),h===null){h=null;break e}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Ee=Ci(h.nextSibling),u=h.data==="F!";break t}}ma(u)}u=!1}u&&(s=o[0])}}return o=xn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U_,lastRenderedState:s},o.queue=u,o=rv.bind(null,kt,u),u.dispatch=o,u=rg(!1),p=cg.bind(null,kt,!1,u.queue),u=xn(),h={state:s,dispatch:null,action:i,pending:null},u.queue=h,o=K1.bind(null,kt,h,p,o),h.dispatch=o,u.memoizedState=i,[s,o,!1]}function B_(i){var s=ke();return H_(s,se,i)}function H_(i,s,o){if(s=ng(i,s,U_)[0],i=Qc(Cr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Xl(s)}catch(T){throw T===Fl?jc:T}else u=s;s=ke();var h=s.queue,p=h.dispatch;return o!==s.memoizedState&&(kt.flags|=2048,_o(9,Zc(),X1.bind(null,h,o),null)),[u,p,i]}function X1(i,s){i.action=s}function q_(i){var s=ke(),o=se;if(o!==null)return H_(s,o,i);ke(),s=s.memoizedState,o=ke();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function _o(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=kt.updateQueue,s===null&&(s=tg(),kt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function Zc(){return{destroy:void 0,resource:void 0}}function F_(){return ke().memoizedState}function Wc(i,s,o,u){var h=xn();u=u===void 0?null:u,kt.flags|=i,h.memoizedState=_o(1|s,Zc(),o,u)}function Ql(i,s,o,u){var h=ke();u=u===void 0?null:u;var p=h.memoizedState.inst;se!==null&&u!==null&&Xd(u,se.memoizedState.deps)?h.memoizedState=_o(s,p,o,u):(kt.flags|=i,h.memoizedState=_o(1|s,p,o,u))}function j_(i,s){Wc(8390656,8,i,s)}function G_(i,s){Ql(2048,8,i,s)}function $_(i,s){return Ql(4,2,i,s)}function Y_(i,s){return Ql(4,4,i,s)}function K_(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function X_(i,s,o){o=o!=null?o.concat([i]):null,Ql(4,4,K_.bind(null,s,i),o)}function ag(){}function Q_(i,s){var o=ke();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Xd(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function Z_(i,s){var o=ke();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Xd(s,u[1]))return u[0];if(u=i(),va){De(!0);try{i()}finally{De(!1)}}return o.memoizedState=[u,s],u}function og(i,s,o){return o===void 0||(is&1073741824)!==0?i.memoizedState=s:(i.memoizedState=o,i=t0(),kt.lanes|=i,cs|=i,o)}function W_(i,s,o,u){return Fn(o,s)?o:mo.current!==null?(i=og(i,o,u),Fn(i,s)||(We=!0),i):(is&42)===0?(We=!0,i.memoizedState=o):(i=t0(),kt.lanes|=i,cs|=i,s)}function J_(i,s,o,u,h){var p=F.p;F.p=p!==0&&8>p?p:8;var T=C.T,A={};C.T=A,cg(i,!1,s,o);try{var z=h(),tt=C.S;if(tt!==null&&tt(A,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var lt=G1(z,u);Zl(i,s,lt,Kn(i))}else Zl(i,s,u,Kn(i))}catch(ft){Zl(i,s,{then:function(){},status:"rejected",reason:ft},Kn())}finally{F.p=p,C.T=T}}function Q1(){}function lg(i,s,o,u){if(i.tag!==5)throw Error(r(476));var h=tv(i).queue;J_(i,h,s,J,o===null?Q1:function(){return ev(i),o(u)})}function tv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:J},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function ev(i){var s=tv(i).next.queue;Zl(i,s,{},Kn())}function ug(){return dn(mu)}function nv(){return ke().memoizedState}function iv(){return ke().memoizedState}function Z1(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Kn();i=es(o);var u=ns(s,i,o);u!==null&&(Xn(u,s,o),Gl(u,s,o)),s={cache:zd()},i.payload=s;return}s=s.return}}function W1(i,s,o){var u=Kn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Jc(i)?sv(s,o):(o=Nd(i,s,o,u),o!==null&&(Xn(o,i,u),av(o,s,u)))}function rv(i,s,o){var u=Kn();Zl(i,s,o,u)}function Zl(i,s,o,u){var h={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jc(i))sv(s,h);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var T=s.lastRenderedState,A=p(T,o);if(h.hasEagerState=!0,h.eagerState=A,Fn(A,T))return Pc(i,s,h,0),ce===null&&kc(),!1}catch{}finally{}if(o=Nd(i,s,h,u),o!==null)return Xn(o,i,u),av(o,s,u),!0}return!1}function cg(i,s,o,u){if(u={lane:2,revertLane:qg(),action:u,hasEagerState:!1,eagerState:null,next:null},Jc(i)){if(s)throw Error(r(479))}else s=Nd(i,o,u,2),s!==null&&Xn(s,i,2)}function Jc(i){var s=i.alternate;return i===kt||s!==null&&s===kt}function sv(i,s){po=Yc=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function av(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Ks(i,o)}}var tf={readContext:dn,use:Xc,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be},ov={readContext:dn,use:Xc,useCallback:function(i,s){return xn().memoizedState=[i,s===void 0?null:s],i},useContext:dn,useEffect:j_,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,Wc(4194308,4,K_.bind(null,s,i),o)},useLayoutEffect:function(i,s){return Wc(4194308,4,i,s)},useInsertionEffect:function(i,s){Wc(4,2,i,s)},useMemo:function(i,s){var o=xn();s=s===void 0?null:s;var u=i();if(va){De(!0);try{i()}finally{De(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=xn();if(o!==void 0){var h=o(s);if(va){De(!0);try{o(s)}finally{De(!1)}}}else h=s;return u.memoizedState=u.baseState=h,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:h},u.queue=i,i=i.dispatch=W1.bind(null,kt,i),[u.memoizedState,i]},useRef:function(i){var s=xn();return i={current:i},s.memoizedState=i},useState:function(i){i=rg(i);var s=i.queue,o=rv.bind(null,kt,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:ag,useDeferredValue:function(i,s){var o=xn();return og(o,i,s)},useTransition:function(){var i=rg(!1);return i=J_.bind(null,kt,i.queue,!0,!1),xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=kt,h=xn();if(Wt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ce===null)throw Error(r(349));(Kt&124)!==0||C_(u,s,o)}h.memoizedState=o;var p={value:o,getSnapshot:s};return h.queue=p,j_(x_.bind(null,u,p,i),[i]),u.flags|=2048,_o(9,Zc(),N_.bind(null,u,p,o,s),null),o},useId:function(){var i=xn(),s=ce.identifierPrefix;if(Wt){var o=br,u=Ar;o=(u&~(1<<32-me(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Kc++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=$1++,s="«"+s+"r"+o.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:ug,useFormState:z_,useActionState:z_,useOptimistic:function(i){var s=xn();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=cg.bind(null,kt,!0,o),o.dispatch=s,[i,s]},useMemoCache:eg,useCacheRefresh:function(){return xn().memoizedState=Z1.bind(null,kt)}},lv={readContext:dn,use:Xc,useCallback:Q_,useContext:dn,useEffect:G_,useImperativeHandle:X_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:Z_,useReducer:Qc,useRef:F_,useState:function(){return Qc(Cr)},useDebugValue:ag,useDeferredValue:function(i,s){var o=ke();return W_(o,se.memoizedState,i,s)},useTransition:function(){var i=Qc(Cr)[0],s=ke().memoizedState;return[typeof i=="boolean"?i:Xl(i),s]},useSyncExternalStore:I_,useId:nv,useHostTransitionStatus:ug,useFormState:B_,useActionState:B_,useOptimistic:function(i,s){var o=ke();return M_(o,se,i,s)},useMemoCache:eg,useCacheRefresh:iv},J1={readContext:dn,use:Xc,useCallback:Q_,useContext:dn,useEffect:G_,useImperativeHandle:X_,useInsertionEffect:$_,useLayoutEffect:Y_,useMemo:Z_,useReducer:ig,useRef:F_,useState:function(){return ig(Cr)},useDebugValue:ag,useDeferredValue:function(i,s){var o=ke();return se===null?og(o,i,s):W_(o,se.memoizedState,i,s)},useTransition:function(){var i=ig(Cr)[0],s=ke().memoizedState;return[typeof i=="boolean"?i:Xl(i),s]},useSyncExternalStore:I_,useId:nv,useHostTransitionStatus:ug,useFormState:q_,useActionState:q_,useOptimistic:function(i,s){var o=ke();return se!==null?M_(o,se,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:eg,useCacheRefresh:iv},vo=null,Wl=0;function ef(i){var s=Wl;return Wl+=1,vo===null&&(vo=[]),v_(vo,i,s)}function Jl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function nf(i,s){throw s.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function uv(i){var s=i._init;return s(i._payload)}function cv(i){function s(K,H){if(i){var W=K.deletions;W===null?(K.deletions=[H],K.flags|=16):W.push(H)}}function o(K,H){if(!i)return null;for(;H!==null;)s(K,H),H=H.sibling;return null}function u(K){for(var H=new Map;K!==null;)K.key!==null?H.set(K.key,K):H.set(K.index,K),K=K.sibling;return H}function h(K,H){return K=Sr(K,H),K.index=0,K.sibling=null,K}function p(K,H,W){return K.index=W,i?(W=K.alternate,W!==null?(W=W.index,W<H?(K.flags|=67108866,H):W):(K.flags|=67108866,H)):(K.flags|=1048576,H)}function T(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function A(K,H,W,ut){return H===null||H.tag!==6?(H=Dd(W,K.mode,ut),H.return=K,H):(H=h(H,W),H.return=K,H)}function z(K,H,W,ut){var Et=W.type;return Et===O?lt(K,H,W.props.children,ut,W.key):H!==null&&(H.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===b&&uv(Et)===H.type)?(H=h(H,W.props),Jl(H,W),H.return=K,H):(H=Uc(W.type,W.key,W.props,null,K.mode,ut),Jl(H,W),H.return=K,H)}function tt(K,H,W,ut){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=Od(W,K.mode,ut),H.return=K,H):(H=h(H,W.children||[]),H.return=K,H)}function lt(K,H,W,ut,Et){return H===null||H.tag!==7?(H=fa(W,K.mode,ut,Et),H.return=K,H):(H=h(H,W),H.return=K,H)}function ft(K,H,W){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Dd(""+H,K.mode,W),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return W=Uc(H.type,H.key,H.props,null,K.mode,W),Jl(W,H),W.return=K,W;case S:return H=Od(H,K.mode,W),H.return=K,H;case b:var ut=H._init;return H=ut(H._payload),ft(K,H,W)}if($(H)||U(H))return H=fa(H,K.mode,W,null),H.return=K,H;if(typeof H.then=="function")return ft(K,ef(H),W);if(H.$$typeof===Q)return ft(K,qc(K,H),W);nf(K,H)}return null}function it(K,H,W,ut){var Et=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Et!==null?null:A(K,H,""+W,ut);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return W.key===Et?z(K,H,W,ut):null;case S:return W.key===Et?tt(K,H,W,ut):null;case b:return Et=W._init,W=Et(W._payload),it(K,H,W,ut)}if($(W)||U(W))return Et!==null?null:lt(K,H,W,ut,null);if(typeof W.then=="function")return it(K,H,ef(W),ut);if(W.$$typeof===Q)return it(K,H,qc(K,W),ut);nf(K,W)}return null}function at(K,H,W,ut,Et){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return K=K.get(W)||null,A(H,K,""+ut,Et);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case w:return K=K.get(ut.key===null?W:ut.key)||null,z(H,K,ut,Et);case S:return K=K.get(ut.key===null?W:ut.key)||null,tt(H,K,ut,Et);case b:var Ut=ut._init;return ut=Ut(ut._payload),at(K,H,W,ut,Et)}if($(ut)||U(ut))return K=K.get(W)||null,lt(H,K,ut,Et,null);if(typeof ut.then=="function")return at(K,H,W,ef(ut),Et);if(ut.$$typeof===Q)return at(K,H,W,qc(H,ut),Et);nf(H,ut)}return null}function Dt(K,H,W,ut){for(var Et=null,Ut=null,Tt=H,It=H=0,tn=null;Tt!==null&&It<W.length;It++){Tt.index>It?(tn=Tt,Tt=null):tn=Tt.sibling;var Zt=it(K,Tt,W[It],ut);if(Zt===null){Tt===null&&(Tt=tn);break}i&&Tt&&Zt.alternate===null&&s(K,Tt),H=p(Zt,H,It),Ut===null?Et=Zt:Ut.sibling=Zt,Ut=Zt,Tt=tn}if(It===W.length)return o(K,Tt),Wt&&da(K,It),Et;if(Tt===null){for(;It<W.length;It++)Tt=ft(K,W[It],ut),Tt!==null&&(H=p(Tt,H,It),Ut===null?Et=Tt:Ut.sibling=Tt,Ut=Tt);return Wt&&da(K,It),Et}for(Tt=u(Tt);It<W.length;It++)tn=at(Tt,K,It,W[It],ut),tn!==null&&(i&&tn.alternate!==null&&Tt.delete(tn.key===null?It:tn.key),H=p(tn,H,It),Ut===null?Et=tn:Ut.sibling=tn,Ut=tn);return i&&Tt.forEach(function(vs){return s(K,vs)}),Wt&&da(K,It),Et}function Rt(K,H,W,ut){if(W==null)throw Error(r(151));for(var Et=null,Ut=null,Tt=H,It=H=0,tn=null,Zt=W.next();Tt!==null&&!Zt.done;It++,Zt=W.next()){Tt.index>It?(tn=Tt,Tt=null):tn=Tt.sibling;var vs=it(K,Tt,Zt.value,ut);if(vs===null){Tt===null&&(Tt=tn);break}i&&Tt&&vs.alternate===null&&s(K,Tt),H=p(vs,H,It),Ut===null?Et=vs:Ut.sibling=vs,Ut=vs,Tt=tn}if(Zt.done)return o(K,Tt),Wt&&da(K,It),Et;if(Tt===null){for(;!Zt.done;It++,Zt=W.next())Zt=ft(K,Zt.value,ut),Zt!==null&&(H=p(Zt,H,It),Ut===null?Et=Zt:Ut.sibling=Zt,Ut=Zt);return Wt&&da(K,It),Et}for(Tt=u(Tt);!Zt.done;It++,Zt=W.next())Zt=at(Tt,K,It,Zt.value,ut),Zt!==null&&(i&&Zt.alternate!==null&&Tt.delete(Zt.key===null?It:Zt.key),H=p(Zt,H,It),Ut===null?Et=Zt:Ut.sibling=Zt,Ut=Zt);return i&&Tt.forEach(function(tI){return s(K,tI)}),Wt&&da(K,It),Et}function oe(K,H,W,ut){if(typeof W=="object"&&W!==null&&W.type===O&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case w:t:{for(var Et=W.key;H!==null;){if(H.key===Et){if(Et=W.type,Et===O){if(H.tag===7){o(K,H.sibling),ut=h(H,W.props.children),ut.return=K,K=ut;break t}}else if(H.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===b&&uv(Et)===H.type){o(K,H.sibling),ut=h(H,W.props),Jl(ut,W),ut.return=K,K=ut;break t}o(K,H);break}else s(K,H);H=H.sibling}W.type===O?(ut=fa(W.props.children,K.mode,ut,W.key),ut.return=K,K=ut):(ut=Uc(W.type,W.key,W.props,null,K.mode,ut),Jl(ut,W),ut.return=K,K=ut)}return T(K);case S:t:{for(Et=W.key;H!==null;){if(H.key===Et)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){o(K,H.sibling),ut=h(H,W.children||[]),ut.return=K,K=ut;break t}else{o(K,H);break}else s(K,H);H=H.sibling}ut=Od(W,K.mode,ut),ut.return=K,K=ut}return T(K);case b:return Et=W._init,W=Et(W._payload),oe(K,H,W,ut)}if($(W))return Dt(K,H,W,ut);if(U(W)){if(Et=U(W),typeof Et!="function")throw Error(r(150));return W=Et.call(W),Rt(K,H,W,ut)}if(typeof W.then=="function")return oe(K,H,ef(W),ut);if(W.$$typeof===Q)return oe(K,H,qc(K,W),ut);nf(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,H!==null&&H.tag===6?(o(K,H.sibling),ut=h(H,W),ut.return=K,K=ut):(o(K,H),ut=Dd(W,K.mode,ut),ut.return=K,K=ut),T(K)):o(K,H)}return function(K,H,W,ut){try{Wl=0;var Et=oe(K,H,W,ut);return vo=null,Et}catch(Tt){if(Tt===Fl||Tt===jc)throw Tt;var Ut=jn(29,Tt,null,K.mode);return Ut.lanes=ut,Ut.return=K,Ut}finally{}}}var Eo=cv(!0),fv=cv(!1),mi=j(null),Ji=null;function rs(i){var s=i.alternate;st(je,je.current&1),st(mi,i),Ji===null&&(s===null||mo.current!==null||s.memoizedState!==null)&&(Ji=i)}function hv(i){if(i.tag===22){if(st(je,je.current),st(mi,i),Ji===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Ji=i)}}else ss()}function ss(){st(je,je.current),st(mi,mi.current)}function Nr(i){nt(mi),Ji===i&&(Ji=null),nt(je)}var je=j(0);function rf(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||tm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function fg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var hg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Kn(),h=es(u);h.payload=s,o!=null&&(h.callback=o),s=ns(i,h,u),s!==null&&(Xn(s,i,u),Gl(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Kn(),h=es(u);h.tag=1,h.payload=s,o!=null&&(h.callback=o),s=ns(i,h,u),s!==null&&(Xn(s,i,u),Gl(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Kn(),u=es(o);u.tag=2,s!=null&&(u.callback=s),s=ns(i,u,o),s!==null&&(Xn(s,i,o),Gl(s,i,o))}};function dv(i,s,o,u,h,p,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,T):s.prototype&&s.prototype.isPureReactComponent?!kl(o,u)||!kl(h,p):!0}function gv(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&hg.enqueueReplaceState(s,s.state,null)}function Ea(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=y({},o));for(var h in i)o[h]===void 0&&(o[h]=i[h])}return o}var sf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function mv(i){sf(i)}function pv(i){console.error(i)}function yv(i){sf(i)}function af(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function _v(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function dg(i,s,o){return o=es(o),o.tag=3,o.payload={element:null},o.callback=function(){af(i,s)},o}function vv(i){return i=es(i),i.tag=3,i}function Ev(i,s,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var p=u.value;i.payload=function(){return h(p)},i.callback=function(){_v(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){_v(s,o,u),typeof h!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function tR(i,s,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Bl(s,o,h,!0),o=mi.current,o!==null){switch(o.tag){case 13:return Ji===null?Lg():o.alternate===null&&Te===0&&(Te=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),zg(i,u,h)),!1;case 22:return o.flags|=65536,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),zg(i,u,h)),!1}throw Error(r(435,o.tag))}return zg(i,u,h),Lg(),!1}if(Wt)return s=mi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,u!==kd&&(i=Error(r(422),{cause:u}),zl(fi(i,o)))):(u!==kd&&(s=Error(r(423),{cause:u}),zl(fi(s,o))),i=i.current.alternate,i.flags|=65536,h&=-h,i.lanes|=h,u=fi(u,o),h=dg(i.stateNode,u,h),Gd(i,h),Te!==4&&(Te=2)),!1;var p=Error(r(520),{cause:u});if(p=fi(p,o),au===null?au=[p]:au.push(p),Te!==4&&(Te=2),s===null)return!0;u=fi(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=h&-h,o.lanes|=i,i=dg(o.stateNode,u,i),Gd(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(fs===null||!fs.has(p))))return o.flags|=65536,h&=-h,o.lanes|=h,h=vv(h),Ev(h,i,o,u),Gd(o,h),!1}o=o.return}while(o!==null);return!1}var Tv=Error(r(461)),We=!1;function an(i,s,o,u){s.child=i===null?fv(s,null,o,u):Eo(s,i.child,o,u)}function wv(i,s,o,u,h){o=o.render;var p=s.ref;if("ref"in u){var T={};for(var A in u)A!=="ref"&&(T[A]=u[A])}else T=u;return ya(s),u=Qd(i,s,o,T,p,h),A=Zd(),i!==null&&!We?(Wd(i,s,h),xr(i,s,h)):(Wt&&A&&Md(s),s.flags|=1,an(i,s,u,h),s.child)}function Sv(i,s,o,u,h){if(i===null){var p=o.type;return typeof p=="function"&&!xd(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,Av(i,s,p,u,h)):(i=Uc(o.type,null,u,s,s.mode,h),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!Tg(i,h)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:kl,o(T,u)&&i.ref===s.ref)return xr(i,s,h)}return s.flags|=1,i=Sr(p,u),i.ref=s.ref,i.return=s,s.child=i}function Av(i,s,o,u,h){if(i!==null){var p=i.memoizedProps;if(kl(p,u)&&i.ref===s.ref)if(We=!1,s.pendingProps=u=p,Tg(i,h))(i.flags&131072)!==0&&(We=!0);else return s.lanes=i.lanes,xr(i,s,h)}return gg(i,s,o,u,h)}function bv(i,s,o){var u=s.pendingProps,h=u.children,p=i!==null?i.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,i!==null){for(h=s.child=i.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return Rv(i,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Fc(s,p!==null?p.cachePool:null),p!==null?A_(s,p):Yd(),hv(s);else return s.lanes=s.childLanes=536870912,Rv(i,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Fc(s,p.cachePool),A_(s,p),ss(),s.memoizedState=null):(i!==null&&Fc(s,null),Yd(),ss());return an(i,s,h,o),s.child}function Rv(i,s,o,u){var h=Hd();return h=h===null?null:{parent:Fe._currentValue,pool:h},s.memoizedState={baseLanes:o,cachePool:h},i!==null&&Fc(s,null),Yd(),hv(s),i!==null&&Bl(i,s,u,!0),null}function of(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function gg(i,s,o,u,h){return ya(s),o=Qd(i,s,o,u,void 0,h),u=Zd(),i!==null&&!We?(Wd(i,s,h),xr(i,s,h)):(Wt&&u&&Md(s),s.flags|=1,an(i,s,o,h),s.child)}function Iv(i,s,o,u,h,p){return ya(s),s.updateQueue=null,o=R_(s,u,o,h),b_(i),u=Zd(),i!==null&&!We?(Wd(i,s,p),xr(i,s,p)):(Wt&&u&&Md(s),s.flags|=1,an(i,s,o,p),s.child)}function Cv(i,s,o,u,h){if(ya(s),s.stateNode===null){var p=uo,T=o.contextType;typeof T=="object"&&T!==null&&(p=dn(T)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=hg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Fd(s),T=o.contextType,p.context=typeof T=="object"&&T!==null?dn(T):uo,p.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(fg(s,o,T,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&hg.enqueueReplaceState(p,p.state,null),Yl(s,u,p,h),$l(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var A=s.memoizedProps,z=Ea(o,A);p.props=z;var tt=p.context,lt=o.contextType;T=uo,typeof lt=="object"&&lt!==null&&(T=dn(lt));var ft=o.getDerivedStateFromProps;lt=typeof ft=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,lt||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||tt!==T)&&gv(s,p,u,T),ts=!1;var it=s.memoizedState;p.state=it,Yl(s,u,p,h),$l(),tt=s.memoizedState,A||it!==tt||ts?(typeof ft=="function"&&(fg(s,o,ft,u),tt=s.memoizedState),(z=ts||dv(s,o,z,u,it,tt,T))?(lt||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=tt),p.props=u,p.state=tt,p.context=T,u=z):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,jd(i,s),T=s.memoizedProps,lt=Ea(o,T),p.props=lt,ft=s.pendingProps,it=p.context,tt=o.contextType,z=uo,typeof tt=="object"&&tt!==null&&(z=dn(tt)),A=o.getDerivedStateFromProps,(tt=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ft||it!==z)&&gv(s,p,u,z),ts=!1,it=s.memoizedState,p.state=it,Yl(s,u,p,h),$l();var at=s.memoizedState;T!==ft||it!==at||ts||i!==null&&i.dependencies!==null&&Hc(i.dependencies)?(typeof A=="function"&&(fg(s,o,A,u),at=s.memoizedState),(lt=ts||dv(s,o,lt,u,it,at,z)||i!==null&&i.dependencies!==null&&Hc(i.dependencies))?(tt||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,at,z),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,at,z)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=at),p.props=u,p.state=at,p.context=z,u=lt):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,of(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=Eo(s,i.child,null,h),s.child=Eo(s,null,o,h)):an(i,s,o,h),s.memoizedState=p.state,i=s.child):i=xr(i,s,h),i}function Nv(i,s,o,u){return Ul(),s.flags|=256,an(i,s,o,u),s.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pg(i){return{baseLanes:i,cachePool:p_()}}function yg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=pi),i}function xv(i,s,o){var u=s.pendingProps,h=!1,p=(s.flags&128)!==0,T;if((T=p)||(T=i!==null&&i.memoizedState===null?!1:(je.current&2)!==0),T&&(h=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Wt){if(h?rs(s):ss(),Wt){var A=Ee,z;if(z=A){t:{for(z=A,A=Wi;z.nodeType!==8;){if(!A){A=null;break t}if(z=Ci(z.nextSibling),z===null){A=null;break t}}A=z}A!==null?(s.memoizedState={dehydrated:A,treeContext:ha!==null?{id:Ar,overflow:br}:null,retryLane:536870912,hydrationErrors:null},z=jn(18,null,null,0),z.stateNode=A,z.return=s,s.child=z,Rn=s,Ee=null,z=!0):z=!1}z||ma(s)}if(A=s.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return tm(A)?s.lanes=32:s.lanes=536870912,null;Nr(s)}return A=u.children,u=u.fallback,h?(ss(),h=s.mode,A=lf({mode:"hidden",children:A},h),u=fa(u,h,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,h=s.child,h.memoizedState=pg(o),h.childLanes=yg(i,T,o),s.memoizedState=mg,u):(rs(s),_g(s,A))}if(z=i.memoizedState,z!==null&&(A=z.dehydrated,A!==null)){if(p)s.flags&256?(rs(s),s.flags&=-257,s=vg(i,s,o)):s.memoizedState!==null?(ss(),s.child=i.child,s.flags|=128,s=null):(ss(),h=u.fallback,A=s.mode,u=lf({mode:"visible",children:u.children},A),h=fa(h,A,o,null),h.flags|=2,u.return=s,h.return=s,u.sibling=h,s.child=u,Eo(s,i.child,null,o),u=s.child,u.memoizedState=pg(o),u.childLanes=yg(i,T,o),s.memoizedState=mg,s=h);else if(rs(s),tm(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var tt=T.dgst;T=tt,u=Error(r(419)),u.stack="",u.digest=T,zl({value:u,source:null,stack:null}),s=vg(i,s,o)}else if(We||Bl(i,s,o,!1),T=(o&i.childLanes)!==0,We||T){if(T=ce,T!==null&&(u=o&-o,u=(u&42)!==0?1:Ui(u),u=(u&(T.suspendedLanes|o))!==0?0:u,u!==0&&u!==z.retryLane))throw z.retryLane=u,lo(i,u),Xn(T,i,u),Tv;A.data==="$?"||Lg(),s=vg(i,s,o)}else A.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=z.treeContext,Ee=Ci(A.nextSibling),Rn=s,Wt=!0,ga=null,Wi=!1,i!==null&&(di[gi++]=Ar,di[gi++]=br,di[gi++]=ha,Ar=i.id,br=i.overflow,ha=s),s=_g(s,u.children),s.flags|=4096);return s}return h?(ss(),h=u.fallback,A=s.mode,z=i.child,tt=z.sibling,u=Sr(z,{mode:"hidden",children:u.children}),u.subtreeFlags=z.subtreeFlags&65011712,tt!==null?h=Sr(tt,h):(h=fa(h,A,o,null),h.flags|=2),h.return=s,u.return=s,u.sibling=h,s.child=u,u=h,h=s.child,A=i.child.memoizedState,A===null?A=pg(o):(z=A.cachePool,z!==null?(tt=Fe._currentValue,z=z.parent!==tt?{parent:tt,pool:tt}:z):z=p_(),A={baseLanes:A.baseLanes|o,cachePool:z}),h.memoizedState=A,h.childLanes=yg(i,T,o),s.memoizedState=mg,u):(rs(s),o=i.child,i=o.sibling,o=Sr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=o,s.memoizedState=null,o)}function _g(i,s){return s=lf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function lf(i,s){return i=jn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function vg(i,s,o){return Eo(s,i.child,null,o),i=_g(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Dv(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Ld(i.return,s,o)}function Eg(i,s,o,u,h){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Ov(i,s,o){var u=s.pendingProps,h=u.revealOrder,p=u.tail;if(an(i,s,u.children,o),u=je.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Dv(i,o,s);else if(i.tag===19)Dv(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}u&=1}switch(st(je,u),h){case"forwards":for(o=s.child,h=null;o!==null;)i=o.alternate,i!==null&&rf(i)===null&&(h=o),o=o.sibling;o=h,o===null?(h=s.child,s.child=null):(h=o.sibling,o.sibling=null),Eg(s,!1,h,o,p);break;case"backwards":for(o=null,h=s.child,s.child=null;h!==null;){if(i=h.alternate,i!==null&&rf(i)===null){s.child=h;break}i=h.sibling,h.sibling=o,o=h,h=i}Eg(s,!0,o,null,p);break;case"together":Eg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function xr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),cs|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Bl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Sr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Sr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function Tg(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Hc(i)))}function eR(i,s,o){switch(s.tag){case 3:St(s,s.stateNode.containerInfo),Jr(s,Fe,i.memoizedState.cache),Ul();break;case 27:case 5:Gt(s);break;case 4:St(s,s.stateNode.containerInfo);break;case 10:Jr(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(rs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?xv(i,s,o):(rs(s),i=xr(i,s,o),i!==null?i.sibling:null);rs(s);break;case 19:var h=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Bl(i,s,o,!1),u=(o&s.childLanes)!==0),h){if(u)return Ov(i,s,o);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),st(je,je.current),u)break;return null;case 22:case 23:return s.lanes=0,bv(i,s,o);case 24:Jr(s,Fe,i.memoizedState.cache)}return xr(i,s,o)}function Mv(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)We=!0;else{if(!Tg(i,o)&&(s.flags&128)===0)return We=!1,eR(i,s,o);We=(i.flags&131072)!==0}else We=!1,Wt&&(s.flags&1048576)!==0&&u_(s,Bc,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var u=s.elementType,h=u._init;if(u=h(u._payload),s.type=u,typeof u=="function")xd(u)?(i=Ea(u,i),s.tag=1,s=Cv(null,s,u,i,o)):(s.tag=0,s=gg(null,s,u,i,o));else{if(u!=null){if(h=u.$$typeof,h===q){s.tag=11,s=wv(null,s,u,i,o);break t}else if(h===M){s.tag=14,s=Sv(null,s,u,i,o);break t}}throw s=D(u)||u,Error(r(306,s,""))}}return s;case 0:return gg(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,h=Ea(u,s.pendingProps),Cv(i,s,u,h,o);case 3:t:{if(St(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;h=p.element,jd(i,s),Yl(s,u,null,o);var T=s.memoizedState;if(u=T.cache,Jr(s,Fe,u),u!==p.cache&&Ud(s,[Fe],o,!0),$l(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=Nv(i,s,u,o);break t}else if(u!==h){h=fi(Error(r(424)),s),zl(h),s=Nv(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ee=Ci(i.firstChild),Rn=s,Wt=!0,ga=null,Wi=!0,o=fv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ul(),u===h){s=xr(i,s,o);break t}an(i,s,u,o)}s=s.child}return s;case 26:return of(i,s),i===null?(o=L0(s.type,null,s.pendingProps,null))?s.memoizedState=o:Wt||(o=s.type,i=s.pendingProps,u=wf(yt.current).createElement(o),u[Ae]=s,u[ve]=i,ln(u,o,i),pe(u),s.stateNode=u):s.memoizedState=L0(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Gt(s),i===null&&Wt&&(u=s.stateNode=V0(s.type,s.pendingProps,yt.current),Rn=s,Wi=!0,h=Ee,gs(s.type)?(em=h,Ee=Ci(u.firstChild)):Ee=h),an(i,s,s.pendingProps.children,o),of(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Wt&&((h=u=Ee)&&(u=NR(u,s.type,s.pendingProps,Wi),u!==null?(s.stateNode=u,Rn=s,Ee=Ci(u.firstChild),Wi=!1,h=!0):h=!1),h||ma(s)),Gt(s),h=s.type,p=s.pendingProps,T=i!==null?i.memoizedProps:null,u=p.children,Zg(h,p)?u=null:T!==null&&Zg(h,T)&&(s.flags|=32),s.memoizedState!==null&&(h=Qd(i,s,Y1,null,null,o),mu._currentValue=h),of(i,s),an(i,s,u,o),s.child;case 6:return i===null&&Wt&&((i=o=Ee)&&(o=xR(o,s.pendingProps,Wi),o!==null?(s.stateNode=o,Rn=s,Ee=null,i=!0):i=!1),i||ma(s)),null;case 13:return xv(i,s,o);case 4:return St(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Eo(s,null,u,o):an(i,s,u,o),s.child;case 11:return wv(i,s,s.type,s.pendingProps,o);case 7:return an(i,s,s.pendingProps,o),s.child;case 8:return an(i,s,s.pendingProps.children,o),s.child;case 12:return an(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Jr(s,s.type,u.value),an(i,s,u.children,o),s.child;case 9:return h=s.type._context,u=s.pendingProps.children,ya(s),h=dn(h),u=u(h),s.flags|=1,an(i,s,u,o),s.child;case 14:return Sv(i,s,s.type,s.pendingProps,o);case 15:return Av(i,s,s.type,s.pendingProps,o);case 19:return Ov(i,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},i===null?(o=lf(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Sr(i.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return bv(i,s,o);case 24:return ya(s),u=dn(Fe),i===null?(h=Hd(),h===null&&(h=ce,p=zd(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=o),h=p),s.memoizedState={parent:u,cache:h},Fd(s),Jr(s,Fe,h)):((i.lanes&o)!==0&&(jd(i,s),Yl(s,null,null,o),$l()),h=i.memoizedState,p=s.memoizedState,h.parent!==u?(h={parent:u,cache:u},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Jr(s,Fe,u)):(u=p.cache,Jr(s,Fe,u),u!==h.cache&&Ud(s,[Fe],o,!0))),an(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Dr(i){i.flags|=4}function Vv(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!q0(s)){if(s=mi.current,s!==null&&((Kt&4194048)===Kt?Ji!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||s!==Ji))throw jl=qd,y_;i.flags|=8192}}function uf(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?wi():536870912,i.lanes|=s,Ao|=s)}function tu(i,s){if(!Wt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ye(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var h=i.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=i,h=h.sibling;else for(h=i.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=i,h=h.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function nR(i,s,o){var u=s.pendingProps;switch(Vd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(s),null;case 1:return ye(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ir(Fe),Qt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Ll(s)?Dr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,h_())),ye(s),null;case 26:return o=s.memoizedState,i===null?(Dr(s),o!==null?(ye(s),Vv(s,o)):(ye(s),s.flags&=-16777217)):o?o!==i.memoizedState?(Dr(s),ye(s),Vv(s,o)):(ye(s),s.flags&=-16777217):(i.memoizedProps!==u&&Dr(s),ye(s),s.flags&=-16777217),null;case 27:Se(s),o=yt.current;var h=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ye(s),null}i=ct.current,Ll(s)?c_(s):(i=V0(h,u,o),s.stateNode=i,Dr(s))}return ye(s),null;case 5:if(Se(s),o=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return ye(s),null}if(i=ct.current,Ll(s))c_(s);else{switch(h=wf(yt.current),i){case 1:i=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=h.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof u.is=="string"?h.createElement("select",{is:u.is}):h.createElement("select"),u.multiple?i.multiple=!0:u.size&&(i.size=u.size);break;default:i=typeof u.is=="string"?h.createElement(o,{is:u.is}):h.createElement(o)}}i[Ae]=s,i[ve]=u;t:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break t;for(;h.sibling===null;){if(h.return===null||h.return===s)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=i;t:switch(ln(i,o,u),o){case"button":case"input":case"select":case"textarea":i=!!u.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Dr(s)}}return ye(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Dr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=yt.current,Ll(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,h=Rn,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}i[Ae]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||I0(i.nodeValue,o)),i||ma(s)}else i=wf(i).createTextNode(u),i[Ae]=s,s.stateNode=i}return ye(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(h=Ll(s),u!==null&&u.dehydrated!==null){if(i===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ae]=s}else Ul(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ye(s),h=!1}else h=h_(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Nr(s),s):(Nr(s),null)}if(Nr(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,i=i!==null&&i.memoizedState!==null,o){u=s.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==h&&(u.flags|=2048)}return o!==i&&o&&(s.child.flags|=8192),uf(s,s.updateQueue),ye(s),null;case 4:return Qt(),i===null&&$g(s.stateNode.containerInfo),ye(s),null;case 10:return Ir(s.type),ye(s),null;case 19:if(nt(je),h=s.memoizedState,h===null)return ye(s),null;if(u=(s.flags&128)!==0,p=h.rendering,p===null)if(u)tu(h,!1);else{if(Te!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=rf(i),p!==null){for(s.flags|=128,tu(h,!1),i=p.updateQueue,s.updateQueue=i,uf(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)l_(o,i),o=o.sibling;return st(je,je.current&1|2),s.child}i=i.sibling}h.tail!==null&&Lt()>hf&&(s.flags|=128,u=!0,tu(h,!1),s.lanes=4194304)}else{if(!u)if(i=rf(p),i!==null){if(s.flags|=128,u=!0,i=i.updateQueue,s.updateQueue=i,uf(s,i),tu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Wt)return ye(s),null}else 2*Lt()-h.renderingStartTime>hf&&o!==536870912&&(s.flags|=128,u=!0,tu(h,!1),s.lanes=4194304);h.isBackwards?(p.sibling=s.child,s.child=p):(i=h.last,i!==null?i.sibling=p:s.child=p,h.last=p)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Lt(),s.sibling=null,i=je.current,st(je,u?i&1|2:i&1),s):(ye(s),null);case 22:case 23:return Nr(s),Kd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ye(s),s.subtreeFlags&6&&(s.flags|=8192)):ye(s),o=s.updateQueue,o!==null&&uf(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&nt(_a),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ir(Fe),ye(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function iR(i,s){switch(Vd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ir(Fe),Qt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Se(s),null;case 13:if(Nr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ul()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return nt(je),null;case 4:return Qt(),null;case 10:return Ir(s.type),null;case 22:case 23:return Nr(s),Kd(),i!==null&&nt(_a),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Ir(Fe),null;case 25:return null;default:return null}}function kv(i,s){switch(Vd(s),s.tag){case 3:Ir(Fe),Qt();break;case 26:case 27:case 5:Se(s);break;case 4:Qt();break;case 13:Nr(s);break;case 19:nt(je);break;case 10:Ir(s.type);break;case 22:case 23:Nr(s),Kd(),i!==null&&nt(_a);break;case 24:Ir(Fe)}}function eu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&i)===i){u=void 0;var p=o.create,T=o.inst;u=p(),T.destroy=u}o=o.next}while(o!==h)}}catch(A){le(s,s.return,A)}}function as(i,s,o){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var p=h.next;u=p;do{if((u.tag&i)===i){var T=u.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,h=s;var z=o,tt=A;try{tt()}catch(lt){le(h,z,lt)}}}u=u.next}while(u!==p)}}catch(lt){le(s,s.return,lt)}}function Pv(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{S_(s,o)}catch(u){le(i,i.return,u)}}}function Lv(i,s,o){o.props=Ea(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){le(i,s,u)}}function nu(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(h){le(i,s,h)}}function tr(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){le(i,s,h)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){le(i,s,h)}else o.current=null}function Uv(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){le(i,i.return,h)}}function wg(i,s,o){try{var u=i.stateNode;AR(u,i.type,o,s),u[ve]=s}catch(h){le(i,i.return,h)}}function zv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&gs(i.type)||i.tag===4}function Sg(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||zv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&gs(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ag(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Tf));else if(u!==4&&(u===27&&gs(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Ag(i,s,o),i=i.sibling;i!==null;)Ag(i,s,o),i=i.sibling}function cf(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&gs(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(cf(i,s,o),i=i.sibling;i!==null;)cf(i,s,o),i=i.sibling}function Bv(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);ln(s,u,o),s[Ae]=i,s[ve]=o}catch(p){le(i,i.return,p)}}var Or=!1,Re=!1,bg=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,Je=null;function rR(i,s){if(i=i.containerInfo,Xg=Cf,i=Wy(i),Sd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break t}var T=0,A=-1,z=-1,tt=0,lt=0,ft=i,it=null;e:for(;;){for(var at;ft!==o||h!==0&&ft.nodeType!==3||(A=T+h),ft!==p||u!==0&&ft.nodeType!==3||(z=T+u),ft.nodeType===3&&(T+=ft.nodeValue.length),(at=ft.firstChild)!==null;)it=ft,ft=at;for(;;){if(ft===i)break e;if(it===o&&++tt===h&&(A=T),it===p&&++lt===u&&(z=T),(at=ft.nextSibling)!==null)break;ft=it,it=ft.parentNode}ft=at}o=A===-1||z===-1?null:{start:A,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qg={focusedElem:i,selectionRange:o},Cf=!1,Je=s;Je!==null;)if(s=Je,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Je=i;else for(;Je!==null;){switch(s=Je,p=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,h=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Dt=Ea(o.type,h,o.elementType===o.type);i=u.getSnapshotBeforeUpdate(Dt,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Rt){le(o,o.return,Rt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Jg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Je=i;break}Je=s.return}}function qv(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:os(i,o),u&4&&eu(5,o);break;case 1:if(os(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(T){le(o,o.return,T)}else{var h=Ea(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(h,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){le(o,o.return,T)}}u&64&&Pv(o),u&512&&nu(o,o.return);break;case 3:if(os(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{S_(i,s)}catch(T){le(o,o.return,T)}}break;case 27:s===null&&u&4&&Bv(o);case 26:case 5:os(i,o),s===null&&u&4&&Uv(o),u&512&&nu(o,o.return);break;case 12:os(i,o);break;case 13:os(i,o),u&4&&Gv(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=dR.bind(null,o),DR(i,o))));break;case 22:if(u=o.memoizedState!==null||Or,!u){s=s!==null&&s.memoizedState!==null||Re,h=Or;var p=Re;Or=u,(Re=s)&&!p?ls(i,o,(o.subtreeFlags&8772)!==0):os(i,o),Or=h,Re=p}break;case 30:break;default:os(i,o)}}function Fv(i){var s=i.alternate;s!==null&&(i.alternate=null,Fv(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Hi(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ge=null,Dn=!1;function Mr(i,s,o){for(o=o.child;o!==null;)jv(i,s,o),o=o.sibling}function jv(i,s,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Jt,o)}catch{}switch(o.tag){case 26:Re||tr(o,s),Mr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Re||tr(o,s);var u=ge,h=Dn;gs(o.type)&&(ge=o.stateNode,Dn=!1),Mr(i,s,o),fu(o.stateNode),ge=u,Dn=h;break;case 5:Re||tr(o,s);case 6:if(u=ge,h=Dn,ge=null,Mr(i,s,o),ge=u,Dn=h,ge!==null)if(Dn)try{(ge.nodeType===9?ge.body:ge.nodeName==="HTML"?ge.ownerDocument.body:ge).removeChild(o.stateNode)}catch(p){le(o,s,p)}else try{ge.removeChild(o.stateNode)}catch(p){le(o,s,p)}break;case 18:ge!==null&&(Dn?(i=ge,O0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),vu(i)):O0(ge,o.stateNode));break;case 4:u=ge,h=Dn,ge=o.stateNode.containerInfo,Dn=!0,Mr(i,s,o),ge=u,Dn=h;break;case 0:case 11:case 14:case 15:Re||as(2,o,s),Re||as(4,o,s),Mr(i,s,o);break;case 1:Re||(tr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Lv(o,s,u)),Mr(i,s,o);break;case 21:Mr(i,s,o);break;case 22:Re=(u=Re)||o.memoizedState!==null,Mr(i,s,o),Re=u;break;default:Mr(i,s,o)}}function Gv(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{vu(i)}catch(o){le(s,s.return,o)}}function sR(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Hv),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Hv),s;default:throw Error(r(435,i.tag))}}function Rg(i,s){var o=sR(i);s.forEach(function(u){var h=gR.bind(null,i,u);o.has(u)||(o.add(u),u.then(h,h))})}function Gn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],p=i,T=s,A=T;t:for(;A!==null;){switch(A.tag){case 27:if(gs(A.type)){ge=A.stateNode,Dn=!1;break t}break;case 5:ge=A.stateNode,Dn=!1;break t;case 3:case 4:ge=A.stateNode.containerInfo,Dn=!0;break t}A=A.return}if(ge===null)throw Error(r(160));jv(p,T,h),ge=null,Dn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)$v(s,i),s=s.sibling}var Ii=null;function $v(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Gn(s,i),$n(i),u&4&&(as(3,i,i.return),eu(3,i),as(5,i,i.return));break;case 1:Gn(s,i),$n(i),u&512&&(Re||o===null||tr(o,o.return)),u&64&&Or&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=Ii;if(Gn(s,i),$n(i),u&512&&(Re||o===null||tr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,h=h.ownerDocument||h;e:switch(u){case"title":p=h.getElementsByTagName("title")[0],(!p||p[gr]||p[Ae]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(u),h.head.insertBefore(p,h.querySelector("head > title"))),ln(p,u,o),p[Ae]=i,pe(p),u=p;break t;case"link":var T=B0("link","href",h).get(u+(o.href||""));if(T){for(var A=0;A<T.length;A++)if(p=T[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(A,1);break e}}p=h.createElement(u),ln(p,u,o),h.head.appendChild(p);break;case"meta":if(T=B0("meta","content",h).get(u+(o.content||""))){for(A=0;A<T.length;A++)if(p=T[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(A,1);break e}}p=h.createElement(u),ln(p,u,o),h.head.appendChild(p);break;default:throw Error(r(468,u))}p[Ae]=i,pe(p),u=p}i.stateNode=u}else H0(h,i.type,i.stateNode);else i.stateNode=z0(h,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?H0(h,i.type,i.stateNode):z0(h,u,i.memoizedProps)):u===null&&i.stateNode!==null&&wg(i,i.memoizedProps,o.memoizedProps)}break;case 27:Gn(s,i),$n(i),u&512&&(Re||o===null||tr(o,o.return)),o!==null&&u&4&&wg(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Gn(s,i),$n(i),u&512&&(Re||o===null||tr(o,o.return)),i.flags&32){h=i.stateNode;try{oi(h,"")}catch(at){le(i,i.return,at)}}u&4&&i.stateNode!=null&&(h=i.memoizedProps,wg(i,h,o!==null?o.memoizedProps:h)),u&1024&&(bg=!0);break;case 6:if(Gn(s,i),$n(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(at){le(i,i.return,at)}}break;case 3:if(bf=null,h=Ii,Ii=Sf(s.containerInfo),Gn(s,i),Ii=h,$n(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{vu(s.containerInfo)}catch(at){le(i,i.return,at)}bg&&(bg=!1,Yv(i));break;case 4:u=Ii,Ii=Sf(i.stateNode.containerInfo),Gn(s,i),$n(i),Ii=u;break;case 12:Gn(s,i),$n(i);break;case 13:Gn(s,i),$n(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Og=Lt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rg(i,u)));break;case 22:h=i.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,tt=Or,lt=Re;if(Or=tt||h,Re=lt||z,Gn(s,i),Re=lt,Or=tt,$n(i),u&8192)t:for(s=i.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(o===null||z||Or||Re||Ta(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){z=o=s;try{if(p=z.stateNode,h)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=z.stateNode;var ft=z.memoizedProps.style,it=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;A.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(at){le(z,z.return,at)}}}else if(s.tag===6){if(o===null){z=s;try{z.stateNode.nodeValue=h?"":z.memoizedProps}catch(at){le(z,z.return,at)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Rg(i,o))));break;case 19:Gn(s,i),$n(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Rg(i,u)));break;case 30:break;case 21:break;default:Gn(s,i),$n(i)}}function $n(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(zv(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var h=o.stateNode,p=Sg(i);cf(i,p,h);break;case 5:var T=o.stateNode;o.flags&32&&(oi(T,""),o.flags&=-33);var A=Sg(i);cf(i,A,T);break;case 3:case 4:var z=o.stateNode.containerInfo,tt=Sg(i);Ag(i,tt,z);break;default:throw Error(r(161))}}catch(lt){le(i,i.return,lt)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Yv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Yv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function os(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)qv(i,s.alternate,s),s=s.sibling}function Ta(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:as(4,s,s.return),Ta(s);break;case 1:tr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Lv(s,s.return,o),Ta(s);break;case 27:fu(s.stateNode);case 26:case 5:tr(s,s.return),Ta(s);break;case 22:s.memoizedState===null&&Ta(s);break;case 30:Ta(s);break;default:Ta(s)}i=i.sibling}}function ls(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,h=i,p=s,T=p.flags;switch(p.tag){case 0:case 11:case 15:ls(h,p,o),eu(4,p);break;case 1:if(ls(h,p,o),u=p,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(tt){le(u,u.return,tt)}if(u=p,h=u.updateQueue,h!==null){var A=u.stateNode;try{var z=h.shared.hiddenCallbacks;if(z!==null)for(h.shared.hiddenCallbacks=null,h=0;h<z.length;h++)w_(z[h],A)}catch(tt){le(u,u.return,tt)}}o&&T&64&&Pv(p),nu(p,p.return);break;case 27:Bv(p);case 26:case 5:ls(h,p,o),o&&u===null&&T&4&&Uv(p),nu(p,p.return);break;case 12:ls(h,p,o);break;case 13:ls(h,p,o),o&&T&4&&Gv(h,p);break;case 22:p.memoizedState===null&&ls(h,p,o),nu(p,p.return);break;case 30:break;default:ls(h,p,o)}s=s.sibling}}function Ig(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Hl(o))}function Cg(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Hl(i))}function er(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Kv(i,s,o,u),s=s.sibling}function Kv(i,s,o,u){var h=s.flags;switch(s.tag){case 0:case 11:case 15:er(i,s,o,u),h&2048&&eu(9,s);break;case 1:er(i,s,o,u);break;case 3:er(i,s,o,u),h&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Hl(i)));break;case 12:if(h&2048){er(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,T=p.id,A=p.onPostCommit;typeof A=="function"&&A(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){le(s,s.return,z)}}else er(i,s,o,u);break;case 13:er(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,T=s.alternate,s.memoizedState!==null?p._visibility&2?er(i,s,o,u):iu(i,s):p._visibility&2?er(i,s,o,u):(p._visibility|=2,To(i,s,o,u,(s.subtreeFlags&10256)!==0)),h&2048&&Ig(T,s);break;case 24:er(i,s,o,u),h&2048&&Cg(s.alternate,s);break;default:er(i,s,o,u)}}function To(i,s,o,u,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=i,T=s,A=o,z=u,tt=T.flags;switch(T.tag){case 0:case 11:case 15:To(p,T,A,z,h),eu(8,T);break;case 23:break;case 22:var lt=T.stateNode;T.memoizedState!==null?lt._visibility&2?To(p,T,A,z,h):iu(p,T):(lt._visibility|=2,To(p,T,A,z,h)),h&&tt&2048&&Ig(T.alternate,T);break;case 24:To(p,T,A,z,h),h&&tt&2048&&Cg(T.alternate,T);break;default:To(p,T,A,z,h)}s=s.sibling}}function iu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,h=u.flags;switch(u.tag){case 22:iu(o,u),h&2048&&Ig(u.alternate,u);break;case 24:iu(o,u),h&2048&&Cg(u.alternate,u);break;default:iu(o,u)}s=s.sibling}}var ru=8192;function wo(i){if(i.subtreeFlags&ru)for(i=i.child;i!==null;)Xv(i),i=i.sibling}function Xv(i){switch(i.tag){case 26:wo(i),i.flags&ru&&i.memoizedState!==null&&jR(Ii,i.memoizedState,i.memoizedProps);break;case 5:wo(i);break;case 3:case 4:var s=Ii;Ii=Sf(i.stateNode.containerInfo),wo(i),Ii=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=ru,ru=16777216,wo(i),ru=s):wo(i));break;default:wo(i)}}function Qv(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function su(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Je=u,Wv(u,i)}Qv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zv(i),i=i.sibling}function Zv(i){switch(i.tag){case 0:case 11:case 15:su(i),i.flags&2048&&as(9,i,i.return);break;case 3:su(i);break;case 12:su(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,ff(i)):su(i);break;default:su(i)}}function ff(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Je=u,Wv(u,i)}Qv(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:as(8,s,s.return),ff(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ff(s));break;default:ff(s)}i=i.sibling}}function Wv(i,s){for(;Je!==null;){var o=Je;switch(o.tag){case 0:case 11:case 15:as(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Je=u;else t:for(o=i;Je!==null;){u=Je;var h=u.sibling,p=u.return;if(Fv(u),u===o){Je=null;break t}if(h!==null){h.return=p,Je=h;break t}Je=p}}}var aR={getCacheForType:function(i){var s=dn(Fe),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o}},oR=typeof WeakMap=="function"?WeakMap:Map,ne=0,ce=null,Ht=null,Kt=0,ie=0,Yn=null,us=!1,So=!1,Ng=!1,Vr=0,Te=0,cs=0,wa=0,xg=0,pi=0,Ao=0,au=null,On=null,Dg=!1,Og=0,hf=1/0,df=null,fs=null,on=0,hs=null,bo=null,Ro=0,Mg=0,Vg=null,Jv=null,ou=0,kg=null;function Kn(){if((ne&2)!==0&&Kt!==0)return Kt&-Kt;if(C.T!==null){var i=ho;return i!==0?i:qg()}return zi()}function t0(){pi===0&&(pi=(Kt&536870912)===0||Wt?dr():536870912);var i=mi.current;return i!==null&&(i.flags|=32),pi}function Xn(i,s,o){(i===ce&&(ie===2||ie===9)||i.cancelPendingCommit!==null)&&(Io(i,0),ds(i,Kt,pi,!1)),ei(i,o),((ne&2)===0||i!==ce)&&(i===ce&&((ne&2)===0&&(wa|=o),Te===4&&ds(i,Kt,pi,!1)),nr(i))}function e0(i,s,o){if((ne&6)!==0)throw Error(r(327));var u=!o&&(s&124)===0&&(s&i.expiredLanes)===0||Sn(i,s),h=u?cR(i,s):Ug(i,s,!0),p=u;do{if(h===0){So&&!u&&ds(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!lR(o)){h=Ug(i,s,!1),p=!1;continue}if(h===2){if(p=s,i.errorRecoveryDisabledLanes&p)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;t:{var A=i;h=au;var z=A.current.memoizedState.isDehydrated;if(z&&(Io(A,T).flags|=256),T=Ug(A,T,!1),T!==2){if(Ng&&!z){A.errorRecoveryDisabledLanes|=p,wa|=p,h=4;break t}p=On,On=h,p!==null&&(On===null?On=p:On.push.apply(On,p))}h=T}if(p=!1,h!==2)continue}}if(h===1){Io(i,0),ds(i,s,0,!0);break}t:{switch(u=i,p=h,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ds(u,s,pi,!us);break t;case 2:On=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Og+300-Lt(),10<h)){if(ds(u,s,pi,!us),nn(u,0,!0)!==0)break t;u.timeoutHandle=x0(n0.bind(null,u,o,On,df,Dg,s,pi,wa,Ao,us,p,2,-0,0),h);break t}n0(u,o,On,df,Dg,s,pi,wa,Ao,us,p,0,-0,0)}}break}while(!0);nr(i)}function n0(i,s,o,u,h,p,T,A,z,tt,lt,ft,it,at){if(i.timeoutHandle=-1,ft=s.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(gu={stylesheets:null,count:0,unsuspend:FR},Xv(s),ft=GR(),ft!==null)){i.cancelPendingCommit=ft(u0.bind(null,i,s,p,o,u,h,T,A,z,lt,1,it,at)),ds(i,p,T,!tt);return}u0(i,s,p,o,u,h,T,A,z)}function lR(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Fn(p(),h))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ds(i,s,o,u){s&=~xg,s&=~wa,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var h=s;0<h;){var p=31-me(h),T=1<<p;u[p]=-1,h&=~T}o!==0&&ni(i,o,s)}function gf(){return(ne&6)===0?(lu(0),!1):!0}function Pg(){if(Ht!==null){if(ie===0)var i=Ht.return;else i=Ht,Rr=pa=null,Jd(i),vo=null,Wl=0,i=Ht;for(;i!==null;)kv(i.alternate,i),i=i.return;Ht=null}}function Io(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,RR(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Pg(),ce=i,Ht=o=Sr(i.current,null),Kt=s,ie=0,Yn=null,us=!1,So=Sn(i,s),Ng=!1,Ao=pi=xg=wa=cs=Te=0,On=au=null,Dg=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var h=31-me(u),p=1<<h;s|=i[h],u&=~p}return Vr=s,kc(),o}function i0(i,s){kt=null,C.H=tf,s===Fl||s===jc?(s=E_(),ie=3):s===y_?(s=E_(),ie=4):ie=s===Tv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yn=s,Ht===null&&(Te=1,af(i,fi(s,i.current)))}function r0(){var i=C.H;return C.H=tf,i===null?tf:i}function s0(){var i=C.A;return C.A=aR,i}function Lg(){Te=4,us||(Kt&4194048)!==Kt&&mi.current!==null||(So=!0),(cs&134217727)===0&&(wa&134217727)===0||ce===null||ds(ce,Kt,pi,!1)}function Ug(i,s,o){var u=ne;ne|=2;var h=r0(),p=s0();(ce!==i||Kt!==s)&&(df=null,Io(i,s)),s=!1;var T=Te;t:do try{if(ie!==0&&Ht!==null){var A=Ht,z=Yn;switch(ie){case 8:Pg(),T=6;break t;case 3:case 2:case 9:case 6:mi.current===null&&(s=!0);var tt=ie;if(ie=0,Yn=null,Co(i,A,z,tt),o&&So){T=0;break t}break;default:tt=ie,ie=0,Yn=null,Co(i,A,z,tt)}}uR(),T=Te;break}catch(lt){i0(i,lt)}while(!0);return s&&i.shellSuspendCounter++,Rr=pa=null,ne=u,C.H=h,C.A=p,Ht===null&&(ce=null,Kt=0,kc()),T}function uR(){for(;Ht!==null;)a0(Ht)}function cR(i,s){var o=ne;ne|=2;var u=r0(),h=s0();ce!==i||Kt!==s?(df=null,hf=Lt()+500,Io(i,s)):So=Sn(i,s);t:do try{if(ie!==0&&Ht!==null){s=Ht;var p=Yn;e:switch(ie){case 1:ie=0,Yn=null,Co(i,s,p,1);break;case 2:case 9:if(__(p)){ie=0,Yn=null,o0(s);break}s=function(){ie!==2&&ie!==9||ce!==i||(ie=7),nr(i)},p.then(s,s);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:__(p)?(ie=0,Yn=null,o0(s)):(ie=0,Yn=null,Co(i,s,p,7));break;case 5:var T=null;switch(Ht.tag){case 26:T=Ht.memoizedState;case 5:case 27:var A=Ht;if(!T||q0(T)){ie=0,Yn=null;var z=A.sibling;if(z!==null)Ht=z;else{var tt=A.return;tt!==null?(Ht=tt,mf(tt)):Ht=null}break e}}ie=0,Yn=null,Co(i,s,p,5);break;case 6:ie=0,Yn=null,Co(i,s,p,6);break;case 8:Pg(),Te=6;break t;default:throw Error(r(462))}}fR();break}catch(lt){i0(i,lt)}while(!0);return Rr=pa=null,C.H=u,C.A=h,ne=o,Ht!==null?0:(ce=null,Kt=0,kc(),Te)}function fR(){for(;Ht!==null&&!fe();)a0(Ht)}function a0(i){var s=Mv(i.alternate,i,Vr);i.memoizedProps=i.pendingProps,s===null?mf(i):Ht=s}function o0(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=Iv(o,s,s.pendingProps,s.type,void 0,Kt);break;case 11:s=Iv(o,s,s.pendingProps,s.type.render,s.ref,Kt);break;case 5:Jd(s);default:kv(o,s),s=Ht=l_(s,Vr),s=Mv(o,s,Vr)}i.memoizedProps=i.pendingProps,s===null?mf(i):Ht=s}function Co(i,s,o,u){Rr=pa=null,Jd(s),vo=null,Wl=0;var h=s.return;try{if(tR(i,h,s,o,Kt)){Te=1,af(i,fi(o,i.current)),Ht=null;return}}catch(p){if(h!==null)throw Ht=h,p;Te=1,af(i,fi(o,i.current)),Ht=null;return}s.flags&32768?(Wt||u===1?i=!0:So||(Kt&536870912)!==0?i=!1:(us=i=!0,(u===2||u===9||u===3||u===6)&&(u=mi.current,u!==null&&u.tag===13&&(u.flags|=16384))),l0(s,i)):mf(s)}function mf(i){var s=i;do{if((s.flags&32768)!==0){l0(s,us);return}i=s.return;var o=nR(s.alternate,s,Vr);if(o!==null){Ht=o;return}if(s=s.sibling,s!==null){Ht=s;return}Ht=s=i}while(s!==null);Te===0&&(Te=5)}function l0(i,s){do{var o=iR(i.alternate,i);if(o!==null){o.flags&=32767,Ht=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Ht=i;return}Ht=i=o}while(i!==null);Te=6,Ht=null}function u0(i,s,o,u,h,p,T,A,z){i.cancelPendingCommit=null;do pf();while(on!==0);if((ne&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=Cd,Bn(i,o,p,T,A,z),i===ce&&(Ht=ce=null,Kt=0),bo=s,hs=i,Ro=o,Mg=p,Vg=h,Jv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,mR(Ln,function(){return g0(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=C.T,C.T=null,h=F.p,F.p=2,T=ne,ne|=4;try{rR(i,s,o)}finally{ne=T,F.p=h,C.T=u}}on=1,c0(),f0(),h0()}}function c0(){if(on===1){on=0;var i=hs,s=bo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=C.T,C.T=null;var u=F.p;F.p=2;var h=ne;ne|=4;try{$v(s,i);var p=Qg,T=Wy(i.containerInfo),A=p.focusedElem,z=p.selectionRange;if(T!==A&&A&&A.ownerDocument&&Zy(A.ownerDocument.documentElement,A)){if(z!==null&&Sd(A)){var tt=z.start,lt=z.end;if(lt===void 0&&(lt=tt),"selectionStart"in A)A.selectionStart=tt,A.selectionEnd=Math.min(lt,A.value.length);else{var ft=A.ownerDocument||document,it=ft&&ft.defaultView||window;if(it.getSelection){var at=it.getSelection(),Dt=A.textContent.length,Rt=Math.min(z.start,Dt),oe=z.end===void 0?Rt:Math.min(z.end,Dt);!at.extend&&Rt>oe&&(T=oe,oe=Rt,Rt=T);var K=Qy(A,Rt),H=Qy(A,oe);if(K&&H&&(at.rangeCount!==1||at.anchorNode!==K.node||at.anchorOffset!==K.offset||at.focusNode!==H.node||at.focusOffset!==H.offset)){var W=ft.createRange();W.setStart(K.node,K.offset),at.removeAllRanges(),Rt>oe?(at.addRange(W),at.extend(H.node,H.offset)):(W.setEnd(H.node,H.offset),at.addRange(W))}}}}for(ft=[],at=A;at=at.parentNode;)at.nodeType===1&&ft.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ft.length;A++){var ut=ft[A];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}Cf=!!Xg,Qg=Xg=null}finally{ne=h,F.p=u,C.T=o}}i.current=s,on=2}}function f0(){if(on===2){on=0;var i=hs,s=bo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=C.T,C.T=null;var u=F.p;F.p=2;var h=ne;ne|=4;try{qv(i,s.alternate,s)}finally{ne=h,F.p=u,C.T=o}}on=3}}function h0(){if(on===4||on===3){on=0,vn();var i=hs,s=bo,o=Ro,u=Jv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?on=5:(on=0,bo=hs=null,d0(i,i.pendingLanes));var h=i.pendingLanes;if(h===0&&(fs=null),Kr(o),s=s.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Jt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=C.T,h=F.p,F.p=2,C.T=null;try{for(var p=i.onRecoverableError,T=0;T<u.length;T++){var A=u[T];p(A.value,{componentStack:A.stack})}}finally{C.T=s,F.p=h}}(Ro&3)!==0&&pf(),nr(i),h=i.pendingLanes,(o&4194090)!==0&&(h&42)!==0?i===kg?ou++:(ou=0,kg=i):ou=0,lu(0)}}function d0(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Hl(s)))}function pf(i){return c0(),f0(),h0(),g0()}function g0(){if(on!==5)return!1;var i=hs,s=Mg;Mg=0;var o=Kr(Ro),u=C.T,h=F.p;try{F.p=32>o?32:o,C.T=null,o=Vg,Vg=null;var p=hs,T=Ro;if(on=0,bo=hs=null,Ro=0,(ne&6)!==0)throw Error(r(331));var A=ne;if(ne|=4,Zv(p.current),Kv(p,p.current,T,o),ne=A,lu(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Jt,p)}catch{}return!0}finally{F.p=h,C.T=u,d0(i,s)}}function m0(i,s,o){s=fi(o,s),s=dg(i.stateNode,s,2),i=ns(i,s,2),i!==null&&(ei(i,2),nr(i))}function le(i,s,o){if(i.tag===3)m0(i,i,o);else for(;s!==null;){if(s.tag===3){m0(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(fs===null||!fs.has(u))){i=fi(o,i),o=vv(2),u=ns(s,o,2),u!==null&&(Ev(o,u,s,i),ei(u,2),nr(u));break}}s=s.return}}function zg(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new oR;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(o)||(Ng=!0,h.add(o),i=hR.bind(null,i,s,o),s.then(i,i))}function hR(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ce===i&&(Kt&o)===o&&(Te===4||Te===3&&(Kt&62914560)===Kt&&300>Lt()-Og?(ne&2)===0&&Io(i,0):xg|=o,Ao===Kt&&(Ao=0)),nr(i)}function p0(i,s){s===0&&(s=wi()),i=lo(i,s),i!==null&&(ei(i,s),nr(i))}function dR(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),p0(i,o)}function gR(i,s){var o=0;switch(i.tag){case 13:var u=i.stateNode,h=i.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),p0(i,o)}function mR(i,s){return Ue(i,s)}var yf=null,No=null,Bg=!1,_f=!1,Hg=!1,Sa=0;function nr(i){i!==No&&i.next===null&&(No===null?yf=No=i:No=No.next=i),_f=!0,Bg||(Bg=!0,yR())}function lu(i,s){if(!Hg&&_f){Hg=!0;do for(var o=!1,u=yf;u!==null;){if(i!==0){var h=u.pendingLanes;if(h===0)var p=0;else{var T=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-me(42|i)+1)-1,p&=h&~(T&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,E0(u,p))}else p=Kt,p=nn(u,u===ce?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Sn(u,p)||(o=!0,E0(u,p));u=u.next}while(o);Hg=!1}}function pR(){y0()}function y0(){_f=Bg=!1;var i=0;Sa!==0&&(bR()&&(i=Sa),Sa=0);for(var s=Lt(),o=null,u=yf;u!==null;){var h=u.next,p=_0(u,s);p===0?(u.next=null,o===null?yf=h:o.next=h,h===null&&(No=o)):(o=u,(i!==0||(p&3)!==0)&&(_f=!0)),u=h}lu(i)}function _0(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,h=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var T=31-me(p),A=1<<T,z=h[T];z===-1?((A&o)===0||(A&u)!==0)&&(h[T]=hr(A,s)):z<=s&&(i.expiredLanes|=A),p&=~A}if(s=ce,o=Kt,o=nn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(ie===2||ie===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&xe(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Sn(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&xe(u),Kr(o)){case 2:case 8:o=Cn;break;case 32:o=Ln;break;case 268435456:o=Un;break;default:o=Ln}return u=v0.bind(null,i),o=Ue(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&xe(u),i.callbackPriority=2,i.callbackNode=null,2}function v0(i,s){if(on!==0&&on!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(pf()&&i.callbackNode!==o)return null;var u=Kt;return u=nn(i,i===ce?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(e0(i,u,s),_0(i,Lt()),i.callbackNode!=null&&i.callbackNode===o?v0.bind(null,i):null)}function E0(i,s){if(pf())return null;e0(i,s,!0)}function yR(){IR(function(){(ne&6)!==0?Ue(ze,pR):y0()})}function qg(){return Sa===0&&(Sa=dr()),Sa}function T0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Qa(""+i)}function w0(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function _R(i,s,o,u,h){if(s==="submit"&&o&&o.stateNode===h){var p=T0((h[ve]||null).action),T=u.submitter;T&&(s=(s=T[ve]||null)?T0(s.formAction):T.getAttribute("formAction"),s!==null&&(p=s,T=null));var A=new Za("action","action",null,u,h);i.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Sa!==0){var z=T?w0(h,T):new FormData(h);lg(o,{pending:!0,data:z,method:h.method,action:p},null,z)}}else typeof p=="function"&&(A.preventDefault(),z=T?w0(h,T):new FormData(h),lg(o,{pending:!0,data:z,method:h.method,action:p},p,z))},currentTarget:h}]})}}for(var Fg=0;Fg<Id.length;Fg++){var jg=Id[Fg],vR=jg.toLowerCase(),ER=jg[0].toUpperCase()+jg.slice(1);Ri(vR,"on"+ER)}Ri(e_,"onAnimationEnd"),Ri(n_,"onAnimationIteration"),Ri(i_,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(L1,"onTransitionRun"),Ri(U1,"onTransitionStart"),Ri(z1,"onTransitionCancel"),Ri(r_,"onTransitionEnd"),Si("onMouseEnter",["mouseout","mouseover"]),Si("onMouseLeave",["mouseout","mouseover"]),Si("onPointerEnter",["pointerout","pointerover"]),Si("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uu));function S0(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],h=u.event;u=u.listeners;t:{var p=void 0;if(s)for(var T=u.length-1;0<=T;T--){var A=u[T],z=A.instance,tt=A.currentTarget;if(A=A.listener,z!==p&&h.isPropagationStopped())break t;p=A,h.currentTarget=tt;try{p(h)}catch(lt){sf(lt)}h.currentTarget=null,p=z}else for(T=0;T<u.length;T++){if(A=u[T],z=A.instance,tt=A.currentTarget,A=A.listener,z!==p&&h.isPropagationStopped())break t;p=A,h.currentTarget=tt;try{p(h)}catch(lt){sf(lt)}h.currentTarget=null,p=z}}}}function qt(i,s){var o=s[Xs];o===void 0&&(o=s[Xs]=new Set);var u=i+"__bubble";o.has(u)||(A0(s,i,2,!1),o.add(u))}function Gg(i,s,o){var u=0;s&&(u|=4),A0(o,i,u,s)}var vf="_reactListening"+Math.random().toString(36).slice(2);function $g(i){if(!i[vf]){i[vf]=!0,Qs.forEach(function(o){o!=="selectionchange"&&(TR.has(o)||Gg(o,!1,i),Gg(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[vf]||(s[vf]=!0,Gg("selectionchange",!1,s))}}function A0(i,s,o,u){switch(K0(s)){case 2:var h=KR;break;case 8:h=XR;break;default:h=am}o=h.bind(null,s,o,i),h=void 0,!ui||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?i.addEventListener(s,o,{capture:!0,passive:h}):i.addEventListener(s,o,!0):h!==void 0?i.addEventListener(s,o,{passive:h}):i.addEventListener(s,o,!1)}function Yg(i,s,o,u,h){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var A=u.stateNode.containerInfo;if(A===h)break;if(T===4)for(T=u.return;T!==null;){var z=T.tag;if((z===3||z===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;A!==null;){if(T=ii(A),T===null)return;if(z=T.tag,z===5||z===6||z===26||z===27){u=p=T;continue t}A=A.parentNode}}u=u.return}Ec(function(){var tt=p,lt=li(o),ft=[];t:{var it=s_.get(i);if(it!==void 0){var at=Za,Dt=i;switch(i){case"keypress":if(Yi(o)===0)break t;case"keydown":case"keyup":at=io;break;case"focusin":Dt="focus",at=to;break;case"focusout":Dt="blur",at=to;break;case"beforeblur":case"afterblur":at=to;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=ci;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Cc;break;case e_:case n_:case i_:at=eo;break;case r_:at=xc;break;case"scroll":case"scrollend":at=Tc;break;case"wheel":at=ro;break;case"copy":case"cut":case"paste":at=no;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Ml;break;case"toggle":case"beforetoggle":at=Oc}var Rt=(s&4)!==0,oe=!Rt&&(i==="scroll"||i==="scrollend"),K=Rt?it!==null?it+"Capture":null:it;Rt=[];for(var H=tt,W;H!==null;){var ut=H;if(W=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||W===null||K===null||(ut=na(H,K),ut!=null&&Rt.push(cu(H,ut,W))),oe)break;H=H.return}0<Rt.length&&(it=new at(it,Dt,null,o,lt),ft.push({event:it,listeners:Rt}))}}if((s&7)===0){t:{if(it=i==="mouseover"||i==="pointerover",at=i==="mouseout"||i==="pointerout",it&&o!==yr&&(Dt=o.relatedTarget||o.fromElement)&&(ii(Dt)||Dt[Nn]))break t;if((at||it)&&(it=lt.window===lt?lt:(it=lt.ownerDocument)?it.defaultView||it.parentWindow:window,at?(Dt=o.relatedTarget||o.toElement,at=tt,Dt=Dt?ii(Dt):null,Dt!==null&&(oe=l(Dt),Rt=Dt.tag,Dt!==oe||Rt!==5&&Rt!==27&&Rt!==6)&&(Dt=null)):(at=null,Dt=tt),at!==Dt)){if(Rt=ci,ut="onMouseLeave",K="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Rt=Ml,ut="onPointerLeave",K="onPointerEnter",H="pointer"),oe=at==null?it:si(at),W=Dt==null?it:si(Dt),it=new Rt(ut,H+"leave",at,o,lt),it.target=oe,it.relatedTarget=W,ut=null,ii(lt)===tt&&(Rt=new Rt(K,H+"enter",Dt,o,lt),Rt.target=W,Rt.relatedTarget=oe,ut=Rt),oe=ut,at&&Dt)e:{for(Rt=at,K=Dt,H=0,W=Rt;W;W=xo(W))H++;for(W=0,ut=K;ut;ut=xo(ut))W++;for(;0<H-W;)Rt=xo(Rt),H--;for(;0<W-H;)K=xo(K),W--;for(;H--;){if(Rt===K||K!==null&&Rt===K.alternate)break e;Rt=xo(Rt),K=xo(K)}Rt=null}else Rt=null;at!==null&&b0(ft,it,at,Rt,!1),Dt!==null&&oe!==null&&b0(ft,oe,Dt,Rt,!0)}}t:{if(it=tt?si(tt):window,at=it.nodeName&&it.nodeName.toLowerCase(),at==="select"||at==="input"&&it.type==="file")var Et=jy;else if(qe(it))if(Gy)Et=V1;else{Et=O1;var Ut=D1}else at=it.nodeName,!at||at.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?tt&&Rl(tt.elementType)&&(Et=jy):Et=M1;if(Et&&(Et=Et(i,tt))){wr(ft,Et,o,lt);break t}Ut&&Ut(i,it,tt),i==="focusout"&&tt&&it.type==="number"&&tt.memoizedProps.value!=null&&Zr(it,"number",it.value)}switch(Ut=tt?si(tt):window,i){case"focusin":(qe(Ut)||Ut.contentEditable==="true")&&(so=Ut,Ad=tt,Pl=null);break;case"focusout":Pl=Ad=so=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,Jy(ft,o,lt);break;case"selectionchange":if(P1)break;case"keydown":case"keyup":Jy(ft,o,lt)}var Tt;if(Qi)t:{switch(i){case"compositionstart":var It="onCompositionStart";break t;case"compositionend":It="onCompositionEnd";break t;case"compositionupdate":It="onCompositionUpdate";break t}It=void 0}else $t?ot(i,o)&&(It="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(It="onCompositionStart");It&&(E&&o.locale!=="ko"&&($t||It!=="onCompositionStart"?It==="onCompositionEnd"&&$t&&(Tt=Cl()):($i=lt,Wr="value"in $i?$i.value:$i.textContent,$t=!0)),Ut=Ef(tt,It),0<Ut.length&&(It=new Dl(It,i,null,o,lt),ft.push({event:It,listeners:Ut}),Tt?It.data=Tt:(Tt=mt(o),Tt!==null&&(It.data=Tt)))),(Tt=_?He(i,o):Yt(i,o))&&(It=Ef(tt,"onBeforeInput"),0<It.length&&(Ut=new Dl("onBeforeInput","beforeinput",null,o,lt),ft.push({event:Ut,listeners:It}),Ut.data=Tt)),_R(ft,i,tt,o,lt)}S0(ft,s)})}function cu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function Ef(i,s){for(var o=s+"Capture",u=[];i!==null;){var h=i,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=na(i,o),h!=null&&u.unshift(cu(i,h,p)),h=na(i,s),h!=null&&u.push(cu(i,h,p))),i.tag===3)return u;i=i.return}return[]}function xo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function b0(i,s,o,u,h){for(var p=s._reactName,T=[];o!==null&&o!==u;){var A=o,z=A.alternate,tt=A.stateNode;if(A=A.tag,z!==null&&z===u)break;A!==5&&A!==26&&A!==27||tt===null||(z=tt,h?(tt=na(o,p),tt!=null&&T.unshift(cu(o,tt,z))):h||(tt=na(o,p),tt!=null&&T.push(cu(o,tt,z)))),o=o.return}T.length!==0&&i.push({event:s,listeners:T})}var wR=/\r\n?/g,SR=/\u0000|\uFFFD/g;function R0(i){return(typeof i=="string"?i:""+i).replace(wR,`
`).replace(SR,"")}function I0(i,s){return s=R0(s),R0(i)===s}function Tf(){}function ae(i,s,o,u,h,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||oi(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&oi(i,""+u);break;case"className":ai(i,"class",u);break;case"tabIndex":ai(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(i,o,u);break;case"style":bl(i,u,p);break;case"data":if(s!=="object"){ai(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Qa(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&ae(i,s,"name",h.name,h,null),ae(i,s,"formEncType",h.formEncType,h,null),ae(i,s,"formMethod",h.formMethod,h,null),ae(i,s,"formTarget",h.formTarget,h,null)):(ae(i,s,"encType",h.encType,h,null),ae(i,s,"method",h.method,h,null),ae(i,s,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Qa(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Tf);break;case"onScroll":u!=null&&qt("scroll",i);break;case"onScrollEnd":u!=null&&qt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Qa(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":qt("beforetoggle",i),qt("toggle",i),qi(i,"popover",u);break;case"xlinkActuate":Be(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Be(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Be(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Be(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Be(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Be(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Be(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Be(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Be(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":qi(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=yd.get(o)||o,qi(i,o,u))}}function Kg(i,s,o,u,h,p){switch(o){case"style":bl(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?oi(i,u):(typeof u=="number"||typeof u=="bigint")&&oi(i,""+u);break;case"onScroll":u!=null&&qt("scroll",i);break;case"onScrollEnd":u!=null&&qt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Tf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),s=o.slice(2,h?o.length-7:void 0),p=i[ve]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,h),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,h);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):qi(i,o,u)}}}function ln(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",i),qt("load",i);var u=!1,h=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ae(i,s,p,T,o,null)}}h&&ae(i,s,"srcSet",o.srcSet,o,null),u&&ae(i,s,"src",o.src,o,null);return;case"input":qt("invalid",i);var A=p=T=h=null,z=null,tt=null;for(u in o)if(o.hasOwnProperty(u)){var lt=o[u];if(lt!=null)switch(u){case"name":h=lt;break;case"type":T=lt;break;case"checked":z=lt;break;case"defaultChecked":tt=lt;break;case"value":p=lt;break;case"defaultValue":A=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(r(137,s));break;default:ae(i,s,u,lt,o,null)}}Js(i,p,A,z,tt,T,h,!1),Xa(i);return;case"select":qt("invalid",i),u=T=p=null;for(h in o)if(o.hasOwnProperty(h)&&(A=o[h],A!=null))switch(h){case"value":p=A;break;case"defaultValue":T=A;break;case"multiple":u=A;default:ae(i,s,h,A,o,null)}s=p,o=T,i.multiple=!!u,s!=null?pr(i,!!u,s,!1):o!=null&&pr(i,!!u,o,!0);return;case"textarea":qt("invalid",i),p=h=u=null;for(T in o)if(o.hasOwnProperty(T)&&(A=o[T],A!=null))switch(T){case"value":u=A;break;case"defaultValue":h=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ae(i,s,T,A,o,null)}ta(i,u,h,p),Xa(i);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ae(i,s,z,u,o,null)}return;case"dialog":qt("beforetoggle",i),qt("toggle",i),qt("cancel",i),qt("close",i);break;case"iframe":case"object":qt("load",i);break;case"video":case"audio":for(u=0;u<uu.length;u++)qt(uu[u],i);break;case"image":qt("error",i),qt("load",i);break;case"details":qt("toggle",i);break;case"embed":case"source":case"link":qt("error",i),qt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in o)if(o.hasOwnProperty(tt)&&(u=o[tt],u!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ae(i,s,tt,u,o,null)}return;default:if(Rl(s)){for(lt in o)o.hasOwnProperty(lt)&&(u=o[lt],u!==void 0&&Kg(i,s,lt,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&ae(i,s,A,u,o,null))}function AR(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,T=null,A=null,z=null,tt=null,lt=null;for(at in o){var ft=o[at];if(o.hasOwnProperty(at)&&ft!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":z=ft;default:u.hasOwnProperty(at)||ae(i,s,at,null,u,ft)}}for(var it in u){var at=u[it];if(ft=o[it],u.hasOwnProperty(it)&&(at!=null||ft!=null))switch(it){case"type":p=at;break;case"name":h=at;break;case"checked":tt=at;break;case"defaultChecked":lt=at;break;case"value":T=at;break;case"defaultValue":A=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(r(137,s));break;default:at!==ft&&ae(i,s,it,at,u,ft)}}qn(i,T,A,z,tt,lt,p,h);return;case"select":at=T=A=it=null;for(p in o)if(z=o[p],o.hasOwnProperty(p)&&z!=null)switch(p){case"value":break;case"multiple":at=z;default:u.hasOwnProperty(p)||ae(i,s,p,null,u,z)}for(h in u)if(p=u[h],z=o[h],u.hasOwnProperty(h)&&(p!=null||z!=null))switch(h){case"value":it=p;break;case"defaultValue":A=p;break;case"multiple":T=p;default:p!==z&&ae(i,s,h,p,u,z)}s=A,o=T,u=at,it!=null?pr(i,!!o,it,!1):!!u!=!!o&&(s!=null?pr(i,!!o,s,!0):pr(i,!!o,o?[]:"",!1));return;case"textarea":at=it=null;for(A in o)if(h=o[A],o.hasOwnProperty(A)&&h!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ae(i,s,A,null,u,h)}for(T in u)if(h=u[T],p=o[T],u.hasOwnProperty(T)&&(h!=null||p!=null))switch(T){case"value":it=h;break;case"defaultValue":at=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==p&&ae(i,s,T,h,u,p)}re(i,it,at);return;case"option":for(var Dt in o)if(it=o[Dt],o.hasOwnProperty(Dt)&&it!=null&&!u.hasOwnProperty(Dt))switch(Dt){case"selected":i.selected=!1;break;default:ae(i,s,Dt,null,u,it)}for(z in u)if(it=u[z],at=o[z],u.hasOwnProperty(z)&&it!==at&&(it!=null||at!=null))switch(z){case"selected":i.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:ae(i,s,z,it,u,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in o)it=o[Rt],o.hasOwnProperty(Rt)&&it!=null&&!u.hasOwnProperty(Rt)&&ae(i,s,Rt,null,u,it);for(tt in u)if(it=u[tt],at=o[tt],u.hasOwnProperty(tt)&&it!==at&&(it!=null||at!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,s));break;default:ae(i,s,tt,it,u,at)}return;default:if(Rl(s)){for(var oe in o)it=o[oe],o.hasOwnProperty(oe)&&it!==void 0&&!u.hasOwnProperty(oe)&&Kg(i,s,oe,void 0,u,it);for(lt in u)it=u[lt],at=o[lt],!u.hasOwnProperty(lt)||it===at||it===void 0&&at===void 0||Kg(i,s,lt,it,u,at);return}}for(var K in o)it=o[K],o.hasOwnProperty(K)&&it!=null&&!u.hasOwnProperty(K)&&ae(i,s,K,null,u,it);for(ft in u)it=u[ft],at=o[ft],!u.hasOwnProperty(ft)||it===at||it==null&&at==null||ae(i,s,ft,it,u,at)}var Xg=null,Qg=null;function wf(i){return i.nodeType===9?i:i.ownerDocument}function C0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N0(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Zg(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wg=null;function bR(){var i=window.event;return i&&i.type==="popstate"?i===Wg?!1:(Wg=i,!0):(Wg=null,!1)}var x0=typeof setTimeout=="function"?setTimeout:void 0,RR=typeof clearTimeout=="function"?clearTimeout:void 0,D0=typeof Promise=="function"?Promise:void 0,IR=typeof queueMicrotask=="function"?queueMicrotask:typeof D0<"u"?function(i){return D0.resolve(null).then(i).catch(CR)}:x0;function CR(i){setTimeout(function(){throw i})}function gs(i){return i==="head"}function O0(i,s){var o=s,u=0,h=0;do{var p=o.nextSibling;if(i.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var T=i.ownerDocument;if(o&1&&fu(T.documentElement),o&2&&fu(T.body),o&4)for(o=T.head,fu(o),T=o.firstChild;T;){var A=T.nextSibling,z=T.nodeName;T[gr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=A}}if(h===0){i.removeChild(p),vu(s);return}h--}else o==="$"||o==="$?"||o==="$!"?h++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);vu(s)}function Jg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Jg(o),Hi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function NR(i,s,o,u){for(;i.nodeType===1;){var h=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[gr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==h.rel||i.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||i.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||i.getAttribute("title")!==(h.title==null?null:h.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(h.src==null?null:h.src)||i.getAttribute("type")!==(h.type==null?null:h.type)||i.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Ci(i.nextSibling),i===null)break}return null}function xR(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ci(i.nextSibling),i===null))return null;return i}function tm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function DR(i,s){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Ci(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var em=null;function M0(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return i;s--}else o==="/$"&&s++}i=i.previousSibling}return null}function V0(i,s,o){switch(s=wf(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function fu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Hi(i)}var yi=new Map,k0=new Set;function Sf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var kr=F.d;F.d={f:OR,r:MR,D:VR,C:kR,L:PR,m:LR,X:zR,S:UR,M:BR};function OR(){var i=kr.f(),s=gf();return i||s}function MR(i){var s=ri(i);s!==null&&s.tag===5&&s.type==="form"?ev(s):kr.r(i)}var Do=typeof document>"u"?null:document;function P0(i,s,o){var u=Do;if(u&&typeof s=="string"&&s){var h=Me(s);h='link[rel="'+i+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),k0.has(h)||(k0.add(h),i={rel:i,crossOrigin:o,href:s},u.querySelector(h)===null&&(s=u.createElement("link"),ln(s,"link",i),pe(s),u.head.appendChild(s)))}}function VR(i){kr.D(i),P0("dns-prefetch",i,null)}function kR(i,s){kr.C(i,s),P0("preconnect",i,s)}function PR(i,s,o){kr.L(i,s,o);var u=Do;if(u&&i&&s){var h='link[rel="preload"][as="'+Me(s)+'"]';s==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Me(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Me(o.imageSizes)+'"]')):h+='[href="'+Me(i)+'"]';var p=h;switch(s){case"style":p=Oo(i);break;case"script":p=Mo(i)}yi.has(p)||(i=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),yi.set(p,i),u.querySelector(h)!==null||s==="style"&&u.querySelector(hu(p))||s==="script"&&u.querySelector(du(p))||(s=u.createElement("link"),ln(s,"link",i),pe(s),u.head.appendChild(s)))}}function LR(i,s){kr.m(i,s);var o=Do;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Me(u)+'"][href="'+Me(i)+'"]',p=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Mo(i)}if(!yi.has(p)&&(i=y({rel:"modulepreload",href:i},s),yi.set(p,i),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(du(p)))return}u=o.createElement("link"),ln(u,"link",i),pe(u),o.head.appendChild(u)}}}function UR(i,s,o){kr.S(i,s,o);var u=Do;if(u&&i){var h=rn(u).hoistableStyles,p=Oo(i);s=s||"default";var T=h.get(p);if(!T){var A={loading:0,preload:null};if(T=u.querySelector(hu(p)))A.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},o),(o=yi.get(p))&&nm(i,o);var z=T=u.createElement("link");pe(z),ln(z,"link",i),z._p=new Promise(function(tt,lt){z.onload=tt,z.onerror=lt}),z.addEventListener("load",function(){A.loading|=1}),z.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Af(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:A},h.set(p,T)}}}function zR(i,s){kr.X(i,s);var o=Do;if(o&&i){var u=rn(o).hoistableScripts,h=Mo(i),p=u.get(h);p||(p=o.querySelector(du(h)),p||(i=y({src:i,async:!0},s),(s=yi.get(h))&&im(i,s),p=o.createElement("script"),pe(p),ln(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(h,p))}}function BR(i,s){kr.M(i,s);var o=Do;if(o&&i){var u=rn(o).hoistableScripts,h=Mo(i),p=u.get(h);p||(p=o.querySelector(du(h)),p||(i=y({src:i,async:!0,type:"module"},s),(s=yi.get(h))&&im(i,s),p=o.createElement("script"),pe(p),ln(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(h,p))}}function L0(i,s,o,u){var h=(h=yt.current)?Sf(h):null;if(!h)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Oo(o.href),o=rn(h).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Oo(o.href);var p=rn(h).hoistableStyles,T=p.get(i);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,T),(p=h.querySelector(hu(i)))&&!p._p&&(T.instance=p,T.state.loading=5),yi.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},yi.set(i,o),p||HR(h,i,o,T.state))),s&&u===null)throw Error(r(528,""));return T}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Mo(o),o=rn(h).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Oo(i){return'href="'+Me(i)+'"'}function hu(i){return'link[rel="stylesheet"]['+i+"]"}function U0(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function HR(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ln(s,"link",o),pe(s),i.head.appendChild(s))}function Mo(i){return'[src="'+Me(i)+'"]'}function du(i){return"script[async]"+i}function z0(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Me(o.href)+'"]');if(u)return s.instance=u,pe(u),u;var h=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),pe(u),ln(u,"style",h),Af(u,o.precedence,i),s.instance=u;case"stylesheet":h=Oo(o.href);var p=i.querySelector(hu(h));if(p)return s.state.loading|=4,s.instance=p,pe(p),p;u=U0(o),(h=yi.get(h))&&nm(u,h),p=(i.ownerDocument||i).createElement("link"),pe(p);var T=p;return T._p=new Promise(function(A,z){T.onload=A,T.onerror=z}),ln(p,"link",u),s.state.loading|=4,Af(p,o.precedence,i),s.instance=p;case"script":return p=Mo(o.src),(h=i.querySelector(du(p)))?(s.instance=h,pe(h),h):(u=o,(h=yi.get(p))&&(u=y({},o),im(u,h)),i=i.ownerDocument||i,h=i.createElement("script"),pe(h),ln(h,"link",u),i.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Af(u,o.precedence,i));return s.instance}function Af(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,p=h,T=0;T<u.length;T++){var A=u[T];if(A.dataset.precedence===s)p=A;else if(p!==h)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function nm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function im(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var bf=null;function B0(i,s,o){if(bf===null){var u=new Map,h=bf=new Map;h.set(o,u)}else h=bf,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),h=0;h<o.length;h++){var p=o[h];if(!(p[gr]||p[Ae]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(s)||"";T=i+T;var A=u.get(T);A?A.push(p):u.set(T,[p])}}return u}function H0(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function qR(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function q0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var gu=null;function FR(){}function jR(i,s,o){if(gu===null)throw Error(r(475));var u=gu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Oo(o.href),p=i.querySelector(hu(h));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(u.count++,u=Rf.bind(u),i.then(u,u)),s.state.loading|=4,s.instance=p,pe(p);return}p=i.ownerDocument||i,o=U0(o),(h=yi.get(h))&&nm(o,h),p=p.createElement("link"),pe(p);var T=p;T._p=new Promise(function(A,z){T.onload=A,T.onerror=z}),ln(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Rf.bind(u),i.addEventListener("load",s),i.addEventListener("error",s))}}function GR(){if(gu===null)throw Error(r(475));var i=gu;return i.stylesheets&&i.count===0&&rm(i,i.stylesheets),0<i.count?function(s){var o=setTimeout(function(){if(i.stylesheets&&rm(i,i.stylesheets),i.unsuspend){var u=i.unsuspend;i.unsuspend=null,u()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(o)}}:null}function Rf(){if(this.count--,this.count===0){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var If=null;function rm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,If=new Map,s.forEach($R,i),If=null,Rf.call(i))}function $R(i,s){if(!(s.state.loading&4)){var o=If.get(i);if(o)var u=o.get(null);else{o=new Map,If.set(i,o);for(var h=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var T=h[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}h=s.instance,T=h.getAttribute("data-precedence"),p=o.get(T)||u,p===u&&o.set(null,h),o.set(T,h),this.count++,u=Rf.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),p?p.parentNode.insertBefore(h,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(h,i.firstChild)),s.state.loading|=4}}var mu={$$typeof:Q,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function YR(i,s,o,u,h,p,T,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zn(0),this.hiddenUpdates=zn(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function F0(i,s,o,u,h,p,T,A,z,tt,lt,ft){return i=new YR(i,s,o,T,A,z,tt,ft),s=1,p===!0&&(s|=24),p=jn(3,null,null,s),i.current=p,p.stateNode=i,s=zd(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Fd(p),i}function j0(i){return i?(i=uo,i):uo}function G0(i,s,o,u,h,p){h=j0(h),u.context===null?u.context=h:u.pendingContext=h,u=es(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=ns(i,u,s),o!==null&&(Xn(o,i,s),Gl(o,i,s))}function $0(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function sm(i,s){$0(i,s),(i=i.alternate)&&$0(i,s)}function Y0(i){if(i.tag===13){var s=lo(i,67108864);s!==null&&Xn(s,i,67108864),sm(i,67108864)}}var Cf=!0;function KR(i,s,o,u){var h=C.T;C.T=null;var p=F.p;try{F.p=2,am(i,s,o,u)}finally{F.p=p,C.T=h}}function XR(i,s,o,u){var h=C.T;C.T=null;var p=F.p;try{F.p=8,am(i,s,o,u)}finally{F.p=p,C.T=h}}function am(i,s,o,u){if(Cf){var h=om(u);if(h===null)Yg(i,s,u,Nf,o),X0(i,u);else if(ZR(h,i,s,o,u))u.stopPropagation();else if(X0(i,u),s&4&&-1<QR.indexOf(i)){for(;h!==null;){var p=ri(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Xe(p.pendingLanes);if(T!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var z=1<<31-me(T);A.entanglements[1]|=z,T&=~z}nr(p),(ne&6)===0&&(hf=Lt()+500,lu(0))}}break;case 13:A=lo(p,2),A!==null&&Xn(A,p,2),gf(),sm(p,2)}if(p=om(u),p===null&&Yg(i,s,u,Nf,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Yg(i,s,u,null,o)}}function om(i){return i=li(i),lm(i)}var Nf=null;function lm(i){if(Nf=null,i=ii(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Nf=i,null}function K0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case ze:return 2;case Cn:return 8;case Ln:case Pi:return 32;case Un:return 268435456;default:return 32}default:return 32}}var um=!1,ms=null,ps=null,ys=null,pu=new Map,yu=new Map,_s=[],QR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X0(i,s){switch(i){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":pu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(s.pointerId)}}function _u(i,s,o,u,h,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},s!==null&&(s=ri(s),s!==null&&Y0(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),i)}function ZR(i,s,o,u,h){switch(s){case"focusin":return ms=_u(ms,i,s,o,u,h),!0;case"dragenter":return ps=_u(ps,i,s,o,u,h),!0;case"mouseover":return ys=_u(ys,i,s,o,u,h),!0;case"pointerover":var p=h.pointerId;return pu.set(p,_u(pu.get(p)||null,i,s,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,yu.set(p,_u(yu.get(p)||null,i,s,o,u,h)),!0}return!1}function Q0(i){var s=ii(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Fa(i.priority,function(){if(o.tag===13){var u=Kn();u=Ui(u);var h=lo(o,u);h!==null&&Xn(h,o,u),sm(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=om(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);yr=u,o.target.dispatchEvent(u),yr=null}else return s=ri(o),s!==null&&Y0(s),i.blockedOn=o,!1;s.shift()}return!0}function Z0(i,s,o){xf(i)&&o.delete(s)}function WR(){um=!1,ms!==null&&xf(ms)&&(ms=null),ps!==null&&xf(ps)&&(ps=null),ys!==null&&xf(ys)&&(ys=null),pu.forEach(Z0),yu.forEach(Z0)}function Df(i,s){i.blockedOn===s&&(i.blockedOn=null,um||(um=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,WR)))}var Of=null;function W0(i){Of!==i&&(Of=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Of===i&&(Of=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],h=i[s+2];if(typeof u!="function"){if(lm(u||o)===null)continue;break}var p=ri(o);p!==null&&(i.splice(s,3),s-=3,lg(p,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function vu(i){function s(z){return Df(z,i)}ms!==null&&Df(ms,i),ps!==null&&Df(ps,i),ys!==null&&Df(ys,i),pu.forEach(s),yu.forEach(s);for(var o=0;o<_s.length;o++){var u=_s[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<_s.length&&(o=_s[0],o.blockedOn===null);)Q0(o),o.blockedOn===null&&_s.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],p=o[u+1],T=h[ve]||null;if(typeof p=="function")T||W0(o);else if(T){var A=null;if(p&&p.hasAttribute("formAction")){if(h=p,T=p[ve]||null)A=T.formAction;else if(lm(h)!==null)continue}else A=T.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),W0(o)}}}function cm(i){this._internalRoot=i}Mf.prototype.render=cm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Kn();G0(o,u,i,s,null,null)},Mf.prototype.unmount=cm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;G0(i.current,2,null,i,null,null),gf(),s[Nn]=null}};function Mf(i){this._internalRoot=i}Mf.prototype.unstable_scheduleHydration=function(i){if(i){var s=zi();i={blockedOn:null,target:i,priority:s};for(var o=0;o<_s.length&&s!==0&&s<_s[o].priority;o++);_s.splice(o,0,i),o===0&&Q0(i)}};var J0=t.version;if(J0!=="19.1.0")throw Error(r(527,J0,"19.1.0"));F.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var JR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vf.isDisabled&&Vf.supportsFiber)try{Jt=Vf.inject(JR),Bt=Vf}catch{}}return Tu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",h=mv,p=pv,T=yv,A=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(A=s.unstable_transitionCallbacks)),s=F0(i,1,!1,null,null,o,u,h,p,T,A,null),i[Nn]=s.current,$g(i),new cm(s)},Tu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,h="",p=mv,T=pv,A=yv,z=null,tt=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(tt=o.formState)),s=F0(i,1,!0,s,o??null,u,h,p,T,A,z,tt),s.context=j0(null),o=s.current,u=Kn(),u=Ui(u),h=es(u),h.callback=null,ns(o,h,u),o=u,s.current.lanes=o,ei(s,o),nr(s),i[Nn]=s.current,$g(i),new Mf(s)},Tu.version="19.1.0",Tu}var uE;function lI(){if(uE)return dm.exports;uE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dm.exports=oI(),dm.exports}var uI=lI();const cI=()=>{};var cE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},fI=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],d=e[n++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},Uw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,d=c?e[a+1]:0,g=a+2<e.length,m=g?e[a+2]:0,y=l>>2,v=(l&3)<<4|d>>4;let w=(d&15)<<2|m>>6,S=m&63;g||(S=64,c||(w=64)),r.push(n[y],n[v],n[w],n[S])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Lw(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fI(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const m=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||d==null||m==null||v==null)throw new hI;const w=l<<2|d>>4;if(r.push(w),m!==64){const S=d<<4&240|m>>2;if(r.push(S),v!==64){const O=m<<6&192|v;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class hI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dI=function(e){const t=Lw(e);return Uw.encodeByteArray(t,!0)},fh=function(e){return dI(e).replace(/\./g,"")},zw=function(e){try{return Uw.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=()=>gI().__FIREBASE_DEFAULTS__,pI=()=>{if(typeof process>"u"||typeof cE>"u")return;const e=cE.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},yI=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&zw(e[1]);return t&&JSON.parse(t)},Hh=()=>{try{return cI()||mI()||pI()||yI()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Bw=e=>{var t,n;return(n=(t=Hh())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},_I=e=>{const t=Bw(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Hw=()=>{var e;return(e=Hh())===null||e===void 0?void 0:e.config},qw=e=>{var t;return(t=Hh())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){return e.endsWith(".cloudworkstations.dev")}async function Fw(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[fh(JSON.stringify(n)),fh(JSON.stringify(c)),""].join(".")}const Vu={};function TI(){const e={prod:[],emulator:[]};for(const t of Object.keys(Vu))Vu[t]?e.emulator.push(t):e.prod.push(t);return e}function wI(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let fE=!1;function jw(e,t){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Vu[e]===t||Vu[e]||fE)return;Vu[e]=t;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",l=TI().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function m(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{fE=!0,c()},w}function y(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=wI(r),S=n("text"),O=document.getElementById(S)||document.createElement("span"),L=n("learnmore"),k=document.getElementById(L)||document.createElement("a"),B=n("preprendIcon"),G=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Q=w.element;d(Q),y(k,L);const q=m();g(G,B),Q.append(G,O,k,q),document.body.appendChild(Q)}l?(O.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function AI(){var e;const t=(e=Hh())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RI(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function II(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CI(){const e=_n();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function NI(){return!AI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xI(){try{return typeof indexedDB=="object"}catch{return!1}}function DI(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="FirebaseError";class Yr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=OI,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?MI(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Yr(a,d,r)}}function MI(e,t){return e.replace(VI,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const VI=/\{\$([^}]+)}/g;function kI(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function xa(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(hE(l)&&hE(c)){if(!xa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function hE(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Iu(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Cu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function PI(e,t){const n=new LI(e,t);return n.subscribe.bind(n)}class LI{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UI(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=ym),a.error===void 0&&(a.error=ym),a.complete===void 0&&(a.complete=ym);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UI(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e&&e._delegate?e._delegate:e}class Da{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zI=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new vI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(HI(t))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Aa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Aa){return this.instances.has(t)}getOptions(t=Aa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BI(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Aa){return this.component?this.component.multipleInstances?t:Aa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function BI(e){return e===Aa?void 0:e}function HI(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new zI(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ft||(Ft={}));const FI={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},jI=Ft.INFO,GI={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},$I=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=GI[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Dp{constructor(t){this.name=t,this._logLevel=jI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?FI[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const YI=(e,t)=>t.some(n=>e instanceof n);let dE,gE;function KI(){return dE||(dE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XI(){return gE||(gE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gw=new WeakMap,qm=new WeakMap,$w=new WeakMap,_m=new WeakMap,Op=new WeakMap;function QI(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(xs(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&Gw.set(n,e)}).catch(()=>{}),Op.set(t,e),t}function ZI(e){if(qm.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});qm.set(e,t)}let Fm={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qm.get(e);if(t==="objectStoreNames")return e.objectStoreNames||$w.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xs(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function WI(e){Fm=e(Fm)}function JI(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(vm(this),t,...n);return $w.set(r,t.sort?t.sort():[t]),xs(r)}:XI().includes(e)?function(...t){return e.apply(vm(this),t),xs(Gw.get(this))}:function(...t){return xs(e.apply(vm(this),t))}}function tC(e){return typeof e=="function"?JI(e):(e instanceof IDBTransaction&&ZI(e),YI(e,KI())?new Proxy(e,Fm):e)}function xs(e){if(e instanceof IDBRequest)return QI(e);if(_m.has(e))return _m.get(e);const t=tC(e);return t!==e&&(_m.set(e,t),Op.set(t,e)),t}const vm=e=>Op.get(e);function eC(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),d=xs(c);return r&&c.addEventListener("upgradeneeded",g=>{r(xs(c.result),g.oldVersion,g.newVersion,xs(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const nC=["get","getKey","getAll","getAllKeys","count"],iC=["put","add","delete","clear"],Em=new Map;function mE(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Em.get(t))return Em.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=iC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||nC.includes(n)))return;const l=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let m=g.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),a&&g.done]))[0]};return Em.set(t,l),l}WI(e=>({...e,get:(t,n,r)=>mE(t,n)||e.get(t,n,r),has:(t,n)=>!!mE(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sC(e){const t=e.getComponent();return t?.type==="VERSION"}const jm="@firebase/app",pE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Dp("@firebase/app"),aC="@firebase/app-compat",oC="@firebase/analytics-compat",lC="@firebase/analytics",uC="@firebase/app-check-compat",cC="@firebase/app-check",fC="@firebase/auth",hC="@firebase/auth-compat",dC="@firebase/database",gC="@firebase/data-connect",mC="@firebase/database-compat",pC="@firebase/functions",yC="@firebase/functions-compat",_C="@firebase/installations",vC="@firebase/installations-compat",EC="@firebase/messaging",TC="@firebase/messaging-compat",wC="@firebase/performance",SC="@firebase/performance-compat",AC="@firebase/remote-config",bC="@firebase/remote-config-compat",RC="@firebase/storage",IC="@firebase/storage-compat",CC="@firebase/firestore",NC="@firebase/ai",xC="@firebase/firestore-compat",DC="firebase",OC="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",MC={[jm]:"fire-core",[aC]:"fire-core-compat",[lC]:"fire-analytics",[oC]:"fire-analytics-compat",[cC]:"fire-app-check",[uC]:"fire-app-check-compat",[fC]:"fire-auth",[hC]:"fire-auth-compat",[dC]:"fire-rtdb",[gC]:"fire-data-connect",[mC]:"fire-rtdb-compat",[pC]:"fire-fn",[yC]:"fire-fn-compat",[_C]:"fire-iid",[vC]:"fire-iid-compat",[EC]:"fire-fcm",[TC]:"fire-fcm-compat",[wC]:"fire-perf",[SC]:"fire-perf-compat",[AC]:"fire-rc",[bC]:"fire-rc-compat",[RC]:"fire-gcs",[IC]:"fire-gcs-compat",[CC]:"fire-fst",[xC]:"fire-fst-compat",[NC]:"fire-vertex","fire-js":"fire-js",[DC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,VC=new Map,$m=new Map;function yE(e,t){try{e.container.addComponent(t)}catch(n){Hr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function el(e){const t=e.name;if($m.has(t))return Hr.debug(`There were multiple attempts to register component ${t}.`),!1;$m.set(t,e);for(const n of hh.values())yE(n,e);for(const n of VC.values())yE(n,e);return!0}function Mp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _i(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new rc("app","Firebase",kC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=OC;function Yw(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Gm,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw Ds.create("bad-app-name",{appName:String(a)});if(n||(n=Hw()),!n)throw Ds.create("no-options");const l=hh.get(a);if(l){if(xa(n,l.options)&&xa(r,l.config))return l;throw Ds.create("duplicate-app",{appName:a})}const c=new qI(a);for(const g of $m.values())c.addComponent(g);const d=new PC(n,r,c);return hh.set(a,d),d}function Kw(e=Gm){const t=hh.get(e);if(!t&&e===Gm&&Hw())return Yw();if(!t)throw Ds.create("no-app",{appName:e});return t}function Os(e,t,n){var r;let a=(r=MC[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${t}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hr.warn(d.join(" "));return}el(new Da(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firebase-heartbeat-database",UC=1,Bu="firebase-heartbeat-store";let Tm=null;function Xw(){return Tm||(Tm=eC(LC,UC,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Bu)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ds.create("idb-open",{originalErrorMessage:e.message})})),Tm}async function zC(e){try{const n=(await Xw()).transaction(Bu),r=await n.objectStore(Bu).get(Qw(e));return await n.done,r}catch(t){if(t instanceof Yr)Hr.warn(t.message);else{const n=Ds.create("idb-get",{originalErrorMessage:t?.message});Hr.warn(n.message)}}}async function _E(e,t){try{const r=(await Xw()).transaction(Bu,"readwrite");await r.objectStore(Bu).put(t,Qw(e)),await r.done}catch(n){if(n instanceof Yr)Hr.warn(n.message);else{const r=Ds.create("idb-set",{originalErrorMessage:n?.message});Hr.warn(r.message)}}}function Qw(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=1024,HC=30;class qC{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=vE();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>HC){const c=GC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vE(),{heartbeatsToSend:r,unsentEntries:a}=FC(this._heartbeatsCache.heartbeats),l=fh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Hr.warn(n),""}}}function vE(){return new Date().toISOString().substring(0,10)}function FC(e,t=BC){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),EE(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),EE(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xI()?DI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return _E(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return _E(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function EE(e){return fh(JSON.stringify({version:2,heartbeats:e})).length}function GC(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(e){el(new Da("platform-logger",t=>new rC(t),"PRIVATE")),el(new Da("heartbeat",t=>new qC(t),"PRIVATE")),Os(jm,pE,e),Os(jm,pE,"esm2017"),Os("fire-js","")}$C("");var YC="firebase",KC="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(YC,KC,"app");var TE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,Zw;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,b){function R(){}R.prototype=b.prototype,M.D=b.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(V,P,U){for(var x=Array(arguments.length-2),D=2;D<arguments.length;D++)x[D-2]=arguments[D];return b.prototype[P].apply(V,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,b,R){R||(R=0);var V=Array(16);if(typeof b=="string")for(var P=0;16>P;++P)V[P]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(P=0;16>P;++P)V[P]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=M.g[0],R=M.g[1],P=M.g[2];var U=M.g[3],x=b+(U^R&(P^U))+V[0]+3614090360&4294967295;b=R+(x<<7&4294967295|x>>>25),x=U+(P^b&(R^P))+V[1]+3905402710&4294967295,U=b+(x<<12&4294967295|x>>>20),x=P+(R^U&(b^R))+V[2]+606105819&4294967295,P=U+(x<<17&4294967295|x>>>15),x=R+(b^P&(U^b))+V[3]+3250441966&4294967295,R=P+(x<<22&4294967295|x>>>10),x=b+(U^R&(P^U))+V[4]+4118548399&4294967295,b=R+(x<<7&4294967295|x>>>25),x=U+(P^b&(R^P))+V[5]+1200080426&4294967295,U=b+(x<<12&4294967295|x>>>20),x=P+(R^U&(b^R))+V[6]+2821735955&4294967295,P=U+(x<<17&4294967295|x>>>15),x=R+(b^P&(U^b))+V[7]+4249261313&4294967295,R=P+(x<<22&4294967295|x>>>10),x=b+(U^R&(P^U))+V[8]+1770035416&4294967295,b=R+(x<<7&4294967295|x>>>25),x=U+(P^b&(R^P))+V[9]+2336552879&4294967295,U=b+(x<<12&4294967295|x>>>20),x=P+(R^U&(b^R))+V[10]+4294925233&4294967295,P=U+(x<<17&4294967295|x>>>15),x=R+(b^P&(U^b))+V[11]+2304563134&4294967295,R=P+(x<<22&4294967295|x>>>10),x=b+(U^R&(P^U))+V[12]+1804603682&4294967295,b=R+(x<<7&4294967295|x>>>25),x=U+(P^b&(R^P))+V[13]+4254626195&4294967295,U=b+(x<<12&4294967295|x>>>20),x=P+(R^U&(b^R))+V[14]+2792965006&4294967295,P=U+(x<<17&4294967295|x>>>15),x=R+(b^P&(U^b))+V[15]+1236535329&4294967295,R=P+(x<<22&4294967295|x>>>10),x=b+(P^U&(R^P))+V[1]+4129170786&4294967295,b=R+(x<<5&4294967295|x>>>27),x=U+(R^P&(b^R))+V[6]+3225465664&4294967295,U=b+(x<<9&4294967295|x>>>23),x=P+(b^R&(U^b))+V[11]+643717713&4294967295,P=U+(x<<14&4294967295|x>>>18),x=R+(U^b&(P^U))+V[0]+3921069994&4294967295,R=P+(x<<20&4294967295|x>>>12),x=b+(P^U&(R^P))+V[5]+3593408605&4294967295,b=R+(x<<5&4294967295|x>>>27),x=U+(R^P&(b^R))+V[10]+38016083&4294967295,U=b+(x<<9&4294967295|x>>>23),x=P+(b^R&(U^b))+V[15]+3634488961&4294967295,P=U+(x<<14&4294967295|x>>>18),x=R+(U^b&(P^U))+V[4]+3889429448&4294967295,R=P+(x<<20&4294967295|x>>>12),x=b+(P^U&(R^P))+V[9]+568446438&4294967295,b=R+(x<<5&4294967295|x>>>27),x=U+(R^P&(b^R))+V[14]+3275163606&4294967295,U=b+(x<<9&4294967295|x>>>23),x=P+(b^R&(U^b))+V[3]+4107603335&4294967295,P=U+(x<<14&4294967295|x>>>18),x=R+(U^b&(P^U))+V[8]+1163531501&4294967295,R=P+(x<<20&4294967295|x>>>12),x=b+(P^U&(R^P))+V[13]+2850285829&4294967295,b=R+(x<<5&4294967295|x>>>27),x=U+(R^P&(b^R))+V[2]+4243563512&4294967295,U=b+(x<<9&4294967295|x>>>23),x=P+(b^R&(U^b))+V[7]+1735328473&4294967295,P=U+(x<<14&4294967295|x>>>18),x=R+(U^b&(P^U))+V[12]+2368359562&4294967295,R=P+(x<<20&4294967295|x>>>12),x=b+(R^P^U)+V[5]+4294588738&4294967295,b=R+(x<<4&4294967295|x>>>28),x=U+(b^R^P)+V[8]+2272392833&4294967295,U=b+(x<<11&4294967295|x>>>21),x=P+(U^b^R)+V[11]+1839030562&4294967295,P=U+(x<<16&4294967295|x>>>16),x=R+(P^U^b)+V[14]+4259657740&4294967295,R=P+(x<<23&4294967295|x>>>9),x=b+(R^P^U)+V[1]+2763975236&4294967295,b=R+(x<<4&4294967295|x>>>28),x=U+(b^R^P)+V[4]+1272893353&4294967295,U=b+(x<<11&4294967295|x>>>21),x=P+(U^b^R)+V[7]+4139469664&4294967295,P=U+(x<<16&4294967295|x>>>16),x=R+(P^U^b)+V[10]+3200236656&4294967295,R=P+(x<<23&4294967295|x>>>9),x=b+(R^P^U)+V[13]+681279174&4294967295,b=R+(x<<4&4294967295|x>>>28),x=U+(b^R^P)+V[0]+3936430074&4294967295,U=b+(x<<11&4294967295|x>>>21),x=P+(U^b^R)+V[3]+3572445317&4294967295,P=U+(x<<16&4294967295|x>>>16),x=R+(P^U^b)+V[6]+76029189&4294967295,R=P+(x<<23&4294967295|x>>>9),x=b+(R^P^U)+V[9]+3654602809&4294967295,b=R+(x<<4&4294967295|x>>>28),x=U+(b^R^P)+V[12]+3873151461&4294967295,U=b+(x<<11&4294967295|x>>>21),x=P+(U^b^R)+V[15]+530742520&4294967295,P=U+(x<<16&4294967295|x>>>16),x=R+(P^U^b)+V[2]+3299628645&4294967295,R=P+(x<<23&4294967295|x>>>9),x=b+(P^(R|~U))+V[0]+4096336452&4294967295,b=R+(x<<6&4294967295|x>>>26),x=U+(R^(b|~P))+V[7]+1126891415&4294967295,U=b+(x<<10&4294967295|x>>>22),x=P+(b^(U|~R))+V[14]+2878612391&4294967295,P=U+(x<<15&4294967295|x>>>17),x=R+(U^(P|~b))+V[5]+4237533241&4294967295,R=P+(x<<21&4294967295|x>>>11),x=b+(P^(R|~U))+V[12]+1700485571&4294967295,b=R+(x<<6&4294967295|x>>>26),x=U+(R^(b|~P))+V[3]+2399980690&4294967295,U=b+(x<<10&4294967295|x>>>22),x=P+(b^(U|~R))+V[10]+4293915773&4294967295,P=U+(x<<15&4294967295|x>>>17),x=R+(U^(P|~b))+V[1]+2240044497&4294967295,R=P+(x<<21&4294967295|x>>>11),x=b+(P^(R|~U))+V[8]+1873313359&4294967295,b=R+(x<<6&4294967295|x>>>26),x=U+(R^(b|~P))+V[15]+4264355552&4294967295,U=b+(x<<10&4294967295|x>>>22),x=P+(b^(U|~R))+V[6]+2734768916&4294967295,P=U+(x<<15&4294967295|x>>>17),x=R+(U^(P|~b))+V[13]+1309151649&4294967295,R=P+(x<<21&4294967295|x>>>11),x=b+(P^(R|~U))+V[4]+4149444226&4294967295,b=R+(x<<6&4294967295|x>>>26),x=U+(R^(b|~P))+V[11]+3174756917&4294967295,U=b+(x<<10&4294967295|x>>>22),x=P+(b^(U|~R))+V[2]+718787259&4294967295,P=U+(x<<15&4294967295|x>>>17),x=R+(U^(P|~b))+V[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+P&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.u=function(M,b){b===void 0&&(b=M.length);for(var R=b-this.blockSize,V=this.B,P=this.h,U=0;U<b;){if(P==0)for(;U<=R;)a(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<b;)if(V[P++]=M.charCodeAt(U++),P==this.blockSize){a(this,V),P=0;break}}else for(;U<b;)if(V[P++]=M[U++],P==this.blockSize){a(this,V),P=0;break}}this.h=P,this.o+=b},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;var R=8*this.o;for(b=M.length-8;b<M.length;++b)M[b]=R&255,R/=256;for(this.u(M),M=Array(16),b=R=0;4>b;++b)for(var V=0;32>V;V+=8)M[R++]=this.g[b]>>>V&255;return M};function l(M,b){var R=d;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=b(M)}function c(M,b){this.h=b;for(var R=[],V=!0,P=M.length-1;0<=P;P--){var U=M[P]|0;V&&U==b||(R[P]=U,V=!1)}this.g=R}var d={};function g(M){return-128<=M&&128>M?l(M,function(b){return new c([b|0],0>b?-1:0)}):new c([M|0],0>M?-1:0)}function m(M){if(isNaN(M)||!isFinite(M))return v;if(0>M)return k(m(-M));for(var b=[],R=1,V=0;M>=R;V++)b[V]=M/R|0,R*=4294967296;return new c(b,0)}function y(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return k(y(M.substring(1),b));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=m(Math.pow(b,8)),V=v,P=0;P<M.length;P+=8){var U=Math.min(8,M.length-P),x=parseInt(M.substring(P,P+U),b);8>U?(U=m(Math.pow(b,U)),V=V.j(U).add(m(x))):(V=V.j(R),V=V.add(m(x)))}return V}var v=g(0),w=g(1),S=g(16777216);e=c.prototype,e.m=function(){if(L(this))return-k(this).m();for(var M=0,b=1,R=0;R<this.g.length;R++){var V=this.i(R);M+=(0<=V?V:4294967296+V)*b,b*=4294967296}return M},e.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(L(this))return"-"+k(this).toString(M);for(var b=m(Math.pow(M,6)),R=this,V="";;){var P=q(R,b).g;R=B(R,P.j(b));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=P,O(R))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},e.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(var b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function L(M){return M.h==-1}e.l=function(M){return M=B(this,M),L(M)?-1:O(M)?0:1};function k(M){for(var b=M.g.length,R=[],V=0;V<b;V++)R[V]=~M.g[V];return new c(R,~M.h).add(w)}e.abs=function(){return L(this)?k(this):this},e.add=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0,P=0;P<=b;P++){var U=V+(this.i(P)&65535)+(M.i(P)&65535),x=(U>>>16)+(this.i(P)>>>16)+(M.i(P)>>>16);V=x>>>16,U&=65535,x&=65535,R[P]=x<<16|U}return new c(R,R[R.length-1]&-2147483648?-1:0)};function B(M,b){return M.add(k(b))}e.j=function(M){if(O(this)||O(M))return v;if(L(this))return L(M)?k(this).j(k(M)):k(k(this).j(M));if(L(M))return k(this.j(k(M)));if(0>this.l(S)&&0>M.l(S))return m(this.m()*M.m());for(var b=this.g.length+M.g.length,R=[],V=0;V<2*b;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(var P=0;P<M.g.length;P++){var U=this.i(V)>>>16,x=this.i(V)&65535,D=M.i(P)>>>16,$=M.i(P)&65535;R[2*V+2*P]+=x*$,G(R,2*V+2*P),R[2*V+2*P+1]+=U*$,G(R,2*V+2*P+1),R[2*V+2*P+1]+=x*D,G(R,2*V+2*P+1),R[2*V+2*P+2]+=U*D,G(R,2*V+2*P+2)}for(V=0;V<b;V++)R[V]=R[2*V+1]<<16|R[2*V];for(V=b;V<2*b;V++)R[V]=0;return new c(R,0)};function G(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function Q(M,b){this.g=M,this.h=b}function q(M,b){if(O(b))throw Error("division by zero");if(O(M))return new Q(v,v);if(L(M))return b=q(k(M),b),new Q(k(b.g),k(b.h));if(L(b))return b=q(M,k(b)),new Q(k(b.g),b.h);if(30<M.g.length){if(L(M)||L(b))throw Error("slowDivide_ only works with positive integers.");for(var R=w,V=b;0>=V.l(M);)R=X(R),V=X(V);var P=rt(R,1),U=rt(V,1);for(V=rt(V,2),R=rt(R,2);!O(V);){var x=U.add(V);0>=x.l(M)&&(P=P.add(R),U=x),V=rt(V,1),R=rt(R,1)}return b=B(M,P.j(b)),new Q(P,b)}for(P=v;0<=M.l(b);){for(R=Math.max(1,Math.floor(M.m()/b.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=m(R),x=U.j(b);L(x)||0<x.l(M);)R-=V,U=m(R),x=U.j(b);O(U)&&(U=w),P=P.add(U),M=B(M,x)}return new Q(P,M)}e.A=function(M){return q(this,M).h},e.and=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0;V<b;V++)R[V]=this.i(V)&M.i(V);return new c(R,this.h&M.h)},e.or=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0;V<b;V++)R[V]=this.i(V)|M.i(V);return new c(R,this.h|M.h)},e.xor=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],V=0;V<b;V++)R[V]=this.i(V)^M.i(V);return new c(R,this.h^M.h)};function X(M){for(var b=M.g.length+1,R=[],V=0;V<b;V++)R[V]=M.i(V)<<1|M.i(V-1)>>>31;return new c(R,M.h)}function rt(M,b){var R=b>>5;b%=32;for(var V=M.g.length-R,P=[],U=0;U<V;U++)P[U]=0<b?M.i(U+R)>>>b|M.i(U+R+1)<<32-b:M.i(U+R);return new c(P,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Zw=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=y,Ms=c}).apply(typeof TE<"u"?TE:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ww,Nu,Jw,Zf,Ym,tS,eS,nS;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,E){return f==Array.prototype||f==Object.prototype||(f[_]=E.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function a(f,_){if(_)t:{var E=r;f=f.split(".");for(var I=0;I<f.length-1;I++){var Z=f[I];if(!(Z in E))break t;E=E[Z]}f=f[f.length-1],I=E[f],_=_(I),_!=I&&_!=null&&t(E,f,{configurable:!0,writable:!0,value:_})}}function l(f,_){f instanceof String&&(f+="");var E=0,I=!1,Z={next:function(){if(!I&&E<f.length){var ot=E++;return{value:_(ot,f[ot]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}a("Array.prototype.values",function(f){return f||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function m(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,E){return f.call.apply(f.bind,arguments)}function v(f,_,E){if(!f)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,I),f.apply(_,Z)}}return function(){return f.apply(_,arguments)}}function w(f,_,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,w.apply(null,arguments)}function S(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),f.apply(this,I)}}function O(f,_){function E(){}E.prototype=_.prototype,f.aa=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(I,Z,ot){for(var mt=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)mt[$t-2]=arguments[$t];return _.prototype[Z].apply(I,mt)}}function L(f){const _=f.length;if(0<_){const E=Array(_);for(let I=0;I<_;I++)E[I]=f[I];return E}return[]}function k(f,_){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(g(I)){const Z=f.length||0,ot=I.length||0;f.length=Z+ot;for(let mt=0;mt<ot;mt++)f[Z+mt]=I[mt]}else f.push(I)}}class B{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function G(f){return/^[\s\xa0]*$/.test(f)}function Q(){var f=d.navigator;return f&&(f=f.userAgent)?f:""}function q(f){return q[" "](f),f}q[" "]=function(){};var X=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function rt(f,_,E){for(const I in f)_.call(E,f[I],I,f)}function M(f,_){for(const E in f)_.call(void 0,f[E],E,f)}function b(f){const _={};for(const E in f)_[E]=f[E];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,_){let E,I;for(let Z=1;Z<arguments.length;Z++){I=arguments[Z];for(E in I)f[E]=I[E];for(let ot=0;ot<R.length;ot++)E=R[ot],Object.prototype.hasOwnProperty.call(I,E)&&(f[E]=I[E])}}function P(f){var _=1;f=f.split(":");const E=[];for(;0<_&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function U(f){d.setTimeout(()=>{throw f},0)}function x(){var f=Y;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class D{constructor(){this.h=this.g=null}add(_,E){const I=$.get();I.set(_,E),this.h?this.h.next=I:this.g=I,this.h=I}}var $=new B(()=>new C,f=>f.reset());class C{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let F,J=!1,Y=new D,N=()=>{const f=d.Promise.resolve(void 0);F=()=>{f.then(j)}};var j=()=>{for(var f;f=x();){try{f.h.call(f.g)}catch(E){U(E)}var _=$;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}J=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return f}();function pt(f,_){if(st.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,I=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(X){t:{try{q(_.nodeName);var Z=!0;break t}catch{}Z=!1}Z||(_=null)}}else E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:yt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&pt.aa.h.call(this)}}O(pt,st);var yt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),St=0;function Qt(f,_,E,I,Z){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!I,this.ha=Z,this.key=++St,this.da=this.fa=!1}function Gt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Se(f){this.src=f,this.g={},this.h=0}Se.prototype.add=function(f,_,E,I,Z){var ot=f.toString();f=this.g[ot],f||(f=this.g[ot]=[],this.h++);var mt=Ue(f,_,I,Z);return-1<mt?(_=f[mt],E||(_.fa=!1)):(_=new Qt(_,this.src,ot,!!I,Z),_.fa=E,f.push(_)),_};function Ne(f,_){var E=_.type;if(E in f.g){var I=f.g[E],Z=Array.prototype.indexOf.call(I,_,void 0),ot;(ot=0<=Z)&&Array.prototype.splice.call(I,Z,1),ot&&(Gt(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function Ue(f,_,E,I){for(var Z=0;Z<f.length;++Z){var ot=f[Z];if(!ot.da&&ot.listener==_&&ot.capture==!!E&&ot.ha==I)return Z}return-1}var xe="closure_lm_"+(1e6*Math.random()|0),fe={};function vn(f,_,E,I,Z){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)vn(f,_[ot],E,I,Z);return null}return E=Ti(E),f&&f[xt]?f.K(_,E,m(I)?!!I.capture:!1,Z):Lt(f,_,E,!1,I,Z)}function Lt(f,_,E,I,Z,ot){if(!_)throw Error("Invalid event type");var mt=m(Z)?!!Z.capture:!!Z,$t=Un(f);if($t||(f[xe]=$t=new Se(f)),E=$t.add(_,E,I,mt,ot),E.proxy)return E;if(I=wt(),E.proxy=I,I.src=f,I.listener=E,f.addEventListener)ct||(Z=mt),Z===void 0&&(Z=!1),f.addEventListener(_.toString(),I,Z);else if(f.attachEvent)f.attachEvent(Ln(_.toString()),I);else if(f.addListener&&f.removeListener)f.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function wt(){function f(E){return _.call(f.src,f.listener,E)}const _=Pi;return f}function ze(f,_,E,I,Z){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)ze(f,_[ot],E,I,Z);else I=m(I)?!!I.capture:!!I,E=Ti(E),f&&f[xt]?(f=f.i,_=String(_).toString(),_ in f.g&&(ot=f.g[_],E=Ue(ot,E,I,Z),-1<E&&(Gt(ot[E]),Array.prototype.splice.call(ot,E,1),ot.length==0&&(delete f.g[_],f.h--)))):f&&(f=Un(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Ue(_,E,I,Z)),(E=-1<f?_[f]:null)&&Cn(E))}function Cn(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[xt])Ne(_.i,f);else{var E=f.type,I=f.proxy;_.removeEventListener?_.removeEventListener(E,I,f.capture):_.detachEvent?_.detachEvent(Ln(E),I):_.addListener&&_.removeListener&&_.removeListener(I),(E=Un(_))?(Ne(E,f),E.h==0&&(E.src=null,_[xe]=null)):Gt(f)}}}function Ln(f){return f in fe?fe[f]:fe[f]="on"+f}function Pi(f,_){if(f.da)f=!0;else{_=new pt(_,this);var E=f.listener,I=f.ha||f.src;f.fa&&Cn(f),f=E.call(I,_)}return f}function Un(f){return f=f[xe],f instanceof Se?f:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ti(f){return typeof f=="function"?f:(f[En]||(f[En]=function(_){return f.handleEvent(_)}),f[En])}function Jt(){nt.call(this),this.i=new Se(this),this.M=this,this.F=null}O(Jt,nt),Jt.prototype[xt]=!0,Jt.prototype.removeEventListener=function(f,_,E,I){ze(this,f,_,E,I)};function Bt(f,_){var E,I=f.F;if(I)for(E=[];I;I=I.F)E.push(I);if(f=f.M,I=_.type||_,typeof _=="string")_=new st(_,f);else if(_ instanceof st)_.target=_.target||f;else{var Z=_;_=new st(I,f),V(_,Z)}if(Z=!0,E)for(var ot=E.length-1;0<=ot;ot--){var mt=_.g=E[ot];Z=De(mt,I,!0,_)&&Z}if(mt=_.g=f,Z=De(mt,I,!0,_)&&Z,Z=De(mt,I,!1,_)&&Z,E)for(ot=0;ot<E.length;ot++)mt=_.g=E[ot],Z=De(mt,I,!1,_)&&Z}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var E=f.g[_],I=0;I<E.length;I++)Gt(E[I]);delete f.g[_],f.h--}}this.F=null},Jt.prototype.K=function(f,_,E,I){return this.i.add(String(f),_,!1,E,I)},Jt.prototype.L=function(f,_,E,I){return this.i.add(String(f),_,!0,E,I)};function De(f,_,E,I){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var Z=!0,ot=0;ot<_.length;++ot){var mt=_[ot];if(mt&&!mt.da&&mt.capture==E){var $t=mt.listener,He=mt.ha||mt.src;mt.fa&&Ne(f.i,mt),Z=$t.call(He,I)!==!1&&Z}}return Z&&!I.defaultPrevented}function me(f,_,E){if(typeof f=="function")E&&(f=w(f,E));else if(f&&typeof f.handleEvent=="function")f=w(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(f,_||0)}function Li(f){f.g=me(()=>{f.g=null,f.i&&(f.i=!1,Li(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Oe extends nt{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Li(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ke(f){nt.call(this),this.h=f,this.g={}}O(Ke,nt);var Tn=[];function wn(f){rt(f.g,function(_,E){this.g.hasOwnProperty(E)&&Cn(_)},f),f.g={}}Ke.prototype.N=function(){Ke.aa.N.call(this),wn(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=d.JSON.stringify,nn=d.JSON.parse,Sn=class{stringify(f){return d.JSON.stringify(f,void 0)}parse(f){return d.JSON.parse(f,void 0)}};function hr(){}hr.prototype.h=null;function dr(f){return f.h||(f.h=f.i())}function wi(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){st.call(this,"d")}O(ei,st);function Bn(){st.call(this,"c")}O(Bn,st);var ni={},Ks=null;function Ui(){return Ks=Ks||new Jt}ni.La="serverreachability";function Kr(f){st.call(this,ni.La,f)}O(Kr,st);function zi(f){const _=Ui();Bt(_,new Kr(_))}ni.STAT_EVENT="statevent";function Fa(f,_){st.call(this,ni.STAT_EVENT,f),this.stat=_}O(Fa,st);function ue(f){const _=Ui();Bt(_,new Fa(_,f))}ni.Ma="timingevent";function Ae(f,_){st.call(this,ni.Ma,f),this.size=_}O(Ae,st);function ve(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){f()},_)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function Xs(f,_,E,I,Z,ot){f.info(function(){if(f.g)if(ot)for(var mt="",$t=ot.split("&"),He=0;He<$t.length;He++){var Yt=$t[He].split("=");if(1<Yt.length){var Ze=Yt[0];Yt=Yt[1];var qe=Ze.split("_");mt=2<=qe.length&&qe[1]=="type"?mt+(Ze+"="+Yt+"&"):mt+(Ze+"=redacted&")}}else mt=null;else mt=ot;return"XMLHTTP REQ ("+I+") [attempt "+Z+"]: "+_+`
`+E+`
`+mt})}function Tl(f,_,E,I,Z,ot,mt){f.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Z+"]: "+_+`
`+E+`
`+ot+" "+mt})}function Bi(f,_,E,I){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+gr(f,E)+(I?" "+I:"")})}function ja(f,_){f.info(function(){return"TIMEOUT: "+_})}Nn.prototype.info=function(){};function gr(f,_){if(!f.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var I=E[f];if(!(2>I.length)){var Z=I[1];if(Array.isArray(Z)&&!(1>Z.length)){var ot=Z[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var mt=1;mt<Z.length;mt++)Z[mt]=""}}}}return Xe(E)}catch{return _}}var Hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ri;function si(){}O(si,hr),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ri=new si;function rn(f,_,E,I){this.j=f,this.i=_,this.l=E,this.R=I||1,this.U=new Ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var Qs={},Xr={};function Hn(f,_,E){f.L=1,f.v=ta(qn(_)),f.m=E,f.P=!0,Si(f,null)}function Si(f,_){f.F=Date.now(),mr(f),f.A=qn(f.v);var E=f.A,I=f.R;Array.isArray(I)||(I=[String(I)]),Il(E.i,"t",I),f.C=0,E=f.j.J,f.h=new pe,f.g=xc(f.j,E?_:null,!f.m),0<f.O&&(f.M=new Oe(w(f.Y,f,f.g),f.O)),_=f.U,E=f.g,I=f.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(Tn[0]=Z.toString()),Z=Tn);for(var ot=0;ot<Z.length;ot++){var mt=vn(E,Z[ot],I||_.handleEvent,!1,_.h||_);if(!mt)break;_.g[mt.key]=mt}_=f.H?b(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),zi(),Xs(f.i,f.u,f.A,f.l,f.R,f.m)}rn.prototype.ca=function(f){f=f.target;const _=this.M;_&&ci(f)==3?_.j():this.Y(f)},rn.prototype.Y=function(f){try{if(f==this.g)t:{const qe=ci(this.g);var _=this.g.Ba();const wr=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||wc(this.g)))){this.J||qe!=4||_==7||(_==8||0>=wr?zi(3):zi(2)),qi(this);var E=this.g.Z();this.X=E;e:if(Zs(this)){var I=wc(this.g);f="";var Z=I.length,ot=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),ai(this);var mt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<Z;_++)this.h.h=!0,f+=this.h.i.decode(I[_],{stream:!(ot&&_==Z-1)});I.length=0,this.h.g+=f,this.C=0,mt=this.h.g}else mt=this.g.oa();if(this.o=E==200,Tl(this.i,this.u,this.A,this.l,this.R,qe,E),this.o){if(this.T&&!this.K){e:{if(this.g){var $t,He=this.g;if(($t=He.g?He.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G($t)){var Yt=$t;break e}}Yt=null}if(E=Yt)Bi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,E);else{this.o=!1,this.s=3,ue(12),Be(this),ai(this);break t}}if(this.P){E=!0;let sn;for(;!this.J&&this.C<mt.length;)if(sn=Ga(this,mt),sn==Xr){qe==4&&(this.s=4,ue(14),E=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Qs){this.s=4,ue(15),Bi(this.i,this.l,mt,"[Invalid Chunk]"),E=!1;break}else Bi(this.i,this.l,sn,null),Fi(this,sn);if(Zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||mt.length!=0||this.h.h||(this.s=1,ue(16),E=!1),this.o=this.o&&E,!E)Bi(this.i,this.l,mt,"[Invalid Chunked Response]"),Be(this),ai(this);else if(0<mt.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+mt.length),la(Ze),Ze.M=!0,ue(11))}}else Bi(this.i,this.l,mt,null),Fi(this,mt);qe==4&&Be(this),this.o&&!this.J&&(qe==4?Ic(this.j,this):(this.o=!1,mr(this)))}else vd(this.g),E==400&&0<mt.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),Be(this),ai(this)}}}catch{}finally{}};function Zs(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Ga(f,_){var E=f.C,I=_.indexOf(`
`,E);return I==-1?Xr:(E=Number(_.substring(E,I)),isNaN(E)?Qs:(I+=1,I+E>_.length?Xr:(_=_.slice(I,I+E),f.C=I+E,_)))}rn.prototype.cancel=function(){this.J=!0,Be(this)};function mr(f){f.S=Date.now()+f.I,$a(f,f.I)}function $a(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=ve(w(f.ba,f),_)}function qi(f){f.B&&(d.clearTimeout(f.B),f.B=null)}rn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ja(this.i,this.A),this.L!=2&&(zi(),ue(17)),Be(this),this.s=2,ai(this)):$a(this,this.S-f)};function ai(f){f.j.G==0||f.J||Ic(f.j,f)}function Be(f){qi(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,wn(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Fi(f,_){try{var E=f.j;if(E.G!=0&&(E.g==f||wl(E.h,f))){if(!f.K&&wl(E.h,f)&&E.G==3){try{var I=E.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Z=I;if(Z[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)io(E),eo(E);else break t;Ol(E),ue(18)}}else E.za=Z[1],0<E.za-E.T&&37500>Z[2]&&E.F&&E.v==0&&!E.C&&(E.C=ve(w(E.Za,E),6e3));if(1>=ji(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Tr(E,11)}else if((f.K||E.g==f)&&io(E),!G(_))for(Z=E.Da.g.parse(_),_=0;_<Z.length;_++){let Yt=Z[_];if(E.T=Yt[0],Yt=Yt[1],E.G==2)if(Yt[0]=="c"){E.K=Yt[1],E.ia=Yt[2];const Ze=Yt[3];Ze!=null&&(E.la=Ze,E.j.info("VER="+E.la));const qe=Yt[4];qe!=null&&(E.Aa=qe,E.j.info("SVER="+E.Aa));const wr=Yt[5];wr!=null&&typeof wr=="number"&&0<wr&&(I=1.5*wr,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const sn=f.g;if(sn){const Zi=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zi){var ot=I.h;ot.g||Zi.indexOf("spdy")==-1&&Zi.indexOf("quic")==-1&&Zi.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Ka(ot,ot.h),ot.h=null))}if(I.D){const Vl=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&(I.ya=Vl,re(I.I,I.D,Vl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var mt=f;if(I.qa=Nc(I,I.J?I.ia:null,I.W),mt.K){An(I.h,mt);var $t=mt,He=I.L;He&&($t.I=He),$t.B&&(qi($t),mr($t)),I.g=mt}else bc(I);0<E.i.length&&no(E)}else Yt[0]!="stop"&&Yt[0]!="close"||Tr(E,7);else E.G==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Tr(E,7):xl(E):Yt[0]!="noop"&&E.l&&E.l.ta(Yt),E.v=0)}}zi(4)}catch{}}var Ya=class{constructor(f,_){this.g=f,this.map=_}};function Ai(f){this.l=f||10,d.PerformanceNavigationTiming?(f=d.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ji(f){return f.h?1:f.g?f.g.size:0}function wl(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ka(f,_){f.g?f.g.add(_):f.h=_}function An(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Ai.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Sl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const E of f.g.values())_=_.concat(E.D);return _}return L(f.i)}function md(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(g(f)){for(var _=[],E=f.length,I=0;I<E;I++)_.push(f[I]);return _}_=[],E=0;for(I in f)_[E++]=f[I];return _}function Xa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(g(f)||typeof f=="string"){var _=[];f=f.length;for(var E=0;E<f;E++)_.push(E);return _}_=[],E=0;for(const I in f)_[E++]=I;return _}}}function Al(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(g(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var E=Xa(f),I=md(f),Z=I.length,ot=0;ot<Z;ot++)_.call(void 0,I[ot],E&&E[ot],f)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pd(f,_){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var I=f[E].indexOf("="),Z=null;if(0<=I){var ot=f[E].substring(0,I);Z=f[E].substring(I+1)}else ot=f[E];_(ot,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Me(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Me){this.h=f.h,Js(this,f.j),this.o=f.o,this.g=f.g,Zr(this,f.s),this.l=f.l;var _=f.i,E=new yr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),pr(this,E),this.m=f.m}else f&&(_=String(f).match(Ws))?(this.h=!1,Js(this,_[1]||"",!0),this.o=oi(_[2]||""),this.g=oi(_[3]||"",!0),Zr(this,_[4]),this.l=oi(_[5]||"",!0),pr(this,_[6]||"",!0),this.m=oi(_[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Me.prototype.toString=function(){var f=[],_=this.j;_&&f.push(ea(_,bl,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(ea(_,bl,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(ea(E,E.charAt(0)=="/"?yd:Rl,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",ea(E,Qa)),f.join("")};function qn(f){return new Me(f)}function Js(f,_,E){f.j=E?oi(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Zr(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function pr(f,_,E){_ instanceof yr?(f.i=_,Ec(f.i,f.h)):(E||(_=ea(_,_d)),f.i=new yr(_,f.h))}function re(f,_,E){f.i.set(_,E)}function ta(f){return re(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function oi(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ea(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,vc),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function vc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var bl=/[#\/\?@]/g,Rl=/[#\?:]/g,yd=/[#\?]/g,_d=/[#\?@]/g,Qa=/#/g;function yr(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function li(f){f.g||(f.g=new Map,f.h=0,f.i&&pd(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}e=yr.prototype,e.add=function(f,_){li(this),this.i=null,f=Gi(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function _r(f,_){li(f),_=Gi(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function vr(f,_){return li(f),_=Gi(f,_),f.g.has(_)}e.forEach=function(f,_){li(this),this.g.forEach(function(E,I){E.forEach(function(Z){f.call(_,Z,I,this)},this)},this)},e.na=function(){li(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let I=0;I<_.length;I++){const Z=f[I];for(let ot=0;ot<Z.length;ot++)E.push(_[I])}return E},e.V=function(f){li(this);let _=[];if(typeof f=="string")vr(this,f)&&(_=_.concat(this.g.get(Gi(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)_=_.concat(f[E])}return _},e.set=function(f,_){return li(this),this.i=null,f=Gi(this,f),vr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},e.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Il(f,_,E){_r(f,_),0<E.length&&(f.i=null,f.g.set(Gi(f,_),L(E)),f.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var I=_[E];const ot=encodeURIComponent(String(I)),mt=this.V(I);for(I=0;I<mt.length;I++){var Z=ot;mt[I]!==""&&(Z+="="+encodeURIComponent(String(mt[I]))),f.push(Z)}}return this.i=f.join("&")};function Gi(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Ec(f,_){_&&!f.j&&(li(f),f.i=null,f.g.forEach(function(E,I){var Z=I.toLowerCase();I!=Z&&(_r(this,I),Il(this,Z,E))},f)),f.j=_}function na(f,_){const E=new Nn;if(d.Image){const I=new Image;I.onload=S(ui,E,"TestLoadImage: loaded",!0,_,I),I.onerror=S(ui,E,"TestLoadImage: error",!1,_,I),I.onabort=S(ui,E,"TestLoadImage: abort",!1,_,I),I.ontimeout=S(ui,E,"TestLoadImage: timeout",!1,_,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=f}else _(!1)}function bi(f,_){const E=new Nn,I=new AbortController,Z=setTimeout(()=>{I.abort(),ui(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:I.signal}).then(ot=>{clearTimeout(Z),ot.ok?ui(E,"TestPingServer: ok",!0,_):ui(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Z),ui(E,"TestPingServer: error",!1,_)})}function ui(f,_,E,I,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),I(E)}catch{}}function ia(){this.g=new Sn}function $i(f,_,E){const I=E||"";try{Al(f,function(Z,ot){let mt=Z;m(Z)&&(mt=Xe(Z)),_.push(I+ot+"="+encodeURIComponent(mt))})}catch(Z){throw _.push(I+"type="+encodeURIComponent("_badmap")),Z}}function Wr(f){this.l=f.Ub||null,this.j=f.eb||!1}O(Wr,hr),Wr.prototype.g=function(){return new Er(this.l,this.j)},Wr.prototype.i=function(f){return function(){return f}}({});function Er(f,_){Jt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Er,Jt),e=Er.prototype,e.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Ki(this)},e.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},e.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}e.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Yi(this):Ki(this),this.readyState==3&&Cl(this)}},e.Ra=function(f){this.g&&(this.response=this.responseText=f,Yi(this))},e.Qa=function(f){this.g&&(this.response=f,Yi(this))},e.ga=function(){this.g&&Yi(this)};function Yi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ki(f)}e.setRequestHeader=function(f,_){this.u.append(f,_)},e.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function Ki(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Nl(f){let _="";return rt(f,function(E,I){_+=I,_+=":",_+=E,_+=`\r
`}),_}function Qe(f,_,E){t:{for(I in E){var I=!1;break t}I=!0}I||(E=Nl(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):re(f,_,E))}function te(f){Jt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(te,Jt);var Za=/^https?$/i,ra=["POST","PUT"];e=te.prototype,e.Ha=function(f){this.J=f},e.ea=function(f,_,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ri.g(),this.v=this.o?dr(this.o):dr(ri),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(ot){Tc(this,ot);return}if(f=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Z in I)E.set(Z,I[Z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ot of I.keys())E.set(ot,I.get(ot));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(ot=>ot.toLowerCase()=="content-type"),Z=d.FormData&&f instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ra,_,void 0))||I||Z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,mt]of E)this.g.setRequestHeader(ot,mt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(f),this.u=!1}catch(ot){Tc(this,ot)}};function Tc(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,Wa(f),Xi(f)}function Wa(f){f.A||(f.A=!0,Bt(f,"complete"),Bt(f,"error"))}e.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Bt(this,"complete"),Bt(this,"abort"),Xi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),te.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ja(this):this.bb())},e.bb=function(){Ja(this)};function Ja(f){if(f.h&&typeof c<"u"&&(!f.v[1]||ci(f)!=4||f.Z()!=2)){if(f.u&&ci(f)==4)me(f.Ea,0,f);else if(Bt(f,"readystatechange"),ci(f)==4){f.h=!1;try{const mt=f.Z();t:switch(mt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var E;if(!(E=_)){var I;if(I=mt===0){var Z=String(f.D).match(Ws)[1]||null;!Z&&d.self&&d.self.location&&(Z=d.self.location.protocol.slice(0,-1)),I=!Za.test(Z?Z.toLowerCase():"")}E=I}if(E)Bt(f,"complete"),Bt(f,"success");else{f.m=6;try{var ot=2<ci(f)?f.g.statusText:""}catch{ot=""}f.l=ot+" ["+f.Z()+"]",Wa(f)}}finally{Xi(f)}}}}function Xi(f,_){if(f.g){sa(f);const E=f.g,I=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Bt(f,"ready");try{E.onreadystatechange=I}catch{}}}function sa(f){f.I&&(d.clearTimeout(f.I),f.I=null)}e.isActive=function(){return!!this.g};function ci(f){return f.g?f.g.readyState:0}e.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),nn(_)}};function wc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function vd(f){const _={};f=(f.g&&2<=ci(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<f.length;I++){if(G(f[I]))continue;var E=P(f[I]);const Z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ot=_[Z]||[];_[Z]=ot,ot.push(E)}M(_,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function to(f){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,f),this.cb=aa("retryDelaySeedMs",1e4,f),this.Wa=aa("forwardChannelMaxRetries",2,f),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ai(f&&f.concurrentRequestLimit),this.Da=new ia,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=to.prototype,e.la=8,e.G=1,e.connect=function(f,_,E,I){ue(0),this.W=f,this.H=_||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=Nc(this,null,this.W),no(this)};function xl(f){if(Sc(f),f.G==3){var _=f.U++,E=qn(f.I);if(re(E,"SID",f.K),re(E,"RID",_),re(E,"TYPE","terminate"),oa(f,E),_=new rn(f,f.j,_),_.L=2,_.v=ta(qn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=xc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),mr(_)}Cc(f)}function eo(f){f.g&&(la(f),f.g.cancel(),f.g=null)}function Sc(f){eo(f),f.u&&(d.clearTimeout(f.u),f.u=null),io(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&d.clearTimeout(f.s),f.s=null)}function no(f){if(!Qr(f.h)&&!f.s){f.s=!0;var _=f.Ga;F||N(),J||(F(),J=!0),Y.add(_,f),f.B=0}}function Ed(f,_){return ji(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=ve(w(f.Ga,f,_),Ml(f,f.B)),f.B++,!0)}e.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Z=new rn(this,this.j,f);let ot=this.o;if(this.S&&(ot?(ot=b(ot),V(ot,this.S)):ot=this.S),this.m!==null||this.O||(Z.H=ot,ot=null),this.P)t:{for(var _=0,E=0;E<this.i.length;E++){e:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=E;break t}if(_===4096||E===this.i.length-1){_=E+1;break t}}_=1e3}else _=1e3;_=Ac(this,Z,_),E=qn(this.I),re(E,"RID",f),re(E,"CVER",22),this.D&&re(E,"X-HTTP-Session-Id",this.D),oa(this,E),ot&&(this.O?_="headers="+encodeURIComponent(String(Nl(ot)))+"&"+_:this.m&&Qe(E,this.m,ot)),Ka(this.h,Z),this.Ua&&re(E,"TYPE","init"),this.P?(re(E,"$req",_),re(E,"SID","null"),Z.T=!0,Hn(Z,E,null)):Hn(Z,E,_),this.G=2}}else this.G==3&&(f?Dl(this,f):this.i.length==0||Qr(this.h)||Dl(this))};function Dl(f,_){var E;_?E=_.l:E=f.U++;const I=qn(f.I);re(I,"SID",f.K),re(I,"RID",E),re(I,"AID",f.T),oa(f,I),f.m&&f.o&&Qe(I,f.m,f.o),E=new rn(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Ac(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ka(f.h,E),Hn(E,I,_)}function oa(f,_){f.H&&rt(f.H,function(E,I){re(_,I,E)}),f.l&&Al({},function(E,I){re(_,I,E)})}function Ac(f,_,E){E=Math.min(f.i.length,E);var I=f.l?w(f.l.Na,f.l,f):null;t:{var Z=f.i;let ot=-1;for(;;){const mt=["count="+E];ot==-1?0<E?(ot=Z[0].g,mt.push("ofs="+ot)):ot=0:mt.push("ofs="+ot);let $t=!0;for(let He=0;He<E;He++){let Yt=Z[He].g;const Ze=Z[He].map;if(Yt-=ot,0>Yt)ot=Math.max(0,Z[He].g-100),$t=!1;else try{$i(Ze,mt,"req"+Yt+"_")}catch{I&&I(Ze)}}if($t){I=mt.join("&");break t}}}return f=f.i.splice(0,E),_.D=f,I}function bc(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;F||N(),J||(F(),J=!0),Y.add(_,f),f.v=0}}function Ol(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=ve(w(f.Fa,f),Ml(f,f.v)),f.v++,!0)}e.Fa=function(){if(this.u=null,Rc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=ve(w(this.ab,this),f)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),eo(this),Rc(this))};function la(f){f.A!=null&&(d.clearTimeout(f.A),f.A=null)}function Rc(f){f.g=new rn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=qn(f.qa);re(_,"RID","rpc"),re(_,"SID",f.K),re(_,"AID",f.T),re(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&re(_,"TO",f.ja),re(_,"TYPE","xmlhttp"),oa(f,_),f.m&&f.o&&Qe(_,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=ta(qn(_)),E.m=null,E.P=!0,Si(E,f)}e.Za=function(){this.C!=null&&(this.C=null,eo(this),Ol(this),ue(19))};function io(f){f.C!=null&&(d.clearTimeout(f.C),f.C=null)}function Ic(f,_){var E=null;if(f.g==_){io(f),la(f),f.g=null;var I=2}else if(wl(f.h,_))E=_.D,An(f.h,_),I=1;else return;if(f.G!=0){if(_.o)if(I==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var Z=f.B;I=Ui(),Bt(I,new Ae(I,E)),no(f)}else bc(f);else if(Z=_.s,Z==3||Z==0&&0<_.X||!(I==1&&Ed(f,_)||I==2&&Ol(f)))switch(E&&0<E.length&&(_=f.h,_.i=_.i.concat(E)),Z){case 1:Tr(f,5);break;case 4:Tr(f,10);break;case 3:Tr(f,6);break;default:Tr(f,2)}}}function Ml(f,_){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*_}function Tr(f,_){if(f.j.info("Error code "+_),_==2){var E=w(f.fb,f),I=f.Xa;const Z=!I;I=new Me(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Js(I,"https"),ta(I),Z?na(I.toString(),E):bi(I.toString(),E)}else ue(2);f.G=0,f.l&&f.l.sa(_),Cc(f),Sc(f)}e.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Cc(f){if(f.G=0,f.ka=[],f.l){const _=Sl(f.h);(_.length!=0||f.i.length!=0)&&(k(f.ka,_),k(f.ka,f.i),f.h.i.length=0,L(f.i),f.i.length=0),f.l.ra()}}function Nc(f,_,E){var I=E instanceof Me?qn(E):new Me(E);if(I.g!="")_&&(I.g=_+"."+I.g),Zr(I,I.s);else{var Z=d.location;I=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;var ot=new Me(null);I&&Js(ot,I),_&&(ot.g=_),Z&&Zr(ot,Z),E&&(ot.l=E),I=ot}return E=f.D,_=f.ya,E&&_&&re(I,E,_),re(I,"VER",f.la),oa(f,I),I}function xc(f,_,E){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new te(new Wr({eb:E})):new te(f.pa),_.Ha(f.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dc(){}e=Dc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ro(){}ro.prototype.g=function(f,_){return new bn(f,_)};function bn(f,_){Jt.call(this),this.g=new to(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!G(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!G(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Qi(this)}O(bn,Jt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){xl(this.g)},bn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=Xe(f),f=E);_.i.push(new Ya(_.Ya++,f)),_.G==3&&no(_)},bn.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,bn.aa.N.call(this)};function Oc(f){ei.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){t:{for(const E in _){f=E;break t}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}O(Oc,ei);function Mc(){Bn.call(this),this.status=1}O(Mc,Bn);function Qi(f){this.g=f}O(Qi,Dc),Qi.prototype.ua=function(){Bt(this.g,"a")},Qi.prototype.ta=function(f){Bt(this.g,new Oc(f))},Qi.prototype.sa=function(f){Bt(this.g,new Mc)},Qi.prototype.ra=function(){Bt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,nS=function(){return new ro},eS=function(){return Ui()},tS=ni,Ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,Zf=Hi,ii.COMPLETE="complete",Jw=ii,wi.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,Nu=wi,te.prototype.listenOnce=te.prototype.L,te.prototype.getLastError=te.prototype.Ka,te.prototype.getLastErrorCode=te.prototype.Ba,te.prototype.getStatus=te.prototype.Z,te.prototype.getResponseJson=te.prototype.Oa,te.prototype.getResponseText=te.prototype.oa,te.prototype.send=te.prototype.ea,te.prototype.setWithCredentials=te.prototype.Ha,Ww=te}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});const wE="@firebase/firestore",SE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Dp("@firebase/firestore");function zo(){return Oa.logLevel}function _t(e,...t){if(Oa.logLevel<=Ft.DEBUG){const n=t.map(Vp);Oa.debug(`Firestore (${gl}): ${e}`,...n)}}function qr(e,...t){if(Oa.logLevel<=Ft.ERROR){const n=t.map(Vp);Oa.error(`Firestore (${gl}): ${e}`,...n)}}function nl(e,...t){if(Oa.logLevel<=Ft.WARN){const n=t.map(Vp);Oa.warn(`Firestore (${gl}): ${e}`,...n)}}function Vp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,iS(e,r,n)}function iS(e,t,n){let r=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw qr(r),new Error(r)}function ee(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||iS(t,a,r)}function Mt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends Yr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class XC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class QC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZC{constructor(t){this.t=t,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ee(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let l=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vs,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const g=l;t.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},d=g=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(g=>d(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vs)}},0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string",31837,{l:r}),new rS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ee(t===null||typeof t=="string",2055,{h:t}),new pn(t)}}class WC{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JC{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new WC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ee(this.o===void 0,3512);const r=l=>{l.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,_t("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const a=l=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new AE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=e2(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Pt(e,t){return e<t?-1:e>t?1:0}function Km(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Pt(r,a);{const l=sS(),c=n2(l.encode(bE(e,n)),l.encode(bE(t,n)));return c!==0?c:Pt(r,a)}}n+=r>65535?2:1}return Pt(e.length,t.length)}function bE(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function n2(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Pt(e[n],t[n]);return Pt(e.length,t.length)}function il(e,t,n){return e.length===t.length&&e.every((r,a)=>n(r,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=-62135596800,IE=1e6;class de{static now(){return de.fromMillis(Date.now())}static fromDate(t){return de.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*IE);return new de(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<RE)throw new vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/IE}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-RE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new de(0,0))}static max(){return new Ot(new de(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="__name__";class ir{constructor(t,n,r){n===void 0?n=0:n>t.length&&Nt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Nt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ir.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ir?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=ir.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Pt(t.length,n.length)}static compareSegments(t,n){const r=ir.isNumericId(t),a=ir.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?ir.extractNumericId(t).compare(ir.extractNumericId(n)):Km(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Ms.fromString(t.substring(4,t.length-2))}}class he extends ir{construct(t,n,r){return new he(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new vt(ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(a=>a.length>0))}return new he(n)}static emptyPath(){return new he([])}}const i2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends ir{construct(t,n,r){return new cn(t,n,r)}static isValidIdentifier(t){return i2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CE}static keyField(){return new cn([CE])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new vt(ht.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new vt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new vt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new vt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new cn(n)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.path=t}static fromPath(t){return new bt(he.fromString(t))}static fromName(t){return new bt(he.fromString(t).popFirst(5))}static empty(){return new bt(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&he.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return he.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new he(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=-1;function r2(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Ot.fromTimestamp(r===1e9?new de(n+1,0):new de(n,r));return new Us(a,bt.empty(),t)}function s2(e){return new Us(e.readTime,e.key,Hu)}class Us{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Us(Ot.min(),bt.empty(),Hu)}static max(){return new Us(Ot.max(),bt.empty(),Hu)}}function a2(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=bt.comparator(e.documentKey,t.documentKey),n!==0?n:Pt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(e){if(e.code!==ht.FAILED_PRECONDITION||e.message!==o2)throw e;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let a=0,l=0,c=!1;t.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},g=>r(g))}),c=!0,l===a&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(a=>a?dt.resolve(a):r());return n}static forEach(t,n){const r=[];return t.forEach((a,l)=>{r.push(n.call(this,a,l))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,a)=>{const l=t.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const m=g;n(t[m]).next(y=>{c[m]=y,++d,d===l&&r(c)},y=>a(y))}})}static doWhile(t,n){return new dt((r,a)=>{const l=()=>{t()===!0?n().next(()=>{l()},a):r()};l()})}}function u2(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}qh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=-1;function Fh(e){return e==null}function dh(e){return e===0&&1/e==-1/0}function c2(e){return typeof e=="number"&&Number.isInteger(e)&&!dh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="";function f2(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=NE(t)),t=h2(e.get(n),t);return NE(t)}function h2(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case oS:n+="";break;default:n+=l}}return n}function NE(e){return e+oS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function js(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t,n){this.comparator=t,this.root=n||un.EMPTY}insert(t,n){return new _e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(t){return new _e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,un.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Pf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Pf(this.root,t,this.comparator,!1)}getReverseIterator(){return new Pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Pf(this.root,t,this.comparator,!0)}}class Pf{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class un{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??un.RED,this.left=a??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new un(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return un.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Nt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Nt(27949);return t+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt(57766)}get value(){throw Nt(16141)}get color(){throw Nt(16727)}get left(){throw Nt(29726)}get right(){throw Nt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new un(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.comparator=t,this.data=new _e(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(t){return new DE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $e)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $e(this.comparator);return n.data=t,n}}class DE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this.fields=t,t.sort(cn.comparator)}static empty(){return new Qn([])}unionWith(t){let n=new $e(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Qn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return il(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new uS("Invalid base64 string: "+l):l}}(t);return new fn(n)}static fromUint8Array(t){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(t);return new fn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const d2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(e){if(ee(!!e,39018),typeof e=="string"){let t=0;const n=d2.exec(e);if(ee(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ie(e.seconds),nanos:Ie(e.nanos)}}function Ie(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Bs(e){return typeof e=="string"?fn.fromBase64String(e):fn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="server_timestamp",fS="__type__",hS="__previous_value__",dS="__local_write_time__";function Pp(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[fS])===null||n===void 0?void 0:n.stringValue)===cS}function jh(e){const t=e.mapValue.fields[hS];return Pp(t)?jh(t):t}function qu(e){const t=zs(e.mapValue.fields[dS].timestampValue);return new de(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(t,n,r,a,l,c,d,g,m,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=y}}const gh="(default)";class Fu{constructor(t,n){this.projectId=t,this.database=n||gh}static empty(){return new Fu("","")}get isDefaultDatabase(){return this.database===gh}isEqual(t){return t instanceof Fu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="__type__",m2="__max__",Lf={mapValue:{}},mS="__vector__",mh="value";function Hs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pp(e)?4:y2(e)?9007199254740991:p2(e)?10:11:Nt(28295,{value:e})}function cr(e,t){if(e===t)return!0;const n=Hs(e);if(n!==Hs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qu(e).isEqual(qu(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=zs(a.timestampValue),d=zs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,l){return Bs(a.bytesValue).isEqual(Bs(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,l){return Ie(a.geoPointValue.latitude)===Ie(l.geoPointValue.latitude)&&Ie(a.geoPointValue.longitude)===Ie(l.geoPointValue.longitude)}(e,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Ie(a.integerValue)===Ie(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ie(a.doubleValue),d=Ie(l.doubleValue);return c===d?dh(c)===dh(d):isNaN(c)&&isNaN(d)}return!1}(e,t);case 9:return il(e.arrayValue.values||[],t.arrayValue.values||[],cr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(xE(c)!==xE(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!cr(c[g],d[g])))return!1;return!0}(e,t);default:return Nt(52216,{left:e})}}function ju(e,t){return(e.values||[]).find(n=>cr(n,t))!==void 0}function rl(e,t){if(e===t)return 0;const n=Hs(e),r=Hs(t);if(n!==r)return Pt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pt(e.booleanValue,t.booleanValue);case 2:return function(l,c){const d=Ie(l.integerValue||l.doubleValue),g=Ie(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(e,t);case 3:return OE(e.timestampValue,t.timestampValue);case 4:return OE(qu(e),qu(t));case 5:return Km(e.stringValue,t.stringValue);case 6:return function(l,c){const d=Bs(l),g=Bs(c);return d.compareTo(g)}(e.bytesValue,t.bytesValue);case 7:return function(l,c){const d=l.split("/"),g=c.split("/");for(let m=0;m<d.length&&m<g.length;m++){const y=Pt(d[m],g[m]);if(y!==0)return y}return Pt(d.length,g.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,c){const d=Pt(Ie(l.latitude),Ie(c.latitude));return d!==0?d:Pt(Ie(l.longitude),Ie(c.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ME(e.arrayValue,t.arrayValue);case 10:return function(l,c){var d,g,m,y;const v=l.fields||{},w=c.fields||{},S=(d=v[mh])===null||d===void 0?void 0:d.arrayValue,O=(g=w[mh])===null||g===void 0?void 0:g.arrayValue,L=Pt(((m=S?.values)===null||m===void 0?void 0:m.length)||0,((y=O?.values)===null||y===void 0?void 0:y.length)||0);return L!==0?L:ME(S,O)}(e.mapValue,t.mapValue);case 11:return function(l,c){if(l===Lf.mapValue&&c===Lf.mapValue)return 0;if(l===Lf.mapValue)return 1;if(c===Lf.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),m=c.fields||{},y=Object.keys(m);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const w=Km(g[v],y[v]);if(w!==0)return w;const S=rl(d[g[v]],m[y[v]]);if(S!==0)return S}return Pt(g.length,y.length)}(e.mapValue,t.mapValue);default:throw Nt(23264,{Pe:n})}}function OE(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Pt(e,t);const n=zs(e),r=zs(t),a=Pt(n.seconds,r.seconds);return a!==0?a:Pt(n.nanos,r.nanos)}function ME(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=rl(n[a],r[a]);if(l)return l}return Pt(n.length,r.length)}function sl(e){return Xm(e)}function Xm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=zs(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Bs(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=Xm(l);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Xm(n.fields[c])}`;return a+"}"}(e.mapValue):Nt(61005,{value:e})}function Wf(e){switch(Hs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jh(e);return t?16+Wf(t):16;case 5:return 2*e.stringValue.length;case 6:return Bs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,l)=>a+Wf(l),0)}(e.arrayValue);case 10:case 11:return function(r){let a=0;return js(r.fields,(l,c)=>{a+=l.length+Wf(c)}),a}(e.mapValue);default:throw Nt(13486,{value:e})}}function VE(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qm(e){return!!e&&"integerValue"in e}function Lp(e){return!!e&&"arrayValue"in e}function kE(e){return!!e&&"nullValue"in e}function PE(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jf(e){return!!e&&"mapValue"in e}function p2(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[gS])===null||n===void 0?void 0:n.stringValue)===mS}function ku(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return js(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ku(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ku(e.arrayValue.values[n]);return t}return Object.assign({},e)}function y2(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===m2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.value=t}static empty(){return new Vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Jf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ku(n)}setAll(t){let n=cn.emptyPath(),r={},a=[];t.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,r,a),r={},a=[],n=d.popLast()}c?r[d.lastSegment()]=ku(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());Jf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return cr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];Jf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){js(n,(a,l)=>t[a]=l);for(const a of r)delete t[a]}clone(){return new Vn(ku(this.value))}}function pS(e){const t=[];return js(e.fields,(n,r)=>{const a=new cn([n]);if(Jf(r)){const l=pS(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)}),new Qn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,r,a,l,c,d){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new yn(t,0,Ot.min(),Ot.min(),Ot.min(),Vn.empty(),0)}static newFoundDocument(t,n,r,a){return new yn(t,1,n,Ot.min(),r,a,0)}static newNoDocument(t,n){return new yn(t,2,n,Ot.min(),Ot.min(),Vn.empty(),0)}static newUnknownDocument(t,n){return new yn(t,3,n,Ot.min(),Ot.min(),Vn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof yn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(t,n){this.position=t,this.inclusive=n}}function LE(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=bt.comparator(bt.fromName(c.referenceValue),n.key):r=rl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function UE(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(t,n="asc"){this.field=t,this.dir=n}}function _2(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{}class Le extends yS{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new E2(t,n,r):n==="array-contains"?new S2(t,r):n==="in"?new A2(t,r):n==="not-in"?new b2(t,r):n==="array-contains-any"?new R2(t,r):new Le(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new T2(t,r):new w2(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(rl(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison(rl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends yS{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Oi(t,n)}matches(t){return _S(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function _S(e){return e.op==="and"}function vS(e){return v2(e)&&_S(e)}function v2(e){for(const t of e.filters)if(t instanceof Oi)return!1;return!0}function Zm(e){if(e instanceof Le)return e.field.canonicalString()+e.op.toString()+sl(e.value);if(vS(e))return e.filters.map(t=>Zm(t)).join(",");{const t=e.filters.map(n=>Zm(n)).join(",");return`${e.op}(${t})`}}function ES(e,t){return e instanceof Le?function(r,a){return a instanceof Le&&r.op===a.op&&r.field.isEqual(a.field)&&cr(r.value,a.value)}(e,t):e instanceof Oi?function(r,a){return a instanceof Oi&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((l,c,d)=>l&&ES(c,a.filters[d]),!0):!1}(e,t):void Nt(19439)}function TS(e){return e instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${sl(n.value)}`}(e):e instanceof Oi?function(n){return n.op.toString()+" {"+n.getFilters().map(TS).join(" ,")+"}"}(e):"Filter"}class E2 extends Le{constructor(t,n,r){super(t,n,r),this.key=bt.fromName(r.referenceValue)}matches(t){const n=bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class T2 extends Le{constructor(t,n){super(t,"in",n),this.keys=wS("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class w2 extends Le{constructor(t,n){super(t,"not-in",n),this.keys=wS("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function wS(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>bt.fromName(r.referenceValue))}class S2 extends Le{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Lp(n)&&ju(n.arrayValue,this.value)}}class A2 extends Le{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ju(this.value.arrayValue,n)}}class b2 extends Le{constructor(t,n){super(t,"not-in",n)}matches(t){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ju(this.value.arrayValue,n)}}class R2 extends Le{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ju(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(t,n=null,r=[],a=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function zE(e,t=null,n=[],r=[],a=null,l=null,c=null){return new I2(e,t,n,r,a,l,c)}function Up(e){const t=Mt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Zm(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Fh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>sl(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>sl(r)).join(",")),t.Ie=n}return t.Ie}function zp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!_2(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ES(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!UE(e.startAt,t.startAt)&&UE(e.endAt,t.endAt)}function Wm(e){return bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t,n=null,r=[],a=[],l=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function C2(e,t,n,r,a,l,c,d){return new yl(e,t,n,r,a,l,c,d)}function SS(e){return new yl(e)}function BE(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function AS(e){return e.collectionGroup!==null}function Pu(e){const t=Mt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $e(cn.comparator);return c.filters.forEach(g=>{g.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(t).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Gu(l,r))}),n.has(cn.keyField().canonicalString())||t.Ee.push(new Gu(cn.keyField(),r))}return t.Ee}function sr(e){const t=Mt(e);return t.de||(t.de=N2(t,Pu(e))),t.de}function N2(e,t){if(e.limitType==="F")return zE(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Gu(a.field,l)});const n=e.endAt?new ph(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ph(e.startAt.position,e.startAt.inclusive):null;return zE(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Jm(e,t){const n=e.filters.concat([t]);return new yl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function tp(e,t,n){return new yl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gh(e,t){return zp(sr(e),sr(t))&&e.limitType===t.limitType}function bS(e){return`${Up(sr(e))}|lt:${e.limitType}`}function Bo(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(a=>TS(a)).join(", ")}]`),Fh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(a=>sl(a)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(a=>sl(a)).join(",")),`Target(${r})`}(sr(e))}; limitType=${e.limitType})`}function $h(e,t){return t.isFoundDocument()&&function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):bt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(e,t)&&function(r,a){for(const l of Pu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(e,t)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(e,t)&&function(r,a){return!(r.startAt&&!function(c,d,g){const m=LE(c,d,g);return c.inclusive?m<=0:m<0}(r.startAt,Pu(r),a)||r.endAt&&!function(c,d,g){const m=LE(c,d,g);return c.inclusive?m>=0:m>0}(r.endAt,Pu(r),a))}(e,t)}function x2(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function RS(e){return(t,n)=>{let r=!1;for(const a of Pu(e)){const l=D2(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function D2(e,t,n){const r=e.field.isKeyField()?bt.comparator(t.key,n.key):function(l,c,d){const g=c.data.field(l),m=d.data.field(l);return g!==null&&m!==null?rl(g,m):Nt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){js(this.inner,(n,r)=>{for(const[a,l]of r)t(a,l)})}isEmpty(){return lS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new _e(bt.comparator);function Fr(){return O2}const IS=new _e(bt.comparator);function xu(...e){let t=IS;for(const n of e)t=t.insert(n.key,n);return t}function CS(e){let t=IS;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ra(){return Lu()}function NS(){return Lu()}function Lu(){return new za(e=>e.toString(),(e,t)=>e.isEqual(t))}const M2=new _e(bt.comparator),V2=new $e(bt.comparator);function jt(...e){let t=V2;for(const n of e)t=t.add(n);return t}const k2=new $e(Pt);function P2(){return k2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(t)?"-0":t}}function xS(e){return{integerValue:""+e}}function L2(e,t){return c2(t)?xS(t):Bp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this._=void 0}}function U2(e,t,n){return e instanceof yh?function(a,l){const c={fields:{[fS]:{stringValue:cS},[dS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Pp(l)&&(l=jh(l)),l&&(c.fields[hS]=l),{mapValue:c}}(n,t):e instanceof $u?OS(e,t):e instanceof Yu?MS(e,t):function(a,l){const c=DS(a,l),d=HE(c)+HE(a.Re);return Qm(c)&&Qm(a.Re)?xS(d):Bp(a.serializer,d)}(e,t)}function z2(e,t,n){return e instanceof $u?OS(e,t):e instanceof Yu?MS(e,t):n}function DS(e,t){return e instanceof _h?function(r){return Qm(r)||function(l){return!!l&&"doubleValue"in l}(r)}(t)?t:{integerValue:0}:null}class yh extends Yh{}class $u extends Yh{constructor(t){super(),this.elements=t}}function OS(e,t){const n=VS(t);for(const r of e.elements)n.some(a=>cr(a,r))||n.push(r);return{arrayValue:{values:n}}}class Yu extends Yh{constructor(t){super(),this.elements=t}}function MS(e,t){let n=VS(t);for(const r of e.elements)n=n.filter(a=>!cr(a,r));return{arrayValue:{values:n}}}class _h extends Yh{constructor(t,n){super(),this.serializer=t,this.Re=n}}function HE(e){return Ie(e.integerValue||e.doubleValue)}function VS(e){return Lp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function B2(e,t){return e.field.isEqual(t.field)&&function(r,a){return r instanceof $u&&a instanceof $u||r instanceof Yu&&a instanceof Yu?il(r.elements,a.elements,cr):r instanceof _h&&a instanceof _h?cr(r.Re,a.Re):r instanceof yh&&a instanceof yh}(e.transform,t.transform)}class H2{constructor(t,n){this.version=t,this.transformResults=n}}class Zn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Zn}static exists(t){return new Zn(void 0,t)}static updateTime(t){return new Zn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function th(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Kh{}function kS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Xh(e.key,Zn.none()):new ac(e.key,e.data,Zn.none());{const n=e.data,r=Vn.empty();let a=new $e(cn.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Gs(e.key,r,new Qn(a.toArray()),Zn.none())}}function q2(e,t,n){e instanceof ac?function(a,l,c){const d=a.value.clone(),g=FE(a.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(e,t,n):e instanceof Gs?function(a,l,c){if(!th(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=FE(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(PS(a)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()}(e,t,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,n)}function Uu(e,t,n,r){return e instanceof ac?function(l,c,d,g){if(!th(l.precondition,c))return d;const m=l.value.clone(),y=jE(l.fieldTransforms,g,c);return m.setAll(y),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gs?function(l,c,d,g){if(!th(l.precondition,c))return d;const m=jE(l.fieldTransforms,g,c),y=c.data;return y.setAll(PS(l)),y.setAll(m),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(e,t,n,r):function(l,c,d){return th(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(e,t,n)}function F2(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=DS(r.transform,a||null);l!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,l))}return n||null}function qE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&il(r,a,(l,c)=>B2(l,c))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ac extends Kh{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Gs extends Kh{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function PS(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function FE(e,t,n){const r=new Map;ee(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,d=t.data.field(l.field);r.set(l.field,z2(c,d,n[a]))}return r}function jE(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,U2(l,c,t))}return r}class Xh extends Kh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j2 extends Kh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&q2(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Uu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Uu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=NS();return this.mutations.forEach(a=>{const l=t.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const g=kS(c,d);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),jt())}isEqual(t){return this.batchId===t.batchId&&il(this.mutations,t.mutations,(n,r)=>qE(n,r))&&il(this.baseMutations,t.baseMutations,(n,r)=>qE(n,r))}}class Hp{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){ee(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let a=function(){return M2}();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Hp(t,n,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,Xt;function K2(e){switch(e){case ht.OK:return Nt(64938);case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0;default:return Nt(15467,{code:e})}}function LS(e){if(e===void 0)return qr("GRPC error has no .code"),ht.UNKNOWN;switch(e){case Pe.OK:return ht.OK;case Pe.CANCELLED:return ht.CANCELLED;case Pe.UNKNOWN:return ht.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return ht.INTERNAL;case Pe.UNAVAILABLE:return ht.UNAVAILABLE;case Pe.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Pe.NOT_FOUND:return ht.NOT_FOUND;case Pe.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Pe.ABORTED:return ht.ABORTED;case Pe.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Pe.DATA_LOSS:return ht.DATA_LOSS;default:return Nt(39323,{code:e})}}(Xt=Pe||(Pe={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new Ms([4294967295,4294967295],0);function GE(e){const t=sS().encode(e),n=new Zw;return n.update(t),new Uint8Array(n.digest())}function $E(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Ms([n,r],0),new Ms([a,l],0)]}class qp{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Du(`Invalid padding: ${n}`);if(r<0)throw new Du(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Du(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Du(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Ms.fromNumber(this.pe)}we(t,n,r){let a=t.add(n.multiply(Ms.fromNumber(r)));return a.compare(X2)===1&&(a=new Ms([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=GE(t),[r,a]=$E(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);if(!this.be(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new qp(l,a,n);return r.forEach(d=>c.insert(d)),c}insert(t){if(this.pe===0)return;const n=GE(t),[r,a]=$E(n);for(let l=0;l<this.hashCount;l++){const c=this.we(r,a,l);this.Se(c)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,oc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Qh(Ot.min(),a,new _e(Pt),Fr(),jt())}}class oc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new oc(r,n,jt(),jt(),jt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,n,r,a){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=a}}class US{constructor(t,n){this.targetId=t,this.Ce=n}}class zS{constructor(t,n,r=fn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class YE{constructor(){this.Fe=0,this.Me=KE(),this.xe=fn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=jt(),n=jt(),r=jt();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:Nt(38017,{changeType:l})}}),new oc(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=KE()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ee(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Q2{constructor(t){this.ze=t,this.je=new Map,this.He=Fr(),this.Je=Uf(),this.Ye=Uf(),this.Ze=new _e(Pt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Nt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,a)=>{this.it(a)&&n(a)})}ot(t){const n=t.targetId,r=t.Ce.count,a=this._t(n);if(a){const l=a.target;if(Wm(l))if(r===0){const c=new bt(l.path);this.tt(n,c,yn.newNoDocument(c,Ot.min()))}else ee(r===1,20013,{expectedCount:r});else{const c=this.ut(n);if(c!==r){const d=this.ct(t),g=d?this.lt(d,t,c):1;if(g!==0){this.st(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,m)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=Bs(r).toUint8Array()}catch(g){if(g instanceof uS)return nl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new qp(c,a,l)}catch(g){return nl(g instanceof Du?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.pe===0?null:d}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let a=0;return r.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(t){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&Wm(d.target)){const g=new bt(d.target.path);this.Et(g).has(c)||this.dt(c,g)||this.tt(c,g,yn.newNoDocument(g,t))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let r=jt();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(g=>{const m=this._t(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(l))}),this.He.forEach((l,c)=>c.setReadTime(t));const a=new Qh(t,n,this.Ze,this.He,r);return this.He=Fr(),this.Je=Uf(),this.Ye=Uf(),this.Ze=new _e(Pt),a}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const a=this.rt(t);this.dt(t,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new YE,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $e(Pt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $e(Pt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||_t("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new YE),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Uf(){return new _e(bt.comparator)}function KE(){return new _e(bt.comparator)}const Z2={asc:"ASCENDING",desc:"DESCENDING"},W2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J2={and:"AND",or:"OR"};class tN{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ep(e,t){return e.useProto3Json||Fh(t)?t:{value:t}}function vh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function BS(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function eN(e,t){return vh(e,t.toTimestamp())}function ar(e){return ee(!!e,49232),Ot.fromTimestamp(function(n){const r=zs(n);return new de(r.seconds,r.nanos)}(e))}function Fp(e,t){return np(e,t).canonicalString()}function np(e,t){const n=function(a){return new he(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?n:n.child(t)}function HS(e){const t=he.fromString(e);return ee($S(t),10190,{key:t.toString()}),t}function ip(e,t){return Fp(e.databaseId,t.path)}function wm(e,t){const n=HS(t);if(n.get(1)!==e.databaseId.projectId)throw new vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new bt(FS(n))}function qS(e,t){return Fp(e.databaseId,t)}function nN(e){const t=HS(e);return t.length===4?he.emptyPath():FS(t)}function rp(e){return new he(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function FS(e){return ee(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function XE(e,t,n){return{name:ip(e,t),fields:n.value.mapValue.fields}}function iN(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Nt(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(m,y){return m.useProto3Json?(ee(y===void 0||typeof y=="string",58123),fn.fromBase64String(y||"")):(ee(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),fn.fromUint8Array(y||new Uint8Array))}(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(m){const y=m.code===void 0?ht.UNKNOWN:LS(m.code);return new vt(y,m.message||"")}(c);n=new zS(r,a,l,d||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=wm(e,r.document.name),l=ar(r.document.updateTime),c=r.document.createTime?ar(r.document.createTime):Ot.min(),d=new Vn({mapValue:{fields:r.document.fields}}),g=yn.newFoundDocument(a,l,c,d),m=r.targetIds||[],y=r.removedTargetIds||[];n=new eh(m,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=wm(e,r.document),l=r.readTime?ar(r.readTime):Ot.min(),c=yn.newNoDocument(a,l),d=r.removedTargetIds||[];n=new eh([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=wm(e,r.document),l=r.removedTargetIds||[];n=new eh([],l,a,null)}else{if(!("filter"in t))return Nt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new Y2(a,l),d=r.targetId;n=new US(d,c)}}return n}function rN(e,t){let n;if(t instanceof ac)n={update:XE(e,t.key,t.value)};else if(t instanceof Xh)n={delete:ip(e,t.key)};else if(t instanceof Gs)n={update:XE(e,t.key,t.data),updateMask:dN(t.fieldMask)};else{if(!(t instanceof j2))return Nt(16599,{ft:t.type});n={verify:ip(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(l,c){const d=c.transform;if(d instanceof yh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $u)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Yu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof _h)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Nt(20930,{transform:c.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:eN(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Nt(27497)}(e,t.precondition)),n}function sN(e,t){return e&&e.length>0?(ee(t!==void 0,14353),e.map(n=>function(a,l){let c=a.updateTime?ar(a.updateTime):ar(l);return c.isEqual(Ot.min())&&(c=ar(l)),new H2(c,a.transformResults||[])}(n,t))):[]}function aN(e,t){return{documents:[qS(e,t.path)]}}function oN(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qS(e,a);const l=function(m){if(m.length!==0)return GS(Oi.create(m,"and"))}(t.filters);l&&(n.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(y=>function(w){return{field:Ho(w.field),direction:cN(w.dir)}}(y))}(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=ep(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{gt:n,parent:a}}function lN(e){let t=nN(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){ee(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=function(v){const w=jS(v);return w instanceof Oi&&vS(w)?w.getFilters():[w]}(n.where));let c=[];n.orderBy&&(c=function(v){return v.map(w=>function(O){return new Gu(qo(O.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(w))}(n.orderBy));let d=null;n.limit&&(d=function(v){let w;return w=typeof v=="object"?v.value:v,Fh(w)?null:w}(n.limit));let g=null;n.startAt&&(g=function(v){const w=!!v.before,S=v.values||[];return new ph(S,w)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const w=!v.before,S=v.values||[];return new ph(S,w)}(n.endAt)),C2(t,a,c,l,d,"F",g,m)}function uN(e,t){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt(28987,{purpose:a})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function jS(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qo(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(n.unaryFilter.field);return Le.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(n.unaryFilter.field);return Le.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=qo(n.unaryFilter.field);return Le.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Nt(61313);default:return Nt(60726)}}(e):e.fieldFilter!==void 0?function(n){return Le.create(qo(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Nt(58110);default:return Nt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Oi.create(n.compositeFilter.filters.map(r=>jS(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Nt(1026)}}(n.compositeFilter.op))}(e):Nt(30097,{filter:e})}function cN(e){return Z2[e]}function fN(e){return W2[e]}function hN(e){return J2[e]}function Ho(e){return{fieldPath:e.canonicalString()}}function qo(e){return cn.fromServerFormat(e.fieldPath)}function GS(e){return e instanceof Le?function(n){if(n.op==="=="){if(PE(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NAN"}};if(kE(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PE(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NAN"}};if(kE(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(n.field),op:fN(n.op),value:n.value}}}(e):e instanceof Oi?function(n){const r=n.getFilters().map(a=>GS(a));return r.length===1?r[0]:{compositeFilter:{op:hN(n.op),filters:r}}}(e):Nt(54877,{filter:e})}function dN(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function $S(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,n,r,a,l=Ot.min(),c=Ot.min(),d=fn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Ns(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.wt=t}}function mN(e){const t=lN({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?tp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.Cn=new yN}addToCollectionParentIndex(t,n){return this.Cn.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(Us.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(Us.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class yN{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new $e(he.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new $e(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YS=41943040;class Mn{static withCacheSize(t){return new Mn(t,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(YS,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new al(0)}static lr(){return new al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="LruGarbageCollector",_N=1048576;function WE([e,t],[n,r]){const a=Pt(e,n);return a===0?Pt(t,r):a}class vN{constructor(t){this.Er=t,this.buffer=new $e(WE),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();WE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EN{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){_t(ZE,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pl(n)?_t(ZE,"Ignoring IndexedDB error during garbage collection: ",n):await ml(n)}await this.mr(3e5)})}}class TN{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return dt.resolve(qh.le);const r=new vN(n);return this.gr.forEachTarget(t,a=>r.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>r.Rr(a))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(QE)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QE):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,a,l,c,d,g,m;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(r=v,d=Date.now(),this.removeTargets(t,r,n))).next(v=>(l=v,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(v=>(m=Date.now(),zo()<=Ft.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(m-g)+`ms
Total Duration: ${m-y}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function wN(e,t){return new TN(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.changes=new za(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,yn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(a=>(r=a,this.remoteDocumentCache.getEntry(t,n))).next(a=>(r!==null&&Uu(r.mutation,a,Qn.empty(),de.now()),a))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,jt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=jt()){const a=Ra();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,r).next(l=>{let c=xu();return l.forEach((d,g)=>{c=c.insert(d,g.overlayedDocument)}),c}))}getOverlayedDocuments(t,n){const r=Ra();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,jt()))}populateOverlays(t,n,r){const a=[];return r.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(t,n,r,a){let l=Fr();const c=Lu(),d=function(){return Lu()}();return n.forEach((g,m)=>{const y=r.get(m.key);a.has(m.key)&&(y===void 0||y.mutation instanceof Gs)?l=l.insert(m.key,m):y!==void 0?(c.set(m.key,y.mutation.getFieldMask()),Uu(y.mutation,m,y.mutation.getFieldMask(),de.now())):c.set(m.key,Qn.empty())}),this.recalculateAndSaveOverlays(t,l).next(g=>(g.forEach((m,y)=>c.set(m,y)),n.forEach((m,y)=>{var v;return d.set(m,new AN(y,(v=c.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(t,n){const r=Lu();let a=new _e((c,d)=>c-d),l=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(c=>{for(const d of c)d.keys().forEach(g=>{const m=n.get(g);if(m===null)return;let y=r.get(g)||Qn.empty();y=d.applyToLocalView(m,y),r.set(g,y);const v=(a.get(d.batchId)||jt()).add(g);a=a.insert(d.batchId,v)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),m=g.key,y=g.value,v=NS();y.forEach(w=>{if(!l.has(w)){const S=kS(n.get(w),r.get(w));S!==null&&v.set(w,S),l=l.add(w)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return dt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,a){return function(c){return bt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):AS(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):dt.resolve(Ra());let d=Hu,g=l;return c.next(m=>dt.forEach(m,(y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),l.get(y)?dt.resolve():this.remoteDocumentCache.getEntry(t,y).next(w=>{g=g.insert(y,w)}))).next(()=>this.populateOverlays(t,m,l)).next(()=>this.computeViews(t,g,m,jt())).next(y=>({batchId:d,changes:CS(y)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new bt(n)).next(r=>{let a=xu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=xu();return this.indexManager.getCollectionParents(t,l).next(d=>dt.forEach(d,g=>{const m=function(v,w){return new yl(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,g.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,r,a).next(y=>{y.forEach((v,w)=>{c=c.insert(v,w)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a))).next(c=>{l.forEach((g,m)=>{const y=m.getKey();c.get(y)===null&&(c=c.insert(y,yn.newInvalidDocument(y)))});let d=xu();return c.forEach((g,m)=>{const y=l.get(g);y!==void 0&&Uu(y.mutation,m,Qn.empty(),de.now()),$h(n,m)&&(d=d.insert(g,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return dt.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:ar(a.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(a){return{name:a.name,query:mN(a.bundledQuery),readTime:ar(a.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.overlays=new _e(bt.comparator),this.Qr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ra();return dt.forEach(n,a=>this.getOverlay(t,a).next(l=>{l!==null&&r.set(a,l)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((a,l)=>{this.St(t,n,l)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.Qr.get(r);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const a=Ra(),l=n.length+1,c=new bt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return dt.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new _e((m,y)=>m-y);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=l.get(m.largestBatchId);y===null&&(y=Ra(),l=l.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const d=Ra(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((m,y)=>d.set(m,y)),!(d.size()>=a)););return dt.resolve(d)}St(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(r.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $2(n,r));let l=this.Qr.get(n);l===void 0&&(l=jt(),this.Qr.set(n,l)),this.Qr.set(n,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(t){return dt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.$r=new $e(en.Ur),this.Kr=new $e(en.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new en(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new en(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new bt(new he([])),r=new en(n,t),a=new en(n,t+1),l=[];return this.Kr.forEachInRange([r,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new bt(new he([])),r=new en(n,t),a=new en(n,t+1);let l=jt();return this.Kr.forEachInRange([r,a],c=>{l=l.add(c.key)}),l}containsKey(t){const n=new en(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class en{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return bt.comparator(t.key,n.key)||Pt(t.Zr,n.Zr)}static Wr(t,n){return Pt(t.Zr,n.Zr)||bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new $e(en.Ur)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new G2(l,n,r,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new en(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return dt.resolve(c)}lookupMutationBatch(t,n){return dt.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.ti(r),l=a<0?0:a;return dt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?kp:this.nr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new en(n,0),a=new en(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,a],c=>{const d=this.ei(c.Zr);l.push(d)}),dt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $e(Pt);return n.forEach(a=>{const l=new en(a,0),c=new en(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{r=r.add(d.Zr)})}),dt.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;bt.isDocumentKey(l)||(l=l.child(""));const c=new en(new bt(l),0);let d=new $e(Pt);return this.Xr.forEachWhile(g=>{const m=g.key.path;return!!r.isPrefixOf(m)&&(m.length===a&&(d=d.add(g.Zr)),!0)},c),dt.resolve(this.ni(d))}ni(t){const n=[];return t.forEach(r=>{const a=this.ei(r);a!==null&&n.push(a)}),n}removeMutationBatch(t,n){ee(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return dt.forEach(n.mutations,a=>{const l=new en(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new en(n,0),a=this.Xr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(t){this.ii=t,this.docs=function(){return new _e(bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(t,n){let r=Fr();return n.forEach(a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():yn.newInvalidDocument(a))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=Fr();const c=n.path,d=new bt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:m,value:{document:y}}=g.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||a2(s2(y),r)<=0||(a.has(y.key)||$h(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return dt.resolve(l)}getAllFromCollectionGroup(t,n,r,a){Nt(9500)}si(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new DN(this)}getSize(t){return dt.resolve(this.size)}}class DN extends SN{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(t,a)):this.Br.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(t){this.persistence=t,this.oi=new za(n=>Up(n),zp),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this._i=0,this.ai=new jp,this.targetCount=0,this.ui=al.cr()}forEachTarget(t,n){return this.oi.forEach((r,a)=>n(a)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),dt.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new al(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.Tr(n),dt.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)}),dt.waitFor(l).next(()=>a)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(t,c))}),dt.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n){this.ci={},this.overlays={},this.li=new qh(0),this.hi=!1,this.hi=!0,this.Pi=new CN,this.referenceDelegate=t(this),this.Ti=new ON(this),this.indexManager=new pN,this.remoteDocumentCache=function(a){return new xN(a)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new gN(n),this.Ei=new RN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new IN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new NN(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){_t("MemoryPersistence","Starting transaction:",t);const a=new MN(this.li.next());return this.referenceDelegate.di(),r(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,n){return dt.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class MN extends l2{constructor(t){super(),this.currentSequenceNumber=t}}class Gp{constructor(t){this.persistence=t,this.Vi=new jp,this.mi=null}static fi(t){return new Gp(t)}get gi(){if(this.mi)return this.mi;throw Nt(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),dt.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.gi,r=>{const a=bt.fromPath(r);return this.pi(t,a).next(l=>{l||n.removeEntry(a,Ot.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return dt.or([()=>dt.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Eh{constructor(t,n){this.persistence=t,this.yi=new za(r=>f2(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=wN(this,n)}static fi(t,n){return new Eh(t,n)}di(){}Ai(t){return dt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(a=>r+a))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return dt.forEach(this.yi,(r,a)=>this.Dr(t,r,a).next(l=>l?dt.resolve():n(a)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,c=>this.Dr(t,c,n).next(d=>{d||(r++,l.removeEntry(c,Ot.min()))})).next(()=>l.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),dt.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),dt.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Wf(t.data.value)),n}Dr(t,n,r){return dt.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.yi.get(n);return dt.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.ds=r,this.As=a}static Rs(t,n){let r=jt(),a=jt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new $p(t,n.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return NI()?8:u2(_n())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ws(t,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(t,n,a,r).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new VN;return this.Ss(t,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(t,n,c,d.size)})}).next(()=>l.result)}Ds(t,n,r,a){return r.documentReadCount<this.gs?(zo()<=Ft.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",Bo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),dt.resolve()):(zo()<=Ft.DEBUG&&_t("QueryEngine","Query:",Bo(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.ps*a?(zo()<=Ft.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",Bo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,sr(n))):dt.resolve())}ws(t,n){if(BE(n))return dt.resolve(null);let r=sr(n);return this.indexManager.getIndexType(t,r).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=tp(n,null,"F"),r=sr(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(l=>{const c=jt(...l);return this.ys.getDocuments(t,c).next(d=>this.indexManager.getMinOffset(t,r).next(g=>{const m=this.vs(n,d);return this.Cs(n,m,c,g.readTime)?this.ws(t,tp(n,null,"F")):this.Fs(t,m,n,g)}))})))}bs(t,n,r,a){return BE(n)||a.isEqual(Ot.min())?dt.resolve(null):this.ys.getDocuments(t,r).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,r,a)?dt.resolve(null):(zo()<=Ft.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Bo(n)),this.Fs(t,c,n,r2(a,Hu)).next(d=>d))})}vs(t,n){let r=new $e(RS(t));return n.forEach((a,l)=>{$h(t,l)&&(r=r.add(l))}),r}Cs(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,n,r){return zo()<=Ft.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Bo(n)),this.ys.getDocumentsMatchingQuery(t,n,Us.min(),r)}Fs(t,n,r,a){return this.ys.getDocumentsMatchingQuery(t,r,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="LocalStore",PN=3e8;class LN{constructor(t,n,r,a){this.persistence=t,this.Ms=n,this.serializer=a,this.xs=new _e(Pt),this.Os=new za(l=>Up(l),zp),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bN(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function UN(e,t,n,r){return new LN(e,t,n,r)}async function XS(e,t){const n=Mt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next(l=>(a=l,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],d=[];let g=jt();for(const m of a){c.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}for(const m of l){d.push(m.batchId);for(const y of m.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next(m=>({ks:m,removedBatchIds:c,addedBatchIds:d}))})})}function zN(e,t){const n=Mt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=t.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,g,m,y){const v=m.batch,w=v.keys();let S=dt.resolve();return w.forEach(O=>{S=S.next(()=>y.getEntry(g,O)).next(L=>{const k=m.docVersions.get(O);ee(k!==null,48541),L.version.compareTo(k)<0&&(v.applyToRemoteDocument(L,m),L.isValidDocument()&&(L.setReadTime(m.commitVersion),y.addEntry(L)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(g,v))}(n,r,t,l).next(()=>l.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=jt();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g}(t))).next(()=>n.localDocuments.getDocuments(r,a))})}function QS(e){const t=Mt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function BN(e,t){const n=Mt(e),r=t.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];t.targetChanges.forEach((y,v)=>{const w=a.get(v);if(!w)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,v)));let S=w.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(fn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),a=a.insert(v,S),function(L,k,B){return L.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=PN?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(w,S,y)&&d.push(n.Ti.updateTargetData(l,S))});let g=Fr(),m=jt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(HN(l,c,t.documentUpdates).next(y=>{g=y.qs,m=y.Qs})),!r.isEqual(Ot.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(v=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));d.push(y)}return dt.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,g,m)).next(()=>g)}).then(l=>(n.xs=a,l))}function HN(e,t,n){let r=jt(),a=jt();return n.forEach(l=>r=r.add(l)),t.getEntries(e,r).next(l=>{let c=Fr();return n.forEach((d,g)=>{const m=l.get(d);g.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):_t(Yp,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",g.version)}),{qs:c,Qs:a}})}function qN(e,t){const n=Mt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=kp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function FN(e,t){const n=Mt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return n.Ti.getTargetData(r,t).next(l=>l?(a=l,dt.resolve(a)):n.Ti.allocateTargetId(r).next(c=>(a=new Ns(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=n.xs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function sp(e,t,n){const r=Mt(e),a=r.xs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!pl(c))throw c;_t(Yp,`Failed to update sequence numbers for target ${t}: ${c}`)}r.xs=r.xs.remove(t),r.Os.delete(a.target)}function JE(e,t,n){const r=Mt(e);let a=Ot.min(),l=jt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(g,m,y){const v=Mt(g),w=v.Os.get(y);return w!==void 0?dt.resolve(v.xs.get(w)):v.Ti.getTargetData(m,y)}(r,c,sr(t)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,t,n?a:Ot.min(),n?l:jt())).next(d=>(jN(r,x2(t),d),{documents:d,$s:l})))}function jN(e,t,n){let r=e.Ns.get(t)||Ot.min();n.forEach((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),e.Ns.set(t,r)}class tT{constructor(){this.activeTargetIds=P2()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class GN{constructor(){this.xo=new tT,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new tT,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="ConnectivityMonitor";class nT{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){_t(eT,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){_t(eT,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf=null;function ap(){return zf===null?zf=function(){return 268435456+Math.round(2147483648*Math.random())}():zf++,"0x"+zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="RestConnection",YN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KN{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${a}`,this.Go=this.databaseId.database===gh?`project_id=${r}`:`project_id=${r}&database_id=${a}`}zo(t,n,r,a,l){const c=ap(),d=this.jo(t,n.toUriEncodedString());_t(Sm,`Sending RPC '${t}' ${c}:`,d,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,a,l);const{host:m}=new URL(d),y=hl(m);return this.Jo(t,d,g,r,y).then(v=>(_t(Sm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw nl(Sm,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",r),v})}Yo(t,n,r,a,l,c){return this.zo(t,n,r,a,l)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>t[l]=a),r&&r.headers.forEach((a,l)=>t[l]=a)}jo(t,n){const r=YN[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class QN extends KN{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,a,l){const c=ap();return new Promise((d,g)=>{const m=new Ww;m.setWithCredentials(!0),m.listenOnce(Jw.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Zf.NO_ERROR:const v=m.getResponseJson();_t(mn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case Zf.TIMEOUT:_t(mn,`RPC '${t}' ${c} timed out`),g(new vt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case Zf.HTTP_ERROR:const w=m.getStatus();if(_t(mn,`RPC '${t}' ${c} failed with status:`,w,"response text:",m.getResponseText()),w>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const O=S?.error;if(O&&O.status&&O.message){const L=function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(G)>=0?G:ht.UNKNOWN}(O.status);g(new vt(L,O.message))}else g(new vt(ht.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new vt(ht.UNAVAILABLE,"Connection failed."));break;default:Nt(9055,{h_:t,streamId:c,P_:m.getLastErrorCode(),T_:m.getLastError()})}}finally{_t(mn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);_t(mn,`RPC '${t}' ${c} sending request:`,a),m.send(n,"POST",y,r,15)})}I_(t,n,r){const a=ap(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=nS(),d=eS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const y=l.join("");_t(mn,`Creating RPC '${t}' stream ${a}: ${y}`,g);const v=c.createWebChannel(y,g);this.E_(v);let w=!1,S=!1;const O=new XN({Zo:k=>{S?_t(mn,`Not sending because RPC '${t}' stream ${a} is closed:`,k):(w||(_t(mn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),w=!0),_t(mn,`RPC '${t}' stream ${a} sending:`,k),v.send(k))},Xo:()=>v.close()}),L=(k,B,G)=>{k.listen(B,Q=>{try{G(Q)}catch(q){setTimeout(()=>{throw q},0)}})};return L(v,Nu.EventType.OPEN,()=>{S||(_t(mn,`RPC '${t}' stream ${a} transport opened.`),O.__())}),L(v,Nu.EventType.CLOSE,()=>{S||(S=!0,_t(mn,`RPC '${t}' stream ${a} transport closed`),O.u_(),this.d_(v))}),L(v,Nu.EventType.ERROR,k=>{S||(S=!0,nl(mn,`RPC '${t}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),O.u_(new vt(ht.UNAVAILABLE,"The operation could not be completed")))}),L(v,Nu.EventType.MESSAGE,k=>{var B;if(!S){const G=k.data[0];ee(!!G,16349);const Q=G,q=Q?.error||((B=Q[0])===null||B===void 0?void 0:B.error);if(q){_t(mn,`RPC '${t}' stream ${a} received error:`,q);const X=q.status;let rt=function(R){const V=Pe[R];if(V!==void 0)return LS(V)}(X),M=q.message;rt===void 0&&(rt=ht.INTERNAL,M="Unknown error status: "+X+" with message "+q.message),S=!0,O.u_(new vt(rt,M)),v.close()}else _t(mn,`RPC '${t}' stream ${a} received:`,G),O.c_(G)}}),L(d,tS.STAT_EVENT,k=>{k.stat===Ym.PROXY?_t(mn,`RPC '${t}' stream ${a} detected buffering proxy`):k.stat===Ym.NOPROXY&&_t(mn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.a_()},0),O}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(e){return new tN(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(t,n,r=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-r);a>0&&_t("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="PersistentStream";class WS{constructor(t,n,r,a,l,c,d,g){this.xi=t,this.S_=r,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new ZS(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.v_===n&&this.z_(r,a)},r=>{t(()=>{const a=new vt(ht.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(a)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{r(()=>this.j_(a))}),this.stream.onMessage(a=>{r(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return _t(iT,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(_t(iT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZN extends WS{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=iN(this.serializer,t),r=function(l){if(!("targetChange"in l))return Ot.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?ar(c.readTime):Ot.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=rp(this.serializer),n.addTarget=function(l,c){let d;const g=c.target;if(d=Wm(g)?{documents:aN(l,g)}:{query:oN(l,g).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=BS(l,c.resumeToken);const m=ep(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ot.min())>0){d.readTime=vh(l,c.snapshotVersion.toTimestamp());const m=ep(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,t);const r=uN(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=rp(this.serializer),n.removeTarget=t,this.Q_(n)}}class WN extends WS{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ee(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ee(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ee(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=sN(t.writeResults,t.commitTime),r=ar(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=rp(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>rN(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{}class tx extends JN{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new vt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(t,np(n,r),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new vt(ht.UNKNOWN,l.toString())})}Yo(t,n,r,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(t,np(n,r),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new vt(ht.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class ex{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(qr(n),this.ua=!1):_t("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class nx{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{r.enqueueAndForget(async()=>{Ba(this)&&(_t(Ma,"Restarting streams for network reachability change."),await async function(g){const m=Mt(g);m.da.add(4),await lc(m),m.Va.set("Unknown"),m.da.delete(4),await Wh(m)}(this))})}),this.Va=new ex(r,a)}}async function Wh(e){if(Ba(e))for(const t of e.Aa)await t(!0)}async function lc(e){for(const t of e.Aa)await t(!1)}function JS(e,t){const n=Mt(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Zp(n)?Qp(n):_l(n).N_()&&Xp(n,t))}function Kp(e,t){const n=Mt(e),r=_l(n);n.Ea.delete(t),r.N_()&&tA(n,t),n.Ea.size===0&&(r.N_()?r.k_():Ba(n)&&n.Va.set("Unknown"))}function Xp(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ot.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}_l(e).Z_(t)}function tA(e,t){e.ma.Ke(t),_l(e).X_(t)}function Qp(e){e.ma=new Q2({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),_l(e).start(),e.Va.ca()}function Zp(e){return Ba(e)&&!_l(e).O_()&&e.Ea.size>0}function Ba(e){return Mt(e).da.size===0}function eA(e){e.ma=void 0}async function ix(e){e.Va.set("Online")}async function rx(e){e.Ea.forEach((t,n)=>{Xp(e,t)})}async function sx(e,t){eA(e),Zp(e)?(e.Va.Pa(t),Qp(e)):e.Va.set("Unknown")}async function ax(e,t,n){if(e.Va.set("Online"),t instanceof zS&&t.state===2&&t.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(e,t)}catch(r){_t(Ma,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Th(e,r)}else if(t instanceof eh?e.ma.Xe(t):t instanceof US?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Ot.min()))try{const r=await QS(e.localStore);n.compareTo(r)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ea.get(m);y&&l.Ea.set(m,y.withResumeToken(g.resumeToken,c))}}),d.targetMismatches.forEach((g,m)=>{const y=l.Ea.get(g);if(!y)return;l.Ea.set(g,y.withResumeToken(fn.EMPTY_BYTE_STRING,y.snapshotVersion)),tA(l,g);const v=new Ns(y.target,g,m,y.sequenceNumber);Xp(l,v)}),l.remoteSyncer.applyRemoteEvent(d)}(e,n)}catch(r){_t(Ma,"Failed to raise snapshot:",r),await Th(e,r)}}async function Th(e,t,n){if(!pl(t))throw t;e.da.add(1),await lc(e),e.Va.set("Offline"),n||(n=()=>QS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{_t(Ma,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Wh(e)})}function nA(e,t){return t().catch(n=>Th(e,n,t))}async function Jh(e){const t=Mt(e),n=qs(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:kp;for(;ox(t);)try{const a=await qN(t.localStore,r);if(a===null){t.Ia.length===0&&n.k_();break}r=a.batchId,lx(t,a)}catch(a){await Th(t,a)}iA(t)&&rA(t)}function ox(e){return Ba(e)&&e.Ia.length<10}function lx(e,t){e.Ia.push(t);const n=qs(e);n.N_()&&n.ea&&n.ta(t.mutations)}function iA(e){return Ba(e)&&!qs(e).O_()&&e.Ia.length>0}function rA(e){qs(e).start()}async function ux(e){qs(e).ia()}async function cx(e){const t=qs(e);for(const n of e.Ia)t.ta(n.mutations)}async function fx(e,t,n){const r=e.Ia.shift(),a=Hp.from(r,t,n);await nA(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Jh(e)}async function hx(e,t){t&&qs(e).ea&&await async function(r,a){if(function(c){return K2(c)&&c!==ht.ABORTED}(a.code)){const l=r.Ia.shift();qs(r).L_(),await nA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Jh(r)}}(e,t),iA(e)&&rA(e)}async function rT(e,t){const n=Mt(e);n.asyncQueue.verifyOperationInProgress(),_t(Ma,"RemoteStore received new credentials");const r=Ba(n);n.da.add(3),await lc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Wh(n)}async function dx(e,t){const n=Mt(e);t?(n.da.delete(2),await Wh(n)):t||(n.da.add(2),await lc(n),n.Va.set("Unknown"))}function _l(e){return e.fa||(e.fa=function(n,r,a){const l=Mt(n);return l.oa(),new ZN(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:ix.bind(null,e),n_:rx.bind(null,e),i_:sx.bind(null,e),Y_:ax.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),Zp(e)?Qp(e):e.Va.set("Unknown")):(await e.fa.stop(),eA(e))})),e.fa}function qs(e){return e.ga||(e.ga=function(n,r,a){const l=Mt(n);return l.oa(),new WN(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:ux.bind(null,e),i_:hx.bind(null,e),na:cx.bind(null,e),ra:fx.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await Jh(e)):(await e.ga.stop(),e.Ia.length>0&&(_t(Ma,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,d=new Wp(t,n,c,a,l);return d.start(r),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(ht.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jp(e,t){if(qr("AsyncQueue",`${t}: ${e}`),pl(e))return new vt(ht.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(t){return new Go(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||bt.comparator(n.key,r.key):(n,r)=>bt.comparator(n.key,r.key),this.keyedMap=xu(),this.sortedSet=new _e(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Go)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Go;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.pa=new _e(bt.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Nt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class ol{constructor(t,n,r,a,l,c,d,g,m){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new ol(t,n,Go.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class mx{constructor(){this.queries=aT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const a=Mt(n),l=a.queries;a.queries=aT(),l.forEach((c,d)=>{for(const g of d.Sa)g.onError(r)})})(this,new vt(ht.ABORTED,"Firestore shutting down"))}}function aT(){return new za(e=>bS(e),Gh)}async function px(e,t){const n=Mt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Da()&&t.va()&&(r=2):(l=new gx,r=t.va()?0:1);try{switch(r){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Jp(c,`Initialization of query '${Bo(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,l),l.Sa.push(t),t.Fa(n.onlineState),l.ba&&t.Ma(l.ba)&&ty(n)}async function yx(e,t){const n=Mt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.Sa.indexOf(t);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _x(e,t){const n=Mt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(r=!0);c.ba=a}}r&&ty(n)}function vx(e,t,n){const r=Mt(e),a=r.queries.get(t);if(a)for(const l of a.Sa)l.onError(n);r.queries.delete(t)}function ty(e){e.Ca.forEach(t=>{t.next()})}var op,oT;(oT=op||(op={})).xa="default",oT.Cache="cache";class Ex{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new ol(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=ol.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t){this.key=t}}class aA{constructor(t){this.key=t}}class Tx{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=jt(),this.mutatedKeys=jt(),this.Za=RS(t),this.Xa=new Go(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new sT,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const w=a.get(y),S=$h(this.query,v)?v:null,O=!!w&&this.mutatedKeys.has(w.key),L=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let k=!1;w&&S?w.data.isEqual(S.data)?O!==L&&(r.track({type:3,doc:S}),k=!0):this.ru(w,S)||(r.track({type:2,doc:S}),k=!0,(g&&this.Za(S,g)>0||m&&this.Za(S,m)<0)&&(d=!0)):!w&&S?(r.track({type:0,doc:S}),k=!0):w&&!S&&(r.track({type:1,doc:w}),k=!0,(g||m)&&(d=!0)),k&&(S?(c=c.add(S),l=L?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Xa:c,nu:r,Cs:d,mutatedKeys:l}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const c=t.nu.wa();c.sort((y,v)=>function(S,O){const L=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt(20277,{Vt:k})}};return L(S)-L(O)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(r),a=a!=null&&a;const d=n&&!a?this.su():[],g=this.Ya.size===0&&this.current&&!a?1:0,m=g!==this.Ja;return this.Ja=g,c.length!==0||m?{snapshot:new ol(this.query,t.Xa,l,c,t.mutatedKeys,g===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new sT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=jt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new aA(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new sA(r))}),n}au(t){this.Ha=t.$s,this.Ya=jt();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return ol.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ey="SyncEngine";class wx{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Sx{constructor(t){this.key=t,this.cu=!1}}class Ax{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new za(d=>bS(d),Gh),this.Pu=new Map,this.Tu=new Set,this.Iu=new _e(bt.comparator),this.Eu=new Map,this.du=new jp,this.Au={},this.Ru=new Map,this.Vu=al.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function bx(e,t,n=!0){const r=hA(e);let a;const l=r.hu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await oA(r,t,n,!0),a}async function Rx(e,t){const n=hA(e);await oA(n,t,!0,!1)}async function oA(e,t,n,r){const a=await FN(e.localStore,sr(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let d;return r&&(d=await Ix(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&JS(e.remoteStore,a),d}async function Ix(e,t,n,r,a){e.fu=(v,w,S)=>async function(L,k,B,G){let Q=k.view.tu(B);Q.Cs&&(Q=await JE(L.localStore,k.query,!1).then(({documents:M})=>k.view.tu(M,Q)));const q=G&&G.targetChanges.get(k.targetId),X=G&&G.targetMismatches.get(k.targetId)!=null,rt=k.view.applyChanges(Q,L.isPrimaryClient,q,X);return uT(L,k.targetId,rt.ou),rt.snapshot}(e,v,w,S);const l=await JE(e.localStore,t,!0),c=new Tx(t,l.$s),d=c.tu(l.documents),g=oc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),m=c.applyChanges(d,e.isPrimaryClient,g);uT(e,n,m.ou);const y=new wx(t,n,c);return e.hu.set(t,y),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),m.snapshot}async function Cx(e,t,n){const r=Mt(e),a=r.hu.get(t),l=r.Pu.get(a.targetId);if(l.length>1)return r.Pu.set(a.targetId,l.filter(c=>!Gh(c,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await sp(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Kp(r.remoteStore,a.targetId),lp(r,a.targetId)}).catch(ml)):(lp(r,a.targetId),await sp(r.localStore,a.targetId,!0))}async function Nx(e,t){const n=Mt(e),r=n.hu.get(t),a=n.Pu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kp(n.remoteStore,r.targetId))}async function xx(e,t,n){const r=Lx(e);try{const a=await function(c,d){const g=Mt(c),m=de.now(),y=d.reduce((S,O)=>S.add(O.key),jt());let v,w;return g.persistence.runTransaction("Locally write mutations","readwrite",S=>{let O=Fr(),L=jt();return g.Bs.getEntries(S,y).next(k=>{O=k,O.forEach((B,G)=>{G.isValidDocument()||(L=L.add(B))})}).next(()=>g.localDocuments.getOverlayedDocuments(S,O)).next(k=>{v=k;const B=[];for(const G of d){const Q=F2(G,v.get(G.key).overlayedDocument);Q!=null&&B.push(new Gs(G.key,Q,pS(Q.value.mapValue),Zn.exists(!0)))}return g.mutationQueue.addMutationBatch(S,m,B,d)}).next(k=>{w=k;const B=k.applyToLocalDocumentSet(v,L);return g.documentOverlayCache.saveOverlays(S,k.batchId,B)})}).then(()=>({batchId:w.batchId,changes:CS(v)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),function(c,d,g){let m=c.Au[c.currentUser.toKey()];m||(m=new _e(Pt)),m=m.insert(d,g),c.Au[c.currentUser.toKey()]=m}(r,a.batchId,n),await uc(r,a.changes),await Jh(r.remoteStore)}catch(a){const l=Jp(a,"Failed to persist write");n.reject(l)}}async function lA(e,t){const n=Mt(e);try{const r=await BN(n.localStore,t);t.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(ee(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?ee(c.cu,14607):a.removedDocuments.size>0&&(ee(c.cu,42227),c.cu=!1))}),await uc(n,r,t)}catch(r){await ml(r)}}function lT(e,t,n){const r=Mt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.hu.forEach((l,c)=>{const d=c.view.Fa(t);d.snapshot&&a.push(d.snapshot)}),function(c,d){const g=Mt(c);g.onlineState=d;let m=!1;g.queries.forEach((y,v)=>{for(const w of v.Sa)w.Fa(d)&&(m=!0)}),m&&ty(g)}(r.eventManager,t),a.length&&r.lu.Y_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dx(e,t,n){const r=Mt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new _e(bt.comparator);c=c.insert(l,yn.newNoDocument(l,Ot.min()));const d=jt().add(l),g=new Qh(Ot.min(),new Map,new _e(Pt),c,d);await lA(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(t),ny(r)}else await sp(r.localStore,t,!1).then(()=>lp(r,t,n)).catch(ml)}async function Ox(e,t){const n=Mt(e),r=t.batch.batchId;try{const a=await zN(n.localStore,t);cA(n,r,null),uA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uc(n,a)}catch(a){await ml(a)}}async function Mx(e,t,n){const r=Mt(e);try{const a=await function(c,d){const g=Mt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return g.mutationQueue.lookupMutationBatch(m,d).next(v=>(ee(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(m,v))).next(()=>g.mutationQueue.performConsistencyCheck(m)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(m,y,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>g.localDocuments.getDocuments(m,y))})}(r.localStore,t);cA(r,t,n),uA(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await uc(r,a)}catch(a){await ml(a)}}function uA(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function cA(e,t,n){const r=Mt(e);let a=r.Au[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Au[r.currentUser.toKey()]=a}}function lp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||fA(e,r)})}function fA(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);n!==null&&(Kp(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),ny(e))}function uT(e,t,n){for(const r of n)r instanceof sA?(e.du.addReference(r.key,t),Vx(e,r)):r instanceof aA?(_t(ey,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||fA(e,r.key)):Nt(19791,{pu:r})}function Vx(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(_t(ey,"New document in limbo: "+n),e.Tu.add(r),ny(e))}function ny(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new bt(he.fromString(t)),r=e.Vu.next();e.Eu.set(r,new Sx(n)),e.Iu=e.Iu.insert(n,r),JS(e.remoteStore,new Ns(sr(SS(n.path)),r,"TargetPurposeLimboResolution",qh.le))}}async function uc(e,t,n){const r=Mt(e),a=[],l=[],c=[];r.hu.isEmpty()||(r.hu.forEach((d,g)=>{c.push(r.fu(g,t,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(y=n?.targetChanges.get(g.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(m){a.push(m);const v=$p.Rs(g.targetId,m);l.push(v)}}))}),await Promise.all(c),r.lu.Y_(a),await async function(g,m){const y=Mt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>dt.forEach(m,w=>dt.forEach(w.ds,S=>y.persistence.referenceDelegate.addReference(v,w.targetId,S)).next(()=>dt.forEach(w.As,S=>y.persistence.referenceDelegate.removeReference(v,w.targetId,S)))))}catch(v){if(!pl(v))throw v;_t(Yp,"Failed to update sequence numbers: "+v)}for(const v of m){const w=v.targetId;if(!v.fromCache){const S=y.xs.get(w),O=S.snapshotVersion,L=S.withLastLimboFreeSnapshotVersion(O);y.xs=y.xs.insert(w,L)}}}(r.localStore,l))}async function kx(e,t){const n=Mt(e);if(!n.currentUser.isEqual(t)){_t(ey,"User change. New user:",t.toKey());const r=await XS(n.localStore,t);n.currentUser=t,function(l,c){l.Ru.forEach(d=>{d.forEach(g=>{g.reject(new vt(ht.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await uc(n,r.ks)}}function Px(e,t){const n=Mt(e),r=n.Eu.get(t);if(r&&r.cu)return jt().add(r.key);{let a=jt();const l=n.Pu.get(t);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function hA(e){const t=Mt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Px.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dx.bind(null,t),t.lu.Y_=_x.bind(null,t.eventManager),t.lu.gu=vx.bind(null,t.eventManager),t}function Lx(e){const t=Mt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ox.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,t),t}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return UN(this.persistence,new kN,t.initialUser,this.serializer)}Su(t){return new KS(Gp.fi,this.serializer)}bu(t){return new GN}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class Ux extends wh{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ee(this.persistence.referenceDelegate instanceof Eh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EN(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new KS(r=>Eh.fi(r,n),this.serializer)}}class up{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kx.bind(null,this.syncEngine),await dx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new mx}()}createDatastore(t){const n=Zh(t.databaseInfo.databaseId),r=function(l){return new QN(l)}(t.databaseInfo);return function(l,c,d,g){return new tx(l,c,d,g)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,a,l,c,d){return new nx(r,a,l,c,d)}(this.localStore,this.datastore,t.asyncQueue,n=>lT(this.syncEngine,n,0),function(){return nT.C()?new nT:new $N}())}createSyncEngine(t,n){return function(a,l,c,d,g,m,y){const v=new Ax(a,l,c,d,g,m);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(a){const l=Mt(a);_t(Ma,"RemoteStore shutting down."),l.da.add(5),await lc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}up.provider={build:()=>new up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):qr("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="FirestoreClient";class Bx{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=pn.UNAUTHENTICATED,this.clientId=aS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async c=>{_t(Fs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(_t(Fs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Jp(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function bm(e,t){e.asyncQueue.verifyOperationInProgress(),_t(Fs,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async a=>{r.isEqual(a)||(await XS(t.localStore,a),r=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function cT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Hx(e);_t(Fs,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>rT(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,a)=>rT(t.remoteStore,a)),e._onlineComponents=t}async function Hx(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_t(Fs,"Using user provided OfflineComponentProvider");try{await bm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(a){return a.name==="FirebaseError"?a.code===ht.FAILED_PRECONDITION||a.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;nl("Error using user provided cache. Falling back to memory cache: "+n),await bm(e,new wh)}}else _t(Fs,"Using default OfflineComponentProvider"),await bm(e,new Ux(void 0));return e._offlineComponents}async function dA(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(_t(Fs,"Using user provided OnlineComponentProvider"),await cT(e,e._uninitializedComponentsProvider._online)):(_t(Fs,"Using default OnlineComponentProvider"),await cT(e,new up))),e._onlineComponents}function qx(e){return dA(e).then(t=>t.syncEngine)}async function Fx(e){const t=await dA(e),n=t.eventManager;return n.onListen=bx.bind(null,t.syncEngine),n.onUnlisten=Cx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Rx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Nx.bind(null,t.syncEngine),n}function jx(e,t,n={}){const r=new Vs;return e.asyncQueue.enqueueAndForget(async()=>function(l,c,d,g,m){const y=new zx({next:w=>{y.xu(),c.enqueueAndForget(()=>yx(l,v)),w.fromCache&&g.source==="server"?m.reject(new vt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),v=new Ex(d,y,{includeMetadataChanges:!0,Qa:!0});return px(l,v)}(await Fx(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(e,t,n){if(!n)throw new vt(ht.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Gx(e,t,n,r){if(t===!0&&r===!0)throw new vt(ht.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hT(e){if(!bt.isDocumentKey(e))throw new vt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function dT(e){if(bt.isDocumentKey(e))throw new vt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function td(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Nt(12329,{type:typeof e})}function Va(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=td(e);throw new vt(ht.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="firestore.googleapis.com",gT=!0;class mT{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new vt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pA,this.ssl=gT}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:gT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=YS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<_N)throw new vt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Gx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new vt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ed{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new vt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XC;switch(r.type){case"firstParty":return new JC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new vt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=fT.get(n);r&&(_t("ComponentProvider","Removing Datastore"),fT.delete(n),r.terminate())}(this),Promise.resolve()}}function $x(e,t,n,r={}){var a;e=Va(e,ed);const l=hl(t),c=e._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),g=`${t}:${n}`;l&&(Fw(`https://${g}`),jw("Firestore",!0)),c.host!==pA&&c.host!==g&&nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:g,ssl:l,emulatorOptions:r});if(!xa(m,d)&&(e._setSettings(m),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=pn.MOCK_USER;else{y=EI(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new vt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new pn(w)}e._authCredentials=new QC(new rS(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ha(this.firestore,t,this._query)}}class Wn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wn(this.firestore,t,this._key)}}class ks extends Ha{constructor(t,n,r){super(t,n,SS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wn(this.firestore,null,new bt(t))}withConverter(t){return new ks(this.firestore,t,this._path)}}function iy(e,t,...n){if(e=Ye(e),mA("collection","path",t),e instanceof ed){const r=he.fromString(t,...n);return dT(r),new ks(e,null,r)}{if(!(e instanceof Wn||e instanceof ks))throw new vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(he.fromString(t,...n));return dT(r),new ks(e.firestore,null,r)}}function vl(e,t,...n){if(e=Ye(e),arguments.length===1&&(t=aS.newId()),mA("doc","path",t),e instanceof ed){const r=he.fromString(t,...n);return hT(r),new Wn(e,null,new bt(r))}{if(!(e instanceof Wn||e instanceof ks))throw new vt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(he.fromString(t,...n));return hT(r),new Wn(e.firestore,e instanceof ks?e.converter:null,new bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="AsyncQueue";class yT{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new ZS(this,"async_queue_retry"),this.rc=()=>{const r=Am();r&&_t(pT,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=Am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Vs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!pl(t))throw t;_t(pT,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,qr("INTERNAL UNHANDLED ERROR: ",_T(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const a=Wp.createAndSchedule(this,t,n,r,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Nt(47125,{cc:_T(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function _T(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class cc extends ed{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new yT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new yT(t),this._firestoreClient=void 0,await t}}}function Yx(e,t){const n=typeof e=="object"?e:Kw(),r=typeof e=="string"?e:gh,a=Mp(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=_I("firestore");l&&$x(a,...l)}return a}function ry(e){if(e._terminated)throw new vt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Kx(e),e._firestoreClient}function Kx(e){var t,n,r;const a=e._freezeSettings(),l=function(d,g,m,y){return new g2(d,g,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,gA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new Bx(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(d){const g=d?._online.build();return{_offline:d?._offline.build(g),_online:g}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ll(fn.fromBase64String(t))}catch(n){throw new vt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ll(fn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new vt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new vt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new vt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=/^__.*__$/;class Qx{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Gs(t,this.data,this.fieldMask,n,this.fieldTransforms):new ac(t,this.data,n,this.fieldTransforms)}}class yA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Gs(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function _A(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt(40011,{Ic:e})}}class ly{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new ly(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Vc(t),a}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.dc({path:r,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Sh(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(_A(this.Ic)&&Xx.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class Zx{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Zh(t)}bc(t,n,r,a=!1){return new ly({Ic:t,methodName:n,wc:r,path:cn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uy(e){const t=e._freezeSettings(),n=Zh(e._databaseId);return new Zx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vA(e,t,n,r,a,l={}){const c=e.bc(l.merge||l.mergeFields?2:0,t,n,a);cy("Data must be an object, but it was:",c,r);const d=EA(r,c);let g,m;if(l.merge)g=new Qn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const w=cp(t,v,n);if(!c.contains(w))throw new vt(ht.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);wA(y,w)||y.push(w)}g=new Qn(y),m=c.fieldTransforms.filter(v=>g.covers(v.field))}else g=null,m=c.fieldTransforms;return new Qx(new Vn(d),g,m)}class id extends sy{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof id}}function Wx(e,t,n,r){const a=e.bc(1,t,n);cy("Data must be an object, but it was:",a,r);const l=[],c=Vn.empty();js(r,(g,m)=>{const y=fy(t,g,n);m=Ye(m);const v=a.mc(y);if(m instanceof id)l.push(y);else{const w=fc(m,v);w!=null&&(l.push(y),c.set(y,w))}});const d=new Qn(l);return new yA(c,d,a.fieldTransforms)}function Jx(e,t,n,r,a,l){const c=e.bc(1,t,n),d=[cp(t,r,n)],g=[a];if(l.length%2!=0)throw new vt(ht.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)d.push(cp(t,l[w])),g.push(l[w+1]);const m=[],y=Vn.empty();for(let w=d.length-1;w>=0;--w)if(!wA(m,d[w])){const S=d[w];let O=g[w];O=Ye(O);const L=c.mc(S);if(O instanceof id)m.push(S);else{const k=fc(O,L);k!=null&&(m.push(S),y.set(S,k))}}const v=new Qn(m);return new yA(y,v,c.fieldTransforms)}function tD(e,t,n,r=!1){return fc(n,e.bc(r?4:3,t))}function fc(e,t){if(TA(e=Ye(e)))return cy("Unsupported field value:",t,e),EA(e,t);if(e instanceof sy)return function(r,a){if(!_A(a.Ic))throw a.gc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,a){const l=[];let c=0;for(const d of r){let g=fc(d,a.fc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}}(e,t)}return function(r,a){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L2(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=de.fromDate(r);return{timestampValue:vh(a.serializer,l)}}if(r instanceof de){const l=new de(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vh(a.serializer,l)}}if(r instanceof ay)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ll)return{bytesValue:BS(a.serializer,r._byteString)};if(r instanceof Wn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Fp(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof oy)return function(c,d){return{mapValue:{fields:{[gS]:{stringValue:mS},[mh]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.gc("VectorValues must only contain numeric values.");return Bp(d.serializer,m)})}}}}}}(r,a);throw a.gc(`Unsupported field value: ${td(r)}`)}(e,t)}function EA(e,t){const n={};return lS(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):js(e,(r,a)=>{const l=fc(a,t.Ac(r));l!=null&&(n[r]=l)}),{mapValue:{fields:n}}}function TA(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof de||e instanceof ay||e instanceof ll||e instanceof Wn||e instanceof sy||e instanceof oy)}function cy(e,t,n){if(!TA(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const r=td(n);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function cp(e,t,n){if((t=Ye(t))instanceof nd)return t._internalPath;if(typeof t=="string")return fy(e,t);throw Sh("Field path arguments must be of type string or ",e,!1,void 0,n)}const eD=new RegExp("[~\\*/\\[\\]]");function fy(e,t,n){if(t.search(eD)>=0)throw Sh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new nd(...t.split("."))._internalPath}catch{throw Sh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Sh(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new vt(ht.INVALID_ARGUMENT,d+e+g)}function wA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new nD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(rd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nD extends SA{data(){return super.data()}}function rd(e,t){return typeof t=="string"?fy(e,t):t instanceof nd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new vt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class AA extends hy{}function rD(e,t,...n){let r=[];t instanceof hy&&r.push(t),r=r.concat(n),function(l){const c=l.filter(g=>g instanceof dy).length,d=l.filter(g=>g instanceof sd).length;if(c>1||c>0&&d>0)throw new vt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)e=a._apply(e);return e}class sd extends AA{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new sd(t,n,r)}_apply(t){const n=this._parse(t);return bA(t._query,n),new Ha(t.firestore,t.converter,Jm(t._query,n))}_parse(t){const n=uy(t.firestore);return function(l,c,d,g,m,y,v){let w;if(m.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new vt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ET(v,y);const O=[];for(const L of v)O.push(vT(g,l,L));w={arrayValue:{values:O}}}else w=vT(g,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ET(v,y),w=tD(d,c,v,y==="in"||y==="not-in");return Le.create(m,y,w)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function sD(e,t,n){const r=t,a=rd("where",e);return sd._create(a,r,n)}class dy extends hy{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new dy(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Oi.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const g of d)bA(c,g),c=Jm(c,g)}(t._query,n),new Ha(t.firestore,t.converter,Jm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gy extends AA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new gy(t,n)}_apply(t){const n=function(a,l,c){if(a.startAt!==null)throw new vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new vt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gu(l,c)}(t._query,this._field,this._direction);return new Ha(t.firestore,t.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new yl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,n))}}function aD(e,t="asc"){const n=t,r=rd("orderBy",e);return gy._create(r,n)}function vT(e,t,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new vt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AS(t)&&n.indexOf("/")!==-1)throw new vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(he.fromString(n));if(!bt.isDocumentKey(r))throw new vt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return VE(e,new bt(r))}if(n instanceof Wn)return VE(e,n._key);throw new vt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${td(n)}.`)}function ET(e,t){if(!Array.isArray(e)||e.length===0)throw new vt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bA(e,t){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new vt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class oD{convertValue(t,n="none"){switch(Hs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ie(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Nt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return js(t,(a,l)=>{r[a]=this.convertValue(l,n)}),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[mh].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Ie(c.doubleValue));return new oy(l)}convertGeoPoint(t){return new ay(Ie(t.latitude),Ie(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=jh(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qu(t));default:return null}}convertTimestamp(t){const n=zs(t);return new de(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=he.fromString(t);ee($S(r),9688,{name:t});const a=new Fu(r.get(1),r.get(3)),l=new bt(r.popFirst(5));return a.isEqual(n)||qr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class lD extends SA{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(rd("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nh extends lD{data(t={}){return super.data(t)}}class uD{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Bf(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new nh(this._firestore,this._userDataWriter,r.key,r,new Bf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new vt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const g=new nh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Bf(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const g=new nh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Bf(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,y=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:cD(d.type),doc:g,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt(61501,{type:e})}}class fD extends oD{constructor(t){super(),this.firestore=t}convertBytes(t){return new ll(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Wn(this.firestore,null,n)}}function my(e){e=Va(e,Ha);const t=Va(e.firestore,cc),n=ry(t),r=new fD(t);return iD(e._query),jx(n,e._query).then(a=>new uD(t,r,e,a))}function py(e,t,n){e=Va(e,Wn);const r=Va(e.firestore,cc),a=RA(e.converter,t,n);return yy(r,[vA(uy(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,Zn.none())])}function hD(e){return yy(Va(e.firestore,cc),[new Xh(e._key,Zn.none())])}function yy(e,t){return function(r,a){const l=new Vs;return r.asyncQueue.enqueueAndForget(async()=>xx(await qx(r),a,l)),l.promise}(ry(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uy(t)}set(t,n,r){this._verifyNotCommitted();const a=Rm(t,this._firestore),l=RA(a.converter,n,r),c=vA(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Zn.none())),this}update(t,n,r,...a){this._verifyNotCommitted();const l=Rm(t,this._firestore);let c;return c=typeof(n=Ye(n))=="string"||n instanceof nd?Jx(this._dataReader,"WriteBatch.update",l._key,n,r,a):Wx(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,Zn.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Rm(t,this._firestore);return this._mutations=this._mutations.concat(new Xh(n._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rm(e,t){if((e=Ye(e)).firestore!==t)throw new vt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(e){return ry(e=Va(e,cc)),new dD(e,t=>yy(e,t))}(function(t,n=!0){(function(a){gl=a})(dl),el(new Da("firestore",(r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new cc(new ZC(r.getProvider("auth-internal")),new t2(c,r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new vt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(m.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Os(wE,SE,t),Os(wE,SE,"esm2017")})();function _y(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function CA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gD=CA,NA=new rc("auth","Firebase",CA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Dp("@firebase/auth");function mD(e,...t){Ah.logLevel<=Ft.WARN&&Ah.warn(`Auth (${dl}): ${e}`,...t)}function ih(e,...t){Ah.logLevel<=Ft.ERROR&&Ah.error(`Auth (${dl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(e,...t){throw vy(e,...t)}function or(e,...t){return vy(e,...t)}function xA(e,t,n){const r=Object.assign(Object.assign({},gD()),{[t]:n});return new rc("auth","Firebase",r).create(t,{appName:e.name})}function Br(e){return xA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vy(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return NA.create(e,...t)}function Ct(e,t,...n){if(!e)throw vy(t,...n)}function Lr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ih(t),new Error(t)}function jr(e,t){e||Lr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function pD(){return TT()==="http:"||TT()==="https:"}function TT(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pD()||RI()||"connection"in navigator)?navigator.onLine:!0}function _D(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,n){this.shortDelay=t,this.longDelay=n,jr(n>t,"Short delay should be less than long delay!"),this.isMobile=SI()||II()}get(){return yD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(e,t){jr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TD=new hc(3e4,6e4);function $s(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ys(e,t,n,r,a={}){return OA(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const d=sc(Object.assign({key:e.config.apiKey},c)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const m=Object.assign({method:t,headers:g},l);return bI()||(m.referrerPolicy="no-referrer"),e.emulatorConfig&&hl(e.emulatorConfig.host)&&(m.credentials="include"),DA.fetch()(await MA(e,e.config.apiHost,n,d),m)})}async function OA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},vD),t);try{const a=new SD(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Hf(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[g,m]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Hf(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw Hf(e,"user-disabled",c);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw xA(e,y,m);Mi(e,y)}}catch(a){if(a instanceof Yr)throw a;Mi(e,"network-request-failed",{message:String(a)})}}async function dc(e,t,n,r,a={}){const l=await Ys(e,t,n,r,a);return"mfaPendingCredential"in l&&Mi(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function MA(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?Ey(e.config,a):`${e.config.apiScheme}://${a}`;return ED.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function wD(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(or(this.auth,"network-request-failed")),TD.get())})}}function Hf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=or(e,t,r);return a.customData._tokenResponse=n,a}function wT(e){return e!==void 0&&e.enterprise!==void 0}class AD{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return wD(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bD(e,t){return Ys(e,"GET","/v2/recaptchaConfig",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(e,t){return Ys(e,"POST","/v1/accounts:delete",t)}async function bh(e,t){return Ys(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ID(e,t=!1){const n=Ye(e),r=await n.getIdToken(t),a=Ty(r);Ct(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:zu(Im(a.auth_time)),issuedAtTime:zu(Im(a.iat)),expirationTime:zu(Im(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Im(e){return Number(e)*1e3}function Ty(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const a=zw(n);return a?JSON.parse(a):(ih("Failed to decode base64 JWT payload"),null)}catch(a){return ih("Caught error parsing JWT payload as JSON",a?.toString()),null}}function ST(e){const t=Ty(e);return Ct(t,"internal-error"),Ct(typeof t.exp<"u","internal-error"),Ct(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Yr&&CD(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function CD({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(e){var t;const n=e.auth,r=await e.getIdToken(),a=await Ku(e,bh(n,{idToken:r}));Ct(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?VA(l.providerUserInfo):[],d=DD(e.providerData,c),g=e.isAnonymous,m=!(e.email&&l.passwordHash)&&!d?.length,y=g?m:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new hp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,v)}async function xD(e){const t=Ye(e);await Rh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function DD(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function VA(e){return e.map(t=>{var{providerId:n}=t,r=_y(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(e,t){const n=await OA(e,{},async()=>{const r=sc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await MA(e,a,"/v1/token",`key=${l}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:r};return e.emulatorConfig&&hl(e.emulatorConfig.host)&&(g.credentials="include"),DA.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MD(e,t){return Ys(e,"POST","/v2/accounts:revokeToken",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ct(t.idToken,"internal-error"),Ct(typeof t.idToken<"u","internal-error"),Ct(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ST(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Ct(t.length!==0,"internal-error");const n=ST(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ct(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await OD(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new $o;return r&&(Ct(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(Ct(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(Ct(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e,t){Ct(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Di{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=_y(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ND(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new hp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Ku(this,this.stsTokenManager.getToken(this.auth,t));return Ct(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ID(this,t)}reload(){return xD(this)}_assign(t){this!==t&&(Ct(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Di(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Br(this.auth));const t=await this.getIdToken();return await Ku(this,RD(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,d,g,m,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(a=n.email)!==null&&a!==void 0?a:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,O=(c=n.photoURL)!==null&&c!==void 0?c:void 0,L=(d=n.tenantId)!==null&&d!==void 0?d:void 0,k=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,B=(m=n.createdAt)!==null&&m!==void 0?m:void 0,G=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Q,emailVerified:q,isAnonymous:X,providerData:rt,stsTokenManager:M}=n;Ct(Q&&M,t,"internal-error");const b=$o.fromJSON(this.name,M);Ct(typeof Q=="string",t,"internal-error"),Es(v,t.name),Es(w,t.name),Ct(typeof q=="boolean",t,"internal-error"),Ct(typeof X=="boolean",t,"internal-error"),Es(S,t.name),Es(O,t.name),Es(L,t.name),Es(k,t.name),Es(B,t.name),Es(G,t.name);const R=new Di({uid:Q,auth:t,email:w,emailVerified:q,displayName:v,isAnonymous:X,photoURL:O,phoneNumber:S,tenantId:L,stsTokenManager:b,createdAt:B,lastLoginAt:G});return rt&&Array.isArray(rt)&&(R.providerData=rt.map(V=>Object.assign({},V))),k&&(R._redirectEventId=k),R}static async _fromIdTokenResponse(t,n,r=!1){const a=new $o;a.updateFromServerResponse(n);const l=new Di({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await Rh(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];Ct(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?VA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new $o;d.updateFromIdToken(r);const g=new Di({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(g,m),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;function Ur(e){jr(e instanceof Function,"Expected a class definition");let t=AT.get(e);return t?(jr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,AT.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}kA.type="NONE";const bT=kA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(e,t,n){return`firebase:${e}:${t}:${n}`}class Yo{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=rh(this.userKey,a.apiKey,l),this.fullPersistenceKey=rh("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await bh(this.auth,{idToken:t}).catch(()=>{});return n?Di._fromGetAccountInfoResponse(this.auth,n,t):null}return Di._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Yo(Ur(bT),t,r);const a=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=a[0]||Ur(bT);const c=rh(r,t.config.apiKey,t.name);let d=null;for(const m of n)try{const y=await m._get(c);if(y){let v;if(typeof y=="string"){const w=await bh(t,{idToken:y}).catch(()=>{});if(!w)break;v=await Di._fromGetAccountInfoResponse(t,w,y)}else v=Di._fromJSON(t,y);m!==l&&(d=v),l=m;break}}catch{}const g=a.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Yo(l,t,r):(l=g[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Yo(l,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(HA(t))return"Blackberry";if(qA(t))return"Webos";if(LA(t))return"Safari";if((t.includes("chrome/")||UA(t))&&!t.includes("edge/"))return"Chrome";if(BA(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function PA(e=_n()){return/firefox\//i.test(e)}function LA(e=_n()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function UA(e=_n()){return/crios\//i.test(e)}function zA(e=_n()){return/iemobile/i.test(e)}function BA(e=_n()){return/android/i.test(e)}function HA(e=_n()){return/blackberry/i.test(e)}function qA(e=_n()){return/webos/i.test(e)}function wy(e=_n()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function VD(e=_n()){var t;return wy(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function kD(){return CI()&&document.documentMode===10}function FA(e=_n()){return wy(e)||BA(e)||qA(e)||HA(e)||/windows phone/i.test(e)||zA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(e,t=[]){let n;switch(e){case"Browser":n=RT(_n());break;case"Worker":n=`${RT(_n())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${dl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,d)=>{try{const g=t(l);c(g)}catch(g){d(g)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(e,t={}){return Ys(e,"GET","/v2/passwordPolicy",$s(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=6;class zD{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:UD,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,d;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(c=g.containsNumericCharacter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IT(this),this.idTokenSubscription=new IT(this),this.beforeStateQueue=new PD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Yo.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await bh(this,{idToken:t}),r=await Di._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(_i(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(a=g.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Rh(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=_D()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(_i(this.app))return Promise.reject(Br(this));const n=t?Ye(t):null;return n&&Ct(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Ct(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return _i(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await LD(this),n=new zD(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new rc("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MD(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ur(t)||this._popupRedirectResolver;Ct(n,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,a);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=jA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&mD(`Error while retrieving App Check token: ${n.error}`),n?.token}}function qa(e){return Ye(e)}class IT{constructor(t){this.auth=t,this.observer=null,this.addObserver=PI(n=>this.observer=n)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HD(e){ad=e}function GA(e){return ad.loadJS(e)}function qD(){return ad.recaptchaEnterpriseScript}function FD(){return ad.gapiScript}function jD(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class GD{constructor(){this.enterprise=new $D}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class $D{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const YD="recaptcha-enterprise",$A="NO_RECAPTCHA";class KD{constructor(t){this.type=YD,this.auth=qa(t)}async verify(t="verify",n=!1){async function r(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{bD(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new AD(g);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(g=>{d(g)})})}function a(l,c,d){const g=window.grecaptcha;wT(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:t}).then(m=>{c(m)}).catch(()=>{c($A)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GD().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!n&&wT(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=qD();g.length!==0&&(g+=d),GA(g).then(()=>{a(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function CT(e,t,n,r=!1,a=!1){const l=new KD(e);let c;if(a)c=$A;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const g=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const g=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function dp(e,t,n,r,a){var l;if(!((l=e._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await CT(e,t,n,n==="getOobCode");return r(e,c)}else return r(e,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await CT(e,t,n,n==="getOobCode");return r(e,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(e,t){const n=Mp(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(xa(l,t??{}))return a;Mi(a,"already-initialized")}return n.initialize({options:t})}function QD(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ur);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function ZD(e,t,n){const r=qa(e);Ct(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=YA(t),{host:c,port:d}=WD(t),g=d===null?"":`:${d}`,m={url:`${l}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ct(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ct(xa(m,r.config.emulator)&&xa(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,hl(c)?(Fw(`${l}//${c}${g}`),jw("Auth",!0)):JD()}function YA(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function WD(e){const t=YA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:NT(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:NT(c)}}}function NT(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function JD(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Lr("not implemented")}_getIdTokenResponse(t){return Lr("not implemented")}_linkToIdToken(t,n){return Lr("not implemented")}_getReauthenticationResolver(t){return Lr("not implemented")}}async function tO(e,t){return Ys(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(e,t){return dc(e,"POST","/v1/accounts:signInWithPassword",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(e,t){return dc(e,"POST","/v1/accounts:signInWithEmailLink",$s(e,t))}async function iO(e,t){return dc(e,"POST","/v1/accounts:signInWithEmailLink",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends Sy{constructor(t,n,r,a=null){super("password",r),this._email=t,this._password=n,this._tenantId=a}static _fromEmailAndPassword(t,n){return new Xu(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Xu(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dp(t,n,"signInWithPassword",eO);case"emailLink":return nO(t,{email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dp(t,r,"signUpPassword",tO);case"emailLink":return iO(t,{idToken:n,email:this._email,oobCode:this._password});default:Mi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(e,t){return dc(e,"POST","/v1/accounts:signInWithIdp",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="http://localhost";class ka extends Sy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ka(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=_y(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new ka(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return Ko(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Ko(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Ko(t,n)}buildRequest(){const t={requestUri:rO,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=sc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aO(e){const t=Iu(Cu(e)).link,n=t?Iu(Cu(t)).deep_link_id:null,r=Iu(Cu(e)).deep_link_id;return(r?Iu(Cu(r)).link:null)||r||n||t||e}class Ay{constructor(t){var n,r,a,l,c,d;const g=Iu(Cu(t)),m=(n=g.apiKey)!==null&&n!==void 0?n:null,y=(r=g.oobCode)!==null&&r!==void 0?r:null,v=sO((a=g.mode)!==null&&a!==void 0?a:null);Ct(m&&y&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=y,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=g.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=g.tenantId)!==null&&d!==void 0?d:null}static parseLink(t){const n=aO(t);try{return new Ay(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(t,n){return Xu._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=Ay.parseLink(n);return Ct(r,"argument-error"),Xu._fromEmailAndCode(t,r.code,r.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends KA{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends gc{constructor(){super("facebook.com")}static credential(t){return ka._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return As.credentialFromTaggedObject(t)}static credentialFromError(t){return As.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return As.credential(t.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ka._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return bs.credentialFromTaggedObject(t)}static credentialFromError(t){return bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return bs.credential(n,r)}catch{return null}}}bs.GOOGLE_SIGN_IN_METHOD="google.com";bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends gc{constructor(){super("github.com")}static credential(t){return ka._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Rs.credentialFromTaggedObject(t)}static credentialFromError(t){return Rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Rs.credential(t.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends gc{constructor(){super("twitter.com")}static credential(t,n){return ka._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(e,t){return dc(e,"POST","/v1/accounts:signUp",$s(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Di._fromIdTokenResponse(t,r,a),c=xT(r);return new Pa({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=xT(r);return new Pa({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function xT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends Yr{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Ih.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new Ih(t,n,r,a)}}function XA(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ih._fromErrorAndOperation(e,l,t,r):l})}async function lO(e,t,n=!1){const r=await Ku(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Pa._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(e,t,n=!1){const{auth:r}=e;if(_i(r.app))return Promise.reject(Br(r));const a="reauthenticate";try{const l=await Ku(e,XA(r,a,t,e),n);Ct(l.idToken,r,"internal-error");const c=Ty(l.idToken);Ct(c,r,"internal-error");const{sub:d}=c;return Ct(e.uid===d,r,"user-mismatch"),Pa._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Mi(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(e,t,n=!1){if(_i(e.app))return Promise.reject(Br(e));const r="signIn",a=await XA(e,r,t),l=await Pa._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}async function cO(e,t){return QA(qa(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(e){const t=qa(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fO(e,t,n){if(_i(e.app))return Promise.reject(Br(e));const r=qa(e),c=await dp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oO).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ZA(e),g}),d=await Pa._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function hO(e,t,n){return _i(e.app)?Promise.reject(Br(e)):cO(Ye(e),El.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZA(e),r})}function dO(e,t,n,r){return Ye(e).onIdTokenChanged(t,n,r)}function gO(e,t,n){return Ye(e).beforeAuthStateChanged(t,n)}function mO(e,t,n,r){return Ye(e).onAuthStateChanged(t,n,r)}function pO(e){return Ye(e).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=1e3,_O=10;class JA extends WA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);kD()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,_O):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},yO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}JA.type="LOCAL";const vO=JA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends WA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}tb.type="SESSION";const eb=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new od(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async m=>m(n.origin,l)),g=await EO(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,g)=>{const m=by("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const w=v;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(w.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function wO(e){lr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function SO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AO(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function bO(){return nb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="firebaseLocalStorageDb",RO=1,Nh="firebaseLocalStorage",rb="fbase_key";class mc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ld(e,t){return e.transaction([Nh],t?"readwrite":"readonly").objectStore(Nh)}function IO(){const e=indexedDB.deleteDatabase(ib);return new mc(e).toPromise()}function gp(){const e=indexedDB.open(ib,RO);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Nh,{keyPath:rb})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Nh)?t(r):(r.close(),await IO(),t(await gp()))})})}async function DT(e,t,n){const r=ld(e,!0).put({[rb]:t,value:n});return new mc(r).toPromise()}async function CO(e,t){const n=ld(e,!1).get(t),r=await new mc(n).toPromise();return r===void 0?null:r.value}function OT(e,t){const n=ld(e,!0).delete(t);return new mc(n).toPromise()}const NO=800,xO=3;class sb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>xO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(bO()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await SO(),!this.activeServiceWorker)return;this.sender=new TO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||AO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gp();return await DT(t,Ch,"1"),await OT(t,Ch),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>DT(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>CO(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>OT(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=ld(a,!1).getAll();return new mc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sb.type="LOCAL";const DO=sb;new hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(e,t){return t?Ur(t):(Ct(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Sy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ko(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Ko(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Ko(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function MO(e){return QA(e.auth,new Ry(e),e.bypassAuthState)}function VO(e){const{auth:t,user:n}=e;return Ct(n,t,"internal-error"),uO(n,new Ry(e),e.bypassAuthState)}async function kO(e){const{auth:t,user:n}=e;return Ct(n,t,"internal-error"),lO(n,new Ry(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return MO;case"linkViaPopup":case"linkViaRedirect":return kO;case"reauthViaPopup":case"reauthViaRedirect":return VO;default:Mi(this.auth,"internal-error")}}resolve(t){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=new hc(2e3,1e4);class Fo extends ab{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Ct(t,this.auth,"internal-error"),t}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const t=by();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,PO.get())};t()}}Fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="pendingRedirect",sh=new Map;class UO extends ab{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=sh.get(this.auth._key());if(!t){try{const r=await zO(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}sh.set(this.auth._key(),t)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zO(e,t){const n=qO(t),r=HO(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function BO(e,t){sh.set(e._key(),t)}function HO(e){return Ur(e._redirectPersistence)}function qO(e){return rh(LO,e.config.apiKey,e.name)}async function FO(e,t,n=!1){if(_i(e.app))return Promise.reject(Br(e));const r=qa(e),a=OO(r,t),c=await new UO(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=10*60*1e3;class GO{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$O(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!ob(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(or(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=jO&&this.cachedEventUids.clear(),this.cachedEventUids.has(MT(t))}saveEventToCache(t){this.cachedEventUids.add(MT(t)),this.lastProcessedEventTime=Date.now()}}function MT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function ob({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function $O(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ob(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(e,t={}){return Ys(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XO=/^https?/;async function QO(e){if(e.config.emulator)return;const{authorizedDomains:t}=await YO(e);for(const n of t)try{if(ZO(n))return}catch{}Mi(e,"unauthorized-domain")}function ZO(e){const t=fp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!XO.test(n))return!1;if(KO.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new hc(3e4,6e4);function VT(){const e=lr().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function JO(e){return new Promise((t,n)=>{var r,a,l;function c(){VT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{VT(),n(or(e,"network-request-failed"))},timeout:WO.get()})}if(!((a=(r=lr().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=lr().gapi)===null||l===void 0)&&l.load)c();else{const d=jD("iframefcb");return lr()[d]=()=>{gapi.load?c():n(or(e,"network-request-failed"))},GA(`${FD()}?onload=${d}`).catch(g=>n(g))}}).catch(t=>{throw ah=null,t})}let ah=null;function tM(e){return ah=ah||JO(e),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=new hc(5e3,15e3),nM="__/auth/iframe",iM="emulator/auth/iframe",rM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aM(e){const t=e.config;Ct(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ey(t,iM):`https://${e.config.authDomain}/${nM}`,r={apiKey:t.apiKey,appName:e.name,v:dl},a=sM.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${sc(r).slice(1)}`}async function oM(e){const t=await tM(e),n=lr().gapi;return Ct(n,e,"internal-error"),t.open({where:document.body,url:aM(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rM,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=or(e,"network-request-failed"),d=lr().setTimeout(()=>{l(c)},eM.get());function g(){lr().clearTimeout(d),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uM=500,cM=600,fM="_blank",hM="http://localhost";class kT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dM(e,t,n,r=uM,a=cM){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const g=Object.assign(Object.assign({},lM),{width:r.toString(),height:a.toString(),top:l,left:c}),m=_n().toLowerCase();n&&(d=UA(m)?fM:n),PA(m)&&(t=t||hM,g.scrollbars="yes");const y=Object.entries(g).reduce((w,[S,O])=>`${w}${S}=${O},`,"");if(VD(m)&&d!=="_self")return gM(t||"",d),new kT(null);const v=window.open(t||"",d,y);Ct(v,e,"popup-blocked");try{v.focus()}catch{}return new kT(v)}function gM(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="__/auth/handler",pM="emulator/auth/handler",yM=encodeURIComponent("fac");async function PT(e,t,n,r,a,l){Ct(e.config.authDomain,e,"auth-domain-config-required"),Ct(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:dl,eventId:a};if(t instanceof KA){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",kI(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof gc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),m=g?`#${yM}=${encodeURIComponent(g)}`:"";return`${_M(e)}?${sc(d).slice(1)}${m}`}function _M({config:e}){return e.emulator?Ey(e,pM):`https://${e.authDomain}/${mM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class vM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eb,this._completeRedirectFn=FO,this._overrideRedirectResult=BO}async _openPopup(t,n,r,a){var l;jr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await PT(t,n,r,fp(),a);return dM(t,c,by())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await PT(t,n,r,fp(),a);return wO(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(jr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await oM(t),r=new GO(t);return n.register("authEvent",a=>(Ct(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Cm,{type:Cm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Cm];c!==void 0&&n(!!c),Mi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QO(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return FA()||LA()||wy()}}const EM=vM;var LT="@firebase/auth",UT="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SM(e){el(new Da("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ct(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jA(e)},m=new BD(r,a,l,g);return QD(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),el(new Da("auth-internal",t=>{const n=qa(t.getProvider("auth").getImmediate());return(r=>new TM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(LT,UT,wM(e)),Os(LT,UT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=5*60,bM=qw("authIdTokenMaxAge")||AM;let zT=null;const RM=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>bM)return;const a=n?.token;zT!==a&&(zT=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function IM(e=Kw()){const t=Mp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=XD(e,{popupRedirectResolver:EM,persistence:[DO,vO,eb]}),r=qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=RM(l.toString());gO(n,c,()=>c(n.currentUser)),dO(n,d=>c(d))}}const a=Bw("auth");return a&&ZD(n,`http://${a}`),n}function CM(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}HD({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=or("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",CM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SM("Browser");const NM={apiKey:"AIzaSyByTZ08eCsc2wv0VIWUHNtHSdmAA_JI5hM",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},lb=Yw(NM),Vi=Yx(lb),xh=IM(lb),Jn={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},In={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function xM(){const[e,t]=et.useState(""),[n,r]=et.useState(""),[a,l]=et.useState(!1),[c,d]=et.useState(!1),[g,m]=et.useState(""),y=async w=>{w.preventDefault(),d(!0),m("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(In.INVALID_EMAIL);if(n.length<6)throw new Error(In.WEAK_PASSWORD);const O=await fO(xh,e,n);console.log("User created successfully:",O.user.uid)}catch(S){console.error("Sign up error:",S);let O="Failed to create account";S.code==="auth/email-already-in-use"?O=In.EMAIL_IN_USE:S.code==="auth/invalid-email"?O=In.INVALID_EMAIL:S.code==="auth/weak-password"?O=In.WEAK_PASSWORD:S.code==="auth/operation-not-allowed"?O="Email/password accounts are not enabled. Please contact support.":S.message&&(O=S.message),m(O)}finally{d(!1)}},v=async w=>{w.preventDefault(),d(!0),m("");try{if(!e||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error(In.INVALID_EMAIL);const O=await hO(xh,e,n);console.log("User signed in successfully:",O.user.uid)}catch(S){console.error("Sign in error:",S);let O="Failed to sign in";S.code==="auth/user-not-found"?O=In.USER_NOT_FOUND:S.code==="auth/wrong-password"?O=In.WRONG_PASSWORD:S.code==="auth/invalid-email"?O=In.INVALID_EMAIL:S.code==="auth/user-disabled"?O="This account has been disabled. Please contact support.":S.code==="auth/too-many-requests"?O=In.TOO_MANY_REQUESTS:S.message&&(O=S.message),m(O)}finally{d(!1)}};return Ge.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"Arial, sans-serif",backgroundColor:"#f5f5f5"},children:Ge.jsxs("div",{style:{padding:"2rem",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"white",minWidth:"300px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[Ge.jsx("h2",{style:{textAlign:"center",marginBottom:"1.5rem"},children:a?"Sign Up":"Sign In"}),Ge.jsxs("form",{onSubmit:a?y:v,children:[Ge.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:w=>t(w.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),Ge.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:w=>r(w.target.value),required:!0,style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",border:"1px solid #ccc",borderRadius:"4px",fontSize:"1rem",boxSizing:"border-box"}}),Ge.jsx("button",{type:"submit",disabled:c,style:{width:"100%",padding:"0.75rem",backgroundColor:c?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:c?"not-allowed":"pointer",marginBottom:"1rem"},children:c?"Loading...":a?"Sign Up":"Sign In"}),g&&Ge.jsx("p",{style:{color:"red",textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem"},children:g})]}),Ge.jsxs("p",{style:{textAlign:"center",margin:0},children:[a?"Already have an account?":"Don't have an account?",Ge.jsx("button",{type:"button",onClick:()=>l(!a),style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",marginLeft:"0.5rem",fontSize:"1rem"},children:a?"Sign In":"Sign Up"})]})]})})}const DM=async()=>{try{await pO(xh),console.log("User signed out successfully")}catch(e){throw console.error("Error signing out:",e),e}},OM=()=>{const[e,t]=et.useState(null);return et.useEffect(()=>{const r=mO(xh,a=>{t(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>r()},[]),{user:e,signOut:async()=>{try{await DM(),t(null)}catch(r){console.error("Error in sign out:",r)}}}};function Ei(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ei(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Nm={exports:{}},xm={},Dm={exports:{}},Om={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function MM(){if(BT)return Om;BT=1;var e=ic();function t(v,w){return v===w&&(v!==0||1/v===1/w)||v!==v&&w!==w}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(v,w){var S=w(),O=r({inst:{value:S,getSnapshot:w}}),L=O[0].inst,k=O[1];return l(function(){L.value=S,L.getSnapshot=w,g(L)&&k({inst:L})},[v,S,w]),a(function(){return g(L)&&k({inst:L}),v(function(){g(L)&&k({inst:L})})},[v]),c(S),S}function g(v){var w=v.getSnapshot;v=v.value;try{var S=w();return!n(v,S)}catch{return!0}}function m(v,w){return w()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Om.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,Om}var HT;function VM(){return HT||(HT=1,Dm.exports=MM()),Dm.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function kM(){if(qT)return xm;qT=1;var e=ic(),t=VM();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return xm.useSyncExternalStoreWithSelector=function(m,y,v,w,S){var O=l(null);if(O.current===null){var L={hasValue:!1,value:null};O.current=L}else L=O.current;O=d(function(){function B(rt){if(!G){if(G=!0,Q=rt,rt=w(rt),S!==void 0&&L.hasValue){var M=L.value;if(S(M,rt))return q=M}return q=rt}if(M=q,r(Q,rt))return M;var b=w(rt);return S!==void 0&&S(M,b)?(Q=rt,M):(Q=rt,q=b)}var G=!1,Q,q,X=v===void 0?null:v;return[function(){return B(y())},X===null?void 0:function(){return B(X())}]},[y,v,w,S]);var k=a(m,O[0],O[1]);return c(function(){L.hasValue=!0,L.value=k},[k]),g(k),k},xm}var FT;function PM(){return FT||(FT=1,Nm.exports=kM()),Nm.exports}var LM=PM();const UM=kw(LM),zM={},jT=e=>{let t;const n=new Set,r=(y,v)=>{const w=typeof y=="function"?y(t):y;if(!Object.is(w,t)){const S=t;t=v??(typeof w!="object"||w===null)?w:Object.assign({},t,w),n.forEach(O=>O(t,S))}},a=()=>t,g={setState:r,getState:a,getInitialState:()=>m,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(zM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=t=e(r,a,g);return g},BM=e=>e?jT(e):jT,{useDebugValue:HM}=gt,{useSyncExternalStoreWithSelector:qM}=UM,FM=e=>e;function ub(e,t=FM,n){const r=qM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return HM(r),r}const GT=(e,t)=>{const n=BM(e),r=(a,l=t)=>ub(n,a,l);return Object.assign(r,n),r},jM=(e,t)=>e?GT(e,t):GT;function Pn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var GM={value:()=>{}};function ud(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new oh(n)}function oh(e){this._=e}function $M(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}oh.prototype=ud.prototype={constructor:oh,on:function(e,t){var n=this._,r=$M(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=YM(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=$T(n[a],e.name,t);else if(t==null)for(a in n)n[a]=$T(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oh(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function YM(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function $T(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=GM,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var mp="http://www.w3.org/1999/xhtml";const YT={svg:"http://www.w3.org/2000/svg",xhtml:mp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),YT.hasOwnProperty(t)?{space:YT[t],local:e}:e}function KM(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mp&&t.documentElement.namespaceURI===mp?t.createElement(e):t.createElementNS(n,e)}}function XM(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function cb(e){var t=cd(e);return(t.local?XM:KM)(t)}function QM(){}function Iy(e){return e==null?QM:function(){return this.querySelector(e)}}function ZM(e){typeof e!="function"&&(e=Iy(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=new Array(c),g,m,y=0;y<c;++y)(g=l[y])&&(m=e.call(g,g.__data__,y,l))&&("__data__"in g&&(m.__data__=g.__data__),d[y]=m);return new ti(r,this._parents)}function WM(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function JM(){return[]}function fb(e){return e==null?JM:function(){return this.querySelectorAll(e)}}function tV(e){return function(){return WM(e.apply(this,arguments))}}function eV(e){typeof e=="function"?e=tV(e):e=fb(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&(r.push(e.call(g,g.__data__,m,c)),a.push(g));return new ti(r,a)}function hb(e){return function(){return this.matches(e)}}function db(e){return function(t){return t.matches(e)}}var nV=Array.prototype.find;function iV(e){return function(){return nV.call(this.children,e)}}function rV(){return this.firstElementChild}function sV(e){return this.select(e==null?rV:iV(typeof e=="function"?e:db(e)))}var aV=Array.prototype.filter;function oV(){return Array.from(this.children)}function lV(e){return function(){return aV.call(this.children,e)}}function uV(e){return this.selectAll(e==null?oV:lV(typeof e=="function"?e:db(e)))}function cV(e){typeof e!="function"&&(e=hb(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new ti(r,this._parents)}function gb(e){return new Array(e.length)}function fV(){return new ti(this._enter||this._groups.map(gb),this._parents)}function Dh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dh.prototype={constructor:Dh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hV(e){return function(){return e}}function dV(e,t,n,r,a,l){for(var c=0,d,g=t.length,m=l.length;c<m;++c)(d=t[c])?(d.__data__=l[c],r[c]=d):n[c]=new Dh(e,l[c]);for(;c<g;++c)(d=t[c])&&(a[c]=d)}function gV(e,t,n,r,a,l,c){var d,g,m=new Map,y=t.length,v=l.length,w=new Array(y),S;for(d=0;d<y;++d)(g=t[d])&&(w[d]=S=c.call(g,g.__data__,d,t)+"",m.has(S)?a[d]=g:m.set(S,g));for(d=0;d<v;++d)S=c.call(e,l[d],d,l)+"",(g=m.get(S))?(r[d]=g,g.__data__=l[d],m.delete(S)):n[d]=new Dh(e,l[d]);for(d=0;d<y;++d)(g=t[d])&&m.get(w[d])===g&&(a[d]=g)}function mV(e){return e.__data__}function pV(e,t){if(!arguments.length)return Array.from(this,mV);var n=t?gV:dV,r=this._parents,a=this._groups;typeof e!="function"&&(e=hV(e));for(var l=a.length,c=new Array(l),d=new Array(l),g=new Array(l),m=0;m<l;++m){var y=r[m],v=a[m],w=v.length,S=yV(e.call(y,y&&y.__data__,m,r)),O=S.length,L=d[m]=new Array(O),k=c[m]=new Array(O),B=g[m]=new Array(w);n(y,v,L,k,B,S,t);for(var G=0,Q=0,q,X;G<O;++G)if(q=L[G]){for(G>=Q&&(Q=G+1);!(X=k[Q])&&++Q<O;);q._next=X||null}}return c=new ti(c,r),c._enter=d,c._exit=g,c}function yV(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _V(){return new ti(this._exit||this._groups.map(gb),this._parents)}function vV(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function EV(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),d=new Array(a),g=0;g<c;++g)for(var m=n[g],y=r[g],v=m.length,w=d[g]=new Array(v),S,O=0;O<v;++O)(S=m[O]||y[O])&&(w[O]=S);for(;g<a;++g)d[g]=n[g];return new ti(d,this._parents)}function TV(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function wV(e){e||(e=SV);function t(v,w){return v&&w?e(v.__data__,w.__data__):!v-!w}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],d=c.length,g=a[l]=new Array(d),m,y=0;y<d;++y)(m=c[y])&&(g[y]=m);g.sort(t)}return new ti(a,this._parents).order()}function SV(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function AV(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function bV(){return Array.from(this)}function RV(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function IV(){let e=0;for(const t of this)++e;return e}function CV(){return!this.node()}function NV(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&e.call(d,d.__data__,l,a);return this}function xV(e){return function(){this.removeAttribute(e)}}function DV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OV(e,t){return function(){this.setAttribute(e,t)}}function MV(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function VV(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function kV(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function PV(e,t){var n=cd(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?DV:xV:typeof t=="function"?n.local?kV:VV:n.local?MV:OV)(n,t))}function mb(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function LV(e){return function(){this.style.removeProperty(e)}}function UV(e,t,n){return function(){this.style.setProperty(e,t,n)}}function zV(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function BV(e,t,n){return arguments.length>1?this.each((t==null?LV:typeof t=="function"?zV:UV)(e,t,n??"")):ul(this.node(),e)}function ul(e,t){return e.style.getPropertyValue(t)||mb(e).getComputedStyle(e,null).getPropertyValue(t)}function HV(e){return function(){delete this[e]}}function qV(e,t){return function(){this[e]=t}}function FV(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function jV(e,t){return arguments.length>1?this.each((t==null?HV:typeof t=="function"?FV:qV)(e,t)):this.node()[e]}function pb(e){return e.trim().split(/^|\s+/)}function Cy(e){return e.classList||new yb(e)}function yb(e){this._node=e,this._names=pb(e.getAttribute("class")||"")}yb.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _b(e,t){for(var n=Cy(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function vb(e,t){for(var n=Cy(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function GV(e){return function(){_b(this,e)}}function $V(e){return function(){vb(this,e)}}function YV(e,t){return function(){(t.apply(this,arguments)?_b:vb)(this,e)}}function KV(e,t){var n=pb(e+"");if(arguments.length<2){for(var r=Cy(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?YV:t?GV:$V)(n,t))}function XV(){this.textContent=""}function QV(e){return function(){this.textContent=e}}function ZV(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function WV(e){return arguments.length?this.each(e==null?XV:(typeof e=="function"?ZV:QV)(e)):this.node().textContent}function JV(){this.innerHTML=""}function t4(e){return function(){this.innerHTML=e}}function e4(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function n4(e){return arguments.length?this.each(e==null?JV:(typeof e=="function"?e4:t4)(e)):this.node().innerHTML}function i4(){this.nextSibling&&this.parentNode.appendChild(this)}function r4(){return this.each(i4)}function s4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a4(){return this.each(s4)}function o4(e){var t=typeof e=="function"?e:cb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function l4(){return null}function u4(e,t){var n=typeof e=="function"?e:cb(e),r=t==null?l4:typeof t=="function"?t:Iy(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function c4(){var e=this.parentNode;e&&e.removeChild(this)}function f4(){return this.each(c4)}function h4(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function d4(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function g4(e){return this.select(e?d4:h4)}function m4(e){return arguments.length?this.property("__data__",e):this.node().__data__}function p4(e){return function(t){e.call(this,t,this.__data__)}}function y4(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function _4(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function v4(e,t,n){return function(){var r=this.__on,a,l=p4(t);if(r){for(var c=0,d=r.length;c<d;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function E4(e,t,n){var r=y4(e+""),a,l=r.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,m=d.length,y;g<m;++g)for(a=0,y=d[g];a<l;++a)if((c=r[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?v4:_4,a=0;a<l;++a)this.each(d(r[a],t,n));return this}function Eb(e,t,n){var r=mb(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function T4(e,t){return function(){return Eb(this,e,t)}}function w4(e,t){return function(){return Eb(this,e,t.apply(this,arguments))}}function S4(e,t){return this.each((typeof t=="function"?w4:T4)(e,t))}function*A4(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var Tb=[null];function ti(e,t){this._groups=e,this._parents=t}function pc(){return new ti([[document.documentElement]],Tb)}function b4(){return this}ti.prototype=pc.prototype={constructor:ti,select:ZM,selectAll:eV,selectChild:sV,selectChildren:uV,filter:cV,data:pV,enter:fV,exit:_V,join:vV,merge:EV,selection:b4,order:TV,sort:wV,call:AV,nodes:bV,node:RV,size:IV,empty:CV,each:NV,attr:PV,style:BV,property:jV,classed:KV,text:WV,html:n4,raise:r4,lower:a4,append:o4,insert:u4,remove:f4,clone:g4,datum:m4,on:E4,dispatch:S4,[Symbol.iterator]:A4};function Ni(e){return typeof e=="string"?new ti([[document.querySelector(e)]],[document.documentElement]):new ti([[e]],Tb)}function R4(e){let t;for(;t=e.sourceEvent;)e=t;return e}function rr(e,t){if(e=R4(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const I4={passive:!1},Qu={capture:!0,passive:!1};function Mm(e){e.stopImmediatePropagation()}function Xo(e){e.preventDefault(),e.stopImmediatePropagation()}function wb(e){var t=e.document.documentElement,n=Ni(e).on("dragstart.drag",Xo,Qu);"onselectstart"in t?n.on("selectstart.drag",Xo,Qu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Sb(e,t){var n=e.document.documentElement,r=Ni(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xo,Qu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qf=e=>()=>e;function pp(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:l,x:c,y:d,dx:g,dy:m,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:y}})}pp.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function C4(e){return!e.ctrlKey&&!e.button}function N4(){return this.parentNode}function x4(e,t){return t??{x:e.x,y:e.y}}function D4(){return navigator.maxTouchPoints||"ontouchstart"in this}function O4(){var e=C4,t=N4,n=x4,r=D4,a={},l=ud("start","drag","end"),c=0,d,g,m,y,v=0;function w(q){q.on("mousedown.drag",S).filter(r).on("touchstart.drag",k).on("touchmove.drag",B,I4).on("touchend.drag touchcancel.drag",G).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(q,X){if(!(y||!e.call(this,q,X))){var rt=Q(this,t.call(this,q,X),q,X,"mouse");rt&&(Ni(q.view).on("mousemove.drag",O,Qu).on("mouseup.drag",L,Qu),wb(q.view),Mm(q),m=!1,d=q.clientX,g=q.clientY,rt("start",q))}}function O(q){if(Xo(q),!m){var X=q.clientX-d,rt=q.clientY-g;m=X*X+rt*rt>v}a.mouse("drag",q)}function L(q){Ni(q.view).on("mousemove.drag mouseup.drag",null),Sb(q.view,m),Xo(q),a.mouse("end",q)}function k(q,X){if(e.call(this,q,X)){var rt=q.changedTouches,M=t.call(this,q,X),b=rt.length,R,V;for(R=0;R<b;++R)(V=Q(this,M,q,X,rt[R].identifier,rt[R]))&&(Mm(q),V("start",q,rt[R]))}}function B(q){var X=q.changedTouches,rt=X.length,M,b;for(M=0;M<rt;++M)(b=a[X[M].identifier])&&(Xo(q),b("drag",q,X[M]))}function G(q){var X=q.changedTouches,rt=X.length,M,b;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),M=0;M<rt;++M)(b=a[X[M].identifier])&&(Mm(q),b("end",q,X[M]))}function Q(q,X,rt,M,b,R){var V=l.copy(),P=rr(R||rt,X),U,x,D;if((D=n.call(q,new pp("beforestart",{sourceEvent:rt,target:w,identifier:b,active:c,x:P[0],y:P[1],dx:0,dy:0,dispatch:V}),M))!=null)return U=D.x-P[0]||0,x=D.y-P[1]||0,function $(C,F,J){var Y=P,N;switch(C){case"start":a[b]=$,N=c++;break;case"end":delete a[b],--c;case"drag":P=rr(J||F,X),N=c;break}V.call(C,q,new pp(C,{sourceEvent:F,subject:D,target:w,identifier:b,active:N,x:P[0]+U,y:P[1]+x,dx:P[0]-Y[0],dy:P[1]-Y[1],dispatch:V}),M)}}return w.filter=function(q){return arguments.length?(e=typeof q=="function"?q:qf(!!q),w):e},w.container=function(q){return arguments.length?(t=typeof q=="function"?q:qf(q),w):t},w.subject=function(q){return arguments.length?(n=typeof q=="function"?q:qf(q),w):n},w.touchable=function(q){return arguments.length?(r=typeof q=="function"?q:qf(!!q),w):r},w.on=function(){var q=l.on.apply(l,arguments);return q===l?w:q},w.clickDistance=function(q){return arguments.length?(v=(q=+q)*q,w):Math.sqrt(v)},w}function Ny(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ab(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yc(){}var Zu=.7,Oh=1/Zu,Qo="\\s*([+-]?\\d+)\\s*",Wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ur="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M4=/^#([0-9a-f]{3,8})$/,V4=new RegExp(`^rgb\\(${Qo},${Qo},${Qo}\\)$`),k4=new RegExp(`^rgb\\(${ur},${ur},${ur}\\)$`),P4=new RegExp(`^rgba\\(${Qo},${Qo},${Qo},${Wu}\\)$`),L4=new RegExp(`^rgba\\(${ur},${ur},${ur},${Wu}\\)$`),U4=new RegExp(`^hsl\\(${Wu},${ur},${ur}\\)$`),z4=new RegExp(`^hsla\\(${Wu},${ur},${ur},${Wu}\\)$`),KT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ny(yc,Ju,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XT,formatHex:XT,formatHex8:B4,formatHsl:H4,formatRgb:QT,toString:QT});function XT(){return this.rgb().formatHex()}function B4(){return this.rgb().formatHex8()}function H4(){return bb(this).formatHsl()}function QT(){return this.rgb().formatRgb()}function Ju(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=M4.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ZT(t):n===3?new kn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ff(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ff(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=V4.exec(e))?new kn(t[1],t[2],t[3],1):(t=k4.exec(e))?new kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=P4.exec(e))?Ff(t[1],t[2],t[3],t[4]):(t=L4.exec(e))?Ff(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=U4.exec(e))?tw(t[1],t[2]/100,t[3]/100,1):(t=z4.exec(e))?tw(t[1],t[2]/100,t[3]/100,t[4]):KT.hasOwnProperty(e)?ZT(KT[e]):e==="transparent"?new kn(NaN,NaN,NaN,0):null}function ZT(e){return new kn(e>>16&255,e>>8&255,e&255,1)}function Ff(e,t,n,r){return r<=0&&(e=t=n=NaN),new kn(e,t,n,r)}function q4(e){return e instanceof yc||(e=Ju(e)),e?(e=e.rgb(),new kn(e.r,e.g,e.b,e.opacity)):new kn}function yp(e,t,n,r){return arguments.length===1?q4(e):new kn(e,t,n,r??1)}function kn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ny(kn,yp,Ab(yc,{brighter(e){return e=e==null?Oh:Math.pow(Oh,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zu:Math.pow(Zu,e),new kn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kn(Na(this.r),Na(this.g),Na(this.b),Mh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WT,formatHex:WT,formatHex8:F4,formatRgb:JT,toString:JT}));function WT(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}`}function F4(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}${Ia((isNaN(this.opacity)?1:this.opacity)*255)}`}function JT(){const e=Mh(this.opacity);return`${e===1?"rgb(":"rgba("}${Na(this.r)}, ${Na(this.g)}, ${Na(this.b)}${e===1?")":`, ${e})`}`}function Mh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Na(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ia(e){return e=Na(e),(e<16?"0":"")+e.toString(16)}function tw(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xi(e,t,n,r)}function bb(e){if(e instanceof xi)return new xi(e.h,e.s,e.l,e.opacity);if(e instanceof yc||(e=Ju(e)),!e)return new xi;if(e instanceof xi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,d=l-a,g=(l+a)/2;return d?(t===l?c=(n-r)/d+(n<r)*6:n===l?c=(r-t)/d+2:c=(t-n)/d+4,d/=g<.5?l+a:2-l-a,c*=60):d=g>0&&g<1?0:c,new xi(c,d,g,e.opacity)}function j4(e,t,n,r){return arguments.length===1?bb(e):new xi(e,t,n,r??1)}function xi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ny(xi,j4,Ab(yc,{brighter(e){return e=e==null?Oh:Math.pow(Oh,e),new xi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zu:Math.pow(Zu,e),new xi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new kn(Vm(e>=240?e-240:e+120,a,r),Vm(e,a,r),Vm(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new xi(ew(this.h),jf(this.s),jf(this.l),Mh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mh(this.opacity);return`${e===1?"hsl(":"hsla("}${ew(this.h)}, ${jf(this.s)*100}%, ${jf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ew(e){return e=(e||0)%360,e<0?e+360:e}function jf(e){return Math.max(0,Math.min(1,e||0))}function Vm(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Rb=e=>()=>e;function G4(e,t){return function(n){return e+n*t}}function $4(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Y4(e){return(e=+e)==1?Ib:function(t,n){return n-t?$4(t,n,e):Rb(isNaN(t)?n:t)}}function Ib(e,t){var n=t-e;return n?G4(e,n):Rb(isNaN(e)?t:e)}const nw=function e(t){var n=Y4(t);function r(a,l){var c=n((a=yp(a)).r,(l=yp(l)).r),d=n(a.g,l.g),g=n(a.b,l.b),m=Ib(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=g(y),a.opacity=m(y),a+""}}return r.gamma=e,r}(1);function ws(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _p=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,km=new RegExp(_p.source,"g");function K4(e){return function(){return e}}function X4(e){return function(t){return e(t)+""}}function Q4(e,t){var n=_p.lastIndex=km.lastIndex=0,r,a,l,c=-1,d=[],g=[];for(e=e+"",t=t+"";(r=_p.exec(e))&&(a=km.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(r=r[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,g.push({i:c,x:ws(r,a)})),n=km.lastIndex;return n<t.length&&(l=t.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?g[0]?X4(g[0].x):K4(t):(t=g.length,function(m){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(m);return d.join("")})}var iw=180/Math.PI,vp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cb(e,t,n,r,a,l){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*r)&&(n-=e*g,r-=t*g),(d=Math.sqrt(n*n+r*r))&&(n/=d,r/=d,g/=d),e*r<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*iw,skewX:Math.atan(g)*iw,scaleX:c,scaleY:d}}var Gf;function Z4(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vp:Cb(t.a,t.b,t.c,t.d,t.e,t.f)}function W4(e){return e==null||(Gf||(Gf=document.createElementNS("http://www.w3.org/2000/svg","g")),Gf.setAttribute("transform",e),!(e=Gf.transform.baseVal.consolidate()))?vp:(e=e.matrix,Cb(e.a,e.b,e.c,e.d,e.e,e.f))}function Nb(e,t,n,r){function a(m){return m.length?m.pop()+" ":""}function l(m,y,v,w,S,O){if(m!==v||y!==w){var L=S.push("translate(",null,t,null,n);O.push({i:L-4,x:ws(m,v)},{i:L-2,x:ws(y,w)})}else(v||w)&&S.push("translate("+v+t+w+n)}function c(m,y,v,w){m!==y?(m-y>180?y+=360:y-m>180&&(m+=360),w.push({i:v.push(a(v)+"rotate(",null,r)-2,x:ws(m,y)})):y&&v.push(a(v)+"rotate("+y+r)}function d(m,y,v,w){m!==y?w.push({i:v.push(a(v)+"skewX(",null,r)-2,x:ws(m,y)}):y&&v.push(a(v)+"skewX("+y+r)}function g(m,y,v,w,S,O){if(m!==v||y!==w){var L=S.push(a(S)+"scale(",null,",",null,")");O.push({i:L-4,x:ws(m,v)},{i:L-2,x:ws(y,w)})}else(v!==1||w!==1)&&S.push(a(S)+"scale("+v+","+w+")")}return function(m,y){var v=[],w=[];return m=e(m),y=e(y),l(m.translateX,m.translateY,y.translateX,y.translateY,v,w),c(m.rotate,y.rotate,v,w),d(m.skewX,y.skewX,v,w),g(m.scaleX,m.scaleY,y.scaleX,y.scaleY,v,w),m=y=null,function(S){for(var O=-1,L=w.length,k;++O<L;)v[(k=w[O]).i]=k.x(S);return v.join("")}}}var J4=Nb(Z4,"px, ","px)","deg)"),tk=Nb(W4,", ",")",")"),ek=1e-12;function rw(e){return((e=Math.exp(e))+1/e)/2}function nk(e){return((e=Math.exp(e))-1/e)/2}function ik(e){return((e=Math.exp(2*e))-1)/(e+1)}const rk=function e(t,n,r){function a(l,c){var d=l[0],g=l[1],m=l[2],y=c[0],v=c[1],w=c[2],S=y-d,O=v-g,L=S*S+O*O,k,B;if(L<ek)B=Math.log(w/m)/t,k=function(M){return[d+M*S,g+M*O,m*Math.exp(t*M*B)]};else{var G=Math.sqrt(L),Q=(w*w-m*m+r*L)/(2*m*n*G),q=(w*w-m*m-r*L)/(2*w*n*G),X=Math.log(Math.sqrt(Q*Q+1)-Q),rt=Math.log(Math.sqrt(q*q+1)-q);B=(rt-X)/t,k=function(M){var b=M*B,R=rw(X),V=m/(n*G)*(R*ik(t*b+X)-nk(X));return[d+V*S,g+V*O,m*R/rw(t*b+X)]}}return k.duration=B*1e3*t/Math.SQRT2,k}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,g=d*d;return e(c,d,g)},a}(Math.SQRT2,2,4);var cl=0,Ou=0,wu=0,xb=1e3,Vh,Mu,kh=0,La=0,fd=0,tc=typeof performance=="object"&&performance.now?performance:Date,Db=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xy(){return La||(Db(sk),La=tc.now()+fd)}function sk(){La=0}function Ph(){this._call=this._time=this._next=null}Ph.prototype=Ob.prototype={constructor:Ph,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xy():+n)+(t==null?0:+t),!this._next&&Mu!==this&&(Mu?Mu._next=this:Vh=this,Mu=this),this._call=e,this._time=n,Ep()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ep())}};function Ob(e,t,n){var r=new Ph;return r.restart(e,t,n),r}function ak(){xy(),++cl;for(var e=Vh,t;e;)(t=La-e._time)>=0&&e._call.call(void 0,t),e=e._next;--cl}function sw(){La=(kh=tc.now())+fd,cl=Ou=0;try{ak()}finally{cl=0,lk(),La=0}}function ok(){var e=tc.now(),t=e-kh;t>xb&&(fd-=t,kh=e)}function lk(){for(var e,t=Vh,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vh=n);Mu=e,Ep(r)}function Ep(e){if(!cl){Ou&&(Ou=clearTimeout(Ou));var t=e-La;t>24?(e<1/0&&(Ou=setTimeout(sw,e-tc.now()-fd)),wu&&(wu=clearInterval(wu))):(wu||(kh=tc.now(),wu=setInterval(ok,xb)),cl=1,Db(sw))}}function aw(e,t,n){var r=new Ph;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var uk=ud("start","end","cancel","interrupt"),ck=[],Mb=0,ow=1,Tp=2,lh=3,lw=4,wp=5,uh=6;function hd(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;fk(e,n,{name:t,index:r,group:a,on:uk,tween:ck,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Mb})}function Dy(e,t){var n=ki(e,t);if(n.state>Mb)throw new Error("too late; already scheduled");return n}function fr(e,t){var n=ki(e,t);if(n.state>lh)throw new Error("too late; already running");return n}function ki(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fk(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=Ob(l,0,n.time);function l(m){n.state=ow,n.timer.restart(c,n.delay,n.time),n.delay<=m&&c(m-n.delay)}function c(m){var y,v,w,S;if(n.state!==ow)return g();for(y in r)if(S=r[y],S.name===n.name){if(S.state===lh)return aw(c);S.state===lw?(S.state=uh,S.timer.stop(),S.on.call("interrupt",e,e.__data__,S.index,S.group),delete r[y]):+y<t&&(S.state=uh,S.timer.stop(),S.on.call("cancel",e,e.__data__,S.index,S.group),delete r[y])}if(aw(function(){n.state===lh&&(n.state=lw,n.timer.restart(d,n.delay,n.time),d(m))}),n.state=Tp,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Tp){for(n.state=lh,a=new Array(w=n.tween.length),y=0,v=-1;y<w;++y)(S=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=S);a.length=v+1}}function d(m){for(var y=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(g),n.state=wp,1),v=-1,w=a.length;++v<w;)a[v].call(e,y);n.state===wp&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=uh,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function ch(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>Tp&&r.state<wp,r.state=uh,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function hk(e){return this.each(function(){ch(this,e)})}function dk(e,t){var n,r;return function(){var a=fr(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,d=r.length;c<d;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function gk(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=fr(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var d={name:t,value:n},g=0,m=a.length;g<m;++g)if(a[g].name===t){a[g]=d;break}g===m&&a.push(d)}l.tween=a}}function mk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ki(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?dk:gk)(n,e,t))}function Oy(e,t,n){var r=e._id;return e.each(function(){var a=fr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return ki(a,r).value[t]}}function Vb(e,t){var n;return(typeof t=="number"?ws:t instanceof Ju?nw:(n=Ju(t))?(t=n,nw):Q4)(e,t)}function pk(e){return function(){this.removeAttribute(e)}}function yk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _k(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function vk(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function Ek(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function Tk(e,t,n){var r,a,l;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d)))}}function wk(e,t){var n=cd(e),r=n==="transform"?tk:Vb;return this.attrTween(e,typeof t=="function"?(n.local?Tk:Ek)(n,r,Oy(this,"attr."+e,t)):t==null?(n.local?yk:pk)(n):(n.local?vk:_k)(n,r,t))}function Sk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ak(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bk(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&Ak(e,l)),n}return a._value=t,a}function Rk(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&Sk(e,l)),n}return a._value=t,a}function Ik(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=cd(e);return this.tween(n,(r.local?bk:Rk)(r,t))}function Ck(e,t){return function(){Dy(this,e).delay=+t.apply(this,arguments)}}function Nk(e,t){return t=+t,function(){Dy(this,e).delay=t}}function xk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ck:Nk)(t,e)):ki(this.node(),t).delay}function Dk(e,t){return function(){fr(this,e).duration=+t.apply(this,arguments)}}function Ok(e,t){return t=+t,function(){fr(this,e).duration=t}}function Mk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Dk:Ok)(t,e)):ki(this.node(),t).duration}function Vk(e,t){if(typeof t!="function")throw new Error;return function(){fr(this,e).ease=t}}function kk(e){var t=this._id;return arguments.length?this.each(Vk(t,e)):ki(this.node(),t).ease}function Pk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fr(this,e).ease=n}}function Lk(e){if(typeof e!="function")throw new Error;return this.each(Pk(this._id,e))}function Uk(e){typeof e!="function"&&(e=hb(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,d=r[a]=[],g,m=0;m<c;++m)(g=l[m])&&e.call(g,g.__data__,m,l)&&d.push(g);return new Gr(r,this._parents,this._name,this._id)}function zk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),d=0;d<l;++d)for(var g=t[d],m=n[d],y=g.length,v=c[d]=new Array(y),w,S=0;S<y;++S)(w=g[S]||m[S])&&(v[S]=w);for(;d<r;++d)c[d]=t[d];return new Gr(c,this._parents,this._name,this._id)}function Bk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Hk(e,t,n){var r,a,l=Bk(t)?Dy:fr;return function(){var c=l(this,e),d=c.on;d!==r&&(a=(r=d).copy()).on(t,n),c.on=a}}function qk(e,t){var n=this._id;return arguments.length<2?ki(this.node(),n).on.on(e):this.each(Hk(n,e,t))}function Fk(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function jk(){return this.on("end.remove",Fk(this._id))}function Gk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Iy(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var d=r[c],g=d.length,m=l[c]=new Array(g),y,v,w=0;w<g;++w)(y=d[w])&&(v=e.call(y,y.__data__,w,d))&&("__data__"in y&&(v.__data__=y.__data__),m[w]=v,hd(m[w],t,n,w,m,ki(y,n)));return new Gr(l,this._parents,t,n)}function $k(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fb(e));for(var r=this._groups,a=r.length,l=[],c=[],d=0;d<a;++d)for(var g=r[d],m=g.length,y,v=0;v<m;++v)if(y=g[v]){for(var w=e.call(y,y.__data__,v,g),S,O=ki(y,n),L=0,k=w.length;L<k;++L)(S=w[L])&&hd(S,t,n,L,w,O);l.push(w),c.push(y)}return new Gr(l,c,t,n)}var Yk=pc.prototype.constructor;function Kk(){return new Yk(this._groups,this._parents)}function Xk(e,t){var n,r,a;return function(){var l=ul(this,e),c=(this.style.removeProperty(e),ul(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function kb(e){return function(){this.style.removeProperty(e)}}function Qk(e,t,n){var r,a=n+"",l;return function(){var c=ul(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function Zk(e,t,n){var r,a,l;return function(){var c=ul(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),ul(this,e))),c===g?null:c===r&&g===a?l:(a=g,l=t(r=c,d))}}function Wk(e,t){var n,r,a,l="style."+t,c="end."+l,d;return function(){var g=fr(this,e),m=g.on,y=g.value[l]==null?d||(d=kb(t)):void 0;(m!==n||a!==y)&&(r=(n=m).copy()).on(c,a=y),g.on=r}}function Jk(e,t,n){var r=(e+="")=="transform"?J4:Vb;return t==null?this.styleTween(e,Xk(e,r)).on("end.style."+e,kb(e)):typeof t=="function"?this.styleTween(e,Zk(e,r,Oy(this,"style."+e,t))).each(Wk(this._id,e)):this.styleTween(e,Qk(e,r,t),n).on("end.style."+e,null)}function tP(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function eP(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&tP(e,c,n)),r}return l._value=t,l}function nP(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,eP(e,t,n??""))}function iP(e){return function(){this.textContent=e}}function rP(e){return function(){var t=e(this);this.textContent=t??""}}function sP(e){return this.tween("text",typeof e=="function"?rP(Oy(this,"text",e)):iP(e==null?"":e+""))}function aP(e){return function(t){this.textContent=e.call(this,t)}}function oP(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&aP(a)),t}return r._value=e,r}function lP(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,oP(e))}function uP(){for(var e=this._name,t=this._id,n=Pb(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)if(g=c[m]){var y=ki(g,t);hd(g,e,n,m,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Gr(r,this._parents,e,n)}function cP(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},g={value:function(){--a===0&&l()}};n.each(function(){var m=fr(this,r),y=m.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),m.on=t}),a===0&&l()})}var fP=0;function Gr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Pb(){return++fP}var Pr=pc.prototype;Gr.prototype={constructor:Gr,select:Gk,selectAll:$k,selectChild:Pr.selectChild,selectChildren:Pr.selectChildren,filter:Uk,merge:zk,selection:Kk,transition:uP,call:Pr.call,nodes:Pr.nodes,node:Pr.node,size:Pr.size,empty:Pr.empty,each:Pr.each,on:qk,attr:wk,attrTween:Ik,style:Jk,styleTween:nP,text:sP,textTween:lP,remove:jk,tween:mk,delay:xk,duration:Mk,ease:kk,easeVarying:Lk,end:cP,[Symbol.iterator]:Pr[Symbol.iterator]};function hP(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dP={time:null,delay:0,duration:250,ease:hP};function gP(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mP(e){var t,n;e instanceof Gr?(t=e._id,e=e._name):(t=Pb(),(n=dP).time=xy(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],d=c.length,g,m=0;m<d;++m)(g=c[m])&&hd(g,e,t,m,c,n||gP(g,t));return new Gr(r,this._parents,e,t)}pc.prototype.interrupt=hk;pc.prototype.transition=mP;const $f=e=>()=>e;function pP(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function zr(e,t,n){this.k=e,this.x=t,this.y=n}zr.prototype={constructor:zr,scale:function(e){return e===1?this:new zr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new zr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ps=new zr(1,0,0);zr.prototype;function Pm(e){e.stopImmediatePropagation()}function Su(e){e.preventDefault(),e.stopImmediatePropagation()}function yP(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _P(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function uw(){return this.__zoom||Ps}function vP(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function EP(){return navigator.maxTouchPoints||"ontouchstart"in this}function TP(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],l=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function wP(){var e=yP,t=_P,n=TP,r=vP,a=EP,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=rk,m=ud("start","zoom","end"),y,v,w,S=500,O=150,L=0,k=10;function B(D){D.property("__zoom",uw).on("wheel.zoom",b,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",V).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",x).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(D,$,C,F){var J=D.selection?D.selection():D;J.property("__zoom",uw),D!==J?X(D,$,C,F):J.interrupt().each(function(){rt(this,arguments).event(F).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},B.scaleBy=function(D,$,C,F){B.scaleTo(D,function(){var J=this.__zoom.k,Y=typeof $=="function"?$.apply(this,arguments):$;return J*Y},C,F)},B.scaleTo=function(D,$,C,F){B.transform(D,function(){var J=t.apply(this,arguments),Y=this.__zoom,N=C==null?q(J):typeof C=="function"?C.apply(this,arguments):C,j=Y.invert(N),nt=typeof $=="function"?$.apply(this,arguments):$;return n(Q(G(Y,nt),N,j),J,c)},C,F)},B.translateBy=function(D,$,C,F){B.transform(D,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),c)},null,F)},B.translateTo=function(D,$,C,F,J){B.transform(D,function(){var Y=t.apply(this,arguments),N=this.__zoom,j=F==null?q(Y):typeof F=="function"?F.apply(this,arguments):F;return n(Ps.translate(j[0],j[1]).scale(N.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof C=="function"?-C.apply(this,arguments):-C),Y,c)},F,J)};function G(D,$){return $=Math.max(l[0],Math.min(l[1],$)),$===D.k?D:new zr($,D.x,D.y)}function Q(D,$,C){var F=$[0]-C[0]*D.k,J=$[1]-C[1]*D.k;return F===D.x&&J===D.y?D:new zr(D.k,F,J)}function q(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function X(D,$,C,F){D.on("start.zoom",function(){rt(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){rt(this,arguments).event(F).end()}).tween("zoom",function(){var J=this,Y=arguments,N=rt(J,Y).event(F),j=t.apply(J,Y),nt=C==null?q(j):typeof C=="function"?C.apply(J,Y):C,st=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),ct=J.__zoom,pt=typeof $=="function"?$.apply(J,Y):$,yt=g(ct.invert(nt).concat(st/ct.k),pt.invert(nt).concat(st/pt.k));return function(xt){if(xt===1)xt=pt;else{var St=yt(xt),Qt=st/St[2];xt=new zr(Qt,nt[0]-St[0]*Qt,nt[1]-St[1]*Qt)}N.zoom(null,xt)}})}function rt(D,$,C){return!C&&D.__zooming||new M(D,$)}function M(D,$){this.that=D,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(D,$),this.taps=0}M.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,$){return this.mouse&&D!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var $=Ni(this.that).datum();m.call(D,this.that,new pP(D,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:m}),$)}};function b(D,...$){if(!e.apply(this,arguments))return;var C=rt(this,$).event(D),F=this.__zoom,J=Math.max(l[0],Math.min(l[1],F.k*Math.pow(2,r.apply(this,arguments)))),Y=rr(D);if(C.wheel)(C.mouse[0][0]!==Y[0]||C.mouse[0][1]!==Y[1])&&(C.mouse[1]=F.invert(C.mouse[0]=Y)),clearTimeout(C.wheel);else{if(F.k===J)return;C.mouse=[Y,F.invert(Y)],ch(this),C.start()}Su(D),C.wheel=setTimeout(N,O),C.zoom("mouse",n(Q(G(F,J),C.mouse[0],C.mouse[1]),C.extent,c));function N(){C.wheel=null,C.end()}}function R(D,...$){if(w||!e.apply(this,arguments))return;var C=D.currentTarget,F=rt(this,$,!0).event(D),J=Ni(D.view).on("mousemove.zoom",nt,!0).on("mouseup.zoom",st,!0),Y=rr(D,C),N=D.clientX,j=D.clientY;wb(D.view),Pm(D),F.mouse=[Y,this.__zoom.invert(Y)],ch(this),F.start();function nt(ct){if(Su(ct),!F.moved){var pt=ct.clientX-N,yt=ct.clientY-j;F.moved=pt*pt+yt*yt>L}F.event(ct).zoom("mouse",n(Q(F.that.__zoom,F.mouse[0]=rr(ct,C),F.mouse[1]),F.extent,c))}function st(ct){J.on("mousemove.zoom mouseup.zoom",null),Sb(ct.view,F.moved),Su(ct),F.event(ct).end()}}function V(D,...$){if(e.apply(this,arguments)){var C=this.__zoom,F=rr(D.changedTouches?D.changedTouches[0]:D,this),J=C.invert(F),Y=C.k*(D.shiftKey?.5:2),N=n(Q(G(C,Y),F,J),t.apply(this,$),c);Su(D),d>0?Ni(this).transition().duration(d).call(X,N,F,D):Ni(this).call(B.transform,N,F,D)}}function P(D,...$){if(e.apply(this,arguments)){var C=D.touches,F=C.length,J=rt(this,$,D.changedTouches.length===F).event(D),Y,N,j,nt;for(Pm(D),N=0;N<F;++N)j=C[N],nt=rr(j,this),nt=[nt,this.__zoom.invert(nt),j.identifier],J.touch0?!J.touch1&&J.touch0[2]!==nt[2]&&(J.touch1=nt,J.taps=0):(J.touch0=nt,Y=!0,J.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(J.taps<2&&(v=nt[0],y=setTimeout(function(){y=null},S)),ch(this),J.start())}}function U(D,...$){if(this.__zooming){var C=rt(this,$).event(D),F=D.changedTouches,J=F.length,Y,N,j,nt;for(Su(D),Y=0;Y<J;++Y)N=F[Y],j=rr(N,this),C.touch0&&C.touch0[2]===N.identifier?C.touch0[0]=j:C.touch1&&C.touch1[2]===N.identifier&&(C.touch1[0]=j);if(N=C.that.__zoom,C.touch1){var st=C.touch0[0],ct=C.touch0[1],pt=C.touch1[0],yt=C.touch1[1],xt=(xt=pt[0]-st[0])*xt+(xt=pt[1]-st[1])*xt,St=(St=yt[0]-ct[0])*St+(St=yt[1]-ct[1])*St;N=G(N,Math.sqrt(xt/St)),j=[(st[0]+pt[0])/2,(st[1]+pt[1])/2],nt=[(ct[0]+yt[0])/2,(ct[1]+yt[1])/2]}else if(C.touch0)j=C.touch0[0],nt=C.touch0[1];else return;C.zoom("touch",n(Q(N,j,nt),C.extent,c))}}function x(D,...$){if(this.__zooming){var C=rt(this,$).event(D),F=D.changedTouches,J=F.length,Y,N;for(Pm(D),w&&clearTimeout(w),w=setTimeout(function(){w=null},S),Y=0;Y<J;++Y)N=F[Y],C.touch0&&C.touch0[2]===N.identifier?delete C.touch0:C.touch1&&C.touch1[2]===N.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(N=rr(N,this),Math.hypot(v[0]-N[0],v[1]-N[1])<k)){var j=Ni(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return B.wheelDelta=function(D){return arguments.length?(r=typeof D=="function"?D:$f(+D),B):r},B.filter=function(D){return arguments.length?(e=typeof D=="function"?D:$f(!!D),B):e},B.touchable=function(D){return arguments.length?(a=typeof D=="function"?D:$f(!!D),B):a},B.extent=function(D){return arguments.length?(t=typeof D=="function"?D:$f([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),B):t},B.scaleExtent=function(D){return arguments.length?(l[0]=+D[0],l[1]=+D[1],B):[l[0],l[1]]},B.translateExtent=function(D){return arguments.length?(c[0][0]=+D[0][0],c[1][0]=+D[1][0],c[0][1]=+D[0][1],c[1][1]=+D[1][1],B):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},B.constrain=function(D){return arguments.length?(n=D,B):n},B.duration=function(D){return arguments.length?(d=+D,B):d},B.interpolate=function(D){return arguments.length?(g=D,B):g},B.on=function(){var D=m.on.apply(m,arguments);return D===m?B:D},B.clickDistance=function(D){return arguments.length?(L=(D=+D)*D,B):Math.sqrt(L)},B.tapDistance=function(D){return arguments.length?(k=+D,B):k},B}Pw();const dd=et.createContext(null),SP=dd.Provider,$r={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Lb=$r.error001();function Ce(e,t){const n=et.useContext(dd);if(n===null)throw new Error(Lb);return ub(n,e,t)}const hn=()=>{const e=et.useContext(dd);if(e===null)throw new Error(Lb);return et.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},AP=e=>e.userSelectionActive?"none":"all";function bP({position:e,children:t,className:n,style:r,...a}){const l=Ce(AP),c=`${e}`.split("-");return gt.createElement("div",{className:Ei(["react-flow__panel",n,...c]),style:{...r,pointerEvents:l},...a},t)}function RP({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:gt.createElement(bP,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},gt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const IP=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:m,...y})=>{const v=et.useRef(null),[w,S]=et.useState({x:0,y:0,width:0,height:0}),O=Ei(["react-flow__edge-textwrapper",m]);return et.useEffect(()=>{if(v.current){const L=v.current.getBBox();S({x:L.x,y:L.y,width:L.width,height:L.height})}},[n]),typeof n>"u"||!n?null:gt.createElement("g",{transform:`translate(${e-w.width/2} ${t-w.height/2})`,className:O,visibility:w.width?"visible":"hidden",...y},a&&gt.createElement("rect",{width:w.width+2*c[0],x:-c[0],y:-c[1],height:w.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),gt.createElement("text",{className:"react-flow__edge-text",y:w.height/2,dy:"0.3em",ref:v,style:r},n),g)};var CP=et.memo(IP);const My=e=>({width:e.offsetWidth,height:e.offsetHeight}),fl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Vy=(e={x:0,y:0},t)=>({x:fl(e.x,t[0][0],t[1][0]),y:fl(e.y,t[0][1],t[1][1])}),cw=(e,t,n)=>e<t?fl(Math.abs(e-t),1,50)/50:e>n?-fl(Math.abs(e-n),1,50)/50:0,Ub=(e,t)=>{const n=cw(e.x,35,t.width-35)*20,r=cw(e.y,35,t.height-35)*20;return[n,r]},zb=e=>e.getRootNode?.()||window?.document,NP=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ky=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),xP=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),fw=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Sp=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},DP=e=>vi(e.width)&&vi(e.height)&&vi(e.x)&&vi(e.y),vi=e=>!isNaN(e)&&isFinite(e),we=Symbol.for("internals"),Bb=["Enter"," ","Escape"],OP=(e,t)=>{},MP=e=>"nativeEvent"in e;function Ap(e){const n=(MP(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Hb=e=>"clientX"in e,Ls=(e,t)=>{const n=Hb(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},Lh=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,_c=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:w,interactionWidth:S=20})=>gt.createElement(gt.Fragment,null,gt.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:w}),S&&gt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),a&&vi(n)&&vi(r)?gt.createElement(CP,{x:n,y:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m}):null);_c.displayName="BaseEdge";function Au(e,t,n){return n===void 0?n:r=>{const a=t().edges.find(l=>l.id===e);a&&n(r,{...a})}}function qb({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,l=n<e?n+a:n-a,c=Math.abs(r-t)/2,d=r<t?r+c:r-c;return[l,d,a,c]}function Fb({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const g=e*.125+a*.375+c*.375+n*.125,m=t*.125+l*.375+d*.375+r*.125,y=Math.abs(g-e),v=Math.abs(m-t);return[g,m,y,v]}var Ua;(function(e){e.Strict="strict",e.Loose="loose"})(Ua||(Ua={}));var Ca;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ca||(Ca={}));var ec;(function(e){e.Partial="partial",e.Full="full"})(ec||(ec={}));var Cs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Cs||(Cs={}));var Uh;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Uh||(Uh={}));var At;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(At||(At={}));function hw({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===At.Left||e===At.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function jb({sourceX:e,sourceY:t,sourcePosition:n=At.Bottom,targetX:r,targetY:a,targetPosition:l=At.Top}){const[c,d]=hw({pos:n,x1:e,y1:t,x2:r,y2:a}),[g,m]=hw({pos:l,x1:r,y1:a,x2:e,y2:t}),[y,v,w,S]=Fb({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:m});return[`M${e},${t} C${c},${d} ${g},${m} ${r},${a}`,y,v,w,S]}const Py=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=At.Bottom,targetPosition:l=At.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:S,markerStart:O,interactionWidth:L})=>{const[k,B,G]=jb({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l});return gt.createElement(_c,{path:k,labelX:B,labelY:G,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:S,markerStart:O,interactionWidth:L})});Py.displayName="SimpleBezierEdge";const dw={[At.Left]:{x:-1,y:0},[At.Right]:{x:1,y:0},[At.Top]:{x:0,y:-1},[At.Bottom]:{x:0,y:1}},VP=({source:e,sourcePosition:t=At.Bottom,target:n})=>t===At.Left||t===At.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},gw=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kP({source:e,sourcePosition:t=At.Bottom,target:n,targetPosition:r=At.Top,center:a,offset:l}){const c=dw[t],d=dw[r],g={x:e.x+c.x*l,y:e.y+c.y*l},m={x:n.x+d.x*l,y:n.y+d.y*l},y=VP({source:g,sourcePosition:t,target:m}),v=y.x!==0?"x":"y",w=y[v];let S=[],O,L;const k={x:0,y:0},B={x:0,y:0},[G,Q,q,X]=qb({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){O=a.x??G,L=a.y??Q;const M=[{x:O,y:g.y},{x:O,y:m.y}],b=[{x:g.x,y:L},{x:m.x,y:L}];c[v]===w?S=v==="x"?M:b:S=v==="x"?b:M}else{const M=[{x:g.x,y:m.y}],b=[{x:m.x,y:g.y}];if(v==="x"?S=c.x===w?b:M:S=c.y===w?M:b,t===r){const x=Math.abs(e[v]-n[v]);if(x<=l){const D=Math.min(l-1,l-x);c[v]===w?k[v]=(g[v]>e[v]?-1:1)*D:B[v]=(m[v]>n[v]?-1:1)*D}}if(t!==r){const x=v==="x"?"y":"x",D=c[v]===d[x],$=g[x]>m[x],C=g[x]<m[x];(c[v]===1&&(!D&&$||D&&C)||c[v]!==1&&(!D&&C||D&&$))&&(S=v==="x"?M:b)}const R={x:g.x+k.x,y:g.y+k.y},V={x:m.x+B.x,y:m.y+B.y},P=Math.max(Math.abs(R.x-S[0].x),Math.abs(V.x-S[0].x)),U=Math.max(Math.abs(R.y-S[0].y),Math.abs(V.y-S[0].y));P>=U?(O=(R.x+V.x)/2,L=S[0].y):(O=S[0].x,L=(R.y+V.y)/2)}return[[e,{x:g.x+k.x,y:g.y+k.y},...S,{x:m.x+B.x,y:m.y+B.y},n],O,L,q,X]}function PP(e,t,n,r){const a=Math.min(gw(e,t)/2,gw(t,n)/2,r),{x:l,y:c}=t;if(e.x===l&&l===n.x||e.y===c&&c===n.y)return`L${l} ${c}`;if(e.y===c){const m=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${l+a*m},${c}Q ${l},${c} ${l},${c+a*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${l},${c+a*g}Q ${l},${c} ${l+a*d},${c}`}function bp({sourceX:e,sourceY:t,sourcePosition:n=At.Bottom,targetX:r,targetY:a,targetPosition:l=At.Top,borderRadius:c=5,centerX:d,centerY:g,offset:m=20}){const[y,v,w,S,O]=kP({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:l,center:{x:d,y:g},offset:m});return[y.reduce((k,B,G)=>{let Q="";return G>0&&G<y.length-1?Q=PP(y[G-1],B,y[G+1],c):Q=`${G===0?"M":"L"}${B.x} ${B.y}`,k+=Q,k},""),v,w,S,O]}const gd=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,sourcePosition:v=At.Bottom,targetPosition:w=At.Top,markerEnd:S,markerStart:O,pathOptions:L,interactionWidth:k})=>{const[B,G,Q]=bp({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:r,targetPosition:w,borderRadius:L?.borderRadius,offset:L?.offset});return gt.createElement(_c,{path:B,labelX:G,labelY:Q,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:S,markerStart:O,interactionWidth:k})});gd.displayName="SmoothStepEdge";const Ly=et.memo(e=>gt.createElement(gd,{...e,pathOptions:et.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Ly.displayName="StepEdge";function LP({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,l,c,d]=qb({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,l,c,d]}const Uy=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:w,interactionWidth:S})=>{const[O,L,k]=LP({sourceX:e,sourceY:t,targetX:n,targetY:r});return gt.createElement(_c,{path:O,labelX:L,labelY:k,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:m,style:y,markerEnd:v,markerStart:w,interactionWidth:S})});Uy.displayName="StraightEdge";function Yf(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function mw({pos:e,x1:t,y1:n,x2:r,y2:a,c:l}){switch(e){case At.Left:return[t-Yf(t-r,l),n];case At.Right:return[t+Yf(r-t,l),n];case At.Top:return[t,n-Yf(n-a,l)];case At.Bottom:return[t,n+Yf(a-n,l)]}}function Gb({sourceX:e,sourceY:t,sourcePosition:n=At.Bottom,targetX:r,targetY:a,targetPosition:l=At.Top,curvature:c=.25}){const[d,g]=mw({pos:n,x1:e,y1:t,x2:r,y2:a,c}),[m,y]=mw({pos:l,x1:r,y1:a,x2:e,y2:t,c}),[v,w,S,O]=Fb({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:d,sourceControlY:g,targetControlX:m,targetControlY:y});return[`M${e},${t} C${d},${g} ${m},${y} ${r},${a}`,v,w,S,O]}const zh=et.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=At.Bottom,targetPosition:l=At.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:S,markerStart:O,pathOptions:L,interactionWidth:k})=>{const[B,G,Q]=Gb({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:l,curvature:L?.curvature});return gt.createElement(_c,{path:B,labelX:G,labelY:Q,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,style:w,markerEnd:S,markerStart:O,interactionWidth:k})});zh.displayName="BezierEdge";const zy=et.createContext(null),UP=zy.Provider;zy.Consumer;const zP=()=>et.useContext(zy),BP=e=>"id"in e&&"source"in e&&"target"in e,HP=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Rp=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,qP=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),FP=(e,t)=>{if(!e.source||!e.target)return t;let n;return BP(e)?n={...e}:n={...e,id:HP(e)},qP(n,t)?t:t.concat(n)},Ip=({x:e,y:t},[n,r,a],l,[c,d])=>{const g={x:(e-n)/a,y:(t-r)/a};return l?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},$b=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),Zo=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},By=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const{x:l,y:c}=Zo(a,t).positionAbsolute;return NP(r,ky({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return xP(n)},Yb=(e,t,[n,r,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},m=[];return e.forEach(y=>{const{width:v,height:w,selectable:S=!0,hidden:O=!1}=y;if(c&&!S||O)return!1;const{positionAbsolute:L}=Zo(y,d),k={x:L.x,y:L.y,width:v||0,height:w||0},B=Sp(g,k),G=typeof v>"u"||typeof w>"u"||v===null||w===null,Q=l&&B>0,q=(v||0)*(w||0);(G||Q||B>=q||y.dragging)&&m.push(y)}),m},Kb=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Xb=(e,t,n,r,a,l=.1)=>{const c=t/(e.width*(1+l)),d=n/(e.height*(1+l)),g=Math.min(c,d),m=fl(g,r,a),y=e.x+e.width/2,v=e.y+e.height/2,w=t/2-y*m,S=n/2-v*m;return{x:w,y:S,zoom:m}},ba=(e,t=0)=>e.transition().duration(t);function pw(e,t,n,r){return(t[n]||[]).reduce((a,l)=>(`${e.id}-${l.id}-${n}`!==r&&a.push({id:l.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+l.x+l.width/2,y:(e.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function jP(e,t,n,r,a,l){const{x:c,y:d}=Ls(e),m=t.elementsFromPoint(c,d).find(O=>O.classList.contains("react-flow__handle"));if(m){const O=m.getAttribute("data-nodeid");if(O){const L=Hy(void 0,m),k=m.getAttribute("data-handleid"),B=l({nodeId:O,id:k,type:L});if(B){const G=a.find(Q=>Q.nodeId===O&&Q.type===L&&Q.id===k);return{handle:{id:k,type:L,nodeId:O,x:G?.x||n.x,y:G?.y||n.y},validHandleResult:B}}}}let y=[],v=1/0;if(a.forEach(O=>{const L=Math.sqrt((O.x-n.x)**2+(O.y-n.y)**2);if(L<=r){const k=l(O);L<=v&&(L<v?y=[{handle:O,validHandleResult:k}]:L===v&&y.push({handle:O,validHandleResult:k}),v=L)}}),!y.length)return{handle:null,validHandleResult:Qb()};if(y.length===1)return y[0];const w=y.some(({validHandleResult:O})=>O.isValid),S=y.some(({handle:O})=>O.type==="target");return y.find(({handle:O,validHandleResult:L})=>S?O.type==="target":w?L.isValid:!0)||y[0]}const GP={source:null,target:null,sourceHandle:null,targetHandle:null},Qb=()=>({handleDomNode:null,isValid:!1,connection:GP,endHandle:null});function Zb(e,t,n,r,a,l,c){const d=a==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),m={...Qb(),handleDomNode:g};if(g){const y=Hy(void 0,g),v=g.getAttribute("data-nodeid"),w=g.getAttribute("data-handleid"),S=g.classList.contains("connectable"),O=g.classList.contains("connectableend"),L={source:d?v:n,sourceHandle:d?w:r,target:d?n:v,targetHandle:d?r:w};m.connection=L,S&&O&&(t===Ua.Strict?d&&y==="source"||!d&&y==="target":v!==n||w!==r)&&(m.endHandle={nodeId:v,handleId:w,type:y},m.isValid=l(L))}return m}function $P({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((a,l)=>{if(l[we]){const{handleBounds:c}=l[we];let d=[],g=[];c&&(d=pw(l,c,"source",`${t}-${n}-${r}`),g=pw(l,c,"target",`${t}-${n}-${r}`)),a.push(...d,...g)}return a},[])}function Hy(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Lm(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function YP(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Wb({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:m}){const y=zb(e.target),{connectionMode:v,domNode:w,autoPanOnConnect:S,connectionRadius:O,onConnectStart:L,panBy:k,getNodes:B,cancelConnection:G}=l();let Q=0,q;const{x:X,y:rt}=Ls(e),M=y?.elementFromPoint(X,rt),b=Hy(g,M),R=w?.getBoundingClientRect();if(!R||!b)return;let V,P=Ls(e,R),U=!1,x=null,D=!1,$=null;const C=$P({nodes:B(),nodeId:n,handleId:t,handleType:b}),F=()=>{if(!S)return;const[N,j]=Ub(P,R);k({x:N,y:j}),Q=requestAnimationFrame(F)};c({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:b,connectionStartHandle:{nodeId:n,handleId:t,type:b},connectionEndHandle:null}),L?.(e,{nodeId:n,handleId:t,handleType:b});function J(N){const{transform:j}=l();P=Ls(N,R);const{handle:nt,validHandleResult:st}=jP(N,y,Ip(P,j,!1,[1,1]),O,C,ct=>Zb(ct,v,n,t,a?"target":"source",d,y));if(q=nt,U||(F(),U=!0),$=st.handleDomNode,x=st.connection,D=st.isValid,c({connectionPosition:q&&D?$b({x:q.x,y:q.y},j):P,connectionStatus:YP(!!q,D),connectionEndHandle:st.endHandle}),!q&&!D&&!$)return Lm(V);x.source!==x.target&&$&&(Lm(V),V=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",D),$.classList.toggle("react-flow__handle-valid",D))}function Y(N){(q||$)&&x&&D&&r?.(x),l().onConnectEnd?.(N),g&&m?.(N),Lm(V),G(),cancelAnimationFrame(Q),U=!1,D=!1,x=null,$=null,y.removeEventListener("mousemove",J),y.removeEventListener("mouseup",Y),y.removeEventListener("touchmove",J),y.removeEventListener("touchend",Y)}y.addEventListener("mousemove",J),y.addEventListener("mouseup",Y),y.addEventListener("touchmove",J),y.addEventListener("touchend",Y)}const yw=()=>!0,KP=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),XP=(e,t,n)=>r=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=r;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||l?.nodeId===e&&l?.handleId===t&&l?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},Jb=et.forwardRef(({type:e="source",position:t=At.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:g,className:m,onMouseDown:y,onTouchStart:v,...w},S)=>{const O=c||null,L=e==="target",k=hn(),B=zP(),{connectOnClick:G,noPanClassName:Q}=Ce(KP,Pn),{connecting:q,clickConnecting:X}=Ce(XP(B,O,e),Pn);B||k.getState().onError?.("010",$r.error010());const rt=R=>{const{defaultEdgeOptions:V,onConnect:P,hasDefaultEdges:U}=k.getState(),x={...V,...R};if(U){const{edges:D,setEdges:$}=k.getState();$(FP(x,D))}P?.(x),d?.(x)},M=R=>{if(!B)return;const V=Hb(R);a&&(V&&R.button===0||!V)&&Wb({event:R,handleId:O,nodeId:B,onConnect:rt,isTarget:L,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||yw}),V?y?.(R):v?.(R)},b=R=>{const{onClickConnectStart:V,onClickConnectEnd:P,connectionClickStartHandle:U,connectionMode:x,isValidConnection:D}=k.getState();if(!B||!U&&!a)return;if(!U){V?.(R,{nodeId:B,handleId:O,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:B,type:e,handleId:O}});return}const $=zb(R.target),C=n||D||yw,{connection:F,isValid:J}=Zb({nodeId:B,id:O,type:e},x,U.nodeId,U.handleId||null,U.type,C,$);J&&rt(F),P?.(R),k.setState({connectionClickStartHandle:null})};return gt.createElement("div",{"data-handleid":O,"data-nodeid":B,"data-handlepos":t,"data-id":`${B}-${O}-${e}`,className:Ei(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",Q,m,{source:!L,target:L,connectable:r,connectablestart:a,connectableend:l,connecting:X,connectionindicator:r&&(a&&!q||l&&q)}]),onMouseDown:M,onTouchStart:M,onClick:G?b:void 0,ref:S,...w},g)});Jb.displayName="Handle";var Bh=et.memo(Jb);const t1=({data:e,isConnectable:t,targetPosition:n=At.Top,sourcePosition:r=At.Bottom})=>gt.createElement(gt.Fragment,null,gt.createElement(Bh,{type:"target",position:n,isConnectable:t}),e?.label,gt.createElement(Bh,{type:"source",position:r,isConnectable:t}));t1.displayName="DefaultNode";var Cp=et.memo(t1);const e1=({data:e,isConnectable:t,sourcePosition:n=At.Bottom})=>gt.createElement(gt.Fragment,null,e?.label,gt.createElement(Bh,{type:"source",position:n,isConnectable:t}));e1.displayName="InputNode";var n1=et.memo(e1);const i1=({data:e,isConnectable:t,targetPosition:n=At.Top})=>gt.createElement(gt.Fragment,null,gt.createElement(Bh,{type:"target",position:n,isConnectable:t}),e?.label);i1.displayName="OutputNode";var r1=et.memo(i1);const qy=()=>null;qy.displayName="GroupNode";const QP=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Kf=e=>e.id;function ZP(e,t){return Pn(e.selectedNodes.map(Kf),t.selectedNodes.map(Kf))&&Pn(e.selectedEdges.map(Kf),t.selectedEdges.map(Kf))}const s1=et.memo(({onSelectionChange:e})=>{const t=hn(),{selectedNodes:n,selectedEdges:r}=Ce(QP,ZP);return et.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(l=>l(a))},[n,r,e]),null});s1.displayName="SelectionListener";const WP=e=>!!e.onSelectionChange;function JP({onSelectionChange:e}){const t=Ce(WP);return e||t?gt.createElement(s1,{onSelectionChange:e}):null}const t3=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Vo(e,t){et.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function zt(e,t,n){et.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const e3=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:m,nodesConnectable:y,nodesFocusable:v,edgesFocusable:w,edgesUpdatable:S,elevateNodesOnSelect:O,minZoom:L,maxZoom:k,nodeExtent:B,onNodesChange:G,onEdgesChange:Q,elementsSelectable:q,connectionMode:X,snapGrid:rt,snapToGrid:M,translateExtent:b,connectOnClick:R,defaultEdgeOptions:V,fitView:P,fitViewOptions:U,onNodesDelete:x,onEdgesDelete:D,onNodeDrag:$,onNodeDragStart:C,onNodeDragStop:F,onSelectionDrag:J,onSelectionDragStart:Y,onSelectionDragStop:N,noPanClassName:j,nodeOrigin:nt,rfId:st,autoPanOnConnect:ct,autoPanOnNodeDrag:pt,onError:yt,connectionRadius:xt,isValidConnection:St,nodeDragThreshold:Qt})=>{const{setNodes:Gt,setEdges:Se,setDefaultNodesAndEdges:Ne,setMinZoom:Ue,setMaxZoom:xe,setTranslateExtent:fe,setNodeExtent:vn,reset:Lt}=Ce(t3,Pn),wt=hn();return et.useEffect(()=>{const ze=r?.map(Cn=>({...Cn,...V}));return Ne(n,ze),()=>{Lt()}},[]),zt("defaultEdgeOptions",V,wt.setState),zt("connectionMode",X,wt.setState),zt("onConnect",a,wt.setState),zt("onConnectStart",l,wt.setState),zt("onConnectEnd",c,wt.setState),zt("onClickConnectStart",d,wt.setState),zt("onClickConnectEnd",g,wt.setState),zt("nodesDraggable",m,wt.setState),zt("nodesConnectable",y,wt.setState),zt("nodesFocusable",v,wt.setState),zt("edgesFocusable",w,wt.setState),zt("edgesUpdatable",S,wt.setState),zt("elementsSelectable",q,wt.setState),zt("elevateNodesOnSelect",O,wt.setState),zt("snapToGrid",M,wt.setState),zt("snapGrid",rt,wt.setState),zt("onNodesChange",G,wt.setState),zt("onEdgesChange",Q,wt.setState),zt("connectOnClick",R,wt.setState),zt("fitViewOnInit",P,wt.setState),zt("fitViewOnInitOptions",U,wt.setState),zt("onNodesDelete",x,wt.setState),zt("onEdgesDelete",D,wt.setState),zt("onNodeDrag",$,wt.setState),zt("onNodeDragStart",C,wt.setState),zt("onNodeDragStop",F,wt.setState),zt("onSelectionDrag",J,wt.setState),zt("onSelectionDragStart",Y,wt.setState),zt("onSelectionDragStop",N,wt.setState),zt("noPanClassName",j,wt.setState),zt("nodeOrigin",nt,wt.setState),zt("rfId",st,wt.setState),zt("autoPanOnConnect",ct,wt.setState),zt("autoPanOnNodeDrag",pt,wt.setState),zt("onError",yt,wt.setState),zt("connectionRadius",xt,wt.setState),zt("isValidConnection",St,wt.setState),zt("nodeDragThreshold",Qt,wt.setState),Vo(e,Gt),Vo(t,Se),Vo(L,Ue),Vo(k,xe),Vo(b,fe),Vo(B,vn),null},_w={display:"none"},n3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},a1="react-flow__node-desc",o1="react-flow__edge-desc",i3="react-flow__aria-live",r3=e=>e.ariaLiveMessage;function s3({rfId:e}){const t=Ce(r3);return gt.createElement("div",{id:`${i3}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:n3},t)}function a3({rfId:e,disableKeyboardA11y:t}){return gt.createElement(gt.Fragment,null,gt.createElement("div",{id:`${a1}-${e}`,style:_w},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),gt.createElement("div",{id:`${o1}-${e}`,style:_w},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&gt.createElement(s3,{rfId:e}))}var nc=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=et.useState(!1),a=et.useRef(!1),l=et.useRef(new Set([])),[c,d]=et.useMemo(()=>{if(e!==null){const m=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=m.reduce((v,w)=>v.concat(...w),[]);return[m,y]}return[[],[]]},[e]);return et.useEffect(()=>{const g=typeof document<"u"?document:null,m=t?.target||g;if(e!==null){const y=S=>{if(a.current=S.ctrlKey||S.metaKey||S.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&Ap(S))return!1;const L=Ew(S.code,d);l.current.add(S[L]),vw(c,l.current,!1)&&(S.preventDefault(),r(!0))},v=S=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&Ap(S))return!1;const L=Ew(S.code,d);vw(c,l.current,!0)?(r(!1),l.current.clear()):l.current.delete(S[L]),S.key==="Meta"&&l.current.clear(),a.current=!1},w=()=>{l.current.clear(),r(!1)};return m?.addEventListener("keydown",y),m?.addEventListener("keyup",v),window.addEventListener("blur",w),()=>{m?.removeEventListener("keydown",y),m?.removeEventListener("keyup",v),window.removeEventListener("blur",w)}}},[e,r]),n};function vw(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function Ew(e,t){return t.includes(e)?"code":"key"}function l1(e,t,n,r){const a=e.parentNode||e.parentId;if(!a)return n;const l=t.get(a),c=Zo(l,r);return l1(l,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[we]?.z??0)>(n.z??0)?l[we]?.z??0:n.z??0},r)}function u1(e,t,n){e.forEach(r=>{const a=r.parentNode||r.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[r.id]){const{x:l,y:c,z:d}=l1(r,e,{...r.position,z:r[we]?.z??0},t);r.positionAbsolute={x:l,y:c},r[we].z=d,n?.[r.id]&&(r[we].isParent=!0)}})}function Um(e,t,n,r){const a=new Map,l={},c=r?1e3:0;return e.forEach(d=>{const g=(vi(d.zIndex)?d.zIndex:0)+(d.selected?c:0),m=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(l[v]=!0);const w=m?.type&&m?.type!==d.type;Object.defineProperty(y,we,{enumerable:!1,value:{handleBounds:w?void 0:m?.[we]?.handleBounds,z:g}}),a.set(d.id,y)}),u1(a,n,l),a}function c1(e,t={}){const{getNodes:n,width:r,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:m,fitViewOnInit:y,nodeOrigin:v}=e(),w=t.initial&&!m&&y;if(d&&g&&(w||!t.initial)){const O=n().filter(k=>{const B=t.includeHiddenNodes?k.width&&k.height:!k.hidden;return t.nodes?.length?B&&t.nodes.some(G=>G.id===k.id):B}),L=O.every(k=>k.width&&k.height);if(O.length>0&&L){const k=By(O,v),{x:B,y:G,zoom:Q}=Xb(k,r,a,t.minZoom??l,t.maxZoom??c,t.padding??.1),q=Ps.translate(B,G).scale(Q);return typeof t.duration=="number"&&t.duration>0?d.transform(ba(g,t.duration),q):d.transform(g,q),!0}}return!1}function o3(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[we]:r[we],selected:n.selected})}),new Map(t)}function l3(e,t){return t.map(n=>{const r=e.find(a=>a.id===n.id);return r&&(n.selected=r.selected),n})}function Xf({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:m}=n();e?.length&&(g&&r({nodeInternals:o3(e,a)}),c?.(e)),t?.length&&(m&&r({edges:l3(t,l)}),d?.(t))}const ko=()=>{},u3={zoomIn:ko,zoomOut:ko,zoomTo:ko,getZoom:()=>1,setViewport:ko,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ko,fitBounds:ko,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},c3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),f3=()=>{const e=hn(),{d3Zoom:t,d3Selection:n}=Ce(c3,Pn);return et.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(ba(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(ba(n,a?.duration),1/1.2),zoomTo:(a,l)=>t.scaleTo(ba(n,l?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,l)=>{const[c,d,g]=e.getState().transform,m=Ps.translate(a.x??c,a.y??d).scale(a.zoom??g);t.transform(ba(n,l?.duration),m)},getViewport:()=>{const[a,l,c]=e.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>c1(e.getState,a),setCenter:(a,l,c)=>{const{width:d,height:g,maxZoom:m}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:m,v=d/2-a*y,w=g/2-l*y,S=Ps.translate(v,w).scale(y);t.transform(ba(n,c?.duration),S)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:g,maxZoom:m}=e.getState(),{x:y,y:v,zoom:w}=Xb(a,c,d,g,m,l?.padding??.1),S=Ps.translate(y,v).scale(w);t.transform(ba(n,l?.duration),S)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ip(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return a;const{x:m,y}=g.getBoundingClientRect(),v={x:a.x-m,y:a.y-y};return Ip(v,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=e.getState();if(!c)return a;const{x:d,y:g}=c.getBoundingClientRect(),m=$b(a,l);return{x:m.x+d,y:m.y+g}},viewportInitialized:!0}:u3,[t,n])};function f1(){const e=f3(),t=hn(),n=et.useCallback(()=>t.getState().getNodes().map(L=>({...L})),[]),r=et.useCallback(L=>t.getState().nodeInternals.get(L),[]),a=et.useCallback(()=>{const{edges:L=[]}=t.getState();return L.map(k=>({...k}))},[]),l=et.useCallback(L=>{const{edges:k=[]}=t.getState();return k.find(B=>B.id===L)},[]),c=et.useCallback(L=>{const{getNodes:k,setNodes:B,hasDefaultNodes:G,onNodesChange:Q}=t.getState(),q=k(),X=typeof L=="function"?L(q):L;if(G)B(X);else if(Q){const rt=X.length===0?q.map(M=>({type:"remove",id:M.id})):X.map(M=>({item:M,type:"reset"}));Q(rt)}},[]),d=et.useCallback(L=>{const{edges:k=[],setEdges:B,hasDefaultEdges:G,onEdgesChange:Q}=t.getState(),q=typeof L=="function"?L(k):L;if(G)B(q);else if(Q){const X=q.length===0?k.map(rt=>({type:"remove",id:rt.id})):q.map(rt=>({item:rt,type:"reset"}));Q(X)}},[]),g=et.useCallback(L=>{const k=Array.isArray(L)?L:[L],{getNodes:B,setNodes:G,hasDefaultNodes:Q,onNodesChange:q}=t.getState();if(Q){const rt=[...B(),...k];G(rt)}else if(q){const X=k.map(rt=>({item:rt,type:"add"}));q(X)}},[]),m=et.useCallback(L=>{const k=Array.isArray(L)?L:[L],{edges:B=[],setEdges:G,hasDefaultEdges:Q,onEdgesChange:q}=t.getState();if(Q)G([...B,...k]);else if(q){const X=k.map(rt=>({item:rt,type:"add"}));q(X)}},[]),y=et.useCallback(()=>{const{getNodes:L,edges:k=[],transform:B}=t.getState(),[G,Q,q]=B;return{nodes:L().map(X=>({...X})),edges:k.map(X=>({...X})),viewport:{x:G,y:Q,zoom:q}}},[]),v=et.useCallback(({nodes:L,edges:k})=>{const{nodeInternals:B,getNodes:G,edges:Q,hasDefaultNodes:q,hasDefaultEdges:X,onNodesDelete:rt,onEdgesDelete:M,onNodesChange:b,onEdgesChange:R}=t.getState(),V=(L||[]).map($=>$.id),P=(k||[]).map($=>$.id),U=G().reduce(($,C)=>{const F=C.parentNode||C.parentId,J=!V.includes(C.id)&&F&&$.find(N=>N.id===F);return(typeof C.deletable=="boolean"?C.deletable:!0)&&(V.includes(C.id)||J)&&$.push(C),$},[]),x=Q.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),D=x.filter($=>P.includes($.id));if(U||D){const $=Kb(U,x),C=[...D,...$],F=C.reduce((J,Y)=>(J.includes(Y.id)||J.push(Y.id),J),[]);if((X||q)&&(X&&t.setState({edges:Q.filter(J=>!F.includes(J.id))}),q&&(U.forEach(J=>{B.delete(J.id)}),t.setState({nodeInternals:new Map(B)}))),F.length>0&&(M?.(C),R&&R(F.map(J=>({id:J,type:"remove"})))),U.length>0&&(rt?.(U),b)){const J=U.map(Y=>({id:Y.id,type:"remove"}));b(J)}}},[]),w=et.useCallback(L=>{const k=DP(L),B=k?null:t.getState().nodeInternals.get(L.id);return!k&&!B?[null,null,k]:[k?L:fw(B),B,k]},[]),S=et.useCallback((L,k=!0,B)=>{const[G,Q,q]=w(L);return G?(B||t.getState().getNodes()).filter(X=>{if(!q&&(X.id===Q.id||!X.positionAbsolute))return!1;const rt=fw(X),M=Sp(rt,G);return k&&M>0||M>=G.width*G.height}):[]},[]),O=et.useCallback((L,k,B=!0)=>{const[G]=w(L);if(!G)return!1;const Q=Sp(G,k);return B&&Q>0||Q>=G.width*G.height},[]);return et.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:g,addEdges:m,toObject:y,deleteElements:v,getIntersectingNodes:S,isNodeIntersecting:O}),[e,n,r,a,l,c,d,g,m,y,v,S,O])}const h3={actInsideInputWithModifier:!1};var d3=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=hn(),{deleteElements:r}=f1(),a=nc(e,h3),l=nc(t);et.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),m=c.filter(y=>y.selected);r({nodes:g,edges:m}),n.setState({nodesSelectionActive:!1})}},[a]),et.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function g3(e){const t=hn();et.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const a=My(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",$r.error004()),t.setState({width:a.width||500,height:a.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Fy={position:"absolute",width:"100%",height:"100%",top:0,left:0},m3=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Qf=e=>({x:e.x,y:e.y,zoom:e.k}),Po=(e,t)=>e.target.closest(`.${t}`),Tw=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ww=e=>{const t=e.ctrlKey&&Lh()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},p3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),y3=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=Ca.Free,zoomOnDoubleClick:m=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:w,translateExtent:S,minZoom:O,maxZoom:L,zoomActivationKeyCode:k,preventScrolling:B=!0,children:G,noWheelClassName:Q,noPanClassName:q})=>{const X=et.useRef(),rt=hn(),M=et.useRef(!1),b=et.useRef(!1),R=et.useRef(null),V=et.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:U,d3ZoomHandler:x,userSelectionActive:D}=Ce(p3,Pn),$=nc(k),C=et.useRef(0),F=et.useRef(!1),J=et.useRef();return g3(R),et.useEffect(()=>{if(R.current){const Y=R.current.getBoundingClientRect(),N=wP().scaleExtent([O,L]).translateExtent(S),j=Ni(R.current).call(N),nt=Ps.translate(w.x,w.y).scale(fl(w.zoom,O,L)),st=[[0,0],[Y.width,Y.height]],ct=N.constrain()(nt,st,S);N.transform(j,ct),N.wheelDelta(ww),rt.setState({d3Zoom:N,d3Selection:j,d3ZoomHandler:j.on("wheel.zoom"),transform:[ct.x,ct.y,ct.k],domNode:R.current.closest(".react-flow")})}},[]),et.useEffect(()=>{U&&P&&(c&&!$&&!D?U.on("wheel.zoom",Y=>{if(Po(Y,Q))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const N=U.property("__zoom").k||1;if(Y.ctrlKey&&l){const St=rr(Y),Qt=ww(Y),Gt=N*Math.pow(2,Qt);P.scaleTo(U,Gt,St,Y);return}const j=Y.deltaMode===1?20:1;let nt=g===Ca.Vertical?0:Y.deltaX*j,st=g===Ca.Horizontal?0:Y.deltaY*j;!Lh()&&Y.shiftKey&&g!==Ca.Vertical&&(nt=Y.deltaY*j,st=0),P.translateBy(U,-(nt/N)*d,-(st/N)*d,{internal:!0});const ct=Qf(U.property("__zoom")),{onViewportChangeStart:pt,onViewportChange:yt,onViewportChangeEnd:xt}=rt.getState();clearTimeout(J.current),F.current||(F.current=!0,t?.(Y,ct),pt?.(ct)),F.current&&(e?.(Y,ct),yt?.(ct),J.current=setTimeout(()=>{n?.(Y,ct),xt?.(ct),F.current=!1},150))},{passive:!1}):typeof x<"u"&&U.on("wheel.zoom",function(Y,N){if(!B&&Y.type==="wheel"&&!Y.ctrlKey||Po(Y,Q))return null;Y.preventDefault(),x.call(this,Y,N)},{passive:!1}))},[D,c,g,U,P,x,$,l,B,Q,t,e,n]),et.useEffect(()=>{P&&P.on("start",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;C.current=Y.sourceEvent?.button;const{onViewportChangeStart:N}=rt.getState(),j=Qf(Y.transform);M.current=!0,V.current=j,Y.sourceEvent?.type==="mousedown"&&rt.setState({paneDragging:!0}),N?.(j),t?.(Y.sourceEvent,j)})},[P,t]),et.useEffect(()=>{P&&(D&&!M.current?P.on("zoom",null):D||P.on("zoom",Y=>{const{onViewportChange:N}=rt.getState();if(rt.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),b.current=!!(r&&Tw(v,C.current??0)),(e||N)&&!Y.sourceEvent?.internal){const j=Qf(Y.transform);N?.(j),e?.(Y.sourceEvent,j)}}))},[D,P,e,v,r]),et.useEffect(()=>{P&&P.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:N}=rt.getState();if(M.current=!1,rt.setState({paneDragging:!1}),r&&Tw(v,C.current??0)&&!b.current&&r(Y.sourceEvent),b.current=!1,(n||N)&&m3(V.current,Y.transform)){const j=Qf(Y.transform);V.current=j,clearTimeout(X.current),X.current=setTimeout(()=>{N?.(j),n?.(Y.sourceEvent,j)},c?150:0)}})},[P,c,v,n,r]),et.useEffect(()=>{P&&P.filter(Y=>{const N=$||a,j=l&&Y.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(Po(Y,"react-flow__node")||Po(Y,"react-flow__edge")))return!0;if(!v&&!N&&!c&&!m&&!l||D||!m&&Y.type==="dblclick"||Po(Y,Q)&&Y.type==="wheel"||Po(Y,q)&&(Y.type!=="wheel"||c&&Y.type==="wheel"&&!$)||!l&&Y.ctrlKey&&Y.type==="wheel"||!N&&!c&&!j&&Y.type==="wheel"||!v&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(v)&&!v.includes(Y.button)&&Y.type==="mousedown")return!1;const nt=Array.isArray(v)&&v.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&nt})},[D,P,a,l,c,m,v,y,$]),gt.createElement("div",{className:"react-flow__renderer",ref:R,style:Fy},G)},_3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function v3(){const{userSelectionActive:e,userSelectionRect:t}=Ce(_3,Pn);return e&&t?gt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Sw(e,t){const n=t.parentNode||t.parentId,r=e.find(a=>a.id===n);if(r){const a=t.position.x+t.width-r.width,l=t.position.y+t.height-r.height;if(a>0||l>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,a>0&&(r.style.width+=a),l>0&&(r.style.height+=l),t.position.x<0){const c=Math.abs(t.position.x);r.position.x=r.position.x-c,r.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);r.position.y=r.position.y-c,r.style.height+=c,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function h1(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,a)=>{const l=e.filter(d=>d.id===a.id);if(l.length===0)return r.push(a),r;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&Sw(r,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&Sw(r,c);break}case"remove":return r}return r.push(c),r},n)}function d1(e,t){return h1(e,t)}function E3(e,t){return h1(e,t)}const Ss=(e,t)=>({id:e,type:"select",selected:t});function jo(e,t){return e.reduce((n,r)=>{const a=t.includes(r.id);return!r.selected&&a?(r.selected=!0,n.push(Ss(r.id,!0))):r.selected&&!a&&(r.selected=!1,n.push(Ss(r.id,!1))),n},[])}const zm=(e,t)=>n=>{n.target===t.current&&e?.(n)},T3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),g1=et.memo(({isSelecting:e,selectionMode:t=ec.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:m,onPaneMouseLeave:y,children:v})=>{const w=et.useRef(null),S=hn(),O=et.useRef(0),L=et.useRef(0),k=et.useRef(),{userSelectionActive:B,elementsSelectable:G,dragging:Q}=Ce(T3,Pn),q=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),O.current=0,L.current=0},X=x=>{l?.(x),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},rt=x=>{if(Array.isArray(n)&&n?.includes(2)){x.preventDefault();return}c?.(x)},M=d?x=>d(x):void 0,b=x=>{const{resetSelectedElements:D,domNode:$}=S.getState();if(k.current=$?.getBoundingClientRect(),!G||!e||x.button!==0||x.target!==w.current||!k.current)return;const{x:C,y:F}=Ls(x,k.current);D(),S.setState({userSelectionRect:{width:0,height:0,startX:C,startY:F,x:C,y:F}}),r?.(x)},R=x=>{const{userSelectionRect:D,nodeInternals:$,edges:C,transform:F,onNodesChange:J,onEdgesChange:Y,nodeOrigin:N,getNodes:j}=S.getState();if(!e||!k.current||!D)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const nt=Ls(x,k.current),st=D.startX??0,ct=D.startY??0,pt={...D,x:nt.x<st?nt.x:st,y:nt.y<ct?nt.y:ct,width:Math.abs(nt.x-st),height:Math.abs(nt.y-ct)},yt=j(),xt=Yb($,pt,F,t===ec.Partial,!0,N),St=Kb(xt,C).map(Gt=>Gt.id),Qt=xt.map(Gt=>Gt.id);if(O.current!==Qt.length){O.current=Qt.length;const Gt=jo(yt,Qt);Gt.length&&J?.(Gt)}if(L.current!==St.length){L.current=St.length;const Gt=jo(C,St);Gt.length&&Y?.(Gt)}S.setState({userSelectionRect:pt})},V=x=>{if(x.button!==0)return;const{userSelectionRect:D}=S.getState();!B&&D&&x.target===w.current&&X?.(x),S.setState({nodesSelectionActive:O.current>0}),q(),a?.(x)},P=x=>{B&&(S.setState({nodesSelectionActive:O.current>0}),a?.(x)),q()},U=G&&(e||B);return gt.createElement("div",{className:Ei(["react-flow__pane",{dragging:Q,selection:e}]),onClick:U?void 0:zm(X,w),onContextMenu:zm(rt,w),onWheel:zm(M,w),onMouseEnter:U?void 0:g,onMouseDown:U?b:void 0,onMouseMove:U?R:m,onMouseUp:U?V:void 0,onMouseLeave:U?P:y,ref:w,style:Fy},v,gt.createElement(v3,null))});g1.displayName="Pane";function m1(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:m1(r,t):!1}function Aw(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function w3(e,t,n,r){return Array.from(e.values()).filter(a=>(a.selected||a.id===r)&&(!a.parentNode||a.parentId||!m1(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function S3(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function p1(e,t,n,r,a=[0,0],l){const c=S3(e,e.extent||r);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:w,y:S}=Zo(v,a).positionAbsolute;d=v&&vi(w)&&vi(S)&&vi(v.width)&&vi(v.height)?[[w+e.width*a[0],S+e.height*a[1]],[w+v.width-e.width+e.width*a[0],S+v.height-e.height+e.height*a[1]]]:d}else l?.("005",$r.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:w,y:S}=Zo(v,a).positionAbsolute;d=[[e.extent[0][0]+w,e.extent[0][1]+S],[e.extent[1][0]+w,e.extent[1][1]+S]]}let m={x:0,y:0};if(g){const v=n.get(g);m=Zo(v,a).positionAbsolute}const y=d&&d!=="parent"?Vy(t,d):t;return{position:{x:y.x-m.x,y:y.y-m.y},positionAbsolute:y}}function Bm({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?r.find(a=>a.id===e):r[0],r]}const bw=(e,t,n,r)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const l=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*r[0],y:c.height*r[1]};return l.map(g=>{const m=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(m.left-c.left-d.x)/n,y:(m.top-c.top-d.y)/n,...My(g)}})};function bu(e,t,n){return n===void 0?n:r=>{const a=t().nodeInternals.get(e);a&&n(r,{...a})}}function Np({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),m=d.get(e);if(!m){g?.("012",$r.error012(e));return}t.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&c)&&(l({nodes:[m],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function A3(){const e=hn();return et.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:a,snapToGrid:l}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-r[0])/r[2],y:(d-r[1])/r[2]};return{xSnapped:l?a[0]*Math.round(g.x/a[0]):g.x,ySnapped:l?a[1]*Math.round(g.y/a[1]):g.y,...g}},[])}function Hm(e){return(t,n,r)=>e?.(t,r)}function y1({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=hn(),[g,m]=et.useState(!1),y=et.useRef([]),v=et.useRef({x:null,y:null}),w=et.useRef(0),S=et.useRef(null),O=et.useRef({x:0,y:0}),L=et.useRef(null),k=et.useRef(!1),B=et.useRef(!1),G=et.useRef(!1),Q=A3();return et.useEffect(()=>{if(e?.current){const q=Ni(e.current),X=({x:b,y:R})=>{const{nodeInternals:V,onNodeDrag:P,onSelectionDrag:U,updateNodePositions:x,nodeExtent:D,snapGrid:$,snapToGrid:C,nodeOrigin:F,onError:J}=d.getState();v.current={x:b,y:R};let Y=!1,N={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&D){const nt=By(y.current,F);N=ky(nt)}if(y.current=y.current.map(nt=>{const st={x:b-nt.distance.x,y:R-nt.distance.y};C&&(st.x=$[0]*Math.round(st.x/$[0]),st.y=$[1]*Math.round(st.y/$[1]));const ct=[[D[0][0],D[0][1]],[D[1][0],D[1][1]]];y.current.length>1&&D&&!nt.extent&&(ct[0][0]=nt.positionAbsolute.x-N.x+D[0][0],ct[1][0]=nt.positionAbsolute.x+(nt.width??0)-N.x2+D[1][0],ct[0][1]=nt.positionAbsolute.y-N.y+D[0][1],ct[1][1]=nt.positionAbsolute.y+(nt.height??0)-N.y2+D[1][1]);const pt=p1(nt,st,V,ct,F,J);return Y=Y||nt.position.x!==pt.position.x||nt.position.y!==pt.position.y,nt.position=pt.position,nt.positionAbsolute=pt.positionAbsolute,nt}),!Y)return;x(y.current,!0,!0),m(!0);const j=a?P:Hm(U);if(j&&L.current){const[nt,st]=Bm({nodeId:a,dragItems:y.current,nodeInternals:V});j(L.current,nt,st)}},rt=()=>{if(!S.current)return;const[b,R]=Ub(O.current,S.current);if(b!==0||R!==0){const{transform:V,panBy:P}=d.getState();v.current.x=(v.current.x??0)-b/V[2],v.current.y=(v.current.y??0)-R/V[2],P({x:b,y:R})&&X(v.current)}w.current=requestAnimationFrame(rt)},M=b=>{const{nodeInternals:R,multiSelectionActive:V,nodesDraggable:P,unselectNodesAndEdges:U,onNodeDragStart:x,onSelectionDragStart:D}=d.getState();B.current=!0;const $=a?x:Hm(D);(!c||!l)&&!V&&a&&(R.get(a)?.selected||U()),a&&l&&c&&Np({id:a,store:d,nodeRef:e});const C=Q(b);if(v.current=C,y.current=w3(R,P,C,a),$&&y.current){const[F,J]=Bm({nodeId:a,dragItems:y.current,nodeInternals:R});$(b.sourceEvent,F,J)}};if(t)q.on(".drag",null);else{const b=O4().on("start",R=>{const{domNode:V,nodeDragThreshold:P}=d.getState();P===0&&M(R),G.current=!1;const U=Q(R);v.current=U,S.current=V?.getBoundingClientRect()||null,O.current=Ls(R.sourceEvent,S.current)}).on("drag",R=>{const V=Q(R),{autoPanOnNodeDrag:P,nodeDragThreshold:U}=d.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(G.current=!0),!G.current){if(!k.current&&B.current&&P&&(k.current=!0,rt()),!B.current){const x=V.xSnapped-(v?.current?.x??0),D=V.ySnapped-(v?.current?.y??0);Math.sqrt(x*x+D*D)>U&&M(R)}(v.current.x!==V.xSnapped||v.current.y!==V.ySnapped)&&y.current&&B.current&&(L.current=R.sourceEvent,O.current=Ls(R.sourceEvent,S.current),X(V))}}).on("end",R=>{if(!(!B.current||G.current)&&(m(!1),k.current=!1,B.current=!1,cancelAnimationFrame(w.current),y.current)){const{updateNodePositions:V,nodeInternals:P,onNodeDragStop:U,onSelectionDragStop:x}=d.getState(),D=a?U:Hm(x);if(V(y.current,!1,!1),D){const[$,C]=Bm({nodeId:a,dragItems:y.current,nodeInternals:P});D(R.sourceEvent,$,C)}}}).filter(R=>{const V=R.target;return!R.button&&(!n||!Aw(V,`.${n}`,e))&&(!r||Aw(V,r,e))});return q.call(b),()=>{q.on(".drag",null)}}}},[e,t,n,r,l,d,a,c,Q]),g}function _1(){const e=hn();return et.useCallback(n=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:g,onError:m,nodesDraggable:y}=e.getState(),v=c().filter(G=>G.selected&&(G.draggable||y&&typeof G.draggable>"u")),w=d?g[0]:5,S=d?g[1]:5,O=n.isShiftPressed?4:1,L=n.x*w*O,k=n.y*S*O,B=v.map(G=>{if(G.positionAbsolute){const Q={x:G.positionAbsolute.x+L,y:G.positionAbsolute.y+k};d&&(Q.x=g[0]*Math.round(Q.x/g[0]),Q.y=g[1]*Math.round(Q.y/g[1]));const{positionAbsolute:q,position:X}=p1(G,Q,r,a,void 0,m);G.position=X,G.positionAbsolute=q}return G});l(B,!0,!1)},[])}const Wo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ru=e=>{const t=({id:n,type:r,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:m,onClick:y,onMouseEnter:v,onMouseMove:w,onMouseLeave:S,onContextMenu:O,onDoubleClick:L,style:k,className:B,isDraggable:G,isSelectable:Q,isConnectable:q,isFocusable:X,selectNodesOnDrag:rt,sourcePosition:M,targetPosition:b,hidden:R,resizeObserver:V,dragHandle:P,zIndex:U,isParent:x,noDragClassName:D,noPanClassName:$,initialized:C,disableKeyboardA11y:F,ariaLabel:J,rfId:Y,hasHandleBounds:N})=>{const j=hn(),nt=et.useRef(null),st=et.useRef(null),ct=et.useRef(M),pt=et.useRef(b),yt=et.useRef(r),xt=Q||G||y||v||w||S,St=_1(),Qt=bu(n,j.getState,v),Gt=bu(n,j.getState,w),Se=bu(n,j.getState,S),Ne=bu(n,j.getState,O),Ue=bu(n,j.getState,L),xe=Lt=>{const{nodeDragThreshold:wt}=j.getState();if(Q&&(!rt||!G||wt>0)&&Np({id:n,store:j,nodeRef:nt}),y){const ze=j.getState().nodeInternals.get(n);ze&&y(Lt,{...ze})}},fe=Lt=>{if(!Ap(Lt)&&!F)if(Bb.includes(Lt.key)&&Q){const wt=Lt.key==="Escape";Np({id:n,store:j,unselect:wt,nodeRef:nt})}else G&&m&&Object.prototype.hasOwnProperty.call(Wo,Lt.key)&&(j.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),St({x:Wo[Lt.key].x,y:Wo[Lt.key].y,isShiftPressed:Lt.shiftKey}))};et.useEffect(()=>()=>{st.current&&(V?.unobserve(st.current),st.current=null)},[]),et.useEffect(()=>{if(nt.current&&!R){const Lt=nt.current;(!C||!N||st.current!==Lt)&&(st.current&&V?.unobserve(st.current),V?.observe(Lt),st.current=Lt)}},[R,C,N]),et.useEffect(()=>{const Lt=yt.current!==r,wt=ct.current!==M,ze=pt.current!==b;nt.current&&(Lt||wt||ze)&&(Lt&&(yt.current=r),wt&&(ct.current=M),ze&&(pt.current=b),j.getState().updateNodeDimensions([{id:n,nodeElement:nt.current,forceUpdate:!0}]))},[n,r,M,b]);const vn=y1({nodeRef:nt,disabled:R||!G,noDragClassName:D,handleSelector:P,nodeId:n,isSelectable:Q,selectNodesOnDrag:rt});return R?null:gt.createElement("div",{className:Ei(["react-flow__node",`react-flow__node-${r}`,{[$]:G},B,{selected:m,selectable:Q,parent:x,dragging:vn}]),ref:nt,style:{zIndex:U,transform:`translate(${d}px,${g}px)`,pointerEvents:xt?"all":"none",visibility:C?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Qt,onMouseMove:Gt,onMouseLeave:Se,onContextMenu:Ne,onClick:xe,onDoubleClick:Ue,onKeyDown:X?fe:void 0,tabIndex:X?0:void 0,role:X?"button":void 0,"aria-describedby":F?void 0:`${a1}-${Y}`,"aria-label":J},gt.createElement(UP,{value:n},gt.createElement(e,{id:n,data:a,type:r,xPos:l,yPos:c,selected:m,isConnectable:q,sourcePosition:M,targetPosition:b,dragging:vn,dragHandle:P,zIndex:U})))};return t.displayName="NodeWrapper",et.memo(t)};const b3=e=>{const t=e.getNodes().filter(n=>n.selected);return{...By(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function R3({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=hn(),{width:a,height:l,x:c,y:d,transformString:g,userSelectionActive:m}=Ce(b3,Pn),y=_1(),v=et.useRef(null);if(et.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),y1({nodeRef:v}),m||!a||!l)return null;const w=e?O=>{const L=r.getState().getNodes().filter(k=>k.selected);e(O,L)}:void 0,S=O=>{Object.prototype.hasOwnProperty.call(Wo,O.key)&&y({x:Wo[O.key].x,y:Wo[O.key].y,isShiftPressed:O.shiftKey})};return gt.createElement("div",{className:Ei(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},gt.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:w,tabIndex:n?void 0:-1,onKeyDown:n?void 0:S,style:{width:a,height:l,top:d,left:c}}))}var I3=et.memo(R3);const C3=e=>e.nodesSelectionActive,v1=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:m,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:w,selectionMode:S,onSelectionStart:O,onSelectionEnd:L,multiSelectionKeyCode:k,panActivationKeyCode:B,zoomActivationKeyCode:G,elementsSelectable:Q,zoomOnScroll:q,zoomOnPinch:X,panOnScroll:rt,panOnScrollSpeed:M,panOnScrollMode:b,zoomOnDoubleClick:R,panOnDrag:V,defaultViewport:P,translateExtent:U,minZoom:x,maxZoom:D,preventScrolling:$,onSelectionContextMenu:C,noWheelClassName:F,noPanClassName:J,disableKeyboardA11y:Y})=>{const N=Ce(C3),j=nc(v),nt=nc(B),st=nt||V,ct=nt||rt,pt=j||w&&st!==!0;return d3({deleteKeyCode:d,multiSelectionKeyCode:k}),gt.createElement(y3,{onMove:g,onMoveStart:m,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:Q,zoomOnScroll:q,zoomOnPinch:X,panOnScroll:ct,panOnScrollSpeed:M,panOnScrollMode:b,zoomOnDoubleClick:R,panOnDrag:!j&&st,defaultViewport:P,translateExtent:U,minZoom:x,maxZoom:D,zoomActivationKeyCode:G,preventScrolling:$,noWheelClassName:F,noPanClassName:J},gt.createElement(g1,{onSelectionStart:O,onSelectionEnd:L,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:st,isSelecting:!!pt,selectionMode:S},e,N&&gt.createElement(I3,{onSelectionContextMenu:C,noPanClassName:J,disableKeyboardA11y:Y})))};v1.displayName="FlowRenderer";var N3=et.memo(v1);function x3(e){return Ce(et.useCallback(n=>e?Yb(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function D3(e){const t={input:Ru(e.input||n1),default:Ru(e.default||Cp),output:Ru(e.output||r1),group:Ru(e.group||qy)},n={},r=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Ru(e[l]||Cp),a),n);return{...t,...r}}const O3=({x:e,y:t,width:n,height:r,origin:a})=>!n||!r?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]},M3=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),E1=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,updateNodeDimensions:l,onError:c}=Ce(M3,Pn),d=x3(e.onlyRenderVisibleElements),g=et.useRef(),m=et.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const w=v.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));l(w)});return g.current=y,y},[]);return et.useEffect(()=>()=>{g?.current?.disconnect()},[]),gt.createElement("div",{className:"react-flow__nodes",style:Fy},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",$r.error003(v)),v="default");const w=e.nodeTypes[v]||e.nodeTypes.default,S=!!(y.draggable||t&&typeof y.draggable>"u"),O=!!(y.selectable||a&&typeof y.selectable>"u"),L=!!(y.connectable||n&&typeof y.connectable>"u"),k=!!(y.focusable||r&&typeof y.focusable>"u"),B=e.nodeExtent?Vy(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,G=B?.x??0,Q=B?.y??0,q=O3({x:G,y:Q,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return gt.createElement(w,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||At.Bottom,targetPosition:y.targetPosition||At.Top,hidden:y.hidden,xPos:G,yPos:Q,xPosOrigin:q.x,yPosOrigin:q.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:S,isSelectable:O,isConnectable:L,isFocusable:k,resizeObserver:m,dragHandle:y.dragHandle,zIndex:y[we]?.z??0,isParent:!!y[we]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[we]?.handleBounds})}))};E1.displayName="NodeRenderer";var V3=et.memo(E1);const k3=(e,t,n)=>n===At.Left?e-t:n===At.Right?e+t:e,P3=(e,t,n)=>n===At.Top?e-t:n===At.Bottom?e+t:e,Rw="react-flow__edgeupdater",Iw=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>gt.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Ei([Rw,`${Rw}-${d}`]),cx:k3(t,r,e),cy:P3(n,r,e),r,stroke:"transparent",fill:"transparent"}),L3=()=>!0;var Lo=e=>{const t=({id:n,className:r,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:w,labelBgStyle:S,labelBgPadding:O,labelBgBorderRadius:L,style:k,source:B,target:G,sourceX:Q,sourceY:q,targetX:X,targetY:rt,sourcePosition:M,targetPosition:b,elementsSelectable:R,hidden:V,sourceHandleId:P,targetHandleId:U,onContextMenu:x,onMouseEnter:D,onMouseMove:$,onMouseLeave:C,reconnectRadius:F,onReconnect:J,onReconnectStart:Y,onReconnectEnd:N,markerEnd:j,markerStart:nt,rfId:st,ariaLabel:ct,isFocusable:pt,isReconnectable:yt,pathOptions:xt,interactionWidth:St,disableKeyboardA11y:Qt})=>{const Gt=et.useRef(null),[Se,Ne]=et.useState(!1),[Ue,xe]=et.useState(!1),fe=hn(),vn=et.useMemo(()=>`url('#${Rp(nt,st)}')`,[nt,st]),Lt=et.useMemo(()=>`url('#${Rp(j,st)}')`,[j,st]);if(V)return null;const wt=Oe=>{const{edges:Ke,addSelectedEdges:Tn,unselectNodesAndEdges:wn,multiSelectionActive:Xe}=fe.getState(),nn=Ke.find(Sn=>Sn.id===n);nn&&(R&&(fe.setState({nodesSelectionActive:!1}),nn.selected&&Xe?(wn({nodes:[],edges:[nn]}),Gt.current?.blur()):Tn([n])),c&&c(Oe,nn))},ze=Au(n,fe.getState,d),Cn=Au(n,fe.getState,x),Ln=Au(n,fe.getState,D),Pi=Au(n,fe.getState,$),Un=Au(n,fe.getState,C),En=(Oe,Ke)=>{if(Oe.button!==0)return;const{edges:Tn,isValidConnection:wn}=fe.getState(),Xe=Ke?G:B,nn=(Ke?U:P)||null,Sn=Ke?"target":"source",hr=wn||L3,dr=Ke,wi=Tn.find(Bn=>Bn.id===n);xe(!0),Y?.(Oe,wi,Sn);const zn=Bn=>{xe(!1),N?.(Bn,wi,Sn)};Wb({event:Oe,handleId:nn,nodeId:Xe,onConnect:Bn=>J?.(wi,Bn),isTarget:dr,getState:fe.getState,setState:fe.setState,isValidConnection:hr,edgeUpdaterType:Sn,onReconnectEnd:zn})},Ti=Oe=>En(Oe,!0),Jt=Oe=>En(Oe,!1),Bt=()=>Ne(!0),De=()=>Ne(!1),me=!R&&!c,Li=Oe=>{if(!Qt&&Bb.includes(Oe.key)&&R){const{unselectNodesAndEdges:Ke,addSelectedEdges:Tn,edges:wn}=fe.getState();Oe.key==="Escape"?(Gt.current?.blur(),Ke({edges:[wn.find(nn=>nn.id===n)]})):Tn([n])}};return gt.createElement("g",{className:Ei(["react-flow__edge",`react-flow__edge-${a}`,r,{selected:g,animated:m,inactive:me,updating:Se}]),onClick:wt,onDoubleClick:ze,onContextMenu:Cn,onMouseEnter:Ln,onMouseMove:Pi,onMouseLeave:Un,onKeyDown:pt?Li:void 0,tabIndex:pt?0:void 0,role:pt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ct===null?void 0:ct||`Edge from ${B} to ${G}`,"aria-describedby":pt?`${o1}-${st}`:void 0,ref:Gt},!Ue&&gt.createElement(e,{id:n,source:B,target:G,selected:g,animated:m,label:y,labelStyle:v,labelShowBg:w,labelBgStyle:S,labelBgPadding:O,labelBgBorderRadius:L,data:l,style:k,sourceX:Q,sourceY:q,targetX:X,targetY:rt,sourcePosition:M,targetPosition:b,sourceHandleId:P,targetHandleId:U,markerStart:vn,markerEnd:Lt,pathOptions:xt,interactionWidth:St}),yt&&gt.createElement(gt.Fragment,null,(yt==="source"||yt===!0)&&gt.createElement(Iw,{position:M,centerX:Q,centerY:q,radius:F,onMouseDown:Ti,onMouseEnter:Bt,onMouseOut:De,type:"source"}),(yt==="target"||yt===!0)&&gt.createElement(Iw,{position:b,centerX:X,centerY:rt,radius:F,onMouseDown:Jt,onMouseEnter:Bt,onMouseOut:De,type:"target"})))};return t.displayName="EdgeWrapper",et.memo(t)};function U3(e){const t={default:Lo(e.default||zh),straight:Lo(e.bezier||Uy),step:Lo(e.step||Ly),smoothstep:Lo(e.step||gd),simplebezier:Lo(e.simplebezier||Py)},n={},r=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=Lo(e[l]||zh),a),n);return{...t,...r}}function Cw(e,t,n=null){const r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,l=n?.width||t.width,c=n?.height||t.height;switch(e){case At.Top:return{x:r+l/2,y:a};case At.Right:return{x:r+l,y:a+c/2};case At.Bottom:return{x:r+l/2,y:a+c};case At.Left:return{x:r,y:a+c/2}}}function Nw(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const z3=(e,t,n,r,a,l)=>{const c=Cw(n,e,t),d=Cw(l,r,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function B3({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:l,width:c,height:d,transform:g}){const m={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+l)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const y=ky({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,m.x2)-Math.max(y.x,m.x)),w=Math.max(0,Math.min(y.y2,m.y2)-Math.max(y.y,m.y));return Math.ceil(v*w)>0}function xw(e){const t=e?.[we]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const H3=[{level:0,isMaxLevel:!0,edges:[]}];function q3(e,t,n=!1){let r=-1;const a=e.reduce((c,d)=>{const g=vi(d.zIndex);let m=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),w=d.selected||y?.selected||v?.selected,S=Math.max(v?.[we]?.z||0,y?.[we]?.z||0,1e3);m=(g?d.zIndex:0)+(w?S:0)}return c[m]?c[m].push(d):c[m]=[d],r=m>r?m:r,c},{}),l=Object.entries(a).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===r}});return l.length===0?H3:l}function F3(e,t,n){const r=Ce(et.useCallback(a=>e?a.edges.filter(l=>{const c=t.get(l.source),d=t.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&B3({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return q3(r,t,n)}const j3=({color:e="none",strokeWidth:t=1})=>gt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),G3=({color:e="none",strokeWidth:t=1})=>gt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Dw={[Uh.Arrow]:j3,[Uh.ArrowClosed]:G3};function $3(e){const t=hn();return et.useMemo(()=>Object.prototype.hasOwnProperty.call(Dw,e)?Dw[e]:(t.getState().onError?.("009",$r.error009(e)),null),[e])}const Y3=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=$3(t);return g?gt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},gt.createElement(g,{color:n,strokeWidth:c})):null},K3=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Rp(c,t);r.includes(d)||(a.push({id:d,color:c.color||e,...c}),r.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},T1=({defaultColor:e,rfId:t})=>{const n=Ce(et.useCallback(K3({defaultColor:e,rfId:t}),[e,t]),(r,a)=>!(r.length!==a.length||r.some((l,c)=>l.id!==a[c].id)));return gt.createElement("defs",null,n.map(r=>gt.createElement(Y3,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};T1.displayName="MarkerDefinitions";var X3=et.memo(T1);const Q3=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),w1=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:m,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:w,onReconnectStart:S,onReconnectEnd:O,reconnectRadius:L,children:k,disableKeyboardA11y:B})=>{const{edgesFocusable:G,edgesUpdatable:Q,elementsSelectable:q,width:X,height:rt,connectionMode:M,nodeInternals:b,onError:R}=Ce(Q3,Pn),V=F3(t,b,n);return X?gt.createElement(gt.Fragment,null,V.map(({level:P,edges:U,isMaxLevel:x})=>gt.createElement("svg",{key:P,style:{zIndex:P},width:X,height:rt,className:"react-flow__edges react-flow__container"},x&&gt.createElement(X3,{defaultColor:e,rfId:r}),gt.createElement("g",null,U.map(D=>{const[$,C,F]=xw(b.get(D.source)),[J,Y,N]=xw(b.get(D.target));if(!F||!N)return null;let j=D.type||"default";a[j]||(R?.("011",$r.error011(j)),j="default");const nt=a[j]||a.default,st=M===Ua.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),ct=Nw(C.source,D.sourceHandle),pt=Nw(st,D.targetHandle),yt=ct?.position||At.Bottom,xt=pt?.position||At.Top,St=!!(D.focusable||G&&typeof D.focusable>"u"),Qt=D.reconnectable||D.updatable,Gt=typeof w<"u"&&(Qt||Q&&typeof Qt>"u");if(!ct||!pt)return R?.("008",$r.error008(ct,D)),null;const{sourceX:Se,sourceY:Ne,targetX:Ue,targetY:xe}=z3($,ct,yt,J,pt,xt);return gt.createElement(nt,{key:D.id,id:D.id,className:Ei([D.className,l]),type:j,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:Se,sourceY:Ne,targetX:Ue,targetY:xe,sourcePosition:yt,targetPosition:xt,elementsSelectable:q,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:m,onClick:y,onEdgeDoubleClick:v,onReconnect:w,onReconnectStart:S,onReconnectEnd:O,reconnectRadius:L,rfId:r,ariaLabel:D.ariaLabel,isFocusable:St,isReconnectable:Gt,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth,disableKeyboardA11y:B})})))),k):null};w1.displayName="EdgeRenderer";var Z3=et.memo(w1);const W3=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function J3({children:e}){const t=Ce(W3);return gt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function t6(e){const t=f1(),n=et.useRef(!1);et.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const e6={[At.Left]:At.Right,[At.Right]:At.Left,[At.Top]:At.Bottom,[At.Bottom]:At.Top},S1=({nodeId:e,handleType:t,style:n,type:r=Cs.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:g,toY:m,connectionMode:y}=Ce(et.useCallback(rt=>({fromNode:rt.nodeInternals.get(e),handleId:rt.connectionHandleId,toX:(rt.connectionPosition.x-rt.transform[0])/rt.transform[2],toY:(rt.connectionPosition.y-rt.transform[1])/rt.transform[2],connectionMode:rt.connectionMode}),[e]),Pn),v=c?.[we]?.handleBounds;let w=v?.[t];if(y===Ua.Loose&&(w=w||v?.[t==="source"?"target":"source"]),!c||!w)return null;const S=d?w.find(rt=>rt.id===d):w[0],O=S?S.x+S.width/2:(c.width??0)/2,L=S?S.y+S.height/2:c.height??0,k=(c.positionAbsolute?.x??0)+O,B=(c.positionAbsolute?.y??0)+L,G=S?.position,Q=G?e6[G]:null;if(!G||!Q)return null;if(a)return gt.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:c,fromHandle:S,fromX:k,fromY:B,toX:g,toY:m,fromPosition:G,toPosition:Q,connectionStatus:l});let q="";const X={sourceX:k,sourceY:B,sourcePosition:G,targetX:g,targetY:m,targetPosition:Q};return r===Cs.Bezier?[q]=Gb(X):r===Cs.Step?[q]=bp({...X,borderRadius:0}):r===Cs.SmoothStep?[q]=bp(X):r===Cs.SimpleBezier?[q]=jb(X):q=`M${k},${B} ${g},${m}`,gt.createElement("path",{d:q,fill:"none",className:"react-flow__connection-path",style:n})};S1.displayName="ConnectionLine";const n6=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function i6({containerStyle:e,style:t,type:n,component:r}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:g,connectionStatus:m}=Ce(n6,Pn);return!(a&&l&&d&&c)?null:gt.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},gt.createElement("g",{className:Ei(["react-flow__connection",m])},gt.createElement(S1,{nodeId:a,handleType:l,style:t,type:n,CustomComponent:r,connectionStatus:m})))}function Ow(e,t){return et.useRef(null),hn(),et.useMemo(()=>t(e),[e])}const A1=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:m,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:w,onNodeContextMenu:S,onSelectionContextMenu:O,onSelectionStart:L,onSelectionEnd:k,connectionLineType:B,connectionLineStyle:G,connectionLineComponent:Q,connectionLineContainerStyle:q,selectionKeyCode:X,selectionOnDrag:rt,selectionMode:M,multiSelectionKeyCode:b,panActivationKeyCode:R,zoomActivationKeyCode:V,deleteKeyCode:P,onlyRenderVisibleElements:U,elementsSelectable:x,selectNodesOnDrag:D,defaultViewport:$,translateExtent:C,minZoom:F,maxZoom:J,preventScrolling:Y,defaultMarkerColor:N,zoomOnScroll:j,zoomOnPinch:nt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,zoomOnDoubleClick:yt,panOnDrag:xt,onPaneClick:St,onPaneMouseEnter:Qt,onPaneMouseMove:Gt,onPaneMouseLeave:Se,onPaneScroll:Ne,onPaneContextMenu:Ue,onEdgeContextMenu:xe,onEdgeMouseEnter:fe,onEdgeMouseMove:vn,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:ze,onReconnectEnd:Cn,reconnectRadius:Ln,noDragClassName:Pi,noWheelClassName:Un,noPanClassName:En,elevateEdgesOnSelect:Ti,disableKeyboardA11y:Jt,nodeOrigin:Bt,nodeExtent:De,rfId:me})=>{const Li=Ow(e,D3),Oe=Ow(t,U3);return t6(l),gt.createElement(N3,{onPaneClick:St,onPaneMouseEnter:Qt,onPaneMouseMove:Gt,onPaneMouseLeave:Se,onPaneContextMenu:Ue,onPaneScroll:Ne,deleteKeyCode:P,selectionKeyCode:X,selectionOnDrag:rt,selectionMode:M,onSelectionStart:L,onSelectionEnd:k,multiSelectionKeyCode:b,panActivationKeyCode:R,zoomActivationKeyCode:V,elementsSelectable:x,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:j,zoomOnPinch:nt,zoomOnDoubleClick:yt,panOnScroll:st,panOnScrollSpeed:ct,panOnScrollMode:pt,panOnDrag:xt,defaultViewport:$,translateExtent:C,minZoom:F,maxZoom:J,onSelectionContextMenu:O,preventScrolling:Y,noDragClassName:Pi,noWheelClassName:Un,noPanClassName:En,disableKeyboardA11y:Jt},gt.createElement(J3,null,gt.createElement(Z3,{edgeTypes:Oe,onEdgeClick:d,onEdgeDoubleClick:m,onlyRenderVisibleElements:U,onEdgeContextMenu:xe,onEdgeMouseEnter:fe,onEdgeMouseMove:vn,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:ze,onReconnectEnd:Cn,reconnectRadius:Ln,defaultMarkerColor:N,noPanClassName:En,elevateEdgesOnSelect:!!Ti,disableKeyboardA11y:Jt,rfId:me},gt.createElement(i6,{style:G,type:B,component:Q,containerStyle:q})),gt.createElement("div",{className:"react-flow__edgelabel-renderer"}),gt.createElement(V3,{nodeTypes:Li,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:w,onNodeContextMenu:S,selectNodesOnDrag:D,onlyRenderVisibleElements:U,noPanClassName:En,noDragClassName:Pi,disableKeyboardA11y:Jt,nodeOrigin:Bt,nodeExtent:De,rfId:me})))};A1.displayName="GraphView";var r6=et.memo(A1);const xp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ts={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:xp,nodeExtent:xp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ua.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:OP,isValidConnection:void 0},s6=()=>jM((e,t)=>({...Ts,setNodes:n=>{const{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:l}=t();e({nodeInternals:Um(n,r,a,l)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(a=>({...r,...a}))})},setDefaultNodesAndEdges:(n,r)=>{const a=typeof n<"u",l=typeof r<"u",c=a?Um(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:l?r:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:m}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:w}=new window.DOMMatrixReadOnly(v.transform),S=n.reduce((L,k)=>{const B=a.get(k.id);if(B?.hidden)a.set(B.id,{...B,[we]:{...B[we],handleBounds:void 0}});else if(B){const G=My(k.nodeElement);!!(G.width&&G.height&&(B.width!==G.width||B.height!==G.height||k.forceUpdate))&&(a.set(B.id,{...B,[we]:{...B[we],handleBounds:{source:bw(".source",k.nodeElement,w,m),target:bw(".target",k.nodeElement,w,m)}},...G}),L.push({id:B.id,type:"dimensions",dimensions:G}))}return L},[]);u1(a,m);const O=c||l&&!c&&c1(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:O}),S?.length>0&&r?.(S)},updateNodePositions:(n,r=!0,a=!1)=>{const{triggerNodeChanges:l}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:a};return r&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});l(c)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(l){const m=d1(n,d()),y=Um(m,a,c,g);e({nodeInternals:y})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>Ss(g,!0)):(c=jo(l(),n),d=jo(a,[])),Xf({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:a,getNodes:l}=t();let c,d=null;r?c=n.map(g=>Ss(g,!0)):(c=jo(a,n),d=jo(l(),[])),Xf({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:a,getNodes:l}=t(),c=n||l(),d=r||a,g=c.map(y=>(y.selected=!1,Ss(y.id,!1))),m=d.map(y=>Ss(y.id,!1));Xf({changedNodes:g,changedEdges:m,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),l=r().filter(d=>d.selected).map(d=>Ss(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Ss(d.id,!1));Xf({changedNodes:l,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(a=>{a.positionAbsolute=Vy(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const m=Ps.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),y=[[0,0],[a,l]],v=c?.constrain()(m,y,g);return c.transform(d,v),r[0]!==v.x||r[1]!==v.y||r[2]!==v.k},cancelConnection:()=>e({connectionNodeId:Ts.connectionNodeId,connectionHandleId:Ts.connectionHandleId,connectionHandleType:Ts.connectionHandleType,connectionStatus:Ts.connectionStatus,connectionStartHandle:Ts.connectionStartHandle,connectionEndHandle:Ts.connectionEndHandle}),reset:()=>e({...Ts})}),Object.is),b1=({children:e})=>{const t=et.useRef(null);return t.current||(t.current=s6()),gt.createElement(SP,{value:t.current},e)};b1.displayName="ReactFlowProvider";const R1=({children:e})=>et.useContext(dd)?gt.createElement(gt.Fragment,null,e):gt.createElement(b1,null,e);R1.displayName="ReactFlowWrapper";const a6={input:n1,default:Cp,output:r1,group:qy},o6={default:zh,straight:Uy,step:Ly,smoothstep:gd,simplebezier:Py},l6=[0,0],u6=[15,15],c6={x:0,y:0,zoom:1},f6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},h6=et.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:l=a6,edgeTypes:c=o6,onNodeClick:d,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:w,onConnect:S,onConnectStart:O,onConnectEnd:L,onClickConnectStart:k,onClickConnectEnd:B,onNodeMouseEnter:G,onNodeMouseMove:Q,onNodeMouseLeave:q,onNodeContextMenu:X,onNodeDoubleClick:rt,onNodeDragStart:M,onNodeDrag:b,onNodeDragStop:R,onNodesDelete:V,onEdgesDelete:P,onSelectionChange:U,onSelectionDragStart:x,onSelectionDrag:D,onSelectionDragStop:$,onSelectionContextMenu:C,onSelectionStart:F,onSelectionEnd:J,connectionMode:Y=Ua.Strict,connectionLineType:N=Cs.Bezier,connectionLineStyle:j,connectionLineComponent:nt,connectionLineContainerStyle:st,deleteKeyCode:ct="Backspace",selectionKeyCode:pt="Shift",selectionOnDrag:yt=!1,selectionMode:xt=ec.Full,panActivationKeyCode:St="Space",multiSelectionKeyCode:Qt=Lh()?"Meta":"Control",zoomActivationKeyCode:Gt=Lh()?"Meta":"Control",snapToGrid:Se=!1,snapGrid:Ne=u6,onlyRenderVisibleElements:Ue=!1,selectNodesOnDrag:xe=!0,nodesDraggable:fe,nodesConnectable:vn,nodesFocusable:Lt,nodeOrigin:wt=l6,edgesFocusable:ze,edgesUpdatable:Cn,elementsSelectable:Ln,defaultViewport:Pi=c6,minZoom:Un=.5,maxZoom:En=2,translateExtent:Ti=xp,preventScrolling:Jt=!0,nodeExtent:Bt,defaultMarkerColor:De="#b1b1b7",zoomOnScroll:me=!0,zoomOnPinch:Li=!0,panOnScroll:Oe=!1,panOnScrollSpeed:Ke=.5,panOnScrollMode:Tn=Ca.Free,zoomOnDoubleClick:wn=!0,panOnDrag:Xe=!0,onPaneClick:nn,onPaneMouseEnter:Sn,onPaneMouseMove:hr,onPaneMouseLeave:dr,onPaneScroll:wi,onPaneContextMenu:zn,children:ei,onEdgeContextMenu:Bn,onEdgeDoubleClick:ni,onEdgeMouseEnter:Ks,onEdgeMouseMove:Ui,onEdgeMouseLeave:Kr,onEdgeUpdate:zi,onEdgeUpdateStart:Fa,onEdgeUpdateEnd:ue,onReconnect:Ae,onReconnectStart:ve,onReconnectEnd:Nn,reconnectRadius:Xs=10,edgeUpdaterRadius:Tl=10,onNodesChange:Bi,onEdgesChange:ja,noDragClassName:gr="nodrag",noWheelClassName:Hi="nowheel",noPanClassName:ii="nopan",fitView:ri=!1,fitViewOptions:si,connectOnClick:rn=!0,attributionPosition:pe,proOptions:Qs,defaultEdgeOptions:Xr,elevateNodesOnSelect:Hn=!0,elevateEdgesOnSelect:Si=!1,disableKeyboardA11y:Zs=!1,autoPanOnConnect:Ga=!0,autoPanOnNodeDrag:mr=!0,connectionRadius:$a=20,isValidConnection:qi,onError:ai,style:Be,id:Fi,nodeDragThreshold:Ya,...Ai},Qr)=>{const ji=Fi||"1";return gt.createElement("div",{...Ai,style:{...Be,...f6},ref:Qr,className:Ei(["react-flow",a]),"data-testid":"rf__wrapper",id:Fi},gt.createElement(R1,null,gt.createElement(r6,{onInit:m,onMove:y,onMoveStart:v,onMoveEnd:w,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:G,onNodeMouseMove:Q,onNodeMouseLeave:q,onNodeContextMenu:X,onNodeDoubleClick:rt,nodeTypes:l,edgeTypes:c,connectionLineType:N,connectionLineStyle:j,connectionLineComponent:nt,connectionLineContainerStyle:st,selectionKeyCode:pt,selectionOnDrag:yt,selectionMode:xt,deleteKeyCode:ct,multiSelectionKeyCode:Qt,panActivationKeyCode:St,zoomActivationKeyCode:Gt,onlyRenderVisibleElements:Ue,selectNodesOnDrag:xe,defaultViewport:Pi,translateExtent:Ti,minZoom:Un,maxZoom:En,preventScrolling:Jt,zoomOnScroll:me,zoomOnPinch:Li,zoomOnDoubleClick:wn,panOnScroll:Oe,panOnScrollSpeed:Ke,panOnScrollMode:Tn,panOnDrag:Xe,onPaneClick:nn,onPaneMouseEnter:Sn,onPaneMouseMove:hr,onPaneMouseLeave:dr,onPaneScroll:wi,onPaneContextMenu:zn,onSelectionContextMenu:C,onSelectionStart:F,onSelectionEnd:J,onEdgeContextMenu:Bn,onEdgeDoubleClick:ni,onEdgeMouseEnter:Ks,onEdgeMouseMove:Ui,onEdgeMouseLeave:Kr,onReconnect:Ae??zi,onReconnectStart:ve??Fa,onReconnectEnd:Nn??ue,reconnectRadius:Xs??Tl,defaultMarkerColor:De,noDragClassName:gr,noWheelClassName:Hi,noPanClassName:ii,elevateEdgesOnSelect:Si,rfId:ji,disableKeyboardA11y:Zs,nodeOrigin:wt,nodeExtent:Bt}),gt.createElement(e3,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:S,onConnectStart:O,onConnectEnd:L,onClickConnectStart:k,onClickConnectEnd:B,nodesDraggable:fe,nodesConnectable:vn,nodesFocusable:Lt,edgesFocusable:ze,edgesUpdatable:Cn,elementsSelectable:Ln,elevateNodesOnSelect:Hn,minZoom:Un,maxZoom:En,nodeExtent:Bt,onNodesChange:Bi,onEdgesChange:ja,snapToGrid:Se,snapGrid:Ne,connectionMode:Y,translateExtent:Ti,connectOnClick:rn,defaultEdgeOptions:Xr,fitView:ri,fitViewOptions:si,onNodesDelete:V,onEdgesDelete:P,onNodeDragStart:M,onNodeDrag:b,onNodeDragStop:R,onSelectionDrag:D,onSelectionDragStart:x,onSelectionDragStop:$,noPanClassName:ii,nodeOrigin:wt,rfId:ji,autoPanOnConnect:Ga,autoPanOnNodeDrag:mr,onError:ai,connectionRadius:$a,isValidConnection:qi,nodeDragThreshold:Ya}),gt.createElement(JP,{onSelectionChange:U}),ei,gt.createElement(RP,{proOptions:Qs,position:pe}),gt.createElement(a3,{rfId:ji,disableKeyboardA11y:Zs})))});h6.displayName="ReactFlow";function I1(e){return t=>{const[n,r]=et.useState(t),a=et.useCallback(l=>r(c=>e(l,c)),[]);return[n,r,a]}}const d6=I1(d1),g6=I1(E3),C1=e=>!!(e&&e.uid),Jo=[{id:"1",type:"draggableEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively"},position:{x:250,y:25}},{id:"2",type:"draggableEditable",data:{label:"This is a simple sentence with multiple words to demonstrate word mode functionality"},position:{x:100,y:125}},{id:"3",type:"draggableEditable",data:{label:"_Machine learning_ algorithms can _predict outcomes_ with high accuracy"},position:{x:400,y:125}},{id:"4",type:"staticEditable",data:{label:"Static node with _key concepts_ highlighted"},position:{x:250,y:200},draggable:!1}],tl=[{id:"e1-2",source:"1",target:"2"},{id:"e1-3",source:"1",target:"3"},{id:"e2-4",source:"2",target:"4"},{id:"e3-4",source:"3",target:"4"}],m6=async e=>{if(!C1({uid:e}))throw new Error(In.AUTH_REQUIRED);try{const t=iy(Vi,Jn.BOARDS),n=rD(t,sD("userId","==",e),aD("createdAt","desc")),r=await my(n);if(r.empty){const l={id:`board_${Date.now()}`,userId:e,name:"Default Board",createdAt:de.now(),isOpen:!0};return await py(vl(Vi,Jn.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=r.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(t){if(console.error("Fetch all boards error:",t),t.code==="failed-precondition"||t.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:e,name:"Fallback Board (Create Index)",createdAt:de.now(),isOpen:!0,isFallback:!0}]}throw new Error(In.LOAD_FAILED)}},Mw=async e=>{if(!e)return console.warn("No board ID provided for fetching nodes"),Jo;try{const t=iy(Vi,Jn.BOARDS,e,Jn.NODES),n=await my(t);if(n.empty)return console.log("No nodes found for board, using initial nodes"),Jo;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched nodes from board:",r),r}catch(t){return console.error("Fetch nodes error:",t),Jo}},Vw=async e=>{if(!e)return console.warn("No board ID provided for fetching edges"),tl;try{const t=iy(Vi,Jn.BOARDS,e,Jn.EDGES),n=await my(t);if(n.empty)return console.log("No edges found for board, using initial edges"),tl;const r=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",r),r}catch(t){return console.error("Fetch edges error:",t),tl}},p6=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving nodes:",{boardId:e,nodesCount:t?.length});return}try{const n=IA(Vi);t.forEach(r=>{const a=vl(Vi,Jn.BOARDS,e,Jn.NODES,r.id);n.set(a,{type:r.type,data:r.data,position:r.position,draggable:r.draggable,updatedAt:de.now()})}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(In.SAVE_FAILED)}},y6=async(e,t)=>{if(!e||!t?.length){console.warn("Invalid parameters for saving edges:",{boardId:e,edgesCount:t?.length});return}try{const n=IA(Vi);t.forEach(r=>{const a=vl(Vi,Jn.BOARDS,e,Jn.EDGES,r.id);n.set(a,{source:r.source,target:r.target,sourceHandle:r.sourceHandle,targetHandle:r.targetHandle,updatedAt:de.now()})}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(In.SAVE_FAILED)}},_6=async(e,t,n)=>{if(!C1({uid:e}))throw new Error(In.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:e,name:t||`Board ${n.length+1}`,createdAt:de.now(),isOpen:!1};return console.log("Creating board:",r),await py(vl(Vi,Jn.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},v6=async e=>{if(!e)throw new Error("Board ID is required for deletion");try{await hD(vl(Vi,Jn.BOARDS,e)),console.log("Board deleted successfully")}catch(t){throw console.error("Error deleting board:",t),t.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):t}},Uo=async(e,t)=>{if(!e||!t)throw new Error("Board ID and updates are required");try{const n={...t,updatedAt:de.now()};await py(vl(Vi,Jn.BOARDS,e),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},E6=(e,t={})=>{const[n,r,a]=d6([]),[l,c,d]=g6([]),[g,m]=et.useState(!0),[y,v]=et.useState(!1),[w,S]=et.useState(!1),[O,L]=et.useState([]),[k,B]=et.useState(null),[G,Q]=et.useState(null),{showSuccess:q,showError:X,showInfo:rt}=t,M=D=>{const $=D.find(C=>C.isOpen===!0);if($)return $;if(D.length>0){const C={...D[0],isOpen:!0};return Uo(C.id,C).catch(console.error),C}return null};et.useEffect(()=>{(async()=>{if(e)try{m(!0);const $=await m6(e.uid);L($);const C=$.some(N=>N.isFallback);C&&X&&X("Database index missing. Please create the required Firestore index. Check console for details.");const F=M($);if(!F){console.error("No board found for user"),X&&X("No boards found. Creating a default board..."),r(Jo),c(tl);return}B(F);const[J,Y]=await Promise.all([Mw(F.id),Vw(F.id)]);r(J),c(Y),rt&&!C&&rt("Board loaded successfully!")}catch($){console.error("Error loading initial data:",$),X&&X("Failed to load board data. Using default board."),r(Jo),c(tl)}finally{m(!1)}})()},[e,r,c]);const b=et.useCallback(async(D,$,C)=>{G&&clearTimeout(G);const F=setTimeout(async()=>{try{S(!0);const J=[];$&&$.length>0&&J.push(p6(D,$)),C&&C.length>0&&J.push(y6(D,C)),J.length>0&&(await Promise.all(J),console.log("Auto-save completed successfully"))}catch(J){console.error("Auto-save failed:",J),X&&X("Failed to save changes automatically")}finally{S(!1),Q(null)}},1e3);Q(F)},[G,X]);et.useEffect(()=>(!g&&k&&!y&&!k.isFallback&&b(k.id,n,l),()=>{G&&clearTimeout(G)}),[n,l,g,k,y,b,G]);const R=et.useCallback(async D=>{try{if(k?.id===D)return;if(k?.isFallback||O.find(C=>C.id===D)?.isFallback){X&&X("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(v(!0),k&&!k.isFallback){const C={...k,isOpen:!1};await Uo(k.id,C),L(F=>F.map(J=>J.id===k.id?C:J))}const $=O.find(C=>C.id===D);if($){const C={...$,isOpen:!0};await Uo(D,C),B(C),L(Y=>Y.map(N=>N.id===D?C:N));const[F,J]=await Promise.all([Mw(D),Vw(D)]);r(F),c(J),q&&q(`Switched to "${C.name}"`)}else console.error("Board not found:",D),X&&X("Board not found")}catch($){console.error("Error switching board:",$),X&&X("Failed to switch board. Please try again.")}finally{v(!1)}},[k,O,r,c,q,X]),V=et.useCallback(async()=>{try{if(!e)return X&&X("You must be logged in to create a board"),null;rt&&rt("Creating new board..."),console.log("Creating new board for user:",e.uid),console.log("Current boards count:",O.length);const D=await _6(e.uid,null,O);if(D){if(console.log("Board created successfully:",D),k&&!k.isFallback){const C={...k,isOpen:!1};Uo(k.id,C).catch(console.error)}const $={...D,isOpen:!0};return L(C=>{const F=C.map(J=>J.id===k?.id?{...J,isOpen:!1}:J);return[$,...F]}),B($),Uo(D.id,$).catch(console.error),r(Jo),c(tl),q&&q("New board created and opened!"),$}else return X&&X("Failed to create board. Please try again."),null}catch(D){return console.error("Error creating new board:",D),X&&X(`Failed to create board: ${D.message}`),null}},[e,O,k,q,X,rt,r,c]),P=et.useCallback(async D=>{try{if(O.length<=1){X&&X("Cannot delete the last board!");return}if(!O.find(C=>C.id===D)){console.error("Board not found for deletion"),X&&X("Board not found");return}if(rt&&rt("Deleting board..."),k?.id===D){const C=O.find(F=>F.id!==D);C&&await R(C.id)}await v6(D),L(C=>C.filter(F=>F.id!==D)),q&&q("Board deleted successfully!")}catch($){console.error("Error deleting board:",$),X&&X("Failed to delete board. Please try again.")}},[O,k,R,q,X,rt]),U=et.useCallback(async D=>{if(k&&k.name!==D){const $={...k,name:D};B($),L(C=>C.map(F=>F.id===k.id?$:F));try{await Uo(k.id,$),console.log("Board name updated successfully")}catch(C){console.error("Error updating board name:",C)}}},[k]),x=et.useCallback(()=>{G&&(clearTimeout(G),Q(null)),L([]),B(null),r([]),c([]),m(!0),v(!1),S(!1)},[r,c,G]);return{nodes:n,edges:l,allBoards:O,currentBoard:k,isLoading:g,isSwitchingBoard:y,isSaving:w,onNodesChange:a,onEdgesChange:d,switchToBoard:R,createNewBoard:V,deleteBoard:P,updateBoardName:U,clearBoardState:x}},T6=({allBoards:e,currentBoard:t,createNewBoard:n,switchToBoard:r})=>{et.useEffect(()=>{const a=l=>{if((l.ctrlKey||l.metaKey)&&l.key==="n"&&(l.preventDefault(),n()),(l.ctrlKey||l.metaKey)&&l.key>="1"&&l.key<="9"){l.preventDefault();const c=parseInt(l.key)-1;e[c]&&e[c].id!==t?.id&&r(e[c].id)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,t,n,r])},w6=()=>{const[e,t]=et.useState([]),n=et.useCallback(m=>{const y=Date.now().toString(),v={id:y,timestamp:new Date,...m};return t(w=>[...w,v]),m.autoRemove!==!1&&setTimeout(()=>{r(y)},m.duration||5e3),y},[]),r=et.useCallback(m=>{t(y=>y.filter(v=>v.id!==m))},[]),a=et.useCallback(()=>{t([])},[]),l=et.useCallback((m,y={})=>n({type:"success",message:m,...y}),[n]),c=et.useCallback((m,y={})=>n({type:"error",message:m,duration:7e3,...y}),[n]),d=et.useCallback((m,y={})=>n({type:"info",message:m,...y}),[n]),g=et.useCallback((m,y={})=>n({type:"warning",message:m,duration:6e3,...y}),[n]);return{notifications:e,addNotification:n,removeNotification:r,clearAllNotifications:a,showSuccess:l,showError:c,showInfo:d,showWarning:g}},N1=et.createContext(void 0),S6=({children:e})=>{const[t,n]=et.useState("word"),r=et.useCallback(()=>{n(c=>c==="word"?"concept":"word")},[]),a=et.useCallback(c=>{n(c)},[]),l=et.useMemo(()=>({mode:t,toggleMode:r,setMode:a}),[t,r,a]);return Ge.jsx(N1.Provider,{value:l,children:e})},A6=()=>{const e=et.useContext(N1);if(e===void 0)throw new Error("useMode must be used within a ModeProvider");return e};function b6(){const{user:e}=OM(),{mode:t,toggleMode:n}=A6(),{showSuccess:r,showError:a,showInfo:l}=w6(),{allBoards:c,currentBoard:d,onEdgesChange:g,switchToBoard:m,createNewBoard:y}=E6(e,{showSuccess:r,showError:a,showInfo:l});return T6({allBoards:c,currentBoard:d,createNewBoard:y,switchToBoard:m}),et.useCallback(v=>{const w={id:`e${v.source}-${v.target}`,source:v.source,target:v.target,sourceHandle:v.sourceHandle,targetHandle:v.targetHandle};g([{type:"add",item:w}])},[g]),e?Ge.jsx(Ge.Fragment,{children:Ge.jsx("div",{style:{width:"100vw",height:"100vh"}})}):Ge.jsx(xM,{})}function R6(){return Ge.jsx(S6,{children:Ge.jsx(b6,{})})}const x1=document.getElementById("root");if(!x1)throw new Error("Failed to find the root element");uI.createRoot(x1).render(Ge.jsx(et.StrictMode,{children:Ge.jsx(R6,{})}));
