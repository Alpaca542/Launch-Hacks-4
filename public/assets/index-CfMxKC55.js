function rN(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function l1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nm={exports:{}},Bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function iN(){if(cE)return Bc;cE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Bc.Fragment=e,Bc.jsx=n,Bc.jsxs=n,Bc}var uE;function sN(){return uE||(uE=1,nm.exports=iN()),nm.exports}var S=sN(),rm={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE;function aN(){if(dE)return Ue;dE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,D={};function k(V,W,re){this.props=V,this.context=W,this.refs=D,this.updater=re||x}k.prototype.isReactComponent={},k.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function U(){}U.prototype=k.prototype;function H(V,W,re){this.props=V,this.context=W,this.refs=D,this.updater=re||x}var G=H.prototype=new U;G.constructor=H,R(G,k.prototype),G.isPureReactComponent=!0;var j=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function I(V,W,re,X,se,de){return re=de.ref,{$$typeof:t,type:V,key:W,ref:re!==void 0?re:null,props:de}}function T(V,W){return I(V.type,W,void 0,void 0,void 0,V.props)}function A(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function L(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(re){return W[re]})}var z=/\/+/g;function B(V,W){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):W.toString(36)}function N(){}function O(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(N,N):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function $(V,W,re,X,se){var de=typeof V;(de==="undefined"||de==="boolean")&&(V=null);var ue=!1;if(V===null)ue=!0;else switch(de){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(V.$$typeof){case t:case e:ue=!0;break;case y:return ue=V._init,$(ue(V._payload),W,re,X,se)}}if(ue)return se=se(V),ue=X===""?"."+B(V,0):X,j(se)?(re="",ue!=null&&(re=ue.replace(z,"$&/")+"/"),$(se,W,re,"",function(Ae){return Ae})):se!=null&&(A(se)&&(se=T(se,re+(se.key==null||V&&V.key===se.key?"":(""+se.key).replace(z,"$&/")+"/")+ue)),W.push(se)),1;ue=0;var ve=X===""?".":X+":";if(j(V))for(var _e=0;_e<V.length;_e++)X=V[_e],de=ve+B(X,_e),ue+=$(X,W,re,de,se);else if(_e=b(V),typeof _e=="function")for(V=_e.call(V),_e=0;!(X=V.next()).done;)X=X.value,de=ve+B(X,_e++),ue+=$(X,W,re,de,se);else if(de==="object"){if(typeof V.then=="function")return $(O(V),W,re,X,se);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ue}function M(V,W,re){if(V==null)return V;var X=[],se=0;return $(V,X,"","",function(de){return W.call(re,de,se++)}),X}function K(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(re){(V._status===0||V._status===-1)&&(V._status=1,V._result=re)},function(re){(V._status===0||V._status===-1)&&(V._status=2,V._result=re)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var te=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function J(){}return Ue.Children={map:M,forEach:function(V,W,re){M(V,function(){W.apply(this,arguments)},re)},count:function(V){var W=0;return M(V,function(){W++}),W},toArray:function(V){return M(V,function(W){return W})||[]},only:function(V){if(!A(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ue.Component=k,Ue.Fragment=n,Ue.Profiler=a,Ue.PureComponent=H,Ue.StrictMode=i,Ue.Suspense=f,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(V){return Q.H.useMemoCache(V)}},Ue.cache=function(V){return function(){return V.apply(null,arguments)}},Ue.cloneElement=function(V,W,re){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var X=R({},V.props),se=V.key,de=void 0;if(W!=null)for(ue in W.ref!==void 0&&(de=void 0),W.key!==void 0&&(se=""+W.key),W)!Y.call(W,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&W.ref===void 0||(X[ue]=W[ue]);var ue=arguments.length-2;if(ue===1)X.children=re;else if(1<ue){for(var ve=Array(ue),_e=0;_e<ue;_e++)ve[_e]=arguments[_e+2];X.children=ve}return I(V.type,se,void 0,void 0,de,X)},Ue.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ue.createElement=function(V,W,re){var X,se={},de=null;if(W!=null)for(X in W.key!==void 0&&(de=""+W.key),W)Y.call(W,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(se[X]=W[X]);var ue=arguments.length-2;if(ue===1)se.children=re;else if(1<ue){for(var ve=Array(ue),_e=0;_e<ue;_e++)ve[_e]=arguments[_e+2];se.children=ve}if(V&&V.defaultProps)for(X in ue=V.defaultProps,ue)se[X]===void 0&&(se[X]=ue[X]);return I(V,de,void 0,void 0,null,se)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(V){return{$$typeof:d,render:V}},Ue.isValidElement=A,Ue.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:K}},Ue.memo=function(V,W){return{$$typeof:p,type:V,compare:W===void 0?null:W}},Ue.startTransition=function(V){var W=Q.T,re={};Q.T=re;try{var X=V(),se=Q.S;se!==null&&se(re,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(J,te)}catch(de){te(de)}finally{Q.T=W}},Ue.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ue.use=function(V){return Q.H.use(V)},Ue.useActionState=function(V,W,re){return Q.H.useActionState(V,W,re)},Ue.useCallback=function(V,W){return Q.H.useCallback(V,W)},Ue.useContext=function(V){return Q.H.useContext(V)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(V,W){return Q.H.useDeferredValue(V,W)},Ue.useEffect=function(V,W,re){var X=Q.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(V,W)},Ue.useId=function(){return Q.H.useId()},Ue.useImperativeHandle=function(V,W,re){return Q.H.useImperativeHandle(V,W,re)},Ue.useInsertionEffect=function(V,W){return Q.H.useInsertionEffect(V,W)},Ue.useLayoutEffect=function(V,W){return Q.H.useLayoutEffect(V,W)},Ue.useMemo=function(V,W){return Q.H.useMemo(V,W)},Ue.useOptimistic=function(V,W){return Q.H.useOptimistic(V,W)},Ue.useReducer=function(V,W,re){return Q.H.useReducer(V,W,re)},Ue.useRef=function(V){return Q.H.useRef(V)},Ue.useState=function(V){return Q.H.useState(V)},Ue.useSyncExternalStore=function(V,W,re){return Q.H.useSyncExternalStore(V,W,re)},Ue.useTransition=function(){return Q.H.useTransition()},Ue.version="19.1.0",Ue}var hE;function Mu(){return hE||(hE=1,rm.exports=aN()),rm.exports}var q=Mu();const fe=l1(q),oN=rN({__proto__:null,default:fe},[q]);var im={exports:{}},jc={},sm={exports:{}},am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function lN(){return fE||(fE=1,function(t){function e(M,K){var te=M.length;M.push(K);e:for(;0<te;){var J=te-1>>>1,V=M[J];if(0<a(V,K))M[J]=K,M[te]=V,te=J;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var K=M[0],te=M.pop();if(te!==K){M[0]=te;e:for(var J=0,V=M.length,W=V>>>1;J<W;){var re=2*(J+1)-1,X=M[re],se=re+1,de=M[se];if(0>a(X,te))se<V&&0>a(de,X)?(M[J]=de,M[se]=te,J=se):(M[J]=X,M[re]=te,J=re);else if(se<V&&0>a(de,te))M[J]=de,M[se]=te,J=se;else break e}}return K}function a(M,K){var te=M.sortIndex-K.sortIndex;return te!==0?te:M.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],p=[],y=1,_=null,b=3,x=!1,R=!1,D=!1,k=!1,U=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function j(M){for(var K=n(p);K!==null;){if(K.callback===null)i(p);else if(K.startTime<=M)i(p),K.sortIndex=K.expirationTime,e(f,K);else break;K=n(p)}}function Q(M){if(D=!1,j(M),!R)if(n(f)!==null)R=!0,Y||(Y=!0,B());else{var K=n(p);K!==null&&$(Q,K.startTime-M)}}var Y=!1,I=-1,T=5,A=-1;function L(){return k?!0:!(t.unstable_now()-A<T)}function z(){if(k=!1,Y){var M=t.unstable_now();A=M;var K=!0;try{e:{R=!1,D&&(D=!1,H(I),I=-1),x=!0;var te=b;try{t:{for(j(M),_=n(f);_!==null&&!(_.expirationTime>M&&L());){var J=_.callback;if(typeof J=="function"){_.callback=null,b=_.priorityLevel;var V=J(_.expirationTime<=M);if(M=t.unstable_now(),typeof V=="function"){_.callback=V,j(M),K=!0;break t}_===n(f)&&i(f),j(M)}else i(f);_=n(f)}if(_!==null)K=!0;else{var W=n(p);W!==null&&$(Q,W.startTime-M),K=!1}}break e}finally{_=null,b=te,x=!1}K=void 0}}finally{K?B():Y=!1}}}var B;if(typeof G=="function")B=function(){G(z)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,O=N.port2;N.port1.onmessage=z,B=function(){O.postMessage(null)}}else B=function(){U(z,0)};function $(M,K){I=U(function(){M(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(M){switch(b){case 1:case 2:case 3:var K=3;break;default:K=b}var te=b;b=K;try{return M()}finally{b=te}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(M,K){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var te=b;b=M;try{return K()}finally{b=te}},t.unstable_scheduleCallback=function(M,K,te){var J=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?J+te:J):te=J,M){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=te+V,M={id:y++,callback:K,priorityLevel:M,startTime:te,expirationTime:V,sortIndex:-1},te>J?(M.sortIndex=te,e(p,M),n(f)===null&&M===n(p)&&(D?(H(I),I=-1):D=!0,$(Q,te-J))):(M.sortIndex=V,e(f,M),R||x||(R=!0,Y||(Y=!0,B()))),M},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(M){var K=b;return function(){var te=b;b=K;try{return M.apply(this,arguments)}finally{b=te}}}}(am)),am}var gE;function cN(){return gE||(gE=1,sm.exports=lN()),sm.exports}var om={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function uN(){if(pE)return bn;pE=1;var t=Mu();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(f,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:f,containerInfo:p,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,y)},bn.flushSync=function(f){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=y,i.d.f()}},bn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var y=p.as,_=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:x}):y==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},bn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=d(y,p.crossOrigin);i.d.L(f,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bn.preloadModule=function(f,p){if(typeof f=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,p){return f(p)},bn.useFormState=function(f,p,y){return c.H.useFormState(f,p,y)},bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},bn.version="19.1.0",bn}var mE;function c1(){if(mE)return om.exports;mE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),om.exports=uN(),om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function dN(){if(yE)return jc;yE=1;var t=cN(),e=Mu(),n=c1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var g=o.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===o)return d(g),r;if(m===u)return d(g),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=g,u=m;else{for(var w=!1,C=g.child;C;){if(C===o){w=!0,o=g,u=m;break}if(C===u){w=!0,u=g,o=m;break}C=C.sibling}if(!w){for(C=m.child;C;){if(C===o){w=!0,o=m,u=g;break}if(C===u){w=!0,u=m,o=g;break}C=C.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),G=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function O(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case k:return"Profiler";case D:return"StrictMode";case Q:return"Suspense";case Y:return"SuspenseList";case A:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case G:return(r.displayName||"Context")+".Provider";case H:return(r._context.displayName||"Context")+".Consumer";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case I:return s=r.displayName||null,s!==null?s:O(r.type)||"Memo";case T:s=r._payload,r=r._init;try{return O(r(s))}catch{}}return null}var $=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},J=[],V=-1;function W(r){return{current:r}}function re(r){0>V||(r.current=J[V],J[V]=null,V--)}function X(r,s){V++,J[V]=r.current,r.current=s}var se=W(null),de=W(null),ue=W(null),ve=W(null);function _e(r,s){switch(X(ue,s),X(de,r),X(se,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Lb(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Lb(s),r=zb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(se),X(se,r)}function Ae(){re(se),re(de),re(ue)}function Ne(r){r.memoizedState!==null&&X(ve,r);var s=se.current,o=zb(s,r.type);s!==o&&(X(de,r),X(se,o))}function et(r){de.current===r&&(re(se),re(de)),ve.current===r&&(re(ve),Pc._currentValue=te)}var rt=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,it=t.unstable_shouldYield,Lt=t.unstable_requestPaint,ze=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,At=t.unstable_ImmediatePriority,vn=t.unstable_UserBlockingPriority,Gt=t.unstable_NormalPriority,Fn=t.unstable_LowPriority,An=t.unstable_IdlePriority,Rn=t.log,Cr=t.unstable_setDisableYieldValue,at=null,Fe=null;function zt(r){if(typeof Rn=="function"&&Cr(r),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(at,r)}catch{}}var Et=Math.clz32?Math.clz32:Jt,Fr=Math.log,Ut=Math.LN2;function Jt(r){return r>>>=0,r===0?32:31-(Fr(r)/Ut|0)|0}var Nn=256,Cn=4194304;function en(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function cn(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var g=0,m=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~m,u!==0?g=en(u):(w&=C,w!==0?g=en(w):o||(o=C&~r,o!==0&&(g=en(o))))):(C=u&~m,C!==0?g=en(C):w!==0?g=en(w):o||(o=u&~r,o!==0&&(g=en(o)))),g===0?0:s!==0&&s!==g&&(s&m)===0&&(m=g&-g,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:g}function In(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function xi(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ti(){var r=Nn;return Nn<<=1,(Nn&4194048)===0&&(Nn=256),r}function Ir(){var r=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),r}function Gn(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ur(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Yn(r,s,o,u,g,m){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,F=r.expirationTimes,ae=r.hiddenUpdates;for(o=w&~o;0<o;){var he=31-Et(o),pe=1<<he;C[he]=0,F[he]=-1;var oe=ae[he];if(oe!==null)for(ae[he]=null,he=0;he<oe.length;he++){var le=oe[he];le!==null&&(le.lane&=-536870913)}o&=~pe}u!==0&&dr(r,u,0),m!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=m&~(w&~s))}function dr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Et(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function la(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-Et(o),g=1<<u;g&s|r[u]&s&&(r[u]|=s),o&=~g}}function Gr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ss(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Yr(){var r=K.p;return r!==0?r:(r=window.event,r===void 0?32:rE(r.type))}function ao(r,s){var o=K.p;try{return K.p=r,s()}finally{K.p=o}}var mt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+mt,Rt="__reactProps$"+mt,Vn="__reactContainer$"+mt,ca="__reactEvents$"+mt,jl="__reactListeners$"+mt,Kr="__reactHandles$"+mt,oo="__reactResources$"+mt,Si="__reactMarker$"+mt;function Xr(r){delete r[Mt],delete r[Rt],delete r[ca],delete r[jl],delete r[Kr]}function hr(r){var s=r[Mt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Vn]||o[Mt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Hb(r);r!==null;){if(o=r[Mt])return o;r=Hb(r)}return s}r=o,o=r.parentNode}return null}function fr(r){if(r=r[Mt]||r[Vn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function gr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function un(r){var s=r[oo];return s||(s=r[oo]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(r){r[Si]=!0}var ua=new Set,as={};function Kn(r,s){kr(r,s),kr(r+"Capture",s)}function kr(r,s){for(as[r]=s,r=0;r<s.length;r++)ua.add(s[r])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lo={},Ai={};function co(r){return rt.call(Ai,r)?!0:rt.call(lo,r)?!1:da.test(r)?Ai[r]=!0:(lo[r]=!0,!1)}function Qr(r,s,o){if(co(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function pr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Wr,uo;function Dr(r){if(Wr===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Wr=s&&s[1]||"",uo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wr+r+uo}var os=!1;function Zr(r,s){if(!r||os)return"";os=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var oe=le}Reflect.construct(r,[],pe)}else{try{pe.call()}catch(le){oe=le}r.call(pe.prototype)}}else{try{throw Error()}catch(le){oe=le}(pe=r())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&oe&&typeof le.stack=="string")return[le.stack,oe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),w=m[0],C=m[1];if(w&&C){var F=w.split(`
`),ae=C.split(`
`);for(g=u=0;u<F.length&&!F[u].includes("DetermineComponentFrameRoot");)u++;for(;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;if(u===F.length||g===ae.length)for(u=F.length-1,g=ae.length-1;1<=u&&0<=g&&F[u]!==ae[g];)g--;for(;1<=u&&0<=g;u--,g--)if(F[u]!==ae[g]){if(u!==1||g!==1)do if(u--,g--,0>g||F[u]!==ae[g]){var he=`
`+F[u].replace(" at new "," at ");return r.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",r.displayName)),he}while(1<=u&&0<=g);break}}}finally{os=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Dr(o):""}function Hl(r){switch(r.tag){case 26:case 27:case 5:return Dr(r.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 15:return Zr(r.type,!1);case 11:return Zr(r.type.render,!1);case 1:return Zr(r.type,!0);case 31:return Dr("Activity");default:return""}}function ho(r){try{var s="";do s+=Hl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function kn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ql(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ag(r){var s=ql(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var g=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return g.call(this)},set:function(w){u=""+w,m.call(this,w)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function fo(r){r._valueTracker||(r._valueTracker=ag(r))}function $l(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=ql(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function ha(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var og=/[\n"\\]/g;function Bt(r){return r.replace(og,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xn(r,s,o,u,g,m,w,C){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+kn(s)):r.value!==""+kn(s)&&(r.value=""+kn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?ls(r,w,kn(s)):o!=null?ls(r,w,kn(o)):u!=null&&r.removeAttribute("value"),g==null&&m!=null&&(r.defaultChecked=!!m),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+kn(C):r.removeAttribute("name")}function fa(r,s,o,u,g,m,w,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+kn(o):"",s=s!=null?""+kn(s):o,C||s===r.value||(r.value=s),r.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function ls(r,s,o){s==="number"&&ha(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ri(r,s,o,u){if(r=r.options,s){s={};for(var g=0;g<o.length;g++)s["$"+o[g]]=!0;for(o=0;o<r.length;o++)g=s.hasOwnProperty("$"+r[o].value),r[o].selected!==g&&(r[o].selected=g),g&&u&&(r[o].defaultSelected=!0)}else{for(o=""+kn(o),s=null,g=0;g<r.length;g++){if(r[g].value===o){r[g].selected=!0,u&&(r[g].defaultSelected=!0);return}s!==null||r[g].disabled||(s=r[g])}s!==null&&(s.selected=!0)}}function dt(r,s,o){if(s!=null&&(s=""+kn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+kn(o):""}function ga(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if($(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=kn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function mr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qu(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||pa.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Fl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&o[g]!==u&&Qu(r,g,u)}else for(var m in s)s.hasOwnProperty(m)&&Qu(r,m,s[m])}function Gl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function go(r){return cg.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ni=null;function yr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ci=null,Ii=null;function Yl(r){var s=fr(r);if(s&&(r=s.stateNode)){var o=r[Rt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Xn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Bt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var g=u[Rt]||null;if(!g)throw Error(i(90));Xn(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&$l(u)}break e;case"textarea":dt(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Ri(r,!!o.multiple,s,!1)}}}var Jr=!1;function Wu(r,s,o){if(Jr)return r(s,o);Jr=!0;try{var u=r(s);return u}finally{if(Jr=!1,(Ci!==null||Ii!==null)&&($d(),Ci&&(s=Ci,r=Ii,Ii=Ci=null,Yl(s),r)))for(s=0;s<r.length;s++)Yl(r[s])}}function ma(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Rt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vr=!1;if(Mr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){vr=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{vr=!1}var ei=null,cs=null,ki=null;function Kl(){if(ki)return ki;var r,s=cs,o=s.length,u,g="value"in ei?ei.value:ei.textContent,m=g.length;for(r=0;r<o&&s[r]===g[r];r++);var w=o-r;for(u=1;u<=w&&s[o-u]===g[m-u];u++);return ki=g.slice(r,1<u?1-u:void 0)}function ti(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ni(){return!0}function Xl(){return!1}function tn(r){function s(o,u,g,m,w){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ni:Xl,this.isPropagationStopped=Xl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),s}var ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=tn(ot),va=y({},ot,{view:0,detail:0}),Zu=tn(va),mo,yo,ri,_a=y({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ri&&(ri&&r.type==="mousemove"?(mo=r.screenX-ri.screenX,yo=r.screenY-ri.screenY):yo=mo=0,ri=r),mo)},movementY:function(r){return"movementY"in r?r.movementY:yo}}),_r=tn(_a),Ju=y({},_a,{dataTransfer:0}),ug=tn(Ju),ba=y({},va,{relatedTarget:0}),vo=tn(ba),Ql=y({},ot,{animationName:0,elapsedTime:0,pseudoElement:0}),_o=tn(Ql),ed=y({},ot,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),bo=tn(ed),dg=y({},ot,{data:0}),Wl=tn(dg),Ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},td={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=nd[r])?!!s[r]:!1}function wa(){return Zl}var rd=y({},va,{key:function(r){if(r.key){var s=Ea[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=ti(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?td[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(r){return r.type==="keypress"?ti(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ti(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Eo=tn(rd),id=y({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=tn(id),Di=y({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),sd=tn(Di),ad=y({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0}),od=tn(ad),ld=y({},_a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),wo=tn(ld),Dn=y({},ot,{newState:0,oldState:0}),cd=tn(Dn),ud=[9,13,27,32],ii=Mr&&"CompositionEvent"in window,h=null;Mr&&"documentMode"in document&&(h=document.documentMode);var v=Mr&&"TextEvent"in window&&!h,E=Mr&&(!ii||h&&8<h&&11>=h),P=" ",ne=!1;function ce(r,s){switch(r){case"keyup":return ud.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Qe=!1;function Kt(r,s){switch(r){case"compositionend":return be(s);case"keypress":return s.which!==32?null:(ne=!0,P);case"textInput":return r=s.data,r===P&&ne?null:r;default:return null}}function We(r,s){if(Qe)return r==="compositionend"||!ii&&ce(r,s)?(r=Kl(),ki=cs=ei=null,Qe=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!nn[r.type]:s==="textarea"}function Mi(r,s,o,u){Ci?Ii?Ii.push(u):Ii=[u]:Ci=u,s=Qd(s,"onChange"),0<s.length&&(o=new po("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var dn=null,si=null;function ec(r){Db(r,0)}function dd(r){var s=gr(r);if($l(s))return r}function Jy(r,s){if(r==="change")return s}var ev=!1;if(Mr){var hg;if(Mr){var fg="oninput"in document;if(!fg){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),fg=typeof tv.oninput=="function"}hg=fg}else hg=!1;ev=hg&&(!document.documentMode||9<document.documentMode)}function nv(){dn&&(dn.detachEvent("onpropertychange",rv),si=dn=null)}function rv(r){if(r.propertyName==="value"&&dd(si)){var s=[];Mi(s,si,r,yr(r)),Wu(ec,s)}}function M2(r,s,o){r==="focusin"?(nv(),dn=s,si=o,dn.attachEvent("onpropertychange",rv)):r==="focusout"&&nv()}function O2(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return dd(si)}function P2(r,s){if(r==="click")return dd(s)}function V2(r,s){if(r==="input"||r==="change")return dd(s)}function L2(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qn=typeof Object.is=="function"?Object.is:L2;function tc(r,s){if(Qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!rt.call(s,g)||!Qn(r[g],s[g]))return!1}return!0}function iv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function sv(r,s){var o=iv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=iv(o)}}function av(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?av(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function ov(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=ha(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=ha(r.document)}return s}function gg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var z2=Mr&&"documentMode"in document&&11>=document.documentMode,xo=null,pg=null,nc=null,mg=!1;function lv(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;mg||xo==null||xo!==ha(u)||(u=xo,"selectionStart"in u&&gg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),nc&&tc(nc,u)||(nc=u,u=Qd(pg,"onSelect"),0<u.length&&(s=new po("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=xo)))}function xa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var To={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},yg={},cv={};Mr&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Ta(r){if(yg[r])return yg[r];if(!To[r])return r;var s=To[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in cv)return yg[r]=s[o];return r}var uv=Ta("animationend"),dv=Ta("animationiteration"),hv=Ta("animationstart"),U2=Ta("transitionrun"),B2=Ta("transitionstart"),j2=Ta("transitioncancel"),fv=Ta("transitionend"),gv=new Map,vg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vg.push("scrollEnd");function Or(r,s){gv.set(r,s),Kn(s,[r])}var pv=new WeakMap;function br(r,s){if(typeof r=="object"&&r!==null){var o=pv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:ho(s)},pv.set(r,s),s)}return{value:r,source:s,stack:ho(s)}}var Er=[],So=0,_g=0;function hd(){for(var r=So,s=_g=So=0;s<r;){var o=Er[s];Er[s++]=null;var u=Er[s];Er[s++]=null;var g=Er[s];Er[s++]=null;var m=Er[s];if(Er[s++]=null,u!==null&&g!==null){var w=u.pending;w===null?g.next=g:(g.next=w.next,w.next=g),u.pending=g}m!==0&&mv(o,g,m)}}function fd(r,s,o,u){Er[So++]=r,Er[So++]=s,Er[So++]=o,Er[So++]=u,_g|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function bg(r,s,o,u){return fd(r,s,o,u),gd(r)}function Ao(r,s){return fd(r,null,null,s),gd(r)}function mv(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var g=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(g=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,g&&s!==null&&(g=31-Et(o),r=m.hiddenUpdates,u=r[g],u===null?r[g]=[s]:u.push(s),s.lane=o|536870912),m):null}function gd(r){if(50<Rc)throw Rc=0,Ap=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Ro={};function H2(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,s,o,u){return new H2(r,s,o,u)}function Eg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Oi(r,s){var o=r.alternate;return o===null?(o=Wn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function yv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function pd(r,s,o,u,g,m){var w=0;if(u=r,typeof r=="function")Eg(r)&&(w=1);else if(typeof r=="string")w=$R(r,o,se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case A:return r=Wn(31,o,s,g),r.elementType=A,r.lanes=m,r;case R:return Sa(o.children,g,m,s);case D:w=8,g|=24;break;case k:return r=Wn(12,o,s,g|2),r.elementType=k,r.lanes=m,r;case Q:return r=Wn(13,o,s,g),r.elementType=Q,r.lanes=m,r;case Y:return r=Wn(19,o,s,g),r.elementType=Y,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case U:case G:w=10;break e;case H:w=9;break e;case j:w=11;break e;case I:w=14;break e;case T:w=16,u=null;break e}w=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Wn(w,o,s,g),s.elementType=r,s.type=u,s.lanes=m,s}function Sa(r,s,o,u){return r=Wn(7,r,u,s),r.lanes=o,r}function wg(r,s,o){return r=Wn(6,r,null,s),r.lanes=o,r}function xg(r,s,o){return s=Wn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var No=[],Co=0,md=null,yd=0,wr=[],xr=0,Aa=null,Pi=1,Vi="";function Ra(r,s){No[Co++]=yd,No[Co++]=md,md=r,yd=s}function vv(r,s,o){wr[xr++]=Pi,wr[xr++]=Vi,wr[xr++]=Aa,Aa=r;var u=Pi;r=Vi;var g=32-Et(u)-1;u&=~(1<<g),o+=1;var m=32-Et(s)+g;if(30<m){var w=g-g%5;m=(u&(1<<w)-1).toString(32),u>>=w,g-=w,Pi=1<<32-Et(s)+g|o<<g|u,Vi=m+r}else Pi=1<<m|o<<g|u,Vi=r}function Tg(r){r.return!==null&&(Ra(r,1),vv(r,1,0))}function Sg(r){for(;r===md;)md=No[--Co],No[Co]=null,yd=No[--Co],No[Co]=null;for(;r===Aa;)Aa=wr[--xr],wr[xr]=null,Vi=wr[--xr],wr[xr]=null,Pi=wr[--xr],wr[xr]=null}var Mn=null,Nt=null,st=!1,Na=null,ai=!1,Ag=Error(i(519));function Ca(r){var s=Error(i(418,""));throw sc(br(s,r)),Ag}function _v(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Mt]=r,s[Rt]=u,o){case"dialog":Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":case"embed":Ye("load",s);break;case"video":case"audio":for(o=0;o<Cc.length;o++)Ye(Cc[o],s);break;case"source":Ye("error",s);break;case"img":case"image":case"link":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"input":Ye("invalid",s),fa(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),fo(s);break;case"select":Ye("invalid",s);break;case"textarea":Ye("invalid",s),ga(s,u.value,u.defaultValue,u.children),fo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Vb(s.textContent,o)?(u.popover!=null&&(Ye("beforetoggle",s),Ye("toggle",s)),u.onScroll!=null&&Ye("scroll",s),u.onScrollEnd!=null&&Ye("scrollend",s),u.onClick!=null&&(s.onclick=Wd),s=!0):s=!1,s||Ca(r)}function bv(r){for(Mn=r.return;Mn;)switch(Mn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Mn=Mn.return}}function rc(r){if(r!==Mn)return!1;if(!st)return bv(r),st=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Hp(r.type,r.memoizedProps)),o=!o),o&&Nt&&Ca(r),bv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){Nt=Vr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}Nt=null}}else s===27?(s=Nt,Ss(r.type)?(r=Gp,Gp=null,Nt=r):Nt=s):Nt=Mn?Vr(r.stateNode.nextSibling):null;return!0}function ic(){Nt=Mn=null,st=!1}function Ev(){var r=Na;return r!==null&&(Un===null?Un=r:Un.push.apply(Un,r),Na=null),r}function sc(r){Na===null?Na=[r]:Na.push(r)}var Rg=W(null),Ia=null,Li=null;function us(r,s,o){X(Rg,s._currentValue),s._currentValue=o}function zi(r){r._currentValue=Rg.current,re(Rg)}function Ng(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Cg(r,s,o,u){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var m=g.dependencies;if(m!==null){var w=g.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=g;for(var F=0;F<s.length;F++)if(C.context===s[F]){m.lanes|=o,C=m.alternate,C!==null&&(C.lanes|=o),Ng(m.return,o,r),u||(w=null);break e}m=C.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(i(341));w.lanes|=o,m=w.alternate,m!==null&&(m.lanes|=o),Ng(w,o,r),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===r){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function ac(r,s,o,u){r=null;for(var g=s,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var C=g.type;Qn(g.pendingProps.value,w.value)||(r!==null?r.push(C):r=[C])}}else if(g===ve.current){if(w=g.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Pc):r=[Pc])}g=g.return}r!==null&&Cg(s,r,o,u),s.flags|=262144}function vd(r){for(r=r.firstContext;r!==null;){if(!Qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ka(r){Ia=r,Li=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function _n(r){return wv(Ia,r)}function _d(r,s){return Ia===null&&ka(r),wv(r,s)}function wv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Li===null){if(r===null)throw Error(i(308));Li=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Li=Li.next=s;return o}var q2=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},$2=t.unstable_scheduleCallback,F2=t.unstable_NormalPriority,Qt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ig(){return{controller:new q2,data:new Map,refCount:0}}function oc(r){r.refCount--,r.refCount===0&&$2(F2,function(){r.controller.abort()})}var lc=null,kg=0,Io=0,ko=null;function G2(r,s){if(lc===null){var o=lc=[];kg=0,Io=Mp(),ko={status:"pending",value:void 0,then:function(u){o.push(u)}}}return kg++,s.then(xv,xv),s}function xv(){if(--kg===0&&lc!==null){ko!==null&&(ko.status="fulfilled");var r=lc;lc=null,Io=0,ko=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function Y2(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<o.length;g++)(0,o[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var Tv=M.S;M.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&G2(r,s),Tv!==null&&Tv(r,s)};var Da=W(null);function Dg(){var r=Da.current;return r!==null?r:yt.pooledCache}function bd(r,s){s===null?X(Da,Da.current):X(Da,s.pool)}function Sv(){var r=Dg();return r===null?null:{parent:Qt._currentValue,pool:r}}var cc=Error(i(460)),Av=Error(i(474)),Ed=Error(i(542)),Mg={then:function(){}};function Rv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function wd(){}function Nv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(wd,wd),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Iv(r),r;default:if(typeof s.status=="string")s.then(wd,wd);else{if(r=yt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Iv(r),r}throw uc=s,cc}}var uc=null;function Cv(){if(uc===null)throw Error(i(459));var r=uc;return uc=null,r}function Iv(r){if(r===cc||r===Ed)throw Error(i(483))}var ds=!1;function Og(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function hs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function fs(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=gd(r),mv(r,null,o),s}return fd(r,u,s,o),gd(r)}function dc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,la(r,o)}}function Vg(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?g=m=w:m=m.next=w,o=o.next}while(o!==null);m===null?g=m=s:m=m.next=s}else g=m=s;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Lg=!1;function hc(){if(Lg){var r=ko;if(r!==null)throw r}}function fc(r,s,o,u){Lg=!1;var g=r.updateQueue;ds=!1;var m=g.firstBaseUpdate,w=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var F=C,ae=F.next;F.next=null,w===null?m=ae:w.next=ae,w=F;var he=r.alternate;he!==null&&(he=he.updateQueue,C=he.lastBaseUpdate,C!==w&&(C===null?he.firstBaseUpdate=ae:C.next=ae,he.lastBaseUpdate=F))}if(m!==null){var pe=g.baseState;w=0,he=ae=F=null,C=m;do{var oe=C.lane&-536870913,le=oe!==C.lane;if(le?(Ze&oe)===oe:(u&oe)===oe){oe!==0&&oe===Io&&(Lg=!0),he!==null&&(he=he.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Oe=r,Ie=C;oe=s;var gt=o;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){pe=Oe.call(gt,pe,oe);break e}pe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,oe=typeof Oe=="function"?Oe.call(gt,pe,oe):Oe,oe==null)break e;pe=y({},pe,oe);break e;case 2:ds=!0}}oe=C.callback,oe!==null&&(r.flags|=64,le&&(r.flags|=8192),le=g.callbacks,le===null?g.callbacks=[oe]:le.push(oe))}else le={lane:oe,tag:C.tag,payload:C.payload,callback:C.callback,next:null},he===null?(ae=he=le,F=pe):he=he.next=le,w|=oe;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;le=C,C=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);he===null&&(F=pe),g.baseState=F,g.firstBaseUpdate=ae,g.lastBaseUpdate=he,m===null&&(g.shared.lanes=0),Es|=w,r.lanes=w,r.memoizedState=pe}}function kv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Dv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)kv(o[r],s)}var Do=W(null),xd=W(0);function Mv(r,s){r=Fi,X(xd,r),X(Do,s),Fi=r|s.baseLanes}function zg(){X(xd,Fi),X(Do,Do.current)}function Ug(){Fi=xd.current,re(Do),re(xd)}var gs=0,je=null,ht=null,jt=null,Td=!1,Mo=!1,Ma=!1,Sd=0,gc=0,Oo=null,K2=0;function Ot(){throw Error(i(321))}function Bg(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Qn(r[o],s[o]))return!1;return!0}function jg(r,s,o,u,g,m){return gs=m,je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=r===null||r.memoizedState===null?m_:y_,Ma=!1,m=o(u,g),Ma=!1,Mo&&(m=Pv(s,o,u,g)),Ov(r),m}function Ov(r){M.H=kd;var s=ht!==null&&ht.next!==null;if(gs=0,jt=ht=je=null,Td=!1,gc=0,Oo=null,s)throw Error(i(300));r===null||rn||(r=r.dependencies,r!==null&&vd(r)&&(rn=!0))}function Pv(r,s,o,u){je=r;var g=0;do{if(Mo&&(Oo=null),gc=0,Mo=!1,25<=g)throw Error(i(301));if(g+=1,jt=ht=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=tR,m=s(o,u)}while(Mo);return m}function X2(){var r=M.H,s=r.useState()[0];return s=typeof s.then=="function"?pc(s):s,r=r.useState()[0],(ht!==null?ht.memoizedState:null)!==r&&(je.flags|=1024),s}function Hg(){var r=Sd!==0;return Sd=0,r}function qg(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function $g(r){if(Td){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Td=!1}gs=0,jt=ht=je=null,Mo=!1,gc=Sd=0,Oo=null}function Ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?je.memoizedState=jt=r:jt=jt.next=r,jt}function Ht(){if(ht===null){var r=je.alternate;r=r!==null?r.memoizedState:null}else r=ht.next;var s=jt===null?je.memoizedState:jt.next;if(s!==null)jt=s,ht=r;else{if(r===null)throw je.alternate===null?Error(i(467)):Error(i(310));ht=r,r={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},jt===null?je.memoizedState=jt=r:jt=jt.next=r}return jt}function Fg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(r){var s=gc;return gc+=1,Oo===null&&(Oo=[]),r=Nv(Oo,r,s),s=je,(jt===null?s.memoizedState:jt.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?m_:y_),r}function Ad(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return pc(r);if(r.$$typeof===G)return _n(r)}throw Error(i(438,String(r)))}function Gg(r){var s=null,o=je.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Fg(),je.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=L;return s.index++,o}function Ui(r,s){return typeof s=="function"?s(r):s}function Rd(r){var s=Ht();return Yg(s,ht,r)}function Yg(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var g=r.baseQueue,m=u.pending;if(m!==null){if(g!==null){var w=g.next;g.next=m.next,m.next=w}s.baseQueue=g=m,u.pending=null}if(m=r.baseState,g===null)r.memoizedState=m;else{s=g.next;var C=w=null,F=null,ae=s,he=!1;do{var pe=ae.lane&-536870913;if(pe!==ae.lane?(Ze&pe)===pe:(gs&pe)===pe){var oe=ae.revertLane;if(oe===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),pe===Io&&(he=!0);else if((gs&oe)===oe){ae=ae.next,oe===Io&&(he=!0);continue}else pe={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},F===null?(C=F=pe,w=m):F=F.next=pe,je.lanes|=oe,Es|=oe;pe=ae.action,Ma&&o(m,pe),m=ae.hasEagerState?ae.eagerState:o(m,pe)}else oe={lane:pe,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},F===null?(C=F=oe,w=m):F=F.next=oe,je.lanes|=pe,Es|=pe;ae=ae.next}while(ae!==null&&ae!==s);if(F===null?w=m:F.next=C,!Qn(m,r.memoizedState)&&(rn=!0,he&&(o=ko,o!==null)))throw o;r.memoizedState=m,r.baseState=w,r.baseQueue=F,u.lastRenderedState=m}return g===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Kg(r){var s=Ht(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,g=o.pending,m=s.memoizedState;if(g!==null){o.pending=null;var w=g=g.next;do m=r(m,w.action),w=w.next;while(w!==g);Qn(m,s.memoizedState)||(rn=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Vv(r,s,o){var u=je,g=Ht(),m=st;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!Qn((ht||g).memoizedState,o);w&&(g.memoizedState=o,rn=!0),g=g.queue;var C=Uv.bind(null,u,g,r);if(mc(2048,8,C,[r]),g.getSnapshot!==s||w||jt!==null&&jt.memoizedState.tag&1){if(u.flags|=2048,Po(9,Nd(),zv.bind(null,u,g,o,s),null),yt===null)throw Error(i(349));m||(gs&124)!==0||Lv(u,s,o)}return o}function Lv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=je.updateQueue,s===null?(s=Fg(),je.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function zv(r,s,o,u){s.value=o,s.getSnapshot=u,Bv(s)&&jv(r)}function Uv(r,s,o){return o(function(){Bv(s)&&jv(r)})}function Bv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Qn(r,o)}catch{return!0}}function jv(r){var s=Ao(r,2);s!==null&&nr(s,r,2)}function Xg(r){var s=Ln();if(typeof r=="function"){var o=r;if(r=o(),Ma){zt(!0);try{o()}finally{zt(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:r},s}function Hv(r,s,o,u){return r.baseState=o,Yg(r,ht,typeof u=="function"?u:Ui)}function Q2(r,s,o,u,g){if(Id(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};M.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,qv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function qv(r,s){var o=s.action,u=s.payload,g=r.state;if(s.isTransition){var m=M.T,w={};M.T=w;try{var C=o(g,u),F=M.S;F!==null&&F(w,C),$v(r,s,C)}catch(ae){Qg(r,s,ae)}finally{M.T=m}}else try{m=o(g,u),$v(r,s,m)}catch(ae){Qg(r,s,ae)}}function $v(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Fv(r,s,u)},function(u){return Qg(r,s,u)}):Fv(r,s,o)}function Fv(r,s,o){s.status="fulfilled",s.value=o,Gv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,qv(r,o)))}function Qg(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Gv(s),s=s.next;while(s!==u)}r.action=null}function Gv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Yv(r,s){return s}function Kv(r,s){if(st){var o=yt.formState;if(o!==null){e:{var u=je;if(st){if(Nt){t:{for(var g=Nt,m=ai;g.nodeType!==8;){if(!m){g=null;break t}if(g=Vr(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Nt=Vr(g.nextSibling),u=g.data==="F!";break e}}Ca(u)}u=!1}u&&(s=o[0])}}return o=Ln(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yv,lastRenderedState:s},o.queue=u,o=f_.bind(null,je,u),u.dispatch=o,u=Xg(!1),m=tp.bind(null,je,!1,u.queue),u=Ln(),g={state:s,dispatch:null,action:r,pending:null},u.queue=g,o=Q2.bind(null,je,g,m,o),g.dispatch=o,u.memoizedState=r,[s,o,!1]}function Xv(r){var s=Ht();return Qv(s,ht,r)}function Qv(r,s,o){if(s=Yg(r,s,Yv)[0],r=Rd(Ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=pc(s)}catch(w){throw w===cc?Ed:w}else u=s;s=Ht();var g=s.queue,m=g.dispatch;return o!==s.memoizedState&&(je.flags|=2048,Po(9,Nd(),W2.bind(null,g,o),null)),[u,m,r]}function W2(r,s){r.action=s}function Wv(r){var s=Ht(),o=ht;if(o!==null)return Qv(s,o,r);Ht(),s=s.memoizedState,o=Ht();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Po(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=je.updateQueue,s===null&&(s=Fg(),je.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Nd(){return{destroy:void 0,resource:void 0}}function Zv(){return Ht().memoizedState}function Cd(r,s,o,u){var g=Ln();u=u===void 0?null:u,je.flags|=r,g.memoizedState=Po(1|s,Nd(),o,u)}function mc(r,s,o,u){var g=Ht();u=u===void 0?null:u;var m=g.memoizedState.inst;ht!==null&&u!==null&&Bg(u,ht.memoizedState.deps)?g.memoizedState=Po(s,m,o,u):(je.flags|=r,g.memoizedState=Po(1|s,m,o,u))}function Jv(r,s){Cd(8390656,8,r,s)}function e_(r,s){mc(2048,8,r,s)}function t_(r,s){return mc(4,2,r,s)}function n_(r,s){return mc(4,4,r,s)}function r_(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function i_(r,s,o){o=o!=null?o.concat([r]):null,mc(4,4,r_.bind(null,s,r),o)}function Wg(){}function s_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Bg(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function a_(r,s){var o=Ht();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Bg(s,u[1]))return u[0];if(u=r(),Ma){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u}function Zg(r,s,o){return o===void 0||(gs&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=cb(),je.lanes|=r,Es|=r,o)}function o_(r,s,o,u){return Qn(o,s)?o:Do.current!==null?(r=Zg(r,o,u),Qn(r,s)||(rn=!0),r):(gs&42)===0?(rn=!0,r.memoizedState=o):(r=cb(),je.lanes|=r,Es|=r,s)}function l_(r,s,o,u,g){var m=K.p;K.p=m!==0&&8>m?m:8;var w=M.T,C={};M.T=C,tp(r,!1,s,o);try{var F=g(),ae=M.S;if(ae!==null&&ae(C,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var he=Y2(F,u);yc(r,s,he,tr(r))}else yc(r,s,u,tr(r))}catch(pe){yc(r,s,{then:function(){},status:"rejected",reason:pe},tr())}finally{K.p=m,M.T=w}}function Z2(){}function Jg(r,s,o,u){if(r.tag!==5)throw Error(i(476));var g=c_(r).queue;l_(r,g,s,te,o===null?Z2:function(){return u_(r),o(u)})}function c_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:te},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function u_(r){var s=c_(r).next.queue;yc(r,s,{},tr())}function ep(){return _n(Pc)}function d_(){return Ht().memoizedState}function h_(){return Ht().memoizedState}function J2(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=tr();r=hs(o);var u=fs(s,r,o);u!==null&&(nr(u,s,o),dc(u,s,o)),s={cache:Ig()},r.payload=s;return}s=s.return}}function eR(r,s,o){var u=tr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Id(r)?g_(s,o):(o=bg(r,s,o,u),o!==null&&(nr(o,r,u),p_(o,s,u)))}function f_(r,s,o){var u=tr();yc(r,s,o,u)}function yc(r,s,o,u){var g={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Id(r))g_(s,g);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,C=m(w,o);if(g.hasEagerState=!0,g.eagerState=C,Qn(C,w))return fd(r,s,g,0),yt===null&&hd(),!1}catch{}finally{}if(o=bg(r,s,g,u),o!==null)return nr(o,r,u),p_(o,s,u),!0}return!1}function tp(r,s,o,u){if(u={lane:2,revertLane:Mp(),action:u,hasEagerState:!1,eagerState:null,next:null},Id(r)){if(s)throw Error(i(479))}else s=bg(r,o,u,2),s!==null&&nr(s,r,2)}function Id(r){var s=r.alternate;return r===je||s!==null&&s===je}function g_(r,s){Mo=Td=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function p_(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,la(r,o)}}var kd={readContext:_n,use:Ad,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot},m_={readContext:_n,use:Ad,useCallback:function(r,s){return Ln().memoizedState=[r,s===void 0?null:s],r},useContext:_n,useEffect:Jv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Cd(4194308,4,r_.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Cd(4194308,4,r,s)},useInsertionEffect:function(r,s){Cd(4,2,r,s)},useMemo:function(r,s){var o=Ln();s=s===void 0?null:s;var u=r();if(Ma){zt(!0);try{r()}finally{zt(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Ln();if(o!==void 0){var g=o(s);if(Ma){zt(!0);try{o(s)}finally{zt(!1)}}}else g=s;return u.memoizedState=u.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},u.queue=r,r=r.dispatch=eR.bind(null,je,r),[u.memoizedState,r]},useRef:function(r){var s=Ln();return r={current:r},s.memoizedState=r},useState:function(r){r=Xg(r);var s=r.queue,o=f_.bind(null,je,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Wg,useDeferredValue:function(r,s){var o=Ln();return Zg(o,r,s)},useTransition:function(){var r=Xg(!1);return r=l_.bind(null,je,r.queue,!0,!1),Ln().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=je,g=Ln();if(st){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),yt===null)throw Error(i(349));(Ze&124)!==0||Lv(u,s,o)}g.memoizedState=o;var m={value:o,getSnapshot:s};return g.queue=m,Jv(Uv.bind(null,u,m,r),[r]),u.flags|=2048,Po(9,Nd(),zv.bind(null,u,m,o,s),null),o},useId:function(){var r=Ln(),s=yt.identifierPrefix;if(st){var o=Vi,u=Pi;o=(u&~(1<<32-Et(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Sd++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=K2++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:ep,useFormState:Kv,useActionState:Kv,useOptimistic:function(r){var s=Ln();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=tp.bind(null,je,!0,o),o.dispatch=s,[r,s]},useMemoCache:Gg,useCacheRefresh:function(){return Ln().memoizedState=J2.bind(null,je)}},y_={readContext:_n,use:Ad,useCallback:s_,useContext:_n,useEffect:e_,useImperativeHandle:i_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:a_,useReducer:Rd,useRef:Zv,useState:function(){return Rd(Ui)},useDebugValue:Wg,useDeferredValue:function(r,s){var o=Ht();return o_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Rd(Ui)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:pc(r),s]},useSyncExternalStore:Vv,useId:d_,useHostTransitionStatus:ep,useFormState:Xv,useActionState:Xv,useOptimistic:function(r,s){var o=Ht();return Hv(o,ht,r,s)},useMemoCache:Gg,useCacheRefresh:h_},tR={readContext:_n,use:Ad,useCallback:s_,useContext:_n,useEffect:e_,useImperativeHandle:i_,useInsertionEffect:t_,useLayoutEffect:n_,useMemo:a_,useReducer:Kg,useRef:Zv,useState:function(){return Kg(Ui)},useDebugValue:Wg,useDeferredValue:function(r,s){var o=Ht();return ht===null?Zg(o,r,s):o_(o,ht.memoizedState,r,s)},useTransition:function(){var r=Kg(Ui)[0],s=Ht().memoizedState;return[typeof r=="boolean"?r:pc(r),s]},useSyncExternalStore:Vv,useId:d_,useHostTransitionStatus:ep,useFormState:Wv,useActionState:Wv,useOptimistic:function(r,s){var o=Ht();return ht!==null?Hv(o,ht,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Gg,useCacheRefresh:h_},Vo=null,vc=0;function Dd(r){var s=vc;return vc+=1,Vo===null&&(Vo=[]),Nv(Vo,r,s)}function _c(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Md(r,s){throw s.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function v_(r){var s=r._init;return s(r._payload)}function __(r){function s(ee,Z){if(r){var ie=ee.deletions;ie===null?(ee.deletions=[Z],ee.flags|=16):ie.push(Z)}}function o(ee,Z){if(!r)return null;for(;Z!==null;)s(ee,Z),Z=Z.sibling;return null}function u(ee){for(var Z=new Map;ee!==null;)ee.key!==null?Z.set(ee.key,ee):Z.set(ee.index,ee),ee=ee.sibling;return Z}function g(ee,Z){return ee=Oi(ee,Z),ee.index=0,ee.sibling=null,ee}function m(ee,Z,ie){return ee.index=ie,r?(ie=ee.alternate,ie!==null?(ie=ie.index,ie<Z?(ee.flags|=67108866,Z):ie):(ee.flags|=67108866,Z)):(ee.flags|=1048576,Z)}function w(ee){return r&&ee.alternate===null&&(ee.flags|=67108866),ee}function C(ee,Z,ie,ge){return Z===null||Z.tag!==6?(Z=wg(ie,ee.mode,ge),Z.return=ee,Z):(Z=g(Z,ie),Z.return=ee,Z)}function F(ee,Z,ie,ge){var Te=ie.type;return Te===R?he(ee,Z,ie.props.children,ge,ie.key):Z!==null&&(Z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&v_(Te)===Z.type)?(Z=g(Z,ie.props),_c(Z,ie),Z.return=ee,Z):(Z=pd(ie.type,ie.key,ie.props,null,ee.mode,ge),_c(Z,ie),Z.return=ee,Z)}function ae(ee,Z,ie,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ie.containerInfo||Z.stateNode.implementation!==ie.implementation?(Z=xg(ie,ee.mode,ge),Z.return=ee,Z):(Z=g(Z,ie.children||[]),Z.return=ee,Z)}function he(ee,Z,ie,ge,Te){return Z===null||Z.tag!==7?(Z=Sa(ie,ee.mode,ge,Te),Z.return=ee,Z):(Z=g(Z,ie),Z.return=ee,Z)}function pe(ee,Z,ie){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=wg(""+Z,ee.mode,ie),Z.return=ee,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return ie=pd(Z.type,Z.key,Z.props,null,ee.mode,ie),_c(ie,Z),ie.return=ee,ie;case x:return Z=xg(Z,ee.mode,ie),Z.return=ee,Z;case T:var ge=Z._init;return Z=ge(Z._payload),pe(ee,Z,ie)}if($(Z)||B(Z))return Z=Sa(Z,ee.mode,ie,null),Z.return=ee,Z;if(typeof Z.then=="function")return pe(ee,Dd(Z),ie);if(Z.$$typeof===G)return pe(ee,_d(ee,Z),ie);Md(ee,Z)}return null}function oe(ee,Z,ie,ge){var Te=Z!==null?Z.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Te!==null?null:C(ee,Z,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:return ie.key===Te?F(ee,Z,ie,ge):null;case x:return ie.key===Te?ae(ee,Z,ie,ge):null;case T:return Te=ie._init,ie=Te(ie._payload),oe(ee,Z,ie,ge)}if($(ie)||B(ie))return Te!==null?null:he(ee,Z,ie,ge,null);if(typeof ie.then=="function")return oe(ee,Z,Dd(ie),ge);if(ie.$$typeof===G)return oe(ee,Z,_d(ee,ie),ge);Md(ee,ie)}return null}function le(ee,Z,ie,ge,Te){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ee=ee.get(ie)||null,C(Z,ee,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case b:return ee=ee.get(ge.key===null?ie:ge.key)||null,F(Z,ee,ge,Te);case x:return ee=ee.get(ge.key===null?ie:ge.key)||null,ae(Z,ee,ge,Te);case T:var qe=ge._init;return ge=qe(ge._payload),le(ee,Z,ie,ge,Te)}if($(ge)||B(ge))return ee=ee.get(ie)||null,he(Z,ee,ge,Te,null);if(typeof ge.then=="function")return le(ee,Z,ie,Dd(ge),Te);if(ge.$$typeof===G)return le(ee,Z,ie,_d(Z,ge),Te);Md(Z,ge)}return null}function Oe(ee,Z,ie,ge){for(var Te=null,qe=null,Re=Z,ke=Z=0,an=null;Re!==null&&ke<ie.length;ke++){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var nt=oe(ee,Re,ie[ke],ge);if(nt===null){Re===null&&(Re=an);break}r&&Re&&nt.alternate===null&&s(ee,Re),Z=m(nt,Z,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt,Re=an}if(ke===ie.length)return o(ee,Re),st&&Ra(ee,ke),Te;if(Re===null){for(;ke<ie.length;ke++)Re=pe(ee,ie[ke],ge),Re!==null&&(Z=m(Re,Z,ke),qe===null?Te=Re:qe.sibling=Re,qe=Re);return st&&Ra(ee,ke),Te}for(Re=u(Re);ke<ie.length;ke++)an=le(Re,ee,ke,ie[ke],ge),an!==null&&(r&&an.alternate!==null&&Re.delete(an.key===null?ke:an.key),Z=m(an,Z,ke),qe===null?Te=an:qe.sibling=an,qe=an);return r&&Re.forEach(function(Is){return s(ee,Is)}),st&&Ra(ee,ke),Te}function Ie(ee,Z,ie,ge){if(ie==null)throw Error(i(151));for(var Te=null,qe=null,Re=Z,ke=Z=0,an=null,nt=ie.next();Re!==null&&!nt.done;ke++,nt=ie.next()){Re.index>ke?(an=Re,Re=null):an=Re.sibling;var Is=oe(ee,Re,nt.value,ge);if(Is===null){Re===null&&(Re=an);break}r&&Re&&Is.alternate===null&&s(ee,Re),Z=m(Is,Z,ke),qe===null?Te=Is:qe.sibling=Is,qe=Is,Re=an}if(nt.done)return o(ee,Re),st&&Ra(ee,ke),Te;if(Re===null){for(;!nt.done;ke++,nt=ie.next())nt=pe(ee,nt.value,ge),nt!==null&&(Z=m(nt,Z,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt);return st&&Ra(ee,ke),Te}for(Re=u(Re);!nt.done;ke++,nt=ie.next())nt=le(Re,ee,ke,nt.value,ge),nt!==null&&(r&&nt.alternate!==null&&Re.delete(nt.key===null?ke:nt.key),Z=m(nt,Z,ke),qe===null?Te=nt:qe.sibling=nt,qe=nt);return r&&Re.forEach(function(nN){return s(ee,nN)}),st&&Ra(ee,ke),Te}function gt(ee,Z,ie,ge){if(typeof ie=="object"&&ie!==null&&ie.type===R&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:e:{for(var Te=ie.key;Z!==null;){if(Z.key===Te){if(Te=ie.type,Te===R){if(Z.tag===7){o(ee,Z.sibling),ge=g(Z,ie.props.children),ge.return=ee,ee=ge;break e}}else if(Z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===T&&v_(Te)===Z.type){o(ee,Z.sibling),ge=g(Z,ie.props),_c(ge,ie),ge.return=ee,ee=ge;break e}o(ee,Z);break}else s(ee,Z);Z=Z.sibling}ie.type===R?(ge=Sa(ie.props.children,ee.mode,ge,ie.key),ge.return=ee,ee=ge):(ge=pd(ie.type,ie.key,ie.props,null,ee.mode,ge),_c(ge,ie),ge.return=ee,ee=ge)}return w(ee);case x:e:{for(Te=ie.key;Z!==null;){if(Z.key===Te)if(Z.tag===4&&Z.stateNode.containerInfo===ie.containerInfo&&Z.stateNode.implementation===ie.implementation){o(ee,Z.sibling),ge=g(Z,ie.children||[]),ge.return=ee,ee=ge;break e}else{o(ee,Z);break}else s(ee,Z);Z=Z.sibling}ge=xg(ie,ee.mode,ge),ge.return=ee,ee=ge}return w(ee);case T:return Te=ie._init,ie=Te(ie._payload),gt(ee,Z,ie,ge)}if($(ie))return Oe(ee,Z,ie,ge);if(B(ie)){if(Te=B(ie),typeof Te!="function")throw Error(i(150));return ie=Te.call(ie),Ie(ee,Z,ie,ge)}if(typeof ie.then=="function")return gt(ee,Z,Dd(ie),ge);if(ie.$$typeof===G)return gt(ee,Z,_d(ee,ie),ge);Md(ee,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Z!==null&&Z.tag===6?(o(ee,Z.sibling),ge=g(Z,ie),ge.return=ee,ee=ge):(o(ee,Z),ge=wg(ie,ee.mode,ge),ge.return=ee,ee=ge),w(ee)):o(ee,Z)}return function(ee,Z,ie,ge){try{vc=0;var Te=gt(ee,Z,ie,ge);return Vo=null,Te}catch(Re){if(Re===cc||Re===Ed)throw Re;var qe=Wn(29,Re,null,ee.mode);return qe.lanes=ge,qe.return=ee,qe}finally{}}}var Lo=__(!0),b_=__(!1),Tr=W(null),oi=null;function ps(r){var s=r.alternate;X(Wt,Wt.current&1),X(Tr,r),oi===null&&(s===null||Do.current!==null||s.memoizedState!==null)&&(oi=r)}function E_(r){if(r.tag===22){if(X(Wt,Wt.current),X(Tr,r),oi===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(oi=r)}}else ms()}function ms(){X(Wt,Wt.current),X(Tr,Tr.current)}function Bi(r){re(Tr),oi===r&&(oi=null),re(Wt)}var Wt=W(0);function Od(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Fp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function np(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var rp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=tr(),g=hs(u);g.payload=s,o!=null&&(g.callback=o),s=fs(r,g,u),s!==null&&(nr(s,r,u),dc(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=tr(),g=hs(u);g.tag=1,g.payload=s,o!=null&&(g.callback=o),s=fs(r,g,u),s!==null&&(nr(s,r,u),dc(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=tr(),u=hs(o);u.tag=2,s!=null&&(u.callback=s),s=fs(r,u,o),s!==null&&(nr(s,r,o),dc(s,r,o))}};function w_(r,s,o,u,g,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,w):s.prototype&&s.prototype.isPureReactComponent?!tc(o,u)||!tc(g,m):!0}function x_(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&rp.enqueueReplaceState(s,s.state,null)}function Oa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=y({},o));for(var g in r)o[g]===void 0&&(o[g]=r[g])}return o}var Pd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function T_(r){Pd(r)}function S_(r){console.error(r)}function A_(r){Pd(r)}function Vd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function R_(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ip(r,s,o){return o=hs(o),o.tag=3,o.payload={element:null},o.callback=function(){Vd(r,s)},o}function N_(r){return r=hs(r),r.tag=3,r}function C_(r,s,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;r.payload=function(){return g(m)},r.callback=function(){R_(s,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){R_(s,o,u),typeof g!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function nR(r,s,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ac(s,o,g,!0),o=Tr.current,o!==null){switch(o.tag){case 13:return oi===null?Np():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===Mg?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Ip(r,u,g)),!1;case 22:return o.flags|=65536,u===Mg?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Ip(r,u,g)),!1}throw Error(i(435,o.tag))}return Ip(r,u,g),Np(),!1}if(st)return s=Tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Ag&&(r=Error(i(422),{cause:u}),sc(br(r,o)))):(u!==Ag&&(s=Error(i(423),{cause:u}),sc(br(s,o))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,u=br(u,o),g=ip(r.stateNode,u,g),Vg(r,g),Ct!==4&&(Ct=2)),!1;var m=Error(i(520),{cause:u});if(m=br(m,o),Ac===null?Ac=[m]:Ac.push(m),Ct!==4&&(Ct=2),s===null)return!0;u=br(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=g&-g,o.lanes|=r,r=ip(o.stateNode,u,r),Vg(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ws===null||!ws.has(m))))return o.flags|=65536,g&=-g,o.lanes|=g,g=N_(g),C_(g,r,o,u),Vg(o,g),!1}o=o.return}while(o!==null);return!1}var I_=Error(i(461)),rn=!1;function hn(r,s,o,u){s.child=r===null?b_(s,null,o,u):Lo(s,r.child,o,u)}function k_(r,s,o,u,g){o=o.render;var m=s.ref;if("ref"in u){var w={};for(var C in u)C!=="ref"&&(w[C]=u[C])}else w=u;return ka(s),u=jg(r,s,o,w,m,g),C=Hg(),r!==null&&!rn?(qg(r,s,g),ji(r,s,g)):(st&&C&&Tg(s),s.flags|=1,hn(r,s,u,g),s.child)}function D_(r,s,o,u,g){if(r===null){var m=o.type;return typeof m=="function"&&!Eg(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,M_(r,s,m,u,g)):(r=pd(o.type,null,u,s,s.mode,g),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!hp(r,g)){var w=m.memoizedProps;if(o=o.compare,o=o!==null?o:tc,o(w,u)&&r.ref===s.ref)return ji(r,s,g)}return s.flags|=1,r=Oi(m,u),r.ref=s.ref,r.return=s,s.child=r}function M_(r,s,o,u,g){if(r!==null){var m=r.memoizedProps;if(tc(m,u)&&r.ref===s.ref)if(rn=!1,s.pendingProps=u=m,hp(r,g))(r.flags&131072)!==0&&(rn=!0);else return s.lanes=r.lanes,ji(r,s,g)}return sp(r,s,o,u,g)}function O_(r,s,o){var u=s.pendingProps,g=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(g=s.child=r.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return P_(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&bd(s,m!==null?m.cachePool:null),m!==null?Mv(s,m):zg(),E_(s);else return s.lanes=s.childLanes=536870912,P_(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(bd(s,m.cachePool),Mv(s,m),ms(),s.memoizedState=null):(r!==null&&bd(s,null),zg(),ms());return hn(r,s,g,o),s.child}function P_(r,s,o,u){var g=Dg();return g=g===null?null:{parent:Qt._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&bd(s,null),zg(),E_(s),r!==null&&ac(r,s,u,!0),null}function Ld(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function sp(r,s,o,u,g){return ka(s),o=jg(r,s,o,u,void 0,g),u=Hg(),r!==null&&!rn?(qg(r,s,g),ji(r,s,g)):(st&&u&&Tg(s),s.flags|=1,hn(r,s,o,g),s.child)}function V_(r,s,o,u,g,m){return ka(s),s.updateQueue=null,o=Pv(s,u,o,g),Ov(r),u=Hg(),r!==null&&!rn?(qg(r,s,m),ji(r,s,m)):(st&&u&&Tg(s),s.flags|=1,hn(r,s,o,m),s.child)}function L_(r,s,o,u,g){if(ka(s),s.stateNode===null){var m=Ro,w=o.contextType;typeof w=="object"&&w!==null&&(m=_n(w)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=rp,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Og(s),w=o.contextType,m.context=typeof w=="object"&&w!==null?_n(w):Ro,m.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(np(s,o,w,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&rp.enqueueReplaceState(m,m.state,null),fc(s,u,m,g),hc(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var C=s.memoizedProps,F=Oa(o,C);m.props=F;var ae=m.context,he=o.contextType;w=Ro,typeof he=="object"&&he!==null&&(w=_n(he));var pe=o.getDerivedStateFromProps;he=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||ae!==w)&&x_(s,m,u,w),ds=!1;var oe=s.memoizedState;m.state=oe,fc(s,u,m,g),hc(),ae=s.memoizedState,C||oe!==ae||ds?(typeof pe=="function"&&(np(s,o,pe,u),ae=s.memoizedState),(F=ds||w_(s,o,F,u,oe,ae,w))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ae),m.props=u,m.state=ae,m.context=w,u=F):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Pg(r,s),w=s.memoizedProps,he=Oa(o,w),m.props=he,pe=s.pendingProps,oe=m.context,ae=o.contextType,F=Ro,typeof ae=="object"&&ae!==null&&(F=_n(ae)),C=o.getDerivedStateFromProps,(ae=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==pe||oe!==F)&&x_(s,m,u,F),ds=!1,oe=s.memoizedState,m.state=oe,fc(s,u,m,g),hc();var le=s.memoizedState;w!==pe||oe!==le||ds||r!==null&&r.dependencies!==null&&vd(r.dependencies)?(typeof C=="function"&&(np(s,o,C,u),le=s.memoizedState),(he=ds||w_(s,o,he,u,oe,le,F)||r!==null&&r.dependencies!==null&&vd(r.dependencies))?(ae||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,le,F),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,le,F)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=le),m.props=u,m.state=le,m.context=F,u=he):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&oe===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,Ld(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=Lo(s,r.child,null,g),s.child=Lo(s,null,o,g)):hn(r,s,o,g),s.memoizedState=m.state,r=s.child):r=ji(r,s,g),r}function z_(r,s,o,u){return ic(),s.flags|=256,hn(r,s,o,u),s.child}var ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function op(r){return{baseLanes:r,cachePool:Sv()}}function lp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Sr),r}function U_(r,s,o){var u=s.pendingProps,g=!1,m=(s.flags&128)!==0,w;if((w=m)||(w=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),w&&(g=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(st){if(g?ps(s):ms(),st){var C=Nt,F;if(F=C){e:{for(F=C,C=ai;F.nodeType!==8;){if(!C){C=null;break e}if(F=Vr(F.nextSibling),F===null){C=null;break e}}C=F}C!==null?(s.memoizedState={dehydrated:C,treeContext:Aa!==null?{id:Pi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},F=Wn(18,null,null,0),F.stateNode=C,F.return=s,s.child=F,Mn=s,Nt=null,F=!0):F=!1}F||Ca(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Fp(C)?s.lanes=32:s.lanes=536870912,null;Bi(s)}return C=u.children,u=u.fallback,g?(ms(),g=s.mode,C=zd({mode:"hidden",children:C},g),u=Sa(u,g,o,null),C.return=s,u.return=s,C.sibling=u,s.child=C,g=s.child,g.memoizedState=op(o),g.childLanes=lp(r,w,o),s.memoizedState=ap,u):(ps(s),cp(s,C))}if(F=r.memoizedState,F!==null&&(C=F.dehydrated,C!==null)){if(m)s.flags&256?(ps(s),s.flags&=-257,s=up(r,s,o)):s.memoizedState!==null?(ms(),s.child=r.child,s.flags|=128,s=null):(ms(),g=u.fallback,C=s.mode,u=zd({mode:"visible",children:u.children},C),g=Sa(g,C,o,null),g.flags|=2,u.return=s,g.return=s,u.sibling=g,s.child=u,Lo(s,r.child,null,o),u=s.child,u.memoizedState=op(o),u.childLanes=lp(r,w,o),s.memoizedState=ap,s=g);else if(ps(s),Fp(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var ae=w.dgst;w=ae,u=Error(i(419)),u.stack="",u.digest=w,sc({value:u,source:null,stack:null}),s=up(r,s,o)}else if(rn||ac(r,s,o,!1),w=(o&r.childLanes)!==0,rn||w){if(w=yt,w!==null&&(u=o&-o,u=(u&42)!==0?1:Gr(u),u=(u&(w.suspendedLanes|o))!==0?0:u,u!==0&&u!==F.retryLane))throw F.retryLane=u,Ao(r,u),nr(w,r,u),I_;C.data==="$?"||Np(),s=up(r,s,o)}else C.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=F.treeContext,Nt=Vr(C.nextSibling),Mn=s,st=!0,Na=null,ai=!1,r!==null&&(wr[xr++]=Pi,wr[xr++]=Vi,wr[xr++]=Aa,Pi=r.id,Vi=r.overflow,Aa=s),s=cp(s,u.children),s.flags|=4096);return s}return g?(ms(),g=u.fallback,C=s.mode,F=r.child,ae=F.sibling,u=Oi(F,{mode:"hidden",children:u.children}),u.subtreeFlags=F.subtreeFlags&65011712,ae!==null?g=Oi(ae,g):(g=Sa(g,C,o,null),g.flags|=2),g.return=s,u.return=s,u.sibling=g,s.child=u,u=g,g=s.child,C=r.child.memoizedState,C===null?C=op(o):(F=C.cachePool,F!==null?(ae=Qt._currentValue,F=F.parent!==ae?{parent:ae,pool:ae}:F):F=Sv(),C={baseLanes:C.baseLanes|o,cachePool:F}),g.memoizedState=C,g.childLanes=lp(r,w,o),s.memoizedState=ap,u):(ps(s),o=r.child,r=o.sibling,o=Oi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=o,s.memoizedState=null,o)}function cp(r,s){return s=zd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function zd(r,s){return r=Wn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function up(r,s,o){return Lo(s,r.child,null,o),r=cp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function B_(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Ng(r.return,s,o)}function dp(r,s,o,u,g){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=g)}function j_(r,s,o){var u=s.pendingProps,g=u.revealOrder,m=u.tail;if(hn(r,s,u.children,o),u=Wt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&B_(r,o,s);else if(r.tag===19)B_(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(X(Wt,u),g){case"forwards":for(o=s.child,g=null;o!==null;)r=o.alternate,r!==null&&Od(r)===null&&(g=o),o=o.sibling;o=g,o===null?(g=s.child,s.child=null):(g=o.sibling,o.sibling=null),dp(s,!1,g,o,m);break;case"backwards":for(o=null,g=s.child,s.child=null;g!==null;){if(r=g.alternate,r!==null&&Od(r)===null){s.child=g;break}r=g.sibling,g.sibling=o,o=g,g=r}dp(s,!0,o,null,m);break;case"together":dp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ji(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(ac(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Oi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Oi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function hp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&vd(r)))}function rR(r,s,o){switch(s.tag){case 3:_e(s,s.stateNode.containerInfo),us(s,Qt,r.memoizedState.cache),ic();break;case 27:case 5:Ne(s);break;case 4:_e(s,s.stateNode.containerInfo);break;case 10:us(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ps(s),s.flags|=128,null):(o&s.child.childLanes)!==0?U_(r,s,o):(ps(s),r=ji(r,s,o),r!==null?r.sibling:null);ps(s);break;case 19:var g=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ac(r,s,o,!1),u=(o&s.childLanes)!==0),g){if(u)return j_(r,s,o);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),X(Wt,Wt.current),u)break;return null;case 22:case 23:return s.lanes=0,O_(r,s,o);case 24:us(s,Qt,r.memoizedState.cache)}return ji(r,s,o)}function H_(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)rn=!0;else{if(!hp(r,o)&&(s.flags&128)===0)return rn=!1,rR(r,s,o);rn=(r.flags&131072)!==0}else rn=!1,st&&(s.flags&1048576)!==0&&vv(s,yd,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,g=u._init;if(u=g(u._payload),s.type=u,typeof u=="function")Eg(u)?(r=Oa(u,r),s.tag=1,s=L_(null,s,u,r,o)):(s.tag=0,s=sp(null,s,u,r,o));else{if(u!=null){if(g=u.$$typeof,g===j){s.tag=11,s=k_(null,s,u,r,o);break e}else if(g===I){s.tag=14,s=D_(null,s,u,r,o);break e}}throw s=O(u)||u,Error(i(306,s,""))}}return s;case 0:return sp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,g=Oa(u,s.pendingProps),L_(r,s,u,g,o);case 3:e:{if(_e(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;g=m.element,Pg(r,s),fc(s,u,null,o);var w=s.memoizedState;if(u=w.cache,us(s,Qt,u),u!==m.cache&&Cg(s,[Qt],o,!0),hc(),u=w.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=z_(r,s,u,o);break e}else if(u!==g){g=br(Error(i(424)),s),sc(g),s=z_(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=Vr(r.firstChild),Mn=s,st=!0,Na=null,ai=!0,o=b_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ic(),u===g){s=ji(r,s,o);break e}hn(r,s,u,o)}s=s.child}return s;case 26:return Ld(r,s),r===null?(o=Gb(s.type,null,s.pendingProps,null))?s.memoizedState=o:st||(o=s.type,r=s.pendingProps,u=Zd(ue.current).createElement(o),u[Mt]=s,u[Rt]=r,gn(u,o,r),wt(u),s.stateNode=u):s.memoizedState=Gb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ne(s),r===null&&st&&(u=s.stateNode=qb(s.type,s.pendingProps,ue.current),Mn=s,ai=!0,g=Nt,Ss(s.type)?(Gp=g,Nt=Vr(u.firstChild)):Nt=g),hn(r,s,s.pendingProps.children,o),Ld(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&st&&((g=u=Nt)&&(u=kR(u,s.type,s.pendingProps,ai),u!==null?(s.stateNode=u,Mn=s,Nt=Vr(u.firstChild),ai=!1,g=!0):g=!1),g||Ca(s)),Ne(s),g=s.type,m=s.pendingProps,w=r!==null?r.memoizedProps:null,u=m.children,Hp(g,m)?u=null:w!==null&&Hp(g,w)&&(s.flags|=32),s.memoizedState!==null&&(g=jg(r,s,X2,null,null,o),Pc._currentValue=g),Ld(r,s),hn(r,s,u,o),s.child;case 6:return r===null&&st&&((r=o=Nt)&&(o=DR(o,s.pendingProps,ai),o!==null?(s.stateNode=o,Mn=s,Nt=null,r=!0):r=!1),r||Ca(s)),null;case 13:return U_(r,s,o);case 4:return _e(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Lo(s,null,u,o):hn(r,s,u,o),s.child;case 11:return k_(r,s,s.type,s.pendingProps,o);case 7:return hn(r,s,s.pendingProps,o),s.child;case 8:return hn(r,s,s.pendingProps.children,o),s.child;case 12:return hn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,us(s,s.type,u.value),hn(r,s,u.children,o),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,ka(s),g=_n(g),u=u(g),s.flags|=1,hn(r,s,u,o),s.child;case 14:return D_(r,s,s.type,s.pendingProps,o);case 15:return M_(r,s,s.type,s.pendingProps,o);case 19:return j_(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=zd(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Oi(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return O_(r,s,o);case 24:return ka(s),u=_n(Qt),r===null?(g=Dg(),g===null&&(g=yt,m=Ig(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=o),g=m),s.memoizedState={parent:u,cache:g},Og(s),us(s,Qt,g)):((r.lanes&o)!==0&&(Pg(r,s),fc(s,null,null,o),hc()),g=r.memoizedState,m=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),us(s,Qt,u)):(u=m.cache,us(s,Qt,u),u!==g.cache&&Cg(s,[Qt],o,!0))),hn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Hi(r){r.flags|=4}function q_(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Wb(s)){if(s=Tr.current,s!==null&&((Ze&4194048)===Ze?oi!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||s!==oi))throw uc=Mg,Av;r.flags|=8192}}function Ud(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Ir():536870912,r.lanes|=s,jo|=s)}function bc(r,s){if(!st)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function xt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function iR(r,s,o){var u=s.pendingProps;switch(Sg(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(s),null;case 1:return xt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),zi(Qt),Ae(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(rc(s)?Hi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ev())),xt(s),null;case 26:return o=s.memoizedState,r===null?(Hi(s),o!==null?(xt(s),q_(s,o)):(xt(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Hi(s),xt(s),q_(s,o)):(xt(s),s.flags&=-16777217):(r.memoizedProps!==u&&Hi(s),xt(s),s.flags&=-16777217),null;case 27:et(s),o=ue.current;var g=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Hi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}r=se.current,rc(s)?_v(s):(r=qb(g,u,o),s.stateNode=r,Hi(s))}return xt(s),null;case 5:if(et(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Hi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return xt(s),null}if(r=se.current,rc(s))_v(s);else{switch(g=Zd(ue.current),r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?g.createElement(o,{is:u.is}):g.createElement(o)}}r[Mt]=s,r[Rt]=u;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=r;e:switch(gn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Hi(s)}}return xt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Hi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=ue.current,rc(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,g=Mn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}r[Mt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Vb(r.nodeValue,o)),r||Ca(s)}else r=Zd(r).createTextNode(u),r[Mt]=s,s.stateNode=r}return xt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=rc(s),u!==null&&u.dehydrated!==null){if(r===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Mt]=s}else ic(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;xt(s),g=!1}else g=Ev(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Bi(s),s):(Bi(s),null)}if(Bi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Ud(s,s.updateQueue),xt(s),null;case 4:return Ae(),r===null&&Lp(s.stateNode.containerInfo),xt(s),null;case 10:return zi(s.type),xt(s),null;case 19:if(re(Wt),g=s.memoizedState,g===null)return xt(s),null;if(u=(s.flags&128)!==0,m=g.rendering,m===null)if(u)bc(g,!1);else{if(Ct!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Od(r),m!==null){for(s.flags|=128,bc(g,!1),r=m.updateQueue,s.updateQueue=r,Ud(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)yv(o,r),o=o.sibling;return X(Wt,Wt.current&1|2),s.child}r=r.sibling}g.tail!==null&&ze()>Hd&&(s.flags|=128,u=!0,bc(g,!1),s.lanes=4194304)}else{if(!u)if(r=Od(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Ud(s,r),bc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!st)return xt(s),null}else 2*ze()-g.renderingStartTime>Hd&&o!==536870912&&(s.flags|=128,u=!0,bc(g,!1),s.lanes=4194304);g.isBackwards?(m.sibling=s.child,s.child=m):(r=g.last,r!==null?r.sibling=m:s.child=m,g.last=m)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=ze(),s.sibling=null,r=Wt.current,X(Wt,u?r&1|2:r&1),s):(xt(s),null);case 22:case 23:return Bi(s),Ug(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(xt(s),s.subtreeFlags&6&&(s.flags|=8192)):xt(s),o=s.updateQueue,o!==null&&Ud(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&re(Da),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),zi(Qt),xt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function sR(r,s){switch(Sg(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return zi(Qt),Ae(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return et(s),null;case 13:if(Bi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ic()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return re(Wt),null;case 4:return Ae(),null;case 10:return zi(s.type),null;case 22:case 23:return Bi(s),Ug(),r!==null&&re(Da),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return zi(Qt),null;case 25:return null;default:return null}}function $_(r,s){switch(Sg(s),s.tag){case 3:zi(Qt),Ae();break;case 26:case 27:case 5:et(s);break;case 4:Ae();break;case 13:Bi(s);break;case 19:re(Wt);break;case 10:zi(s.type);break;case 22:case 23:Bi(s),Ug(),r!==null&&re(Da);break;case 24:zi(Qt)}}function Ec(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&r)===r){u=void 0;var m=o.create,w=o.inst;u=m(),w.destroy=u}o=o.next}while(o!==g)}}catch(C){pt(s,s.return,C)}}function ys(r,s,o){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&r)===r){var w=u.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,g=s;var F=o,ae=C;try{ae()}catch(he){pt(g,F,he)}}}u=u.next}while(u!==m)}}catch(he){pt(s,s.return,he)}}function F_(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{Dv(s,o)}catch(u){pt(r,r.return,u)}}}function G_(r,s,o){o.props=Oa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){pt(r,s,u)}}function wc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(g){pt(r,s,g)}}function li(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){pt(r,s,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){pt(r,s,g)}else o.current=null}function Y_(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){pt(r,r.return,g)}}function fp(r,s,o){try{var u=r.stateNode;AR(u,r.type,o,s),u[Rt]=s}catch(g){pt(r,r.return,g)}}function K_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ss(r.type)||r.tag===4}function gp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||K_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ss(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function pp(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Wd));else if(u!==4&&(u===27&&Ss(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(pp(r,s,o),r=r.sibling;r!==null;)pp(r,s,o),r=r.sibling}function Bd(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&Ss(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Bd(r,s,o),r=r.sibling;r!==null;)Bd(r,s,o),r=r.sibling}function X_(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);gn(s,u,o),s[Mt]=r,s[Rt]=o}catch(m){pt(r,r.return,m)}}var qi=!1,Pt=!1,mp=!1,Q_=typeof WeakSet=="function"?WeakSet:Set,sn=null;function aR(r,s){if(r=r.containerInfo,Bp=ih,r=ov(r),gg(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var w=0,C=-1,F=-1,ae=0,he=0,pe=r,oe=null;t:for(;;){for(var le;pe!==o||g!==0&&pe.nodeType!==3||(C=w+g),pe!==m||u!==0&&pe.nodeType!==3||(F=w+u),pe.nodeType===3&&(w+=pe.nodeValue.length),(le=pe.firstChild)!==null;)oe=pe,pe=le;for(;;){if(pe===r)break t;if(oe===o&&++ae===g&&(C=w),oe===m&&++he===u&&(F=w),(le=pe.nextSibling)!==null)break;pe=oe,oe=pe.parentNode}pe=le}o=C===-1||F===-1?null:{start:C,end:F}}else o=null}o=o||{start:0,end:0}}else o=null;for(jp={focusedElem:r,selectionRange:o},ih=!1,sn=s;sn!==null;)if(s=sn,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,sn=r;else for(;sn!==null;){switch(s=sn,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,g=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Oe=Oa(o.type,g,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(Oe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){pt(o,o.return,Ie)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)$p(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":$p(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,sn=r;break}sn=s.return}}function W_(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:vs(r,o),u&4&&Ec(5,o);break;case 1:if(vs(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(w){pt(o,o.return,w)}else{var g=Oa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(g,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){pt(o,o.return,w)}}u&64&&F_(o),u&512&&wc(o,o.return);break;case 3:if(vs(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Dv(r,s)}catch(w){pt(o,o.return,w)}}break;case 27:s===null&&u&4&&X_(o);case 26:case 5:vs(r,o),s===null&&u&4&&Y_(o),u&512&&wc(o,o.return);break;case 12:vs(r,o);break;case 13:vs(r,o),u&4&&eb(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=pR.bind(null,o),MR(r,o))));break;case 22:if(u=o.memoizedState!==null||qi,!u){s=s!==null&&s.memoizedState!==null||Pt,g=qi;var m=Pt;qi=u,(Pt=s)&&!m?_s(r,o,(o.subtreeFlags&8772)!==0):vs(r,o),qi=g,Pt=m}break;case 30:break;default:vs(r,o)}}function Z_(r){var s=r.alternate;s!==null&&(r.alternate=null,Z_(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Xr(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var bt=null,zn=!1;function $i(r,s,o){for(o=o.child;o!==null;)J_(r,s,o),o=o.sibling}function J_(r,s,o){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(at,o)}catch{}switch(o.tag){case 26:Pt||li(o,s),$i(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pt||li(o,s);var u=bt,g=zn;Ss(o.type)&&(bt=o.stateNode,zn=!1),$i(r,s,o),kc(o.stateNode),bt=u,zn=g;break;case 5:Pt||li(o,s);case 6:if(u=bt,g=zn,bt=null,$i(r,s,o),bt=u,zn=g,bt!==null)if(zn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(m){pt(o,s,m)}else try{bt.removeChild(o.stateNode)}catch(m){pt(o,s,m)}break;case 18:bt!==null&&(zn?(r=bt,jb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Uc(r)):jb(bt,o.stateNode));break;case 4:u=bt,g=zn,bt=o.stateNode.containerInfo,zn=!0,$i(r,s,o),bt=u,zn=g;break;case 0:case 11:case 14:case 15:Pt||ys(2,o,s),Pt||ys(4,o,s),$i(r,s,o);break;case 1:Pt||(li(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&G_(o,s,u)),$i(r,s,o);break;case 21:$i(r,s,o);break;case 22:Pt=(u=Pt)||o.memoizedState!==null,$i(r,s,o),Pt=u;break;default:$i(r,s,o)}}function eb(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Uc(r)}catch(o){pt(s,s.return,o)}}function oR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Q_),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Q_),s;default:throw Error(i(435,r.tag))}}function yp(r,s){var o=oR(r);s.forEach(function(u){var g=mR.bind(null,r,u);o.has(u)||(o.add(u),u.then(g,g))})}function Zn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],m=r,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(Ss(C.type)){bt=C.stateNode,zn=!1;break e}break;case 5:bt=C.stateNode,zn=!1;break e;case 3:case 4:bt=C.stateNode.containerInfo,zn=!0;break e}C=C.return}if(bt===null)throw Error(i(160));J_(m,w,g),bt=null,zn=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)tb(s,r),s=s.sibling}var Pr=null;function tb(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Zn(s,r),Jn(r),u&4&&(ys(3,r,r.return),Ec(3,r),ys(5,r,r.return));break;case 1:Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),u&64&&qi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=Pr;if(Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Si]||m[Mt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),gn(m,u,o),m[Mt]=r,wt(m),u=m;break e;case"link":var w=Xb("link","href",g).get(u+(o.href||""));if(w){for(var C=0;C<w.length;C++)if(m=w[C],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(C,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;case"meta":if(w=Xb("meta","content",g).get(u+(o.content||""))){for(C=0;C<w.length;C++)if(m=w[C],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(C,1);break t}}m=g.createElement(u),gn(m,u,o),g.head.appendChild(m);break;default:throw Error(i(468,u))}m[Mt]=r,wt(m),u=m}r.stateNode=u}else Qb(g,r.type,r.stateNode);else r.stateNode=Kb(g,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Qb(g,r.type,r.stateNode):Kb(g,u,r.memoizedProps)):u===null&&r.stateNode!==null&&fp(r,r.memoizedProps,o.memoizedProps)}break;case 27:Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),o!==null&&u&4&&fp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Zn(s,r),Jn(r),u&512&&(Pt||o===null||li(o,o.return)),r.flags&32){g=r.stateNode;try{mr(g,"")}catch(le){pt(r,r.return,le)}}u&4&&r.stateNode!=null&&(g=r.memoizedProps,fp(r,g,o!==null?o.memoizedProps:g)),u&1024&&(mp=!0);break;case 6:if(Zn(s,r),Jn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(le){pt(r,r.return,le)}}break;case 3:if(th=null,g=Pr,Pr=Jd(s.containerInfo),Zn(s,r),Pr=g,Jn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Uc(s.containerInfo)}catch(le){pt(r,r.return,le)}mp&&(mp=!1,nb(r));break;case 4:u=Pr,Pr=Jd(r.stateNode.containerInfo),Zn(s,r),Jn(r),Pr=u;break;case 12:Zn(s,r),Jn(r);break;case 13:Zn(s,r),Jn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(xp=ze()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,yp(r,u)));break;case 22:g=r.memoizedState!==null;var F=o!==null&&o.memoizedState!==null,ae=qi,he=Pt;if(qi=ae||g,Pt=he||F,Zn(s,r),Pt=he,qi=ae,Jn(r),u&8192)e:for(s=r.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(o===null||F||qi||Pt||Pa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){F=o=s;try{if(m=F.stateNode,g)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=F.stateNode;var pe=F.memoizedProps.style,oe=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;C.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(le){pt(F,F.return,le)}}}else if(s.tag===6){if(o===null){F=s;try{F.stateNode.nodeValue=g?"":F.memoizedProps}catch(le){pt(F,F.return,le)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,yp(r,o))));break;case 19:Zn(s,r),Jn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,yp(r,u)));break;case 30:break;case 21:break;default:Zn(s,r),Jn(r)}}function Jn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(K_(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var g=o.stateNode,m=gp(r);Bd(r,m,g);break;case 5:var w=o.stateNode;o.flags&32&&(mr(w,""),o.flags&=-33);var C=gp(r);Bd(r,C,w);break;case 3:case 4:var F=o.stateNode.containerInfo,ae=gp(r);pp(r,ae,F);break;default:throw Error(i(161))}}catch(he){pt(r,r.return,he)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function nb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;nb(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function vs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)W_(r,s.alternate,s),s=s.sibling}function Pa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ys(4,s,s.return),Pa(s);break;case 1:li(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&G_(s,s.return,o),Pa(s);break;case 27:kc(s.stateNode);case 26:case 5:li(s,s.return),Pa(s);break;case 22:s.memoizedState===null&&Pa(s);break;case 30:Pa(s);break;default:Pa(s)}r=r.sibling}}function _s(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=r,m=s,w=m.flags;switch(m.tag){case 0:case 11:case 15:_s(g,m,o),Ec(4,m);break;case 1:if(_s(g,m,o),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ae){pt(u,u.return,ae)}if(u=m,g=u.updateQueue,g!==null){var C=u.stateNode;try{var F=g.shared.hiddenCallbacks;if(F!==null)for(g.shared.hiddenCallbacks=null,g=0;g<F.length;g++)kv(F[g],C)}catch(ae){pt(u,u.return,ae)}}o&&w&64&&F_(m),wc(m,m.return);break;case 27:X_(m);case 26:case 5:_s(g,m,o),o&&u===null&&w&4&&Y_(m),wc(m,m.return);break;case 12:_s(g,m,o);break;case 13:_s(g,m,o),o&&w&4&&eb(g,m);break;case 22:m.memoizedState===null&&_s(g,m,o),wc(m,m.return);break;case 30:break;default:_s(g,m,o)}s=s.sibling}}function vp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&oc(o))}function _p(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&oc(r))}function ci(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rb(r,s,o,u),s=s.sibling}function rb(r,s,o,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ci(r,s,o,u),g&2048&&Ec(9,s);break;case 1:ci(r,s,o,u);break;case 3:ci(r,s,o,u),g&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&oc(r)));break;case 12:if(g&2048){ci(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,w=m.id,C=m.onPostCommit;typeof C=="function"&&C(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(F){pt(s,s.return,F)}}else ci(r,s,o,u);break;case 13:ci(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,w=s.alternate,s.memoizedState!==null?m._visibility&2?ci(r,s,o,u):xc(r,s):m._visibility&2?ci(r,s,o,u):(m._visibility|=2,zo(r,s,o,u,(s.subtreeFlags&10256)!==0)),g&2048&&vp(w,s);break;case 24:ci(r,s,o,u),g&2048&&_p(s.alternate,s);break;default:ci(r,s,o,u)}}function zo(r,s,o,u,g){for(g=g&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,w=s,C=o,F=u,ae=w.flags;switch(w.tag){case 0:case 11:case 15:zo(m,w,C,F,g),Ec(8,w);break;case 23:break;case 22:var he=w.stateNode;w.memoizedState!==null?he._visibility&2?zo(m,w,C,F,g):xc(m,w):(he._visibility|=2,zo(m,w,C,F,g)),g&&ae&2048&&vp(w.alternate,w);break;case 24:zo(m,w,C,F,g),g&&ae&2048&&_p(w.alternate,w);break;default:zo(m,w,C,F,g)}s=s.sibling}}function xc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,g=u.flags;switch(u.tag){case 22:xc(o,u),g&2048&&vp(u.alternate,u);break;case 24:xc(o,u),g&2048&&_p(u.alternate,u);break;default:xc(o,u)}s=s.sibling}}var Tc=8192;function Uo(r){if(r.subtreeFlags&Tc)for(r=r.child;r!==null;)ib(r),r=r.sibling}function ib(r){switch(r.tag){case 26:Uo(r),r.flags&Tc&&r.memoizedState!==null&&GR(Pr,r.memoizedState,r.memoizedProps);break;case 5:Uo(r);break;case 3:case 4:var s=Pr;Pr=Jd(r.stateNode.containerInfo),Uo(r),Pr=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=Tc,Tc=16777216,Uo(r),Tc=s):Uo(r));break;default:Uo(r)}}function sb(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Sc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,ob(u,r)}sb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ab(r),r=r.sibling}function ab(r){switch(r.tag){case 0:case 11:case 15:Sc(r),r.flags&2048&&ys(9,r,r.return);break;case 3:Sc(r);break;case 12:Sc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,jd(r)):Sc(r);break;default:Sc(r)}}function jd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];sn=u,ob(u,r)}sb(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ys(8,s,s.return),jd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,jd(s));break;default:jd(s)}r=r.sibling}}function ob(r,s){for(;sn!==null;){var o=sn;switch(o.tag){case 0:case 11:case 15:ys(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:oc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,sn=u;else e:for(o=r;sn!==null;){u=sn;var g=u.sibling,m=u.return;if(Z_(u),u===o){sn=null;break e}if(g!==null){g.return=m,sn=g;break e}sn=m}}}var lR={getCacheForType:function(r){var s=_n(Qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},cR=typeof WeakMap=="function"?WeakMap:Map,ct=0,yt=null,Ge=null,Ze=0,ut=0,er=null,bs=!1,Bo=!1,bp=!1,Fi=0,Ct=0,Es=0,Va=0,Ep=0,Sr=0,jo=0,Ac=null,Un=null,wp=!1,xp=0,Hd=1/0,qd=null,ws=null,fn=0,xs=null,Ho=null,qo=0,Tp=0,Sp=null,lb=null,Rc=0,Ap=null;function tr(){if((ct&2)!==0&&Ze!==0)return Ze&-Ze;if(M.T!==null){var r=Io;return r!==0?r:Mp()}return Yr()}function cb(){Sr===0&&(Sr=(Ze&536870912)===0||st?Ti():536870912);var r=Tr.current;return r!==null&&(r.flags|=32),Sr}function nr(r,s,o){(r===yt&&(ut===2||ut===9)||r.cancelPendingCommit!==null)&&($o(r,0),Ts(r,Ze,Sr,!1)),ur(r,o),((ct&2)===0||r!==yt)&&(r===yt&&((ct&2)===0&&(Va|=o),Ct===4&&Ts(r,Ze,Sr,!1)),ui(r))}function ub(r,s,o){if((ct&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||In(r,s),g=u?hR(r,s):Cp(r,s,!0),m=u;do{if(g===0){Bo&&!u&&Ts(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!uR(o)){g=Cp(r,s,!1),m=!1;continue}if(g===2){if(m=s,r.errorRecoveryDisabledLanes&m)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var C=r;g=Ac;var F=C.current.memoizedState.isDehydrated;if(F&&($o(C,w).flags|=256),w=Cp(C,w,!1),w!==2){if(bp&&!F){C.errorRecoveryDisabledLanes|=m,Va|=m,g=4;break e}m=Un,Un=g,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}g=w}if(m=!1,g!==2)continue}}if(g===1){$o(r,0),Ts(r,s,0,!0);break}e:{switch(u=r,m=g,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ts(u,s,Sr,!bs);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=xp+300-ze(),10<g)){if(Ts(u,s,Sr,!bs),cn(u,0,!0)!==0)break e;u.timeoutHandle=Ub(db.bind(null,u,o,Un,qd,wp,s,Sr,Va,jo,bs,m,2,-0,0),g);break e}db(u,o,Un,qd,wp,s,Sr,Va,jo,bs,m,0,-0,0)}}break}while(!0);ui(r)}function db(r,s,o,u,g,m,w,C,F,ae,he,pe,oe,le){if(r.timeoutHandle=-1,pe=s.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Oc={stylesheets:null,count:0,unsuspend:FR},ib(s),pe=YR(),pe!==null)){r.cancelPendingCommit=pe(vb.bind(null,r,s,m,o,u,g,w,C,F,he,1,oe,le)),Ts(r,m,w,!ae);return}vb(r,s,m,o,u,g,w,C,F)}function uR(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],m=g.getSnapshot;g=g.value;try{if(!Qn(m(),g))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ts(r,s,o,u){s&=~Ep,s&=~Va,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var g=s;0<g;){var m=31-Et(g),w=1<<m;u[m]=-1,g&=~w}o!==0&&dr(r,o,s)}function $d(){return(ct&6)===0?(Nc(0),!1):!0}function Rp(){if(Ge!==null){if(ut===0)var r=Ge.return;else r=Ge,Li=Ia=null,$g(r),Vo=null,vc=0,r=Ge;for(;r!==null;)$_(r.alternate,r),r=r.return;Ge=null}}function $o(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,NR(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Rp(),yt=r,Ge=o=Oi(r.current,null),Ze=s,ut=0,er=null,bs=!1,Bo=In(r,s),bp=!1,jo=Sr=Ep=Va=Es=Ct=0,Un=Ac=null,wp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var g=31-Et(u),m=1<<g;s|=r[g],u&=~m}return Fi=s,hd(),o}function hb(r,s){je=null,M.H=kd,s===cc||s===Ed?(s=Cv(),ut=3):s===Av?(s=Cv(),ut=4):ut=s===I_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,er=s,Ge===null&&(Ct=1,Vd(r,br(s,r.current)))}function fb(){var r=M.H;return M.H=kd,r===null?kd:r}function gb(){var r=M.A;return M.A=lR,r}function Np(){Ct=4,bs||(Ze&4194048)!==Ze&&Tr.current!==null||(Bo=!0),(Es&134217727)===0&&(Va&134217727)===0||yt===null||Ts(yt,Ze,Sr,!1)}function Cp(r,s,o){var u=ct;ct|=2;var g=fb(),m=gb();(yt!==r||Ze!==s)&&(qd=null,$o(r,s)),s=!1;var w=Ct;e:do try{if(ut!==0&&Ge!==null){var C=Ge,F=er;switch(ut){case 8:Rp(),w=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(s=!0);var ae=ut;if(ut=0,er=null,Fo(r,C,F,ae),o&&Bo){w=0;break e}break;default:ae=ut,ut=0,er=null,Fo(r,C,F,ae)}}dR(),w=Ct;break}catch(he){hb(r,he)}while(!0);return s&&r.shellSuspendCounter++,Li=Ia=null,ct=u,M.H=g,M.A=m,Ge===null&&(yt=null,Ze=0,hd()),w}function dR(){for(;Ge!==null;)pb(Ge)}function hR(r,s){var o=ct;ct|=2;var u=fb(),g=gb();yt!==r||Ze!==s?(qd=null,Hd=ze()+500,$o(r,s)):Bo=In(r,s);e:do try{if(ut!==0&&Ge!==null){s=Ge;var m=er;t:switch(ut){case 1:ut=0,er=null,Fo(r,s,m,1);break;case 2:case 9:if(Rv(m)){ut=0,er=null,mb(s);break}s=function(){ut!==2&&ut!==9||yt!==r||(ut=7),ui(r)},m.then(s,s);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Rv(m)?(ut=0,er=null,mb(s)):(ut=0,er=null,Fo(r,s,m,7));break;case 5:var w=null;switch(Ge.tag){case 26:w=Ge.memoizedState;case 5:case 27:var C=Ge;if(!w||Wb(w)){ut=0,er=null;var F=C.sibling;if(F!==null)Ge=F;else{var ae=C.return;ae!==null?(Ge=ae,Fd(ae)):Ge=null}break t}}ut=0,er=null,Fo(r,s,m,5);break;case 6:ut=0,er=null,Fo(r,s,m,6);break;case 8:Rp(),Ct=6;break e;default:throw Error(i(462))}}fR();break}catch(he){hb(r,he)}while(!0);return Li=Ia=null,M.H=u,M.A=g,ct=o,Ge!==null?0:(yt=null,Ze=0,hd(),Ct)}function fR(){for(;Ge!==null&&!it();)pb(Ge)}function pb(r){var s=H_(r.alternate,r,Fi);r.memoizedProps=r.pendingProps,s===null?Fd(r):Ge=s}function mb(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=V_(o,s,s.pendingProps,s.type,void 0,Ze);break;case 11:s=V_(o,s,s.pendingProps,s.type.render,s.ref,Ze);break;case 5:$g(s);default:$_(o,s),s=Ge=yv(s,Fi),s=H_(o,s,Fi)}r.memoizedProps=r.pendingProps,s===null?Fd(r):Ge=s}function Fo(r,s,o,u){Li=Ia=null,$g(s),Vo=null,vc=0;var g=s.return;try{if(nR(r,g,s,o,Ze)){Ct=1,Vd(r,br(o,r.current)),Ge=null;return}}catch(m){if(g!==null)throw Ge=g,m;Ct=1,Vd(r,br(o,r.current)),Ge=null;return}s.flags&32768?(st||u===1?r=!0:Bo||(Ze&536870912)!==0?r=!1:(bs=r=!0,(u===2||u===9||u===3||u===6)&&(u=Tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),yb(s,r)):Fd(s)}function Fd(r){var s=r;do{if((s.flags&32768)!==0){yb(s,bs);return}r=s.return;var o=iR(s.alternate,s,Fi);if(o!==null){Ge=o;return}if(s=s.sibling,s!==null){Ge=s;return}Ge=s=r}while(s!==null);Ct===0&&(Ct=5)}function yb(r,s){do{var o=sR(r.alternate,r);if(o!==null){o.flags&=32767,Ge=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ge=r;return}Ge=r=o}while(r!==null);Ct=6,Ge=null}function vb(r,s,o,u,g,m,w,C,F){r.cancelPendingCommit=null;do Gd();while(fn!==0);if((ct&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=_g,Yn(r,o,m,w,C,F),r===yt&&(Ge=yt=null,Ze=0),Ho=s,xs=r,qo=o,Tp=m,Sp=g,lb=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,yR(Gt,function(){return xb(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,g=K.p,K.p=2,w=ct,ct|=4;try{aR(r,s,o)}finally{ct=w,K.p=g,M.T=u}}fn=1,_b(),bb(),Eb()}}function _b(){if(fn===1){fn=0;var r=xs,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var u=K.p;K.p=2;var g=ct;ct|=4;try{tb(s,r);var m=jp,w=ov(r.containerInfo),C=m.focusedElem,F=m.selectionRange;if(w!==C&&C&&C.ownerDocument&&av(C.ownerDocument.documentElement,C)){if(F!==null&&gg(C)){var ae=F.start,he=F.end;if(he===void 0&&(he=ae),"selectionStart"in C)C.selectionStart=ae,C.selectionEnd=Math.min(he,C.value.length);else{var pe=C.ownerDocument||document,oe=pe&&pe.defaultView||window;if(oe.getSelection){var le=oe.getSelection(),Oe=C.textContent.length,Ie=Math.min(F.start,Oe),gt=F.end===void 0?Ie:Math.min(F.end,Oe);!le.extend&&Ie>gt&&(w=gt,gt=Ie,Ie=w);var ee=sv(C,Ie),Z=sv(C,gt);if(ee&&Z&&(le.rangeCount!==1||le.anchorNode!==ee.node||le.anchorOffset!==ee.offset||le.focusNode!==Z.node||le.focusOffset!==Z.offset)){var ie=pe.createRange();ie.setStart(ee.node,ee.offset),le.removeAllRanges(),Ie>gt?(le.addRange(ie),le.extend(Z.node,Z.offset)):(ie.setEnd(Z.node,Z.offset),le.addRange(ie))}}}}for(pe=[],le=C;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<pe.length;C++){var ge=pe[C];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}ih=!!Bp,jp=Bp=null}finally{ct=g,K.p=u,M.T=o}}r.current=s,fn=2}}function bb(){if(fn===2){fn=0;var r=xs,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var u=K.p;K.p=2;var g=ct;ct|=4;try{W_(r,s.alternate,s)}finally{ct=g,K.p=u,M.T=o}}fn=3}}function Eb(){if(fn===4||fn===3){fn=0,Lt();var r=xs,s=Ho,o=qo,u=lb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?fn=5:(fn=0,Ho=xs=null,wb(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(ws=null),ss(o),s=s.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(at,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=M.T,g=K.p,K.p=2,M.T=null;try{for(var m=r.onRecoverableError,w=0;w<u.length;w++){var C=u[w];m(C.value,{componentStack:C.stack})}}finally{M.T=s,K.p=g}}(qo&3)!==0&&Gd(),ui(r),g=r.pendingLanes,(o&4194090)!==0&&(g&42)!==0?r===Ap?Rc++:(Rc=0,Ap=r):Rc=0,Nc(0)}}function wb(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,oc(s)))}function Gd(r){return _b(),bb(),Eb(),xb()}function xb(){if(fn!==5)return!1;var r=xs,s=Tp;Tp=0;var o=ss(qo),u=M.T,g=K.p;try{K.p=32>o?32:o,M.T=null,o=Sp,Sp=null;var m=xs,w=qo;if(fn=0,Ho=xs=null,qo=0,(ct&6)!==0)throw Error(i(331));var C=ct;if(ct|=4,ab(m.current),rb(m,m.current,w,o),ct=C,Nc(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(at,m)}catch{}return!0}finally{K.p=g,M.T=u,wb(r,s)}}function Tb(r,s,o){s=br(o,s),s=ip(r.stateNode,s,2),r=fs(r,s,2),r!==null&&(ur(r,2),ui(r))}function pt(r,s,o){if(r.tag===3)Tb(r,r,o);else for(;s!==null;){if(s.tag===3){Tb(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ws===null||!ws.has(u))){r=br(o,r),o=N_(2),u=fs(s,o,2),u!==null&&(C_(o,u,s,r),ur(u,2),ui(u));break}}s=s.return}}function Ip(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new cR;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(o)||(bp=!0,g.add(o),r=gR.bind(null,r,s,o),s.then(r,r))}function gR(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,yt===r&&(Ze&o)===o&&(Ct===4||Ct===3&&(Ze&62914560)===Ze&&300>ze()-xp?(ct&2)===0&&$o(r,0):Ep|=o,jo===Ze&&(jo=0)),ui(r)}function Sb(r,s){s===0&&(s=Ir()),r=Ao(r,s),r!==null&&(ur(r,s),ui(r))}function pR(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Sb(r,o)}function mR(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,g=r.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Sb(r,o)}function yR(r,s){return Le(r,s)}var Yd=null,Go=null,kp=!1,Kd=!1,Dp=!1,La=0;function ui(r){r!==Go&&r.next===null&&(Go===null?Yd=Go=r:Go=Go.next=r),Kd=!0,kp||(kp=!0,_R())}function Nc(r,s){if(!Dp&&Kd){Dp=!0;do for(var o=!1,u=Yd;u!==null;){if(r!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var w=u.suspendedLanes,C=u.pingedLanes;m=(1<<31-Et(42|r)+1)-1,m&=g&~(w&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Cb(u,m))}else m=Ze,m=cn(u,u===yt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||In(u,m)||(o=!0,Cb(u,m));u=u.next}while(o);Dp=!1}}function vR(){Ab()}function Ab(){Kd=kp=!1;var r=0;La!==0&&(RR()&&(r=La),La=0);for(var s=ze(),o=null,u=Yd;u!==null;){var g=u.next,m=Rb(u,s);m===0?(u.next=null,o===null?Yd=g:o.next=g,g===null&&(Go=o)):(o=u,(r!==0||(m&3)!==0)&&(Kd=!0)),u=g}Nc(r)}function Rb(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,g=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var w=31-Et(m),C=1<<w,F=g[w];F===-1?((C&o)===0||(C&u)!==0)&&(g[w]=xi(C,s)):F<=s&&(r.expiredLanes|=C),m&=~C}if(s=yt,o=Ze,o=cn(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(ut===2||ut===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&tt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||In(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&tt(u),ss(o)){case 2:case 8:o=vn;break;case 32:o=Gt;break;case 268435456:o=An;break;default:o=Gt}return u=Nb.bind(null,r),o=Le(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&tt(u),r.callbackPriority=2,r.callbackNode=null,2}function Nb(r,s){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Gd()&&r.callbackNode!==o)return null;var u=Ze;return u=cn(r,r===yt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(ub(r,u,s),Rb(r,ze()),r.callbackNode!=null&&r.callbackNode===o?Nb.bind(null,r):null)}function Cb(r,s){if(Gd())return null;ub(r,s,!0)}function _R(){CR(function(){(ct&6)!==0?Le(At,vR):Ab()})}function Mp(){return La===0&&(La=Ti()),La}function Ib(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:go(""+r)}function kb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function bR(r,s,o,u,g){if(s==="submit"&&o&&o.stateNode===g){var m=Ib((g[Rt]||null).action),w=u.submitter;w&&(s=(s=w[Rt]||null)?Ib(s.formAction):w.getAttribute("formAction"),s!==null&&(m=s,w=null));var C=new po("action","action",null,u,g);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(La!==0){var F=w?kb(g,w):new FormData(g);Jg(o,{pending:!0,data:F,method:g.method,action:m},null,F)}}else typeof m=="function"&&(C.preventDefault(),F=w?kb(g,w):new FormData(g),Jg(o,{pending:!0,data:F,method:g.method,action:m},m,F))},currentTarget:g}]})}}for(var Op=0;Op<vg.length;Op++){var Pp=vg[Op],ER=Pp.toLowerCase(),wR=Pp[0].toUpperCase()+Pp.slice(1);Or(ER,"on"+wR)}Or(uv,"onAnimationEnd"),Or(dv,"onAnimationIteration"),Or(hv,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(U2,"onTransitionRun"),Or(B2,"onTransitionStart"),Or(j2,"onTransitionCancel"),Or(fv,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function Db(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],g=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var w=u.length-1;0<=w;w--){var C=u[w],F=C.instance,ae=C.currentTarget;if(C=C.listener,F!==m&&g.isPropagationStopped())break e;m=C,g.currentTarget=ae;try{m(g)}catch(he){Pd(he)}g.currentTarget=null,m=F}else for(w=0;w<u.length;w++){if(C=u[w],F=C.instance,ae=C.currentTarget,C=C.listener,F!==m&&g.isPropagationStopped())break e;m=C,g.currentTarget=ae;try{m(g)}catch(he){Pd(he)}g.currentTarget=null,m=F}}}}function Ye(r,s){var o=s[ca];o===void 0&&(o=s[ca]=new Set);var u=r+"__bubble";o.has(u)||(Mb(s,r,2,!1),o.add(u))}function Vp(r,s,o){var u=0;s&&(u|=4),Mb(o,r,u,s)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Lp(r){if(!r[Xd]){r[Xd]=!0,ua.forEach(function(o){o!=="selectionchange"&&(xR.has(o)||Vp(o,!1,r),Vp(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Xd]||(s[Xd]=!0,Vp("selectionchange",!1,s))}}function Mb(r,s,o,u){switch(rE(s)){case 2:var g=QR;break;case 8:g=WR;break;default:g=Wp}o=g.bind(null,s,o,r),g=void 0,!vr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?r.addEventListener(s,o,{capture:!0,passive:g}):r.addEventListener(s,o,!0):g!==void 0?r.addEventListener(s,o,{passive:g}):r.addEventListener(s,o,!1)}function zp(r,s,o,u,g){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var C=u.stateNode.containerInfo;if(C===g)break;if(w===4)for(w=u.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;C!==null;){if(w=hr(C),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){u=m=w;continue e}C=C.parentNode}}u=u.return}Wu(function(){var ae=m,he=yr(o),pe=[];e:{var oe=gv.get(r);if(oe!==void 0){var le=po,Oe=r;switch(r){case"keypress":if(ti(o)===0)break e;case"keydown":case"keyup":le=Eo;break;case"focusin":Oe="focus",le=vo;break;case"focusout":Oe="blur",le=vo;break;case"beforeblur":case"afterblur":le=vo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_r;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=ug;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=sd;break;case uv:case dv:case hv:le=_o;break;case fv:le=od;break;case"scroll":case"scrollend":le=Zu;break;case"wheel":le=wo;break;case"copy":case"cut":case"paste":le=bo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Jl;break;case"toggle":case"beforetoggle":le=cd}var Ie=(s&4)!==0,gt=!Ie&&(r==="scroll"||r==="scrollend"),ee=Ie?oe!==null?oe+"Capture":null:oe;Ie=[];for(var Z=ae,ie;Z!==null;){var ge=Z;if(ie=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ie===null||ee===null||(ge=ma(Z,ee),ge!=null&&Ie.push(Ic(Z,ge,ie))),gt)break;Z=Z.return}0<Ie.length&&(oe=new le(oe,Oe,null,o,he),pe.push({event:oe,listeners:Ie}))}}if((s&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",oe&&o!==Ni&&(Oe=o.relatedTarget||o.fromElement)&&(hr(Oe)||Oe[Vn]))break e;if((le||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,le?(Oe=o.relatedTarget||o.toElement,le=ae,Oe=Oe?hr(Oe):null,Oe!==null&&(gt=l(Oe),Ie=Oe.tag,Oe!==gt||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(le=null,Oe=ae),le!==Oe)){if(Ie=_r,ge="onMouseLeave",ee="onMouseEnter",Z="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=Jl,ge="onPointerLeave",ee="onPointerEnter",Z="pointer"),gt=le==null?oe:gr(le),ie=Oe==null?oe:gr(Oe),oe=new Ie(ge,Z+"leave",le,o,he),oe.target=gt,oe.relatedTarget=ie,ge=null,hr(he)===ae&&(Ie=new Ie(ee,Z+"enter",Oe,o,he),Ie.target=ie,Ie.relatedTarget=gt,ge=Ie),gt=ge,le&&Oe)t:{for(Ie=le,ee=Oe,Z=0,ie=Ie;ie;ie=Yo(ie))Z++;for(ie=0,ge=ee;ge;ge=Yo(ge))ie++;for(;0<Z-ie;)Ie=Yo(Ie),Z--;for(;0<ie-Z;)ee=Yo(ee),ie--;for(;Z--;){if(Ie===ee||ee!==null&&Ie===ee.alternate)break t;Ie=Yo(Ie),ee=Yo(ee)}Ie=null}else Ie=null;le!==null&&Ob(pe,oe,le,Ie,!1),Oe!==null&&gt!==null&&Ob(pe,gt,Oe,Ie,!0)}}e:{if(oe=ae?gr(ae):window,le=oe.nodeName&&oe.nodeName.toLowerCase(),le==="select"||le==="input"&&oe.type==="file")var Te=Jy;else if(Xt(oe))if(ev)Te=V2;else{Te=O2;var qe=M2}else le=oe.nodeName,!le||le.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&Gl(ae.elementType)&&(Te=Jy):Te=P2;if(Te&&(Te=Te(r,ae))){Mi(pe,Te,o,he);break e}qe&&qe(r,oe,ae),r==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&ls(oe,"number",oe.value)}switch(qe=ae?gr(ae):window,r){case"focusin":(Xt(qe)||qe.contentEditable==="true")&&(xo=qe,pg=ae,nc=null);break;case"focusout":nc=pg=xo=null;break;case"mousedown":mg=!0;break;case"contextmenu":case"mouseup":case"dragend":mg=!1,lv(pe,o,he);break;case"selectionchange":if(z2)break;case"keydown":case"keyup":lv(pe,o,he)}var Re;if(ii)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Qe?ce(r,o)&&(ke="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ke="onCompositionStart");ke&&(E&&o.locale!=="ko"&&(Qe||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Qe&&(Re=Kl()):(ei=he,cs="value"in ei?ei.value:ei.textContent,Qe=!0)),qe=Qd(ae,ke),0<qe.length&&(ke=new Wl(ke,r,null,o,he),pe.push({event:ke,listeners:qe}),Re?ke.data=Re:(Re=be(o),Re!==null&&(ke.data=Re)))),(Re=v?Kt(r,o):We(r,o))&&(ke=Qd(ae,"onBeforeInput"),0<ke.length&&(qe=new Wl("onBeforeInput","beforeinput",null,o,he),pe.push({event:qe,listeners:ke}),qe.data=Re)),bR(pe,r,ae,o,he)}Db(pe,s)})}function Ic(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Qd(r,s){for(var o=s+"Capture",u=[];r!==null;){var g=r,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=ma(r,o),g!=null&&u.unshift(Ic(r,g,m)),g=ma(r,s),g!=null&&u.push(Ic(r,g,m))),r.tag===3)return u;r=r.return}return[]}function Yo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ob(r,s,o,u,g){for(var m=s._reactName,w=[];o!==null&&o!==u;){var C=o,F=C.alternate,ae=C.stateNode;if(C=C.tag,F!==null&&F===u)break;C!==5&&C!==26&&C!==27||ae===null||(F=ae,g?(ae=ma(o,m),ae!=null&&w.unshift(Ic(o,ae,F))):g||(ae=ma(o,m),ae!=null&&w.push(Ic(o,ae,F)))),o=o.return}w.length!==0&&r.push({event:s,listeners:w})}var TR=/\r\n?/g,SR=/\u0000|\uFFFD/g;function Pb(r){return(typeof r=="string"?r:""+r).replace(TR,`
`).replace(SR,"")}function Vb(r,s){return s=Pb(s),Pb(r)===s}function Wd(){}function ft(r,s,o,u,g,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||mr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&mr(r,""+u);break;case"className":pr(r,"class",u);break;case"tabIndex":pr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(r,o,u);break;case"style":Fl(r,u,m);break;case"data":if(s!=="object"){pr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=go(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&ft(r,s,"name",g.name,g,null),ft(r,s,"formEncType",g.formEncType,g,null),ft(r,s,"formMethod",g.formMethod,g,null),ft(r,s,"formTarget",g.formTarget,g,null)):(ft(r,s,"encType",g.encType,g,null),ft(r,s,"method",g.method,g,null),ft(r,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=go(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Wd);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=go(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),Qr(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qr(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=lg.get(o)||o,Qr(r,o,u))}}function Up(r,s,o,u,g,m){switch(o){case"style":Fl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?mr(r,u):(typeof u=="number"||typeof u=="bigint")&&mr(r,""+u);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Wd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!as.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),s=o.slice(2,g?o.length-7:void 0),m=r[Rt]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,g);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Qr(r,o,u)}}}function gn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var u=!1,g=!1,m;for(m in o)if(o.hasOwnProperty(m)){var w=o[m];if(w!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,m,w,o,null)}}g&&ft(r,s,"srcSet",o.srcSet,o,null),u&&ft(r,s,"src",o.src,o,null);return;case"input":Ye("invalid",r);var C=m=w=g=null,F=null,ae=null;for(u in o)if(o.hasOwnProperty(u)){var he=o[u];if(he!=null)switch(u){case"name":g=he;break;case"type":w=he;break;case"checked":F=he;break;case"defaultChecked":ae=he;break;case"value":m=he;break;case"defaultValue":C=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,s));break;default:ft(r,s,u,he,o,null)}}fa(r,m,C,F,ae,w,g,!1),fo(r);return;case"select":Ye("invalid",r),u=w=m=null;for(g in o)if(o.hasOwnProperty(g)&&(C=o[g],C!=null))switch(g){case"value":m=C;break;case"defaultValue":w=C;break;case"multiple":u=C;default:ft(r,s,g,C,o,null)}s=m,o=w,r.multiple=!!u,s!=null?Ri(r,!!u,s,!1):o!=null&&Ri(r,!!u,o,!0);return;case"textarea":Ye("invalid",r),m=g=u=null;for(w in o)if(o.hasOwnProperty(w)&&(C=o[w],C!=null))switch(w){case"value":u=C;break;case"defaultValue":g=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:ft(r,s,w,C,o,null)}ga(r,u,g,m),fo(r);return;case"option":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ft(r,s,F,u,o,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(u=0;u<Cc.length;u++)Ye(Cc[u],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in o)if(o.hasOwnProperty(ae)&&(u=o[ae],u!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ft(r,s,ae,u,o,null)}return;default:if(Gl(s)){for(he in o)o.hasOwnProperty(he)&&(u=o[he],u!==void 0&&Up(r,s,he,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&ft(r,s,C,u,o,null))}function AR(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,w=null,C=null,F=null,ae=null,he=null;for(le in o){var pe=o[le];if(o.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":F=pe;default:u.hasOwnProperty(le)||ft(r,s,le,null,u,pe)}}for(var oe in u){var le=u[oe];if(pe=o[oe],u.hasOwnProperty(oe)&&(le!=null||pe!=null))switch(oe){case"type":m=le;break;case"name":g=le;break;case"checked":ae=le;break;case"defaultChecked":he=le;break;case"value":w=le;break;case"defaultValue":C=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,s));break;default:le!==pe&&ft(r,s,oe,le,u,pe)}}Xn(r,w,C,F,ae,he,m,g);return;case"select":le=w=C=oe=null;for(m in o)if(F=o[m],o.hasOwnProperty(m)&&F!=null)switch(m){case"value":break;case"multiple":le=F;default:u.hasOwnProperty(m)||ft(r,s,m,null,u,F)}for(g in u)if(m=u[g],F=o[g],u.hasOwnProperty(g)&&(m!=null||F!=null))switch(g){case"value":oe=m;break;case"defaultValue":C=m;break;case"multiple":w=m;default:m!==F&&ft(r,s,g,m,u,F)}s=C,o=w,u=le,oe!=null?Ri(r,!!o,oe,!1):!!u!=!!o&&(s!=null?Ri(r,!!o,s,!0):Ri(r,!!o,o?[]:"",!1));return;case"textarea":le=oe=null;for(C in o)if(g=o[C],o.hasOwnProperty(C)&&g!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ft(r,s,C,null,u,g)}for(w in u)if(g=u[w],m=o[w],u.hasOwnProperty(w)&&(g!=null||m!=null))switch(w){case"value":oe=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==m&&ft(r,s,w,g,u,m)}dt(r,oe,le);return;case"option":for(var Oe in o)if(oe=o[Oe],o.hasOwnProperty(Oe)&&oe!=null&&!u.hasOwnProperty(Oe))switch(Oe){case"selected":r.selected=!1;break;default:ft(r,s,Oe,null,u,oe)}for(F in u)if(oe=u[F],le=o[F],u.hasOwnProperty(F)&&oe!==le&&(oe!=null||le!=null))switch(F){case"selected":r.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ft(r,s,F,oe,u,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)oe=o[Ie],o.hasOwnProperty(Ie)&&oe!=null&&!u.hasOwnProperty(Ie)&&ft(r,s,Ie,null,u,oe);for(ae in u)if(oe=u[ae],le=o[ae],u.hasOwnProperty(ae)&&oe!==le&&(oe!=null||le!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:ft(r,s,ae,oe,u,le)}return;default:if(Gl(s)){for(var gt in o)oe=o[gt],o.hasOwnProperty(gt)&&oe!==void 0&&!u.hasOwnProperty(gt)&&Up(r,s,gt,void 0,u,oe);for(he in u)oe=u[he],le=o[he],!u.hasOwnProperty(he)||oe===le||oe===void 0&&le===void 0||Up(r,s,he,oe,u,le);return}}for(var ee in o)oe=o[ee],o.hasOwnProperty(ee)&&oe!=null&&!u.hasOwnProperty(ee)&&ft(r,s,ee,null,u,oe);for(pe in u)oe=u[pe],le=o[pe],!u.hasOwnProperty(pe)||oe===le||oe==null&&le==null||ft(r,s,pe,oe,u,le)}var Bp=null,jp=null;function Zd(r){return r.nodeType===9?r:r.ownerDocument}function Lb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Hp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qp=null;function RR(){var r=window.event;return r&&r.type==="popstate"?r===qp?!1:(qp=r,!0):(qp=null,!1)}var Ub=typeof setTimeout=="function"?setTimeout:void 0,NR=typeof clearTimeout=="function"?clearTimeout:void 0,Bb=typeof Promise=="function"?Promise:void 0,CR=typeof queueMicrotask=="function"?queueMicrotask:typeof Bb<"u"?function(r){return Bb.resolve(null).then(r).catch(IR)}:Ub;function IR(r){setTimeout(function(){throw r})}function Ss(r){return r==="head"}function jb(r,s){var o=s,u=0,g=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var w=r.ownerDocument;if(o&1&&kc(w.documentElement),o&2&&kc(w.body),o&4)for(o=w.head,kc(o),w=o.firstChild;w;){var C=w.nextSibling,F=w.nodeName;w[Si]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=C}}if(g===0){r.removeChild(m),Uc(s);return}g--}else o==="$"||o==="$?"||o==="$!"?g++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Uc(s)}function $p(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":$p(o),Xr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function kR(r,s,o,u){for(;r.nodeType===1;){var g=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Si])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Vr(r.nextSibling),r===null)break}return null}function DR(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Vr(r.nextSibling),r===null))return null;return r}function Fp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function MR(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Vr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Gp=null;function Hb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function qb(r,s,o){switch(s=Zd(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function kc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Xr(r)}var Ar=new Map,$b=new Set;function Jd(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Gi=K.d;K.d={f:OR,r:PR,D:VR,C:LR,L:zR,m:UR,X:jR,S:BR,M:HR};function OR(){var r=Gi.f(),s=$d();return r||s}function PR(r){var s=fr(r);s!==null&&s.tag===5&&s.type==="form"?u_(s):Gi.r(r)}var Ko=typeof document>"u"?null:document;function Fb(r,s,o){var u=Ko;if(u&&typeof s=="string"&&s){var g=Bt(s);g='link[rel="'+r+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),$b.has(g)||($b.add(g),r={rel:r,crossOrigin:o,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function VR(r){Gi.D(r),Fb("dns-prefetch",r,null)}function LR(r,s){Gi.C(r,s),Fb("preconnect",r,s)}function zR(r,s,o){Gi.L(r,s,o);var u=Ko;if(u&&r&&s){var g='link[rel="preload"][as="'+Bt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Bt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Bt(o.imageSizes)+'"]')):g+='[href="'+Bt(r)+'"]';var m=g;switch(s){case"style":m=Xo(r);break;case"script":m=Qo(r)}Ar.has(m)||(r=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Ar.set(m,r),u.querySelector(g)!==null||s==="style"&&u.querySelector(Dc(m))||s==="script"&&u.querySelector(Mc(m))||(s=u.createElement("link"),gn(s,"link",r),wt(s),u.head.appendChild(s)))}}function UR(r,s){Gi.m(r,s);var o=Ko;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Bt(u)+'"][href="'+Bt(r)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Qo(r)}if(!Ar.has(m)&&(r=y({rel:"modulepreload",href:r},s),Ar.set(m,r),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Mc(m)))return}u=o.createElement("link"),gn(u,"link",r),wt(u),o.head.appendChild(u)}}}function BR(r,s,o){Gi.S(r,s,o);var u=Ko;if(u&&r){var g=un(u).hoistableStyles,m=Xo(r);s=s||"default";var w=g.get(m);if(!w){var C={loading:0,preload:null};if(w=u.querySelector(Dc(m)))C.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Ar.get(m))&&Yp(r,o);var F=w=u.createElement("link");wt(F),gn(F,"link",r),F._p=new Promise(function(ae,he){F.onload=ae,F.onerror=he}),F.addEventListener("load",function(){C.loading|=1}),F.addEventListener("error",function(){C.loading|=2}),C.loading|=4,eh(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:C},g.set(m,w)}}}function jR(r,s){Gi.X(r,s);var o=Ko;if(o&&r){var u=un(o).hoistableScripts,g=Qo(r),m=u.get(g);m||(m=o.querySelector(Mc(g)),m||(r=y({src:r,async:!0},s),(s=Ar.get(g))&&Kp(r,s),m=o.createElement("script"),wt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function HR(r,s){Gi.M(r,s);var o=Ko;if(o&&r){var u=un(o).hoistableScripts,g=Qo(r),m=u.get(g);m||(m=o.querySelector(Mc(g)),m||(r=y({src:r,async:!0,type:"module"},s),(s=Ar.get(g))&&Kp(r,s),m=o.createElement("script"),wt(m),gn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function Gb(r,s,o,u){var g=(g=ue.current)?Jd(g):null;if(!g)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Xo(o.href),o=un(g).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Xo(o.href);var m=un(g).hoistableStyles,w=m.get(r);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,w),(m=g.querySelector(Dc(r)))&&!m._p&&(w.instance=m,w.state.loading=5),Ar.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ar.set(r,o),m||qR(g,r,o,w.state))),s&&u===null)throw Error(i(528,""));return w}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qo(o),o=un(g).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Xo(r){return'href="'+Bt(r)+'"'}function Dc(r){return'link[rel="stylesheet"]['+r+"]"}function Yb(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function qR(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),gn(s,"link",o),wt(s),r.head.appendChild(s))}function Qo(r){return'[src="'+Bt(r)+'"]'}function Mc(r){return"script[async]"+r}function Kb(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Bt(o.href)+'"]');if(u)return s.instance=u,wt(u),u;var g=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),wt(u),gn(u,"style",g),eh(u,o.precedence,r),s.instance=u;case"stylesheet":g=Xo(o.href);var m=r.querySelector(Dc(g));if(m)return s.state.loading|=4,s.instance=m,wt(m),m;u=Yb(o),(g=Ar.get(g))&&Yp(u,g),m=(r.ownerDocument||r).createElement("link"),wt(m);var w=m;return w._p=new Promise(function(C,F){w.onload=C,w.onerror=F}),gn(m,"link",u),s.state.loading|=4,eh(m,o.precedence,r),s.instance=m;case"script":return m=Qo(o.src),(g=r.querySelector(Mc(m)))?(s.instance=g,wt(g),g):(u=o,(g=Ar.get(m))&&(u=y({},o),Kp(u,g)),r=r.ownerDocument||r,g=r.createElement("script"),wt(g),gn(g,"link",u),r.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,eh(u,o.precedence,r));return s.instance}function eh(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,w=0;w<u.length;w++){var C=u[w];if(C.dataset.precedence===s)m=C;else if(m!==g)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Yp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Kp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var th=null;function Xb(r,s,o){if(th===null){var u=new Map,g=th=new Map;g.set(o,u)}else g=th,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),g=0;g<o.length;g++){var m=o[g];if(!(m[Si]||m[Mt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(s)||"";w=r+w;var C=u.get(w);C?C.push(m):u.set(w,[m])}}return u}function Qb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function $R(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Wb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Oc=null;function FR(){}function GR(r,s,o){if(Oc===null)throw Error(i(475));var u=Oc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var g=Xo(o.href),m=r.querySelector(Dc(g));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=nh.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,wt(m);return}m=r.ownerDocument||r,o=Yb(o),(g=Ar.get(g))&&Yp(o,g),m=m.createElement("link"),wt(m);var w=m;w._p=new Promise(function(C,F){w.onload=C,w.onerror=F}),gn(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=nh.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function YR(){if(Oc===null)throw Error(i(475));var r=Oc;return r.stylesheets&&r.count===0&&Xp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Xp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function nh(){if(this.count--,this.count===0){if(this.stylesheets)Xp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var rh=null;function Xp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,rh=new Map,s.forEach(KR,r),rh=null,nh.call(r))}function KR(r,s){if(!(s.state.loading&4)){var o=rh.get(r);if(o)var u=o.get(null);else{o=new Map,rh.set(r,o);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var w=g[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}g=s.instance,w=g.getAttribute("data-precedence"),m=o.get(w)||u,m===u&&o.set(null,g),o.set(w,g),this.count++,u=nh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),s.state.loading|=4}}var Pc={$$typeof:G,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function XR(r,s,o,u,g,m,w,C){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Zb(r,s,o,u,g,m,w,C,F,ae,he,pe){return r=new XR(r,s,o,w,C,F,ae,pe),s=1,m===!0&&(s|=24),m=Wn(3,null,null,s),r.current=m,m.stateNode=r,s=Ig(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},Og(m),r}function Jb(r){return r?(r=Ro,r):Ro}function eE(r,s,o,u,g,m){g=Jb(g),u.context===null?u.context=g:u.pendingContext=g,u=hs(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=fs(r,u,s),o!==null&&(nr(o,r,s),dc(o,r,s))}function tE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Qp(r,s){tE(r,s),(r=r.alternate)&&tE(r,s)}function nE(r){if(r.tag===13){var s=Ao(r,67108864);s!==null&&nr(s,r,67108864),Qp(r,67108864)}}var ih=!0;function QR(r,s,o,u){var g=M.T;M.T=null;var m=K.p;try{K.p=2,Wp(r,s,o,u)}finally{K.p=m,M.T=g}}function WR(r,s,o,u){var g=M.T;M.T=null;var m=K.p;try{K.p=8,Wp(r,s,o,u)}finally{K.p=m,M.T=g}}function Wp(r,s,o,u){if(ih){var g=Zp(u);if(g===null)zp(r,s,u,sh,o),iE(r,u);else if(JR(g,r,s,o,u))u.stopPropagation();else if(iE(r,u),s&4&&-1<ZR.indexOf(r)){for(;g!==null;){var m=fr(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=en(m.pendingLanes);if(w!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var F=1<<31-Et(w);C.entanglements[1]|=F,w&=~F}ui(m),(ct&6)===0&&(Hd=ze()+500,Nc(0))}}break;case 13:C=Ao(m,2),C!==null&&nr(C,m,2),$d(),Qp(m,2)}if(m=Zp(u),m===null&&zp(r,s,u,sh,o),m===g)break;g=m}g!==null&&u.stopPropagation()}else zp(r,s,u,null,o)}}function Zp(r){return r=yr(r),Jp(r)}var sh=null;function Jp(r){if(sh=null,r=hr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return sh=r,null}function rE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case At:return 2;case vn:return 8;case Gt:case Fn:return 32;case An:return 268435456;default:return 32}default:return 32}}var em=!1,As=null,Rs=null,Ns=null,Vc=new Map,Lc=new Map,Cs=[],ZR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iE(r,s){switch(r){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":Vc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(s.pointerId)}}function zc(r,s,o,u,g,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},s!==null&&(s=fr(s),s!==null&&nE(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),r)}function JR(r,s,o,u,g){switch(s){case"focusin":return As=zc(As,r,s,o,u,g),!0;case"dragenter":return Rs=zc(Rs,r,s,o,u,g),!0;case"mouseover":return Ns=zc(Ns,r,s,o,u,g),!0;case"pointerover":var m=g.pointerId;return Vc.set(m,zc(Vc.get(m)||null,r,s,o,u,g)),!0;case"gotpointercapture":return m=g.pointerId,Lc.set(m,zc(Lc.get(m)||null,r,s,o,u,g)),!0}return!1}function sE(r){var s=hr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,ao(r.priority,function(){if(o.tag===13){var u=tr();u=Gr(u);var g=Ao(o,u);g!==null&&nr(g,o,u),Qp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ah(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Zp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Ni=u,o.target.dispatchEvent(u),Ni=null}else return s=fr(o),s!==null&&nE(s),r.blockedOn=o,!1;s.shift()}return!0}function aE(r,s,o){ah(r)&&o.delete(s)}function eN(){em=!1,As!==null&&ah(As)&&(As=null),Rs!==null&&ah(Rs)&&(Rs=null),Ns!==null&&ah(Ns)&&(Ns=null),Vc.forEach(aE),Lc.forEach(aE)}function oh(r,s){r.blockedOn===s&&(r.blockedOn=null,em||(em=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,eN)))}var lh=null;function oE(r){lh!==r&&(lh=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){lh===r&&(lh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],g=r[s+2];if(typeof u!="function"){if(Jp(u||o)===null)continue;break}var m=fr(o);m!==null&&(r.splice(s,3),s-=3,Jg(m,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function Uc(r){function s(F){return oh(F,r)}As!==null&&oh(As,r),Rs!==null&&oh(Rs,r),Ns!==null&&oh(Ns,r),Vc.forEach(s),Lc.forEach(s);for(var o=0;o<Cs.length;o++){var u=Cs[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Cs.length&&(o=Cs[0],o.blockedOn===null);)sE(o),o.blockedOn===null&&Cs.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],m=o[u+1],w=g[Rt]||null;if(typeof m=="function")w||oE(o);else if(w){var C=null;if(m&&m.hasAttribute("formAction")){if(g=m,w=m[Rt]||null)C=w.formAction;else if(Jp(g)!==null)continue}else C=w.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),oE(o)}}}function tm(r){this._internalRoot=r}ch.prototype.render=tm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=tr();eE(o,u,r,s,null,null)},ch.prototype.unmount=tm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;eE(r.current,2,null,r,null,null),$d(),s[Vn]=null}};function ch(r){this._internalRoot=r}ch.prototype.unstable_scheduleHydration=function(r){if(r){var s=Yr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Cs.length&&s!==0&&s<Cs[o].priority;o++);Cs.splice(o,0,r),o===0&&sE(r)}};var lE=e.version;if(lE!=="19.1.0")throw Error(i(527,lE,"19.1.0"));K.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var tN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uh.isDisabled&&uh.supportsFiber)try{at=uh.inject(tN),Fe=uh}catch{}}return jc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",g=T_,m=S_,w=A_,C=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=Zb(r,1,!1,null,null,o,u,g,m,w,C,null),r[Vn]=s.current,Lp(r),new tm(s)},jc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,g="",m=T_,w=S_,C=A_,F=null,ae=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(F=o.unstable_transitionCallbacks),o.formState!==void 0&&(ae=o.formState)),s=Zb(r,1,!0,s,o??null,u,g,m,w,C,F,ae),s.context=Jb(null),o=s.current,u=tr(),u=Gr(u),g=hs(u),g.callback=null,fs(o,g,u),o=u,s.current.lanes=o,ur(s,o),ui(s),r[Vn]=s.current,Lp(r),new ch(s)},jc.version="19.1.0",jc}var vE;function hN(){if(vE)return im.exports;vE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),im.exports=dN(),im.exports}var fN=hN();function Pn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Pn(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var lm={exports:{}},cm={},um={exports:{}},dm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _E;function gN(){if(_E)return dm;_E=1;var t=Mu();function e(_,b){return _===b&&(_!==0||1/_===1/b)||_!==_&&b!==b}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function d(_,b){var x=b(),R=i({inst:{value:x,getSnapshot:b}}),D=R[0].inst,k=R[1];return l(function(){D.value=x,D.getSnapshot=b,f(D)&&k({inst:D})},[_,x,b]),a(function(){return f(D)&&k({inst:D}),_(function(){f(D)&&k({inst:D})})},[_]),c(x),x}function f(_){var b=_.getSnapshot;_=_.value;try{var x=b();return!n(_,x)}catch{return!0}}function p(_,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return dm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,dm}var bE;function pN(){return bE||(bE=1,um.exports=gN()),um.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function mN(){if(EE)return cm;EE=1;var t=Mu(),e=pN();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,d=t.useMemo,f=t.useDebugValue;return cm.useSyncExternalStoreWithSelector=function(p,y,_,b,x){var R=l(null);if(R.current===null){var D={hasValue:!1,value:null};R.current=D}else D=R.current;R=d(function(){function U(Y){if(!H){if(H=!0,G=Y,Y=b(Y),x!==void 0&&D.hasValue){var I=D.value;if(x(I,Y))return j=I}return j=Y}if(I=j,i(G,Y))return I;var T=b(Y);return x!==void 0&&x(I,T)?(G=Y,I):(G=Y,j=T)}var H=!1,G,j,Q=_===void 0?null:_;return[function(){return U(y())},Q===null?void 0:function(){return U(Q())}]},[y,_,b,x]);var k=a(p,R[0],R[1]);return c(function(){D.hasValue=!0,D.value=k},[k]),f(k),k},cm}var wE;function yN(){return wE||(wE=1,lm.exports=mN()),lm.exports}var vN=yN();const _N=l1(vN),bN={},xE=t=>{let e;const n=new Set,i=(y,_)=>{const b=typeof y=="function"?y(e):y;if(!Object.is(b,e)){const x=e;e=_??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(R=>R(e,x))}},a=()=>e,f={setState:i,getState:a,getInitialState:()=>p,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(bN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=e=t(i,a,f);return f},EN=t=>t?xE(t):xE,{useDebugValue:wN}=fe,{useSyncExternalStoreWithSelector:xN}=_N,TN=t=>t;function u1(t,e=TN,n){const i=xN(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return wN(i),i}const TE=(t,e)=>{const n=EN(t),i=(a,l=e)=>u1(n,a,l);return Object.assign(i,n),i},SN=(t,e)=>t?TE(t,e):TE;function Tn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,a]of t)if(!Object.is(a,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var AN={value:()=>{}};function Rf(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Dh(n)}function Dh(t){this._=t}function RN(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",a=n.indexOf(".");if(a>=0&&(i=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Dh.prototype=Rf.prototype={constructor:Dh,on:function(t,e){var n=this._,i=RN(t+"",n),a,l=-1,c=i.length;if(arguments.length<2){for(;++l<c;)if((a=(t=i[l]).type)&&(a=NN(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<c;)if(a=(t=i[l]).type)n[a]=SE(n[a],t.name,e);else if(e==null)for(a in n)n[a]=SE(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dh(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),i=0,a,l;i<a;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,a=l.length;i<a;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,l=i.length;a<l;++a)i[a].value.apply(e,n)}};function NN(t,e){for(var n=0,i=t.length,a;n<i;++n)if((a=t[n]).name===e)return a.value}function SE(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=AN,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Um="http://www.w3.org/1999/xhtml";const AE={svg:"http://www.w3.org/2000/svg",xhtml:Um,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),AE.hasOwnProperty(e)?{space:AE[e],local:t}:t}function CN(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Um&&e.documentElement.namespaceURI===Um?e.createElement(t):e.createElementNS(n,t)}}function IN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function d1(t){var e=Nf(t);return(e.local?IN:CN)(e)}function kN(){}function k0(t){return t==null?kN:function(){return this.querySelector(t)}}function DN(t){typeof t!="function"&&(t=k0(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=new Array(c),f,p,y=0;y<c;++y)(f=l[y])&&(p=t.call(f,f.__data__,y,l))&&("__data__"in f&&(p.__data__=f.__data__),d[y]=p);return new lr(i,this._parents)}function MN(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ON(){return[]}function h1(t){return t==null?ON:function(){return this.querySelectorAll(t)}}function PN(t){return function(){return MN(t.apply(this,arguments))}}function VN(t){typeof t=="function"?t=PN(t):t=h1(t);for(var e=this._groups,n=e.length,i=[],a=[],l=0;l<n;++l)for(var c=e[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&(i.push(t.call(f,f.__data__,p,c)),a.push(f));return new lr(i,a)}function f1(t){return function(){return this.matches(t)}}function g1(t){return function(e){return e.matches(t)}}var LN=Array.prototype.find;function zN(t){return function(){return LN.call(this.children,t)}}function UN(){return this.firstElementChild}function BN(t){return this.select(t==null?UN:zN(typeof t=="function"?t:g1(t)))}var jN=Array.prototype.filter;function HN(){return Array.from(this.children)}function qN(t){return function(){return jN.call(this.children,t)}}function $N(t){return this.selectAll(t==null?HN:qN(typeof t=="function"?t:g1(t)))}function FN(t){typeof t!="function"&&(t=f1(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new lr(i,this._parents)}function p1(t){return new Array(t.length)}function GN(){return new lr(this._enter||this._groups.map(p1),this._parents)}function Kh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Kh.prototype={constructor:Kh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function YN(t){return function(){return t}}function KN(t,e,n,i,a,l){for(var c=0,d,f=e.length,p=l.length;c<p;++c)(d=e[c])?(d.__data__=l[c],i[c]=d):n[c]=new Kh(t,l[c]);for(;c<f;++c)(d=e[c])&&(a[c]=d)}function XN(t,e,n,i,a,l,c){var d,f,p=new Map,y=e.length,_=l.length,b=new Array(y),x;for(d=0;d<y;++d)(f=e[d])&&(b[d]=x=c.call(f,f.__data__,d,e)+"",p.has(x)?a[d]=f:p.set(x,f));for(d=0;d<_;++d)x=c.call(t,l[d],d,l)+"",(f=p.get(x))?(i[d]=f,f.__data__=l[d],p.delete(x)):n[d]=new Kh(t,l[d]);for(d=0;d<y;++d)(f=e[d])&&p.get(b[d])===f&&(a[d]=f)}function QN(t){return t.__data__}function WN(t,e){if(!arguments.length)return Array.from(this,QN);var n=e?XN:KN,i=this._parents,a=this._groups;typeof t!="function"&&(t=YN(t));for(var l=a.length,c=new Array(l),d=new Array(l),f=new Array(l),p=0;p<l;++p){var y=i[p],_=a[p],b=_.length,x=ZN(t.call(y,y&&y.__data__,p,i)),R=x.length,D=d[p]=new Array(R),k=c[p]=new Array(R),U=f[p]=new Array(b);n(y,_,D,k,U,x,e);for(var H=0,G=0,j,Q;H<R;++H)if(j=D[H]){for(H>=G&&(G=H+1);!(Q=k[G])&&++G<R;);j._next=Q||null}}return c=new lr(c,i),c._enter=d,c._exit=f,c}function ZN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function JN(){return new lr(this._exit||this._groups.map(p1),this._parents)}function eC(t,e,n){var i=this.enter(),a=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?l.remove():n(l),i&&a?i.merge(a).order():a}function tC(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,a=n.length,l=i.length,c=Math.min(a,l),d=new Array(a),f=0;f<c;++f)for(var p=n[f],y=i[f],_=p.length,b=d[f]=new Array(_),x,R=0;R<_;++R)(x=p[R]||y[R])&&(b[R]=x);for(;f<a;++f)d[f]=n[f];return new lr(d,this._parents)}function nC(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],a=i.length-1,l=i[a],c;--a>=0;)(c=i[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function rC(t){t||(t=iC);function e(_,b){return _&&b?t(_.__data__,b.__data__):!_-!b}for(var n=this._groups,i=n.length,a=new Array(i),l=0;l<i;++l){for(var c=n[l],d=c.length,f=a[l]=new Array(d),p,y=0;y<d;++y)(p=c[y])&&(f[y]=p);f.sort(e)}return new lr(a,this._parents).order()}function iC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sC(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function aC(){return Array.from(this)}function oC(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length;a<l;++a){var c=i[a];if(c)return c}return null}function lC(){let t=0;for(const e of this)++t;return t}function cC(){return!this.node()}function uC(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var a=e[n],l=0,c=a.length,d;l<c;++l)(d=a[l])&&t.call(d,d.__data__,l,a);return this}function dC(t){return function(){this.removeAttribute(t)}}function hC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fC(t,e){return function(){this.setAttribute(t,e)}}function gC(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function pC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function mC(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function yC(t,e){var n=Nf(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?hC:dC:typeof e=="function"?n.local?mC:pC:n.local?gC:fC)(n,e))}function m1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vC(t){return function(){this.style.removeProperty(t)}}function _C(t,e,n){return function(){this.style.setProperty(t,e,n)}}function bC(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function EC(t,e,n){return arguments.length>1?this.each((e==null?vC:typeof e=="function"?bC:_C)(t,e,n??"")):wl(this.node(),t)}function wl(t,e){return t.style.getPropertyValue(e)||m1(t).getComputedStyle(t,null).getPropertyValue(e)}function wC(t){return function(){delete this[t]}}function xC(t,e){return function(){this[t]=e}}function TC(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function SC(t,e){return arguments.length>1?this.each((e==null?wC:typeof e=="function"?TC:xC)(t,e)):this.node()[t]}function y1(t){return t.trim().split(/^|\s+/)}function D0(t){return t.classList||new v1(t)}function v1(t){this._node=t,this._names=y1(t.getAttribute("class")||"")}v1.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _1(t,e){for(var n=D0(t),i=-1,a=e.length;++i<a;)n.add(e[i])}function b1(t,e){for(var n=D0(t),i=-1,a=e.length;++i<a;)n.remove(e[i])}function AC(t){return function(){_1(this,t)}}function RC(t){return function(){b1(this,t)}}function NC(t,e){return function(){(e.apply(this,arguments)?_1:b1)(this,t)}}function CC(t,e){var n=y1(t+"");if(arguments.length<2){for(var i=D0(this.node()),a=-1,l=n.length;++a<l;)if(!i.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?NC:e?AC:RC)(n,e))}function IC(){this.textContent=""}function kC(t){return function(){this.textContent=t}}function DC(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function MC(t){return arguments.length?this.each(t==null?IC:(typeof t=="function"?DC:kC)(t)):this.node().textContent}function OC(){this.innerHTML=""}function PC(t){return function(){this.innerHTML=t}}function VC(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function LC(t){return arguments.length?this.each(t==null?OC:(typeof t=="function"?VC:PC)(t)):this.node().innerHTML}function zC(){this.nextSibling&&this.parentNode.appendChild(this)}function UC(){return this.each(zC)}function BC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jC(){return this.each(BC)}function HC(t){var e=typeof t=="function"?t:d1(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function qC(){return null}function $C(t,e){var n=typeof t=="function"?t:d1(t),i=e==null?qC:typeof e=="function"?e:k0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function FC(){var t=this.parentNode;t&&t.removeChild(this)}function GC(){return this.each(FC)}function YC(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function KC(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function XC(t){return this.select(t?KC:YC)}function QC(t){return arguments.length?this.property("__data__",t):this.node().__data__}function WC(t){return function(e){t.call(this,e,this.__data__)}}function ZC(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function JC(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,a=e.length,l;n<a;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function eI(t,e,n){return function(){var i=this.__on,a,l=WC(e);if(i){for(var c=0,d=i.length;c<d;++c)if((a=i[c]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=e;return}}this.addEventListener(t.type,l,n),a={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(a):this.__on=[a]}}function tI(t,e,n){var i=ZC(t+""),a,l=i.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var f=0,p=d.length,y;f<p;++f)for(a=0,y=d[f];a<l;++a)if((c=i[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=e?eI:JC,a=0;a<l;++a)this.each(d(i[a],e,n));return this}function E1(t,e,n){var i=m1(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,n):(a=i.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function nI(t,e){return function(){return E1(this,t,e)}}function rI(t,e){return function(){return E1(this,t,e.apply(this,arguments))}}function iI(t,e){return this.each((typeof e=="function"?rI:nI)(t,e))}function*sI(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],a=0,l=i.length,c;a<l;++a)(c=i[a])&&(yield c)}var w1=[null];function lr(t,e){this._groups=t,this._parents=e}function Ou(){return new lr([[document.documentElement]],w1)}function aI(){return this}lr.prototype=Ou.prototype={constructor:lr,select:DN,selectAll:VN,selectChild:BN,selectChildren:$N,filter:FN,data:WN,enter:GN,exit:JN,join:eC,merge:tC,selection:aI,order:nC,sort:rC,call:sC,nodes:aC,node:oC,size:lC,empty:cC,each:uC,attr:yC,style:EC,property:SC,classed:CC,text:MC,html:LC,raise:UC,lower:jC,append:HC,insert:$C,remove:GC,clone:XC,datum:QC,on:tI,dispatch:iI,[Symbol.iterator]:sI};function Lr(t){return typeof t=="string"?new lr([[document.querySelector(t)]],[document.documentElement]):new lr([[t]],w1)}function oI(t){let e;for(;e=t.sourceEvent;)t=e;return t}function hi(t,e){if(t=oI(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const lI={passive:!1},fu={capture:!0,passive:!1};function hm(t){t.stopImmediatePropagation()}function hl(t){t.preventDefault(),t.stopImmediatePropagation()}function x1(t){var e=t.document.documentElement,n=Lr(t).on("dragstart.drag",hl,fu);"onselectstart"in e?n.on("selectstart.drag",hl,fu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function T1(t,e){var n=t.document.documentElement,i=Lr(t).on("dragstart.drag",null);e&&(i.on("click.drag",hl,fu),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const dh=t=>()=>t;function Bm(t,{sourceEvent:e,subject:n,target:i,identifier:a,active:l,x:c,y:d,dx:f,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Bm.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cI(t){return!t.ctrlKey&&!t.button}function uI(){return this.parentNode}function dI(t,e){return e??{x:t.x,y:t.y}}function hI(){return navigator.maxTouchPoints||"ontouchstart"in this}function fI(){var t=cI,e=uI,n=dI,i=hI,a={},l=Rf("start","drag","end"),c=0,d,f,p,y,_=0;function b(j){j.on("mousedown.drag",x).filter(i).on("touchstart.drag",k).on("touchmove.drag",U,lI).on("touchend.drag touchcancel.drag",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(j,Q){if(!(y||!t.call(this,j,Q))){var Y=G(this,e.call(this,j,Q),j,Q,"mouse");Y&&(Lr(j.view).on("mousemove.drag",R,fu).on("mouseup.drag",D,fu),x1(j.view),hm(j),p=!1,d=j.clientX,f=j.clientY,Y("start",j))}}function R(j){if(hl(j),!p){var Q=j.clientX-d,Y=j.clientY-f;p=Q*Q+Y*Y>_}a.mouse("drag",j)}function D(j){Lr(j.view).on("mousemove.drag mouseup.drag",null),T1(j.view,p),hl(j),a.mouse("end",j)}function k(j,Q){if(t.call(this,j,Q)){var Y=j.changedTouches,I=e.call(this,j,Q),T=Y.length,A,L;for(A=0;A<T;++A)(L=G(this,I,j,Q,Y[A].identifier,Y[A]))&&(hm(j),L("start",j,Y[A]))}}function U(j){var Q=j.changedTouches,Y=Q.length,I,T;for(I=0;I<Y;++I)(T=a[Q[I].identifier])&&(hl(j),T("drag",j,Q[I]))}function H(j){var Q=j.changedTouches,Y=Q.length,I,T;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),I=0;I<Y;++I)(T=a[Q[I].identifier])&&(hm(j),T("end",j,Q[I]))}function G(j,Q,Y,I,T,A){var L=l.copy(),z=hi(A||Y,Q),B,N,O;if((O=n.call(j,new Bm("beforestart",{sourceEvent:Y,target:b,identifier:T,active:c,x:z[0],y:z[1],dx:0,dy:0,dispatch:L}),I))!=null)return B=O.x-z[0]||0,N=O.y-z[1]||0,function $(M,K,te){var J=z,V;switch(M){case"start":a[T]=$,V=c++;break;case"end":delete a[T],--c;case"drag":z=hi(te||K,Q),V=c;break}L.call(M,j,new Bm(M,{sourceEvent:K,subject:O,target:b,identifier:T,active:V,x:z[0]+B,y:z[1]+N,dx:z[0]-J[0],dy:z[1]-J[1],dispatch:L}),I)}}return b.filter=function(j){return arguments.length?(t=typeof j=="function"?j:dh(!!j),b):t},b.container=function(j){return arguments.length?(e=typeof j=="function"?j:dh(j),b):e},b.subject=function(j){return arguments.length?(n=typeof j=="function"?j:dh(j),b):n},b.touchable=function(j){return arguments.length?(i=typeof j=="function"?j:dh(!!j),b):i},b.on=function(){var j=l.on.apply(l,arguments);return j===l?b:j},b.clickDistance=function(j){return arguments.length?(_=(j=+j)*j,b):Math.sqrt(_)},b}function M0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function S1(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Pu(){}var gu=.7,Xh=1/gu,fl="\\s*([+-]?\\d+)\\s*",pu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gI=/^#([0-9a-f]{3,8})$/,pI=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),mI=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),yI=new RegExp(`^rgba\\(${fl},${fl},${fl},${pu}\\)$`),vI=new RegExp(`^rgba\\(${gi},${gi},${gi},${pu}\\)$`),_I=new RegExp(`^hsl\\(${pu},${gi},${gi}\\)$`),bI=new RegExp(`^hsla\\(${pu},${gi},${gi},${pu}\\)$`),RE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M0(Pu,mu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:NE,formatHex:NE,formatHex8:EI,formatHsl:wI,formatRgb:CE,toString:CE});function NE(){return this.rgb().formatHex()}function EI(){return this.rgb().formatHex8()}function wI(){return A1(this).formatHsl()}function CE(){return this.rgb().formatRgb()}function mu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=gI.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?IE(e):n===3?new qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?hh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?hh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pI.exec(t))?new qn(e[1],e[2],e[3],1):(e=mI.exec(t))?new qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yI.exec(t))?hh(e[1],e[2],e[3],e[4]):(e=vI.exec(t))?hh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_I.exec(t))?ME(e[1],e[2]/100,e[3]/100,1):(e=bI.exec(t))?ME(e[1],e[2]/100,e[3]/100,e[4]):RE.hasOwnProperty(t)?IE(RE[t]):t==="transparent"?new qn(NaN,NaN,NaN,0):null}function IE(t){return new qn(t>>16&255,t>>8&255,t&255,1)}function hh(t,e,n,i){return i<=0&&(t=e=n=NaN),new qn(t,e,n,i)}function xI(t){return t instanceof Pu||(t=mu(t)),t?(t=t.rgb(),new qn(t.r,t.g,t.b,t.opacity)):new qn}function jm(t,e,n,i){return arguments.length===1?xI(t):new qn(t,e,n,i??1)}function qn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}M0(qn,jm,S1(Pu,{brighter(t){return t=t==null?Xh:Math.pow(Xh,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gu:Math.pow(gu,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qn($a(this.r),$a(this.g),$a(this.b),Qh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kE,formatHex:kE,formatHex8:TI,formatRgb:DE,toString:DE}));function kE(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}`}function TI(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}${ja((isNaN(this.opacity)?1:this.opacity)*255)}`}function DE(){const t=Qh(this.opacity);return`${t===1?"rgb(":"rgba("}${$a(this.r)}, ${$a(this.g)}, ${$a(this.b)}${t===1?")":`, ${t})`}`}function Qh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $a(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ja(t){return t=$a(t),(t<16?"0":"")+t.toString(16)}function ME(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zr(t,e,n,i)}function A1(t){if(t instanceof zr)return new zr(t.h,t.s,t.l,t.opacity);if(t instanceof Pu||(t=mu(t)),!t)return new zr;if(t instanceof zr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),l=Math.max(e,n,i),c=NaN,d=l-a,f=(l+a)/2;return d?(e===l?c=(n-i)/d+(n<i)*6:n===l?c=(i-e)/d+2:c=(e-n)/d+4,d/=f<.5?l+a:2-l-a,c*=60):d=f>0&&f<1?0:c,new zr(c,d,f,t.opacity)}function SI(t,e,n,i){return arguments.length===1?A1(t):new zr(t,e,n,i??1)}function zr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}M0(zr,SI,S1(Pu,{brighter(t){return t=t==null?Xh:Math.pow(Xh,t),new zr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gu:Math.pow(gu,t),new zr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new qn(fm(t>=240?t-240:t+120,a,i),fm(t,a,i),fm(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new zr(OE(this.h),fh(this.s),fh(this.l),Qh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qh(this.opacity);return`${t===1?"hsl(":"hsla("}${OE(this.h)}, ${fh(this.s)*100}%, ${fh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function OE(t){return t=(t||0)%360,t<0?t+360:t}function fh(t){return Math.max(0,Math.min(1,t||0))}function fm(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const R1=t=>()=>t;function AI(t,e){return function(n){return t+n*e}}function RI(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function NI(t){return(t=+t)==1?N1:function(e,n){return n-e?RI(e,n,t):R1(isNaN(e)?n:e)}}function N1(t,e){var n=e-t;return n?AI(t,n):R1(isNaN(t)?e:t)}const PE=function t(e){var n=NI(e);function i(a,l){var c=n((a=jm(a)).r,(l=jm(l)).r),d=n(a.g,l.g),f=n(a.b,l.b),p=N1(a.opacity,l.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=f(y),a.opacity=p(y),a+""}}return i.gamma=t,i}(1);function Ms(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Hm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gm=new RegExp(Hm.source,"g");function CI(t){return function(){return t}}function II(t){return function(e){return t(e)+""}}function kI(t,e){var n=Hm.lastIndex=gm.lastIndex=0,i,a,l,c=-1,d=[],f=[];for(t=t+"",e=e+"";(i=Hm.exec(t))&&(a=gm.exec(e));)(l=a.index)>n&&(l=e.slice(n,l),d[c]?d[c]+=l:d[++c]=l),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,f.push({i:c,x:Ms(i,a)})),n=gm.lastIndex;return n<e.length&&(l=e.slice(n),d[c]?d[c]+=l:d[++c]=l),d.length<2?f[0]?II(f[0].x):CI(e):(e=f.length,function(p){for(var y=0,_;y<e;++y)d[(_=f[y]).i]=_.x(p);return d.join("")})}var VE=180/Math.PI,qm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function C1(t,e,n,i,a,l){var c,d,f;return(c=Math.sqrt(t*t+e*e))&&(t/=c,e/=c),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(d=Math.sqrt(n*n+i*i))&&(n/=d,i/=d,f/=d),t*i<e*n&&(t=-t,e=-e,f=-f,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(e,t)*VE,skewX:Math.atan(f)*VE,scaleX:c,scaleY:d}}var gh;function DI(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?qm:C1(e.a,e.b,e.c,e.d,e.e,e.f)}function MI(t){return t==null||(gh||(gh=document.createElementNS("http://www.w3.org/2000/svg","g")),gh.setAttribute("transform",t),!(t=gh.transform.baseVal.consolidate()))?qm:(t=t.matrix,C1(t.a,t.b,t.c,t.d,t.e,t.f))}function I1(t,e,n,i){function a(p){return p.length?p.pop()+" ":""}function l(p,y,_,b,x,R){if(p!==_||y!==b){var D=x.push("translate(",null,e,null,n);R.push({i:D-4,x:Ms(p,_)},{i:D-2,x:Ms(y,b)})}else(_||b)&&x.push("translate("+_+e+b+n)}function c(p,y,_,b){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),b.push({i:_.push(a(_)+"rotate(",null,i)-2,x:Ms(p,y)})):y&&_.push(a(_)+"rotate("+y+i)}function d(p,y,_,b){p!==y?b.push({i:_.push(a(_)+"skewX(",null,i)-2,x:Ms(p,y)}):y&&_.push(a(_)+"skewX("+y+i)}function f(p,y,_,b,x,R){if(p!==_||y!==b){var D=x.push(a(x)+"scale(",null,",",null,")");R.push({i:D-4,x:Ms(p,_)},{i:D-2,x:Ms(y,b)})}else(_!==1||b!==1)&&x.push(a(x)+"scale("+_+","+b+")")}return function(p,y){var _=[],b=[];return p=t(p),y=t(y),l(p.translateX,p.translateY,y.translateX,y.translateY,_,b),c(p.rotate,y.rotate,_,b),d(p.skewX,y.skewX,_,b),f(p.scaleX,p.scaleY,y.scaleX,y.scaleY,_,b),p=y=null,function(x){for(var R=-1,D=b.length,k;++R<D;)_[(k=b[R]).i]=k.x(x);return _.join("")}}}var OI=I1(DI,"px, ","px)","deg)"),PI=I1(MI,", ",")",")"),VI=1e-12;function LE(t){return((t=Math.exp(t))+1/t)/2}function LI(t){return((t=Math.exp(t))-1/t)/2}function zI(t){return((t=Math.exp(2*t))-1)/(t+1)}const UI=function t(e,n,i){function a(l,c){var d=l[0],f=l[1],p=l[2],y=c[0],_=c[1],b=c[2],x=y-d,R=_-f,D=x*x+R*R,k,U;if(D<VI)U=Math.log(b/p)/e,k=function(I){return[d+I*x,f+I*R,p*Math.exp(e*I*U)]};else{var H=Math.sqrt(D),G=(b*b-p*p+i*D)/(2*p*n*H),j=(b*b-p*p-i*D)/(2*b*n*H),Q=Math.log(Math.sqrt(G*G+1)-G),Y=Math.log(Math.sqrt(j*j+1)-j);U=(Y-Q)/e,k=function(I){var T=I*U,A=LE(Q),L=p/(n*H)*(A*zI(e*T+Q)-LI(Q));return[d+L*x,f+L*R,p*A/LE(e*T+Q)]}}return k.duration=U*1e3*e/Math.SQRT2,k}return a.rho=function(l){var c=Math.max(.001,+l),d=c*c,f=d*d;return t(c,d,f)},a}(Math.SQRT2,2,4);var xl=0,Qc=0,Hc=0,k1=1e3,Wh,Wc,Zh=0,Ga=0,Cf=0,yu=typeof performance=="object"&&performance.now?performance:Date,D1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function O0(){return Ga||(D1(BI),Ga=yu.now()+Cf)}function BI(){Ga=0}function Jh(){this._call=this._time=this._next=null}Jh.prototype=M1.prototype={constructor:Jh,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?O0():+n)+(e==null?0:+e),!this._next&&Wc!==this&&(Wc?Wc._next=this:Wh=this,Wc=this),this._call=t,this._time=n,$m()},stop:function(){this._call&&(this._call=null,this._time=1/0,$m())}};function M1(t,e,n){var i=new Jh;return i.restart(t,e,n),i}function jI(){O0(),++xl;for(var t=Wh,e;t;)(e=Ga-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xl}function zE(){Ga=(Zh=yu.now())+Cf,xl=Qc=0;try{jI()}finally{xl=0,qI(),Ga=0}}function HI(){var t=yu.now(),e=t-Zh;e>k1&&(Cf-=e,Zh=t)}function qI(){for(var t,e=Wh,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Wh=n);Wc=t,$m(i)}function $m(t){if(!xl){Qc&&(Qc=clearTimeout(Qc));var e=t-Ga;e>24?(t<1/0&&(Qc=setTimeout(zE,t-yu.now()-Cf)),Hc&&(Hc=clearInterval(Hc))):(Hc||(Zh=yu.now(),Hc=setInterval(HI,k1)),xl=1,D1(zE))}}function UE(t,e,n){var i=new Jh;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,n),i}var $I=Rf("start","end","cancel","interrupt"),FI=[],O1=0,BE=1,Fm=2,Mh=3,jE=4,Gm=5,Oh=6;function If(t,e,n,i,a,l){var c=t.__transition;if(!c)t.__transition={};else if(n in c)return;GI(t,n,{name:e,index:i,group:a,on:$I,tween:FI,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:O1})}function P0(t,e){var n=$r(t,e);if(n.state>O1)throw new Error("too late; already scheduled");return n}function Ei(t,e){var n=$r(t,e);if(n.state>Mh)throw new Error("too late; already running");return n}function $r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function GI(t,e,n){var i=t.__transition,a;i[e]=n,n.timer=M1(l,0,n.time);function l(p){n.state=BE,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var y,_,b,x;if(n.state!==BE)return f();for(y in i)if(x=i[y],x.name===n.name){if(x.state===Mh)return UE(c);x.state===jE?(x.state=Oh,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[y]):+y<e&&(x.state=Oh,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[y])}if(UE(function(){n.state===Mh&&(n.state=jE,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=Fm,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Fm){for(n.state=Mh,a=new Array(b=n.tween.length),y=0,_=-1;y<b;++y)(x=n.tween[y].value.call(t,t.__data__,n.index,n.group))&&(a[++_]=x);a.length=_+1}}function d(p){for(var y=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(f),n.state=Gm,1),_=-1,b=a.length;++_<b;)a[_].call(t,y);n.state===Gm&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Oh,n.timer.stop(),delete i[e];for(var p in i)return;delete t.__transition}}function Ph(t,e){var n=t.__transition,i,a,l=!0,c;if(n){e=e==null?null:e+"";for(c in n){if((i=n[c]).name!==e){l=!1;continue}a=i.state>Fm&&i.state<Gm,i.state=Oh,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[c]}l&&delete t.__transition}}function YI(t){return this.each(function(){Ph(this,t)})}function KI(t,e){var n,i;return function(){var a=Ei(this,t),l=a.tween;if(l!==n){i=n=l;for(var c=0,d=i.length;c<d;++c)if(i[c].name===e){i=i.slice(),i.splice(c,1);break}}a.tween=i}}function XI(t,e,n){var i,a;if(typeof n!="function")throw new Error;return function(){var l=Ei(this,t),c=l.tween;if(c!==i){a=(i=c).slice();for(var d={name:e,value:n},f=0,p=a.length;f<p;++f)if(a[f].name===e){a[f]=d;break}f===p&&a.push(d)}l.tween=a}}function QI(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=$r(this.node(),n).tween,a=0,l=i.length,c;a<l;++a)if((c=i[a]).name===t)return c.value;return null}return this.each((e==null?KI:XI)(n,t,e))}function V0(t,e,n){var i=t._id;return t.each(function(){var a=Ei(this,i);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return $r(a,i).value[e]}}function P1(t,e){var n;return(typeof e=="number"?Ms:e instanceof mu?PE:(n=mu(e))?(e=n,PE):kI)(t,e)}function WI(t){return function(){this.removeAttribute(t)}}function ZI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function JI(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttribute(t);return c===a?null:c===i?l:l=e(i=c,n)}}function ek(t,e,n){var i,a=n+"",l;return function(){var c=this.getAttributeNS(t.space,t.local);return c===a?null:c===i?l:l=e(i=c,n)}}function tk(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttribute(t):(c=this.getAttribute(t),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function nk(t,e,n){var i,a,l;return function(){var c,d=n(this),f;return d==null?void this.removeAttributeNS(t.space,t.local):(c=this.getAttributeNS(t.space,t.local),f=d+"",c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d)))}}function rk(t,e){var n=Nf(t),i=n==="transform"?PI:P1;return this.attrTween(t,typeof e=="function"?(n.local?nk:tk)(n,i,V0(this,"attr."+t,e)):e==null?(n.local?ZI:WI)(n):(n.local?ek:JI)(n,i,e))}function ik(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function sk(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ak(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&sk(t,l)),n}return a._value=e,a}function ok(t,e){var n,i;function a(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&ik(t,l)),n}return a._value=e,a}function lk(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Nf(t);return this.tween(n,(i.local?ak:ok)(i,e))}function ck(t,e){return function(){P0(this,t).delay=+e.apply(this,arguments)}}function uk(t,e){return e=+e,function(){P0(this,t).delay=e}}function dk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ck:uk)(e,t)):$r(this.node(),e).delay}function hk(t,e){return function(){Ei(this,t).duration=+e.apply(this,arguments)}}function fk(t,e){return e=+e,function(){Ei(this,t).duration=e}}function gk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hk:fk)(e,t)):$r(this.node(),e).duration}function pk(t,e){if(typeof e!="function")throw new Error;return function(){Ei(this,t).ease=e}}function mk(t){var e=this._id;return arguments.length?this.each(pk(e,t)):$r(this.node(),e).ease}function yk(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ei(this,t).ease=n}}function vk(t){if(typeof t!="function")throw new Error;return this.each(yk(this._id,t))}function _k(t){typeof t!="function"&&(t=f1(t));for(var e=this._groups,n=e.length,i=new Array(n),a=0;a<n;++a)for(var l=e[a],c=l.length,d=i[a]=[],f,p=0;p<c;++p)(f=l[p])&&t.call(f,f.__data__,p,l)&&d.push(f);return new Ji(i,this._parents,this._name,this._id)}function bk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=n.length,l=Math.min(i,a),c=new Array(i),d=0;d<l;++d)for(var f=e[d],p=n[d],y=f.length,_=c[d]=new Array(y),b,x=0;x<y;++x)(b=f[x]||p[x])&&(_[x]=b);for(;d<i;++d)c[d]=e[d];return new Ji(c,this._parents,this._name,this._id)}function Ek(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function wk(t,e,n){var i,a,l=Ek(e)?P0:Ei;return function(){var c=l(this,t),d=c.on;d!==i&&(a=(i=d).copy()).on(e,n),c.on=a}}function xk(t,e){var n=this._id;return arguments.length<2?$r(this.node(),n).on.on(t):this.each(wk(n,t,e))}function Tk(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Sk(){return this.on("end.remove",Tk(this._id))}function Ak(t){var e=this._name,n=this._id;typeof t!="function"&&(t=k0(t));for(var i=this._groups,a=i.length,l=new Array(a),c=0;c<a;++c)for(var d=i[c],f=d.length,p=l[c]=new Array(f),y,_,b=0;b<f;++b)(y=d[b])&&(_=t.call(y,y.__data__,b,d))&&("__data__"in y&&(_.__data__=y.__data__),p[b]=_,If(p[b],e,n,b,p,$r(y,n)));return new Ji(l,this._parents,e,n)}function Rk(t){var e=this._name,n=this._id;typeof t!="function"&&(t=h1(t));for(var i=this._groups,a=i.length,l=[],c=[],d=0;d<a;++d)for(var f=i[d],p=f.length,y,_=0;_<p;++_)if(y=f[_]){for(var b=t.call(y,y.__data__,_,f),x,R=$r(y,n),D=0,k=b.length;D<k;++D)(x=b[D])&&If(x,e,n,D,b,R);l.push(b),c.push(y)}return new Ji(l,c,e,n)}var Nk=Ou.prototype.constructor;function Ck(){return new Nk(this._groups,this._parents)}function Ik(t,e){var n,i,a;return function(){var l=wl(this,t),c=(this.style.removeProperty(t),wl(this,t));return l===c?null:l===n&&c===i?a:a=e(n=l,i=c)}}function V1(t){return function(){this.style.removeProperty(t)}}function kk(t,e,n){var i,a=n+"",l;return function(){var c=wl(this,t);return c===a?null:c===i?l:l=e(i=c,n)}}function Dk(t,e,n){var i,a,l;return function(){var c=wl(this,t),d=n(this),f=d+"";return d==null&&(f=d=(this.style.removeProperty(t),wl(this,t))),c===f?null:c===i&&f===a?l:(a=f,l=e(i=c,d))}}function Mk(t,e){var n,i,a,l="style."+e,c="end."+l,d;return function(){var f=Ei(this,t),p=f.on,y=f.value[l]==null?d||(d=V1(e)):void 0;(p!==n||a!==y)&&(i=(n=p).copy()).on(c,a=y),f.on=i}}function Ok(t,e,n){var i=(t+="")=="transform"?OI:P1;return e==null?this.styleTween(t,Ik(t,i)).on("end.style."+t,V1(t)):typeof e=="function"?this.styleTween(t,Dk(t,i,V0(this,"style."+t,e))).each(Mk(this._id,t)):this.styleTween(t,kk(t,i,e),n).on("end.style."+t,null)}function Pk(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Vk(t,e,n){var i,a;function l(){var c=e.apply(this,arguments);return c!==a&&(i=(a=c)&&Pk(t,c,n)),i}return l._value=e,l}function Lk(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Vk(t,e,n??""))}function zk(t){return function(){this.textContent=t}}function Uk(t){return function(){var e=t(this);this.textContent=e??""}}function Bk(t){return this.tween("text",typeof t=="function"?Uk(V0(this,"text",t)):zk(t==null?"":t+""))}function jk(t){return function(e){this.textContent=t.call(this,e)}}function Hk(t){var e,n;function i(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&jk(a)),e}return i._value=t,i}function qk(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Hk(t))}function $k(){for(var t=this._name,e=this._id,n=L1(),i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)if(f=c[p]){var y=$r(f,e);If(f,t,n,p,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Ji(i,this._parents,t,n)}function Fk(){var t,e,n=this,i=n._id,a=n.size();return new Promise(function(l,c){var d={value:c},f={value:function(){--a===0&&l()}};n.each(function(){var p=Ei(this,i),y=p.on;y!==t&&(e=(t=y).copy(),e._.cancel.push(d),e._.interrupt.push(d),e._.end.push(f)),p.on=e}),a===0&&l()})}var Gk=0;function Ji(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function L1(){return++Gk}var Yi=Ou.prototype;Ji.prototype={constructor:Ji,select:Ak,selectAll:Rk,selectChild:Yi.selectChild,selectChildren:Yi.selectChildren,filter:_k,merge:bk,selection:Ck,transition:$k,call:Yi.call,nodes:Yi.nodes,node:Yi.node,size:Yi.size,empty:Yi.empty,each:Yi.each,on:xk,attr:rk,attrTween:lk,style:Ok,styleTween:Lk,text:Bk,textTween:qk,remove:Sk,tween:QI,delay:dk,duration:gk,ease:mk,easeVarying:vk,end:Fk,[Symbol.iterator]:Yi[Symbol.iterator]};function Yk(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Kk={time:null,delay:0,duration:250,ease:Yk};function Xk(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Qk(t){var e,n;t instanceof Ji?(e=t._id,t=t._name):(e=L1(),(n=Kk).time=O0(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,l=0;l<a;++l)for(var c=i[l],d=c.length,f,p=0;p<d;++p)(f=c[p])&&If(f,t,e,p,c,n||Xk(f,e));return new Ji(i,this._parents,t,e)}Ou.prototype.interrupt=YI;Ou.prototype.transition=Qk;const ph=t=>()=>t;function Wk(t,{sourceEvent:e,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Xi(t,e,n){this.k=t,this.x=e,this.y=n}Xi.prototype={constructor:Xi,scale:function(t){return t===1?this:new Xi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Xi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qs=new Xi(1,0,0);Xi.prototype;function pm(t){t.stopImmediatePropagation()}function qc(t){t.preventDefault(),t.stopImmediatePropagation()}function Zk(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Jk(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function HE(){return this.__zoom||qs}function e4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function t4(){return navigator.maxTouchPoints||"ontouchstart"in this}function n4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],c=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),c>l?(l+c)/2:Math.min(0,l)||Math.max(0,c))}function r4(){var t=Zk,e=Jk,n=n4,i=e4,a=t4,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,f=UI,p=Rf("start","zoom","end"),y,_,b,x=500,R=150,D=0,k=10;function U(O){O.property("__zoom",HE).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",L).filter(a).on("touchstart.zoom",z).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}U.transform=function(O,$,M,K){var te=O.selection?O.selection():O;te.property("__zoom",HE),O!==te?Q(O,$,M,K):te.interrupt().each(function(){Y(this,arguments).event(K).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},U.scaleBy=function(O,$,M,K){U.scaleTo(O,function(){var te=this.__zoom.k,J=typeof $=="function"?$.apply(this,arguments):$;return te*J},M,K)},U.scaleTo=function(O,$,M,K){U.transform(O,function(){var te=e.apply(this,arguments),J=this.__zoom,V=M==null?j(te):typeof M=="function"?M.apply(this,arguments):M,W=J.invert(V),re=typeof $=="function"?$.apply(this,arguments):$;return n(G(H(J,re),V,W),te,c)},M,K)},U.translateBy=function(O,$,M,K){U.transform(O,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof M=="function"?M.apply(this,arguments):M),e.apply(this,arguments),c)},null,K)},U.translateTo=function(O,$,M,K,te){U.transform(O,function(){var J=e.apply(this,arguments),V=this.__zoom,W=K==null?j(J):typeof K=="function"?K.apply(this,arguments):K;return n(qs.translate(W[0],W[1]).scale(V.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof M=="function"?-M.apply(this,arguments):-M),J,c)},K,te)};function H(O,$){return $=Math.max(l[0],Math.min(l[1],$)),$===O.k?O:new Xi($,O.x,O.y)}function G(O,$,M){var K=$[0]-M[0]*O.k,te=$[1]-M[1]*O.k;return K===O.x&&te===O.y?O:new Xi(O.k,K,te)}function j(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function Q(O,$,M,K){O.on("start.zoom",function(){Y(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(K).end()}).tween("zoom",function(){var te=this,J=arguments,V=Y(te,J).event(K),W=e.apply(te,J),re=M==null?j(W):typeof M=="function"?M.apply(te,J):M,X=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),se=te.__zoom,de=typeof $=="function"?$.apply(te,J):$,ue=f(se.invert(re).concat(X/se.k),de.invert(re).concat(X/de.k));return function(ve){if(ve===1)ve=de;else{var _e=ue(ve),Ae=X/_e[2];ve=new Xi(Ae,re[0]-_e[0]*Ae,re[1]-_e[1]*Ae)}V.zoom(null,ve)}})}function Y(O,$,M){return!M&&O.__zooming||new I(O,$)}function I(O,$){this.that=O,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(O,$),this.taps=0}I.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,$){return this.mouse&&O!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var $=Lr(this.that).datum();p.call(O,this.that,new Wk(O,{sourceEvent:this.sourceEvent,target:U,transform:this.that.__zoom,dispatch:p}),$)}};function T(O,...$){if(!t.apply(this,arguments))return;var M=Y(this,$).event(O),K=this.__zoom,te=Math.max(l[0],Math.min(l[1],K.k*Math.pow(2,i.apply(this,arguments)))),J=hi(O);if(M.wheel)(M.mouse[0][0]!==J[0]||M.mouse[0][1]!==J[1])&&(M.mouse[1]=K.invert(M.mouse[0]=J)),clearTimeout(M.wheel);else{if(K.k===te)return;M.mouse=[J,K.invert(J)],Ph(this),M.start()}qc(O),M.wheel=setTimeout(V,R),M.zoom("mouse",n(G(H(K,te),M.mouse[0],M.mouse[1]),M.extent,c));function V(){M.wheel=null,M.end()}}function A(O,...$){if(b||!t.apply(this,arguments))return;var M=O.currentTarget,K=Y(this,$,!0).event(O),te=Lr(O.view).on("mousemove.zoom",re,!0).on("mouseup.zoom",X,!0),J=hi(O,M),V=O.clientX,W=O.clientY;x1(O.view),pm(O),K.mouse=[J,this.__zoom.invert(J)],Ph(this),K.start();function re(se){if(qc(se),!K.moved){var de=se.clientX-V,ue=se.clientY-W;K.moved=de*de+ue*ue>D}K.event(se).zoom("mouse",n(G(K.that.__zoom,K.mouse[0]=hi(se,M),K.mouse[1]),K.extent,c))}function X(se){te.on("mousemove.zoom mouseup.zoom",null),T1(se.view,K.moved),qc(se),K.event(se).end()}}function L(O,...$){if(t.apply(this,arguments)){var M=this.__zoom,K=hi(O.changedTouches?O.changedTouches[0]:O,this),te=M.invert(K),J=M.k*(O.shiftKey?.5:2),V=n(G(H(M,J),K,te),e.apply(this,$),c);qc(O),d>0?Lr(this).transition().duration(d).call(Q,V,K,O):Lr(this).call(U.transform,V,K,O)}}function z(O,...$){if(t.apply(this,arguments)){var M=O.touches,K=M.length,te=Y(this,$,O.changedTouches.length===K).event(O),J,V,W,re;for(pm(O),V=0;V<K;++V)W=M[V],re=hi(W,this),re=[re,this.__zoom.invert(re),W.identifier],te.touch0?!te.touch1&&te.touch0[2]!==re[2]&&(te.touch1=re,te.taps=0):(te.touch0=re,J=!0,te.taps=1+!!y);y&&(y=clearTimeout(y)),J&&(te.taps<2&&(_=re[0],y=setTimeout(function(){y=null},x)),Ph(this),te.start())}}function B(O,...$){if(this.__zooming){var M=Y(this,$).event(O),K=O.changedTouches,te=K.length,J,V,W,re;for(qc(O),J=0;J<te;++J)V=K[J],W=hi(V,this),M.touch0&&M.touch0[2]===V.identifier?M.touch0[0]=W:M.touch1&&M.touch1[2]===V.identifier&&(M.touch1[0]=W);if(V=M.that.__zoom,M.touch1){var X=M.touch0[0],se=M.touch0[1],de=M.touch1[0],ue=M.touch1[1],ve=(ve=de[0]-X[0])*ve+(ve=de[1]-X[1])*ve,_e=(_e=ue[0]-se[0])*_e+(_e=ue[1]-se[1])*_e;V=H(V,Math.sqrt(ve/_e)),W=[(X[0]+de[0])/2,(X[1]+de[1])/2],re=[(se[0]+ue[0])/2,(se[1]+ue[1])/2]}else if(M.touch0)W=M.touch0[0],re=M.touch0[1];else return;M.zoom("touch",n(G(V,W,re),M.extent,c))}}function N(O,...$){if(this.__zooming){var M=Y(this,$).event(O),K=O.changedTouches,te=K.length,J,V;for(pm(O),b&&clearTimeout(b),b=setTimeout(function(){b=null},x),J=0;J<te;++J)V=K[J],M.touch0&&M.touch0[2]===V.identifier?delete M.touch0:M.touch1&&M.touch1[2]===V.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(V=hi(V,this),Math.hypot(_[0]-V[0],_[1]-V[1])<k)){var W=Lr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return U.wheelDelta=function(O){return arguments.length?(i=typeof O=="function"?O:ph(+O),U):i},U.filter=function(O){return arguments.length?(t=typeof O=="function"?O:ph(!!O),U):t},U.touchable=function(O){return arguments.length?(a=typeof O=="function"?O:ph(!!O),U):a},U.extent=function(O){return arguments.length?(e=typeof O=="function"?O:ph([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),U):e},U.scaleExtent=function(O){return arguments.length?(l[0]=+O[0],l[1]=+O[1],U):[l[0],l[1]]},U.translateExtent=function(O){return arguments.length?(c[0][0]=+O[0][0],c[1][0]=+O[1][0],c[0][1]=+O[0][1],c[1][1]=+O[1][1],U):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},U.constrain=function(O){return arguments.length?(n=O,U):n},U.duration=function(O){return arguments.length?(d=+O,U):d},U.interpolate=function(O){return arguments.length?(f=O,U):f},U.on=function(){var O=p.on.apply(p,arguments);return O===p?U:O},U.clickDistance=function(O){return arguments.length?(D=(O=+O)*O,U):Math.sqrt(D)},U.tapDistance=function(O){return arguments.length?(k=+O,U):k},U}var i4=c1();const kf=q.createContext(null),s4=kf.Provider,es={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},z1=es.error001();function Tt(t,e){const n=q.useContext(kf);if(n===null)throw new Error(z1);return u1(n,t,e)}const ln=()=>{const t=q.useContext(kf);if(t===null)throw new Error(z1);return q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},a4=t=>t.userSelectionActive?"none":"all";function U1({position:t,children:e,className:n,style:i,...a}){const l=Tt(a4),c=`${t}`.split("-");return fe.createElement("div",{className:Pn(["react-flow__panel",n,...c]),style:{...i,pointerEvents:l},...a},e)}function o4({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:fe.createElement(U1,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},fe.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const l4=({x:t,y:e,label:n,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:l={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:f,className:p,...y})=>{const _=q.useRef(null),[b,x]=q.useState({x:0,y:0,width:0,height:0}),R=Pn(["react-flow__edge-textwrapper",p]);return q.useEffect(()=>{if(_.current){const D=_.current.getBBox();x({x:D.x,y:D.y,width:D.width,height:D.height})}},[n]),typeof n>"u"||!n?null:fe.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:R,visibility:b.width?"visible":"hidden",...y},a&&fe.createElement("rect",{width:b.width+2*c[0],x:-c[0],y:-c[1],height:b.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:d,ry:d}),fe.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:_,style:i},n),f)};var c4=q.memo(l4);const L0=t=>({width:t.offsetWidth,height:t.offsetHeight}),Tl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),z0=(t={x:0,y:0},e)=>({x:Tl(t.x,e[0][0],e[1][0]),y:Tl(t.y,e[0][1],e[1][1])}),qE=(t,e,n)=>t<e?Tl(Math.abs(t-e),1,50)/50:t>n?-Tl(Math.abs(t-n),1,50)/50:0,B1=(t,e)=>{const n=qE(t.x,35,e.width-35)*20,i=qE(t.y,35,e.height-35)*20;return[n,i]},j1=t=>t.getRootNode?.()||window?.document,u4=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),U0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),d4=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),$E=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Ym=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},h4=t=>Rr(t.width)&&Rr(t.height)&&Rr(t.x)&&Rr(t.y),Rr=t=>!isNaN(t)&&isFinite(t),kt=Symbol.for("internals"),H1=["Enter"," ","Escape"],f4=(t,e)=>{},g4=t=>"nativeEvent"in t;function Km(t){const n=(g4(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const q1=t=>"clientX"in t,$s=(t,e)=>{const n=q1(t),i=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:a-(e?.top??0)}},ef=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Vu=({id:t,path:e,labelX:n,labelY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:_,markerStart:b,interactionWidth:x=20})=>fe.createElement(fe.Fragment,null,fe.createElement("path",{id:t,style:y,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:_,markerStart:b}),x&&fe.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),a&&Rr(n)&&Rr(i)?fe.createElement(c4,{x:n,y:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p}):null);Vu.displayName="BaseEdge";function $c(t,e,n){return n===void 0?n:i=>{const a=e().edges.find(l=>l.id===t);a&&n(i,{...a})}}function $1({sourceX:t,sourceY:e,targetX:n,targetY:i}){const a=Math.abs(n-t)/2,l=n<t?n+a:n-a,c=Math.abs(i-e)/2,d=i<e?i+c:i-c;return[l,d,a,c]}function F1({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d}){const f=t*.125+a*.375+c*.375+n*.125,p=e*.125+l*.375+d*.375+i*.125,y=Math.abs(f-t),_=Math.abs(p-e);return[f,p,y,_]}var Qs;(function(t){t.Strict="strict",t.Loose="loose"})(Qs||(Qs={}));var Ha;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ha||(Ha={}));var vu;(function(t){t.Partial="partial",t.Full="full"})(vu||(vu={}));var Ps;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ps||(Ps={}));var _u;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(_u||(_u={}));var Se;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Se||(Se={}));function FE({pos:t,x1:e,y1:n,x2:i,y2:a}){return t===Se.Left||t===Se.Right?[.5*(e+i),n]:[e,.5*(n+a)]}function G1({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top}){const[c,d]=FE({pos:n,x1:t,y1:e,x2:i,y2:a}),[f,p]=FE({pos:l,x1:i,y1:a,x2:t,y2:e}),[y,_,b,x]=F1({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${e} C${c},${d} ${f},${p} ${i},${a}`,y,_,b,x]}const B0=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:x,markerStart:R,interactionWidth:D})=>{const[k,U,H]=G1({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l});return fe.createElement(Vu,{path:k,labelX:U,labelY:H,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:x,markerStart:R,interactionWidth:D})});B0.displayName="SimpleBezierEdge";const GE={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},p4=({source:t,sourcePosition:e=Se.Bottom,target:n})=>e===Se.Left||e===Se.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},YE=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function m4({source:t,sourcePosition:e=Se.Bottom,target:n,targetPosition:i=Se.Top,center:a,offset:l}){const c=GE[e],d=GE[i],f={x:t.x+c.x*l,y:t.y+c.y*l},p={x:n.x+d.x*l,y:n.y+d.y*l},y=p4({source:f,sourcePosition:e,target:p}),_=y.x!==0?"x":"y",b=y[_];let x=[],R,D;const k={x:0,y:0},U={x:0,y:0},[H,G,j,Q]=$1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[_]*d[_]===-1){R=a.x??H,D=a.y??G;const I=[{x:R,y:f.y},{x:R,y:p.y}],T=[{x:f.x,y:D},{x:p.x,y:D}];c[_]===b?x=_==="x"?I:T:x=_==="x"?T:I}else{const I=[{x:f.x,y:p.y}],T=[{x:p.x,y:f.y}];if(_==="x"?x=c.x===b?T:I:x=c.y===b?I:T,e===i){const N=Math.abs(t[_]-n[_]);if(N<=l){const O=Math.min(l-1,l-N);c[_]===b?k[_]=(f[_]>t[_]?-1:1)*O:U[_]=(p[_]>n[_]?-1:1)*O}}if(e!==i){const N=_==="x"?"y":"x",O=c[_]===d[N],$=f[N]>p[N],M=f[N]<p[N];(c[_]===1&&(!O&&$||O&&M)||c[_]!==1&&(!O&&M||O&&$))&&(x=_==="x"?I:T)}const A={x:f.x+k.x,y:f.y+k.y},L={x:p.x+U.x,y:p.y+U.y},z=Math.max(Math.abs(A.x-x[0].x),Math.abs(L.x-x[0].x)),B=Math.max(Math.abs(A.y-x[0].y),Math.abs(L.y-x[0].y));z>=B?(R=(A.x+L.x)/2,D=x[0].y):(R=x[0].x,D=(A.y+L.y)/2)}return[[t,{x:f.x+k.x,y:f.y+k.y},...x,{x:p.x+U.x,y:p.y+U.y},n],R,D,j,Q]}function y4(t,e,n,i){const a=Math.min(YE(t,e)/2,YE(e,n)/2,i),{x:l,y:c}=e;if(t.x===l&&l===n.x||t.y===c&&c===n.y)return`L${l} ${c}`;if(t.y===c){const p=t.x<n.x?-1:1,y=t.y<n.y?1:-1;return`L ${l+a*p},${c}Q ${l},${c} ${l},${c+a*y}`}const d=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${l},${c+a*f}Q ${l},${c} ${l+a*d},${c}`}function Xm({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,borderRadius:c=5,centerX:d,centerY:f,offset:p=20}){const[y,_,b,x,R]=m4({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:a},targetPosition:l,center:{x:d,y:f},offset:p});return[y.reduce((k,U,H)=>{let G="";return H>0&&H<y.length-1?G=y4(y[H-1],U,y[H+1],c):G=`${H===0?"M":"L"}${U.x} ${U.y}`,k+=G,k},""),_,b,x,R]}const Df=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,sourcePosition:_=Se.Bottom,targetPosition:b=Se.Top,markerEnd:x,markerStart:R,pathOptions:D,interactionWidth:k})=>{const[U,H,G]=Xm({sourceX:t,sourceY:e,sourcePosition:_,targetX:n,targetY:i,targetPosition:b,borderRadius:D?.borderRadius,offset:D?.offset});return fe.createElement(Vu,{path:U,labelX:H,labelY:G,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:x,markerStart:R,interactionWidth:k})});Df.displayName="SmoothStepEdge";const j0=q.memo(t=>fe.createElement(Df,{...t,pathOptions:q.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));j0.displayName="StepEdge";function v4({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[a,l,c,d]=$1({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,a,l,c,d]}const H0=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:_,markerStart:b,interactionWidth:x})=>{const[R,D,k]=v4({sourceX:t,sourceY:e,targetX:n,targetY:i});return fe.createElement(Vu,{path:R,labelX:D,labelY:k,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:_,markerStart:b,interactionWidth:x})});H0.displayName="StraightEdge";function mh(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function KE({pos:t,x1:e,y1:n,x2:i,y2:a,c:l}){switch(t){case Se.Left:return[e-mh(e-i,l),n];case Se.Right:return[e+mh(i-e,l),n];case Se.Top:return[e,n-mh(n-a,l)];case Se.Bottom:return[e,n+mh(a-n,l)]}}function Y1({sourceX:t,sourceY:e,sourcePosition:n=Se.Bottom,targetX:i,targetY:a,targetPosition:l=Se.Top,curvature:c=.25}){const[d,f]=KE({pos:n,x1:t,y1:e,x2:i,y2:a,c}),[p,y]=KE({pos:l,x1:i,y1:a,x2:t,y2:e,c}),[_,b,x,R]=F1({sourceX:t,sourceY:e,targetX:i,targetY:a,sourceControlX:d,sourceControlY:f,targetControlX:p,targetControlY:y});return[`M${t},${e} C${d},${f} ${p},${y} ${i},${a}`,_,b,x,R]}const tf=q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:i,sourcePosition:a=Se.Bottom,targetPosition:l=Se.Top,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:x,markerStart:R,pathOptions:D,interactionWidth:k})=>{const[U,H,G]=Y1({sourceX:t,sourceY:e,sourcePosition:a,targetX:n,targetY:i,targetPosition:l,curvature:D?.curvature});return fe.createElement(Vu,{path:U,labelX:H,labelY:G,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:_,style:b,markerEnd:x,markerStart:R,interactionWidth:k})});tf.displayName="BezierEdge";const q0=q.createContext(null),_4=q0.Provider;q0.Consumer;const b4=()=>q.useContext(q0),E4=t=>"id"in t&&"source"in t&&"target"in t,w4=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${n}${i||""}`,Qm=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,x4=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),T4=(t,e)=>{if(!t.source||!t.target)return e;let n;return E4(t)?n={...t}:n={...t,id:w4(t)},x4(n,e)?e:e.concat(n)},Wm=({x:t,y:e},[n,i,a],l,[c,d])=>{const f={x:(t-n)/a,y:(e-i)/a};return l?{x:c*Math.round(f.x/c),y:d*Math.round(f.y/d)}:f},K1=({x:t,y:e},[n,i,a])=>({x:t*a+n,y:e*a+i}),gl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],i=(t.height??0)*e[1],a={x:t.position.x-n,y:t.position.y-i};return{...a,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-i}:a}},$0=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,a)=>{const{x:l,y:c}=gl(a,e).positionAbsolute;return u4(i,U0({x:l,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return d4(n)},X1=(t,e,[n,i,a]=[0,0,1],l=!1,c=!1,d=[0,0])=>{const f={x:(e.x-n)/a,y:(e.y-i)/a,width:e.width/a,height:e.height/a},p=[];return t.forEach(y=>{const{width:_,height:b,selectable:x=!0,hidden:R=!1}=y;if(c&&!x||R)return!1;const{positionAbsolute:D}=gl(y,d),k={x:D.x,y:D.y,width:_||0,height:b||0},U=Ym(f,k),H=typeof _>"u"||typeof b>"u"||_===null||b===null,G=l&&U>0,j=(_||0)*(b||0);(H||G||U>=j||y.dragging)&&p.push(y)}),p},Q1=(t,e)=>{const n=t.map(i=>i.id);return e.filter(i=>n.includes(i.source)||n.includes(i.target))},W1=(t,e,n,i,a,l=.1)=>{const c=e/(t.width*(1+l)),d=n/(t.height*(1+l)),f=Math.min(c,d),p=Tl(f,i,a),y=t.x+t.width/2,_=t.y+t.height/2,b=e/2-y*p,x=n/2-_*p;return{x:b,y:x,zoom:p}},Ua=(t,e=0)=>t.transition().duration(e);function XE(t,e,n,i){return(e[n]||[]).reduce((a,l)=>(`${t.id}-${l.id}-${n}`!==i&&a.push({id:l.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+l.x+l.width/2,y:(t.positionAbsolute?.y??0)+l.y+l.height/2}),a),[])}function S4(t,e,n,i,a,l){const{x:c,y:d}=$s(t),p=e.elementsFromPoint(c,d).find(R=>R.classList.contains("react-flow__handle"));if(p){const R=p.getAttribute("data-nodeid");if(R){const D=F0(void 0,p),k=p.getAttribute("data-handleid"),U=l({nodeId:R,id:k,type:D});if(U){const H=a.find(G=>G.nodeId===R&&G.type===D&&G.id===k);return{handle:{id:k,type:D,nodeId:R,x:H?.x||n.x,y:H?.y||n.y},validHandleResult:U}}}}let y=[],_=1/0;if(a.forEach(R=>{const D=Math.sqrt((R.x-n.x)**2+(R.y-n.y)**2);if(D<=i){const k=l(R);D<=_&&(D<_?y=[{handle:R,validHandleResult:k}]:D===_&&y.push({handle:R,validHandleResult:k}),_=D)}}),!y.length)return{handle:null,validHandleResult:Z1()};if(y.length===1)return y[0];const b=y.some(({validHandleResult:R})=>R.isValid),x=y.some(({handle:R})=>R.type==="target");return y.find(({handle:R,validHandleResult:D})=>x?R.type==="target":b?D.isValid:!0)||y[0]}const A4={source:null,target:null,sourceHandle:null,targetHandle:null},Z1=()=>({handleDomNode:null,isValid:!1,connection:A4,endHandle:null});function J1(t,e,n,i,a,l,c){const d=a==="target",f=c.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),p={...Z1(),handleDomNode:f};if(f){const y=F0(void 0,f),_=f.getAttribute("data-nodeid"),b=f.getAttribute("data-handleid"),x=f.classList.contains("connectable"),R=f.classList.contains("connectableend"),D={source:d?_:n,sourceHandle:d?b:i,target:d?n:_,targetHandle:d?i:b};p.connection=D,x&&R&&(e===Qs.Strict?d&&y==="source"||!d&&y==="target":_!==n||b!==i)&&(p.endHandle={nodeId:_,handleId:b,type:y},p.isValid=l(D))}return p}function R4({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((a,l)=>{if(l[kt]){const{handleBounds:c}=l[kt];let d=[],f=[];c&&(d=XE(l,c,"source",`${e}-${n}-${i}`),f=XE(l,c,"target",`${e}-${n}-${i}`)),a.push(...d,...f)}return a},[])}function F0(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function mm(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function N4(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function eT({event:t,handleId:e,nodeId:n,onConnect:i,isTarget:a,getState:l,setState:c,isValidConnection:d,edgeUpdaterType:f,onReconnectEnd:p}){const y=j1(t.target),{connectionMode:_,domNode:b,autoPanOnConnect:x,connectionRadius:R,onConnectStart:D,panBy:k,getNodes:U,cancelConnection:H}=l();let G=0,j;const{x:Q,y:Y}=$s(t),I=y?.elementFromPoint(Q,Y),T=F0(f,I),A=b?.getBoundingClientRect();if(!A||!T)return;let L,z=$s(t,A),B=!1,N=null,O=!1,$=null;const M=R4({nodes:U(),nodeId:n,handleId:e,handleType:T}),K=()=>{if(!x)return;const[V,W]=B1(z,A);k({x:V,y:W}),G=requestAnimationFrame(K)};c({connectionPosition:z,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:T,connectionStartHandle:{nodeId:n,handleId:e,type:T},connectionEndHandle:null}),D?.(t,{nodeId:n,handleId:e,handleType:T});function te(V){const{transform:W}=l();z=$s(V,A);const{handle:re,validHandleResult:X}=S4(V,y,Wm(z,W,!1,[1,1]),R,M,se=>J1(se,_,n,e,a?"target":"source",d,y));if(j=re,B||(K(),B=!0),$=X.handleDomNode,N=X.connection,O=X.isValid,c({connectionPosition:j&&O?K1({x:j.x,y:j.y},W):z,connectionStatus:N4(!!j,O),connectionEndHandle:X.endHandle}),!j&&!O&&!$)return mm(L);N.source!==N.target&&$&&(mm(L),L=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",O),$.classList.toggle("react-flow__handle-valid",O))}function J(V){(j||$)&&N&&O&&i?.(N),l().onConnectEnd?.(V),f&&p?.(V),mm(L),H(),cancelAnimationFrame(G),B=!1,O=!1,N=null,$=null,y.removeEventListener("mousemove",te),y.removeEventListener("mouseup",J),y.removeEventListener("touchmove",te),y.removeEventListener("touchend",J)}y.addEventListener("mousemove",te),y.addEventListener("mouseup",J),y.addEventListener("touchmove",te),y.addEventListener("touchend",J)}const QE=()=>!0,C4=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),I4=(t,e,n)=>i=>{const{connectionStartHandle:a,connectionEndHandle:l,connectionClickStartHandle:c}=i;return{connecting:a?.nodeId===t&&a?.handleId===e&&a?.type===n||l?.nodeId===t&&l?.handleId===e&&l?.type===n,clickConnecting:c?.nodeId===t&&c?.handleId===e&&c?.type===n}},tT=q.forwardRef(({type:t="source",position:e=Se.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:d,children:f,className:p,onMouseDown:y,onTouchStart:_,...b},x)=>{const R=c||null,D=t==="target",k=ln(),U=b4(),{connectOnClick:H,noPanClassName:G}=Tt(C4,Tn),{connecting:j,clickConnecting:Q}=Tt(I4(U,R,t),Tn);U||k.getState().onError?.("010",es.error010());const Y=A=>{const{defaultEdgeOptions:L,onConnect:z,hasDefaultEdges:B}=k.getState(),N={...L,...A};if(B){const{edges:O,setEdges:$}=k.getState();$(T4(N,O))}z?.(N),d?.(N)},I=A=>{if(!U)return;const L=q1(A);a&&(L&&A.button===0||!L)&&eT({event:A,handleId:R,nodeId:U,onConnect:Y,isTarget:D,getState:k.getState,setState:k.setState,isValidConnection:n||k.getState().isValidConnection||QE}),L?y?.(A):_?.(A)},T=A=>{const{onClickConnectStart:L,onClickConnectEnd:z,connectionClickStartHandle:B,connectionMode:N,isValidConnection:O}=k.getState();if(!U||!B&&!a)return;if(!B){L?.(A,{nodeId:U,handleId:R,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:U,type:t,handleId:R}});return}const $=j1(A.target),M=n||O||QE,{connection:K,isValid:te}=J1({nodeId:U,id:R,type:t},N,B.nodeId,B.handleId||null,B.type,M,$);te&&Y(K),z?.(A),k.setState({connectionClickStartHandle:null})};return fe.createElement("div",{"data-handleid":R,"data-nodeid":U,"data-handlepos":e,"data-id":`${U}-${R}-${t}`,className:Pn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",G,p,{source:!D,target:D,connectable:i,connectablestart:a,connectableend:l,connecting:Q,connectionindicator:i&&(a&&!j||l&&j)}]),onMouseDown:I,onTouchStart:I,onClick:H?T:void 0,ref:x,...b},f)});tT.displayName="Handle";var jn=q.memo(tT);const nT=({data:t,isConnectable:e,targetPosition:n=Se.Top,sourcePosition:i=Se.Bottom})=>fe.createElement(fe.Fragment,null,fe.createElement(jn,{type:"target",position:n,isConnectable:e}),t?.label,fe.createElement(jn,{type:"source",position:i,isConnectable:e}));nT.displayName="DefaultNode";var Zm=q.memo(nT);const rT=({data:t,isConnectable:e,sourcePosition:n=Se.Bottom})=>fe.createElement(fe.Fragment,null,t?.label,fe.createElement(jn,{type:"source",position:n,isConnectable:e}));rT.displayName="InputNode";var iT=q.memo(rT);const sT=({data:t,isConnectable:e,targetPosition:n=Se.Top})=>fe.createElement(fe.Fragment,null,fe.createElement(jn,{type:"target",position:n,isConnectable:e}),t?.label);sT.displayName="OutputNode";var aT=q.memo(sT);const G0=()=>null;G0.displayName="GroupNode";const k4=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),yh=t=>t.id;function D4(t,e){return Tn(t.selectedNodes.map(yh),e.selectedNodes.map(yh))&&Tn(t.selectedEdges.map(yh),e.selectedEdges.map(yh))}const oT=q.memo(({onSelectionChange:t})=>{const e=ln(),{selectedNodes:n,selectedEdges:i}=Tt(k4,D4);return q.useEffect(()=>{const a={nodes:n,edges:i};t?.(a),e.getState().onSelectionChange.forEach(l=>l(a))},[n,i,t]),null});oT.displayName="SelectionListener";const M4=t=>!!t.onSelectionChange;function O4({onSelectionChange:t}){const e=Tt(M4);return t||e?fe.createElement(oT,{onSelectionChange:t}):null}const P4=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Wo(t,e){q.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function $e(t,e,n){q.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const V4=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:a,onConnectStart:l,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:f,nodesDraggable:p,nodesConnectable:y,nodesFocusable:_,edgesFocusable:b,edgesUpdatable:x,elevateNodesOnSelect:R,minZoom:D,maxZoom:k,nodeExtent:U,onNodesChange:H,onEdgesChange:G,elementsSelectable:j,connectionMode:Q,snapGrid:Y,snapToGrid:I,translateExtent:T,connectOnClick:A,defaultEdgeOptions:L,fitView:z,fitViewOptions:B,onNodesDelete:N,onEdgesDelete:O,onNodeDrag:$,onNodeDragStart:M,onNodeDragStop:K,onSelectionDrag:te,onSelectionDragStart:J,onSelectionDragStop:V,noPanClassName:W,nodeOrigin:re,rfId:X,autoPanOnConnect:se,autoPanOnNodeDrag:de,onError:ue,connectionRadius:ve,isValidConnection:_e,nodeDragThreshold:Ae})=>{const{setNodes:Ne,setEdges:et,setDefaultNodesAndEdges:rt,setMinZoom:Le,setMaxZoom:tt,setTranslateExtent:it,setNodeExtent:Lt,reset:ze}=Tt(P4,Tn),Ee=ln();return q.useEffect(()=>{const At=i?.map(vn=>({...vn,...L}));return rt(n,At),()=>{ze()}},[]),$e("defaultEdgeOptions",L,Ee.setState),$e("connectionMode",Q,Ee.setState),$e("onConnect",a,Ee.setState),$e("onConnectStart",l,Ee.setState),$e("onConnectEnd",c,Ee.setState),$e("onClickConnectStart",d,Ee.setState),$e("onClickConnectEnd",f,Ee.setState),$e("nodesDraggable",p,Ee.setState),$e("nodesConnectable",y,Ee.setState),$e("nodesFocusable",_,Ee.setState),$e("edgesFocusable",b,Ee.setState),$e("edgesUpdatable",x,Ee.setState),$e("elementsSelectable",j,Ee.setState),$e("elevateNodesOnSelect",R,Ee.setState),$e("snapToGrid",I,Ee.setState),$e("snapGrid",Y,Ee.setState),$e("onNodesChange",H,Ee.setState),$e("onEdgesChange",G,Ee.setState),$e("connectOnClick",A,Ee.setState),$e("fitViewOnInit",z,Ee.setState),$e("fitViewOnInitOptions",B,Ee.setState),$e("onNodesDelete",N,Ee.setState),$e("onEdgesDelete",O,Ee.setState),$e("onNodeDrag",$,Ee.setState),$e("onNodeDragStart",M,Ee.setState),$e("onNodeDragStop",K,Ee.setState),$e("onSelectionDrag",te,Ee.setState),$e("onSelectionDragStart",J,Ee.setState),$e("onSelectionDragStop",V,Ee.setState),$e("noPanClassName",W,Ee.setState),$e("nodeOrigin",re,Ee.setState),$e("rfId",X,Ee.setState),$e("autoPanOnConnect",se,Ee.setState),$e("autoPanOnNodeDrag",de,Ee.setState),$e("onError",ue,Ee.setState),$e("connectionRadius",ve,Ee.setState),$e("isValidConnection",_e,Ee.setState),$e("nodeDragThreshold",Ae,Ee.setState),Wo(t,Ne),Wo(e,et),Wo(D,Le),Wo(k,tt),Wo(T,it),Wo(U,Lt),null},WE={display:"none"},L4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lT="react-flow__node-desc",cT="react-flow__edge-desc",z4="react-flow__aria-live",U4=t=>t.ariaLiveMessage;function B4({rfId:t}){const e=Tt(U4);return fe.createElement("div",{id:`${z4}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:L4},e)}function j4({rfId:t,disableKeyboardA11y:e}){return fe.createElement(fe.Fragment,null,fe.createElement("div",{id:`${lT}-${t}`,style:WE},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),fe.createElement("div",{id:`${cT}-${t}`,style:WE},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&fe.createElement(B4,{rfId:t}))}var bu=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,i]=q.useState(!1),a=q.useRef(!1),l=q.useRef(new Set([])),[c,d]=q.useMemo(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(_=>typeof _=="string").map(_=>_.split("+")),y=p.reduce((_,b)=>_.concat(...b),[]);return[p,y]}return[[],[]]},[t]);return q.useEffect(()=>{const f=typeof document<"u"?document:null,p=e?.target||f;if(t!==null){const y=x=>{if(a.current=x.ctrlKey||x.metaKey||x.shiftKey,(!a.current||a.current&&!e.actInsideInputWithModifier)&&Km(x))return!1;const D=JE(x.code,d);l.current.add(x[D]),ZE(c,l.current,!1)&&(x.preventDefault(),i(!0))},_=x=>{if((!a.current||a.current&&!e.actInsideInputWithModifier)&&Km(x))return!1;const D=JE(x.code,d);ZE(c,l.current,!0)?(i(!1),l.current.clear()):l.current.delete(x[D]),x.key==="Meta"&&l.current.clear(),a.current=!1},b=()=>{l.current.clear(),i(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",_),window.addEventListener("blur",b),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",_),window.removeEventListener("blur",b)}}},[t,i]),n};function ZE(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(a=>e.has(a)))}function JE(t,e){return e.includes(t)?"code":"key"}function uT(t,e,n,i){const a=t.parentNode||t.parentId;if(!a)return n;const l=e.get(a),c=gl(l,i);return uT(l,e,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(l[kt]?.z??0)>(n.z??0)?l[kt]?.z??0:n.z??0},i)}function dT(t,e,n){t.forEach(i=>{const a=i.parentNode||i.parentId;if(a&&!t.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[i.id]){const{x:l,y:c,z:d}=uT(i,t,{...i.position,z:i[kt]?.z??0},e);i.positionAbsolute={x:l,y:c},i[kt].z=d,n?.[i.id]&&(i[kt].isParent=!0)}})}function ym(t,e,n,i){const a=new Map,l={},c=i?1e3:0;return t.forEach(d=>{const f=(Rr(d.zIndex)?d.zIndex:0)+(d.selected?c:0),p=e.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},_=d.parentNode||d.parentId;_&&(l[_]=!0);const b=p?.type&&p?.type!==d.type;Object.defineProperty(y,kt,{enumerable:!1,value:{handleBounds:b?void 0:p?.[kt]?.handleBounds,z:f}}),a.set(d.id,y)}),dT(a,n,l),a}function hT(t,e={}){const{getNodes:n,width:i,height:a,minZoom:l,maxZoom:c,d3Zoom:d,d3Selection:f,fitViewOnInitDone:p,fitViewOnInit:y,nodeOrigin:_}=t(),b=e.initial&&!p&&y;if(d&&f&&(b||!e.initial)){const R=n().filter(k=>{const U=e.includeHiddenNodes?k.width&&k.height:!k.hidden;return e.nodes?.length?U&&e.nodes.some(H=>H.id===k.id):U}),D=R.every(k=>k.width&&k.height);if(R.length>0&&D){const k=$0(R,_),{x:U,y:H,zoom:G}=W1(k,i,a,e.minZoom??l,e.maxZoom??c,e.padding??.1),j=qs.translate(U,H).scale(G);return typeof e.duration=="number"&&e.duration>0?d.transform(Ua(f,e.duration),j):d.transform(f,j),!0}}return!1}function H4(t,e){return t.forEach(n=>{const i=e.get(n.id);i&&e.set(i.id,{...i,[kt]:i[kt],selected:n.selected})}),new Map(e)}function q4(t,e){return e.map(n=>{const i=t.find(a=>a.id===n.id);return i&&(n.selected=i.selected),n})}function vh({changedNodes:t,changedEdges:e,get:n,set:i}){const{nodeInternals:a,edges:l,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:f,hasDefaultEdges:p}=n();t?.length&&(f&&i({nodeInternals:H4(t,a)}),c?.(t)),e?.length&&(p&&i({edges:q4(e,l)}),d?.(e))}const Zo=()=>{},$4={zoomIn:Zo,zoomOut:Zo,zoomTo:Zo,getZoom:()=>1,setViewport:Zo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Zo,fitBounds:Zo,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},F4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),G4=()=>{const t=ln(),{d3Zoom:e,d3Selection:n}=Tt(F4,Tn);return q.useMemo(()=>n&&e?{zoomIn:a=>e.scaleBy(Ua(n,a?.duration),1.2),zoomOut:a=>e.scaleBy(Ua(n,a?.duration),1/1.2),zoomTo:(a,l)=>e.scaleTo(Ua(n,l?.duration),a),getZoom:()=>t.getState().transform[2],setViewport:(a,l)=>{const[c,d,f]=t.getState().transform,p=qs.translate(a.x??c,a.y??d).scale(a.zoom??f);e.transform(Ua(n,l?.duration),p)},getViewport:()=>{const[a,l,c]=t.getState().transform;return{x:a,y:l,zoom:c}},fitView:a=>hT(t.getState,a),setCenter:(a,l,c)=>{const{width:d,height:f,maxZoom:p}=t.getState(),y=typeof c?.zoom<"u"?c.zoom:p,_=d/2-a*y,b=f/2-l*y,x=qs.translate(_,b).scale(y);e.transform(Ua(n,c?.duration),x)},fitBounds:(a,l)=>{const{width:c,height:d,minZoom:f,maxZoom:p}=t.getState(),{x:y,y:_,zoom:b}=W1(a,c,d,f,p,l?.padding??.1),x=qs.translate(y,_).scale(b);e.transform(Ua(n,l?.duration),x)},project:a=>{const{transform:l,snapToGrid:c,snapGrid:d}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Wm(a,l,c,d)},screenToFlowPosition:a=>{const{transform:l,snapToGrid:c,snapGrid:d,domNode:f}=t.getState();if(!f)return a;const{x:p,y}=f.getBoundingClientRect(),_={x:a.x-p,y:a.y-y};return Wm(_,l,c,d)},flowToScreenPosition:a=>{const{transform:l,domNode:c}=t.getState();if(!c)return a;const{x:d,y:f}=c.getBoundingClientRect(),p=K1(a,l);return{x:p.x+d,y:p.y+f}},viewportInitialized:!0}:$4,[e,n])};function Lu(){const t=G4(),e=ln(),n=q.useCallback(()=>e.getState().getNodes().map(D=>({...D})),[]),i=q.useCallback(D=>e.getState().nodeInternals.get(D),[]),a=q.useCallback(()=>{const{edges:D=[]}=e.getState();return D.map(k=>({...k}))},[]),l=q.useCallback(D=>{const{edges:k=[]}=e.getState();return k.find(U=>U.id===D)},[]),c=q.useCallback(D=>{const{getNodes:k,setNodes:U,hasDefaultNodes:H,onNodesChange:G}=e.getState(),j=k(),Q=typeof D=="function"?D(j):D;if(H)U(Q);else if(G){const Y=Q.length===0?j.map(I=>({type:"remove",id:I.id})):Q.map(I=>({item:I,type:"reset"}));G(Y)}},[]),d=q.useCallback(D=>{const{edges:k=[],setEdges:U,hasDefaultEdges:H,onEdgesChange:G}=e.getState(),j=typeof D=="function"?D(k):D;if(H)U(j);else if(G){const Q=j.length===0?k.map(Y=>({type:"remove",id:Y.id})):j.map(Y=>({item:Y,type:"reset"}));G(Q)}},[]),f=q.useCallback(D=>{const k=Array.isArray(D)?D:[D],{getNodes:U,setNodes:H,hasDefaultNodes:G,onNodesChange:j}=e.getState();if(G){const Y=[...U(),...k];H(Y)}else if(j){const Q=k.map(Y=>({item:Y,type:"add"}));j(Q)}},[]),p=q.useCallback(D=>{const k=Array.isArray(D)?D:[D],{edges:U=[],setEdges:H,hasDefaultEdges:G,onEdgesChange:j}=e.getState();if(G)H([...U,...k]);else if(j){const Q=k.map(Y=>({item:Y,type:"add"}));j(Q)}},[]),y=q.useCallback(()=>{const{getNodes:D,edges:k=[],transform:U}=e.getState(),[H,G,j]=U;return{nodes:D().map(Q=>({...Q})),edges:k.map(Q=>({...Q})),viewport:{x:H,y:G,zoom:j}}},[]),_=q.useCallback(({nodes:D,edges:k})=>{const{nodeInternals:U,getNodes:H,edges:G,hasDefaultNodes:j,hasDefaultEdges:Q,onNodesDelete:Y,onEdgesDelete:I,onNodesChange:T,onEdgesChange:A}=e.getState(),L=(D||[]).map($=>$.id),z=(k||[]).map($=>$.id),B=H().reduce(($,M)=>{const K=M.parentNode||M.parentId,te=!L.includes(M.id)&&K&&$.find(V=>V.id===K);return(typeof M.deletable=="boolean"?M.deletable:!0)&&(L.includes(M.id)||te)&&$.push(M),$},[]),N=G.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),O=N.filter($=>z.includes($.id));if(B||O){const $=Q1(B,N),M=[...O,...$],K=M.reduce((te,J)=>(te.includes(J.id)||te.push(J.id),te),[]);if((Q||j)&&(Q&&e.setState({edges:G.filter(te=>!K.includes(te.id))}),j&&(B.forEach(te=>{U.delete(te.id)}),e.setState({nodeInternals:new Map(U)}))),K.length>0&&(I?.(M),A&&A(K.map(te=>({id:te,type:"remove"})))),B.length>0&&(Y?.(B),T)){const te=B.map(J=>({id:J.id,type:"remove"}));T(te)}}},[]),b=q.useCallback(D=>{const k=h4(D),U=k?null:e.getState().nodeInternals.get(D.id);return!k&&!U?[null,null,k]:[k?D:$E(U),U,k]},[]),x=q.useCallback((D,k=!0,U)=>{const[H,G,j]=b(D);return H?(U||e.getState().getNodes()).filter(Q=>{if(!j&&(Q.id===G.id||!Q.positionAbsolute))return!1;const Y=$E(Q),I=Ym(Y,H);return k&&I>0||I>=H.width*H.height}):[]},[]),R=q.useCallback((D,k,U=!0)=>{const[H]=b(D);if(!H)return!1;const G=Ym(H,k);return U&&G>0||G>=H.width*H.height},[]);return q.useMemo(()=>({...t,getNodes:n,getNode:i,getEdges:a,getEdge:l,setNodes:c,setEdges:d,addNodes:f,addEdges:p,toObject:y,deleteElements:_,getIntersectingNodes:x,isNodeIntersecting:R}),[t,n,i,a,l,c,d,f,p,y,_,x,R])}const Y4={actInsideInputWithModifier:!1};var K4=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=ln(),{deleteElements:i}=Lu(),a=bu(t,Y4),l=bu(e);q.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),f=d().filter(y=>y.selected),p=c.filter(y=>y.selected);i({nodes:f,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),q.useEffect(()=>{n.setState({multiSelectionActive:l})},[l])};function X4(t){const e=ln();q.useEffect(()=>{let n;const i=()=>{if(!t.current)return;const a=L0(t.current);(a.height===0||a.width===0)&&e.getState().onError?.("004",es.error004()),e.setState({width:a.width||500,height:a.height||500})};return i(),window.addEventListener("resize",i),t.current&&(n=new ResizeObserver(()=>i()),n.observe(t.current)),()=>{window.removeEventListener("resize",i),n&&t.current&&n.unobserve(t.current)}},[])}const Y0={position:"absolute",width:"100%",height:"100%",top:0,left:0},Q4=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,_h=t=>({x:t.x,y:t.y,zoom:t.k}),Jo=(t,e)=>t.target.closest(`.${e}`),ew=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),tw=t=>{const e=t.ctrlKey&&ef()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},W4=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Z4=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:l=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:f=Ha.Free,zoomOnDoubleClick:p=!0,elementsSelectable:y,panOnDrag:_=!0,defaultViewport:b,translateExtent:x,minZoom:R,maxZoom:D,zoomActivationKeyCode:k,preventScrolling:U=!0,children:H,noWheelClassName:G,noPanClassName:j})=>{const Q=q.useRef(),Y=ln(),I=q.useRef(!1),T=q.useRef(!1),A=q.useRef(null),L=q.useRef({x:0,y:0,zoom:0}),{d3Zoom:z,d3Selection:B,d3ZoomHandler:N,userSelectionActive:O}=Tt(W4,Tn),$=bu(k),M=q.useRef(0),K=q.useRef(!1),te=q.useRef();return X4(A),q.useEffect(()=>{if(A.current){const J=A.current.getBoundingClientRect(),V=r4().scaleExtent([R,D]).translateExtent(x),W=Lr(A.current).call(V),re=qs.translate(b.x,b.y).scale(Tl(b.zoom,R,D)),X=[[0,0],[J.width,J.height]],se=V.constrain()(re,X,x);V.transform(W,se),V.wheelDelta(tw),Y.setState({d3Zoom:V,d3Selection:W,d3ZoomHandler:W.on("wheel.zoom"),transform:[se.x,se.y,se.k],domNode:A.current.closest(".react-flow")})}},[]),q.useEffect(()=>{B&&z&&(c&&!$&&!O?B.on("wheel.zoom",J=>{if(Jo(J,G))return!1;J.preventDefault(),J.stopImmediatePropagation();const V=B.property("__zoom").k||1;if(J.ctrlKey&&l){const _e=hi(J),Ae=tw(J),Ne=V*Math.pow(2,Ae);z.scaleTo(B,Ne,_e,J);return}const W=J.deltaMode===1?20:1;let re=f===Ha.Vertical?0:J.deltaX*W,X=f===Ha.Horizontal?0:J.deltaY*W;!ef()&&J.shiftKey&&f!==Ha.Vertical&&(re=J.deltaY*W,X=0),z.translateBy(B,-(re/V)*d,-(X/V)*d,{internal:!0});const se=_h(B.property("__zoom")),{onViewportChangeStart:de,onViewportChange:ue,onViewportChangeEnd:ve}=Y.getState();clearTimeout(te.current),K.current||(K.current=!0,e?.(J,se),de?.(se)),K.current&&(t?.(J,se),ue?.(se),te.current=setTimeout(()=>{n?.(J,se),ve?.(se),K.current=!1},150))},{passive:!1}):typeof N<"u"&&B.on("wheel.zoom",function(J,V){if(!U&&J.type==="wheel"&&!J.ctrlKey||Jo(J,G))return null;J.preventDefault(),N.call(this,J,V)},{passive:!1}))},[O,c,f,B,z,N,$,l,U,G,e,t,n]),q.useEffect(()=>{z&&z.on("start",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;M.current=J.sourceEvent?.button;const{onViewportChangeStart:V}=Y.getState(),W=_h(J.transform);I.current=!0,L.current=W,J.sourceEvent?.type==="mousedown"&&Y.setState({paneDragging:!0}),V?.(W),e?.(J.sourceEvent,W)})},[z,e]),q.useEffect(()=>{z&&(O&&!I.current?z.on("zoom",null):O||z.on("zoom",J=>{const{onViewportChange:V}=Y.getState();if(Y.setState({transform:[J.transform.x,J.transform.y,J.transform.k]}),T.current=!!(i&&ew(_,M.current??0)),(t||V)&&!J.sourceEvent?.internal){const W=_h(J.transform);V?.(W),t?.(J.sourceEvent,W)}}))},[O,z,t,_,i]),q.useEffect(()=>{z&&z.on("end",J=>{if(!J.sourceEvent||J.sourceEvent.internal)return null;const{onViewportChangeEnd:V}=Y.getState();if(I.current=!1,Y.setState({paneDragging:!1}),i&&ew(_,M.current??0)&&!T.current&&i(J.sourceEvent),T.current=!1,(n||V)&&Q4(L.current,J.transform)){const W=_h(J.transform);L.current=W,clearTimeout(Q.current),Q.current=setTimeout(()=>{V?.(W),n?.(J.sourceEvent,W)},c?150:0)}})},[z,c,_,n,i]),q.useEffect(()=>{z&&z.filter(J=>{const V=$||a,W=l&&J.ctrlKey;if((_===!0||Array.isArray(_)&&_.includes(1))&&J.button===1&&J.type==="mousedown"&&(Jo(J,"react-flow__node")||Jo(J,"react-flow__edge")))return!0;if(!_&&!V&&!c&&!p&&!l||O||!p&&J.type==="dblclick"||Jo(J,G)&&J.type==="wheel"||Jo(J,j)&&(J.type!=="wheel"||c&&J.type==="wheel"&&!$)||!l&&J.ctrlKey&&J.type==="wheel"||!V&&!c&&!W&&J.type==="wheel"||!_&&(J.type==="mousedown"||J.type==="touchstart")||Array.isArray(_)&&!_.includes(J.button)&&J.type==="mousedown")return!1;const re=Array.isArray(_)&&_.includes(J.button)||!J.button||J.button<=1;return(!J.ctrlKey||J.type==="wheel")&&re})},[O,z,a,l,c,p,_,y,$]),fe.createElement("div",{className:"react-flow__renderer",ref:A,style:Y0},H)},J4=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function eD(){const{userSelectionActive:t,userSelectionRect:e}=Tt(J4,Tn);return t&&e?fe.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function nw(t,e){const n=e.parentNode||e.parentId,i=t.find(a=>a.id===n);if(i){const a=e.position.x+e.width-i.width,l=e.position.y+e.height-i.height;if(a>0||l>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,a>0&&(i.style.width+=a),l>0&&(i.style.height+=l),e.position.x<0){const c=Math.abs(e.position.x);i.position.x=i.position.x-c,i.style.width+=c,e.position.x=0}if(e.position.y<0){const c=Math.abs(e.position.y);i.position.y=i.position.y-c,i.style.height+=c,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function fT(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const n=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,a)=>{const l=t.filter(d=>d.id===a.id);if(l.length===0)return i.push(a),i;const c={...a};for(const d of l)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&nw(i,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&nw(i,c);break}case"remove":return i}return i.push(c),i},n)}function gT(t,e){return fT(t,e)}function tD(t,e){return fT(t,e)}const Os=(t,e)=>({id:t,type:"select",selected:e});function cl(t,e){return t.reduce((n,i)=>{const a=e.includes(i.id);return!i.selected&&a?(i.selected=!0,n.push(Os(i.id,!0))):i.selected&&!a&&(i.selected=!1,n.push(Os(i.id,!1))),n},[])}const vm=(t,e)=>n=>{n.target===e.current&&t?.(n)},nD=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),pT=q.memo(({isSelecting:t,selectionMode:e=vu.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:a,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:y,children:_})=>{const b=q.useRef(null),x=ln(),R=q.useRef(0),D=q.useRef(0),k=q.useRef(),{userSelectionActive:U,elementsSelectable:H,dragging:G}=Tt(nD,Tn),j=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),R.current=0,D.current=0},Q=N=>{l?.(N),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},Y=N=>{if(Array.isArray(n)&&n?.includes(2)){N.preventDefault();return}c?.(N)},I=d?N=>d(N):void 0,T=N=>{const{resetSelectedElements:O,domNode:$}=x.getState();if(k.current=$?.getBoundingClientRect(),!H||!t||N.button!==0||N.target!==b.current||!k.current)return;const{x:M,y:K}=$s(N,k.current);O(),x.setState({userSelectionRect:{width:0,height:0,startX:M,startY:K,x:M,y:K}}),i?.(N)},A=N=>{const{userSelectionRect:O,nodeInternals:$,edges:M,transform:K,onNodesChange:te,onEdgesChange:J,nodeOrigin:V,getNodes:W}=x.getState();if(!t||!k.current||!O)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const re=$s(N,k.current),X=O.startX??0,se=O.startY??0,de={...O,x:re.x<X?re.x:X,y:re.y<se?re.y:se,width:Math.abs(re.x-X),height:Math.abs(re.y-se)},ue=W(),ve=X1($,de,K,e===vu.Partial,!0,V),_e=Q1(ve,M).map(Ne=>Ne.id),Ae=ve.map(Ne=>Ne.id);if(R.current!==Ae.length){R.current=Ae.length;const Ne=cl(ue,Ae);Ne.length&&te?.(Ne)}if(D.current!==_e.length){D.current=_e.length;const Ne=cl(M,_e);Ne.length&&J?.(Ne)}x.setState({userSelectionRect:de})},L=N=>{if(N.button!==0)return;const{userSelectionRect:O}=x.getState();!U&&O&&N.target===b.current&&Q?.(N),x.setState({nodesSelectionActive:R.current>0}),j(),a?.(N)},z=N=>{U&&(x.setState({nodesSelectionActive:R.current>0}),a?.(N)),j()},B=H&&(t||U);return fe.createElement("div",{className:Pn(["react-flow__pane",{dragging:G,selection:t}]),onClick:B?void 0:vm(Q,b),onContextMenu:vm(Y,b),onWheel:vm(I,b),onMouseEnter:B?void 0:f,onMouseDown:B?T:void 0,onMouseMove:B?A:p,onMouseUp:B?L:void 0,onMouseLeave:B?z:y,ref:b,style:Y0},_,fe.createElement(eD,null))});pT.displayName="Pane";function mT(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const i=e.get(n);return i?i.selected?!0:mT(i,e):!1}function rw(t,e,n){let i=t;do{if(i?.matches(e))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function rD(t,e,n,i){return Array.from(t.values()).filter(a=>(a.selected||a.id===i)&&(!a.parentNode||a.parentId||!mT(a,t))&&(a.draggable||e&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function iD(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function yT(t,e,n,i,a=[0,0],l){const c=iD(t,t.extent||i);let d=c;const f=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(f&&t.width&&t.height){const _=n.get(f),{x:b,y:x}=gl(_,a).positionAbsolute;d=_&&Rr(b)&&Rr(x)&&Rr(_.width)&&Rr(_.height)?[[b+t.width*a[0],x+t.height*a[1]],[b+_.width-t.width+t.width*a[0],x+_.height-t.height+t.height*a[1]]]:d}else l?.("005",es.error005()),d=c;else if(t.extent&&f&&t.extent!=="parent"){const _=n.get(f),{x:b,y:x}=gl(_,a).positionAbsolute;d=[[t.extent[0][0]+b,t.extent[0][1]+x],[t.extent[1][0]+b,t.extent[1][1]+x]]}let p={x:0,y:0};if(f){const _=n.get(f);p=gl(_,a).positionAbsolute}const y=d&&d!=="parent"?z0(e,d):e;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function _m({nodeId:t,dragItems:e,nodeInternals:n}){const i=e.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[t?i.find(a=>a.id===t):i[0],i]}const iw=(t,e,n,i)=>{const a=e.querySelectorAll(t);if(!a||!a.length)return null;const l=Array.from(a),c=e.getBoundingClientRect(),d={x:c.width*i[0],y:c.height*i[1]};return l.map(f=>{const p=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(p.left-c.left-d.x)/n,y:(p.top-c.top-d.y)/n,...L0(f)}})};function Fc(t,e,n){return n===void 0?n:i=>{const a=e().nodeInternals.get(t);a&&n(i,{...a})}}function Jm({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:a,unselectNodesAndEdges:l,multiSelectionActive:c,nodeInternals:d,onError:f}=e.getState(),p=d.get(t);if(!p){f?.("012",es.error012(t));return}e.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(l({nodes:[p],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):a([t])}function sD(){const t=ln();return q.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:a,snapToGrid:l}=t.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,f={x:(c-i[0])/i[2],y:(d-i[1])/i[2]};return{xSnapped:l?a[0]*Math.round(f.x/a[0]):f.x,ySnapped:l?a[1]*Math.round(f.y/a[1]):f.y,...f}},[])}function bm(t){return(e,n,i)=>t?.(e,i)}function vT({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:a,isSelectable:l,selectNodesOnDrag:c}){const d=ln(),[f,p]=q.useState(!1),y=q.useRef([]),_=q.useRef({x:null,y:null}),b=q.useRef(0),x=q.useRef(null),R=q.useRef({x:0,y:0}),D=q.useRef(null),k=q.useRef(!1),U=q.useRef(!1),H=q.useRef(!1),G=sD();return q.useEffect(()=>{if(t?.current){const j=Lr(t.current),Q=({x:T,y:A})=>{const{nodeInternals:L,onNodeDrag:z,onSelectionDrag:B,updateNodePositions:N,nodeExtent:O,snapGrid:$,snapToGrid:M,nodeOrigin:K,onError:te}=d.getState();_.current={x:T,y:A};let J=!1,V={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&O){const re=$0(y.current,K);V=U0(re)}if(y.current=y.current.map(re=>{const X={x:T-re.distance.x,y:A-re.distance.y};M&&(X.x=$[0]*Math.round(X.x/$[0]),X.y=$[1]*Math.round(X.y/$[1]));const se=[[O[0][0],O[0][1]],[O[1][0],O[1][1]]];y.current.length>1&&O&&!re.extent&&(se[0][0]=re.positionAbsolute.x-V.x+O[0][0],se[1][0]=re.positionAbsolute.x+(re.width??0)-V.x2+O[1][0],se[0][1]=re.positionAbsolute.y-V.y+O[0][1],se[1][1]=re.positionAbsolute.y+(re.height??0)-V.y2+O[1][1]);const de=yT(re,X,L,se,K,te);return J=J||re.position.x!==de.position.x||re.position.y!==de.position.y,re.position=de.position,re.positionAbsolute=de.positionAbsolute,re}),!J)return;N(y.current,!0,!0),p(!0);const W=a?z:bm(B);if(W&&D.current){const[re,X]=_m({nodeId:a,dragItems:y.current,nodeInternals:L});W(D.current,re,X)}},Y=()=>{if(!x.current)return;const[T,A]=B1(R.current,x.current);if(T!==0||A!==0){const{transform:L,panBy:z}=d.getState();_.current.x=(_.current.x??0)-T/L[2],_.current.y=(_.current.y??0)-A/L[2],z({x:T,y:A})&&Q(_.current)}b.current=requestAnimationFrame(Y)},I=T=>{const{nodeInternals:A,multiSelectionActive:L,nodesDraggable:z,unselectNodesAndEdges:B,onNodeDragStart:N,onSelectionDragStart:O}=d.getState();U.current=!0;const $=a?N:bm(O);(!c||!l)&&!L&&a&&(A.get(a)?.selected||B()),a&&l&&c&&Jm({id:a,store:d,nodeRef:t});const M=G(T);if(_.current=M,y.current=rD(A,z,M,a),$&&y.current){const[K,te]=_m({nodeId:a,dragItems:y.current,nodeInternals:A});$(T.sourceEvent,K,te)}};if(e)j.on(".drag",null);else{const T=fI().on("start",A=>{const{domNode:L,nodeDragThreshold:z}=d.getState();z===0&&I(A),H.current=!1;const B=G(A);_.current=B,x.current=L?.getBoundingClientRect()||null,R.current=$s(A.sourceEvent,x.current)}).on("drag",A=>{const L=G(A),{autoPanOnNodeDrag:z,nodeDragThreshold:B}=d.getState();if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(H.current=!0),!H.current){if(!k.current&&U.current&&z&&(k.current=!0,Y()),!U.current){const N=L.xSnapped-(_?.current?.x??0),O=L.ySnapped-(_?.current?.y??0);Math.sqrt(N*N+O*O)>B&&I(A)}(_.current.x!==L.xSnapped||_.current.y!==L.ySnapped)&&y.current&&U.current&&(D.current=A.sourceEvent,R.current=$s(A.sourceEvent,x.current),Q(L))}}).on("end",A=>{if(!(!U.current||H.current)&&(p(!1),k.current=!1,U.current=!1,cancelAnimationFrame(b.current),y.current)){const{updateNodePositions:L,nodeInternals:z,onNodeDragStop:B,onSelectionDragStop:N}=d.getState(),O=a?B:bm(N);if(L(y.current,!1,!1),O){const[$,M]=_m({nodeId:a,dragItems:y.current,nodeInternals:z});O(A.sourceEvent,$,M)}}}).filter(A=>{const L=A.target;return!A.button&&(!n||!rw(L,`.${n}`,t))&&(!i||rw(L,i,t))});return j.call(T),()=>{j.on(".drag",null)}}}},[t,e,n,i,l,d,a,c,G]),f}function _T(){const t=ln();return q.useCallback(n=>{const{nodeInternals:i,nodeExtent:a,updateNodePositions:l,getNodes:c,snapToGrid:d,snapGrid:f,onError:p,nodesDraggable:y}=t.getState(),_=c().filter(H=>H.selected&&(H.draggable||y&&typeof H.draggable>"u")),b=d?f[0]:5,x=d?f[1]:5,R=n.isShiftPressed?4:1,D=n.x*b*R,k=n.y*x*R,U=_.map(H=>{if(H.positionAbsolute){const G={x:H.positionAbsolute.x+D,y:H.positionAbsolute.y+k};d&&(G.x=f[0]*Math.round(G.x/f[0]),G.y=f[1]*Math.round(G.y/f[1]));const{positionAbsolute:j,position:Q}=yT(H,G,i,a,void 0,p);H.position=Q,H.positionAbsolute=j}return H});l(U,!0,!1)},[])}const pl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Gc=t=>{const e=({id:n,type:i,data:a,xPos:l,yPos:c,xPosOrigin:d,yPosOrigin:f,selected:p,onClick:y,onMouseEnter:_,onMouseMove:b,onMouseLeave:x,onContextMenu:R,onDoubleClick:D,style:k,className:U,isDraggable:H,isSelectable:G,isConnectable:j,isFocusable:Q,selectNodesOnDrag:Y,sourcePosition:I,targetPosition:T,hidden:A,resizeObserver:L,dragHandle:z,zIndex:B,isParent:N,noDragClassName:O,noPanClassName:$,initialized:M,disableKeyboardA11y:K,ariaLabel:te,rfId:J,hasHandleBounds:V})=>{const W=ln(),re=q.useRef(null),X=q.useRef(null),se=q.useRef(I),de=q.useRef(T),ue=q.useRef(i),ve=G||H||y||_||b||x,_e=_T(),Ae=Fc(n,W.getState,_),Ne=Fc(n,W.getState,b),et=Fc(n,W.getState,x),rt=Fc(n,W.getState,R),Le=Fc(n,W.getState,D),tt=ze=>{const{nodeDragThreshold:Ee}=W.getState();if(G&&(!Y||!H||Ee>0)&&Jm({id:n,store:W,nodeRef:re}),y){const At=W.getState().nodeInternals.get(n);At&&y(ze,{...At})}},it=ze=>{if(!Km(ze)&&!K)if(H1.includes(ze.key)&&G){const Ee=ze.key==="Escape";Jm({id:n,store:W,unselect:Ee,nodeRef:re})}else H&&p&&Object.prototype.hasOwnProperty.call(pl,ze.key)&&(W.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~l}, y: ${~~c}`}),_e({x:pl[ze.key].x,y:pl[ze.key].y,isShiftPressed:ze.shiftKey}))};q.useEffect(()=>()=>{X.current&&(L?.unobserve(X.current),X.current=null)},[]),q.useEffect(()=>{if(re.current&&!A){const ze=re.current;(!M||!V||X.current!==ze)&&(X.current&&L?.unobserve(X.current),L?.observe(ze),X.current=ze)}},[A,M,V]),q.useEffect(()=>{const ze=ue.current!==i,Ee=se.current!==I,At=de.current!==T;re.current&&(ze||Ee||At)&&(ze&&(ue.current=i),Ee&&(se.current=I),At&&(de.current=T),W.getState().updateNodeDimensions([{id:n,nodeElement:re.current,forceUpdate:!0}]))},[n,i,I,T]);const Lt=vT({nodeRef:re,disabled:A||!H,noDragClassName:O,handleSelector:z,nodeId:n,isSelectable:G,selectNodesOnDrag:Y});return A?null:fe.createElement("div",{className:Pn(["react-flow__node",`react-flow__node-${i}`,{[$]:H},U,{selected:p,selectable:G,parent:N,dragging:Lt}]),ref:re,style:{zIndex:B,transform:`translate(${d}px,${f}px)`,pointerEvents:ve?"all":"none",visibility:M?"visible":"hidden",...k},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Ae,onMouseMove:Ne,onMouseLeave:et,onContextMenu:rt,onClick:tt,onDoubleClick:Le,onKeyDown:Q?it:void 0,tabIndex:Q?0:void 0,role:Q?"button":void 0,"aria-describedby":K?void 0:`${lT}-${J}`,"aria-label":te},fe.createElement(_4,{value:n},fe.createElement(t,{id:n,data:a,type:i,xPos:l,yPos:c,selected:p,isConnectable:j,sourcePosition:I,targetPosition:T,dragging:Lt,dragHandle:z,zIndex:B})))};return e.displayName="NodeWrapper",q.memo(e)};const aD=t=>{const e=t.getNodes().filter(n=>n.selected);return{...$0(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function oD({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ln(),{width:a,height:l,x:c,y:d,transformString:f,userSelectionActive:p}=Tt(aD,Tn),y=_T(),_=q.useRef(null);if(q.useEffect(()=>{n||_.current?.focus({preventScroll:!0})},[n]),vT({nodeRef:_}),p||!a||!l)return null;const b=t?R=>{const D=i.getState().getNodes().filter(k=>k.selected);t(R,D)}:void 0,x=R=>{Object.prototype.hasOwnProperty.call(pl,R.key)&&y({x:pl[R.key].x,y:pl[R.key].y,isShiftPressed:R.shiftKey})};return fe.createElement("div",{className:Pn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:f}},fe.createElement("div",{ref:_,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:x,style:{width:a,height:l,top:d,left:c}}))}var lD=q.memo(oD);const cD=t=>t.nodesSelectionActive,bT=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,deleteKeyCode:d,onMove:f,onMoveStart:p,onMoveEnd:y,selectionKeyCode:_,selectionOnDrag:b,selectionMode:x,onSelectionStart:R,onSelectionEnd:D,multiSelectionKeyCode:k,panActivationKeyCode:U,zoomActivationKeyCode:H,elementsSelectable:G,zoomOnScroll:j,zoomOnPinch:Q,panOnScroll:Y,panOnScrollSpeed:I,panOnScrollMode:T,zoomOnDoubleClick:A,panOnDrag:L,defaultViewport:z,translateExtent:B,minZoom:N,maxZoom:O,preventScrolling:$,onSelectionContextMenu:M,noWheelClassName:K,noPanClassName:te,disableKeyboardA11y:J})=>{const V=Tt(cD),W=bu(_),re=bu(U),X=re||L,se=re||Y,de=W||b&&X!==!0;return K4({deleteKeyCode:d,multiSelectionKeyCode:k}),fe.createElement(Z4,{onMove:f,onMoveStart:p,onMoveEnd:y,onPaneContextMenu:l,elementsSelectable:G,zoomOnScroll:j,zoomOnPinch:Q,panOnScroll:se,panOnScrollSpeed:I,panOnScrollMode:T,zoomOnDoubleClick:A,panOnDrag:!W&&X,defaultViewport:z,translateExtent:B,minZoom:N,maxZoom:O,zoomActivationKeyCode:H,preventScrolling:$,noWheelClassName:K,noPanClassName:te},fe.createElement(pT,{onSelectionStart:R,onSelectionEnd:D,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:l,onPaneScroll:c,panOnDrag:X,isSelecting:!!de,selectionMode:x},t,V&&fe.createElement(lD,{onSelectionContextMenu:M,noPanClassName:te,disableKeyboardA11y:J})))};bT.displayName="FlowRenderer";var uD=q.memo(bT);function dD(t){return Tt(q.useCallback(n=>t?X1(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function hD(t){const e={input:Gc(t.input||iT),default:Gc(t.default||Zm),output:Gc(t.output||aT),group:Gc(t.group||G0)},n={},i=Object.keys(t).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,l)=>(a[l]=Gc(t[l]||Zm),a),n);return{...e,...i}}const fD=({x:t,y:e,width:n,height:i,origin:a})=>!n||!i?{x:t,y:e}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:t,y:e}:{x:t-n*a[0],y:e-i*a[1]},gD=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),ET=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,updateNodeDimensions:l,onError:c}=Tt(gD,Tn),d=dD(t.onlyRenderVisibleElements),f=q.useRef(),p=q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(_=>{const b=_.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));l(b)});return f.current=y,y},[]);return q.useEffect(()=>()=>{f?.current?.disconnect()},[]),fe.createElement("div",{className:"react-flow__nodes",style:Y0},d.map(y=>{let _=y.type||"default";t.nodeTypes[_]||(c?.("003",es.error003(_)),_="default");const b=t.nodeTypes[_]||t.nodeTypes.default,x=!!(y.draggable||e&&typeof y.draggable>"u"),R=!!(y.selectable||a&&typeof y.selectable>"u"),D=!!(y.connectable||n&&typeof y.connectable>"u"),k=!!(y.focusable||i&&typeof y.focusable>"u"),U=t.nodeExtent?z0(y.positionAbsolute,t.nodeExtent):y.positionAbsolute,H=U?.x??0,G=U?.y??0,j=fD({x:H,y:G,width:y.width??0,height:y.height??0,origin:t.nodeOrigin});return fe.createElement(b,{key:y.id,id:y.id,className:y.className,style:y.style,type:_,data:y.data,sourcePosition:y.sourcePosition||Se.Bottom,targetPosition:y.targetPosition||Se.Top,hidden:y.hidden,xPos:H,yPos:G,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!y.selected,isDraggable:x,isSelectable:R,isConnectable:D,isFocusable:k,resizeObserver:p,dragHandle:y.dragHandle,zIndex:y[kt]?.z??0,isParent:!!y[kt]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!y.width&&!!y.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[kt]?.handleBounds})}))};ET.displayName="NodeRenderer";var pD=q.memo(ET);const mD=(t,e,n)=>n===Se.Left?t-e:n===Se.Right?t+e:t,yD=(t,e,n)=>n===Se.Top?t-e:n===Se.Bottom?t+e:t,sw="react-flow__edgeupdater",aw=({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:a,onMouseEnter:l,onMouseOut:c,type:d})=>fe.createElement("circle",{onMouseDown:a,onMouseEnter:l,onMouseOut:c,className:Pn([sw,`${sw}-${d}`]),cx:mD(e,i,t),cy:yD(n,i,t),r:i,stroke:"transparent",fill:"transparent"}),vD=()=>!0;var el=t=>{const e=({id:n,className:i,type:a,data:l,onClick:c,onEdgeDoubleClick:d,selected:f,animated:p,label:y,labelStyle:_,labelShowBg:b,labelBgStyle:x,labelBgPadding:R,labelBgBorderRadius:D,style:k,source:U,target:H,sourceX:G,sourceY:j,targetX:Q,targetY:Y,sourcePosition:I,targetPosition:T,elementsSelectable:A,hidden:L,sourceHandleId:z,targetHandleId:B,onContextMenu:N,onMouseEnter:O,onMouseMove:$,onMouseLeave:M,reconnectRadius:K,onReconnect:te,onReconnectStart:J,onReconnectEnd:V,markerEnd:W,markerStart:re,rfId:X,ariaLabel:se,isFocusable:de,isReconnectable:ue,pathOptions:ve,interactionWidth:_e,disableKeyboardA11y:Ae})=>{const Ne=q.useRef(null),[et,rt]=q.useState(!1),[Le,tt]=q.useState(!1),it=ln(),Lt=q.useMemo(()=>`url('#${Qm(re,X)}')`,[re,X]),ze=q.useMemo(()=>`url('#${Qm(W,X)}')`,[W,X]);if(L)return null;const Ee=Ut=>{const{edges:Jt,addSelectedEdges:Nn,unselectNodesAndEdges:Cn,multiSelectionActive:en}=it.getState(),cn=Jt.find(In=>In.id===n);cn&&(A&&(it.setState({nodesSelectionActive:!1}),cn.selected&&en?(Cn({nodes:[],edges:[cn]}),Ne.current?.blur()):Nn([n])),c&&c(Ut,cn))},At=$c(n,it.getState,d),vn=$c(n,it.getState,N),Gt=$c(n,it.getState,O),Fn=$c(n,it.getState,$),An=$c(n,it.getState,M),Rn=(Ut,Jt)=>{if(Ut.button!==0)return;const{edges:Nn,isValidConnection:Cn}=it.getState(),en=Jt?H:U,cn=(Jt?B:z)||null,In=Jt?"target":"source",xi=Cn||vD,Ti=Jt,Ir=Nn.find(Yn=>Yn.id===n);tt(!0),J?.(Ut,Ir,In);const Gn=Yn=>{tt(!1),V?.(Yn,Ir,In)};eT({event:Ut,handleId:cn,nodeId:en,onConnect:Yn=>te?.(Ir,Yn),isTarget:Ti,getState:it.getState,setState:it.setState,isValidConnection:xi,edgeUpdaterType:In,onReconnectEnd:Gn})},Cr=Ut=>Rn(Ut,!0),at=Ut=>Rn(Ut,!1),Fe=()=>rt(!0),zt=()=>rt(!1),Et=!A&&!c,Fr=Ut=>{if(!Ae&&H1.includes(Ut.key)&&A){const{unselectNodesAndEdges:Jt,addSelectedEdges:Nn,edges:Cn}=it.getState();Ut.key==="Escape"?(Ne.current?.blur(),Jt({edges:[Cn.find(cn=>cn.id===n)]})):Nn([n])}};return fe.createElement("g",{className:Pn(["react-flow__edge",`react-flow__edge-${a}`,i,{selected:f,animated:p,inactive:Et,updating:et}]),onClick:Ee,onDoubleClick:At,onContextMenu:vn,onMouseEnter:Gt,onMouseMove:Fn,onMouseLeave:An,onKeyDown:de?Fr:void 0,tabIndex:de?0:void 0,role:de?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":se===null?void 0:se||`Edge from ${U} to ${H}`,"aria-describedby":de?`${cT}-${X}`:void 0,ref:Ne},!Le&&fe.createElement(t,{id:n,source:U,target:H,selected:f,animated:p,label:y,labelStyle:_,labelShowBg:b,labelBgStyle:x,labelBgPadding:R,labelBgBorderRadius:D,data:l,style:k,sourceX:G,sourceY:j,targetX:Q,targetY:Y,sourcePosition:I,targetPosition:T,sourceHandleId:z,targetHandleId:B,markerStart:Lt,markerEnd:ze,pathOptions:ve,interactionWidth:_e}),ue&&fe.createElement(fe.Fragment,null,(ue==="source"||ue===!0)&&fe.createElement(aw,{position:I,centerX:G,centerY:j,radius:K,onMouseDown:Cr,onMouseEnter:Fe,onMouseOut:zt,type:"source"}),(ue==="target"||ue===!0)&&fe.createElement(aw,{position:T,centerX:Q,centerY:Y,radius:K,onMouseDown:at,onMouseEnter:Fe,onMouseOut:zt,type:"target"})))};return e.displayName="EdgeWrapper",q.memo(e)};function _D(t){const e={default:el(t.default||tf),straight:el(t.bezier||H0),step:el(t.step||j0),smoothstep:el(t.step||Df),simplebezier:el(t.simplebezier||B0)},n={},i=Object.keys(t).filter(a=>!["default","bezier"].includes(a)).reduce((a,l)=>(a[l]=el(t[l]||tf),a),n);return{...e,...i}}function ow(t,e,n=null){const i=(n?.x||0)+e.x,a=(n?.y||0)+e.y,l=n?.width||e.width,c=n?.height||e.height;switch(t){case Se.Top:return{x:i+l/2,y:a};case Se.Right:return{x:i+l,y:a+c/2};case Se.Bottom:return{x:i+l/2,y:a+c};case Se.Left:return{x:i,y:a+c/2}}}function lw(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const bD=(t,e,n,i,a,l)=>{const c=ow(n,t,e),d=ow(l,i,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function ED({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:i,targetWidth:a,targetHeight:l,width:c,height:d,transform:f}){const p={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+a),y2:Math.max(t.y+i,e.y+l)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const y=U0({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:c/f[2],height:d/f[2]}),_=Math.max(0,Math.min(y.x2,p.x2)-Math.max(y.x,p.x)),b=Math.max(0,Math.min(y.y2,p.y2)-Math.max(y.y,p.y));return Math.ceil(_*b)>0}function cw(t){const e=t?.[kt]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const wD=[{level:0,isMaxLevel:!0,edges:[]}];function xD(t,e,n=!1){let i=-1;const a=t.reduce((c,d)=>{const f=Rr(d.zIndex);let p=f?d.zIndex:0;if(n){const y=e.get(d.target),_=e.get(d.source),b=d.selected||y?.selected||_?.selected,x=Math.max(_?.[kt]?.z||0,y?.[kt]?.z||0,1e3);p=(f?d.zIndex:0)+(b?x:0)}return c[p]?c[p].push(d):c[p]=[d],i=p>i?p:i,c},{}),l=Object.entries(a).map(([c,d])=>{const f=+c;return{edges:d,level:f,isMaxLevel:f===i}});return l.length===0?wD:l}function TD(t,e,n){const i=Tt(q.useCallback(a=>t?a.edges.filter(l=>{const c=e.get(l.source),d=e.get(l.target);return c?.width&&c?.height&&d?.width&&d?.height&&ED({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[t,e]));return xD(i,e,n)}const SD=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),AD=({color:t="none",strokeWidth:e=1})=>fe.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),uw={[_u.Arrow]:SD,[_u.ArrowClosed]:AD};function RD(t){const e=ln();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(uw,t)?uw[t]:(e.getState().onError?.("009",es.error009(t)),null),[t])}const ND=({id:t,type:e,color:n,width:i=12.5,height:a=12.5,markerUnits:l="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const f=RD(e);return f?fe.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:l,orient:d,refX:"0",refY:"0"},fe.createElement(f,{color:n,strokeWidth:c})):null},CD=({defaultColor:t,rfId:e})=>n=>{const i=[];return n.edges.reduce((a,l)=>([l.markerStart,l.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=Qm(c,e);i.includes(d)||(a.push({id:d,color:c.color||t,...c}),i.push(d))}}),a),[]).sort((a,l)=>a.id.localeCompare(l.id))},wT=({defaultColor:t,rfId:e})=>{const n=Tt(q.useCallback(CD({defaultColor:t,rfId:e}),[t,e]),(i,a)=>!(i.length!==a.length||i.some((l,c)=>l.id!==a[c].id)));return fe.createElement("defs",null,n.map(i=>fe.createElement(ND,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};wT.displayName="MarkerDefinitions";var ID=q.memo(wT);const kD=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),xT=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:i,edgeTypes:a,noPanClassName:l,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:y,onEdgeDoubleClick:_,onReconnect:b,onReconnectStart:x,onReconnectEnd:R,reconnectRadius:D,children:k,disableKeyboardA11y:U})=>{const{edgesFocusable:H,edgesUpdatable:G,elementsSelectable:j,width:Q,height:Y,connectionMode:I,nodeInternals:T,onError:A}=Tt(kD,Tn),L=TD(e,T,n);return Q?fe.createElement(fe.Fragment,null,L.map(({level:z,edges:B,isMaxLevel:N})=>fe.createElement("svg",{key:z,style:{zIndex:z},width:Q,height:Y,className:"react-flow__edges react-flow__container"},N&&fe.createElement(ID,{defaultColor:t,rfId:i}),fe.createElement("g",null,B.map(O=>{const[$,M,K]=cw(T.get(O.source)),[te,J,V]=cw(T.get(O.target));if(!K||!V)return null;let W=O.type||"default";a[W]||(A?.("011",es.error011(W)),W="default");const re=a[W]||a.default,X=I===Qs.Strict?J.target:(J.target??[]).concat(J.source??[]),se=lw(M.source,O.sourceHandle),de=lw(X,O.targetHandle),ue=se?.position||Se.Bottom,ve=de?.position||Se.Top,_e=!!(O.focusable||H&&typeof O.focusable>"u"),Ae=O.reconnectable||O.updatable,Ne=typeof b<"u"&&(Ae||G&&typeof Ae>"u");if(!se||!de)return A?.("008",es.error008(se,O)),null;const{sourceX:et,sourceY:rt,targetX:Le,targetY:tt}=bD($,se,ue,te,de,ve);return fe.createElement(re,{key:O.id,id:O.id,className:Pn([O.className,l]),type:W,data:O.data,selected:!!O.selected,animated:!!O.animated,hidden:!!O.hidden,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,style:O.style,source:O.source,target:O.target,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerEnd:O.markerEnd,markerStart:O.markerStart,sourceX:et,sourceY:rt,targetX:Le,targetY:tt,sourcePosition:ue,targetPosition:ve,elementsSelectable:j,onContextMenu:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:p,onClick:y,onEdgeDoubleClick:_,onReconnect:b,onReconnectStart:x,onReconnectEnd:R,reconnectRadius:D,rfId:i,ariaLabel:O.ariaLabel,isFocusable:_e,isReconnectable:Ne,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth,disableKeyboardA11y:U})})))),k):null};xT.displayName="EdgeRenderer";var DD=q.memo(xT);const MD=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function OD({children:t}){const e=Tt(MD);return fe.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function PD(t){const e=Lu(),n=q.useRef(!1);q.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const VD={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top},TT=({nodeId:t,handleType:e,style:n,type:i=Ps.Bezier,CustomComponent:a,connectionStatus:l})=>{const{fromNode:c,handleId:d,toX:f,toY:p,connectionMode:y}=Tt(q.useCallback(Y=>({fromNode:Y.nodeInternals.get(t),handleId:Y.connectionHandleId,toX:(Y.connectionPosition.x-Y.transform[0])/Y.transform[2],toY:(Y.connectionPosition.y-Y.transform[1])/Y.transform[2],connectionMode:Y.connectionMode}),[t]),Tn),_=c?.[kt]?.handleBounds;let b=_?.[e];if(y===Qs.Loose&&(b=b||_?.[e==="source"?"target":"source"]),!c||!b)return null;const x=d?b.find(Y=>Y.id===d):b[0],R=x?x.x+x.width/2:(c.width??0)/2,D=x?x.y+x.height/2:c.height??0,k=(c.positionAbsolute?.x??0)+R,U=(c.positionAbsolute?.y??0)+D,H=x?.position,G=H?VD[H]:null;if(!H||!G)return null;if(a)return fe.createElement(a,{connectionLineType:i,connectionLineStyle:n,fromNode:c,fromHandle:x,fromX:k,fromY:U,toX:f,toY:p,fromPosition:H,toPosition:G,connectionStatus:l});let j="";const Q={sourceX:k,sourceY:U,sourcePosition:H,targetX:f,targetY:p,targetPosition:G};return i===Ps.Bezier?[j]=Y1(Q):i===Ps.Step?[j]=Xm({...Q,borderRadius:0}):i===Ps.SmoothStep?[j]=Xm(Q):i===Ps.SimpleBezier?[j]=G1(Q):j=`M${k},${U} ${f},${p}`,fe.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};TT.displayName="ConnectionLine";const LD=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function zD({containerStyle:t,style:e,type:n,component:i}){const{nodeId:a,handleType:l,nodesConnectable:c,width:d,height:f,connectionStatus:p}=Tt(LD,Tn);return!(a&&l&&d&&c)?null:fe.createElement("svg",{style:t,width:d,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},fe.createElement("g",{className:Pn(["react-flow__connection",p])},fe.createElement(TT,{nodeId:a,handleType:l,style:e,type:n,CustomComponent:i,connectionStatus:p})))}function dw(t,e){return q.useRef(null),ln(),q.useMemo(()=>e(t),[t])}const ST=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:i,onMoveEnd:a,onInit:l,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:f,onEdgeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:x,onSelectionContextMenu:R,onSelectionStart:D,onSelectionEnd:k,connectionLineType:U,connectionLineStyle:H,connectionLineComponent:G,connectionLineContainerStyle:j,selectionKeyCode:Q,selectionOnDrag:Y,selectionMode:I,multiSelectionKeyCode:T,panActivationKeyCode:A,zoomActivationKeyCode:L,deleteKeyCode:z,onlyRenderVisibleElements:B,elementsSelectable:N,selectNodesOnDrag:O,defaultViewport:$,translateExtent:M,minZoom:K,maxZoom:te,preventScrolling:J,defaultMarkerColor:V,zoomOnScroll:W,zoomOnPinch:re,panOnScroll:X,panOnScrollSpeed:se,panOnScrollMode:de,zoomOnDoubleClick:ue,panOnDrag:ve,onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:et,onPaneScroll:rt,onPaneContextMenu:Le,onEdgeContextMenu:tt,onEdgeMouseEnter:it,onEdgeMouseMove:Lt,onEdgeMouseLeave:ze,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,elevateEdgesOnSelect:Cr,disableKeyboardA11y:at,nodeOrigin:Fe,nodeExtent:zt,rfId:Et})=>{const Fr=dw(t,hD),Ut=dw(e,_D);return PD(l),fe.createElement(uD,{onPaneClick:_e,onPaneMouseEnter:Ae,onPaneMouseMove:Ne,onPaneMouseLeave:et,onPaneContextMenu:Le,onPaneScroll:rt,deleteKeyCode:z,selectionKeyCode:Q,selectionOnDrag:Y,selectionMode:I,onSelectionStart:D,onSelectionEnd:k,multiSelectionKeyCode:T,panActivationKeyCode:A,zoomActivationKeyCode:L,elementsSelectable:N,onMove:n,onMoveStart:i,onMoveEnd:a,zoomOnScroll:W,zoomOnPinch:re,zoomOnDoubleClick:ue,panOnScroll:X,panOnScrollSpeed:se,panOnScrollMode:de,panOnDrag:ve,defaultViewport:$,translateExtent:M,minZoom:K,maxZoom:te,onSelectionContextMenu:R,preventScrolling:J,noDragClassName:Fn,noWheelClassName:An,noPanClassName:Rn,disableKeyboardA11y:at},fe.createElement(OD,null,fe.createElement(DD,{edgeTypes:Ut,onEdgeClick:d,onEdgeDoubleClick:p,onlyRenderVisibleElements:B,onEdgeContextMenu:tt,onEdgeMouseEnter:it,onEdgeMouseMove:Lt,onEdgeMouseLeave:ze,onReconnect:Ee,onReconnectStart:At,onReconnectEnd:vn,reconnectRadius:Gt,defaultMarkerColor:V,noPanClassName:Rn,elevateEdgesOnSelect:!!Cr,disableKeyboardA11y:at,rfId:Et},fe.createElement(zD,{style:H,type:U,component:G,containerStyle:j})),fe.createElement("div",{className:"react-flow__edgelabel-renderer"}),fe.createElement(pD,{nodeTypes:Fr,onNodeClick:c,onNodeDoubleClick:f,onNodeMouseEnter:y,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:x,selectNodesOnDrag:O,onlyRenderVisibleElements:B,noPanClassName:Rn,noDragClassName:Fn,disableKeyboardA11y:at,nodeOrigin:Fe,nodeExtent:zt,rfId:Et})))};ST.displayName="GraphView";var UD=q.memo(ST);const e0=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ks={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:e0,nodeExtent:e0,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Qs.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:f4,isValidConnection:void 0},BD=()=>SN((t,e)=>({...ks,setNodes:n=>{const{nodeInternals:i,nodeOrigin:a,elevateNodesOnSelect:l}=e();t({nodeInternals:ym(n,i,a,l)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=e();t({edges:n.map(a=>({...i,...a}))})},setDefaultNodesAndEdges:(n,i)=>{const a=typeof n<"u",l=typeof i<"u",c=a?ym(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:l?i:[],hasDefaultNodes:a,hasDefaultEdges:l})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:a,fitViewOnInit:l,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:f,nodeOrigin:p}=e(),y=f?.querySelector(".react-flow__viewport");if(!y)return;const _=window.getComputedStyle(y),{m22:b}=new window.DOMMatrixReadOnly(_.transform),x=n.reduce((D,k)=>{const U=a.get(k.id);if(U?.hidden)a.set(U.id,{...U,[kt]:{...U[kt],handleBounds:void 0}});else if(U){const H=L0(k.nodeElement);!!(H.width&&H.height&&(U.width!==H.width||U.height!==H.height||k.forceUpdate))&&(a.set(U.id,{...U,[kt]:{...U[kt],handleBounds:{source:iw(".source",k.nodeElement,b,p),target:iw(".target",k.nodeElement,b,p)}},...H}),D.push({id:U.id,type:"dimensions",dimensions:H}))}return D},[]);dT(a,p);const R=c||l&&!c&&hT(e,{initial:!0,...d});t({nodeInternals:new Map(a),fitViewOnInitDone:R}),x?.length>0&&i?.(x)},updateNodePositions:(n,i=!0,a=!1)=>{const{triggerNodeChanges:l}=e(),c=n.map(d=>{const f={id:d.id,type:"position",dragging:a};return i&&(f.positionAbsolute=d.positionAbsolute,f.position=d.position),f});l(c)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:a,hasDefaultNodes:l,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:f}=e();if(n?.length){if(l){const p=gT(n,d()),y=ym(p,a,c,f);t({nodeInternals:y})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Os(f,!0)):(c=cl(l(),n),d=cl(a,[])),vh({changedNodes:c,changedEdges:d,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:a,getNodes:l}=e();let c,d=null;i?c=n.map(f=>Os(f,!0)):(c=cl(a,n),d=cl(l(),[])),vh({changedNodes:d,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:a,getNodes:l}=e(),c=n||l(),d=i||a,f=c.map(y=>(y.selected=!1,Os(y.id,!1))),p=d.map(y=>Os(y.id,!1));vh({changedNodes:f,changedEdges:p,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:a}=e();i?.scaleExtent([n,a]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:a}=e();i?.scaleExtent([a,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=e(),l=i().filter(d=>d.selected).map(d=>Os(d.id,!1)),c=n.filter(d=>d.selected).map(d=>Os(d.id,!1));vh({changedNodes:l,changedEdges:c,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:i}=e();i.forEach(a=>{a.positionAbsolute=z0(a.position,n)}),t({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:a,height:l,d3Zoom:c,d3Selection:d,translateExtent:f}=e();if(!c||!d||!n.x&&!n.y)return!1;const p=qs.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),y=[[0,0],[a,l]],_=c?.constrain()(p,y,f);return c.transform(d,_),i[0]!==_.x||i[1]!==_.y||i[2]!==_.k},cancelConnection:()=>t({connectionNodeId:ks.connectionNodeId,connectionHandleId:ks.connectionHandleId,connectionHandleType:ks.connectionHandleType,connectionStatus:ks.connectionStatus,connectionStartHandle:ks.connectionStartHandle,connectionEndHandle:ks.connectionEndHandle}),reset:()=>t({...ks})}),Object.is),AT=({children:t})=>{const e=q.useRef(null);return e.current||(e.current=BD()),fe.createElement(s4,{value:e.current},t)};AT.displayName="ReactFlowProvider";const RT=({children:t})=>q.useContext(kf)?fe.createElement(fe.Fragment,null,t):fe.createElement(AT,null,t);RT.displayName="ReactFlowWrapper";const jD={input:iT,default:Zm,output:aT,group:G0},HD={default:tf,straight:H0,step:j0,smoothstep:Df,simplebezier:B0},qD=[0,0],$D=[15,15],FD={x:0,y:0,zoom:1},GD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},NT=q.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:l=jD,edgeTypes:c=HD,onNodeClick:d,onEdgeClick:f,onInit:p,onMove:y,onMoveStart:_,onMoveEnd:b,onConnect:x,onConnectStart:R,onConnectEnd:D,onClickConnectStart:k,onClickConnectEnd:U,onNodeMouseEnter:H,onNodeMouseMove:G,onNodeMouseLeave:j,onNodeContextMenu:Q,onNodeDoubleClick:Y,onNodeDragStart:I,onNodeDrag:T,onNodeDragStop:A,onNodesDelete:L,onEdgesDelete:z,onSelectionChange:B,onSelectionDragStart:N,onSelectionDrag:O,onSelectionDragStop:$,onSelectionContextMenu:M,onSelectionStart:K,onSelectionEnd:te,connectionMode:J=Qs.Strict,connectionLineType:V=Ps.Bezier,connectionLineStyle:W,connectionLineComponent:re,connectionLineContainerStyle:X,deleteKeyCode:se="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:ue=!1,selectionMode:ve=vu.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Ae=ef()?"Meta":"Control",zoomActivationKeyCode:Ne=ef()?"Meta":"Control",snapToGrid:et=!1,snapGrid:rt=$D,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:tt=!0,nodesDraggable:it,nodesConnectable:Lt,nodesFocusable:ze,nodeOrigin:Ee=qD,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,defaultViewport:Fn=FD,minZoom:An=.5,maxZoom:Rn=2,translateExtent:Cr=e0,preventScrolling:at=!0,nodeExtent:Fe,defaultMarkerColor:zt="#b1b1b7",zoomOnScroll:Et=!0,zoomOnPinch:Fr=!0,panOnScroll:Ut=!1,panOnScrollSpeed:Jt=.5,panOnScrollMode:Nn=Ha.Free,zoomOnDoubleClick:Cn=!0,panOnDrag:en=!0,onPaneClick:cn,onPaneMouseEnter:In,onPaneMouseMove:xi,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,children:ur,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:la,onEdgeMouseMove:Gr,onEdgeMouseLeave:ss,onEdgeUpdate:Yr,onEdgeUpdateStart:ao,onEdgeUpdateEnd:mt,onReconnect:Mt,onReconnectStart:Rt,onReconnectEnd:Vn,reconnectRadius:ca=10,edgeUpdaterRadius:jl=10,onNodesChange:Kr,onEdgesChange:oo,noDragClassName:Si="nodrag",noWheelClassName:Xr="nowheel",noPanClassName:hr="nopan",fitView:fr=!1,fitViewOptions:gr,connectOnClick:un=!0,attributionPosition:wt,proOptions:ua,defaultEdgeOptions:as,elevateNodesOnSelect:Kn=!0,elevateEdgesOnSelect:kr=!1,disableKeyboardA11y:da=!1,autoPanOnConnect:lo=!0,autoPanOnNodeDrag:Ai=!0,connectionRadius:co=20,isValidConnection:Qr,onError:pr,style:Yt,id:Wr,nodeDragThreshold:uo,...Dr},os)=>{const Zr=Wr||"1";return fe.createElement("div",{...Dr,style:{...Yt,...GD},ref:os,className:Pn(["react-flow",a]),"data-testid":"rf__wrapper",id:Wr},fe.createElement(RT,null,fe.createElement(UD,{onInit:p,onMove:y,onMoveStart:_,onMoveEnd:b,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:H,onNodeMouseMove:G,onNodeMouseLeave:j,onNodeContextMenu:Q,onNodeDoubleClick:Y,nodeTypes:l,edgeTypes:c,connectionLineType:V,connectionLineStyle:W,connectionLineComponent:re,connectionLineContainerStyle:X,selectionKeyCode:de,selectionOnDrag:ue,selectionMode:ve,deleteKeyCode:se,multiSelectionKeyCode:Ae,panActivationKeyCode:_e,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:Le,selectNodesOnDrag:tt,defaultViewport:Fn,translateExtent:Cr,minZoom:An,maxZoom:Rn,preventScrolling:at,zoomOnScroll:Et,zoomOnPinch:Fr,zoomOnDoubleClick:Cn,panOnScroll:Ut,panOnScrollSpeed:Jt,panOnScrollMode:Nn,panOnDrag:en,onPaneClick:cn,onPaneMouseEnter:In,onPaneMouseMove:xi,onPaneMouseLeave:Ti,onPaneScroll:Ir,onPaneContextMenu:Gn,onSelectionContextMenu:M,onSelectionStart:K,onSelectionEnd:te,onEdgeContextMenu:Yn,onEdgeDoubleClick:dr,onEdgeMouseEnter:la,onEdgeMouseMove:Gr,onEdgeMouseLeave:ss,onReconnect:Mt??Yr,onReconnectStart:Rt??ao,onReconnectEnd:Vn??mt,reconnectRadius:ca??jl,defaultMarkerColor:zt,noDragClassName:Si,noWheelClassName:Xr,noPanClassName:hr,elevateEdgesOnSelect:kr,rfId:Zr,disableKeyboardA11y:da,nodeOrigin:Ee,nodeExtent:Fe}),fe.createElement(V4,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:x,onConnectStart:R,onConnectEnd:D,onClickConnectStart:k,onClickConnectEnd:U,nodesDraggable:it,nodesConnectable:Lt,nodesFocusable:ze,edgesFocusable:At,edgesUpdatable:vn,elementsSelectable:Gt,elevateNodesOnSelect:Kn,minZoom:An,maxZoom:Rn,nodeExtent:Fe,onNodesChange:Kr,onEdgesChange:oo,snapToGrid:et,snapGrid:rt,connectionMode:J,translateExtent:Cr,connectOnClick:un,defaultEdgeOptions:as,fitView:fr,fitViewOptions:gr,onNodesDelete:L,onEdgesDelete:z,onNodeDragStart:I,onNodeDrag:T,onNodeDragStop:A,onSelectionDrag:O,onSelectionDragStart:N,onSelectionDragStop:$,noPanClassName:hr,nodeOrigin:Ee,rfId:Zr,autoPanOnConnect:lo,autoPanOnNodeDrag:Ai,onError:pr,connectionRadius:co,isValidConnection:Qr,nodeDragThreshold:uo}),fe.createElement(O4,{onSelectionChange:B}),ur,fe.createElement(o4,{proOptions:ua,position:wt}),fe.createElement(j4,{rfId:Zr,disableKeyboardA11y:da})))});NT.displayName="ReactFlow";function CT(t){return e=>{const[n,i]=q.useState(e),a=q.useCallback(l=>i(c=>t(l,c)),[]);return[n,i,a]}}const YD=CT(gT),KD=CT(tD);function XD(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},fe.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function QD(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},fe.createElement("path",{d:"M0 0h32v4.2H0z"}))}function WD(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},fe.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function ZD(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function JD(){return fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},fe.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Zc=({children:t,className:e,...n})=>fe.createElement("button",{type:"button",className:Pn(["react-flow__controls-button",e]),...n},t);Zc.displayName="ControlButton";const e3=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),IT=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:l,onZoomOut:c,onFitView:d,onInteractiveChange:f,className:p,children:y,position:_="bottom-left"})=>{const b=ln(),[x,R]=q.useState(!1),{isInteractive:D,minZoomReached:k,maxZoomReached:U}=Tt(e3,Tn),{zoomIn:H,zoomOut:G,fitView:j}=Lu();if(q.useEffect(()=>{R(!0)},[]),!x)return null;const Q=()=>{H(),l?.()},Y=()=>{G(),c?.()},I=()=>{j(a),d?.()},T=()=>{b.setState({nodesDraggable:!D,nodesConnectable:!D,elementsSelectable:!D}),f?.(!D)};return fe.createElement(U1,{className:Pn(["react-flow__controls",p]),position:_,style:t,"data-testid":"rf__controls"},e&&fe.createElement(fe.Fragment,null,fe.createElement(Zc,{onClick:Q,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:U},fe.createElement(XD,null)),fe.createElement(Zc,{onClick:Y,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:k},fe.createElement(QD,null))),n&&fe.createElement(Zc,{className:"react-flow__controls-fitview",onClick:I,title:"fit view","aria-label":"fit view"},fe.createElement(WD,null)),i&&fe.createElement(Zc,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity"},D?fe.createElement(JD,null):fe.createElement(ZD,null)),y)};IT.displayName="Controls";var t3=q.memo(IT),Nr;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Nr||(Nr={}));function n3({color:t,dimensions:e,lineWidth:n}){return fe.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function r3({color:t,radius:e}){return fe.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const i3={[Nr.Dots]:"#91919a",[Nr.Lines]:"#eee",[Nr.Cross]:"#e2e2e2"},s3={[Nr.Dots]:1,[Nr.Lines]:1,[Nr.Cross]:6},a3=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function kT({id:t,variant:e=Nr.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=2,color:c,style:d,className:f}){const p=q.useRef(null),{transform:y,patternId:_}=Tt(a3,Tn),b=c||i3[e],x=i||s3[e],R=e===Nr.Dots,D=e===Nr.Cross,k=Array.isArray(n)?n:[n,n],U=[k[0]*y[2]||1,k[1]*y[2]||1],H=x*y[2],G=D?[H,H]:U,j=R?[H/l,H/l]:[G[0]/l,G[1]/l];return fe.createElement("svg",{className:Pn(["react-flow__background",f]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},fe.createElement("pattern",{id:_+t,x:y[0]%U[0],y:y[1]%U[1],width:U[0],height:U[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},R?fe.createElement(r3,{color:b,radius:H/l}):fe.createElement(n3,{dimensions:G,color:b,lineWidth:a})),fe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_+t})`}))}kT.displayName="Background";var o3=q.memo(kT),$t=function(){return $t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$t.apply(this,arguments)},hw={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},fw={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},bh={width:"20px",height:"20px",position:"absolute",zIndex:1},l3={top:$t($t({},hw),{top:"-5px"}),right:$t($t({},fw),{left:void 0,right:"-5px"}),bottom:$t($t({},hw),{top:void 0,bottom:"-5px"}),left:$t($t({},fw),{left:"-5px"}),topRight:$t($t({},bh),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:$t($t({},bh),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:$t($t({},bh),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:$t($t({},bh),{left:"-10px",top:"-10px",cursor:"nw-resize"})},c3=q.memo(function(t){var e=t.onResizeStart,n=t.direction,i=t.children,a=t.replaceStyles,l=t.className,c=q.useCallback(function(p){e(p,n)},[e,n]),d=q.useCallback(function(p){e(p,n)},[e,n]),f=q.useMemo(function(){return $t($t({position:"absolute",userSelect:"none"},l3[n]),a??{})},[a,n]);return S.jsx("div",{className:l||void 0,style:f,onMouseDown:c,onTouchStart:d,children:i})}),u3=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),di=function(){return di=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},di.apply(this,arguments)},d3={width:"auto",height:"auto"},Eh=function(t,e,n){return Math.max(Math.min(t,n),e)},gw=function(t,e,n){var i=Math.round(t/e);return i*e+n*(i-1)},tl=function(t,e){return new RegExp(t,"i").test(e)},wh=function(t){return!!(t.touches&&t.touches.length)},h3=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},pw=function(t,e,n){n===void 0&&(n=0);var i=e.reduce(function(l,c,d){return Math.abs(c-t)<Math.abs(e[l]-t)?d:l},0),a=Math.abs(e[i]-t);return n===0||a<n?e[i]:t},Em=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},xh=function(t,e,n,i){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var a=Number(t.replace("%",""))/100;return e*a}if(t.endsWith("vw")){var a=Number(t.replace("vw",""))/100;return n*a}if(t.endsWith("vh")){var a=Number(t.replace("vh",""))/100;return i*a}}return t},f3=function(t,e,n,i,a,l,c){return i=xh(i,t.width,e,n),a=xh(a,t.height,e,n),l=xh(l,t.width,e,n),c=xh(c,t.height,e,n),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof a>"u"?void 0:Number(a),minWidth:typeof l>"u"?void 0:Number(l),minHeight:typeof c>"u"?void 0:Number(c)}},g3=function(t){return Array.isArray(t)?t:[t,t]},p3=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],mw="__resizable_base__",m3=function(t){u3(e,t);function e(n){var i,a,l,c,d=t.call(this,n)||this;return d.ratio=1,d.resizable=null,d.parentLeft=0,d.parentTop=0,d.resizableLeft=0,d.resizableRight=0,d.resizableTop=0,d.resizableBottom=0,d.targetLeft=0,d.targetTop=0,d.delta={width:0,height:0},d.appendBase=function(){if(!d.resizable||!d.window)return null;var f=d.parentNode;if(!f)return null;var p=d.window.document.createElement("div");return p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.transform="scale(0, 0)",p.style.left="0",p.style.flex="0 0 100%",p.classList?p.classList.add(mw):p.className+=mw,f.appendChild(p),p},d.removeBase=function(f){var p=d.parentNode;p&&p.removeChild(f)},d.state={isResizing:!1,width:(a=(i=d.propsSize)===null||i===void 0?void 0:i.width)!==null&&a!==void 0?a:"auto",height:(c=(l=d.propsSize)===null||l===void 0?void 0:l.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},d.onResizeStart=d.onResizeStart.bind(d),d.onMouseMove=d.onMouseMove.bind(d),d.onMouseUp=d.onMouseUp.bind(d),d}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||d3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,i=0;if(this.resizable&&this.window){var a=this.resizable.offsetWidth,l=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:a,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:l,this.resizable.style.position=c}return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,i=this.props.size,a=function(d){var f;if(typeof n.state[d]>"u"||n.state[d]==="auto")return"auto";if(n.propsSize&&n.propsSize[d]&&(!((f=n.propsSize[d])===null||f===void 0)&&f.toString().endsWith("%"))){if(n.state[d].toString().endsWith("%"))return n.state[d].toString();var p=n.getParentSize(),y=Number(n.state[d].toString().replace("px","")),_=y/p[d]*100;return"".concat(_,"%")}return Em(n.state[d])},l=i&&typeof i.width<"u"&&!this.state.isResizing?Em(i.width):a("width"),c=i&&typeof i.height<"u"&&!this.state.isResizing?Em(i.height):a("height");return{width:l,height:c}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var i=!1,a=this.parentNode.style.flexWrap;a!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var l={width:n.offsetWidth,height:n.offsetHeight};return i&&(this.parentNode.style.flexWrap=a),this.removeBase(n),l},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,i){var a=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===n&&(typeof a>"u"||a==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,i){var a=this.props.boundsByDirection,l=this.state.direction,c=a&&tl("left",l),d=a&&tl("top",l),f,p;if(this.props.bounds==="parent"){var y=this.parentNode;y&&(f=c?this.resizableRight-this.parentLeft:y.offsetWidth+(this.parentLeft-this.resizableLeft),p=d?this.resizableBottom-this.parentTop:y.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=d?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=d?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(n=n&&n<f?n:f),p&&Number.isFinite(p)&&(i=i&&i<p?i:p),{maxWidth:n,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(n,i){var a=this.props.scale||1,l=g3(this.props.resizeRatio||1),c=l[0],d=l[1],f=this.state,p=f.direction,y=f.original,_=this.props,b=_.lockAspectRatio,x=_.lockAspectRatioExtraHeight,R=_.lockAspectRatioExtraWidth,D=y.width,k=y.height,U=x||0,H=R||0;return tl("right",p)&&(D=y.width+(n-y.x)*c/a,b&&(k=(D-H)/this.ratio+U)),tl("left",p)&&(D=y.width-(n-y.x)*c/a,b&&(k=(D-H)/this.ratio+U)),tl("bottom",p)&&(k=y.height+(i-y.y)*d/a,b&&(D=(k-U)*this.ratio+H)),tl("top",p)&&(k=y.height-(i-y.y)*d/a,b&&(D=(k-U)*this.ratio+H)),{newWidth:D,newHeight:k}},e.prototype.calculateNewSizeFromAspectRatio=function(n,i,a,l){var c=this.props,d=c.lockAspectRatio,f=c.lockAspectRatioExtraHeight,p=c.lockAspectRatioExtraWidth,y=typeof l.width>"u"?10:l.width,_=typeof a.width>"u"||a.width<0?n:a.width,b=typeof l.height>"u"?10:l.height,x=typeof a.height>"u"||a.height<0?i:a.height,R=f||0,D=p||0;if(d){var k=(b-R)*this.ratio+D,U=(x-R)*this.ratio+D,H=(y-D)/this.ratio+R,G=(_-D)/this.ratio+R,j=Math.max(y,k),Q=Math.min(_,U),Y=Math.max(b,H),I=Math.min(x,G);n=Eh(n,j,Q),i=Eh(i,Y,I)}else n=Eh(n,y,_),i=Eh(i,b,x);return{newWidth:n,newHeight:i}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var a=i.getBoundingClientRect();this.parentLeft=a.left*n,this.parentTop=a.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var l=this.props.bounds.getBoundingClientRect();this.targetLeft=l.left*n,this.targetTop=l.top*n}if(this.resizable){var c=this.resizable.getBoundingClientRect(),d=c.left,f=c.top,p=c.right,y=c.bottom;this.resizableLeft=d*n,this.resizableRight=p*n,this.resizableTop=f*n,this.resizableBottom=y*n}},e.prototype.onResizeStart=function(n,i){if(!(!this.resizable||!this.window)){var a=0,l=0;if(n.nativeEvent&&h3(n.nativeEvent)?(a=n.nativeEvent.clientX,l=n.nativeEvent.clientY):n.nativeEvent&&wh(n.nativeEvent)&&(a=n.nativeEvent.touches[0].clientX,l=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(n,i,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var d,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var p=this.parentNode;if(p){var y=this.window.getComputedStyle(p).flexDirection;this.flexDir=y.startsWith("row")?"row":"column",d=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var _={original:{x:a,y:l,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:di(di({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:i,flexBasis:d};this.setState(_)}},e.prototype.onMouseMove=function(n){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&wh(n))try{n.preventDefault(),n.stopPropagation()}catch{}var a=this.props,l=a.maxWidth,c=a.maxHeight,d=a.minWidth,f=a.minHeight,p=wh(n)?n.touches[0].clientX:n.clientX,y=wh(n)?n.touches[0].clientY:n.clientY,_=this.state,b=_.direction,x=_.original,R=_.width,D=_.height,k=this.getParentSize(),U=f3(k,this.window.innerWidth,this.window.innerHeight,l,c,d,f);l=U.maxWidth,c=U.maxHeight,d=U.minWidth,f=U.minHeight;var H=this.calculateNewSizeFromDirection(p,y),G=H.newHeight,j=H.newWidth,Q=this.calculateNewMaxFromBoundary(l,c);this.props.snap&&this.props.snap.x&&(j=pw(j,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(G=pw(G,this.props.snap.y,this.props.snapGap));var Y=this.calculateNewSizeFromAspectRatio(j,G,{width:Q.maxWidth,height:Q.maxHeight},{width:d,height:f});if(j=Y.newWidth,G=Y.newHeight,this.props.grid){var I=gw(j,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),T=gw(G,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),A=this.props.snapGap||0,L=A===0||Math.abs(I-j)<=A?I:j,z=A===0||Math.abs(T-G)<=A?T:G;j=L,G=z}var B={width:j-x.width,height:G-x.height};if(this.delta=B,R&&typeof R=="string"){if(R.endsWith("%")){var N=j/k.width*100;j="".concat(N,"%")}else if(R.endsWith("vw")){var O=j/this.window.innerWidth*100;j="".concat(O,"vw")}else if(R.endsWith("vh")){var $=j/this.window.innerHeight*100;j="".concat($,"vh")}}if(D&&typeof D=="string"){if(D.endsWith("%")){var N=G/k.height*100;G="".concat(N,"%")}else if(D.endsWith("vw")){var O=G/this.window.innerWidth*100;G="".concat(O,"vw")}else if(D.endsWith("vh")){var $=G/this.window.innerHeight*100;G="".concat($,"vh")}}var M={width:this.createSizeForCssProperty(j,"width"),height:this.createSizeForCssProperty(G,"height")};this.flexDir==="row"?M.flexBasis=M.width:this.flexDir==="column"&&(M.flexBasis=M.height);var K=this.state.width!==M.width,te=this.state.height!==M.height,J=this.state.flexBasis!==M.flexBasis,V=K||te||J;V&&i4.flushSync(function(){i.setState(M)}),this.props.onResize&&V&&this.props.onResize(n,b,this.resizable,B)}},e.prototype.onMouseUp=function(n){var i,a,l=this.state,c=l.isResizing,d=l.direction;l.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,d,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(a=this.props.size.height)!==null&&a!==void 0?a:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:di(di({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var i,a;this.setState({width:(i=n.width)!==null&&i!==void 0?i:"auto",height:(a=n.height)!==null&&a!==void 0?a:"auto"})},e.prototype.renderResizer=function(){var n=this,i=this.props,a=i.enable,l=i.handleStyles,c=i.handleClasses,d=i.handleWrapperStyle,f=i.handleWrapperClass,p=i.handleComponent;if(!a)return null;var y=Object.keys(a).map(function(_){return a[_]!==!1?S.jsx(c3,{direction:_,onResizeStart:n.onResizeStart,replaceStyles:l&&l[_],className:c&&c[_],children:p&&p[_]?p[_]:null},_):null});return S.jsx("div",{className:f,style:d,children:y})},e.prototype.render=function(){var n=this,i=Object.keys(this.props).reduce(function(c,d){return p3.indexOf(d)!==-1||(c[d]=n.props[d]),c},{}),a=di(di(di({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(a.flexBasis=this.state.flexBasis);var l=this.props.as||"div";return S.jsxs(l,di({style:a,className:this.props.className},i,{ref:function(c){c&&(n.resizable=c)},children:[this.state.isResizing&&S.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(q.PureComponent);const Mf=q.createContext(null);Mf.displayName="PanelGroupContext";const It={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},K0=10,Fa=q.useLayoutEffect,yw=oN.useId,y3=typeof yw=="function"?yw:()=>null;let v3=0;function X0(t=null){const e=y3(),n=q.useRef(t||e||null);return n.current===null&&(n.current=""+v3++),t??n.current}function DT({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:a,forwardedRef:l,id:c,maxSize:d,minSize:f,onCollapse:p,onExpand:y,onResize:_,order:b,style:x,tagName:R="div",...D}){const k=q.useContext(Mf);if(k===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:U,expandPanel:H,getPanelSize:G,getPanelStyle:j,groupId:Q,isPanelCollapsed:Y,reevaluatePanelConstraints:I,registerPanel:T,resizePanel:A,unregisterPanel:L}=k,z=X0(c),B=q.useRef({callbacks:{onCollapse:p,onExpand:y,onResize:_},constraints:{collapsedSize:n,collapsible:i,defaultSize:a,maxSize:d,minSize:f},id:z,idIsFromProps:c!==void 0,order:b});q.useRef({didLogMissingDefaultSizeWarning:!1}),Fa(()=>{const{callbacks:O,constraints:$}=B.current,M={...$};B.current.id=z,B.current.idIsFromProps=c!==void 0,B.current.order=b,O.onCollapse=p,O.onExpand=y,O.onResize=_,$.collapsedSize=n,$.collapsible=i,$.defaultSize=a,$.maxSize=d,$.minSize=f,(M.collapsedSize!==$.collapsedSize||M.collapsible!==$.collapsible||M.maxSize!==$.maxSize||M.minSize!==$.minSize)&&I(B.current,M)}),Fa(()=>{const O=B.current;return T(O),()=>{L(O)}},[b,z,T,L]),q.useImperativeHandle(l,()=>({collapse:()=>{U(B.current)},expand:O=>{H(B.current,O)},getId(){return z},getSize(){return G(B.current)},isCollapsed(){return Y(B.current)},isExpanded(){return!Y(B.current)},resize:O=>{A(B.current,O)}}),[U,H,G,Y,z,A]);const N=j(B.current,a);return q.createElement(R,{...D,children:t,className:e,id:z,style:{...N,...x},[It.groupId]:Q,[It.panel]:"",[It.panelCollapsible]:i||void 0,[It.panelId]:z,[It.panelSize]:parseFloat(""+N.flexGrow).toFixed(1)})}const t0=q.forwardRef((t,e)=>q.createElement(DT,{...t,forwardedRef:e}));DT.displayName="Panel";t0.displayName="forwardRef(Panel)";let n0=null,Vh=-1,Vs=null;function _3(t,e){if(e){const n=(e&LT)!==0,i=(e&zT)!==0,a=(e&UT)!==0,l=(e&BT)!==0;if(n)return a?"se-resize":l?"ne-resize":"e-resize";if(i)return a?"sw-resize":l?"nw-resize":"w-resize";if(a)return"s-resize";if(l)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function b3(){Vs!==null&&(document.head.removeChild(Vs),n0=null,Vs=null,Vh=-1)}function wm(t,e){var n,i;const a=_3(t,e);if(n0!==a){if(n0=a,Vs===null&&(Vs=document.createElement("style"),document.head.appendChild(Vs)),Vh>=0){var l;(l=Vs.sheet)===null||l===void 0||l.removeRule(Vh)}Vh=(n=(i=Vs.sheet)===null||i===void 0?void 0:i.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function MT(t){return t.type==="keydown"}function OT(t){return t.type.startsWith("pointer")}function PT(t){return t.type.startsWith("mouse")}function Of(t){if(OT(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(PT(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function E3(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function w3(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function x3(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:bw(t),b:bw(e)};let i;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),i=t;Be(i,"Stacking order can only be calculated for elements with a common ancestor");const a={a:_w(vw(n.a)),b:_w(vw(n.b))};if(a.a===a.b){const l=i.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let d=l.length;for(;d--;){const f=l[d];if(f===c.a)return 1;if(f===c.b)return-1}}return Math.sign(a.a-a.b)}const T3=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function S3(t){var e;const n=getComputedStyle((e=VT(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function A3(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||S3(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||T3.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function vw(t){let e=t.length;for(;e--;){const n=t[e];if(Be(n,"Missing node"),A3(n))return n}return null}function _w(t){return t&&Number(getComputedStyle(t).zIndex)||0}function bw(t){const e=[];for(;t;)e.push(t),t=VT(t);return e}function VT(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const LT=1,zT=2,UT=4,BT=8,R3=E3()==="coarse";let Br=[],ml=!1,Ls=new Map,Pf=new Map;const Eu=new Set;function N3(t,e,n,i,a){var l;const{ownerDocument:c}=e,d={direction:n,element:e,hitAreaMargins:i,setResizeHandlerState:a},f=(l=Ls.get(c))!==null&&l!==void 0?l:0;return Ls.set(c,f+1),Eu.add(d),nf(),function(){var y;Pf.delete(t),Eu.delete(d);const _=(y=Ls.get(c))!==null&&y!==void 0?y:1;if(Ls.set(c,_-1),nf(),_===1&&Ls.delete(c),Br.includes(d)){const b=Br.indexOf(d);b>=0&&Br.splice(b,1),W0(),a("up",!0,null)}}}function C3(t){const{target:e}=t,{x:n,y:i}=Of(t);ml=!0,Q0({target:e,x:n,y:i}),nf(),Br.length>0&&(rf("down",t),t.preventDefault(),jT(e)||t.stopImmediatePropagation())}function xm(t){const{x:e,y:n}=Of(t);if(ml&&t.buttons===0&&(ml=!1,rf("up",t)),!ml){const{target:i}=t;Q0({target:i,x:e,y:n})}rf("move",t),W0(),Br.length>0&&t.preventDefault()}function Tm(t){const{target:e}=t,{x:n,y:i}=Of(t);Pf.clear(),ml=!1,Br.length>0&&(t.preventDefault(),jT(e)||t.stopImmediatePropagation()),rf("up",t),Q0({target:e,x:n,y:i}),W0(),nf()}function jT(t){let e=t;for(;e;){if(e.hasAttribute(It.resizeHandle))return!0;e=e.parentElement}return!1}function Q0({target:t,x:e,y:n}){Br.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),Eu.forEach(a=>{const{element:l,hitAreaMargins:c}=a,d=l.getBoundingClientRect(),{bottom:f,left:p,right:y,top:_}=d,b=R3?c.coarse:c.fine;if(e>=p-b&&e<=y+b&&n>=_-b&&n<=f+b){if(i!==null&&document.contains(i)&&l!==i&&!l.contains(i)&&!i.contains(l)&&x3(i,l)>0){let R=i,D=!1;for(;R&&!R.contains(l);){if(w3(R.getBoundingClientRect(),d)){D=!0;break}R=R.parentElement}if(D)return}Br.push(a)}})}function Sm(t,e){Pf.set(t,e)}function W0(){let t=!1,e=!1;Br.forEach(i=>{const{direction:a}=i;a==="horizontal"?t=!0:e=!0});let n=0;Pf.forEach(i=>{n|=i}),t&&e?wm("intersection",n):t?wm("horizontal",n):e?wm("vertical",n):b3()}let Am;function nf(){var t;(t=Am)===null||t===void 0||t.abort(),Am=new AbortController;const e={capture:!0,signal:Am.signal};Eu.size&&(ml?(Br.length>0&&Ls.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("contextmenu",Tm,e),a.addEventListener("pointerleave",xm,e),a.addEventListener("pointermove",xm,e))}),Ls.forEach((n,i)=>{const{body:a}=i;a.addEventListener("pointerup",Tm,e),a.addEventListener("pointercancel",Tm,e)})):Ls.forEach((n,i)=>{const{body:a}=i;n>0&&(a.addEventListener("pointerdown",C3,e),a.addEventListener("pointermove",xm,e))}))}function rf(t,e){Eu.forEach(n=>{const{setResizeHandlerState:i}=n,a=Br.includes(n);i(t,a,e)})}function I3(){const[t,e]=q.useState(0);return q.useCallback(()=>e(n=>n+1),[])}function Be(t,e){if(!t)throw console.error(e),Error(e)}function Ya(t,e,n=K0){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Ki(t,e,n=K0){return Ya(t,e,n)===0}function rr(t,e,n){return Ya(t,e,n)===0}function k3(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){const a=t[i],l=e[i];if(!rr(a,l,n))return!1}return!0}function ul({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Be(i!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:l,maxSize:c=100,minSize:d=0}=i;if(Ya(n,d)<0)if(l){const f=(a+d)/2;Ya(n,f)<0?n=a:n=d}else n=d;return n=Math.min(c,n),n=parseFloat(n.toFixed(K0)),n}function Jc({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:a,trigger:l}){if(rr(t,0))return e;const c=[...e],[d,f]=i;Be(d!=null,"Invalid first pivot index"),Be(f!=null,"Invalid second pivot index");let p=0;if(l==="keyboard"){{const _=t<0?f:d,b=n[_];Be(b,`Panel constraints not found for index ${_}`);const{collapsedSize:x=0,collapsible:R,minSize:D=0}=b;if(R){const k=e[_];if(Be(k!=null,`Previous layout not found for panel index ${_}`),rr(k,x)){const U=D-k;Ya(U,Math.abs(t))>0&&(t=t<0?0-U:U)}}}{const _=t<0?d:f,b=n[_];Be(b,`No panel constraints found for index ${_}`);const{collapsedSize:x=0,collapsible:R,minSize:D=0}=b;if(R){const k=e[_];if(Be(k!=null,`Previous layout not found for panel index ${_}`),rr(k,D)){const U=k-x;Ya(U,Math.abs(t))>0&&(t=t<0?0-U:U)}}}}{const _=t<0?1:-1;let b=t<0?f:d,x=0;for(;;){const D=e[b];Be(D!=null,`Previous layout not found for panel index ${b}`);const U=ul({panelConstraints:n,panelIndex:b,size:100})-D;if(x+=U,b+=_,b<0||b>=n.length)break}const R=Math.min(Math.abs(t),Math.abs(x));t=t<0?0-R:R}{let b=t<0?d:f;for(;b>=0&&b<n.length;){const x=Math.abs(t)-Math.abs(p),R=e[b];Be(R!=null,`Previous layout not found for panel index ${b}`);const D=R-x,k=ul({panelConstraints:n,panelIndex:b,size:D});if(!rr(R,k)&&(p+=R-k,c[b]=k,p.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(k3(a,c))return a;{const _=t<0?f:d,b=e[_];Be(b!=null,`Previous layout not found for panel index ${_}`);const x=b+p,R=ul({panelConstraints:n,panelIndex:_,size:x});if(c[_]=R,!rr(R,x)){let D=x-R,U=t<0?f:d;for(;U>=0&&U<n.length;){const H=c[U];Be(H!=null,`Previous layout not found for panel index ${U}`);const G=H+D,j=ul({panelConstraints:n,panelIndex:U,size:G});if(rr(H,j)||(D-=j-H,c[U]=j),rr(D,0))break;t>0?U--:U++}}}const y=c.reduce((_,b)=>b+_,0);return rr(y,100)?c:a}function D3({layout:t,panelsArray:e,pivotIndices:n}){let i=0,a=100,l=0,c=0;const d=n[0];Be(d!=null,"No pivot index found"),e.forEach((_,b)=>{const{constraints:x}=_,{maxSize:R=100,minSize:D=0}=x;b===d?(i=D,a=R):(l+=D,c+=R)});const f=Math.min(a,100-l),p=Math.max(i,100-c),y=t[d];return{valueMax:f,valueMin:p,valueNow:y}}function wu(t,e=document){return Array.from(e.querySelectorAll(`[${It.resizeHandleId}][data-panel-group-id="${t}"]`))}function HT(t,e,n=document){const a=wu(t,n).findIndex(l=>l.getAttribute(It.resizeHandleId)===e);return a??null}function qT(t,e,n){const i=HT(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function M3(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function $T(t,e=document){if(M3(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Vf(t,e=document){const n=e.querySelector(`[${It.resizeHandleId}="${t}"]`);return n||null}function O3(t,e,n,i=document){var a,l,c,d;const f=Vf(e,i),p=wu(t,i),y=f?p.indexOf(f):-1,_=(a=(l=n[y])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null,b=(c=(d=n[y+1])===null||d===void 0?void 0:d.id)!==null&&c!==void 0?c:null;return[_,b]}function P3({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:a,panelGroupElement:l,setLayout:c}){q.useRef({didWarnAboutMissingResizeHandle:!1}),Fa(()=>{if(!l)return;const d=wu(n,l);for(let f=0;f<a.length-1;f++){const{valueMax:p,valueMin:y,valueNow:_}=D3({layout:i,panelsArray:a,pivotIndices:[f,f+1]}),b=d[f];if(b!=null){const x=a[f];Be(x,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",x.id),b.setAttribute("aria-valuemax",""+Math.round(p)),b.setAttribute("aria-valuemin",""+Math.round(y)),b.setAttribute("aria-valuenow",_!=null?""+Math.round(_):"")}}return()=>{d.forEach((f,p)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[n,i,a,l]),q.useEffect(()=>{if(!l)return;const d=e.current;Be(d,"Eager values not found");const{panelDataArray:f}=d,p=$T(n,l);Be(p!=null,`No group found for id "${n}"`);const y=wu(n,l);Be(y,`No resize handles found for group id "${n}"`);const _=y.map(b=>{const x=b.getAttribute(It.resizeHandleId);Be(x,"Resize handle element has no handle id attribute");const[R,D]=O3(n,x,f,l);if(R==null||D==null)return()=>{};const k=U=>{if(!U.defaultPrevented)switch(U.key){case"Enter":{U.preventDefault();const H=f.findIndex(G=>G.id===R);if(H>=0){const G=f[H];Be(G,`No panel data found for index ${H}`);const j=i[H],{collapsedSize:Q=0,collapsible:Y,minSize:I=0}=G.constraints;if(j!=null&&Y){const T=Jc({delta:rr(j,Q)?I-Q:Q-j,initialLayout:i,panelConstraints:f.map(A=>A.constraints),pivotIndices:qT(n,x,l),prevLayout:i,trigger:"keyboard"});i!==T&&c(T)}}break}}};return b.addEventListener("keydown",k),()=>{b.removeEventListener("keydown",k)}});return()=>{_.forEach(b=>b())}},[l,t,e,n,i,a,c])}function Ew(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function FT(t,e){const n=t==="horizontal",{x:i,y:a}=Of(e);return n?i:a}function V3(t,e,n,i,a){const l=n==="horizontal",c=Vf(e,a);Be(c,`No resize handle element found for id "${e}"`);const d=c.getAttribute(It.groupId);Be(d,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=i;const p=FT(n,t),y=$T(d,a);Be(y,`No group element found for id "${d}"`);const _=y.getBoundingClientRect(),b=l?_.width:_.height;return(p-f)/b*100}function L3(t,e,n,i,a,l){if(MT(t)){const c=n==="horizontal";let d=0;t.shiftKey?d=100:a!=null?d=a:d=10;let f=0;switch(t.key){case"ArrowDown":f=c?0:d;break;case"ArrowLeft":f=c?-d:0;break;case"ArrowRight":f=c?d:0;break;case"ArrowUp":f=c?0:-d;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return i==null?0:V3(t,e,n,i,l)}function z3({panelDataArray:t}){const e=Array(t.length),n=t.map(l=>l.constraints);let i=0,a=100;for(let l=0;l<t.length;l++){const c=n[l];Be(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;d!=null&&(i++,e[l]=d,a-=d)}for(let l=0;l<t.length;l++){const c=n[l];Be(c,`Panel constraints not found for index ${l}`);const{defaultSize:d}=c;if(d!=null)continue;const f=t.length-i,p=a/f;i++,e[l]=p,a-=p}return e}function nl(t,e,n){e.forEach((i,a)=>{const l=t[a];Be(l,`Panel data not found for index ${a}`);const{callbacks:c,constraints:d,id:f}=l,{collapsedSize:p=0,collapsible:y}=d,_=n[f];if(_==null||i!==_){n[f]=i;const{onCollapse:b,onExpand:x,onResize:R}=c;R&&R(i,_),y&&(b||x)&&(x&&(_==null||Ki(_,p))&&!Ki(i,p)&&x(),b&&(_==null||!Ki(_,p))&&Ki(i,p)&&b())}})}function Th(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function U3({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:a,precision:l=3}){const c=n[a];let d;return c==null?d=t!=null?t.toPrecision(l):"1":i.length===1?d="1":d=c.toPrecision(l),{flexBasis:0,flexGrow:d,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function B3(t,e=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...a)},e)}}function ww(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function GT(t){return`react-resizable-panels:${t}`}function YT(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:a,order:l}=e;return a?i:l?`${l}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function KT(t,e){try{const n=GT(t),i=e.getItem(n);if(i){const a=JSON.parse(i);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function j3(t,e,n){var i,a;const l=(i=KT(t,n))!==null&&i!==void 0?i:{},c=YT(e);return(a=l[c])!==null&&a!==void 0?a:null}function H3(t,e,n,i,a){var l;const c=GT(t),d=YT(e),f=(l=KT(t,a))!==null&&l!==void 0?l:{};f[d]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{a.setItem(c,JSON.stringify(f))}catch(p){console.error(p)}}function xw({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((l,c)=>l+c,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(l=>`${l}%`).join(", ")}`);if(!rr(i,100)&&n.length>0)for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=100/i*c;n[l]=d}let a=0;for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=ul({panelConstraints:e,panelIndex:l,size:c});c!=d&&(a+=c-d,n[l]=d)}if(!rr(a,0))for(let l=0;l<e.length;l++){const c=n[l];Be(c!=null,`No layout data found for index ${l}`);const d=c+a,f=ul({panelConstraints:e,panelIndex:l,size:d});if(c!==f&&(a-=f-c,n[l]=f,rr(a,0)))break}return n}const q3=100,eu={getItem:t=>(ww(eu),eu.getItem(t)),setItem:(t,e)=>{ww(eu),eu.setItem(t,e)}},Tw={};function XT({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:a,id:l=null,onLayout:c=null,keyboardResizeBy:d=null,storage:f=eu,style:p,tagName:y="div",..._}){const b=X0(l),x=q.useRef(null),[R,D]=q.useState(null),[k,U]=q.useState([]),H=I3(),G=q.useRef({}),j=q.useRef(new Map),Q=q.useRef(0),Y=q.useRef({autoSaveId:t,direction:i,dragState:R,id:b,keyboardResizeBy:d,onLayout:c,storage:f}),I=q.useRef({layout:k,panelDataArray:[],panelDataArrayChanged:!1});q.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),q.useImperativeHandle(a,()=>({getId:()=>Y.current.id,getLayout:()=>{const{layout:X}=I.current;return X},setLayout:X=>{const{onLayout:se}=Y.current,{layout:de,panelDataArray:ue}=I.current,ve=xw({layout:X,panelConstraints:ue.map(_e=>_e.constraints)});Ew(de,ve)||(U(ve),I.current.layout=ve,se&&se(ve),nl(ue,ve,G.current))}}),[]),Fa(()=>{Y.current.autoSaveId=t,Y.current.direction=i,Y.current.dragState=R,Y.current.id=b,Y.current.onLayout=c,Y.current.storage=f}),P3({committedValuesRef:Y,eagerValuesRef:I,groupId:b,layout:k,panelDataArray:I.current.panelDataArray,setLayout:U,panelGroupElement:x.current}),q.useEffect(()=>{const{panelDataArray:X}=I.current;if(t){if(k.length===0||k.length!==X.length)return;let se=Tw[t];se==null&&(se=B3(H3,q3),Tw[t]=se);const de=[...X],ue=new Map(j.current);se(t,de,ue,k,f)}},[t,k,f]),q.useEffect(()=>{});const T=q.useCallback(X=>{const{onLayout:se}=Y.current,{layout:de,panelDataArray:ue}=I.current;if(X.constraints.collapsible){const ve=ue.map(et=>et.constraints),{collapsedSize:_e=0,panelSize:Ae,pivotIndices:Ne}=za(ue,X,de);if(Be(Ae!=null,`Panel size not found for panel "${X.id}"`),!Ki(Ae,_e)){j.current.set(X.id,Ae);const rt=il(ue,X)===ue.length-1?Ae-_e:_e-Ae,Le=Jc({delta:rt,initialLayout:de,panelConstraints:ve,pivotIndices:Ne,prevLayout:de,trigger:"imperative-api"});Th(de,Le)||(U(Le),I.current.layout=Le,se&&se(Le),nl(ue,Le,G.current))}}},[]),A=q.useCallback((X,se)=>{const{onLayout:de}=Y.current,{layout:ue,panelDataArray:ve}=I.current;if(X.constraints.collapsible){const _e=ve.map(tt=>tt.constraints),{collapsedSize:Ae=0,panelSize:Ne=0,minSize:et=0,pivotIndices:rt}=za(ve,X,ue),Le=se??et;if(Ki(Ne,Ae)){const tt=j.current.get(X.id),it=tt!=null&&tt>=Le?tt:Le,ze=il(ve,X)===ve.length-1?Ne-it:it-Ne,Ee=Jc({delta:ze,initialLayout:ue,panelConstraints:_e,pivotIndices:rt,prevLayout:ue,trigger:"imperative-api"});Th(ue,Ee)||(U(Ee),I.current.layout=Ee,de&&de(Ee),nl(ve,Ee,G.current))}}},[]),L=q.useCallback(X=>{const{layout:se,panelDataArray:de}=I.current,{panelSize:ue}=za(de,X,se);return Be(ue!=null,`Panel size not found for panel "${X.id}"`),ue},[]),z=q.useCallback((X,se)=>{const{panelDataArray:de}=I.current,ue=il(de,X);return U3({defaultSize:se,dragState:R,layout:k,panelData:de,panelIndex:ue})},[R,k]),B=q.useCallback(X=>{const{layout:se,panelDataArray:de}=I.current,{collapsedSize:ue=0,collapsible:ve,panelSize:_e}=za(de,X,se);return Be(_e!=null,`Panel size not found for panel "${X.id}"`),ve===!0&&Ki(_e,ue)},[]),N=q.useCallback(X=>{const{layout:se,panelDataArray:de}=I.current,{collapsedSize:ue=0,collapsible:ve,panelSize:_e}=za(de,X,se);return Be(_e!=null,`Panel size not found for panel "${X.id}"`),!ve||Ya(_e,ue)>0},[]),O=q.useCallback(X=>{const{panelDataArray:se}=I.current;se.push(X),se.sort((de,ue)=>{const ve=de.order,_e=ue.order;return ve==null&&_e==null?0:ve==null?-1:_e==null?1:ve-_e}),I.current.panelDataArrayChanged=!0,H()},[H]);Fa(()=>{if(I.current.panelDataArrayChanged){I.current.panelDataArrayChanged=!1;const{autoSaveId:X,onLayout:se,storage:de}=Y.current,{layout:ue,panelDataArray:ve}=I.current;let _e=null;if(X){const Ne=j3(X,ve,de);Ne&&(j.current=new Map(Object.entries(Ne.expandToSizes)),_e=Ne.layout)}_e==null&&(_e=z3({panelDataArray:ve}));const Ae=xw({layout:_e,panelConstraints:ve.map(Ne=>Ne.constraints)});Ew(ue,Ae)||(U(Ae),I.current.layout=Ae,se&&se(Ae),nl(ve,Ae,G.current))}}),Fa(()=>{const X=I.current;return()=>{X.layout=[]}},[]);const $=q.useCallback(X=>{let se=!1;const de=x.current;return de&&window.getComputedStyle(de,null).getPropertyValue("direction")==="rtl"&&(se=!0),function(ve){ve.preventDefault();const _e=x.current;if(!_e)return()=>null;const{direction:Ae,dragState:Ne,id:et,keyboardResizeBy:rt,onLayout:Le}=Y.current,{layout:tt,panelDataArray:it}=I.current,{initialLayout:Lt}=Ne??{},ze=qT(et,X,_e);let Ee=L3(ve,X,Ae,Ne,rt,_e);const At=Ae==="horizontal";At&&se&&(Ee=-Ee);const vn=it.map(An=>An.constraints),Gt=Jc({delta:Ee,initialLayout:Lt??tt,panelConstraints:vn,pivotIndices:ze,prevLayout:tt,trigger:MT(ve)?"keyboard":"mouse-or-touch"}),Fn=!Th(tt,Gt);(OT(ve)||PT(ve))&&Q.current!=Ee&&(Q.current=Ee,!Fn&&Ee!==0?At?Sm(X,Ee<0?LT:zT):Sm(X,Ee<0?UT:BT):Sm(X,0)),Fn&&(U(Gt),I.current.layout=Gt,Le&&Le(Gt),nl(it,Gt,G.current))}},[]),M=q.useCallback((X,se)=>{const{onLayout:de}=Y.current,{layout:ue,panelDataArray:ve}=I.current,_e=ve.map(tt=>tt.constraints),{panelSize:Ae,pivotIndices:Ne}=za(ve,X,ue);Be(Ae!=null,`Panel size not found for panel "${X.id}"`);const rt=il(ve,X)===ve.length-1?Ae-se:se-Ae,Le=Jc({delta:rt,initialLayout:ue,panelConstraints:_e,pivotIndices:Ne,prevLayout:ue,trigger:"imperative-api"});Th(ue,Le)||(U(Le),I.current.layout=Le,de&&de(Le),nl(ve,Le,G.current))},[]),K=q.useCallback((X,se)=>{const{layout:de,panelDataArray:ue}=I.current,{collapsedSize:ve=0,collapsible:_e}=se,{collapsedSize:Ae=0,collapsible:Ne,maxSize:et=100,minSize:rt=0}=X.constraints,{panelSize:Le}=za(ue,X,de);Le!=null&&(_e&&Ne&&Ki(Le,ve)?Ki(ve,Ae)||M(X,Ae):Le<rt?M(X,rt):Le>et&&M(X,et))},[M]),te=q.useCallback((X,se)=>{const{direction:de}=Y.current,{layout:ue}=I.current;if(!x.current)return;const ve=Vf(X,x.current);Be(ve,`Drag handle element not found for id "${X}"`);const _e=FT(de,se);D({dragHandleId:X,dragHandleRect:ve.getBoundingClientRect(),initialCursorPosition:_e,initialLayout:ue})},[]),J=q.useCallback(()=>{D(null)},[]),V=q.useCallback(X=>{const{panelDataArray:se}=I.current,de=il(se,X);de>=0&&(se.splice(de,1),delete G.current[X.id],I.current.panelDataArrayChanged=!0,H())},[H]),W=q.useMemo(()=>({collapsePanel:T,direction:i,dragState:R,expandPanel:A,getPanelSize:L,getPanelStyle:z,groupId:b,isPanelCollapsed:B,isPanelExpanded:N,reevaluatePanelConstraints:K,registerPanel:O,registerResizeHandle:$,resizePanel:M,startDragging:te,stopDragging:J,unregisterPanel:V,panelGroupElement:x.current}),[T,R,i,A,L,z,b,B,N,K,O,$,M,te,J,V]),re={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return q.createElement(Mf.Provider,{value:W},q.createElement(y,{..._,children:e,className:n,id:l,ref:x,style:{...re,...p},[It.group]:"",[It.groupDirection]:i,[It.groupId]:b}))}const QT=q.forwardRef((t,e)=>q.createElement(XT,{...t,forwardedRef:e}));XT.displayName="PanelGroup";QT.displayName="forwardRef(PanelGroup)";function il(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function za(t,e,n){const i=il(t,e),l=i===t.length-1?[i-1,i]:[i,i+1],c=n[i];return{...e.constraints,panelSize:c,pivotIndices:l}}function $3({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){q.useEffect(()=>{if(t||n==null||i==null)return;const a=Vf(e,i);if(a==null)return;const l=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const d=a.getAttribute(It.groupId);Be(d,`No group element found for id "${d}"`);const f=wu(d,i),p=HT(d,e,i);Be(p!==null,`No resize element found for id "${e}"`);const y=c.shiftKey?p>0?p-1:f.length-1:p+1<f.length?p+1:0;f[y].focus();break}}};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}},[i,t,e,n])}function WT({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:i,id:a,onBlur:l,onClick:c,onDragging:d,onFocus:f,onPointerDown:p,onPointerUp:y,style:_={},tabIndex:b=0,tagName:x="div",...R}){var D,k;const U=q.useRef(null),H=q.useRef({onClick:c,onDragging:d,onPointerDown:p,onPointerUp:y});q.useEffect(()=>{H.current.onClick=c,H.current.onDragging=d,H.current.onPointerDown=p,H.current.onPointerUp=y});const G=q.useContext(Mf);if(G===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:Q,registerResizeHandle:Y,startDragging:I,stopDragging:T,panelGroupElement:A}=G,L=X0(a),[z,B]=q.useState("inactive"),[N,O]=q.useState(!1),[$,M]=q.useState(null),K=q.useRef({state:z});Fa(()=>{K.current.state=z}),q.useEffect(()=>{if(n)M(null);else{const W=Y(L);M(()=>W)}},[n,L,Y]);const te=(D=i?.coarse)!==null&&D!==void 0?D:15,J=(k=i?.fine)!==null&&k!==void 0?k:5;q.useEffect(()=>{if(n||$==null)return;const W=U.current;Be(W,"Element ref not attached");let re=!1;return N3(L,W,j,{coarse:te,fine:J},(se,de,ue)=>{if(!de){B("inactive");return}switch(se){case"down":{B("drag"),re=!1,Be(ue,'Expected event to be defined for "down" action'),I(L,ue);const{onDragging:ve,onPointerDown:_e}=H.current;ve?.(!0),_e?.();break}case"move":{const{state:ve}=K.current;re=!0,ve!=="drag"&&B("hover"),Be(ue,'Expected event to be defined for "move" action'),$(ue);break}case"up":{B("hover"),T();const{onClick:ve,onDragging:_e,onPointerUp:Ae}=H.current;_e?.(!1),Ae?.(),re||ve?.();break}}})},[te,j,n,J,Y,L,$,I,T]),$3({disabled:n,handleId:L,resizeHandler:$,panelGroupElement:A});const V={touchAction:"none",userSelect:"none"};return q.createElement(x,{...R,children:t,className:e,id:a,onBlur:()=>{O(!1),l?.()},onFocus:()=>{O(!0),f?.()},ref:U,role:"separator",style:{...V,..._},tabIndex:b,[It.groupDirection]:j,[It.groupId]:Q,[It.resizeHandle]:"",[It.resizeHandleActive]:z==="drag"?"pointer":N?"keyboard":void 0,[It.resizeHandleEnabled]:!n,[It.resizeHandleId]:L,[It.resizeHandleState]:z})}WT.displayName="PanelResizeHandle";const F3=()=>{};var Sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},G3=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],c=t[n++],d=t[n++],f=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=t[n++],c=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},JT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],c=a+1<t.length,d=c?t[a+1]:0,f=a+2<t.length,p=f?t[a+2]:0,y=l>>2,_=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,x=p&63;f||(x=64,c||(b=64)),i.push(n[y],n[_],n[b],n[x])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],d=a<t.length?n[t.charAt(a)]:0;++a;const p=a<t.length?n[t.charAt(a)]:64;++a;const _=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||d==null||p==null||_==null)throw new Y3;const b=l<<2|d>>4;if(i.push(b),p!==64){const x=d<<4&240|p>>2;if(i.push(x),_!==64){const R=p<<6&192|_;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K3=function(t){const e=ZT(t);return JT.encodeByteArray(e,!0)},sf=function(t){return K3(t).replace(/\./g,"")},eS=function(t){try{return JT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=()=>X3().__FIREBASE_DEFAULTS__,W3=()=>{if(typeof process>"u"||typeof Sw>"u")return;const t=Sw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Z3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eS(t[1]);return e&&JSON.parse(e)},Lf=()=>{try{return F3()||Q3()||W3()||Z3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tS=t=>{var e,n;return(n=(e=Lf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nS=t=>{const e=tS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},rS=()=>{var t;return(t=Lf())===null||t===void 0?void 0:t.config},iS=t=>{var e;return(e=Lf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){return t.endsWith(".cloudworkstations.dev")}async function Z0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sf(JSON.stringify(n)),sf(JSON.stringify(c)),""].join(".")}const au={};function tM(){const t={prod:[],emulator:[]};for(const e of Object.keys(au))au[e]?t.emulator.push(e):t.prod.push(e);return t}function nM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Aw=!1;function J0(t,e){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||au[t]===e||au[t]||Aw)return;au[t]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=tM().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Aw=!0,c()},b}function y(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=nM(i),x=n("text"),R=document.getElementById(x)||document.createElement("span"),D=n("learnmore"),k=document.getElementById(D)||document.createElement("a"),U=n("preprendIcon"),H=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const G=b.element;d(G),y(k,D);const j=p();f(H,U),G.append(H,R,k,j),document.body.appendChild(G)}l?(R.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function iM(){var t;const e=(t=Lf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lM(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cM(){return!iM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uM(){try{return typeof indexedDB=="object"}catch{return!1}}function dM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="FirebaseError";class wi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=hM,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zu.prototype.create)}}class zu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?fM(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new wi(a,d,i)}}function fM(t,e){return t.replace(gM,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const gM=/\{\$([^}]+)}/g;function pM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ka(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],c=e[a];if(Rw(l)&&Rw(c)){if(!Ka(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function Rw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function tu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function nu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mM(t,e){const n=new yM(t,e);return n.subscribe.bind(n)}class yM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vM(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=Rm),a.error===void 0&&(a.error=Rm),a.complete===void 0&&(a.complete=Rm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Ws{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new J3;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EM(e))try{this.getOrInitializeService({instanceIdentifier:Ba})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ba){return this.instances.has(e)}getOptions(e=Ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:bM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ba){return this.component?this.component.multipleInstances?e:Ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bM(t){return t===Ba?void 0:t}function EM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _M(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const xM={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},TM=Ke.INFO,SM={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},AM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=SM[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ey{constructor(e){this.name=e,this._logLevel=TM,this._logHandler=AM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const RM=(t,e)=>e.some(n=>t instanceof n);let Nw,Cw;function NM(){return Nw||(Nw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CM(){return Cw||(Cw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sS=new WeakMap,r0=new WeakMap,aS=new WeakMap,Nm=new WeakMap,ty=new WeakMap;function IM(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",c)},l=()=>{n(Fs(t.result)),a()},c=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&sS.set(n,t)}).catch(()=>{}),ty.set(e,t),e}function kM(t){if(r0.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",c),t.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",c),t.addEventListener("abort",c)});r0.set(t,e)}let i0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return r0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DM(t){i0=t(i0)}function MM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Cm(this),e,...n);return aS.set(i,e.sort?e.sort():[e]),Fs(i)}:CM().includes(t)?function(...e){return t.apply(Cm(this),e),Fs(sS.get(this))}:function(...e){return Fs(t.apply(Cm(this),e))}}function OM(t){return typeof t=="function"?MM(t):(t instanceof IDBTransaction&&kM(t),RM(t,NM())?new Proxy(t,i0):t)}function Fs(t){if(t instanceof IDBRequest)return IM(t);if(Nm.has(t))return Nm.get(t);const e=OM(t);return e!==t&&(Nm.set(t,e),ty.set(e,t)),e}const Cm=t=>ty.get(t);function PM(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(t,e),d=Fs(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Fs(c.result),f.oldVersion,f.newVersion,Fs(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),a&&f.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const VM=["get","getKey","getAll","getAllKeys","count"],LM=["put","add","delete","clear"],Im=new Map;function Iw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Im.get(e))return Im.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=LM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||VM.includes(n)))return;const l=async function(c,...d){const f=this.transaction(c,a?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),a&&f.done]))[0]};return Im.set(e,l),l}DM(t=>({...t,get:(e,n,i)=>Iw(e,n)||t.get(e,n,i),has:(e,n)=>!!Iw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function UM(t){const e=t.getComponent();return e?.type==="VERSION"}const s0="@firebase/app",kw="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=new ey("@firebase/app"),BM="@firebase/app-compat",jM="@firebase/analytics-compat",HM="@firebase/analytics",qM="@firebase/app-check-compat",$M="@firebase/app-check",FM="@firebase/auth",GM="@firebase/auth-compat",YM="@firebase/database",KM="@firebase/data-connect",XM="@firebase/database-compat",QM="@firebase/functions",WM="@firebase/functions-compat",ZM="@firebase/installations",JM="@firebase/installations-compat",eO="@firebase/messaging",tO="@firebase/messaging-compat",nO="@firebase/performance",rO="@firebase/performance-compat",iO="@firebase/remote-config",sO="@firebase/remote-config-compat",aO="@firebase/storage",oO="@firebase/storage-compat",lO="@firebase/firestore",cO="@firebase/ai",uO="@firebase/firestore-compat",dO="firebase",hO="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="[DEFAULT]",fO={[s0]:"fire-core",[BM]:"fire-core-compat",[HM]:"fire-analytics",[jM]:"fire-analytics-compat",[$M]:"fire-app-check",[qM]:"fire-app-check-compat",[FM]:"fire-auth",[GM]:"fire-auth-compat",[YM]:"fire-rtdb",[KM]:"fire-data-connect",[XM]:"fire-rtdb-compat",[QM]:"fire-fn",[WM]:"fire-fn-compat",[ZM]:"fire-iid",[JM]:"fire-iid-compat",[eO]:"fire-fcm",[tO]:"fire-fcm-compat",[nO]:"fire-perf",[rO]:"fire-perf-compat",[iO]:"fire-rc",[sO]:"fire-rc-compat",[aO]:"fire-gcs",[oO]:"fire-gcs-compat",[lO]:"fire-fst",[uO]:"fire-fst-compat",[cO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Map,gO=new Map,o0=new Map;function Dw(t,e){try{t.container.addComponent(e)}catch(n){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xa(t){const e=t.name;if(o0.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;o0.set(e,t);for(const n of af.values())Dw(n,t);for(const n of gO.values())Dw(n,t);return!0}function zf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new zu("app","Firebase",pO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=hO;function oS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:a0,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw Gs.create("bad-app-name",{appName:String(a)});if(n||(n=rS()),!n)throw Gs.create("no-options");const l=af.get(a);if(l){if(Ka(n,l.options)&&Ka(i,l.config))return l;throw Gs.create("duplicate-app",{appName:a})}const c=new wM(a);for(const f of o0.values())c.addComponent(f);const d=new mO(n,i,c);return af.set(a,d),d}function ny(t=a0){const e=af.get(t);if(!e&&t===a0&&rS())return oS();if(!e)throw Gs.create("no-app",{appName:t});return e}function pi(t,e,n){var i;let a=(i=fO[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(d.join(" "));return}Xa(new Ws(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="firebase-heartbeat-database",vO=1,xu="firebase-heartbeat-store";let km=null;function lS(){return km||(km=PM(yO,vO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gs.create("idb-open",{originalErrorMessage:t.message})})),km}async function _O(t){try{const n=(await lS()).transaction(xu),i=await n.objectStore(xu).get(cS(t));return await n.done,i}catch(e){if(e instanceof wi)ts.warn(e.message);else{const n=Gs.create("idb-get",{originalErrorMessage:e?.message});ts.warn(n.message)}}}async function Mw(t,e){try{const i=(await lS()).transaction(xu,"readwrite");await i.objectStore(xu).put(e,cS(t)),await i.done}catch(n){if(n instanceof wi)ts.warn(n.message);else{const i=Gs.create("idb-set",{originalErrorMessage:n?.message});ts.warn(i.message)}}}function cS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=1024,EO=30;class wO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ow();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>EO){const c=SO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ow(),{heartbeatsToSend:i,unsentEntries:a}=xO(this._heartbeatsCache.heartbeats),l=sf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ts.warn(n),""}}}function Ow(){return new Date().toISOString().substring(0,10)}function xO(t,e=bO){const n=[];let i=t.slice();for(const a of t){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Pw(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Pw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uM()?dM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _O(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Pw(t){return sf(JSON.stringify({version:2,heartbeats:t})).length}function SO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){Xa(new Ws("platform-logger",e=>new zM(e),"PRIVATE")),Xa(new Ws("heartbeat",e=>new wO(e),"PRIVATE")),pi(s0,kw,t),pi(s0,kw,"esm2017"),pi("fire-js","")}AO("");var RO="firebase",NO="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(RO,NO,"app");var Vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,uS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,T){function A(){}A.prototype=T.prototype,I.D=T.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(L,z,B){for(var N=Array(arguments.length-2),O=2;O<arguments.length;O++)N[O-2]=arguments[O];return T.prototype[z].apply(L,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,T,A){A||(A=0);var L=Array(16);if(typeof T=="string")for(var z=0;16>z;++z)L[z]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(z=0;16>z;++z)L[z]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=I.g[0],A=I.g[1],z=I.g[2];var B=I.g[3],N=T+(B^A&(z^B))+L[0]+3614090360&4294967295;T=A+(N<<7&4294967295|N>>>25),N=B+(z^T&(A^z))+L[1]+3905402710&4294967295,B=T+(N<<12&4294967295|N>>>20),N=z+(A^B&(T^A))+L[2]+606105819&4294967295,z=B+(N<<17&4294967295|N>>>15),N=A+(T^z&(B^T))+L[3]+3250441966&4294967295,A=z+(N<<22&4294967295|N>>>10),N=T+(B^A&(z^B))+L[4]+4118548399&4294967295,T=A+(N<<7&4294967295|N>>>25),N=B+(z^T&(A^z))+L[5]+1200080426&4294967295,B=T+(N<<12&4294967295|N>>>20),N=z+(A^B&(T^A))+L[6]+2821735955&4294967295,z=B+(N<<17&4294967295|N>>>15),N=A+(T^z&(B^T))+L[7]+4249261313&4294967295,A=z+(N<<22&4294967295|N>>>10),N=T+(B^A&(z^B))+L[8]+1770035416&4294967295,T=A+(N<<7&4294967295|N>>>25),N=B+(z^T&(A^z))+L[9]+2336552879&4294967295,B=T+(N<<12&4294967295|N>>>20),N=z+(A^B&(T^A))+L[10]+4294925233&4294967295,z=B+(N<<17&4294967295|N>>>15),N=A+(T^z&(B^T))+L[11]+2304563134&4294967295,A=z+(N<<22&4294967295|N>>>10),N=T+(B^A&(z^B))+L[12]+1804603682&4294967295,T=A+(N<<7&4294967295|N>>>25),N=B+(z^T&(A^z))+L[13]+4254626195&4294967295,B=T+(N<<12&4294967295|N>>>20),N=z+(A^B&(T^A))+L[14]+2792965006&4294967295,z=B+(N<<17&4294967295|N>>>15),N=A+(T^z&(B^T))+L[15]+1236535329&4294967295,A=z+(N<<22&4294967295|N>>>10),N=T+(z^B&(A^z))+L[1]+4129170786&4294967295,T=A+(N<<5&4294967295|N>>>27),N=B+(A^z&(T^A))+L[6]+3225465664&4294967295,B=T+(N<<9&4294967295|N>>>23),N=z+(T^A&(B^T))+L[11]+643717713&4294967295,z=B+(N<<14&4294967295|N>>>18),N=A+(B^T&(z^B))+L[0]+3921069994&4294967295,A=z+(N<<20&4294967295|N>>>12),N=T+(z^B&(A^z))+L[5]+3593408605&4294967295,T=A+(N<<5&4294967295|N>>>27),N=B+(A^z&(T^A))+L[10]+38016083&4294967295,B=T+(N<<9&4294967295|N>>>23),N=z+(T^A&(B^T))+L[15]+3634488961&4294967295,z=B+(N<<14&4294967295|N>>>18),N=A+(B^T&(z^B))+L[4]+3889429448&4294967295,A=z+(N<<20&4294967295|N>>>12),N=T+(z^B&(A^z))+L[9]+568446438&4294967295,T=A+(N<<5&4294967295|N>>>27),N=B+(A^z&(T^A))+L[14]+3275163606&4294967295,B=T+(N<<9&4294967295|N>>>23),N=z+(T^A&(B^T))+L[3]+4107603335&4294967295,z=B+(N<<14&4294967295|N>>>18),N=A+(B^T&(z^B))+L[8]+1163531501&4294967295,A=z+(N<<20&4294967295|N>>>12),N=T+(z^B&(A^z))+L[13]+2850285829&4294967295,T=A+(N<<5&4294967295|N>>>27),N=B+(A^z&(T^A))+L[2]+4243563512&4294967295,B=T+(N<<9&4294967295|N>>>23),N=z+(T^A&(B^T))+L[7]+1735328473&4294967295,z=B+(N<<14&4294967295|N>>>18),N=A+(B^T&(z^B))+L[12]+2368359562&4294967295,A=z+(N<<20&4294967295|N>>>12),N=T+(A^z^B)+L[5]+4294588738&4294967295,T=A+(N<<4&4294967295|N>>>28),N=B+(T^A^z)+L[8]+2272392833&4294967295,B=T+(N<<11&4294967295|N>>>21),N=z+(B^T^A)+L[11]+1839030562&4294967295,z=B+(N<<16&4294967295|N>>>16),N=A+(z^B^T)+L[14]+4259657740&4294967295,A=z+(N<<23&4294967295|N>>>9),N=T+(A^z^B)+L[1]+2763975236&4294967295,T=A+(N<<4&4294967295|N>>>28),N=B+(T^A^z)+L[4]+1272893353&4294967295,B=T+(N<<11&4294967295|N>>>21),N=z+(B^T^A)+L[7]+4139469664&4294967295,z=B+(N<<16&4294967295|N>>>16),N=A+(z^B^T)+L[10]+3200236656&4294967295,A=z+(N<<23&4294967295|N>>>9),N=T+(A^z^B)+L[13]+681279174&4294967295,T=A+(N<<4&4294967295|N>>>28),N=B+(T^A^z)+L[0]+3936430074&4294967295,B=T+(N<<11&4294967295|N>>>21),N=z+(B^T^A)+L[3]+3572445317&4294967295,z=B+(N<<16&4294967295|N>>>16),N=A+(z^B^T)+L[6]+76029189&4294967295,A=z+(N<<23&4294967295|N>>>9),N=T+(A^z^B)+L[9]+3654602809&4294967295,T=A+(N<<4&4294967295|N>>>28),N=B+(T^A^z)+L[12]+3873151461&4294967295,B=T+(N<<11&4294967295|N>>>21),N=z+(B^T^A)+L[15]+530742520&4294967295,z=B+(N<<16&4294967295|N>>>16),N=A+(z^B^T)+L[2]+3299628645&4294967295,A=z+(N<<23&4294967295|N>>>9),N=T+(z^(A|~B))+L[0]+4096336452&4294967295,T=A+(N<<6&4294967295|N>>>26),N=B+(A^(T|~z))+L[7]+1126891415&4294967295,B=T+(N<<10&4294967295|N>>>22),N=z+(T^(B|~A))+L[14]+2878612391&4294967295,z=B+(N<<15&4294967295|N>>>17),N=A+(B^(z|~T))+L[5]+4237533241&4294967295,A=z+(N<<21&4294967295|N>>>11),N=T+(z^(A|~B))+L[12]+1700485571&4294967295,T=A+(N<<6&4294967295|N>>>26),N=B+(A^(T|~z))+L[3]+2399980690&4294967295,B=T+(N<<10&4294967295|N>>>22),N=z+(T^(B|~A))+L[10]+4293915773&4294967295,z=B+(N<<15&4294967295|N>>>17),N=A+(B^(z|~T))+L[1]+2240044497&4294967295,A=z+(N<<21&4294967295|N>>>11),N=T+(z^(A|~B))+L[8]+1873313359&4294967295,T=A+(N<<6&4294967295|N>>>26),N=B+(A^(T|~z))+L[15]+4264355552&4294967295,B=T+(N<<10&4294967295|N>>>22),N=z+(T^(B|~A))+L[6]+2734768916&4294967295,z=B+(N<<15&4294967295|N>>>17),N=A+(B^(z|~T))+L[13]+1309151649&4294967295,A=z+(N<<21&4294967295|N>>>11),N=T+(z^(A|~B))+L[4]+4149444226&4294967295,T=A+(N<<6&4294967295|N>>>26),N=B+(A^(T|~z))+L[11]+3174756917&4294967295,B=T+(N<<10&4294967295|N>>>22),N=z+(T^(B|~A))+L[2]+718787259&4294967295,z=B+(N<<15&4294967295|N>>>17),N=A+(B^(z|~T))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(z+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+z&4294967295,I.g[3]=I.g[3]+B&4294967295}i.prototype.u=function(I,T){T===void 0&&(T=I.length);for(var A=T-this.blockSize,L=this.B,z=this.h,B=0;B<T;){if(z==0)for(;B<=A;)a(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<T;)if(L[z++]=I.charCodeAt(B++),z==this.blockSize){a(this,L),z=0;break}}else for(;B<T;)if(L[z++]=I[B++],z==this.blockSize){a(this,L),z=0;break}}this.h=z,this.o+=T},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;var A=8*this.o;for(T=I.length-8;T<I.length;++T)I[T]=A&255,A/=256;for(this.u(I),I=Array(16),T=A=0;4>T;++T)for(var L=0;32>L;L+=8)I[A++]=this.g[T]>>>L&255;return I};function l(I,T){var A=d;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=T(I)}function c(I,T){this.h=T;for(var A=[],L=!0,z=I.length-1;0<=z;z--){var B=I[z]|0;L&&B==T||(A[z]=B,L=!1)}this.g=A}var d={};function f(I){return-128<=I&&128>I?l(I,function(T){return new c([T|0],0>T?-1:0)}):new c([I|0],0>I?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return _;if(0>I)return k(p(-I));for(var T=[],A=1,L=0;I>=A;L++)T[L]=I/A|0,A*=4294967296;return new c(T,0)}function y(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return k(y(I.substring(1),T));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(T,8)),L=_,z=0;z<I.length;z+=8){var B=Math.min(8,I.length-z),N=parseInt(I.substring(z,z+B),T);8>B?(B=p(Math.pow(T,B)),L=L.j(B).add(p(N))):(L=L.j(A),L=L.add(p(N)))}return L}var _=f(0),b=f(1),x=f(16777216);t=c.prototype,t.m=function(){if(D(this))return-k(this).m();for(var I=0,T=1,A=0;A<this.g.length;A++){var L=this.i(A);I+=(0<=L?L:4294967296+L)*T,T*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(D(this))return"-"+k(this).toString(I);for(var T=p(Math.pow(I,6)),A=this,L="";;){var z=j(A,T).g;A=U(A,z.j(T));var B=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=z,R(A))return B+L;for(;6>B.length;)B="0"+B;L=B+L}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(var T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function D(I){return I.h==-1}t.l=function(I){return I=U(this,I),D(I)?-1:R(I)?0:1};function k(I){for(var T=I.g.length,A=[],L=0;L<T;L++)A[L]=~I.g[L];return new c(A,~I.h).add(b)}t.abs=function(){return D(this)?k(this):this},t.add=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],L=0,z=0;z<=T;z++){var B=L+(this.i(z)&65535)+(I.i(z)&65535),N=(B>>>16)+(this.i(z)>>>16)+(I.i(z)>>>16);L=N>>>16,B&=65535,N&=65535,A[z]=N<<16|B}return new c(A,A[A.length-1]&-2147483648?-1:0)};function U(I,T){return I.add(k(T))}t.j=function(I){if(R(this)||R(I))return _;if(D(this))return D(I)?k(this).j(k(I)):k(k(this).j(I));if(D(I))return k(this.j(k(I)));if(0>this.l(x)&&0>I.l(x))return p(this.m()*I.m());for(var T=this.g.length+I.g.length,A=[],L=0;L<2*T;L++)A[L]=0;for(L=0;L<this.g.length;L++)for(var z=0;z<I.g.length;z++){var B=this.i(L)>>>16,N=this.i(L)&65535,O=I.i(z)>>>16,$=I.i(z)&65535;A[2*L+2*z]+=N*$,H(A,2*L+2*z),A[2*L+2*z+1]+=B*$,H(A,2*L+2*z+1),A[2*L+2*z+1]+=N*O,H(A,2*L+2*z+1),A[2*L+2*z+2]+=B*O,H(A,2*L+2*z+2)}for(L=0;L<T;L++)A[L]=A[2*L+1]<<16|A[2*L];for(L=T;L<2*T;L++)A[L]=0;return new c(A,0)};function H(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function G(I,T){this.g=I,this.h=T}function j(I,T){if(R(T))throw Error("division by zero");if(R(I))return new G(_,_);if(D(I))return T=j(k(I),T),new G(k(T.g),k(T.h));if(D(T))return T=j(I,k(T)),new G(k(T.g),T.h);if(30<I.g.length){if(D(I)||D(T))throw Error("slowDivide_ only works with positive integers.");for(var A=b,L=T;0>=L.l(I);)A=Q(A),L=Q(L);var z=Y(A,1),B=Y(L,1);for(L=Y(L,2),A=Y(A,2);!R(L);){var N=B.add(L);0>=N.l(I)&&(z=z.add(A),B=N),L=Y(L,1),A=Y(A,1)}return T=U(I,z.j(T)),new G(z,T)}for(z=_;0<=I.l(T);){for(A=Math.max(1,Math.floor(I.m()/T.m())),L=Math.ceil(Math.log(A)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),B=p(A),N=B.j(T);D(N)||0<N.l(I);)A-=L,B=p(A),N=B.j(T);R(B)&&(B=b),z=z.add(B),I=U(I,N)}return new G(z,I)}t.A=function(I){return j(this,I).h},t.and=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],L=0;L<T;L++)A[L]=this.i(L)&I.i(L);return new c(A,this.h&I.h)},t.or=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],L=0;L<T;L++)A[L]=this.i(L)|I.i(L);return new c(A,this.h|I.h)},t.xor=function(I){for(var T=Math.max(this.g.length,I.g.length),A=[],L=0;L<T;L++)A[L]=this.i(L)^I.i(L);return new c(A,this.h^I.h)};function Q(I){for(var T=I.g.length+1,A=[],L=0;L<T;L++)A[L]=I.i(L)<<1|I.i(L-1)>>>31;return new c(A,I.h)}function Y(I,T){var A=T>>5;T%=32;for(var L=I.g.length-A,z=[],B=0;B<L;B++)z[B]=0<T?I.i(B+A)>>>T|I.i(B+A+1)<<32-T:I.i(B+A);return new c(z,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,uS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Ys=c}).apply(typeof Vw<"u"?Vw:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dS,ru,hS,Lh,l0,fS,gS,pS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=n(this);function a(h,v){if(v)e:{var E=i;h=h.split(".");for(var P=0;P<h.length-1;P++){var ne=h[P];if(!(ne in E))break e;E=E[ne]}h=h[h.length-1],P=E[h],v=v(P),v!=P&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var E=0,P=!1,ne={next:function(){if(!P&&E<h.length){var ce=E++;return{value:v(ce,h[ce]),done:!1}}return P=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}a("Array.prototype.values",function(h){return h||function(){return l(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,E){return h.call.apply(h.bind,arguments)}function _(h,v,E){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,P),h.apply(v,ne)}}return function(){return h.apply(v,arguments)}}function b(h,v,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,b.apply(null,arguments)}function x(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function R(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(P,ne,ce){for(var be=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)be[Qe-2]=arguments[Qe];return v.prototype[ne].apply(P,be)}}function D(h){const v=h.length;if(0<v){const E=Array(v);for(let P=0;P<v;P++)E[P]=h[P];return E}return[]}function k(h,v){for(let E=1;E<arguments.length;E++){const P=arguments[E];if(f(P)){const ne=h.length||0,ce=P.length||0;h.length=ne+ce;for(let be=0;be<ce;be++)h[ne+be]=P[be]}else h.push(P)}}class U{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function H(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function j(h){return j[" "](h),h}j[" "]=function(){};var Q=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function Y(h,v,E){for(const P in h)v.call(E,h[P],P,h)}function I(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function T(h){const v={};for(const E in h)v[E]=h[E];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,v){let E,P;for(let ne=1;ne<arguments.length;ne++){P=arguments[ne];for(E in P)h[E]=P[E];for(let ce=0;ce<A.length;ce++)E=A[ce],Object.prototype.hasOwnProperty.call(P,E)&&(h[E]=P[E])}}function z(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function B(h){d.setTimeout(()=>{throw h},0)}function N(){var h=J;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class O{constructor(){this.h=this.g=null}add(v,E){const P=$.get();P.set(v,E),this.h?this.h.next=P:this.g=P,this.h=P}}var $=new U(()=>new M,h=>h.reset());class M{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let K,te=!1,J=new O,V=()=>{const h=d.Promise.resolve(void 0);K=()=>{h.then(W)}};var W=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){B(E)}var v=$;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}te=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h}();function de(h,v){if(X.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(Q){e:{try{j(v.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ue[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&de.aa.h.call(this)}}R(de,X);var ue={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Ae(h,v,E,P,ne){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!P,this.ha=ne,this.key=++_e,this.da=this.fa=!1}function Ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function et(h){this.src=h,this.g={},this.h=0}et.prototype.add=function(h,v,E,P,ne){var ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);var be=Le(h,v,P,ne);return-1<be?(v=h[be],E||(v.fa=!1)):(v=new Ae(v,this.src,ce,!!P,ne),v.fa=E,h.push(v)),v};function rt(h,v){var E=v.type;if(E in h.g){var P=h.g[E],ne=Array.prototype.indexOf.call(P,v,void 0),ce;(ce=0<=ne)&&Array.prototype.splice.call(P,ne,1),ce&&(Ne(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Le(h,v,E,P){for(var ne=0;ne<h.length;++ne){var ce=h[ne];if(!ce.da&&ce.listener==v&&ce.capture==!!E&&ce.ha==P)return ne}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),it={};function Lt(h,v,E,P,ne){if(Array.isArray(v)){for(var ce=0;ce<v.length;ce++)Lt(h,v[ce],E,P,ne);return null}return E=Cr(E),h&&h[ve]?h.K(v,E,p(P)?!!P.capture:!1,ne):ze(h,v,E,!1,P,ne)}function ze(h,v,E,P,ne,ce){if(!v)throw Error("Invalid event type");var be=p(ne)?!!ne.capture:!!ne,Qe=An(h);if(Qe||(h[tt]=Qe=new et(h)),E=Qe.add(v,E,P,be,ce),E.proxy)return E;if(P=Ee(),E.proxy=P,P.src=h,P.listener=E,h.addEventListener)se||(ne=be),ne===void 0&&(ne=!1),h.addEventListener(v.toString(),P,ne);else if(h.attachEvent)h.attachEvent(Gt(v.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ee(){function h(E){return v.call(h.src,h.listener,E)}const v=Fn;return h}function At(h,v,E,P,ne){if(Array.isArray(v))for(var ce=0;ce<v.length;ce++)At(h,v[ce],E,P,ne);else P=p(P)?!!P.capture:!!P,E=Cr(E),h&&h[ve]?(h=h.i,v=String(v).toString(),v in h.g&&(ce=h.g[v],E=Le(ce,E,P,ne),-1<E&&(Ne(ce[E]),Array.prototype.splice.call(ce,E,1),ce.length==0&&(delete h.g[v],h.h--)))):h&&(h=An(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Le(v,E,P,ne)),(E=-1<h?v[h]:null)&&vn(E))}function vn(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[ve])rt(v.i,h);else{var E=h.type,P=h.proxy;v.removeEventListener?v.removeEventListener(E,P,h.capture):v.detachEvent?v.detachEvent(Gt(E),P):v.addListener&&v.removeListener&&v.removeListener(P),(E=An(v))?(rt(E,h),E.h==0&&(E.src=null,v[tt]=null)):Ne(h)}}}function Gt(h){return h in it?it[h]:it[h]="on"+h}function Fn(h,v){if(h.da)h=!0;else{v=new de(v,this);var E=h.listener,P=h.ha||h.src;h.fa&&vn(h),h=E.call(P,v)}return h}function An(h){return h=h[tt],h instanceof et?h:null}var Rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cr(h){return typeof h=="function"?h:(h[Rn]||(h[Rn]=function(v){return h.handleEvent(v)}),h[Rn])}function at(){re.call(this),this.i=new et(this),this.M=this,this.F=null}R(at,re),at.prototype[ve]=!0,at.prototype.removeEventListener=function(h,v,E,P){At(this,h,v,E,P)};function Fe(h,v){var E,P=h.F;if(P)for(E=[];P;P=P.F)E.push(P);if(h=h.M,P=v.type||v,typeof v=="string")v=new X(v,h);else if(v instanceof X)v.target=v.target||h;else{var ne=v;v=new X(P,h),L(v,ne)}if(ne=!0,E)for(var ce=E.length-1;0<=ce;ce--){var be=v.g=E[ce];ne=zt(be,P,!0,v)&&ne}if(be=v.g=h,ne=zt(be,P,!0,v)&&ne,ne=zt(be,P,!1,v)&&ne,E)for(ce=0;ce<E.length;ce++)be=v.g=E[ce],ne=zt(be,P,!1,v)&&ne}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],P=0;P<E.length;P++)Ne(E[P]);delete h.g[v],h.h--}}this.F=null},at.prototype.K=function(h,v,E,P){return this.i.add(String(h),v,!1,E,P)},at.prototype.L=function(h,v,E,P){return this.i.add(String(h),v,!0,E,P)};function zt(h,v,E,P){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var ne=!0,ce=0;ce<v.length;++ce){var be=v[ce];if(be&&!be.da&&be.capture==E){var Qe=be.listener,Kt=be.ha||be.src;be.fa&&rt(h.i,be),ne=Qe.call(Kt,P)!==!1&&ne}}return ne&&!P.defaultPrevented}function Et(h,v,E){if(typeof h=="function")E&&(h=b(h,E));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:d.setTimeout(h,v||0)}function Fr(h){h.g=Et(()=>{h.g=null,h.i&&(h.i=!1,Fr(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ut extends re{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(h){re.call(this),this.h=h,this.g={}}R(Jt,re);var Nn=[];function Cn(h){Y(h.g,function(v,E){this.g.hasOwnProperty(E)&&vn(v)},h),h.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Cn(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=d.JSON.stringify,cn=d.JSON.parse,In=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function xi(){}xi.prototype.h=null;function Ti(h){return h.h||(h.h=h.i())}function Ir(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){X.call(this,"d")}R(ur,X);function Yn(){X.call(this,"c")}R(Yn,X);var dr={},la=null;function Gr(){return la=la||new at}dr.La="serverreachability";function ss(h){X.call(this,dr.La,h)}R(ss,X);function Yr(h){const v=Gr();Fe(v,new ss(v))}dr.STAT_EVENT="statevent";function ao(h,v){X.call(this,dr.STAT_EVENT,h),this.stat=v}R(ao,X);function mt(h){const v=Gr();Fe(v,new ao(v,h))}dr.Ma="timingevent";function Mt(h,v){X.call(this,dr.Ma,h),this.size=v}R(Mt,X);function Rt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Vn(){this.g=!0}Vn.prototype.xa=function(){this.g=!1};function ca(h,v,E,P,ne,ce){h.info(function(){if(h.g)if(ce)for(var be="",Qe=ce.split("&"),Kt=0;Kt<Qe.length;Kt++){var We=Qe[Kt].split("=");if(1<We.length){var nn=We[0];We=We[1];var Xt=nn.split("_");be=2<=Xt.length&&Xt[1]=="type"?be+(nn+"="+We+"&"):be+(nn+"=redacted&")}}else be=null;else be=ce;return"XMLHTTP REQ ("+P+") [attempt "+ne+"]: "+v+`
`+E+`
`+be})}function jl(h,v,E,P,ne,ce,be){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+ne+"]: "+v+`
`+E+`
`+ce+" "+be})}function Kr(h,v,E,P){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Si(h,E)+(P?" "+P:"")})}function oo(h,v){h.info(function(){return"TIMEOUT: "+v})}Vn.prototype.info=function(){};function Si(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var P=E[h];if(!(2>P.length)){var ne=P[1];if(Array.isArray(ne)&&!(1>ne.length)){var ce=ne[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(var be=1;be<ne.length;be++)ne[be]=""}}}}return en(E)}catch{return v}}var Xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function gr(){}R(gr,xi),gr.prototype.g=function(){return new XMLHttpRequest},gr.prototype.i=function(){return{}},fr=new gr;function un(h,v,E,P){this.j=h,this.i=v,this.l=E,this.R=P||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}var ua={},as={};function Kn(h,v,E){h.L=1,h.v=ga(Xn(v)),h.m=E,h.P=!0,kr(h,null)}function kr(h,v){h.F=Date.now(),Ai(h),h.A=Xn(h.v);var E=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),Yl(E.i,"t",P),h.C=0,E=h.j.J,h.h=new wt,h.g=od(h.j,E?v:null,!h.m),0<h.O&&(h.M=new Ut(b(h.Y,h,h.g),h.O)),v=h.U,E=h.g,P=h.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(Nn[0]=ne.toString()),ne=Nn);for(var ce=0;ce<ne.length;ce++){var be=Lt(E,ne[ce],P||v.handleEvent,!1,v.h||v);if(!be)break;v.g[be.key]=be}v=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Yr(),ca(h.i,h.u,h.A,h.l,h.R,h.m)}un.prototype.ca=function(h){h=h.target;const v=this.M;v&&_r(h)==3?v.j():this.Y(h)},un.prototype.Y=function(h){try{if(h==this.g)e:{const Xt=_r(this.g);var v=this.g.Ba();const Mi=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Ju(this.g)))){this.J||Xt!=4||v==7||(v==8||0>=Mi?Yr(3):Yr(2)),Qr(this);var E=this.g.Z();this.X=E;t:if(da(this)){var P=Ju(this.g);h="";var ne=P.length,ce=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),pr(this);var be="";break t}this.h.i=new d.TextDecoder}for(v=0;v<ne;v++)this.h.h=!0,h+=this.h.i.decode(P[v],{stream:!(ce&&v==ne-1)});P.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=E==200,jl(this.i,this.u,this.A,this.l,this.R,Xt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Kt=this.g;if((Qe=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Qe)){var We=Qe;break t}}We=null}if(E=We)Kr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wr(this,E);else{this.o=!1,this.s=3,mt(12),Yt(this),pr(this);break e}}if(this.P){E=!0;let dn;for(;!this.J&&this.C<be.length;)if(dn=lo(this,be),dn==as){Xt==4&&(this.s=4,mt(14),E=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==ua){this.s=4,mt(15),Kr(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}else Kr(this.i,this.l,dn,null),Wr(this,dn);if(da(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||be.length!=0||this.h.h||(this.s=1,mt(16),E=!1),this.o=this.o&&E,!E)Kr(this.i,this.l,be,"[Invalid Chunked Response]"),Yt(this),pr(this);else if(0<be.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),wa(nn),nn.M=!0,mt(11))}}else Kr(this.i,this.l,be,null),Wr(this,be);Xt==4&&Yt(this),this.o&&!this.J&&(Xt==4?id(this.j,this):(this.o=!1,Ai(this)))}else ug(this.g),E==400&&0<be.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Yt(this),pr(this)}}}catch{}finally{}};function da(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function lo(h,v){var E=h.C,P=v.indexOf(`
`,E);return P==-1?as:(E=Number(v.substring(E,P)),isNaN(E)?ua:(P+=1,P+E>v.length?as:(v=v.slice(P,P+E),h.C=P+E,v)))}un.prototype.cancel=function(){this.J=!0,Yt(this)};function Ai(h){h.S=Date.now()+h.I,co(h,h.I)}function co(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rt(b(h.ba,h),v)}function Qr(h){h.B&&(d.clearTimeout(h.B),h.B=null)}un.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(oo(this.i,this.A),this.L!=2&&(Yr(),mt(17)),Yt(this),this.s=2,pr(this)):co(this,this.S-h)};function pr(h){h.j.G==0||h.J||id(h.j,h)}function Yt(h){Qr(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Cn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Wr(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||Hl(E.h,h))){if(!h.K&&Hl(E.h,h)&&E.G==3){try{var P=E.Da.g.parse(v)}catch{P=null}if(Array.isArray(P)&&P.length==3){var ne=P;if(ne[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Eo(E),_o(E);else break e;Zl(E),mt(18)}}else E.za=ne[1],0<E.za-E.T&&37500>ne[2]&&E.F&&E.v==0&&!E.C&&(E.C=Rt(b(E.Za,E),6e3));if(1>=Zr(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Di(E,11)}else if((h.K||E.g==h)&&Eo(E),!H(v))for(ne=E.Da.g.parse(v),v=0;v<ne.length;v++){let We=ne[v];if(E.T=We[0],We=We[1],E.G==2)if(We[0]=="c"){E.K=We[1],E.ia=We[2];const nn=We[3];nn!=null&&(E.la=nn,E.j.info("VER="+E.la));const Xt=We[4];Xt!=null&&(E.Aa=Xt,E.j.info("SVER="+E.Aa));const Mi=We[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(P=1.5*Mi,E.L=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const dn=h.g;if(dn){const si=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var ce=P.h;ce.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(ho(ce,ce.h),ce.h=null))}if(P.D){const ec=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;ec&&(P.ya=ec,dt(P.I,P.D,ec))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),P=E;var be=h;if(P.qa=ad(P,P.J?P.ia:null,P.W),be.K){kn(P.h,be);var Qe=be,Kt=P.L;Kt&&(Qe.I=Kt),Qe.B&&(Qr(Qe),Ai(Qe)),P.g=be}else nd(P);0<E.i.length&&bo(E)}else We[0]!="stop"&&We[0]!="close"||Di(E,7);else E.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Di(E,7):Ql(E):We[0]!="noop"&&E.l&&E.l.ta(We),E.v=0)}}Yr(4)}catch{}}var uo=class{constructor(h,v){this.g=h,this.map=v}};function Dr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function os(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zr(h){return h.h?1:h.g?h.g.size:0}function Hl(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function ho(h,v){h.g?h.g.add(v):h.h=v}function kn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Dr.prototype.cancel=function(){if(this.i=ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ql(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return D(h.i)}function ag(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var v=[],E=h.length,P=0;P<E;P++)v.push(h[P]);return v}v=[],E=0;for(P in h)v[E++]=h[P];return v}function fo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const P in h)v[E++]=P;return v}}}function $l(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=fo(h),P=ag(h),ne=P.length,ce=0;ce<ne;ce++)v.call(void 0,P[ce],E&&E[ce],h)}var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function og(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var P=h[E].indexOf("="),ne=null;if(0<=P){var ce=h[E].substring(0,P);ne=h[E].substring(P+1)}else ce=h[E];v(ce,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bt){this.h=h.h,fa(this,h.j),this.o=h.o,this.g=h.g,ls(this,h.s),this.l=h.l;var v=h.i,E=new Ni;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),Ri(this,E),this.m=h.m}else h&&(v=String(h).match(ha))?(this.h=!1,fa(this,v[1]||"",!0),this.o=mr(v[2]||""),this.g=mr(v[3]||"",!0),ls(this,v[4]),this.l=mr(v[5]||"",!0),Ri(this,v[6]||"",!0),this.m=mr(v[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}Bt.prototype.toString=function(){var h=[],v=this.j;v&&h.push(pa(v,Fl,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(pa(v,Fl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(pa(E,E.charAt(0)=="/"?lg:Gl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",pa(E,go)),h.join("")};function Xn(h){return new Bt(h)}function fa(h,v,E){h.j=E?mr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ls(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Ri(h,v,E){v instanceof Ni?(h.i=v,Wu(h.i,h.h)):(E||(v=pa(v,cg)),h.i=new Ni(v,h.h))}function dt(h,v,E){h.i.set(v,E)}function ga(h){return dt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function mr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pa(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,Qu),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Qu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fl=/[#\/\?@]/g,Gl=/[#\?:]/g,lg=/[#\?]/g,cg=/[#\?@]/g,go=/#/g;function Ni(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function yr(h){h.g||(h.g=new Map,h.h=0,h.i&&og(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}t=Ni.prototype,t.add=function(h,v){yr(this),this.i=null,h=Jr(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function Ci(h,v){yr(h),v=Jr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Ii(h,v){return yr(h),v=Jr(h,v),h.g.has(v)}t.forEach=function(h,v){yr(this),this.g.forEach(function(E,P){E.forEach(function(ne){h.call(v,ne,P,this)},this)},this)},t.na=function(){yr(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let P=0;P<v.length;P++){const ne=h[P];for(let ce=0;ce<ne.length;ce++)E.push(v[P])}return E},t.V=function(h){yr(this);let v=[];if(typeof h=="string")Ii(this,h)&&(v=v.concat(this.g.get(Jr(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},t.set=function(h,v){return yr(this),this.i=null,h=Jr(this,h),Ii(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Yl(h,v,E){Ci(h,v),0<E.length&&(h.i=null,h.g.set(Jr(h,v),D(E)),h.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var P=v[E];const ce=encodeURIComponent(String(P)),be=this.V(P);for(P=0;P<be.length;P++){var ne=ce;be[P]!==""&&(ne+="="+encodeURIComponent(String(be[P]))),h.push(ne)}}return this.i=h.join("&")};function Jr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Wu(h,v){v&&!h.j&&(yr(h),h.i=null,h.g.forEach(function(E,P){var ne=P.toLowerCase();P!=ne&&(Ci(this,P),Yl(this,ne,E))},h)),h.j=v}function ma(h,v){const E=new Vn;if(d.Image){const P=new Image;P.onload=x(vr,E,"TestLoadImage: loaded",!0,v,P),P.onerror=x(vr,E,"TestLoadImage: error",!1,v,P),P.onabort=x(vr,E,"TestLoadImage: abort",!1,v,P),P.ontimeout=x(vr,E,"TestLoadImage: timeout",!1,v,P),d.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else v(!1)}function Mr(h,v){const E=new Vn,P=new AbortController,ne=setTimeout(()=>{P.abort(),vr(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:P.signal}).then(ce=>{clearTimeout(ne),ce.ok?vr(E,"TestPingServer: ok",!0,v):vr(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ne),vr(E,"TestPingServer: error",!1,v)})}function vr(h,v,E,P,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),P(E)}catch{}}function ya(){this.g=new In}function ei(h,v,E){const P=E||"";try{$l(h,function(ne,ce){let be=ne;p(ne)&&(be=en(ne)),v.push(P+ce+"="+encodeURIComponent(be))})}catch(ne){throw v.push(P+"type="+encodeURIComponent("_badmap")),ne}}function cs(h){this.l=h.Ub||null,this.j=h.eb||!1}R(cs,xi),cs.prototype.g=function(){return new ki(this.l,this.j)},cs.prototype.i=function(h){return function(){return h}}({});function ki(h,v){at.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(ki,at),t=ki.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,ni(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||d).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ti(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ti(this):ni(this),this.readyState==3&&Kl(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ti(this))},t.Qa=function(h){this.g&&(this.response=h,ti(this))},t.ga=function(){this.g&&ti(this)};function ti(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ni(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Xl(h){let v="";return Y(h,function(E,P){v+=P,v+=":",v+=E,v+=`\r
`}),v}function tn(h,v,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=Xl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):dt(h,v,E))}function ot(h){at.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(ot,at);var po=/^https?$/i,va=["POST","PUT"];t=ot.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Ti(this.o):Ti(fr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ce){Zu(this,ce);return}if(h=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var ne in P)E.set(ne,P[ne]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ce of P.keys())E.set(ce,P.get(ce));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(ce=>ce.toLowerCase()=="content-type"),ne=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(va,v,void 0))||P||ne||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,be]of E)this.g.setRequestHeader(ce,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_a(this),this.u=!0,this.g.send(h),this.u=!1}catch(ce){Zu(this,ce)}};function Zu(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,mo(h),ri(h)}function mo(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Fe(this,"complete"),Fe(this,"abort"),ri(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ri(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yo(this):this.bb())},t.bb=function(){yo(this)};function yo(h){if(h.h&&typeof c<"u"&&(!h.v[1]||_r(h)!=4||h.Z()!=2)){if(h.u&&_r(h)==4)Et(h.Ea,0,h);else if(Fe(h,"readystatechange"),_r(h)==4){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var P;if(P=be===0){var ne=String(h.D).match(ha)[1]||null;!ne&&d.self&&d.self.location&&(ne=d.self.location.protocol.slice(0,-1)),P=!po.test(ne?ne.toLowerCase():"")}E=P}if(E)Fe(h,"complete"),Fe(h,"success");else{h.m=6;try{var ce=2<_r(h)?h.g.statusText:""}catch{ce=""}h.l=ce+" ["+h.Z()+"]",mo(h)}}finally{ri(h)}}}}function ri(h,v){if(h.g){_a(h);const E=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Fe(h,"ready");try{E.onreadystatechange=P}catch{}}}function _a(h){h.I&&(d.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function _r(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),cn(v)}};function Ju(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ug(h){const v={};h=(h.g&&2<=_r(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(H(h[P]))continue;var E=z(h[P]);const ne=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ce=v[ne]||[];v[ne]=ce,ce.push(E)}I(v,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function vo(h){this.Aa=0,this.i=[],this.j=new Vn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,h),this.cb=ba("retryDelaySeedMs",1e4,h),this.Wa=ba("forwardChannelMaxRetries",2,h),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Dr(h&&h.concurrentRequestLimit),this.Da=new ya,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vo.prototype,t.la=8,t.G=1,t.connect=function(h,v,E,P){mt(0),this.W=h,this.H=v||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.I=ad(this,null,this.W),bo(this)};function Ql(h){if(ed(h),h.G==3){var v=h.U++,E=Xn(h.I);if(dt(E,"SID",h.K),dt(E,"RID",v),dt(E,"TYPE","terminate"),Ea(h,E),v=new un(h,h.j,v),v.L=2,v.v=ga(Xn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.v,E=!0),E||(v.g=od(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ai(v)}sd(h)}function _o(h){h.g&&(wa(h),h.g.cancel(),h.g=null)}function ed(h){_o(h),h.u&&(d.clearTimeout(h.u),h.u=null),Eo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function bo(h){if(!os(h.h)&&!h.s){h.s=!0;var v=h.Ga;K||V(),te||(K(),te=!0),J.add(v,h),h.B=0}}function dg(h,v){return Zr(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rt(b(h.Ga,h,v),Jl(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const ne=new un(this,this.j,h);let ce=this.o;if(this.S&&(ce?(ce=T(ce),L(ce,this.S)):ce=this.S),this.m!==null||this.O||(ne.H=ce,ce=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(v+=P,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=td(this,ne,v),E=Xn(this.I),dt(E,"RID",h),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),Ea(this,E),ce&&(this.O?v="headers="+encodeURIComponent(String(Xl(ce)))+"&"+v:this.m&&tn(E,this.m,ce)),ho(this.h,ne),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",v),dt(E,"SID","null"),ne.T=!0,Kn(ne,E,null)):Kn(ne,E,v),this.G=2}}else this.G==3&&(h?Wl(this,h):this.i.length==0||os(this.h)||Wl(this))};function Wl(h,v){var E;v?E=v.l:E=h.U++;const P=Xn(h.I);dt(P,"SID",h.K),dt(P,"RID",E),dt(P,"AID",h.T),Ea(h,P),h.m&&h.o&&tn(P,h.m,h.o),E=new un(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=td(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ho(h.h,E),Kn(E,P,v)}function Ea(h,v){h.H&&Y(h.H,function(E,P){dt(v,P,E)}),h.l&&$l({},function(E,P){dt(v,P,E)})}function td(h,v,E){E=Math.min(h.i.length,E);var P=h.l?b(h.l.Na,h.l,h):null;e:{var ne=h.i;let ce=-1;for(;;){const be=["count="+E];ce==-1?0<E?(ce=ne[0].g,be.push("ofs="+ce)):ce=0:be.push("ofs="+ce);let Qe=!0;for(let Kt=0;Kt<E;Kt++){let We=ne[Kt].g;const nn=ne[Kt].map;if(We-=ce,0>We)ce=Math.max(0,ne[Kt].g-100),Qe=!1;else try{ei(nn,be,"req"+We+"_")}catch{P&&P(nn)}}if(Qe){P=be.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,P}function nd(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;K||V(),te||(K(),te=!0),J.add(v,h),h.v=0}}function Zl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rt(b(h.Fa,h),Jl(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,rd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rt(b(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),_o(this),rd(this))};function wa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function rd(h){h.g=new un(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Xn(h.qa);dt(v,"RID","rpc"),dt(v,"SID",h.K),dt(v,"AID",h.T),dt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&dt(v,"TO",h.ja),dt(v,"TYPE","xmlhttp"),Ea(h,v),h.m&&h.o&&tn(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=ga(Xn(v)),E.m=null,E.P=!0,kr(E,h)}t.Za=function(){this.C!=null&&(this.C=null,_o(this),Zl(this),mt(19))};function Eo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function id(h,v){var E=null;if(h.g==v){Eo(h),wa(h),h.g=null;var P=2}else if(Hl(h.h,v))E=v.D,kn(h.h,v),P=1;else return;if(h.G!=0){if(v.o)if(P==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var ne=h.B;P=Gr(),Fe(P,new Mt(P,E)),bo(h)}else nd(h);else if(ne=v.s,ne==3||ne==0&&0<v.X||!(P==1&&dg(h,v)||P==2&&Zl(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),ne){case 1:Di(h,5);break;case 4:Di(h,10);break;case 3:Di(h,6);break;default:Di(h,2)}}}function Jl(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function Di(h,v){if(h.j.info("Error code "+v),v==2){var E=b(h.fb,h),P=h.Xa;const ne=!P;P=new Bt(P||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||fa(P,"https"),ga(P),ne?ma(P.toString(),E):Mr(P.toString(),E)}else mt(2);h.G=0,h.l&&h.l.sa(v),sd(h),ed(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function sd(h){if(h.G=0,h.ka=[],h.l){const v=ql(h.h);(v.length!=0||h.i.length!=0)&&(k(h.ka,v),k(h.ka,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.ra()}}function ad(h,v,E){var P=E instanceof Bt?Xn(E):new Bt(E);if(P.g!="")v&&(P.g=v+"."+P.g),ls(P,P.s);else{var ne=d.location;P=ne.protocol,v=v?v+"."+ne.hostname:ne.hostname,ne=+ne.port;var ce=new Bt(null);P&&fa(ce,P),v&&(ce.g=v),ne&&ls(ce,ne),E&&(ce.l=E),P=ce}return E=h.D,v=h.ya,E&&v&&dt(P,E,v),dt(P,"VER",h.la),Ea(h,P),P}function od(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new ot(new cs({eb:E})):new ot(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ld(){}t=ld.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wo(){}wo.prototype.g=function(h,v){return new Dn(h,v)};function Dn(h,v){at.call(this),this.g=new vo(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!H(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!H(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ii(this)}R(Dn,at),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Ql(this.g)},Dn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=en(h),h=E);v.i.push(new uo(v.Ya++,h)),v.G==3&&bo(v)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,Dn.aa.N.call(this)};function cd(h){ur.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}R(cd,ur);function ud(){Yn.call(this),this.status=1}R(ud,Yn);function ii(h){this.g=h}R(ii,ld),ii.prototype.ua=function(){Fe(this.g,"a")},ii.prototype.ta=function(h){Fe(this.g,new cd(h))},ii.prototype.sa=function(h){Fe(this.g,new ud)},ii.prototype.ra=function(){Fe(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,pS=function(){return new wo},gS=function(){return Gr()},fS=dr,l0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Lh=Xr,hr.COMPLETE="complete",hS=hr,Ir.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",at.prototype.listen=at.prototype.K,ru=Ir,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,dS=ot}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});const Lw="@firebase/firestore",zw="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new ey("@firebase/firestore");function sl(){return Qa.logLevel}function we(t,...e){if(Qa.logLevel<=Ke.DEBUG){const n=e.map(ry);Qa.debug(`Firestore (${Ol}): ${t}`,...n)}}function ns(t,...e){if(Qa.logLevel<=Ke.ERROR){const n=e.map(ry);Qa.error(`Firestore (${Ol}): ${t}`,...n)}}function Sl(t,...e){if(Qa.logLevel<=Ke.WARN){const n=e.map(ry);Qa.warn(`Firestore (${Ol}): ${t}`,...n)}}function ry(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,mS(t,i,n)}function mS(t,e,n){let i=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ns(i),new Error(i)}function lt(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||mS(e,a,i)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(wn.UNAUTHENTICATED))}shutdown(){}}class IO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kO{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let l=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ks,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const f=l;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},d=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ks)}},0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string",31837,{l:i}),new yS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new wn(e)}}class DO{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MO{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new DO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const i=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Uw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Uw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=PO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<n&&(i+=e.charAt(a[l]%62))}return i}}function He(t,e){return t<e?-1:t>e?1:0}function c0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),a=e.codePointAt(n);if(i!==a){if(i<128&&a<128)return He(i,a);{const l=vS(),c=VO(l.encode(Bw(t,n)),l.encode(Bw(e,n)));return c!==0?c:He(i,a)}}n+=i>65535?2:1}return He(t.length,e.length)}function Bw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function VO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return He(t[n],e[n]);return He(t.length,e.length)}function Al(t,e,n){return t.length===e.length&&t.every((i,a)=>n(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=-62135596800,Hw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Hw);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jw)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hw}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-jw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new _t(0,0))}static max(){return new Pe(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="__name__";class fi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Me(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const l=fi.compareSegments(e.get(a),n.get(a));if(l!==0)return l}return He(e.length,n.length)}static compareSegments(e,n){const i=fi.isNumericId(e),a=fi.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?fi.extractNumericId(e).compare(fi.extractNumericId(n)):c0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class vt extends fi{construct(e,n,i){return new vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(a=>a.length>0))}return new vt(n)}static emptyPath(){return new vt([])}}const LO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends fi{construct(e,n,i){return new mn(e,n,i)}static isValidIdentifier(e){return LO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qw}static keyField(){return new mn([qw])}static fromServerFormat(e){const n=[];let i="",a=0;const l=()=>{if(i.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new xe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new xe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(vt.fromString(e))}static fromName(e){return new Ce(vt.fromString(e).popFirst(5))}static empty(){return new Ce(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new vt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=-1;function zO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=Pe.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Zs(a,Ce.empty(),e)}function UO(t){return new Zs(t.readTime,t.key,Tu)}class Zs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zs(Pe.min(),Ce.empty(),Tu)}static max(){return new Zs(Pe.max(),Ce.empty(),Tu)}}function BO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:He(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==jO)throw t;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,i)=>{n(e)})}static reject(e){return new ye((n,i)=>{i(e)})}static waitFor(e){return new ye((n,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&n()},f=>i(f))}),c=!0,l===a&&n()})}static or(e){let n=ye.resolve(!1);for(const i of e)n=n.next(a=>a?ye.resolve(a):i());return n}static forEach(e,n){const i=[];return e.forEach((a,l)=>{i.push(n.call(this,a,l))}),this.waitFor(i)}static mapArray(e,n){return new ye((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const p=f;n(e[p]).next(y=>{c[p]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(e,n){return new ye((i,a)=>{const l=()=>{e()===!0?n().next(()=>{l()},a):i()};l()})}}function qO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>n.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Uf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function Bf(t){return t==null}function of(t){return t===0&&1/t==-1/0}function $O(t){return typeof t=="number"&&Number.isInteger(t)&&!of(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="";function FO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$w(e)),e=GO(t.get(n),e);return $w(e)}function GO(t,e){let n=e;const i=t.length;for(let a=0;a<i;a++){const l=t.charAt(a);switch(l){case"\0":n+="";break;case bS:n+="";break;default:n+=l}}return n}function $w(t){return t+bS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ES(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ah(this.root,e,this.comparator,!0)}}class Ah{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,l){return new pn(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,i,a,l){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gw(this.data.getIterator())}getIteratorFrom(e){return new Gw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class Gw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new sr([])}unionWith(e){let n=new Zt(mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new wS("Invalid base64 string: "+l):l}}(e);return new yn(n)}static fromUint8Array(e){const n=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const YO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(lt(!!t,39018),typeof t=="string"){let e=0;const n=YO.exec(t);if(lt(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ea(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="server_timestamp",TS="__type__",SS="__previous_value__",AS="__local_write_time__";function sy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[TS])===null||n===void 0?void 0:n.stringValue)===xS}function jf(t){const e=t.mapValue.fields[SS];return sy(e)?jf(e):e}function Su(t){const e=Js(t.mapValue.fields[AS].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n,i,a,l,c,d,f,p,y){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=y}}const lf="(default)";class Au{constructor(e,n){this.projectId=e,this.database=n||lf}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===lf}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="__type__",XO="__max__",Rh={mapValue:{}},NS="__vector__",cf="value";function ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sy(t)?4:WO(t)?9007199254740991:QO(t)?10:11:Me(28295,{value:t})}function bi(t,e){if(t===e)return!0;const n=ta(t);if(n!==ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Js(a.timestampValue),d=Js(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,l){return ea(a.bytesValue).isEqual(ea(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,l){return Vt(a.geoPointValue.latitude)===Vt(l.geoPointValue.latitude)&&Vt(a.geoPointValue.longitude)===Vt(l.geoPointValue.longitude)}(t,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Vt(a.integerValue)===Vt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Vt(a.doubleValue),d=Vt(l.doubleValue);return c===d?of(c)===of(d):isNaN(c)&&isNaN(d)}return!1}(t,e);case 9:return Al(t.arrayValue.values||[],e.arrayValue.values||[],bi);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Fw(c)!==Fw(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!bi(c[f],d[f])))return!1;return!0}(t,e);default:return Me(52216,{left:t})}}function Ru(t,e){return(t.values||[]).find(n=>bi(n,e))!==void 0}function Rl(t,e){if(t===e)return 0;const n=ta(t),i=ta(e);if(n!==i)return He(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(t.booleanValue,e.booleanValue);case 2:return function(l,c){const d=Vt(l.integerValue||l.doubleValue),f=Vt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(t,e);case 3:return Yw(t.timestampValue,e.timestampValue);case 4:return Yw(Su(t),Su(e));case 5:return c0(t.stringValue,e.stringValue);case 6:return function(l,c){const d=ea(l),f=ea(c);return d.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),f=c.split("/");for(let p=0;p<d.length&&p<f.length;p++){const y=He(d[p],f[p]);if(y!==0)return y}return He(d.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,c){const d=He(Vt(l.latitude),Vt(c.latitude));return d!==0?d:He(Vt(l.longitude),Vt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kw(t.arrayValue,e.arrayValue);case 10:return function(l,c){var d,f,p,y;const _=l.fields||{},b=c.fields||{},x=(d=_[cf])===null||d===void 0?void 0:d.arrayValue,R=(f=b[cf])===null||f===void 0?void 0:f.arrayValue,D=He(((p=x?.values)===null||p===void 0?void 0:p.length)||0,((y=R?.values)===null||y===void 0?void 0:y.length)||0);return D!==0?D:Kw(x,R)}(t.mapValue,e.mapValue);case 11:return function(l,c){if(l===Rh.mapValue&&c===Rh.mapValue)return 0;if(l===Rh.mapValue)return 1;if(c===Rh.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),p=c.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let _=0;_<f.length&&_<y.length;++_){const b=c0(f[_],y[_]);if(b!==0)return b;const x=Rl(d[f[_]],p[y[_]]);if(x!==0)return x}return He(f.length,y.length)}(t.mapValue,e.mapValue);default:throw Me(23264,{Pe:n})}}function Yw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return He(t,e);const n=Js(t),i=Js(e),a=He(n.seconds,i.seconds);return a!==0?a:He(n.nanos,i.nanos)}function Kw(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const l=Rl(n[a],i[a]);if(l)return l}return He(n.length,i.length)}function Nl(t){return u0(t)}function u0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Js(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ea(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",a=!0;for(const l of n.values||[])a?a=!1:i+=",",i+=u0(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${u0(n.fields[c])}`;return a+"}"}(t.mapValue):Me(61005,{value:t})}function zh(t){switch(ta(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(t);return e?16+zh(e):16;case 5:return 2*t.stringValue.length;case 6:return ea(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+zh(l),0)}(t.arrayValue);case 10:case 11:return function(i){let a=0;return ia(i.fields,(l,c)=>{a+=l.length+zh(c)}),a}(t.mapValue);default:throw Me(13486,{value:t})}}function Xw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function d0(t){return!!t&&"integerValue"in t}function ay(t){return!!t&&"arrayValue"in t}function Qw(t){return!!t&&"nullValue"in t}function Ww(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uh(t){return!!t&&"mapValue"in t}function QO(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RS])===null||n===void 0?void 0:n.stringValue)===NS}function ou(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ou(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ou(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Uh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(n)}setAll(e){let n=mn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,i,a),i={},a=[],n=d.popLast()}c?i[d.lastSegment()]=ou(c):a.push(d.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,a)}delete(e){const n=this.field(e.popLast());Uh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];Uh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){ia(n,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new Hn(ou(this.value))}}function CS(t){const e=[];return ia(t.fields,(n,i)=>{const a=new mn([n]);if(Uh(i)){const l=CS(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,i,a,l,c,d){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,Pe.min(),Pe.min(),Pe.min(),Hn.empty(),0)}static newFoundDocument(e,n,i,a){return new xn(e,1,n,Pe.min(),i,a,0)}static newNoDocument(e,n){return new xn(e,2,n,Pe.min(),Pe.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,Pe.min(),Pe.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n){this.position=e,this.inclusive=n}}function Zw(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const l=e[a],c=t.position[a];if(l.field.isKeyField()?i=Ce.comparator(Ce.fromName(c.referenceValue),n.key):i=Rl(c,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Jw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{}class Ft extends IS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new e6(e,n,i):n==="array-contains"?new r6(e,i):n==="in"?new i6(e,i):n==="not-in"?new s6(e,i):n==="array-contains-any"?new a6(e,i):new Ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new t6(e,i):new n6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rl(n,this.value)):n!==null&&ta(this.value)===ta(n)&&this.matchesComparison(Rl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends IS{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new jr(e,n)}matches(e){return kS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function kS(t){return t.op==="and"}function DS(t){return JO(t)&&kS(t)}function JO(t){for(const e of t.filters)if(e instanceof jr)return!1;return!0}function h0(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Nl(t.value);if(DS(t))return t.filters.map(e=>h0(e)).join(",");{const e=t.filters.map(n=>h0(n)).join(",");return`${t.op}(${e})`}}function MS(t,e){return t instanceof Ft?function(i,a){return a instanceof Ft&&i.op===a.op&&i.field.isEqual(a.field)&&bi(i.value,a.value)}(t,e):t instanceof jr?function(i,a){return a instanceof jr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&MS(c,a.filters[d]),!0):!1}(t,e):void Me(19439)}function OS(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Nl(n.value)}`}(t):t instanceof jr?function(n){return n.op.toString()+" {"+n.getFilters().map(OS).join(" ,")+"}"}(t):"Filter"}class e6 extends Ft{constructor(e,n,i){super(e,n,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class t6 extends Ft{constructor(e,n){super(e,"in",n),this.keys=PS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class n6 extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=PS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ce.fromName(i.referenceValue))}class r6 extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ay(n)&&Ru(n.arrayValue,this.value)}}class i6 extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ru(this.value.arrayValue,n)}}class s6 extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ru(this.value.arrayValue,n)}}class a6 extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ay(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function ex(t,e=null,n=[],i=[],a=null,l=null,c=null){return new o6(t,e,n,i,a,l,c)}function oy(t){const e=Ve(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>h0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Bf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Nl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Nl(i)).join(",")),e.Ie=n}return e.Ie}function ly(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jw(t.startAt,e.startAt)&&Jw(t.endAt,e.endAt)}function f0(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n=null,i=[],a=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function l6(t,e,n,i,a,l,c,d){return new Ll(t,e,n,i,a,l,c,d)}function VS(t){return new Ll(t)}function tx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function LS(t){return t.collectionGroup!==null}function lu(t){const e=Ve(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Zt(mn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Nu(l,i))}),n.has(mn.keyField().canonicalString())||e.Ee.push(new Nu(mn.keyField(),i))}return e.Ee}function mi(t){const e=Ve(t);return e.de||(e.de=c6(e,lu(t))),e.de}function c6(t,e){if(t.limitType==="F")return ex(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Nu(a.field,l)});const n=t.endAt?new uf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new uf(t.startAt.position,t.startAt.inclusive):null;return ex(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function g0(t,e){const n=t.filters.concat([e]);return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function p0(t,e,n){return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hf(t,e){return ly(mi(t),mi(e))&&t.limitType===e.limitType}function zS(t){return`${oy(mi(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(a=>OS(a)).join(", ")}]`),Bf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(a=>Nl(a)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(a=>Nl(a)).join(",")),`Target(${i})`}(mi(t))}; limitType=${t.limitType})`}function qf(t,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,a){for(const l of lu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!function(c,d,f){const p=Zw(c,d,f);return c.inclusive?p<=0:p<0}(i.startAt,lu(i),a)||i.endAt&&!function(c,d,f){const p=Zw(c,d,f);return c.inclusive?p>=0:p>0}(i.endAt,lu(i),a))}(t,e)}function u6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function US(t){return(e,n)=>{let i=!1;for(const a of lu(t)){const l=d6(a,e,n);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function d6(t,e,n){const i=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(l,c,d){const f=c.data.field(l),p=d.data.field(l);return f!==null&&p!==null?Rl(f,p):Me(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return ES(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new St(Ce.comparator);function rs(){return h6}const BS=new St(Ce.comparator);function iu(...t){let e=BS;for(const n of t)e=e.insert(n.key,n);return e}function jS(t){let e=BS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function qa(){return cu()}function HS(){return cu()}function cu(){return new no(t=>t.toString(),(t,e)=>t.isEqual(e))}const f6=new St(Ce.comparator),g6=new Zt(Ce.comparator);function Xe(...t){let e=g6;for(const n of t)e=e.add(n);return e}const p6=new Zt(He);function m6(){return p6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(e)?"-0":e}}function qS(t){return{integerValue:""+t}}function y6(t,e){return $O(e)?qS(e):cy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function v6(t,e,n){return t instanceof df?function(a,l){const c={fields:{[TS]:{stringValue:xS},[AS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&sy(l)&&(l=jf(l)),l&&(c.fields[SS]=l),{mapValue:c}}(n,e):t instanceof Cu?FS(t,e):t instanceof Iu?GS(t,e):function(a,l){const c=$S(a,l),d=nx(c)+nx(a.Re);return d0(c)&&d0(a.Re)?qS(d):cy(a.serializer,d)}(t,e)}function _6(t,e,n){return t instanceof Cu?FS(t,e):t instanceof Iu?GS(t,e):n}function $S(t,e){return t instanceof hf?function(i){return d0(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class df extends $f{}class Cu extends $f{constructor(e){super(),this.elements=e}}function FS(t,e){const n=YS(e);for(const i of t.elements)n.some(a=>bi(a,i))||n.push(i);return{arrayValue:{values:n}}}class Iu extends $f{constructor(e){super(),this.elements=e}}function GS(t,e){let n=YS(e);for(const i of t.elements)n=n.filter(a=>!bi(a,i));return{arrayValue:{values:n}}}class hf extends $f{constructor(e,n){super(),this.serializer=e,this.Re=n}}function nx(t){return Vt(t.integerValue||t.doubleValue)}function YS(t){return ay(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function b6(t,e){return t.field.isEqual(e.field)&&function(i,a){return i instanceof Cu&&a instanceof Cu||i instanceof Iu&&a instanceof Iu?Al(i.elements,a.elements,bi):i instanceof hf&&a instanceof hf?bi(i.Re,a.Re):i instanceof df&&a instanceof df}(t.transform,e.transform)}class E6{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ff{}function KS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gf(t.key,ar.none()):new Bu(t.key,t.data,ar.none());{const n=t.data,i=Hn.empty();let a=new Zt(mn.comparator);for(let l of e.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new sa(t.key,i,new sr(a.toArray()),ar.none())}}function w6(t,e,n){t instanceof Bu?function(a,l,c){const d=a.value.clone(),f=ix(a.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(t,e,n):t instanceof sa?function(a,l,c){if(!Bh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=ix(a.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(XS(a)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(t,e,n):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,n)}function uu(t,e,n,i){return t instanceof Bu?function(l,c,d,f){if(!Bh(l.precondition,c))return d;const p=l.value.clone(),y=sx(l.fieldTransforms,f,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof sa?function(l,c,d,f){if(!Bh(l.precondition,c))return d;const p=sx(l.fieldTransforms,f,c),y=c.data;return y.setAll(XS(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(l,c,d){return Bh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(t,e,n)}function x6(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),l=$S(i.transform,a||null);l!=null&&(n===null&&(n=Hn.empty()),n.set(i.field,l))}return n||null}function rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Al(i,a,(l,c)=>b6(l,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bu extends Ff{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class sa extends Ff{constructor(e,n,i,a,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function XS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function ix(t,e,n){const i=new Map;lt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let a=0;a<n.length;a++){const l=t[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,_6(c,d,n[a]))}return i}function sx(t,e,n){const i=new Map;for(const a of t){const l=a.transform,c=n.data.field(a.field);i.set(a.field,v6(l,c,e))}return i}class Gf extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T6 extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&w6(l,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=HS();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=n.has(a.key)?null:d;const f=KS(c,d);f!==null&&i.set(a.key,f),c.isValidDocument()||c.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,(n,i)=>rx(n,i))&&Al(this.baseMutations,e.baseMutations,(n,i)=>rx(n,i))}}class uy{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){lt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return f6}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new uy(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Je;function N6(t){switch(t){case me.OK:return Me(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return Me(15467,{code:t})}}function QS(t){if(t===void 0)return ns("GRPC error has no .code"),me.UNKNOWN;switch(t){case qt.OK:return me.OK;case qt.CANCELLED:return me.CANCELLED;case qt.UNKNOWN:return me.UNKNOWN;case qt.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case qt.INTERNAL:return me.INTERNAL;case qt.UNAVAILABLE:return me.UNAVAILABLE;case qt.UNAUTHENTICATED:return me.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case qt.NOT_FOUND:return me.NOT_FOUND;case qt.ALREADY_EXISTS:return me.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return me.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case qt.ABORTED:return me.ABORTED;case qt.OUT_OF_RANGE:return me.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return me.UNIMPLEMENTED;case qt.DATA_LOSS:return me.DATA_LOSS;default:return Me(39323,{code:t})}}(Je=qt||(qt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Ys([4294967295,4294967295],0);function ax(t){const e=vS().encode(t),n=new uS;return n.update(e),new Uint8Array(n.digest())}function ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ys([n,i],0),new Ys([a,l],0)]}class dy{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new su(`Invalid padding: ${n}`);if(i<0)throw new su(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new su(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ys.fromNumber(this.pe)}we(e,n,i){let a=e.add(n.multiply(Ys.fromNumber(i)));return a.compare(C6)===1&&(a=new Ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=ax(e),[i,a]=ox(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);if(!this.be(c))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new dy(l,a,n);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const n=ax(e),[i,a]=ox(n);for(let l=0;l<this.hashCount;l++){const c=this.we(i,a,l);this.Se(c)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,i,a,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Yf(Pe.min(),a,new St(He),rs(),Xe())}}class ju{constructor(e,n,i,a,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ju(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,i,a){this.De=e,this.removedTargetIds=n,this.key=i,this.ve=a}}class WS{constructor(e,n){this.targetId=e,this.Ce=n}}class ZS{constructor(e,n,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class lx{constructor(){this.Fe=0,this.Me=cx(),this.xe=yn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Xe(),n=Xe(),i=Xe();return this.Me.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Me(38017,{changeType:l})}}),new ju(this.xe,this.Oe,e,n,i)}Qe(){this.Ne=!1,this.Me=cx()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,lt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class I6{constructor(e){this.ze=e,this.je=new Map,this.He=rs(),this.Je=Nh(),this.Ye=Nh(),this.Ze=new St(He)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const i=this.rt(n);switch(e.state){case 0:this.it(n)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(n);break;case 3:this.it(n)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),i.ke(e.resumeToken));break;default:Me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((i,a)=>{this.it(a)&&n(a)})}ot(e){const n=e.targetId,i=e.Ce.count,a=this._t(n);if(a){const l=a.target;if(f0(l))if(i===0){const c=new Ce(l.path);this.tt(n,c,xn.newNoDocument(c,Pe.min()))}else lt(i===1,20013,{expectedCount:i});else{const c=this.ut(n);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=n;let c,d;try{c=ea(i).toUint8Array()}catch(f){if(f instanceof wS)return Sl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new dy(c,a,l)}catch(f){return Sl(f instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,n,i){return n.Ce.count===i-this.Tt(e,n.targetId)?0:2}Tt(e,n){const i=this.ze.getRemoteKeysForTarget(n);let a=0;return i.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(n,l,null),a++)}),a}It(e){const n=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&f0(d.target)){const f=new Ce(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,xn.newNoDocument(f,e))}l.Le&&(n.set(c,l.qe()),l.Qe())}});let i=Xe();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(f=>{const p=this._t(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const a=new Yf(e,n,this.Ze,this.He,i);return this.He=rs(),this.Je=Nh(),this.Ye=Nh(),this.Ze=new St(He),a}et(e,n){if(!this.it(e))return;const i=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,i),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,n)?a.$e(n,1):a.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),i&&(this.He=this.He.insert(n,i))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new lx,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Zt(He),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Zt(He),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new lx),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Nh(){return new St(Ce.comparator)}function cx(){return new St(Ce.comparator)}const k6={asc:"ASCENDING",desc:"DESCENDING"},D6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M6={and:"AND",or:"OR"};class O6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function m0(t,e){return t.useProto3Json||Bf(e)?e:{value:e}}function ff(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P6(t,e){return ff(t,e.toTimestamp())}function yi(t){return lt(!!t,49232),Pe.fromTimestamp(function(n){const i=Js(n);return new _t(i.seconds,i.nanos)}(t))}function hy(t,e){return y0(t,e).canonicalString()}function y0(t,e){const n=function(a){return new vt(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eA(t){const e=vt.fromString(t);return lt(sA(e),10190,{key:e.toString()}),e}function v0(t,e){return hy(t.databaseId,e.path)}function Dm(t,e){const n=eA(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(nA(n))}function tA(t,e){return hy(t.databaseId,e)}function V6(t){const e=eA(t);return e.length===4?vt.emptyPath():nA(e)}function _0(t){return new vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nA(t){return lt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ux(t,e,n){return{name:v0(t,e),fields:n.value.mapValue.fields}}function L6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Me(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(lt(y===void 0||typeof y=="string",58123),yn.fromBase64String(y||"")):(lt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),yn.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const y=p.code===void 0?me.UNKNOWN:QS(p.code);return new xe(y,p.message||"")}(c);n=new ZS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Dm(t,i.document.name),l=yi(i.document.updateTime),c=i.document.createTime?yi(i.document.createTime):Pe.min(),d=new Hn({mapValue:{fields:i.document.fields}}),f=xn.newFoundDocument(a,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];n=new jh(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Dm(t,i.document),l=i.readTime?yi(i.readTime):Pe.min(),c=xn.newNoDocument(a,l),d=i.removedTargetIds||[];n=new jh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Dm(t,i.document),l=i.removedTargetIds||[];n=new jh([],l,a,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new R6(a,l),d=i.targetId;n=new WS(d,c)}}return n}function z6(t,e){let n;if(e instanceof Bu)n={update:ux(t,e.key,e.value)};else if(e instanceof Gf)n={delete:v0(t,e.key)};else if(e instanceof sa)n={update:ux(t,e.key,e.data),updateMask:Y6(e.fieldMask)};else{if(!(e instanceof T6))return Me(16599,{ft:e.type});n={verify:v0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof df)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Iu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof hf)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Me(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:P6(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)}(t,e.precondition)),n}function U6(t,e){return t&&t.length>0?(lt(e!==void 0,14353),t.map(n=>function(a,l){let c=a.updateTime?yi(a.updateTime):yi(l);return c.isEqual(Pe.min())&&(c=yi(l)),new E6(c,a.transformResults||[])}(n,e))):[]}function B6(t,e){return{documents:[tA(t,e.path)]}}function j6(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=tA(t,a);const l=function(p){if(p.length!==0)return iA(jr.create(p,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:ol(b.field),direction:$6(b.dir)}}(y))}(e.orderBy);c&&(n.structuredQuery.orderBy=c);const d=m0(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:a}}function H6(t){let e=V6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){lt(i===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];n.where&&(l=function(_){const b=rA(_);return b instanceof jr&&DS(b)?b.getFilters():[b]}(n.where));let c=[];n.orderBy&&(c=function(_){return _.map(b=>function(R){return new Nu(ll(R.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(b))}(n.orderBy));let d=null;n.limit&&(d=function(_){let b;return b=typeof _=="object"?_.value:_,Bf(b)?null:b}(n.limit));let f=null;n.startAt&&(f=function(_){const b=!!_.before,x=_.values||[];return new uf(x,b)}(n.startAt));let p=null;return n.endAt&&(p=function(_){const b=!_.before,x=_.values||[];return new uf(x,b)}(n.endAt)),l6(e,a,c,l,d,"F",f,p)}function q6(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ll(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ll(n.unaryFilter.field);return Ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ll(n.unaryFilter.field);return Ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ll(n.unaryFilter.field);return Ft.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(ll(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jr.create(n.compositeFilter.filters.map(i=>rA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Me(1026)}}(n.compositeFilter.op))}(t):Me(30097,{filter:t})}function $6(t){return k6[t]}function F6(t){return D6[t]}function G6(t){return M6[t]}function ol(t){return{fieldPath:t.canonicalString()}}function ll(t){return mn.fromServerFormat(t.fieldPath)}function iA(t){return t instanceof Ft?function(n){if(n.op==="=="){if(Ww(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(Qw(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ww(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(Qw(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:F6(n.op),value:n.value}}}(t):t instanceof jr?function(n){const i=n.getFilters().map(a=>iA(a));return i.length===1?i[0]:{compositeFilter:{op:G6(n.op),filters:i}}}(t):Me(54877,{filter:t})}function Y6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,i,a,l=Pe.min(),c=Pe.min(),d=yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.wt=e}}function X6(t){const e=H6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?p0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.Cn=new W6}addToCollectionParentIndex(e,n){return this.Cn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(Zs.min())}updateCollectionGroup(e,n,i){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class W6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new Zt(vt.comparator),l=!a.has(i);return this.index[n]=a.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Zt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aA=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(aA,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Cl(0)}static lr(){return new Cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="LruGarbageCollector",Z6=1048576;function fx([t,e],[n,i]){const a=He(t,n);return a===0?He(e,i):a}class J6{constructor(e){this.Er=e,this.buffer=new Zt(fx),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();fx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){we(hx,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vl(n)?we(hx,"Ignoring IndexedDB error during garbage collection: ",n):await Pl(n)}await this.mr(3e5)})}}class t5{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(Uf.le);const i=new J6(n);return this.gr.forEachTarget(e,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.gr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(dx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dx):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let i,a,l,c,d,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a))).next(_=>(i=_,d=Date.now(),this.removeTargets(e,i,n))).next(_=>(l=_,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(p=Date.now(),sl()<=Ke.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${_} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_})))}}function n5(t,e){return new t5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ye.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(i!==null&&uu(i.mutation,a,sr.empty(),_t.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Xe()){const a=qa();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,i).next(l=>{let c=iu();return l.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const i=qa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Xe()))}populateOverlays(e,n,i){const a=[];return i.forEach(l=>{n.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,i,a){let l=rs();const c=cu(),d=function(){return cu()}();return n.forEach((f,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof sa)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),uu(y.mutation,p,y.mutation.getFieldMask(),_t.now())):c.set(p.key,sr.empty())}),this.recalculateAndSaveOverlays(e,l).next(f=>(f.forEach((p,y)=>c.set(p,y)),n.forEach((p,y)=>{var _;return d.set(p,new i5(y,(_=c.get(p))!==null&&_!==void 0?_:null))}),d))}recalculateAndSaveOverlays(e,n){const i=cu();let a=new St((c,d)=>c-d),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let y=i.get(f)||sr.empty();y=d.applyToLocalView(p,y),i.set(f,y);const _=(a.get(d.batchId)||Xe()).add(f);a=a.insert(d.batchId,_)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,y=f.value,_=HS();y.forEach(b=>{if(!l.has(b)){const x=KS(n.get(b),i.get(b));x!==null&&_.set(b,x),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,_))}return ye.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,a){return function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-l.size):ye.resolve(qa());let d=Tu,f=l;return c.next(p=>ye.forEach(p,(y,_)=>(d<_.largestBatchId&&(d=_.largestBatchId),l.get(y)?ye.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,f,p,Xe())).next(y=>({batchId:d,changes:jS(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(i=>{let a=iu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const l=n.collectionGroup;let c=iu();return this.indexManager.getCollectionParents(e,l).next(d=>ye.forEach(d,f=>{const p=function(_,b){return new Ll(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(y=>{y.forEach((_,b)=>{c=c.insert(_,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,n,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,a))).next(c=>{l.forEach((f,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,xn.newInvalidDocument(y)))});let d=iu();return c.forEach((f,p)=>{const y=l.get(f);y!==void 0&&uu(y.mutation,p,sr.empty(),_t.now()),qf(n,p)&&(d=d.insert(f,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ye.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:yi(a.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(a){return{name:a.name,query:X6(a.bundledQuery),readTime:yi(a.readTime)}}(n)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(){this.overlays=new St(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const i=qa();return ye.forEach(n,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((a,l)=>{this.St(e,n,l)}),ye.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),ye.resolve()}getOverlaysForCollection(e,n,i){const a=qa(),l=n.length+1,c=new Ce(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>i&&a.set(f.getKey(),f)}return ye.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let l=new St((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=qa(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=qa(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return ye.resolve(d)}St(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new A6(n,i));let l=this.Qr.get(n);l===void 0&&(l=Xe(),this.Qr.set(n,l)),this.Qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.$r=new Zt(on.Ur),this.Kr=new Zt(on.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const i=new on(e,n);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.zr(new on(e,n))}jr(e,n){e.forEach(i=>this.removeReference(i,n))}Hr(e){const n=new Ce(new vt([])),i=new on(n,e),a=new on(n,e+1),l=[];return this.Kr.forEachInRange([i,a],c=>{this.zr(c),l.push(c.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new vt([])),i=new on(n,e),a=new on(n,e+1);let l=Xe();return this.Kr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const n=new on(e,0),i=this.$r.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class on{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||He(e.Zr,n.Zr)}static Wr(e,n){return He(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Zt(on.Ur)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new S6(l,n,i,a);this.mutationQueue.push(c);for(const d of a)this.Xr=this.Xr.add(new on(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(e,n){return ye.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.ti(i),l=a<0?0:a;return ye.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?iy:this.nr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new on(n,0),a=new on(n,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,a],c=>{const d=this.ei(c.Zr);l.push(d)}),ye.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Zt(He);return n.forEach(a=>{const l=new on(a,0),c=new on(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,c],d=>{i=i.add(d.Zr)})}),ye.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let l=i;Ce.isDocumentKey(l)||(l=l.child(""));const c=new on(new Ce(l),0);let d=new Zt(He);return this.Xr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(f.Zr)),!0)},c),ye.resolve(this.ni(d))}ni(e){const n=[];return e.forEach(i=>{const a=this.ei(i);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){lt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return ye.forEach(n.mutations,a=>{const l=new on(a.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,n){const i=new on(n,0),a=this.Xr.firstAfterOrEqual(i);return ye.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.ii=e,this.docs=function(){return new St(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),l=a?a.size:0,c=this.ii(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ye.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let i=rs();return n.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():xn.newInvalidDocument(a))}),ye.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let l=rs();const c=n.path,d=new Ce(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||BO(UO(y),i)<=0||(a.has(y.key)||qf(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ye.resolve(l)}getAllFromCollectionGroup(e,n,i,a){Me(9500)}si(e,n){return ye.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new d5(this)}getSize(e){return ye.resolve(this.size)}}class d5 extends r5{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?n.push(this.Br.addEntry(e,a)):this.Br.removeEntry(i)}),ye.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.persistence=e,this.oi=new no(n=>oy(n),ly),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this._i=0,this.ai=new fy,this.targetCount=0,this.ui=Cl.cr()}forEachTarget(e,n){return this.oi.forEach((i,a)=>n(a)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this._i&&(this._i=n),ye.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Cl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Tr(n),ye.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,i){let a=0;const l=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.oi.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ye.waitFor(l).next(()=>a)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const i=this.oi.get(n)||null;return ye.resolve(i)}addMatchingKeys(e,n,i){return this.ai.Gr(n,i),ye.resolve()}removeMatchingKeys(e,n,i){this.ai.jr(n,i);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ye.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ai.Yr(n);return ye.resolve(i)}containsKey(e,n){return ye.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.ci={},this.overlays={},this.li=new Uf(0),this.hi=!1,this.hi=!0,this.Pi=new l5,this.referenceDelegate=e(this),this.Ti=new h5(this),this.indexManager=new Q6,this.remoteDocumentCache=function(a){return new u5(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new K6(n),this.Ei=new a5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ci[e.toKey()];return i||(i=new c5(n,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,i){we("MemoryPersistence","Starting transaction:",e);const a=new f5(this.li.next());return this.referenceDelegate.di(),i(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(e,n){return ye.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,n)))}}class f5 extends HO{constructor(e){super(),this.currentSequenceNumber=e}}class gy{constructor(e){this.persistence=e,this.Vi=new fy,this.mi=null}static fi(e){return new gy(e)}get gi(){if(this.mi)return this.mi;throw Me(60996)}addReference(e,n,i){return this.Vi.addReference(i,n),this.gi.delete(i.toString()),ye.resolve()}removeReference(e,n,i){return this.Vi.removeReference(i,n),this.gi.add(i.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.gi,i=>{const a=Ce.fromPath(i);return this.pi(e,a).next(l=>{l||n.removeEntry(a,Pe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(i=>{i?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ye.or([()=>ye.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class gf{constructor(e,n){this.persistence=e,this.yi=new no(i=>FO(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=n5(this,n)}static fi(e,n){return new gf(e,n)}di(){}Ai(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(a=>i+a))}br(e){let n=0;return this.yr(e,i=>{n++}).next(()=>n)}yr(e,n){return ye.forEach(this.yi,(i,a)=>this.Dr(e,i,a).next(l=>l?ye.resolve():n(a)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(e,c=>this.Dr(e,c,n).next(d=>{d||(i++,l.removeEntry(c,Pe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,i){return this.yi.set(i,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ye.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zh(e.data.value)),n}Dr(e,n,i){return ye.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.yi.get(n);return ye.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.ds=i,this.As=a}static Rs(e,n){let i=Xe(),a=Xe();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new py(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return cM()?8:qO(Sn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,i,a){const l={result:null};return this.ws(e,n).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.bs(e,n,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new g5;return this.Ss(e,n,c).next(d=>{if(l.result=d,this.fs)return this.Ds(e,n,c,d.size)})}).next(()=>l.result)}Ds(e,n,i,a){return i.documentReadCount<this.gs?(sl()<=Ke.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ye.resolve()):(sl()<=Ke.DEBUG&&we("QueryEngine","Query:",al(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(sl()<=Ke.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(n))):ye.resolve())}ws(e,n){if(tx(n))return ye.resolve(null);let i=mi(n);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=p0(n,null,"F"),i=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Xe(...l);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.vs(n,d);return this.Cs(n,p,c,f.readTime)?this.ws(e,p0(n,null,"F")):this.Fs(e,p,n,f)}))})))}bs(e,n,i,a){return tx(n)||a.isEqual(Pe.min())?ye.resolve(null):this.ys.getDocuments(e,i).next(l=>{const c=this.vs(n,l);return this.Cs(n,c,i,a)?ye.resolve(null):(sl()<=Ke.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),al(n)),this.Fs(e,c,n,zO(a,Tu)).next(d=>d))})}vs(e,n){let i=new Zt(US(e));return n.forEach((a,l)=>{qf(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,n,i){return sl()<=Ke.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",al(n)),this.ys.getDocumentsMatchingQuery(e,n,Zs.min(),i)}Fs(e,n,i,a){return this.ys.getDocumentsMatchingQuery(e,i,a).next(l=>(n.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="LocalStore",m5=3e8;class y5{constructor(e,n,i,a){this.persistence=e,this.Ms=n,this.serializer=a,this.xs=new St(He),this.Os=new no(l=>oy(l),ly),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s5(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function v5(t,e,n,i){return new y5(t,e,n,i)}async function lA(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,n.Ls(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let f=Xe();for(const p of a){c.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return n.localDocuments.getDocuments(i,f).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:d}))})})}function _5(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=n.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,p,y){const _=p.batch,b=_.keys();let x=ye.resolve();return b.forEach(R=>{x=x.next(()=>y.getEntry(f,R)).next(D=>{const k=p.docVersions.get(R);lt(k!==null,48541),D.version.compareTo(k)<0&&(_.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),y.addEntry(D)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(f,_))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=Xe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(i,a))})}function cA(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function b5(t,e){const n=Ve(t),i=e.snapshotVersion;let a=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=n.Bs.newChangeBuffer({trackRemovals:!0});a=n.xs;const d=[];e.targetChanges.forEach((y,_)=>{const b=a.get(_);if(!b)return;d.push(n.Ti.removeMatchingKeys(l,y.removedDocuments,_).next(()=>n.Ti.addMatchingKeys(l,y.addedDocuments,_)));let x=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?x=x.withResumeToken(yn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,i)),a=a.insert(_,x),function(D,k,U){return D.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=m5?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(b,x,y)&&d.push(n.Ti.updateTargetData(l,x))});let f=rs(),p=Xe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(E5(l,c,e.documentUpdates).next(y=>{f=y.qs,p=y.Qs})),!i.isEqual(Pe.min())){const y=n.Ti.getLastRemoteSnapshotVersion(l).next(_=>n.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return ye.waitFor(d).next(()=>c.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,f,p)).next(()=>f)}).then(l=>(n.xs=a,l))}function E5(t,e,n){let i=Xe(),a=Xe();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let c=rs();return n.forEach((d,f)=>{const p=l.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):we(my,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)}),{qs:c,Qs:a}})}function w5(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=iy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function x5(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return n.Ti.getTargetData(i,e).next(l=>l?(a=l,ye.resolve(a)):n.Ti.allocateTargetId(i).next(c=>(a=new Hs(e,c,"TargetPurposeListen",i.currentSequenceNumber),n.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=n.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.xs=n.xs.insert(i.targetId,i),n.Os.set(e,i.targetId)),i})}async function b0(t,e,n){const i=Ve(t),a=i.xs.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Vl(c))throw c;we(my,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(a.target)}function gx(t,e,n){const i=Ve(t);let a=Pe.min(),l=Xe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,y){const _=Ve(f),b=_.Os.get(y);return b!==void 0?ye.resolve(_.xs.get(b)):_.Ti.getTargetData(p,y)}(i,c,mi(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(f=>{l=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,n?a:Pe.min(),n?l:Xe())).next(d=>(T5(i,u6(e),d),{documents:d,$s:l})))}function T5(t,e,n){let i=t.Ns.get(e)||Pe.min();n.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Ns.set(e,i)}class px{constructor(){this.activeTargetIds=m6()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S5{constructor(){this.xo=new px,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,i){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new px,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="ConnectivityMonitor";class yx{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){we(mx,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){we(mx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function E0(){return Ch===null?Ch=function(){return 268435456+Math.round(2147483648*Math.random())}():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",R5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N5{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===lf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(e,n,i,a,l){const c=E0(),d=this.jo(e,n.toUriEncodedString());we(Mm,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,a,l);const{host:p}=new URL(d),y=to(p);return this.Jo(e,d,f,i,y).then(_=>(we(Mm,`Received RPC '${e}' ${c}: `,_),_),_=>{throw Sl(Mm,`RPC '${e}' ${c} failed with error: `,_,"url: ",d,"request:",i),_})}Yo(e,n,i,a,l,c){return this.zo(e,n,i,a,l)}Ho(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}jo(e,n){const i=R5[e];return`${this.Ko}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class I5 extends N5{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,a,l){const c=E0();return new Promise((d,f)=>{const p=new dS;p.setWithCredentials(!0),p.listenOnce(hS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Lh.NO_ERROR:const _=p.getResponseJson();we(En,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),d(_);break;case Lh.TIMEOUT:we(En,`RPC '${e}' ${c} timed out`),f(new xe(me.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const b=p.getStatus();if(we(En,`RPC '${e}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const R=x?.error;if(R&&R.status&&R.message){const D=function(U){const H=U.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(H)>=0?H:me.UNKNOWN}(R.status);f(new xe(D,R.message))}else f(new xe(me.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new xe(me.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{h_:e,streamId:c,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{we(En,`RPC '${e}' ${c} completed.`)}});const y=JSON.stringify(a);we(En,`RPC '${e}' ${c} sending request:`,a),p.send(n,"POST",y,i,15)})}I_(e,n,i){const a=E0(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=pS(),d=gS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const y=l.join("");we(En,`Creating RPC '${e}' stream ${a}: ${y}`,f);const _=c.createWebChannel(y,f);this.E_(_);let b=!1,x=!1;const R=new C5({Zo:k=>{x?we(En,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(b||(we(En,`Opening RPC '${e}' stream ${a} transport.`),_.open(),b=!0),we(En,`RPC '${e}' stream ${a} sending:`,k),_.send(k))},Xo:()=>_.close()}),D=(k,U,H)=>{k.listen(U,G=>{try{H(G)}catch(j){setTimeout(()=>{throw j},0)}})};return D(_,ru.EventType.OPEN,()=>{x||(we(En,`RPC '${e}' stream ${a} transport opened.`),R.__())}),D(_,ru.EventType.CLOSE,()=>{x||(x=!0,we(En,`RPC '${e}' stream ${a} transport closed`),R.u_(),this.d_(_))}),D(_,ru.EventType.ERROR,k=>{x||(x=!0,Sl(En,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),R.u_(new xe(me.UNAVAILABLE,"The operation could not be completed")))}),D(_,ru.EventType.MESSAGE,k=>{var U;if(!x){const H=k.data[0];lt(!!H,16349);const G=H,j=G?.error||((U=G[0])===null||U===void 0?void 0:U.error);if(j){we(En,`RPC '${e}' stream ${a} received error:`,j);const Q=j.status;let Y=function(A){const L=qt[A];if(L!==void 0)return QS(L)}(Q),I=j.message;Y===void 0&&(Y=me.INTERNAL,I="Unknown error status: "+Q+" with message "+j.message),x=!0,R.u_(new xe(Y,I)),_.close()}else we(En,`RPC '${e}' stream ${a} received:`,H),R.c_(H)}}),D(d,fS.STAT_EVENT,k=>{k.stat===l0.PROXY?we(En,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===l0.NOPROXY&&we(En,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{R.a_()},0),R}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){return new O6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,i=1e3,a=1.5,l=6e4){this.xi=e,this.timerId=n,this.A_=i,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),a=Math.max(0,n-i);a>0&&we("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="PersistentStream";class dA{constructor(e,n,i,a,l,c,d,f){this.xi=e,this.S_=i,this.D_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new uA(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(ns(n.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.v_===n&&this.z_(i,a)},i=>{e(()=>{const a=new xe(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(a)})})}z_(e,n){const i=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.j_(a))}),this.stream.onMessage(a=>{i(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return we(vx,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(we(vx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k5 extends dA{constructor(e,n,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=L6(this.serializer,e),i=function(l){if(!("targetChange"in l))return Pe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Pe.min():c.readTime?yi(c.readTime):Pe.min()}(e);return this.listener.Y_(n,i)}Z_(e){const n={};n.database=_0(this.serializer),n.addTarget=function(l,c){let d;const f=c.target;if(d=f0(f)?{documents:B6(l,f)}:{query:j6(l,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=JS(l,c.resumeToken);const p=m0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Pe.min())>0){d.readTime=ff(l,c.snapshotVersion.toTimestamp());const p=m0(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=q6(this.serializer,e);i&&(n.labels=i),this.Q_(n)}X_(e){const n={};n.database=_0(this.serializer),n.removeTarget=e,this.Q_(n)}}class D5 extends dA{constructor(e,n,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,c),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=U6(e.writeResults,e.commitTime),i=yi(e.commitTime);return this.listener.ra(i,n)}ia(){const e={};e.database=_0(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>z6(this.serializer,i))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{}class O5 extends M5{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.zo(e,y0(n,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(me.UNKNOWN,l.toString())})}Yo(e,n,i,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,y0(n,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(me.UNKNOWN,c.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class P5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ns(n),this.ua=!1):we("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="RemoteStore";class V5{constructor(e,n,i,a,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(c=>{i.enqueueAndForget(async()=>{ro(this)&&(we(Wa,"Restarting streams for network reachability change."),await async function(f){const p=Ve(f);p.da.add(4),await Hu(p),p.Va.set("Unknown"),p.da.delete(4),await Xf(p)}(this))})}),this.Va=new P5(i,a)}}async function Xf(t){if(ro(t))for(const e of t.Aa)await e(!0)}async function Hu(t){for(const e of t.Aa)await e(!1)}function hA(t,e){const n=Ve(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),by(n)?_y(n):zl(n).N_()&&vy(n,e))}function yy(t,e){const n=Ve(t),i=zl(n);n.Ea.delete(e),i.N_()&&fA(n,e),n.Ea.size===0&&(i.N_()?i.k_():ro(n)&&n.Va.set("Unknown"))}function vy(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zl(t).Z_(e)}function fA(t,e){t.ma.Ke(e),zl(t).X_(e)}function _y(t){t.ma=new I6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),zl(t).start(),t.Va.ca()}function by(t){return ro(t)&&!zl(t).O_()&&t.Ea.size>0}function ro(t){return Ve(t).da.size===0}function gA(t){t.ma=void 0}async function L5(t){t.Va.set("Online")}async function z5(t){t.Ea.forEach((e,n)=>{vy(t,e)})}async function U5(t,e){gA(t),by(t)?(t.Va.Pa(e),_y(t)):t.Va.set("Unknown")}async function B5(t,e,n){if(t.Va.set("Online"),e instanceof ZS&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ea.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ea.delete(d),a.ma.removeTarget(d))}(t,e)}catch(i){we(Wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await pf(t,i)}else if(e instanceof jh?t.ma.Xe(e):e instanceof WS?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Pe.min()))try{const i=await cA(t.localStore);n.compareTo(i)>=0&&await function(l,c){const d=l.ma.It(c);return d.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,p)=>{const y=l.Ea.get(f);if(!y)return;l.Ea.set(f,y.withResumeToken(yn.EMPTY_BYTE_STRING,y.snapshotVersion)),fA(l,f);const _=new Hs(y.target,f,p,y.sequenceNumber);vy(l,_)}),l.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){we(Wa,"Failed to raise snapshot:",i),await pf(t,i)}}async function pf(t,e,n){if(!Vl(e))throw e;t.da.add(1),await Hu(t),t.Va.set("Offline"),n||(n=()=>cA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{we(Wa,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Xf(t)})}function pA(t,e){return e().catch(n=>pf(t,n,e))}async function Qf(t){const e=Ve(t),n=na(e);let i=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:iy;for(;j5(e);)try{const a=await w5(e.localStore,i);if(a===null){e.Ia.length===0&&n.k_();break}i=a.batchId,H5(e,a)}catch(a){await pf(e,a)}mA(e)&&yA(e)}function j5(t){return ro(t)&&t.Ia.length<10}function H5(t,e){t.Ia.push(e);const n=na(t);n.N_()&&n.ea&&n.ta(e.mutations)}function mA(t){return ro(t)&&!na(t).O_()&&t.Ia.length>0}function yA(t){na(t).start()}async function q5(t){na(t).ia()}async function $5(t){const e=na(t);for(const n of t.Ia)e.ta(n.mutations)}async function F5(t,e,n){const i=t.Ia.shift(),a=uy.from(i,e,n);await pA(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Qf(t)}async function G5(t,e){e&&na(t).ea&&await async function(i,a){if(function(c){return N6(c)&&c!==me.ABORTED}(a.code)){const l=i.Ia.shift();na(i).L_(),await pA(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Qf(i)}}(t,e),mA(t)&&yA(t)}async function _x(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),we(Wa,"RemoteStore received new credentials");const i=ro(n);n.da.add(3),await Hu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Xf(n)}async function Y5(t,e){const n=Ve(t);e?(n.da.delete(2),await Xf(n)):e||(n.da.add(2),await Hu(n),n.Va.set("Unknown"))}function zl(t){return t.fa||(t.fa=function(n,i,a){const l=Ve(n);return l.oa(),new k5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:L5.bind(null,t),n_:z5.bind(null,t),i_:U5.bind(null,t),Y_:B5.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),by(t)?_y(t):t.Va.set("Unknown")):(await t.fa.stop(),gA(t))})),t.fa}function na(t){return t.ga||(t.ga=function(n,i,a){const l=Ve(n);return l.oa(),new D5(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:q5.bind(null,t),i_:G5.bind(null,t),na:$5.bind(null,t),ra:F5.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Qf(t)):(await t.ga.stop(),t.Ia.length>0&&(we(Wa,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n,i,a,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,l){const c=Date.now()+i,d=new Ey(e,n,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wy(t,e){if(ns("AsyncQueue",`${e}: ${t}`),Vl(t))return new xe(me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{static emptySet(e){return new yl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ce.comparator(n.key,i.key):(n,i)=>Ce.comparator(n.key,i.key),this.keyedMap=iu(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new yl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.pa=new St(Ce.comparator)}track(e){const n=e.doc.key,i=this.pa.get(n);i?e.type!==0&&i.type===3?this.pa=this.pa.insert(n,e):e.type===3&&i.type!==1?this.pa=this.pa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.pa=this.pa.remove(n):e.type===1&&i.type===2?this.pa=this.pa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,ya:i}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Il{constructor(e,n,i,a,l,c,d,f,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,a,l){const c=[];return n.forEach(d=>{c.push({type:0,doc:d})}),new Il(e,n,yl.emptySet(n),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class X5{constructor(){this.queries=Ex(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const a=Ve(n),l=a.queries;a.queries=Ex(),l.forEach((c,d)=>{for(const f of d.Sa)f.onError(i)})})(this,new xe(me.ABORTED,"Firestore shutting down"))}}function Ex(){return new no(t=>zS(t),Hf)}async function Q5(t,e){const n=Ve(t);let i=3;const a=e.query;let l=n.queries.get(a);l?!l.Da()&&e.va()&&(i=2):(l=new K5,i=e.va()?0:1);try{switch(i){case 0:l.ba=await n.onListen(a,!0);break;case 1:l.ba=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=wy(c,`Initialization of query '${al(e.query)}' failed`);return void e.onError(d)}n.queries.set(a,l),l.Sa.push(e),e.Fa(n.onlineState),l.ba&&e.Ma(l.ba)&&xy(n)}async function W5(t,e){const n=Ve(t),i=e.query;let a=3;const l=n.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.va()?0:1:!l.Da()&&e.va()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Z5(t,e){const n=Ve(t);let i=!1;for(const a of e){const l=a.query,c=n.queries.get(l);if(c){for(const d of c.Sa)d.Ma(a)&&(i=!0);c.ba=a}}i&&xy(n)}function J5(t,e,n){const i=Ve(t),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(n);i.queries.delete(e)}function xy(t){t.Ca.forEach(e=>{e.next()})}var w0,wx;(wx=w0||(w0={})).xa="default",wx.Cache="cache";class eP{constructor(e,n,i){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Il(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const i=n!=="Offline";return(!this.options.Qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==w0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.key=e}}class _A{constructor(e){this.key=e}}class tP{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.Za=US(e),this.Xa=new yl(this.Za)}get eu(){return this.Ha}tu(e,n){const i=n?n.nu:new bx,a=n?n.Xa:this.Xa;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,_)=>{const b=a.get(y),x=qf(this.query,_)?_:null,R=!!b&&this.mutatedKeys.has(b.key),D=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let k=!1;b&&x?b.data.isEqual(x.data)?R!==D&&(i.track({type:3,doc:x}),k=!0):this.ru(b,x)||(i.track({type:2,doc:x}),k=!0,(f&&this.Za(x,f)>0||p&&this.Za(x,p)<0)&&(d=!0)):!b&&x?(i.track({type:0,doc:x}),k=!0):b&&!x&&(i.track({type:1,doc:b}),k=!0,(f||p)&&(d=!0)),k&&(x?(c=c.add(x),l=D?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:c,nu:i,Cs:d,mutatedKeys:l}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const c=e.nu.wa();c.sort((y,_)=>function(x,R){const D=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:k})}};return D(x)-D(R)}(y.type,_.type)||this.Za(y.doc,_.doc)),this.iu(i),a=a!=null&&a;const d=n&&!a?this.su():[],f=this.Ya.size===0&&this.current&&!a?1:0,p=f!==this.Ja;return this.Ja=f,c.length!==0||p?{snapshot:new Il(this.query,e.Xa,l,c,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:d}:{ou:d}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new bx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const n=[];return e.forEach(i=>{this.Ya.has(i)||n.push(new _A(i))}),this.Ya.forEach(i=>{e.has(i)||n.push(new vA(i))}),n}au(e){this.Ha=e.$s,this.Ya=Xe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Il.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ty="SyncEngine";class nP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class rP{constructor(e){this.key=e,this.cu=!1}}class iP{constructor(e,n,i,a,l,c){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.lu={},this.hu=new no(d=>zS(d),Hf),this.Pu=new Map,this.Tu=new Set,this.Iu=new St(Ce.comparator),this.Eu=new Map,this.du=new fy,this.Au={},this.Ru=new Map,this.Vu=Cl.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function sP(t,e,n=!0){const i=SA(t);let a;const l=i.hu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await bA(i,e,n,!0),a}async function aP(t,e){const n=SA(t);await bA(n,e,!0,!1)}async function bA(t,e,n,i){const a=await x5(t.localStore,mi(e)),l=a.targetId,c=t.sharedClientState.addLocalQueryTarget(l,n);let d;return i&&(d=await oP(t,e,l,c==="current",a.resumeToken)),t.isPrimaryClient&&n&&hA(t.remoteStore,a),d}async function oP(t,e,n,i,a){t.fu=(_,b,x)=>async function(D,k,U,H){let G=k.view.tu(U);G.Cs&&(G=await gx(D.localStore,k.query,!1).then(({documents:I})=>k.view.tu(I,G)));const j=H&&H.targetChanges.get(k.targetId),Q=H&&H.targetMismatches.get(k.targetId)!=null,Y=k.view.applyChanges(G,D.isPrimaryClient,j,Q);return Tx(D,k.targetId,Y.ou),Y.snapshot}(t,_,b,x);const l=await gx(t.localStore,e,!0),c=new tP(e,l.$s),d=c.tu(l.documents),f=ju.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),p=c.applyChanges(d,t.isPrimaryClient,f);Tx(t,n,p.ou);const y=new nP(e,n,c);return t.hu.set(e,y),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),p.snapshot}async function lP(t,e,n){const i=Ve(t),a=i.hu.get(e),l=i.Pu.get(a.targetId);if(l.length>1)return i.Pu.set(a.targetId,l.filter(c=>!Hf(c,e))),void i.hu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await b0(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),n&&yy(i.remoteStore,a.targetId),x0(i,a.targetId)}).catch(Pl)):(x0(i,a.targetId),await b0(i.localStore,a.targetId,!0))}async function cP(t,e){const n=Ve(t),i=n.hu.get(e),a=n.Pu.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),yy(n.remoteStore,i.targetId))}async function uP(t,e,n){const i=yP(t);try{const a=await function(c,d){const f=Ve(c),p=_t.now(),y=d.reduce((x,R)=>x.add(R.key),Xe());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>{let R=rs(),D=Xe();return f.Bs.getEntries(x,y).next(k=>{R=k,R.forEach((U,H)=>{H.isValidDocument()||(D=D.add(U))})}).next(()=>f.localDocuments.getOverlayedDocuments(x,R)).next(k=>{_=k;const U=[];for(const H of d){const G=x6(H,_.get(H.key).overlayedDocument);G!=null&&U.push(new sa(H.key,G,CS(G.value.mapValue),ar.exists(!0)))}return f.mutationQueue.addMutationBatch(x,p,U,d)}).next(k=>{b=k;const U=k.applyToLocalDocumentSet(_,D);return f.documentOverlayCache.saveOverlays(x,k.batchId,U)})}).then(()=>({batchId:b.batchId,changes:jS(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,f){let p=c.Au[c.currentUser.toKey()];p||(p=new St(He)),p=p.insert(d,f),c.Au[c.currentUser.toKey()]=p}(i,a.batchId,n),await qu(i,a.changes),await Qf(i.remoteStore)}catch(a){const l=wy(a,"Failed to persist write");n.reject(l)}}async function EA(t,e){const n=Ve(t);try{const i=await b5(n.localStore,e);e.targetChanges.forEach((a,l)=>{const c=n.Eu.get(l);c&&(lt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.cu=!0:a.modifiedDocuments.size>0?lt(c.cu,14607):a.removedDocuments.size>0&&(lt(c.cu,42227),c.cu=!1))}),await qu(n,i,e)}catch(i){await Pl(i)}}function xx(t,e,n){const i=Ve(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.hu.forEach((l,c)=>{const d=c.view.Fa(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const f=Ve(c);f.onlineState=d;let p=!1;f.queries.forEach((y,_)=>{for(const b of _.Sa)b.Fa(d)&&(p=!0)}),p&&xy(f)}(i.eventManager,e),a.length&&i.lu.Y_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dP(t,e,n){const i=Ve(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new St(Ce.comparator);c=c.insert(l,xn.newNoDocument(l,Pe.min()));const d=Xe().add(l),f=new Yf(Pe.min(),new Map,new St(He),c,d);await EA(i,f),i.Iu=i.Iu.remove(l),i.Eu.delete(e),Sy(i)}else await b0(i.localStore,e,!1).then(()=>x0(i,e,n)).catch(Pl)}async function hP(t,e){const n=Ve(t),i=e.batch.batchId;try{const a=await _5(n.localStore,e);xA(n,i,null),wA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await qu(n,a)}catch(a){await Pl(a)}}async function fP(t,e,n){const i=Ve(t);try{const a=await function(c,d){const f=Ve(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,d).next(_=>(lt(_!==null,37113),y=_.keys(),f.mutationQueue.removeMutationBatch(p,_))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(i.localStore,e);xA(i,e,n),wA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await qu(i,a)}catch(a){await Pl(a)}}function wA(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function xA(t,e,n){const i=Ve(t);let a=i.Au[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(n?l.reject(n):l.resolve(),a=a.remove(e)),i.Au[i.currentUser.toKey()]=a}}function x0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Pu.get(e))t.hu.delete(i),n&&t.lu.gu(i,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(i=>{t.du.containsKey(i)||TA(t,i)})}function TA(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(yy(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Sy(t))}function Tx(t,e,n){for(const i of n)i instanceof vA?(t.du.addReference(i.key,e),gP(t,i)):i instanceof _A?(we(Ty,"Document no longer in limbo: "+i.key),t.du.removeReference(i.key,e),t.du.containsKey(i.key)||TA(t,i.key)):Me(19791,{pu:i})}function gP(t,e){const n=e.key,i=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(i)||(we(Ty,"New document in limbo: "+n),t.Tu.add(i),Sy(t))}function Sy(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new Ce(vt.fromString(e)),i=t.Vu.next();t.Eu.set(i,new rP(n)),t.Iu=t.Iu.insert(n,i),hA(t.remoteStore,new Hs(mi(VS(n.path)),i,"TargetPurposeLimboResolution",Uf.le))}}async function qu(t,e,n){const i=Ve(t),a=[],l=[],c=[];i.hu.isEmpty()||(i.hu.forEach((d,f)=>{c.push(i.fu(f,e,n).then(p=>{var y;if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:(y=n?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(p){a.push(p);const _=py.Rs(f.targetId,p);l.push(_)}}))}),await Promise.all(c),i.lu.Y_(a),await async function(f,p){const y=Ve(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ye.forEach(p,b=>ye.forEach(b.ds,x=>y.persistence.referenceDelegate.addReference(_,b.targetId,x)).next(()=>ye.forEach(b.As,x=>y.persistence.referenceDelegate.removeReference(_,b.targetId,x)))))}catch(_){if(!Vl(_))throw _;we(my,"Failed to update sequence numbers: "+_)}for(const _ of p){const b=_.targetId;if(!_.fromCache){const x=y.xs.get(b),R=x.snapshotVersion,D=x.withLastLimboFreeSnapshotVersion(R);y.xs=y.xs.insert(b,D)}}}(i.localStore,l))}async function pP(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){we(Ty,"User change. New user:",e.toKey());const i=await lA(n.localStore,e);n.currentUser=e,function(l,c){l.Ru.forEach(d=>{d.forEach(f=>{f.reject(new xe(me.CANCELLED,c))})}),l.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await qu(n,i.ks)}}function mP(t,e){const n=Ve(t),i=n.Eu.get(e);if(i&&i.cu)return Xe().add(i.key);{let a=Xe();const l=n.Pu.get(e);if(!l)return a;for(const c of l){const d=n.hu.get(c);a=a.unionWith(d.view.eu)}return a}}function SA(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dP.bind(null,e),e.lu.Y_=Z5.bind(null,e.eventManager),e.lu.gu=J5.bind(null,e.eventManager),e}function yP(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fP.bind(null,e),e}class mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return v5(this.persistence,new p5,e.initialUser,this.serializer)}Su(e){return new oA(gy.fi,this.serializer)}bu(e){return new S5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mf.provider={build:()=>new mf};class vP extends mf{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){lt(this.persistence.referenceDelegate instanceof gf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new e5(i,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new oA(i=>gf.fi(i,n),this.serializer)}}class T0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pP.bind(null,this.syncEngine),await Y5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new X5}()}createDatastore(e){const n=Kf(e.databaseInfo.databaseId),i=function(l){return new I5(l)}(e.databaseInfo);return function(l,c,d,f){return new O5(l,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,a,l,c,d){return new V5(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,n=>xx(this.syncEngine,n,0),function(){return yx.C()?new yx:new A5}())}createSyncEngine(e,n){return function(a,l,c,d,f,p,y){const _=new iP(a,l,c,d,f,p);return y&&(_.mu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const l=Ve(a);we(Wa,"RemoteStore shutting down."),l.da.add(5),await Hu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}T0.provider={build:()=>new T0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="FirestoreClient";class bP{constructor(e,n,i,a,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=wn.UNAUTHENTICATED,this.clientId=_S.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{we(ra,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(we(ra,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=wy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Pm(t,e){t.asyncQueue.verifyOperationInProgress(),we(ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async a=>{i.isEqual(a)||(await lA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EP(t);we(ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>_x(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>_x(e.remoteStore,a)),t._onlineComponents=e}async function EP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){we(ra,"Using user provided OfflineComponentProvider");try{await Pm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===me.FAILED_PRECONDITION||a.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Sl("Error using user provided cache. Falling back to memory cache: "+n),await Pm(t,new mf)}}else we(ra,"Using default OfflineComponentProvider"),await Pm(t,new vP(void 0));return t._offlineComponents}async function AA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(we(ra,"Using user provided OnlineComponentProvider"),await Sx(t,t._uninitializedComponentsProvider._online)):(we(ra,"Using default OnlineComponentProvider"),await Sx(t,new T0))),t._onlineComponents}function wP(t){return AA(t).then(e=>e.syncEngine)}async function xP(t){const e=await AA(t),n=e.eventManager;return n.onListen=sP.bind(null,e.syncEngine),n.onUnlisten=lP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cP.bind(null,e.syncEngine),n}function TP(t,e,n={}){const i=new Ks;return t.asyncQueue.enqueueAndForget(async()=>function(l,c,d,f,p){const y=new _P({next:b=>{y.xu(),c.enqueueAndForget(()=>W5(l,_)),b.fromCache&&f.source==="server"?p.reject(new xe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),_=new eP(d,y,{includeMetadataChanges:!0,Qa:!0});return Q5(l,_)}(await xP(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t,e,n){if(!n)throw new xe(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SP(t,e,n,i){if(e===!0&&i===!0)throw new xe(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rx(t){if(!Ce.isDocumentKey(t))throw new xe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nx(t){if(Ce.isDocumentKey(t))throw new xe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Me(12329,{type:typeof t})}function Za(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wf(t);throw new xe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="firestore.googleapis.com",Cx=!0;class Ix{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CA,this.ssl=Cx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Cx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Z6)throw new xe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RA((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new xe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ix({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ix(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new CO;switch(i.type){case"firstParty":return new MO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Ax.get(n);i&&(we("ComponentProvider","Removing Datastore"),Ax.delete(n),i.terminate())}(this),Promise.resolve()}}function AP(t,e,n,i={}){var a;t=Za(t,Zf);const l=to(e),c=t._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;l&&(Z0(`https://${f}`),J0("Firestore",!0)),c.host!==CA&&c.host!==f&&Sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:l,emulatorOptions:i});if(!Ka(p,d)&&(t._setSettings(p),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=wn.MOCK_USER;else{y=eM(i.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new xe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new wn(b)}t._authCredentials=new IO(new yS(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new io(this.firestore,e,this._query)}}class or{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new or(this.firestore,e,this._key)}}class Xs extends io{constructor(e,n,i){super(e,n,VS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new or(this.firestore,null,new Ce(e))}withConverter(e){return new Xs(this.firestore,e,this._path)}}function Ay(t,e,...n){if(t=Dt(t),NA("collection","path",e),t instanceof Zf){const i=vt.fromString(e,...n);return Nx(i),new Xs(t,null,i)}{if(!(t instanceof or||t instanceof Xs))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return Nx(i),new Xs(t.firestore,null,i)}}function Ul(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=_S.newId()),NA("doc","path",e),t instanceof Zf){const i=vt.fromString(e,...n);return Rx(i),new or(t,null,new Ce(i))}{if(!(t instanceof or||t instanceof Xs))throw new xe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(vt.fromString(e,...n));return Rx(i),new or(t.firestore,t instanceof Xs?t.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="AsyncQueue";class Dx{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new uA(this,"async_queue_retry"),this.rc=()=>{const i=Om();i&&we(kx,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=e;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Ks;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Vl(e))throw e;we(kx,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(i=>{throw this.Xu=i,this.ec=!1,ns("INTERNAL UNHANDLED ERROR: ",Mx(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=n,n}enqueueAfterDelay(e,n,i){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const a=Ey.createAndSchedule(this,e,n,i,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&Me(47125,{cc:Mx(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Mx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class $u extends Zf{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new Dx,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dx(e),this._firestoreClient=void 0,await e}}}function RP(t,e){const n=typeof t=="object"?t:ny(),i=typeof t=="string"?t:lf,a=zf(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=nS("firestore");l&&AP(a,...l)}return a}function Ry(t){if(t._terminated)throw new xe(me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NP(t),t._firestoreClient}function NP(t){var e,n,i;const a=t._freezeSettings(),l=function(d,f,p,y){return new KO(d,f,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,RA(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new bP(t._authCredentials,t._appCheckCredentials,t._queue,l,t._componentsProvider&&function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kl(yn.fromBase64String(e))}catch(n){throw new xe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kl(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=/^__.*__$/;class IP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new sa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(e,this.data,n,this.fieldTransforms)}}class IA{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new sa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ic:t})}}class ky{constructor(e,n,i,a,l,c){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new ky(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Vc(e),a}mc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.dc({path:i,Rc:!1});return a.Ec(),a}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return yf(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(kA(this.Ic)&&CP.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class kP{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Kf(e)}bc(e,n,i,a=!1){return new ky({Ic:e,methodName:n,wc:i,path:mn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dy(t){const e=t._freezeSettings(),n=Kf(t._databaseId);return new kP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DA(t,e,n,i,a,l={}){const c=t.bc(l.merge||l.mergeFields?2:0,e,n,a);My("Data must be an object, but it was:",c,i);const d=MA(i,c);let f,p;if(l.merge)f=new sr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const b=S0(e,_,n);if(!c.contains(b))throw new xe(me.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);PA(y,b)||y.push(b)}f=new sr(y),p=c.fieldTransforms.filter(_=>f.covers(_.field))}else f=null,p=c.fieldTransforms;return new IP(new Hn(d),f,p)}class eg extends Ny{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eg}}function DP(t,e,n,i){const a=t.bc(1,e,n);My("Data must be an object, but it was:",a,i);const l=[],c=Hn.empty();ia(i,(f,p)=>{const y=Oy(e,f,n);p=Dt(p);const _=a.mc(y);if(p instanceof eg)l.push(y);else{const b=Fu(p,_);b!=null&&(l.push(y),c.set(y,b))}});const d=new sr(l);return new IA(c,d,a.fieldTransforms)}function MP(t,e,n,i,a,l){const c=t.bc(1,e,n),d=[S0(e,i,n)],f=[a];if(l.length%2!=0)throw new xe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(S0(e,l[b])),f.push(l[b+1]);const p=[],y=Hn.empty();for(let b=d.length-1;b>=0;--b)if(!PA(p,d[b])){const x=d[b];let R=f[b];R=Dt(R);const D=c.mc(x);if(R instanceof eg)p.push(x);else{const k=Fu(R,D);k!=null&&(p.push(x),y.set(x,k))}}const _=new sr(p);return new IA(y,_,c.fieldTransforms)}function OP(t,e,n,i=!1){return Fu(n,t.bc(i?4:3,e))}function Fu(t,e){if(OA(t=Dt(t)))return My("Unsupported field value:",e,t),MA(t,e);if(t instanceof Ny)return function(i,a){if(!kA(a.Ic))throw a.gc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let f=Fu(d,a.fc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}}(t,e)}return function(i,a){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return y6(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=_t.fromDate(i);return{timestampValue:ff(a.serializer,l)}}if(i instanceof _t){const l=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ff(a.serializer,l)}}if(i instanceof Cy)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kl)return{bytesValue:JS(a.serializer,i._byteString)};if(i instanceof or){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.gc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:hy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Iy)return function(c,d){return{mapValue:{fields:{[RS]:{stringValue:NS},[cf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.gc("VectorValues must only contain numeric values.");return cy(d.serializer,p)})}}}}}}(i,a);throw a.gc(`Unsupported field value: ${Wf(i)}`)}(t,e)}function MA(t,e){const n={};return ES(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(i,a)=>{const l=Fu(a,e.Ac(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function OA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Cy||t instanceof kl||t instanceof or||t instanceof Ny||t instanceof Iy)}function My(t,e,n){if(!OA(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const i=Wf(n);throw i==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+i)}}function S0(t,e,n){if((e=Dt(e))instanceof Jf)return e._internalPath;if(typeof e=="string")return Oy(t,e);throw yf("Field path arguments must be of type string or ",t,!1,void 0,n)}const PP=new RegExp("[~\\*/\\[\\]]");function Oy(t,e,n){if(e.search(PP)>=0)throw yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jf(...e.split("."))._internalPath}catch{throw yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yf(t,e,n,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${i}`),c&&(f+=` in document ${a}`),f+=")"),new xe(me.INVALID_ARGUMENT,d+t+f)}function PA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,i,a,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new or(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VP extends VA{data(){return super.data()}}function tg(t,e){return typeof e=="string"?Oy(t,e):e instanceof Jf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Py{}class LA extends Py{}function zP(t,e,...n){let i=[];e instanceof Py&&i.push(e),i=i.concat(n),function(l){const c=l.filter(f=>f instanceof Vy).length,d=l.filter(f=>f instanceof ng).length;if(c>1||c>0&&d>0)throw new xe(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)t=a._apply(t);return t}class ng extends LA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ng(e,n,i)}_apply(e){const n=this._parse(e);return zA(e._query,n),new io(e.firestore,e.converter,g0(e._query,n))}_parse(e){const n=Dy(e.firestore);return function(l,c,d,f,p,y,_){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new xe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Px(_,y);const R=[];for(const D of _)R.push(Ox(f,l,D));b={arrayValue:{values:R}}}else b=Ox(f,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Px(_,y),b=OP(d,c,_,y==="in"||y==="not-in");return Ft.create(p,y,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function UP(t,e,n){const i=e,a=tg("where",t);return ng._create(a,i,n)}class Vy extends Py{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const f of d)zA(c,f),c=g0(c,f)}(e._query,n),new io(e.firestore,e.converter,g0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ly extends LA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ly(e,n)}_apply(e){const n=function(a,l,c){if(a.startAt!==null)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nu(l,c)}(e._query,this._field,this._direction);return new io(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Ll(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function BP(t,e="asc"){const n=e,i=tg("orderBy",t);return Ly._create(i,n)}function Ox(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new xe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LS(e)&&n.indexOf("/")!==-1)throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(vt.fromString(n));if(!Ce.isDocumentKey(i))throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Xw(t,new Ce(i))}if(n instanceof or)return Xw(t,n._key);throw new xe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(n)}.`)}function Px(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zA(t,e){const n=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jP{convertValue(e,n="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ia(e,(a,l)=>{i[a]=this.convertValue(l,n)}),i}convertVectorValue(e){var n,i,a;const l=(a=(i=(n=e.fields)===null||n===void 0?void 0:n[cf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>Vt(c.doubleValue));return new Iy(l)}convertGeoPoint(e){return new Cy(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=jf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=Js(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=vt.fromString(e);lt(sA(i),9688,{name:e});const a=new Au(i.get(1),i.get(3)),l=new Ce(i.popFirst(5));return a.isEqual(n)||ns(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HP extends VA{constructor(e,n,i,a,l,c){super(e,n,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(tg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Hh extends HP{data(e={}){return super.data(e)}}class qP{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Ih(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Hh(this._firestore,this._userDataWriter,i.key,i,new Ih(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const f=new Hh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ih(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const f=new Hh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ih(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:$P(d.type),doc:f,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $P(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:t})}}class FP extends jP{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new or(this.firestore,null,n)}}function zy(t){t=Za(t,io);const e=Za(t.firestore,$u),n=Ry(e),i=new FP(e);return LP(t._query),TP(n,t._query).then(a=>new qP(e,i,t,a))}function Uy(t,e,n){t=Za(t,or);const i=Za(t.firestore,$u),a=UA(t.converter,e,n);return By(i,[DA(Dy(i),"setDoc",t._key,a,t.converter!==null,n).toMutation(t._key,ar.none())])}function GP(t){return By(Za(t.firestore,$u),[new Gf(t._key,ar.none())])}function By(t,e){return function(i,a){const l=new Ks;return i.asyncQueue.enqueueAndForget(async()=>uP(await wP(i),a,l)),l.promise}(Ry(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dy(e)}set(e,n,i){this._verifyNotCommitted();const a=Vm(e,this._firestore),l=UA(a.converter,n,i),c=DA(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,ar.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const l=Vm(e,this._firestore);let c;return c=typeof(n=Dt(n))=="string"||n instanceof Jf?MP(this._dataReader,"WriteBatch.update",l._key,n,i,a):DP(this._dataReader,"WriteBatch.update",l._key,n),this._mutations.push(c.toMutation(l._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vm(e,this._firestore);return this._mutations=this._mutations.concat(new Gf(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vm(t,e){if((t=Dt(t)).firestore!==e)throw new xe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){return Ry(t=Za(t,$u)),new YP(t,e=>By(t,e))}(function(e,n=!0){(function(a){Ol=a})(Ml),Xa(new Ws("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new $u(new kO(i.getProvider("auth-internal")),new OO(c,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:n},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),pi(Lw,zw,e),pi(Lw,zw,"esm2017")})();function jy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function jA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KP=jA,HA=new zu("auth","Firebase",jA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new ey("@firebase/auth");function XP(t,...e){vf.logLevel<=Ke.WARN&&vf.warn(`Auth (${Ml}): ${t}`,...e)}function qh(t,...e){vf.logLevel<=Ke.ERROR&&vf.error(`Auth (${Ml}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,...e){throw Hy(t,...e)}function vi(t,...e){return Hy(t,...e)}function qA(t,e,n){const i=Object.assign(Object.assign({},KP()),{[e]:n});return new zu("auth","Firebase",i).create(e,{appName:t.name})}function Zi(t){return qA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return HA.create(t,...e)}function De(t,e,...n){if(!t)throw Hy(e,...n)}function Qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qh(e),new Error(e)}function is(t,e){t||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QP(){return Vx()==="http:"||Vx()==="https:"}function Vx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QP()||aM()||"connection"in navigator)?navigator.onLine:!0}function ZP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.shortDelay=e,this.longDelay=n,is(n>e,"Short delay should be less than long delay!"),this.isMobile=rM()||oM()}get(){return WP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t,e){is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tV=new Gu(3e4,6e4);function aa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oa(t,e,n,i,a={}){return FA(t,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=Uu(Object.assign({key:t.config.apiKey},c)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},l);return sM()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&to(t.emulatorConfig.host)&&(p.credentials="include"),$A.fetch()(await GA(t,t.config.apiHost,n,d),p)})}async function FA(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},JP),e);try{const a=new rV(t),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw kh(t,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(t,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw kh(t,"email-already-in-use",c);if(f==="USER_DISABLED")throw kh(t,"user-disabled",c);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qA(t,y,p);Hr(t,y)}}catch(a){if(a instanceof wi)throw a;Hr(t,"network-request-failed",{message:String(a)})}}async function Yu(t,e,n,i,a={}){const l=await oa(t,e,n,i,a);return"mfaPendingCredential"in l&&Hr(t,"multi-factor-auth-required",{_serverResponse:l}),l}async function GA(t,e,n,i){const a=`${e}${n}?${i}`,l=t,c=l.config.emulator?qy(t.config,a):`${t.config.apiScheme}://${a}`;return eV.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function nV(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(vi(this.auth,"network-request-failed")),tV.get())})}}function kh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=vi(t,e,i);return a.customData._tokenResponse=n,a}function Lx(t){return t!==void 0&&t.enterprise!==void 0}class iV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nV(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sV(t,e){return oa(t,"GET","/v2/recaptchaConfig",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aV(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function _f(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oV(t,e=!1){const n=Dt(t),i=await n.getIdToken(e),a=$y(i);De(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:du(Lm(a.auth_time)),issuedAtTime:du(Lm(a.iat)),expirationTime:du(Lm(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Lm(t){return Number(t)*1e3}function $y(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const a=eS(n);return a?JSON.parse(a):(qh("Failed to decode base64 JWT payload"),null)}catch(a){return qh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function zx(t){const e=$y(t);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof wi&&lV(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function lV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(t){var e;const n=t.auth,i=await t.getIdToken(),a=await ku(t,_f(n,{idToken:i}));De(a?.users.length,n,"internal-error");const l=a.users[0];t._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?YA(l.providerUserInfo):[],d=dV(t.providerData,c),f=t.isAnonymous,p=!(t.email&&l.passwordHash)&&!d?.length,y=f?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new R0(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(t,_)}async function uV(t){const e=Dt(t);await bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dV(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function YA(t){return t.map(e=>{var{providerId:n}=e,i=jy(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e){const n=await FA(t,{},async()=>{const i=Uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=t.config,c=await GA(t,a,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return t.emulatorConfig&&to(t.emulatorConfig.host)&&(f.credentials="include"),$A.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fV(t,e){return oa(t,"POST","/v2/accounts:revokeToken",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=zx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:l}=await hV(e,n);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:l}=n,c=new vl;return i&&(De(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t,e){De(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:i,stsTokenManager:a}=e,l=jy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new R0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await ku(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oV(this,e)}reload(){return uV(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await bf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await ku(this,aV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,a,l,c,d,f,p,y;const _=(i=n.displayName)!==null&&i!==void 0?i:void 0,b=(a=n.email)!==null&&a!==void 0?a:void 0,x=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,R=(c=n.photoURL)!==null&&c!==void 0?c:void 0,D=(d=n.tenantId)!==null&&d!==void 0?d:void 0,k=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,U=(p=n.createdAt)!==null&&p!==void 0?p:void 0,H=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:G,emailVerified:j,isAnonymous:Q,providerData:Y,stsTokenManager:I}=n;De(G&&I,e,"internal-error");const T=vl.fromJSON(this.name,I);De(typeof G=="string",e,"internal-error"),Ds(_,e.name),Ds(b,e.name),De(typeof j=="boolean",e,"internal-error"),De(typeof Q=="boolean",e,"internal-error"),Ds(x,e.name),Ds(R,e.name),Ds(D,e.name),Ds(k,e.name),Ds(U,e.name),Ds(H,e.name);const A=new Ur({uid:G,auth:e,email:b,emailVerified:j,displayName:_,isAnonymous:Q,photoURL:R,phoneNumber:x,tenantId:D,stsTokenManager:T,createdAt:U,lastLoginAt:H});return Y&&Array.isArray(Y)&&(A.providerData=Y.map(L=>Object.assign({},L))),k&&(A._redirectEventId=k),A}static async _fromIdTokenResponse(e,n,i=!1){const a=new vl;a.updateFromServerResponse(n);const l=new Ur({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await bf(l),l}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?YA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new vl;d.updateFromIdToken(i);const f=new Ur({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new R0(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new Map;function Wi(t){is(t instanceof Function,"Expected a class definition");let e=Ux.get(t);return e?(is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ux.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KA.type="NONE";const Bx=KA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t,e,n){return`firebase:${t}:${e}:${n}`}class _l{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=$h(this.userKey,a.apiKey,l),this.fullPersistenceKey=$h("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _f(this.auth,{idToken:e}).catch(()=>{});return n?Ur._fromGetAccountInfoResponse(this.auth,n,e):null}return Ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new _l(Wi(Bx),e,i);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Wi(Bx);const c=$h(i,e.config.apiKey,e.name);let d=null;for(const p of n)try{const y=await p._get(c);if(y){let _;if(typeof y=="string"){const b=await _f(e,{idToken:y}).catch(()=>{});if(!b)break;_=await Ur._fromGetAccountInfoResponse(e,b,y)}else _=Ur._fromJSON(e,y);p!==l&&(d=_),l=p;break}}catch{}const f=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new _l(l,e,i):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new _l(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e2(e))return"Blackberry";if(t2(e))return"Webos";if(QA(e))return"Safari";if((e.includes("chrome/")||WA(e))&&!e.includes("edge/"))return"Chrome";if(JA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function XA(t=Sn()){return/firefox\//i.test(t)}function QA(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WA(t=Sn()){return/crios\//i.test(t)}function ZA(t=Sn()){return/iemobile/i.test(t)}function JA(t=Sn()){return/android/i.test(t)}function e2(t=Sn()){return/blackberry/i.test(t)}function t2(t=Sn()){return/webos/i.test(t)}function Fy(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gV(t=Sn()){var e;return Fy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pV(){return lM()&&document.documentMode===10}function n2(t=Sn()){return Fy(t)||JA(t)||t2(t)||e2(t)||/windows phone/i.test(t)||ZA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t,e=[]){let n;switch(t){case"Browser":n=jx(Sn());break;case"Worker":n=`${jx(Sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ml}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e={}){return oa(t,"GET","/v2/passwordPolicy",aa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=6;class _V{constructor(e){var n,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:vV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,a,l,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hx(this),this.idTokenSubscription=new Hx(this),this.beforeStateQueue=new mV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=HA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await _l.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _f(this,{idToken:e}),i=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ir(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(a=f.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Zi(this));const n=e?Dt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yV(this),n=new _V(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await fV(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await _l.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,a);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&XP(`Error while retrieving App Check token: ${n.error}`),n?.token}}function so(t){return Dt(t)}class Hx{constructor(e){this.auth=e,this.observer=null,this.addObserver=mM(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EV(t){rg=t}function i2(t){return rg.loadJS(t)}function wV(){return rg.recaptchaEnterpriseScript}function xV(){return rg.gapiScript}function TV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SV{constructor(){this.enterprise=new AV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class AV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RV="recaptcha-enterprise",s2="NO_RECAPTCHA";class NV{constructor(e){this.type=RV,this.auth=so(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{sV(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new iV(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(f=>{d(f)})})}function a(l,c,d){const f=window.grecaptcha;Lx(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(s2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SV().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!n&&Lx(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=wV();f.length!==0&&(f+=d),i2(f).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function qx(t,e,n,i=!1,a=!1){const l=new NV(t);let c;if(a)c=s2;else try{c=await l.verify(n)}catch{c=await l.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function N0(t,e,n,i,a){var l;if(!((l=t._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await qx(t,e,n,n==="getOobCode");return i(t,c)}else return i(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await qx(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t,e){const n=zf(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Ka(l,e??{}))return a;Hr(a,"already-initialized")}return n.initialize({options:e})}function IV(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Wi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function kV(t,e,n){const i=so(t);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=a2(e),{host:c,port:d}=DV(e),f=d===null?"":`:${d}`,p={url:`${l}//${c}${f}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Ka(p,i.config.emulator)&&Ka(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,to(c)?(Z0(`${l}//${c}${f}`),J0("Auth",!0)):MV()}function a2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DV(t){const e=a2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:$x(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:$x(c)}}}function $x(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function OV(t,e){return oa(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t,e){return Yu(t,"POST","/v1/accounts:signInWithPassword",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(t,e){return Yu(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}async function LV(t,e){return Yu(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends Gy{constructor(e,n,i,a=null){super("password",i),this._email=e,this._password=n,this._tenantId=a}static _fromEmailAndPassword(e,n){return new Du(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Du(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N0(e,n,"signInWithPassword",PV);case"emailLink":return VV(e,{email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N0(e,i,"signUpPassword",OV);case"emailLink":return LV(e,{idToken:n,email:this._email,oobCode:this._password});default:Hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Yu(t,"POST","/v1/accounts:signInWithIdp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="http://localhost";class Ja extends Gy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=n,l=jy(n,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Ja(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,bl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:zV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BV(t){const e=tu(nu(t)).link,n=e?tu(nu(e)).deep_link_id:null,i=tu(nu(t)).deep_link_id;return(i?tu(nu(i)).link:null)||i||n||e||t}class Yy{constructor(e){var n,i,a,l,c,d;const f=tu(nu(e)),p=(n=f.apiKey)!==null&&n!==void 0?n:null,y=(i=f.oobCode)!==null&&i!==void 0?i:null,_=UV((a=f.mode)!==null&&a!==void 0?a:null);De(p&&y&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=y,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=BV(e);try{return new Yy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,n){return Du._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Yy.parseLink(n);return De(i,"argument-error"),Du._fromEmailAndCode(e,i.code,i.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends o2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Ku{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ja._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Us.credential(n,i)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Ku{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Ku{constructor(){super("twitter.com")}static credential(e,n){return Ja._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return js.credential(n,i)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return Yu(t,"POST","/v1/accounts:signUp",aa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const l=await Ur._fromIdTokenResponse(e,i,a),c=Fx(i);return new eo({user:l,providerId:c,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=Fx(i);return new eo({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function Fx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends wi{constructor(e,n,i,a){var l;super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Ef.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new Ef(e,n,i,a)}}function l2(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ef._fromErrorAndOperation(t,l,e,i):l})}async function HV(t,e,n=!1){const i=await ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return eo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qV(t,e,n=!1){const{auth:i}=t;if(ir(i.app))return Promise.reject(Zi(i));const a="reauthenticate";try{const l=await ku(t,l2(i,a,e,t),n);De(l.idToken,i,"internal-error");const c=$y(l.idToken);De(c,i,"internal-error");const{sub:d}=c;return De(t.uid===d,i,"user-mismatch"),eo._forOperation(t,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Hr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(t,e,n=!1){if(ir(t.app))return Promise.reject(Zi(t));const i="signIn",a=await l2(t,i,e),l=await eo._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(l.user),l}async function $V(t,e){return c2(so(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t){const e=so(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FV(t,e,n){if(ir(t.app))return Promise.reject(Zi(t));const i=so(t),c=await N0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jV).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&u2(t),f}),d=await eo._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function GV(t,e,n){return ir(t.app)?Promise.reject(Zi(t)):$V(Dt(t),Bl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&u2(t),i})}function YV(t,e,n,i){return Dt(t).onIdTokenChanged(e,n,i)}function KV(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}function XV(t,e,n,i){return Dt(t).onAuthStateChanged(e,n,i)}function QV(t){return Dt(t).signOut()}const wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wf,"1"),this.storage.removeItem(wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=1e3,ZV=10;class h2 extends d2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!n&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);pV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ZV):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},WV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h2.type="LOCAL";const JV=h2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2 extends d2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}f2.type="SESSION";const g2=f2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new ig(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(n.origin,l)),f=await e9(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ig.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const p=Ky("",20);a.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(_){const b=_;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function n9(t){_i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function r9(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i9(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function s9(){return p2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="firebaseLocalStorageDb",a9=1,xf="firebaseLocalStorage",y2="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sg(t,e){return t.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function o9(){const t=indexedDB.deleteDatabase(m2);return new Xu(t).toPromise()}function C0(){const t=indexedDB.open(m2,a9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xf,{keyPath:y2})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xf)?e(i):(i.close(),await o9(),e(await C0()))})})}async function Gx(t,e,n){const i=sg(t,!0).put({[y2]:e,value:n});return new Xu(i).toPromise()}async function l9(t,e){const n=sg(t,!1).get(e),i=await new Xu(n).toPromise();return i===void 0?null:i.value}function Yx(t,e){const n=sg(t,!0).delete(e);return new Xu(n).toPromise()}const c9=800,u9=3;class v2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await C0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>u9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return p2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ig._getInstance(s9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await r9(),!this.activeServiceWorker)return;this.sender=new t9(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await C0();return await Gx(e,wf,"1"),await Yx(e,wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Gx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>l9(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=sg(a,!1).getAll();return new Xu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}v2.type="LOCAL";const d9=v2;new Gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(t,e){return e?Wi(e):(De(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends Gy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function f9(t){return c2(t.auth,new Xy(t),t.bypassAuthState)}function g9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),qV(n,new Xy(t),t.bypassAuthState)}async function p9(t){const{auth:e,user:n}=t;return De(n,e,"internal-error"),HV(n,new Xy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f9;case"linkViaPopup":case"linkViaRedirect":return p9;case"reauthViaPopup":case"reauthViaRedirect":return g9;default:Hr(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=new Gu(2e3,1e4);class dl extends _2{constructor(e,n,i,a,l){super(e,n,a,l),this.provider=i,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=Ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m9.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="pendingRedirect",Fh=new Map;class v9 extends _2{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const i=await _9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _9(t,e){const n=w9(e),i=E9(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function b9(t,e){Fh.set(t._key(),e)}function E9(t){return Wi(t._redirectPersistence)}function w9(t){return $h(y9,t.config.apiKey,t.name)}async function x9(t,e,n=!1){if(ir(t.app))return Promise.reject(Zi(t));const i=so(t),a=h9(i,e),c=await new v9(i,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=10*60*1e3;class S9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!b2(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(vi(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T9&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kx(e))}saveEventToCache(e){this.cachedEventUids.add(Kx(e)),this.lastProcessedEventTime=Date.now()}}function Kx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b2({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function A9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R9(t,e={}){return oa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C9=/^https?/;async function I9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await R9(t);for(const n of e)try{if(k9(n))return}catch{}Hr(t,"unauthorized-domain")}function k9(t){const e=A0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===i}if(!C9.test(n))return!1;if(N9.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=new Gu(3e4,6e4);function Xx(){const t=_i().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function M9(t){return new Promise((e,n)=>{var i,a,l;function c(){Xx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xx(),n(vi(t,"network-request-failed"))},timeout:D9.get()})}if(!((a=(i=_i().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=_i().gapi)===null||l===void 0)&&l.load)c();else{const d=TV("iframefcb");return _i()[d]=()=>{gapi.load?c():n(vi(t,"network-request-failed"))},i2(`${xV()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function O9(t){return Gh=Gh||M9(t),Gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=new Gu(5e3,15e3),V9="__/auth/iframe",L9="emulator/auth/iframe",z9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B9(t){const e=t.config;De(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qy(e,L9):`https://${t.config.authDomain}/${V9}`,i={apiKey:e.apiKey,appName:t.name,v:Ml},a=U9.get(t.config.apiHost);a&&(i.eid=a);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${Uu(i).slice(1)}`}async function j9(t){const e=await O9(t),n=_i().gapi;return De(n,t,"internal-error"),e.open({where:document.body,url:B9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z9,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=vi(t,"network-request-failed"),d=_i().setTimeout(()=>{l(c)},P9.get());function f(){_i().clearTimeout(d),a(i)}i.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q9=500,$9=600,F9="_blank",G9="http://localhost";class Qx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y9(t,e,n,i=q9,a=$9){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},H9),{width:i.toString(),height:a.toString(),top:l,left:c}),p=Sn().toLowerCase();n&&(d=WA(p)?F9:n),XA(p)&&(e=e||G9,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[x,R])=>`${b}${x}=${R},`,"");if(gV(p)&&d!=="_self")return K9(e||"",d),new Qx(null);const _=window.open(e||"",d,y);De(_,t,"popup-blocked");try{_.focus()}catch{}return new Qx(_)}function K9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9="__/auth/handler",Q9="emulator/auth/handler",W9=encodeURIComponent("fac");async function Wx(t,e,n,i,a,l){De(t.config.authDomain,t,"auth-domain-config-required"),De(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ml,eventId:a};if(e instanceof o2){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",pM(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(e instanceof Ku){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}t.tenantId&&(c.tid=t.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await t._getAppCheckToken(),p=f?`#${W9}=${encodeURIComponent(f)}`:"";return`${Z9(t)}?${Uu(d).slice(1)}${p}`}function Z9({config:t}){return t.emulator?qy(t,Q9):`https://${t.authDomain}/${X9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="webStorageSupport";class J9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=g2,this._completeRedirectFn=x9,this._overrideRedirectResult=b9}async _openPopup(e,n,i,a){var l;is((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Wx(e,n,i,A0(),a);return Y9(e,c,Ky())}async _openRedirect(e,n,i,a){await this._originValidation(e);const l=await Wx(e,n,i,A0(),a);return n9(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(is(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await j9(e),i=new S9(e);return n.register("authEvent",a=>(De(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zm,{type:zm},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[zm];c!==void 0&&n(!!c),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return n2()||QA()||Fy()}}const eL=J9;var Zx="@firebase/auth",Jx="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rL(t){Xa(new Ws("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r2(t)},p=new bV(i,a,l,f);return IV(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Xa(new Ws("auth-internal",e=>{const n=so(e.getProvider("auth").getImmediate());return(i=>new tL(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Zx,Jx,nL(t)),pi(Zx,Jx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=5*60,sL=iS("authIdTokenMaxAge")||iL;let e1=null;const aL=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>sL)return;const a=n?.token;e1!==a&&(e1=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function oL(t=ny()){const e=zf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CV(t,{popupRedirectResolver:eL,persistence:[d9,JV,g2]}),i=iS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=aL(l.toString());KV(n,c,()=>c(n.currentUser)),YV(n,d=>c(d))}}const a=tS("auth");return a&&kV(n,`http://${a}`),n}function lL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}EV({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const l=vi("internal-error");l.customData=a,n(l)},i.type="text/javascript",i.charset="UTF-8",lL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rL("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL="type.googleapis.com/google.protobuf.Int64Value",uL="type.googleapis.com/google.protobuf.UInt64Value";function E2(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Tf(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Tf(e));if(typeof t=="function"||typeof t=="object")return E2(t,e=>Tf(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Dl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case cL:case uL:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Dl(e)):typeof t=="function"||typeof t=="object"?E2(t,e=>Dl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $n extends wi{constructor(e,n,i){super(`${Qy}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,$n.prototype)}}function dL(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Sf(t,e){let n=dL(t),i=n,a;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!t1[c])return new $n("internal","internal");n=t1[c],i=c}const d=l.message;typeof d=="string"&&(i=d),a=l.details,a!==void 0&&(a=Dl(a))}}catch{}return n==="ok"?null:new $n(n,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ir(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="us-central1",fL=/^data: (.*?)(?:\n|$)/;function gL(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new $n("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class pL{constructor(e,n,i,a,l=I0,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new hL(e,n,i,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=I0}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function mL(t,e,n){const i=to(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Z0(t.emulatorOrigin),J0("Functions",!0))}function yL(t,e,n){const i=a=>_L(t,e,a,{});return i.stream=(a,l)=>EL(t,e,a,l),i}async function vL(t,e,n,i){n["Content-Type"]="application/json";let a;try{a=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function w2(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function _L(t,e,n,i){const a=t._url(e);return bL(t,a,n,i)}async function bL(t,e,n,i){n=Tf(n);const a={data:n},l=await w2(t,i),c=i.timeout||7e4,d=gL(c),f=await Promise.race([vL(e,a,l,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new $n("cancelled","Firebase Functions instance was deleted.");const p=Sf(f.status,f.json);if(p)throw p;if(!f.json)throw new $n("internal","Response is not valid JSON object.");let y=f.json.data;if(typeof y>"u"&&(y=f.json.result),typeof y>"u")throw new $n("internal","Response is missing data field.");return{data:Dl(y)}}function EL(t,e,n,i){const a=t._url(e);return wL(t,a,n,i||{})}async function wL(t,e,n,i){var a;n=Tf(n);const l={data:n},c=await w2(t,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(x){if(x instanceof Error&&x.name==="AbortError"){const D=new $n("cancelled","Request was cancelled.");return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}const R=Sf(0,null);return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}let f,p;const y=new Promise((x,R)=>{f=x,p=R});(a=i?.signal)===null||a===void 0||a.addEventListener("abort",()=>{const x=new $n("cancelled","Request was cancelled.");p(x)});const _=d.body.getReader(),b=xL(_,f,p,i?.signal);return{stream:{[Symbol.asyncIterator](){const x=b.getReader();return{async next(){const{value:R,done:D}=await x.read();return{value:R,done:D}},async return(){return await x.cancel(),{done:!0,value:void 0}}}}},data:y}}function xL(t,e,n,i){const a=(c,d)=>{const f=c.match(fL);if(!f)return;const p=f[1];try{const y=JSON.parse(p);if("result"in y){e(Dl(y.result));return}if("message"in y){d.enqueue(Dl(y.message));return}if("error"in y){const _=Sf(0,y);d.error(_),n(_);return}}catch(y){if(y instanceof $n){d.error(y),n(y);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return f();async function f(){if(i?.aborted){const p=new $n("cancelled","Request was cancelled");return c.error(p),n(p),Promise.resolve()}try{const{value:p,done:y}=await t.read();if(y){d.trim()&&a(d.trim(),c),c.close();return}if(i?.aborted){const b=new $n("cancelled","Request was cancelled");c.error(b),n(b),await t.cancel();return}d+=l.decode(p,{stream:!0});const _=d.split(`
`);d=_.pop()||"";for(const b of _)b.trim()&&a(b.trim(),c);return f()}catch(p){const y=p instanceof $n?p:Sf(0,null);c.error(y),n(y)}}},cancel(){return t.cancel()}})}const n1="@firebase/functions",r1="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="auth-internal",SL="app-check-internal",AL="messaging-internal";function RL(t){const e=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),l=n.getProvider(TL),c=n.getProvider(AL),d=n.getProvider(SL);return new pL(a,l,c,d,i)};Xa(new Ws(Qy,e,"PUBLIC").setMultipleInstances(!0)),pi(n1,r1,t),pi(n1,r1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t=ny(),e=I0){const i=zf(Dt(t),Qy).getImmediate({identifier:e}),a=nS("functions");return a&&x2(i,...a),i}function x2(t,e,n){mL(Dt(t),e,n)}function T2(t,e,n){return yL(Dt(t),e)}RL();const CL={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},Wy=oS(CL),qr=RP(Wy),Af=oL(Wy),Zy=NL(Wy,"us-central1");x2(Zy,"localhost",5001);const cr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},On={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function IL(){const[t,e]=q.useState(""),[n,i]=q.useState(""),[a,l]=q.useState(!1),[c,d]=q.useState(!1),[f,p]=q.useState(""),y=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);if(n.length<6)throw new Error(On.WEAK_PASSWORD);const R=await FV(Af,t,n);console.log("User created successfully:",R.user.uid)}catch(x){let R="Failed to create account";x.code==="auth/email-already-in-use"?R=On.EMAIL_IN_USE:x.code==="auth/invalid-email"?R=On.INVALID_EMAIL:x.code==="auth/weak-password"?R=On.WEAK_PASSWORD:x.code==="auth/operation-not-allowed"?R="Email/password accounts are not enabled. Please contact support.":x.message&&(R=x.message),p(R)}finally{d(!1)}},_=async b=>{b.preventDefault(),d(!0),p("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(On.INVALID_EMAIL);const R=await GV(Af,t,n);console.log("User signed in successfully:",R.user.uid)}catch(x){let R="Failed to sign in";x.code==="auth/user-not-found"?R=On.USER_NOT_FOUND:x.code==="auth/wrong-password"?R=On.WRONG_PASSWORD:x.code==="auth/invalid-email"?R=On.INVALID_EMAIL:x.code==="auth/user-disabled"?R="This account has been disabled. Please contact support.":x.code==="auth/too-many-requests"?R=On.TOO_MANY_REQUESTS:x.message&&(R=x.message),p(R)}finally{d(!1)}};return S.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:S.jsxs("div",{className:"max-w-md w-full p-8 bg-gradient-to-br from-indigo-900/95 via-purple-900/95 to-indigo-900/95 rounded-3xl shadow-2xl border-2 border-indigo-700/60 dark:border-purple-700/60 backdrop-blur-sm animate-fade-in hover:shadow-3xl hover:shadow-indigo-500/10 transition-all duration-500",children:[S.jsxs("div",{className:"text-center mb-8 animate-slide-in",children:[S.jsx("div",{className:"inline-block p-4 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-full mb-4 border border-indigo-500/30 animate-pulse-glow",children:S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:S.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),S.jsx("h2",{className:"text-4xl font-bold text-transparent bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text mb-3",children:a?"Join TinkFlow":"Welcome Back"}),S.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm leading-relaxed",children:a?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),S.jsxs("form",{onSubmit:a?y:_,className:"space-y-6",children:[S.jsxs("div",{className:"space-y-2",children:[S.jsxs("label",{htmlFor:"email",className:"text-sm font-semibold text-indigo-300 dark:text-purple-300 flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4 text-indigo-400 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email Address"]}),S.jsx("input",{id:"email",type:"email",value:t,onChange:b=>e(b.target.value),required:!0,"aria-describedby":"email-hint",className:"w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-indigo-600/30 dark:border-purple-600/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400/50 dark:focus:ring-purple-400/50 focus:border-indigo-400/50 dark:focus:border-purple-400/50 text-white placeholder-indigo-400 dark:placeholder-purple-400 transition-all duration-300 backdrop-blur-sm shadow-inner hover:border-indigo-500/80 dark:hover:border-purple-500/80 focus:scale-[1.02] active:scale-[0.98]",placeholder:"Enter your email address"})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("label",{htmlFor:"password",className:"text-sm font-semibold text-indigo-300 dark:text-purple-300 flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4 text-indigo-400 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Password"]}),S.jsx("input",{id:"password",type:"password",value:n,onChange:b=>i(b.target.value),required:!0,"aria-describedby":"password-hint",className:"w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-indigo-600/30 dark:border-purple-600/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400/50 dark:focus:ring-purple-400/50 focus:border-indigo-400/50 dark:focus:border-purple-400/50 text-white placeholder-indigo-400 dark:placeholder-purple-400 transition-all duration-300 backdrop-blur-sm shadow-inner hover:border-indigo-500/80 dark:hover:border-purple-500/80 focus:scale-[1.02] active:scale-[0.98]",placeholder:"Enter your password"})]}),f&&S.jsx("div",{className:"bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 rounded-xl p-4 backdrop-blur-sm animate-fade-in",role:"alert","aria-live":"polite",children:S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("div",{className:"w-6 h-6 bg-red-500/30 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),S.jsx("div",{className:"text-red-300 text-sm leading-relaxed",children:f})]})}),S.jsx("button",{type:"submit",disabled:c,"aria-label":a?"Create new account":"Sign in to your account",className:"w-full py-4 px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 disabled:from-slate-600 disabled:to-slate-700 text-white font-bold rounded-xl transition-all duration-300 transform hover:scale-105 disabled:scale-100 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-400/40 disabled:shadow-slate-500/25 disabled:cursor-not-allowed backdrop-blur-sm animate-float active:scale-95",children:c?S.jsxs("div",{className:"flex items-center justify-center gap-3",children:[S.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),S.jsx("span",{children:a?"Creating account...":"Signing in..."})]}):S.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z":"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),S.jsx("span",{children:a?"Create Account":"Sign In"})]})})]}),S.jsxs("div",{className:"mt-8 text-center",children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-indigo-600/50 dark:border-purple-600/50"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-gradient-to-r from-indigo-900/95 via-purple-900/95 to-indigo-900/95 text-indigo-400 dark:text-purple-400",children:a?"Already have an account?":"New to TinkFlow?"})})]}),S.jsx("button",{type:"button",onClick:()=>l(!a),"aria-label":a?"Switch to sign in":"Switch to create new account",className:"mt-4 w-full py-3 px-6 bg-[#2a2a2e] dark:bg-[#2a2a2e] hover:bg-indigo-700/90 dark:hover:bg-purple-700/90 text-indigo-300 dark:text-purple-300 hover:text-white font-semibold rounded-xl transition-all duration-300 border border-indigo-600/60 dark:border-purple-600/60 hover:border-indigo-500/80 dark:hover:border-purple-500/80 backdrop-blur-sm transform hover:scale-105 active:scale-95 shadow-lg",children:S.jsxs("div",{className:"flex items-center justify-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})}),S.jsx("span",{children:a?"Sign In Instead":"Create New Account"})]})})]})]})})}function kL({show:t,onHide:e,onConfirm:n,isCreating:i=!1}){const[a,l]=q.useState(""),[c,d]=q.useState(!0),f=b=>{const x=b.target.value;l(x),d(x.trim().length>0&&x.trim().length<=50)},p=b=>{b.preventDefault();const x=a.trim();x.length>0&&x.length<=50&&(n(x),l(""),d(!0))},y=()=>{l(""),d(!0),e()},_=b=>{b.key==="Enter"&&p(b)};return t?S.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:S.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),S.jsx("button",{onClick:y,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:"×"})]}),S.jsxs("form",{onSubmit:p,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),S.jsx("input",{type:"text",value:a,onChange:f,onKeyDown:_,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${c?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!c&&S.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),S.jsxs("p",{className:`text-xs mt-1 ${a.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[a.length,"/50 characters"]})]}),S.jsxs("div",{className:"flex gap-3 pt-4",children:[S.jsx("button",{type:"button",onClick:y,disabled:i,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),S.jsx("button",{type:"submit",disabled:!c||a.trim().length===0||i,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:i?"Creating...":"Create Board"})]})]})]})}):null}function DL({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:i,onDeleteBoard:a,onSignOut:l,isLoading:c}){const[d,f]=q.useState(!1),[p,y]=q.useState(!1),[_,b]=q.useState(null),x=async U=>{try{f(!0),await i(U),y(!1)}catch(H){console.error("Error in sidebar create board:",H)}finally{f(!1)}},R=()=>{y(!0)},D=()=>{y(!1)},k=(U,H)=>{U.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&a(H)};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:S.jsxs("div",{className:"flex flex-col h-full",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[S.jsx("h2",{className:"m-0 mb-3 text-sm font-semibold text-gray-900 dark:text-gray-100 tracking-tight",children:"TinkFlow Boards"}),S.jsx("button",{onClick:R,disabled:c||d,className:`w-full bg-blue-600 dark:bg-blue-600 text-white dark:text-white border border-blue-600 dark:border-blue-600 
                                      px-3 py-2 rounded-lg cursor-pointer text-xs font-medium transition-all duration-200 
                                      ${c||d?"cursor-not-allowed opacity-60":"hover:bg-blue-700 dark:hover:bg-blue-700 hover:border-blue-700 dark:hover:border-blue-700 hover:-translate-y-0.5 hover:shadow-md"}`,children:d?"Creating...":"+ New Board"})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:t.map(U=>{const H=e?.id===U.id,G=_===U.id;return S.jsxs("div",{onClick:()=>!c&&n(U.id),onMouseEnter:()=>b(U.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[44px] px-3 py-2.5 mb-1 rounded-lg flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-sm leading-tight
                                        ${c?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${H?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100 font-semibold shadow-sm":G?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50 text-gray-900 dark:text-gray-100 shadow-sm":"border-transparent bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/30"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!c&&n(U.id)},children:[S.jsx("span",{className:`
                                        ${H?"font-semibold":"font-medium"} 
                                        flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        text-sm leading-tight
                                    `,children:U.name}),S.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[U.isOpen&&S.jsx("span",{className:"text-green-500 dark:text-green-400 text-xs",children:"●"}),t.length>1&&S.jsx("button",{onClick:j=>{j.stopPropagation(),k(j,U.id)},title:"Delete board",className:`
                                                    w-5 h-5 bg-transparent border-none text-red-500 dark:text-red-400 
                                                    cursor-pointer text-sm leading-none flex items-center justify-center
                                                    rounded transition-all duration-150
                                                    ${G?"opacity-100 visible hover:bg-red-50 dark:hover:bg-red-900/30":"opacity-0 invisible"}
                                                    hover:text-red-600 dark:hover:text-red-300
                                                `,children:"×"})]})]},U.id)})}),c&&S.jsx("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400 text-xs font-medium",children:"Loading boards..."}),S.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:S.jsx("button",{onClick:l,className:`w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 
                                     bg-transparent text-gray-700 dark:text-gray-300 cursor-pointer text-xs font-medium
                                     transition-all duration-200
                                     hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:border-gray-400 dark:hover:border-gray-500 
                                     hover:text-gray-900 dark:hover:text-gray-100`,children:"Sign Out"})})]})}),S.jsx(kL,{show:p,onHide:D,onConfirm:x,isCreating:d})]})}const ML=q.memo(function({explanation:e,onClose:n,isVisible:i}){const[a,l]=q.useState(!1),[c,d]=q.useState(i);q.useEffect(()=>{i?(d(!0),setTimeout(()=>l(!0),10)):(l(!1),setTimeout(()=>d(!1),300))},[i]);const f=()=>{l(!1),setTimeout(()=>n(),300)};return c?S.jsxs("div",{className:`w-full h-full flex flex-col transition-all duration-300 ease-out ${a?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0"}`,children:[S.jsxs("div",{className:`flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50 
                           transition-all duration-400 ease-out ${a?"transform translate-y-0 opacity-100":"transform -translate-y-4 opacity-0"}`,children:[S.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[S.jsx("span",{className:"text-blue-500",children:"📄"}),"Explanation"]}),S.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:f,title:"Close explanation","aria-label":"Close explanation sidebar",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),S.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:e?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`mb-6 transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:S.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:e.title})}),S.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700
                                      transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-4 opacity-0"}`,children:S.jsx("div",{dangerouslySetInnerHTML:{__html:e.text}})})]}):S.jsx("div",{className:`flex items-center justify-center h-full text-gray-500 dark:text-gray-400 
                                   transition-all duration-500 ease-out ${a?"transform translate-y-0 opacity-100":"transform translate-y-8 opacity-0"}`,children:S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"text-6xl mb-6 opacity-60",children:"📄"}),S.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),S.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]}):null}),S2=q.createContext(void 0),OL=()=>{const t=q.useContext(S2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},PL=({children:t})=>{const[e,n]=q.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});q.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),localStorage.setItem("theme",e)},[e]);const i=()=>{n(a=>a==="light"?"dark":"light")};return S.jsx(S2.Provider,{value:{theme:e,toggleTheme:i},children:t})},A2=()=>{const{theme:t,toggleTheme:e}=OL();return S.jsx("button",{onClick:e,className:`p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 
                     hover:bg-gray-200 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600
                     hover:border-gray-300 dark:hover:border-gray-500 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-blue-500/30 dark:focus:ring-blue-400/30
                     shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):S.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:S.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function VL({name:t,onSetName:e,user:n,isSaving:i}){const[a,l]=q.useState(!1),[c,d]=q.useState(t||"");q.useEffect(()=>{d(t||"")},[t]);const f=y=>{y.key==="Enter"&&(e(c),l(!1))},p=()=>{l(!0),d(t||"")};return S.jsx(S.Fragment,{children:S.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:S.jsx("div",{className:"max-w-none mx-auto px-4",children:S.jsxs("header",{className:"flex justify-between items-center py-3",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:S.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),S.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"TinkFlow"})]}),S.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"•"}),a?S.jsx("input",{type:"text",value:c,onChange:y=>d(y.target.value),onKeyDown:f,onBlur:()=>{e(c),l(!1)},className:`bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 
                                             rounded-md px-2 py-1 text-gray-900 dark:text-gray-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-500 dark:focus:border-blue-400 focus:ring-2 focus:ring-blue-500/20`,autoFocus:!0}):S.jsx("button",{onClick:p,className:`bg-transparent border-none text-gray-600 dark:text-gray-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded-md transition-all duration-150 ease-in-out
                                             hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100`,children:t||"Untitled Board"})]}),S.jsxs("div",{className:"flex items-center gap-3",children:[i&&S.jsxs("div",{className:`text-green-600 dark:text-green-400 text-sm flex items-center gap-2 
                                               bg-green-50 dark:bg-green-900/20 px-3 py-1.5 rounded-full border border-green-200 dark:border-green-700/50
                                               animate-pulse`,children:[S.jsx("div",{className:"w-2 h-2 bg-green-500 dark:bg-green-400 rounded-full animate-bounce"}),S.jsx("span",{className:"font-medium",children:"Saving..."})]}),S.jsx(A2,{}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center",children:S.jsx("span",{className:"text-white font-medium text-xs",children:n?.isAnonymous?"G":n?.email?.charAt(0).toUpperCase()||"U"})}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"})]})]})]})})})})}const LL=({notification:t,onRemove:e})=>{const n=a=>{switch(a){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"📄"}},i=a=>{switch(a){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return S.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${i(t.type)}`,children:[" ",S.jsxs("div",{className:"flex items-start gap-3",children:[" ",S.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",S.jsxs("div",{className:"flex-1 min-w-0",children:[" ",S.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",S.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",S.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},zL=({notifications:t,onRemove:e})=>S.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>S.jsxs("div",{className:"pointer-events-auto",children:[" ",S.jsx(LL,{notification:n,onRemove:e})," "]},n.id))," "]});function UL({onLogin:t}){return S.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",S.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",S.jsxs("div",{className:"flex items-center space-x-3",children:[" ",S.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",S.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",S.jsxs("div",{className:"flex flex-col",children:[" ",S.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",S.jsxs("div",{className:"flex items-center gap-4",children:[" ",S.jsx(A2,{})," ",S.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"relative overflow-hidden",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",S.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",S.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",S.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",S.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",S.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",S.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",S.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",S.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",S.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",S.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",S.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",S.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",S.jsxs("div",{className:"text-center",children:[" ",S.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",S.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",S.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",S.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",S.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",S.jsxs("div",{className:"text-white",children:[" ",S.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",S.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"text-center mb-16",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",S.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",S.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🎓 Academic Learning"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Research paper analysis"})," ",S.jsx("li",{children:"• Concept mapping for exams"})," ",S.jsx("li",{children:"• Cross-disciplinary connections"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","💡 Creative Exploration"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Idea generation workflows"})," ",S.jsx("li",{children:"• Problem-solving frameworks"})," ",S.jsx("li",{children:"• Innovation mapping"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🔬 Technical Deep Dives"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• System architecture learning"})," ",S.jsx("li",{children:"• Technology stack exploration"})," ",S.jsx("li",{children:"• Code concept mapping"})," "]})," "]})," ",S.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" ","🚀 Professional Development"," "]})," ",S.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",S.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",S.jsx("li",{children:"• Skill gap analysis"})," ",S.jsx("li",{children:"• Career pathway planning"})," ",S.jsx("li",{children:"• Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",S.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",S.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",S.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",S.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",S.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required • Get started in seconds"," "]})," "]})," "]})," "," ",S.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",S.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",S.jsxs("div",{className:"col-span-1",children:[" ",S.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",S.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",S.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",S.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",S.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",S.jsxs("div",{children:[" ",S.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",S.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",S.jsx("li",{children:S.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",S.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",S.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","© 2024 TinkFlow. All rights reserved."," "]})," ",S.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",S.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",S.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",S.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const BL=async()=>{try{await QV(Af),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},jL=()=>{const[t,e]=q.useState(null);return q.useEffect(()=>{const i=XV(Af,a=>{e(a),a?console.log("User signed in:",a.uid):console.log("No user signed in")});return()=>i()},[]),{user:t,signOut:async()=>{try{await BL(),e(null)}catch(i){console.error("Error in sign out:",i)}}}},R2=t=>!!(t&&t.uid),hu=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],El=[],HL=async t=>{if(!R2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const e=Ay(qr,cr.BOARDS),n=zP(e,UP("userId","==",t),BP("createdAt","desc")),i=await zy(n);if(i.empty){const l={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:_t.now(),isOpen:!0};return await Uy(Ul(qr,cr.BOARDS,l.id),l),console.log("Created default board:",l),[l]}const a=i.docs.map(l=>({id:l.id,...l.data()}));return console.log("Fetched all boards:",a),a}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:_t.now(),isOpen:!0,isFallback:!0}]}throw new Error(On.LOAD_FAILED)}},i1=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),hu;try{const e=Ay(qr,cr.BOARDS,t,cr.NODES),n=await zy(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),hu;const i=n.docs.map(a=>{const l=a.data(),c={...l.data,tokenColors:l.data?.tokenColors||{},previousNode:l.data?.previousNode||null};return{id:a.id,type:l.type,position:l.position,data:c,draggable:l.draggable,style:l.style}});return console.log("Fetched nodes from board:",i),i}catch(e){return console.error("Fetch nodes error:",e),hu}},s1=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),El;try{const e=Ay(qr,cr.BOARDS,t,cr.EDGES),n=await zy(e);if(n.empty)return console.log("No edges found for board, using initial edges"),El;const i=n.docs.map(a=>({id:a.id,...a.data()}));return console.log("Fetched edges from board:",i),i}catch(e){return console.error("Fetch edges error:",e),El}},qL=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=BA(qr);e.forEach(i=>{const a=Ul(qr,cr.BOARDS,t,cr.NODES,i.id),l={type:i.type,data:i.data,position:i.position,updatedAt:_t.now()};i.draggable!=null&&(l.draggable=i.draggable),i.style!=null&&(l.style=i.style),n.set(a,l)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(On.SAVE_FAILED)}},$L=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=BA(qr);e.forEach(i=>{const a=Ul(qr,cr.BOARDS,t,cr.EDGES,i.id),l={source:i.source,target:i.target,updatedAt:_t.now()};i.sourceHandle!=null&&(l.sourceHandle=i.sourceHandle),i.targetHandle!=null&&(l.targetHandle=i.targetHandle),i.style!=null&&(l.style=i.style),i.markerEnd!=null&&(l.markerEnd=i.markerEnd),n.set(a,l)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(On.SAVE_FAILED)}},FL=async(t,e,n)=>{if(!R2({uid:t}))throw new Error(On.AUTH_REQUIRED);try{const i={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:_t.now(),isOpen:!1};return console.log("Creating board:",i),await Uy(Ul(qr,cr.BOARDS,i.id),i),console.log("Board created successfully:",i),i}catch(i){throw console.error("Error creating new board:",i),i.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):i.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},GL=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await GP(Ul(qr,cr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},rl=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:_t.now()};await Uy(Ul(qr,cr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},YL=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},KL=t=>Array.isArray(t)?t.map(YL):[],XL=(t,e={})=>{const[n,i,a]=YD([]),[l,c,d]=KD([]),[f,p]=q.useState(!0),[y,_]=q.useState(!1),[b,x]=q.useState(!1),[R,D]=q.useState([]),[k,U]=q.useState(null),H=q.useRef(null),{showSuccess:G,showError:j,showInfo:Q}=e,Y=N=>{const O=N.find($=>$.isOpen===!0);if(O)return O;if(N.length>0){const $={...N[0],isOpen:!0};return rl($.id,$).catch(console.error),$}return null};q.useEffect(()=>{(async()=>{if(t)try{p(!0);const O=await HL(t.uid);D(O);const $=O.some(J=>J.isFallback);$&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const M=Y(O);if(!M){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),i(hu),c(El);return}U(M);const[K,te]=await Promise.all([i1(M.id),s1(M.id)]);i(K),c(te),Q&&!$&&Q("Board loaded successfully!")}catch(O){console.error("Error loading initial data:",O),j&&j("Failed to load board data. Using default board."),i(hu),c(El)}finally{p(!1)}})()},[t,i,c]);const I=async(N,O,$)=>{H.current&&clearTimeout(H.current);const M=setTimeout(async()=>{try{x(!0);const K=[];O&&O.length>0&&K.push(qL(N,O)),$&&$.length>0&&K.push($L(N,$)),K.length>0&&(await Promise.all(K),console.log("Auto-save completed successfully"))}catch(K){console.error("Auto-save failed:",K),j&&j("Failed to save changes automatically")}finally{x(!1),H.current=null}},1e3);H.current=M};q.useEffect(()=>(!f&&k&&!y&&!k.isFallback&&I(k.id,n,l),()=>{H.current&&clearTimeout(H.current)}),[n,l,f,k,y]);const T=async N=>{try{if(k?.id===N)return;if(k?.isFallback||R.find($=>$.id===N)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(_(!0),k&&!k.isFallback){const $={...k,isOpen:!1};await rl(k.id,$),D(M=>M.map(K=>K.id===k.id?$:K))}const O=R.find($=>$.id===N);if(O){const $={...O,isOpen:!0};await rl(N,$),U($),D(J=>J.map(V=>V.id===N?$:V));const[M,K]=await Promise.all([i1(N),s1(N)]),te=KL(M);i(te),c(K),G&&G(`Switched to "${$.name}"`)}else console.error("Board not found:",N),j&&j("Board not found")}catch(O){console.error("Error switching board:",O),j&&j("Failed to switch board. Please try again.")}finally{_(!1)}};return{nodes:n,edges:l,allBoards:R,currentBoard:k,isLoading:f,isSwitchingBoard:y,isSaving:b,onNodesChange:a,onEdgesChange:d,setNodes:i,switchToBoard:T,createNewBoard:async N=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;Q&&Q("Creating new board...");const O=await FL(t.uid,N||null,R);if(O){if(k&&!k.isFallback){const M={...k,isOpen:!1};rl(k.id,M).catch(console.error)}const $={...O,isOpen:!0};return D(M=>{const K=M.map(te=>te.id===k?.id?{...te,isOpen:!1}:te);return[$,...K]}),U($),rl(O.id,$).catch(console.error),i([{id:"1",type:"staticEditable",data:{label:N||"New Board"},position:{x:250,y:25},draggable:!1}]),c(El),G&&G(`Board "${O.name}" created and opened!`),$}else return j&&j("Failed to create board. Please try again."),null}catch(O){return j&&j(`Failed to create board: ${O.message}`),null}},deleteBoard:async N=>{try{if(R.length<=1){j&&j("Cannot delete the last board!");return}if(!R.find($=>$.id===N)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(Q&&Q("Deleting board..."),k?.id===N){const $=R.find(M=>M.id!==N);$&&await T($.id)}await GL(N),D($=>$.filter(M=>M.id!==N)),G&&G("Board deleted successfully!")}catch(O){console.error("Error deleting board:",O),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async N=>{if(k&&k.name!==N){const O={...k,name:N};U(O),D($=>$.map(M=>M.id===k.id?O:M));try{await rl(k.id,O),console.log("Board name updated successfully")}catch($){console.error("Error updating board name:",$)}}},clearBoardState:()=>{H.current&&(clearTimeout(H.current),H.current=null),D([]),U(null),i([]),c([]),p(!0),_(!1),x(!1)}}},QL=()=>{const[t,e]=q.useState([]),n=p=>{e(y=>y.filter(_=>_.id!==p))},i=p=>{const y=Date.now().toString(),_={id:y,timestamp:new Date,...p};return e(b=>[...b,_]),p.autoRemove!==!1&&setTimeout(()=>{n(y)},p.duration||5e3),y};return{notifications:t,addNotification:i,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(p,y={})=>i({type:"success",message:p,...y}),showError:(p,y={})=>i({type:"error",message:p,duration:7e3,...y}),showInfo:(p,y={})=>i({type:"info",message:p,...y}),showWarning:(p,y={})=>i({type:"warning",message:p,duration:6e3,...y})}},N2=t=>{const e=[],n=t.split("_");for(let i=0;i<n.length;i++)if(i%2===0)n[i].split(/\s+/).filter(l=>l.trim()!=="").forEach(l=>{e.push({word:l.trim()})});else{const a=n[i].trim();a.split(/\s+/).filter(c=>c.trim()!=="").forEach(c=>{e.push({word:c.trim(),myConcept:a})})}return e},a1=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},WL=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return(e*299+n*587+i*114)/1e3>=128?"#000000":"#ffffff"},Yh=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const i=parseInt(n,16),a=255,l=e,c=i>>16,d=i>>8&255,f=i&255,p=Math.round((a-c)*l)+c,y=Math.round((a-d)*l)+d,_=Math.round((a-f)*l)+f;return`#${(16777216+p*65536+y*256+_).toString(16).slice(1)}`},ZL=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16),l=30,c=Math.min(255,Math.max(0,n+(Math.random()-.5)*l*2)),d=Math.min(255,Math.max(0,i+(Math.random()-.5)*l*2)),f=Math.min(255,Math.max(0,a+(Math.random()-.5)*l*2));return`#${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}${Math.round(f).toString(16).padStart(2,"0")}`},JL=t=>{const i=(Math.random()-.5)*150*2;return{x:t.x+i,y:t.y+200}},ez=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,tz=(t,e)=>`edge_${t}_${e}`,nz=(t,e,n,i,a,l,c)=>({id:ez(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:i,full_text:n,suggestions:[],myColor:a,tokenColors:{},previousNode:c}}),rz=(t,e,n,i)=>({id:tz(t,e),source:t,target:e,sourceHandle:i,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:_u.ArrowClosed,color:n}}),iz="51259393-3a562db01323edade9561b8f0",sz="LIVDSRZULELA",az=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong class='font-semibold text-gray-900 dark:text-gray-100'>$1</strong>").replace(/\((.*?)\)\[(.*?)\]/g,'<a href="$2" target="_blank" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline transition-colors duration-200">$1</a>'),oz=async t=>{const e=t.map(async i=>{const a=Object.keys(i)[0],l=i[a];switch(a){case"large_header":return`<h1 class="text-4xl lg:text-5xl font-bold my-8 text-gray-900 dark:text-gray-100 leading-tight border-b-4 border-blue-600 dark:border-blue-400 pb-2 transition-colors duration-200">${l}</h1>`;case"small_header":return`<h2 class="text-2xl lg:text-3xl font-semibold mt-6 mb-3 text-gray-800 dark:text-gray-200 leading-snug transition-colors duration-200">${l}</h2>`;case"ul":return`<ul class="my-4 pl-6 space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(O=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${O}</li>`).join("")}</ul>`;case"ol":return`<ol class="my-4 pl-6 space-y-2 list-decimal list-inside text-gray-700 dark:text-gray-300 transition-colors duration-200">${l.map(O=>`<li class="text-gray-700 dark:text-gray-300 transition-colors duration-200">${O}</li>`).join("")}</ol>`;case"quiz":const f=l,p=`quiz-set-${Math.random().toString(36).substr(2,9)}`,y=f.map((O,$)=>{const M=`${p}-q${$}`,K=O.answers.map((W,re)=>{const X=Object.keys(W)[0],se=W[X],de=re===O.correctAnswer;return`<button class="quiz-answer w-full bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg p-4 text-left font-medium text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 dark:hover:border-blue-400 transition-all duration-200 transform hover:scale-[1.02] disabled:cursor-not-allowed disabled:opacity-60" onclick="${`
                                        const quiz = document.getElementById('${M}');
                                        const hintDiv = document.getElementById('${M}-hint');
                                        const resultDiv = document.getElementById('${M}-result');
                                        const nextBtn = document.getElementById('${M}-next');
                                        const buttons = quiz.querySelectorAll('.quiz-answer');
                                        const selectedButton = this;
                                        
                                        if (${de}) {
                                            // Correct answer
                                            hintDiv.classList.add('hidden');
                                            resultDiv.classList.remove('hidden');
                                            if (nextBtn) nextBtn.classList.remove('hidden');
                                            buttons.forEach(btn => btn.disabled = true);
                                            selectedButton.classList.add('quiz-correct');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                        } else {
                                            // Wrong answer - show hint
                                            hintDiv.textContent = '${se.replace(/'/g,"\\'")}';
                                            hintDiv.classList.remove('hidden');
                                            selectedButton.classList.add('quiz-incorrect');
                                            selectedButton.classList.remove('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                            selectedButton.disabled = true;
                                        }
                                    `}">${X}</button>`}).join(""),te=`
                                const quiz = document.getElementById('${M}');
                                const hintDiv = document.getElementById('${M}-hint');
                                const resultDiv = document.getElementById('${M}-result');
                                const nextBtn = document.getElementById('${M}-next');
                                const buttons = quiz.querySelectorAll('.quiz-answer');
                                
                                // Reset all states
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                            `,J=$<f.length-1?`
                                document.getElementById('${p}-q${$}').classList.add('hidden');
                                document.getElementById('${p}-q${$+1}').classList.remove('hidden');
                            `:`
                                document.getElementById('${p}-completion').classList.remove('hidden');
                                document.getElementById('${M}').classList.add('hidden');
                            `,V=$<f.length-1?`<button id="${M}-next" class="hidden bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${J}">Next Question →</button>`:`<button id="${M}-next" class="hidden bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${J}">Finish Quiz ✓</button>`;return`
                                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 transition-colors duration-200 ${$===0?"":"hidden"}" id="${M}">
                                    <div class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-2 text-center">Question ${$+1} of ${f.length}</div>
                                    <div class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6 text-center leading-relaxed">${O.question}</div>
                                    <div class="space-y-3 mb-4">
                                        ${K}
                                    </div>
                                    <div id="${M}-hint" class="hidden bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-700 rounded-lg p-4 text-yellow-800 dark:text-yellow-200 text-sm italic animate-fade-in"></div>
                                    <div id="${M}-result" class="hidden bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700 rounded-lg p-6 text-center">
                                        <p class="text-xl font-bold text-green-800 dark:text-green-200 mb-4">🎉 Excellent! 🎉</p>
                                        <div class="flex flex-col sm:flex-row gap-3 justify-center">
                                            <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200" onclick="${te}">↻ Try Again</button>
                                            ${V}
                                        </div>
                                    </div>
                                </div>
                            `}).join(""),_=`
                        document.getElementById('${p}-completion').classList.add('hidden');
                        document.getElementById('${p}-q0').classList.remove('hidden');
                        // Reset all questions
                        ${f.map((O,$)=>`
                            const quiz${$} = document.getElementById('${p}-q${$}');
                            if (quiz${$}) {
                                const hintDiv = document.getElementById('${p}-q${$}-hint');
                                const resultDiv = document.getElementById('${p}-q${$}-result');
                                const nextBtn = document.getElementById('${p}-q${$}-next');
                                const buttons = quiz${$}.querySelectorAll('.quiz-answer');
                                
                                hintDiv.classList.add('hidden');
                                hintDiv.textContent = '';
                                resultDiv.classList.add('hidden');
                                if (nextBtn) nextBtn.classList.add('hidden');
                                
                                buttons.forEach(btn => {
                                    btn.disabled = false;
                                    btn.classList.remove('quiz-correct', 'quiz-incorrect');
                                    btn.classList.add('hover:bg-blue-50', 'dark:hover:bg-gray-700');
                                });
                                
                                if (${$} > 0) quiz${$}.classList.add('hidden');
                            }
                        `).join("")}
                    `;return`
                        <div class="my-8" id="${p}">
                            ${y}
                            <div id="${p}-completion" class="hidden bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-700 rounded-xl p-8 text-center">
                                <div class="text-4xl mb-4">🎊</div>
                                <h3 class="text-2xl font-bold text-green-800 dark:text-green-200 mb-2">Quiz Completed!</h3>
                                <p class="text-green-700 dark:text-green-300 mb-6">Congratulations! You've successfully completed all ${f.length} questions.</p>
                                <button class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg transform hover:scale-105 transition-all duration-200" onclick="${_}">🔄 Start Over</button>
                            </div>
                        </div>
                    `;case"img":const[b,x]=l;return`<figure class="my-6 text-center">
                    <img src="${await uz(b)}" alt="${x}" 
                         class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                         onerror="this.onerror=null; this.src='https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error'; this.alt='Fallback image (original failed to load)';" />
                    <figcaption class="mt-3 text-sm text-gray-600 dark:text-gray-400">${x}</figcaption>
                    <div class="mt-2 text-xs text-gray-500 dark:text-gray-500 opacity-75">
                        <span class="inline-block mr-2">🔍 ${b}</span>
                        <a href="https://pixabay.com/" target="_blank" class="text-blue-500 dark:text-blue-400 hover:underline">Pixabay</a>
                    </div>
                    </figure>`;case"vid":const[D,k]=l;return`<figure class="my-6 text-center">
                        <div class="relative w-full max-w-4xl mx-auto" style="padding-bottom: 56.25%; height: 0;">
                            <iframe 
                                src="https://www.youtube.com/embed/${await mz(D)}" 
                                class="absolute top-0 left-0 w-full h-full rounded-lg shadow-lg"
                                frameborder="0" 
                                allowfullscreen>
                            </iframe>
                        </div>
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${k}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${D}" • <a href="https://developers.google.com/youtube/v3" target="_blank" class="text-red-600 dark:text-red-400 hover:underline">Powered by YouTube Data API</a></div>
                    </figure>`;case"gif":const[H,G]=l;return`<figure class="my-6 text-center">
                        <img src="${await fz(H)}" alt="${G}" 
                             class="max-w-full h-auto rounded-lg shadow-lg mx-auto transition-transform duration-200 hover:scale-105"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error'; this.alt='Fallback GIF (original failed to load)';" />
                        <figcaption class="mt-2 text-sm italic text-gray-600 dark:text-gray-400">${G}</figcaption>
                        <div class="mt-1 text-xs text-gray-500 dark:text-gray-400">Search: "${H}" • <a href="https://tenor.com/" target="_blank" class="text-purple-600 dark:text-purple-400 hover:underline">Powered by Tenor</a></div>
                    </figure>`;case"textblock":return`<div class="my-4 leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">${az(l)}</div>`;case"codeblock":return`<pre class="my-6 bg-gray-900 dark:bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto border-l-4 border-blue-500 shadow-lg"><code class="font-mono text-sm leading-relaxed">${l}</code></pre>`;case"quote":return`<blockquote class="my-6 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 p-4 rounded-r-lg relative">
                        <div class="text-blue-600 dark:text-blue-400 text-4xl absolute -top-2 -left-1 font-serif">"</div>
                        <div class="italic text-gray-700 dark:text-gray-300 pl-6">${l}</div>
                    </blockquote>`;case"link":return`<a href="${l}" class="inline-block my-2 px-4 py-2 text-blue-600 dark:text-blue-400 border-2 border-blue-600 dark:border-blue-400 rounded-lg hover:bg-blue-600 hover:text-white dark:hover:bg-blue-500 transition-all duration-200 font-medium" target="_blank">${l}</a>`;case"table":const Q=l,Y=Q[0],I=Q.slice(1),T=`<thead><tr>${Y.map(O=>`<th class="bg-blue-600 dark:bg-blue-700 text-white px-4 py-3 text-left font-semibold">${O}</th>`).join("")}</tr></thead>`,A=`<tbody>${I.map((O,$)=>`<tr class="${$%2===0?"bg-gray-50 dark:bg-gray-800":"bg-white dark:bg-gray-700"} hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors duration-200">${O.map(M=>`<td class="px-4 py-3 border-b border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300">${M}</td>`).join("")}</tr>`).join("")}</tbody>`;return`<div class="my-6 overflow-x-auto shadow-lg rounded-lg border border-gray-200 dark:border-gray-700">
                        <table class="w-full border-collapse">${T}${A}</table>
                    </div>`;case"purehtml":return`<div class="my-4 p-2 rounded-md bg-gray-50 dark:bg-gray-800 transition-colors duration-200">${l}</div>`;case"sidecontainer":return`<aside class="float-right w-80 max-w-[40%] ml-4 mb-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200 lg:block hidden">
                        ${l}
                    </aside>
                    <div class="lg:hidden my-4 p-4 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm leading-relaxed text-gray-700 dark:text-gray-300 transition-colors duration-200">
                        ${l}
                    </div>`;case"diagram":const L=`diagram${Math.random().toString(36).substr(2,9)}`,z=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");return`
                        <div class="my-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4 text-center transition-colors duration-200" 
                             id="${L}" 
                             data-diagram-code="${z}"
                             data-diagram-id="${L}">
                            <div class="text-gray-600 dark:text-gray-400 italic loading-text">Rendering diagram...</div>
                            <script type="text/javascript">
                                (function() {
                                    function processDiagram() {
                                        const diagramDiv = document.getElementById('${L}');
                                        if (!diagramDiv) {
                                            console.warn('Diagram div not found: ${L}');
                                            return;
                                        }
                                        
                                        const loadingText = diagramDiv.querySelector('.loading-text');
                                        let code = diagramDiv.getAttribute('data-diagram-code');
                                        
                                        if (!code) {
                                            console.error('No diagram code found');
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Error:</strong> No diagram code provided</div>';
                                            return;
                                        }
                                        
                                        // Decode the diagram code
                                        code = code
                                            .replace(/&amp;/g, '&')
                                            .replace(/&lt;/g, '<')
                                            .replace(/&gt;/g, '>')
                                            .replace(/&quot;/g, '"')
                                            .replace(/&#39;/g, "'");
                                        
                                        const id = diagramDiv.getAttribute('data-diagram-id');
                                        
                                        function showError(message) {
                                            console.error('Mermaid diagram error:', message);
                                            diagramDiv.innerHTML = '<div class="text-red-600 dark:text-red-400 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg"><strong>Diagram Error:</strong> ' + message + '</div>';
                                        }
                                        
                                        function initializeMermaid() {
                                            if (window.mermaid) {
                                                try {
                                                    if (!window.mermaidInitialized) {
                                                        window.mermaid.initialize({ 
                                                            startOnLoad: false, 
                                                            theme: 'default', 
                                                            securityLevel: 'loose',
                                                            fontFamily: 'inherit',
                                                            suppressErrorRendering: false
                                                        });
                                                        window.mermaidInitialized = true;
                                                    }
                                                    return true;
                                                } catch (e) {
                                                    showError('Failed to initialize Mermaid: ' + e.message);
                                                    return false;
                                                }
                                            }
                                            return false;
                                        }
                                        
                                        function renderDiagram() {
                                            if (!initializeMermaid()) {
                                                showError('Mermaid library not available');
                                                return;
                                            }
                                            
                                            try {
                                                // Validate the diagram code first
                                                if (!code.trim()) {
                                                    showError('Empty diagram code');
                                                    return;
                                                }
                                                
                                                const svgId = id + '_svg';
                                                
                                                // Use mermaid.render with proper error handling
                                                window.mermaid.render(svgId, code).then(function(result) {
                                                    if (result && result.svg) {
                                                        diagramDiv.innerHTML = result.svg;
                                                    } else {
                                                        showError('Mermaid render returned no SVG');
                                                    }
                                                }).catch(function(error) {
                                                    showError(error.message || 'Unknown render error');
                                                });
                                            } catch (e) {
                                                showError(e.message || 'Unknown execution error');
                                            }
                                        }
                                        
                                        // Load Mermaid if not already loaded
                                        if (!window.mermaid) {
                                            if (loadingText) {
                                                loadingText.textContent = 'Loading Mermaid library...';
                                            }
                                            
                                            const script = document.createElement('script');
                                            script.src = 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js';
                                            script.onload = function() {
                                                if (loadingText) {
                                                    loadingText.textContent = 'Rendering diagram...';
                                                }
                                                // Give the library time to fully load
                                                setTimeout(renderDiagram, 500);
                                            };
                                            script.onerror = function() {
                                                showError('Failed to load Mermaid library from CDN');
                                            };
                                            document.head.appendChild(script);
                                        } else {
                                            renderDiagram();
                                        }
                                    }
                                    
                                    // Wait for DOM to be ready and process the diagram
                                    if (document.readyState === 'loading') {
                                        document.addEventListener('DOMContentLoaded', processDiagram);
                                    } else {
                                        // Use a small delay to ensure the DOM element is fully rendered
                                        setTimeout(processDiagram, 50);
                                    }
                                })();
                            <\/script>
                        </div>
                    `;case"note":return`<div class="my-4 flex items-start p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 dark:border-blue-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-blue-600 dark:text-blue-400 text-xl mr-3 flex-shrink-0 mt-0.5">📝</div>
                        <div class="text-blue-800 dark:text-blue-200 leading-relaxed">${l}</div>
                    </div>`;case"warning":return`<div class="my-4 flex items-start p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 dark:border-yellow-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-yellow-600 dark:text-yellow-400 text-xl mr-3 flex-shrink-0 mt-0.5">⚠️</div>
                        <div class="text-yellow-800 dark:text-yellow-200 leading-relaxed">${l}</div>
                    </div>`;case"tip":return`<div class="my-4 flex items-start p-4 bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 dark:border-green-400 rounded-r-lg transition-colors duration-200">
                        <div class="text-green-600 dark:text-green-400 text-xl mr-3 flex-shrink-0 mt-0.5">💡</div>
                        <div class="text-green-800 dark:text-green-200 leading-relaxed">${l}</div>
                    </div>`;case"htmlCanvas":const B=`canvas_${Math.random().toString(36).substr(2,9)}_${Date.now()}`;return`
                        <div class="my-6 bg-gray-50 dark:bg-gray-800 border-2 border-dashed border-blue-300 dark:border-blue-600 rounded-lg p-6 transition-colors duration-200" data-canvas-code="${l.replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" data-canvas-id="${B}">
                            <canvas id="${B}" width="400" height="300" class="border border-gray-300 dark:border-gray-600 rounded-lg max-w-full mx-auto block bg-white dark:bg-gray-900"></canvas>
                            <div class="flex flex-wrap gap-2 mt-4 justify-center">
                                <button class="bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const code = canvasDiv.getAttribute('data-canvas-code');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        errorDiv.classList.add('hidden');
                                        errorDiv.textContent = '';
                                        
                                        try {
                                            canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                            const canvasFunction = new Function('canvas', 'ctx', code);
                                            canvasFunction(canvasElement, canvasContext);
                                        } catch (error) {
                                            console.error('Canvas error:', error);
                                            errorDiv.textContent = 'Error: ' + error.message;
                                            errorDiv.classList.remove('hidden');
                                        }
                                    }).call(this);
                                ">▶ Run Code</button>
                                <button class="bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        const canvasContext = canvasElement.getContext('2d');
                                        const errorDiv = document.getElementById(canvasId + 'Error');
                                        
                                        canvasContext.clearRect(0, 0, canvasElement.width, canvasElement.height);
                                        errorDiv.classList.add('hidden');
                                    }).call(this);
                                ">🗑️ Clear</button>
                                <button class="bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2" onclick="
                                    (function() {
                                        const canvasDiv = this.closest('[data-canvas-code]');
                                        const canvasId = canvasDiv.getAttribute('data-canvas-id');
                                        const canvasElement = document.getElementById(canvasId);
                                        
                                        if (!document.fullscreenElement) {
                                            canvasElement.requestFullscreen().catch(err => {
                                                console.warn('Fullscreen failed:', err);
                                            });
                                        } else {
                                            document.exitFullscreen();
                                        }
                                    }).call(this);
                                ">⛶ Fullscreen</button>
                            </div>
                            <details class="mt-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors duration-200">
                                <summary class="p-3 font-medium text-gray-700 dark:text-gray-300 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200">📝 View Code</summary>
                                <pre class="p-4 bg-gray-900 dark:bg-gray-800 text-gray-100 rounded-b-lg overflow-x-auto"><code class="font-mono text-sm">${l}</code></pre>
                            </details>
                            <div id="${B}Error" class="hidden mt-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200"></div>
                        </div>
                    `;default:return`<div class="my-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 font-mono text-sm">
                        <div class="font-semibold mb-2">Unknown content type:</div>
                        ${JSON.stringify(i)}
                    </div>`}});return(await Promise.all(e)).join(`
`)},lz=iz,cz="https://pixabay.com/api/",Yc=new Map,uz=async t=>{if(Yc.has(t))return Yc.get(t);try{const e=encodeURIComponent(t),n=`${cz}?key=${lz}&q=${e}&image_type=photo&per_page=3&safesearch=true&order=relevant`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.hits&&a.hits.length>0){const l=a.hits[0].webformatURL;return Yc.set(t,l),l}else{const l=`https://via.placeholder.com/640x360/e5e7eb/6b7280?text=${e}`;return Yc.set(t,l),l}}catch(e){console.error("Error fetching Pixabay image:",e);const n="https://via.placeholder.com/640x360/ef4444/ffffff?text=Image+Error";return Yc.set(t,n),n}},dz=sz,hz="https://g.tenor.com/v1/search",Kc=new Map,fz=async t=>{if(Kc.has(t))return Kc.get(t);try{const e=encodeURIComponent("explained "+t),n=`${hz}?key=${dz}&q=${e}&limit=1&media_filter=basic&contentfilter=medium`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.results&&a.results.length>0){const c=a.results[0],d=c.media[0]?.gif?.url||c.media[0]?.mediumgif?.url||c.media[0]?.tinygif?.url;if(d)return Kc.set(t,d),d}const l=`https://via.placeholder.com/300x200/9333ea/ffffff?text=${e}+GIF`;return Kc.set(t,l),l}catch(e){console.error("Error fetching Tenor GIF:",e);const n="https://via.placeholder.com/300x200/ef4444/ffffff?text=GIF+Error";return Kc.set(t,n),n}},gz="AIzaSyDxTJKoi1S8YjJZD12QTa4F9hV8fN8pNqo",pz="https://www.googleapis.com/youtube/v3/search",Xc=new Map,mz=async t=>{if(Xc.has(t))return Xc.get(t);try{const e=encodeURIComponent(t),n=`${pz}?key=${gz}&q=${e}&part=snippet&type=video&maxResults=1&videoEmbeddable=true&safeSearch=strict`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const a=await i.json();if(a.items&&a.items.length>0){const c=a.items[0].id.videoId;if(c)return Xc.set(t,c),c}const l="dQw4w9WgXcQ";return Xc.set(t,l),l}catch(e){console.error("Error fetching YouTube video:",e);const n="dQw4w9WgXcQ";return Xc.set(t,n),n}},yz=oz,o1=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const i=await T2(Zy,"groqChat")({message:e});return console.log("groqChat response:",i.data),i.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},vz=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const i=T2(Zy,"groqChat");console.log("Starting streaming request...");const{stream:a,data:l}=await i.stream({message:n});console.log("Stream started, waiting for chunks...");let c="";for await(const f of a)if(console.log("Received chunk:",f),f&&typeof f=="object"&&"type"in f&&"content"in f){const p=f;console.log("Processing chunk:",p),p.type==="chunk"&&p.content&&(c+=p.content,e?.(p.content))}console.log("Waiting for final result...");const d=await l;return console.log("Final result received:",d),d&&typeof d=="object"&&"response"in d?(console.log("Returning final result response"),d.response):(console.log("Returning accumulated response:",c),c)}catch(n){throw console.error("Firebase function streaming error:",n),n}},_z=async(t,e,n)=>{try{const a=`
        Return ONLY a valid JSON array.

        RULES
        • Each object = exactly one tag from SCHEMA; no new tags.
        • Include:
        – Only one of {quiz} with multiple questions
        – At least one of {codeblock or diagram or htmlCanvas or table}
        – At least two of of {img or vid or gif}
        - At least five of of {textblock or ul or ol }
        - ONLY ONE of { tip or note or warning or quote or link}
        • You should educate the user about the concept and then ask the quiz about the material you taught.
        • Use different tags to make the studying experience diverse and engaging
        • Cover, somewhere in the set: definition, deep explanation, worked example, real-world analogy and links at what to look up next.
        • If you have a long explanation, break it into multiple textblocks.
        • Only include tags that genuinely help explain the concept. Don't add tags unnecessarily or just to fill space.
        • Tone: encouraging, professional
        • Make the text of the explanations long and detailed! You need to educate the user
        • You need to have textblocks or lists separating each visual tag, e.g. img, vid, gif, codeblock, diagram, htmlCanvas, table.
        • Make sure to put the concept over the context, not focusing on the context but rather on what actually needs to be explained.

        OUTPUT
        VALID JSON array only — no comments, or extra text. All the braces must be properly closed.

        SCHEMA = ${JSON.stringify([{large_header:"Large Header Text"},{small_header:"Small Header Text"},{ul:["Item one","Item 2","Item 3"]},{quiz:[{question:"What is the capital of France?",answers:[{Berlin:"It's germany!"},{Madrid:"It is spain :("},{Paris:"Correct! It's Paris!"}],correctAnswer:2},{question:"What is the capital of Poland?",answers:[{Berlin:"It's germany!"},{Warshava:"Yahoo! It's Poland!"},{Paris:"No!"}],correctAnswer:1}]},{img:["very short image description(e.g. funny cats)","The image shows a group of cats doing something amusing."]},{vid:["very short video description(e.g. playing footbal)","This video shows a group of people playing football in a park."]},{gif:["very short gif description(e.g. frogs jumping)","This gif shows frogs jumping around in a pond."]},{textblock:"text, **text**, (text)[text.com]"},{ol:["Heyyo","Nice","That's a list"]},{codeblock:"console.log('Hello World');"},{quote:"This is a quote"},{link:"https://example.com"},{table:[["Header1","Header2"],["Row1Col1","Row1Col2"],["Row2Col1","Row2Col2"]]},{diagram:"a mermaid-based diagram: graph TD; A-->B; A-->C; B-->D; C-->D;"},{note:"This is a note."},{warning:"This is a warning note."},{tip:"This is a tip note."},{htmlCanvas:"js code for HTML canvas"}])}

        CONTEXT = ${e}
        CONCEPT = ${t}
        `,l=`Provide a brief explanation in 50 words or less.

        CRITICAL:
        - Highlight EVERY key term with [square-braces], e.g., [artificial intelligence], [mammal], [vector product]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with explanation content
        - ONLY the explanation text

        Topic to explain: `,c=`You are an expert educator. Respond ONLY with a valid JSON array in the following format: ["concept1", "concept2", "concept3"]. 

        Instructions:
        - Suggest exactly 3-5 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON array.
        - Only output the JSON array as specified.

        Concept: `,d=o1(a),f=o1(c+t);let p="";const y=vz(l+t,H=>{p+=H,n(H)}),[_,b,x]=await Promise.all([d,f,y]);let R=b??"";R=R.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"").replace(/\\/g,"&#92;").replace(/\$/g,"&#36;").replace(/\^/g,"&#94;").replace(/_/g,"&#95;").replace(/~/g,"&#126;").replace(/&/g,"&#38;");let D=[];const k=R.match(/"(.*?)"/g);k&&(D=k.map(H=>H.replace(/"/g,"")));const U={firstResponse:{response:await yz(JSON.parse(_.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"")))},secondResponse:{response:x?.replace(/\[/g,"_").replace(/\]/g,"_")},thirdResponse:{response:D}};return console.log("askAITwice response:",U),U}catch(i){throw console.error("Error in askAITwice:",i),i}},C2=q.createContext(null),bz=({children:t,nodes:e,onNodesChange:n,onEdgesChange:i,setNodes:a,showExplanation:l})=>{const c=(d,f,p,y,_,b,x)=>{const R=e.find(Y=>Y.id===f);if(!R)return null;const D=R.data.tokenColors||{},k=d.myConcept||d.word;if(D[k])return console.log(`Token "${k}" is already colored, ignoring click`),null;let U;y==="staticEditable"?U=a1():U=_?ZL(_):a1();const H={...D};d.myConcept?H[d.myConcept]=U:H[d.word]=U,a(Y=>Y.map(I=>I.id===f?{...I,data:{...I.data,tokenColors:H}}:I));const G=JL(p),j=nz(G,d.word,"Loading...","",U,y,f);j.data.isLoading=!0;const Q=rz(f,j.id,U,x);return n([{type:"add",item:j}]),i([{type:"add",item:Q}]),_z(d.word,b||"",Y=>{a(I=>I.map(T=>{if(T.id===j.id){const A=T.data.summary||"";return{...T,data:{...T.data,label:A+Y,summary:A+Y}}}return T}))}).then(Y=>{const I=Y.firstResponse?.response||d.word,T=Y.secondResponse?.response||d.word,A=Y.thirdResponse?.response||{};a(L=>L.map(z=>z.id===j.id?{...z,data:{...z.data,label:T,title:d.word,summary:T,full_text:I,suggestions:A,isLoading:!1}}:z))}).catch(()=>{a(Y=>Y.map(I=>I.id===j.id?{...I,data:{...I.data,label:d.word,title:d.word,summary:d.word,full_text:d.word,suggestions:[],isLoading:!1}}:I))}),U};return S.jsx(C2.Provider,{value:{handleTokenClick:c,setNodes:a,showExplanation:l},children:t})},I2=()=>{const t=q.useContext(C2);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},k2=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return S.jsx("div",{className:"flex items-center justify-center",children:S.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function Ez({data:t,id:e}){const[n,i]=q.useState(!1),[a,l]=q.useState(t.summary||t.label||"Static Node"),{handleTokenClick:c,showExplanation:d}=I2(),{getNode:f,setViewport:p}=Lu();q.useEffect(()=>{n||l(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const y=N2(a),_=(Q,Y)=>{Y.stopPropagation(),console.log("Static Token clicked:",Q),c(Q,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",Q.suggestionId)},b=Q=>{Q.stopPropagation(),i(!0)},x=()=>{i(!1)},R=Q=>{Q.stopPropagation()},D=Q=>{Q.stopPropagation(),Q.key==="Enter"&&x(),Q.key==="Escape"&&(l(t.summary||t.label||"Static Node"),i(!1))},k=Q=>{Q.stopPropagation(),d&&d(t.title||"Explanation",t.full_text||"No detailed information available.")},U=Q=>{if(Q.stopPropagation(),t.previousNode){const Y=f(t.previousNode);if(Y){const{x:I,y:T}=Y.position;p({x:-I+200,y:-T+100,zoom:1},{duration:500})}}},H=(()=>{const Q=t.tokenColors||{};return y.map((Y,I)=>{const T=Y.myConcept||Y.word,A=Q[T],L=!A;return S.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                              ${L?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"} 
                              ${Y.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:A||"transparent",color:A?t.myColor||"#ffffff":"inherit",border:A?`1px solid ${A}`:""},onClick:z=>L?_(Y,z):z.stopPropagation(),children:[Y.word,I<y.length-1?" ":""]},I)})})(),G=S.jsxs("div",{className:"node-buttons",children:[t.previousNode&&S.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:U,title:"Go to previous node",children:"←"}),S.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:k,title:"Show full text",children:"📄"})]}),j=q.useMemo(()=>t.isLoading?S.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[S.jsx(k2,{size:"small",color:t.myColor||"#6366f1"}),S.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):n?S.jsx("input",{type:"text",value:a,onChange:Q=>l(Q.target.value),onBlur:x,onKeyDown:D,onClick:R,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[S.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),S.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&S.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                         hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:U,title:"Go to previous node",children:"←"}),S.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:k,title:"Show full text",children:"📄"})]})]}),S.jsx("div",{className:"flex-1",children:S.jsx("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",onClick:b,children:H})}),S.jsxs("div",{className:"mt-2",children:[S.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),S.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((Q,Y)=>{const T=(t.tokenColors||{})[Q],A=!T;return S.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${A?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:T||"transparent",color:T?t.myColor||"#ffffff":"inherit",border:T?`1px solid ${T}`:""},onClick:L=>A?_({word:Q,myConcept:Q,suggestionId:t.label+Q+Y},L):L.stopPropagation(),children:[Q,Y<t.suggestions.length-1?" ":"",S.jsx(jn,{type:"source",position:Se.Right,id:t.label+Q+Y})]},Y)}):S.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[n,a,y.length,b,x,D,R,H,G]);return S.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:t.myColor,color:t.myColor?WL(t.myColor):"#f8faff",border:t.myColor?`1px solid ${Yh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[S.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:j}),S.jsx(jn,{type:"source",position:Se.Bottom,id:"bottom-source"}),S.jsx(jn,{type:"target",position:Se.Bottom,id:"bottom-target"})]})}function wz({data:t,id:e}){const[n,i]=q.useState(!1),[a,l]=q.useState(t.summary||t.label||"Draggable Node"),{getNodes:c,getNode:d,setViewport:f}=Lu(),{handleTokenClick:p,showExplanation:y}=I2();q.useEffect(()=>{n||l(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const _=N2(a),b=_,x=()=>!0,R=(T,A)=>{A.stopPropagation();const z=c().find(N=>N.id===e);return z?p(T,e,z.position,z.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},D=T=>{T.stopPropagation(),i(!0)},k=()=>{i(!1)},U=T=>{T.stopPropagation()},H=T=>{T.stopPropagation(),T.key==="Enter"&&k(),T.key==="Escape"&&(l(t.summary||t.label||"Draggable Node"),i(!1))},G=T=>{T.stopPropagation(),y&&y(t.title,t.full_text||"No detailed information available.")},j=T=>{if(T.stopPropagation(),t.previousNode){const A=d(t.previousNode);if(A){const{x:L,y:z}=A.position;f({x:-L+200,y:-z+100,zoom:1},{duration:500})}}},Q=q.useMemo(()=>{const T={};return b.forEach(A=>{const L=A.myConcept||A.word;T[L]||(T[L]=[]),T[L].push(A)}),T},[b]);function Y(T){const A=T.replace(/^#/,""),L=parseInt(A.substring(0,2),16),z=parseInt(A.substring(2,4),16),B=parseInt(A.substring(4,6),16),[N,O,$]=[L,z,B].map(K=>{const te=K/255;return te<=.03928?te/12.92:Math.pow((te+.055)/1.055,2.4)});return .2126*N+.7152*O+.0722*$>.179?"#000000":"#ffffff"}const I=q.useMemo(()=>n?S.jsx("input",{type:"text",value:a,onChange:T=>l(T.target.value),onBlur:k,onKeyDown:H,onClick:U,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):S.jsxs(S.Fragment,{children:[t.isLoading&&S.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[S.jsx(k2,{size:"small",color:t.myColor||"#6366f1"}),S.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[S.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),S.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&S.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:j,title:"Go to previous node",children:"←"}),S.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:G,title:"Show full text",children:"📄"})]})]}),S.jsx("div",{className:"flex-1",children:S.jsx("div",{className:"cursor-text leading-relaxed break-words",onClick:D,children:b.map((T,A)=>{const L=t.tokenColors||{},z=T.myConcept||T.word,B=L[z],N=!B;return S.jsxs("span",{className:`inline-block px-1 py-0.5 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${N?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${T.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:B||"transparent",color:Y(B||t.myColor),border:B?`1px solid ${Yh(B,20)}`:"",boxShadow:B?`0 0 0 1px ${B}25`:""},onClick:O=>N?R(T,O):O.stopPropagation(),children:[T.word,A<b.length-1?" ":""]},A)})})}),S.jsxs("div",{className:"mt-2",children:[S.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),S.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((T,A)=>{const z=(t.tokenColors||{})[T],B=!z;return S.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${B?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:z||"transparent",color:Y(z||t.myColor),border:z?`1px solid ${Yh(z,20)}`:""},onClick:N=>B?R({word:T,myConcept:T,suggestionId:t.label+T+A},N):N.stopPropagation(),children:[T,S.jsx(jn,{type:"source",position:Se.Bottom,id:t.label+T+A})]},A)}):S.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,a,b,_,Q,D,k,H,U,G,R,x,t.previousNode,j,t.tokenColors,t.myColor,t.isLoading]);return S.jsxs("div",{className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[600px] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px]
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?Y(t.myColor):"#f0f4f8",border:t.myColor?`1px solid ${Yh(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.12)"},children:[S.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:I}),S.jsx(jn,{type:"source",position:Se.Bottom,id:"bottom-source"}),S.jsx(jn,{type:"target",position:Se.Top,id:"top-target"}),S.jsx(jn,{type:"source",position:Se.Left,id:"left-source"}),S.jsx(jn,{type:"target",position:Se.Left,id:"left-target"}),S.jsx(jn,{type:"source",position:Se.Right,id:"right-source"}),S.jsx(jn,{type:"target",position:Se.Right,id:"right-target"})]})}const xz={staticEditable:Ez,draggableEditable:wz},Tz=q.memo(function({isVisible:e,explanation:n,onClose:i}){return e?S.jsx(m3,{defaultSize:{width:380},style:{background:"transparent",position:"fixed",right:"12px",top:"80px",borderRadius:"16px",zIndex:1e3},enable:{right:!1,top:!1,bottom:!1,left:!0},children:S.jsxs("div",{className:`bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl
                           border border-gray-200/50 dark:border-gray-700/50
                           animate-in slide-in-from-right-3 fade-in duration-500
                           transition-all ease-out
                           ring-1 ring-white/20 dark:ring-white/10 rounded-2xl
                           before:absolute before:inset-0 before:bg-gradient-to-br 
                           before:from-white/40 before:to-transparent before:pointer-events-none
                           dark:before:from-gray-800/40 dark:before:to-transparent
                           relative overflow-auto`,style:{maxHeight:"calc(100vh - 100px)",height:"auto",minHeight:"200px"},children:[S.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 opacity-60"}),S.jsx("div",{className:"relative z-10 overflow-auto h-full",children:S.jsx(ML,{explanation:n,onClose:i,isVisible:e})})]})}):null});function Sz(){const[t,e]=q.useState(!1),[n,i]=q.useState(!1),[a,l]=q.useState(null),c=q.useCallback((K,te)=>{l({title:K,text:te}),e(!0)},[]),d=q.useCallback(()=>{e(!1)},[]),{user:f,signOut:p}=jL(),{notifications:y,removeNotification:_,showSuccess:b,showError:x,showInfo:R}=QL(),{nodes:D,edges:k,allBoards:U,currentBoard:H,isSwitchingBoard:G,isSaving:j,onNodesChange:Q,onEdgesChange:Y,setNodes:I,switchToBoard:T,createNewBoard:A,deleteBoard:L,updateBoardName:z,clearBoardState:B}=XL(f,{showSuccess:b,showError:x,showInfo:R}),N=async()=>{await p(),B()},O=()=>{i(!0)},$=q.useCallback(K=>{const te={id:`e${K.source}-${K.target}`,source:K.source,target:K.target,sourceHandle:K.sourceHandle,targetHandle:K.targetHandle};Y([{type:"add",item:te}])},[Y]),M=q.useMemo(()=>S.jsxs(NT,{nodes:D,edges:k,onNodesChange:Q,onEdgesChange:Y,onConnect:$,nodeTypes:xz,connectionMode:Qs.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[S.jsx(t3,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg"}),S.jsx(o3,{variant:Nr.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[D,k,Q,Y,$]);return f?S.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[S.jsx(zL,{notifications:y,onRemove:_}),S.jsxs("div",{style:{height:"100%",position:"relative"},children:[S.jsxs(QT,{direction:"horizontal",children:[S.jsx(t0,{defaultSize:15,minSize:10,maxSize:30,children:S.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:S.jsx(DL,{allBoards:U,currentBoard:H,onSwitchBoard:T,onCreateBoard:async K=>{await A(K)},onDeleteBoard:L,onSignOut:N,isLoading:G})})}),S.jsx(WT,{}),S.jsx(t0,{children:S.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[S.jsx(VL,{name:H?.name||"Loading...",onSetName:z,user:f,isSaving:j}),S.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:S.jsx(bz,{nodes:D,onNodesChange:Q,onEdgesChange:Y,setNodes:I,showExplanation:c,children:M})})]})})]}),S.jsx(Tz,{isVisible:t,explanation:a,onClose:d})]})]}):n?S.jsx(IL,{}):S.jsx(UL,{onLogin:O})}function Az(){return S.jsx(PL,{children:S.jsx(Sz,{})})}const D2=document.getElementById("root");if(!D2)throw new Error("Failed to find the root element");fN.createRoot(D2).render(S.jsx(q.StrictMode,{children:S.jsx(Az,{})}));
